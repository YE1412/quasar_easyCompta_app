var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
import { $ as defineComponent, f as ref, aL as shallowRef, o as onMounted, n as onBeforeUnmount, w as watch, aM as toRaw, h, aN as isProxy, aO as version$1, ac as _export_sfc, ao as useI18n, d as computed, _ as __vitePreload, a3 as openBlock, a6 as createElementBlock, ar as createBaseVNode, aa as toDisplayString, aq as unref, a1 as createBlock, as as normalizeStyle, a5 as createCommentVNode, at as normalizeClass, a4 as createVNode, a2 as withCtx, a9 as createTextVNode, ap as onBeforeMount, Q as QIcon } from "./index.js";
import { Q as QNoSsr } from "./QNoSsr.js";
import { Q as QPage } from "./QPage.js";
import { u as useMessageStore, M as MessagesItem } from "./use-key-composition.js";
import { u as useCounterStore } from "./counter.js";
import { u as useQuasar, a as useUserStore, i as isDbConnectionOpen, o as openDbConnection, n as newQuery, s as setDecryptApi, _ as __TRANSFORMOBJ__ } from "./use-quasar.js";
import { Q as QTr, a as QTd, b as QTable } from "./QTable.js";
import { u as useSessionStore } from "./session.js";
import "./invoice.service.js";
import "./index4.js";
import "./index2.js";
import "./service.service.js";
import "./WasmModules.js";
import "./QList.js";
import "./QSelect.js";
import "./use-prevent-scroll.js";
import "./session.service.js";
/*!
 * @kurkle/color v0.3.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */
function round(v) {
  return v + 0.5 | 0;
}
const lim = (v, l, h3) => Math.max(Math.min(v, h3), l);
function p2b(v) {
  return lim(round(v * 2.55), 0, 255);
}
function n2b(v) {
  return lim(round(v * 255), 0, 255);
}
function b2n(v) {
  return lim(round(v / 2.55) / 100, 0, 1);
}
function n2p(v) {
  return lim(round(v * 100), 0, 100);
}
const map$1 = { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15 };
const hex = [..."0123456789ABCDEF"];
const h1 = (b) => hex[b & 15];
const h2 = (b) => hex[(b & 240) >> 4] + hex[b & 15];
const eq = (b) => (b & 240) >> 4 === (b & 15);
const isShort = (v) => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);
function hexParse(str) {
  var len = str.length;
  var ret;
  if (str[0] === "#") {
    if (len === 4 || len === 5) {
      ret = {
        r: 255 & map$1[str[1]] * 17,
        g: 255 & map$1[str[2]] * 17,
        b: 255 & map$1[str[3]] * 17,
        a: len === 5 ? map$1[str[4]] * 17 : 255
      };
    } else if (len === 7 || len === 9) {
      ret = {
        r: map$1[str[1]] << 4 | map$1[str[2]],
        g: map$1[str[3]] << 4 | map$1[str[4]],
        b: map$1[str[5]] << 4 | map$1[str[6]],
        a: len === 9 ? map$1[str[7]] << 4 | map$1[str[8]] : 255
      };
    }
  }
  return ret;
}
const alpha = (a, f) => a < 255 ? f(a) : "";
function hexString(v) {
  var f = isShort(v) ? h1 : h2;
  return v ? "#" + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f) : void 0;
}
const HUE_RE = /^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;
function hsl2rgbn(h3, s, l) {
  const a = s * Math.min(l, 1 - l);
  const f = (n, k = (n + h3 / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
  return [f(0), f(8), f(4)];
}
function hsv2rgbn(h3, s, v) {
  const f = (n, k = (n + h3 / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);
  return [f(5), f(3), f(1)];
}
function hwb2rgbn(h3, w, b) {
  const rgb = hsl2rgbn(h3, 1, 0.5);
  let i;
  if (w + b > 1) {
    i = 1 / (w + b);
    w *= i;
    b *= i;
  }
  for (i = 0; i < 3; i++) {
    rgb[i] *= 1 - w - b;
    rgb[i] += w;
  }
  return rgb;
}
function hueValue(r, g, b, d, max) {
  if (r === max) {
    return (g - b) / d + (g < b ? 6 : 0);
  }
  if (g === max) {
    return (b - r) / d + 2;
  }
  return (r - g) / d + 4;
}
function rgb2hsl(v) {
  const range = 255;
  const r = v.r / range;
  const g = v.g / range;
  const b = v.b / range;
  const max = Math.max(r, g, b);
  const min = Math.min(r, g, b);
  const l = (max + min) / 2;
  let h3, s, d;
  if (max !== min) {
    d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    h3 = hueValue(r, g, b, d, max);
    h3 = h3 * 60 + 0.5;
  }
  return [h3 | 0, s || 0, l];
}
function calln(f, a, b, c) {
  return (Array.isArray(a) ? f(a[0], a[1], a[2]) : f(a, b, c)).map(n2b);
}
function hsl2rgb(h3, s, l) {
  return calln(hsl2rgbn, h3, s, l);
}
function hwb2rgb(h3, w, b) {
  return calln(hwb2rgbn, h3, w, b);
}
function hsv2rgb(h3, s, v) {
  return calln(hsv2rgbn, h3, s, v);
}
function hue(h3) {
  return (h3 % 360 + 360) % 360;
}
function hueParse(str) {
  const m = HUE_RE.exec(str);
  let a = 255;
  let v;
  if (!m) {
    return;
  }
  if (m[5] !== v) {
    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);
  }
  const h3 = hue(+m[2]);
  const p1 = +m[3] / 100;
  const p2 = +m[4] / 100;
  if (m[1] === "hwb") {
    v = hwb2rgb(h3, p1, p2);
  } else if (m[1] === "hsv") {
    v = hsv2rgb(h3, p1, p2);
  } else {
    v = hsl2rgb(h3, p1, p2);
  }
  return {
    r: v[0],
    g: v[1],
    b: v[2],
    a
  };
}
function rotate(v, deg) {
  var h3 = rgb2hsl(v);
  h3[0] = hue(h3[0] + deg);
  h3 = hsl2rgb(h3);
  v.r = h3[0];
  v.g = h3[1];
  v.b = h3[2];
}
function hslString(v) {
  if (!v) {
    return;
  }
  const a = rgb2hsl(v);
  const h3 = a[0];
  const s = n2p(a[1]);
  const l = n2p(a[2]);
  return v.a < 255 ? `hsla(${h3}, ${s}%, ${l}%, ${b2n(v.a)})` : `hsl(${h3}, ${s}%, ${l}%)`;
}
const map = {
  x: "dark",
  Z: "light",
  Y: "re",
  X: "blu",
  W: "gr",
  V: "medium",
  U: "slate",
  A: "ee",
  T: "ol",
  S: "or",
  B: "ra",
  C: "lateg",
  D: "ights",
  R: "in",
  Q: "turquois",
  E: "hi",
  P: "ro",
  O: "al",
  N: "le",
  M: "de",
  L: "yello",
  F: "en",
  K: "ch",
  G: "arks",
  H: "ea",
  I: "ightg",
  J: "wh"
};
const names$1 = {
  OiceXe: "f0f8ff",
  antiquewEte: "faebd7",
  aqua: "ffff",
  aquamarRe: "7fffd4",
  azuY: "f0ffff",
  beige: "f5f5dc",
  bisque: "ffe4c4",
  black: "0",
  blanKedOmond: "ffebcd",
  Xe: "ff",
  XeviTet: "8a2be2",
  bPwn: "a52a2a",
  burlywood: "deb887",
  caMtXe: "5f9ea0",
  KartYuse: "7fff00",
  KocTate: "d2691e",
  cSO: "ff7f50",
  cSnflowerXe: "6495ed",
  cSnsilk: "fff8dc",
  crimson: "dc143c",
  cyan: "ffff",
  xXe: "8b",
  xcyan: "8b8b",
  xgTMnPd: "b8860b",
  xWay: "a9a9a9",
  xgYF: "6400",
  xgYy: "a9a9a9",
  xkhaki: "bdb76b",
  xmagFta: "8b008b",
  xTivegYF: "556b2f",
  xSange: "ff8c00",
  xScEd: "9932cc",
  xYd: "8b0000",
  xsOmon: "e9967a",
  xsHgYF: "8fbc8f",
  xUXe: "483d8b",
  xUWay: "2f4f4f",
  xUgYy: "2f4f4f",
  xQe: "ced1",
  xviTet: "9400d3",
  dAppRk: "ff1493",
  dApskyXe: "bfff",
  dimWay: "696969",
  dimgYy: "696969",
  dodgerXe: "1e90ff",
  fiYbrick: "b22222",
  flSOwEte: "fffaf0",
  foYstWAn: "228b22",
  fuKsia: "ff00ff",
  gaRsbSo: "dcdcdc",
  ghostwEte: "f8f8ff",
  gTd: "ffd700",
  gTMnPd: "daa520",
  Way: "808080",
  gYF: "8000",
  gYFLw: "adff2f",
  gYy: "808080",
  honeyMw: "f0fff0",
  hotpRk: "ff69b4",
  RdianYd: "cd5c5c",
  Rdigo: "4b0082",
  ivSy: "fffff0",
  khaki: "f0e68c",
  lavFMr: "e6e6fa",
  lavFMrXsh: "fff0f5",
  lawngYF: "7cfc00",
  NmoncEffon: "fffacd",
  ZXe: "add8e6",
  ZcSO: "f08080",
  Zcyan: "e0ffff",
  ZgTMnPdLw: "fafad2",
  ZWay: "d3d3d3",
  ZgYF: "90ee90",
  ZgYy: "d3d3d3",
  ZpRk: "ffb6c1",
  ZsOmon: "ffa07a",
  ZsHgYF: "20b2aa",
  ZskyXe: "87cefa",
  ZUWay: "778899",
  ZUgYy: "778899",
  ZstAlXe: "b0c4de",
  ZLw: "ffffe0",
  lime: "ff00",
  limegYF: "32cd32",
  lRF: "faf0e6",
  magFta: "ff00ff",
  maPon: "800000",
  VaquamarRe: "66cdaa",
  VXe: "cd",
  VScEd: "ba55d3",
  VpurpN: "9370db",
  VsHgYF: "3cb371",
  VUXe: "7b68ee",
  VsprRggYF: "fa9a",
  VQe: "48d1cc",
  VviTetYd: "c71585",
  midnightXe: "191970",
  mRtcYam: "f5fffa",
  mistyPse: "ffe4e1",
  moccasR: "ffe4b5",
  navajowEte: "ffdead",
  navy: "80",
  Tdlace: "fdf5e6",
  Tive: "808000",
  TivedBb: "6b8e23",
  Sange: "ffa500",
  SangeYd: "ff4500",
  ScEd: "da70d6",
  pOegTMnPd: "eee8aa",
  pOegYF: "98fb98",
  pOeQe: "afeeee",
  pOeviTetYd: "db7093",
  papayawEp: "ffefd5",
  pHKpuff: "ffdab9",
  peru: "cd853f",
  pRk: "ffc0cb",
  plum: "dda0dd",
  powMrXe: "b0e0e6",
  purpN: "800080",
  YbeccapurpN: "663399",
  Yd: "ff0000",
  Psybrown: "bc8f8f",
  PyOXe: "4169e1",
  saddNbPwn: "8b4513",
  sOmon: "fa8072",
  sandybPwn: "f4a460",
  sHgYF: "2e8b57",
  sHshell: "fff5ee",
  siFna: "a0522d",
  silver: "c0c0c0",
  skyXe: "87ceeb",
  UXe: "6a5acd",
  UWay: "708090",
  UgYy: "708090",
  snow: "fffafa",
  sprRggYF: "ff7f",
  stAlXe: "4682b4",
  tan: "d2b48c",
  teO: "8080",
  tEstN: "d8bfd8",
  tomato: "ff6347",
  Qe: "40e0d0",
  viTet: "ee82ee",
  JHt: "f5deb3",
  wEte: "ffffff",
  wEtesmoke: "f5f5f5",
  Lw: "ffff00",
  LwgYF: "9acd32"
};
function unpack() {
  const unpacked = {};
  const keys = Object.keys(names$1);
  const tkeys = Object.keys(map);
  let i, j, k, ok, nk;
  for (i = 0; i < keys.length; i++) {
    ok = nk = keys[i];
    for (j = 0; j < tkeys.length; j++) {
      k = tkeys[j];
      nk = nk.replace(k, map[k]);
    }
    k = parseInt(names$1[ok], 16);
    unpacked[nk] = [k >> 16 & 255, k >> 8 & 255, k & 255];
  }
  return unpacked;
}
let names;
function nameParse(str) {
  if (!names) {
    names = unpack();
    names.transparent = [0, 0, 0, 0];
  }
  const a = names[str.toLowerCase()];
  return a && {
    r: a[0],
    g: a[1],
    b: a[2],
    a: a.length === 4 ? a[3] : 255
  };
}
const RGB_RE = /^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;
function rgbParse(str) {
  const m = RGB_RE.exec(str);
  let a = 255;
  let r, g, b;
  if (!m) {
    return;
  }
  if (m[7] !== r) {
    const v = +m[7];
    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);
  }
  r = +m[1];
  g = +m[3];
  b = +m[5];
  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));
  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));
  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));
  return {
    r,
    g,
    b,
    a
  };
}
function rgbString(v) {
  return v && (v.a < 255 ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})` : `rgb(${v.r}, ${v.g}, ${v.b})`);
}
const to = (v) => v <= 31308e-7 ? v * 12.92 : Math.pow(v, 1 / 2.4) * 1.055 - 0.055;
const from = (v) => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
function interpolate$1(rgb1, rgb2, t) {
  const r = from(b2n(rgb1.r));
  const g = from(b2n(rgb1.g));
  const b = from(b2n(rgb1.b));
  return {
    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),
    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),
    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),
    a: rgb1.a + t * (rgb2.a - rgb1.a)
  };
}
function modHSL(v, i, ratio) {
  if (v) {
    let tmp = rgb2hsl(v);
    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));
    tmp = hsl2rgb(tmp);
    v.r = tmp[0];
    v.g = tmp[1];
    v.b = tmp[2];
  }
}
function clone$1(v, proto) {
  return v ? Object.assign(proto || {}, v) : v;
}
function fromObject(input) {
  var v = { r: 0, g: 0, b: 0, a: 255 };
  if (Array.isArray(input)) {
    if (input.length >= 3) {
      v = { r: input[0], g: input[1], b: input[2], a: 255 };
      if (input.length > 3) {
        v.a = n2b(input[3]);
      }
    }
  } else {
    v = clone$1(input, { r: 0, g: 0, b: 0, a: 1 });
    v.a = n2b(v.a);
  }
  return v;
}
function functionParse(str) {
  if (str.charAt(0) === "r") {
    return rgbParse(str);
  }
  return hueParse(str);
}
class Color {
  constructor(input) {
    if (input instanceof Color) {
      return input;
    }
    const type = typeof input;
    let v;
    if (type === "object") {
      v = fromObject(input);
    } else if (type === "string") {
      v = hexParse(input) || nameParse(input) || functionParse(input);
    }
    this._rgb = v;
    this._valid = !!v;
  }
  get valid() {
    return this._valid;
  }
  get rgb() {
    var v = clone$1(this._rgb);
    if (v) {
      v.a = b2n(v.a);
    }
    return v;
  }
  set rgb(obj) {
    this._rgb = fromObject(obj);
  }
  rgbString() {
    return this._valid ? rgbString(this._rgb) : void 0;
  }
  hexString() {
    return this._valid ? hexString(this._rgb) : void 0;
  }
  hslString() {
    return this._valid ? hslString(this._rgb) : void 0;
  }
  mix(color2, weight) {
    if (color2) {
      const c1 = this.rgb;
      const c2 = color2.rgb;
      let w2;
      const p = weight === w2 ? 0.5 : weight;
      const w = 2 * p - 1;
      const a = c1.a - c2.a;
      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2;
      w2 = 1 - w1;
      c1.r = 255 & w1 * c1.r + w2 * c2.r + 0.5;
      c1.g = 255 & w1 * c1.g + w2 * c2.g + 0.5;
      c1.b = 255 & w1 * c1.b + w2 * c2.b + 0.5;
      c1.a = p * c1.a + (1 - p) * c2.a;
      this.rgb = c1;
    }
    return this;
  }
  interpolate(color2, t) {
    if (color2) {
      this._rgb = interpolate$1(this._rgb, color2._rgb, t);
    }
    return this;
  }
  clone() {
    return new Color(this.rgb);
  }
  alpha(a) {
    this._rgb.a = n2b(a);
    return this;
  }
  clearer(ratio) {
    const rgb = this._rgb;
    rgb.a *= 1 - ratio;
    return this;
  }
  greyscale() {
    const rgb = this._rgb;
    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);
    rgb.r = rgb.g = rgb.b = val;
    return this;
  }
  opaquer(ratio) {
    const rgb = this._rgb;
    rgb.a *= 1 + ratio;
    return this;
  }
  negate() {
    const v = this._rgb;
    v.r = 255 - v.r;
    v.g = 255 - v.g;
    v.b = 255 - v.b;
    return this;
  }
  lighten(ratio) {
    modHSL(this._rgb, 2, ratio);
    return this;
  }
  darken(ratio) {
    modHSL(this._rgb, 2, -ratio);
    return this;
  }
  saturate(ratio) {
    modHSL(this._rgb, 1, ratio);
    return this;
  }
  desaturate(ratio) {
    modHSL(this._rgb, 1, -ratio);
    return this;
  }
  rotate(deg) {
    rotate(this._rgb, deg);
    return this;
  }
}
/*!
 * Chart.js v4.1.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
function noop() {
}
const uid = (() => {
  let id = 0;
  return () => id++;
})();
function isNullOrUndef(value) {
  return value === null || typeof value === "undefined";
}
function isArray(value) {
  if (Array.isArray && Array.isArray(value)) {
    return true;
  }
  const type = Object.prototype.toString.call(value);
  if (type.slice(0, 7) === "[object" && type.slice(-6) === "Array]") {
    return true;
  }
  return false;
}
function isObject(value) {
  return value !== null && Object.prototype.toString.call(value) === "[object Object]";
}
function isNumberFinite(value) {
  return (typeof value === "number" || value instanceof Number) && isFinite(+value);
}
function finiteOrDefault(value, defaultValue) {
  return isNumberFinite(value) ? value : defaultValue;
}
function valueOrDefault(value, defaultValue) {
  return typeof value === "undefined" ? defaultValue : value;
}
const toPercentage = (value, dimension) => typeof value === "string" && value.endsWith("%") ? parseFloat(value) / 100 : +value / dimension;
const toDimension = (value, dimension) => typeof value === "string" && value.endsWith("%") ? parseFloat(value) / 100 * dimension : +value;
function callback(fn, args, thisArg) {
  if (fn && typeof fn.call === "function") {
    return fn.apply(thisArg, args);
  }
}
function each(loopable, fn, thisArg, reverse) {
  let i, len, keys;
  if (isArray(loopable)) {
    len = loopable.length;
    if (reverse) {
      for (i = len - 1; i >= 0; i--) {
        fn.call(thisArg, loopable[i], i);
      }
    } else {
      for (i = 0; i < len; i++) {
        fn.call(thisArg, loopable[i], i);
      }
    }
  } else if (isObject(loopable)) {
    keys = Object.keys(loopable);
    len = keys.length;
    for (i = 0; i < len; i++) {
      fn.call(thisArg, loopable[keys[i]], keys[i]);
    }
  }
}
function _elementsEqual(a0, a1) {
  let i, ilen, v0, v1;
  if (!a0 || !a1 || a0.length !== a1.length) {
    return false;
  }
  for (i = 0, ilen = a0.length; i < ilen; ++i) {
    v0 = a0[i];
    v1 = a1[i];
    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {
      return false;
    }
  }
  return true;
}
function clone(source) {
  if (isArray(source)) {
    return source.map(clone);
  }
  if (isObject(source)) {
    const target = /* @__PURE__ */ Object.create(null);
    const keys = Object.keys(source);
    const klen = keys.length;
    let k = 0;
    for (; k < klen; ++k) {
      target[keys[k]] = clone(source[keys[k]]);
    }
    return target;
  }
  return source;
}
function isValidKey(key) {
  return [
    "__proto__",
    "prototype",
    "constructor"
  ].indexOf(key) === -1;
}
function _merger(key, target, source, options) {
  if (!isValidKey(key)) {
    return;
  }
  const tval = target[key];
  const sval = source[key];
  if (isObject(tval) && isObject(sval)) {
    merge(tval, sval, options);
  } else {
    target[key] = clone(sval);
  }
}
function merge(target, source, options) {
  const sources = isArray(source) ? source : [
    source
  ];
  const ilen = sources.length;
  if (!isObject(target)) {
    return target;
  }
  options = options || {};
  const merger = options.merger || _merger;
  let current;
  for (let i = 0; i < ilen; ++i) {
    current = sources[i];
    if (!isObject(current)) {
      continue;
    }
    const keys = Object.keys(current);
    for (let k = 0, klen = keys.length; k < klen; ++k) {
      merger(keys[k], target, current, options);
    }
  }
  return target;
}
function mergeIf(target, source) {
  return merge(target, source, {
    merger: _mergerIf
  });
}
function _mergerIf(key, target, source) {
  if (!isValidKey(key)) {
    return;
  }
  const tval = target[key];
  const sval = source[key];
  if (isObject(tval) && isObject(sval)) {
    mergeIf(tval, sval);
  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {
    target[key] = clone(sval);
  }
}
const keyResolvers = {
  "": (v) => v,
  x: (o) => o.x,
  y: (o) => o.y
};
function _splitKey(key) {
  const parts = key.split(".");
  const keys = [];
  let tmp = "";
  for (const part of parts) {
    tmp += part;
    if (tmp.endsWith("\\")) {
      tmp = tmp.slice(0, -1) + ".";
    } else {
      keys.push(tmp);
      tmp = "";
    }
  }
  return keys;
}
function _getKeyResolver(key) {
  const keys = _splitKey(key);
  return (obj) => {
    for (const k of keys) {
      if (k === "") {
        break;
      }
      obj = obj && obj[k];
    }
    return obj;
  };
}
function resolveObjectKey(obj, key) {
  const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));
  return resolver(obj);
}
function _capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
const defined = (value) => typeof value !== "undefined";
const isFunction = (value) => typeof value === "function";
const setsEqual = (a, b) => {
  if (a.size !== b.size) {
    return false;
  }
  for (const item of a) {
    if (!b.has(item)) {
      return false;
    }
  }
  return true;
};
function _isClickEvent(e) {
  return e.type === "mouseup" || e.type === "click" || e.type === "contextmenu";
}
const PI = Math.PI;
const TAU = 2 * PI;
const INFINITY = Number.POSITIVE_INFINITY;
const RAD_PER_DEG = PI / 180;
const HALF_PI = PI / 2;
const QUARTER_PI = PI / 4;
const TWO_THIRDS_PI = PI * 2 / 3;
const log10 = Math.log10;
const sign = Math.sign;
function almostEquals(x, y, epsilon) {
  return Math.abs(x - y) < epsilon;
}
function niceNum(range) {
  const roundedRange = Math.round(range);
  range = almostEquals(range, roundedRange, range / 1e3) ? roundedRange : range;
  const niceRange = Math.pow(10, Math.floor(log10(range)));
  const fraction = range / niceRange;
  const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;
  return niceFraction * niceRange;
}
function _factorize(value) {
  const result = [];
  const sqrt = Math.sqrt(value);
  let i;
  for (i = 1; i < sqrt; i++) {
    if (value % i === 0) {
      result.push(i);
      result.push(value / i);
    }
  }
  if (sqrt === (sqrt | 0)) {
    result.push(sqrt);
  }
  result.sort((a, b) => a - b).pop();
  return result;
}
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}
function almostWhole(x, epsilon) {
  const rounded = Math.round(x);
  return rounded - epsilon <= x && rounded + epsilon >= x;
}
function _setMinAndMaxByKey(array, target, property) {
  let i, ilen, value;
  for (i = 0, ilen = array.length; i < ilen; i++) {
    value = array[i][property];
    if (!isNaN(value)) {
      target.min = Math.min(target.min, value);
      target.max = Math.max(target.max, value);
    }
  }
}
function toRadians(degrees) {
  return degrees * (PI / 180);
}
function toDegrees(radians) {
  return radians * (180 / PI);
}
function _decimalPlaces(x) {
  if (!isNumberFinite(x)) {
    return;
  }
  let e = 1;
  let p = 0;
  while (Math.round(x * e) / e !== x) {
    e *= 10;
    p++;
  }
  return p;
}
function getAngleFromPoint(centrePoint, anglePoint) {
  const distanceFromXCenter = anglePoint.x - centrePoint.x;
  const distanceFromYCenter = anglePoint.y - centrePoint.y;
  const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);
  let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);
  if (angle < -0.5 * PI) {
    angle += TAU;
  }
  return {
    angle,
    distance: radialDistanceFromCenter
  };
}
function distanceBetweenPoints(pt1, pt2) {
  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));
}
function _normalizeAngle(a) {
  return (a % TAU + TAU) % TAU;
}
function _angleBetween(angle, start, end, sameAngleIsFullCircle) {
  const a = _normalizeAngle(angle);
  const s = _normalizeAngle(start);
  const e = _normalizeAngle(end);
  const angleToStart = _normalizeAngle(s - a);
  const angleToEnd = _normalizeAngle(e - a);
  const startToAngle = _normalizeAngle(a - s);
  const endToAngle = _normalizeAngle(a - e);
  return a === s || a === e || sameAngleIsFullCircle && s === e || angleToStart > angleToEnd && startToAngle < endToAngle;
}
function _limitValue(value, min, max) {
  return Math.max(min, Math.min(max, value));
}
function _int16Range(value) {
  return _limitValue(value, -32768, 32767);
}
function _isBetween(value, start, end, epsilon = 1e-6) {
  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;
}
function _lookup(table, value, cmp) {
  cmp = cmp || ((index) => table[index] < value);
  let hi = table.length - 1;
  let lo = 0;
  let mid;
  while (hi - lo > 1) {
    mid = lo + hi >> 1;
    if (cmp(mid)) {
      lo = mid;
    } else {
      hi = mid;
    }
  }
  return {
    lo,
    hi
  };
}
const _lookupByKey = (table, key, value, last) => _lookup(table, value, last ? (index) => {
  const ti = table[index][key];
  return ti < value || ti === value && table[index + 1][key] === value;
} : (index) => table[index][key] < value);
const _rlookupByKey = (table, key, value) => _lookup(table, value, (index) => table[index][key] >= value);
function _filterBetween(values, min, max) {
  let start = 0;
  let end = values.length;
  while (start < end && values[start] < min) {
    start++;
  }
  while (end > start && values[end - 1] > max) {
    end--;
  }
  return start > 0 || end < values.length ? values.slice(start, end) : values;
}
const arrayEvents = [
  "push",
  "pop",
  "shift",
  "splice",
  "unshift"
];
function listenArrayEvents(array, listener) {
  if (array._chartjs) {
    array._chartjs.listeners.push(listener);
    return;
  }
  Object.defineProperty(array, "_chartjs", {
    configurable: true,
    enumerable: false,
    value: {
      listeners: [
        listener
      ]
    }
  });
  arrayEvents.forEach((key) => {
    const method = "_onData" + _capitalize(key);
    const base = array[key];
    Object.defineProperty(array, key, {
      configurable: true,
      enumerable: false,
      value(...args) {
        const res = base.apply(this, args);
        array._chartjs.listeners.forEach((object) => {
          if (typeof object[method] === "function") {
            object[method](...args);
          }
        });
        return res;
      }
    });
  });
}
function unlistenArrayEvents(array, listener) {
  const stub = array._chartjs;
  if (!stub) {
    return;
  }
  const listeners = stub.listeners;
  const index = listeners.indexOf(listener);
  if (index !== -1) {
    listeners.splice(index, 1);
  }
  if (listeners.length > 0) {
    return;
  }
  arrayEvents.forEach((key) => {
    delete array[key];
  });
  delete array._chartjs;
}
function _arrayUnique(items) {
  const set2 = /* @__PURE__ */ new Set();
  let i, ilen;
  for (i = 0, ilen = items.length; i < ilen; ++i) {
    set2.add(items[i]);
  }
  if (set2.size === ilen) {
    return items;
  }
  return Array.from(set2);
}
const requestAnimFrame = function() {
  if (typeof window === "undefined") {
    return function(callback2) {
      return callback2();
    };
  }
  return window.requestAnimationFrame;
}();
function throttled(fn, thisArg) {
  let argsToUse = [];
  let ticking = false;
  return function(...args) {
    argsToUse = args;
    if (!ticking) {
      ticking = true;
      requestAnimFrame.call(window, () => {
        ticking = false;
        fn.apply(thisArg, argsToUse);
      });
    }
  };
}
function debounce(fn, delay) {
  let timeout;
  return function(...args) {
    if (delay) {
      clearTimeout(timeout);
      timeout = setTimeout(fn, delay, args);
    } else {
      fn.apply(this, args);
    }
    return delay;
  };
}
const _toLeftRightCenter = (align) => align === "start" ? "left" : align === "end" ? "right" : "center";
const _alignStartEnd = (align, start, end) => align === "start" ? start : align === "end" ? end : (start + end) / 2;
const _textX = (align, left, right, rtl) => {
  const check = rtl ? "left" : "right";
  return align === check ? right : align === "center" ? (left + right) / 2 : left;
};
const atEdge = (t) => t === 0 || t === 1;
const elasticIn = (t, s, p) => -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));
const elasticOut = (t, s, p) => Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;
const effects = {
  linear: (t) => t,
  easeInQuad: (t) => t * t,
  easeOutQuad: (t) => -t * (t - 2),
  easeInOutQuad: (t) => (t /= 0.5) < 1 ? 0.5 * t * t : -0.5 * (--t * (t - 2) - 1),
  easeInCubic: (t) => t * t * t,
  easeOutCubic: (t) => (t -= 1) * t * t + 1,
  easeInOutCubic: (t) => (t /= 0.5) < 1 ? 0.5 * t * t * t : 0.5 * ((t -= 2) * t * t + 2),
  easeInQuart: (t) => t * t * t * t,
  easeOutQuart: (t) => -((t -= 1) * t * t * t - 1),
  easeInOutQuart: (t) => (t /= 0.5) < 1 ? 0.5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2),
  easeInQuint: (t) => t * t * t * t * t,
  easeOutQuint: (t) => (t -= 1) * t * t * t * t + 1,
  easeInOutQuint: (t) => (t /= 0.5) < 1 ? 0.5 * t * t * t * t * t : 0.5 * ((t -= 2) * t * t * t * t + 2),
  easeInSine: (t) => -Math.cos(t * HALF_PI) + 1,
  easeOutSine: (t) => Math.sin(t * HALF_PI),
  easeInOutSine: (t) => -0.5 * (Math.cos(PI * t) - 1),
  easeInExpo: (t) => t === 0 ? 0 : Math.pow(2, 10 * (t - 1)),
  easeOutExpo: (t) => t === 1 ? 1 : -Math.pow(2, -10 * t) + 1,
  easeInOutExpo: (t) => atEdge(t) ? t : t < 0.5 ? 0.5 * Math.pow(2, 10 * (t * 2 - 1)) : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),
  easeInCirc: (t) => t >= 1 ? t : -(Math.sqrt(1 - t * t) - 1),
  easeOutCirc: (t) => Math.sqrt(1 - (t -= 1) * t),
  easeInOutCirc: (t) => (t /= 0.5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),
  easeInElastic: (t) => atEdge(t) ? t : elasticIn(t, 0.075, 0.3),
  easeOutElastic: (t) => atEdge(t) ? t : elasticOut(t, 0.075, 0.3),
  easeInOutElastic(t) {
    const s = 0.1125;
    const p = 0.45;
    return atEdge(t) ? t : t < 0.5 ? 0.5 * elasticIn(t * 2, s, p) : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);
  },
  easeInBack(t) {
    const s = 1.70158;
    return t * t * ((s + 1) * t - s);
  },
  easeOutBack(t) {
    const s = 1.70158;
    return (t -= 1) * t * ((s + 1) * t + s) + 1;
  },
  easeInOutBack(t) {
    let s = 1.70158;
    if ((t /= 0.5) < 1) {
      return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));
    }
    return 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);
  },
  easeInBounce: (t) => 1 - effects.easeOutBounce(1 - t),
  easeOutBounce(t) {
    const m = 7.5625;
    const d = 2.75;
    if (t < 1 / d) {
      return m * t * t;
    }
    if (t < 2 / d) {
      return m * (t -= 1.5 / d) * t + 0.75;
    }
    if (t < 2.5 / d) {
      return m * (t -= 2.25 / d) * t + 0.9375;
    }
    return m * (t -= 2.625 / d) * t + 0.984375;
  },
  easeInOutBounce: (t) => t < 0.5 ? effects.easeInBounce(t * 2) * 0.5 : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5
};
function isPatternOrGradient(value) {
  if (value && typeof value === "object") {
    const type = value.toString();
    return type === "[object CanvasPattern]" || type === "[object CanvasGradient]";
  }
  return false;
}
function color(value) {
  return isPatternOrGradient(value) ? value : new Color(value);
}
function getHoverColor(value) {
  return isPatternOrGradient(value) ? value : new Color(value).saturate(0.5).darken(0.1).hexString();
}
const numbers = [
  "x",
  "y",
  "borderWidth",
  "radius",
  "tension"
];
const colors = [
  "color",
  "borderColor",
  "backgroundColor"
];
function applyAnimationsDefaults(defaults2) {
  defaults2.set("animation", {
    delay: void 0,
    duration: 1e3,
    easing: "easeOutQuart",
    fn: void 0,
    from: void 0,
    loop: void 0,
    to: void 0,
    type: void 0
  });
  defaults2.describe("animation", {
    _fallback: false,
    _indexable: false,
    _scriptable: (name2) => name2 !== "onProgress" && name2 !== "onComplete" && name2 !== "fn"
  });
  defaults2.set("animations", {
    colors: {
      type: "color",
      properties: colors
    },
    numbers: {
      type: "number",
      properties: numbers
    }
  });
  defaults2.describe("animations", {
    _fallback: "animation"
  });
  defaults2.set("transitions", {
    active: {
      animation: {
        duration: 400
      }
    },
    resize: {
      animation: {
        duration: 0
      }
    },
    show: {
      animations: {
        colors: {
          from: "transparent"
        },
        visible: {
          type: "boolean",
          duration: 0
        }
      }
    },
    hide: {
      animations: {
        colors: {
          to: "transparent"
        },
        visible: {
          type: "boolean",
          easing: "linear",
          fn: (v) => v | 0
        }
      }
    }
  });
}
function applyLayoutsDefaults(defaults2) {
  defaults2.set("layout", {
    autoPadding: true,
    padding: {
      top: 0,
      right: 0,
      bottom: 0,
      left: 0
    }
  });
}
const intlCache = /* @__PURE__ */ new Map();
function getNumberFormat(locale, options) {
  options = options || {};
  const cacheKey = locale + JSON.stringify(options);
  let formatter = intlCache.get(cacheKey);
  if (!formatter) {
    formatter = new Intl.NumberFormat(locale, options);
    intlCache.set(cacheKey, formatter);
  }
  return formatter;
}
function formatNumber(num, locale, options) {
  return getNumberFormat(locale, options).format(num);
}
const formatters = {
  values(value) {
    return isArray(value) ? value : "" + value;
  },
  numeric(tickValue, index, ticks) {
    if (tickValue === 0) {
      return "0";
    }
    const locale = this.chart.options.locale;
    let notation;
    let delta = tickValue;
    if (ticks.length > 1) {
      const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));
      if (maxTick < 1e-4 || maxTick > 1e15) {
        notation = "scientific";
      }
      delta = calculateDelta(tickValue, ticks);
    }
    const logDelta = log10(Math.abs(delta));
    const numDecimal = Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);
    const options = {
      notation,
      minimumFractionDigits: numDecimal,
      maximumFractionDigits: numDecimal
    };
    Object.assign(options, this.options.ticks.format);
    return formatNumber(tickValue, locale, options);
  },
  logarithmic(tickValue, index, ticks) {
    if (tickValue === 0) {
      return "0";
    }
    const remain = ticks[index].significand || tickValue / Math.pow(10, Math.floor(log10(tickValue)));
    if ([
      1,
      2,
      3,
      5,
      10,
      15
    ].includes(remain) || index > 0.8 * ticks.length) {
      return formatters.numeric.call(this, tickValue, index, ticks);
    }
    return "";
  }
};
function calculateDelta(tickValue, ticks) {
  let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;
  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {
    delta = tickValue - Math.floor(tickValue);
  }
  return delta;
}
var Ticks = {
  formatters
};
function applyScaleDefaults(defaults2) {
  defaults2.set("scale", {
    display: true,
    offset: false,
    reverse: false,
    beginAtZero: false,
    bounds: "ticks",
    grace: 0,
    grid: {
      display: true,
      lineWidth: 1,
      drawOnChartArea: true,
      drawTicks: true,
      tickLength: 8,
      tickWidth: (_ctx, options) => options.lineWidth,
      tickColor: (_ctx, options) => options.color,
      offset: false
    },
    border: {
      display: true,
      dash: [],
      dashOffset: 0,
      width: 1
    },
    title: {
      display: false,
      text: "",
      padding: {
        top: 4,
        bottom: 4
      }
    },
    ticks: {
      minRotation: 0,
      maxRotation: 50,
      mirror: false,
      textStrokeWidth: 0,
      textStrokeColor: "",
      padding: 3,
      display: true,
      autoSkip: true,
      autoSkipPadding: 3,
      labelOffset: 0,
      callback: Ticks.formatters.values,
      minor: {},
      major: {},
      align: "center",
      crossAlign: "near",
      showLabelBackdrop: false,
      backdropColor: "rgba(255, 255, 255, 0.75)",
      backdropPadding: 2
    }
  });
  defaults2.route("scale.ticks", "color", "", "color");
  defaults2.route("scale.grid", "color", "", "borderColor");
  defaults2.route("scale.border", "color", "", "borderColor");
  defaults2.route("scale.title", "color", "", "color");
  defaults2.describe("scale", {
    _fallback: false,
    _scriptable: (name2) => !name2.startsWith("before") && !name2.startsWith("after") && name2 !== "callback" && name2 !== "parser",
    _indexable: (name2) => name2 !== "borderDash" && name2 !== "tickBorderDash" && name2 !== "dash"
  });
  defaults2.describe("scales", {
    _fallback: "scale"
  });
  defaults2.describe("scale.ticks", {
    _scriptable: (name2) => name2 !== "backdropPadding" && name2 !== "callback",
    _indexable: (name2) => name2 !== "backdropPadding"
  });
}
const overrides = /* @__PURE__ */ Object.create(null);
const descriptors = /* @__PURE__ */ Object.create(null);
function getScope$1(node, key) {
  if (!key) {
    return node;
  }
  const keys = key.split(".");
  for (let i = 0, n = keys.length; i < n; ++i) {
    const k = keys[i];
    node = node[k] || (node[k] = /* @__PURE__ */ Object.create(null));
  }
  return node;
}
function set(root, scope, values) {
  if (typeof scope === "string") {
    return merge(getScope$1(root, scope), values);
  }
  return merge(getScope$1(root, ""), scope);
}
class Defaults {
  constructor(_descriptors2, _appliers) {
    this.animation = void 0;
    this.backgroundColor = "rgba(0,0,0,0.1)";
    this.borderColor = "rgba(0,0,0,0.1)";
    this.color = "#666";
    this.datasets = {};
    this.devicePixelRatio = (context) => context.chart.platform.getDevicePixelRatio();
    this.elements = {};
    this.events = [
      "mousemove",
      "mouseout",
      "click",
      "touchstart",
      "touchmove"
    ];
    this.font = {
      family: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
      size: 12,
      style: "normal",
      lineHeight: 1.2,
      weight: null
    };
    this.hover = {};
    this.hoverBackgroundColor = (ctx, options) => getHoverColor(options.backgroundColor);
    this.hoverBorderColor = (ctx, options) => getHoverColor(options.borderColor);
    this.hoverColor = (ctx, options) => getHoverColor(options.color);
    this.indexAxis = "x";
    this.interaction = {
      mode: "nearest",
      intersect: true,
      includeInvisible: false
    };
    this.maintainAspectRatio = true;
    this.onHover = null;
    this.onClick = null;
    this.parsing = true;
    this.plugins = {};
    this.responsive = true;
    this.scale = void 0;
    this.scales = {};
    this.showLine = true;
    this.drawActiveElementsOnTop = true;
    this.describe(_descriptors2);
    this.apply(_appliers);
  }
  set(scope, values) {
    return set(this, scope, values);
  }
  get(scope) {
    return getScope$1(this, scope);
  }
  describe(scope, values) {
    return set(descriptors, scope, values);
  }
  override(scope, values) {
    return set(overrides, scope, values);
  }
  route(scope, name2, targetScope, targetName) {
    const scopeObject = getScope$1(this, scope);
    const targetScopeObject = getScope$1(this, targetScope);
    const privateName = "_" + name2;
    Object.defineProperties(scopeObject, {
      [privateName]: {
        value: scopeObject[name2],
        writable: true
      },
      [name2]: {
        enumerable: true,
        get() {
          const local = this[privateName];
          const target = targetScopeObject[targetName];
          if (isObject(local)) {
            return Object.assign({}, target, local);
          }
          return valueOrDefault(local, target);
        },
        set(value) {
          this[privateName] = value;
        }
      }
    });
  }
  apply(appliers) {
    appliers.forEach((apply) => apply(this));
  }
}
var defaults = /* @__PURE__ */ new Defaults({
  _scriptable: (name2) => !name2.startsWith("on"),
  _indexable: (name2) => name2 !== "events",
  hover: {
    _fallback: "interaction"
  },
  interaction: {
    _scriptable: false,
    _indexable: false
  }
}, [
  applyAnimationsDefaults,
  applyLayoutsDefaults,
  applyScaleDefaults
]);
function toFontString(font) {
  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {
    return null;
  }
  return (font.style ? font.style + " " : "") + (font.weight ? font.weight + " " : "") + font.size + "px " + font.family;
}
function _measureText(ctx, data, gc, longest, string) {
  let textWidth = data[string];
  if (!textWidth) {
    textWidth = data[string] = ctx.measureText(string).width;
    gc.push(string);
  }
  if (textWidth > longest) {
    longest = textWidth;
  }
  return longest;
}
function _longestText(ctx, font, arrayOfThings, cache) {
  cache = cache || {};
  let data = cache.data = cache.data || {};
  let gc = cache.garbageCollect = cache.garbageCollect || [];
  if (cache.font !== font) {
    data = cache.data = {};
    gc = cache.garbageCollect = [];
    cache.font = font;
  }
  ctx.save();
  ctx.font = font;
  let longest = 0;
  const ilen = arrayOfThings.length;
  let i, j, jlen, thing, nestedThing;
  for (i = 0; i < ilen; i++) {
    thing = arrayOfThings[i];
    if (thing !== void 0 && thing !== null && isArray(thing) !== true) {
      longest = _measureText(ctx, data, gc, longest, thing);
    } else if (isArray(thing)) {
      for (j = 0, jlen = thing.length; j < jlen; j++) {
        nestedThing = thing[j];
        if (nestedThing !== void 0 && nestedThing !== null && !isArray(nestedThing)) {
          longest = _measureText(ctx, data, gc, longest, nestedThing);
        }
      }
    }
  }
  ctx.restore();
  const gcLen = gc.length / 2;
  if (gcLen > arrayOfThings.length) {
    for (i = 0; i < gcLen; i++) {
      delete data[gc[i]];
    }
    gc.splice(0, gcLen);
  }
  return longest;
}
function _alignPixel(chart, pixel, width) {
  const devicePixelRatio = chart.currentDevicePixelRatio;
  const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;
  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;
}
function clearCanvas(canvas, ctx) {
  ctx = ctx || canvas.getContext("2d");
  ctx.save();
  ctx.resetTransform();
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.restore();
}
function drawPoint(ctx, options, x, y) {
  drawPointLegend(ctx, options, x, y, null);
}
function drawPointLegend(ctx, options, x, y, w) {
  let type, xOffset, yOffset, size, cornerRadius, width, xOffsetW, yOffsetW;
  const style = options.pointStyle;
  const rotation = options.rotation;
  const radius = options.radius;
  let rad = (rotation || 0) * RAD_PER_DEG;
  if (style && typeof style === "object") {
    type = style.toString();
    if (type === "[object HTMLImageElement]" || type === "[object HTMLCanvasElement]") {
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(rad);
      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);
      ctx.restore();
      return;
    }
  }
  if (isNaN(radius) || radius <= 0) {
    return;
  }
  ctx.beginPath();
  switch (style) {
    default:
      if (w) {
        ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);
      } else {
        ctx.arc(x, y, radius, 0, TAU);
      }
      ctx.closePath();
      break;
    case "triangle":
      width = w ? w / 2 : radius;
      ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);
      rad += TWO_THIRDS_PI;
      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);
      rad += TWO_THIRDS_PI;
      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);
      ctx.closePath();
      break;
    case "rectRounded":
      cornerRadius = radius * 0.516;
      size = radius - cornerRadius;
      xOffset = Math.cos(rad + QUARTER_PI) * size;
      xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);
      yOffset = Math.sin(rad + QUARTER_PI) * size;
      yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);
      ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);
      ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);
      ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);
      ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);
      ctx.closePath();
      break;
    case "rect":
      if (!rotation) {
        size = Math.SQRT1_2 * radius;
        width = w ? w / 2 : size;
        ctx.rect(x - width, y - size, 2 * width, 2 * size);
        break;
      }
      rad += QUARTER_PI;
    case "rectRot":
      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);
      xOffset = Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);
      ctx.moveTo(x - xOffsetW, y - yOffset);
      ctx.lineTo(x + yOffsetW, y - xOffset);
      ctx.lineTo(x + xOffsetW, y + yOffset);
      ctx.lineTo(x - yOffsetW, y + xOffset);
      ctx.closePath();
      break;
    case "crossRot":
      rad += QUARTER_PI;
    case "cross":
      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);
      xOffset = Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);
      ctx.moveTo(x - xOffsetW, y - yOffset);
      ctx.lineTo(x + xOffsetW, y + yOffset);
      ctx.moveTo(x + yOffsetW, y - xOffset);
      ctx.lineTo(x - yOffsetW, y + xOffset);
      break;
    case "star":
      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);
      xOffset = Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);
      ctx.moveTo(x - xOffsetW, y - yOffset);
      ctx.lineTo(x + xOffsetW, y + yOffset);
      ctx.moveTo(x + yOffsetW, y - xOffset);
      ctx.lineTo(x - yOffsetW, y + xOffset);
      rad += QUARTER_PI;
      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);
      xOffset = Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);
      ctx.moveTo(x - xOffsetW, y - yOffset);
      ctx.lineTo(x + xOffsetW, y + yOffset);
      ctx.moveTo(x + yOffsetW, y - xOffset);
      ctx.lineTo(x - yOffsetW, y + xOffset);
      break;
    case "line":
      xOffset = w ? w / 2 : Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      ctx.moveTo(x - xOffset, y - yOffset);
      ctx.lineTo(x + xOffset, y + yOffset);
      break;
    case "dash":
      ctx.moveTo(x, y);
      ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);
      break;
    case false:
      ctx.closePath();
      break;
  }
  ctx.fill();
  if (options.borderWidth > 0) {
    ctx.stroke();
  }
}
function _isPointInArea(point, area, margin) {
  margin = margin || 0.5;
  return !area || point && point.x > area.left - margin && point.x < area.right + margin && point.y > area.top - margin && point.y < area.bottom + margin;
}
function clipArea(ctx, area) {
  ctx.save();
  ctx.beginPath();
  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);
  ctx.clip();
}
function unclipArea(ctx) {
  ctx.restore();
}
function renderText(ctx, text, x, y, font, opts = {}) {
  const lines = isArray(text) ? text : [
    text
  ];
  const stroke = opts.strokeWidth > 0 && opts.strokeColor !== "";
  let i, line;
  ctx.save();
  ctx.font = font.string;
  setRenderOpts(ctx, opts);
  for (i = 0; i < lines.length; ++i) {
    line = lines[i];
    if (opts.backdrop) {
      drawBackdrop(ctx, opts.backdrop);
    }
    if (stroke) {
      if (opts.strokeColor) {
        ctx.strokeStyle = opts.strokeColor;
      }
      if (!isNullOrUndef(opts.strokeWidth)) {
        ctx.lineWidth = opts.strokeWidth;
      }
      ctx.strokeText(line, x, y, opts.maxWidth);
    }
    ctx.fillText(line, x, y, opts.maxWidth);
    decorateText(ctx, x, y, line, opts);
    y += font.lineHeight;
  }
  ctx.restore();
}
function setRenderOpts(ctx, opts) {
  if (opts.translation) {
    ctx.translate(opts.translation[0], opts.translation[1]);
  }
  if (!isNullOrUndef(opts.rotation)) {
    ctx.rotate(opts.rotation);
  }
  if (opts.color) {
    ctx.fillStyle = opts.color;
  }
  if (opts.textAlign) {
    ctx.textAlign = opts.textAlign;
  }
  if (opts.textBaseline) {
    ctx.textBaseline = opts.textBaseline;
  }
}
function decorateText(ctx, x, y, line, opts) {
  if (opts.strikethrough || opts.underline) {
    const metrics = ctx.measureText(line);
    const left = x - metrics.actualBoundingBoxLeft;
    const right = x + metrics.actualBoundingBoxRight;
    const top = y - metrics.actualBoundingBoxAscent;
    const bottom = y + metrics.actualBoundingBoxDescent;
    const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;
    ctx.strokeStyle = ctx.fillStyle;
    ctx.beginPath();
    ctx.lineWidth = opts.decorationWidth || 2;
    ctx.moveTo(left, yDecoration);
    ctx.lineTo(right, yDecoration);
    ctx.stroke();
  }
}
function drawBackdrop(ctx, opts) {
  const oldColor = ctx.fillStyle;
  ctx.fillStyle = opts.color;
  ctx.fillRect(opts.left, opts.top, opts.width, opts.height);
  ctx.fillStyle = oldColor;
}
function addRoundedRectPath(ctx, rect) {
  const { x, y, w, h: h3, radius } = rect;
  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, -HALF_PI, PI, true);
  ctx.lineTo(x, y + h3 - radius.bottomLeft);
  ctx.arc(x + radius.bottomLeft, y + h3 - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);
  ctx.lineTo(x + w - radius.bottomRight, y + h3);
  ctx.arc(x + w - radius.bottomRight, y + h3 - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);
  ctx.lineTo(x + w, y + radius.topRight);
  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);
  ctx.lineTo(x + radius.topLeft, y);
}
const LINE_HEIGHT = /^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/;
const FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;
function toLineHeight(value, size) {
  const matches = ("" + value).match(LINE_HEIGHT);
  if (!matches || matches[1] === "normal") {
    return size * 1.2;
  }
  value = +matches[2];
  switch (matches[3]) {
    case "px":
      return value;
    case "%":
      value /= 100;
      break;
  }
  return size * value;
}
const numberOrZero = (v) => +v || 0;
function _readValueToProps(value, props) {
  const ret = {};
  const objProps = isObject(props);
  const keys = objProps ? Object.keys(props) : props;
  const read = isObject(value) ? objProps ? (prop) => valueOrDefault(value[prop], value[props[prop]]) : (prop) => value[prop] : () => value;
  for (const prop of keys) {
    ret[prop] = numberOrZero(read(prop));
  }
  return ret;
}
function toTRBL(value) {
  return _readValueToProps(value, {
    top: "y",
    right: "x",
    bottom: "y",
    left: "x"
  });
}
function toTRBLCorners(value) {
  return _readValueToProps(value, [
    "topLeft",
    "topRight",
    "bottomLeft",
    "bottomRight"
  ]);
}
function toPadding(value) {
  const obj = toTRBL(value);
  obj.width = obj.left + obj.right;
  obj.height = obj.top + obj.bottom;
  return obj;
}
function toFont(options, fallback) {
  options = options || {};
  fallback = fallback || defaults.font;
  let size = valueOrDefault(options.size, fallback.size);
  if (typeof size === "string") {
    size = parseInt(size, 10);
  }
  let style = valueOrDefault(options.style, fallback.style);
  if (style && !("" + style).match(FONT_STYLE)) {
    console.warn('Invalid font style specified: "' + style + '"');
    style = void 0;
  }
  const font = {
    family: valueOrDefault(options.family, fallback.family),
    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),
    size,
    style,
    weight: valueOrDefault(options.weight, fallback.weight),
    string: ""
  };
  font.string = toFontString(font);
  return font;
}
function resolve(inputs, context, index, info) {
  let cacheable = true;
  let i, ilen, value;
  for (i = 0, ilen = inputs.length; i < ilen; ++i) {
    value = inputs[i];
    if (value === void 0) {
      continue;
    }
    if (context !== void 0 && typeof value === "function") {
      value = value(context);
      cacheable = false;
    }
    if (index !== void 0 && isArray(value)) {
      value = value[index % value.length];
      cacheable = false;
    }
    if (value !== void 0) {
      if (info && !cacheable) {
        info.cacheable = false;
      }
      return value;
    }
  }
}
function _addGrace(minmax, grace, beginAtZero) {
  const { min, max } = minmax;
  const change = toDimension(grace, (max - min) / 2);
  const keepZero = (value, add) => beginAtZero && value === 0 ? 0 : value + add;
  return {
    min: keepZero(min, -Math.abs(change)),
    max: keepZero(max, change)
  };
}
function createContext(parentContext, context) {
  return Object.assign(Object.create(parentContext), context);
}
function _createResolver(scopes, prefixes = [
  ""
], rootScopes = scopes, fallback, getTarget = () => scopes[0]) {
  if (!defined(fallback)) {
    fallback = _resolve("_fallback", scopes);
  }
  const cache = {
    [Symbol.toStringTag]: "Object",
    _cacheable: true,
    _scopes: scopes,
    _rootScopes: rootScopes,
    _fallback: fallback,
    _getTarget: getTarget,
    override: (scope) => _createResolver([
      scope,
      ...scopes
    ], prefixes, rootScopes, fallback)
  };
  return new Proxy(cache, {
    deleteProperty(target, prop) {
      delete target[prop];
      delete target._keys;
      delete scopes[0][prop];
      return true;
    },
    get(target, prop) {
      return _cached(target, prop, () => _resolveWithPrefixes(prop, prefixes, scopes, target));
    },
    getOwnPropertyDescriptor(target, prop) {
      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);
    },
    getPrototypeOf() {
      return Reflect.getPrototypeOf(scopes[0]);
    },
    has(target, prop) {
      return getKeysFromAllScopes(target).includes(prop);
    },
    ownKeys(target) {
      return getKeysFromAllScopes(target);
    },
    set(target, prop, value) {
      const storage = target._storage || (target._storage = getTarget());
      target[prop] = storage[prop] = value;
      delete target._keys;
      return true;
    }
  });
}
function _attachContext(proxy, context, subProxy, descriptorDefaults) {
  const cache = {
    _cacheable: false,
    _proxy: proxy,
    _context: context,
    _subProxy: subProxy,
    _stack: /* @__PURE__ */ new Set(),
    _descriptors: _descriptors(proxy, descriptorDefaults),
    setContext: (ctx) => _attachContext(proxy, ctx, subProxy, descriptorDefaults),
    override: (scope) => _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)
  };
  return new Proxy(cache, {
    deleteProperty(target, prop) {
      delete target[prop];
      delete proxy[prop];
      return true;
    },
    get(target, prop, receiver) {
      return _cached(target, prop, () => _resolveWithContext(target, prop, receiver));
    },
    getOwnPropertyDescriptor(target, prop) {
      return target._descriptors.allKeys ? Reflect.has(proxy, prop) ? {
        enumerable: true,
        configurable: true
      } : void 0 : Reflect.getOwnPropertyDescriptor(proxy, prop);
    },
    getPrototypeOf() {
      return Reflect.getPrototypeOf(proxy);
    },
    has(target, prop) {
      return Reflect.has(proxy, prop);
    },
    ownKeys() {
      return Reflect.ownKeys(proxy);
    },
    set(target, prop, value) {
      proxy[prop] = value;
      delete target[prop];
      return true;
    }
  });
}
function _descriptors(proxy, defaults2 = {
  scriptable: true,
  indexable: true
}) {
  const { _scriptable = defaults2.scriptable, _indexable = defaults2.indexable, _allKeys = defaults2.allKeys } = proxy;
  return {
    allKeys: _allKeys,
    scriptable: _scriptable,
    indexable: _indexable,
    isScriptable: isFunction(_scriptable) ? _scriptable : () => _scriptable,
    isIndexable: isFunction(_indexable) ? _indexable : () => _indexable
  };
}
const readKey = (prefix, name2) => prefix ? prefix + _capitalize(name2) : name2;
const needsSubResolver = (prop, value) => isObject(value) && prop !== "adapters" && (Object.getPrototypeOf(value) === null || value.constructor === Object);
function _cached(target, prop, resolve2) {
  if (Object.prototype.hasOwnProperty.call(target, prop)) {
    return target[prop];
  }
  const value = resolve2();
  target[prop] = value;
  return value;
}
function _resolveWithContext(target, prop, receiver) {
  const { _proxy, _context, _subProxy, _descriptors: descriptors2 } = target;
  let value = _proxy[prop];
  if (isFunction(value) && descriptors2.isScriptable(prop)) {
    value = _resolveScriptable(prop, value, target, receiver);
  }
  if (isArray(value) && value.length) {
    value = _resolveArray(prop, value, target, descriptors2.isIndexable);
  }
  if (needsSubResolver(prop, value)) {
    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors2);
  }
  return value;
}
function _resolveScriptable(prop, value, target, receiver) {
  const { _proxy, _context, _subProxy, _stack } = target;
  if (_stack.has(prop)) {
    throw new Error("Recursion detected: " + Array.from(_stack).join("->") + "->" + prop);
  }
  _stack.add(prop);
  value = value(_context, _subProxy || receiver);
  _stack.delete(prop);
  if (needsSubResolver(prop, value)) {
    value = createSubResolver(_proxy._scopes, _proxy, prop, value);
  }
  return value;
}
function _resolveArray(prop, value, target, isIndexable) {
  const { _proxy, _context, _subProxy, _descriptors: descriptors2 } = target;
  if (defined(_context.index) && isIndexable(prop)) {
    value = value[_context.index % value.length];
  } else if (isObject(value[0])) {
    const arr = value;
    const scopes = _proxy._scopes.filter((s) => s !== arr);
    value = [];
    for (const item of arr) {
      const resolver = createSubResolver(scopes, _proxy, prop, item);
      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors2));
    }
  }
  return value;
}
function resolveFallback(fallback, prop, value) {
  return isFunction(fallback) ? fallback(prop, value) : fallback;
}
const getScope = (key, parent) => key === true ? parent : typeof key === "string" ? resolveObjectKey(parent, key) : void 0;
function addScopes(set2, parentScopes, key, parentFallback, value) {
  for (const parent of parentScopes) {
    const scope = getScope(key, parent);
    if (scope) {
      set2.add(scope);
      const fallback = resolveFallback(scope._fallback, key, value);
      if (defined(fallback) && fallback !== key && fallback !== parentFallback) {
        return fallback;
      }
    } else if (scope === false && defined(parentFallback) && key !== parentFallback) {
      return null;
    }
  }
  return false;
}
function createSubResolver(parentScopes, resolver, prop, value) {
  const rootScopes = resolver._rootScopes;
  const fallback = resolveFallback(resolver._fallback, prop, value);
  const allScopes = [
    ...parentScopes,
    ...rootScopes
  ];
  const set2 = /* @__PURE__ */ new Set();
  set2.add(value);
  let key = addScopesFromKey(set2, allScopes, prop, fallback || prop, value);
  if (key === null) {
    return false;
  }
  if (defined(fallback) && fallback !== prop) {
    key = addScopesFromKey(set2, allScopes, fallback, key, value);
    if (key === null) {
      return false;
    }
  }
  return _createResolver(Array.from(set2), [
    ""
  ], rootScopes, fallback, () => subGetTarget(resolver, prop, value));
}
function addScopesFromKey(set2, allScopes, key, fallback, item) {
  while (key) {
    key = addScopes(set2, allScopes, key, fallback, item);
  }
  return key;
}
function subGetTarget(resolver, prop, value) {
  const parent = resolver._getTarget();
  if (!(prop in parent)) {
    parent[prop] = {};
  }
  const target = parent[prop];
  if (isArray(target) && isObject(value)) {
    return value;
  }
  return target || {};
}
function _resolveWithPrefixes(prop, prefixes, scopes, proxy) {
  let value;
  for (const prefix of prefixes) {
    value = _resolve(readKey(prefix, prop), scopes);
    if (defined(value)) {
      return needsSubResolver(prop, value) ? createSubResolver(scopes, proxy, prop, value) : value;
    }
  }
}
function _resolve(key, scopes) {
  for (const scope of scopes) {
    if (!scope) {
      continue;
    }
    const value = scope[key];
    if (defined(value)) {
      return value;
    }
  }
}
function getKeysFromAllScopes(target) {
  let keys = target._keys;
  if (!keys) {
    keys = target._keys = resolveKeysFromAllScopes(target._scopes);
  }
  return keys;
}
function resolveKeysFromAllScopes(scopes) {
  const set2 = /* @__PURE__ */ new Set();
  for (const scope of scopes) {
    for (const key of Object.keys(scope).filter((k) => !k.startsWith("_"))) {
      set2.add(key);
    }
  }
  return Array.from(set2);
}
function _isDomSupported() {
  return typeof window !== "undefined" && typeof document !== "undefined";
}
function _getParentNode(domNode) {
  let parent = domNode.parentNode;
  if (parent && parent.toString() === "[object ShadowRoot]") {
    parent = parent.host;
  }
  return parent;
}
function parseMaxStyle(styleValue, node, parentProperty) {
  let valueInPixels;
  if (typeof styleValue === "string") {
    valueInPixels = parseInt(styleValue, 10);
    if (styleValue.indexOf("%") !== -1) {
      valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];
    }
  } else {
    valueInPixels = styleValue;
  }
  return valueInPixels;
}
const getComputedStyle = (element) => element.ownerDocument.defaultView.getComputedStyle(element, null);
function getStyle(el, property) {
  return getComputedStyle(el).getPropertyValue(property);
}
const positions = [
  "top",
  "right",
  "bottom",
  "left"
];
function getPositionedStyle(styles, style, suffix) {
  const result = {};
  suffix = suffix ? "-" + suffix : "";
  for (let i = 0; i < 4; i++) {
    const pos = positions[i];
    result[pos] = parseFloat(styles[style + "-" + pos + suffix]) || 0;
  }
  result.width = result.left + result.right;
  result.height = result.top + result.bottom;
  return result;
}
const useOffsetPos = (x, y, target) => (x > 0 || y > 0) && (!target || !target.shadowRoot);
function getCanvasPosition(e, canvas) {
  const touches = e.touches;
  const source = touches && touches.length ? touches[0] : e;
  const { offsetX, offsetY } = source;
  let box = false;
  let x, y;
  if (useOffsetPos(offsetX, offsetY, e.target)) {
    x = offsetX;
    y = offsetY;
  } else {
    const rect = canvas.getBoundingClientRect();
    x = source.clientX - rect.left;
    y = source.clientY - rect.top;
    box = true;
  }
  return {
    x,
    y,
    box
  };
}
function getRelativePosition(event, chart) {
  if ("native" in event) {
    return event;
  }
  const { canvas, currentDevicePixelRatio } = chart;
  const style = getComputedStyle(canvas);
  const borderBox = style.boxSizing === "border-box";
  const paddings = getPositionedStyle(style, "padding");
  const borders = getPositionedStyle(style, "border", "width");
  const { x, y, box } = getCanvasPosition(event, canvas);
  const xOffset = paddings.left + (box && borders.left);
  const yOffset = paddings.top + (box && borders.top);
  let { width, height } = chart;
  if (borderBox) {
    width -= paddings.width + borders.width;
    height -= paddings.height + borders.height;
  }
  return {
    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),
    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)
  };
}
function getContainerSize(canvas, width, height) {
  let maxWidth, maxHeight;
  if (width === void 0 || height === void 0) {
    const container = _getParentNode(canvas);
    if (!container) {
      width = canvas.clientWidth;
      height = canvas.clientHeight;
    } else {
      const rect = container.getBoundingClientRect();
      const containerStyle = getComputedStyle(container);
      const containerBorder = getPositionedStyle(containerStyle, "border", "width");
      const containerPadding = getPositionedStyle(containerStyle, "padding");
      width = rect.width - containerPadding.width - containerBorder.width;
      height = rect.height - containerPadding.height - containerBorder.height;
      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, "clientWidth");
      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, "clientHeight");
    }
  }
  return {
    width,
    height,
    maxWidth: maxWidth || INFINITY,
    maxHeight: maxHeight || INFINITY
  };
}
const round1 = (v) => Math.round(v * 10) / 10;
function getMaximumSize(canvas, bbWidth, bbHeight, aspectRatio) {
  const style = getComputedStyle(canvas);
  const margins = getPositionedStyle(style, "margin");
  const maxWidth = parseMaxStyle(style.maxWidth, canvas, "clientWidth") || INFINITY;
  const maxHeight = parseMaxStyle(style.maxHeight, canvas, "clientHeight") || INFINITY;
  const containerSize = getContainerSize(canvas, bbWidth, bbHeight);
  let { width, height } = containerSize;
  if (style.boxSizing === "content-box") {
    const borders = getPositionedStyle(style, "border", "width");
    const paddings = getPositionedStyle(style, "padding");
    width -= paddings.width + borders.width;
    height -= paddings.height + borders.height;
  }
  width = Math.max(0, width - margins.width);
  height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);
  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));
  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));
  if (width && !height) {
    height = round1(width / 2);
  }
  const maintainHeight = bbWidth !== void 0 || bbHeight !== void 0;
  if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {
    height = containerSize.height;
    width = round1(Math.floor(height * aspectRatio));
  }
  return {
    width,
    height
  };
}
function retinaScale(chart, forceRatio, forceStyle) {
  const pixelRatio = forceRatio || 1;
  const deviceHeight = Math.floor(chart.height * pixelRatio);
  const deviceWidth = Math.floor(chart.width * pixelRatio);
  chart.height = Math.floor(chart.height);
  chart.width = Math.floor(chart.width);
  const canvas = chart.canvas;
  if (canvas.style && (forceStyle || !canvas.style.height && !canvas.style.width)) {
    canvas.style.height = `${chart.height}px`;
    canvas.style.width = `${chart.width}px`;
  }
  if (chart.currentDevicePixelRatio !== pixelRatio || canvas.height !== deviceHeight || canvas.width !== deviceWidth) {
    chart.currentDevicePixelRatio = pixelRatio;
    canvas.height = deviceHeight;
    canvas.width = deviceWidth;
    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);
    return true;
  }
  return false;
}
const supportsEventListenerOptions = function() {
  let passiveSupported = false;
  try {
    const options = {
      get passive() {
        passiveSupported = true;
        return false;
      }
    };
    window.addEventListener("test", null, options);
    window.removeEventListener("test", null, options);
  } catch (e) {
  }
  return passiveSupported;
}();
function readUsedSize(element, property) {
  const value = getStyle(element, property);
  const matches = value && value.match(/^(\d+)(\.\d+)?px$/);
  return matches ? +matches[1] : void 0;
}
const getRightToLeftAdapter = function(rectX, width) {
  return {
    x(x) {
      return rectX + rectX + width - x;
    },
    setWidth(w) {
      width = w;
    },
    textAlign(align) {
      if (align === "center") {
        return align;
      }
      return align === "right" ? "left" : "right";
    },
    xPlus(x, value) {
      return x - value;
    },
    leftForLtr(x, itemWidth) {
      return x - itemWidth;
    }
  };
};
const getLeftToRightAdapter = function() {
  return {
    x(x) {
      return x;
    },
    setWidth(w) {
    },
    textAlign(align) {
      return align;
    },
    xPlus(x, value) {
      return x + value;
    },
    leftForLtr(x, _itemWidth) {
      return x;
    }
  };
};
function getRtlAdapter(rtl, rectX, width) {
  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();
}
function overrideTextDirection(ctx, direction) {
  let style, original;
  if (direction === "ltr" || direction === "rtl") {
    style = ctx.canvas.style;
    original = [
      style.getPropertyValue("direction"),
      style.getPropertyPriority("direction")
    ];
    style.setProperty("direction", direction, "important");
    ctx.prevTextDirection = original;
  }
}
function restoreTextDirection(ctx, original) {
  if (original !== void 0) {
    delete ctx.prevTextDirection;
    ctx.canvas.style.setProperty("direction", original[0], original[1]);
  }
}
/*!
 * Chart.js v4.1.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
class Animator {
  constructor() {
    this._request = null;
    this._charts = /* @__PURE__ */ new Map();
    this._running = false;
    this._lastDate = void 0;
  }
  _notify(chart, anims, date, type) {
    const callbacks = anims.listeners[type];
    const numSteps = anims.duration;
    callbacks.forEach((fn) => fn({
      chart,
      initial: anims.initial,
      numSteps,
      currentStep: Math.min(date - anims.start, numSteps)
    }));
  }
  _refresh() {
    if (this._request) {
      return;
    }
    this._running = true;
    this._request = requestAnimFrame.call(window, () => {
      this._update();
      this._request = null;
      if (this._running) {
        this._refresh();
      }
    });
  }
  _update(date = Date.now()) {
    let remaining = 0;
    this._charts.forEach((anims, chart) => {
      if (!anims.running || !anims.items.length) {
        return;
      }
      const items = anims.items;
      let i = items.length - 1;
      let draw = false;
      let item;
      for (; i >= 0; --i) {
        item = items[i];
        if (item._active) {
          if (item._total > anims.duration) {
            anims.duration = item._total;
          }
          item.tick(date);
          draw = true;
        } else {
          items[i] = items[items.length - 1];
          items.pop();
        }
      }
      if (draw) {
        chart.draw();
        this._notify(chart, anims, date, "progress");
      }
      if (!items.length) {
        anims.running = false;
        this._notify(chart, anims, date, "complete");
        anims.initial = false;
      }
      remaining += items.length;
    });
    this._lastDate = date;
    if (remaining === 0) {
      this._running = false;
    }
  }
  _getAnims(chart) {
    const charts = this._charts;
    let anims = charts.get(chart);
    if (!anims) {
      anims = {
        running: false,
        initial: true,
        items: [],
        listeners: {
          complete: [],
          progress: []
        }
      };
      charts.set(chart, anims);
    }
    return anims;
  }
  listen(chart, event, cb) {
    this._getAnims(chart).listeners[event].push(cb);
  }
  add(chart, items) {
    if (!items || !items.length) {
      return;
    }
    this._getAnims(chart).items.push(...items);
  }
  has(chart) {
    return this._getAnims(chart).items.length > 0;
  }
  start(chart) {
    const anims = this._charts.get(chart);
    if (!anims) {
      return;
    }
    anims.running = true;
    anims.start = Date.now();
    anims.duration = anims.items.reduce((acc, cur) => Math.max(acc, cur._duration), 0);
    this._refresh();
  }
  running(chart) {
    if (!this._running) {
      return false;
    }
    const anims = this._charts.get(chart);
    if (!anims || !anims.running || !anims.items.length) {
      return false;
    }
    return true;
  }
  stop(chart) {
    const anims = this._charts.get(chart);
    if (!anims || !anims.items.length) {
      return;
    }
    const items = anims.items;
    let i = items.length - 1;
    for (; i >= 0; --i) {
      items[i].cancel();
    }
    anims.items = [];
    this._notify(chart, anims, Date.now(), "complete");
  }
  remove(chart) {
    return this._charts.delete(chart);
  }
}
var animator = /* @__PURE__ */ new Animator();
const transparent = "transparent";
const interpolators = {
  boolean(from2, to2, factor) {
    return factor > 0.5 ? to2 : from2;
  },
  color(from2, to2, factor) {
    const c0 = color(from2 || transparent);
    const c1 = c0.valid && color(to2 || transparent);
    return c1 && c1.valid ? c1.mix(c0, factor).hexString() : to2;
  },
  number(from2, to2, factor) {
    return from2 + (to2 - from2) * factor;
  }
};
class Animation {
  constructor(cfg, target, prop, to2) {
    const currentValue = target[prop];
    to2 = resolve([
      cfg.to,
      to2,
      currentValue,
      cfg.from
    ]);
    const from2 = resolve([
      cfg.from,
      currentValue,
      to2
    ]);
    this._active = true;
    this._fn = cfg.fn || interpolators[cfg.type || typeof from2];
    this._easing = effects[cfg.easing] || effects.linear;
    this._start = Math.floor(Date.now() + (cfg.delay || 0));
    this._duration = this._total = Math.floor(cfg.duration);
    this._loop = !!cfg.loop;
    this._target = target;
    this._prop = prop;
    this._from = from2;
    this._to = to2;
    this._promises = void 0;
  }
  active() {
    return this._active;
  }
  update(cfg, to2, date) {
    if (this._active) {
      this._notify(false);
      const currentValue = this._target[this._prop];
      const elapsed = date - this._start;
      const remain = this._duration - elapsed;
      this._start = date;
      this._duration = Math.floor(Math.max(remain, cfg.duration));
      this._total += elapsed;
      this._loop = !!cfg.loop;
      this._to = resolve([
        cfg.to,
        to2,
        currentValue,
        cfg.from
      ]);
      this._from = resolve([
        cfg.from,
        currentValue,
        to2
      ]);
    }
  }
  cancel() {
    if (this._active) {
      this.tick(Date.now());
      this._active = false;
      this._notify(false);
    }
  }
  tick(date) {
    const elapsed = date - this._start;
    const duration = this._duration;
    const prop = this._prop;
    const from2 = this._from;
    const loop = this._loop;
    const to2 = this._to;
    let factor;
    this._active = from2 !== to2 && (loop || elapsed < duration);
    if (!this._active) {
      this._target[prop] = to2;
      this._notify(true);
      return;
    }
    if (elapsed < 0) {
      this._target[prop] = from2;
      return;
    }
    factor = elapsed / duration % 2;
    factor = loop && factor > 1 ? 2 - factor : factor;
    factor = this._easing(Math.min(1, Math.max(0, factor)));
    this._target[prop] = this._fn(from2, to2, factor);
  }
  wait() {
    const promises = this._promises || (this._promises = []);
    return new Promise((res, rej) => {
      promises.push({
        res,
        rej
      });
    });
  }
  _notify(resolved) {
    const method = resolved ? "res" : "rej";
    const promises = this._promises || [];
    for (let i = 0; i < promises.length; i++) {
      promises[i][method]();
    }
  }
}
class Animations {
  constructor(chart, config) {
    this._chart = chart;
    this._properties = /* @__PURE__ */ new Map();
    this.configure(config);
  }
  configure(config) {
    if (!isObject(config)) {
      return;
    }
    const animationOptions = Object.keys(defaults.animation);
    const animatedProps = this._properties;
    Object.getOwnPropertyNames(config).forEach((key) => {
      const cfg = config[key];
      if (!isObject(cfg)) {
        return;
      }
      const resolved = {};
      for (const option of animationOptions) {
        resolved[option] = cfg[option];
      }
      (isArray(cfg.properties) && cfg.properties || [
        key
      ]).forEach((prop) => {
        if (prop === key || !animatedProps.has(prop)) {
          animatedProps.set(prop, resolved);
        }
      });
    });
  }
  _animateOptions(target, values) {
    const newOptions = values.options;
    const options = resolveTargetOptions(target, newOptions);
    if (!options) {
      return [];
    }
    const animations = this._createAnimations(options, newOptions);
    if (newOptions.$shared) {
      awaitAll(target.options.$animations, newOptions).then(() => {
        target.options = newOptions;
      }, () => {
      });
    }
    return animations;
  }
  _createAnimations(target, values) {
    const animatedProps = this._properties;
    const animations = [];
    const running = target.$animations || (target.$animations = {});
    const props = Object.keys(values);
    const date = Date.now();
    let i;
    for (i = props.length - 1; i >= 0; --i) {
      const prop = props[i];
      if (prop.charAt(0) === "$") {
        continue;
      }
      if (prop === "options") {
        animations.push(...this._animateOptions(target, values));
        continue;
      }
      const value = values[prop];
      let animation = running[prop];
      const cfg = animatedProps.get(prop);
      if (animation) {
        if (cfg && animation.active()) {
          animation.update(cfg, value, date);
          continue;
        } else {
          animation.cancel();
        }
      }
      if (!cfg || !cfg.duration) {
        target[prop] = value;
        continue;
      }
      running[prop] = animation = new Animation(cfg, target, prop, value);
      animations.push(animation);
    }
    return animations;
  }
  update(target, values) {
    if (this._properties.size === 0) {
      Object.assign(target, values);
      return;
    }
    const animations = this._createAnimations(target, values);
    if (animations.length) {
      animator.add(this._chart, animations);
      return true;
    }
  }
}
function awaitAll(animations, properties) {
  const running = [];
  const keys = Object.keys(properties);
  for (let i = 0; i < keys.length; i++) {
    const anim = animations[keys[i]];
    if (anim && anim.active()) {
      running.push(anim.wait());
    }
  }
  return Promise.all(running);
}
function resolveTargetOptions(target, newOptions) {
  if (!newOptions) {
    return;
  }
  let options = target.options;
  if (!options) {
    target.options = newOptions;
    return;
  }
  if (options.$shared) {
    target.options = options = Object.assign({}, options, {
      $shared: false,
      $animations: {}
    });
  }
  return options;
}
function scaleClip(scale, allowedOverflow) {
  const opts = scale && scale.options || {};
  const reverse = opts.reverse;
  const min = opts.min === void 0 ? allowedOverflow : 0;
  const max = opts.max === void 0 ? allowedOverflow : 0;
  return {
    start: reverse ? max : min,
    end: reverse ? min : max
  };
}
function defaultClip(xScale, yScale, allowedOverflow) {
  if (allowedOverflow === false) {
    return false;
  }
  const x = scaleClip(xScale, allowedOverflow);
  const y = scaleClip(yScale, allowedOverflow);
  return {
    top: y.end,
    right: x.end,
    bottom: y.start,
    left: x.start
  };
}
function toClip(value) {
  let t, r, b, l;
  if (isObject(value)) {
    t = value.top;
    r = value.right;
    b = value.bottom;
    l = value.left;
  } else {
    t = r = b = l = value;
  }
  return {
    top: t,
    right: r,
    bottom: b,
    left: l,
    disabled: value === false
  };
}
function getSortedDatasetIndices(chart, filterVisible) {
  const keys = [];
  const metasets = chart._getSortedDatasetMetas(filterVisible);
  let i, ilen;
  for (i = 0, ilen = metasets.length; i < ilen; ++i) {
    keys.push(metasets[i].index);
  }
  return keys;
}
function applyStack(stack, value, dsIndex, options = {}) {
  const keys = stack.keys;
  const singleMode = options.mode === "single";
  let i, ilen, datasetIndex, otherValue;
  if (value === null) {
    return;
  }
  for (i = 0, ilen = keys.length; i < ilen; ++i) {
    datasetIndex = +keys[i];
    if (datasetIndex === dsIndex) {
      if (options.all) {
        continue;
      }
      break;
    }
    otherValue = stack.values[datasetIndex];
    if (isNumberFinite(otherValue) && (singleMode || value === 0 || sign(value) === sign(otherValue))) {
      value += otherValue;
    }
  }
  return value;
}
function convertObjectDataToArray(data) {
  const keys = Object.keys(data);
  const adata = new Array(keys.length);
  let i, ilen, key;
  for (i = 0, ilen = keys.length; i < ilen; ++i) {
    key = keys[i];
    adata[i] = {
      x: key,
      y: data[key]
    };
  }
  return adata;
}
function isStacked(scale, meta) {
  const stacked = scale && scale.options.stacked;
  return stacked || stacked === void 0 && meta.stack !== void 0;
}
function getStackKey(indexScale, valueScale, meta) {
  return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;
}
function getUserBounds(scale) {
  const { min, max, minDefined, maxDefined } = scale.getUserBounds();
  return {
    min: minDefined ? min : Number.NEGATIVE_INFINITY,
    max: maxDefined ? max : Number.POSITIVE_INFINITY
  };
}
function getOrCreateStack(stacks, stackKey, indexValue) {
  const subStack = stacks[stackKey] || (stacks[stackKey] = {});
  return subStack[indexValue] || (subStack[indexValue] = {});
}
function getLastIndexInStack(stack, vScale, positive, type) {
  for (const meta of vScale.getMatchingVisibleMetas(type).reverse()) {
    const value = stack[meta.index];
    if (positive && value > 0 || !positive && value < 0) {
      return meta.index;
    }
  }
  return null;
}
function updateStacks(controller, parsed) {
  const { chart, _cachedMeta: meta } = controller;
  const stacks = chart._stacks || (chart._stacks = {});
  const { iScale, vScale, index: datasetIndex } = meta;
  const iAxis = iScale.axis;
  const vAxis = vScale.axis;
  const key = getStackKey(iScale, vScale, meta);
  const ilen = parsed.length;
  let stack;
  for (let i = 0; i < ilen; ++i) {
    const item = parsed[i];
    const { [iAxis]: index, [vAxis]: value } = item;
    const itemStacks = item._stacks || (item._stacks = {});
    stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);
    stack[datasetIndex] = value;
    stack._top = getLastIndexInStack(stack, vScale, true, meta.type);
    stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);
    const visualValues = stack._visualValues || (stack._visualValues = {});
    visualValues[datasetIndex] = value;
  }
}
function getFirstScaleId(chart, axis) {
  const scales = chart.scales;
  return Object.keys(scales).filter((key) => scales[key].axis === axis).shift();
}
function createDatasetContext(parent, index) {
  return createContext(parent, {
    active: false,
    dataset: void 0,
    datasetIndex: index,
    index,
    mode: "default",
    type: "dataset"
  });
}
function createDataContext(parent, index, element) {
  return createContext(parent, {
    active: false,
    dataIndex: index,
    parsed: void 0,
    raw: void 0,
    element,
    index,
    mode: "default",
    type: "data"
  });
}
function clearStacks(meta, items) {
  const datasetIndex = meta.controller.index;
  const axis = meta.vScale && meta.vScale.axis;
  if (!axis) {
    return;
  }
  items = items || meta._parsed;
  for (const parsed of items) {
    const stacks = parsed._stacks;
    if (!stacks || stacks[axis] === void 0 || stacks[axis][datasetIndex] === void 0) {
      return;
    }
    delete stacks[axis][datasetIndex];
    if (stacks[axis]._visualValues !== void 0 && stacks[axis]._visualValues[datasetIndex] !== void 0) {
      delete stacks[axis]._visualValues[datasetIndex];
    }
  }
}
const isDirectUpdateMode = (mode) => mode === "reset" || mode === "none";
const cloneIfNotShared = (cached, shared) => shared ? cached : Object.assign({}, cached);
const createStack = (canStack, meta, chart) => canStack && !meta.hidden && meta._stacked && {
  keys: getSortedDatasetIndices(chart, true),
  values: null
};
class DatasetController {
  constructor(chart, datasetIndex) {
    this.chart = chart;
    this._ctx = chart.ctx;
    this.index = datasetIndex;
    this._cachedDataOpts = {};
    this._cachedMeta = this.getMeta();
    this._type = this._cachedMeta.type;
    this.options = void 0;
    this._parsing = false;
    this._data = void 0;
    this._objectData = void 0;
    this._sharedOptions = void 0;
    this._drawStart = void 0;
    this._drawCount = void 0;
    this.enableOptionSharing = false;
    this.supportsDecimation = false;
    this.$context = void 0;
    this._syncList = [];
    this.datasetElementType = new.target.datasetElementType;
    this.dataElementType = new.target.dataElementType;
    this.initialize();
  }
  initialize() {
    const meta = this._cachedMeta;
    this.configure();
    this.linkScales();
    meta._stacked = isStacked(meta.vScale, meta);
    this.addElements();
    if (this.options.fill && !this.chart.isPluginEnabled("filler")) {
      console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options");
    }
  }
  updateIndex(datasetIndex) {
    if (this.index !== datasetIndex) {
      clearStacks(this._cachedMeta);
    }
    this.index = datasetIndex;
  }
  linkScales() {
    const chart = this.chart;
    const meta = this._cachedMeta;
    const dataset = this.getDataset();
    const chooseId = (axis, x, y, r) => axis === "x" ? x : axis === "r" ? r : y;
    const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, "x"));
    const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, "y"));
    const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, "r"));
    const indexAxis = meta.indexAxis;
    const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);
    const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);
    meta.xScale = this.getScaleForId(xid);
    meta.yScale = this.getScaleForId(yid);
    meta.rScale = this.getScaleForId(rid);
    meta.iScale = this.getScaleForId(iid);
    meta.vScale = this.getScaleForId(vid);
  }
  getDataset() {
    return this.chart.data.datasets[this.index];
  }
  getMeta() {
    return this.chart.getDatasetMeta(this.index);
  }
  getScaleForId(scaleID) {
    return this.chart.scales[scaleID];
  }
  _getOtherScale(scale) {
    const meta = this._cachedMeta;
    return scale === meta.iScale ? meta.vScale : meta.iScale;
  }
  reset() {
    this._update("reset");
  }
  _destroy() {
    const meta = this._cachedMeta;
    if (this._data) {
      unlistenArrayEvents(this._data, this);
    }
    if (meta._stacked) {
      clearStacks(meta);
    }
  }
  _dataCheck() {
    const dataset = this.getDataset();
    const data = dataset.data || (dataset.data = []);
    const _data = this._data;
    if (isObject(data)) {
      this._data = convertObjectDataToArray(data);
    } else if (_data !== data) {
      if (_data) {
        unlistenArrayEvents(_data, this);
        const meta = this._cachedMeta;
        clearStacks(meta);
        meta._parsed = [];
      }
      if (data && Object.isExtensible(data)) {
        listenArrayEvents(data, this);
      }
      this._syncList = [];
      this._data = data;
    }
  }
  addElements() {
    const meta = this._cachedMeta;
    this._dataCheck();
    if (this.datasetElementType) {
      meta.dataset = new this.datasetElementType();
    }
  }
  buildOrUpdateElements(resetNewElements) {
    const meta = this._cachedMeta;
    const dataset = this.getDataset();
    let stackChanged = false;
    this._dataCheck();
    const oldStacked = meta._stacked;
    meta._stacked = isStacked(meta.vScale, meta);
    if (meta.stack !== dataset.stack) {
      stackChanged = true;
      clearStacks(meta);
      meta.stack = dataset.stack;
    }
    this._resyncElements(resetNewElements);
    if (stackChanged || oldStacked !== meta._stacked) {
      updateStacks(this, meta._parsed);
    }
  }
  configure() {
    const config = this.chart.config;
    const scopeKeys = config.datasetScopeKeys(this._type);
    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);
    this.options = config.createResolver(scopes, this.getContext());
    this._parsing = this.options.parsing;
    this._cachedDataOpts = {};
  }
  parse(start, count) {
    const { _cachedMeta: meta, _data: data } = this;
    const { iScale, _stacked } = meta;
    const iAxis = iScale.axis;
    let sorted = start === 0 && count === data.length ? true : meta._sorted;
    let prev = start > 0 && meta._parsed[start - 1];
    let i, cur, parsed;
    if (this._parsing === false) {
      meta._parsed = data;
      meta._sorted = true;
      parsed = data;
    } else {
      if (isArray(data[start])) {
        parsed = this.parseArrayData(meta, data, start, count);
      } else if (isObject(data[start])) {
        parsed = this.parseObjectData(meta, data, start, count);
      } else {
        parsed = this.parsePrimitiveData(meta, data, start, count);
      }
      const isNotInOrderComparedToPrev = () => cur[iAxis] === null || prev && cur[iAxis] < prev[iAxis];
      for (i = 0; i < count; ++i) {
        meta._parsed[i + start] = cur = parsed[i];
        if (sorted) {
          if (isNotInOrderComparedToPrev()) {
            sorted = false;
          }
          prev = cur;
        }
      }
      meta._sorted = sorted;
    }
    if (_stacked) {
      updateStacks(this, parsed);
    }
  }
  parsePrimitiveData(meta, data, start, count) {
    const { iScale, vScale } = meta;
    const iAxis = iScale.axis;
    const vAxis = vScale.axis;
    const labels = iScale.getLabels();
    const singleScale = iScale === vScale;
    const parsed = new Array(count);
    let i, ilen, index;
    for (i = 0, ilen = count; i < ilen; ++i) {
      index = i + start;
      parsed[i] = {
        [iAxis]: singleScale || iScale.parse(labels[index], index),
        [vAxis]: vScale.parse(data[index], index)
      };
    }
    return parsed;
  }
  parseArrayData(meta, data, start, count) {
    const { xScale, yScale } = meta;
    const parsed = new Array(count);
    let i, ilen, index, item;
    for (i = 0, ilen = count; i < ilen; ++i) {
      index = i + start;
      item = data[index];
      parsed[i] = {
        x: xScale.parse(item[0], index),
        y: yScale.parse(item[1], index)
      };
    }
    return parsed;
  }
  parseObjectData(meta, data, start, count) {
    const { xScale, yScale } = meta;
    const { xAxisKey = "x", yAxisKey = "y" } = this._parsing;
    const parsed = new Array(count);
    let i, ilen, index, item;
    for (i = 0, ilen = count; i < ilen; ++i) {
      index = i + start;
      item = data[index];
      parsed[i] = {
        x: xScale.parse(resolveObjectKey(item, xAxisKey), index),
        y: yScale.parse(resolveObjectKey(item, yAxisKey), index)
      };
    }
    return parsed;
  }
  getParsed(index) {
    return this._cachedMeta._parsed[index];
  }
  getDataElement(index) {
    return this._cachedMeta.data[index];
  }
  applyStack(scale, parsed, mode) {
    const chart = this.chart;
    const meta = this._cachedMeta;
    const value = parsed[scale.axis];
    const stack = {
      keys: getSortedDatasetIndices(chart, true),
      values: parsed._stacks[scale.axis]._visualValues
    };
    return applyStack(stack, value, meta.index, {
      mode
    });
  }
  updateRangeFromParsed(range, scale, parsed, stack) {
    const parsedValue = parsed[scale.axis];
    let value = parsedValue === null ? NaN : parsedValue;
    const values = stack && parsed._stacks[scale.axis];
    if (stack && values) {
      stack.values = values;
      value = applyStack(stack, parsedValue, this._cachedMeta.index);
    }
    range.min = Math.min(range.min, value);
    range.max = Math.max(range.max, value);
  }
  getMinMax(scale, canStack) {
    const meta = this._cachedMeta;
    const _parsed = meta._parsed;
    const sorted = meta._sorted && scale === meta.iScale;
    const ilen = _parsed.length;
    const otherScale = this._getOtherScale(scale);
    const stack = createStack(canStack, meta, this.chart);
    const range = {
      min: Number.POSITIVE_INFINITY,
      max: Number.NEGATIVE_INFINITY
    };
    const { min: otherMin, max: otherMax } = getUserBounds(otherScale);
    let i, parsed;
    function _skip() {
      parsed = _parsed[i];
      const otherValue = parsed[otherScale.axis];
      return !isNumberFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;
    }
    for (i = 0; i < ilen; ++i) {
      if (_skip()) {
        continue;
      }
      this.updateRangeFromParsed(range, scale, parsed, stack);
      if (sorted) {
        break;
      }
    }
    if (sorted) {
      for (i = ilen - 1; i >= 0; --i) {
        if (_skip()) {
          continue;
        }
        this.updateRangeFromParsed(range, scale, parsed, stack);
        break;
      }
    }
    return range;
  }
  getAllParsedValues(scale) {
    const parsed = this._cachedMeta._parsed;
    const values = [];
    let i, ilen, value;
    for (i = 0, ilen = parsed.length; i < ilen; ++i) {
      value = parsed[i][scale.axis];
      if (isNumberFinite(value)) {
        values.push(value);
      }
    }
    return values;
  }
  getMaxOverflow() {
    return false;
  }
  getLabelAndValue(index) {
    const meta = this._cachedMeta;
    const iScale = meta.iScale;
    const vScale = meta.vScale;
    const parsed = this.getParsed(index);
    return {
      label: iScale ? "" + iScale.getLabelForValue(parsed[iScale.axis]) : "",
      value: vScale ? "" + vScale.getLabelForValue(parsed[vScale.axis]) : ""
    };
  }
  _update(mode) {
    const meta = this._cachedMeta;
    this.update(mode || "default");
    meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));
  }
  update(mode) {
  }
  draw() {
    const ctx = this._ctx;
    const chart = this.chart;
    const meta = this._cachedMeta;
    const elements = meta.data || [];
    const area = chart.chartArea;
    const active = [];
    const start = this._drawStart || 0;
    const count = this._drawCount || elements.length - start;
    const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;
    let i;
    if (meta.dataset) {
      meta.dataset.draw(ctx, area, start, count);
    }
    for (i = start; i < start + count; ++i) {
      const element = elements[i];
      if (element.hidden) {
        continue;
      }
      if (element.active && drawActiveElementsOnTop) {
        active.push(element);
      } else {
        element.draw(ctx, area);
      }
    }
    for (i = 0; i < active.length; ++i) {
      active[i].draw(ctx, area);
    }
  }
  getStyle(index, active) {
    const mode = active ? "active" : "default";
    return index === void 0 && this._cachedMeta.dataset ? this.resolveDatasetElementOptions(mode) : this.resolveDataElementOptions(index || 0, mode);
  }
  getContext(index, active, mode) {
    const dataset = this.getDataset();
    let context;
    if (index >= 0 && index < this._cachedMeta.data.length) {
      const element = this._cachedMeta.data[index];
      context = element.$context || (element.$context = createDataContext(this.getContext(), index, element));
      context.parsed = this.getParsed(index);
      context.raw = dataset.data[index];
      context.index = context.dataIndex = index;
    } else {
      context = this.$context || (this.$context = createDatasetContext(this.chart.getContext(), this.index));
      context.dataset = dataset;
      context.index = context.datasetIndex = this.index;
    }
    context.active = !!active;
    context.mode = mode;
    return context;
  }
  resolveDatasetElementOptions(mode) {
    return this._resolveElementOptions(this.datasetElementType.id, mode);
  }
  resolveDataElementOptions(index, mode) {
    return this._resolveElementOptions(this.dataElementType.id, mode, index);
  }
  _resolveElementOptions(elementType, mode = "default", index) {
    const active = mode === "active";
    const cache = this._cachedDataOpts;
    const cacheKey = elementType + "-" + mode;
    const cached = cache[cacheKey];
    const sharing = this.enableOptionSharing && defined(index);
    if (cached) {
      return cloneIfNotShared(cached, sharing);
    }
    const config = this.chart.config;
    const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);
    const prefixes = active ? [
      `${elementType}Hover`,
      "hover",
      elementType,
      ""
    ] : [
      elementType,
      ""
    ];
    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);
    const names2 = Object.keys(defaults.elements[elementType]);
    const context = () => this.getContext(index, active, mode);
    const values = config.resolveNamedOptions(scopes, names2, context, prefixes);
    if (values.$shared) {
      values.$shared = sharing;
      cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));
    }
    return values;
  }
  _resolveAnimations(index, transition, active) {
    const chart = this.chart;
    const cache = this._cachedDataOpts;
    const cacheKey = `animation-${transition}`;
    const cached = cache[cacheKey];
    if (cached) {
      return cached;
    }
    let options;
    if (chart.options.animation !== false) {
      const config = this.chart.config;
      const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);
      const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);
      options = config.createResolver(scopes, this.getContext(index, active, transition));
    }
    const animations = new Animations(chart, options && options.animations);
    if (options && options._cacheable) {
      cache[cacheKey] = Object.freeze(animations);
    }
    return animations;
  }
  getSharedOptions(options) {
    if (!options.$shared) {
      return;
    }
    return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));
  }
  includeOptions(mode, sharedOptions) {
    return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;
  }
  _getSharedOptions(start, mode) {
    const firstOpts = this.resolveDataElementOptions(start, mode);
    const previouslySharedOptions = this._sharedOptions;
    const sharedOptions = this.getSharedOptions(firstOpts);
    const includeOptions = this.includeOptions(mode, sharedOptions) || sharedOptions !== previouslySharedOptions;
    this.updateSharedOptions(sharedOptions, mode, firstOpts);
    return {
      sharedOptions,
      includeOptions
    };
  }
  updateElement(element, index, properties, mode) {
    if (isDirectUpdateMode(mode)) {
      Object.assign(element, properties);
    } else {
      this._resolveAnimations(index, mode).update(element, properties);
    }
  }
  updateSharedOptions(sharedOptions, mode, newOptions) {
    if (sharedOptions && !isDirectUpdateMode(mode)) {
      this._resolveAnimations(void 0, mode).update(sharedOptions, newOptions);
    }
  }
  _setStyle(element, index, mode, active) {
    element.active = active;
    const options = this.getStyle(index, active);
    this._resolveAnimations(index, mode, active).update(element, {
      options: !active && this.getSharedOptions(options) || options
    });
  }
  removeHoverStyle(element, datasetIndex, index) {
    this._setStyle(element, index, "active", false);
  }
  setHoverStyle(element, datasetIndex, index) {
    this._setStyle(element, index, "active", true);
  }
  _removeDatasetHoverStyle() {
    const element = this._cachedMeta.dataset;
    if (element) {
      this._setStyle(element, void 0, "active", false);
    }
  }
  _setDatasetHoverStyle() {
    const element = this._cachedMeta.dataset;
    if (element) {
      this._setStyle(element, void 0, "active", true);
    }
  }
  _resyncElements(resetNewElements) {
    const data = this._data;
    const elements = this._cachedMeta.data;
    for (const [method, arg1, arg2] of this._syncList) {
      this[method](arg1, arg2);
    }
    this._syncList = [];
    const numMeta = elements.length;
    const numData = data.length;
    const count = Math.min(numData, numMeta);
    if (count) {
      this.parse(0, count);
    }
    if (numData > numMeta) {
      this._insertElements(numMeta, numData - numMeta, resetNewElements);
    } else if (numData < numMeta) {
      this._removeElements(numData, numMeta - numData);
    }
  }
  _insertElements(start, count, resetNewElements = true) {
    const meta = this._cachedMeta;
    const data = meta.data;
    const end = start + count;
    let i;
    const move = (arr) => {
      arr.length += count;
      for (i = arr.length - 1; i >= end; i--) {
        arr[i] = arr[i - count];
      }
    };
    move(data);
    for (i = start; i < end; ++i) {
      data[i] = new this.dataElementType();
    }
    if (this._parsing) {
      move(meta._parsed);
    }
    this.parse(start, count);
    if (resetNewElements) {
      this.updateElements(data, start, count, "reset");
    }
  }
  updateElements(element, start, count, mode) {
  }
  _removeElements(start, count) {
    const meta = this._cachedMeta;
    if (this._parsing) {
      const removed = meta._parsed.splice(start, count);
      if (meta._stacked) {
        clearStacks(meta, removed);
      }
    }
    meta.data.splice(start, count);
  }
  _sync(args) {
    if (this._parsing) {
      this._syncList.push(args);
    } else {
      const [method, arg1, arg2] = args;
      this[method](arg1, arg2);
    }
    this.chart._dataChanges.push([
      this.index,
      ...args
    ]);
  }
  _onDataPush() {
    const count = arguments.length;
    this._sync([
      "_insertElements",
      this.getDataset().data.length - count,
      count
    ]);
  }
  _onDataPop() {
    this._sync([
      "_removeElements",
      this._cachedMeta.data.length - 1,
      1
    ]);
  }
  _onDataShift() {
    this._sync([
      "_removeElements",
      0,
      1
    ]);
  }
  _onDataSplice(start, count) {
    if (count) {
      this._sync([
        "_removeElements",
        start,
        count
      ]);
    }
    const newCount = arguments.length - 2;
    if (newCount) {
      this._sync([
        "_insertElements",
        start,
        newCount
      ]);
    }
  }
  _onDataUnshift() {
    this._sync([
      "_insertElements",
      0,
      arguments.length
    ]);
  }
}
__publicField(DatasetController, "defaults", {});
__publicField(DatasetController, "datasetElementType", null);
__publicField(DatasetController, "dataElementType", null);
function getAllScaleValues(scale, type) {
  if (!scale._cache.$bar) {
    const visibleMetas = scale.getMatchingVisibleMetas(type);
    let values = [];
    for (let i = 0, ilen = visibleMetas.length; i < ilen; i++) {
      values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));
    }
    scale._cache.$bar = _arrayUnique(values.sort((a, b) => a - b));
  }
  return scale._cache.$bar;
}
function computeMinSampleSize(meta) {
  const scale = meta.iScale;
  const values = getAllScaleValues(scale, meta.type);
  let min = scale._length;
  let i, ilen, curr, prev;
  const updateMinAndPrev = () => {
    if (curr === 32767 || curr === -32768) {
      return;
    }
    if (defined(prev)) {
      min = Math.min(min, Math.abs(curr - prev) || min);
    }
    prev = curr;
  };
  for (i = 0, ilen = values.length; i < ilen; ++i) {
    curr = scale.getPixelForValue(values[i]);
    updateMinAndPrev();
  }
  prev = void 0;
  for (i = 0, ilen = scale.ticks.length; i < ilen; ++i) {
    curr = scale.getPixelForTick(i);
    updateMinAndPrev();
  }
  return min;
}
function computeFitCategoryTraits(index, ruler, options, stackCount) {
  const thickness = options.barThickness;
  let size, ratio;
  if (isNullOrUndef(thickness)) {
    size = ruler.min * options.categoryPercentage;
    ratio = options.barPercentage;
  } else {
    size = thickness * stackCount;
    ratio = 1;
  }
  return {
    chunk: size / stackCount,
    ratio,
    start: ruler.pixels[index] - size / 2
  };
}
function computeFlexCategoryTraits(index, ruler, options, stackCount) {
  const pixels = ruler.pixels;
  const curr = pixels[index];
  let prev = index > 0 ? pixels[index - 1] : null;
  let next = index < pixels.length - 1 ? pixels[index + 1] : null;
  const percent = options.categoryPercentage;
  if (prev === null) {
    prev = curr - (next === null ? ruler.end - ruler.start : next - curr);
  }
  if (next === null) {
    next = curr + curr - prev;
  }
  const start = curr - (curr - Math.min(prev, next)) / 2 * percent;
  const size = Math.abs(next - prev) / 2 * percent;
  return {
    chunk: size / stackCount,
    ratio: options.barPercentage,
    start
  };
}
function parseFloatBar(entry, item, vScale, i) {
  const startValue = vScale.parse(entry[0], i);
  const endValue = vScale.parse(entry[1], i);
  const min = Math.min(startValue, endValue);
  const max = Math.max(startValue, endValue);
  let barStart = min;
  let barEnd = max;
  if (Math.abs(min) > Math.abs(max)) {
    barStart = max;
    barEnd = min;
  }
  item[vScale.axis] = barEnd;
  item._custom = {
    barStart,
    barEnd,
    start: startValue,
    end: endValue,
    min,
    max
  };
}
function parseValue(entry, item, vScale, i) {
  if (isArray(entry)) {
    parseFloatBar(entry, item, vScale, i);
  } else {
    item[vScale.axis] = vScale.parse(entry, i);
  }
  return item;
}
function parseArrayOrPrimitive(meta, data, start, count) {
  const iScale = meta.iScale;
  const vScale = meta.vScale;
  const labels = iScale.getLabels();
  const singleScale = iScale === vScale;
  const parsed = [];
  let i, ilen, item, entry;
  for (i = start, ilen = start + count; i < ilen; ++i) {
    entry = data[i];
    item = {};
    item[iScale.axis] = singleScale || iScale.parse(labels[i], i);
    parsed.push(parseValue(entry, item, vScale, i));
  }
  return parsed;
}
function isFloatBar(custom) {
  return custom && custom.barStart !== void 0 && custom.barEnd !== void 0;
}
function barSign(size, vScale, actualBase) {
  if (size !== 0) {
    return sign(size);
  }
  return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);
}
function borderProps(properties) {
  let reverse, start, end, top, bottom;
  if (properties.horizontal) {
    reverse = properties.base > properties.x;
    start = "left";
    end = "right";
  } else {
    reverse = properties.base < properties.y;
    start = "bottom";
    end = "top";
  }
  if (reverse) {
    top = "end";
    bottom = "start";
  } else {
    top = "start";
    bottom = "end";
  }
  return {
    start,
    end,
    reverse,
    top,
    bottom
  };
}
function setBorderSkipped(properties, options, stack, index) {
  let edge = options.borderSkipped;
  const res = {};
  if (!edge) {
    properties.borderSkipped = res;
    return;
  }
  if (edge === true) {
    properties.borderSkipped = {
      top: true,
      right: true,
      bottom: true,
      left: true
    };
    return;
  }
  const { start, end, reverse, top, bottom } = borderProps(properties);
  if (edge === "middle" && stack) {
    properties.enableBorderRadius = true;
    if ((stack._top || 0) === index) {
      edge = top;
    } else if ((stack._bottom || 0) === index) {
      edge = bottom;
    } else {
      res[parseEdge(bottom, start, end, reverse)] = true;
      edge = top;
    }
  }
  res[parseEdge(edge, start, end, reverse)] = true;
  properties.borderSkipped = res;
}
function parseEdge(edge, a, b, reverse) {
  if (reverse) {
    edge = swap(edge, a, b);
    edge = startEnd(edge, b, a);
  } else {
    edge = startEnd(edge, a, b);
  }
  return edge;
}
function swap(orig, v1, v2) {
  return orig === v1 ? v2 : orig === v2 ? v1 : orig;
}
function startEnd(v, start, end) {
  return v === "start" ? start : v === "end" ? end : v;
}
function setInflateAmount(properties, { inflateAmount }, ratio) {
  properties.inflateAmount = inflateAmount === "auto" ? ratio === 1 ? 0.33 : 0 : inflateAmount;
}
class BarController extends DatasetController {
  parsePrimitiveData(meta, data, start, count) {
    return parseArrayOrPrimitive(meta, data, start, count);
  }
  parseArrayData(meta, data, start, count) {
    return parseArrayOrPrimitive(meta, data, start, count);
  }
  parseObjectData(meta, data, start, count) {
    const { iScale, vScale } = meta;
    const { xAxisKey = "x", yAxisKey = "y" } = this._parsing;
    const iAxisKey = iScale.axis === "x" ? xAxisKey : yAxisKey;
    const vAxisKey = vScale.axis === "x" ? xAxisKey : yAxisKey;
    const parsed = [];
    let i, ilen, item, obj;
    for (i = start, ilen = start + count; i < ilen; ++i) {
      obj = data[i];
      item = {};
      item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);
      parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));
    }
    return parsed;
  }
  updateRangeFromParsed(range, scale, parsed, stack) {
    super.updateRangeFromParsed(range, scale, parsed, stack);
    const custom = parsed._custom;
    if (custom && scale === this._cachedMeta.vScale) {
      range.min = Math.min(range.min, custom.min);
      range.max = Math.max(range.max, custom.max);
    }
  }
  getMaxOverflow() {
    return 0;
  }
  getLabelAndValue(index) {
    const meta = this._cachedMeta;
    const { iScale, vScale } = meta;
    const parsed = this.getParsed(index);
    const custom = parsed._custom;
    const value = isFloatBar(custom) ? "[" + custom.start + ", " + custom.end + "]" : "" + vScale.getLabelForValue(parsed[vScale.axis]);
    return {
      label: "" + iScale.getLabelForValue(parsed[iScale.axis]),
      value
    };
  }
  initialize() {
    this.enableOptionSharing = true;
    super.initialize();
    const meta = this._cachedMeta;
    meta.stack = this.getDataset().stack;
  }
  update(mode) {
    const meta = this._cachedMeta;
    this.updateElements(meta.data, 0, meta.data.length, mode);
  }
  updateElements(bars, start, count, mode) {
    const reset = mode === "reset";
    const { index, _cachedMeta: { vScale } } = this;
    const base = vScale.getBasePixel();
    const horizontal = vScale.isHorizontal();
    const ruler = this._getRuler();
    const { sharedOptions, includeOptions } = this._getSharedOptions(start, mode);
    for (let i = start; i < start + count; i++) {
      const parsed = this.getParsed(i);
      const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {
        base,
        head: base
      } : this._calculateBarValuePixels(i);
      const ipixels = this._calculateBarIndexPixels(i, ruler);
      const stack = (parsed._stacks || {})[vScale.axis];
      const properties = {
        horizontal,
        base: vpixels.base,
        enableBorderRadius: !stack || isFloatBar(parsed._custom) || index === stack._top || index === stack._bottom,
        x: horizontal ? vpixels.head : ipixels.center,
        y: horizontal ? ipixels.center : vpixels.head,
        height: horizontal ? ipixels.size : Math.abs(vpixels.size),
        width: horizontal ? Math.abs(vpixels.size) : ipixels.size
      };
      if (includeOptions) {
        properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? "active" : mode);
      }
      const options = properties.options || bars[i].options;
      setBorderSkipped(properties, options, stack, index);
      setInflateAmount(properties, options, ruler.ratio);
      this.updateElement(bars[i], i, properties, mode);
    }
  }
  _getStacks(last, dataIndex) {
    const { iScale } = this._cachedMeta;
    const metasets = iScale.getMatchingVisibleMetas(this._type).filter((meta) => meta.controller.options.grouped);
    const stacked = iScale.options.stacked;
    const stacks = [];
    const skipNull = (meta) => {
      const parsed = meta.controller.getParsed(dataIndex);
      const val = parsed && parsed[meta.vScale.axis];
      if (isNullOrUndef(val) || isNaN(val)) {
        return true;
      }
    };
    for (const meta of metasets) {
      if (dataIndex !== void 0 && skipNull(meta)) {
        continue;
      }
      if (stacked === false || stacks.indexOf(meta.stack) === -1 || stacked === void 0 && meta.stack === void 0) {
        stacks.push(meta.stack);
      }
      if (meta.index === last) {
        break;
      }
    }
    if (!stacks.length) {
      stacks.push(void 0);
    }
    return stacks;
  }
  _getStackCount(index) {
    return this._getStacks(void 0, index).length;
  }
  _getStackIndex(datasetIndex, name2, dataIndex) {
    const stacks = this._getStacks(datasetIndex, dataIndex);
    const index = name2 !== void 0 ? stacks.indexOf(name2) : -1;
    return index === -1 ? stacks.length - 1 : index;
  }
  _getRuler() {
    const opts = this.options;
    const meta = this._cachedMeta;
    const iScale = meta.iScale;
    const pixels = [];
    let i, ilen;
    for (i = 0, ilen = meta.data.length; i < ilen; ++i) {
      pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));
    }
    const barThickness = opts.barThickness;
    const min = barThickness || computeMinSampleSize(meta);
    return {
      min,
      pixels,
      start: iScale._startPixel,
      end: iScale._endPixel,
      stackCount: this._getStackCount(),
      scale: iScale,
      grouped: opts.grouped,
      ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage
    };
  }
  _calculateBarValuePixels(index) {
    const { _cachedMeta: { vScale, _stacked, index: datasetIndex }, options: { base: baseValue, minBarLength } } = this;
    const actualBase = baseValue || 0;
    const parsed = this.getParsed(index);
    const custom = parsed._custom;
    const floating = isFloatBar(custom);
    let value = parsed[vScale.axis];
    let start = 0;
    let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;
    let head, size;
    if (length !== value) {
      start = length - value;
      length = value;
    }
    if (floating) {
      value = custom.barStart;
      length = custom.barEnd - custom.barStart;
      if (value !== 0 && sign(value) !== sign(custom.barEnd)) {
        start = 0;
      }
      start += value;
    }
    const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;
    let base = vScale.getPixelForValue(startValue);
    if (this.chart.getDataVisibility(index)) {
      head = vScale.getPixelForValue(start + length);
    } else {
      head = base;
    }
    size = head - base;
    if (Math.abs(size) < minBarLength) {
      size = barSign(size, vScale, actualBase) * minBarLength;
      if (value === actualBase) {
        base -= size / 2;
      }
      const startPixel = vScale.getPixelForDecimal(0);
      const endPixel = vScale.getPixelForDecimal(1);
      const min = Math.min(startPixel, endPixel);
      const max = Math.max(startPixel, endPixel);
      base = Math.max(Math.min(base, max), min);
      head = base + size;
      if (_stacked && !floating) {
        parsed._stacks[vScale.axis]._visualValues[datasetIndex] = vScale.getValueForPixel(head) - vScale.getValueForPixel(base);
      }
    }
    if (base === vScale.getPixelForValue(actualBase)) {
      const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;
      base += halfGrid;
      size -= halfGrid;
    }
    return {
      size,
      base,
      head,
      center: head + size / 2
    };
  }
  _calculateBarIndexPixels(index, ruler) {
    const scale = ruler.scale;
    const options = this.options;
    const skipNull = options.skipNull;
    const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);
    let center, size;
    if (ruler.grouped) {
      const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;
      const range = options.barThickness === "flex" ? computeFlexCategoryTraits(index, ruler, options, stackCount) : computeFitCategoryTraits(index, ruler, options, stackCount);
      const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : void 0);
      center = range.start + range.chunk * stackIndex + range.chunk / 2;
      size = Math.min(maxBarThickness, range.chunk * range.ratio);
    } else {
      center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);
      size = Math.min(maxBarThickness, ruler.min * ruler.ratio);
    }
    return {
      base: center - size / 2,
      head: center + size / 2,
      center,
      size
    };
  }
  draw() {
    const meta = this._cachedMeta;
    const vScale = meta.vScale;
    const rects = meta.data;
    const ilen = rects.length;
    let i = 0;
    for (; i < ilen; ++i) {
      if (this.getParsed(i)[vScale.axis] !== null) {
        rects[i].draw(this._ctx);
      }
    }
  }
}
__publicField(BarController, "id", "bar");
__publicField(BarController, "defaults", {
  datasetElementType: false,
  dataElementType: "bar",
  categoryPercentage: 0.8,
  barPercentage: 0.9,
  grouped: true,
  animations: {
    numbers: {
      type: "number",
      properties: [
        "x",
        "y",
        "base",
        "width",
        "height"
      ]
    }
  }
});
__publicField(BarController, "overrides", {
  scales: {
    _index_: {
      type: "category",
      offset: true,
      grid: {
        offset: true
      }
    },
    _value_: {
      type: "linear",
      beginAtZero: true
    }
  }
});
function getRatioAndOffset(rotation, circumference, cutout) {
  let ratioX = 1;
  let ratioY = 1;
  let offsetX = 0;
  let offsetY = 0;
  if (circumference < TAU) {
    const startAngle = rotation;
    const endAngle = startAngle + circumference;
    const startX = Math.cos(startAngle);
    const startY = Math.sin(startAngle);
    const endX = Math.cos(endAngle);
    const endY = Math.sin(endAngle);
    const calcMax = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);
    const calcMin = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);
    const maxX = calcMax(0, startX, endX);
    const maxY = calcMax(HALF_PI, startY, endY);
    const minX = calcMin(PI, startX, endX);
    const minY = calcMin(PI + HALF_PI, startY, endY);
    ratioX = (maxX - minX) / 2;
    ratioY = (maxY - minY) / 2;
    offsetX = -(maxX + minX) / 2;
    offsetY = -(maxY + minY) / 2;
  }
  return {
    ratioX,
    ratioY,
    offsetX,
    offsetY
  };
}
class DoughnutController extends DatasetController {
  constructor(chart, datasetIndex) {
    super(chart, datasetIndex);
    this.enableOptionSharing = true;
    this.innerRadius = void 0;
    this.outerRadius = void 0;
    this.offsetX = void 0;
    this.offsetY = void 0;
  }
  linkScales() {
  }
  parse(start, count) {
    const data = this.getDataset().data;
    const meta = this._cachedMeta;
    if (this._parsing === false) {
      meta._parsed = data;
    } else {
      let getter = (i2) => +data[i2];
      if (isObject(data[start])) {
        const { key = "value" } = this._parsing;
        getter = (i2) => +resolveObjectKey(data[i2], key);
      }
      let i, ilen;
      for (i = start, ilen = start + count; i < ilen; ++i) {
        meta._parsed[i] = getter(i);
      }
    }
  }
  _getRotation() {
    return toRadians(this.options.rotation - 90);
  }
  _getCircumference() {
    return toRadians(this.options.circumference);
  }
  _getRotationExtents() {
    let min = TAU;
    let max = -TAU;
    for (let i = 0; i < this.chart.data.datasets.length; ++i) {
      if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {
        const controller = this.chart.getDatasetMeta(i).controller;
        const rotation = controller._getRotation();
        const circumference = controller._getCircumference();
        min = Math.min(min, rotation);
        max = Math.max(max, rotation + circumference);
      }
    }
    return {
      rotation: min,
      circumference: max - min
    };
  }
  update(mode) {
    const chart = this.chart;
    const { chartArea } = chart;
    const meta = this._cachedMeta;
    const arcs = meta.data;
    const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;
    const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);
    const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);
    const chartWeight = this._getRingWeight(this.index);
    const { circumference, rotation } = this._getRotationExtents();
    const { ratioX, ratioY, offsetX, offsetY } = getRatioAndOffset(rotation, circumference, cutout);
    const maxWidth = (chartArea.width - spacing) / ratioX;
    const maxHeight = (chartArea.height - spacing) / ratioY;
    const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);
    const outerRadius = toDimension(this.options.radius, maxRadius);
    const innerRadius = Math.max(outerRadius * cutout, 0);
    const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();
    this.offsetX = offsetX * outerRadius;
    this.offsetY = offsetY * outerRadius;
    meta.total = this.calculateTotal();
    this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);
    this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);
    this.updateElements(arcs, 0, arcs.length, mode);
  }
  _circumference(i, reset) {
    const opts = this.options;
    const meta = this._cachedMeta;
    const circumference = this._getCircumference();
    if (reset && opts.animation.animateRotate || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {
      return 0;
    }
    return this.calculateCircumference(meta._parsed[i] * circumference / TAU);
  }
  updateElements(arcs, start, count, mode) {
    const reset = mode === "reset";
    const chart = this.chart;
    const chartArea = chart.chartArea;
    const opts = chart.options;
    const animationOpts = opts.animation;
    const centerX = (chartArea.left + chartArea.right) / 2;
    const centerY = (chartArea.top + chartArea.bottom) / 2;
    const animateScale = reset && animationOpts.animateScale;
    const innerRadius = animateScale ? 0 : this.innerRadius;
    const outerRadius = animateScale ? 0 : this.outerRadius;
    const { sharedOptions, includeOptions } = this._getSharedOptions(start, mode);
    let startAngle = this._getRotation();
    let i;
    for (i = 0; i < start; ++i) {
      startAngle += this._circumference(i, reset);
    }
    for (i = start; i < start + count; ++i) {
      const circumference = this._circumference(i, reset);
      const arc = arcs[i];
      const properties = {
        x: centerX + this.offsetX,
        y: centerY + this.offsetY,
        startAngle,
        endAngle: startAngle + circumference,
        circumference,
        outerRadius,
        innerRadius
      };
      if (includeOptions) {
        properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? "active" : mode);
      }
      startAngle += circumference;
      this.updateElement(arc, i, properties, mode);
    }
  }
  calculateTotal() {
    const meta = this._cachedMeta;
    const metaData = meta.data;
    let total = 0;
    let i;
    for (i = 0; i < metaData.length; i++) {
      const value = meta._parsed[i];
      if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {
        total += Math.abs(value);
      }
    }
    return total;
  }
  calculateCircumference(value) {
    const total = this._cachedMeta.total;
    if (total > 0 && !isNaN(value)) {
      return TAU * (Math.abs(value) / total);
    }
    return 0;
  }
  getLabelAndValue(index) {
    const meta = this._cachedMeta;
    const chart = this.chart;
    const labels = chart.data.labels || [];
    const value = formatNumber(meta._parsed[index], chart.options.locale);
    return {
      label: labels[index] || "",
      value
    };
  }
  getMaxBorderWidth(arcs) {
    let max = 0;
    const chart = this.chart;
    let i, ilen, meta, controller, options;
    if (!arcs) {
      for (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {
        if (chart.isDatasetVisible(i)) {
          meta = chart.getDatasetMeta(i);
          arcs = meta.data;
          controller = meta.controller;
          break;
        }
      }
    }
    if (!arcs) {
      return 0;
    }
    for (i = 0, ilen = arcs.length; i < ilen; ++i) {
      options = controller.resolveDataElementOptions(i);
      if (options.borderAlign !== "inner") {
        max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);
      }
    }
    return max;
  }
  getMaxOffset(arcs) {
    let max = 0;
    for (let i = 0, ilen = arcs.length; i < ilen; ++i) {
      const options = this.resolveDataElementOptions(i);
      max = Math.max(max, options.offset || 0, options.hoverOffset || 0);
    }
    return max;
  }
  _getRingWeightOffset(datasetIndex) {
    let ringWeightOffset = 0;
    for (let i = 0; i < datasetIndex; ++i) {
      if (this.chart.isDatasetVisible(i)) {
        ringWeightOffset += this._getRingWeight(i);
      }
    }
    return ringWeightOffset;
  }
  _getRingWeight(datasetIndex) {
    return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);
  }
  _getVisibleDatasetWeightTotal() {
    return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;
  }
}
__publicField(DoughnutController, "id", "doughnut");
__publicField(DoughnutController, "defaults", {
  datasetElementType: false,
  dataElementType: "arc",
  animation: {
    animateRotate: true,
    animateScale: false
  },
  animations: {
    numbers: {
      type: "number",
      properties: [
        "circumference",
        "endAngle",
        "innerRadius",
        "outerRadius",
        "startAngle",
        "x",
        "y",
        "offset",
        "borderWidth",
        "spacing"
      ]
    }
  },
  cutout: "50%",
  rotation: 0,
  circumference: 360,
  radius: "100%",
  spacing: 0,
  indexAxis: "r"
});
__publicField(DoughnutController, "descriptors", {
  _scriptable: (name2) => name2 !== "spacing",
  _indexable: (name2) => name2 !== "spacing"
});
__publicField(DoughnutController, "overrides", {
  aspectRatio: 1,
  plugins: {
    legend: {
      labels: {
        generateLabels(chart) {
          const data = chart.data;
          if (data.labels.length && data.datasets.length) {
            const { labels: { pointStyle, color: color2 } } = chart.legend.options;
            return data.labels.map((label, i) => {
              const meta = chart.getDatasetMeta(0);
              const style = meta.controller.getStyle(i);
              return {
                text: label,
                fillStyle: style.backgroundColor,
                strokeStyle: style.borderColor,
                fontColor: color2,
                lineWidth: style.borderWidth,
                pointStyle,
                hidden: !chart.getDataVisibility(i),
                index: i
              };
            });
          }
          return [];
        }
      },
      onClick(e, legendItem, legend) {
        legend.chart.toggleDataVisibility(legendItem.index);
        legend.chart.update();
      }
    }
  }
});
class PieController extends DoughnutController {
}
__publicField(PieController, "id", "pie");
__publicField(PieController, "defaults", {
  cutout: 0,
  rotation: 0,
  circumference: 360,
  radius: "100%"
});
function abstract() {
  throw new Error("This method is not implemented: Check that a complete date adapter is provided.");
}
class DateAdapterBase {
  static override(members) {
    Object.assign(DateAdapterBase.prototype, members);
  }
  constructor(options) {
    this.options = options || {};
  }
  init() {
  }
  formats() {
    return abstract();
  }
  parse() {
    return abstract();
  }
  format() {
    return abstract();
  }
  add() {
    return abstract();
  }
  diff() {
    return abstract();
  }
  startOf() {
    return abstract();
  }
  endOf() {
    return abstract();
  }
}
var adapters = {
  _date: DateAdapterBase
};
function binarySearch(metaset, axis, value, intersect) {
  const { controller, data, _sorted } = metaset;
  const iScale = controller._cachedMeta.iScale;
  if (iScale && axis === iScale.axis && axis !== "r" && _sorted && data.length) {
    const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;
    if (!intersect) {
      return lookupMethod(data, axis, value);
    } else if (controller._sharedOptions) {
      const el = data[0];
      const range = typeof el.getRange === "function" && el.getRange(axis);
      if (range) {
        const start = lookupMethod(data, axis, value - range);
        const end = lookupMethod(data, axis, value + range);
        return {
          lo: start.lo,
          hi: end.hi
        };
      }
    }
  }
  return {
    lo: 0,
    hi: data.length - 1
  };
}
function evaluateInteractionItems(chart, axis, position, handler, intersect) {
  const metasets = chart.getSortedVisibleDatasetMetas();
  const value = position[axis];
  for (let i = 0, ilen = metasets.length; i < ilen; ++i) {
    const { index, data } = metasets[i];
    const { lo, hi } = binarySearch(metasets[i], axis, value, intersect);
    for (let j = lo; j <= hi; ++j) {
      const element = data[j];
      if (!element.skip) {
        handler(element, index, j);
      }
    }
  }
}
function getDistanceMetricForAxis(axis) {
  const useX = axis.indexOf("x") !== -1;
  const useY = axis.indexOf("y") !== -1;
  return function(pt1, pt2) {
    const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;
    const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;
    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));
  };
}
function getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {
  const items = [];
  if (!includeInvisible && !chart.isPointInArea(position)) {
    return items;
  }
  const evaluationFunc = function(element, datasetIndex, index) {
    if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {
      return;
    }
    if (element.inRange(position.x, position.y, useFinalPosition)) {
      items.push({
        element,
        datasetIndex,
        index
      });
    }
  };
  evaluateInteractionItems(chart, axis, position, evaluationFunc, true);
  return items;
}
function getNearestRadialItems(chart, position, axis, useFinalPosition) {
  let items = [];
  function evaluationFunc(element, datasetIndex, index) {
    const { startAngle, endAngle } = element.getProps([
      "startAngle",
      "endAngle"
    ], useFinalPosition);
    const { angle } = getAngleFromPoint(element, {
      x: position.x,
      y: position.y
    });
    if (_angleBetween(angle, startAngle, endAngle)) {
      items.push({
        element,
        datasetIndex,
        index
      });
    }
  }
  evaluateInteractionItems(chart, axis, position, evaluationFunc);
  return items;
}
function getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {
  let items = [];
  const distanceMetric = getDistanceMetricForAxis(axis);
  let minDistance = Number.POSITIVE_INFINITY;
  function evaluationFunc(element, datasetIndex, index) {
    const inRange2 = element.inRange(position.x, position.y, useFinalPosition);
    if (intersect && !inRange2) {
      return;
    }
    const center = element.getCenterPoint(useFinalPosition);
    const pointInArea = !!includeInvisible || chart.isPointInArea(center);
    if (!pointInArea && !inRange2) {
      return;
    }
    const distance = distanceMetric(position, center);
    if (distance < minDistance) {
      items = [
        {
          element,
          datasetIndex,
          index
        }
      ];
      minDistance = distance;
    } else if (distance === minDistance) {
      items.push({
        element,
        datasetIndex,
        index
      });
    }
  }
  evaluateInteractionItems(chart, axis, position, evaluationFunc);
  return items;
}
function getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {
  if (!includeInvisible && !chart.isPointInArea(position)) {
    return [];
  }
  return axis === "r" && !intersect ? getNearestRadialItems(chart, position, axis, useFinalPosition) : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);
}
function getAxisItems(chart, position, axis, intersect, useFinalPosition) {
  const items = [];
  const rangeMethod = axis === "x" ? "inXRange" : "inYRange";
  let intersectsItem = false;
  evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index) => {
    if (element[rangeMethod](position[axis], useFinalPosition)) {
      items.push({
        element,
        datasetIndex,
        index
      });
      intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);
    }
  });
  if (intersect && !intersectsItem) {
    return [];
  }
  return items;
}
var Interaction = {
  evaluateInteractionItems,
  modes: {
    index(chart, e, options, useFinalPosition) {
      const position = getRelativePosition(e, chart);
      const axis = options.axis || "x";
      const includeInvisible = options.includeInvisible || false;
      const items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);
      const elements = [];
      if (!items.length) {
        return [];
      }
      chart.getSortedVisibleDatasetMetas().forEach((meta) => {
        const index = items[0].index;
        const element = meta.data[index];
        if (element && !element.skip) {
          elements.push({
            element,
            datasetIndex: meta.index,
            index
          });
        }
      });
      return elements;
    },
    dataset(chart, e, options, useFinalPosition) {
      const position = getRelativePosition(e, chart);
      const axis = options.axis || "xy";
      const includeInvisible = options.includeInvisible || false;
      let items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);
      if (items.length > 0) {
        const datasetIndex = items[0].datasetIndex;
        const data = chart.getDatasetMeta(datasetIndex).data;
        items = [];
        for (let i = 0; i < data.length; ++i) {
          items.push({
            element: data[i],
            datasetIndex,
            index: i
          });
        }
      }
      return items;
    },
    point(chart, e, options, useFinalPosition) {
      const position = getRelativePosition(e, chart);
      const axis = options.axis || "xy";
      const includeInvisible = options.includeInvisible || false;
      return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);
    },
    nearest(chart, e, options, useFinalPosition) {
      const position = getRelativePosition(e, chart);
      const axis = options.axis || "xy";
      const includeInvisible = options.includeInvisible || false;
      return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);
    },
    x(chart, e, options, useFinalPosition) {
      const position = getRelativePosition(e, chart);
      return getAxisItems(chart, position, "x", options.intersect, useFinalPosition);
    },
    y(chart, e, options, useFinalPosition) {
      const position = getRelativePosition(e, chart);
      return getAxisItems(chart, position, "y", options.intersect, useFinalPosition);
    }
  }
};
const STATIC_POSITIONS = [
  "left",
  "top",
  "right",
  "bottom"
];
function filterByPosition(array, position) {
  return array.filter((v) => v.pos === position);
}
function filterDynamicPositionByAxis(array, axis) {
  return array.filter((v) => STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);
}
function sortByWeight(array, reverse) {
  return array.sort((a, b) => {
    const v0 = reverse ? b : a;
    const v1 = reverse ? a : b;
    return v0.weight === v1.weight ? v0.index - v1.index : v0.weight - v1.weight;
  });
}
function wrapBoxes(boxes) {
  const layoutBoxes = [];
  let i, ilen, box, pos, stack, stackWeight;
  for (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {
    box = boxes[i];
    ({ position: pos, options: { stack, stackWeight = 1 } } = box);
    layoutBoxes.push({
      index: i,
      box,
      pos,
      horizontal: box.isHorizontal(),
      weight: box.weight,
      stack: stack && pos + stack,
      stackWeight
    });
  }
  return layoutBoxes;
}
function buildStacks(layouts2) {
  const stacks = {};
  for (const wrap of layouts2) {
    const { stack, pos, stackWeight } = wrap;
    if (!stack || !STATIC_POSITIONS.includes(pos)) {
      continue;
    }
    const _stack = stacks[stack] || (stacks[stack] = {
      count: 0,
      placed: 0,
      weight: 0,
      size: 0
    });
    _stack.count++;
    _stack.weight += stackWeight;
  }
  return stacks;
}
function setLayoutDims(layouts2, params) {
  const stacks = buildStacks(layouts2);
  const { vBoxMaxWidth, hBoxMaxHeight } = params;
  let i, ilen, layout;
  for (i = 0, ilen = layouts2.length; i < ilen; ++i) {
    layout = layouts2[i];
    const { fullSize } = layout.box;
    const stack = stacks[layout.stack];
    const factor = stack && layout.stackWeight / stack.weight;
    if (layout.horizontal) {
      layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;
      layout.height = hBoxMaxHeight;
    } else {
      layout.width = vBoxMaxWidth;
      layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;
    }
  }
  return stacks;
}
function buildLayoutBoxes(boxes) {
  const layoutBoxes = wrapBoxes(boxes);
  const fullSize = sortByWeight(layoutBoxes.filter((wrap) => wrap.box.fullSize), true);
  const left = sortByWeight(filterByPosition(layoutBoxes, "left"), true);
  const right = sortByWeight(filterByPosition(layoutBoxes, "right"));
  const top = sortByWeight(filterByPosition(layoutBoxes, "top"), true);
  const bottom = sortByWeight(filterByPosition(layoutBoxes, "bottom"));
  const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, "x");
  const centerVertical = filterDynamicPositionByAxis(layoutBoxes, "y");
  return {
    fullSize,
    leftAndTop: left.concat(top),
    rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),
    chartArea: filterByPosition(layoutBoxes, "chartArea"),
    vertical: left.concat(right).concat(centerVertical),
    horizontal: top.concat(bottom).concat(centerHorizontal)
  };
}
function getCombinedMax(maxPadding, chartArea, a, b) {
  return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);
}
function updateMaxPadding(maxPadding, boxPadding) {
  maxPadding.top = Math.max(maxPadding.top, boxPadding.top);
  maxPadding.left = Math.max(maxPadding.left, boxPadding.left);
  maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);
  maxPadding.right = Math.max(maxPadding.right, boxPadding.right);
}
function updateDims(chartArea, params, layout, stacks) {
  const { pos, box } = layout;
  const maxPadding = chartArea.maxPadding;
  if (!isObject(pos)) {
    if (layout.size) {
      chartArea[pos] -= layout.size;
    }
    const stack = stacks[layout.stack] || {
      size: 0,
      count: 1
    };
    stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);
    layout.size = stack.size / stack.count;
    chartArea[pos] += layout.size;
  }
  if (box.getPadding) {
    updateMaxPadding(maxPadding, box.getPadding());
  }
  const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, "left", "right"));
  const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, "top", "bottom"));
  const widthChanged = newWidth !== chartArea.w;
  const heightChanged = newHeight !== chartArea.h;
  chartArea.w = newWidth;
  chartArea.h = newHeight;
  return layout.horizontal ? {
    same: widthChanged,
    other: heightChanged
  } : {
    same: heightChanged,
    other: widthChanged
  };
}
function handleMaxPadding(chartArea) {
  const maxPadding = chartArea.maxPadding;
  function updatePos(pos) {
    const change = Math.max(maxPadding[pos] - chartArea[pos], 0);
    chartArea[pos] += change;
    return change;
  }
  chartArea.y += updatePos("top");
  chartArea.x += updatePos("left");
  updatePos("right");
  updatePos("bottom");
}
function getMargins(horizontal, chartArea) {
  const maxPadding = chartArea.maxPadding;
  function marginForPositions(positions2) {
    const margin = {
      left: 0,
      top: 0,
      right: 0,
      bottom: 0
    };
    positions2.forEach((pos) => {
      margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);
    });
    return margin;
  }
  return horizontal ? marginForPositions([
    "left",
    "right"
  ]) : marginForPositions([
    "top",
    "bottom"
  ]);
}
function fitBoxes(boxes, chartArea, params, stacks) {
  const refitBoxes = [];
  let i, ilen, layout, box, refit, changed;
  for (i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i) {
    layout = boxes[i];
    box = layout.box;
    box.update(layout.width || chartArea.w, layout.height || chartArea.h, getMargins(layout.horizontal, chartArea));
    const { same, other } = updateDims(chartArea, params, layout, stacks);
    refit |= same && refitBoxes.length;
    changed = changed || other;
    if (!box.fullSize) {
      refitBoxes.push(layout);
    }
  }
  return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;
}
function setBoxDims(box, left, top, width, height) {
  box.top = top;
  box.left = left;
  box.right = left + width;
  box.bottom = top + height;
  box.width = width;
  box.height = height;
}
function placeBoxes(boxes, chartArea, params, stacks) {
  const userPadding = params.padding;
  let { x, y } = chartArea;
  for (const layout of boxes) {
    const box = layout.box;
    const stack = stacks[layout.stack] || {
      count: 1,
      placed: 0,
      weight: 1
    };
    const weight = layout.stackWeight / stack.weight || 1;
    if (layout.horizontal) {
      const width = chartArea.w * weight;
      const height = stack.size || box.height;
      if (defined(stack.start)) {
        y = stack.start;
      }
      if (box.fullSize) {
        setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);
      } else {
        setBoxDims(box, chartArea.left + stack.placed, y, width, height);
      }
      stack.start = y;
      stack.placed += width;
      y = box.bottom;
    } else {
      const height1 = chartArea.h * weight;
      const width1 = stack.size || box.width;
      if (defined(stack.start)) {
        x = stack.start;
      }
      if (box.fullSize) {
        setBoxDims(box, x, userPadding.top, width1, params.outerHeight - userPadding.bottom - userPadding.top);
      } else {
        setBoxDims(box, x, chartArea.top + stack.placed, width1, height1);
      }
      stack.start = x;
      stack.placed += height1;
      x = box.right;
    }
  }
  chartArea.x = x;
  chartArea.y = y;
}
var layouts = {
  addBox(chart, item) {
    if (!chart.boxes) {
      chart.boxes = [];
    }
    item.fullSize = item.fullSize || false;
    item.position = item.position || "top";
    item.weight = item.weight || 0;
    item._layers = item._layers || function() {
      return [
        {
          z: 0,
          draw(chartArea) {
            item.draw(chartArea);
          }
        }
      ];
    };
    chart.boxes.push(item);
  },
  removeBox(chart, layoutItem) {
    const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;
    if (index !== -1) {
      chart.boxes.splice(index, 1);
    }
  },
  configure(chart, item, options) {
    item.fullSize = options.fullSize;
    item.position = options.position;
    item.weight = options.weight;
  },
  update(chart, width, height, minPadding) {
    if (!chart) {
      return;
    }
    const padding = toPadding(chart.options.layout.padding);
    const availableWidth = Math.max(width - padding.width, 0);
    const availableHeight = Math.max(height - padding.height, 0);
    const boxes = buildLayoutBoxes(chart.boxes);
    const verticalBoxes = boxes.vertical;
    const horizontalBoxes = boxes.horizontal;
    each(chart.boxes, (box) => {
      if (typeof box.beforeLayout === "function") {
        box.beforeLayout();
      }
    });
    const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap) => wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;
    const params = Object.freeze({
      outerWidth: width,
      outerHeight: height,
      padding,
      availableWidth,
      availableHeight,
      vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,
      hBoxMaxHeight: availableHeight / 2
    });
    const maxPadding = Object.assign({}, padding);
    updateMaxPadding(maxPadding, toPadding(minPadding));
    const chartArea = Object.assign({
      maxPadding,
      w: availableWidth,
      h: availableHeight,
      x: padding.left,
      y: padding.top
    }, padding);
    const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);
    fitBoxes(boxes.fullSize, chartArea, params, stacks);
    fitBoxes(verticalBoxes, chartArea, params, stacks);
    if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {
      fitBoxes(verticalBoxes, chartArea, params, stacks);
    }
    handleMaxPadding(chartArea);
    placeBoxes(boxes.leftAndTop, chartArea, params, stacks);
    chartArea.x += chartArea.w;
    chartArea.y += chartArea.h;
    placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);
    chart.chartArea = {
      left: chartArea.left,
      top: chartArea.top,
      right: chartArea.left + chartArea.w,
      bottom: chartArea.top + chartArea.h,
      height: chartArea.h,
      width: chartArea.w
    };
    each(boxes.chartArea, (layout) => {
      const box = layout.box;
      Object.assign(box, chart.chartArea);
      box.update(chartArea.w, chartArea.h, {
        left: 0,
        top: 0,
        right: 0,
        bottom: 0
      });
    });
  }
};
class BasePlatform {
  acquireContext(canvas, aspectRatio) {
  }
  releaseContext(context) {
    return false;
  }
  addEventListener(chart, type, listener) {
  }
  removeEventListener(chart, type, listener) {
  }
  getDevicePixelRatio() {
    return 1;
  }
  getMaximumSize(element, width, height, aspectRatio) {
    width = Math.max(0, width || element.width);
    height = height || element.height;
    return {
      width,
      height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)
    };
  }
  isAttached(canvas) {
    return true;
  }
  updateConfig(config) {
  }
}
class BasicPlatform extends BasePlatform {
  acquireContext(item) {
    return item && item.getContext && item.getContext("2d") || null;
  }
  updateConfig(config) {
    config.options.animation = false;
  }
}
const EXPANDO_KEY = "$chartjs";
const EVENT_TYPES = {
  touchstart: "mousedown",
  touchmove: "mousemove",
  touchend: "mouseup",
  pointerenter: "mouseenter",
  pointerdown: "mousedown",
  pointermove: "mousemove",
  pointerup: "mouseup",
  pointerleave: "mouseout",
  pointerout: "mouseout"
};
const isNullOrEmpty = (value) => value === null || value === "";
function initCanvas(canvas, aspectRatio) {
  const style = canvas.style;
  const renderHeight = canvas.getAttribute("height");
  const renderWidth = canvas.getAttribute("width");
  canvas[EXPANDO_KEY] = {
    initial: {
      height: renderHeight,
      width: renderWidth,
      style: {
        display: style.display,
        height: style.height,
        width: style.width
      }
    }
  };
  style.display = style.display || "block";
  style.boxSizing = style.boxSizing || "border-box";
  if (isNullOrEmpty(renderWidth)) {
    const displayWidth = readUsedSize(canvas, "width");
    if (displayWidth !== void 0) {
      canvas.width = displayWidth;
    }
  }
  if (isNullOrEmpty(renderHeight)) {
    if (canvas.style.height === "") {
      canvas.height = canvas.width / (aspectRatio || 2);
    } else {
      const displayHeight = readUsedSize(canvas, "height");
      if (displayHeight !== void 0) {
        canvas.height = displayHeight;
      }
    }
  }
  return canvas;
}
const eventListenerOptions = supportsEventListenerOptions ? {
  passive: true
} : false;
function addListener(node, type, listener) {
  node.addEventListener(type, listener, eventListenerOptions);
}
function removeListener(chart, type, listener) {
  chart.canvas.removeEventListener(type, listener, eventListenerOptions);
}
function fromNativeEvent(event, chart) {
  const type = EVENT_TYPES[event.type] || event.type;
  const { x, y } = getRelativePosition(event, chart);
  return {
    type,
    chart,
    native: event,
    x: x !== void 0 ? x : null,
    y: y !== void 0 ? y : null
  };
}
function nodeListContains(nodeList, canvas) {
  for (const node of nodeList) {
    if (node === canvas || node.contains(canvas)) {
      return true;
    }
  }
}
function createAttachObserver(chart, type, listener) {
  const canvas = chart.canvas;
  const observer = new MutationObserver((entries) => {
    let trigger = false;
    for (const entry of entries) {
      trigger = trigger || nodeListContains(entry.addedNodes, canvas);
      trigger = trigger && !nodeListContains(entry.removedNodes, canvas);
    }
    if (trigger) {
      listener();
    }
  });
  observer.observe(document, {
    childList: true,
    subtree: true
  });
  return observer;
}
function createDetachObserver(chart, type, listener) {
  const canvas = chart.canvas;
  const observer = new MutationObserver((entries) => {
    let trigger = false;
    for (const entry of entries) {
      trigger = trigger || nodeListContains(entry.removedNodes, canvas);
      trigger = trigger && !nodeListContains(entry.addedNodes, canvas);
    }
    if (trigger) {
      listener();
    }
  });
  observer.observe(document, {
    childList: true,
    subtree: true
  });
  return observer;
}
const drpListeningCharts = /* @__PURE__ */ new Map();
let oldDevicePixelRatio = 0;
function onWindowResize() {
  const dpr = window.devicePixelRatio;
  if (dpr === oldDevicePixelRatio) {
    return;
  }
  oldDevicePixelRatio = dpr;
  drpListeningCharts.forEach((resize, chart) => {
    if (chart.currentDevicePixelRatio !== dpr) {
      resize();
    }
  });
}
function listenDevicePixelRatioChanges(chart, resize) {
  if (!drpListeningCharts.size) {
    window.addEventListener("resize", onWindowResize);
  }
  drpListeningCharts.set(chart, resize);
}
function unlistenDevicePixelRatioChanges(chart) {
  drpListeningCharts.delete(chart);
  if (!drpListeningCharts.size) {
    window.removeEventListener("resize", onWindowResize);
  }
}
function createResizeObserver(chart, type, listener) {
  const canvas = chart.canvas;
  const container = canvas && _getParentNode(canvas);
  if (!container) {
    return;
  }
  const resize = throttled((width, height) => {
    const w = container.clientWidth;
    listener(width, height);
    if (w < container.clientWidth) {
      listener();
    }
  }, window);
  const observer = new ResizeObserver((entries) => {
    const entry = entries[0];
    const width = entry.contentRect.width;
    const height = entry.contentRect.height;
    if (width === 0 && height === 0) {
      return;
    }
    resize(width, height);
  });
  observer.observe(container);
  listenDevicePixelRatioChanges(chart, resize);
  return observer;
}
function releaseObserver(chart, type, observer) {
  if (observer) {
    observer.disconnect();
  }
  if (type === "resize") {
    unlistenDevicePixelRatioChanges(chart);
  }
}
function createProxyAndListen(chart, type, listener) {
  const canvas = chart.canvas;
  const proxy = throttled((event) => {
    if (chart.ctx !== null) {
      listener(fromNativeEvent(event, chart));
    }
  }, chart);
  addListener(canvas, type, proxy);
  return proxy;
}
class DomPlatform extends BasePlatform {
  acquireContext(canvas, aspectRatio) {
    const context = canvas && canvas.getContext && canvas.getContext("2d");
    if (context && context.canvas === canvas) {
      initCanvas(canvas, aspectRatio);
      return context;
    }
    return null;
  }
  releaseContext(context) {
    const canvas = context.canvas;
    if (!canvas[EXPANDO_KEY]) {
      return false;
    }
    const initial = canvas[EXPANDO_KEY].initial;
    [
      "height",
      "width"
    ].forEach((prop) => {
      const value = initial[prop];
      if (isNullOrUndef(value)) {
        canvas.removeAttribute(prop);
      } else {
        canvas.setAttribute(prop, value);
      }
    });
    const style = initial.style || {};
    Object.keys(style).forEach((key) => {
      canvas.style[key] = style[key];
    });
    canvas.width = canvas.width;
    delete canvas[EXPANDO_KEY];
    return true;
  }
  addEventListener(chart, type, listener) {
    this.removeEventListener(chart, type);
    const proxies = chart.$proxies || (chart.$proxies = {});
    const handlers = {
      attach: createAttachObserver,
      detach: createDetachObserver,
      resize: createResizeObserver
    };
    const handler = handlers[type] || createProxyAndListen;
    proxies[type] = handler(chart, type, listener);
  }
  removeEventListener(chart, type) {
    const proxies = chart.$proxies || (chart.$proxies = {});
    const proxy = proxies[type];
    if (!proxy) {
      return;
    }
    const handlers = {
      attach: releaseObserver,
      detach: releaseObserver,
      resize: releaseObserver
    };
    const handler = handlers[type] || removeListener;
    handler(chart, type, proxy);
    proxies[type] = void 0;
  }
  getDevicePixelRatio() {
    return window.devicePixelRatio;
  }
  getMaximumSize(canvas, width, height, aspectRatio) {
    return getMaximumSize(canvas, width, height, aspectRatio);
  }
  isAttached(canvas) {
    const container = _getParentNode(canvas);
    return !!(container && container.isConnected);
  }
}
function _detectPlatform(canvas) {
  if (!_isDomSupported() || typeof OffscreenCanvas !== "undefined" && canvas instanceof OffscreenCanvas) {
    return BasicPlatform;
  }
  return DomPlatform;
}
class Element {
  constructor() {
    __publicField(this, "active", false);
  }
  tooltipPosition(useFinalPosition) {
    const { x, y } = this.getProps([
      "x",
      "y"
    ], useFinalPosition);
    return {
      x,
      y
    };
  }
  hasValue() {
    return isNumber(this.x) && isNumber(this.y);
  }
  getProps(props, final) {
    const anims = this.$animations;
    if (!final || !anims) {
      return this;
    }
    const ret = {};
    props.forEach((prop) => {
      ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop];
    });
    return ret;
  }
}
__publicField(Element, "defaults", {});
__publicField(Element, "defaultRoutes");
function autoSkip(scale, ticks) {
  const tickOpts = scale.options.ticks;
  const determinedMaxTicks = determineMaxTicks(scale);
  const ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);
  const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];
  const numMajorIndices = majorIndices.length;
  const first = majorIndices[0];
  const last = majorIndices[numMajorIndices - 1];
  const newTicks = [];
  if (numMajorIndices > ticksLimit) {
    skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);
    return newTicks;
  }
  const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);
  if (numMajorIndices > 0) {
    let i, ilen;
    const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;
    skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);
    for (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {
      skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);
    }
    skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);
    return newTicks;
  }
  skip(ticks, newTicks, spacing);
  return newTicks;
}
function determineMaxTicks(scale) {
  const offset = scale.options.offset;
  const tickLength = scale._tickSize();
  const maxScale = scale._length / tickLength + (offset ? 0 : 1);
  const maxChart = scale._maxLength / tickLength;
  return Math.floor(Math.min(maxScale, maxChart));
}
function calculateSpacing(majorIndices, ticks, ticksLimit) {
  const evenMajorSpacing = getEvenSpacing(majorIndices);
  const spacing = ticks.length / ticksLimit;
  if (!evenMajorSpacing) {
    return Math.max(spacing, 1);
  }
  const factors = _factorize(evenMajorSpacing);
  for (let i = 0, ilen = factors.length - 1; i < ilen; i++) {
    const factor = factors[i];
    if (factor > spacing) {
      return factor;
    }
  }
  return Math.max(spacing, 1);
}
function getMajorIndices(ticks) {
  const result = [];
  let i, ilen;
  for (i = 0, ilen = ticks.length; i < ilen; i++) {
    if (ticks[i].major) {
      result.push(i);
    }
  }
  return result;
}
function skipMajors(ticks, newTicks, majorIndices, spacing) {
  let count = 0;
  let next = majorIndices[0];
  let i;
  spacing = Math.ceil(spacing);
  for (i = 0; i < ticks.length; i++) {
    if (i === next) {
      newTicks.push(ticks[i]);
      count++;
      next = majorIndices[count * spacing];
    }
  }
}
function skip(ticks, newTicks, spacing, majorStart, majorEnd) {
  const start = valueOrDefault(majorStart, 0);
  const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);
  let count = 0;
  let length, i, next;
  spacing = Math.ceil(spacing);
  if (majorEnd) {
    length = majorEnd - majorStart;
    spacing = length / Math.floor(length / spacing);
  }
  next = start;
  while (next < 0) {
    count++;
    next = Math.round(start + count * spacing);
  }
  for (i = Math.max(start, 0); i < end; i++) {
    if (i === next) {
      newTicks.push(ticks[i]);
      count++;
      next = Math.round(start + count * spacing);
    }
  }
}
function getEvenSpacing(arr) {
  const len = arr.length;
  let i, diff;
  if (len < 2) {
    return false;
  }
  for (diff = arr[0], i = 1; i < len; ++i) {
    if (arr[i] - arr[i - 1] !== diff) {
      return false;
    }
  }
  return diff;
}
const reverseAlign = (align) => align === "left" ? "right" : align === "right" ? "left" : align;
const offsetFromEdge = (scale, edge, offset) => edge === "top" || edge === "left" ? scale[edge] + offset : scale[edge] - offset;
function sample(arr, numItems) {
  const result = [];
  const increment = arr.length / numItems;
  const len = arr.length;
  let i = 0;
  for (; i < len; i += increment) {
    result.push(arr[Math.floor(i)]);
  }
  return result;
}
function getPixelForGridLine(scale, index, offsetGridLines) {
  const length = scale.ticks.length;
  const validIndex2 = Math.min(index, length - 1);
  const start = scale._startPixel;
  const end = scale._endPixel;
  const epsilon = 1e-6;
  let lineValue = scale.getPixelForTick(validIndex2);
  let offset;
  if (offsetGridLines) {
    if (length === 1) {
      offset = Math.max(lineValue - start, end - lineValue);
    } else if (index === 0) {
      offset = (scale.getPixelForTick(1) - lineValue) / 2;
    } else {
      offset = (lineValue - scale.getPixelForTick(validIndex2 - 1)) / 2;
    }
    lineValue += validIndex2 < index ? offset : -offset;
    if (lineValue < start - epsilon || lineValue > end + epsilon) {
      return;
    }
  }
  return lineValue;
}
function garbageCollect(caches, length) {
  each(caches, (cache) => {
    const gc = cache.gc;
    const gcLen = gc.length / 2;
    let i;
    if (gcLen > length) {
      for (i = 0; i < gcLen; ++i) {
        delete cache.data[gc[i]];
      }
      gc.splice(0, gcLen);
    }
  });
}
function getTickMarkLength(options) {
  return options.drawTicks ? options.tickLength : 0;
}
function getTitleHeight(options, fallback) {
  if (!options.display) {
    return 0;
  }
  const font = toFont(options.font, fallback);
  const padding = toPadding(options.padding);
  const lines = isArray(options.text) ? options.text.length : 1;
  return lines * font.lineHeight + padding.height;
}
function createScaleContext(parent, scale) {
  return createContext(parent, {
    scale,
    type: "scale"
  });
}
function createTickContext(parent, index, tick) {
  return createContext(parent, {
    tick,
    index,
    type: "tick"
  });
}
function titleAlign(align, position, reverse) {
  let ret = _toLeftRightCenter(align);
  if (reverse && position !== "right" || !reverse && position === "right") {
    ret = reverseAlign(ret);
  }
  return ret;
}
function titleArgs(scale, offset, position, align) {
  const { top, left, bottom, right, chart } = scale;
  const { chartArea, scales } = chart;
  let rotation = 0;
  let maxWidth, titleX, titleY;
  const height = bottom - top;
  const width = right - left;
  if (scale.isHorizontal()) {
    titleX = _alignStartEnd(align, left, right);
    if (isObject(position)) {
      const positionAxisID = Object.keys(position)[0];
      const value = position[positionAxisID];
      titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;
    } else if (position === "center") {
      titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;
    } else {
      titleY = offsetFromEdge(scale, position, offset);
    }
    maxWidth = right - left;
  } else {
    if (isObject(position)) {
      const positionAxisID1 = Object.keys(position)[0];
      const value1 = position[positionAxisID1];
      titleX = scales[positionAxisID1].getPixelForValue(value1) - width + offset;
    } else if (position === "center") {
      titleX = (chartArea.left + chartArea.right) / 2 - width + offset;
    } else {
      titleX = offsetFromEdge(scale, position, offset);
    }
    titleY = _alignStartEnd(align, bottom, top);
    rotation = position === "left" ? -HALF_PI : HALF_PI;
  }
  return {
    titleX,
    titleY,
    maxWidth,
    rotation
  };
}
class Scale extends Element {
  constructor(cfg) {
    super();
    this.id = cfg.id;
    this.type = cfg.type;
    this.options = void 0;
    this.ctx = cfg.ctx;
    this.chart = cfg.chart;
    this.top = void 0;
    this.bottom = void 0;
    this.left = void 0;
    this.right = void 0;
    this.width = void 0;
    this.height = void 0;
    this._margins = {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    };
    this.maxWidth = void 0;
    this.maxHeight = void 0;
    this.paddingTop = void 0;
    this.paddingBottom = void 0;
    this.paddingLeft = void 0;
    this.paddingRight = void 0;
    this.axis = void 0;
    this.labelRotation = void 0;
    this.min = void 0;
    this.max = void 0;
    this._range = void 0;
    this.ticks = [];
    this._gridLineItems = null;
    this._labelItems = null;
    this._labelSizes = null;
    this._length = 0;
    this._maxLength = 0;
    this._longestTextCache = {};
    this._startPixel = void 0;
    this._endPixel = void 0;
    this._reversePixels = false;
    this._userMax = void 0;
    this._userMin = void 0;
    this._suggestedMax = void 0;
    this._suggestedMin = void 0;
    this._ticksLength = 0;
    this._borderValue = 0;
    this._cache = {};
    this._dataLimitsCached = false;
    this.$context = void 0;
  }
  init(options) {
    this.options = options.setContext(this.getContext());
    this.axis = options.axis;
    this._userMin = this.parse(options.min);
    this._userMax = this.parse(options.max);
    this._suggestedMin = this.parse(options.suggestedMin);
    this._suggestedMax = this.parse(options.suggestedMax);
  }
  parse(raw, index) {
    return raw;
  }
  getUserBounds() {
    let { _userMin, _userMax, _suggestedMin, _suggestedMax } = this;
    _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);
    _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);
    _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);
    _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);
    return {
      min: finiteOrDefault(_userMin, _suggestedMin),
      max: finiteOrDefault(_userMax, _suggestedMax),
      minDefined: isNumberFinite(_userMin),
      maxDefined: isNumberFinite(_userMax)
    };
  }
  getMinMax(canStack) {
    let { min, max, minDefined, maxDefined } = this.getUserBounds();
    let range;
    if (minDefined && maxDefined) {
      return {
        min,
        max
      };
    }
    const metas = this.getMatchingVisibleMetas();
    for (let i = 0, ilen = metas.length; i < ilen; ++i) {
      range = metas[i].controller.getMinMax(this, canStack);
      if (!minDefined) {
        min = Math.min(min, range.min);
      }
      if (!maxDefined) {
        max = Math.max(max, range.max);
      }
    }
    min = maxDefined && min > max ? max : min;
    max = minDefined && min > max ? min : max;
    return {
      min: finiteOrDefault(min, finiteOrDefault(max, min)),
      max: finiteOrDefault(max, finiteOrDefault(min, max))
    };
  }
  getPadding() {
    return {
      left: this.paddingLeft || 0,
      top: this.paddingTop || 0,
      right: this.paddingRight || 0,
      bottom: this.paddingBottom || 0
    };
  }
  getTicks() {
    return this.ticks;
  }
  getLabels() {
    const data = this.chart.data;
    return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];
  }
  getLabelItems(chartArea = this.chart.chartArea) {
    const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));
    return items;
  }
  beforeLayout() {
    this._cache = {};
    this._dataLimitsCached = false;
  }
  beforeUpdate() {
    callback(this.options.beforeUpdate, [
      this
    ]);
  }
  update(maxWidth, maxHeight, margins) {
    const { beginAtZero, grace, ticks: tickOpts } = this.options;
    const sampleSize = tickOpts.sampleSize;
    this.beforeUpdate();
    this.maxWidth = maxWidth;
    this.maxHeight = maxHeight;
    this._margins = margins = Object.assign({
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }, margins);
    this.ticks = null;
    this._labelSizes = null;
    this._gridLineItems = null;
    this._labelItems = null;
    this.beforeSetDimensions();
    this.setDimensions();
    this.afterSetDimensions();
    this._maxLength = this.isHorizontal() ? this.width + margins.left + margins.right : this.height + margins.top + margins.bottom;
    if (!this._dataLimitsCached) {
      this.beforeDataLimits();
      this.determineDataLimits();
      this.afterDataLimits();
      this._range = _addGrace(this, grace, beginAtZero);
      this._dataLimitsCached = true;
    }
    this.beforeBuildTicks();
    this.ticks = this.buildTicks() || [];
    this.afterBuildTicks();
    const samplingEnabled = sampleSize < this.ticks.length;
    this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);
    this.configure();
    this.beforeCalculateLabelRotation();
    this.calculateLabelRotation();
    this.afterCalculateLabelRotation();
    if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === "auto")) {
      this.ticks = autoSkip(this, this.ticks);
      this._labelSizes = null;
      this.afterAutoSkip();
    }
    if (samplingEnabled) {
      this._convertTicksToLabels(this.ticks);
    }
    this.beforeFit();
    this.fit();
    this.afterFit();
    this.afterUpdate();
  }
  configure() {
    let reversePixels = this.options.reverse;
    let startPixel, endPixel;
    if (this.isHorizontal()) {
      startPixel = this.left;
      endPixel = this.right;
    } else {
      startPixel = this.top;
      endPixel = this.bottom;
      reversePixels = !reversePixels;
    }
    this._startPixel = startPixel;
    this._endPixel = endPixel;
    this._reversePixels = reversePixels;
    this._length = endPixel - startPixel;
    this._alignToPixels = this.options.alignToPixels;
  }
  afterUpdate() {
    callback(this.options.afterUpdate, [
      this
    ]);
  }
  beforeSetDimensions() {
    callback(this.options.beforeSetDimensions, [
      this
    ]);
  }
  setDimensions() {
    if (this.isHorizontal()) {
      this.width = this.maxWidth;
      this.left = 0;
      this.right = this.width;
    } else {
      this.height = this.maxHeight;
      this.top = 0;
      this.bottom = this.height;
    }
    this.paddingLeft = 0;
    this.paddingTop = 0;
    this.paddingRight = 0;
    this.paddingBottom = 0;
  }
  afterSetDimensions() {
    callback(this.options.afterSetDimensions, [
      this
    ]);
  }
  _callHooks(name2) {
    this.chart.notifyPlugins(name2, this.getContext());
    callback(this.options[name2], [
      this
    ]);
  }
  beforeDataLimits() {
    this._callHooks("beforeDataLimits");
  }
  determineDataLimits() {
  }
  afterDataLimits() {
    this._callHooks("afterDataLimits");
  }
  beforeBuildTicks() {
    this._callHooks("beforeBuildTicks");
  }
  buildTicks() {
    return [];
  }
  afterBuildTicks() {
    this._callHooks("afterBuildTicks");
  }
  beforeTickToLabelConversion() {
    callback(this.options.beforeTickToLabelConversion, [
      this
    ]);
  }
  generateTickLabels(ticks) {
    const tickOpts = this.options.ticks;
    let i, ilen, tick;
    for (i = 0, ilen = ticks.length; i < ilen; i++) {
      tick = ticks[i];
      tick.label = callback(tickOpts.callback, [
        tick.value,
        i,
        ticks
      ], this);
    }
  }
  afterTickToLabelConversion() {
    callback(this.options.afterTickToLabelConversion, [
      this
    ]);
  }
  beforeCalculateLabelRotation() {
    callback(this.options.beforeCalculateLabelRotation, [
      this
    ]);
  }
  calculateLabelRotation() {
    const options = this.options;
    const tickOpts = options.ticks;
    const numTicks = this.ticks.length;
    const minRotation = tickOpts.minRotation || 0;
    const maxRotation = tickOpts.maxRotation;
    let labelRotation = minRotation;
    let tickWidth, maxHeight, maxLabelDiagonal;
    if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {
      this.labelRotation = minRotation;
      return;
    }
    const labelSizes = this._getLabelSizes();
    const maxLabelWidth = labelSizes.widest.width;
    const maxLabelHeight = labelSizes.highest.height;
    const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);
    tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);
    if (maxLabelWidth + 6 > tickWidth) {
      tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));
      maxHeight = this.maxHeight - getTickMarkLength(options.grid) - tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);
      maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);
      labelRotation = toDegrees(Math.min(Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)), Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))));
      labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));
    }
    this.labelRotation = labelRotation;
  }
  afterCalculateLabelRotation() {
    callback(this.options.afterCalculateLabelRotation, [
      this
    ]);
  }
  afterAutoSkip() {
  }
  beforeFit() {
    callback(this.options.beforeFit, [
      this
    ]);
  }
  fit() {
    const minSize = {
      width: 0,
      height: 0
    };
    const { chart, options: { ticks: tickOpts, title: titleOpts, grid: gridOpts } } = this;
    const display = this._isVisible();
    const isHorizontal = this.isHorizontal();
    if (display) {
      const titleHeight = getTitleHeight(titleOpts, chart.options.font);
      if (isHorizontal) {
        minSize.width = this.maxWidth;
        minSize.height = getTickMarkLength(gridOpts) + titleHeight;
      } else {
        minSize.height = this.maxHeight;
        minSize.width = getTickMarkLength(gridOpts) + titleHeight;
      }
      if (tickOpts.display && this.ticks.length) {
        const { first, last, widest, highest } = this._getLabelSizes();
        const tickPadding = tickOpts.padding * 2;
        const angleRadians = toRadians(this.labelRotation);
        const cos = Math.cos(angleRadians);
        const sin = Math.sin(angleRadians);
        if (isHorizontal) {
          const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;
          minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);
        } else {
          const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;
          minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);
        }
        this._calculatePadding(first, last, sin, cos);
      }
    }
    this._handleMargins();
    if (isHorizontal) {
      this.width = this._length = chart.width - this._margins.left - this._margins.right;
      this.height = minSize.height;
    } else {
      this.width = minSize.width;
      this.height = this._length = chart.height - this._margins.top - this._margins.bottom;
    }
  }
  _calculatePadding(first, last, sin, cos) {
    const { ticks: { align, padding }, position } = this.options;
    const isRotated = this.labelRotation !== 0;
    const labelsBelowTicks = position !== "top" && this.axis === "x";
    if (this.isHorizontal()) {
      const offsetLeft = this.getPixelForTick(0) - this.left;
      const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);
      let paddingLeft = 0;
      let paddingRight = 0;
      if (isRotated) {
        if (labelsBelowTicks) {
          paddingLeft = cos * first.width;
          paddingRight = sin * last.height;
        } else {
          paddingLeft = sin * first.height;
          paddingRight = cos * last.width;
        }
      } else if (align === "start") {
        paddingRight = last.width;
      } else if (align === "end") {
        paddingLeft = first.width;
      } else if (align !== "inner") {
        paddingLeft = first.width / 2;
        paddingRight = last.width / 2;
      }
      this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);
      this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);
    } else {
      let paddingTop = last.height / 2;
      let paddingBottom = first.height / 2;
      if (align === "start") {
        paddingTop = 0;
        paddingBottom = first.height;
      } else if (align === "end") {
        paddingTop = last.height;
        paddingBottom = 0;
      }
      this.paddingTop = paddingTop + padding;
      this.paddingBottom = paddingBottom + padding;
    }
  }
  _handleMargins() {
    if (this._margins) {
      this._margins.left = Math.max(this.paddingLeft, this._margins.left);
      this._margins.top = Math.max(this.paddingTop, this._margins.top);
      this._margins.right = Math.max(this.paddingRight, this._margins.right);
      this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);
    }
  }
  afterFit() {
    callback(this.options.afterFit, [
      this
    ]);
  }
  isHorizontal() {
    const { axis, position } = this.options;
    return position === "top" || position === "bottom" || axis === "x";
  }
  isFullSize() {
    return this.options.fullSize;
  }
  _convertTicksToLabels(ticks) {
    this.beforeTickToLabelConversion();
    this.generateTickLabels(ticks);
    let i, ilen;
    for (i = 0, ilen = ticks.length; i < ilen; i++) {
      if (isNullOrUndef(ticks[i].label)) {
        ticks.splice(i, 1);
        ilen--;
        i--;
      }
    }
    this.afterTickToLabelConversion();
  }
  _getLabelSizes() {
    let labelSizes = this._labelSizes;
    if (!labelSizes) {
      const sampleSize = this.options.ticks.sampleSize;
      let ticks = this.ticks;
      if (sampleSize < ticks.length) {
        ticks = sample(ticks, sampleSize);
      }
      this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length);
    }
    return labelSizes;
  }
  _computeLabelSizes(ticks, length) {
    const { ctx, _longestTextCache: caches } = this;
    const widths = [];
    const heights = [];
    let widestLabelSize = 0;
    let highestLabelSize = 0;
    let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;
    for (i = 0; i < length; ++i) {
      label = ticks[i].label;
      tickFont = this._resolveTickFontOptions(i);
      ctx.font = fontString = tickFont.string;
      cache = caches[fontString] = caches[fontString] || {
        data: {},
        gc: []
      };
      lineHeight = tickFont.lineHeight;
      width = height = 0;
      if (!isNullOrUndef(label) && !isArray(label)) {
        width = _measureText(ctx, cache.data, cache.gc, width, label);
        height = lineHeight;
      } else if (isArray(label)) {
        for (j = 0, jlen = label.length; j < jlen; ++j) {
          nestedLabel = label[j];
          if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {
            width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);
            height += lineHeight;
          }
        }
      }
      widths.push(width);
      heights.push(height);
      widestLabelSize = Math.max(width, widestLabelSize);
      highestLabelSize = Math.max(height, highestLabelSize);
    }
    garbageCollect(caches, length);
    const widest = widths.indexOf(widestLabelSize);
    const highest = heights.indexOf(highestLabelSize);
    const valueAt = (idx) => ({
      width: widths[idx] || 0,
      height: heights[idx] || 0
    });
    return {
      first: valueAt(0),
      last: valueAt(length - 1),
      widest: valueAt(widest),
      highest: valueAt(highest),
      widths,
      heights
    };
  }
  getLabelForValue(value) {
    return value;
  }
  getPixelForValue(value, index) {
    return NaN;
  }
  getValueForPixel(pixel) {
  }
  getPixelForTick(index) {
    const ticks = this.ticks;
    if (index < 0 || index > ticks.length - 1) {
      return null;
    }
    return this.getPixelForValue(ticks[index].value);
  }
  getPixelForDecimal(decimal) {
    if (this._reversePixels) {
      decimal = 1 - decimal;
    }
    const pixel = this._startPixel + decimal * this._length;
    return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);
  }
  getDecimalForPixel(pixel) {
    const decimal = (pixel - this._startPixel) / this._length;
    return this._reversePixels ? 1 - decimal : decimal;
  }
  getBasePixel() {
    return this.getPixelForValue(this.getBaseValue());
  }
  getBaseValue() {
    const { min, max } = this;
    return min < 0 && max < 0 ? max : min > 0 && max > 0 ? min : 0;
  }
  getContext(index) {
    const ticks = this.ticks || [];
    if (index >= 0 && index < ticks.length) {
      const tick = ticks[index];
      return tick.$context || (tick.$context = createTickContext(this.getContext(), index, tick));
    }
    return this.$context || (this.$context = createScaleContext(this.chart.getContext(), this));
  }
  _tickSize() {
    const optionTicks = this.options.ticks;
    const rot = toRadians(this.labelRotation);
    const cos = Math.abs(Math.cos(rot));
    const sin = Math.abs(Math.sin(rot));
    const labelSizes = this._getLabelSizes();
    const padding = optionTicks.autoSkipPadding || 0;
    const w = labelSizes ? labelSizes.widest.width + padding : 0;
    const h3 = labelSizes ? labelSizes.highest.height + padding : 0;
    return this.isHorizontal() ? h3 * cos > w * sin ? w / cos : h3 / sin : h3 * sin < w * cos ? h3 / cos : w / sin;
  }
  _isVisible() {
    const display = this.options.display;
    if (display !== "auto") {
      return !!display;
    }
    return this.getMatchingVisibleMetas().length > 0;
  }
  _computeGridLineItems(chartArea) {
    const axis = this.axis;
    const chart = this.chart;
    const options = this.options;
    const { grid, position, border } = options;
    const offset = grid.offset;
    const isHorizontal = this.isHorizontal();
    const ticks = this.ticks;
    const ticksLength = ticks.length + (offset ? 1 : 0);
    const tl = getTickMarkLength(grid);
    const items = [];
    const borderOpts = border.setContext(this.getContext());
    const axisWidth = borderOpts.display ? borderOpts.width : 0;
    const axisHalfWidth = axisWidth / 2;
    const alignBorderValue = function(pixel) {
      return _alignPixel(chart, pixel, axisWidth);
    };
    let borderValue, i, lineValue, alignedLineValue;
    let tx1, ty1, tx2, ty2, x1, y1, x2, y2;
    if (position === "top") {
      borderValue = alignBorderValue(this.bottom);
      ty1 = this.bottom - tl;
      ty2 = borderValue - axisHalfWidth;
      y1 = alignBorderValue(chartArea.top) + axisHalfWidth;
      y2 = chartArea.bottom;
    } else if (position === "bottom") {
      borderValue = alignBorderValue(this.top);
      y1 = chartArea.top;
      y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;
      ty1 = borderValue + axisHalfWidth;
      ty2 = this.top + tl;
    } else if (position === "left") {
      borderValue = alignBorderValue(this.right);
      tx1 = this.right - tl;
      tx2 = borderValue - axisHalfWidth;
      x1 = alignBorderValue(chartArea.left) + axisHalfWidth;
      x2 = chartArea.right;
    } else if (position === "right") {
      borderValue = alignBorderValue(this.left);
      x1 = chartArea.left;
      x2 = alignBorderValue(chartArea.right) - axisHalfWidth;
      tx1 = borderValue + axisHalfWidth;
      tx2 = this.left + tl;
    } else if (axis === "x") {
      if (position === "center") {
        borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);
      } else if (isObject(position)) {
        const positionAxisID = Object.keys(position)[0];
        const value = position[positionAxisID];
        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));
      }
      y1 = chartArea.top;
      y2 = chartArea.bottom;
      ty1 = borderValue + axisHalfWidth;
      ty2 = ty1 + tl;
    } else if (axis === "y") {
      if (position === "center") {
        borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);
      } else if (isObject(position)) {
        const positionAxisID1 = Object.keys(position)[0];
        const value1 = position[positionAxisID1];
        borderValue = alignBorderValue(this.chart.scales[positionAxisID1].getPixelForValue(value1));
      }
      tx1 = borderValue - axisHalfWidth;
      tx2 = tx1 - tl;
      x1 = chartArea.left;
      x2 = chartArea.right;
    }
    const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);
    const step = Math.max(1, Math.ceil(ticksLength / limit));
    for (i = 0; i < ticksLength; i += step) {
      const context = this.getContext(i);
      const optsAtIndex = grid.setContext(context);
      const optsAtIndexBorder = border.setContext(context);
      const lineWidth = optsAtIndex.lineWidth;
      const lineColor = optsAtIndex.color;
      const borderDash = optsAtIndexBorder.dash || [];
      const borderDashOffset = optsAtIndexBorder.dashOffset;
      const tickWidth = optsAtIndex.tickWidth;
      const tickColor = optsAtIndex.tickColor;
      const tickBorderDash = optsAtIndex.tickBorderDash || [];
      const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;
      lineValue = getPixelForGridLine(this, i, offset);
      if (lineValue === void 0) {
        continue;
      }
      alignedLineValue = _alignPixel(chart, lineValue, lineWidth);
      if (isHorizontal) {
        tx1 = tx2 = x1 = x2 = alignedLineValue;
      } else {
        ty1 = ty2 = y1 = y2 = alignedLineValue;
      }
      items.push({
        tx1,
        ty1,
        tx2,
        ty2,
        x1,
        y1,
        x2,
        y2,
        width: lineWidth,
        color: lineColor,
        borderDash,
        borderDashOffset,
        tickWidth,
        tickColor,
        tickBorderDash,
        tickBorderDashOffset
      });
    }
    this._ticksLength = ticksLength;
    this._borderValue = borderValue;
    return items;
  }
  _computeLabelItems(chartArea) {
    const axis = this.axis;
    const options = this.options;
    const { position, ticks: optionTicks } = options;
    const isHorizontal = this.isHorizontal();
    const ticks = this.ticks;
    const { align, crossAlign, padding, mirror } = optionTicks;
    const tl = getTickMarkLength(options.grid);
    const tickAndPadding = tl + padding;
    const hTickAndPadding = mirror ? -padding : tickAndPadding;
    const rotation = -toRadians(this.labelRotation);
    const items = [];
    let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;
    let textBaseline = "middle";
    if (position === "top") {
      y = this.bottom - hTickAndPadding;
      textAlign = this._getXAxisLabelAlignment();
    } else if (position === "bottom") {
      y = this.top + hTickAndPadding;
      textAlign = this._getXAxisLabelAlignment();
    } else if (position === "left") {
      const ret = this._getYAxisLabelAlignment(tl);
      textAlign = ret.textAlign;
      x = ret.x;
    } else if (position === "right") {
      const ret1 = this._getYAxisLabelAlignment(tl);
      textAlign = ret1.textAlign;
      x = ret1.x;
    } else if (axis === "x") {
      if (position === "center") {
        y = (chartArea.top + chartArea.bottom) / 2 + tickAndPadding;
      } else if (isObject(position)) {
        const positionAxisID = Object.keys(position)[0];
        const value = position[positionAxisID];
        y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;
      }
      textAlign = this._getXAxisLabelAlignment();
    } else if (axis === "y") {
      if (position === "center") {
        x = (chartArea.left + chartArea.right) / 2 - tickAndPadding;
      } else if (isObject(position)) {
        const positionAxisID1 = Object.keys(position)[0];
        const value1 = position[positionAxisID1];
        x = this.chart.scales[positionAxisID1].getPixelForValue(value1);
      }
      textAlign = this._getYAxisLabelAlignment(tl).textAlign;
    }
    if (axis === "y") {
      if (align === "start") {
        textBaseline = "top";
      } else if (align === "end") {
        textBaseline = "bottom";
      }
    }
    const labelSizes = this._getLabelSizes();
    for (i = 0, ilen = ticks.length; i < ilen; ++i) {
      tick = ticks[i];
      label = tick.label;
      const optsAtIndex = optionTicks.setContext(this.getContext(i));
      pixel = this.getPixelForTick(i) + optionTicks.labelOffset;
      font = this._resolveTickFontOptions(i);
      lineHeight = font.lineHeight;
      lineCount = isArray(label) ? label.length : 1;
      const halfCount = lineCount / 2;
      const color2 = optsAtIndex.color;
      const strokeColor = optsAtIndex.textStrokeColor;
      const strokeWidth = optsAtIndex.textStrokeWidth;
      let tickTextAlign = textAlign;
      if (isHorizontal) {
        x = pixel;
        if (textAlign === "inner") {
          if (i === ilen - 1) {
            tickTextAlign = !this.options.reverse ? "right" : "left";
          } else if (i === 0) {
            tickTextAlign = !this.options.reverse ? "left" : "right";
          } else {
            tickTextAlign = "center";
          }
        }
        if (position === "top") {
          if (crossAlign === "near" || rotation !== 0) {
            textOffset = -lineCount * lineHeight + lineHeight / 2;
          } else if (crossAlign === "center") {
            textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;
          } else {
            textOffset = -labelSizes.highest.height + lineHeight / 2;
          }
        } else {
          if (crossAlign === "near" || rotation !== 0) {
            textOffset = lineHeight / 2;
          } else if (crossAlign === "center") {
            textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;
          } else {
            textOffset = labelSizes.highest.height - lineCount * lineHeight;
          }
        }
        if (mirror) {
          textOffset *= -1;
        }
        if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {
          x += lineHeight / 2 * Math.sin(rotation);
        }
      } else {
        y = pixel;
        textOffset = (1 - lineCount) * lineHeight / 2;
      }
      let backdrop;
      if (optsAtIndex.showLabelBackdrop) {
        const labelPadding = toPadding(optsAtIndex.backdropPadding);
        const height = labelSizes.heights[i];
        const width = labelSizes.widths[i];
        let top = textOffset - labelPadding.top;
        let left = 0 - labelPadding.left;
        switch (textBaseline) {
          case "middle":
            top -= height / 2;
            break;
          case "bottom":
            top -= height;
            break;
        }
        switch (textAlign) {
          case "center":
            left -= width / 2;
            break;
          case "right":
            left -= width;
            break;
        }
        backdrop = {
          left,
          top,
          width: width + labelPadding.width,
          height: height + labelPadding.height,
          color: optsAtIndex.backdropColor
        };
      }
      items.push({
        label,
        font,
        textOffset,
        options: {
          rotation,
          color: color2,
          strokeColor,
          strokeWidth,
          textAlign: tickTextAlign,
          textBaseline,
          translation: [
            x,
            y
          ],
          backdrop
        }
      });
    }
    return items;
  }
  _getXAxisLabelAlignment() {
    const { position, ticks } = this.options;
    const rotation = -toRadians(this.labelRotation);
    if (rotation) {
      return position === "top" ? "left" : "right";
    }
    let align = "center";
    if (ticks.align === "start") {
      align = "left";
    } else if (ticks.align === "end") {
      align = "right";
    } else if (ticks.align === "inner") {
      align = "inner";
    }
    return align;
  }
  _getYAxisLabelAlignment(tl) {
    const { position, ticks: { crossAlign, mirror, padding } } = this.options;
    const labelSizes = this._getLabelSizes();
    const tickAndPadding = tl + padding;
    const widest = labelSizes.widest.width;
    let textAlign;
    let x;
    if (position === "left") {
      if (mirror) {
        x = this.right + padding;
        if (crossAlign === "near") {
          textAlign = "left";
        } else if (crossAlign === "center") {
          textAlign = "center";
          x += widest / 2;
        } else {
          textAlign = "right";
          x += widest;
        }
      } else {
        x = this.right - tickAndPadding;
        if (crossAlign === "near") {
          textAlign = "right";
        } else if (crossAlign === "center") {
          textAlign = "center";
          x -= widest / 2;
        } else {
          textAlign = "left";
          x = this.left;
        }
      }
    } else if (position === "right") {
      if (mirror) {
        x = this.left + padding;
        if (crossAlign === "near") {
          textAlign = "right";
        } else if (crossAlign === "center") {
          textAlign = "center";
          x -= widest / 2;
        } else {
          textAlign = "left";
          x -= widest;
        }
      } else {
        x = this.left + tickAndPadding;
        if (crossAlign === "near") {
          textAlign = "left";
        } else if (crossAlign === "center") {
          textAlign = "center";
          x += widest / 2;
        } else {
          textAlign = "right";
          x = this.right;
        }
      }
    } else {
      textAlign = "right";
    }
    return {
      textAlign,
      x
    };
  }
  _computeLabelArea() {
    if (this.options.ticks.mirror) {
      return;
    }
    const chart = this.chart;
    const position = this.options.position;
    if (position === "left" || position === "right") {
      return {
        top: 0,
        left: this.left,
        bottom: chart.height,
        right: this.right
      };
    }
    if (position === "top" || position === "bottom") {
      return {
        top: this.top,
        left: 0,
        bottom: this.bottom,
        right: chart.width
      };
    }
  }
  drawBackground() {
    const { ctx, options: { backgroundColor }, left, top, width, height } = this;
    if (backgroundColor) {
      ctx.save();
      ctx.fillStyle = backgroundColor;
      ctx.fillRect(left, top, width, height);
      ctx.restore();
    }
  }
  getLineWidthForValue(value) {
    const grid = this.options.grid;
    if (!this._isVisible() || !grid.display) {
      return 0;
    }
    const ticks = this.ticks;
    const index = ticks.findIndex((t) => t.value === value);
    if (index >= 0) {
      const opts = grid.setContext(this.getContext(index));
      return opts.lineWidth;
    }
    return 0;
  }
  drawGrid(chartArea) {
    const grid = this.options.grid;
    const ctx = this.ctx;
    const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));
    let i, ilen;
    const drawLine = (p1, p2, style) => {
      if (!style.width || !style.color) {
        return;
      }
      ctx.save();
      ctx.lineWidth = style.width;
      ctx.strokeStyle = style.color;
      ctx.setLineDash(style.borderDash || []);
      ctx.lineDashOffset = style.borderDashOffset;
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.stroke();
      ctx.restore();
    };
    if (grid.display) {
      for (i = 0, ilen = items.length; i < ilen; ++i) {
        const item = items[i];
        if (grid.drawOnChartArea) {
          drawLine({
            x: item.x1,
            y: item.y1
          }, {
            x: item.x2,
            y: item.y2
          }, item);
        }
        if (grid.drawTicks) {
          drawLine({
            x: item.tx1,
            y: item.ty1
          }, {
            x: item.tx2,
            y: item.ty2
          }, {
            color: item.tickColor,
            width: item.tickWidth,
            borderDash: item.tickBorderDash,
            borderDashOffset: item.tickBorderDashOffset
          });
        }
      }
    }
  }
  drawBorder() {
    const { chart, ctx, options: { border, grid } } = this;
    const borderOpts = border.setContext(this.getContext());
    const axisWidth = border.display ? borderOpts.width : 0;
    if (!axisWidth) {
      return;
    }
    const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;
    const borderValue = this._borderValue;
    let x1, x2, y1, y2;
    if (this.isHorizontal()) {
      x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;
      x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;
      y1 = y2 = borderValue;
    } else {
      y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;
      y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;
      x1 = x2 = borderValue;
    }
    ctx.save();
    ctx.lineWidth = borderOpts.width;
    ctx.strokeStyle = borderOpts.color;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
    ctx.restore();
  }
  drawLabels(chartArea) {
    const optionTicks = this.options.ticks;
    if (!optionTicks.display) {
      return;
    }
    const ctx = this.ctx;
    const area = this._computeLabelArea();
    if (area) {
      clipArea(ctx, area);
    }
    const items = this.getLabelItems(chartArea);
    for (const item of items) {
      const renderTextOptions = item.options;
      const tickFont = item.font;
      const label = item.label;
      const y = item.textOffset;
      renderText(ctx, label, 0, y, tickFont, renderTextOptions);
    }
    if (area) {
      unclipArea(ctx);
    }
  }
  drawTitle() {
    const { ctx, options: { position, title, reverse } } = this;
    if (!title.display) {
      return;
    }
    const font = toFont(title.font);
    const padding = toPadding(title.padding);
    const align = title.align;
    let offset = font.lineHeight / 2;
    if (position === "bottom" || position === "center" || isObject(position)) {
      offset += padding.bottom;
      if (isArray(title.text)) {
        offset += font.lineHeight * (title.text.length - 1);
      }
    } else {
      offset += padding.top;
    }
    const { titleX, titleY, maxWidth, rotation } = titleArgs(this, offset, position, align);
    renderText(ctx, title.text, 0, 0, font, {
      color: title.color,
      maxWidth,
      rotation,
      textAlign: titleAlign(align, position, reverse),
      textBaseline: "middle",
      translation: [
        titleX,
        titleY
      ]
    });
  }
  draw(chartArea) {
    if (!this._isVisible()) {
      return;
    }
    this.drawBackground();
    this.drawGrid(chartArea);
    this.drawBorder();
    this.drawTitle();
    this.drawLabels(chartArea);
  }
  _layers() {
    const opts = this.options;
    const tz = opts.ticks && opts.ticks.z || 0;
    const gz = valueOrDefault(opts.grid && opts.grid.z, -1);
    const bz = valueOrDefault(opts.border && opts.border.z, 0);
    if (!this._isVisible() || this.draw !== Scale.prototype.draw) {
      return [
        {
          z: tz,
          draw: (chartArea) => {
            this.draw(chartArea);
          }
        }
      ];
    }
    return [
      {
        z: gz,
        draw: (chartArea) => {
          this.drawBackground();
          this.drawGrid(chartArea);
          this.drawTitle();
        }
      },
      {
        z: bz,
        draw: () => {
          this.drawBorder();
        }
      },
      {
        z: tz,
        draw: (chartArea) => {
          this.drawLabels(chartArea);
        }
      }
    ];
  }
  getMatchingVisibleMetas(type) {
    const metas = this.chart.getSortedVisibleDatasetMetas();
    const axisID = this.axis + "AxisID";
    const result = [];
    let i, ilen;
    for (i = 0, ilen = metas.length; i < ilen; ++i) {
      const meta = metas[i];
      if (meta[axisID] === this.id && (!type || meta.type === type)) {
        result.push(meta);
      }
    }
    return result;
  }
  _resolveTickFontOptions(index) {
    const opts = this.options.ticks.setContext(this.getContext(index));
    return toFont(opts.font);
  }
  _maxDigits() {
    const fontSize = this._resolveTickFontOptions(0).lineHeight;
    return (this.isHorizontal() ? this.width : this.height) / fontSize;
  }
}
class TypedRegistry {
  constructor(type, scope, override) {
    this.type = type;
    this.scope = scope;
    this.override = override;
    this.items = /* @__PURE__ */ Object.create(null);
  }
  isForType(type) {
    return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);
  }
  register(item) {
    const proto = Object.getPrototypeOf(item);
    let parentScope;
    if (isIChartComponent(proto)) {
      parentScope = this.register(proto);
    }
    const items = this.items;
    const id = item.id;
    const scope = this.scope + "." + id;
    if (!id) {
      throw new Error("class does not have id: " + item);
    }
    if (id in items) {
      return scope;
    }
    items[id] = item;
    registerDefaults(item, scope, parentScope);
    if (this.override) {
      defaults.override(item.id, item.overrides);
    }
    return scope;
  }
  get(id) {
    return this.items[id];
  }
  unregister(item) {
    const items = this.items;
    const id = item.id;
    const scope = this.scope;
    if (id in items) {
      delete items[id];
    }
    if (scope && id in defaults[scope]) {
      delete defaults[scope][id];
      if (this.override) {
        delete overrides[id];
      }
    }
  }
}
function registerDefaults(item, scope, parentScope) {
  const itemDefaults = merge(/* @__PURE__ */ Object.create(null), [
    parentScope ? defaults.get(parentScope) : {},
    defaults.get(scope),
    item.defaults
  ]);
  defaults.set(scope, itemDefaults);
  if (item.defaultRoutes) {
    routeDefaults(scope, item.defaultRoutes);
  }
  if (item.descriptors) {
    defaults.describe(scope, item.descriptors);
  }
}
function routeDefaults(scope, routes) {
  Object.keys(routes).forEach((property) => {
    const propertyParts = property.split(".");
    const sourceName = propertyParts.pop();
    const sourceScope = [
      scope
    ].concat(propertyParts).join(".");
    const parts = routes[property].split(".");
    const targetName = parts.pop();
    const targetScope = parts.join(".");
    defaults.route(sourceScope, sourceName, targetScope, targetName);
  });
}
function isIChartComponent(proto) {
  return "id" in proto && "defaults" in proto;
}
class Registry {
  constructor() {
    this.controllers = new TypedRegistry(DatasetController, "datasets", true);
    this.elements = new TypedRegistry(Element, "elements");
    this.plugins = new TypedRegistry(Object, "plugins");
    this.scales = new TypedRegistry(Scale, "scales");
    this._typedRegistries = [
      this.controllers,
      this.scales,
      this.elements
    ];
  }
  add(...args) {
    this._each("register", args);
  }
  remove(...args) {
    this._each("unregister", args);
  }
  addControllers(...args) {
    this._each("register", args, this.controllers);
  }
  addElements(...args) {
    this._each("register", args, this.elements);
  }
  addPlugins(...args) {
    this._each("register", args, this.plugins);
  }
  addScales(...args) {
    this._each("register", args, this.scales);
  }
  getController(id) {
    return this._get(id, this.controllers, "controller");
  }
  getElement(id) {
    return this._get(id, this.elements, "element");
  }
  getPlugin(id) {
    return this._get(id, this.plugins, "plugin");
  }
  getScale(id) {
    return this._get(id, this.scales, "scale");
  }
  removeControllers(...args) {
    this._each("unregister", args, this.controllers);
  }
  removeElements(...args) {
    this._each("unregister", args, this.elements);
  }
  removePlugins(...args) {
    this._each("unregister", args, this.plugins);
  }
  removeScales(...args) {
    this._each("unregister", args, this.scales);
  }
  _each(method, args, typedRegistry) {
    [
      ...args
    ].forEach((arg) => {
      const reg = typedRegistry || this._getRegistryForType(arg);
      if (typedRegistry || reg.isForType(arg) || reg === this.plugins && arg.id) {
        this._exec(method, reg, arg);
      } else {
        each(arg, (item) => {
          const itemReg = typedRegistry || this._getRegistryForType(item);
          this._exec(method, itemReg, item);
        });
      }
    });
  }
  _exec(method, registry2, component) {
    const camelMethod = _capitalize(method);
    callback(component["before" + camelMethod], [], component);
    registry2[method](component);
    callback(component["after" + camelMethod], [], component);
  }
  _getRegistryForType(type) {
    for (let i = 0; i < this._typedRegistries.length; i++) {
      const reg = this._typedRegistries[i];
      if (reg.isForType(type)) {
        return reg;
      }
    }
    return this.plugins;
  }
  _get(id, typedRegistry, type) {
    const item = typedRegistry.get(id);
    if (item === void 0) {
      throw new Error('"' + id + '" is not a registered ' + type + ".");
    }
    return item;
  }
}
var registry = /* @__PURE__ */ new Registry();
class PluginService {
  constructor() {
    this._init = [];
  }
  notify(chart, hook, args, filter) {
    if (hook === "beforeInit") {
      this._init = this._createDescriptors(chart, true);
      this._notify(this._init, chart, "install");
    }
    const descriptors2 = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);
    const result = this._notify(descriptors2, chart, hook, args);
    if (hook === "afterDestroy") {
      this._notify(descriptors2, chart, "stop");
      this._notify(this._init, chart, "uninstall");
    }
    return result;
  }
  _notify(descriptors2, chart, hook, args) {
    args = args || {};
    for (const descriptor of descriptors2) {
      const plugin = descriptor.plugin;
      const method = plugin[hook];
      const params = [
        chart,
        args,
        descriptor.options
      ];
      if (callback(method, params, plugin) === false && args.cancelable) {
        return false;
      }
    }
    return true;
  }
  invalidate() {
    if (!isNullOrUndef(this._cache)) {
      this._oldCache = this._cache;
      this._cache = void 0;
    }
  }
  _descriptors(chart) {
    if (this._cache) {
      return this._cache;
    }
    const descriptors2 = this._cache = this._createDescriptors(chart);
    this._notifyStateChanges(chart);
    return descriptors2;
  }
  _createDescriptors(chart, all) {
    const config = chart && chart.config;
    const options = valueOrDefault(config.options && config.options.plugins, {});
    const plugins = allPlugins(config);
    return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);
  }
  _notifyStateChanges(chart) {
    const previousDescriptors = this._oldCache || [];
    const descriptors2 = this._cache;
    const diff = (a, b) => a.filter((x) => !b.some((y) => x.plugin.id === y.plugin.id));
    this._notify(diff(previousDescriptors, descriptors2), chart, "stop");
    this._notify(diff(descriptors2, previousDescriptors), chart, "start");
  }
}
function allPlugins(config) {
  const localIds = {};
  const plugins = [];
  const keys = Object.keys(registry.plugins.items);
  for (let i = 0; i < keys.length; i++) {
    plugins.push(registry.getPlugin(keys[i]));
  }
  const local = config.plugins || [];
  for (let i1 = 0; i1 < local.length; i1++) {
    const plugin = local[i1];
    if (plugins.indexOf(plugin) === -1) {
      plugins.push(plugin);
      localIds[plugin.id] = true;
    }
  }
  return {
    plugins,
    localIds
  };
}
function getOpts(options, all) {
  if (!all && options === false) {
    return null;
  }
  if (options === true) {
    return {};
  }
  return options;
}
function createDescriptors(chart, { plugins, localIds }, options, all) {
  const result = [];
  const context = chart.getContext();
  for (const plugin of plugins) {
    const id = plugin.id;
    const opts = getOpts(options[id], all);
    if (opts === null) {
      continue;
    }
    result.push({
      plugin,
      options: pluginOpts(chart.config, {
        plugin,
        local: localIds[id]
      }, opts, context)
    });
  }
  return result;
}
function pluginOpts(config, { plugin, local }, opts, context) {
  const keys = config.pluginScopeKeys(plugin);
  const scopes = config.getOptionScopes(opts, keys);
  if (local && plugin.defaults) {
    scopes.push(plugin.defaults);
  }
  return config.createResolver(scopes, context, [
    ""
  ], {
    scriptable: false,
    indexable: false,
    allKeys: true
  });
}
function getIndexAxis(type, options) {
  const datasetDefaults = defaults.datasets[type] || {};
  const datasetOptions = (options.datasets || {})[type] || {};
  return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || "x";
}
function getAxisFromDefaultScaleID(id, indexAxis) {
  let axis = id;
  if (id === "_index_") {
    axis = indexAxis;
  } else if (id === "_value_") {
    axis = indexAxis === "x" ? "y" : "x";
  }
  return axis;
}
function getDefaultScaleIDFromAxis(axis, indexAxis) {
  return axis === indexAxis ? "_index_" : "_value_";
}
function axisFromPosition(position) {
  if (position === "top" || position === "bottom") {
    return "x";
  }
  if (position === "left" || position === "right") {
    return "y";
  }
}
function determineAxis(id, scaleOptions) {
  if (id === "x" || id === "y" || id === "r") {
    return id;
  }
  id = scaleOptions.axis || axisFromPosition(scaleOptions.position) || id.length > 1 && determineAxis(id[0].toLowerCase(), scaleOptions);
  if (id) {
    return id;
  }
  throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`);
}
function mergeScaleConfig(config, options) {
  const chartDefaults = overrides[config.type] || {
    scales: {}
  };
  const configScales = options.scales || {};
  const chartIndexAxis = getIndexAxis(config.type, options);
  const scales = /* @__PURE__ */ Object.create(null);
  Object.keys(configScales).forEach((id) => {
    const scaleConf = configScales[id];
    if (!isObject(scaleConf)) {
      return console.error(`Invalid scale configuration for scale: ${id}`);
    }
    if (scaleConf._proxy) {
      return console.warn(`Ignoring resolver passed as options for scale: ${id}`);
    }
    const axis = determineAxis(id, scaleConf);
    const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);
    const defaultScaleOptions = chartDefaults.scales || {};
    scales[id] = mergeIf(/* @__PURE__ */ Object.create(null), [
      {
        axis
      },
      scaleConf,
      defaultScaleOptions[axis],
      defaultScaleOptions[defaultId]
    ]);
  });
  config.data.datasets.forEach((dataset) => {
    const type = dataset.type || config.type;
    const indexAxis = dataset.indexAxis || getIndexAxis(type, options);
    const datasetDefaults = overrides[type] || {};
    const defaultScaleOptions = datasetDefaults.scales || {};
    Object.keys(defaultScaleOptions).forEach((defaultID) => {
      const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);
      const id = dataset[axis + "AxisID"] || axis;
      scales[id] = scales[id] || /* @__PURE__ */ Object.create(null);
      mergeIf(scales[id], [
        {
          axis
        },
        configScales[id],
        defaultScaleOptions[defaultID]
      ]);
    });
  });
  Object.keys(scales).forEach((key) => {
    const scale = scales[key];
    mergeIf(scale, [
      defaults.scales[scale.type],
      defaults.scale
    ]);
  });
  return scales;
}
function initOptions(config) {
  const options = config.options || (config.options = {});
  options.plugins = valueOrDefault(options.plugins, {});
  options.scales = mergeScaleConfig(config, options);
}
function initData(data) {
  data = data || {};
  data.datasets = data.datasets || [];
  data.labels = data.labels || [];
  return data;
}
function initConfig(config) {
  config = config || {};
  config.data = initData(config.data);
  initOptions(config);
  return config;
}
const keyCache = /* @__PURE__ */ new Map();
const keysCached = /* @__PURE__ */ new Set();
function cachedKeys(cacheKey, generate) {
  let keys = keyCache.get(cacheKey);
  if (!keys) {
    keys = generate();
    keyCache.set(cacheKey, keys);
    keysCached.add(keys);
  }
  return keys;
}
const addIfFound = (set2, obj, key) => {
  const opts = resolveObjectKey(obj, key);
  if (opts !== void 0) {
    set2.add(opts);
  }
};
class Config {
  constructor(config) {
    this._config = initConfig(config);
    this._scopeCache = /* @__PURE__ */ new Map();
    this._resolverCache = /* @__PURE__ */ new Map();
  }
  get platform() {
    return this._config.platform;
  }
  get type() {
    return this._config.type;
  }
  set type(type) {
    this._config.type = type;
  }
  get data() {
    return this._config.data;
  }
  set data(data) {
    this._config.data = initData(data);
  }
  get options() {
    return this._config.options;
  }
  set options(options) {
    this._config.options = options;
  }
  get plugins() {
    return this._config.plugins;
  }
  update() {
    const config = this._config;
    this.clearCache();
    initOptions(config);
  }
  clearCache() {
    this._scopeCache.clear();
    this._resolverCache.clear();
  }
  datasetScopeKeys(datasetType) {
    return cachedKeys(datasetType, () => [
      [
        `datasets.${datasetType}`,
        ""
      ]
    ]);
  }
  datasetAnimationScopeKeys(datasetType, transition) {
    return cachedKeys(`${datasetType}.transition.${transition}`, () => [
      [
        `datasets.${datasetType}.transitions.${transition}`,
        `transitions.${transition}`
      ],
      [
        `datasets.${datasetType}`,
        ""
      ]
    ]);
  }
  datasetElementScopeKeys(datasetType, elementType) {
    return cachedKeys(`${datasetType}-${elementType}`, () => [
      [
        `datasets.${datasetType}.elements.${elementType}`,
        `datasets.${datasetType}`,
        `elements.${elementType}`,
        ""
      ]
    ]);
  }
  pluginScopeKeys(plugin) {
    const id = plugin.id;
    const type = this.type;
    return cachedKeys(`${type}-plugin-${id}`, () => [
      [
        `plugins.${id}`,
        ...plugin.additionalOptionScopes || []
      ]
    ]);
  }
  _cachedScopes(mainScope, resetCache) {
    const _scopeCache = this._scopeCache;
    let cache = _scopeCache.get(mainScope);
    if (!cache || resetCache) {
      cache = /* @__PURE__ */ new Map();
      _scopeCache.set(mainScope, cache);
    }
    return cache;
  }
  getOptionScopes(mainScope, keyLists, resetCache) {
    const { options, type } = this;
    const cache = this._cachedScopes(mainScope, resetCache);
    const cached = cache.get(keyLists);
    if (cached) {
      return cached;
    }
    const scopes = /* @__PURE__ */ new Set();
    keyLists.forEach((keys) => {
      if (mainScope) {
        scopes.add(mainScope);
        keys.forEach((key) => addIfFound(scopes, mainScope, key));
      }
      keys.forEach((key) => addIfFound(scopes, options, key));
      keys.forEach((key) => addIfFound(scopes, overrides[type] || {}, key));
      keys.forEach((key) => addIfFound(scopes, defaults, key));
      keys.forEach((key) => addIfFound(scopes, descriptors, key));
    });
    const array = Array.from(scopes);
    if (array.length === 0) {
      array.push(/* @__PURE__ */ Object.create(null));
    }
    if (keysCached.has(keyLists)) {
      cache.set(keyLists, array);
    }
    return array;
  }
  chartOptionScopes() {
    const { options, type } = this;
    return [
      options,
      overrides[type] || {},
      defaults.datasets[type] || {},
      {
        type
      },
      defaults,
      descriptors
    ];
  }
  resolveNamedOptions(scopes, names2, context, prefixes = [
    ""
  ]) {
    const result = {
      $shared: true
    };
    const { resolver, subPrefixes } = getResolver(this._resolverCache, scopes, prefixes);
    let options = resolver;
    if (needContext(resolver, names2)) {
      result.$shared = false;
      context = isFunction(context) ? context() : context;
      const subResolver = this.createResolver(scopes, context, subPrefixes);
      options = _attachContext(resolver, context, subResolver);
    }
    for (const prop of names2) {
      result[prop] = options[prop];
    }
    return result;
  }
  createResolver(scopes, context, prefixes = [
    ""
  ], descriptorDefaults) {
    const { resolver } = getResolver(this._resolverCache, scopes, prefixes);
    return isObject(context) ? _attachContext(resolver, context, void 0, descriptorDefaults) : resolver;
  }
}
function getResolver(resolverCache, scopes, prefixes) {
  let cache = resolverCache.get(scopes);
  if (!cache) {
    cache = /* @__PURE__ */ new Map();
    resolverCache.set(scopes, cache);
  }
  const cacheKey = prefixes.join();
  let cached = cache.get(cacheKey);
  if (!cached) {
    const resolver = _createResolver(scopes, prefixes);
    cached = {
      resolver,
      subPrefixes: prefixes.filter((p) => !p.toLowerCase().includes("hover"))
    };
    cache.set(cacheKey, cached);
  }
  return cached;
}
const hasFunction = (value) => isObject(value) && Object.getOwnPropertyNames(value).reduce((acc, key) => acc || isFunction(value[key]), false);
function needContext(proxy, names2) {
  const { isScriptable, isIndexable } = _descriptors(proxy);
  for (const prop of names2) {
    const scriptable = isScriptable(prop);
    const indexable = isIndexable(prop);
    const value = (indexable || scriptable) && proxy[prop];
    if (scriptable && (isFunction(value) || hasFunction(value)) || indexable && isArray(value)) {
      return true;
    }
  }
  return false;
}
var version = "4.1.1";
const KNOWN_POSITIONS = [
  "top",
  "bottom",
  "left",
  "right",
  "chartArea"
];
function positionIsHorizontal(position, axis) {
  return position === "top" || position === "bottom" || KNOWN_POSITIONS.indexOf(position) === -1 && axis === "x";
}
function compare2Level(l1, l2) {
  return function(a, b) {
    return a[l1] === b[l1] ? a[l2] - b[l2] : a[l1] - b[l1];
  };
}
function onAnimationsComplete(context) {
  const chart = context.chart;
  const animationOptions = chart.options.animation;
  chart.notifyPlugins("afterRender");
  callback(animationOptions && animationOptions.onComplete, [
    context
  ], chart);
}
function onAnimationProgress(context) {
  const chart = context.chart;
  const animationOptions = chart.options.animation;
  callback(animationOptions && animationOptions.onProgress, [
    context
  ], chart);
}
function getCanvas(item) {
  if (_isDomSupported() && typeof item === "string") {
    item = document.getElementById(item);
  } else if (item && item.length) {
    item = item[0];
  }
  if (item && item.canvas) {
    item = item.canvas;
  }
  return item;
}
const instances = {};
const getChart = (key) => {
  const canvas = getCanvas(key);
  return Object.values(instances).filter((c) => c.canvas === canvas).pop();
};
function moveNumericKeys(obj, start, move) {
  const keys = Object.keys(obj);
  for (const key of keys) {
    const intKey = +key;
    if (intKey >= start) {
      const value = obj[key];
      delete obj[key];
      if (move > 0 || intKey > start) {
        obj[intKey + move] = value;
      }
    }
  }
}
function determineLastEvent(e, lastEvent, inChartArea, isClick) {
  if (!inChartArea || e.type === "mouseout") {
    return null;
  }
  if (isClick) {
    return lastEvent;
  }
  return e;
}
function getDatasetArea(meta) {
  const { xScale, yScale } = meta;
  if (xScale && yScale) {
    return {
      left: xScale.left,
      right: xScale.right,
      top: yScale.top,
      bottom: yScale.bottom
    };
  }
}
class Chart$1 {
  static register(...items) {
    registry.add(...items);
    invalidatePlugins();
  }
  static unregister(...items) {
    registry.remove(...items);
    invalidatePlugins();
  }
  constructor(item, userConfig) {
    const config = this.config = new Config(userConfig);
    const initialCanvas = getCanvas(item);
    const existingChart = getChart(initialCanvas);
    if (existingChart) {
      throw new Error("Canvas is already in use. Chart with ID '" + existingChart.id + "' must be destroyed before the canvas with ID '" + existingChart.canvas.id + "' can be reused.");
    }
    const options = config.createResolver(config.chartOptionScopes(), this.getContext());
    this.platform = new (config.platform || _detectPlatform(initialCanvas))();
    this.platform.updateConfig(config);
    const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);
    const canvas = context && context.canvas;
    const height = canvas && canvas.height;
    const width = canvas && canvas.width;
    this.id = uid();
    this.ctx = context;
    this.canvas = canvas;
    this.width = width;
    this.height = height;
    this._options = options;
    this._aspectRatio = this.aspectRatio;
    this._layers = [];
    this._metasets = [];
    this._stacks = void 0;
    this.boxes = [];
    this.currentDevicePixelRatio = void 0;
    this.chartArea = void 0;
    this._active = [];
    this._lastEvent = void 0;
    this._listeners = {};
    this._responsiveListeners = void 0;
    this._sortedMetasets = [];
    this.scales = {};
    this._plugins = new PluginService();
    this.$proxies = {};
    this._hiddenIndices = {};
    this.attached = false;
    this._animationsDisabled = void 0;
    this.$context = void 0;
    this._doResize = debounce((mode) => this.update(mode), options.resizeDelay || 0);
    this._dataChanges = [];
    instances[this.id] = this;
    if (!context || !canvas) {
      console.error("Failed to create chart: can't acquire context from the given item");
      return;
    }
    animator.listen(this, "complete", onAnimationsComplete);
    animator.listen(this, "progress", onAnimationProgress);
    this._initialize();
    if (this.attached) {
      this.update();
    }
  }
  get aspectRatio() {
    const { options: { aspectRatio, maintainAspectRatio }, width, height, _aspectRatio } = this;
    if (!isNullOrUndef(aspectRatio)) {
      return aspectRatio;
    }
    if (maintainAspectRatio && _aspectRatio) {
      return _aspectRatio;
    }
    return height ? width / height : null;
  }
  get data() {
    return this.config.data;
  }
  set data(data) {
    this.config.data = data;
  }
  get options() {
    return this._options;
  }
  set options(options) {
    this.config.options = options;
  }
  get registry() {
    return registry;
  }
  _initialize() {
    this.notifyPlugins("beforeInit");
    if (this.options.responsive) {
      this.resize();
    } else {
      retinaScale(this, this.options.devicePixelRatio);
    }
    this.bindEvents();
    this.notifyPlugins("afterInit");
    return this;
  }
  clear() {
    clearCanvas(this.canvas, this.ctx);
    return this;
  }
  stop() {
    animator.stop(this);
    return this;
  }
  resize(width, height) {
    if (!animator.running(this)) {
      this._resize(width, height);
    } else {
      this._resizeBeforeDraw = {
        width,
        height
      };
    }
  }
  _resize(width, height) {
    const options = this.options;
    const canvas = this.canvas;
    const aspectRatio = options.maintainAspectRatio && this.aspectRatio;
    const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);
    const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();
    const mode = this.width ? "resize" : "attach";
    this.width = newSize.width;
    this.height = newSize.height;
    this._aspectRatio = this.aspectRatio;
    if (!retinaScale(this, newRatio, true)) {
      return;
    }
    this.notifyPlugins("resize", {
      size: newSize
    });
    callback(options.onResize, [
      this,
      newSize
    ], this);
    if (this.attached) {
      if (this._doResize(mode)) {
        this.render();
      }
    }
  }
  ensureScalesHaveIDs() {
    const options = this.options;
    const scalesOptions = options.scales || {};
    each(scalesOptions, (axisOptions, axisID) => {
      axisOptions.id = axisID;
    });
  }
  buildOrUpdateScales() {
    const options = this.options;
    const scaleOpts = options.scales;
    const scales = this.scales;
    const updated = Object.keys(scales).reduce((obj, id) => {
      obj[id] = false;
      return obj;
    }, {});
    let items = [];
    if (scaleOpts) {
      items = items.concat(Object.keys(scaleOpts).map((id) => {
        const scaleOptions = scaleOpts[id];
        const axis = determineAxis(id, scaleOptions);
        const isRadial = axis === "r";
        const isHorizontal = axis === "x";
        return {
          options: scaleOptions,
          dposition: isRadial ? "chartArea" : isHorizontal ? "bottom" : "left",
          dtype: isRadial ? "radialLinear" : isHorizontal ? "category" : "linear"
        };
      }));
    }
    each(items, (item) => {
      const scaleOptions = item.options;
      const id = scaleOptions.id;
      const axis = determineAxis(id, scaleOptions);
      const scaleType = valueOrDefault(scaleOptions.type, item.dtype);
      if (scaleOptions.position === void 0 || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {
        scaleOptions.position = item.dposition;
      }
      updated[id] = true;
      let scale = null;
      if (id in scales && scales[id].type === scaleType) {
        scale = scales[id];
      } else {
        const scaleClass = registry.getScale(scaleType);
        scale = new scaleClass({
          id,
          type: scaleType,
          ctx: this.ctx,
          chart: this
        });
        scales[scale.id] = scale;
      }
      scale.init(scaleOptions, options);
    });
    each(updated, (hasUpdated, id) => {
      if (!hasUpdated) {
        delete scales[id];
      }
    });
    each(scales, (scale) => {
      layouts.configure(this, scale, scale.options);
      layouts.addBox(this, scale);
    });
  }
  _updateMetasets() {
    const metasets = this._metasets;
    const numData = this.data.datasets.length;
    const numMeta = metasets.length;
    metasets.sort((a, b) => a.index - b.index);
    if (numMeta > numData) {
      for (let i = numData; i < numMeta; ++i) {
        this._destroyDatasetMeta(i);
      }
      metasets.splice(numData, numMeta - numData);
    }
    this._sortedMetasets = metasets.slice(0).sort(compare2Level("order", "index"));
  }
  _removeUnreferencedMetasets() {
    const { _metasets: metasets, data: { datasets } } = this;
    if (metasets.length > datasets.length) {
      delete this._stacks;
    }
    metasets.forEach((meta, index) => {
      if (datasets.filter((x) => x === meta._dataset).length === 0) {
        this._destroyDatasetMeta(index);
      }
    });
  }
  buildOrUpdateControllers() {
    const newControllers = [];
    const datasets = this.data.datasets;
    let i, ilen;
    this._removeUnreferencedMetasets();
    for (i = 0, ilen = datasets.length; i < ilen; i++) {
      const dataset = datasets[i];
      let meta = this.getDatasetMeta(i);
      const type = dataset.type || this.config.type;
      if (meta.type && meta.type !== type) {
        this._destroyDatasetMeta(i);
        meta = this.getDatasetMeta(i);
      }
      meta.type = type;
      meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);
      meta.order = dataset.order || 0;
      meta.index = i;
      meta.label = "" + dataset.label;
      meta.visible = this.isDatasetVisible(i);
      if (meta.controller) {
        meta.controller.updateIndex(i);
        meta.controller.linkScales();
      } else {
        const ControllerClass = registry.getController(type);
        const { datasetElementType, dataElementType } = defaults.datasets[type];
        Object.assign(ControllerClass, {
          dataElementType: registry.getElement(dataElementType),
          datasetElementType: datasetElementType && registry.getElement(datasetElementType)
        });
        meta.controller = new ControllerClass(this, i);
        newControllers.push(meta.controller);
      }
    }
    this._updateMetasets();
    return newControllers;
  }
  _resetElements() {
    each(this.data.datasets, (dataset, datasetIndex) => {
      this.getDatasetMeta(datasetIndex).controller.reset();
    }, this);
  }
  reset() {
    this._resetElements();
    this.notifyPlugins("reset");
  }
  update(mode) {
    const config = this.config;
    config.update();
    const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());
    const animsDisabled = this._animationsDisabled = !options.animation;
    this._updateScales();
    this._checkEventBindings();
    this._updateHiddenIndices();
    this._plugins.invalidate();
    if (this.notifyPlugins("beforeUpdate", {
      mode,
      cancelable: true
    }) === false) {
      return;
    }
    const newControllers = this.buildOrUpdateControllers();
    this.notifyPlugins("beforeElementsUpdate");
    let minPadding = 0;
    for (let i = 0, ilen = this.data.datasets.length; i < ilen; i++) {
      const { controller } = this.getDatasetMeta(i);
      const reset = !animsDisabled && newControllers.indexOf(controller) === -1;
      controller.buildOrUpdateElements(reset);
      minPadding = Math.max(+controller.getMaxOverflow(), minPadding);
    }
    minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;
    this._updateLayout(minPadding);
    if (!animsDisabled) {
      each(newControllers, (controller) => {
        controller.reset();
      });
    }
    this._updateDatasets(mode);
    this.notifyPlugins("afterUpdate", {
      mode
    });
    this._layers.sort(compare2Level("z", "_idx"));
    const { _active, _lastEvent } = this;
    if (_lastEvent) {
      this._eventHandler(_lastEvent, true);
    } else if (_active.length) {
      this._updateHoverStyles(_active, _active, true);
    }
    this.render();
  }
  _updateScales() {
    each(this.scales, (scale) => {
      layouts.removeBox(this, scale);
    });
    this.ensureScalesHaveIDs();
    this.buildOrUpdateScales();
  }
  _checkEventBindings() {
    const options = this.options;
    const existingEvents = new Set(Object.keys(this._listeners));
    const newEvents = new Set(options.events);
    if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {
      this.unbindEvents();
      this.bindEvents();
    }
  }
  _updateHiddenIndices() {
    const { _hiddenIndices } = this;
    const changes = this._getUniformDataChanges() || [];
    for (const { method, start, count } of changes) {
      const move = method === "_removeElements" ? -count : count;
      moveNumericKeys(_hiddenIndices, start, move);
    }
  }
  _getUniformDataChanges() {
    const _dataChanges = this._dataChanges;
    if (!_dataChanges || !_dataChanges.length) {
      return;
    }
    this._dataChanges = [];
    const datasetCount = this.data.datasets.length;
    const makeSet = (idx) => new Set(_dataChanges.filter((c) => c[0] === idx).map((c, i) => i + "," + c.splice(1).join(",")));
    const changeSet = makeSet(0);
    for (let i = 1; i < datasetCount; i++) {
      if (!setsEqual(changeSet, makeSet(i))) {
        return;
      }
    }
    return Array.from(changeSet).map((c) => c.split(",")).map((a) => ({
      method: a[1],
      start: +a[2],
      count: +a[3]
    }));
  }
  _updateLayout(minPadding) {
    if (this.notifyPlugins("beforeLayout", {
      cancelable: true
    }) === false) {
      return;
    }
    layouts.update(this, this.width, this.height, minPadding);
    const area = this.chartArea;
    const noArea = area.width <= 0 || area.height <= 0;
    this._layers = [];
    each(this.boxes, (box) => {
      if (noArea && box.position === "chartArea") {
        return;
      }
      if (box.configure) {
        box.configure();
      }
      this._layers.push(...box._layers());
    }, this);
    this._layers.forEach((item, index) => {
      item._idx = index;
    });
    this.notifyPlugins("afterLayout");
  }
  _updateDatasets(mode) {
    if (this.notifyPlugins("beforeDatasetsUpdate", {
      mode,
      cancelable: true
    }) === false) {
      return;
    }
    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {
      this.getDatasetMeta(i).controller.configure();
    }
    for (let i1 = 0, ilen1 = this.data.datasets.length; i1 < ilen1; ++i1) {
      this._updateDataset(i1, isFunction(mode) ? mode({
        datasetIndex: i1
      }) : mode);
    }
    this.notifyPlugins("afterDatasetsUpdate", {
      mode
    });
  }
  _updateDataset(index, mode) {
    const meta = this.getDatasetMeta(index);
    const args = {
      meta,
      index,
      mode,
      cancelable: true
    };
    if (this.notifyPlugins("beforeDatasetUpdate", args) === false) {
      return;
    }
    meta.controller._update(mode);
    args.cancelable = false;
    this.notifyPlugins("afterDatasetUpdate", args);
  }
  render() {
    if (this.notifyPlugins("beforeRender", {
      cancelable: true
    }) === false) {
      return;
    }
    if (animator.has(this)) {
      if (this.attached && !animator.running(this)) {
        animator.start(this);
      }
    } else {
      this.draw();
      onAnimationsComplete({
        chart: this
      });
    }
  }
  draw() {
    let i;
    if (this._resizeBeforeDraw) {
      const { width, height } = this._resizeBeforeDraw;
      this._resize(width, height);
      this._resizeBeforeDraw = null;
    }
    this.clear();
    if (this.width <= 0 || this.height <= 0) {
      return;
    }
    if (this.notifyPlugins("beforeDraw", {
      cancelable: true
    }) === false) {
      return;
    }
    const layers = this._layers;
    for (i = 0; i < layers.length && layers[i].z <= 0; ++i) {
      layers[i].draw(this.chartArea);
    }
    this._drawDatasets();
    for (; i < layers.length; ++i) {
      layers[i].draw(this.chartArea);
    }
    this.notifyPlugins("afterDraw");
  }
  _getSortedDatasetMetas(filterVisible) {
    const metasets = this._sortedMetasets;
    const result = [];
    let i, ilen;
    for (i = 0, ilen = metasets.length; i < ilen; ++i) {
      const meta = metasets[i];
      if (!filterVisible || meta.visible) {
        result.push(meta);
      }
    }
    return result;
  }
  getSortedVisibleDatasetMetas() {
    return this._getSortedDatasetMetas(true);
  }
  _drawDatasets() {
    if (this.notifyPlugins("beforeDatasetsDraw", {
      cancelable: true
    }) === false) {
      return;
    }
    const metasets = this.getSortedVisibleDatasetMetas();
    for (let i = metasets.length - 1; i >= 0; --i) {
      this._drawDataset(metasets[i]);
    }
    this.notifyPlugins("afterDatasetsDraw");
  }
  _drawDataset(meta) {
    const ctx = this.ctx;
    const clip = meta._clip;
    const useClip = !clip.disabled;
    const area = getDatasetArea(meta) || this.chartArea;
    const args = {
      meta,
      index: meta.index,
      cancelable: true
    };
    if (this.notifyPlugins("beforeDatasetDraw", args) === false) {
      return;
    }
    if (useClip) {
      clipArea(ctx, {
        left: clip.left === false ? 0 : area.left - clip.left,
        right: clip.right === false ? this.width : area.right + clip.right,
        top: clip.top === false ? 0 : area.top - clip.top,
        bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom
      });
    }
    meta.controller.draw();
    if (useClip) {
      unclipArea(ctx);
    }
    args.cancelable = false;
    this.notifyPlugins("afterDatasetDraw", args);
  }
  isPointInArea(point) {
    return _isPointInArea(point, this.chartArea, this._minPadding);
  }
  getElementsAtEventForMode(e, mode, options, useFinalPosition) {
    const method = Interaction.modes[mode];
    if (typeof method === "function") {
      return method(this, e, options, useFinalPosition);
    }
    return [];
  }
  getDatasetMeta(datasetIndex) {
    const dataset = this.data.datasets[datasetIndex];
    const metasets = this._metasets;
    let meta = metasets.filter((x) => x && x._dataset === dataset).pop();
    if (!meta) {
      meta = {
        type: null,
        data: [],
        dataset: null,
        controller: null,
        hidden: null,
        xAxisID: null,
        yAxisID: null,
        order: dataset && dataset.order || 0,
        index: datasetIndex,
        _dataset: dataset,
        _parsed: [],
        _sorted: false
      };
      metasets.push(meta);
    }
    return meta;
  }
  getContext() {
    return this.$context || (this.$context = createContext(null, {
      chart: this,
      type: "chart"
    }));
  }
  getVisibleDatasetCount() {
    return this.getSortedVisibleDatasetMetas().length;
  }
  isDatasetVisible(datasetIndex) {
    const dataset = this.data.datasets[datasetIndex];
    if (!dataset) {
      return false;
    }
    const meta = this.getDatasetMeta(datasetIndex);
    return typeof meta.hidden === "boolean" ? !meta.hidden : !dataset.hidden;
  }
  setDatasetVisibility(datasetIndex, visible) {
    const meta = this.getDatasetMeta(datasetIndex);
    meta.hidden = !visible;
  }
  toggleDataVisibility(index) {
    this._hiddenIndices[index] = !this._hiddenIndices[index];
  }
  getDataVisibility(index) {
    return !this._hiddenIndices[index];
  }
  _updateVisibility(datasetIndex, dataIndex, visible) {
    const mode = visible ? "show" : "hide";
    const meta = this.getDatasetMeta(datasetIndex);
    const anims = meta.controller._resolveAnimations(void 0, mode);
    if (defined(dataIndex)) {
      meta.data[dataIndex].hidden = !visible;
      this.update();
    } else {
      this.setDatasetVisibility(datasetIndex, visible);
      anims.update(meta, {
        visible
      });
      this.update((ctx) => ctx.datasetIndex === datasetIndex ? mode : void 0);
    }
  }
  hide(datasetIndex, dataIndex) {
    this._updateVisibility(datasetIndex, dataIndex, false);
  }
  show(datasetIndex, dataIndex) {
    this._updateVisibility(datasetIndex, dataIndex, true);
  }
  _destroyDatasetMeta(datasetIndex) {
    const meta = this._metasets[datasetIndex];
    if (meta && meta.controller) {
      meta.controller._destroy();
    }
    delete this._metasets[datasetIndex];
  }
  _stop() {
    let i, ilen;
    this.stop();
    animator.remove(this);
    for (i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {
      this._destroyDatasetMeta(i);
    }
  }
  destroy() {
    this.notifyPlugins("beforeDestroy");
    const { canvas, ctx } = this;
    this._stop();
    this.config.clearCache();
    if (canvas) {
      this.unbindEvents();
      clearCanvas(canvas, ctx);
      this.platform.releaseContext(ctx);
      this.canvas = null;
      this.ctx = null;
    }
    delete instances[this.id];
    this.notifyPlugins("afterDestroy");
  }
  toBase64Image(...args) {
    return this.canvas.toDataURL(...args);
  }
  bindEvents() {
    this.bindUserEvents();
    if (this.options.responsive) {
      this.bindResponsiveEvents();
    } else {
      this.attached = true;
    }
  }
  bindUserEvents() {
    const listeners = this._listeners;
    const platform = this.platform;
    const _add = (type, listener2) => {
      platform.addEventListener(this, type, listener2);
      listeners[type] = listener2;
    };
    const listener = (e, x, y) => {
      e.offsetX = x;
      e.offsetY = y;
      this._eventHandler(e);
    };
    each(this.options.events, (type) => _add(type, listener));
  }
  bindResponsiveEvents() {
    if (!this._responsiveListeners) {
      this._responsiveListeners = {};
    }
    const listeners = this._responsiveListeners;
    const platform = this.platform;
    const _add = (type, listener2) => {
      platform.addEventListener(this, type, listener2);
      listeners[type] = listener2;
    };
    const _remove = (type, listener2) => {
      if (listeners[type]) {
        platform.removeEventListener(this, type, listener2);
        delete listeners[type];
      }
    };
    const listener = (width, height) => {
      if (this.canvas) {
        this.resize(width, height);
      }
    };
    let detached;
    const attached = () => {
      _remove("attach", attached);
      this.attached = true;
      this.resize();
      _add("resize", listener);
      _add("detach", detached);
    };
    detached = () => {
      this.attached = false;
      _remove("resize", listener);
      this._stop();
      this._resize(0, 0);
      _add("attach", attached);
    };
    if (platform.isAttached(this.canvas)) {
      attached();
    } else {
      detached();
    }
  }
  unbindEvents() {
    each(this._listeners, (listener, type) => {
      this.platform.removeEventListener(this, type, listener);
    });
    this._listeners = {};
    each(this._responsiveListeners, (listener, type) => {
      this.platform.removeEventListener(this, type, listener);
    });
    this._responsiveListeners = void 0;
  }
  updateHoverStyle(items, mode, enabled) {
    const prefix = enabled ? "set" : "remove";
    let meta, item, i, ilen;
    if (mode === "dataset") {
      meta = this.getDatasetMeta(items[0].datasetIndex);
      meta.controller["_" + prefix + "DatasetHoverStyle"]();
    }
    for (i = 0, ilen = items.length; i < ilen; ++i) {
      item = items[i];
      const controller = item && this.getDatasetMeta(item.datasetIndex).controller;
      if (controller) {
        controller[prefix + "HoverStyle"](item.element, item.datasetIndex, item.index);
      }
    }
  }
  getActiveElements() {
    return this._active || [];
  }
  setActiveElements(activeElements) {
    const lastActive = this._active || [];
    const active = activeElements.map(({ datasetIndex, index }) => {
      const meta = this.getDatasetMeta(datasetIndex);
      if (!meta) {
        throw new Error("No dataset found at index " + datasetIndex);
      }
      return {
        datasetIndex,
        element: meta.data[index],
        index
      };
    });
    const changed = !_elementsEqual(active, lastActive);
    if (changed) {
      this._active = active;
      this._lastEvent = null;
      this._updateHoverStyles(active, lastActive);
    }
  }
  notifyPlugins(hook, args, filter) {
    return this._plugins.notify(this, hook, args, filter);
  }
  isPluginEnabled(pluginId) {
    return this._plugins._cache.filter((p) => p.plugin.id === pluginId).length === 1;
  }
  _updateHoverStyles(active, lastActive, replay) {
    const hoverOptions = this.options.hover;
    const diff = (a, b) => a.filter((x) => !b.some((y) => x.datasetIndex === y.datasetIndex && x.index === y.index));
    const deactivated = diff(lastActive, active);
    const activated = replay ? active : diff(active, lastActive);
    if (deactivated.length) {
      this.updateHoverStyle(deactivated, hoverOptions.mode, false);
    }
    if (activated.length && hoverOptions.mode) {
      this.updateHoverStyle(activated, hoverOptions.mode, true);
    }
  }
  _eventHandler(e, replay) {
    const args = {
      event: e,
      replay,
      cancelable: true,
      inChartArea: this.isPointInArea(e)
    };
    const eventFilter = (plugin) => (plugin.options.events || this.options.events).includes(e.native.type);
    if (this.notifyPlugins("beforeEvent", args, eventFilter) === false) {
      return;
    }
    const changed = this._handleEvent(e, replay, args.inChartArea);
    args.cancelable = false;
    this.notifyPlugins("afterEvent", args, eventFilter);
    if (changed || args.changed) {
      this.render();
    }
    return this;
  }
  _handleEvent(e, replay, inChartArea) {
    const { _active: lastActive = [], options } = this;
    const useFinalPosition = replay;
    const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);
    const isClick = _isClickEvent(e);
    const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);
    if (inChartArea) {
      this._lastEvent = null;
      callback(options.onHover, [
        e,
        active,
        this
      ], this);
      if (isClick) {
        callback(options.onClick, [
          e,
          active,
          this
        ], this);
      }
    }
    const changed = !_elementsEqual(active, lastActive);
    if (changed || replay) {
      this._active = active;
      this._updateHoverStyles(active, lastActive, replay);
    }
    this._lastEvent = lastEvent;
    return changed;
  }
  _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {
    if (e.type === "mouseout") {
      return [];
    }
    if (!inChartArea) {
      return lastActive;
    }
    const hoverOptions = this.options.hover;
    return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);
  }
}
__publicField(Chart$1, "defaults", defaults);
__publicField(Chart$1, "instances", instances);
__publicField(Chart$1, "overrides", overrides);
__publicField(Chart$1, "registry", registry);
__publicField(Chart$1, "version", version);
__publicField(Chart$1, "getChart", getChart);
function invalidatePlugins() {
  return each(Chart$1.instances, (chart) => chart._plugins.invalidate());
}
function clipArc(ctx, element, endAngle) {
  const { startAngle, pixelMargin, x, y, outerRadius, innerRadius } = element;
  let angleMargin = pixelMargin / outerRadius;
  ctx.beginPath();
  ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);
  if (innerRadius > pixelMargin) {
    angleMargin = pixelMargin / innerRadius;
    ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);
  } else {
    ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);
  }
  ctx.closePath();
  ctx.clip();
}
function toRadiusCorners(value) {
  return _readValueToProps(value, [
    "outerStart",
    "outerEnd",
    "innerStart",
    "innerEnd"
  ]);
}
function parseBorderRadius$1(arc, innerRadius, outerRadius, angleDelta) {
  const o = toRadiusCorners(arc.options.borderRadius);
  const halfThickness = (outerRadius - innerRadius) / 2;
  const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);
  const computeOuterLimit = (val) => {
    const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;
    return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));
  };
  return {
    outerStart: computeOuterLimit(o.outerStart),
    outerEnd: computeOuterLimit(o.outerEnd),
    innerStart: _limitValue(o.innerStart, 0, innerLimit),
    innerEnd: _limitValue(o.innerEnd, 0, innerLimit)
  };
}
function rThetaToXY(r, theta, x, y) {
  return {
    x: x + r * Math.cos(theta),
    y: y + r * Math.sin(theta)
  };
}
function pathArc(ctx, element, offset, spacing, end, circular) {
  const { x, y, startAngle: start, pixelMargin, innerRadius: innerR } = element;
  const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);
  const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;
  let spacingOffset = 0;
  const alpha2 = end - start;
  if (spacing) {
    const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;
    const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;
    const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;
    const adjustedAngle = avNogSpacingRadius !== 0 ? alpha2 * avNogSpacingRadius / (avNogSpacingRadius + spacing) : alpha2;
    spacingOffset = (alpha2 - adjustedAngle) / 2;
  }
  const beta = Math.max(1e-3, alpha2 * outerRadius - offset / PI) / outerRadius;
  const angleOffset = (alpha2 - beta) / 2;
  const startAngle = start + angleOffset + spacingOffset;
  const endAngle = end - angleOffset - spacingOffset;
  const { outerStart, outerEnd, innerStart, innerEnd } = parseBorderRadius$1(element, innerRadius, outerRadius, endAngle - startAngle);
  const outerStartAdjustedRadius = outerRadius - outerStart;
  const outerEndAdjustedRadius = outerRadius - outerEnd;
  const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;
  const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;
  const innerStartAdjustedRadius = innerRadius + innerStart;
  const innerEndAdjustedRadius = innerRadius + innerEnd;
  const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;
  const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;
  ctx.beginPath();
  if (circular) {
    const outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;
    ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);
    ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);
    if (outerEnd > 0) {
      const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);
      ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);
    }
    const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);
    ctx.lineTo(p4.x, p4.y);
    if (innerEnd > 0) {
      const pCenter1 = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);
      ctx.arc(pCenter1.x, pCenter1.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);
    }
    const innerMidAdjustedAngle = (endAngle - innerEnd / innerRadius + (startAngle + innerStart / innerRadius)) / 2;
    ctx.arc(x, y, innerRadius, endAngle - innerEnd / innerRadius, innerMidAdjustedAngle, true);
    ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + innerStart / innerRadius, true);
    if (innerStart > 0) {
      const pCenter2 = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);
      ctx.arc(pCenter2.x, pCenter2.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);
    }
    const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);
    ctx.lineTo(p8.x, p8.y);
    if (outerStart > 0) {
      const pCenter3 = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);
      ctx.arc(pCenter3.x, pCenter3.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);
    }
  } else {
    ctx.moveTo(x, y);
    const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;
    const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;
    ctx.lineTo(outerStartX, outerStartY);
    const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;
    const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;
    ctx.lineTo(outerEndX, outerEndY);
  }
  ctx.closePath();
}
function drawArc(ctx, element, offset, spacing, circular) {
  const { fullCircles, startAngle, circumference } = element;
  let endAngle = element.endAngle;
  if (fullCircles) {
    pathArc(ctx, element, offset, spacing, endAngle, circular);
    for (let i = 0; i < fullCircles; ++i) {
      ctx.fill();
    }
    if (!isNaN(circumference)) {
      endAngle = startAngle + (circumference % TAU || TAU);
    }
  }
  pathArc(ctx, element, offset, spacing, endAngle, circular);
  ctx.fill();
  return endAngle;
}
function drawBorder(ctx, element, offset, spacing, circular) {
  const { fullCircles, startAngle, circumference, options } = element;
  const { borderWidth, borderJoinStyle } = options;
  const inner = options.borderAlign === "inner";
  if (!borderWidth) {
    return;
  }
  if (inner) {
    ctx.lineWidth = borderWidth * 2;
    ctx.lineJoin = borderJoinStyle || "round";
  } else {
    ctx.lineWidth = borderWidth;
    ctx.lineJoin = borderJoinStyle || "bevel";
  }
  let endAngle = element.endAngle;
  if (fullCircles) {
    pathArc(ctx, element, offset, spacing, endAngle, circular);
    for (let i = 0; i < fullCircles; ++i) {
      ctx.stroke();
    }
    if (!isNaN(circumference)) {
      endAngle = startAngle + (circumference % TAU || TAU);
    }
  }
  if (inner) {
    clipArc(ctx, element, endAngle);
  }
  if (!fullCircles) {
    pathArc(ctx, element, offset, spacing, endAngle, circular);
    ctx.stroke();
  }
}
class ArcElement extends Element {
  constructor(cfg) {
    super();
    this.options = void 0;
    this.circumference = void 0;
    this.startAngle = void 0;
    this.endAngle = void 0;
    this.innerRadius = void 0;
    this.outerRadius = void 0;
    this.pixelMargin = 0;
    this.fullCircles = 0;
    if (cfg) {
      Object.assign(this, cfg);
    }
  }
  inRange(chartX, chartY, useFinalPosition) {
    const point = this.getProps([
      "x",
      "y"
    ], useFinalPosition);
    const { angle, distance } = getAngleFromPoint(point, {
      x: chartX,
      y: chartY
    });
    const { startAngle, endAngle, innerRadius, outerRadius, circumference } = this.getProps([
      "startAngle",
      "endAngle",
      "innerRadius",
      "outerRadius",
      "circumference"
    ], useFinalPosition);
    const rAdjust = this.options.spacing / 2;
    const _circumference = valueOrDefault(circumference, endAngle - startAngle);
    const betweenAngles = _circumference >= TAU || _angleBetween(angle, startAngle, endAngle);
    const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);
    return betweenAngles && withinRadius;
  }
  getCenterPoint(useFinalPosition) {
    const { x, y, startAngle, endAngle, innerRadius, outerRadius } = this.getProps([
      "x",
      "y",
      "startAngle",
      "endAngle",
      "innerRadius",
      "outerRadius",
      "circumference"
    ], useFinalPosition);
    const { offset, spacing } = this.options;
    const halfAngle = (startAngle + endAngle) / 2;
    const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;
    return {
      x: x + Math.cos(halfAngle) * halfRadius,
      y: y + Math.sin(halfAngle) * halfRadius
    };
  }
  tooltipPosition(useFinalPosition) {
    return this.getCenterPoint(useFinalPosition);
  }
  draw(ctx) {
    const { options, circumference } = this;
    const offset = (options.offset || 0) / 4;
    const spacing = (options.spacing || 0) / 2;
    const circular = options.circular;
    this.pixelMargin = options.borderAlign === "inner" ? 0.33 : 0;
    this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;
    if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {
      return;
    }
    ctx.save();
    const halfAngle = (this.startAngle + this.endAngle) / 2;
    ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);
    const fix = 1 - Math.sin(Math.min(PI, circumference || 0));
    const radiusOffset = offset * fix;
    ctx.fillStyle = options.backgroundColor;
    ctx.strokeStyle = options.borderColor;
    drawArc(ctx, this, radiusOffset, spacing, circular);
    drawBorder(ctx, this, radiusOffset, spacing, circular);
    ctx.restore();
  }
}
__publicField(ArcElement, "id", "arc");
__publicField(ArcElement, "defaults", {
  borderAlign: "center",
  borderColor: "#fff",
  borderJoinStyle: void 0,
  borderRadius: 0,
  borderWidth: 2,
  offset: 0,
  spacing: 0,
  angle: void 0,
  circular: true
});
__publicField(ArcElement, "defaultRoutes", {
  backgroundColor: "backgroundColor"
});
function getBarBounds(bar, useFinalPosition) {
  const { x, y, base, width, height } = bar.getProps([
    "x",
    "y",
    "base",
    "width",
    "height"
  ], useFinalPosition);
  let left, right, top, bottom, half;
  if (bar.horizontal) {
    half = height / 2;
    left = Math.min(x, base);
    right = Math.max(x, base);
    top = y - half;
    bottom = y + half;
  } else {
    half = width / 2;
    left = x - half;
    right = x + half;
    top = Math.min(y, base);
    bottom = Math.max(y, base);
  }
  return {
    left,
    top,
    right,
    bottom
  };
}
function skipOrLimit(skip2, value, min, max) {
  return skip2 ? 0 : _limitValue(value, min, max);
}
function parseBorderWidth(bar, maxW, maxH) {
  const value = bar.options.borderWidth;
  const skip2 = bar.borderSkipped;
  const o = toTRBL(value);
  return {
    t: skipOrLimit(skip2.top, o.top, 0, maxH),
    r: skipOrLimit(skip2.right, o.right, 0, maxW),
    b: skipOrLimit(skip2.bottom, o.bottom, 0, maxH),
    l: skipOrLimit(skip2.left, o.left, 0, maxW)
  };
}
function parseBorderRadius(bar, maxW, maxH) {
  const { enableBorderRadius } = bar.getProps([
    "enableBorderRadius"
  ]);
  const value = bar.options.borderRadius;
  const o = toTRBLCorners(value);
  const maxR = Math.min(maxW, maxH);
  const skip2 = bar.borderSkipped;
  const enableBorder = enableBorderRadius || isObject(value);
  return {
    topLeft: skipOrLimit(!enableBorder || skip2.top || skip2.left, o.topLeft, 0, maxR),
    topRight: skipOrLimit(!enableBorder || skip2.top || skip2.right, o.topRight, 0, maxR),
    bottomLeft: skipOrLimit(!enableBorder || skip2.bottom || skip2.left, o.bottomLeft, 0, maxR),
    bottomRight: skipOrLimit(!enableBorder || skip2.bottom || skip2.right, o.bottomRight, 0, maxR)
  };
}
function boundingRects(bar) {
  const bounds = getBarBounds(bar);
  const width = bounds.right - bounds.left;
  const height = bounds.bottom - bounds.top;
  const border = parseBorderWidth(bar, width / 2, height / 2);
  const radius = parseBorderRadius(bar, width / 2, height / 2);
  return {
    outer: {
      x: bounds.left,
      y: bounds.top,
      w: width,
      h: height,
      radius
    },
    inner: {
      x: bounds.left + border.l,
      y: bounds.top + border.t,
      w: width - border.l - border.r,
      h: height - border.t - border.b,
      radius: {
        topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),
        topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),
        bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),
        bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r))
      }
    }
  };
}
function inRange(bar, x, y, useFinalPosition) {
  const skipX = x === null;
  const skipY = y === null;
  const skipBoth = skipX && skipY;
  const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);
  return bounds && (skipX || _isBetween(x, bounds.left, bounds.right)) && (skipY || _isBetween(y, bounds.top, bounds.bottom));
}
function hasRadius(radius) {
  return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;
}
function addNormalRectPath(ctx, rect) {
  ctx.rect(rect.x, rect.y, rect.w, rect.h);
}
function inflateRect(rect, amount, refRect = {}) {
  const x = rect.x !== refRect.x ? -amount : 0;
  const y = rect.y !== refRect.y ? -amount : 0;
  const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;
  const h3 = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;
  return {
    x: rect.x + x,
    y: rect.y + y,
    w: rect.w + w,
    h: rect.h + h3,
    radius: rect.radius
  };
}
class BarElement extends Element {
  constructor(cfg) {
    super();
    this.options = void 0;
    this.horizontal = void 0;
    this.base = void 0;
    this.width = void 0;
    this.height = void 0;
    this.inflateAmount = void 0;
    if (cfg) {
      Object.assign(this, cfg);
    }
  }
  draw(ctx) {
    const { inflateAmount, options: { borderColor, backgroundColor } } = this;
    const { inner, outer } = boundingRects(this);
    const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;
    ctx.save();
    if (outer.w !== inner.w || outer.h !== inner.h) {
      ctx.beginPath();
      addRectPath(ctx, inflateRect(outer, inflateAmount, inner));
      ctx.clip();
      addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));
      ctx.fillStyle = borderColor;
      ctx.fill("evenodd");
    }
    ctx.beginPath();
    addRectPath(ctx, inflateRect(inner, inflateAmount));
    ctx.fillStyle = backgroundColor;
    ctx.fill();
    ctx.restore();
  }
  inRange(mouseX, mouseY, useFinalPosition) {
    return inRange(this, mouseX, mouseY, useFinalPosition);
  }
  inXRange(mouseX, useFinalPosition) {
    return inRange(this, mouseX, null, useFinalPosition);
  }
  inYRange(mouseY, useFinalPosition) {
    return inRange(this, null, mouseY, useFinalPosition);
  }
  getCenterPoint(useFinalPosition) {
    const { x, y, base, horizontal } = this.getProps([
      "x",
      "y",
      "base",
      "horizontal"
    ], useFinalPosition);
    return {
      x: horizontal ? (x + base) / 2 : x,
      y: horizontal ? y : (y + base) / 2
    };
  }
  getRange(axis) {
    return axis === "x" ? this.width / 2 : this.height / 2;
  }
}
__publicField(BarElement, "id", "bar");
__publicField(BarElement, "defaults", {
  borderSkipped: "start",
  borderWidth: 0,
  borderRadius: 0,
  inflateAmount: "auto",
  pointStyle: void 0
});
__publicField(BarElement, "defaultRoutes", {
  backgroundColor: "backgroundColor",
  borderColor: "borderColor"
});
const getBoxSize = (labelOpts, fontSize) => {
  let { boxHeight = fontSize, boxWidth = fontSize } = labelOpts;
  if (labelOpts.usePointStyle) {
    boxHeight = Math.min(boxHeight, fontSize);
    boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);
  }
  return {
    boxWidth,
    boxHeight,
    itemHeight: Math.max(fontSize, boxHeight)
  };
};
const itemsEqual = (a, b) => a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;
class Legend extends Element {
  constructor(config) {
    super();
    this._added = false;
    this.legendHitBoxes = [];
    this._hoveredItem = null;
    this.doughnutMode = false;
    this.chart = config.chart;
    this.options = config.options;
    this.ctx = config.ctx;
    this.legendItems = void 0;
    this.columnSizes = void 0;
    this.lineWidths = void 0;
    this.maxHeight = void 0;
    this.maxWidth = void 0;
    this.top = void 0;
    this.bottom = void 0;
    this.left = void 0;
    this.right = void 0;
    this.height = void 0;
    this.width = void 0;
    this._margins = void 0;
    this.position = void 0;
    this.weight = void 0;
    this.fullSize = void 0;
  }
  update(maxWidth, maxHeight, margins) {
    this.maxWidth = maxWidth;
    this.maxHeight = maxHeight;
    this._margins = margins;
    this.setDimensions();
    this.buildLabels();
    this.fit();
  }
  setDimensions() {
    if (this.isHorizontal()) {
      this.width = this.maxWidth;
      this.left = this._margins.left;
      this.right = this.width;
    } else {
      this.height = this.maxHeight;
      this.top = this._margins.top;
      this.bottom = this.height;
    }
  }
  buildLabels() {
    const labelOpts = this.options.labels || {};
    let legendItems = callback(labelOpts.generateLabels, [
      this.chart
    ], this) || [];
    if (labelOpts.filter) {
      legendItems = legendItems.filter((item) => labelOpts.filter(item, this.chart.data));
    }
    if (labelOpts.sort) {
      legendItems = legendItems.sort((a, b) => labelOpts.sort(a, b, this.chart.data));
    }
    if (this.options.reverse) {
      legendItems.reverse();
    }
    this.legendItems = legendItems;
  }
  fit() {
    const { options, ctx } = this;
    if (!options.display) {
      this.width = this.height = 0;
      return;
    }
    const labelOpts = options.labels;
    const labelFont = toFont(labelOpts.font);
    const fontSize = labelFont.size;
    const titleHeight = this._computeTitleHeight();
    const { boxWidth, itemHeight } = getBoxSize(labelOpts, fontSize);
    let width, height;
    ctx.font = labelFont.string;
    if (this.isHorizontal()) {
      width = this.maxWidth;
      height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;
    } else {
      height = this.maxHeight;
      width = this._fitCols(titleHeight, labelFont, boxWidth, itemHeight) + 10;
    }
    this.width = Math.min(width, options.maxWidth || this.maxWidth);
    this.height = Math.min(height, options.maxHeight || this.maxHeight);
  }
  _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {
    const { ctx, maxWidth, options: { labels: { padding } } } = this;
    const hitboxes = this.legendHitBoxes = [];
    const lineWidths = this.lineWidths = [
      0
    ];
    const lineHeight = itemHeight + padding;
    let totalHeight = titleHeight;
    ctx.textAlign = "left";
    ctx.textBaseline = "middle";
    let row = -1;
    let top = -lineHeight;
    this.legendItems.forEach((legendItem, i) => {
      const itemWidth = boxWidth + fontSize / 2 + ctx.measureText(legendItem.text).width;
      if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {
        totalHeight += lineHeight;
        lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;
        top += lineHeight;
        row++;
      }
      hitboxes[i] = {
        left: 0,
        top,
        row,
        width: itemWidth,
        height: itemHeight
      };
      lineWidths[lineWidths.length - 1] += itemWidth + padding;
    });
    return totalHeight;
  }
  _fitCols(titleHeight, labelFont, boxWidth, _itemHeight) {
    const { ctx, maxHeight, options: { labels: { padding } } } = this;
    const hitboxes = this.legendHitBoxes = [];
    const columnSizes = this.columnSizes = [];
    const heightLimit = maxHeight - titleHeight;
    let totalWidth = padding;
    let currentColWidth = 0;
    let currentColHeight = 0;
    let left = 0;
    let col = 0;
    this.legendItems.forEach((legendItem, i) => {
      const { itemWidth, itemHeight } = calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight);
      if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {
        totalWidth += currentColWidth + padding;
        columnSizes.push({
          width: currentColWidth,
          height: currentColHeight
        });
        left += currentColWidth + padding;
        col++;
        currentColWidth = currentColHeight = 0;
      }
      hitboxes[i] = {
        left,
        top: currentColHeight,
        col,
        width: itemWidth,
        height: itemHeight
      };
      currentColWidth = Math.max(currentColWidth, itemWidth);
      currentColHeight += itemHeight + padding;
    });
    totalWidth += currentColWidth;
    columnSizes.push({
      width: currentColWidth,
      height: currentColHeight
    });
    return totalWidth;
  }
  adjustHitBoxes() {
    if (!this.options.display) {
      return;
    }
    const titleHeight = this._computeTitleHeight();
    const { legendHitBoxes: hitboxes, options: { align, labels: { padding }, rtl } } = this;
    const rtlHelper = getRtlAdapter(rtl, this.left, this.width);
    if (this.isHorizontal()) {
      let row = 0;
      let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);
      for (const hitbox of hitboxes) {
        if (row !== hitbox.row) {
          row = hitbox.row;
          left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);
        }
        hitbox.top += this.top + titleHeight + padding;
        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);
        left += hitbox.width + padding;
      }
    } else {
      let col = 0;
      let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);
      for (const hitbox1 of hitboxes) {
        if (hitbox1.col !== col) {
          col = hitbox1.col;
          top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);
        }
        hitbox1.top = top;
        hitbox1.left += this.left + padding;
        hitbox1.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox1.left), hitbox1.width);
        top += hitbox1.height + padding;
      }
    }
  }
  isHorizontal() {
    return this.options.position === "top" || this.options.position === "bottom";
  }
  draw() {
    if (this.options.display) {
      const ctx = this.ctx;
      clipArea(ctx, this);
      this._draw();
      unclipArea(ctx);
    }
  }
  _draw() {
    const { options: opts, columnSizes, lineWidths, ctx } = this;
    const { align, labels: labelOpts } = opts;
    const defaultColor = defaults.color;
    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);
    const labelFont = toFont(labelOpts.font);
    const { padding } = labelOpts;
    const fontSize = labelFont.size;
    const halfFontSize = fontSize / 2;
    let cursor;
    this.drawTitle();
    ctx.textAlign = rtlHelper.textAlign("left");
    ctx.textBaseline = "middle";
    ctx.lineWidth = 0.5;
    ctx.font = labelFont.string;
    const { boxWidth, boxHeight, itemHeight } = getBoxSize(labelOpts, fontSize);
    const drawLegendBox = function(x, y, legendItem) {
      if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {
        return;
      }
      ctx.save();
      const lineWidth = valueOrDefault(legendItem.lineWidth, 1);
      ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);
      ctx.lineCap = valueOrDefault(legendItem.lineCap, "butt");
      ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);
      ctx.lineJoin = valueOrDefault(legendItem.lineJoin, "miter");
      ctx.lineWidth = lineWidth;
      ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);
      ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));
      if (labelOpts.usePointStyle) {
        const drawOptions = {
          radius: boxHeight * Math.SQRT2 / 2,
          pointStyle: legendItem.pointStyle,
          rotation: legendItem.rotation,
          borderWidth: lineWidth
        };
        const centerX = rtlHelper.xPlus(x, boxWidth / 2);
        const centerY = y + halfFontSize;
        drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);
      } else {
        const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);
        const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);
        const borderRadius = toTRBLCorners(legendItem.borderRadius);
        ctx.beginPath();
        if (Object.values(borderRadius).some((v) => v !== 0)) {
          addRoundedRectPath(ctx, {
            x: xBoxLeft,
            y: yBoxTop,
            w: boxWidth,
            h: boxHeight,
            radius: borderRadius
          });
        } else {
          ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);
        }
        ctx.fill();
        if (lineWidth !== 0) {
          ctx.stroke();
        }
      }
      ctx.restore();
    };
    const fillText = function(x, y, legendItem) {
      renderText(ctx, legendItem.text, x, y + itemHeight / 2, labelFont, {
        strikethrough: legendItem.hidden,
        textAlign: rtlHelper.textAlign(legendItem.textAlign)
      });
    };
    const isHorizontal = this.isHorizontal();
    const titleHeight = this._computeTitleHeight();
    if (isHorizontal) {
      cursor = {
        x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),
        y: this.top + padding + titleHeight,
        line: 0
      };
    } else {
      cursor = {
        x: this.left + padding,
        y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),
        line: 0
      };
    }
    overrideTextDirection(this.ctx, opts.textDirection);
    const lineHeight = itemHeight + padding;
    this.legendItems.forEach((legendItem, i) => {
      ctx.strokeStyle = legendItem.fontColor;
      ctx.fillStyle = legendItem.fontColor;
      const textWidth = ctx.measureText(legendItem.text).width;
      const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));
      const width = boxWidth + halfFontSize + textWidth;
      let x = cursor.x;
      let y = cursor.y;
      rtlHelper.setWidth(this.width);
      if (isHorizontal) {
        if (i > 0 && x + width + padding > this.right) {
          y = cursor.y += lineHeight;
          cursor.line++;
          x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);
        }
      } else if (i > 0 && y + lineHeight > this.bottom) {
        x = cursor.x = x + columnSizes[cursor.line].width + padding;
        cursor.line++;
        y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);
      }
      const realX = rtlHelper.x(x);
      drawLegendBox(realX, y, legendItem);
      x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);
      fillText(rtlHelper.x(x), y, legendItem);
      if (isHorizontal) {
        cursor.x += width + padding;
      } else if (typeof legendItem.text !== "string") {
        const fontLineHeight = labelFont.lineHeight;
        cursor.y += calculateLegendItemHeight(legendItem, fontLineHeight);
      } else {
        cursor.y += lineHeight;
      }
    });
    restoreTextDirection(this.ctx, opts.textDirection);
  }
  drawTitle() {
    const opts = this.options;
    const titleOpts = opts.title;
    const titleFont = toFont(titleOpts.font);
    const titlePadding = toPadding(titleOpts.padding);
    if (!titleOpts.display) {
      return;
    }
    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);
    const ctx = this.ctx;
    const position = titleOpts.position;
    const halfFontSize = titleFont.size / 2;
    const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;
    let y;
    let left = this.left;
    let maxWidth = this.width;
    if (this.isHorizontal()) {
      maxWidth = Math.max(...this.lineWidths);
      y = this.top + topPaddingPlusHalfFontSize;
      left = _alignStartEnd(opts.align, left, this.right - maxWidth);
    } else {
      const maxHeight = this.columnSizes.reduce((acc, size) => Math.max(acc, size.height), 0);
      y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());
    }
    const x = _alignStartEnd(position, left, left + maxWidth);
    ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));
    ctx.textBaseline = "middle";
    ctx.strokeStyle = titleOpts.color;
    ctx.fillStyle = titleOpts.color;
    ctx.font = titleFont.string;
    renderText(ctx, titleOpts.text, x, y, titleFont);
  }
  _computeTitleHeight() {
    const titleOpts = this.options.title;
    const titleFont = toFont(titleOpts.font);
    const titlePadding = toPadding(titleOpts.padding);
    return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;
  }
  _getLegendItemAt(x, y) {
    let i, hitBox, lh;
    if (_isBetween(x, this.left, this.right) && _isBetween(y, this.top, this.bottom)) {
      lh = this.legendHitBoxes;
      for (i = 0; i < lh.length; ++i) {
        hitBox = lh[i];
        if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width) && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {
          return this.legendItems[i];
        }
      }
    }
    return null;
  }
  handleEvent(e) {
    const opts = this.options;
    if (!isListened(e.type, opts)) {
      return;
    }
    const hoveredItem = this._getLegendItemAt(e.x, e.y);
    if (e.type === "mousemove" || e.type === "mouseout") {
      const previous = this._hoveredItem;
      const sameItem = itemsEqual(previous, hoveredItem);
      if (previous && !sameItem) {
        callback(opts.onLeave, [
          e,
          previous,
          this
        ], this);
      }
      this._hoveredItem = hoveredItem;
      if (hoveredItem && !sameItem) {
        callback(opts.onHover, [
          e,
          hoveredItem,
          this
        ], this);
      }
    } else if (hoveredItem) {
      callback(opts.onClick, [
        e,
        hoveredItem,
        this
      ], this);
    }
  }
}
function calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight) {
  const itemWidth = calculateItemWidth(legendItem, boxWidth, labelFont, ctx);
  const itemHeight = calculateItemHeight(_itemHeight, legendItem, labelFont.lineHeight);
  return {
    itemWidth,
    itemHeight
  };
}
function calculateItemWidth(legendItem, boxWidth, labelFont, ctx) {
  let legendItemText = legendItem.text;
  if (legendItemText && typeof legendItemText !== "string") {
    legendItemText = legendItemText.reduce((a, b) => a.length > b.length ? a : b);
  }
  return boxWidth + labelFont.size / 2 + ctx.measureText(legendItemText).width;
}
function calculateItemHeight(_itemHeight, legendItem, fontLineHeight) {
  let itemHeight = _itemHeight;
  if (typeof legendItem.text !== "string") {
    itemHeight = calculateLegendItemHeight(legendItem, fontLineHeight);
  }
  return itemHeight;
}
function calculateLegendItemHeight(legendItem, fontLineHeight) {
  const labelHeight = legendItem.text ? legendItem.text.length + 0.5 : 0;
  return fontLineHeight * labelHeight;
}
function isListened(type, opts) {
  if ((type === "mousemove" || type === "mouseout") && (opts.onHover || opts.onLeave)) {
    return true;
  }
  if (opts.onClick && (type === "click" || type === "mouseup")) {
    return true;
  }
  return false;
}
var plugin_legend = {
  id: "legend",
  _element: Legend,
  start(chart, _args, options) {
    const legend = chart.legend = new Legend({
      ctx: chart.ctx,
      options,
      chart
    });
    layouts.configure(chart, legend, options);
    layouts.addBox(chart, legend);
  },
  stop(chart) {
    layouts.removeBox(chart, chart.legend);
    delete chart.legend;
  },
  beforeUpdate(chart, _args, options) {
    const legend = chart.legend;
    layouts.configure(chart, legend, options);
    legend.options = options;
  },
  afterUpdate(chart) {
    const legend = chart.legend;
    legend.buildLabels();
    legend.adjustHitBoxes();
  },
  afterEvent(chart, args) {
    if (!args.replay) {
      chart.legend.handleEvent(args.event);
    }
  },
  defaults: {
    display: true,
    position: "top",
    align: "center",
    fullSize: true,
    reverse: false,
    weight: 1e3,
    onClick(e, legendItem, legend) {
      const index = legendItem.datasetIndex;
      const ci = legend.chart;
      if (ci.isDatasetVisible(index)) {
        ci.hide(index);
        legendItem.hidden = true;
      } else {
        ci.show(index);
        legendItem.hidden = false;
      }
    },
    onHover: null,
    onLeave: null,
    labels: {
      color: (ctx) => ctx.chart.options.color,
      boxWidth: 40,
      padding: 10,
      generateLabels(chart) {
        const datasets = chart.data.datasets;
        const { labels: { usePointStyle, pointStyle, textAlign, color: color2, useBorderRadius, borderRadius } } = chart.legend.options;
        return chart._getSortedDatasetMetas().map((meta) => {
          const style = meta.controller.getStyle(usePointStyle ? 0 : void 0);
          const borderWidth = toPadding(style.borderWidth);
          return {
            text: datasets[meta.index].label,
            fillStyle: style.backgroundColor,
            fontColor: color2,
            hidden: !meta.visible,
            lineCap: style.borderCapStyle,
            lineDash: style.borderDash,
            lineDashOffset: style.borderDashOffset,
            lineJoin: style.borderJoinStyle,
            lineWidth: (borderWidth.width + borderWidth.height) / 4,
            strokeStyle: style.borderColor,
            pointStyle: pointStyle || style.pointStyle,
            rotation: style.rotation,
            textAlign: textAlign || style.textAlign,
            borderRadius: useBorderRadius && (borderRadius || style.borderRadius),
            datasetIndex: meta.index
          };
        }, this);
      }
    },
    title: {
      color: (ctx) => ctx.chart.options.color,
      display: false,
      position: "center",
      text: ""
    }
  },
  descriptors: {
    _scriptable: (name2) => !name2.startsWith("on"),
    labels: {
      _scriptable: (name2) => ![
        "generateLabels",
        "filter",
        "sort"
      ].includes(name2)
    }
  }
};
class Title extends Element {
  constructor(config) {
    super();
    this.chart = config.chart;
    this.options = config.options;
    this.ctx = config.ctx;
    this._padding = void 0;
    this.top = void 0;
    this.bottom = void 0;
    this.left = void 0;
    this.right = void 0;
    this.width = void 0;
    this.height = void 0;
    this.position = void 0;
    this.weight = void 0;
    this.fullSize = void 0;
  }
  update(maxWidth, maxHeight) {
    const opts = this.options;
    this.left = 0;
    this.top = 0;
    if (!opts.display) {
      this.width = this.height = this.right = this.bottom = 0;
      return;
    }
    this.width = this.right = maxWidth;
    this.height = this.bottom = maxHeight;
    const lineCount = isArray(opts.text) ? opts.text.length : 1;
    this._padding = toPadding(opts.padding);
    const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;
    if (this.isHorizontal()) {
      this.height = textSize;
    } else {
      this.width = textSize;
    }
  }
  isHorizontal() {
    const pos = this.options.position;
    return pos === "top" || pos === "bottom";
  }
  _drawArgs(offset) {
    const { top, left, bottom, right, options } = this;
    const align = options.align;
    let rotation = 0;
    let maxWidth, titleX, titleY;
    if (this.isHorizontal()) {
      titleX = _alignStartEnd(align, left, right);
      titleY = top + offset;
      maxWidth = right - left;
    } else {
      if (options.position === "left") {
        titleX = left + offset;
        titleY = _alignStartEnd(align, bottom, top);
        rotation = PI * -0.5;
      } else {
        titleX = right - offset;
        titleY = _alignStartEnd(align, top, bottom);
        rotation = PI * 0.5;
      }
      maxWidth = bottom - top;
    }
    return {
      titleX,
      titleY,
      maxWidth,
      rotation
    };
  }
  draw() {
    const ctx = this.ctx;
    const opts = this.options;
    if (!opts.display) {
      return;
    }
    const fontOpts = toFont(opts.font);
    const lineHeight = fontOpts.lineHeight;
    const offset = lineHeight / 2 + this._padding.top;
    const { titleX, titleY, maxWidth, rotation } = this._drawArgs(offset);
    renderText(ctx, opts.text, 0, 0, fontOpts, {
      color: opts.color,
      maxWidth,
      rotation,
      textAlign: _toLeftRightCenter(opts.align),
      textBaseline: "middle",
      translation: [
        titleX,
        titleY
      ]
    });
  }
}
function createTitle(chart, titleOpts) {
  const title = new Title({
    ctx: chart.ctx,
    options: titleOpts,
    chart
  });
  layouts.configure(chart, title, titleOpts);
  layouts.addBox(chart, title);
  chart.titleBlock = title;
}
var plugin_title = {
  id: "title",
  _element: Title,
  start(chart, _args, options) {
    createTitle(chart, options);
  },
  stop(chart) {
    const titleBlock = chart.titleBlock;
    layouts.removeBox(chart, titleBlock);
    delete chart.titleBlock;
  },
  beforeUpdate(chart, _args, options) {
    const title = chart.titleBlock;
    layouts.configure(chart, title, options);
    title.options = options;
  },
  defaults: {
    align: "center",
    display: false,
    font: {
      weight: "bold"
    },
    fullSize: true,
    padding: 10,
    position: "top",
    text: "",
    weight: 2e3
  },
  defaultRoutes: {
    color: "color"
  },
  descriptors: {
    _scriptable: true,
    _indexable: false
  }
};
const positioners = {
  average(items) {
    if (!items.length) {
      return false;
    }
    let i, len;
    let x = 0;
    let y = 0;
    let count = 0;
    for (i = 0, len = items.length; i < len; ++i) {
      const el = items[i].element;
      if (el && el.hasValue()) {
        const pos = el.tooltipPosition();
        x += pos.x;
        y += pos.y;
        ++count;
      }
    }
    return {
      x: x / count,
      y: y / count
    };
  },
  nearest(items, eventPosition) {
    if (!items.length) {
      return false;
    }
    let x = eventPosition.x;
    let y = eventPosition.y;
    let minDistance = Number.POSITIVE_INFINITY;
    let i, len, nearestElement;
    for (i = 0, len = items.length; i < len; ++i) {
      const el = items[i].element;
      if (el && el.hasValue()) {
        const center = el.getCenterPoint();
        const d = distanceBetweenPoints(eventPosition, center);
        if (d < minDistance) {
          minDistance = d;
          nearestElement = el;
        }
      }
    }
    if (nearestElement) {
      const tp = nearestElement.tooltipPosition();
      x = tp.x;
      y = tp.y;
    }
    return {
      x,
      y
    };
  }
};
function pushOrConcat(base, toPush) {
  if (toPush) {
    if (isArray(toPush)) {
      Array.prototype.push.apply(base, toPush);
    } else {
      base.push(toPush);
    }
  }
  return base;
}
function splitNewlines(str) {
  if ((typeof str === "string" || str instanceof String) && str.indexOf("\n") > -1) {
    return str.split("\n");
  }
  return str;
}
function createTooltipItem(chart, item) {
  const { element, datasetIndex, index } = item;
  const controller = chart.getDatasetMeta(datasetIndex).controller;
  const { label, value } = controller.getLabelAndValue(index);
  return {
    chart,
    label,
    parsed: controller.getParsed(index),
    raw: chart.data.datasets[datasetIndex].data[index],
    formattedValue: value,
    dataset: controller.getDataset(),
    dataIndex: index,
    datasetIndex,
    element
  };
}
function getTooltipSize(tooltip, options) {
  const ctx = tooltip.chart.ctx;
  const { body, footer, title } = tooltip;
  const { boxWidth, boxHeight } = options;
  const bodyFont = toFont(options.bodyFont);
  const titleFont = toFont(options.titleFont);
  const footerFont = toFont(options.footerFont);
  const titleLineCount = title.length;
  const footerLineCount = footer.length;
  const bodyLineItemCount = body.length;
  const padding = toPadding(options.padding);
  let height = padding.height;
  let width = 0;
  let combinedBodyLength = body.reduce((count, bodyItem) => count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);
  combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;
  if (titleLineCount) {
    height += titleLineCount * titleFont.lineHeight + (titleLineCount - 1) * options.titleSpacing + options.titleMarginBottom;
  }
  if (combinedBodyLength) {
    const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;
    height += bodyLineItemCount * bodyLineHeight + (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight + (combinedBodyLength - 1) * options.bodySpacing;
  }
  if (footerLineCount) {
    height += options.footerMarginTop + footerLineCount * footerFont.lineHeight + (footerLineCount - 1) * options.footerSpacing;
  }
  let widthPadding = 0;
  const maxLineWidth = function(line) {
    width = Math.max(width, ctx.measureText(line).width + widthPadding);
  };
  ctx.save();
  ctx.font = titleFont.string;
  each(tooltip.title, maxLineWidth);
  ctx.font = bodyFont.string;
  each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);
  widthPadding = options.displayColors ? boxWidth + 2 + options.boxPadding : 0;
  each(body, (bodyItem) => {
    each(bodyItem.before, maxLineWidth);
    each(bodyItem.lines, maxLineWidth);
    each(bodyItem.after, maxLineWidth);
  });
  widthPadding = 0;
  ctx.font = footerFont.string;
  each(tooltip.footer, maxLineWidth);
  ctx.restore();
  width += padding.width;
  return {
    width,
    height
  };
}
function determineYAlign(chart, size) {
  const { y, height } = size;
  if (y < height / 2) {
    return "top";
  } else if (y > chart.height - height / 2) {
    return "bottom";
  }
  return "center";
}
function doesNotFitWithAlign(xAlign, chart, options, size) {
  const { x, width } = size;
  const caret = options.caretSize + options.caretPadding;
  if (xAlign === "left" && x + width + caret > chart.width) {
    return true;
  }
  if (xAlign === "right" && x - width - caret < 0) {
    return true;
  }
}
function determineXAlign(chart, options, size, yAlign) {
  const { x, width } = size;
  const { width: chartWidth, chartArea: { left, right } } = chart;
  let xAlign = "center";
  if (yAlign === "center") {
    xAlign = x <= (left + right) / 2 ? "left" : "right";
  } else if (x <= width / 2) {
    xAlign = "left";
  } else if (x >= chartWidth - width / 2) {
    xAlign = "right";
  }
  if (doesNotFitWithAlign(xAlign, chart, options, size)) {
    xAlign = "center";
  }
  return xAlign;
}
function determineAlignment(chart, options, size) {
  const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);
  return {
    xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),
    yAlign
  };
}
function alignX(size, xAlign) {
  let { x, width } = size;
  if (xAlign === "right") {
    x -= width;
  } else if (xAlign === "center") {
    x -= width / 2;
  }
  return x;
}
function alignY(size, yAlign, paddingAndSize) {
  let { y, height } = size;
  if (yAlign === "top") {
    y += paddingAndSize;
  } else if (yAlign === "bottom") {
    y -= height + paddingAndSize;
  } else {
    y -= height / 2;
  }
  return y;
}
function getBackgroundPoint(options, size, alignment, chart) {
  const { caretSize, caretPadding, cornerRadius } = options;
  const { xAlign, yAlign } = alignment;
  const paddingAndSize = caretSize + caretPadding;
  const { topLeft, topRight, bottomLeft, bottomRight } = toTRBLCorners(cornerRadius);
  let x = alignX(size, xAlign);
  const y = alignY(size, yAlign, paddingAndSize);
  if (yAlign === "center") {
    if (xAlign === "left") {
      x += paddingAndSize;
    } else if (xAlign === "right") {
      x -= paddingAndSize;
    }
  } else if (xAlign === "left") {
    x -= Math.max(topLeft, bottomLeft) + caretSize;
  } else if (xAlign === "right") {
    x += Math.max(topRight, bottomRight) + caretSize;
  }
  return {
    x: _limitValue(x, 0, chart.width - size.width),
    y: _limitValue(y, 0, chart.height - size.height)
  };
}
function getAlignedX(tooltip, align, options) {
  const padding = toPadding(options.padding);
  return align === "center" ? tooltip.x + tooltip.width / 2 : align === "right" ? tooltip.x + tooltip.width - padding.right : tooltip.x + padding.left;
}
function getBeforeAfterBodyLines(callback2) {
  return pushOrConcat([], splitNewlines(callback2));
}
function createTooltipContext(parent, tooltip, tooltipItems) {
  return createContext(parent, {
    tooltip,
    tooltipItems,
    type: "tooltip"
  });
}
function overrideCallbacks(callbacks, context) {
  const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;
  return override ? callbacks.override(override) : callbacks;
}
const defaultCallbacks = {
  beforeTitle: noop,
  title(tooltipItems) {
    if (tooltipItems.length > 0) {
      const item = tooltipItems[0];
      const labels = item.chart.data.labels;
      const labelCount = labels ? labels.length : 0;
      if (this && this.options && this.options.mode === "dataset") {
        return item.dataset.label || "";
      } else if (item.label) {
        return item.label;
      } else if (labelCount > 0 && item.dataIndex < labelCount) {
        return labels[item.dataIndex];
      }
    }
    return "";
  },
  afterTitle: noop,
  beforeBody: noop,
  beforeLabel: noop,
  label(tooltipItem) {
    if (this && this.options && this.options.mode === "dataset") {
      return tooltipItem.label + ": " + tooltipItem.formattedValue || tooltipItem.formattedValue;
    }
    let label = tooltipItem.dataset.label || "";
    if (label) {
      label += ": ";
    }
    const value = tooltipItem.formattedValue;
    if (!isNullOrUndef(value)) {
      label += value;
    }
    return label;
  },
  labelColor(tooltipItem) {
    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);
    const options = meta.controller.getStyle(tooltipItem.dataIndex);
    return {
      borderColor: options.borderColor,
      backgroundColor: options.backgroundColor,
      borderWidth: options.borderWidth,
      borderDash: options.borderDash,
      borderDashOffset: options.borderDashOffset,
      borderRadius: 0
    };
  },
  labelTextColor() {
    return this.options.bodyColor;
  },
  labelPointStyle(tooltipItem) {
    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);
    const options = meta.controller.getStyle(tooltipItem.dataIndex);
    return {
      pointStyle: options.pointStyle,
      rotation: options.rotation
    };
  },
  afterLabel: noop,
  afterBody: noop,
  beforeFooter: noop,
  footer: noop,
  afterFooter: noop
};
function invokeCallbackWithFallback(callbacks, name2, ctx, arg) {
  const result = callbacks[name2].call(ctx, arg);
  if (typeof result === "undefined") {
    return defaultCallbacks[name2].call(ctx, arg);
  }
  return result;
}
class Tooltip extends Element {
  constructor(config) {
    super();
    this.opacity = 0;
    this._active = [];
    this._eventPosition = void 0;
    this._size = void 0;
    this._cachedAnimations = void 0;
    this._tooltipItems = [];
    this.$animations = void 0;
    this.$context = void 0;
    this.chart = config.chart;
    this.options = config.options;
    this.dataPoints = void 0;
    this.title = void 0;
    this.beforeBody = void 0;
    this.body = void 0;
    this.afterBody = void 0;
    this.footer = void 0;
    this.xAlign = void 0;
    this.yAlign = void 0;
    this.x = void 0;
    this.y = void 0;
    this.height = void 0;
    this.width = void 0;
    this.caretX = void 0;
    this.caretY = void 0;
    this.labelColors = void 0;
    this.labelPointStyles = void 0;
    this.labelTextColors = void 0;
  }
  initialize(options) {
    this.options = options;
    this._cachedAnimations = void 0;
    this.$context = void 0;
  }
  _resolveAnimations() {
    const cached = this._cachedAnimations;
    if (cached) {
      return cached;
    }
    const chart = this.chart;
    const options = this.options.setContext(this.getContext());
    const opts = options.enabled && chart.options.animation && options.animations;
    const animations = new Animations(this.chart, opts);
    if (opts._cacheable) {
      this._cachedAnimations = Object.freeze(animations);
    }
    return animations;
  }
  getContext() {
    return this.$context || (this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));
  }
  getTitle(context, options) {
    const { callbacks } = options;
    const beforeTitle = invokeCallbackWithFallback(callbacks, "beforeTitle", this, context);
    const title = invokeCallbackWithFallback(callbacks, "title", this, context);
    const afterTitle = invokeCallbackWithFallback(callbacks, "afterTitle", this, context);
    let lines = [];
    lines = pushOrConcat(lines, splitNewlines(beforeTitle));
    lines = pushOrConcat(lines, splitNewlines(title));
    lines = pushOrConcat(lines, splitNewlines(afterTitle));
    return lines;
  }
  getBeforeBody(tooltipItems, options) {
    return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, "beforeBody", this, tooltipItems));
  }
  getBody(tooltipItems, options) {
    const { callbacks } = options;
    const bodyItems = [];
    each(tooltipItems, (context) => {
      const bodyItem = {
        before: [],
        lines: [],
        after: []
      };
      const scoped = overrideCallbacks(callbacks, context);
      pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, "beforeLabel", this, context)));
      pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, "label", this, context));
      pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, "afterLabel", this, context)));
      bodyItems.push(bodyItem);
    });
    return bodyItems;
  }
  getAfterBody(tooltipItems, options) {
    return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, "afterBody", this, tooltipItems));
  }
  getFooter(tooltipItems, options) {
    const { callbacks } = options;
    const beforeFooter = invokeCallbackWithFallback(callbacks, "beforeFooter", this, tooltipItems);
    const footer = invokeCallbackWithFallback(callbacks, "footer", this, tooltipItems);
    const afterFooter = invokeCallbackWithFallback(callbacks, "afterFooter", this, tooltipItems);
    let lines = [];
    lines = pushOrConcat(lines, splitNewlines(beforeFooter));
    lines = pushOrConcat(lines, splitNewlines(footer));
    lines = pushOrConcat(lines, splitNewlines(afterFooter));
    return lines;
  }
  _createItems(options) {
    const active = this._active;
    const data = this.chart.data;
    const labelColors = [];
    const labelPointStyles = [];
    const labelTextColors = [];
    let tooltipItems = [];
    let i, len;
    for (i = 0, len = active.length; i < len; ++i) {
      tooltipItems.push(createTooltipItem(this.chart, active[i]));
    }
    if (options.filter) {
      tooltipItems = tooltipItems.filter((element, index, array) => options.filter(element, index, array, data));
    }
    if (options.itemSort) {
      tooltipItems = tooltipItems.sort((a, b) => options.itemSort(a, b, data));
    }
    each(tooltipItems, (context) => {
      const scoped = overrideCallbacks(options.callbacks, context);
      labelColors.push(invokeCallbackWithFallback(scoped, "labelColor", this, context));
      labelPointStyles.push(invokeCallbackWithFallback(scoped, "labelPointStyle", this, context));
      labelTextColors.push(invokeCallbackWithFallback(scoped, "labelTextColor", this, context));
    });
    this.labelColors = labelColors;
    this.labelPointStyles = labelPointStyles;
    this.labelTextColors = labelTextColors;
    this.dataPoints = tooltipItems;
    return tooltipItems;
  }
  update(changed, replay) {
    const options = this.options.setContext(this.getContext());
    const active = this._active;
    let properties;
    let tooltipItems = [];
    if (!active.length) {
      if (this.opacity !== 0) {
        properties = {
          opacity: 0
        };
      }
    } else {
      const position = positioners[options.position].call(this, active, this._eventPosition);
      tooltipItems = this._createItems(options);
      this.title = this.getTitle(tooltipItems, options);
      this.beforeBody = this.getBeforeBody(tooltipItems, options);
      this.body = this.getBody(tooltipItems, options);
      this.afterBody = this.getAfterBody(tooltipItems, options);
      this.footer = this.getFooter(tooltipItems, options);
      const size = this._size = getTooltipSize(this, options);
      const positionAndSize = Object.assign({}, position, size);
      const alignment = determineAlignment(this.chart, options, positionAndSize);
      const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);
      this.xAlign = alignment.xAlign;
      this.yAlign = alignment.yAlign;
      properties = {
        opacity: 1,
        x: backgroundPoint.x,
        y: backgroundPoint.y,
        width: size.width,
        height: size.height,
        caretX: position.x,
        caretY: position.y
      };
    }
    this._tooltipItems = tooltipItems;
    this.$context = void 0;
    if (properties) {
      this._resolveAnimations().update(this, properties);
    }
    if (changed && options.external) {
      options.external.call(this, {
        chart: this.chart,
        tooltip: this,
        replay
      });
    }
  }
  drawCaret(tooltipPoint, ctx, size, options) {
    const caretPosition = this.getCaretPosition(tooltipPoint, size, options);
    ctx.lineTo(caretPosition.x1, caretPosition.y1);
    ctx.lineTo(caretPosition.x2, caretPosition.y2);
    ctx.lineTo(caretPosition.x3, caretPosition.y3);
  }
  getCaretPosition(tooltipPoint, size, options) {
    const { xAlign, yAlign } = this;
    const { caretSize, cornerRadius } = options;
    const { topLeft, topRight, bottomLeft, bottomRight } = toTRBLCorners(cornerRadius);
    const { x: ptX, y: ptY } = tooltipPoint;
    const { width, height } = size;
    let x1, x2, x3, y1, y2, y3;
    if (yAlign === "center") {
      y2 = ptY + height / 2;
      if (xAlign === "left") {
        x1 = ptX;
        x2 = x1 - caretSize;
        y1 = y2 + caretSize;
        y3 = y2 - caretSize;
      } else {
        x1 = ptX + width;
        x2 = x1 + caretSize;
        y1 = y2 - caretSize;
        y3 = y2 + caretSize;
      }
      x3 = x1;
    } else {
      if (xAlign === "left") {
        x2 = ptX + Math.max(topLeft, bottomLeft) + caretSize;
      } else if (xAlign === "right") {
        x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;
      } else {
        x2 = this.caretX;
      }
      if (yAlign === "top") {
        y1 = ptY;
        y2 = y1 - caretSize;
        x1 = x2 - caretSize;
        x3 = x2 + caretSize;
      } else {
        y1 = ptY + height;
        y2 = y1 + caretSize;
        x1 = x2 + caretSize;
        x3 = x2 - caretSize;
      }
      y3 = y1;
    }
    return {
      x1,
      x2,
      x3,
      y1,
      y2,
      y3
    };
  }
  drawTitle(pt, ctx, options) {
    const title = this.title;
    const length = title.length;
    let titleFont, titleSpacing, i;
    if (length) {
      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);
      pt.x = getAlignedX(this, options.titleAlign, options);
      ctx.textAlign = rtlHelper.textAlign(options.titleAlign);
      ctx.textBaseline = "middle";
      titleFont = toFont(options.titleFont);
      titleSpacing = options.titleSpacing;
      ctx.fillStyle = options.titleColor;
      ctx.font = titleFont.string;
      for (i = 0; i < length; ++i) {
        ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);
        pt.y += titleFont.lineHeight + titleSpacing;
        if (i + 1 === length) {
          pt.y += options.titleMarginBottom - titleSpacing;
        }
      }
    }
  }
  _drawColorBox(ctx, pt, i, rtlHelper, options) {
    const labelColors = this.labelColors[i];
    const labelPointStyle = this.labelPointStyles[i];
    const { boxHeight, boxWidth, boxPadding } = options;
    const bodyFont = toFont(options.bodyFont);
    const colorX = getAlignedX(this, "left", options);
    const rtlColorX = rtlHelper.x(colorX);
    const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;
    const colorY = pt.y + yOffSet;
    if (options.usePointStyle) {
      const drawOptions = {
        radius: Math.min(boxWidth, boxHeight) / 2,
        pointStyle: labelPointStyle.pointStyle,
        rotation: labelPointStyle.rotation,
        borderWidth: 1
      };
      const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;
      const centerY = colorY + boxHeight / 2;
      ctx.strokeStyle = options.multiKeyBackground;
      ctx.fillStyle = options.multiKeyBackground;
      drawPoint(ctx, drawOptions, centerX, centerY);
      ctx.strokeStyle = labelColors.borderColor;
      ctx.fillStyle = labelColors.backgroundColor;
      drawPoint(ctx, drawOptions, centerX, centerY);
    } else {
      ctx.lineWidth = isObject(labelColors.borderWidth) ? Math.max(...Object.values(labelColors.borderWidth)) : labelColors.borderWidth || 1;
      ctx.strokeStyle = labelColors.borderColor;
      ctx.setLineDash(labelColors.borderDash || []);
      ctx.lineDashOffset = labelColors.borderDashOffset || 0;
      const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth - boxPadding);
      const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - boxPadding - 2);
      const borderRadius = toTRBLCorners(labelColors.borderRadius);
      if (Object.values(borderRadius).some((v) => v !== 0)) {
        ctx.beginPath();
        ctx.fillStyle = options.multiKeyBackground;
        addRoundedRectPath(ctx, {
          x: outerX,
          y: colorY,
          w: boxWidth,
          h: boxHeight,
          radius: borderRadius
        });
        ctx.fill();
        ctx.stroke();
        ctx.fillStyle = labelColors.backgroundColor;
        ctx.beginPath();
        addRoundedRectPath(ctx, {
          x: innerX,
          y: colorY + 1,
          w: boxWidth - 2,
          h: boxHeight - 2,
          radius: borderRadius
        });
        ctx.fill();
      } else {
        ctx.fillStyle = options.multiKeyBackground;
        ctx.fillRect(outerX, colorY, boxWidth, boxHeight);
        ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);
        ctx.fillStyle = labelColors.backgroundColor;
        ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);
      }
    }
    ctx.fillStyle = this.labelTextColors[i];
  }
  drawBody(pt, ctx, options) {
    const { body } = this;
    const { bodySpacing, bodyAlign, displayColors, boxHeight, boxWidth, boxPadding } = options;
    const bodyFont = toFont(options.bodyFont);
    let bodyLineHeight = bodyFont.lineHeight;
    let xLinePadding = 0;
    const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);
    const fillLineOfText = function(line) {
      ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);
      pt.y += bodyLineHeight + bodySpacing;
    };
    const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);
    let bodyItem, textColor, lines, i, j, ilen, jlen;
    ctx.textAlign = bodyAlign;
    ctx.textBaseline = "middle";
    ctx.font = bodyFont.string;
    pt.x = getAlignedX(this, bodyAlignForCalculation, options);
    ctx.fillStyle = options.bodyColor;
    each(this.beforeBody, fillLineOfText);
    xLinePadding = displayColors && bodyAlignForCalculation !== "right" ? bodyAlign === "center" ? boxWidth / 2 + boxPadding : boxWidth + 2 + boxPadding : 0;
    for (i = 0, ilen = body.length; i < ilen; ++i) {
      bodyItem = body[i];
      textColor = this.labelTextColors[i];
      ctx.fillStyle = textColor;
      each(bodyItem.before, fillLineOfText);
      lines = bodyItem.lines;
      if (displayColors && lines.length) {
        this._drawColorBox(ctx, pt, i, rtlHelper, options);
        bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);
      }
      for (j = 0, jlen = lines.length; j < jlen; ++j) {
        fillLineOfText(lines[j]);
        bodyLineHeight = bodyFont.lineHeight;
      }
      each(bodyItem.after, fillLineOfText);
    }
    xLinePadding = 0;
    bodyLineHeight = bodyFont.lineHeight;
    each(this.afterBody, fillLineOfText);
    pt.y -= bodySpacing;
  }
  drawFooter(pt, ctx, options) {
    const footer = this.footer;
    const length = footer.length;
    let footerFont, i;
    if (length) {
      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);
      pt.x = getAlignedX(this, options.footerAlign, options);
      pt.y += options.footerMarginTop;
      ctx.textAlign = rtlHelper.textAlign(options.footerAlign);
      ctx.textBaseline = "middle";
      footerFont = toFont(options.footerFont);
      ctx.fillStyle = options.footerColor;
      ctx.font = footerFont.string;
      for (i = 0; i < length; ++i) {
        ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);
        pt.y += footerFont.lineHeight + options.footerSpacing;
      }
    }
  }
  drawBackground(pt, ctx, tooltipSize, options) {
    const { xAlign, yAlign } = this;
    const { x, y } = pt;
    const { width, height } = tooltipSize;
    const { topLeft, topRight, bottomLeft, bottomRight } = toTRBLCorners(options.cornerRadius);
    ctx.fillStyle = options.backgroundColor;
    ctx.strokeStyle = options.borderColor;
    ctx.lineWidth = options.borderWidth;
    ctx.beginPath();
    ctx.moveTo(x + topLeft, y);
    if (yAlign === "top") {
      this.drawCaret(pt, ctx, tooltipSize, options);
    }
    ctx.lineTo(x + width - topRight, y);
    ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);
    if (yAlign === "center" && xAlign === "right") {
      this.drawCaret(pt, ctx, tooltipSize, options);
    }
    ctx.lineTo(x + width, y + height - bottomRight);
    ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);
    if (yAlign === "bottom") {
      this.drawCaret(pt, ctx, tooltipSize, options);
    }
    ctx.lineTo(x + bottomLeft, y + height);
    ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);
    if (yAlign === "center" && xAlign === "left") {
      this.drawCaret(pt, ctx, tooltipSize, options);
    }
    ctx.lineTo(x, y + topLeft);
    ctx.quadraticCurveTo(x, y, x + topLeft, y);
    ctx.closePath();
    ctx.fill();
    if (options.borderWidth > 0) {
      ctx.stroke();
    }
  }
  _updateAnimationTarget(options) {
    const chart = this.chart;
    const anims = this.$animations;
    const animX = anims && anims.x;
    const animY = anims && anims.y;
    if (animX || animY) {
      const position = positioners[options.position].call(this, this._active, this._eventPosition);
      if (!position) {
        return;
      }
      const size = this._size = getTooltipSize(this, options);
      const positionAndSize = Object.assign({}, position, this._size);
      const alignment = determineAlignment(chart, options, positionAndSize);
      const point = getBackgroundPoint(options, positionAndSize, alignment, chart);
      if (animX._to !== point.x || animY._to !== point.y) {
        this.xAlign = alignment.xAlign;
        this.yAlign = alignment.yAlign;
        this.width = size.width;
        this.height = size.height;
        this.caretX = position.x;
        this.caretY = position.y;
        this._resolveAnimations().update(this, point);
      }
    }
  }
  _willRender() {
    return !!this.opacity;
  }
  draw(ctx) {
    const options = this.options.setContext(this.getContext());
    let opacity = this.opacity;
    if (!opacity) {
      return;
    }
    this._updateAnimationTarget(options);
    const tooltipSize = {
      width: this.width,
      height: this.height
    };
    const pt = {
      x: this.x,
      y: this.y
    };
    opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;
    const padding = toPadding(options.padding);
    const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;
    if (options.enabled && hasTooltipContent) {
      ctx.save();
      ctx.globalAlpha = opacity;
      this.drawBackground(pt, ctx, tooltipSize, options);
      overrideTextDirection(ctx, options.textDirection);
      pt.y += padding.top;
      this.drawTitle(pt, ctx, options);
      this.drawBody(pt, ctx, options);
      this.drawFooter(pt, ctx, options);
      restoreTextDirection(ctx, options.textDirection);
      ctx.restore();
    }
  }
  getActiveElements() {
    return this._active || [];
  }
  setActiveElements(activeElements, eventPosition) {
    const lastActive = this._active;
    const active = activeElements.map(({ datasetIndex, index }) => {
      const meta = this.chart.getDatasetMeta(datasetIndex);
      if (!meta) {
        throw new Error("Cannot find a dataset at index " + datasetIndex);
      }
      return {
        datasetIndex,
        element: meta.data[index],
        index
      };
    });
    const changed = !_elementsEqual(lastActive, active);
    const positionChanged = this._positionChanged(active, eventPosition);
    if (changed || positionChanged) {
      this._active = active;
      this._eventPosition = eventPosition;
      this._ignoreReplayEvents = true;
      this.update(true);
    }
  }
  handleEvent(e, replay, inChartArea = true) {
    if (replay && this._ignoreReplayEvents) {
      return false;
    }
    this._ignoreReplayEvents = false;
    const options = this.options;
    const lastActive = this._active || [];
    const active = this._getActiveElements(e, lastActive, replay, inChartArea);
    const positionChanged = this._positionChanged(active, e);
    const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;
    if (changed) {
      this._active = active;
      if (options.enabled || options.external) {
        this._eventPosition = {
          x: e.x,
          y: e.y
        };
        this.update(true, replay);
      }
    }
    return changed;
  }
  _getActiveElements(e, lastActive, replay, inChartArea) {
    const options = this.options;
    if (e.type === "mouseout") {
      return [];
    }
    if (!inChartArea) {
      return lastActive;
    }
    const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);
    if (options.reverse) {
      active.reverse();
    }
    return active;
  }
  _positionChanged(active, e) {
    const { caretX, caretY, options } = this;
    const position = positioners[options.position].call(this, active, e);
    return position !== false && (caretX !== position.x || caretY !== position.y);
  }
}
__publicField(Tooltip, "positioners", positioners);
var plugin_tooltip = {
  id: "tooltip",
  _element: Tooltip,
  positioners,
  afterInit(chart, _args, options) {
    if (options) {
      chart.tooltip = new Tooltip({
        chart,
        options
      });
    }
  },
  beforeUpdate(chart, _args, options) {
    if (chart.tooltip) {
      chart.tooltip.initialize(options);
    }
  },
  reset(chart, _args, options) {
    if (chart.tooltip) {
      chart.tooltip.initialize(options);
    }
  },
  afterDraw(chart) {
    const tooltip = chart.tooltip;
    if (tooltip && tooltip._willRender()) {
      const args = {
        tooltip
      };
      if (chart.notifyPlugins("beforeTooltipDraw", {
        ...args,
        cancelable: true
      }) === false) {
        return;
      }
      tooltip.draw(chart.ctx);
      chart.notifyPlugins("afterTooltipDraw", args);
    }
  },
  afterEvent(chart, args) {
    if (chart.tooltip) {
      const useFinalPosition = args.replay;
      if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {
        args.changed = true;
      }
    }
  },
  defaults: {
    enabled: true,
    external: null,
    position: "average",
    backgroundColor: "rgba(0,0,0,0.8)",
    titleColor: "#fff",
    titleFont: {
      weight: "bold"
    },
    titleSpacing: 2,
    titleMarginBottom: 6,
    titleAlign: "left",
    bodyColor: "#fff",
    bodySpacing: 2,
    bodyFont: {},
    bodyAlign: "left",
    footerColor: "#fff",
    footerSpacing: 2,
    footerMarginTop: 6,
    footerFont: {
      weight: "bold"
    },
    footerAlign: "left",
    padding: 6,
    caretPadding: 2,
    caretSize: 5,
    cornerRadius: 6,
    boxHeight: (ctx, opts) => opts.bodyFont.size,
    boxWidth: (ctx, opts) => opts.bodyFont.size,
    multiKeyBackground: "#fff",
    displayColors: true,
    boxPadding: 0,
    borderColor: "rgba(0,0,0,0)",
    borderWidth: 0,
    animation: {
      duration: 400,
      easing: "easeOutQuart"
    },
    animations: {
      numbers: {
        type: "number",
        properties: [
          "x",
          "y",
          "width",
          "height",
          "caretX",
          "caretY"
        ]
      },
      opacity: {
        easing: "linear",
        duration: 200
      }
    },
    callbacks: defaultCallbacks
  },
  defaultRoutes: {
    bodyFont: "font",
    footerFont: "font",
    titleFont: "font"
  },
  descriptors: {
    _scriptable: (name2) => name2 !== "filter" && name2 !== "itemSort" && name2 !== "external",
    _indexable: false,
    callbacks: {
      _scriptable: false,
      _indexable: false
    },
    animation: {
      _fallback: false
    },
    animations: {
      _fallback: "animation"
    }
  },
  additionalOptionScopes: [
    "interaction"
  ]
};
const addIfString = (labels, raw, index, addedLabels) => {
  if (typeof raw === "string") {
    index = labels.push(raw) - 1;
    addedLabels.unshift({
      index,
      label: raw
    });
  } else if (isNaN(raw)) {
    index = null;
  }
  return index;
};
function findOrAddLabel(labels, raw, index, addedLabels) {
  const first = labels.indexOf(raw);
  if (first === -1) {
    return addIfString(labels, raw, index, addedLabels);
  }
  const last = labels.lastIndexOf(raw);
  return first !== last ? index : first;
}
const validIndex = (index, max) => index === null ? null : _limitValue(Math.round(index), 0, max);
function _getLabelForValue(value) {
  const labels = this.getLabels();
  if (value >= 0 && value < labels.length) {
    return labels[value];
  }
  return value;
}
class CategoryScale extends Scale {
  constructor(cfg) {
    super(cfg);
    this._startValue = void 0;
    this._valueRange = 0;
    this._addedLabels = [];
  }
  init(scaleOptions) {
    const added = this._addedLabels;
    if (added.length) {
      const labels = this.getLabels();
      for (const { index, label } of added) {
        if (labels[index] === label) {
          labels.splice(index, 1);
        }
      }
      this._addedLabels = [];
    }
    super.init(scaleOptions);
  }
  parse(raw, index) {
    if (isNullOrUndef(raw)) {
      return null;
    }
    const labels = this.getLabels();
    index = isFinite(index) && labels[index] === raw ? index : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);
    return validIndex(index, labels.length - 1);
  }
  determineDataLimits() {
    const { minDefined, maxDefined } = this.getUserBounds();
    let { min, max } = this.getMinMax(true);
    if (this.options.bounds === "ticks") {
      if (!minDefined) {
        min = 0;
      }
      if (!maxDefined) {
        max = this.getLabels().length - 1;
      }
    }
    this.min = min;
    this.max = max;
  }
  buildTicks() {
    const min = this.min;
    const max = this.max;
    const offset = this.options.offset;
    const ticks = [];
    let labels = this.getLabels();
    labels = min === 0 && max === labels.length - 1 ? labels : labels.slice(min, max + 1);
    this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);
    this._startValue = this.min - (offset ? 0.5 : 0);
    for (let value = min; value <= max; value++) {
      ticks.push({
        value
      });
    }
    return ticks;
  }
  getLabelForValue(value) {
    return _getLabelForValue.call(this, value);
  }
  configure() {
    super.configure();
    if (!this.isHorizontal()) {
      this._reversePixels = !this._reversePixels;
    }
  }
  getPixelForValue(value) {
    if (typeof value !== "number") {
      value = this.parse(value);
    }
    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);
  }
  getPixelForTick(index) {
    const ticks = this.ticks;
    if (index < 0 || index > ticks.length - 1) {
      return null;
    }
    return this.getPixelForValue(ticks[index].value);
  }
  getValueForPixel(pixel) {
    return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);
  }
  getBasePixel() {
    return this.bottom;
  }
}
__publicField(CategoryScale, "id", "category");
__publicField(CategoryScale, "defaults", {
  ticks: {
    callback: _getLabelForValue
  }
});
function generateTicks$1(generationOptions, dataRange) {
  const ticks = [];
  const MIN_SPACING = 1e-14;
  const { bounds, step, min, max, precision, count, maxTicks, maxDigits, includeBounds } = generationOptions;
  const unit = step || 1;
  const maxSpaces = maxTicks - 1;
  const { min: rmin, max: rmax } = dataRange;
  const minDefined = !isNullOrUndef(min);
  const maxDefined = !isNullOrUndef(max);
  const countDefined = !isNullOrUndef(count);
  const minSpacing = (rmax - rmin) / (maxDigits + 1);
  let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;
  let factor, niceMin, niceMax, numSpaces;
  if (spacing < MIN_SPACING && !minDefined && !maxDefined) {
    return [
      {
        value: rmin
      },
      {
        value: rmax
      }
    ];
  }
  numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);
  if (numSpaces > maxSpaces) {
    spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;
  }
  if (!isNullOrUndef(precision)) {
    factor = Math.pow(10, precision);
    spacing = Math.ceil(spacing * factor) / factor;
  }
  if (bounds === "ticks") {
    niceMin = Math.floor(rmin / spacing) * spacing;
    niceMax = Math.ceil(rmax / spacing) * spacing;
  } else {
    niceMin = rmin;
    niceMax = rmax;
  }
  if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1e3)) {
    numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));
    spacing = (max - min) / numSpaces;
    niceMin = min;
    niceMax = max;
  } else if (countDefined) {
    niceMin = minDefined ? min : niceMin;
    niceMax = maxDefined ? max : niceMax;
    numSpaces = count - 1;
    spacing = (niceMax - niceMin) / numSpaces;
  } else {
    numSpaces = (niceMax - niceMin) / spacing;
    if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1e3)) {
      numSpaces = Math.round(numSpaces);
    } else {
      numSpaces = Math.ceil(numSpaces);
    }
  }
  const decimalPlaces = Math.max(_decimalPlaces(spacing), _decimalPlaces(niceMin));
  factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);
  niceMin = Math.round(niceMin * factor) / factor;
  niceMax = Math.round(niceMax * factor) / factor;
  let j = 0;
  if (minDefined) {
    if (includeBounds && niceMin !== min) {
      ticks.push({
        value: min
      });
      if (niceMin < min) {
        j++;
      }
      if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {
        j++;
      }
    } else if (niceMin < min) {
      j++;
    }
  }
  for (; j < numSpaces; ++j) {
    ticks.push({
      value: Math.round((niceMin + j * spacing) * factor) / factor
    });
  }
  if (maxDefined && includeBounds && niceMax !== max) {
    if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {
      ticks[ticks.length - 1].value = max;
    } else {
      ticks.push({
        value: max
      });
    }
  } else if (!maxDefined || niceMax === max) {
    ticks.push({
      value: niceMax
    });
  }
  return ticks;
}
function relativeLabelSize(value, minSpacing, { horizontal, minRotation }) {
  const rad = toRadians(minRotation);
  const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 1e-3;
  const length = 0.75 * minSpacing * ("" + value).length;
  return Math.min(minSpacing / ratio, length);
}
class LinearScaleBase extends Scale {
  constructor(cfg) {
    super(cfg);
    this.start = void 0;
    this.end = void 0;
    this._startValue = void 0;
    this._endValue = void 0;
    this._valueRange = 0;
  }
  parse(raw, index) {
    if (isNullOrUndef(raw)) {
      return null;
    }
    if ((typeof raw === "number" || raw instanceof Number) && !isFinite(+raw)) {
      return null;
    }
    return +raw;
  }
  handleTickRangeOptions() {
    const { beginAtZero } = this.options;
    const { minDefined, maxDefined } = this.getUserBounds();
    let { min, max } = this;
    const setMin = (v) => min = minDefined ? min : v;
    const setMax = (v) => max = maxDefined ? max : v;
    if (beginAtZero) {
      const minSign = sign(min);
      const maxSign = sign(max);
      if (minSign < 0 && maxSign < 0) {
        setMax(0);
      } else if (minSign > 0 && maxSign > 0) {
        setMin(0);
      }
    }
    if (min === max) {
      let offset = max === 0 ? 1 : Math.abs(max * 0.05);
      setMax(max + offset);
      if (!beginAtZero) {
        setMin(min - offset);
      }
    }
    this.min = min;
    this.max = max;
  }
  getTickLimit() {
    const tickOpts = this.options.ticks;
    let { maxTicksLimit, stepSize } = tickOpts;
    let maxTicks;
    if (stepSize) {
      maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;
      if (maxTicks > 1e3) {
        console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);
        maxTicks = 1e3;
      }
    } else {
      maxTicks = this.computeTickLimit();
      maxTicksLimit = maxTicksLimit || 11;
    }
    if (maxTicksLimit) {
      maxTicks = Math.min(maxTicksLimit, maxTicks);
    }
    return maxTicks;
  }
  computeTickLimit() {
    return Number.POSITIVE_INFINITY;
  }
  buildTicks() {
    const opts = this.options;
    const tickOpts = opts.ticks;
    let maxTicks = this.getTickLimit();
    maxTicks = Math.max(2, maxTicks);
    const numericGeneratorOptions = {
      maxTicks,
      bounds: opts.bounds,
      min: opts.min,
      max: opts.max,
      precision: tickOpts.precision,
      step: tickOpts.stepSize,
      count: tickOpts.count,
      maxDigits: this._maxDigits(),
      horizontal: this.isHorizontal(),
      minRotation: tickOpts.minRotation || 0,
      includeBounds: tickOpts.includeBounds !== false
    };
    const dataRange = this._range || this;
    const ticks = generateTicks$1(numericGeneratorOptions, dataRange);
    if (opts.bounds === "ticks") {
      _setMinAndMaxByKey(ticks, this, "value");
    }
    if (opts.reverse) {
      ticks.reverse();
      this.start = this.max;
      this.end = this.min;
    } else {
      this.start = this.min;
      this.end = this.max;
    }
    return ticks;
  }
  configure() {
    const ticks = this.ticks;
    let start = this.min;
    let end = this.max;
    super.configure();
    if (this.options.offset && ticks.length) {
      const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;
      start -= offset;
      end += offset;
    }
    this._startValue = start;
    this._endValue = end;
    this._valueRange = end - start;
  }
  getLabelForValue(value) {
    return formatNumber(value, this.chart.options.locale, this.options.ticks.format);
  }
}
class LinearScale extends LinearScaleBase {
  determineDataLimits() {
    const { min, max } = this.getMinMax(true);
    this.min = isNumberFinite(min) ? min : 0;
    this.max = isNumberFinite(max) ? max : 1;
    this.handleTickRangeOptions();
  }
  computeTickLimit() {
    const horizontal = this.isHorizontal();
    const length = horizontal ? this.width : this.height;
    const minRotation = toRadians(this.options.ticks.minRotation);
    const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 1e-3;
    const tickFont = this._resolveTickFontOptions(0);
    return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));
  }
  getPixelForValue(value) {
    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);
  }
  getValueForPixel(pixel) {
    return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;
  }
}
__publicField(LinearScale, "id", "linear");
__publicField(LinearScale, "defaults", {
  ticks: {
    callback: Ticks.formatters.numeric
  }
});
const log10Floor = (v) => Math.floor(log10(v));
const changeExponent = (v, m) => Math.pow(10, log10Floor(v) + m);
function isMajor(tickVal) {
  const remain = tickVal / Math.pow(10, log10Floor(tickVal));
  return remain === 1;
}
function steps(min, max, rangeExp) {
  const rangeStep = Math.pow(10, rangeExp);
  const start = Math.floor(min / rangeStep);
  const end = Math.ceil(max / rangeStep);
  return end - start;
}
function startExp(min, max) {
  const range = max - min;
  let rangeExp = log10Floor(range);
  while (steps(min, max, rangeExp) > 10) {
    rangeExp++;
  }
  while (steps(min, max, rangeExp) < 10) {
    rangeExp--;
  }
  return Math.min(rangeExp, log10Floor(min));
}
function generateTicks(generationOptions, { min, max }) {
  min = finiteOrDefault(generationOptions.min, min);
  const ticks = [];
  const minExp = log10Floor(min);
  let exp = startExp(min, max);
  let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;
  const stepSize = Math.pow(10, exp);
  const base = minExp > exp ? Math.pow(10, minExp) : 0;
  const start = Math.round((min - base) * precision) / precision;
  const offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;
  let significand = Math.floor((start - offset) / Math.pow(10, exp));
  let value = finiteOrDefault(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);
  while (value < max) {
    ticks.push({
      value,
      major: isMajor(value),
      significand
    });
    if (significand >= 10) {
      significand = significand < 15 ? 15 : 20;
    } else {
      significand++;
    }
    if (significand >= 20) {
      exp++;
      significand = 2;
      precision = exp >= 0 ? 1 : precision;
    }
    value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;
  }
  const lastTick = finiteOrDefault(generationOptions.max, value);
  ticks.push({
    value: lastTick,
    major: isMajor(lastTick),
    significand
  });
  return ticks;
}
class LogarithmicScale extends Scale {
  constructor(cfg) {
    super(cfg);
    this.start = void 0;
    this.end = void 0;
    this._startValue = void 0;
    this._valueRange = 0;
  }
  parse(raw, index) {
    const value = LinearScaleBase.prototype.parse.apply(this, [
      raw,
      index
    ]);
    if (value === 0) {
      this._zero = true;
      return void 0;
    }
    return isNumberFinite(value) && value > 0 ? value : null;
  }
  determineDataLimits() {
    const { min, max } = this.getMinMax(true);
    this.min = isNumberFinite(min) ? Math.max(0, min) : null;
    this.max = isNumberFinite(max) ? Math.max(0, max) : null;
    if (this.options.beginAtZero) {
      this._zero = true;
    }
    if (this._zero && this.min !== this._suggestedMin && !isNumberFinite(this._userMin)) {
      this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);
    }
    this.handleTickRangeOptions();
  }
  handleTickRangeOptions() {
    const { minDefined, maxDefined } = this.getUserBounds();
    let min = this.min;
    let max = this.max;
    const setMin = (v) => min = minDefined ? min : v;
    const setMax = (v) => max = maxDefined ? max : v;
    if (min === max) {
      if (min <= 0) {
        setMin(1);
        setMax(10);
      } else {
        setMin(changeExponent(min, -1));
        setMax(changeExponent(max, 1));
      }
    }
    if (min <= 0) {
      setMin(changeExponent(max, -1));
    }
    if (max <= 0) {
      setMax(changeExponent(min, 1));
    }
    this.min = min;
    this.max = max;
  }
  buildTicks() {
    const opts = this.options;
    const generationOptions = {
      min: this._userMin,
      max: this._userMax
    };
    const ticks = generateTicks(generationOptions, this);
    if (opts.bounds === "ticks") {
      _setMinAndMaxByKey(ticks, this, "value");
    }
    if (opts.reverse) {
      ticks.reverse();
      this.start = this.max;
      this.end = this.min;
    } else {
      this.start = this.min;
      this.end = this.max;
    }
    return ticks;
  }
  getLabelForValue(value) {
    return value === void 0 ? "0" : formatNumber(value, this.chart.options.locale, this.options.ticks.format);
  }
  configure() {
    const start = this.min;
    super.configure();
    this._startValue = log10(start);
    this._valueRange = log10(this.max) - log10(start);
  }
  getPixelForValue(value) {
    if (value === void 0 || value === 0) {
      value = this.min;
    }
    if (value === null || isNaN(value)) {
      return NaN;
    }
    return this.getPixelForDecimal(value === this.min ? 0 : (log10(value) - this._startValue) / this._valueRange);
  }
  getValueForPixel(pixel) {
    const decimal = this.getDecimalForPixel(pixel);
    return Math.pow(10, this._startValue + decimal * this._valueRange);
  }
}
__publicField(LogarithmicScale, "id", "logarithmic");
__publicField(LogarithmicScale, "defaults", {
  ticks: {
    callback: Ticks.formatters.logarithmic,
    major: {
      enabled: true
    }
  }
});
function getTickBackdropHeight(opts) {
  const tickOpts = opts.ticks;
  if (tickOpts.display && opts.display) {
    const padding = toPadding(tickOpts.backdropPadding);
    return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;
  }
  return 0;
}
function measureLabelSize(ctx, font, label) {
  label = isArray(label) ? label : [
    label
  ];
  return {
    w: _longestText(ctx, font.string, label),
    h: label.length * font.lineHeight
  };
}
function determineLimits(angle, pos, size, min, max) {
  if (angle === min || angle === max) {
    return {
      start: pos - size / 2,
      end: pos + size / 2
    };
  } else if (angle < min || angle > max) {
    return {
      start: pos - size,
      end: pos
    };
  }
  return {
    start: pos,
    end: pos + size
  };
}
function fitWithPointLabels(scale) {
  const orig = {
    l: scale.left + scale._padding.left,
    r: scale.right - scale._padding.right,
    t: scale.top + scale._padding.top,
    b: scale.bottom - scale._padding.bottom
  };
  const limits = Object.assign({}, orig);
  const labelSizes = [];
  const padding = [];
  const valueCount = scale._pointLabels.length;
  const pointLabelOpts = scale.options.pointLabels;
  const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;
  for (let i = 0; i < valueCount; i++) {
    const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));
    padding[i] = opts.padding;
    const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);
    const plFont = toFont(opts.font);
    const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);
    labelSizes[i] = textSize;
    const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);
    const angle = Math.round(toDegrees(angleRadians));
    const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);
    const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);
    updateLimits(limits, orig, angleRadians, hLimits, vLimits);
  }
  scale.setCenterPoint(orig.l - limits.l, limits.r - orig.r, orig.t - limits.t, limits.b - orig.b);
  scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);
}
function updateLimits(limits, orig, angle, hLimits, vLimits) {
  const sin = Math.abs(Math.sin(angle));
  const cos = Math.abs(Math.cos(angle));
  let x = 0;
  let y = 0;
  if (hLimits.start < orig.l) {
    x = (orig.l - hLimits.start) / sin;
    limits.l = Math.min(limits.l, orig.l - x);
  } else if (hLimits.end > orig.r) {
    x = (hLimits.end - orig.r) / sin;
    limits.r = Math.max(limits.r, orig.r + x);
  }
  if (vLimits.start < orig.t) {
    y = (orig.t - vLimits.start) / cos;
    limits.t = Math.min(limits.t, orig.t - y);
  } else if (vLimits.end > orig.b) {
    y = (vLimits.end - orig.b) / cos;
    limits.b = Math.max(limits.b, orig.b + y);
  }
}
function buildPointLabelItems(scale, labelSizes, padding) {
  const items = [];
  const valueCount = scale._pointLabels.length;
  const opts = scale.options;
  const extra = getTickBackdropHeight(opts) / 2;
  const outerDistance = scale.drawingArea;
  const additionalAngle = opts.pointLabels.centerPointLabels ? PI / valueCount : 0;
  for (let i = 0; i < valueCount; i++) {
    const pointLabelPosition = scale.getPointPosition(i, outerDistance + extra + padding[i], additionalAngle);
    const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));
    const size = labelSizes[i];
    const y = yForAngle(pointLabelPosition.y, size.h, angle);
    const textAlign = getTextAlignForAngle(angle);
    const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);
    items.push({
      x: pointLabelPosition.x,
      y,
      textAlign,
      left,
      top: y,
      right: left + size.w,
      bottom: y + size.h
    });
  }
  return items;
}
function getTextAlignForAngle(angle) {
  if (angle === 0 || angle === 180) {
    return "center";
  } else if (angle < 180) {
    return "left";
  }
  return "right";
}
function leftForTextAlign(x, w, align) {
  if (align === "right") {
    x -= w;
  } else if (align === "center") {
    x -= w / 2;
  }
  return x;
}
function yForAngle(y, h3, angle) {
  if (angle === 90 || angle === 270) {
    y -= h3 / 2;
  } else if (angle > 270 || angle < 90) {
    y -= h3;
  }
  return y;
}
function drawPointLabels(scale, labelCount) {
  const { ctx, options: { pointLabels } } = scale;
  for (let i = labelCount - 1; i >= 0; i--) {
    const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));
    const plFont = toFont(optsAtIndex.font);
    const { x, y, textAlign, left, top, right, bottom } = scale._pointLabelItems[i];
    const { backdropColor } = optsAtIndex;
    if (!isNullOrUndef(backdropColor)) {
      const borderRadius = toTRBLCorners(optsAtIndex.borderRadius);
      const padding = toPadding(optsAtIndex.backdropPadding);
      ctx.fillStyle = backdropColor;
      const backdropLeft = left - padding.left;
      const backdropTop = top - padding.top;
      const backdropWidth = right - left + padding.width;
      const backdropHeight = bottom - top + padding.height;
      if (Object.values(borderRadius).some((v) => v !== 0)) {
        ctx.beginPath();
        addRoundedRectPath(ctx, {
          x: backdropLeft,
          y: backdropTop,
          w: backdropWidth,
          h: backdropHeight,
          radius: borderRadius
        });
        ctx.fill();
      } else {
        ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);
      }
    }
    renderText(ctx, scale._pointLabels[i], x, y + plFont.lineHeight / 2, plFont, {
      color: optsAtIndex.color,
      textAlign,
      textBaseline: "middle"
    });
  }
}
function pathRadiusLine(scale, radius, circular, labelCount) {
  const { ctx } = scale;
  if (circular) {
    ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);
  } else {
    let pointPosition = scale.getPointPosition(0, radius);
    ctx.moveTo(pointPosition.x, pointPosition.y);
    for (let i = 1; i < labelCount; i++) {
      pointPosition = scale.getPointPosition(i, radius);
      ctx.lineTo(pointPosition.x, pointPosition.y);
    }
  }
}
function drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {
  const ctx = scale.ctx;
  const circular = gridLineOpts.circular;
  const { color: color2, lineWidth } = gridLineOpts;
  if (!circular && !labelCount || !color2 || !lineWidth || radius < 0) {
    return;
  }
  ctx.save();
  ctx.strokeStyle = color2;
  ctx.lineWidth = lineWidth;
  ctx.setLineDash(borderOpts.dash);
  ctx.lineDashOffset = borderOpts.dashOffset;
  ctx.beginPath();
  pathRadiusLine(scale, radius, circular, labelCount);
  ctx.closePath();
  ctx.stroke();
  ctx.restore();
}
function createPointLabelContext(parent, index, label) {
  return createContext(parent, {
    label,
    index,
    type: "pointLabel"
  });
}
class RadialLinearScale extends LinearScaleBase {
  constructor(cfg) {
    super(cfg);
    this.xCenter = void 0;
    this.yCenter = void 0;
    this.drawingArea = void 0;
    this._pointLabels = [];
    this._pointLabelItems = [];
  }
  setDimensions() {
    const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);
    const w = this.width = this.maxWidth - padding.width;
    const h3 = this.height = this.maxHeight - padding.height;
    this.xCenter = Math.floor(this.left + w / 2 + padding.left);
    this.yCenter = Math.floor(this.top + h3 / 2 + padding.top);
    this.drawingArea = Math.floor(Math.min(w, h3) / 2);
  }
  determineDataLimits() {
    const { min, max } = this.getMinMax(false);
    this.min = isNumberFinite(min) && !isNaN(min) ? min : 0;
    this.max = isNumberFinite(max) && !isNaN(max) ? max : 0;
    this.handleTickRangeOptions();
  }
  computeTickLimit() {
    return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));
  }
  generateTickLabels(ticks) {
    LinearScaleBase.prototype.generateTickLabels.call(this, ticks);
    this._pointLabels = this.getLabels().map((value, index) => {
      const label = callback(this.options.pointLabels.callback, [
        value,
        index
      ], this);
      return label || label === 0 ? label : "";
    }).filter((v, i) => this.chart.getDataVisibility(i));
  }
  fit() {
    const opts = this.options;
    if (opts.display && opts.pointLabels.display) {
      fitWithPointLabels(this);
    } else {
      this.setCenterPoint(0, 0, 0, 0);
    }
  }
  setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {
    this.xCenter += Math.floor((leftMovement - rightMovement) / 2);
    this.yCenter += Math.floor((topMovement - bottomMovement) / 2);
    this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));
  }
  getIndexAngle(index) {
    const angleMultiplier = TAU / (this._pointLabels.length || 1);
    const startAngle = this.options.startAngle || 0;
    return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));
  }
  getDistanceFromCenterForValue(value) {
    if (isNullOrUndef(value)) {
      return NaN;
    }
    const scalingFactor = this.drawingArea / (this.max - this.min);
    if (this.options.reverse) {
      return (this.max - value) * scalingFactor;
    }
    return (value - this.min) * scalingFactor;
  }
  getValueForDistanceFromCenter(distance) {
    if (isNullOrUndef(distance)) {
      return NaN;
    }
    const scaledDistance = distance / (this.drawingArea / (this.max - this.min));
    return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;
  }
  getPointLabelContext(index) {
    const pointLabels = this._pointLabels || [];
    if (index >= 0 && index < pointLabels.length) {
      const pointLabel = pointLabels[index];
      return createPointLabelContext(this.getContext(), index, pointLabel);
    }
  }
  getPointPosition(index, distanceFromCenter, additionalAngle = 0) {
    const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;
    return {
      x: Math.cos(angle) * distanceFromCenter + this.xCenter,
      y: Math.sin(angle) * distanceFromCenter + this.yCenter,
      angle
    };
  }
  getPointPositionForValue(index, value) {
    return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));
  }
  getBasePosition(index) {
    return this.getPointPositionForValue(index || 0, this.getBaseValue());
  }
  getPointLabelPosition(index) {
    const { left, top, right, bottom } = this._pointLabelItems[index];
    return {
      left,
      top,
      right,
      bottom
    };
  }
  drawBackground() {
    const { backgroundColor, grid: { circular } } = this.options;
    if (backgroundColor) {
      const ctx = this.ctx;
      ctx.save();
      ctx.beginPath();
      pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);
      ctx.closePath();
      ctx.fillStyle = backgroundColor;
      ctx.fill();
      ctx.restore();
    }
  }
  drawGrid() {
    const ctx = this.ctx;
    const opts = this.options;
    const { angleLines, grid, border } = opts;
    const labelCount = this._pointLabels.length;
    let i, offset, position;
    if (opts.pointLabels.display) {
      drawPointLabels(this, labelCount);
    }
    if (grid.display) {
      this.ticks.forEach((tick, index) => {
        if (index !== 0) {
          offset = this.getDistanceFromCenterForValue(tick.value);
          const context = this.getContext(index);
          const optsAtIndex = grid.setContext(context);
          const optsAtIndexBorder = border.setContext(context);
          drawRadiusLine(this, optsAtIndex, offset, labelCount, optsAtIndexBorder);
        }
      });
    }
    if (angleLines.display) {
      ctx.save();
      for (i = labelCount - 1; i >= 0; i--) {
        const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));
        const { color: color2, lineWidth } = optsAtIndex;
        if (!lineWidth || !color2) {
          continue;
        }
        ctx.lineWidth = lineWidth;
        ctx.strokeStyle = color2;
        ctx.setLineDash(optsAtIndex.borderDash);
        ctx.lineDashOffset = optsAtIndex.borderDashOffset;
        offset = this.getDistanceFromCenterForValue(opts.ticks.reverse ? this.min : this.max);
        position = this.getPointPosition(i, offset);
        ctx.beginPath();
        ctx.moveTo(this.xCenter, this.yCenter);
        ctx.lineTo(position.x, position.y);
        ctx.stroke();
      }
      ctx.restore();
    }
  }
  drawBorder() {
  }
  drawLabels() {
    const ctx = this.ctx;
    const opts = this.options;
    const tickOpts = opts.ticks;
    if (!tickOpts.display) {
      return;
    }
    const startAngle = this.getIndexAngle(0);
    let offset, width;
    ctx.save();
    ctx.translate(this.xCenter, this.yCenter);
    ctx.rotate(startAngle);
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    this.ticks.forEach((tick, index) => {
      if (index === 0 && !opts.reverse) {
        return;
      }
      const optsAtIndex = tickOpts.setContext(this.getContext(index));
      const tickFont = toFont(optsAtIndex.font);
      offset = this.getDistanceFromCenterForValue(this.ticks[index].value);
      if (optsAtIndex.showLabelBackdrop) {
        ctx.font = tickFont.string;
        width = ctx.measureText(tick.label).width;
        ctx.fillStyle = optsAtIndex.backdropColor;
        const padding = toPadding(optsAtIndex.backdropPadding);
        ctx.fillRect(-width / 2 - padding.left, -offset - tickFont.size / 2 - padding.top, width + padding.width, tickFont.size + padding.height);
      }
      renderText(ctx, tick.label, 0, -offset, tickFont, {
        color: optsAtIndex.color
      });
    });
    ctx.restore();
  }
  drawTitle() {
  }
}
__publicField(RadialLinearScale, "id", "radialLinear");
__publicField(RadialLinearScale, "defaults", {
  display: true,
  animate: true,
  position: "chartArea",
  angleLines: {
    display: true,
    lineWidth: 1,
    borderDash: [],
    borderDashOffset: 0
  },
  grid: {
    circular: false
  },
  startAngle: 0,
  ticks: {
    showLabelBackdrop: true,
    callback: Ticks.formatters.numeric
  },
  pointLabels: {
    backdropColor: void 0,
    backdropPadding: 2,
    display: true,
    font: {
      size: 10
    },
    callback(label) {
      return label;
    },
    padding: 5,
    centerPointLabels: false
  }
});
__publicField(RadialLinearScale, "defaultRoutes", {
  "angleLines.color": "borderColor",
  "pointLabels.color": "color",
  "ticks.color": "color"
});
__publicField(RadialLinearScale, "descriptors", {
  angleLines: {
    _fallback: "grid"
  }
});
const INTERVALS = {
  millisecond: {
    common: true,
    size: 1,
    steps: 1e3
  },
  second: {
    common: true,
    size: 1e3,
    steps: 60
  },
  minute: {
    common: true,
    size: 6e4,
    steps: 60
  },
  hour: {
    common: true,
    size: 36e5,
    steps: 24
  },
  day: {
    common: true,
    size: 864e5,
    steps: 30
  },
  week: {
    common: false,
    size: 6048e5,
    steps: 4
  },
  month: {
    common: true,
    size: 2628e6,
    steps: 12
  },
  quarter: {
    common: false,
    size: 7884e6,
    steps: 4
  },
  year: {
    common: true,
    size: 3154e7
  }
};
const UNITS = /* @__PURE__ */ Object.keys(INTERVALS);
function sorter(a, b) {
  return a - b;
}
function parse(scale, input) {
  if (isNullOrUndef(input)) {
    return null;
  }
  const adapter = scale._adapter;
  const { parser, round: round2, isoWeekday } = scale._parseOpts;
  let value = input;
  if (typeof parser === "function") {
    value = parser(value);
  }
  if (!isNumberFinite(value)) {
    value = typeof parser === "string" ? adapter.parse(value, parser) : adapter.parse(value);
  }
  if (value === null) {
    return null;
  }
  if (round2) {
    value = round2 === "week" && (isNumber(isoWeekday) || isoWeekday === true) ? adapter.startOf(value, "isoWeek", isoWeekday) : adapter.startOf(value, round2);
  }
  return +value;
}
function determineUnitForAutoTicks(minUnit, min, max, capacity) {
  const ilen = UNITS.length;
  for (let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {
    const interval = INTERVALS[UNITS[i]];
    const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;
    if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {
      return UNITS[i];
    }
  }
  return UNITS[ilen - 1];
}
function determineUnitForFormatting(scale, numTicks, minUnit, min, max) {
  for (let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {
    const unit = UNITS[i];
    if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {
      return unit;
    }
  }
  return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];
}
function determineMajorUnit(unit) {
  for (let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {
    if (INTERVALS[UNITS[i]].common) {
      return UNITS[i];
    }
  }
}
function addTick(ticks, time, timestamps) {
  if (!timestamps) {
    ticks[time] = true;
  } else if (timestamps.length) {
    const { lo, hi } = _lookup(timestamps, time);
    const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];
    ticks[timestamp] = true;
  }
}
function setMajorTicks(scale, ticks, map2, majorUnit) {
  const adapter = scale._adapter;
  const first = +adapter.startOf(ticks[0].value, majorUnit);
  const last = ticks[ticks.length - 1].value;
  let major, index;
  for (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {
    index = map2[major];
    if (index >= 0) {
      ticks[index].major = true;
    }
  }
  return ticks;
}
function ticksFromTimestamps(scale, values, majorUnit) {
  const ticks = [];
  const map2 = {};
  const ilen = values.length;
  let i, value;
  for (i = 0; i < ilen; ++i) {
    value = values[i];
    map2[value] = i;
    ticks.push({
      value,
      major: false
    });
  }
  return ilen === 0 || !majorUnit ? ticks : setMajorTicks(scale, ticks, map2, majorUnit);
}
class TimeScale extends Scale {
  constructor(props) {
    super(props);
    this._cache = {
      data: [],
      labels: [],
      all: []
    };
    this._unit = "day";
    this._majorUnit = void 0;
    this._offsets = {};
    this._normalized = false;
    this._parseOpts = void 0;
  }
  init(scaleOpts, opts = {}) {
    const time = scaleOpts.time || (scaleOpts.time = {});
    const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);
    adapter.init(opts);
    mergeIf(time.displayFormats, adapter.formats());
    this._parseOpts = {
      parser: time.parser,
      round: time.round,
      isoWeekday: time.isoWeekday
    };
    super.init(scaleOpts);
    this._normalized = opts.normalized;
  }
  parse(raw, index) {
    if (raw === void 0) {
      return null;
    }
    return parse(this, raw);
  }
  beforeLayout() {
    super.beforeLayout();
    this._cache = {
      data: [],
      labels: [],
      all: []
    };
  }
  determineDataLimits() {
    const options = this.options;
    const adapter = this._adapter;
    const unit = options.time.unit || "day";
    let { min, max, minDefined, maxDefined } = this.getUserBounds();
    function _applyBounds(bounds) {
      if (!minDefined && !isNaN(bounds.min)) {
        min = Math.min(min, bounds.min);
      }
      if (!maxDefined && !isNaN(bounds.max)) {
        max = Math.max(max, bounds.max);
      }
    }
    if (!minDefined || !maxDefined) {
      _applyBounds(this._getLabelBounds());
      if (options.bounds !== "ticks" || options.ticks.source !== "labels") {
        _applyBounds(this.getMinMax(false));
      }
    }
    min = isNumberFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);
    max = isNumberFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;
    this.min = Math.min(min, max - 1);
    this.max = Math.max(min + 1, max);
  }
  _getLabelBounds() {
    const arr = this.getLabelTimestamps();
    let min = Number.POSITIVE_INFINITY;
    let max = Number.NEGATIVE_INFINITY;
    if (arr.length) {
      min = arr[0];
      max = arr[arr.length - 1];
    }
    return {
      min,
      max
    };
  }
  buildTicks() {
    const options = this.options;
    const timeOpts = options.time;
    const tickOpts = options.ticks;
    const timestamps = tickOpts.source === "labels" ? this.getLabelTimestamps() : this._generate();
    if (options.bounds === "ticks" && timestamps.length) {
      this.min = this._userMin || timestamps[0];
      this.max = this._userMax || timestamps[timestamps.length - 1];
    }
    const min = this.min;
    const max = this.max;
    const ticks = _filterBetween(timestamps, min, max);
    this._unit = timeOpts.unit || (tickOpts.autoSkip ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min)) : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));
    this._majorUnit = !tickOpts.major.enabled || this._unit === "year" ? void 0 : determineMajorUnit(this._unit);
    this.initOffsets(timestamps);
    if (options.reverse) {
      ticks.reverse();
    }
    return ticksFromTimestamps(this, ticks, this._majorUnit);
  }
  afterAutoSkip() {
    if (this.options.offsetAfterAutoskip) {
      this.initOffsets(this.ticks.map((tick) => +tick.value));
    }
  }
  initOffsets(timestamps = []) {
    let start = 0;
    let end = 0;
    let first, last;
    if (this.options.offset && timestamps.length) {
      first = this.getDecimalForValue(timestamps[0]);
      if (timestamps.length === 1) {
        start = 1 - first;
      } else {
        start = (this.getDecimalForValue(timestamps[1]) - first) / 2;
      }
      last = this.getDecimalForValue(timestamps[timestamps.length - 1]);
      if (timestamps.length === 1) {
        end = last;
      } else {
        end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;
      }
    }
    const limit = timestamps.length < 3 ? 0.5 : 0.25;
    start = _limitValue(start, 0, limit);
    end = _limitValue(end, 0, limit);
    this._offsets = {
      start,
      end,
      factor: 1 / (start + 1 + end)
    };
  }
  _generate() {
    const adapter = this._adapter;
    const min = this.min;
    const max = this.max;
    const options = this.options;
    const timeOpts = options.time;
    const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));
    const stepSize = valueOrDefault(options.ticks.stepSize, 1);
    const weekday = minor === "week" ? timeOpts.isoWeekday : false;
    const hasWeekday = isNumber(weekday) || weekday === true;
    const ticks = {};
    let first = min;
    let time, count;
    if (hasWeekday) {
      first = +adapter.startOf(first, "isoWeek", weekday);
    }
    first = +adapter.startOf(first, hasWeekday ? "day" : minor);
    if (adapter.diff(max, min, minor) > 1e5 * stepSize) {
      throw new Error(min + " and " + max + " are too far apart with stepSize of " + stepSize + " " + minor);
    }
    const timestamps = options.ticks.source === "data" && this.getDataTimestamps();
    for (time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++) {
      addTick(ticks, time, timestamps);
    }
    if (time === max || options.bounds === "ticks" || count === 1) {
      addTick(ticks, time, timestamps);
    }
    return Object.keys(ticks).sort((a, b) => a - b).map((x) => +x);
  }
  getLabelForValue(value) {
    const adapter = this._adapter;
    const timeOpts = this.options.time;
    if (timeOpts.tooltipFormat) {
      return adapter.format(value, timeOpts.tooltipFormat);
    }
    return adapter.format(value, timeOpts.displayFormats.datetime);
  }
  _tickFormatFunction(time, index, ticks, format) {
    const options = this.options;
    const formatter = options.ticks.callback;
    if (formatter) {
      return callback(formatter, [
        time,
        index,
        ticks
      ], this);
    }
    const formats = options.time.displayFormats;
    const unit = this._unit;
    const majorUnit = this._majorUnit;
    const minorFormat = unit && formats[unit];
    const majorFormat = majorUnit && formats[majorUnit];
    const tick = ticks[index];
    const major = majorUnit && majorFormat && tick && tick.major;
    return this._adapter.format(time, format || (major ? majorFormat : minorFormat));
  }
  generateTickLabels(ticks) {
    let i, ilen, tick;
    for (i = 0, ilen = ticks.length; i < ilen; ++i) {
      tick = ticks[i];
      tick.label = this._tickFormatFunction(tick.value, i, ticks);
    }
  }
  getDecimalForValue(value) {
    return value === null ? NaN : (value - this.min) / (this.max - this.min);
  }
  getPixelForValue(value) {
    const offsets = this._offsets;
    const pos = this.getDecimalForValue(value);
    return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);
  }
  getValueForPixel(pixel) {
    const offsets = this._offsets;
    const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;
    return this.min + pos * (this.max - this.min);
  }
  _getLabelSize(label) {
    const ticksOpts = this.options.ticks;
    const tickLabelWidth = this.ctx.measureText(label).width;
    const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);
    const cosRotation = Math.cos(angle);
    const sinRotation = Math.sin(angle);
    const tickFontSize = this._resolveTickFontOptions(0).size;
    return {
      w: tickLabelWidth * cosRotation + tickFontSize * sinRotation,
      h: tickLabelWidth * sinRotation + tickFontSize * cosRotation
    };
  }
  _getLabelCapacity(exampleTime) {
    const timeOpts = this.options.time;
    const displayFormats = timeOpts.displayFormats;
    const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;
    const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [
      exampleTime
    ], this._majorUnit), format);
    const size = this._getLabelSize(exampleLabel);
    const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;
    return capacity > 0 ? capacity : 1;
  }
  getDataTimestamps() {
    let timestamps = this._cache.data || [];
    let i, ilen;
    if (timestamps.length) {
      return timestamps;
    }
    const metas = this.getMatchingVisibleMetas();
    if (this._normalized && metas.length) {
      return this._cache.data = metas[0].controller.getAllParsedValues(this);
    }
    for (i = 0, ilen = metas.length; i < ilen; ++i) {
      timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));
    }
    return this._cache.data = this.normalize(timestamps);
  }
  getLabelTimestamps() {
    const timestamps = this._cache.labels || [];
    let i, ilen;
    if (timestamps.length) {
      return timestamps;
    }
    const labels = this.getLabels();
    for (i = 0, ilen = labels.length; i < ilen; ++i) {
      timestamps.push(parse(this, labels[i]));
    }
    return this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps);
  }
  normalize(values) {
    return _arrayUnique(values.sort(sorter));
  }
}
__publicField(TimeScale, "id", "time");
__publicField(TimeScale, "defaults", {
  bounds: "data",
  adapters: {},
  time: {
    parser: false,
    unit: false,
    round: false,
    isoWeekday: false,
    minUnit: "millisecond",
    displayFormats: {}
  },
  ticks: {
    source: "auto",
    callback: false,
    major: {
      enabled: false
    }
  }
});
function interpolate(table, val, reverse) {
  let lo = 0;
  let hi = table.length - 1;
  let prevSource, nextSource, prevTarget, nextTarget;
  if (reverse) {
    if (val >= table[lo].pos && val <= table[hi].pos) {
      ({ lo, hi } = _lookupByKey(table, "pos", val));
    }
    ({ pos: prevSource, time: prevTarget } = table[lo]);
    ({ pos: nextSource, time: nextTarget } = table[hi]);
  } else {
    if (val >= table[lo].time && val <= table[hi].time) {
      ({ lo, hi } = _lookupByKey(table, "time", val));
    }
    ({ time: prevSource, pos: prevTarget } = table[lo]);
    ({ time: nextSource, pos: nextTarget } = table[hi]);
  }
  const span = nextSource - prevSource;
  return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;
}
class TimeSeriesScale extends TimeScale {
  constructor(props) {
    super(props);
    this._table = [];
    this._minPos = void 0;
    this._tableRange = void 0;
  }
  initOffsets() {
    const timestamps = this._getTimestampsForTable();
    const table = this._table = this.buildLookupTable(timestamps);
    this._minPos = interpolate(table, this.min);
    this._tableRange = interpolate(table, this.max) - this._minPos;
    super.initOffsets(timestamps);
  }
  buildLookupTable(timestamps) {
    const { min, max } = this;
    const items = [];
    const table = [];
    let i, ilen, prev, curr, next;
    for (i = 0, ilen = timestamps.length; i < ilen; ++i) {
      curr = timestamps[i];
      if (curr >= min && curr <= max) {
        items.push(curr);
      }
    }
    if (items.length < 2) {
      return [
        {
          time: min,
          pos: 0
        },
        {
          time: max,
          pos: 1
        }
      ];
    }
    for (i = 0, ilen = items.length; i < ilen; ++i) {
      next = items[i + 1];
      prev = items[i - 1];
      curr = items[i];
      if (Math.round((next + prev) / 2) !== curr) {
        table.push({
          time: curr,
          pos: i / (ilen - 1)
        });
      }
    }
    return table;
  }
  _getTimestampsForTable() {
    let timestamps = this._cache.all || [];
    if (timestamps.length) {
      return timestamps;
    }
    const data = this.getDataTimestamps();
    const label = this.getLabelTimestamps();
    if (data.length && label.length) {
      timestamps = this.normalize(data.concat(label));
    } else {
      timestamps = data.length ? data : label;
    }
    timestamps = this._cache.all = timestamps;
    return timestamps;
  }
  getDecimalForValue(value) {
    return (interpolate(this._table, value) - this._minPos) / this._tableRange;
  }
  getValueForPixel(pixel) {
    const offsets = this._offsets;
    const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;
    return interpolate(this._table, decimal * this._tableRange + this._minPos, true);
  }
}
__publicField(TimeSeriesScale, "id", "timeseries");
__publicField(TimeSeriesScale, "defaults", TimeScale.defaults);
const CommonProps = {
  data: {
    type: Object,
    required: true
  },
  options: {
    type: Object,
    default: () => ({})
  },
  plugins: {
    type: Array,
    default: () => []
  },
  datasetIdKey: {
    type: String,
    default: "label"
  },
  updateMode: {
    type: String,
    default: void 0
  }
};
const Props = {
  type: {
    type: String,
    required: true
  },
  ...CommonProps
};
const compatProps = version$1[0] === "2" ? (internals, props) => Object.assign(internals, {
  attrs: props
}) : (internals, props) => Object.assign(internals, props);
function toRawIfProxy(obj) {
  return isProxy(obj) ? toRaw(obj) : obj;
}
function cloneProxy(obj) {
  let src = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : obj;
  return isProxy(src) ? new Proxy(obj, {}) : obj;
}
function setOptions(chart, nextOptions) {
  const options = chart.options;
  if (options && nextOptions) {
    Object.assign(options, nextOptions);
  }
}
function setLabels(currentData, nextLabels) {
  currentData.labels = nextLabels;
}
function setDatasets(currentData, nextDatasets, datasetIdKey) {
  const addedDatasets = [];
  currentData.datasets = nextDatasets.map((nextDataset) => {
    const currentDataset = currentData.datasets.find((dataset) => dataset[datasetIdKey] === nextDataset[datasetIdKey]);
    if (!currentDataset || !nextDataset.data || addedDatasets.includes(currentDataset)) {
      return {
        ...nextDataset
      };
    }
    addedDatasets.push(currentDataset);
    Object.assign(currentDataset, nextDataset);
    return currentDataset;
  });
}
function cloneData(data, datasetIdKey) {
  const nextData = {
    labels: [],
    datasets: []
  };
  setLabels(nextData, data.labels);
  setDatasets(nextData, data.datasets, datasetIdKey);
  return nextData;
}
const Chart = defineComponent({
  props: Props,
  setup(props, param) {
    let { expose } = param;
    const canvasRef = ref(null);
    const chartRef = shallowRef(null);
    expose({
      chart: chartRef
    });
    const renderChart = () => {
      if (!canvasRef.value)
        return;
      const { type, data, options, plugins, datasetIdKey } = props;
      const clonedData = cloneData(data, datasetIdKey);
      const proxiedData = cloneProxy(clonedData, data);
      chartRef.value = new Chart$1(canvasRef.value, {
        type,
        data: proxiedData,
        options: {
          ...options
        },
        plugins
      });
    };
    const destroyChart = () => {
      const chart = toRaw(chartRef.value);
      if (chart) {
        chart.destroy();
        chartRef.value = null;
      }
    };
    const update = (chart) => {
      chart.update(props.updateMode);
    };
    onMounted(renderChart);
    onBeforeUnmount(destroyChart);
    watch([
      () => props.options,
      () => props.data
    ], (param2, param1) => {
      let [nextOptionsProxy, nextDataProxy] = param2, [prevOptionsProxy, prevDataProxy] = param1;
      const chart = toRaw(chartRef.value);
      if (!chart) {
        return;
      }
      let shouldUpdate = false;
      if (nextOptionsProxy) {
        const nextOptions = toRawIfProxy(nextOptionsProxy);
        const prevOptions = toRawIfProxy(prevOptionsProxy);
        if (nextOptions && nextOptions !== prevOptions) {
          setOptions(chart, nextOptions);
          shouldUpdate = true;
        }
      }
      if (nextDataProxy) {
        const nextLabels = toRawIfProxy(nextDataProxy.labels);
        const prevLabels = toRawIfProxy(prevDataProxy.labels);
        const nextDatasets = toRawIfProxy(nextDataProxy.datasets);
        const prevDatasets = toRawIfProxy(prevDataProxy.datasets);
        if (nextLabels !== prevLabels) {
          setLabels(chart.config.data, nextLabels);
          shouldUpdate = true;
        }
        if (nextDatasets && nextDatasets !== prevDatasets) {
          setDatasets(chart.config.data, nextDatasets, props.datasetIdKey);
          shouldUpdate = true;
        }
      }
      if (shouldUpdate) {
        update(chart);
      }
    }, {
      deep: true
    });
    return () => {
      return h("canvas", {
        ref: canvasRef
      });
    };
  }
});
function createTypedChart(type, registerables) {
  Chart$1.register(registerables);
  return defineComponent({
    props: CommonProps,
    setup(props, param) {
      let { expose } = param;
      const ref2 = shallowRef(null);
      const reforwardRef = (chartRef) => {
        ref2.value = chartRef == null ? void 0 : chartRef.chart;
      };
      expose({
        chart: ref2
      });
      return () => {
        return h(Chart, compatProps({
          ref: reforwardRef
        }, {
          type,
          ...props
        }));
      };
    }
  });
}
const Bar = /* @__PURE__ */ createTypedChart("bar", BarController);
const Pie = /* @__PURE__ */ createTypedChart("pie", PieController);
const _hoisted_1$2 = { class: "SenExtrabold-font" };
const _sfc_main$3 = /* @__PURE__ */ defineComponent({
  __name: "BarChart",
  props: {
    chartId: { default: "bar-chart" },
    datasetIdKey: { default: "label" },
    width: { default: 400 },
    height: { default: 400 },
    cssClasses: { default: "" },
    styles: { default: () => ({}) },
    plugins: { default: () => [] },
    invoicesFY: { default: null },
    dbConn: { default: null }
  },
  setup(__props) {
    const props = __props;
    Chart$1.register(CategoryScale, LinearScale, BarElement, plugin_title, plugin_tooltip, plugin_legend);
    const $q = useQuasar();
    const { t } = useI18n();
    const platform = $q.platform;
    const now = ref(new Date());
    const yearLabel = new Date().getMonth() > 5 ? new Date().getFullYear() : new Date().getFullYear() - 1;
    const chartLabels = [];
    chartLabels.push(
      `${t("homeComponent.barChart.juneLabel")} ${yearLabel}`,
      `${t("homeComponent.barChart.julyLabel")} ${yearLabel}`,
      `${t("homeComponent.barChart.augustLabel")} ${yearLabel}`,
      `${t("homeComponent.barChart.septemberLabel")} ${yearLabel}`,
      `${t("homeComponent.barChart.octoberLabel")} ${yearLabel}`,
      `${t("homeComponent.barChart.novemberLabel")} ${yearLabel}`,
      `${t("homeComponent.barChart.decemberLabel")} ${yearLabel}`,
      `${t("homeComponent.barChart.januaryLabel")} ${yearLabel + 1}`,
      `${t("homeComponent.barChart.februaryLabel")} ${yearLabel + 1}`,
      `${t("homeComponent.barChart.marchLabel")} ${yearLabel + 1}`,
      `${t("homeComponent.barChart.aprilLabel")} ${yearLabel + 1}`,
      `${t("homeComponent.barChart.mayLabel")} ${yearLabel + 1}`
    );
    const datas = ref([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
    const chartData = ref({
      labels: chartLabels,
      datasets: [
        {
          label: t("homeComponent.barChart.datasetLabel"),
          backgroundColor: "#f87979",
          data: datas.value
        }
      ]
    });
    const orientation = ref(null);
    const compact = computed(() => {
      let ret = false;
      if (!!orientation.value) {
        if (orientation.value === "portrait-primary" || orientation.value === "portrait-secondary") {
          ret = true;
        }
      }
      return ret;
    });
    const chartStyle = computed(() => {
      const ret = {
        position: "relative",
        responsive: true
      };
      if (!compact.value) {
        ret.responsive = false;
        ret.height = props.height;
        ret.width = props.width;
      }
      return ret;
    });
    const loaded = ref(false);
    let counterStore = null, userStore = null, prefs = null;
    if (platform.is.desktop) {
      counterStore = useCounterStore();
      userStore = useUserStore();
    } else {
      orientation.value = window.screen.orientation.type;
      window.addEventListener("orientationchange", handleOrientation);
    }
    (async () => {
      if (platform.is.desktop) {
        {
          if (!!props.invoicesFY === false)
            await counterStore.getFinancialYearInvoices(userStore.getUser.userId);
        }
      } else {
        prefs = await __vitePreload(() => import("./index3.js"), true ? ["assets/index3.js","assets/index.js","assets/index.css"] : void 0);
        const usr = await prefs.getPref("user");
        let dateStart = null;
        if (now.value.getMonth() < 5) {
          dateStart = new Date(`${now.value.getFullYear() - 1}-06-01`);
        } else {
          dateStart = new Date(`${now.value.getFullYear()}-06-01`);
        }
        if (!!props.invoicesFY === false) {
          let isOpen = await isDbConnectionOpen(props.dbConn);
          isOpen = !isOpen || !!isOpen ? await openDbConnection(props.dbConn) : isOpen;
          if (isOpen) {
            const sql = `SELECT \`facture\`.\`factureId\`, \`facture\`.\`date\`, \`facture\`.\`invoiceHTPrice\`, \`facture\`.\`invoiceTTPrice\`, \`facture\`.\`tvaValue\`, \`langue\`.\`langueId\` AS \`langue.langueId\`, \`langue\`.\`libelle\` AS \`langue.libelle\`, \`langue\`.\`nom\` AS \`langue.nom\`, \`devise\`.\`deviseId\` AS \`devise.deviseId\`, \`devise\`.\`symbole\` AS \`devise.symbole\`, \`devise\`.\`libelle\` AS \`devise.libelle\`, \`buyer\`.\`actorId\` AS \`buyer.actorId\`, \`buyer\`.\`cp\` AS \`buyer.cp\`, \`buyer\`.\`email\` AS \`buyer.email\`, \`buyer\`.\`nom\` AS \`buyer.nom\`, \`buyer\`.\`nomRue\` AS \`buyer.nomRue\`, \`buyer\`.\`numCommercant\` AS \`buyer.numCommercant\`, \`buyer\`.\`numRue\` AS \`buyer.numRue\`, \`buyer\`.\`prenom\` AS \`buyer.prenom\`, \`buyer\`.\`tel\` AS \`buyer.tel\`, \`buyer\`.\`actorTypeId\` AS \`buyer.actorTypeId\`, \`buyer\`.\`ville\` AS \`buyer.ville\`, \`seller\`.\`actorId\` AS \`seller.actorId\`, \`seller\`.\`cp\` AS \`seller.cp\`, \`seller\`.\`email\` AS \`seller.email\`, \`seller\`.\`nom\` AS \`seller.nom\`, \`seller\`.\`nomRue\` AS \`seller.nomRue\`, \`seller\`.\`numCommercant\` AS \`seller.numCommercant\`, \`seller\`.\`numRue\` AS \`seller.numRue\`, \`seller\`.\`prenom\` AS \`seller.prenom\`, \`seller\`.\`tel\` AS \`seller.tel\`, \`seller\`.\`actorTypeId\` AS \`seller.actorTypeId\`, \`seller\`.\`ville\` AS \`seller.ville\`, \`payments\`.\`paymentId\` AS \`payments.paymentId\`, \`payments\`.\`etat\` AS \`payments.etat\`, \`payments\`.\`paymentValue\` AS \`payments.paymentValue\`, \`payments\`.\`paymentType\` AS \`payments.paymentType\`, \`payments\`.\`factureId\` AS \`payments.factureId\`, strftime('%s', \`facture\`.\`date\`) AS \`date_format\` FROM \`facture\` AS \`facture\` LEFT OUTER JOIN \`langue\` AS \`langue\` ON \`facture\`.\`languageId\` = \`langue\`.\`langueId\` LEFT OUTER JOIN \`devise\` AS \`devise\` ON \`facture\`.\`deviseId\` = \`devise\`.\`deviseId\` LEFT OUTER JOIN \`personne\` AS \`buyer\` ON \`facture\`.\`buyerId\` = \`buyer\`.\`actorId\` LEFT OUTER JOIN \`personne\` AS \`seller\` ON \`facture\`.\`sellerId\` = \`seller\`.\`actorId\` LEFT OUTER JOIN \`payment\` AS \`payments\` ON \`facture\`.\`factureId\` = \`payments\`.\`factureId\` WHERE \`facture\`.\`administratorId\` = '${usr.user.userId}' AND \`date_format\` > strftime('%s', '${dateStart.toISOString()}')`;
            let counterSess = await prefs.getPref("counter");
            const values = await newQuery(props.dbConn, sql);
            if (!!values && values.values.length) {
              const intRes = sanitizeQueryResult(values.values);
              await setDecryptApi();
              const res = await __TRANSFORMOBJ__(intRes);
              counterSess = !!counterSess ? counterSess : {};
              counterSess.invoicesFY = res;
              await prefs.setPref("counter", counterSess, false);
            }
          } else {
            await prefs.setPref("message", {
              messages: [
                {
                  severity: true,
                  content: t("homeComponent.results.ko.fetch_stats", { err: "Unable to open SQLite DB !" })
                }
              ],
              messagesVisibility: true
            });
          }
        }
      }
      const lastDayNum = checkLeapYear(yearLabel + 1) ? "29" : "28";
      datas.value = [];
      let ind = 0, month = 6;
      while (ind < 12) {
        let param = [], last = 30;
        const array1 = [7, 8, 10, 12, 1, 3, 5];
        if (month === 13) {
          month = 1;
        }
        if (array1.findIndex((elem) => elem === month) !== -1) {
          last = 31;
        }
        if (month < 10) {
          if (month === 2) {
            param.push(`${yearLabel + 1}-0${month}-01`);
            param.push(`${yearLabel + 1}-0${month}-${lastDayNum}`);
          } else if (month > 5) {
            param.push(`${yearLabel}-0${month}-01`);
            param.push(`${yearLabel}-0${month}-${last}`);
          } else {
            param.push(`${yearLabel + 1}-0${month}-01`);
            param.push(`${yearLabel + 1}-0${month}-${last}`);
          }
        } else {
          param.push(`${yearLabel}-${month}-01`);
          param.push(`${yearLabel}-${month}-${last}`);
        }
        const res = await getNbInvoices(
          new Date(param[0]),
          new Date(param[1])
        );
        datas.value.push(res);
        ind++;
        month++;
      }
      chartData.value = {
        labels: chartLabels,
        datasets: [
          {
            label: t("homeComponent.barChart.datasetLabel"),
            backgroundColor: "#f87979",
            data: datas.value
          }
        ]
      };
      loaded.value = true;
    })();
    async function getNbInvoices(dateStart, dateEnd) {
      let ret = 0;
      if (platform.is.desktop) {
        const invoices = !!props.invoicesFY ? props.invoicesFY : counterStore.getInvoicesFY;
        for (const k in invoices) {
          const d = new Date(invoices[k].date);
          if (d >= dateStart && d <= dateEnd)
            ret += 1;
        }
      } else {
        const count = await prefs.getPref("counter");
        const invoices = !!props.invoicesFY ? props.invoicesFY : !!count && !!count.invoicesFY ? count.invoicesFY : [];
        for (const k in invoices) {
          const d = new Date(invoices[k].date);
          if (d >= dateStart && d <= dateEnd)
            ret += 1;
        }
      }
      return ret;
    }
    function sanitizeQueryResult(obj) {
      let ret = [], ind = 0;
      for (const k in obj) {
        const prevId = k > 0 ? obj[k - 1].factureId : 0;
        if (prevId && prevId !== obj[k].factureId) {
          ind++;
        }
        if (!prevId || prevId && prevId !== obj[k].factureId) {
          ret[ind] = {};
        }
        for (const l in obj[k]) {
          if (prevId === obj[k].factureId) {
            if (l === "commandes.orderId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (!ret[ind]["commandes"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["commandes"].push({ orderId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k][l]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["commandes"].push({ orderId: obj[k][l] });
                  else
                    ret[ind]["commandes"][foundIndex].orderId = obj[k][l];
                }
              }
            } else if (l === "commandes.contenuAdditionnel") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (!ret[ind]["commandes"].length) {
                ret[ind]["commandes"].push({ contenuAdditionnel: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                if (foundIndex === -1)
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].contenuAdditionnel = obj[k][l];
                else
                  ret[ind]["commandes"][foundIndex].contenuAdditionnel = obj[k][l];
              }
            } else if (l === "commandes.priceHt") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ priceHt: obj[k][l] });
                } else {
                  const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                  if (obj[k][l] !== null) {
                    if (foundIndex === -1)
                      ret[ind]["commandes"][ret[ind]["commandes"].length - 1].priceHt = obj[k][l];
                    else
                      ret[ind]["commandes"][foundIndex].priceHt = obj[k][l];
                  }
                }
              }
            } else if (l === "commandes.factureId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ factureId: obj[k][l] });
                } else {
                  const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                  if (obj[k][l] !== null) {
                    if (foundIndex === -1)
                      ret[ind]["commandes"][ret[ind]["commandes"].length - 1].factureId = obj[k][l];
                    else
                      ret[ind]["commandes"][foundIndex].factureId = obj[k][l];
                  }
                }
              }
            } else if (l === "payments.paymentId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k][l]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"].push({ paymentId: obj[k][l] });
                  else
                    ret[ind]["payments"][foundIndex].paymentId = obj[k][l];
                }
              }
            } else if (l === "payments.etat") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ etat: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].etat = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].etat = obj[k][l];
                }
              }
            } else if (l === "payments.paymentValue") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentValue: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentValue = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].paymentValue = obj[k][l];
                }
              }
            } else if (l === "payments.paymentType") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentType: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentType = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].paymentType = obj[k][l];
                }
              }
            } else if (l === "payments.factureId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ factureId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].factureId = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].factureId = obj[k][l];
                }
              }
            }
          } else {
            if (l === "langue.langueId") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["langueId"] = obj[k][l];
              }
            } else if (l === "langue.libelle") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["libelle"] = obj[k][l];
              }
            } else if (l === "langue.nom") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["nom"] = obj[k][l];
              }
            } else if (l === "devise.deviseId") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["deviseId"] = obj[k][l];
              }
            } else if (l === "devise.symbole") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["symbole"] = obj[k][l];
              }
            } else if (l === "devise.libelle") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["libelle"] = obj[k][l];
              }
            } else if (l === "buyer.actorId") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["actorId"] = obj[k][l];
              }
            } else if (l === "buyer.cp") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["cp"] = obj[k][l];
              }
            } else if (l === "buyer.email") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["email"] = obj[k][l];
              }
            } else if (l === "buyer.nom") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["nom"] = obj[k][l];
              }
            } else if (l === "buyer.nomRue") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["nomRue"] = obj[k][l];
              }
            } else if (l === "buyer.numCommercant") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              ret[ind]["buyer"]["numCommercant"] = obj[k][l];
            } else if (l === "buyer.numRue") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["numRue"] = obj[k][l];
              }
            } else if (l === "buyer.prenom") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["prenom"] = obj[k][l];
              }
            } else if (l === "buyer.tel") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["tel"] = obj[k][l];
              }
            } else if (l === "buyer.actorTypeId") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["actorTypeId"] = obj[k][l];
              }
            } else if (l === "buyer.ville") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["ville"] = obj[k][l];
              }
            } else if (l === "seller.actorId") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["actorId"] = obj[k][l];
              }
            } else if (l === "seller.cp") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["cp"] = obj[k][l];
              }
            } else if (l === "seller.email") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["email"] = obj[k][l];
              }
            } else if (l === "seller.nom") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["nom"] = obj[k][l];
              }
            } else if (l === "seller.nomRue") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["nomRue"] = obj[k][l];
              }
            } else if (l === "seller.numCommercant") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              ret[ind]["seller"]["numCommercant"] = obj[k][l];
            } else if (l === "seller.numRue") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["numRue"] = obj[k][l];
              }
            } else if (l === "seller.prenom") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["prenom"] = obj[k][l];
              }
            } else if (l === "seller.tel") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["tel"] = obj[k][l];
              }
            } else if (l === "seller.actorTypeId") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["actorTypeId"] = obj[k][l];
              }
            } else if (l === "seller.ville") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["ville"] = obj[k][l];
              }
            } else if (l === "commandes.orderId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ orderId: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].orderId = obj[k][l];
                }
              }
            } else if (l === "commandes.contenuAdditionnel") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ contenuAdditionnel: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].contenuAdditionnel = obj[k][l];
                }
              }
            } else if (l === "commandes.priceHt") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ priceHt: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].priceHt = obj[k][l];
                }
              }
            } else if (l === "commandes.factureId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ factureId: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].factureId = obj[k][l];
                }
              }
            } else if (l === "payments.paymentId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentId: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentId = obj[k][l];
                }
              }
            } else if (l === "payments.etat") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ etat: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].etat = obj[k][l];
                }
              }
            } else if (l === "payments.paymentValue") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentValue: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentValue = obj[k][l];
                }
              }
            } else if (l === "payments.paymentType") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentType: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentType = obj[k][l];
                }
              }
            } else if (l === "payments.factureId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ factureId: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].factureId = obj[k][l];
                }
              }
            } else {
              ret[ind][l] = obj[k][l];
            }
          }
        }
      }
      return ret;
    }
    function checkLeapYear(year) {
      let ret = false;
      if (year >= 400) {
        if (!Number.isInteger(year / 4) && !Number.isInteger(year / 100) && !Number.isInteger(year / 400)) {
          return ret;
        } else if (Number.isInteger(year / 4)) {
          if (Number.isInteger(year / 100) && !Number.isInteger(year / 400)) {
            return ret;
          } else {
            ret = true;
          }
        } else if (Number.isInteger(year / 400)) {
          ret = true;
        }
      }
      return ret;
    }
    function handleOrientation() {
      orientation.value = screen.orientation.type;
    }
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(__props.cssClasses)
      }, [
        createBaseVNode("div", _hoisted_1$2, toDisplayString(unref(t)("homeComponent.barChart.heading")), 1),
        loaded.value ? (openBlock(), createBlock(unref(Bar), {
          key: 0,
          data: chartData.value,
          style: normalizeStyle(unref(chartStyle))
        }, null, 8, ["data", "style"])) : createCommentVNode("", true)
      ], 2);
    };
  }
});
var BarChart = /* @__PURE__ */ _export_sfc(_sfc_main$3, [["__file", "BarChart.vue"]]);
const _hoisted_1$1 = { class: "SenExtrabold-font" };
const _sfc_main$2 = /* @__PURE__ */ defineComponent({
  __name: "PieChart",
  props: {
    width: { default: 200 },
    height: { default: 200 },
    cssClasses: { default: "" },
    plugins: { default: () => [] },
    invoicesFY: { default: null },
    dbConn: { default: null }
  },
  setup(__props) {
    const props = __props;
    Chart$1.register(ArcElement, plugin_tooltip, plugin_legend);
    const $q = useQuasar();
    const platform = $q.platform;
    const { t } = useI18n();
    let payStats = null, cbVal = null, cashVal = null, chqVal = null, chartData = ref({
      labels: [
        t("homeComponent.pieChart.cbLabel"),
        t("homeComponent.pieChart.cashLabel"),
        t("homeComponent.pieChart.chqLabel")
      ],
      datasets: [
        {
          backgroundColor: ["#41B883", "#E46651", "#00D8FF"],
          data: [0, 0, 0]
        }
      ]
    });
    const orientation = ref(null);
    const compact = computed(() => {
      let ret = false;
      if (!!orientation.value) {
        if (orientation.value === "portrait-primary" || orientation.value === "portrait-secondary") {
          ret = true;
        }
      }
      return ret;
    });
    const chartStyle = computed(() => {
      const ret = {
        position: "relative",
        responsive: true
      };
      if (!compact.value) {
        ret.responsive = false;
        ret.height = `${props.height}px`;
        ret.width = `${props.width}px`;
      }
      return ret;
    });
    const loaded = ref(false);
    let counterStore = null, userStore = null, prefs = null;
    if (platform.is.desktop) {
      counterStore = useCounterStore();
      userStore = useUserStore();
    } else {
      orientation.value = window.screen.orientation.type;
      window.addEventListener("orientationchange", handleOrientation);
    }
    (async () => {
      if (platform.is.desktop) {
        {
          if (!!props.invoicesFY === false)
            await counterStore.getFinancialYearInvoices(userStore.getUser.userId);
        }
      } else {
        prefs = await __vitePreload(() => import("./index3.js"), true ? ["assets/index3.js","assets/index.js","assets/index.css"] : void 0);
        const usr = await prefs.getPref("user");
        let dateStart = null;
        const now = new Date();
        if (now.getMonth() < 5) {
          dateStart = new Date(`${now.getFullYear() - 1}-06-01`);
        } else {
          dateStart = new Date(`${now.getFullYear()}-06-01`);
        }
        if (!!props.invoicesFY === false) {
          let isOpen = await isDbConnectionOpen(props.dbConn);
          isOpen = !isOpen || !!isOpen ? await openDbConnection(props.dbConn) : isOpen;
          if (isOpen) {
            const sql = `SELECT \`facture\`.\`factureId\`, \`facture\`.\`date\`, \`facture\`.\`invoiceHTPrice\`, \`facture\`.\`invoiceTTPrice\`, \`facture\`.\`tvaValue\`, \`langue\`.\`langueId\` AS \`langue.langueId\`, \`langue\`.\`libelle\` AS \`langue.libelle\`, \`langue\`.\`nom\` AS \`langue.nom\`, \`devise\`.\`deviseId\` AS \`devise.deviseId\`, \`devise\`.\`symbole\` AS \`devise.symbole\`, \`devise\`.\`libelle\` AS \`devise.libelle\`, \`buyer\`.\`actorId\` AS \`buyer.actorId\`, \`buyer\`.\`cp\` AS \`buyer.cp\`, \`buyer\`.\`email\` AS \`buyer.email\`, \`buyer\`.\`nom\` AS \`buyer.nom\`, \`buyer\`.\`nomRue\` AS \`buyer.nomRue\`, \`buyer\`.\`numCommercant\` AS \`buyer.numCommercant\`, \`buyer\`.\`numRue\` AS \`buyer.numRue\`, \`buyer\`.\`prenom\` AS \`buyer.prenom\`, \`buyer\`.\`tel\` AS \`buyer.tel\`, \`buyer\`.\`actorTypeId\` AS \`buyer.actorTypeId\`, \`buyer\`.\`ville\` AS \`buyer.ville\`, \`seller\`.\`actorId\` AS \`seller.actorId\`, \`seller\`.\`cp\` AS \`seller.cp\`, \`seller\`.\`email\` AS \`seller.email\`, \`seller\`.\`nom\` AS \`seller.nom\`, \`seller\`.\`nomRue\` AS \`seller.nomRue\`, \`seller\`.\`numCommercant\` AS \`seller.numCommercant\`, \`seller\`.\`numRue\` AS \`seller.numRue\`, \`seller\`.\`prenom\` AS \`seller.prenom\`, \`seller\`.\`tel\` AS \`seller.tel\`, \`seller\`.\`actorTypeId\` AS \`seller.actorTypeId\`, \`seller\`.\`ville\` AS \`seller.ville\`, \`payments\`.\`paymentId\` AS \`payments.paymentId\`, \`payments\`.\`etat\` AS \`payments.etat\`, \`payments\`.\`paymentValue\` AS \`payments.paymentValue\`, \`payments\`.\`paymentType\` AS \`payments.paymentType\`, \`payments\`.\`factureId\` AS \`payments.factureId\`, strftime('%s', \`facture\`.\`date\`) AS \`date_format\` FROM \`facture\` AS \`facture\` LEFT OUTER JOIN \`langue\` AS \`langue\` ON \`facture\`.\`languageId\` = \`langue\`.\`langueId\` LEFT OUTER JOIN \`devise\` AS \`devise\` ON \`facture\`.\`deviseId\` = \`devise\`.\`deviseId\` LEFT OUTER JOIN \`personne\` AS \`buyer\` ON \`facture\`.\`buyerId\` = \`buyer\`.\`actorId\` LEFT OUTER JOIN \`personne\` AS \`seller\` ON \`facture\`.\`sellerId\` = \`seller\`.\`actorId\` LEFT OUTER JOIN \`payment\` AS \`payments\` ON \`facture\`.\`factureId\` = \`payments\`.\`factureId\` WHERE \`facture\`.\`administratorId\` = '${usr.user.userId}' AND \`date_format\` > strftime('%s', '${dateStart.toISOString()}')`;
            let counterSess = await prefs.getPref("counter");
            const values = await newQuery(props.dbConn, sql);
            if (values.values.length) {
              const intRes = sanitizeQueryResult(values.values);
              await setDecryptApi();
              const res = await __TRANSFORMOBJ__(intRes);
              counterSess = !!counterSess ? counterSess : {};
              counterSess.invoicesFY = res;
              await prefs.setPref("counter", counterSess, false);
            }
          } else {
            await prefs.setPref("message", {
              messages: [
                {
                  severity: true,
                  content: t("homeComponent.results.ko.fetch_stats", { err: "Unable to open SQLite DB !" })
                }
              ],
              messagesVisibility: true
            });
          }
        }
      }
      payStats = await getPaymentsStats();
      if (payStats.all && payStats.cb)
        cbVal = parseFloat((payStats.cb * 100 / payStats.all).toFixed(0));
      else
        cbVal = 0;
      if (payStats.all && payStats.cash)
        cashVal = parseFloat((payStats.cash * 100 / payStats.all).toFixed(0));
      else
        cashVal = 0;
      if (payStats.all && payStats.chqVal)
        chqVal = parseFloat((payStats.chq * 100 / payStats.all).toFixed(0));
      else
        chqVal = 0;
      chartData.value = {
        labels: [
          t("homeComponent.pieChart.cbLabel"),
          t("homeComponent.pieChart.cashLabel"),
          t("homeComponent.pieChart.chqLabel")
        ],
        datasets: [
          {
            backgroundColor: ["#41B883", "#E46651", "#00D8FF"],
            data: [cbVal, cashVal, chqVal]
          }
        ]
      };
      loaded.value = true;
    })();
    async function getPaymentsStats() {
      let ret = { cb: 0, cash: 0, chq: 0, all: 0 };
      if (platform.is.desktop) {
        const invoices = !!props.invoicesFY ? props.invoicesFY : counterStore.getInvoicesFY;
        for (const k in invoices) {
          for (const l in invoices[k]["payments"]) {
            if (invoices[k]["payments"][l].etat) {
              switch (invoices[k]["payments"][l].paymentType) {
                case 1:
                  ret.cb += 1;
                  ret.all += 1;
                  break;
                case 2:
                  ret.cash += 1;
                  ret.all += 1;
                  break;
                case 3:
                  ret.chq += 1;
                  ret.all += 1;
                  break;
              }
            }
          }
        }
      } else {
        const count = await prefs.getPref("counter");
        const invoices = !!props.invoicesFY ? props.invoicesFY : !!count && !!count.invoicesFY ? count.invoicesFY : [];
        for (const k in invoices) {
          for (const l in invoices[k]["payments"]) {
            if (invoices[k]["payments"][l].etat) {
              switch (invoices[k]["payments"][l].paymentType) {
                case 1:
                  ret.cb += 1;
                  ret.all += 1;
                  break;
                case 2:
                  ret.cash += 1;
                  ret.all += 1;
                  break;
                case 3:
                  ret.chq += 1;
                  ret.all += 1;
                  break;
              }
            }
          }
        }
      }
      return ret;
    }
    function sanitizeQueryResult(obj) {
      let ret = [], ind = 0;
      for (const k in obj) {
        const prevId = k > 0 ? obj[k - 1].factureId : 0;
        if (prevId && prevId !== obj[k].factureId) {
          ind++;
        }
        if (!prevId || prevId && prevId !== obj[k].factureId) {
          ret[ind] = {};
        }
        for (const l in obj[k]) {
          if (prevId === obj[k].factureId) {
            if (l === "commandes.orderId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (!ret[ind]["commandes"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["commandes"].push({ orderId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k][l]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["commandes"].push({ orderId: obj[k][l] });
                  else
                    ret[ind]["commandes"][foundIndex].orderId = obj[k][l];
                }
              }
            } else if (l === "commandes.contenuAdditionnel") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (!ret[ind]["commandes"].length) {
                ret[ind]["commandes"].push({ contenuAdditionnel: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                if (foundIndex === -1)
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].contenuAdditionnel = obj[k][l];
                else
                  ret[ind]["commandes"][foundIndex].contenuAdditionnel = obj[k][l];
              }
            } else if (l === "commandes.priceHt") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ priceHt: obj[k][l] });
                } else {
                  const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                  if (obj[k][l] !== null) {
                    if (foundIndex === -1)
                      ret[ind]["commandes"][ret[ind]["commandes"].length - 1].priceHt = obj[k][l];
                    else
                      ret[ind]["commandes"][foundIndex].priceHt = obj[k][l];
                  }
                }
              }
            } else if (l === "commandes.factureId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ factureId: obj[k][l] });
                } else {
                  const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                  if (obj[k][l] !== null) {
                    if (foundIndex === -1)
                      ret[ind]["commandes"][ret[ind]["commandes"].length - 1].factureId = obj[k][l];
                    else
                      ret[ind]["commandes"][foundIndex].factureId = obj[k][l];
                  }
                }
              }
            } else if (l === "payments.paymentId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k][l]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"].push({ paymentId: obj[k][l] });
                  else
                    ret[ind]["payments"][foundIndex].paymentId = obj[k][l];
                }
              }
            } else if (l === "payments.etat") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ etat: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].etat = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].etat = obj[k][l];
                }
              }
            } else if (l === "payments.paymentValue") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentValue: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentValue = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].paymentValue = obj[k][l];
                }
              }
            } else if (l === "payments.paymentType") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentType: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentType = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].paymentType = obj[k][l];
                }
              }
            } else if (l === "payments.factureId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ factureId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].factureId = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].factureId = obj[k][l];
                }
              }
            }
          } else {
            if (l === "langue.langueId") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["langueId"] = obj[k][l];
              }
            } else if (l === "langue.libelle") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["libelle"] = obj[k][l];
              }
            } else if (l === "langue.nom") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["nom"] = obj[k][l];
              }
            } else if (l === "devise.deviseId") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["deviseId"] = obj[k][l];
              }
            } else if (l === "devise.symbole") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["symbole"] = obj[k][l];
              }
            } else if (l === "devise.libelle") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["libelle"] = obj[k][l];
              }
            } else if (l === "buyer.actorId") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["actorId"] = obj[k][l];
              }
            } else if (l === "buyer.cp") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["cp"] = obj[k][l];
              }
            } else if (l === "buyer.email") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["email"] = obj[k][l];
              }
            } else if (l === "buyer.nom") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["nom"] = obj[k][l];
              }
            } else if (l === "buyer.nomRue") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["nomRue"] = obj[k][l];
              }
            } else if (l === "buyer.numCommercant") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              ret[ind]["buyer"]["numCommercant"] = obj[k][l];
            } else if (l === "buyer.numRue") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["numRue"] = obj[k][l];
              }
            } else if (l === "buyer.prenom") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["prenom"] = obj[k][l];
              }
            } else if (l === "buyer.tel") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["tel"] = obj[k][l];
              }
            } else if (l === "buyer.actorTypeId") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["actorTypeId"] = obj[k][l];
              }
            } else if (l === "buyer.ville") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["ville"] = obj[k][l];
              }
            } else if (l === "seller.actorId") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["actorId"] = obj[k][l];
              }
            } else if (l === "seller.cp") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["cp"] = obj[k][l];
              }
            } else if (l === "seller.email") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["email"] = obj[k][l];
              }
            } else if (l === "seller.nom") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["nom"] = obj[k][l];
              }
            } else if (l === "seller.nomRue") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["nomRue"] = obj[k][l];
              }
            } else if (l === "seller.numCommercant") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              ret[ind]["seller"]["numCommercant"] = obj[k][l];
            } else if (l === "seller.numRue") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["numRue"] = obj[k][l];
              }
            } else if (l === "seller.prenom") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["prenom"] = obj[k][l];
              }
            } else if (l === "seller.tel") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["tel"] = obj[k][l];
              }
            } else if (l === "seller.actorTypeId") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["actorTypeId"] = obj[k][l];
              }
            } else if (l === "seller.ville") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["ville"] = obj[k][l];
              }
            } else if (l === "commandes.orderId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ orderId: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].orderId = obj[k][l];
                }
              }
            } else if (l === "commandes.contenuAdditionnel") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ contenuAdditionnel: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].contenuAdditionnel = obj[k][l];
                }
              }
            } else if (l === "commandes.priceHt") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ priceHt: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].priceHt = obj[k][l];
                }
              }
            } else if (l === "commandes.factureId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ factureId: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].factureId = obj[k][l];
                }
              }
            } else if (l === "payments.paymentId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentId: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentId = obj[k][l];
                }
              }
            } else if (l === "payments.etat") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ etat: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].etat = obj[k][l];
                }
              }
            } else if (l === "payments.paymentValue") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentValue: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentValue = obj[k][l];
                }
              }
            } else if (l === "payments.paymentType") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentType: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentType = obj[k][l];
                }
              }
            } else if (l === "payments.factureId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ factureId: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].factureId = obj[k][l];
                }
              }
            } else {
              ret[ind][l] = obj[k][l];
            }
          }
        }
      }
      return ret;
    }
    function handleOrientation() {
      orientation.value = screen.orientation.type;
    }
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(__props.cssClasses)
      }, [
        createBaseVNode("div", _hoisted_1$1, toDisplayString(unref(t)("homeComponent.pieChart.heading")), 1),
        loaded.value ? (openBlock(), createBlock(unref(Pie), {
          key: 0,
          data: unref(chartData),
          style: normalizeStyle(unref(chartStyle))
        }, null, 8, ["data", "style"])) : createCommentVNode("", true)
      ], 2);
    };
  }
});
var PieChart = /* @__PURE__ */ _export_sfc(_sfc_main$2, [["__file", "PieChart.vue"]]);
const _sfc_main$1 = /* @__PURE__ */ defineComponent({
  __name: "HomeTable",
  props: {
    headTableObj: { default: () => [] },
    contentTableObj: { default: () => [] },
    cssClasses: { default: "" },
    invoicesFY: { default: null },
    dbConn: { default: null }
  },
  setup(__props) {
    const props = __props;
    const $q = useQuasar();
    const platform = $q.platform;
    const { t } = useI18n();
    const defaultHeadTableObj = [
      {
        name: "totalFiscalYearHTIncomes",
        label: t("homeComponent.headTable.totalFiscalYearHTIncomes"),
        field: "totalFiscalYearHTIncomes",
        align: "center",
        sortable: false,
        headerStyle: "text-align: center"
      },
      {
        name: "totalFiscalYearTTIncomes",
        label: t("homeComponent.headTable.totalFiscalYearTTIncomes"),
        field: "totalFiscalYearTTIncomes",
        align: "center",
        sortable: false,
        headerStyle: "text-align: center"
      },
      {
        name: "totalFiscalYearPaymentsIncomes",
        label: t("homeComponent.headTable.totalFiscalYearPaymentsIncomes"),
        field: "totalFiscalYearPaymentsIncomes",
        align: "center",
        sortable: false,
        headerStyle: "text-align: center"
      },
      {
        name: "totalFiscalYearPaymentsOverdue",
        label: t("homeComponent.headTable.totalFiscalYearPaymentsOverdue"),
        field: "totalFiscalYearPaymentsOverdue",
        align: "center",
        sortable: false,
        headerStyle: "text-align: center"
      }
    ];
    const headTable = ref(props.headTableObj.length ? props.headTableObj : defaultHeadTableObj);
    const contentTable = ref(props.contentTableObj.length ? props.contentTable : []);
    const orientation = ref(null);
    const compact = ref(false);
    let userStore = null, devise = null, counterStore = null, locale = null, sessionStore = null, prefs = null, counter = null;
    if (platform.is.desktop) {
      userStore = useUserStore();
      counterStore = useCounterStore();
      sessionStore = useSessionStore();
      locale = sessionStore.getLangDisplayed !== null ? sessionStore.getLangDisplayed.nom : "en-US";
      {
        (async () => {
          devise = userStore.getUser.devise;
          await counterStore.getAllPrices();
          if (!!props.invoicesFY === false)
            await counterStore.getFinancialYearInvoices(userStore.getUser.userId);
          await counterStore.getFinancialYearNbInvoices(userStore.getUser.userId);
          if (devise.deviseId == 3) {
            contentTable.value.push(
              {
                "totalFiscalYearHTIncomes": `${await getHtFYI()} ${devise.symbole}`,
                "totalFiscalYearTTIncomes": `${await getTtFYI()} ${devise.symbole}`,
                "totalFiscalYearPaymentsIncomes": `${await getPayFYI()} ${devise.symbole}`,
                "totalFiscalYearPaymentsOverdue": `${await getNotPayFYI()} ${devise.symbole}`
              }
            );
          } else {
            contentTable.value.push(
              {
                "totalFiscalYearHTIncomes": `${devise.symbole} ${await getHtFYI()}`,
                "totalFiscalYearTTIncomes": `${devise.symbole} ${await getTtFYI()}`,
                "totalFiscalYearPaymentsIncomes": `${devise.symbole} ${await getPayFYI()}`,
                "totalFiscalYearPaymentsOverdue": `${devise.symbole} ${await getNotPayFYI()}`
              }
            );
          }
        })();
      }
    } else {
      orientation.value = window.screen.orientation.type;
      if (orientation.value === "portrait-primary" || orientation.value === "portrait-secondary") {
        compact.value = true;
      }
      window.addEventListener("orientationchange", handleOrientation);
      (async () => {
        prefs = await __vitePreload(() => import("./index3.js"), true ? ["assets/index3.js","assets/index.js","assets/index.css"] : void 0);
        const usr = await prefs.getPref("user");
        const session = await prefs.getPref("session");
        const count = await prefs.getPref("counter");
        counter = !!count ? count : counter;
        devise = usr.user.devise;
        locale = !!session && !!session.langDisplayed ? session.langDisplayed.nom : "en-US";
        let dateStart = null, dateStartLibelle = null;
        const now = new Date();
        if (now.getMonth() < 5) {
          dateStart = new Date(`${now.getFullYear() - 1}-06-01`);
        } else {
          dateStart = new Date(`${now.getFullYear()}-06-01`);
        }
        dateStartLibelle = dateStart.toISOString();
        let isOpen = await isDbConnectionOpen(props.dbConn);
        isOpen = !isOpen || !!isOpen ? await openDbConnection(props.dbConn) : isOpen;
        if (isOpen) {
          let newCounter = null;
          let sql = "SELECT `stockPricesId`, `euro`, `dollar`, `livre` FROM `stock_prices` AS `stock_prices`;";
          let values = null;
          if (!!counter === false || !!counter.prices === false || !counter.prices.length) {
            values = await newQuery(props.dbConn, sql);
            if (!!values && values.values.length) {
              newCounter = !!counter ? counter : {};
              newCounter.prices = values.values;
            } else {
              newCounter = !!counter ? counter : {};
              newCounter.prices = [];
            }
            await prefs.setPref("counter", newCounter, false);
            counter = newCounter;
          }
          sql = `SELECT COUNT(\`factureId\`) AS \`n_inv\`, strftime('%s', \`facture\`.\`date\`) AS \`date_format\` FROM \`facture\` AS \`facture\` WHERE \`facture\`.\`administratorId\` = '${usr.user.userId}' AND \`date_format\` > strftime('%s', '${dateStart.toISOString()}');`;
          values = await newQuery(props.dbConn, sql);
          if (values.values.length) {
            const res = values.values[0];
            await prefs.setPref(
              "counter",
              {
                nbInvoices: res.n_inv
              },
              false
            );
          } else {
            await prefs.setPref("message", {
              messages: [
                {
                  severity: true,
                  content: t("homeComponent.results.ko.fetch_stats", { err: "Select count invoices from SQLite DB !" })
                }
              ],
              messagesVisibility: true
            });
          }
          if (!!props.invoicesFY === false) {
            sql = `SELECT \`facture\`.\`factureId\`, \`facture\`.\`date\`, \`facture\`.\`invoiceHTPrice\`, \`facture\`.\`invoiceTTPrice\`, \`facture\`.\`tvaValue\`, \`langue\`.\`langueId\` AS \`langue.langueId\`, \`langue\`.\`libelle\` AS \`langue.libelle\`, \`langue\`.\`nom\` AS \`langue.nom\`, \`devise\`.\`deviseId\` AS \`devise.deviseId\`, \`devise\`.\`symbole\` AS \`devise.symbole\`, \`devise\`.\`libelle\` AS \`devise.libelle\`, \`buyer\`.\`actorId\` AS \`buyer.actorId\`, \`buyer\`.\`cp\` AS \`buyer.cp\`, \`buyer\`.\`email\` AS \`buyer.email\`, \`buyer\`.\`nom\` AS \`buyer.nom\`, \`buyer\`.\`nomRue\` AS \`buyer.nomRue\`, \`buyer\`.\`numCommercant\` AS \`buyer.numCommercant\`, \`buyer\`.\`numRue\` AS \`buyer.numRue\`, \`buyer\`.\`prenom\` AS \`buyer.prenom\`, \`buyer\`.\`tel\` AS \`buyer.tel\`, \`buyer\`.\`actorTypeId\` AS \`buyer.actorTypeId\`, \`buyer\`.\`ville\` AS \`buyer.ville\`, \`seller\`.\`actorId\` AS \`seller.actorId\`, \`seller\`.\`cp\` AS \`seller.cp\`, \`seller\`.\`email\` AS \`seller.email\`, \`seller\`.\`nom\` AS \`seller.nom\`, \`seller\`.\`nomRue\` AS \`seller.nomRue\`, \`seller\`.\`numCommercant\` AS \`seller.numCommercant\`, \`seller\`.\`numRue\` AS \`seller.numRue\`, \`seller\`.\`prenom\` AS \`seller.prenom\`, \`seller\`.\`tel\` AS \`seller.tel\`, \`seller\`.\`actorTypeId\` AS \`seller.actorTypeId\`, \`seller\`.\`ville\` AS \`seller.ville\`, \`payments\`.\`paymentId\` AS \`payments.paymentId\`, \`payments\`.\`etat\` AS \`payments.etat\`, \`payments\`.\`paymentValue\` AS \`payments.paymentValue\`, \`payments\`.\`paymentType\` AS \`payments.paymentType\`, \`payments\`.\`factureId\` AS \`payments.factureId\`, strftime('%s', \`facture\`.\`date\`) AS \`date_format\`, \`commandes\`.\`orderId\` AS \`commandes.orderId\`, \`commandes\`.\`contenuAdditionnel\` AS \`commandes.contenuAdditionnel\`, \`commandes\`.\`priceHt\` AS \`commandes.priceHt\`, \`commandes\`.\`factureId\` AS \`commandes.factureId\` FROM \`facture\` AS \`facture\` LEFT OUTER JOIN \`langue\` AS \`langue\` ON \`facture\`.\`languageId\` = \`langue\`.\`langueId\` LEFT OUTER JOIN \`devise\` AS \`devise\` ON \`facture\`.\`deviseId\` = \`devise\`.\`deviseId\` LEFT OUTER JOIN \`personne\` AS \`buyer\` ON \`facture\`.\`buyerId\` = \`buyer\`.\`actorId\` LEFT OUTER JOIN \`personne\` AS \`seller\` ON \`facture\`.\`sellerId\` = \`seller\`.\`actorId\` LEFT OUTER JOIN \`payment\` AS \`payments\` ON \`facture\`.\`factureId\` = \`payments\`.\`factureId\` LEFT OUTER JOIN \`commande\` AS \`commandes\` ON \`facture\`.\`factureId\` = \`commandes\`.\`factureId\` WHERE \`facture\`.\`administratorId\` = '${usr.user.userId}'  AND \`date_format\` > strftime('%s', '${dateStartLibelle}')`;
            let counterSess = await prefs.getPref("counter");
            values = await newQuery(props.dbConn, sql);
            if (values.values.length) {
              const intRes = sanitizeQueryResult(values.values);
              await setDecryptApi();
              const res = await __TRANSFORMOBJ__(intRes);
              counterSess = !!counterSess ? counterSess : {};
              counterSess.invoicesFY = res;
              await prefs.setPref("counter", counterSess, false);
            }
          }
        } else {
          await prefs.setPref("message", {
            messages: [
              {
                severity: true,
                content: t("homeComponent.results.ko.fetch_stats", { err: "Unable to open SQLite DB !" })
              }
            ],
            messagesVisibility: true
          });
        }
        if (devise.deviseId == 3) {
          contentTable.value.push(
            {
              "totalFiscalYearHTIncomes": `${await getHtFYI()} ${devise.symbole}`,
              "totalFiscalYearTTIncomes": `${await getTtFYI()} ${devise.symbole}`,
              "totalFiscalYearPaymentsIncomes": `${await getPayFYI()} ${devise.symbole}`,
              "totalFiscalYearPaymentsOverdue": `${await getNotPayFYI()} ${devise.symbole}`
            }
          );
        } else {
          contentTable.value.push(
            {
              "totalFiscalYearHTIncomes": `${devise.symbole} ${await getHtFYI()}`,
              "totalFiscalYearTTIncomes": `${devise.symbole} ${await getTtFYI()}`,
              "totalFiscalYearPaymentsIncomes": `${devise.symbole} ${await getPayFYI()}`,
              "totalFiscalYearPaymentsOverdue": `${devise.symbole} ${await getNotPayFYI()}`
            }
          );
        }
      })();
    }
    async function getHtFYI() {
      let ret = 0;
      if (platform.is.desktop) {
        const invoices = !!props.invoicesFY ? props.invoicesFY : counterStore.getInvoicesFY;
        for (const k in invoices) {
          for (const l in invoices[k].commandes) {
            ret += invoices[k].commandes[l].priceHt;
          }
        }
        return new Intl.NumberFormat(locale, {
          minimumFractionDigits: 2
        }).format(ret.toFixed(2));
      } else {
        const counter2 = await prefs.getPref("counter");
        const invoices = !!props.invoicesFY ? props.invoicesFY : !!counter2 && !!counter2.invoicesFY ? counter2.invoicesFY : [];
        for (const k in invoices) {
          for (const l in invoices[k].commandes) {
            ret += invoices[k].commandes[l].priceHt;
          }
        }
        return new Intl.NumberFormat(locale, {
          minimumFractionDigits: 2
        }).format(ret.toFixed(2));
      }
    }
    async function getTtFYI() {
      let ret = 0;
      if (platform.is.desktop) {
        const invoices = !!props.invoicesFY ? props.invoicesFY : counterStore.getInvoicesFY;
        for (const k in invoices) {
          for (const l in invoices[k].commandes) {
            ret += invoices[k].commandes[l].priceHt * (1 + invoices[k].tvaValue);
          }
        }
        return new Intl.NumberFormat(locale, {
          minimumFractionDigits: 2
        }).format(ret.toFixed(2));
      } else {
        const counter2 = await prefs.getPref("counter");
        const invoices = !!props.invoicesFY ? props.invoicesFY : !!counter2 && !!counter2.invoicesFY ? counter2.invoicesFY : [];
        for (const k in invoices) {
          for (const l in invoices[k].commandes) {
            ret += invoices[k].commandes[l].priceHt * (1 + invoices[k].tvaValue);
          }
        }
        return new Intl.NumberFormat(locale, {
          minimumFractionDigits: 2
        }).format(ret.toFixed(2));
      }
    }
    async function getPayFYI() {
      let ret = 0;
      if (platform.is.desktop) {
        const invoices = !!props.invoicesFY ? props.invoicesFY : counterStore.getInvoicesFY;
        for (const k in invoices) {
          for (const l in invoices[k]["payments"]) {
            if (invoices[k]["payments"][l].etat === 1) {
              ret += invoices[k]["payments"][l].paymentValue ? convertAmount(invoices[k]["payments"][l].paymentValue, devise.libelle, getConvertFunc(invoices[k].devise.libelle)) : 0;
            }
          }
        }
        return new Intl.NumberFormat(locale, {
          minimumFractionDigits: 2
        }).format(ret.toFixed(2));
      } else {
        const counter2 = await prefs.getPref("counter");
        const invoices = !!props.invoicesFY ? props.invoicesFY : !!counter2 && !!counter2.invoicesFY ? counter2.invoicesFY : [];
        for (const k in invoices) {
          for (const l in invoices[k]["payments"]) {
            if (invoices[k]["payments"][l].etat === 1) {
              ret += invoices[k]["payments"][l].paymentValue ? convertAmount(invoices[k]["payments"][l].paymentValue, devise.libelle, getConvertFunc(invoices[k].devise.libelle)) : 0;
            }
          }
        }
        return new Intl.NumberFormat(locale, {
          minimumFractionDigits: 2
        }).format(ret.toFixed(2));
      }
    }
    async function getNotPayFYI() {
      let ret = 0;
      if (platform.is.desktop) {
        const invoices = !!props.invoicesFY ? props.invoicesFY : counterStore.getInvoicesFY;
        for (const k in invoices) {
          for (const l in invoices[k]["payments"]) {
            if (invoices[k]["payments"][l].etat === 0) {
              ret += invoices[k]["payments"][l].paymentValue ? convertAmount(invoices[k]["payments"][l].paymentValue, devise.libelle, getConvertFunc(invoices[k].devise.libelle)) : 0;
            }
          }
        }
        return new Intl.NumberFormat(locale, {
          minimumFractionDigits: 2
        }).format(ret.toFixed(2));
      } else {
        const counter2 = await prefs.getPref("counter");
        const invoices = !!props.invoicesFY ? props.invoicesFY : !!counter2 && !!counter2.invoicesFY ? counter2.invoicesFY : [];
        for (const k in invoices) {
          for (const l in invoices[k]["payments"]) {
            if (invoices[k]["payments"][l].etat === 0) {
              ret += invoices[k]["payments"][l].paymentValue ? convertAmount(invoices[k]["payments"][l].paymentValue, devise.libelle, getConvertFunc(invoices[k].devise.libelle)) : 0;
            }
          }
        }
        return new Intl.NumberFormat(locale, {
          minimumFractionDigits: 2
        }).format(ret.toFixed(2));
      }
    }
    function sanitizeQueryResult(obj) {
      let ret = [], ind = 0;
      for (const k in obj) {
        const prevId = k > 0 ? obj[k - 1].factureId : 0;
        if (prevId && prevId !== obj[k].factureId) {
          ind++;
        }
        if (!prevId || prevId && prevId !== obj[k].factureId) {
          ret[ind] = {};
        }
        for (const l in obj[k]) {
          if (prevId === obj[k].factureId) {
            if (l === "commandes.orderId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (!ret[ind]["commandes"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["commandes"].push({ orderId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k][l]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["commandes"].push({ orderId: obj[k][l] });
                  else
                    ret[ind]["commandes"][foundIndex].orderId = obj[k][l];
                }
              }
            } else if (l === "commandes.contenuAdditionnel") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (!ret[ind]["commandes"].length) {
                ret[ind]["commandes"].push({ contenuAdditionnel: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                if (foundIndex === -1)
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].contenuAdditionnel = obj[k][l];
                else
                  ret[ind]["commandes"][foundIndex].contenuAdditionnel = obj[k][l];
              }
            } else if (l === "commandes.priceHt") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ priceHt: obj[k][l] });
                } else {
                  const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                  if (obj[k][l] !== null) {
                    if (foundIndex === -1)
                      ret[ind]["commandes"][ret[ind]["commandes"].length - 1].priceHt = obj[k][l];
                    else
                      ret[ind]["commandes"][foundIndex].priceHt = obj[k][l];
                  }
                }
              }
            } else if (l === "commandes.factureId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ factureId: obj[k][l] });
                } else {
                  const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                  if (obj[k][l] !== null) {
                    if (foundIndex === -1)
                      ret[ind]["commandes"][ret[ind]["commandes"].length - 1].factureId = obj[k][l];
                    else
                      ret[ind]["commandes"][foundIndex].factureId = obj[k][l];
                  }
                }
              }
            } else if (l === "payments.paymentId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k][l]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"].push({ paymentId: obj[k][l] });
                  else
                    ret[ind]["payments"][foundIndex].paymentId = obj[k][l];
                }
              }
            } else if (l === "payments.etat") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ etat: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].etat = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].etat = obj[k][l];
                }
              }
            } else if (l === "payments.paymentValue") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentValue: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentValue = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].paymentValue = obj[k][l];
                }
              }
            } else if (l === "payments.paymentType") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentType: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentType = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].paymentType = obj[k][l];
                }
              }
            } else if (l === "payments.factureId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ factureId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].factureId = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].factureId = obj[k][l];
                }
              }
            }
          } else {
            if (l === "langue.langueId") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["langueId"] = obj[k][l];
              }
            } else if (l === "langue.libelle") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["libelle"] = obj[k][l];
              }
            } else if (l === "langue.nom") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["nom"] = obj[k][l];
              }
            } else if (l === "devise.deviseId") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["deviseId"] = obj[k][l];
              }
            } else if (l === "devise.symbole") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["symbole"] = obj[k][l];
              }
            } else if (l === "devise.libelle") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["libelle"] = obj[k][l];
              }
            } else if (l === "buyer.actorId") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["actorId"] = obj[k][l];
              }
            } else if (l === "buyer.cp") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["cp"] = obj[k][l];
              }
            } else if (l === "buyer.email") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["email"] = obj[k][l];
              }
            } else if (l === "buyer.nom") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["nom"] = obj[k][l];
              }
            } else if (l === "buyer.nomRue") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["nomRue"] = obj[k][l];
              }
            } else if (l === "buyer.numCommercant") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              ret[ind]["buyer"]["numCommercant"] = obj[k][l];
            } else if (l === "buyer.numRue") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["numRue"] = obj[k][l];
              }
            } else if (l === "buyer.prenom") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["prenom"] = obj[k][l];
              }
            } else if (l === "buyer.tel") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["tel"] = obj[k][l];
              }
            } else if (l === "buyer.actorTypeId") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["actorTypeId"] = obj[k][l];
              }
            } else if (l === "buyer.ville") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["ville"] = obj[k][l];
              }
            } else if (l === "seller.actorId") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["actorId"] = obj[k][l];
              }
            } else if (l === "seller.cp") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["cp"] = obj[k][l];
              }
            } else if (l === "seller.email") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["email"] = obj[k][l];
              }
            } else if (l === "seller.nom") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["nom"] = obj[k][l];
              }
            } else if (l === "seller.nomRue") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["nomRue"] = obj[k][l];
              }
            } else if (l === "seller.numCommercant") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              ret[ind]["seller"]["numCommercant"] = obj[k][l];
            } else if (l === "seller.numRue") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["numRue"] = obj[k][l];
              }
            } else if (l === "seller.prenom") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["prenom"] = obj[k][l];
              }
            } else if (l === "seller.tel") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["tel"] = obj[k][l];
              }
            } else if (l === "seller.actorTypeId") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["actorTypeId"] = obj[k][l];
              }
            } else if (l === "seller.ville") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["ville"] = obj[k][l];
              }
            } else if (l === "commandes.orderId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ orderId: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].orderId = obj[k][l];
                }
              }
            } else if (l === "commandes.contenuAdditionnel") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ contenuAdditionnel: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].contenuAdditionnel = obj[k][l];
                }
              }
            } else if (l === "commandes.priceHt") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ priceHt: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].priceHt = obj[k][l];
                }
              }
            } else if (l === "commandes.factureId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ factureId: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].factureId = obj[k][l];
                }
              }
            } else if (l === "payments.paymentId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentId: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentId = obj[k][l];
                }
              }
            } else if (l === "payments.etat") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ etat: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].etat = obj[k][l];
                }
              }
            } else if (l === "payments.paymentValue") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentValue: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentValue = obj[k][l];
                }
              }
            } else if (l === "payments.paymentType") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentType: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentType = obj[k][l];
                }
              }
            } else if (l === "payments.factureId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ factureId: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].factureId = obj[k][l];
                }
              }
            } else {
              ret[ind][l] = obj[k][l];
            }
          }
        }
      }
      return ret;
    }
    function handleOrientation() {
      orientation.value = screen.orientation.type;
      if (orientation.value === "portrait-primary" || orientation.value === "portrait-secondary") {
        compact.value = true;
      } else {
        compact.value = false;
      }
    }
    function getConvertFunc(src) {
      let ret = void 0;
      switch (src) {
        case "euro":
          ret = fromEuroToOther;
          break;
        case "dollar":
          ret = fromDollarToOther;
          break;
        case "livre":
          ret = fromLivreToOther;
          break;
        default:
          ret = fromEuroToOther;
          break;
      }
      return ret;
    }
    function convertAmount(val, dest, func) {
      return func(val, dest);
    }
    function fromEuroToOther(val, dest) {
      let ret = val;
      let stock_price = null;
      if (platform.is.desktop) {
        stock_price = counterStore.getEuroPrice;
      } else {
        stock_price = counter.prices.find((p) => {
          return p.euro === 1;
        });
      }
      const produit = stock_price !== null ? stock_price : null;
      switch (dest) {
        case "dollar":
          ret *= produit !== null ? produit.dollar : 1;
          break;
        case "livre":
          ret *= produit !== null ? produit.livre : 1;
          break;
      }
      return ret;
    }
    function fromDollarToOther(val, dest) {
      let ret = val, stock_price = null;
      if (platform.is.desktop) {
        stock_price = counterStore.getDollarPrice;
      } else {
        stock_price = counter.prices.find((p) => {
          return p.dollar === 1;
        });
      }
      const produit = stock_price !== null ? stock_price : null;
      switch (dest) {
        case "euro":
          ret *= produit !== null ? produit.euro : 1;
          break;
        case "livre":
          ret *= produit !== null ? produit.livre : 1;
          break;
      }
      return ret;
    }
    function fromLivreToOther(val, dest) {
      let ret = val;
      let stock_price = null;
      if (platform.is.desktop) {
        stock_price = counterStore.getLivrePrice;
      } else {
        stock_price = counter.prices.find((p) => {
          return p.livre === 1;
        });
      }
      const produit = stock_price !== null ? stock_price : null;
      switch (dest) {
        case "dollar":
          ret *= produit !== null ? produit.dollar : 1;
          break;
        case "euro":
          ret *= produit !== null ? produit.euro : 1;
          break;
      }
      return ret;
    }
    watch(
      () => [props.contentTableObj, props.headTableObj],
      ([content, head]) => {
        headTable.value = head;
        contentTable.value = content;
      }
    );
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(__props.cssClasses)
      }, [
        createVNode(QTable, {
          flat: "",
          title: unref(t)("homeComponent.homeTable.heading"),
          columns: headTable.value,
          rows: contentTable.value,
          grid: compact.value,
          dense: !compact.value,
          "hide-bottom": true,
          "title-class": "SenExtrabold-font",
          "table-header-style": "{text-align: center}",
          separator: "horizontal"
        }, {
          body: withCtx((propos) => [
            createVNode(QTr, { props: propos }, {
              default: withCtx(() => [
                createVNode(QTd, {
                  style: { "text-align": "center" },
                  key: "totalFiscalYearHTIncomes",
                  props: propos
                }, {
                  default: withCtx(() => [
                    createTextVNode(toDisplayString(propos.row.totalFiscalYearHTIncomes), 1)
                  ]),
                  _: 2
                }, 1032, ["props"]),
                createVNode(QTd, {
                  style: { "text-align": "center" },
                  key: "totalFiscalYearTTIncomes",
                  props: propos
                }, {
                  default: withCtx(() => [
                    createTextVNode(toDisplayString(propos.row.totalFiscalYearTTIncomes), 1)
                  ]),
                  _: 2
                }, 1032, ["props"]),
                createVNode(QTd, {
                  style: { "text-align": "center" },
                  key: "totalFiscalYearPaymentsIncomes",
                  props: propos
                }, {
                  default: withCtx(() => [
                    createTextVNode(toDisplayString(propos.row.totalFiscalYearPaymentsIncomes), 1)
                  ]),
                  _: 2
                }, 1032, ["props"]),
                createVNode(QTd, {
                  style: { "text-align": "center" },
                  key: "totalFiscalYearPaymentsOverdue",
                  props: propos
                }, {
                  default: withCtx(() => [
                    createTextVNode(toDisplayString(propos.row.totalFiscalYearPaymentsOverdue), 1)
                  ]),
                  _: 2
                }, 1032, ["props"])
              ]),
              _: 2
            }, 1032, ["props"])
          ]),
          _: 1
        }, 8, ["title", "columns", "rows", "grid", "dense"])
      ], 2);
    };
  }
});
var HomeTable = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["__file", "HomeTable.vue"]]);
const _hoisted_1 = {
  key: 0,
  class: "row full-width text-center q-pt-xl"
};
const _hoisted_2 = { class: "col" };
const _hoisted_3 = { class: "text-primary" };
const _hoisted_4 = { class: "SenExtrabold-font" };
const _hoisted_5 = /* @__PURE__ */ createBaseVNode("div", { class: "vr vr-blurry position-absolute my-0 h-100 d-none d-md-block top-0 end-0" }, null, -1);
const _hoisted_6 = { class: "col" };
const _hoisted_7 = { class: "text-dark" };
const _hoisted_8 = { class: "SenExtrabold-font" };
const _hoisted_9 = /* @__PURE__ */ createBaseVNode("div", { class: "vr vr-blurry position-absolute my-0 h-100 d-none d-md-block top-0 end-0" }, null, -1);
const _hoisted_10 = { class: "col" };
const _hoisted_11 = { class: "text-accent" };
const _hoisted_12 = { class: "SenExtrabold-font" };
const _hoisted_13 = /* @__PURE__ */ createBaseVNode("div", { class: "vr vr-blurry position-absolute my-0 h-100 d-none d-md-block top-0 end-0" }, null, -1);
const _hoisted_14 = { class: "col" };
const _hoisted_15 = { class: "text-secondary" };
const _hoisted_16 = { class: "SenExtrabold-font" };
const _hoisted_17 = {
  key: 1,
  class: "column full-width text-center q-pt-xl"
};
const _hoisted_18 = { class: "row q-pb-lg" };
const _hoisted_19 = { class: "col" };
const _hoisted_20 = { class: "text-primary q-my-sm" };
const _hoisted_21 = { class: "SenExtrabold-font q-my-md" };
const _hoisted_22 = /* @__PURE__ */ createBaseVNode("div", { class: "vr vr-blurry position-absolute my-0 h-100 d-none d-md-block top-0 end-0" }, null, -1);
const _hoisted_23 = { class: "col" };
const _hoisted_24 = { class: "text-dark q-my-sm" };
const _hoisted_25 = { class: "SenExtrabold-font q-my-md" };
const _hoisted_26 = /* @__PURE__ */ createBaseVNode("div", { class: "vr vr-blurry position-absolute my-0 h-100 d-none d-md-block top-0 end-0" }, null, -1);
const _hoisted_27 = { class: "row" };
const _hoisted_28 = { class: "col" };
const _hoisted_29 = { class: "text-accent q-my-sm" };
const _hoisted_30 = { class: "SenExtrabold-font q-my-md" };
const _hoisted_31 = /* @__PURE__ */ createBaseVNode("div", { class: "vr vr-blurry position-absolute my-0 h-100 d-none d-md-block top-0 end-0" }, null, -1);
const _hoisted_32 = { class: "col" };
const _hoisted_33 = { class: "text-secondary q-my-sm" };
const _hoisted_34 = { class: "SenExtrabold-font q-my-md" };
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "IndexPage",
  props: {
    dbConn: { default: null }
  },
  emits: ["change-tab"],
  setup(__props, { emit }) {
    const props = __props;
    const $q = useQuasar();
    const renderComponent = ref(true);
    const platform = $q.platform;
    const { t } = useI18n({ useScope: "global" });
    const nbInvoices = ref(0);
    const nbOrders = ref(0);
    const nbActors = ref(0);
    const nbServices = ref(0);
    const invoices = ref(null);
    const messageVisibility = ref(false);
    const orientation = ref(null);
    const compact = ref(false);
    const renderStats = ref(false);
    let counterStore = null, messageStore = null, prefs = null, userStore = null, dateStartLibelle = null;
    if (platform.is.mobile) {
      orientation.value = window.screen.orientation.type;
      if (orientation.value === "portrait-primary" || orientation.value === "portrait-secondary") {
        compact.value = true;
      }
      window.addEventListener("orientationchange", handleOrientation);
    }
    function sanitizeQueryResult(obj) {
      let ret = [], ind = 0;
      for (const k in obj) {
        const prevId = k > 0 ? obj[k - 1].factureId : 0;
        if (prevId && prevId !== obj[k].factureId) {
          ind++;
        }
        if (!prevId || prevId && prevId !== obj[k].factureId) {
          ret[ind] = {};
        }
        for (const l in obj[k]) {
          if (prevId === obj[k].factureId) {
            if (l === "commandes.orderId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (!ret[ind]["commandes"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["commandes"].push({ orderId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k][l]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["commandes"].push({ orderId: obj[k][l] });
                  else
                    ret[ind]["commandes"][foundIndex].orderId = obj[k][l];
                }
              }
            } else if (l === "commandes.contenuAdditionnel") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (!ret[ind]["commandes"].length) {
                ret[ind]["commandes"].push({ contenuAdditionnel: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                if (foundIndex === -1)
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].contenuAdditionnel = obj[k][l];
                else
                  ret[ind]["commandes"][foundIndex].contenuAdditionnel = obj[k][l];
              }
            } else if (l === "commandes.priceHt") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ priceHt: obj[k][l] });
                } else {
                  const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                  if (obj[k][l] !== null) {
                    if (foundIndex === -1)
                      ret[ind]["commandes"][ret[ind]["commandes"].length - 1].priceHt = obj[k][l];
                    else
                      ret[ind]["commandes"][foundIndex].priceHt = obj[k][l];
                  }
                }
              }
            } else if (l === "commandes.factureId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ factureId: obj[k][l] });
                } else {
                  const foundIndex = ret[ind]["commandes"].findIndex((elem) => elem.orderId === obj[k]["orderId"]);
                  if (obj[k][l] !== null) {
                    if (foundIndex === -1)
                      ret[ind]["commandes"][ret[ind]["commandes"].length - 1].factureId = obj[k][l];
                    else
                      ret[ind]["commandes"][foundIndex].factureId = obj[k][l];
                  }
                }
              }
            } else if (l === "payments.paymentId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k][l]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"].push({ paymentId: obj[k][l] });
                  else
                    ret[ind]["payments"][foundIndex].paymentId = obj[k][l];
                }
              }
            } else if (l === "payments.etat") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ etat: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].etat = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].etat = obj[k][l];
                }
              }
            } else if (l === "payments.paymentValue") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentValue: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentValue = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].paymentValue = obj[k][l];
                }
              }
            } else if (l === "payments.paymentType") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ paymentType: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentType = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].paymentType = obj[k][l];
                }
              }
            } else if (l === "payments.factureId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (!ret[ind]["payments"].length) {
                if (obj[k][l] !== null)
                  ret[ind]["payments"].push({ factureId: obj[k][l] });
              } else {
                const foundIndex = ret[ind]["payments"].findIndex((elem) => elem.paymentId === obj[k]["payments.paymentId"]);
                if (obj[k][l] !== null) {
                  if (foundIndex === -1)
                    ret[ind]["payments"][ret[ind]["payments"].length - 1].factureId = obj[k][l];
                  else
                    ret[ind]["payments"][foundIndex].factureId = obj[k][l];
                }
              }
            }
          } else {
            if (l === "langue.langueId") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["langueId"] = obj[k][l];
              }
            } else if (l === "langue.libelle") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["libelle"] = obj[k][l];
              }
            } else if (l === "langue.nom") {
              ret[ind]["langue"] = ret[ind]["langue"] === void 0 ? {} : ret[ind]["langue"];
              if (obj[k][l] === null) {
                ret[ind]["langue"] = null;
              } else {
                ret[ind]["langue"]["nom"] = obj[k][l];
              }
            } else if (l === "devise.deviseId") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["deviseId"] = obj[k][l];
              }
            } else if (l === "devise.symbole") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["symbole"] = obj[k][l];
              }
            } else if (l === "devise.libelle") {
              ret[ind]["devise"] = ret[ind]["devise"] === void 0 ? {} : ret[ind]["devise"];
              if (obj[k][l] === null) {
                ret[ind]["devise"] = null;
              } else {
                ret[ind]["devise"]["libelle"] = obj[k][l];
              }
            } else if (l === "buyer.actorId") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["actorId"] = obj[k][l];
              }
            } else if (l === "buyer.cp") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["cp"] = obj[k][l];
              }
            } else if (l === "buyer.email") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["email"] = obj[k][l];
              }
            } else if (l === "buyer.nom") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["nom"] = obj[k][l];
              }
            } else if (l === "buyer.nomRue") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["nomRue"] = obj[k][l];
              }
            } else if (l === "buyer.numCommercant") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              ret[ind]["buyer"]["numCommercant"] = obj[k][l];
            } else if (l === "buyer.numRue") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["numRue"] = obj[k][l];
              }
            } else if (l === "buyer.prenom") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["prenom"] = obj[k][l];
              }
            } else if (l === "buyer.tel") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["tel"] = obj[k][l];
              }
            } else if (l === "buyer.actorTypeId") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["actorTypeId"] = obj[k][l];
              }
            } else if (l === "buyer.ville") {
              ret[ind]["buyer"] = ret[ind]["buyer"] === void 0 ? {} : ret[ind]["buyer"];
              if (obj[k][l] === null) {
                ret[ind]["buyer"] = null;
              } else {
                ret[ind]["buyer"]["ville"] = obj[k][l];
              }
            } else if (l === "seller.actorId") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["actorId"] = obj[k][l];
              }
            } else if (l === "seller.cp") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["cp"] = obj[k][l];
              }
            } else if (l === "seller.email") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["email"] = obj[k][l];
              }
            } else if (l === "seller.nom") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["nom"] = obj[k][l];
              }
            } else if (l === "seller.nomRue") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["nomRue"] = obj[k][l];
              }
            } else if (l === "seller.numCommercant") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              ret[ind]["seller"]["numCommercant"] = obj[k][l];
            } else if (l === "seller.numRue") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["numRue"] = obj[k][l];
              }
            } else if (l === "seller.prenom") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["prenom"] = obj[k][l];
              }
            } else if (l === "seller.tel") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["tel"] = obj[k][l];
              }
            } else if (l === "seller.actorTypeId") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["actorTypeId"] = obj[k][l];
              }
            } else if (l === "seller.ville") {
              ret[ind]["seller"] = ret[ind]["seller"] === void 0 ? {} : ret[ind]["seller"];
              if (obj[k][l] === null) {
                ret[ind]["seller"] = null;
              } else {
                ret[ind]["seller"]["ville"] = obj[k][l];
              }
            } else if (l === "commandes.orderId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ orderId: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].orderId = obj[k][l];
                }
              }
            } else if (l === "commandes.contenuAdditionnel") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ contenuAdditionnel: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].contenuAdditionnel = obj[k][l];
                }
              }
            } else if (l === "commandes.priceHt") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ priceHt: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].priceHt = obj[k][l];
                }
              }
            } else if (l === "commandes.factureId") {
              ret[ind]["commandes"] = ret[ind]["commandes"] === void 0 ? [] : ret[ind]["commandes"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["commandes"].length) {
                  ret[ind]["commandes"].push({ factureId: obj[k][l] });
                } else {
                  ret[ind]["commandes"][ret[ind]["commandes"].length - 1].factureId = obj[k][l];
                }
              }
            } else if (l === "payments.paymentId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentId: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentId = obj[k][l];
                }
              }
            } else if (l === "payments.etat") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ etat: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].etat = obj[k][l];
                }
              }
            } else if (l === "payments.paymentValue") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentValue: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentValue = obj[k][l];
                }
              }
            } else if (l === "payments.paymentType") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ paymentType: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].paymentType = obj[k][l];
                }
              }
            } else if (l === "payments.factureId") {
              ret[ind]["payments"] = ret[ind]["payments"] === void 0 ? [] : ret[ind]["payments"];
              if (obj[k][l] !== null) {
                if (!ret[ind]["payments"].length) {
                  ret[ind]["payments"].push({ factureId: obj[k][l] });
                } else {
                  ret[ind]["payments"][ret[ind]["payments"].length - 1].factureId = obj[k][l];
                }
              }
            } else {
              ret[ind][l] = obj[k][l];
            }
          }
        }
      }
      return ret;
    }
    function handleOrientation() {
      orientation.value = screen.orientation.type;
    }
    watch(
      orientation,
      (newOrientation) => {
        if (!!newOrientation) {
          if (newOrientation === "portrait-primary" || newOrientation === "portrait-secondary") {
            compact.value = true;
          } else {
            compact.value = false;
          }
        }
      }
    );
    onMounted(() => {
      emit("change-tab", "home");
    });
    onBeforeMount(async () => {
      if (platform.is.desktop) {
        counterStore = useCounterStore();
        messageStore = useMessageStore();
        userStore = useUserStore();
        if (messageStore.getMessages.length)
          messageStore.setMessagesVisibility(true);
        messageVisibility.value = messageStore.getMessagesVisibility;
        {
          await counterStore.getFinancialYearInvoices(userStore.getUser.userId);
          await counterStore.getNbOrdersFromDb();
          await counterStore.getNbActorsFromDb();
          await counterStore.getNbServicesFromDb();
          await counterStore.getFinancialYearNbInvoices(userStore.getUser.userId);
          nbInvoices.value = counterStore.getNbInvoices;
          nbOrders.value = counterStore.getNbOrders;
          nbActors.value = counterStore.getNbActors;
          nbServices.value = counterStore.getNbServices;
          invoices.value = counterStore.getInvoicesFY;
        }
      } else {
        prefs = await __vitePreload(() => import("./index3.js"), true ? ["assets/index3.js","assets/index.js","assets/index.css"] : void 0);
        const mess = await prefs.getPref("message");
        const usr = await prefs.getPref("user");
        const messages = !!mess ? mess.messages : [];
        const vis = !!mess ? mess.messagesVisibility : mess;
        if (messages.length && vis === null) {
          messageVisibility.value = true;
        } else {
          messageVisibility.value = vis !== null ? vis : false;
        }
        let dateStart = null;
        const now = new Date();
        if (now.getMonth() < 5) {
          dateStart = new Date(`${now.getFullYear() - 1}-06-01`);
        } else {
          dateStart = new Date(`${now.getFullYear()}-06-01`);
        }
        dateStartLibelle = dateStart.toISOString();
        let isOpen = await isDbConnectionOpen(props.dbConn);
        isOpen = !isOpen || !!isOpen ? await openDbConnection(props.dbConn) : isOpen;
        if (isOpen) {
          let sql = `SELECT COUNT(\`factureId\`) AS \`n_inv\`, strftime('%s', \`facture\`.\`date\`) AS \`date_format\` FROM \`facture\` AS \`facture\` WHERE \`facture\`.\`administratorId\` = '${usr.user.userId}' AND \`date_format\` > strftime('%s', '${dateStart.toISOString()}');`;
          let values = await newQuery(props.dbConn, sql);
          if (values.values.length) {
            nbInvoices.value = values.values[0].n_inv;
          } else {
            await prefs.setPref("message", {
              messages: [
                {
                  severity: true,
                  content: t("homeComponent.results.ko.fetch_stats", { err: "Select count invoices from SQLite DB !" })
                }
              ],
              messagesVisibility: true
            });
            messageVisibility.value = true;
          }
          sql = "SELECT COUNT(`orderId`) AS `n_ord` FROM `commande` AS `commande`;";
          values = await newQuery(props.dbConn, sql);
          if (values.values.length) {
            nbOrders.value = values.values[0].n_ord;
          } else {
            await prefs.setPref("message", {
              messages: [
                {
                  severity: true,
                  content: t("homeComponent.results.ko.fetch_stats", { err: "Select count orders from SQLite DB !" })
                }
              ],
              messagesVisibility: true
            });
            messageVisibility.value = true;
          }
          sql = "SELECT COUNT(`actorId`) AS `n_act` FROM `personne` AS `personne`;";
          values = await newQuery(props.dbConn, sql);
          if (values.values.length) {
            nbActors.value = values.values[0].n_act;
          } else {
            await prefs.setPref("message", {
              messages: [
                {
                  severity: true,
                  content: t("homeComponent.results.ko.fetch_stats", { err: "Select count actors from SQLite DB !" })
                }
              ],
              messagesVisibility: true
            });
            messageVisibility.value = true;
          }
          sql = "SELECT COUNT(`serviceId`) AS `n_srv` FROM `produitservice` AS `produitservice`;";
          values = await newQuery(props.dbConn, sql);
          if (values.values.length) {
            nbServices.value = values.values[0].n_srv;
          } else {
            await prefs.setPref("message", {
              messages: [
                {
                  severity: true,
                  content: t("homeComponent.results.ko.fetch_stats", { err: "Select count services from SQLite DB !" })
                }
              ],
              messagesVisibility: true
            });
            messageVisibility.value = true;
          }
          sql = `SELECT \`facture\`.\`factureId\`, \`facture\`.\`date\`, \`facture\`.\`invoiceHTPrice\`, \`facture\`.\`invoiceTTPrice\`, \`facture\`.\`tvaValue\`, \`langue\`.\`langueId\` AS \`langue.langueId\`, \`langue\`.\`libelle\` AS \`langue.libelle\`, \`langue\`.\`nom\` AS \`langue.nom\`, \`devise\`.\`deviseId\` AS \`devise.deviseId\`, \`devise\`.\`symbole\` AS \`devise.symbole\`, \`devise\`.\`libelle\` AS \`devise.libelle\`, \`buyer\`.\`actorId\` AS \`buyer.actorId\`, \`buyer\`.\`cp\` AS \`buyer.cp\`, \`buyer\`.\`email\` AS \`buyer.email\`, \`buyer\`.\`nom\` AS \`buyer.nom\`, \`buyer\`.\`nomRue\` AS \`buyer.nomRue\`, \`buyer\`.\`numCommercant\` AS \`buyer.numCommercant\`, \`buyer\`.\`numRue\` AS \`buyer.numRue\`, \`buyer\`.\`prenom\` AS \`buyer.prenom\`, \`buyer\`.\`tel\` AS \`buyer.tel\`, \`buyer\`.\`actorTypeId\` AS \`buyer.actorTypeId\`, \`buyer\`.\`ville\` AS \`buyer.ville\`, \`seller\`.\`actorId\` AS \`seller.actorId\`, \`seller\`.\`cp\` AS \`seller.cp\`, \`seller\`.\`email\` AS \`seller.email\`, \`seller\`.\`nom\` AS \`seller.nom\`, \`seller\`.\`nomRue\` AS \`seller.nomRue\`, \`seller\`.\`numCommercant\` AS \`seller.numCommercant\`, \`seller\`.\`numRue\` AS \`seller.numRue\`, \`seller\`.\`prenom\` AS \`seller.prenom\`, \`seller\`.\`tel\` AS \`seller.tel\`, \`seller\`.\`actorTypeId\` AS \`seller.actorTypeId\`, \`seller\`.\`ville\` AS \`seller.ville\`, \`payments\`.\`paymentId\` AS \`payments.paymentId\`, \`payments\`.\`etat\` AS \`payments.etat\`, \`payments\`.\`paymentValue\` AS \`payments.paymentValue\`, \`payments\`.\`paymentType\` AS \`payments.paymentType\`, \`payments\`.\`factureId\` AS \`payments.factureId\`, strftime('%s', \`facture\`.\`date\`) AS \`date_format\`, \`commandes\`.\`orderId\` AS \`commandes.orderId\`, \`commandes\`.\`contenuAdditionnel\` AS \`commandes.contenuAdditionnel\`, \`commandes\`.\`priceHt\` AS \`commandes.priceHt\`, \`commandes\`.\`factureId\` AS \`commandes.factureId\` FROM \`facture\` AS \`facture\` LEFT OUTER JOIN \`langue\` AS \`langue\` ON \`facture\`.\`languageId\` = \`langue\`.\`langueId\` LEFT OUTER JOIN \`devise\` AS \`devise\` ON \`facture\`.\`deviseId\` = \`devise\`.\`deviseId\` LEFT OUTER JOIN \`personne\` AS \`buyer\` ON \`facture\`.\`buyerId\` = \`buyer\`.\`actorId\` LEFT OUTER JOIN \`personne\` AS \`seller\` ON \`facture\`.\`sellerId\` = \`seller\`.\`actorId\` LEFT OUTER JOIN \`payment\` AS \`payments\` ON \`facture\`.\`factureId\` = \`payments\`.\`factureId\` LEFT OUTER JOIN \`commande\` AS \`commandes\` ON \`facture\`.\`factureId\` = \`commandes\`.\`factureId\` WHERE \`facture\`.\`administratorId\` = '${usr.user.userId}'  AND \`date_format\` > strftime('%s', '${dateStartLibelle}')`;
          let counterSess = await prefs.getPref("counter");
          values = await newQuery(props.dbConn, sql);
          if (!!values && values.values.length) {
            const intRes = sanitizeQueryResult(values.values);
            await setDecryptApi();
            const res = await __TRANSFORMOBJ__(intRes);
            counterSess = !!counterSess ? counterSess : {};
            counterSess.invoicesFY = res;
            invoices.value = res;
            await prefs.setPref("counter", counterSess, false);
          } else {
            invoices.value = [];
          }
        } else {
          await prefs.setPref("message", {
            messages: [
              {
                severity: true,
                content: t("homeComponent.results.ko.fetch_stats", { err: "Unable to open SQLite DB !" })
              }
            ],
            messagesVisibility: true
          });
          messageVisibility.value = true;
        }
      }
      renderStats.value = true;
    });
    return (_ctx, _cache) => {
      return openBlock(), createBlock(QPage, { class: "column q-pa-lg" }, {
        default: withCtx(() => [
          createVNode(QNoSsr, null, {
            default: withCtx(() => [
              messageVisibility.value && renderComponent.value ? (openBlock(), createBlock(MessagesItem, { key: 0 })) : createCommentVNode("", true)
            ]),
            _: 1
          }),
          !compact.value ? (openBlock(), createElementBlock("div", _hoisted_1, [
            createBaseVNode("div", _hoisted_2, [
              createVNode(QIcon, {
                size: "lg",
                "aria-hidden": "false",
                name: "mdi-receipt-text",
                color: "primary"
              }),
              createBaseVNode("h5", _hoisted_3, toDisplayString(nbInvoices.value), 1),
              createBaseVNode("h6", _hoisted_4, toDisplayString(unref(t)("homeComponent.labels.invoicesLabel")), 1),
              _hoisted_5
            ]),
            createBaseVNode("div", _hoisted_6, [
              createVNode(QIcon, {
                size: "lg",
                "aria-hidden": "false",
                color: "dark",
                name: "mdi-order-bool-descending"
              }),
              createBaseVNode("h5", _hoisted_7, toDisplayString(nbOrders.value), 1),
              createBaseVNode("h6", _hoisted_8, toDisplayString(unref(t)("homeComponent.labels.ordersLabel")), 1),
              _hoisted_9
            ]),
            createBaseVNode("div", _hoisted_10, [
              createVNode(QIcon, {
                size: "lg",
                "aria-hidden": "false",
                name: "mdi-clipboard-account",
                color: "accent"
              }),
              createBaseVNode("h5", _hoisted_11, toDisplayString(nbActors.value), 1),
              createBaseVNode("h6", _hoisted_12, toDisplayString(unref(t)("homeComponent.labels.actorsLabel")), 1),
              _hoisted_13
            ]),
            createBaseVNode("div", _hoisted_14, [
              createVNode(QIcon, {
                size: "lg",
                "aria-hidden": "false",
                class: "text-secondary",
                name: "mdi-room-service",
                color: "secondary"
              }),
              createBaseVNode("h5", _hoisted_15, toDisplayString(nbServices.value), 1),
              createBaseVNode("h6", _hoisted_16, toDisplayString(unref(t)("homeComponent.labels.servicesLabel")), 1)
            ])
          ])) : createCommentVNode("", true),
          compact.value ? (openBlock(), createElementBlock("div", _hoisted_17, [
            createBaseVNode("div", _hoisted_18, [
              createBaseVNode("div", _hoisted_19, [
                createVNode(QIcon, {
                  size: "lg",
                  "aria-hidden": "false",
                  name: "mdi-receipt-text",
                  color: "primary"
                }),
                createBaseVNode("h5", _hoisted_20, toDisplayString(nbInvoices.value), 1),
                createBaseVNode("h6", _hoisted_21, toDisplayString(unref(t)("homeComponent.labels.invoicesLabel")), 1),
                _hoisted_22
              ]),
              createBaseVNode("div", _hoisted_23, [
                createVNode(QIcon, {
                  size: "lg",
                  "aria-hidden": "false",
                  color: "dark",
                  name: "mdi-order-bool-descending"
                }),
                createBaseVNode("h5", _hoisted_24, toDisplayString(nbOrders.value), 1),
                createBaseVNode("h6", _hoisted_25, toDisplayString(unref(t)("homeComponent.labels.ordersLabel")), 1),
                _hoisted_26
              ])
            ]),
            createBaseVNode("div", _hoisted_27, [
              createBaseVNode("div", _hoisted_28, [
                createVNode(QIcon, {
                  size: "lg",
                  "aria-hidden": "false",
                  name: "mdi-clipboard-account",
                  color: "accent"
                }),
                createBaseVNode("h5", _hoisted_29, toDisplayString(nbActors.value), 1),
                createBaseVNode("h6", _hoisted_30, toDisplayString(unref(t)("homeComponent.labels.actorsLabel")), 1),
                _hoisted_31
              ]),
              createBaseVNode("div", _hoisted_32, [
                createVNode(QIcon, {
                  size: "lg",
                  "aria-hidden": "false",
                  class: "text-secondary",
                  name: "mdi-room-service",
                  color: "secondary"
                }),
                createBaseVNode("h5", _hoisted_33, toDisplayString(nbServices.value), 1),
                createBaseVNode("h6", _hoisted_34, toDisplayString(unref(t)("homeComponent.labels.servicesLabel")), 1)
              ])
            ])
          ])) : createCommentVNode("", true),
          renderStats.value ? (openBlock(), createBlock(HomeTable, {
            key: 2,
            cssClasses: "q-pa-md full-width",
            dbConn: __props.dbConn,
            invoicesFY: invoices.value
          }, null, 8, ["dbConn", "invoicesFY"])) : createCommentVNode("", true),
          renderStats.value ? (openBlock(), createBlock(BarChart, {
            key: 3,
            cssClasses: "q-pa-md full-width",
            dbConn: __props.dbConn,
            invoicesFY: invoices.value
          }, null, 8, ["dbConn", "invoicesFY"])) : createCommentVNode("", true),
          renderStats.value ? (openBlock(), createBlock(PieChart, {
            key: 4,
            cssClasses: "q-pa-md full-width column flex items-center",
            dbConn: __props.dbConn,
            invoicesFY: invoices.value
          }, null, 8, ["dbConn", "invoicesFY"])) : createCommentVNode("", true)
        ]),
        _: 1
      });
    };
  }
});
var IndexPage = /* @__PURE__ */ _export_sfc(_sfc_main, [["__file", "IndexPage.vue"]]);
export { IndexPage as default };
//# sourceMappingURL=data:application/json;base64,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UUFBTSxJQUFJLElBQUksRUFBRSxFQUFFO0FBQ2xCLFNBQU8sRUFBRSxJQUFJLE1BQ1QsUUFBUUEsT0FBTSxPQUFPLE9BQU8sSUFBSSxFQUFFLENBQUMsT0FDbkMsT0FBT0EsT0FBTSxPQUFPO0FBQzFCO0FBRUEsTUFBTSxNQUFNO0FBQUEsRUFDVixHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQ0w7QUFDQSxNQUFNLFVBQVU7QUFBQSxFQUNkLFFBQVE7QUFBQSxFQUNSLGFBQWE7QUFBQSxFQUNiLE1BQU07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLGNBQWM7QUFBQSxFQUNkLElBQUk7QUFBQSxFQUNKLFNBQVM7QUFBQSxFQUNULE1BQU07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLFVBQVU7QUFBQSxFQUNWLFNBQVM7QUFBQSxFQUNULEtBQUs7QUFBQSxFQUNMLGFBQWE7QUFBQSxFQUNiLFNBQVM7QUFBQSxFQUNULFNBQVM7QUFBQSxFQUNULE1BQU07QUFBQSxFQUNOLEtBQUs7QUFBQSxFQUNMLE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLFFBQVE7QUFBQSxFQUNSLFNBQVM7QUFBQSxFQUNULFVBQVU7QUFBQSxFQUNWLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLEtBQUs7QUFBQSxFQUNMLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLEtBQUs7QUFBQSxFQUNMLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFVBQVU7QUFBQSxFQUNWLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLFFBQVE7QUFBQSxFQUNSLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLEtBQUs7QUFBQSxFQUNMLFFBQVE7QUFBQSxFQUNSLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLE9BQU87QUFBQSxFQUNQLEtBQUs7QUFBQSxFQUNMLFNBQVM7QUFBQSxFQUNULFFBQVE7QUFBQSxFQUNSLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLFdBQVc7QUFBQSxFQUNYLFNBQVM7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLEtBQUs7QUFBQSxFQUNMLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLFdBQVc7QUFBQSxFQUNYLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULEtBQUs7QUFBQSxFQUNMLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULEtBQUs7QUFBQSxFQUNMLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLFlBQVk7QUFBQSxFQUNaLEtBQUs7QUFBQSxFQUNMLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLE1BQU07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLEtBQUs7QUFBQSxFQUNMLFVBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLFNBQVM7QUFBQSxFQUNULFVBQVU7QUFBQSxFQUNWLFNBQVM7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLE1BQU07QUFBQSxFQUNOLFFBQVE7QUFBQSxFQUNSLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULE1BQU07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLFNBQVM7QUFBQSxFQUNULE1BQU07QUFBQSxFQUNOLEtBQUs7QUFBQSxFQUNMLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLGFBQWE7QUFBQSxFQUNiLElBQUk7QUFBQSxFQUNKLFVBQVU7QUFBQSxFQUNWLE9BQU87QUFBQSxFQUNQLFdBQVc7QUFBQSxFQUNYLE9BQU87QUFBQSxFQUNQLFdBQVc7QUFBQSxFQUNYLE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLEtBQUs7QUFBQSxFQUNMLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLFVBQVU7QUFBQSxFQUNWLFFBQVE7QUFBQSxFQUNSLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLElBQUk7QUFBQSxFQUNKLE9BQU87QUFBQSxFQUNQLEtBQUs7QUFBQSxFQUNMLE1BQU07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLElBQUk7QUFBQSxFQUNKLE9BQU87QUFDVDtBQUNBLFNBQVMsU0FBUztBQUNoQixRQUFNLFdBQVc7QUFDakIsUUFBTSxPQUFPLE9BQU8sS0FBSyxPQUFPO0FBQ2hDLFFBQU0sUUFBUSxPQUFPLEtBQUssR0FBRztBQUM3QixNQUFJLEdBQUcsR0FBRyxHQUFHLElBQUk7QUFDakIsT0FBSyxJQUFJLEdBQUcsSUFBSSxLQUFLLFFBQVEsS0FBSztBQUNoQyxTQUFLLEtBQUssS0FBSztBQUNmLFNBQUssSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEtBQUs7QUFDakMsVUFBSSxNQUFNO0FBQ1YsV0FBSyxHQUFHLFFBQVEsR0FBRyxJQUFJLEVBQUU7QUFBQSxJQUMxQjtBQUNELFFBQUksU0FBUyxRQUFRLEtBQUssRUFBRTtBQUM1QixhQUFTLE1BQU0sQ0FBQyxLQUFLLEtBQUssS0FBTSxLQUFLLElBQUksS0FBTSxJQUFJLEdBQUk7QUFBQSxFQUN4RDtBQUNELFNBQU87QUFDVDtBQUVBLElBQUk7QUFDSixTQUFTLFVBQVUsS0FBSztBQUN0QixNQUFJLENBQUMsT0FBTztBQUNWLFlBQVEsT0FBTTtBQUNkLFVBQU0sY0FBYyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFBQSxFQUNoQztBQUNELFFBQU0sSUFBSSxNQUFNLElBQUksWUFBYTtBQUNqQyxTQUFPLEtBQUs7QUFBQSxJQUNWLEdBQUcsRUFBRTtBQUFBLElBQ0wsR0FBRyxFQUFFO0FBQUEsSUFDTCxHQUFHLEVBQUU7QUFBQSxJQUNMLEdBQUcsRUFBRSxXQUFXLElBQUksRUFBRSxLQUFLO0FBQUEsRUFDL0I7QUFDQTtBQUVBLE1BQU0sU0FBUztBQUNmLFNBQVMsU0FBUyxLQUFLO0FBQ3JCLFFBQU0sSUFBSSxPQUFPLEtBQUssR0FBRztBQUN6QixNQUFJLElBQUk7QUFDUixNQUFJLEdBQUcsR0FBRztBQUNWLE1BQUksQ0FBQyxHQUFHO0FBQ047QUFBQSxFQUNEO0FBQ0QsTUFBSSxFQUFFLE9BQU8sR0FBRztBQUNkLFVBQU0sSUFBSSxDQUFDLEVBQUU7QUFDYixRQUFJLEVBQUUsS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksS0FBSyxHQUFHLEdBQUc7QUFBQSxFQUN4QztBQUNELE1BQUksQ0FBQyxFQUFFO0FBQ1AsTUFBSSxDQUFDLEVBQUU7QUFDUCxNQUFJLENBQUMsRUFBRTtBQUNQLE1BQUksT0FBTyxFQUFFLEtBQUssSUFBSSxDQUFDLElBQUksSUFBSSxHQUFHLEdBQUcsR0FBRztBQUN4QyxNQUFJLE9BQU8sRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFJLElBQUksR0FBRyxHQUFHLEdBQUc7QUFDeEMsTUFBSSxPQUFPLEVBQUUsS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLEdBQUcsR0FBRyxHQUFHO0FBQ3hDLFNBQU87QUFBQSxJQUNMO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDSjtBQUNBO0FBQ0EsU0FBUyxVQUFVLEdBQUc7QUFDcEIsU0FBTyxNQUNMLEVBQUUsSUFBSSxNQUNGLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sSUFBSSxFQUFFLENBQUMsT0FDdkMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFFakM7QUFFQSxNQUFNLEtBQUssT0FBSyxLQUFLLFdBQVksSUFBSSxRQUFRLEtBQUssSUFBSSxHQUFHLElBQU0sR0FBRyxJQUFJLFFBQVE7QUFDOUUsTUFBTSxPQUFPLE9BQUssS0FBSyxVQUFVLElBQUksUUFBUSxLQUFLLEtBQUssSUFBSSxTQUFTLE9BQU8sR0FBRztBQUM5RSxTQUFTQyxjQUFZLE1BQU0sTUFBTSxHQUFHO0FBQ2xDLFFBQU0sSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLENBQUM7QUFDMUIsUUFBTSxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsQ0FBQztBQUMxQixRQUFNLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxDQUFDO0FBQzFCLFNBQU87QUFBQSxJQUNMLEdBQUcsSUFBSSxHQUFHLElBQUksS0FBSyxLQUFLLElBQUksS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7QUFBQSxJQUMxQyxHQUFHLElBQUksR0FBRyxJQUFJLEtBQUssS0FBSyxJQUFJLEtBQUssQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQUEsSUFDMUMsR0FBRyxJQUFJLEdBQUcsSUFBSSxLQUFLLEtBQUssSUFBSSxLQUFLLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUFBLElBQzFDLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxJQUFJLEtBQUs7QUFBQSxFQUNuQztBQUNBO0FBRUEsU0FBUyxPQUFPLEdBQUcsR0FBRyxPQUFPO0FBQzNCLE1BQUksR0FBRztBQUNMLFFBQUksTUFBTSxRQUFRLENBQUM7QUFDbkIsUUFBSSxLQUFLLEtBQUssSUFBSSxHQUFHLEtBQUssSUFBSSxJQUFJLEtBQUssSUFBSSxLQUFLLE9BQU8sTUFBTSxJQUFJLE1BQU0sQ0FBQyxDQUFDO0FBQ3pFLFVBQU0sUUFBUSxHQUFHO0FBQ2pCLE1BQUUsSUFBSSxJQUFJO0FBQ1YsTUFBRSxJQUFJLElBQUk7QUFDVixNQUFFLElBQUksSUFBSTtBQUFBLEVBQ1g7QUFDSDtBQUNBLFNBQVNDLFFBQU0sR0FBRyxPQUFPO0FBQ3ZCLFNBQU8sSUFBSSxPQUFPLE9BQU8sU0FBUyxJQUFJLENBQUMsSUFBSTtBQUM3QztBQUNBLFNBQVMsV0FBVyxPQUFPO0FBQ3pCLE1BQUksSUFBSSxFQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBRztBQUNqQyxNQUFJLE1BQU0sUUFBUSxLQUFLLEdBQUc7QUFDeEIsUUFBSSxNQUFNLFVBQVUsR0FBRztBQUNyQixVQUFJLEVBQUMsR0FBRyxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksR0FBRyxJQUFHO0FBQ2xELFVBQUksTUFBTSxTQUFTLEdBQUc7QUFDcEIsVUFBRSxJQUFJLElBQUksTUFBTSxFQUFFO0FBQUEsTUFDbkI7QUFBQSxJQUNGO0FBQUEsRUFDTCxPQUFTO0FBQ0wsUUFBSUEsUUFBTSxPQUFPLEVBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFDLENBQUM7QUFDekMsTUFBRSxJQUFJLElBQUksRUFBRSxDQUFDO0FBQUEsRUFDZDtBQUNELFNBQU87QUFDVDtBQUNBLFNBQVMsY0FBYyxLQUFLO0FBQzFCLE1BQUksSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLO0FBQ3pCLFdBQU8sU0FBUyxHQUFHO0FBQUEsRUFDcEI7QUFDRCxTQUFPLFNBQVMsR0FBRztBQUNyQjtBQUNBLE1BQU0sTUFBTTtBQUFBLEVBQ1YsWUFBWSxPQUFPO0FBQ2pCLFFBQUksaUJBQWlCLE9BQU87QUFDMUIsYUFBTztBQUFBLElBQ1I7QUFDRCxVQUFNLE9BQU8sT0FBTztBQUNwQixRQUFJO0FBQ0osUUFBSSxTQUFTLFVBQVU7QUFDckIsVUFBSSxXQUFXLEtBQUs7QUFBQSxJQUMxQixXQUFlLFNBQVMsVUFBVTtBQUM1QixVQUFJLFNBQVMsS0FBSyxLQUFLLFVBQVUsS0FBSyxLQUFLLGNBQWMsS0FBSztBQUFBLElBQy9EO0FBQ0QsU0FBSyxPQUFPO0FBQ1osU0FBSyxTQUFTLENBQUMsQ0FBQztBQUFBLEVBQ2pCO0FBQUEsRUFDRCxJQUFJLFFBQVE7QUFDVixXQUFPLEtBQUs7QUFBQSxFQUNiO0FBQUEsRUFDRCxJQUFJLE1BQU07QUFDUixRQUFJLElBQUlBLFFBQU0sS0FBSyxJQUFJO0FBQ3ZCLFFBQUksR0FBRztBQUNMLFFBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLElBQ2Q7QUFDRCxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBQ0QsSUFBSSxJQUFJLEtBQUs7QUFDWCxTQUFLLE9BQU8sV0FBVyxHQUFHO0FBQUEsRUFDM0I7QUFBQSxFQUNELFlBQVk7QUFDVixXQUFPLEtBQUssU0FBUyxVQUFVLEtBQUssSUFBSSxJQUFJO0FBQUEsRUFDN0M7QUFBQSxFQUNELFlBQVk7QUFDVixXQUFPLEtBQUssU0FBUyxVQUFVLEtBQUssSUFBSSxJQUFJO0FBQUEsRUFDN0M7QUFBQSxFQUNELFlBQVk7QUFDVixXQUFPLEtBQUssU0FBUyxVQUFVLEtBQUssSUFBSSxJQUFJO0FBQUEsRUFDN0M7QUFBQSxFQUNELElBQUlDLFFBQU8sUUFBUTtBQUNqQixRQUFJQSxRQUFPO0FBQ1QsWUFBTSxLQUFLLEtBQUs7QUFDaEIsWUFBTSxLQUFLQSxPQUFNO0FBQ2pCLFVBQUk7QUFDSixZQUFNLElBQUksV0FBVyxLQUFLLE1BQU07QUFDaEMsWUFBTSxJQUFJLElBQUksSUFBSTtBQUNsQixZQUFNLElBQUksR0FBRyxJQUFJLEdBQUc7QUFDcEIsWUFBTSxPQUFPLElBQUksTUFBTSxLQUFLLEtBQUssSUFBSSxNQUFNLElBQUksSUFBSSxNQUFNLEtBQUs7QUFDOUQsV0FBSyxJQUFJO0FBQ1QsU0FBRyxJQUFJLE1BQU8sS0FBSyxHQUFHLElBQUksS0FBSyxHQUFHLElBQUk7QUFDdEMsU0FBRyxJQUFJLE1BQU8sS0FBSyxHQUFHLElBQUksS0FBSyxHQUFHLElBQUk7QUFDdEMsU0FBRyxJQUFJLE1BQU8sS0FBSyxHQUFHLElBQUksS0FBSyxHQUFHLElBQUk7QUFDdEMsU0FBRyxJQUFJLElBQUksR0FBRyxLQUFLLElBQUksS0FBSyxHQUFHO0FBQy9CLFdBQUssTUFBTTtBQUFBLElBQ1o7QUFDRCxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBQ0QsWUFBWUEsUUFBTyxHQUFHO0FBQ3BCLFFBQUlBLFFBQU87QUFDVCxXQUFLLE9BQU9GLGNBQVksS0FBSyxNQUFNRSxPQUFNLE1BQU0sQ0FBQztBQUFBLElBQ2pEO0FBQ0QsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUNELFFBQVE7QUFDTixXQUFPLElBQUksTUFBTSxLQUFLLEdBQUc7QUFBQSxFQUMxQjtBQUFBLEVBQ0QsTUFBTSxHQUFHO0FBQ1AsU0FBSyxLQUFLLElBQUksSUFBSSxDQUFDO0FBQ25CLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFDRCxRQUFRLE9BQU87QUFDYixVQUFNLE1BQU0sS0FBSztBQUNqQixRQUFJLEtBQUssSUFBSTtBQUNiLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFDRCxZQUFZO0FBQ1YsVUFBTSxNQUFNLEtBQUs7QUFDakIsVUFBTSxNQUFNLE1BQU0sSUFBSSxJQUFJLE1BQU0sSUFBSSxJQUFJLE9BQU8sSUFBSSxJQUFJLElBQUk7QUFDM0QsUUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUk7QUFDeEIsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUNELFFBQVEsT0FBTztBQUNiLFVBQU0sTUFBTSxLQUFLO0FBQ2pCLFFBQUksS0FBSyxJQUFJO0FBQ2IsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUNELFNBQVM7QUFDUCxVQUFNLElBQUksS0FBSztBQUNmLE1BQUUsSUFBSSxNQUFNLEVBQUU7QUFDZCxNQUFFLElBQUksTUFBTSxFQUFFO0FBQ2QsTUFBRSxJQUFJLE1BQU0sRUFBRTtBQUNkLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFDRCxRQUFRLE9BQU87QUFDYixXQUFPLEtBQUssTUFBTSxHQUFHLEtBQUs7QUFDMUIsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUNELE9BQU8sT0FBTztBQUNaLFdBQU8sS0FBSyxNQUFNLEdBQUcsQ0FBQyxLQUFLO0FBQzNCLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFDRCxTQUFTLE9BQU87QUFDZCxXQUFPLEtBQUssTUFBTSxHQUFHLEtBQUs7QUFDMUIsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUNELFdBQVcsT0FBTztBQUNoQixXQUFPLEtBQUssTUFBTSxHQUFHLENBQUMsS0FBSztBQUMzQixXQUFPO0FBQUEsRUFDUjtBQUFBLEVBQ0QsT0FBTyxLQUFLO0FBQ1YsV0FBTyxLQUFLLE1BQU0sR0FBRztBQUNyQixXQUFPO0FBQUEsRUFDUjtBQUNIO0FDdGtCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFZSSxTQUFTLE9BQU87QUFDUjtBQUdSLE1BQU0sT0FBTyxNQUFJO0FBQ2pCLE1BQUksS0FBSztBQUNULFNBQU8sTUFBSTtBQUNmO0FBS0ksU0FBUyxjQUFjLE9BQU87QUFDOUIsU0FBTyxVQUFVLFFBQVEsT0FBTyxVQUFVO0FBQzlDO0FBS0ksU0FBUyxRQUFRLE9BQU87QUFDeEIsTUFBSSxNQUFNLFdBQVcsTUFBTSxRQUFRLEtBQUssR0FBRztBQUN2QyxXQUFPO0FBQUEsRUFDVjtBQUNELFFBQU0sT0FBTyxPQUFPLFVBQVUsU0FBUyxLQUFLLEtBQUs7QUFDakQsTUFBSSxLQUFLLE1BQU0sR0FBRyxDQUFDLE1BQU0sYUFBYSxLQUFLLE1BQU0sRUFBRSxNQUFNLFVBQVU7QUFDL0QsV0FBTztBQUFBLEVBQ1Y7QUFDRCxTQUFPO0FBQ1g7QUFLSSxTQUFTLFNBQVMsT0FBTztBQUN6QixTQUFPLFVBQVUsUUFBUSxPQUFPLFVBQVUsU0FBUyxLQUFLLEtBQUssTUFBTTtBQUN2RTtBQUlJLFNBQVMsZUFBZSxPQUFPO0FBQy9CLFVBQVEsT0FBTyxVQUFVLFlBQVksaUJBQWlCLFdBQVcsU0FBUyxDQUFDLEtBQUs7QUFDcEY7QUFLSSxTQUFTLGdCQUFnQixPQUFPLGNBQWM7QUFDOUMsU0FBTyxlQUFlLEtBQUssSUFBSSxRQUFRO0FBQzNDO0FBS0ksU0FBUyxlQUFlLE9BQU8sY0FBYztBQUM3QyxTQUFPLE9BQU8sVUFBVSxjQUFjLGVBQWU7QUFDekQ7QUFDQSxNQUFNLGVBQWUsQ0FBQyxPQUFPLGNBQVksT0FBTyxVQUFVLFlBQVksTUFBTSxTQUFTLEdBQUcsSUFBSSxXQUFXLEtBQUssSUFBSSxNQUFNLENBQUMsUUFBUTtBQUMvSCxNQUFNLGNBQWMsQ0FBQyxPQUFPLGNBQVksT0FBTyxVQUFVLFlBQVksTUFBTSxTQUFTLEdBQUcsSUFBSSxXQUFXLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQU85SCxTQUFTLFNBQVMsSUFBSSxNQUFNLFNBQVM7QUFDckMsTUFBSSxNQUFNLE9BQU8sR0FBRyxTQUFTLFlBQVk7QUFDckMsV0FBTyxHQUFHLE1BQU0sU0FBUyxJQUFJO0FBQUEsRUFDaEM7QUFDTDtBQUNBLFNBQVMsS0FBSyxVQUFVLElBQUksU0FBUyxTQUFTO0FBQzFDLE1BQUksR0FBRyxLQUFLO0FBQ1osTUFBSSxRQUFRLFFBQVEsR0FBRztBQUNuQixVQUFNLFNBQVM7QUFDZixRQUFJLFNBQVM7QUFDVCxXQUFJLElBQUksTUFBTSxHQUFHLEtBQUssR0FBRyxLQUFJO0FBQ3pCLFdBQUcsS0FBSyxTQUFTLFNBQVMsSUFBSSxDQUFDO0FBQUEsTUFDbEM7QUFBQSxJQUNiLE9BQWU7QUFDSCxXQUFJLElBQUksR0FBRyxJQUFJLEtBQUssS0FBSTtBQUNwQixXQUFHLEtBQUssU0FBUyxTQUFTLElBQUksQ0FBQztBQUFBLE1BQ2xDO0FBQUEsSUFDSjtBQUFBLEVBQ1QsV0FBZSxTQUFTLFFBQVEsR0FBRztBQUMzQixXQUFPLE9BQU8sS0FBSyxRQUFRO0FBQzNCLFVBQU0sS0FBSztBQUNYLFNBQUksSUFBSSxHQUFHLElBQUksS0FBSyxLQUFJO0FBQ3BCLFNBQUcsS0FBSyxTQUFTLFNBQVMsS0FBSyxLQUFLLEtBQUssRUFBRTtBQUFBLElBQzlDO0FBQUEsRUFDSjtBQUNMO0FBTUksU0FBUyxlQUFlLElBQUksSUFBSTtBQUNoQyxNQUFJLEdBQUcsTUFBTSxJQUFJO0FBQ2pCLE1BQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLFdBQVcsR0FBRyxRQUFRO0FBQ3ZDLFdBQU87QUFBQSxFQUNWO0FBQ0QsT0FBSSxJQUFJLEdBQUcsT0FBTyxHQUFHLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUN2QyxTQUFLLEdBQUc7QUFDUixTQUFLLEdBQUc7QUFDUixRQUFJLEdBQUcsaUJBQWlCLEdBQUcsZ0JBQWdCLEdBQUcsVUFBVSxHQUFHLE9BQU87QUFDOUQsYUFBTztBQUFBLElBQ1Y7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUNYO0FBSUksU0FBUyxNQUFNLFFBQVE7QUFDdkIsTUFBSSxRQUFRLE1BQU0sR0FBRztBQUNqQixXQUFPLE9BQU8sSUFBSSxLQUFLO0FBQUEsRUFDMUI7QUFDRCxNQUFJLFNBQVMsTUFBTSxHQUFHO0FBQ2xCLFVBQU0sU0FBUyx1QkFBTyxPQUFPLElBQUk7QUFDakMsVUFBTSxPQUFPLE9BQU8sS0FBSyxNQUFNO0FBQy9CLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFFBQUksSUFBSTtBQUNSLFdBQU0sSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUNoQixhQUFPLEtBQUssTUFBTSxNQUFNLE9BQU8sS0FBSyxHQUFHO0FBQUEsSUFDMUM7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsV0FBVyxLQUFLO0FBQ3JCLFNBQU87QUFBQSxJQUNIO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNILEVBQUMsUUFBUSxHQUFHLE1BQU07QUFDdkI7QUFLSSxTQUFTLFFBQVEsS0FBSyxRQUFRLFFBQVEsU0FBUztBQUMvQyxNQUFJLENBQUMsV0FBVyxHQUFHLEdBQUc7QUFDbEI7QUFBQSxFQUNIO0FBQ0QsUUFBTSxPQUFPLE9BQU87QUFDcEIsUUFBTSxPQUFPLE9BQU87QUFDcEIsTUFBSSxTQUFTLElBQUksS0FBSyxTQUFTLElBQUksR0FBRztBQUVsQyxVQUFNLE1BQU0sTUFBTSxPQUFPO0FBQUEsRUFDakMsT0FBVztBQUNILFdBQU8sT0FBTyxNQUFNLElBQUk7QUFBQSxFQUMzQjtBQUNMO0FBQ0EsU0FBUyxNQUFNLFFBQVEsUUFBUSxTQUFTO0FBQ3BDLFFBQU0sVUFBVSxRQUFRLE1BQU0sSUFBSSxTQUFTO0FBQUEsSUFDdkM7QUFBQSxFQUNSO0FBQ0ksUUFBTSxPQUFPLFFBQVE7QUFDckIsTUFBSSxDQUFDLFNBQVMsTUFBTSxHQUFHO0FBQ25CLFdBQU87QUFBQSxFQUNWO0FBQ0QsWUFBVSxXQUFXO0FBQ3JCLFFBQU0sU0FBUyxRQUFRLFVBQVU7QUFDakMsTUFBSTtBQUNKLFdBQVEsSUFBSSxHQUFHLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDekIsY0FBVSxRQUFRO0FBQ2xCLFFBQUksQ0FBQyxTQUFTLE9BQU8sR0FBRztBQUNwQjtBQUFBLElBQ0g7QUFDRCxVQUFNLE9BQU8sT0FBTyxLQUFLLE9BQU87QUFDaEMsYUFBUSxJQUFJLEdBQUcsT0FBTyxLQUFLLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUM3QyxhQUFPLEtBQUssSUFBSSxRQUFRLFNBQVMsT0FBTztBQUFBLElBQzNDO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsUUFBUSxRQUFRLFFBQVE7QUFFN0IsU0FBTyxNQUFNLFFBQVEsUUFBUTtBQUFBLElBQ3pCLFFBQVE7QUFBQSxFQUNoQixDQUFLO0FBQ0w7QUFJSSxTQUFTLFVBQVUsS0FBSyxRQUFRLFFBQVE7QUFDeEMsTUFBSSxDQUFDLFdBQVcsR0FBRyxHQUFHO0FBQ2xCO0FBQUEsRUFDSDtBQUNELFFBQU0sT0FBTyxPQUFPO0FBQ3BCLFFBQU0sT0FBTyxPQUFPO0FBQ3BCLE1BQUksU0FBUyxJQUFJLEtBQUssU0FBUyxJQUFJLEdBQUc7QUFDbEMsWUFBUSxNQUFNLElBQUk7QUFBQSxFQUMxQixXQUFlLENBQUMsT0FBTyxVQUFVLGVBQWUsS0FBSyxRQUFRLEdBQUcsR0FBRztBQUMzRCxXQUFPLE9BQU8sTUFBTSxJQUFJO0FBQUEsRUFDM0I7QUFDTDtBQVNBLE1BQU0sZUFBZTtBQUFBLEVBRWpCLElBQUksQ0FBQyxNQUFJO0FBQUEsRUFFVCxHQUFHLENBQUMsTUFBSSxFQUFFO0FBQUEsRUFDVixHQUFHLENBQUMsTUFBSSxFQUFFO0FBQ2Q7QUFHSSxTQUFTLFVBQVUsS0FBSztBQUN4QixRQUFNLFFBQVEsSUFBSSxNQUFNLEdBQUc7QUFDM0IsUUFBTSxPQUFPO0FBQ2IsTUFBSSxNQUFNO0FBQ1YsYUFBVyxRQUFRLE9BQU07QUFDckIsV0FBTztBQUNQLFFBQUksSUFBSSxTQUFTLElBQUksR0FBRztBQUNwQixZQUFNLElBQUksTUFBTSxHQUFHLEVBQUUsSUFBSTtBQUFBLElBQ3JDLE9BQWU7QUFDSCxXQUFLLEtBQUssR0FBRztBQUNiLFlBQU07QUFBQSxJQUNUO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsZ0JBQWdCLEtBQUs7QUFDMUIsUUFBTSxPQUFPLFVBQVUsR0FBRztBQUMxQixTQUFPLENBQUMsUUFBTTtBQUNWLGVBQVcsS0FBSyxNQUFLO0FBQ2pCLFVBQUksTUFBTSxJQUFJO0FBQ1Y7QUFBQSxNQUNIO0FBQ0QsWUFBTSxPQUFPLElBQUk7QUFBQSxJQUNwQjtBQUNELFdBQU87QUFBQSxFQUNmO0FBQ0E7QUFDQSxTQUFTLGlCQUFpQixLQUFLLEtBQUs7QUFDaEMsUUFBTSxXQUFXLGFBQWEsU0FBUyxhQUFhLE9BQU8sZ0JBQWdCLEdBQUc7QUFDOUUsU0FBTyxTQUFTLEdBQUc7QUFDdkI7QUFHSSxTQUFTLFlBQVksS0FBSztBQUMxQixTQUFPLElBQUksT0FBTyxDQUFDLEVBQUUsWUFBVyxJQUFLLElBQUksTUFBTSxDQUFDO0FBQ3BEO0FBQ0EsTUFBTSxVQUFVLENBQUMsVUFBUSxPQUFPLFVBQVU7QUFDMUMsTUFBTSxhQUFhLENBQUMsVUFBUSxPQUFPLFVBQVU7QUFFN0MsTUFBTSxZQUFZLENBQUMsR0FBRyxNQUFJO0FBQ3RCLE1BQUksRUFBRSxTQUFTLEVBQUUsTUFBTTtBQUNuQixXQUFPO0FBQUEsRUFDVjtBQUNELGFBQVcsUUFBUSxHQUFFO0FBQ2pCLFFBQUksQ0FBQyxFQUFFLElBQUksSUFBSSxHQUFHO0FBQ2QsYUFBTztBQUFBLElBQ1Y7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUNYO0FBSUksU0FBUyxjQUFjLEdBQUc7QUFDMUIsU0FBTyxFQUFFLFNBQVMsYUFBYSxFQUFFLFNBQVMsV0FBVyxFQUFFLFNBQVM7QUFDcEU7QUFLSSxNQUFNLEtBQUssS0FBSztBQUNwQixNQUFNLE1BQU0sSUFBSTtBQUVoQixNQUFNLFdBQVcsT0FBTztBQUN4QixNQUFNLGNBQWMsS0FBSztBQUN6QixNQUFNLFVBQVUsS0FBSztBQUNyQixNQUFNLGFBQWEsS0FBSztBQUN4QixNQUFNLGdCQUFnQixLQUFLLElBQUk7QUFDL0IsTUFBTSxRQUFRLEtBQUs7QUFDbkIsTUFBTSxPQUFPLEtBQUs7QUFDbEIsU0FBUyxhQUFhLEdBQUcsR0FBRyxTQUFTO0FBQ2pDLFNBQU8sS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJO0FBQzdCO0FBR0ksU0FBUyxRQUFRLE9BQU87QUFDeEIsUUFBTSxlQUFlLEtBQUssTUFBTSxLQUFLO0FBQ3JDLFVBQVEsYUFBYSxPQUFPLGNBQWMsUUFBUSxHQUFJLElBQUksZUFBZTtBQUN6RSxRQUFNLFlBQVksS0FBSyxJQUFJLElBQUksS0FBSyxNQUFNLE1BQU0sS0FBSyxDQUFDLENBQUM7QUFDdkQsUUFBTSxXQUFXLFFBQVE7QUFDekIsUUFBTSxlQUFlLFlBQVksSUFBSSxJQUFJLFlBQVksSUFBSSxJQUFJLFlBQVksSUFBSSxJQUFJO0FBQ2pGLFNBQU8sZUFBZTtBQUMxQjtBQUlJLFNBQVMsV0FBVyxPQUFPO0FBQzNCLFFBQU0sU0FBUztBQUNmLFFBQU0sT0FBTyxLQUFLLEtBQUssS0FBSztBQUM1QixNQUFJO0FBQ0osT0FBSSxJQUFJLEdBQUcsSUFBSSxNQUFNLEtBQUk7QUFDckIsUUFBSSxRQUFRLE1BQU0sR0FBRztBQUNqQixhQUFPLEtBQUssQ0FBQztBQUNiLGFBQU8sS0FBSyxRQUFRLENBQUM7QUFBQSxJQUN4QjtBQUFBLEVBQ0o7QUFDRCxNQUFJLFVBQVUsT0FBTyxJQUFJO0FBQ3JCLFdBQU8sS0FBSyxJQUFJO0FBQUEsRUFDbkI7QUFDRCxTQUFPLEtBQUssQ0FBQyxHQUFHLE1BQUksSUFBSSxDQUFDLEVBQUU7QUFDM0IsU0FBTztBQUNYO0FBQ0EsU0FBUyxTQUFTLEdBQUc7QUFDakIsU0FBTyxDQUFDLE1BQU0sV0FBVyxDQUFDLENBQUMsS0FBSyxTQUFTLENBQUM7QUFDOUM7QUFDQSxTQUFTLFlBQVksR0FBRyxTQUFTO0FBQzdCLFFBQU0sVUFBVSxLQUFLLE1BQU0sQ0FBQztBQUM1QixTQUFPLFVBQVUsV0FBVyxLQUFLLFVBQVUsV0FBVztBQUMxRDtBQUdJLFNBQVMsbUJBQW1CLE9BQU8sUUFBUSxVQUFVO0FBQ3JELE1BQUksR0FBRyxNQUFNO0FBQ2IsT0FBSSxJQUFJLEdBQUcsT0FBTyxNQUFNLFFBQVEsSUFBSSxNQUFNLEtBQUk7QUFDMUMsWUFBUSxNQUFNLEdBQUc7QUFDakIsUUFBSSxDQUFDLE1BQU0sS0FBSyxHQUFHO0FBQ2YsYUFBTyxNQUFNLEtBQUssSUFBSSxPQUFPLEtBQUssS0FBSztBQUN2QyxhQUFPLE1BQU0sS0FBSyxJQUFJLE9BQU8sS0FBSyxLQUFLO0FBQUEsSUFDMUM7QUFBQSxFQUNKO0FBQ0w7QUFDQSxTQUFTLFVBQVUsU0FBUztBQUN4QixTQUFPLFdBQVcsS0FBSztBQUMzQjtBQUNBLFNBQVMsVUFBVSxTQUFTO0FBQ3hCLFNBQU8sV0FBVyxNQUFNO0FBQzVCO0FBT0ksU0FBUyxlQUFlLEdBQUc7QUFDM0IsTUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHO0FBQ3BCO0FBQUEsRUFDSDtBQUNELE1BQUksSUFBSTtBQUNSLE1BQUksSUFBSTtBQUNSLFNBQU0sS0FBSyxNQUFNLElBQUksQ0FBQyxJQUFJLE1BQU0sR0FBRTtBQUM5QixTQUFLO0FBQ0w7QUFBQSxFQUNIO0FBQ0QsU0FBTztBQUNYO0FBRUEsU0FBUyxrQkFBa0IsYUFBYSxZQUFZO0FBQ2hELFFBQU0sc0JBQXNCLFdBQVcsSUFBSSxZQUFZO0FBQ3ZELFFBQU0sc0JBQXNCLFdBQVcsSUFBSSxZQUFZO0FBQ3ZELFFBQU0sMkJBQTJCLEtBQUssS0FBSyxzQkFBc0Isc0JBQXNCLHNCQUFzQixtQkFBbUI7QUFDaEksTUFBSSxRQUFRLEtBQUssTUFBTSxxQkFBcUIsbUJBQW1CO0FBQy9ELE1BQUksUUFBUSxPQUFPLElBQUk7QUFDbkIsYUFBUztBQUFBLEVBQ1o7QUFDRCxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0EsVUFBVTtBQUFBLEVBQ2xCO0FBQ0E7QUFDQSxTQUFTLHNCQUFzQixLQUFLLEtBQUs7QUFDckMsU0FBTyxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztBQUM1RTtBQVVJLFNBQVMsZ0JBQWdCLEdBQUc7QUFDNUIsVUFBUSxJQUFJLE1BQU0sT0FBTztBQUM3QjtBQUdJLFNBQVMsY0FBYyxPQUFPLE9BQU8sS0FBSyx1QkFBdUI7QUFDakUsUUFBTSxJQUFJLGdCQUFnQixLQUFLO0FBQy9CLFFBQU0sSUFBSSxnQkFBZ0IsS0FBSztBQUMvQixRQUFNLElBQUksZ0JBQWdCLEdBQUc7QUFDN0IsUUFBTSxlQUFlLGdCQUFnQixJQUFJLENBQUM7QUFDMUMsUUFBTSxhQUFhLGdCQUFnQixJQUFJLENBQUM7QUFDeEMsUUFBTSxlQUFlLGdCQUFnQixJQUFJLENBQUM7QUFDMUMsUUFBTSxhQUFhLGdCQUFnQixJQUFJLENBQUM7QUFDeEMsU0FBTyxNQUFNLEtBQUssTUFBTSxLQUFLLHlCQUF5QixNQUFNLEtBQUssZUFBZSxjQUFjLGVBQWU7QUFDakg7QUFPSSxTQUFTLFlBQVksT0FBTyxLQUFLLEtBQUs7QUFDdEMsU0FBTyxLQUFLLElBQUksS0FBSyxLQUFLLElBQUksS0FBSyxLQUFLLENBQUM7QUFDN0M7QUFJSSxTQUFTLFlBQVksT0FBTztBQUM1QixTQUFPLFlBQVksT0FBTyxRQUFRLEtBQUs7QUFDM0M7QUFPSSxTQUFTLFdBQVcsT0FBTyxPQUFPLEtBQUssVUFBVSxNQUFNO0FBQ3ZELFNBQU8sU0FBUyxLQUFLLElBQUksT0FBTyxHQUFHLElBQUksV0FBVyxTQUFTLEtBQUssSUFBSSxPQUFPLEdBQUcsSUFBSTtBQUN0RjtBQUVBLFNBQVMsUUFBUSxPQUFPLE9BQU8sS0FBSztBQUNoQyxRQUFNLFFBQVEsQ0FBQyxVQUFRLE1BQU0sU0FBUztBQUN0QyxNQUFJLEtBQUssTUFBTSxTQUFTO0FBQ3hCLE1BQUksS0FBSztBQUNULE1BQUk7QUFDSixTQUFNLEtBQUssS0FBSyxHQUFFO0FBQ2QsVUFBTSxLQUFLLE1BQU07QUFDakIsUUFBSSxJQUFJLEdBQUcsR0FBRztBQUNWLFdBQUs7QUFBQSxJQUNqQixPQUFlO0FBQ0gsV0FBSztBQUFBLElBQ1I7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBO0FBQUEsRUFDUjtBQUNBO0FBUUksTUFBTSxlQUFlLENBQUMsT0FBTyxLQUFLLE9BQU8sU0FBTyxRQUFRLE9BQU8sT0FBTyxPQUFPLENBQUMsVUFBUTtBQUNsRixRQUFNLEtBQUssTUFBTSxPQUFPO0FBQ3hCLFNBQU8sS0FBSyxTQUFTLE9BQU8sU0FBUyxNQUFNLFFBQVEsR0FBRyxTQUFTO0FBQ3ZFLElBQVEsQ0FBQyxVQUFRLE1BQU0sT0FBTyxPQUFPLEtBQUs7QUFPdEMsTUFBTSxnQkFBZ0IsQ0FBQyxPQUFPLEtBQUssVUFBUSxRQUFRLE9BQU8sT0FBTyxDQUFDLFVBQVEsTUFBTSxPQUFPLFFBQVEsS0FBSztBQU9wRyxTQUFTLGVBQWUsUUFBUSxLQUFLLEtBQUs7QUFDMUMsTUFBSSxRQUFRO0FBQ1osTUFBSSxNQUFNLE9BQU87QUFDakIsU0FBTSxRQUFRLE9BQU8sT0FBTyxTQUFTLEtBQUk7QUFDckM7QUFBQSxFQUNIO0FBQ0QsU0FBTSxNQUFNLFNBQVMsT0FBTyxNQUFNLEtBQUssS0FBSTtBQUN2QztBQUFBLEVBQ0g7QUFDRCxTQUFPLFFBQVEsS0FBSyxNQUFNLE9BQU8sU0FBUyxPQUFPLE1BQU0sT0FBTyxHQUFHLElBQUk7QUFDekU7QUFDQSxNQUFNLGNBQWM7QUFBQSxFQUNoQjtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDSjtBQUNBLFNBQVMsa0JBQWtCLE9BQU8sVUFBVTtBQUN4QyxNQUFJLE1BQU0sVUFBVTtBQUNoQixVQUFNLFNBQVMsVUFBVSxLQUFLLFFBQVE7QUFDdEM7QUFBQSxFQUNIO0FBQ0QsU0FBTyxlQUFlLE9BQU8sWUFBWTtBQUFBLElBQ3JDLGNBQWM7QUFBQSxJQUNkLFlBQVk7QUFBQSxJQUNaLE9BQU87QUFBQSxNQUNILFdBQVc7QUFBQSxRQUNQO0FBQUEsTUFDSDtBQUFBLElBQ0o7QUFBQSxFQUNULENBQUs7QUFDRCxjQUFZLFFBQVEsQ0FBQyxRQUFNO0FBQ3ZCLFVBQU0sU0FBUyxZQUFZLFlBQVksR0FBRztBQUMxQyxVQUFNLE9BQU8sTUFBTTtBQUNuQixXQUFPLGVBQWUsT0FBTyxLQUFLO0FBQUEsTUFDOUIsY0FBYztBQUFBLE1BQ2QsWUFBWTtBQUFBLE1BQ1osU0FBVSxNQUFNO0FBQ1osY0FBTSxNQUFNLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDakMsY0FBTSxTQUFTLFVBQVUsUUFBUSxDQUFDLFdBQVM7QUFDdkMsY0FBSSxPQUFPLE9BQU8sWUFBWSxZQUFZO0FBQ3RDLG1CQUFPLFFBQVEsR0FBRyxJQUFJO0FBQUEsVUFDekI7QUFBQSxRQUNyQixDQUFpQjtBQUNELGVBQU87QUFBQSxNQUNWO0FBQUEsSUFDYixDQUFTO0FBQUEsRUFDVCxDQUFLO0FBQ0w7QUFDQSxTQUFTLG9CQUFvQixPQUFPLFVBQVU7QUFDMUMsUUFBTSxPQUFPLE1BQU07QUFDbkIsTUFBSSxDQUFDLE1BQU07QUFDUDtBQUFBLEVBQ0g7QUFDRCxRQUFNLFlBQVksS0FBSztBQUN2QixRQUFNLFFBQVEsVUFBVSxRQUFRLFFBQVE7QUFDeEMsTUFBSSxVQUFVLElBQUk7QUFDZCxjQUFVLE9BQU8sT0FBTyxDQUFDO0FBQUEsRUFDNUI7QUFDRCxNQUFJLFVBQVUsU0FBUyxHQUFHO0FBQ3RCO0FBQUEsRUFDSDtBQUNELGNBQVksUUFBUSxDQUFDLFFBQU07QUFDdkIsV0FBTyxNQUFNO0FBQUEsRUFDckIsQ0FBSztBQUNELFNBQU8sTUFBTTtBQUNqQjtBQUdJLFNBQVMsYUFBYSxPQUFPO0FBQzdCLFFBQU1DLE9BQU0sb0JBQUk7QUFDaEIsTUFBSSxHQUFHO0FBQ1AsT0FBSSxJQUFJLEdBQUcsT0FBTyxNQUFNLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUMxQyxTQUFJLElBQUksTUFBTSxFQUFFO0FBQUEsRUFDbkI7QUFDRCxNQUFJQSxLQUFJLFNBQVMsTUFBTTtBQUNuQixXQUFPO0FBQUEsRUFDVjtBQUNELFNBQU8sTUFBTSxLQUFLQSxJQUFHO0FBQ3pCO0FBT0csTUFBTSxtQkFBbUIsV0FBVztBQUNuQyxNQUFJLE9BQU8sV0FBVyxhQUFhO0FBQy9CLFdBQU8sU0FBU0MsV0FBVTtBQUN0QixhQUFPQSxVQUFRO0FBQUEsSUFDM0I7QUFBQSxFQUNLO0FBQ0QsU0FBTyxPQUFPO0FBQ2xCO0FBSUksU0FBUyxVQUFVLElBQUksU0FBUztBQUNoQyxNQUFJLFlBQVk7QUFDaEIsTUFBSSxVQUFVO0FBQ2QsU0FBTyxZQUFZLE1BQU07QUFFckIsZ0JBQVk7QUFDWixRQUFJLENBQUMsU0FBUztBQUNWLGdCQUFVO0FBQ1YsdUJBQWlCLEtBQUssUUFBUSxNQUFJO0FBQzlCLGtCQUFVO0FBQ1YsV0FBRyxNQUFNLFNBQVMsU0FBUztBQUFBLE1BQzNDLENBQWE7QUFBQSxJQUNKO0FBQUEsRUFDVDtBQUNBO0FBR0ksU0FBUyxTQUFTLElBQUksT0FBTztBQUM3QixNQUFJO0FBQ0osU0FBTyxZQUFZLE1BQU07QUFDckIsUUFBSSxPQUFPO0FBQ1AsbUJBQWEsT0FBTztBQUNwQixnQkFBVSxXQUFXLElBQUksT0FBTyxJQUFJO0FBQUEsSUFDaEQsT0FBZTtBQUNILFNBQUcsTUFBTSxNQUFNLElBQUk7QUFBQSxJQUN0QjtBQUNELFdBQU87QUFBQSxFQUNmO0FBQ0E7QUFJSSxNQUFNLHFCQUFxQixDQUFDLFVBQVEsVUFBVSxVQUFVLFNBQVMsVUFBVSxRQUFRLFVBQVU7QUFJN0YsTUFBTSxpQkFBaUIsQ0FBQyxPQUFPLE9BQU8sUUFBTSxVQUFVLFVBQVUsUUFBUSxVQUFVLFFBQVEsT0FBTyxRQUFRLE9BQU87QUFJaEgsTUFBTSxTQUFTLENBQUMsT0FBTyxNQUFNLE9BQU8sUUFBTTtBQUMxQyxRQUFNLFFBQVEsTUFBTSxTQUFTO0FBQzdCLFNBQU8sVUFBVSxRQUFRLFFBQVEsVUFBVSxZQUFZLE9BQU8sU0FBUyxJQUFJO0FBQy9FO0FBb0RBLE1BQU0sU0FBUyxDQUFDLE1BQUksTUFBTSxLQUFLLE1BQU07QUFDckMsTUFBTSxZQUFZLENBQUMsR0FBRyxHQUFHLE1BQUksRUFBRSxLQUFLLElBQUksR0FBRyxNQUFNLEtBQUssRUFBRSxJQUFJLEtBQUssS0FBSyxJQUFJLEtBQUssTUFBTSxDQUFDO0FBQ3RGLE1BQU0sYUFBYSxDQUFDLEdBQUcsR0FBRyxNQUFJLEtBQUssSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLEtBQUssS0FBSyxJQUFJLEtBQUssTUFBTSxDQUFDLElBQUk7QUFLL0UsTUFBTSxVQUFVO0FBQUEsRUFDaEIsUUFBUSxDQUFDLE1BQUk7QUFBQSxFQUNiLFlBQVksQ0FBQyxNQUFJLElBQUk7QUFBQSxFQUNyQixhQUFhLENBQUMsTUFBSSxDQUFDLEtBQUssSUFBSTtBQUFBLEVBQzVCLGVBQWUsQ0FBQyxPQUFLLEtBQUssT0FBTyxJQUFJLE1BQU0sSUFBSSxJQUFJLFFBQVEsRUFBRSxLQUFLLElBQUksS0FBSztBQUFBLEVBQzNFLGFBQWEsQ0FBQyxNQUFJLElBQUksSUFBSTtBQUFBLEVBQzFCLGNBQWMsQ0FBQyxPQUFLLEtBQUssS0FBSyxJQUFJLElBQUk7QUFBQSxFQUN0QyxnQkFBZ0IsQ0FBQyxPQUFLLEtBQUssT0FBTyxJQUFJLE1BQU0sSUFBSSxJQUFJLElBQUksUUFBUSxLQUFLLEtBQUssSUFBSSxJQUFJO0FBQUEsRUFDbEYsYUFBYSxDQUFDLE1BQUksSUFBSSxJQUFJLElBQUk7QUFBQSxFQUM5QixjQUFjLENBQUMsTUFBSSxHQUFHLEtBQUssS0FBSyxJQUFJLElBQUksSUFBSTtBQUFBLEVBQzVDLGdCQUFnQixDQUFDLE9BQUssS0FBSyxPQUFPLElBQUksTUFBTSxJQUFJLElBQUksSUFBSSxJQUFJLFNBQVMsS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJO0FBQUEsRUFDM0YsYUFBYSxDQUFDLE1BQUksSUFBSSxJQUFJLElBQUksSUFBSTtBQUFBLEVBQ2xDLGNBQWMsQ0FBQyxPQUFLLEtBQUssS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJO0FBQUEsRUFDOUMsZ0JBQWdCLENBQUMsT0FBSyxLQUFLLE9BQU8sSUFBSSxNQUFNLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxRQUFRLEtBQUssS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJO0FBQUEsRUFDbEcsWUFBWSxDQUFDLE1BQUksQ0FBQyxLQUFLLElBQUksSUFBSSxPQUFPLElBQUk7QUFBQSxFQUMxQyxhQUFhLENBQUMsTUFBSSxLQUFLLElBQUksSUFBSSxPQUFPO0FBQUEsRUFDdEMsZUFBZSxDQUFDLE1BQUksUUFBUSxLQUFLLElBQUksS0FBSyxDQUFDLElBQUk7QUFBQSxFQUMvQyxZQUFZLENBQUMsTUFBSSxNQUFNLElBQUksSUFBSSxLQUFLLElBQUksR0FBRyxNQUFNLElBQUksRUFBRTtBQUFBLEVBQ3ZELGFBQWEsQ0FBQyxNQUFJLE1BQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUk7QUFBQSxFQUN4RCxlQUFlLENBQUMsTUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksTUFBTSxNQUFNLEtBQUssSUFBSSxHQUFHLE1BQU0sSUFBSSxJQUFJLEVBQUUsSUFBSSxPQUFPLENBQUMsS0FBSyxJQUFJLEdBQUcsT0FBTyxJQUFJLElBQUksRUFBRSxJQUFJO0FBQUEsRUFDN0gsWUFBWSxDQUFDLE1BQUksS0FBSyxJQUFJLElBQUksRUFBRSxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSTtBQUFBLEVBQ3ZELGFBQWEsQ0FBQyxNQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxDQUFDO0FBQUEsRUFDNUMsZUFBZSxDQUFDLE9BQUssS0FBSyxPQUFPLElBQUksUUFBUSxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLE9BQU8sS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLENBQUMsSUFBSTtBQUFBLEVBQzlHLGVBQWUsQ0FBQyxNQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksVUFBVSxHQUFHLE9BQU8sR0FBRztBQUFBLEVBQzNELGdCQUFnQixDQUFDLE1BQUksT0FBTyxDQUFDLElBQUksSUFBSSxXQUFXLEdBQUcsT0FBTyxHQUFHO0FBQUEsRUFDN0QsaUJBQWtCLEdBQUc7QUFDakIsVUFBTSxJQUFJO0FBQ1YsVUFBTSxJQUFJO0FBQ1YsV0FBTyxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksTUFBTSxNQUFNLFVBQVUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLE1BQU0sTUFBTSxXQUFXLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUFBLEVBQ3pHO0FBQUEsRUFDRCxXQUFZLEdBQUc7QUFDWCxVQUFNLElBQUk7QUFDVixXQUFPLElBQUksTUFBTSxJQUFJLEtBQUssSUFBSTtBQUFBLEVBQ2pDO0FBQUEsRUFDRCxZQUFhLEdBQUc7QUFDWixVQUFNLElBQUk7QUFDVixZQUFRLEtBQUssS0FBSyxNQUFNLElBQUksS0FBSyxJQUFJLEtBQUs7QUFBQSxFQUM3QztBQUFBLEVBQ0QsY0FBZSxHQUFHO0FBQ2QsUUFBSSxJQUFJO0FBQ1IsU0FBSyxLQUFLLE9BQU8sR0FBRztBQUNoQixhQUFPLE9BQU8sSUFBSSxPQUFPLEtBQUssU0FBUyxLQUFLLElBQUk7QUFBQSxJQUNuRDtBQUNELFdBQU8sUUFBUSxLQUFLLEtBQUssT0FBTyxLQUFLLFNBQVMsS0FBSyxJQUFJLEtBQUs7QUFBQSxFQUMvRDtBQUFBLEVBQ0QsY0FBYyxDQUFDLE1BQUksSUFBSSxRQUFRLGNBQWMsSUFBSSxDQUFDO0FBQUEsRUFDbEQsY0FBZSxHQUFHO0FBQ2QsVUFBTSxJQUFJO0FBQ1YsVUFBTSxJQUFJO0FBQ1YsUUFBSSxJQUFJLElBQUksR0FBRztBQUNYLGFBQU8sSUFBSSxJQUFJO0FBQUEsSUFDbEI7QUFDRCxRQUFJLElBQUksSUFBSSxHQUFHO0FBQ1gsYUFBTyxLQUFLLEtBQUssTUFBTSxLQUFLLElBQUk7QUFBQSxJQUNuQztBQUNELFFBQUksSUFBSSxNQUFNLEdBQUc7QUFDYixhQUFPLEtBQUssS0FBSyxPQUFPLEtBQUssSUFBSTtBQUFBLElBQ3BDO0FBQ0QsV0FBTyxLQUFLLEtBQUssUUFBUSxLQUFLLElBQUk7QUFBQSxFQUNyQztBQUFBLEVBQ0QsaUJBQWlCLENBQUMsTUFBSSxJQUFJLE1BQU0sUUFBUSxhQUFhLElBQUksQ0FBQyxJQUFJLE1BQU0sUUFBUSxjQUFjLElBQUksSUFBSSxDQUFDLElBQUksTUFBTTtBQUNqSDtBQUVBLFNBQVMsb0JBQW9CLE9BQU87QUFDaEMsTUFBSSxTQUFTLE9BQU8sVUFBVSxVQUFVO0FBQ3BDLFVBQU0sT0FBTyxNQUFNO0FBQ25CLFdBQU8sU0FBUyw0QkFBNEIsU0FBUztBQUFBLEVBQ3hEO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxNQUFNLE9BQU87QUFDbEIsU0FBTyxvQkFBb0IsS0FBSyxJQUFJLFFBQVEsSUFBSSxNQUFNLEtBQUs7QUFDL0Q7QUFDQSxTQUFTLGNBQWMsT0FBTztBQUMxQixTQUFPLG9CQUFvQixLQUFLLElBQUksUUFBUSxJQUFJLE1BQU0sS0FBSyxFQUFFLFNBQVMsR0FBRyxFQUFFLE9BQU8sR0FBRyxFQUFFLFVBQVM7QUFDcEc7QUFFQSxNQUFNLFVBQVU7QUFBQSxFQUNaO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNKO0FBQ0EsTUFBTSxTQUFTO0FBQUEsRUFDWDtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0o7QUFDQSxTQUFTLHdCQUF3QkMsV0FBVTtBQUN2QyxZQUFTLElBQUksYUFBYTtBQUFBLElBQ3RCLE9BQU87QUFBQSxJQUNQLFVBQVU7QUFBQSxJQUNWLFFBQVE7QUFBQSxJQUNSLElBQUk7QUFBQSxJQUNKLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLElBQUk7QUFBQSxJQUNKLE1BQU07QUFBQSxFQUNkLENBQUs7QUFDRCxZQUFTLFNBQVMsYUFBYTtBQUFBLElBQzNCLFdBQVc7QUFBQSxJQUNYLFlBQVk7QUFBQSxJQUNaLGFBQWEsQ0FBQ0MsVUFBT0EsVUFBUyxnQkFBZ0JBLFVBQVMsZ0JBQWdCQSxVQUFTO0FBQUEsRUFDeEYsQ0FBSztBQUNELFlBQVMsSUFBSSxjQUFjO0FBQUEsSUFDdkIsUUFBUTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sWUFBWTtBQUFBLElBQ2Y7QUFBQSxJQUNELFNBQVM7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLFlBQVk7QUFBQSxJQUNmO0FBQUEsRUFDVCxDQUFLO0FBQ0QsWUFBUyxTQUFTLGNBQWM7QUFBQSxJQUM1QixXQUFXO0FBQUEsRUFDbkIsQ0FBSztBQUNELFlBQVMsSUFBSSxlQUFlO0FBQUEsSUFDeEIsUUFBUTtBQUFBLE1BQ0osV0FBVztBQUFBLFFBQ1AsVUFBVTtBQUFBLE1BQ2I7QUFBQSxJQUNKO0FBQUEsSUFDRCxRQUFRO0FBQUEsTUFDSixXQUFXO0FBQUEsUUFDUCxVQUFVO0FBQUEsTUFDYjtBQUFBLElBQ0o7QUFBQSxJQUNELE1BQU07QUFBQSxNQUNGLFlBQVk7QUFBQSxRQUNSLFFBQVE7QUFBQSxVQUNKLE1BQU07QUFBQSxRQUNUO0FBQUEsUUFDRCxTQUFTO0FBQUEsVUFDTCxNQUFNO0FBQUEsVUFDTixVQUFVO0FBQUEsUUFDYjtBQUFBLE1BQ0o7QUFBQSxJQUNKO0FBQUEsSUFDRCxNQUFNO0FBQUEsTUFDRixZQUFZO0FBQUEsUUFDUixRQUFRO0FBQUEsVUFDSixJQUFJO0FBQUEsUUFDUDtBQUFBLFFBQ0QsU0FBUztBQUFBLFVBQ0wsTUFBTTtBQUFBLFVBQ04sUUFBUTtBQUFBLFVBQ1IsSUFBSSxDQUFDLE1BQUksSUFBSTtBQUFBLFFBQ2hCO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFBQSxFQUNULENBQUs7QUFDTDtBQUVBLFNBQVMscUJBQXFCRCxXQUFVO0FBQ3BDLFlBQVMsSUFBSSxVQUFVO0FBQUEsSUFDbkIsYUFBYTtBQUFBLElBQ2IsU0FBUztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBLE1BQ1AsUUFBUTtBQUFBLE1BQ1IsTUFBTTtBQUFBLElBQ1Q7QUFBQSxFQUNULENBQUs7QUFDTDtBQUVBLE1BQU0sWUFBWSxvQkFBSTtBQUN0QixTQUFTLGdCQUFnQixRQUFRLFNBQVM7QUFDdEMsWUFBVSxXQUFXO0FBQ3JCLFFBQU0sV0FBVyxTQUFTLEtBQUssVUFBVSxPQUFPO0FBQ2hELE1BQUksWUFBWSxVQUFVLElBQUksUUFBUTtBQUN0QyxNQUFJLENBQUMsV0FBVztBQUNaLGdCQUFZLElBQUksS0FBSyxhQUFhLFFBQVEsT0FBTztBQUNqRCxjQUFVLElBQUksVUFBVSxTQUFTO0FBQUEsRUFDcEM7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLGFBQWEsS0FBSyxRQUFRLFNBQVM7QUFDeEMsU0FBTyxnQkFBZ0IsUUFBUSxPQUFPLEVBQUUsT0FBTyxHQUFHO0FBQ3REO0FBRUEsTUFBTSxhQUFhO0FBQUEsRUFDbEIsT0FBUSxPQUFPO0FBQ1IsV0FBTyxRQUFRLEtBQUssSUFBSyxRQUFRLEtBQUs7QUFBQSxFQUN6QztBQUFBLEVBQ0osUUFBUyxXQUFXLE9BQU8sT0FBTztBQUMzQixRQUFJLGNBQWMsR0FBRztBQUNqQixhQUFPO0FBQUEsSUFDVjtBQUNELFVBQU0sU0FBUyxLQUFLLE1BQU0sUUFBUTtBQUNsQyxRQUFJO0FBQ0osUUFBSSxRQUFRO0FBQ1osUUFBSSxNQUFNLFNBQVMsR0FBRztBQUNsQixZQUFNLFVBQVUsS0FBSyxJQUFJLEtBQUssSUFBSSxNQUFNLEdBQUcsS0FBSyxHQUFHLEtBQUssSUFBSSxNQUFNLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQztBQUMxRixVQUFJLFVBQVUsUUFBUSxVQUFVLE1BQU87QUFDbkMsbUJBQVc7QUFBQSxNQUNkO0FBQ0QsY0FBUSxlQUFlLFdBQVcsS0FBSztBQUFBLElBQzFDO0FBQ0QsVUFBTSxXQUFXLE1BQU0sS0FBSyxJQUFJLEtBQUssQ0FBQztBQUN0QyxVQUFNLGFBQWEsS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLEtBQUssTUFBTSxRQUFRLEdBQUcsRUFBRSxHQUFHLENBQUM7QUFDdEUsVUFBTSxVQUFVO0FBQUEsTUFDWjtBQUFBLE1BQ0EsdUJBQXVCO0FBQUEsTUFDdkIsdUJBQXVCO0FBQUEsSUFDbkM7QUFDUSxXQUFPLE9BQU8sU0FBUyxLQUFLLFFBQVEsTUFBTSxNQUFNO0FBQ2hELFdBQU8sYUFBYSxXQUFXLFFBQVEsT0FBTztBQUFBLEVBQ2pEO0FBQUEsRUFDSixZQUFhLFdBQVcsT0FBTyxPQUFPO0FBQy9CLFFBQUksY0FBYyxHQUFHO0FBQ2pCLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxTQUFTLE1BQU0sT0FBTyxlQUFlLFlBQVksS0FBSyxJQUFJLElBQUksS0FBSyxNQUFNLE1BQU0sU0FBUyxDQUFDLENBQUM7QUFDaEcsUUFBSTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ1osRUFBVSxTQUFTLE1BQU0sS0FBSyxRQUFRLE1BQU0sTUFBTSxRQUFRO0FBQzlDLGFBQU8sV0FBVyxRQUFRLEtBQUssTUFBTSxXQUFXLE9BQU8sS0FBSztBQUFBLElBQy9EO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFDTDtBQUNBLFNBQVMsZUFBZSxXQUFXLE9BQU87QUFDdEMsTUFBSSxRQUFRLE1BQU0sU0FBUyxJQUFJLE1BQU0sR0FBRyxRQUFRLE1BQU0sR0FBRyxRQUFRLE1BQU0sR0FBRyxRQUFRLE1BQU0sR0FBRztBQUMzRixNQUFJLEtBQUssSUFBSSxLQUFLLEtBQUssS0FBSyxjQUFjLEtBQUssTUFBTSxTQUFTLEdBQUc7QUFDN0QsWUFBUSxZQUFZLEtBQUssTUFBTSxTQUFTO0FBQUEsRUFDM0M7QUFDRCxTQUFPO0FBQ1g7QUFDQyxJQUFJLFFBQVE7QUFBQSxFQUNUO0FBQ0o7QUFFQSxTQUFTLG1CQUFtQkEsV0FBVTtBQUNsQyxZQUFTLElBQUksU0FBUztBQUFBLElBQ2xCLFNBQVM7QUFBQSxJQUNULFFBQVE7QUFBQSxJQUNSLFNBQVM7QUFBQSxJQUNULGFBQWE7QUFBQSxJQUNwQixRQUFRO0FBQUEsSUFDUixPQUFPO0FBQUEsSUFDQSxNQUFNO0FBQUEsTUFDRixTQUFTO0FBQUEsTUFDVCxXQUFXO0FBQUEsTUFDWCxpQkFBaUI7QUFBQSxNQUNqQixXQUFXO0FBQUEsTUFDWCxZQUFZO0FBQUEsTUFDWixXQUFXLENBQUMsTUFBTSxZQUFVLFFBQVE7QUFBQSxNQUNwQyxXQUFXLENBQUMsTUFBTSxZQUFVLFFBQVE7QUFBQSxNQUNwQyxRQUFRO0FBQUEsSUFDWDtBQUFBLElBQ0QsUUFBUTtBQUFBLE1BQ0osU0FBUztBQUFBLE1BQ1QsTUFBTSxDQUFFO0FBQUEsTUFDUixZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsSUFDVjtBQUFBLElBQ0QsT0FBTztBQUFBLE1BQ0gsU0FBUztBQUFBLE1BQ1QsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLFFBQ0wsS0FBSztBQUFBLFFBQ0wsUUFBUTtBQUFBLE1BQ1g7QUFBQSxJQUNKO0FBQUEsSUFDRCxPQUFPO0FBQUEsTUFDSCxhQUFhO0FBQUEsTUFDYixhQUFhO0FBQUEsTUFDYixRQUFRO0FBQUEsTUFDUixpQkFBaUI7QUFBQSxNQUNqQixpQkFBaUI7QUFBQSxNQUNqQixTQUFTO0FBQUEsTUFDVCxTQUFTO0FBQUEsTUFDVCxVQUFVO0FBQUEsTUFDVixpQkFBaUI7QUFBQSxNQUNqQixhQUFhO0FBQUEsTUFDYixVQUFVLE1BQU0sV0FBVztBQUFBLE1BQzNCLE9BQU8sQ0FBRTtBQUFBLE1BQ1QsT0FBTyxDQUFFO0FBQUEsTUFDVCxPQUFPO0FBQUEsTUFDUCxZQUFZO0FBQUEsTUFDWixtQkFBbUI7QUFBQSxNQUNuQixlQUFlO0FBQUEsTUFDZixpQkFBaUI7QUFBQSxJQUNwQjtBQUFBLEVBQ1QsQ0FBSztBQUNELFlBQVMsTUFBTSxlQUFlLFNBQVMsSUFBSSxPQUFPO0FBQ2xELFlBQVMsTUFBTSxjQUFjLFNBQVMsSUFBSSxhQUFhO0FBQ3ZELFlBQVMsTUFBTSxnQkFBZ0IsU0FBUyxJQUFJLGFBQWE7QUFDekQsWUFBUyxNQUFNLGVBQWUsU0FBUyxJQUFJLE9BQU87QUFDbEQsWUFBUyxTQUFTLFNBQVM7QUFBQSxJQUN2QixXQUFXO0FBQUEsSUFDWCxhQUFhLENBQUNDLFVBQU8sQ0FBQ0EsTUFBSyxXQUFXLFFBQVEsS0FBSyxDQUFDQSxNQUFLLFdBQVcsT0FBTyxLQUFLQSxVQUFTLGNBQWNBLFVBQVM7QUFBQSxJQUNoSCxZQUFZLENBQUNBLFVBQU9BLFVBQVMsZ0JBQWdCQSxVQUFTLG9CQUFvQkEsVUFBUztBQUFBLEVBQzNGLENBQUs7QUFDRCxZQUFTLFNBQVMsVUFBVTtBQUFBLElBQ3hCLFdBQVc7QUFBQSxFQUNuQixDQUFLO0FBQ0QsWUFBUyxTQUFTLGVBQWU7QUFBQSxJQUM3QixhQUFhLENBQUNBLFVBQU9BLFVBQVMscUJBQXFCQSxVQUFTO0FBQUEsSUFDNUQsWUFBWSxDQUFDQSxVQUFPQSxVQUFTO0FBQUEsRUFDckMsQ0FBSztBQUNMO0FBRUEsTUFBTSxZQUFZLHVCQUFPLE9BQU8sSUFBSTtBQUNwQyxNQUFNLGNBQWMsdUJBQU8sT0FBTyxJQUFJO0FBQ3JDLFNBQVMsV0FBVyxNQUFNLEtBQUs7QUFDNUIsTUFBSSxDQUFDLEtBQUs7QUFDTixXQUFPO0FBQUEsRUFDVjtBQUNELFFBQU0sT0FBTyxJQUFJLE1BQU0sR0FBRztBQUMxQixXQUFRLElBQUksR0FBRyxJQUFJLEtBQUssUUFBUSxJQUFJLEdBQUcsRUFBRSxHQUFFO0FBQ3ZDLFVBQU0sSUFBSSxLQUFLO0FBQ2YsV0FBTyxLQUFLLE9BQU8sS0FBSyxLQUFLLHVCQUFPLE9BQU8sSUFBSTtBQUFBLEVBQ2xEO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxJQUFJLE1BQU0sT0FBTyxRQUFRO0FBQzlCLE1BQUksT0FBTyxVQUFVLFVBQVU7QUFDM0IsV0FBTyxNQUFNLFdBQVcsTUFBTSxLQUFLLEdBQUcsTUFBTTtBQUFBLEVBQy9DO0FBQ0QsU0FBTyxNQUFNLFdBQVcsTUFBTSxFQUFFLEdBQUcsS0FBSztBQUM1QztBQUNDLE1BQU0sU0FBUztBQUFBLEVBQ1osWUFBWUMsZUFBYyxXQUFVO0FBQ2hDLFNBQUssWUFBWTtBQUNqQixTQUFLLGtCQUFrQjtBQUN2QixTQUFLLGNBQWM7QUFDbkIsU0FBSyxRQUFRO0FBQ2IsU0FBSyxXQUFXO0FBQ2hCLFNBQUssbUJBQW1CLENBQUMsWUFBVSxRQUFRLE1BQU0sU0FBUztBQUMxRCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxTQUFTO0FBQUEsTUFDVjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNaO0FBQ1EsU0FBSyxPQUFPO0FBQUEsTUFDUixRQUFRO0FBQUEsTUFDUixNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsTUFDUCxZQUFZO0FBQUEsTUFDWixRQUFRO0FBQUEsSUFDcEI7QUFDUSxTQUFLLFFBQVE7QUFDYixTQUFLLHVCQUF1QixDQUFDLEtBQUssWUFBVSxjQUFjLFFBQVEsZUFBZTtBQUNqRixTQUFLLG1CQUFtQixDQUFDLEtBQUssWUFBVSxjQUFjLFFBQVEsV0FBVztBQUN6RSxTQUFLLGFBQWEsQ0FBQyxLQUFLLFlBQVUsY0FBYyxRQUFRLEtBQUs7QUFDN0QsU0FBSyxZQUFZO0FBQ2pCLFNBQUssY0FBYztBQUFBLE1BQ2YsTUFBTTtBQUFBLE1BQ04sV0FBVztBQUFBLE1BQ1gsa0JBQWtCO0FBQUEsSUFDOUI7QUFDUSxTQUFLLHNCQUFzQjtBQUMzQixTQUFLLFVBQVU7QUFDZixTQUFLLFVBQVU7QUFDZixTQUFLLFVBQVU7QUFDZixTQUFLLFVBQVU7QUFDZixTQUFLLGFBQWE7QUFDbEIsU0FBSyxRQUFRO0FBQ2IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxXQUFXO0FBQ2hCLFNBQUssMEJBQTBCO0FBQy9CLFNBQUssU0FBU0EsYUFBWTtBQUMxQixTQUFLLE1BQU0sU0FBUztBQUFBLEVBQ3ZCO0FBQUEsRUFDSixJQUFJLE9BQU8sUUFBUTtBQUNaLFdBQU8sSUFBSSxNQUFNLE9BQU8sTUFBTTtBQUFBLEVBQ2pDO0FBQUEsRUFDSixJQUFJLE9BQU87QUFDSixXQUFPLFdBQVcsTUFBTSxLQUFLO0FBQUEsRUFDaEM7QUFBQSxFQUNKLFNBQVMsT0FBTyxRQUFRO0FBQ2pCLFdBQU8sSUFBSSxhQUFhLE9BQU8sTUFBTTtBQUFBLEVBQ3hDO0FBQUEsRUFDRCxTQUFTLE9BQU8sUUFBUTtBQUNwQixXQUFPLElBQUksV0FBVyxPQUFPLE1BQU07QUFBQSxFQUN0QztBQUFBLEVBQ0osTUFBTSxPQUFPRCxPQUFNLGFBQWEsWUFBWTtBQUNyQyxVQUFNLGNBQWMsV0FBVyxNQUFNLEtBQUs7QUFDMUMsVUFBTSxvQkFBb0IsV0FBVyxNQUFNLFdBQVc7QUFDdEQsVUFBTSxjQUFjLE1BQU1BO0FBQzFCLFdBQU8saUJBQWlCLGFBQWE7QUFBQSxNQUNqQyxDQUFDLGNBQWM7QUFBQSxRQUNYLE9BQU8sWUFBWUE7QUFBQSxRQUNuQixVQUFVO0FBQUEsTUFDYjtBQUFBLE1BQ0QsQ0FBQ0EsUUFBTztBQUFBLFFBQ0osWUFBWTtBQUFBLFFBQ1osTUFBTztBQUNILGdCQUFNLFFBQVEsS0FBSztBQUNuQixnQkFBTSxTQUFTLGtCQUFrQjtBQUNqQyxjQUFJLFNBQVMsS0FBSyxHQUFHO0FBQ2pCLG1CQUFPLE9BQU8sT0FBTyxDQUFFLEdBQUUsUUFBUSxLQUFLO0FBQUEsVUFDekM7QUFDRCxpQkFBTyxlQUFlLE9BQU8sTUFBTTtBQUFBLFFBQ3RDO0FBQUEsUUFDRCxJQUFLLE9BQU87QUFDUixlQUFLLGVBQWU7QUFBQSxRQUN2QjtBQUFBLE1BQ0o7QUFBQSxJQUNiLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCxNQUFNLFVBQVU7QUFDWixhQUFTLFFBQVEsQ0FBQyxVQUFRLE1BQU0sSUFBSSxDQUFDO0FBQUEsRUFDeEM7QUFDTDtBQUNBLElBQUksV0FBMkIsb0JBQUksU0FBUztBQUFBLEVBQ3hDLGFBQWEsQ0FBQ0EsVUFBTyxDQUFDQSxNQUFLLFdBQVcsSUFBSTtBQUFBLEVBQzFDLFlBQVksQ0FBQ0EsVUFBT0EsVUFBUztBQUFBLEVBQzdCLE9BQU87QUFBQSxJQUNILFdBQVc7QUFBQSxFQUNkO0FBQUEsRUFDRCxhQUFhO0FBQUEsSUFDVCxhQUFhO0FBQUEsSUFDYixZQUFZO0FBQUEsRUFDZjtBQUNMLEdBQUc7QUFBQSxFQUNDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDSixDQUFDO0FBRUQsU0FBUyxhQUFhLE1BQU07QUFDeEIsTUFBSSxDQUFDLFFBQVEsY0FBYyxLQUFLLElBQUksS0FBSyxjQUFjLEtBQUssTUFBTSxHQUFHO0FBQ2pFLFdBQU87QUFBQSxFQUNWO0FBQ0QsVUFBUSxLQUFLLFFBQVEsS0FBSyxRQUFRLE1BQU0sT0FBTyxLQUFLLFNBQVMsS0FBSyxTQUFTLE1BQU0sTUFBTSxLQUFLLE9BQU8sUUFBUSxLQUFLO0FBQ3BIO0FBQ0MsU0FBUyxhQUFhLEtBQUssTUFBTSxJQUFJLFNBQVMsUUFBUTtBQUNuRCxNQUFJLFlBQVksS0FBSztBQUNyQixNQUFJLENBQUMsV0FBVztBQUNaLGdCQUFZLEtBQUssVUFBVSxJQUFJLFlBQVksTUFBTSxFQUFFO0FBQ25ELE9BQUcsS0FBSyxNQUFNO0FBQUEsRUFDakI7QUFDRCxNQUFJLFlBQVksU0FBUztBQUNyQixjQUFVO0FBQUEsRUFDYjtBQUNELFNBQU87QUFDWDtBQUNDLFNBQVMsYUFBYSxLQUFLLE1BQU0sZUFBZSxPQUFPO0FBQ3BELFVBQVEsU0FBUztBQUNqQixNQUFJLE9BQU8sTUFBTSxPQUFPLE1BQU0sUUFBUTtBQUN0QyxNQUFJLEtBQUssTUFBTSxpQkFBaUIsTUFBTSxrQkFBa0I7QUFDeEQsTUFBSSxNQUFNLFNBQVMsTUFBTTtBQUNyQixXQUFPLE1BQU0sT0FBTztBQUNwQixTQUFLLE1BQU0saUJBQWlCO0FBQzVCLFVBQU0sT0FBTztBQUFBLEVBQ2hCO0FBQ0QsTUFBSSxLQUFJO0FBQ1IsTUFBSSxPQUFPO0FBQ1gsTUFBSSxVQUFVO0FBQ2QsUUFBTSxPQUFPLGNBQWM7QUFDM0IsTUFBSSxHQUFHLEdBQUcsTUFBTSxPQUFPO0FBQ3ZCLE9BQUksSUFBSSxHQUFHLElBQUksTUFBTSxLQUFJO0FBQ3JCLFlBQVEsY0FBYztBQUN0QixRQUFJLFVBQVUsVUFBYSxVQUFVLFFBQVEsUUFBUSxLQUFLLE1BQU0sTUFBTTtBQUNsRSxnQkFBVSxhQUFhLEtBQUssTUFBTSxJQUFJLFNBQVMsS0FBSztBQUFBLElBQ2hFLFdBQW1CLFFBQVEsS0FBSyxHQUFHO0FBQ3ZCLFdBQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxRQUFRLElBQUksTUFBTSxLQUFJO0FBQzFDLHNCQUFjLE1BQU07QUFDcEIsWUFBSSxnQkFBZ0IsVUFBYSxnQkFBZ0IsUUFBUSxDQUFDLFFBQVEsV0FBVyxHQUFHO0FBQzVFLG9CQUFVLGFBQWEsS0FBSyxNQUFNLElBQUksU0FBUyxXQUFXO0FBQUEsUUFDN0Q7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFDRCxNQUFJLFFBQU87QUFDWCxRQUFNLFFBQVEsR0FBRyxTQUFTO0FBQzFCLE1BQUksUUFBUSxjQUFjLFFBQVE7QUFDOUIsU0FBSSxJQUFJLEdBQUcsSUFBSSxPQUFPLEtBQUk7QUFDdEIsYUFBTyxLQUFLLEdBQUc7QUFBQSxJQUNsQjtBQUNELE9BQUcsT0FBTyxHQUFHLEtBQUs7QUFBQSxFQUNyQjtBQUNELFNBQU87QUFDWDtBQUNDLFNBQVMsWUFBWSxPQUFPLE9BQU8sT0FBTztBQUN2QyxRQUFNLG1CQUFtQixNQUFNO0FBQy9CLFFBQU0sWUFBWSxVQUFVLElBQUksS0FBSyxJQUFJLFFBQVEsR0FBRyxHQUFHLElBQUk7QUFDM0QsU0FBTyxLQUFLLE9BQU8sUUFBUSxhQUFhLGdCQUFnQixJQUFJLG1CQUFtQjtBQUNuRjtBQUNDLFNBQVMsWUFBWSxRQUFRLEtBQUs7QUFDL0IsUUFBTSxPQUFPLE9BQU8sV0FBVyxJQUFJO0FBQ25DLE1BQUksS0FBSTtBQUNSLE1BQUksZUFBYztBQUNsQixNQUFJLFVBQVUsR0FBRyxHQUFHLE9BQU8sT0FBTyxPQUFPLE1BQU07QUFDL0MsTUFBSSxRQUFPO0FBQ2Y7QUFDQSxTQUFTLFVBQVUsS0FBSyxTQUFTLEdBQUcsR0FBRztBQUNuQyxrQkFBZ0IsS0FBSyxTQUFTLEdBQUcsR0FBRyxJQUFJO0FBQzVDO0FBQ0EsU0FBUyxnQkFBZ0IsS0FBSyxTQUFTLEdBQUcsR0FBRyxHQUFHO0FBQzVDLE1BQUksTUFBTSxTQUFTLFNBQVMsTUFBTSxjQUFjLE9BQU8sVUFBVTtBQUNqRSxRQUFNLFFBQVEsUUFBUTtBQUN0QixRQUFNLFdBQVcsUUFBUTtBQUN6QixRQUFNLFNBQVMsUUFBUTtBQUN2QixNQUFJLE9BQU8sWUFBWSxLQUFLO0FBQzVCLE1BQUksU0FBUyxPQUFPLFVBQVUsVUFBVTtBQUNwQyxXQUFPLE1BQU07QUFDYixRQUFJLFNBQVMsK0JBQStCLFNBQVMsOEJBQThCO0FBQy9FLFVBQUksS0FBSTtBQUNSLFVBQUksVUFBVSxHQUFHLENBQUM7QUFDbEIsVUFBSSxPQUFPLEdBQUc7QUFDZCxVQUFJLFVBQVUsT0FBTyxDQUFDLE1BQU0sUUFBUSxHQUFHLENBQUMsTUFBTSxTQUFTLEdBQUcsTUFBTSxPQUFPLE1BQU0sTUFBTTtBQUNuRixVQUFJLFFBQU87QUFDWDtBQUFBLElBQ0g7QUFBQSxFQUNKO0FBQ0QsTUFBSSxNQUFNLE1BQU0sS0FBSyxVQUFVLEdBQUc7QUFDOUI7QUFBQSxFQUNIO0FBQ0QsTUFBSSxVQUFTO0FBQ2IsVUFBTztBQUFBO0FBRUMsVUFBSSxHQUFHO0FBQ0gsWUFBSSxRQUFRLEdBQUcsR0FBRyxJQUFJLEdBQUcsUUFBUSxHQUFHLEdBQUcsR0FBRztBQUFBLE1BQzFELE9BQW1CO0FBQ0gsWUFBSSxJQUFJLEdBQUcsR0FBRyxRQUFRLEdBQUcsR0FBRztBQUFBLE1BQy9CO0FBQ0QsVUFBSSxVQUFTO0FBQ2I7QUFBQSxTQUNDO0FBQ0QsY0FBUSxJQUFJLElBQUksSUFBSTtBQUNwQixVQUFJLE9BQU8sSUFBSSxLQUFLLElBQUksR0FBRyxJQUFJLE9BQU8sSUFBSSxLQUFLLElBQUksR0FBRyxJQUFJLE1BQU07QUFDaEUsYUFBTztBQUNQLFVBQUksT0FBTyxJQUFJLEtBQUssSUFBSSxHQUFHLElBQUksT0FBTyxJQUFJLEtBQUssSUFBSSxHQUFHLElBQUksTUFBTTtBQUNoRSxhQUFPO0FBQ1AsVUFBSSxPQUFPLElBQUksS0FBSyxJQUFJLEdBQUcsSUFBSSxPQUFPLElBQUksS0FBSyxJQUFJLEdBQUcsSUFBSSxNQUFNO0FBQ2hFLFVBQUksVUFBUztBQUNiO0FBQUEsU0FDQztBQUNELHFCQUFlLFNBQVM7QUFDeEIsYUFBTyxTQUFTO0FBQ2hCLGdCQUFVLEtBQUssSUFBSSxNQUFNLFVBQVUsSUFBSTtBQUN2QyxpQkFBVyxLQUFLLElBQUksTUFBTSxVQUFVLEtBQUssSUFBSSxJQUFJLElBQUksZUFBZTtBQUNwRSxnQkFBVSxLQUFLLElBQUksTUFBTSxVQUFVLElBQUk7QUFDdkMsaUJBQVcsS0FBSyxJQUFJLE1BQU0sVUFBVSxLQUFLLElBQUksSUFBSSxJQUFJLGVBQWU7QUFDcEUsVUFBSSxJQUFJLElBQUksVUFBVSxJQUFJLFNBQVMsY0FBYyxNQUFNLElBQUksTUFBTSxPQUFPO0FBQ3hFLFVBQUksSUFBSSxJQUFJLFVBQVUsSUFBSSxTQUFTLGNBQWMsTUFBTSxTQUFTLEdBQUc7QUFDbkUsVUFBSSxJQUFJLElBQUksVUFBVSxJQUFJLFNBQVMsY0FBYyxLQUFLLE1BQU0sT0FBTztBQUNuRSxVQUFJLElBQUksSUFBSSxVQUFVLElBQUksU0FBUyxjQUFjLE1BQU0sU0FBUyxNQUFNLEVBQUU7QUFDeEUsVUFBSSxVQUFTO0FBQ2I7QUFBQSxTQUNDO0FBQ0QsVUFBSSxDQUFDLFVBQVU7QUFDWCxlQUFPLEtBQUssVUFBVTtBQUN0QixnQkFBUSxJQUFJLElBQUksSUFBSTtBQUNwQixZQUFJLEtBQUssSUFBSSxPQUFPLElBQUksTUFBTSxJQUFJLE9BQU8sSUFBSSxJQUFJO0FBQ2pEO0FBQUEsTUFDSDtBQUNELGFBQU87QUFBQSxTQUNMO0FBQ0YsaUJBQVcsS0FBSyxJQUFJLEdBQUcsS0FBSyxJQUFJLElBQUksSUFBSTtBQUN4QyxnQkFBVSxLQUFLLElBQUksR0FBRyxJQUFJO0FBQzFCLGdCQUFVLEtBQUssSUFBSSxHQUFHLElBQUk7QUFDMUIsaUJBQVcsS0FBSyxJQUFJLEdBQUcsS0FBSyxJQUFJLElBQUksSUFBSTtBQUN4QyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLFVBQVM7QUFDYjtBQUFBLFNBQ0M7QUFDRCxhQUFPO0FBQUEsU0FDTDtBQUNGLGlCQUFXLEtBQUssSUFBSSxHQUFHLEtBQUssSUFBSSxJQUFJLElBQUk7QUFDeEMsZ0JBQVUsS0FBSyxJQUFJLEdBQUcsSUFBSTtBQUMxQixnQkFBVSxLQUFLLElBQUksR0FBRyxJQUFJO0FBQzFCLGlCQUFXLEtBQUssSUFBSSxHQUFHLEtBQUssSUFBSSxJQUFJLElBQUk7QUFDeEMsVUFBSSxPQUFPLElBQUksVUFBVSxJQUFJLE9BQU87QUFDcEMsVUFBSSxPQUFPLElBQUksVUFBVSxJQUFJLE9BQU87QUFDcEMsVUFBSSxPQUFPLElBQUksVUFBVSxJQUFJLE9BQU87QUFDcEMsVUFBSSxPQUFPLElBQUksVUFBVSxJQUFJLE9BQU87QUFDcEM7QUFBQSxTQUNDO0FBQ0QsaUJBQVcsS0FBSyxJQUFJLEdBQUcsS0FBSyxJQUFJLElBQUksSUFBSTtBQUN4QyxnQkFBVSxLQUFLLElBQUksR0FBRyxJQUFJO0FBQzFCLGdCQUFVLEtBQUssSUFBSSxHQUFHLElBQUk7QUFDMUIsaUJBQVcsS0FBSyxJQUFJLEdBQUcsS0FBSyxJQUFJLElBQUksSUFBSTtBQUN4QyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxhQUFPO0FBQ1AsaUJBQVcsS0FBSyxJQUFJLEdBQUcsS0FBSyxJQUFJLElBQUksSUFBSTtBQUN4QyxnQkFBVSxLQUFLLElBQUksR0FBRyxJQUFJO0FBQzFCLGdCQUFVLEtBQUssSUFBSSxHQUFHLElBQUk7QUFDMUIsaUJBQVcsS0FBSyxJQUFJLEdBQUcsS0FBSyxJQUFJLElBQUksSUFBSTtBQUN4QyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQyxVQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksT0FBTztBQUNwQztBQUFBLFNBQ0M7QUFDRCxnQkFBVSxJQUFJLElBQUksSUFBSSxLQUFLLElBQUksR0FBRyxJQUFJO0FBQ3RDLGdCQUFVLEtBQUssSUFBSSxHQUFHLElBQUk7QUFDMUIsVUFBSSxPQUFPLElBQUksU0FBUyxJQUFJLE9BQU87QUFDbkMsVUFBSSxPQUFPLElBQUksU0FBUyxJQUFJLE9BQU87QUFDbkM7QUFBQSxTQUNDO0FBQ0QsVUFBSSxPQUFPLEdBQUcsQ0FBQztBQUNmLFVBQUksT0FBTyxJQUFJLEtBQUssSUFBSSxHQUFHLEtBQUssSUFBSSxJQUFJLElBQUksU0FBUyxJQUFJLEtBQUssSUFBSSxHQUFHLElBQUksTUFBTTtBQUMvRTtBQUFBLFNBQ0M7QUFDRCxVQUFJLFVBQVM7QUFDYjtBQUFBO0FBRVIsTUFBSSxLQUFJO0FBQ1IsTUFBSSxRQUFRLGNBQWMsR0FBRztBQUN6QixRQUFJLE9BQU07QUFBQSxFQUNiO0FBQ0w7QUFDQyxTQUFTLGVBQWUsT0FBTyxNQUFNLFFBQVE7QUFDMUMsV0FBUyxVQUFVO0FBQ25CLFNBQU8sQ0FBQyxRQUFRLFNBQVMsTUFBTSxJQUFJLEtBQUssT0FBTyxVQUFVLE1BQU0sSUFBSSxLQUFLLFFBQVEsVUFBVSxNQUFNLElBQUksS0FBSyxNQUFNLFVBQVUsTUFBTSxJQUFJLEtBQUssU0FBUztBQUNySjtBQUNBLFNBQVMsU0FBUyxLQUFLLE1BQU07QUFDekIsTUFBSSxLQUFJO0FBQ1IsTUFBSSxVQUFTO0FBQ2IsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLEtBQUssS0FBSyxRQUFRLEtBQUssTUFBTSxLQUFLLFNBQVMsS0FBSyxHQUFHO0FBQzVFLE1BQUksS0FBSTtBQUNaO0FBQ0EsU0FBUyxXQUFXLEtBQUs7QUFDckIsTUFBSSxRQUFPO0FBQ2Y7QUFzQkMsU0FBUyxXQUFXLEtBQUssTUFBTSxHQUFHLEdBQUcsTUFBTSxPQUFPLElBQUk7QUFDbkQsUUFBTSxRQUFRLFFBQVEsSUFBSSxJQUFJLE9BQU87QUFBQSxJQUNqQztBQUFBLEVBQ1I7QUFDSSxRQUFNLFNBQVMsS0FBSyxjQUFjLEtBQUssS0FBSyxnQkFBZ0I7QUFDNUQsTUFBSSxHQUFHO0FBQ1AsTUFBSSxLQUFJO0FBQ1IsTUFBSSxPQUFPLEtBQUs7QUFDaEIsZ0JBQWMsS0FBSyxJQUFJO0FBQ3ZCLE9BQUksSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEVBQUUsR0FBRTtBQUM3QixXQUFPLE1BQU07QUFDYixRQUFJLEtBQUssVUFBVTtBQUNmLG1CQUFhLEtBQUssS0FBSyxRQUFRO0FBQUEsSUFDbEM7QUFDRCxRQUFJLFFBQVE7QUFDUixVQUFJLEtBQUssYUFBYTtBQUNsQixZQUFJLGNBQWMsS0FBSztBQUFBLE1BQzFCO0FBQ0QsVUFBSSxDQUFDLGNBQWMsS0FBSyxXQUFXLEdBQUc7QUFDbEMsWUFBSSxZQUFZLEtBQUs7QUFBQSxNQUN4QjtBQUNELFVBQUksV0FBVyxNQUFNLEdBQUcsR0FBRyxLQUFLLFFBQVE7QUFBQSxJQUMzQztBQUNELFFBQUksU0FBUyxNQUFNLEdBQUcsR0FBRyxLQUFLLFFBQVE7QUFDdEMsaUJBQWEsS0FBSyxHQUFHLEdBQUcsTUFBTSxJQUFJO0FBQ2xDLFNBQUssS0FBSztBQUFBLEVBQ2I7QUFDRCxNQUFJLFFBQU87QUFDZjtBQUNBLFNBQVMsY0FBYyxLQUFLLE1BQU07QUFDOUIsTUFBSSxLQUFLLGFBQWE7QUFDbEIsUUFBSSxVQUFVLEtBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxFQUFFO0FBQUEsRUFDekQ7QUFDRCxNQUFJLENBQUMsY0FBYyxLQUFLLFFBQVEsR0FBRztBQUMvQixRQUFJLE9BQU8sS0FBSyxRQUFRO0FBQUEsRUFDM0I7QUFDRCxNQUFJLEtBQUssT0FBTztBQUNaLFFBQUksWUFBWSxLQUFLO0FBQUEsRUFDeEI7QUFDRCxNQUFJLEtBQUssV0FBVztBQUNoQixRQUFJLFlBQVksS0FBSztBQUFBLEVBQ3hCO0FBQ0QsTUFBSSxLQUFLLGNBQWM7QUFDbkIsUUFBSSxlQUFlLEtBQUs7QUFBQSxFQUMzQjtBQUNMO0FBQ0EsU0FBUyxhQUFhLEtBQUssR0FBRyxHQUFHLE1BQU0sTUFBTTtBQUN6QyxNQUFJLEtBQUssaUJBQWlCLEtBQUssV0FBVztBQUM3QyxVQUFNLFVBQVUsSUFBSSxZQUFZLElBQUk7QUFDN0IsVUFBTSxPQUFPLElBQUksUUFBUTtBQUN6QixVQUFNLFFBQVEsSUFBSSxRQUFRO0FBQzFCLFVBQU0sTUFBTSxJQUFJLFFBQVE7QUFDeEIsVUFBTSxTQUFTLElBQUksUUFBUTtBQUMzQixVQUFNLGNBQWMsS0FBSyxpQkFBaUIsTUFBTSxVQUFVLElBQUk7QUFDOUQsUUFBSSxjQUFjLElBQUk7QUFDdEIsUUFBSSxVQUFTO0FBQ2IsUUFBSSxZQUFZLEtBQUssbUJBQW1CO0FBQ3hDLFFBQUksT0FBTyxNQUFNLFdBQVc7QUFDNUIsUUFBSSxPQUFPLE9BQU8sV0FBVztBQUM3QixRQUFJLE9BQU07QUFBQSxFQUNiO0FBQ0w7QUFDQSxTQUFTLGFBQWEsS0FBSyxNQUFNO0FBQzdCLFFBQU0sV0FBVyxJQUFJO0FBQ3JCLE1BQUksWUFBWSxLQUFLO0FBQ3JCLE1BQUksU0FBUyxLQUFLLE1BQU0sS0FBSyxLQUFLLEtBQUssT0FBTyxLQUFLLE1BQU07QUFDekQsTUFBSSxZQUFZO0FBQ3BCO0FBQ0MsU0FBUyxtQkFBbUIsS0FBSyxNQUFNO0FBQ3BDLFFBQU0sRUFBRSxHQUFJLEdBQUksR0FBSSxPQUFJLE9BQVMsSUFBRztBQUNwQyxNQUFJLElBQUksSUFBSSxPQUFPLFNBQVMsSUFBSSxPQUFPLFNBQVMsT0FBTyxTQUFTLENBQUMsU0FBUyxJQUFJLElBQUk7QUFDbEYsTUFBSSxPQUFPLEdBQUcsSUFBSVAsS0FBSSxPQUFPLFVBQVU7QUFDdkMsTUFBSSxJQUFJLElBQUksT0FBTyxZQUFZLElBQUlBLEtBQUksT0FBTyxZQUFZLE9BQU8sWUFBWSxJQUFJLFNBQVMsSUFBSTtBQUM5RixNQUFJLE9BQU8sSUFBSSxJQUFJLE9BQU8sYUFBYSxJQUFJQSxFQUFDO0FBQzVDLE1BQUksSUFBSSxJQUFJLElBQUksT0FBTyxhQUFhLElBQUlBLEtBQUksT0FBTyxhQUFhLE9BQU8sYUFBYSxTQUFTLEdBQUcsSUFBSTtBQUNwRyxNQUFJLE9BQU8sSUFBSSxHQUFHLElBQUksT0FBTyxRQUFRO0FBQ3JDLE1BQUksSUFBSSxJQUFJLElBQUksT0FBTyxVQUFVLElBQUksT0FBTyxVQUFVLE9BQU8sVUFBVSxHQUFHLENBQUMsU0FBUyxJQUFJO0FBQ3hGLE1BQUksT0FBTyxJQUFJLE9BQU8sU0FBUyxDQUFDO0FBQ3BDO0FBRUEsTUFBTSxjQUFjO0FBQ3BCLE1BQU0sYUFBYTtBQVdmLFNBQVMsYUFBYSxPQUFPLE1BQU07QUFDbkMsUUFBTSxXQUFXLEtBQUssT0FBTyxNQUFNLFdBQVc7QUFDOUMsTUFBSSxDQUFDLFdBQVcsUUFBUSxPQUFPLFVBQVU7QUFDckMsV0FBTyxPQUFPO0FBQUEsRUFDakI7QUFDRCxVQUFRLENBQUMsUUFBUTtBQUNqQixVQUFPLFFBQVE7QUFBQSxTQUNOO0FBQ0QsYUFBTztBQUFBLFNBQ047QUFDRCxlQUFTO0FBQ1Q7QUFBQTtBQUVSLFNBQU8sT0FBTztBQUNsQjtBQUNBLE1BQU0sZUFBZSxDQUFDLE1BQUksQ0FBQyxLQUFLO0FBQ2hDLFNBQVMsa0JBQWtCLE9BQU8sT0FBTztBQUNyQyxRQUFNLE1BQU07QUFDWixRQUFNLFdBQVcsU0FBUyxLQUFLO0FBQy9CLFFBQU0sT0FBTyxXQUFXLE9BQU8sS0FBSyxLQUFLLElBQUk7QUFDN0MsUUFBTSxPQUFPLFNBQVMsS0FBSyxJQUFJLFdBQVcsQ0FBQyxTQUFPLGVBQWUsTUFBTSxPQUFPLE1BQU0sTUFBTSxNQUFNLElBQUksQ0FBQyxTQUFPLE1BQU0sUUFBUSxNQUFJO0FBQzlILGFBQVcsUUFBUSxNQUFLO0FBQ3BCLFFBQUksUUFBUSxhQUFhLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDdEM7QUFDRCxTQUFPO0FBQ1g7QUFRSSxTQUFTLE9BQU8sT0FBTztBQUN2QixTQUFPLGtCQUFrQixPQUFPO0FBQUEsSUFDNUIsS0FBSztBQUFBLElBQ0wsT0FBTztBQUFBLElBQ1AsUUFBUTtBQUFBLElBQ1IsTUFBTTtBQUFBLEVBQ2QsQ0FBSztBQUNMO0FBT0ksU0FBUyxjQUFjLE9BQU87QUFDOUIsU0FBTyxrQkFBa0IsT0FBTztBQUFBLElBQzVCO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDUixDQUFLO0FBQ0w7QUFRSSxTQUFTLFVBQVUsT0FBTztBQUMxQixRQUFNLE1BQU0sT0FBTyxLQUFLO0FBQ3hCLE1BQUksUUFBUSxJQUFJLE9BQU8sSUFBSTtBQUMzQixNQUFJLFNBQVMsSUFBSSxNQUFNLElBQUk7QUFDM0IsU0FBTztBQUNYO0FBT0ksU0FBUyxPQUFPLFNBQVMsVUFBVTtBQUNuQyxZQUFVLFdBQVc7QUFDckIsYUFBVyxZQUFZLFNBQVM7QUFDaEMsTUFBSSxPQUFPLGVBQWUsUUFBUSxNQUFNLFNBQVMsSUFBSTtBQUNyRCxNQUFJLE9BQU8sU0FBUyxVQUFVO0FBQzFCLFdBQU8sU0FBUyxNQUFNLEVBQUU7QUFBQSxFQUMzQjtBQUNELE1BQUksUUFBUSxlQUFlLFFBQVEsT0FBTyxTQUFTLEtBQUs7QUFDeEQsTUFBSSxTQUFTLEVBQUUsS0FBSyxPQUFPLE1BQU0sVUFBVSxHQUFHO0FBQzFDLFlBQVEsS0FBSyxvQ0FBb0MsUUFBUSxHQUFHO0FBQzVELFlBQVE7QUFBQSxFQUNYO0FBQ0QsUUFBTSxPQUFPO0FBQUEsSUFDVCxRQUFRLGVBQWUsUUFBUSxRQUFRLFNBQVMsTUFBTTtBQUFBLElBQ3RELFlBQVksYUFBYSxlQUFlLFFBQVEsWUFBWSxTQUFTLFVBQVUsR0FBRyxJQUFJO0FBQUEsSUFDdEY7QUFBQSxJQUNBO0FBQUEsSUFDQSxRQUFRLGVBQWUsUUFBUSxRQUFRLFNBQVMsTUFBTTtBQUFBLElBQ3RELFFBQVE7QUFBQSxFQUNoQjtBQUNJLE9BQUssU0FBUyxhQUFhLElBQUk7QUFDL0IsU0FBTztBQUNYO0FBV0ksU0FBUyxRQUFRLFFBQVEsU0FBUyxPQUFPLE1BQU07QUFDL0MsTUFBSSxZQUFZO0FBQ2hCLE1BQUksR0FBRyxNQUFNO0FBQ2IsT0FBSSxJQUFJLEdBQUcsT0FBTyxPQUFPLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUMzQyxZQUFRLE9BQU87QUFDZixRQUFJLFVBQVUsUUFBVztBQUNyQjtBQUFBLElBQ0g7QUFDRCxRQUFJLFlBQVksVUFBYSxPQUFPLFVBQVUsWUFBWTtBQUN0RCxjQUFRLE1BQU0sT0FBTztBQUNyQixrQkFBWTtBQUFBLElBQ2Y7QUFDRCxRQUFJLFVBQVUsVUFBYSxRQUFRLEtBQUssR0FBRztBQUN2QyxjQUFRLE1BQU0sUUFBUSxNQUFNO0FBQzVCLGtCQUFZO0FBQUEsSUFDZjtBQUNELFFBQUksVUFBVSxRQUFXO0FBQ3JCLFVBQUksUUFBUSxDQUFDLFdBQVc7QUFDcEIsYUFBSyxZQUFZO0FBQUEsTUFDcEI7QUFDRCxhQUFPO0FBQUEsSUFDVjtBQUFBLEVBQ0o7QUFDTDtBQU1JLFNBQVMsVUFBVSxRQUFRLE9BQU8sYUFBYTtBQUMvQyxRQUFNLEVBQUUsS0FBTSxJQUFNLElBQUc7QUFDdkIsUUFBTSxTQUFTLFlBQVksUUFBUSxNQUFNLE9BQU8sQ0FBQztBQUNqRCxRQUFNLFdBQVcsQ0FBQyxPQUFPLFFBQU0sZUFBZSxVQUFVLElBQUksSUFBSSxRQUFRO0FBQ3hFLFNBQU87QUFBQSxJQUNILEtBQUssU0FBUyxLQUFLLENBQUMsS0FBSyxJQUFJLE1BQU0sQ0FBQztBQUFBLElBQ3BDLEtBQUssU0FBUyxLQUFLLE1BQU07QUFBQSxFQUNqQztBQUNBO0FBQ0EsU0FBUyxjQUFjLGVBQWUsU0FBUztBQUMzQyxTQUFPLE9BQU8sT0FBTyxPQUFPLE9BQU8sYUFBYSxHQUFHLE9BQU87QUFDOUQ7QUFFQSxTQUFTLGdCQUFnQixRQUFRLFdBQVc7QUFBQSxFQUN4QztBQUNKLEdBQUcsYUFBYSxRQUFRLFVBQVUsWUFBWSxNQUFJLE9BQU8sSUFBSTtBQUN6RCxNQUFJLENBQUMsUUFBUSxRQUFRLEdBQUc7QUFDcEIsZUFBVyxTQUFTLGFBQWEsTUFBTTtBQUFBLEVBQzFDO0FBQ0QsUUFBTSxRQUFRO0FBQUEsSUFDVixDQUFDLE9BQU8sY0FBYztBQUFBLElBQ3RCLFlBQVk7QUFBQSxJQUNaLFNBQVM7QUFBQSxJQUNULGFBQWE7QUFBQSxJQUNiLFdBQVc7QUFBQSxJQUNYLFlBQVk7QUFBQSxJQUNaLFVBQVUsQ0FBQyxVQUFRLGdCQUFnQjtBQUFBLE1BQzNCO0FBQUEsTUFDQSxHQUFHO0FBQUEsSUFDbkIsR0FBZSxVQUFVLFlBQVksUUFBUTtBQUFBLEVBQzdDO0FBQ0ksU0FBTyxJQUFJLE1BQU0sT0FBTztBQUFBLElBQzNCLGVBQWdCLFFBQVEsTUFBTTtBQUNuQixhQUFPLE9BQU87QUFDZCxhQUFPLE9BQU87QUFDZCxhQUFPLE9BQU8sR0FBRztBQUNqQixhQUFPO0FBQUEsSUFDVjtBQUFBLElBQ1IsSUFBSyxRQUFRLE1BQU07QUFDUixhQUFPLFFBQVEsUUFBUSxNQUFNLE1BQUkscUJBQXFCLE1BQU0sVUFBVSxRQUFRLE1BQU0sQ0FBQztBQUFBLElBQ3hGO0FBQUEsSUFDUix5QkFBMEIsUUFBUSxNQUFNO0FBQzdCLGFBQU8sUUFBUSx5QkFBeUIsT0FBTyxRQUFRLElBQUksSUFBSTtBQUFBLElBQ2xFO0FBQUEsSUFDUixpQkFBa0I7QUFDUCxhQUFPLFFBQVEsZUFBZSxPQUFPLEVBQUU7QUFBQSxJQUMxQztBQUFBLElBQ1IsSUFBSyxRQUFRLE1BQU07QUFDUixhQUFPLHFCQUFxQixNQUFNLEVBQUUsU0FBUyxJQUFJO0FBQUEsSUFDcEQ7QUFBQSxJQUNSLFFBQVMsUUFBUTtBQUNOLGFBQU8scUJBQXFCLE1BQU07QUFBQSxJQUNyQztBQUFBLElBQ1IsSUFBSyxRQUFRLE1BQU0sT0FBTztBQUNmLFlBQU0sVUFBVSxPQUFPLGFBQWEsT0FBTyxXQUFXLFVBQVM7QUFDL0QsYUFBTyxRQUFRLFFBQVEsUUFBUTtBQUMvQixhQUFPLE9BQU87QUFDZCxhQUFPO0FBQUEsSUFDVjtBQUFBLEVBQ1QsQ0FBSztBQUNMO0FBQ0MsU0FBUyxlQUFlLE9BQU8sU0FBUyxVQUFVLG9CQUFvQjtBQUNuRSxRQUFNLFFBQVE7QUFBQSxJQUNWLFlBQVk7QUFBQSxJQUNaLFFBQVE7QUFBQSxJQUNSLFVBQVU7QUFBQSxJQUNWLFdBQVc7QUFBQSxJQUNYLFFBQVEsb0JBQUksSUFBSztBQUFBLElBQ2pCLGNBQWMsYUFBYSxPQUFPLGtCQUFrQjtBQUFBLElBQ3BELFlBQVksQ0FBQyxRQUFNLGVBQWUsT0FBTyxLQUFLLFVBQVUsa0JBQWtCO0FBQUEsSUFDMUUsVUFBVSxDQUFDLFVBQVEsZUFBZSxNQUFNLFNBQVMsS0FBSyxHQUFHLFNBQVMsVUFBVSxrQkFBa0I7QUFBQSxFQUN0RztBQUNJLFNBQU8sSUFBSSxNQUFNLE9BQU87QUFBQSxJQUMzQixlQUFnQixRQUFRLE1BQU07QUFDbkIsYUFBTyxPQUFPO0FBQ2QsYUFBTyxNQUFNO0FBQ2IsYUFBTztBQUFBLElBQ1Y7QUFBQSxJQUNSLElBQUssUUFBUSxNQUFNLFVBQVU7QUFDbEIsYUFBTyxRQUFRLFFBQVEsTUFBTSxNQUFJLG9CQUFvQixRQUFRLE1BQU0sUUFBUSxDQUFDO0FBQUEsSUFDL0U7QUFBQSxJQUNSLHlCQUEwQixRQUFRLE1BQU07QUFDN0IsYUFBTyxPQUFPLGFBQWEsVUFBVSxRQUFRLElBQUksT0FBTyxJQUFJLElBQUk7QUFBQSxRQUM1RCxZQUFZO0FBQUEsUUFDWixjQUFjO0FBQUEsTUFDakIsSUFBRyxTQUFZLFFBQVEseUJBQXlCLE9BQU8sSUFBSTtBQUFBLElBQy9EO0FBQUEsSUFDUixpQkFBa0I7QUFDUCxhQUFPLFFBQVEsZUFBZSxLQUFLO0FBQUEsSUFDdEM7QUFBQSxJQUNSLElBQUssUUFBUSxNQUFNO0FBQ1IsYUFBTyxRQUFRLElBQUksT0FBTyxJQUFJO0FBQUEsSUFDakM7QUFBQSxJQUNSLFVBQVc7QUFDQSxhQUFPLFFBQVEsUUFBUSxLQUFLO0FBQUEsSUFDL0I7QUFBQSxJQUNSLElBQUssUUFBUSxNQUFNLE9BQU87QUFDZixZQUFNLFFBQVE7QUFDZCxhQUFPLE9BQU87QUFDZCxhQUFPO0FBQUEsSUFDVjtBQUFBLEVBQ1QsQ0FBSztBQUNMO0FBQ0MsU0FBUyxhQUFhLE9BQU9NLFlBQVc7QUFBQSxFQUNyQyxZQUFZO0FBQUEsRUFDWixXQUFXO0FBQ2YsR0FBRztBQUNDLFFBQU0sRUFBRSxjQUFhQSxVQUFTLFlBQWEsYUFBWUEsVUFBUyxXQUFZLFdBQVVBLFVBQVMsUUFBTyxJQUFNO0FBQzVHLFNBQU87QUFBQSxJQUNILFNBQVM7QUFBQSxJQUNULFlBQVk7QUFBQSxJQUNaLFdBQVc7QUFBQSxJQUNYLGNBQWMsV0FBVyxXQUFXLElBQUksY0FBYyxNQUFJO0FBQUEsSUFDMUQsYUFBYSxXQUFXLFVBQVUsSUFBSSxhQUFhLE1BQUk7QUFBQSxFQUMvRDtBQUNBO0FBQ0EsTUFBTSxVQUFVLENBQUMsUUFBUUMsVUFBTyxTQUFTLFNBQVMsWUFBWUEsS0FBSSxJQUFJQTtBQUN0RSxNQUFNLG1CQUFtQixDQUFDLE1BQU0sVUFBUSxTQUFTLEtBQUssS0FBSyxTQUFTLGVBQWUsT0FBTyxlQUFlLEtBQUssTUFBTSxRQUFRLE1BQU0sZ0JBQWdCO0FBQ2xKLFNBQVMsUUFBUSxRQUFRLE1BQU1FLFVBQVM7QUFDcEMsTUFBSSxPQUFPLFVBQVUsZUFBZSxLQUFLLFFBQVEsSUFBSSxHQUFHO0FBQ3BELFdBQU8sT0FBTztBQUFBLEVBQ2pCO0FBQ0QsUUFBTSxRQUFRQTtBQUNkLFNBQU8sUUFBUTtBQUNmLFNBQU87QUFDWDtBQUNBLFNBQVMsb0JBQW9CLFFBQVEsTUFBTSxVQUFVO0FBQ2pELFFBQU0sRUFBRSxRQUFTLFVBQVcsV0FBWSxjQUFjQyxhQUFjLElBQUc7QUFDdkUsTUFBSSxRQUFRLE9BQU87QUFDbkIsTUFBSSxXQUFXLEtBQUssS0FBS0EsYUFBWSxhQUFhLElBQUksR0FBRztBQUNyRCxZQUFRLG1CQUFtQixNQUFNLE9BQU8sUUFBUSxRQUFRO0FBQUEsRUFDM0Q7QUFDRCxNQUFJLFFBQVEsS0FBSyxLQUFLLE1BQU0sUUFBUTtBQUNoQyxZQUFRLGNBQWMsTUFBTSxPQUFPLFFBQVFBLGFBQVksV0FBVztBQUFBLEVBQ3JFO0FBQ0QsTUFBSSxpQkFBaUIsTUFBTSxLQUFLLEdBQUc7QUFDL0IsWUFBUSxlQUFlLE9BQU8sVUFBVSxhQUFhLFVBQVUsT0FBT0EsWUFBVztBQUFBLEVBQ3BGO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxtQkFBbUIsTUFBTSxPQUFPLFFBQVEsVUFBVTtBQUN2RCxRQUFNLEVBQUUsUUFBUyxVQUFXLFdBQVksT0FBTSxJQUFNO0FBQ3BELE1BQUksT0FBTyxJQUFJLElBQUksR0FBRztBQUNsQixVQUFNLElBQUksTUFBTSx5QkFBeUIsTUFBTSxLQUFLLE1BQU0sRUFBRSxLQUFLLElBQUksSUFBSSxPQUFPLElBQUk7QUFBQSxFQUN2RjtBQUNELFNBQU8sSUFBSSxJQUFJO0FBQ2YsVUFBUSxNQUFNLFVBQVUsYUFBYSxRQUFRO0FBQzdDLFNBQU8sT0FBTyxJQUFJO0FBQ2xCLE1BQUksaUJBQWlCLE1BQU0sS0FBSyxHQUFHO0FBQy9CLFlBQVEsa0JBQWtCLE9BQU8sU0FBUyxRQUFRLE1BQU0sS0FBSztBQUFBLEVBQ2hFO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxjQUFjLE1BQU0sT0FBTyxRQUFRLGFBQWE7QUFDckQsUUFBTSxFQUFFLFFBQVMsVUFBVyxXQUFZLGNBQWNBLGFBQWMsSUFBRztBQUN2RSxNQUFJLFFBQVEsU0FBUyxLQUFLLEtBQUssWUFBWSxJQUFJLEdBQUc7QUFDOUMsWUFBUSxNQUFNLFNBQVMsUUFBUSxNQUFNO0FBQUEsRUFDeEMsV0FBVSxTQUFTLE1BQU0sRUFBRSxHQUFHO0FBQzNCLFVBQU0sTUFBTTtBQUNaLFVBQU0sU0FBUyxPQUFPLFFBQVEsT0FBTyxDQUFDLE1BQUksTUFBTSxHQUFHO0FBQ25ELFlBQVE7QUFDUixlQUFXLFFBQVEsS0FBSTtBQUNuQixZQUFNLFdBQVcsa0JBQWtCLFFBQVEsUUFBUSxNQUFNLElBQUk7QUFDN0QsWUFBTSxLQUFLLGVBQWUsVUFBVSxVQUFVLGFBQWEsVUFBVSxPQUFPQSxZQUFXLENBQUM7QUFBQSxJQUMzRjtBQUFBLEVBQ0o7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLGdCQUFnQixVQUFVLE1BQU0sT0FBTztBQUM1QyxTQUFPLFdBQVcsUUFBUSxJQUFJLFNBQVMsTUFBTSxLQUFLLElBQUk7QUFDMUQ7QUFDQSxNQUFNLFdBQVcsQ0FBQyxLQUFLLFdBQVMsUUFBUSxPQUFPLFNBQVMsT0FBTyxRQUFRLFdBQVcsaUJBQWlCLFFBQVEsR0FBRyxJQUFJO0FBQ2xILFNBQVMsVUFBVU4sTUFBSyxjQUFjLEtBQUssZ0JBQWdCLE9BQU87QUFDOUQsYUFBVyxVQUFVLGNBQWE7QUFDOUIsVUFBTSxRQUFRLFNBQVMsS0FBSyxNQUFNO0FBQ2xDLFFBQUksT0FBTztBQUNQLFdBQUksSUFBSSxLQUFLO0FBQ2IsWUFBTSxXQUFXLGdCQUFnQixNQUFNLFdBQVcsS0FBSyxLQUFLO0FBQzVELFVBQUksUUFBUSxRQUFRLEtBQUssYUFBYSxPQUFPLGFBQWEsZ0JBQWdCO0FBQ3RFLGVBQU87QUFBQSxNQUNWO0FBQUEsSUFDYixXQUFtQixVQUFVLFNBQVMsUUFBUSxjQUFjLEtBQUssUUFBUSxnQkFBZ0I7QUFDN0UsYUFBTztBQUFBLElBQ1Y7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxrQkFBa0IsY0FBYyxVQUFVLE1BQU0sT0FBTztBQUM1RCxRQUFNLGFBQWEsU0FBUztBQUM1QixRQUFNLFdBQVcsZ0JBQWdCLFNBQVMsV0FBVyxNQUFNLEtBQUs7QUFDaEUsUUFBTSxZQUFZO0FBQUEsSUFDZCxHQUFHO0FBQUEsSUFDSCxHQUFHO0FBQUEsRUFDWDtBQUNJLFFBQU1BLE9BQU0sb0JBQUk7QUFDaEIsT0FBSSxJQUFJLEtBQUs7QUFDYixNQUFJLE1BQU0saUJBQWlCQSxNQUFLLFdBQVcsTUFBTSxZQUFZLE1BQU0sS0FBSztBQUN4RSxNQUFJLFFBQVEsTUFBTTtBQUNkLFdBQU87QUFBQSxFQUNWO0FBQ0QsTUFBSSxRQUFRLFFBQVEsS0FBSyxhQUFhLE1BQU07QUFDeEMsVUFBTSxpQkFBaUJBLE1BQUssV0FBVyxVQUFVLEtBQUssS0FBSztBQUMzRCxRQUFJLFFBQVEsTUFBTTtBQUNkLGFBQU87QUFBQSxJQUNWO0FBQUEsRUFDSjtBQUNELFNBQU8sZ0JBQWdCLE1BQU0sS0FBS0EsSUFBRyxHQUFHO0FBQUEsSUFDcEM7QUFBQSxFQUNSLEdBQU8sWUFBWSxVQUFVLE1BQUksYUFBYSxVQUFVLE1BQU0sS0FBSyxDQUFDO0FBQ3BFO0FBQ0EsU0FBUyxpQkFBaUJBLE1BQUssV0FBVyxLQUFLLFVBQVUsTUFBTTtBQUMzRCxTQUFNLEtBQUk7QUFDTixVQUFNLFVBQVVBLE1BQUssV0FBVyxLQUFLLFVBQVUsSUFBSTtBQUFBLEVBQ3REO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxhQUFhLFVBQVUsTUFBTSxPQUFPO0FBQ3pDLFFBQU0sU0FBUyxTQUFTO0FBQ3hCLE1BQUksRUFBRSxRQUFRLFNBQVM7QUFDbkIsV0FBTyxRQUFRO0VBQ2xCO0FBQ0QsUUFBTSxTQUFTLE9BQU87QUFDdEIsTUFBSSxRQUFRLE1BQU0sS0FBSyxTQUFTLEtBQUssR0FBRztBQUNwQyxXQUFPO0FBQUEsRUFDVjtBQUNELFNBQU8sVUFBVTtBQUNyQjtBQUNBLFNBQVMscUJBQXFCLE1BQU0sVUFBVSxRQUFRLE9BQU87QUFDekQsTUFBSTtBQUNKLGFBQVcsVUFBVSxVQUFTO0FBQzFCLFlBQVEsU0FBUyxRQUFRLFFBQVEsSUFBSSxHQUFHLE1BQU07QUFDOUMsUUFBSSxRQUFRLEtBQUssR0FBRztBQUNoQixhQUFPLGlCQUFpQixNQUFNLEtBQUssSUFBSSxrQkFBa0IsUUFBUSxPQUFPLE1BQU0sS0FBSyxJQUFJO0FBQUEsSUFDMUY7QUFBQSxFQUNKO0FBQ0w7QUFDQSxTQUFTLFNBQVMsS0FBSyxRQUFRO0FBQzNCLGFBQVcsU0FBUyxRQUFPO0FBQ3ZCLFFBQUksQ0FBQyxPQUFPO0FBQ1I7QUFBQSxJQUNIO0FBQ0QsVUFBTSxRQUFRLE1BQU07QUFDcEIsUUFBSSxRQUFRLEtBQUssR0FBRztBQUNoQixhQUFPO0FBQUEsSUFDVjtBQUFBLEVBQ0o7QUFDTDtBQUNBLFNBQVMscUJBQXFCLFFBQVE7QUFDbEMsTUFBSSxPQUFPLE9BQU87QUFDbEIsTUFBSSxDQUFDLE1BQU07QUFDUCxXQUFPLE9BQU8sUUFBUSx5QkFBeUIsT0FBTyxPQUFPO0FBQUEsRUFDaEU7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLHlCQUF5QixRQUFRO0FBQ3RDLFFBQU1BLE9BQU0sb0JBQUk7QUFDaEIsYUFBVyxTQUFTLFFBQU87QUFDdkIsZUFBVyxPQUFPLE9BQU8sS0FBSyxLQUFLLEVBQUUsT0FBTyxDQUFDLE1BQUksQ0FBQyxFQUFFLFdBQVcsR0FBRyxDQUFDLEdBQUU7QUFDakUsV0FBSSxJQUFJLEdBQUc7QUFBQSxJQUNkO0FBQUEsRUFDSjtBQUNELFNBQU8sTUFBTSxLQUFLQSxJQUFHO0FBQ3pCO0FBNExJLFNBQVMsa0JBQWtCO0FBQzNCLFNBQU8sT0FBTyxXQUFXLGVBQWUsT0FBTyxhQUFhO0FBQ2hFO0FBR0ksU0FBUyxlQUFlLFNBQVM7QUFDakMsTUFBSSxTQUFTLFFBQVE7QUFDckIsTUFBSSxVQUFVLE9BQU8sU0FBUSxNQUFPLHVCQUF1QjtBQUN2RCxhQUFTLE9BQU87QUFBQSxFQUNuQjtBQUNELFNBQU87QUFDWDtBQUlJLFNBQVMsY0FBYyxZQUFZLE1BQU0sZ0JBQWdCO0FBQ3pELE1BQUk7QUFDSixNQUFJLE9BQU8sZUFBZSxVQUFVO0FBQ2hDLG9CQUFnQixTQUFTLFlBQVksRUFBRTtBQUN2QyxRQUFJLFdBQVcsUUFBUSxHQUFHLE1BQU0sSUFBSTtBQUVoQyxzQkFBZ0IsZ0JBQWdCLE1BQU0sS0FBSyxXQUFXO0FBQUEsSUFDekQ7QUFBQSxFQUNULE9BQVc7QUFDSCxvQkFBZ0I7QUFBQSxFQUNuQjtBQUNELFNBQU87QUFDWDtBQUNBLE1BQU0sbUJBQW1CLENBQUMsWUFBVSxRQUFRLGNBQWMsWUFBWSxpQkFBaUIsU0FBUyxJQUFJO0FBQ3BHLFNBQVMsU0FBUyxJQUFJLFVBQVU7QUFDNUIsU0FBTyxpQkFBaUIsRUFBRSxFQUFFLGlCQUFpQixRQUFRO0FBQ3pEO0FBQ0EsTUFBTSxZQUFZO0FBQUEsRUFDZDtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNKO0FBQ0EsU0FBUyxtQkFBbUIsUUFBUSxPQUFPLFFBQVE7QUFDL0MsUUFBTSxTQUFTO0FBQ2YsV0FBUyxTQUFTLE1BQU0sU0FBUztBQUNqQyxXQUFRLElBQUksR0FBRyxJQUFJLEdBQUcsS0FBSTtBQUN0QixVQUFNLE1BQU0sVUFBVTtBQUN0QixXQUFPLE9BQU8sV0FBVyxPQUFPLFFBQVEsTUFBTSxNQUFNLE9BQU8sS0FBSztBQUFBLEVBQ25FO0FBQ0QsU0FBTyxRQUFRLE9BQU8sT0FBTyxPQUFPO0FBQ3BDLFNBQU8sU0FBUyxPQUFPLE1BQU0sT0FBTztBQUNwQyxTQUFPO0FBQ1g7QUFDQSxNQUFNLGVBQWUsQ0FBQyxHQUFHLEdBQUcsWUFBVSxJQUFJLEtBQUssSUFBSSxPQUFPLENBQUMsVUFBVSxDQUFDLE9BQU87QUFLekUsU0FBUyxrQkFBa0IsR0FBRyxRQUFRO0FBQ3RDLFFBQU0sVUFBVSxFQUFFO0FBQ2xCLFFBQU0sU0FBUyxXQUFXLFFBQVEsU0FBUyxRQUFRLEtBQUs7QUFDeEQsUUFBTSxFQUFFLFNBQVUsUUFBVSxJQUFHO0FBQy9CLE1BQUksTUFBTTtBQUNWLE1BQUksR0FBRztBQUNQLE1BQUksYUFBYSxTQUFTLFNBQVMsRUFBRSxNQUFNLEdBQUc7QUFDMUMsUUFBSTtBQUNKLFFBQUk7QUFBQSxFQUNaLE9BQVc7QUFDSCxVQUFNLE9BQU8sT0FBTztBQUNwQixRQUFJLE9BQU8sVUFBVSxLQUFLO0FBQzFCLFFBQUksT0FBTyxVQUFVLEtBQUs7QUFDMUIsVUFBTTtBQUFBLEVBQ1Q7QUFDRCxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDUjtBQUNBO0FBTUksU0FBUyxvQkFBb0IsT0FBTyxPQUFPO0FBQzNDLE1BQUksWUFBWSxPQUFPO0FBQ25CLFdBQU87QUFBQSxFQUNWO0FBQ0QsUUFBTSxFQUFFLFFBQVMsd0JBQTBCLElBQUc7QUFDOUMsUUFBTSxRQUFRLGlCQUFpQixNQUFNO0FBQ3JDLFFBQU0sWUFBWSxNQUFNLGNBQWM7QUFDdEMsUUFBTSxXQUFXLG1CQUFtQixPQUFPLFNBQVM7QUFDcEQsUUFBTSxVQUFVLG1CQUFtQixPQUFPLFVBQVUsT0FBTztBQUMzRCxRQUFNLEVBQUUsR0FBSSxHQUFJLElBQU0sSUFBRyxrQkFBa0IsT0FBTyxNQUFNO0FBQ3hELFFBQU0sVUFBVSxTQUFTLFFBQVEsT0FBTyxRQUFRO0FBQ2hELFFBQU0sVUFBVSxTQUFTLE9BQU8sT0FBTyxRQUFRO0FBQy9DLE1BQUksRUFBRSxPQUFRLE9BQVMsSUFBRztBQUMxQixNQUFJLFdBQVc7QUFDWCxhQUFTLFNBQVMsUUFBUSxRQUFRO0FBQ2xDLGNBQVUsU0FBUyxTQUFTLFFBQVE7QUFBQSxFQUN2QztBQUNELFNBQU87QUFBQSxJQUNILEdBQUcsS0FBSyxPQUFPLElBQUksV0FBVyxRQUFRLE9BQU8sUUFBUSx1QkFBdUI7QUFBQSxJQUM1RSxHQUFHLEtBQUssT0FBTyxJQUFJLFdBQVcsU0FBUyxPQUFPLFNBQVMsdUJBQXVCO0FBQUEsRUFDdEY7QUFDQTtBQUNBLFNBQVMsaUJBQWlCLFFBQVEsT0FBTyxRQUFRO0FBQzdDLE1BQUksVUFBVTtBQUNkLE1BQUksVUFBVSxVQUFhLFdBQVcsUUFBVztBQUM3QyxVQUFNLFlBQVksZUFBZSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxXQUFXO0FBQ1osY0FBUSxPQUFPO0FBQ2YsZUFBUyxPQUFPO0FBQUEsSUFDNUIsT0FBZTtBQUNILFlBQU0sT0FBTyxVQUFVO0FBQ3ZCLFlBQU0saUJBQWlCLGlCQUFpQixTQUFTO0FBQ2pELFlBQU0sa0JBQWtCLG1CQUFtQixnQkFBZ0IsVUFBVSxPQUFPO0FBQzVFLFlBQU0sbUJBQW1CLG1CQUFtQixnQkFBZ0IsU0FBUztBQUNyRSxjQUFRLEtBQUssUUFBUSxpQkFBaUIsUUFBUSxnQkFBZ0I7QUFDOUQsZUFBUyxLQUFLLFNBQVMsaUJBQWlCLFNBQVMsZ0JBQWdCO0FBQ2pFLGlCQUFXLGNBQWMsZUFBZSxVQUFVLFdBQVcsYUFBYTtBQUMxRSxrQkFBWSxjQUFjLGVBQWUsV0FBVyxXQUFXLGNBQWM7QUFBQSxJQUNoRjtBQUFBLEVBQ0o7QUFDRCxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0E7QUFBQSxJQUNBLFVBQVUsWUFBWTtBQUFBLElBQ3RCLFdBQVcsYUFBYTtBQUFBLEVBQ2hDO0FBQ0E7QUFDQSxNQUFNLFNBQVMsQ0FBQyxNQUFJLEtBQUssTUFBTSxJQUFJLEVBQUUsSUFBSTtBQUV6QyxTQUFTLGVBQWUsUUFBUSxTQUFTLFVBQVUsYUFBYTtBQUM1RCxRQUFNLFFBQVEsaUJBQWlCLE1BQU07QUFDckMsUUFBTSxVQUFVLG1CQUFtQixPQUFPLFFBQVE7QUFDbEQsUUFBTSxXQUFXLGNBQWMsTUFBTSxVQUFVLFFBQVEsYUFBYSxLQUFLO0FBQ3pFLFFBQU0sWUFBWSxjQUFjLE1BQU0sV0FBVyxRQUFRLGNBQWMsS0FBSztBQUM1RSxRQUFNLGdCQUFnQixpQkFBaUIsUUFBUSxTQUFTLFFBQVE7QUFDaEUsTUFBSSxFQUFFLE9BQVEsT0FBUyxJQUFHO0FBQzFCLE1BQUksTUFBTSxjQUFjLGVBQWU7QUFDbkMsVUFBTSxVQUFVLG1CQUFtQixPQUFPLFVBQVUsT0FBTztBQUMzRCxVQUFNLFdBQVcsbUJBQW1CLE9BQU8sU0FBUztBQUNwRCxhQUFTLFNBQVMsUUFBUSxRQUFRO0FBQ2xDLGNBQVUsU0FBUyxTQUFTLFFBQVE7QUFBQSxFQUN2QztBQUNELFVBQVEsS0FBSyxJQUFJLEdBQUcsUUFBUSxRQUFRLEtBQUs7QUFDekMsV0FBUyxLQUFLLElBQUksR0FBRyxjQUFjLFFBQVEsY0FBYyxTQUFTLFFBQVEsTUFBTTtBQUNoRixVQUFRLE9BQU8sS0FBSyxJQUFJLE9BQU8sVUFBVSxjQUFjLFFBQVEsQ0FBQztBQUNoRSxXQUFTLE9BQU8sS0FBSyxJQUFJLFFBQVEsV0FBVyxjQUFjLFNBQVMsQ0FBQztBQUNwRSxNQUFJLFNBQVMsQ0FBQyxRQUFRO0FBR2xCLGFBQVMsT0FBTyxRQUFRLENBQUM7QUFBQSxFQUM1QjtBQUNELFFBQU0saUJBQWlCLFlBQVksVUFBYSxhQUFhO0FBQzdELE1BQUksa0JBQWtCLGVBQWUsY0FBYyxVQUFVLFNBQVMsY0FBYyxRQUFRO0FBQ3hGLGFBQVMsY0FBYztBQUN2QixZQUFRLE9BQU8sS0FBSyxNQUFNLFNBQVMsV0FBVyxDQUFDO0FBQUEsRUFDbEQ7QUFDRCxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0E7QUFBQSxFQUNSO0FBQ0E7QUFNSSxTQUFTLFlBQVksT0FBTyxZQUFZLFlBQVk7QUFDcEQsUUFBTSxhQUFhLGNBQWM7QUFDakMsUUFBTSxlQUFlLEtBQUssTUFBTSxNQUFNLFNBQVMsVUFBVTtBQUN6RCxRQUFNLGNBQWMsS0FBSyxNQUFNLE1BQU0sUUFBUSxVQUFVO0FBQ3ZELFFBQU0sU0FBUyxLQUFLLE1BQU0sTUFBTSxNQUFNO0FBQ3RDLFFBQU0sUUFBUSxLQUFLLE1BQU0sTUFBTSxLQUFLO0FBQ3BDLFFBQU0sU0FBUyxNQUFNO0FBSXJCLE1BQUksT0FBTyxVQUFVLGNBQWMsQ0FBQyxPQUFPLE1BQU0sVUFBVSxDQUFDLE9BQU8sTUFBTSxRQUFRO0FBQzdFLFdBQU8sTUFBTSxTQUFTLEdBQUcsTUFBTTtBQUMvQixXQUFPLE1BQU0sUUFBUSxHQUFHLE1BQU07QUFBQSxFQUNqQztBQUNELE1BQUksTUFBTSw0QkFBNEIsY0FBYyxPQUFPLFdBQVcsZ0JBQWdCLE9BQU8sVUFBVSxhQUFhO0FBQ2hILFVBQU0sMEJBQTBCO0FBQ2hDLFdBQU8sU0FBUztBQUNoQixXQUFPLFFBQVE7QUFDZixVQUFNLElBQUksYUFBYSxZQUFZLEdBQUcsR0FBRyxZQUFZLEdBQUcsQ0FBQztBQUN6RCxXQUFPO0FBQUEsRUFDVjtBQUNELFNBQU87QUFDWDtBQUtJLE1BQU0sK0JBQStCLFdBQVc7QUFDaEQsTUFBSSxtQkFBbUI7QUFDdkIsTUFBSTtBQUNBLFVBQU0sVUFBVTtBQUFBLE1BQ1osSUFBSSxVQUFXO0FBQ1gsMkJBQW1CO0FBQ25CLGVBQU87QUFBQSxNQUNWO0FBQUEsSUFDYjtBQUNRLFdBQU8saUJBQWlCLFFBQVEsTUFBTSxPQUFPO0FBQzdDLFdBQU8sb0JBQW9CLFFBQVEsTUFBTSxPQUFPO0FBQUEsRUFDbkQsU0FBUSxHQUFQO0FBQUEsRUFFRDtBQUNELFNBQU87QUFDWDtBQVNJLFNBQVMsYUFBYSxTQUFTLFVBQVU7QUFDekMsUUFBTSxRQUFRLFNBQVMsU0FBUyxRQUFRO0FBQ3hDLFFBQU0sVUFBVSxTQUFTLE1BQU0sTUFBTSxtQkFBbUI7QUFDeEQsU0FBTyxVQUFVLENBQUMsUUFBUSxLQUFLO0FBQ25DO0FBcUNBLE1BQU0sd0JBQXdCLFNBQVMsT0FBTyxPQUFPO0FBQ2pELFNBQU87QUFBQSxJQUNILEVBQUcsR0FBRztBQUNGLGFBQU8sUUFBUSxRQUFRLFFBQVE7QUFBQSxJQUNsQztBQUFBLElBQ0QsU0FBVSxHQUFHO0FBQ1QsY0FBUTtBQUFBLElBQ1g7QUFBQSxJQUNELFVBQVcsT0FBTztBQUNkLFVBQUksVUFBVSxVQUFVO0FBQ3BCLGVBQU87QUFBQSxNQUNWO0FBQ0QsYUFBTyxVQUFVLFVBQVUsU0FBUztBQUFBLElBQ3ZDO0FBQUEsSUFDRCxNQUFPLEdBQUcsT0FBTztBQUNiLGFBQU8sSUFBSTtBQUFBLElBQ2Q7QUFBQSxJQUNELFdBQVksR0FBRyxXQUFXO0FBQ3RCLGFBQU8sSUFBSTtBQUFBLElBQ2Q7QUFBQSxFQUNUO0FBQ0E7QUFDQSxNQUFNLHdCQUF3QixXQUFXO0FBQ3JDLFNBQU87QUFBQSxJQUNILEVBQUcsR0FBRztBQUNGLGFBQU87QUFBQSxJQUNWO0FBQUEsSUFDRCxTQUFVLEdBQUc7QUFBQSxJQUFFO0FBQUEsSUFDZixVQUFXLE9BQU87QUFDZCxhQUFPO0FBQUEsSUFDVjtBQUFBLElBQ0QsTUFBTyxHQUFHLE9BQU87QUFDYixhQUFPLElBQUk7QUFBQSxJQUNkO0FBQUEsSUFDRCxXQUFZLEdBQUcsWUFBWTtBQUN2QixhQUFPO0FBQUEsSUFDVjtBQUFBLEVBQ1Q7QUFDQTtBQUNBLFNBQVMsY0FBYyxLQUFLLE9BQU8sT0FBTztBQUN0QyxTQUFPLE1BQU0sc0JBQXNCLE9BQU8sS0FBSyxJQUFJLHNCQUFxQjtBQUM1RTtBQUNBLFNBQVMsc0JBQXNCLEtBQUssV0FBVztBQUMzQyxNQUFJLE9BQU87QUFDWCxNQUFJLGNBQWMsU0FBUyxjQUFjLE9BQU87QUFDNUMsWUFBUSxJQUFJLE9BQU87QUFDbkIsZUFBVztBQUFBLE1BQ1AsTUFBTSxpQkFBaUIsV0FBVztBQUFBLE1BQ2xDLE1BQU0sb0JBQW9CLFdBQVc7QUFBQSxJQUNqRDtBQUNRLFVBQU0sWUFBWSxhQUFhLFdBQVcsV0FBVztBQUNyRCxRQUFJLG9CQUFvQjtBQUFBLEVBQzNCO0FBQ0w7QUFDQSxTQUFTLHFCQUFxQixLQUFLLFVBQVU7QUFDekMsTUFBSSxhQUFhLFFBQVc7QUFDeEIsV0FBTyxJQUFJO0FBQ1gsUUFBSSxPQUFPLE1BQU0sWUFBWSxhQUFhLFNBQVMsSUFBSSxTQUFTLEVBQUU7QUFBQSxFQUNyRTtBQUNMO0FDenhFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFVQSxNQUFNLFNBQVM7QUFBQSxFQUNYLGNBQWE7QUFDVCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxVQUFVLG9CQUFJO0FBQ25CLFNBQUssV0FBVztBQUNoQixTQUFLLFlBQVk7QUFBQSxFQUNwQjtBQUFBLEVBQ0osUUFBUSxPQUFPLE9BQU8sTUFBTSxNQUFNO0FBQzNCLFVBQU0sWUFBWSxNQUFNLFVBQVU7QUFDbEMsVUFBTSxXQUFXLE1BQU07QUFDdkIsY0FBVSxRQUFRLENBQUMsT0FBSyxHQUFHO0FBQUEsTUFDbkI7QUFBQSxNQUNBLFNBQVMsTUFBTTtBQUFBLE1BQ2Y7QUFBQSxNQUNBLGFBQWEsS0FBSyxJQUFJLE9BQU8sTUFBTSxPQUFPLFFBQVE7QUFBQSxJQUNyRCxFQUFDO0FBQUEsRUFDVDtBQUFBLEVBQ0osV0FBVztBQUNKLFFBQUksS0FBSyxVQUFVO0FBQ2Y7QUFBQSxJQUNIO0FBQ0QsU0FBSyxXQUFXO0FBQ2hCLFNBQUssV0FBVyxpQkFBaUIsS0FBSyxRQUFRLE1BQUk7QUFDOUMsV0FBSyxRQUFPO0FBQ1osV0FBSyxXQUFXO0FBQ2hCLFVBQUksS0FBSyxVQUFVO0FBQ2YsYUFBSyxTQUFRO0FBQUEsTUFDaEI7QUFBQSxJQUNiLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDSixRQUFRLE9BQU8sS0FBSyxPQUFPO0FBQ3BCLFFBQUksWUFBWTtBQUNoQixTQUFLLFFBQVEsUUFBUSxDQUFDLE9BQU8sVUFBUTtBQUNqQyxVQUFJLENBQUMsTUFBTSxXQUFXLENBQUMsTUFBTSxNQUFNLFFBQVE7QUFDdkM7QUFBQSxNQUNIO0FBQ0QsWUFBTSxRQUFRLE1BQU07QUFDcEIsVUFBSSxJQUFJLE1BQU0sU0FBUztBQUN2QixVQUFJLE9BQU87QUFDWCxVQUFJO0FBQ0osYUFBTSxLQUFLLEdBQUcsRUFBRSxHQUFFO0FBQ2QsZUFBTyxNQUFNO0FBQ2IsWUFBSSxLQUFLLFNBQVM7QUFDZCxjQUFJLEtBQUssU0FBUyxNQUFNLFVBQVU7QUFDOUIsa0JBQU0sV0FBVyxLQUFLO0FBQUEsVUFDekI7QUFDRCxlQUFLLEtBQUssSUFBSTtBQUNkLGlCQUFPO0FBQUEsUUFDM0IsT0FBdUI7QUFDSCxnQkFBTSxLQUFLLE1BQU0sTUFBTSxTQUFTO0FBQ2hDLGdCQUFNLElBQUc7QUFBQSxRQUNaO0FBQUEsTUFDSjtBQUNELFVBQUksTUFBTTtBQUNOLGNBQU0sS0FBSTtBQUNWLGFBQUssUUFBUSxPQUFPLE9BQU8sTUFBTSxVQUFVO0FBQUEsTUFDOUM7QUFDRCxVQUFJLENBQUMsTUFBTSxRQUFRO0FBQ2YsY0FBTSxVQUFVO0FBQ2hCLGFBQUssUUFBUSxPQUFPLE9BQU8sTUFBTSxVQUFVO0FBQzNDLGNBQU0sVUFBVTtBQUFBLE1BQ25CO0FBQ0QsbUJBQWEsTUFBTTtBQUFBLElBQy9CLENBQVM7QUFDRCxTQUFLLFlBQVk7QUFDakIsUUFBSSxjQUFjLEdBQUc7QUFDakIsV0FBSyxXQUFXO0FBQUEsSUFDbkI7QUFBQSxFQUNKO0FBQUEsRUFDSixVQUFVLE9BQU87QUFDVixVQUFNLFNBQVMsS0FBSztBQUNwQixRQUFJLFFBQVEsT0FBTyxJQUFJLEtBQUs7QUFDNUIsUUFBSSxDQUFDLE9BQU87QUFDUixjQUFRO0FBQUEsUUFDSixTQUFTO0FBQUEsUUFDVCxTQUFTO0FBQUEsUUFDVCxPQUFPLENBQUU7QUFBQSxRQUNULFdBQVc7QUFBQSxVQUNQLFVBQVUsQ0FBRTtBQUFBLFVBQ1osVUFBVSxDQUFFO0FBQUEsUUFDZjtBQUFBLE1BQ2pCO0FBQ1ksYUFBTyxJQUFJLE9BQU8sS0FBSztBQUFBLElBQzFCO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLE9BQU8sT0FBTyxPQUFPLElBQUk7QUFDbEIsU0FBSyxVQUFVLEtBQUssRUFBRSxVQUFVLE9BQU8sS0FBSyxFQUFFO0FBQUEsRUFDakQ7QUFBQSxFQUNKLElBQUksT0FBTyxPQUFPO0FBQ1gsUUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLFFBQVE7QUFDekI7QUFBQSxJQUNIO0FBQ0QsU0FBSyxVQUFVLEtBQUssRUFBRSxNQUFNLEtBQUssR0FBRyxLQUFLO0FBQUEsRUFDNUM7QUFBQSxFQUNKLElBQUksT0FBTztBQUNKLFdBQU8sS0FBSyxVQUFVLEtBQUssRUFBRSxNQUFNLFNBQVM7QUFBQSxFQUMvQztBQUFBLEVBQ0osTUFBTSxPQUFPO0FBQ04sVUFBTSxRQUFRLEtBQUssUUFBUSxJQUFJLEtBQUs7QUFDcEMsUUFBSSxDQUFDLE9BQU87QUFDUjtBQUFBLElBQ0g7QUFDRCxVQUFNLFVBQVU7QUFDaEIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxXQUFXLE1BQU0sTUFBTSxPQUFPLENBQUMsS0FBSyxRQUFNLEtBQUssSUFBSSxLQUFLLElBQUksU0FBUyxHQUFHLENBQUM7QUFDL0UsU0FBSyxTQUFRO0FBQUEsRUFDaEI7QUFBQSxFQUNELFFBQVEsT0FBTztBQUNYLFFBQUksQ0FBQyxLQUFLLFVBQVU7QUFDaEIsYUFBTztBQUFBLElBQ1Y7QUFDRCxVQUFNLFFBQVEsS0FBSyxRQUFRLElBQUksS0FBSztBQUNwQyxRQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sV0FBVyxDQUFDLE1BQU0sTUFBTSxRQUFRO0FBQ2pELGFBQU87QUFBQSxJQUNWO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLEtBQUssT0FBTztBQUNMLFVBQU0sUUFBUSxLQUFLLFFBQVEsSUFBSSxLQUFLO0FBQ3BDLFFBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxNQUFNLFFBQVE7QUFDL0I7QUFBQSxJQUNIO0FBQ0QsVUFBTSxRQUFRLE1BQU07QUFDcEIsUUFBSSxJQUFJLE1BQU0sU0FBUztBQUN2QixXQUFNLEtBQUssR0FBRyxFQUFFLEdBQUU7QUFDZCxZQUFNLEdBQUc7SUFDWjtBQUNELFVBQU0sUUFBUTtBQUNkLFNBQUssUUFBUSxPQUFPLE9BQU8sS0FBSyxJQUFHLEdBQUksVUFBVTtBQUFBLEVBQ3BEO0FBQUEsRUFDSixPQUFPLE9BQU87QUFDUCxXQUFPLEtBQUssUUFBUSxPQUFPLEtBQUs7QUFBQSxFQUNuQztBQUNMO0FBQ0EsSUFBSSxXQUEyQixvQkFBSTtBQUVuQyxNQUFNLGNBQWM7QUFDcEIsTUFBTSxnQkFBZ0I7QUFBQSxFQUNsQixRQUFTTyxPQUFNQyxLQUFJLFFBQVE7QUFDdkIsV0FBTyxTQUFTLE1BQU1BLE1BQUtEO0FBQUEsRUFDOUI7QUFBQSxFQUNKLE1BQU9BLE9BQU1DLEtBQUksUUFBUTtBQUNsQixVQUFNLEtBQUssTUFBTUQsU0FBUSxXQUFXO0FBQ3BDLFVBQU0sS0FBSyxHQUFHLFNBQVMsTUFBTUMsT0FBTSxXQUFXO0FBQzlDLFdBQU8sTUFBTSxHQUFHLFFBQVEsR0FBRyxJQUFJLElBQUksTUFBTSxFQUFFLFVBQVcsSUFBR0E7QUFBQSxFQUM1RDtBQUFBLEVBQ0QsT0FBUUQsT0FBTUMsS0FBSSxRQUFRO0FBQ3RCLFdBQU9ELFNBQVFDLE1BQUtELFNBQVE7QUFBQSxFQUMvQjtBQUNMO0FBQ0EsTUFBTSxVQUFVO0FBQUEsRUFDWixZQUFZLEtBQUssUUFBUSxNQUFNQyxLQUFHO0FBQzlCLFVBQU0sZUFBZSxPQUFPO0FBQzVCLFVBQUssUUFBUTtBQUFBLE1BQ1QsSUFBSTtBQUFBLE1BQ0pBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsSUFBSTtBQUFBLElBQ2hCLENBQVM7QUFDRCxVQUFNRCxRQUFPLFFBQVE7QUFBQSxNQUNqQixJQUFJO0FBQUEsTUFDSjtBQUFBLE1BQ0FDO0FBQUEsSUFDWixDQUFTO0FBQ0QsU0FBSyxVQUFVO0FBQ2YsU0FBSyxNQUFNLElBQUksTUFBTSxjQUFjLElBQUksUUFBUSxPQUFPRDtBQUN0RCxTQUFLLFVBQVUsUUFBUSxJQUFJLFdBQVcsUUFBUTtBQUM5QyxTQUFLLFNBQVMsS0FBSyxNQUFNLEtBQUssSUFBSyxLQUFJLElBQUksU0FBUyxFQUFFO0FBQ3RELFNBQUssWUFBWSxLQUFLLFNBQVMsS0FBSyxNQUFNLElBQUksUUFBUTtBQUN0RCxTQUFLLFFBQVEsQ0FBQyxDQUFDLElBQUk7QUFDbkIsU0FBSyxVQUFVO0FBQ2YsU0FBSyxRQUFRO0FBQ2IsU0FBSyxRQUFRQTtBQUNiLFNBQUssTUFBTUM7QUFDWCxTQUFLLFlBQVk7QUFBQSxFQUNwQjtBQUFBLEVBQ0QsU0FBUztBQUNMLFdBQU8sS0FBSztBQUFBLEVBQ2Y7QUFBQSxFQUNELE9BQU8sS0FBS0EsS0FBSSxNQUFNO0FBQ2xCLFFBQUksS0FBSyxTQUFTO0FBQ2QsV0FBSyxRQUFRLEtBQUs7QUFDbEIsWUFBTSxlQUFlLEtBQUssUUFBUSxLQUFLO0FBQ3ZDLFlBQU0sVUFBVSxPQUFPLEtBQUs7QUFDNUIsWUFBTSxTQUFTLEtBQUssWUFBWTtBQUNoQyxXQUFLLFNBQVM7QUFDZCxXQUFLLFlBQVksS0FBSyxNQUFNLEtBQUssSUFBSSxRQUFRLElBQUksUUFBUSxDQUFDO0FBQzFELFdBQUssVUFBVTtBQUNmLFdBQUssUUFBUSxDQUFDLENBQUMsSUFBSTtBQUNuQixXQUFLLE1BQU0sUUFBUTtBQUFBLFFBQ2YsSUFBSTtBQUFBLFFBQ0pBO0FBQUEsUUFDQTtBQUFBLFFBQ0EsSUFBSTtBQUFBLE1BQ3BCLENBQWE7QUFDRCxXQUFLLFFBQVEsUUFBUTtBQUFBLFFBQ2pCLElBQUk7QUFBQSxRQUNKO0FBQUEsUUFDQUE7QUFBQSxNQUNoQixDQUFhO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFBQSxFQUNELFNBQVM7QUFDTCxRQUFJLEtBQUssU0FBUztBQUNkLFdBQUssS0FBSyxLQUFLLElBQUs7QUFDcEIsV0FBSyxVQUFVO0FBQ2YsV0FBSyxRQUFRLEtBQUs7QUFBQSxJQUNyQjtBQUFBLEVBQ0o7QUFBQSxFQUNELEtBQUssTUFBTTtBQUNQLFVBQU0sVUFBVSxPQUFPLEtBQUs7QUFDNUIsVUFBTSxXQUFXLEtBQUs7QUFDdEIsVUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBTUQsUUFBTyxLQUFLO0FBQ2xCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU1DLE1BQUssS0FBSztBQUNoQixRQUFJO0FBQ0osU0FBSyxVQUFVRCxVQUFTQyxRQUFPLFFBQVEsVUFBVTtBQUNqRCxRQUFJLENBQUMsS0FBSyxTQUFTO0FBQ2YsV0FBSyxRQUFRLFFBQVFBO0FBQ3JCLFdBQUssUUFBUSxJQUFJO0FBQ2pCO0FBQUEsSUFDSDtBQUNELFFBQUksVUFBVSxHQUFHO0FBQ2IsV0FBSyxRQUFRLFFBQVFEO0FBQ3JCO0FBQUEsSUFDSDtBQUNELGFBQVMsVUFBVSxXQUFXO0FBQzlCLGFBQVMsUUFBUSxTQUFTLElBQUksSUFBSSxTQUFTO0FBQzNDLGFBQVMsS0FBSyxRQUFRLEtBQUssSUFBSSxHQUFHLEtBQUssSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDO0FBQ3RELFNBQUssUUFBUSxRQUFRLEtBQUssSUFBSUEsT0FBTUMsS0FBSSxNQUFNO0FBQUEsRUFDakQ7QUFBQSxFQUNELE9BQU87QUFDSCxVQUFNLFdBQVcsS0FBSyxjQUFjLEtBQUssWUFBWTtBQUNyRCxXQUFPLElBQUksUUFBUSxDQUFDLEtBQUssUUFBTTtBQUMzQixlQUFTLEtBQUs7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLE1BQ2hCLENBQWE7QUFBQSxJQUNiLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCxRQUFRLFVBQVU7QUFDZCxVQUFNLFNBQVMsV0FBVyxRQUFRO0FBQ2xDLFVBQU0sV0FBVyxLQUFLLGFBQWE7QUFDbkMsYUFBUSxJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVEsS0FBSTtBQUNwQyxlQUFTLEdBQUc7SUFDZjtBQUFBLEVBQ0o7QUFDTDtBQUVBLE1BQU0sV0FBVztBQUFBLEVBQ2IsWUFBWSxPQUFPLFFBQU87QUFDdEIsU0FBSyxTQUFTO0FBQ2QsU0FBSyxjQUFjLG9CQUFJO0FBQ3ZCLFNBQUssVUFBVSxNQUFNO0FBQUEsRUFDeEI7QUFBQSxFQUNELFVBQVUsUUFBUTtBQUNkLFFBQUksQ0FBQyxTQUFTLE1BQU0sR0FBRztBQUNuQjtBQUFBLElBQ0g7QUFDRCxVQUFNLG1CQUFtQixPQUFPLEtBQUssU0FBUyxTQUFTO0FBQ3ZELFVBQU0sZ0JBQWdCLEtBQUs7QUFDM0IsV0FBTyxvQkFBb0IsTUFBTSxFQUFFLFFBQVEsQ0FBQyxRQUFNO0FBQzlDLFlBQU0sTUFBTSxPQUFPO0FBQ25CLFVBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRztBQUNoQjtBQUFBLE1BQ0g7QUFDRCxZQUFNLFdBQVc7QUFDakIsaUJBQVcsVUFBVSxrQkFBaUI7QUFDbEMsaUJBQVMsVUFBVSxJQUFJO0FBQUEsTUFDMUI7QUFDRCxPQUFDLFFBQVEsSUFBSSxVQUFVLEtBQUssSUFBSSxjQUFjO0FBQUEsUUFDMUM7QUFBQSxNQUNoQixHQUFlLFFBQVEsQ0FBQyxTQUFPO0FBQ2YsWUFBSSxTQUFTLE9BQU8sQ0FBQyxjQUFjLElBQUksSUFBSSxHQUFHO0FBQzFDLHdCQUFjLElBQUksTUFBTSxRQUFRO0FBQUEsUUFDbkM7QUFBQSxNQUNqQixDQUFhO0FBQUEsSUFDYixDQUFTO0FBQUEsRUFDSjtBQUFBLEVBQ0osZ0JBQWdCLFFBQVEsUUFBUTtBQUN6QixVQUFNLGFBQWEsT0FBTztBQUMxQixVQUFNLFVBQVUscUJBQXFCLFFBQVEsVUFBVTtBQUN2RCxRQUFJLENBQUMsU0FBUztBQUNWLGFBQU87SUFDVjtBQUNELFVBQU0sYUFBYSxLQUFLLGtCQUFrQixTQUFTLFVBQVU7QUFDN0QsUUFBSSxXQUFXLFNBQVM7QUFDcEIsZUFBUyxPQUFPLFFBQVEsYUFBYSxVQUFVLEVBQUUsS0FBSyxNQUFJO0FBQ3RELGVBQU8sVUFBVTtBQUFBLE1BQ2pDLEdBQWUsTUFBSTtBQUFBLE1BQ25CLENBQWE7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLGtCQUFrQixRQUFRLFFBQVE7QUFDM0IsVUFBTSxnQkFBZ0IsS0FBSztBQUMzQixVQUFNLGFBQWE7QUFDbkIsVUFBTSxVQUFVLE9BQU8sZ0JBQWdCLE9BQU8sY0FBYztBQUM1RCxVQUFNLFFBQVEsT0FBTyxLQUFLLE1BQU07QUFDaEMsVUFBTSxPQUFPLEtBQUs7QUFDbEIsUUFBSTtBQUNKLFNBQUksSUFBSSxNQUFNLFNBQVMsR0FBRyxLQUFLLEdBQUcsRUFBRSxHQUFFO0FBQ2xDLFlBQU0sT0FBTyxNQUFNO0FBQ25CLFVBQUksS0FBSyxPQUFPLENBQUMsTUFBTSxLQUFLO0FBQ3hCO0FBQUEsTUFDSDtBQUNELFVBQUksU0FBUyxXQUFXO0FBQ3BCLG1CQUFXLEtBQUssR0FBRyxLQUFLLGdCQUFnQixRQUFRLE1BQU0sQ0FBQztBQUN2RDtBQUFBLE1BQ0g7QUFDRCxZQUFNLFFBQVEsT0FBTztBQUNyQixVQUFJLFlBQVksUUFBUTtBQUN4QixZQUFNLE1BQU0sY0FBYyxJQUFJLElBQUk7QUFDbEMsVUFBSSxXQUFXO0FBQ1gsWUFBSSxPQUFPLFVBQVUsVUFBVTtBQUMzQixvQkFBVSxPQUFPLEtBQUssT0FBTyxJQUFJO0FBQ2pDO0FBQUEsUUFDcEIsT0FBdUI7QUFDSCxvQkFBVSxPQUFNO0FBQUEsUUFDbkI7QUFBQSxNQUNKO0FBQ0QsVUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLFVBQVU7QUFDdkIsZUFBTyxRQUFRO0FBQ2Y7QUFBQSxNQUNIO0FBQ0QsY0FBUSxRQUFRLFlBQVksSUFBSSxVQUFVLEtBQUssUUFBUSxNQUFNLEtBQUs7QUFDbEUsaUJBQVcsS0FBSyxTQUFTO0FBQUEsSUFDNUI7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0osT0FBTyxRQUFRLFFBQVE7QUFDaEIsUUFBSSxLQUFLLFlBQVksU0FBUyxHQUFHO0FBQzdCLGFBQU8sT0FBTyxRQUFRLE1BQU07QUFDNUI7QUFBQSxJQUNIO0FBQ0QsVUFBTSxhQUFhLEtBQUssa0JBQWtCLFFBQVEsTUFBTTtBQUN4RCxRQUFJLFdBQVcsUUFBUTtBQUNuQixlQUFTLElBQUksS0FBSyxRQUFRLFVBQVU7QUFDcEMsYUFBTztBQUFBLElBQ1Y7QUFBQSxFQUNKO0FBQ0w7QUFDQSxTQUFTLFNBQVMsWUFBWSxZQUFZO0FBQ3RDLFFBQU0sVUFBVTtBQUNoQixRQUFNLE9BQU8sT0FBTyxLQUFLLFVBQVU7QUFDbkMsV0FBUSxJQUFJLEdBQUcsSUFBSSxLQUFLLFFBQVEsS0FBSTtBQUNoQyxVQUFNLE9BQU8sV0FBVyxLQUFLO0FBQzdCLFFBQUksUUFBUSxLQUFLLFVBQVU7QUFDdkIsY0FBUSxLQUFLLEtBQUssS0FBTTtBQUFBLElBQzNCO0FBQUEsRUFDSjtBQUNELFNBQU8sUUFBUSxJQUFJLE9BQU87QUFDOUI7QUFDQSxTQUFTLHFCQUFxQixRQUFRLFlBQVk7QUFDOUMsTUFBSSxDQUFDLFlBQVk7QUFDYjtBQUFBLEVBQ0g7QUFDRCxNQUFJLFVBQVUsT0FBTztBQUNyQixNQUFJLENBQUMsU0FBUztBQUNWLFdBQU8sVUFBVTtBQUNqQjtBQUFBLEVBQ0g7QUFDRCxNQUFJLFFBQVEsU0FBUztBQUNqQixXQUFPLFVBQVUsVUFBVSxPQUFPLE9BQU8sQ0FBRSxHQUFFLFNBQVM7QUFBQSxNQUNsRCxTQUFTO0FBQUEsTUFDVCxhQUFhLENBQUU7QUFBQSxJQUMzQixDQUFTO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUVBLFNBQVMsVUFBVSxPQUFPLGlCQUFpQjtBQUN2QyxRQUFNLE9BQU8sU0FBUyxNQUFNLFdBQVc7QUFDdkMsUUFBTSxVQUFVLEtBQUs7QUFDckIsUUFBTSxNQUFNLEtBQUssUUFBUSxTQUFZLGtCQUFrQjtBQUN2RCxRQUFNLE1BQU0sS0FBSyxRQUFRLFNBQVksa0JBQWtCO0FBQ3ZELFNBQU87QUFBQSxJQUNILE9BQU8sVUFBVSxNQUFNO0FBQUEsSUFDdkIsS0FBSyxVQUFVLE1BQU07QUFBQSxFQUM3QjtBQUNBO0FBQ0EsU0FBUyxZQUFZLFFBQVEsUUFBUSxpQkFBaUI7QUFDbEQsTUFBSSxvQkFBb0IsT0FBTztBQUMzQixXQUFPO0FBQUEsRUFDVjtBQUNELFFBQU0sSUFBSSxVQUFVLFFBQVEsZUFBZTtBQUMzQyxRQUFNLElBQUksVUFBVSxRQUFRLGVBQWU7QUFDM0MsU0FBTztBQUFBLElBQ0gsS0FBSyxFQUFFO0FBQUEsSUFDUCxPQUFPLEVBQUU7QUFBQSxJQUNULFFBQVEsRUFBRTtBQUFBLElBQ1YsTUFBTSxFQUFFO0FBQUEsRUFDaEI7QUFDQTtBQUNBLFNBQVMsT0FBTyxPQUFPO0FBQ25CLE1BQUksR0FBRyxHQUFHLEdBQUc7QUFDYixNQUFJLFNBQVMsS0FBSyxHQUFHO0FBQ2pCLFFBQUksTUFBTTtBQUNWLFFBQUksTUFBTTtBQUNWLFFBQUksTUFBTTtBQUNWLFFBQUksTUFBTTtBQUFBLEVBQ2xCLE9BQVc7QUFDSCxRQUFJLElBQUksSUFBSSxJQUFJO0FBQUEsRUFDbkI7QUFDRCxTQUFPO0FBQUEsSUFDSCxLQUFLO0FBQUEsSUFDTCxPQUFPO0FBQUEsSUFDUCxRQUFRO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixVQUFVLFVBQVU7QUFBQSxFQUM1QjtBQUNBO0FBQ0EsU0FBUyx3QkFBd0IsT0FBTyxlQUFlO0FBQ25ELFFBQU0sT0FBTztBQUNiLFFBQU0sV0FBVyxNQUFNLHVCQUF1QixhQUFhO0FBQzNELE1BQUksR0FBRztBQUNQLE9BQUksSUFBSSxHQUFHLE9BQU8sU0FBUyxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDN0MsU0FBSyxLQUFLLFNBQVMsR0FBRyxLQUFLO0FBQUEsRUFDOUI7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLFdBQVcsT0FBTyxPQUFPLFNBQVMsVUFBVSxJQUFJO0FBQ3JELFFBQU0sT0FBTyxNQUFNO0FBQ25CLFFBQU0sYUFBYSxRQUFRLFNBQVM7QUFDcEMsTUFBSSxHQUFHLE1BQU0sY0FBYztBQUMzQixNQUFJLFVBQVUsTUFBTTtBQUNoQjtBQUFBLEVBQ0g7QUFDRCxPQUFJLElBQUksR0FBRyxPQUFPLEtBQUssUUFBUSxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQ3pDLG1CQUFlLENBQUMsS0FBSztBQUNyQixRQUFJLGlCQUFpQixTQUFTO0FBQzFCLFVBQUksUUFBUSxLQUFLO0FBQ2I7QUFBQSxNQUNIO0FBQ0Q7QUFBQSxJQUNIO0FBQ0QsaUJBQWEsTUFBTSxPQUFPO0FBQzFCLFFBQUksZUFBZSxVQUFVLE1BQU0sY0FBYyxVQUFVLEtBQUssS0FBSyxLQUFLLE1BQU0sS0FBSyxVQUFVLElBQUk7QUFDL0YsZUFBUztBQUFBLElBQ1o7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyx5QkFBeUIsTUFBTTtBQUNwQyxRQUFNLE9BQU8sT0FBTyxLQUFLLElBQUk7QUFDN0IsUUFBTSxRQUFRLElBQUksTUFBTSxLQUFLLE1BQU07QUFDbkMsTUFBSSxHQUFHLE1BQU07QUFDYixPQUFJLElBQUksR0FBRyxPQUFPLEtBQUssUUFBUSxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQ3pDLFVBQU0sS0FBSztBQUNYLFVBQU0sS0FBSztBQUFBLE1BQ1AsR0FBRztBQUFBLE1BQ0gsR0FBRyxLQUFLO0FBQUEsSUFDcEI7QUFBQSxFQUNLO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxVQUFVLE9BQU8sTUFBTTtBQUM1QixRQUFNLFVBQVUsU0FBUyxNQUFNLFFBQVE7QUFDdkMsU0FBTyxXQUFXLFlBQVksVUFBYSxLQUFLLFVBQVU7QUFDOUQ7QUFDQSxTQUFTLFlBQVksWUFBWSxZQUFZLE1BQU07QUFDL0MsU0FBTyxHQUFHLFdBQVcsTUFBTSxXQUFXLE1BQU0sS0FBSyxTQUFTLEtBQUs7QUFDbkU7QUFDQSxTQUFTLGNBQWMsT0FBTztBQUMxQixRQUFNLEVBQUUsS0FBTSxLQUFNLFlBQWEsZUFBZ0IsTUFBTTtBQUN2RCxTQUFPO0FBQUEsSUFDSCxLQUFLLGFBQWEsTUFBTSxPQUFPO0FBQUEsSUFDL0IsS0FBSyxhQUFhLE1BQU0sT0FBTztBQUFBLEVBQ3ZDO0FBQ0E7QUFDQSxTQUFTLGlCQUFpQixRQUFRLFVBQVUsWUFBWTtBQUNwRCxRQUFNLFdBQVcsT0FBTyxjQUFjLE9BQU8sWUFBWTtBQUN6RCxTQUFPLFNBQVMsZ0JBQWdCLFNBQVMsY0FBYztBQUMzRDtBQUNBLFNBQVMsb0JBQW9CLE9BQU8sUUFBUSxVQUFVLE1BQU07QUFDeEQsYUFBVyxRQUFRLE9BQU8sd0JBQXdCLElBQUksRUFBRSxXQUFVO0FBQzlELFVBQU0sUUFBUSxNQUFNLEtBQUs7QUFDekIsUUFBSSxZQUFZLFFBQVEsS0FBSyxDQUFDLFlBQVksUUFBUSxHQUFHO0FBQ2pELGFBQU8sS0FBSztBQUFBLElBQ2Y7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxhQUFhLFlBQVksUUFBUTtBQUN0QyxRQUFNLEVBQUUsT0FBUSxhQUFhLEtBQUksSUFBTTtBQUN2QyxRQUFNLFNBQVMsTUFBTSxZQUFZLE1BQU0sVUFBVTtBQUNqRCxRQUFNLEVBQUUsUUFBUyxRQUFTLE9BQU8sYUFBWSxJQUFNO0FBQ25ELFFBQU0sUUFBUSxPQUFPO0FBQ3JCLFFBQU0sUUFBUSxPQUFPO0FBQ3JCLFFBQU0sTUFBTSxZQUFZLFFBQVEsUUFBUSxJQUFJO0FBQzVDLFFBQU0sT0FBTyxPQUFPO0FBQ3BCLE1BQUk7QUFDSixXQUFRLElBQUksR0FBRyxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQ3pCLFVBQU0sT0FBTyxPQUFPO0FBQ3BCLFVBQU0sR0FBRyxRQUFRLFFBQVMsUUFBUSxNQUFRLElBQUc7QUFDN0MsVUFBTSxhQUFhLEtBQUssWUFBWSxLQUFLLFVBQVU7QUFDbkQsWUFBUSxXQUFXLFNBQVMsaUJBQWlCLFFBQVEsS0FBSyxLQUFLO0FBQy9ELFVBQU0sZ0JBQWdCO0FBQ3RCLFVBQU0sT0FBTyxvQkFBb0IsT0FBTyxRQUFRLE1BQU0sS0FBSyxJQUFJO0FBQy9ELFVBQU0sVUFBVSxvQkFBb0IsT0FBTyxRQUFRLE9BQU8sS0FBSyxJQUFJO0FBQ25FLFVBQU0sZUFBZSxNQUFNLGtCQUFrQixNQUFNLGdCQUFnQjtBQUNuRSxpQkFBYSxnQkFBZ0I7QUFBQSxFQUNoQztBQUNMO0FBQ0EsU0FBUyxnQkFBZ0IsT0FBTyxNQUFNO0FBQ2xDLFFBQU0sU0FBUyxNQUFNO0FBQ3JCLFNBQU8sT0FBTyxLQUFLLE1BQU0sRUFBRSxPQUFPLENBQUMsUUFBTSxPQUFPLEtBQUssU0FBUyxJQUFJLEVBQUUsTUFBSztBQUM3RTtBQUNBLFNBQVMscUJBQXFCLFFBQVEsT0FBTztBQUN6QyxTQUFPLGNBQWMsUUFBUTtBQUFBLElBQ3pCLFFBQVE7QUFBQSxJQUNSLFNBQVM7QUFBQSxJQUNULGNBQWM7QUFBQSxJQUNkO0FBQUEsSUFDQSxNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsRUFDZCxDQUFLO0FBQ0w7QUFDQSxTQUFTLGtCQUFrQixRQUFRLE9BQU8sU0FBUztBQUMvQyxTQUFPLGNBQWMsUUFBUTtBQUFBLElBQ3pCLFFBQVE7QUFBQSxJQUNSLFdBQVc7QUFBQSxJQUNYLFFBQVE7QUFBQSxJQUNSLEtBQUs7QUFBQSxJQUNMO0FBQUEsSUFDQTtBQUFBLElBQ0EsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLEVBQ2QsQ0FBSztBQUNMO0FBQ0EsU0FBUyxZQUFZLE1BQU0sT0FBTztBQUM5QixRQUFNLGVBQWUsS0FBSyxXQUFXO0FBQ3JDLFFBQU0sT0FBTyxLQUFLLFVBQVUsS0FBSyxPQUFPO0FBQ3hDLE1BQUksQ0FBQyxNQUFNO0FBQ1A7QUFBQSxFQUNIO0FBQ0QsVUFBUSxTQUFTLEtBQUs7QUFDdEIsYUFBVyxVQUFVLE9BQU07QUFDdkIsVUFBTSxTQUFTLE9BQU87QUFDdEIsUUFBSSxDQUFDLFVBQVUsT0FBTyxVQUFVLFVBQWEsT0FBTyxNQUFNLGtCQUFrQixRQUFXO0FBQ25GO0FBQUEsSUFDSDtBQUNELFdBQU8sT0FBTyxNQUFNO0FBQ3BCLFFBQUksT0FBTyxNQUFNLGtCQUFrQixVQUFhLE9BQU8sTUFBTSxjQUFjLGtCQUFrQixRQUFXO0FBQ3BHLGFBQU8sT0FBTyxNQUFNLGNBQWM7QUFBQSxJQUNyQztBQUFBLEVBQ0o7QUFDTDtBQUNBLE1BQU0scUJBQXFCLENBQUMsU0FBTyxTQUFTLFdBQVcsU0FBUztBQUNoRSxNQUFNLG1CQUFtQixDQUFDLFFBQVEsV0FBUyxTQUFTLFNBQVMsT0FBTyxPQUFPLElBQUksTUFBTTtBQUNyRixNQUFNLGNBQWMsQ0FBQyxVQUFVLE1BQU0sVUFBUSxZQUFZLENBQUMsS0FBSyxVQUFVLEtBQUssWUFBWTtBQUFBLEVBQ2xGLE1BQU0sd0JBQXdCLE9BQU8sSUFBSTtBQUFBLEVBQ3pDLFFBQVE7QUFDaEI7QUFDQSxNQUFNLGtCQUFrQjtBQUFBLEVBSXZCLFlBQVksT0FBTyxjQUFhO0FBQ3pCLFNBQUssUUFBUTtBQUNiLFNBQUssT0FBTyxNQUFNO0FBQ2xCLFNBQUssUUFBUTtBQUNiLFNBQUssa0JBQWtCO0FBQ3ZCLFNBQUssY0FBYyxLQUFLO0FBQ3hCLFNBQUssUUFBUSxLQUFLLFlBQVk7QUFDOUIsU0FBSyxVQUFVO0FBQ2QsU0FBSyxXQUFXO0FBQ2pCLFNBQUssUUFBUTtBQUNiLFNBQUssY0FBYztBQUNuQixTQUFLLGlCQUFpQjtBQUN0QixTQUFLLGFBQWE7QUFDbEIsU0FBSyxhQUFhO0FBQ2xCLFNBQUssc0JBQXNCO0FBQzNCLFNBQUsscUJBQXFCO0FBQzFCLFNBQUssV0FBVztBQUNoQixTQUFLLFlBQVk7QUFDakIsU0FBSyxxQkFBcUIsV0FBVztBQUNyQyxTQUFLLGtCQUFrQixXQUFXO0FBQ2xDLFNBQUssV0FBVTtBQUFBLEVBQ2xCO0FBQUEsRUFDRCxhQUFhO0FBQ1QsVUFBTSxPQUFPLEtBQUs7QUFDbEIsU0FBSyxVQUFTO0FBQ2QsU0FBSyxXQUFVO0FBQ2YsU0FBSyxXQUFXLFVBQVUsS0FBSyxRQUFRLElBQUk7QUFDM0MsU0FBSyxZQUFXO0FBQ2hCLFFBQUksS0FBSyxRQUFRLFFBQVEsQ0FBQyxLQUFLLE1BQU0sZ0JBQWdCLFFBQVEsR0FBRztBQUM1RCxjQUFRLEtBQUssb0tBQW9LO0FBQUEsSUFDcEw7QUFBQSxFQUNKO0FBQUEsRUFDRCxZQUFZLGNBQWM7QUFDdEIsUUFBSSxLQUFLLFVBQVUsY0FBYztBQUM3QixrQkFBWSxLQUFLLFdBQVc7QUFBQSxJQUMvQjtBQUNELFNBQUssUUFBUTtBQUFBLEVBQ2hCO0FBQUEsRUFDRCxhQUFhO0FBQ1QsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxXQUFXLENBQUMsTUFBTSxHQUFHLEdBQUcsTUFBSSxTQUFTLE1BQU0sSUFBSSxTQUFTLE1BQU0sSUFBSTtBQUN4RSxVQUFNLE1BQU0sS0FBSyxVQUFVLGVBQWUsUUFBUSxTQUFTLGdCQUFnQixPQUFPLEdBQUcsQ0FBQztBQUN0RixVQUFNLE1BQU0sS0FBSyxVQUFVLGVBQWUsUUFBUSxTQUFTLGdCQUFnQixPQUFPLEdBQUcsQ0FBQztBQUN0RixVQUFNLE1BQU0sS0FBSyxVQUFVLGVBQWUsUUFBUSxTQUFTLGdCQUFnQixPQUFPLEdBQUcsQ0FBQztBQUN0RixVQUFNLFlBQVksS0FBSztBQUN2QixVQUFNLE1BQU0sS0FBSyxVQUFVLFNBQVMsV0FBVyxLQUFLLEtBQUssR0FBRztBQUM1RCxVQUFNLE1BQU0sS0FBSyxVQUFVLFNBQVMsV0FBVyxLQUFLLEtBQUssR0FBRztBQUM1RCxTQUFLLFNBQVMsS0FBSyxjQUFjLEdBQUc7QUFDcEMsU0FBSyxTQUFTLEtBQUssY0FBYyxHQUFHO0FBQ3BDLFNBQUssU0FBUyxLQUFLLGNBQWMsR0FBRztBQUNwQyxTQUFLLFNBQVMsS0FBSyxjQUFjLEdBQUc7QUFDcEMsU0FBSyxTQUFTLEtBQUssY0FBYyxHQUFHO0FBQUEsRUFDdkM7QUFBQSxFQUNELGFBQWE7QUFDVCxXQUFPLEtBQUssTUFBTSxLQUFLLFNBQVMsS0FBSztBQUFBLEVBQ3hDO0FBQUEsRUFDRCxVQUFVO0FBQ04sV0FBTyxLQUFLLE1BQU0sZUFBZSxLQUFLLEtBQUs7QUFBQSxFQUM5QztBQUFBLEVBQ0osY0FBYyxTQUFTO0FBQ2hCLFdBQU8sS0FBSyxNQUFNLE9BQU87QUFBQSxFQUM1QjtBQUFBLEVBQ0osZUFBZSxPQUFPO0FBQ2YsVUFBTSxPQUFPLEtBQUs7QUFDbEIsV0FBTyxVQUFVLEtBQUssU0FBUyxLQUFLLFNBQVMsS0FBSztBQUFBLEVBQ3JEO0FBQUEsRUFDRCxRQUFRO0FBQ0osU0FBSyxRQUFRLE9BQU87QUFBQSxFQUN2QjtBQUFBLEVBQ0osV0FBVztBQUNKLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFFBQUksS0FBSyxPQUFPO0FBQ1osMEJBQW9CLEtBQUssT0FBTyxJQUFJO0FBQUEsSUFDdkM7QUFDRCxRQUFJLEtBQUssVUFBVTtBQUNmLGtCQUFZLElBQUk7QUFBQSxJQUNuQjtBQUFBLEVBQ0o7QUFBQSxFQUNKLGFBQWE7QUFDTixVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFNLE9BQU8sUUFBUSxTQUFTLFFBQVEsT0FBTztBQUM3QyxVQUFNLFFBQVEsS0FBSztBQUNuQixRQUFJLFNBQVMsSUFBSSxHQUFHO0FBQ2hCLFdBQUssUUFBUSx5QkFBeUIsSUFBSTtBQUFBLElBQ3RELFdBQW1CLFVBQVUsTUFBTTtBQUN2QixVQUFJLE9BQU87QUFDUCw0QkFBb0IsT0FBTyxJQUFJO0FBQy9CLGNBQU0sT0FBTyxLQUFLO0FBQ2xCLG9CQUFZLElBQUk7QUFDaEIsYUFBSyxVQUFVO01BQ2xCO0FBQ0QsVUFBSSxRQUFRLE9BQU8sYUFBYSxJQUFJLEdBQUc7QUFDbkMsMEJBQWtCLE1BQU0sSUFBSTtBQUFBLE1BQy9CO0FBQ0QsV0FBSyxZQUFZO0FBQ2pCLFdBQUssUUFBUTtBQUFBLElBQ2hCO0FBQUEsRUFDSjtBQUFBLEVBQ0QsY0FBYztBQUNWLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFNBQUssV0FBVTtBQUNmLFFBQUksS0FBSyxvQkFBb0I7QUFDekIsV0FBSyxVQUFVLElBQUksS0FBSyxtQkFBa0I7QUFBQSxJQUM3QztBQUFBLEVBQ0o7QUFBQSxFQUNELHNCQUFzQixrQkFBa0I7QUFDcEMsVUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBTSxVQUFVLEtBQUs7QUFDckIsUUFBSSxlQUFlO0FBQ25CLFNBQUssV0FBVTtBQUNmLFVBQU0sYUFBYSxLQUFLO0FBQ3hCLFNBQUssV0FBVyxVQUFVLEtBQUssUUFBUSxJQUFJO0FBQzNDLFFBQUksS0FBSyxVQUFVLFFBQVEsT0FBTztBQUM5QixxQkFBZTtBQUNmLGtCQUFZLElBQUk7QUFDaEIsV0FBSyxRQUFRLFFBQVE7QUFBQSxJQUN4QjtBQUNELFNBQUssZ0JBQWdCLGdCQUFnQjtBQUNyQyxRQUFJLGdCQUFnQixlQUFlLEtBQUssVUFBVTtBQUM5QyxtQkFBYSxNQUFNLEtBQUssT0FBTztBQUFBLElBQ2xDO0FBQUEsRUFDSjtBQUFBLEVBQ0osWUFBWTtBQUNMLFVBQU0sU0FBUyxLQUFLLE1BQU07QUFDMUIsVUFBTSxZQUFZLE9BQU8saUJBQWlCLEtBQUssS0FBSztBQUNwRCxVQUFNLFNBQVMsT0FBTyxnQkFBZ0IsS0FBSyxjQUFjLFdBQVcsSUFBSTtBQUN4RSxTQUFLLFVBQVUsT0FBTyxlQUFlLFFBQVEsS0FBSyxXQUFVLENBQUU7QUFDOUQsU0FBSyxXQUFXLEtBQUssUUFBUTtBQUM3QixTQUFLLGtCQUFrQjtFQUMxQjtBQUFBLEVBQ0osTUFBTSxPQUFPLE9BQU87QUFDYixVQUFNLEVBQUUsYUFBYSxNQUFPLE9BQU8sS0FBSSxJQUFNO0FBQzdDLFVBQU0sRUFBRSxRQUFTLFNBQVcsSUFBRztBQUMvQixVQUFNLFFBQVEsT0FBTztBQUNyQixRQUFJLFNBQVMsVUFBVSxLQUFLLFVBQVUsS0FBSyxTQUFTLE9BQU8sS0FBSztBQUNoRSxRQUFJLE9BQU8sUUFBUSxLQUFLLEtBQUssUUFBUSxRQUFRO0FBQzdDLFFBQUksR0FBRyxLQUFLO0FBQ1osUUFBSSxLQUFLLGFBQWEsT0FBTztBQUN6QixXQUFLLFVBQVU7QUFDZixXQUFLLFVBQVU7QUFDZixlQUFTO0FBQUEsSUFDckIsT0FBZTtBQUNILFVBQUksUUFBUSxLQUFLLE1BQU0sR0FBRztBQUN0QixpQkFBUyxLQUFLLGVBQWUsTUFBTSxNQUFNLE9BQU8sS0FBSztBQUFBLE1BQ3hELFdBQVUsU0FBUyxLQUFLLE1BQU0sR0FBRztBQUM5QixpQkFBUyxLQUFLLGdCQUFnQixNQUFNLE1BQU0sT0FBTyxLQUFLO0FBQUEsTUFDdEUsT0FBbUI7QUFDSCxpQkFBUyxLQUFLLG1CQUFtQixNQUFNLE1BQU0sT0FBTyxLQUFLO0FBQUEsTUFDNUQ7QUFDRCxZQUFNLDZCQUE2QixNQUFJLElBQUksV0FBVyxRQUFRLFFBQVEsSUFBSSxTQUFTLEtBQUs7QUFDeEYsV0FBSSxJQUFJLEdBQUcsSUFBSSxPQUFPLEVBQUUsR0FBRTtBQUN0QixhQUFLLFFBQVEsSUFBSSxTQUFTLE1BQU0sT0FBTztBQUN2QyxZQUFJLFFBQVE7QUFDUixjQUFJLDJCQUEwQixHQUFJO0FBQzlCLHFCQUFTO0FBQUEsVUFDWjtBQUNELGlCQUFPO0FBQUEsUUFDVjtBQUFBLE1BQ0o7QUFDRCxXQUFLLFVBQVU7QUFBQSxJQUNsQjtBQUNELFFBQUksVUFBVTtBQUNWLG1CQUFhLE1BQU0sTUFBTTtBQUFBLElBQzVCO0FBQUEsRUFDSjtBQUFBLEVBQ0osbUJBQW1CLE1BQU0sTUFBTSxPQUFPLE9BQU87QUFDdEMsVUFBTSxFQUFFLFFBQVMsT0FBUyxJQUFHO0FBQzdCLFVBQU0sUUFBUSxPQUFPO0FBQ3JCLFVBQU0sUUFBUSxPQUFPO0FBQ3JCLFVBQU0sU0FBUyxPQUFPO0FBQ3RCLFVBQU0sY0FBYyxXQUFXO0FBQy9CLFVBQU0sU0FBUyxJQUFJLE1BQU0sS0FBSztBQUM5QixRQUFJLEdBQUcsTUFBTTtBQUNiLFNBQUksSUFBSSxHQUFHLE9BQU8sT0FBTyxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQ25DLGNBQVEsSUFBSTtBQUNaLGFBQU8sS0FBSztBQUFBLFFBQ1IsQ0FBQyxRQUFRLGVBQWUsT0FBTyxNQUFNLE9BQU8sUUFBUSxLQUFLO0FBQUEsUUFDekQsQ0FBQyxRQUFRLE9BQU8sTUFBTSxLQUFLLFFBQVEsS0FBSztBQUFBLE1BQ3hEO0FBQUEsSUFDUztBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixlQUFlLE1BQU0sTUFBTSxPQUFPLE9BQU87QUFDbEMsVUFBTSxFQUFFLFFBQVMsT0FBUyxJQUFHO0FBQzdCLFVBQU0sU0FBUyxJQUFJLE1BQU0sS0FBSztBQUM5QixRQUFJLEdBQUcsTUFBTSxPQUFPO0FBQ3BCLFNBQUksSUFBSSxHQUFHLE9BQU8sT0FBTyxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQ25DLGNBQVEsSUFBSTtBQUNaLGFBQU8sS0FBSztBQUNaLGFBQU8sS0FBSztBQUFBLFFBQ1IsR0FBRyxPQUFPLE1BQU0sS0FBSyxJQUFJLEtBQUs7QUFBQSxRQUM5QixHQUFHLE9BQU8sTUFBTSxLQUFLLElBQUksS0FBSztBQUFBLE1BQzlDO0FBQUEsSUFDUztBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixnQkFBZ0IsTUFBTSxNQUFNLE9BQU8sT0FBTztBQUNuQyxVQUFNLEVBQUUsUUFBUyxPQUFTLElBQUc7QUFDN0IsVUFBTSxFQUFFLFdBQVUsS0FBTSxXQUFVLElBQU0sSUFBRyxLQUFLO0FBQ2hELFVBQU0sU0FBUyxJQUFJLE1BQU0sS0FBSztBQUM5QixRQUFJLEdBQUcsTUFBTSxPQUFPO0FBQ3BCLFNBQUksSUFBSSxHQUFHLE9BQU8sT0FBTyxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQ25DLGNBQVEsSUFBSTtBQUNaLGFBQU8sS0FBSztBQUNaLGFBQU8sS0FBSztBQUFBLFFBQ1IsR0FBRyxPQUFPLE1BQU0saUJBQWlCLE1BQU0sUUFBUSxHQUFHLEtBQUs7QUFBQSxRQUN2RCxHQUFHLE9BQU8sTUFBTSxpQkFBaUIsTUFBTSxRQUFRLEdBQUcsS0FBSztBQUFBLE1BQ3ZFO0FBQUEsSUFDUztBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixVQUFVLE9BQU87QUFDVixXQUFPLEtBQUssWUFBWSxRQUFRO0FBQUEsRUFDbkM7QUFBQSxFQUNKLGVBQWUsT0FBTztBQUNmLFdBQU8sS0FBSyxZQUFZLEtBQUs7QUFBQSxFQUNoQztBQUFBLEVBQ0osV0FBVyxPQUFPLFFBQVEsTUFBTTtBQUN6QixVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLFFBQVEsT0FBTyxNQUFNO0FBQzNCLFVBQU0sUUFBUTtBQUFBLE1BQ1YsTUFBTSx3QkFBd0IsT0FBTyxJQUFJO0FBQUEsTUFDekMsUUFBUSxPQUFPLFFBQVEsTUFBTSxNQUFNO0FBQUEsSUFDL0M7QUFDUSxXQUFPLFdBQVcsT0FBTyxPQUFPLEtBQUssT0FBTztBQUFBLE1BQ3hDO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDSjtBQUFBLEVBQ0osc0JBQXNCLE9BQU8sT0FBTyxRQUFRLE9BQU87QUFDNUMsVUFBTSxjQUFjLE9BQU8sTUFBTTtBQUNqQyxRQUFJLFFBQVEsZ0JBQWdCLE9BQU8sTUFBTTtBQUN6QyxVQUFNLFNBQVMsU0FBUyxPQUFPLFFBQVEsTUFBTTtBQUM3QyxRQUFJLFNBQVMsUUFBUTtBQUNqQixZQUFNLFNBQVM7QUFDZixjQUFRLFdBQVcsT0FBTyxhQUFhLEtBQUssWUFBWSxLQUFLO0FBQUEsSUFDaEU7QUFDRCxVQUFNLE1BQU0sS0FBSyxJQUFJLE1BQU0sS0FBSyxLQUFLO0FBQ3JDLFVBQU0sTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLLEtBQUs7QUFBQSxFQUN4QztBQUFBLEVBQ0osVUFBVSxPQUFPLFVBQVU7QUFDcEIsVUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxTQUFTLEtBQUssV0FBVyxVQUFVLEtBQUs7QUFDOUMsVUFBTSxPQUFPLFFBQVE7QUFDckIsVUFBTSxhQUFhLEtBQUssZUFBZSxLQUFLO0FBQzVDLFVBQU0sUUFBUSxZQUFZLFVBQVUsTUFBTSxLQUFLLEtBQUs7QUFDcEQsVUFBTSxRQUFRO0FBQUEsTUFDVixLQUFLLE9BQU87QUFBQSxNQUNaLEtBQUssT0FBTztBQUFBLElBQ3hCO0FBQ1EsVUFBTSxFQUFFLEtBQUssVUFBVyxLQUFLLGFBQWMsY0FBYyxVQUFVO0FBQ25FLFFBQUksR0FBRztBQUNQLGFBQVMsUUFBUTtBQUNiLGVBQVMsUUFBUTtBQUNqQixZQUFNLGFBQWEsT0FBTyxXQUFXO0FBQ3JDLGFBQU8sQ0FBQyxlQUFlLE9BQU8sTUFBTSxLQUFLLEtBQUssV0FBVyxjQUFjLFdBQVc7QUFBQSxJQUNyRjtBQUNELFNBQUksSUFBSSxHQUFHLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDckIsVUFBSSxNQUFLLEdBQUk7QUFDVDtBQUFBLE1BQ0g7QUFDRCxXQUFLLHNCQUFzQixPQUFPLE9BQU8sUUFBUSxLQUFLO0FBQ3RELFVBQUksUUFBUTtBQUNSO0FBQUEsTUFDSDtBQUFBLElBQ0o7QUFDRCxRQUFJLFFBQVE7QUFDUixXQUFJLElBQUksT0FBTyxHQUFHLEtBQUssR0FBRyxFQUFFLEdBQUU7QUFDMUIsWUFBSSxNQUFLLEdBQUk7QUFDVDtBQUFBLFFBQ0g7QUFDRCxhQUFLLHNCQUFzQixPQUFPLE9BQU8sUUFBUSxLQUFLO0FBQ3REO0FBQUEsTUFDSDtBQUFBLElBQ0o7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsbUJBQW1CLE9BQU87QUFDdEIsVUFBTSxTQUFTLEtBQUssWUFBWTtBQUNoQyxVQUFNLFNBQVM7QUFDZixRQUFJLEdBQUcsTUFBTTtBQUNiLFNBQUksSUFBSSxHQUFHLE9BQU8sT0FBTyxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDM0MsY0FBUSxPQUFPLEdBQUcsTUFBTTtBQUN4QixVQUFJLGVBQWUsS0FBSyxHQUFHO0FBQ3ZCLGVBQU8sS0FBSyxLQUFLO0FBQUEsTUFDcEI7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLGlCQUFpQjtBQUNWLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixpQkFBaUIsT0FBTztBQUNqQixVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLFNBQVMsS0FBSztBQUNwQixVQUFNLFNBQVMsS0FBSztBQUNwQixVQUFNLFNBQVMsS0FBSyxVQUFVLEtBQUs7QUFDbkMsV0FBTztBQUFBLE1BQ0gsT0FBTyxTQUFTLEtBQUssT0FBTyxpQkFBaUIsT0FBTyxPQUFPLEtBQUssSUFBSTtBQUFBLE1BQ3BFLE9BQU8sU0FBUyxLQUFLLE9BQU8saUJBQWlCLE9BQU8sT0FBTyxLQUFLLElBQUk7QUFBQSxJQUNoRjtBQUFBLEVBQ0s7QUFBQSxFQUNKLFFBQVEsTUFBTTtBQUNQLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFNBQUssT0FBTyxRQUFRLFNBQVM7QUFDN0IsU0FBSyxRQUFRLE9BQU8sZUFBZSxLQUFLLFFBQVEsTUFBTSxZQUFZLEtBQUssUUFBUSxLQUFLLFFBQVEsS0FBSyxlQUFjLENBQUUsQ0FBQyxDQUFDO0FBQUEsRUFDdEg7QUFBQSxFQUNKLE9BQU8sTUFBTTtBQUFBLEVBQUU7QUFBQSxFQUNaLE9BQU87QUFDSCxVQUFNLE1BQU0sS0FBSztBQUNqQixVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLFdBQVcsS0FBSyxRQUFRO0FBQzlCLFVBQU0sT0FBTyxNQUFNO0FBQ25CLFVBQU0sU0FBUztBQUNmLFVBQU0sUUFBUSxLQUFLLGNBQWM7QUFDakMsVUFBTSxRQUFRLEtBQUssY0FBYyxTQUFTLFNBQVM7QUFDbkQsVUFBTSwwQkFBMEIsS0FBSyxRQUFRO0FBQzdDLFFBQUk7QUFDSixRQUFJLEtBQUssU0FBUztBQUNkLFdBQUssUUFBUSxLQUFLLEtBQUssTUFBTSxPQUFPLEtBQUs7QUFBQSxJQUM1QztBQUNELFNBQUksSUFBSSxPQUFPLElBQUksUUFBUSxPQUFPLEVBQUUsR0FBRTtBQUNsQyxZQUFNLFVBQVUsU0FBUztBQUN6QixVQUFJLFFBQVEsUUFBUTtBQUNoQjtBQUFBLE1BQ0g7QUFDRCxVQUFJLFFBQVEsVUFBVSx5QkFBeUI7QUFDM0MsZUFBTyxLQUFLLE9BQU87QUFBQSxNQUNuQyxPQUFtQjtBQUNILGdCQUFRLEtBQUssS0FBSyxJQUFJO0FBQUEsTUFDekI7QUFBQSxJQUNKO0FBQ0QsU0FBSSxJQUFJLEdBQUcsSUFBSSxPQUFPLFFBQVEsRUFBRSxHQUFFO0FBQzlCLGFBQU8sR0FBRyxLQUFLLEtBQUssSUFBSTtBQUFBLElBQzNCO0FBQUEsRUFDSjtBQUFBLEVBQ0osU0FBUyxPQUFPLFFBQVE7QUFDakIsVUFBTSxPQUFPLFNBQVMsV0FBVztBQUNqQyxXQUFPLFVBQVUsVUFBYSxLQUFLLFlBQVksVUFBVSxLQUFLLDZCQUE2QixJQUFJLElBQUksS0FBSywwQkFBMEIsU0FBUyxHQUFHLElBQUk7QUFBQSxFQUNySjtBQUFBLEVBQ0osV0FBVyxPQUFPLFFBQVEsTUFBTTtBQUN6QixVQUFNLFVBQVUsS0FBSztBQUNyQixRQUFJO0FBQ0osUUFBSSxTQUFTLEtBQUssUUFBUSxLQUFLLFlBQVksS0FBSyxRQUFRO0FBQ3BELFlBQU0sVUFBVSxLQUFLLFlBQVksS0FBSztBQUN0QyxnQkFBVSxRQUFRLGFBQWEsUUFBUSxXQUFXLGtCQUFrQixLQUFLLFdBQVksR0FBRSxPQUFPLE9BQU87QUFDckcsY0FBUSxTQUFTLEtBQUssVUFBVSxLQUFLO0FBQ3JDLGNBQVEsTUFBTSxRQUFRLEtBQUs7QUFDM0IsY0FBUSxRQUFRLFFBQVEsWUFBWTtBQUFBLElBQ2hELE9BQWU7QUFDSCxnQkFBVSxLQUFLLGFBQWEsS0FBSyxXQUFXLHFCQUFxQixLQUFLLE1BQU0sV0FBWSxHQUFFLEtBQUssS0FBSztBQUNwRyxjQUFRLFVBQVU7QUFDbEIsY0FBUSxRQUFRLFFBQVEsZUFBZSxLQUFLO0FBQUEsSUFDL0M7QUFDRCxZQUFRLFNBQVMsQ0FBQyxDQUFDO0FBQ25CLFlBQVEsT0FBTztBQUNmLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSiw2QkFBNkIsTUFBTTtBQUM1QixXQUFPLEtBQUssdUJBQXVCLEtBQUssbUJBQW1CLElBQUksSUFBSTtBQUFBLEVBQ3RFO0FBQUEsRUFDSiwwQkFBMEIsT0FBTyxNQUFNO0FBQ2hDLFdBQU8sS0FBSyx1QkFBdUIsS0FBSyxnQkFBZ0IsSUFBSSxNQUFNLEtBQUs7QUFBQSxFQUMxRTtBQUFBLEVBQ0osdUJBQXVCLGFBQWEsT0FBTyxXQUFXLE9BQU87QUFDdEQsVUFBTSxTQUFTLFNBQVM7QUFDeEIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxXQUFXLGNBQWMsTUFBTTtBQUNyQyxVQUFNLFNBQVMsTUFBTTtBQUNyQixVQUFNLFVBQVUsS0FBSyx1QkFBdUIsUUFBUSxLQUFLO0FBQ3pELFFBQUksUUFBUTtBQUNSLGFBQU8saUJBQWlCLFFBQVEsT0FBTztBQUFBLElBQzFDO0FBQ0QsVUFBTSxTQUFTLEtBQUssTUFBTTtBQUMxQixVQUFNLFlBQVksT0FBTyx3QkFBd0IsS0FBSyxPQUFPLFdBQVc7QUFDeEUsVUFBTSxXQUFXLFNBQVM7QUFBQSxNQUN0QixHQUFHO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDWixJQUFZO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNaO0FBQ1EsVUFBTSxTQUFTLE9BQU8sZ0JBQWdCLEtBQUssV0FBVSxHQUFJLFNBQVM7QUFDbEUsVUFBTUMsU0FBUSxPQUFPLEtBQUssU0FBUyxTQUFTLFlBQVk7QUFDeEQsVUFBTSxVQUFVLE1BQUksS0FBSyxXQUFXLE9BQU8sUUFBUSxJQUFJO0FBQ3ZELFVBQU0sU0FBUyxPQUFPLG9CQUFvQixRQUFRQSxRQUFPLFNBQVMsUUFBUTtBQUMxRSxRQUFJLE9BQU8sU0FBUztBQUNoQixhQUFPLFVBQVU7QUFDakIsWUFBTSxZQUFZLE9BQU8sT0FBTyxpQkFBaUIsUUFBUSxPQUFPLENBQUM7QUFBQSxJQUNwRTtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixtQkFBbUIsT0FBTyxZQUFZLFFBQVE7QUFDdkMsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxXQUFXLGFBQWE7QUFDOUIsVUFBTSxTQUFTLE1BQU07QUFDckIsUUFBSSxRQUFRO0FBQ1IsYUFBTztBQUFBLElBQ1Y7QUFDRCxRQUFJO0FBQ0osUUFBSSxNQUFNLFFBQVEsY0FBYyxPQUFPO0FBQ25DLFlBQU0sU0FBUyxLQUFLLE1BQU07QUFDMUIsWUFBTSxZQUFZLE9BQU8sMEJBQTBCLEtBQUssT0FBTyxVQUFVO0FBQ3pFLFlBQU0sU0FBUyxPQUFPLGdCQUFnQixLQUFLLFdBQVUsR0FBSSxTQUFTO0FBQ2xFLGdCQUFVLE9BQU8sZUFBZSxRQUFRLEtBQUssV0FBVyxPQUFPLFFBQVEsVUFBVSxDQUFDO0FBQUEsSUFDckY7QUFDRCxVQUFNLGFBQWEsSUFBSSxXQUFXLE9BQU8sV0FBVyxRQUFRLFVBQVU7QUFDdEUsUUFBSSxXQUFXLFFBQVEsWUFBWTtBQUMvQixZQUFNLFlBQVksT0FBTyxPQUFPLFVBQVU7QUFBQSxJQUM3QztBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixpQkFBaUIsU0FBUztBQUNuQixRQUFJLENBQUMsUUFBUSxTQUFTO0FBQ2xCO0FBQUEsSUFDSDtBQUNELFdBQU8sS0FBSyxtQkFBbUIsS0FBSyxpQkFBaUIsT0FBTyxPQUFPLElBQUksT0FBTztBQUFBLEVBQ2pGO0FBQUEsRUFDSixlQUFlLE1BQU0sZUFBZTtBQUM3QixXQUFPLENBQUMsaUJBQWlCLG1CQUFtQixJQUFJLEtBQUssS0FBSyxNQUFNO0FBQUEsRUFDbkU7QUFBQSxFQUNKLGtCQUFrQixPQUFPLE1BQU07QUFDeEIsVUFBTSxZQUFZLEtBQUssMEJBQTBCLE9BQU8sSUFBSTtBQUM1RCxVQUFNLDBCQUEwQixLQUFLO0FBQ3JDLFVBQU0sZ0JBQWdCLEtBQUssaUJBQWlCLFNBQVM7QUFDckQsVUFBTSxpQkFBaUIsS0FBSyxlQUFlLE1BQU0sYUFBYSxLQUFLLGtCQUFrQjtBQUNyRixTQUFLLG9CQUFvQixlQUFlLE1BQU0sU0FBUztBQUN2RCxXQUFPO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxJQUNaO0FBQUEsRUFDSztBQUFBLEVBQ0osY0FBYyxTQUFTLE9BQU8sWUFBWSxNQUFNO0FBQ3pDLFFBQUksbUJBQW1CLElBQUksR0FBRztBQUMxQixhQUFPLE9BQU8sU0FBUyxVQUFVO0FBQUEsSUFDN0MsT0FBZTtBQUNILFdBQUssbUJBQW1CLE9BQU8sSUFBSSxFQUFFLE9BQU8sU0FBUyxVQUFVO0FBQUEsSUFDbEU7QUFBQSxFQUNKO0FBQUEsRUFDSixvQkFBb0IsZUFBZSxNQUFNLFlBQVk7QUFDOUMsUUFBSSxpQkFBaUIsQ0FBQyxtQkFBbUIsSUFBSSxHQUFHO0FBQzVDLFdBQUssbUJBQW1CLFFBQVcsSUFBSSxFQUFFLE9BQU8sZUFBZSxVQUFVO0FBQUEsSUFDNUU7QUFBQSxFQUNKO0FBQUEsRUFDSixVQUFVLFNBQVMsT0FBTyxNQUFNLFFBQVE7QUFDakMsWUFBUSxTQUFTO0FBQ2pCLFVBQU0sVUFBVSxLQUFLLFNBQVMsT0FBTyxNQUFNO0FBQzNDLFNBQUssbUJBQW1CLE9BQU8sTUFBTSxNQUFNLEVBQUUsT0FBTyxTQUFTO0FBQUEsTUFDekQsU0FBUyxDQUFDLFVBQVUsS0FBSyxpQkFBaUIsT0FBTyxLQUFLO0FBQUEsSUFDbEUsQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNELGlCQUFpQixTQUFTLGNBQWMsT0FBTztBQUMzQyxTQUFLLFVBQVUsU0FBUyxPQUFPLFVBQVUsS0FBSztBQUFBLEVBQ2pEO0FBQUEsRUFDRCxjQUFjLFNBQVMsY0FBYyxPQUFPO0FBQ3hDLFNBQUssVUFBVSxTQUFTLE9BQU8sVUFBVSxJQUFJO0FBQUEsRUFDaEQ7QUFBQSxFQUNKLDJCQUEyQjtBQUNwQixVQUFNLFVBQVUsS0FBSyxZQUFZO0FBQ2pDLFFBQUksU0FBUztBQUNULFdBQUssVUFBVSxTQUFTLFFBQVcsVUFBVSxLQUFLO0FBQUEsSUFDckQ7QUFBQSxFQUNKO0FBQUEsRUFDSix3QkFBd0I7QUFDakIsVUFBTSxVQUFVLEtBQUssWUFBWTtBQUNqQyxRQUFJLFNBQVM7QUFDVCxXQUFLLFVBQVUsU0FBUyxRQUFXLFVBQVUsSUFBSTtBQUFBLElBQ3BEO0FBQUEsRUFDSjtBQUFBLEVBQ0osZ0JBQWdCLGtCQUFrQjtBQUMzQixVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLFdBQVcsS0FBSyxZQUFZO0FBQ2xDLGVBQVcsQ0FBQyxRQUFRLE1BQU0sSUFBSSxLQUFLLEtBQUssV0FBVTtBQUM5QyxXQUFLLFFBQVEsTUFBTSxJQUFJO0FBQUEsSUFDMUI7QUFDRCxTQUFLLFlBQVk7QUFDakIsVUFBTSxVQUFVLFNBQVM7QUFDekIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxRQUFRLEtBQUssSUFBSSxTQUFTLE9BQU87QUFDdkMsUUFBSSxPQUFPO0FBQ1AsV0FBSyxNQUFNLEdBQUcsS0FBSztBQUFBLElBQ3RCO0FBQ0QsUUFBSSxVQUFVLFNBQVM7QUFDbkIsV0FBSyxnQkFBZ0IsU0FBUyxVQUFVLFNBQVMsZ0JBQWdCO0FBQUEsSUFDN0UsV0FBbUIsVUFBVSxTQUFTO0FBQzFCLFdBQUssZ0JBQWdCLFNBQVMsVUFBVSxPQUFPO0FBQUEsSUFDbEQ7QUFBQSxFQUNKO0FBQUEsRUFDSixnQkFBZ0IsT0FBTyxPQUFPLG1CQUFtQixNQUFNO0FBQ2hELFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sTUFBTSxRQUFRO0FBQ3BCLFFBQUk7QUFDSixVQUFNLE9BQU8sQ0FBQyxRQUFNO0FBQ2hCLFVBQUksVUFBVTtBQUNkLFdBQUksSUFBSSxJQUFJLFNBQVMsR0FBRyxLQUFLLEtBQUssS0FBSTtBQUNsQyxZQUFJLEtBQUssSUFBSSxJQUFJO0FBQUEsTUFDcEI7QUFBQSxJQUNiO0FBQ1EsU0FBSyxJQUFJO0FBQ1QsU0FBSSxJQUFJLE9BQU8sSUFBSSxLQUFLLEVBQUUsR0FBRTtBQUN4QixXQUFLLEtBQUssSUFBSSxLQUFLLGdCQUFlO0FBQUEsSUFDckM7QUFDRCxRQUFJLEtBQUssVUFBVTtBQUNmLFdBQUssS0FBSyxPQUFPO0FBQUEsSUFDcEI7QUFDRCxTQUFLLE1BQU0sT0FBTyxLQUFLO0FBQ3ZCLFFBQUksa0JBQWtCO0FBQ2xCLFdBQUssZUFBZSxNQUFNLE9BQU8sT0FBTyxPQUFPO0FBQUEsSUFDbEQ7QUFBQSxFQUNKO0FBQUEsRUFDRCxlQUFlLFNBQVMsT0FBTyxPQUFPLE1BQU07QUFBQSxFQUFFO0FBQUEsRUFDakQsZ0JBQWdCLE9BQU8sT0FBTztBQUN2QixVQUFNLE9BQU8sS0FBSztBQUNsQixRQUFJLEtBQUssVUFBVTtBQUNmLFlBQU0sVUFBVSxLQUFLLFFBQVEsT0FBTyxPQUFPLEtBQUs7QUFDaEQsVUFBSSxLQUFLLFVBQVU7QUFDZixvQkFBWSxNQUFNLE9BQU87QUFBQSxNQUM1QjtBQUFBLElBQ0o7QUFDRCxTQUFLLEtBQUssT0FBTyxPQUFPLEtBQUs7QUFBQSxFQUNoQztBQUFBLEVBQ0osTUFBTSxNQUFNO0FBQ0wsUUFBSSxLQUFLLFVBQVU7QUFDZixXQUFLLFVBQVUsS0FBSyxJQUFJO0FBQUEsSUFDcEMsT0FBZTtBQUNILFlBQU0sQ0FBQyxRQUFRLE1BQU0sSUFBSSxJQUFJO0FBQzdCLFdBQUssUUFBUSxNQUFNLElBQUk7QUFBQSxJQUMxQjtBQUNELFNBQUssTUFBTSxhQUFhLEtBQUs7QUFBQSxNQUN6QixLQUFLO0FBQUEsTUFDTCxHQUFHO0FBQUEsSUFDZixDQUFTO0FBQUEsRUFDSjtBQUFBLEVBQ0QsY0FBYztBQUNWLFVBQU0sUUFBUSxVQUFVO0FBQ3hCLFNBQUssTUFBTTtBQUFBLE1BQ1A7QUFBQSxNQUNBLEtBQUssV0FBVSxFQUFHLEtBQUssU0FBUztBQUFBLE1BQ2hDO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDSjtBQUFBLEVBQ0QsYUFBYTtBQUNULFNBQUssTUFBTTtBQUFBLE1BQ1A7QUFBQSxNQUNBLEtBQUssWUFBWSxLQUFLLFNBQVM7QUFBQSxNQUMvQjtBQUFBLElBQ1osQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNELGVBQWU7QUFDWCxTQUFLLE1BQU07QUFBQSxNQUNQO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCxjQUFjLE9BQU8sT0FBTztBQUN4QixRQUFJLE9BQU87QUFDUCxXQUFLLE1BQU07QUFBQSxRQUNQO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNoQixDQUFhO0FBQUEsSUFDSjtBQUNELFVBQU0sV0FBVyxVQUFVLFNBQVM7QUFDcEMsUUFBSSxVQUFVO0FBQ1YsV0FBSyxNQUFNO0FBQUEsUUFDUDtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsTUFDaEIsQ0FBYTtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFDRCxpQkFBaUI7QUFDYixTQUFLLE1BQU07QUFBQSxNQUNQO0FBQUEsTUFDQTtBQUFBLE1BQ0EsVUFBVTtBQUFBLElBQ3RCLENBQVM7QUFBQSxFQUNKO0FBQ0w7QUE5a0JDLGNBREssbUJBQ0UsWUFBVztBQUNsQixjQUZLLG1CQUVFLHNCQUFxQjtBQUM1QixjQUhLLG1CQUdFLG1CQUFrQjtBQThrQjFCLFNBQVMsa0JBQWtCLE9BQU8sTUFBTTtBQUNwQyxNQUFJLENBQUMsTUFBTSxPQUFPLE1BQU07QUFDcEIsVUFBTSxlQUFlLE1BQU0sd0JBQXdCLElBQUk7QUFDdkQsUUFBSSxTQUFTO0FBQ2IsYUFBUSxJQUFJLEdBQUcsT0FBTyxhQUFhLFFBQVEsSUFBSSxNQUFNLEtBQUk7QUFDckQsZUFBUyxPQUFPLE9BQU8sYUFBYSxHQUFHLFdBQVcsbUJBQW1CLEtBQUssQ0FBQztBQUFBLElBQzlFO0FBQ0QsVUFBTSxPQUFPLE9BQU8sYUFBYSxPQUFPLEtBQUssQ0FBQyxHQUFHLE1BQUksSUFBSSxDQUFDLENBQUM7QUFBQSxFQUM5RDtBQUNELFNBQU8sTUFBTSxPQUFPO0FBQ3hCO0FBQ0MsU0FBUyxxQkFBcUIsTUFBTTtBQUNqQyxRQUFNLFFBQVEsS0FBSztBQUNuQixRQUFNLFNBQVMsa0JBQWtCLE9BQU8sS0FBSyxJQUFJO0FBQ2pELE1BQUksTUFBTSxNQUFNO0FBQ2hCLE1BQUksR0FBRyxNQUFNLE1BQU07QUFDbkIsUUFBTSxtQkFBbUIsTUFBSTtBQUN6QixRQUFJLFNBQVMsU0FBUyxTQUFTLFFBQVE7QUFDbkM7QUFBQSxJQUNIO0FBQ0QsUUFBSSxRQUFRLElBQUksR0FBRztBQUNmLFlBQU0sS0FBSyxJQUFJLEtBQUssS0FBSyxJQUFJLE9BQU8sSUFBSSxLQUFLLEdBQUc7QUFBQSxJQUNuRDtBQUNELFdBQU87QUFBQSxFQUNmO0FBQ0ksT0FBSSxJQUFJLEdBQUcsT0FBTyxPQUFPLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUMzQyxXQUFPLE1BQU0saUJBQWlCLE9BQU8sRUFBRTtBQUN2QztFQUNIO0FBQ0QsU0FBTztBQUNQLE9BQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxNQUFNLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUNoRCxXQUFPLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUI7RUFDSDtBQUNELFNBQU87QUFDWDtBQUNDLFNBQVMseUJBQXlCLE9BQU8sT0FBTyxTQUFTLFlBQVk7QUFDbEUsUUFBTSxZQUFZLFFBQVE7QUFDMUIsTUFBSSxNQUFNO0FBQ1YsTUFBSSxjQUFjLFNBQVMsR0FBRztBQUMxQixXQUFPLE1BQU0sTUFBTSxRQUFRO0FBQzNCLFlBQVEsUUFBUTtBQUFBLEVBQ3hCLE9BQVc7QUFDSCxXQUFPLFlBQVk7QUFDbkIsWUFBUTtBQUFBLEVBQ1g7QUFDRCxTQUFPO0FBQUEsSUFDSCxPQUFPLE9BQU87QUFBQSxJQUNkO0FBQUEsSUFDQSxPQUFPLE1BQU0sT0FBTyxTQUFTLE9BQU87QUFBQSxFQUM1QztBQUNBO0FBQ0MsU0FBUywwQkFBMEIsT0FBTyxPQUFPLFNBQVMsWUFBWTtBQUNuRSxRQUFNLFNBQVMsTUFBTTtBQUNyQixRQUFNLE9BQU8sT0FBTztBQUNwQixNQUFJLE9BQU8sUUFBUSxJQUFJLE9BQU8sUUFBUSxLQUFLO0FBQzNDLE1BQUksT0FBTyxRQUFRLE9BQU8sU0FBUyxJQUFJLE9BQU8sUUFBUSxLQUFLO0FBQzNELFFBQU0sVUFBVSxRQUFRO0FBQ3hCLE1BQUksU0FBUyxNQUFNO0FBQ2YsV0FBTyxRQUFRLFNBQVMsT0FBTyxNQUFNLE1BQU0sTUFBTSxRQUFRLE9BQU87QUFBQSxFQUNuRTtBQUNELE1BQUksU0FBUyxNQUFNO0FBQ2YsV0FBTyxPQUFPLE9BQU87QUFBQSxFQUN4QjtBQUNELFFBQU0sUUFBUSxRQUFRLE9BQU8sS0FBSyxJQUFJLE1BQU0sSUFBSSxLQUFLLElBQUk7QUFDekQsUUFBTSxPQUFPLEtBQUssSUFBSSxPQUFPLElBQUksSUFBSSxJQUFJO0FBQ3pDLFNBQU87QUFBQSxJQUNILE9BQU8sT0FBTztBQUFBLElBQ2QsT0FBTyxRQUFRO0FBQUEsSUFDZjtBQUFBLEVBQ1I7QUFDQTtBQUNBLFNBQVMsY0FBYyxPQUFPLE1BQU0sUUFBUSxHQUFHO0FBQzNDLFFBQU0sYUFBYSxPQUFPLE1BQU0sTUFBTSxJQUFJLENBQUM7QUFDM0MsUUFBTSxXQUFXLE9BQU8sTUFBTSxNQUFNLElBQUksQ0FBQztBQUN6QyxRQUFNLE1BQU0sS0FBSyxJQUFJLFlBQVksUUFBUTtBQUN6QyxRQUFNLE1BQU0sS0FBSyxJQUFJLFlBQVksUUFBUTtBQUN6QyxNQUFJLFdBQVc7QUFDZixNQUFJLFNBQVM7QUFDYixNQUFJLEtBQUssSUFBSSxHQUFHLElBQUksS0FBSyxJQUFJLEdBQUcsR0FBRztBQUMvQixlQUFXO0FBQ1gsYUFBUztBQUFBLEVBQ1o7QUFDRCxPQUFLLE9BQU8sUUFBUTtBQUNwQixPQUFLLFVBQVU7QUFBQSxJQUNYO0FBQUEsSUFDQTtBQUFBLElBQ0EsT0FBTztBQUFBLElBQ1AsS0FBSztBQUFBLElBQ0w7QUFBQSxJQUNBO0FBQUEsRUFDUjtBQUNBO0FBQ0EsU0FBUyxXQUFXLE9BQU8sTUFBTSxRQUFRLEdBQUc7QUFDeEMsTUFBSSxRQUFRLEtBQUssR0FBRztBQUNoQixrQkFBYyxPQUFPLE1BQU0sUUFBUSxDQUFDO0FBQUEsRUFDNUMsT0FBVztBQUNILFNBQUssT0FBTyxRQUFRLE9BQU8sTUFBTSxPQUFPLENBQUM7QUFBQSxFQUM1QztBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsc0JBQXNCLE1BQU0sTUFBTSxPQUFPLE9BQU87QUFDckQsUUFBTSxTQUFTLEtBQUs7QUFDcEIsUUFBTSxTQUFTLEtBQUs7QUFDcEIsUUFBTSxTQUFTLE9BQU87QUFDdEIsUUFBTSxjQUFjLFdBQVc7QUFDL0IsUUFBTSxTQUFTO0FBQ2YsTUFBSSxHQUFHLE1BQU0sTUFBTTtBQUNuQixPQUFJLElBQUksT0FBTyxPQUFPLFFBQVEsT0FBTyxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQy9DLFlBQVEsS0FBSztBQUNiLFdBQU87QUFDUCxTQUFLLE9BQU8sUUFBUSxlQUFlLE9BQU8sTUFBTSxPQUFPLElBQUksQ0FBQztBQUM1RCxXQUFPLEtBQUssV0FBVyxPQUFPLE1BQU0sUUFBUSxDQUFDLENBQUM7QUFBQSxFQUNqRDtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsV0FBVyxRQUFRO0FBQ3hCLFNBQU8sVUFBVSxPQUFPLGFBQWEsVUFBYSxPQUFPLFdBQVc7QUFDeEU7QUFDQSxTQUFTLFFBQVEsTUFBTSxRQUFRLFlBQVk7QUFDdkMsTUFBSSxTQUFTLEdBQUc7QUFDWixXQUFPLEtBQUssSUFBSTtBQUFBLEVBQ25CO0FBQ0QsVUFBUSxPQUFPLGFBQWMsSUFBRyxJQUFJLE9BQU8sT0FBTyxPQUFPLGFBQWEsSUFBSTtBQUM5RTtBQUNBLFNBQVMsWUFBWSxZQUFZO0FBQzdCLE1BQUksU0FBUyxPQUFPLEtBQUssS0FBSztBQUM5QixNQUFJLFdBQVcsWUFBWTtBQUN2QixjQUFVLFdBQVcsT0FBTyxXQUFXO0FBQ3ZDLFlBQVE7QUFDUixVQUFNO0FBQUEsRUFDZCxPQUFXO0FBQ0gsY0FBVSxXQUFXLE9BQU8sV0FBVztBQUN2QyxZQUFRO0FBQ1IsVUFBTTtBQUFBLEVBQ1Q7QUFDRCxNQUFJLFNBQVM7QUFDVCxVQUFNO0FBQ04sYUFBUztBQUFBLEVBQ2pCLE9BQVc7QUFDSCxVQUFNO0FBQ04sYUFBUztBQUFBLEVBQ1o7QUFDRCxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNSO0FBQ0E7QUFDQSxTQUFTLGlCQUFpQixZQUFZLFNBQVMsT0FBTyxPQUFPO0FBQ3pELE1BQUksT0FBTyxRQUFRO0FBQ25CLFFBQU0sTUFBTTtBQUNaLE1BQUksQ0FBQyxNQUFNO0FBQ1AsZUFBVyxnQkFBZ0I7QUFDM0I7QUFBQSxFQUNIO0FBQ0QsTUFBSSxTQUFTLE1BQU07QUFDZixlQUFXLGdCQUFnQjtBQUFBLE1BQ3ZCLEtBQUs7QUFBQSxNQUNMLE9BQU87QUFBQSxNQUNQLFFBQVE7QUFBQSxNQUNSLE1BQU07QUFBQSxJQUNsQjtBQUNRO0FBQUEsRUFDSDtBQUNELFFBQU0sRUFBRSxPQUFRLEtBQU0sU0FBVSxLQUFNLE9BQVMsSUFBRyxZQUFZLFVBQVU7QUFDeEUsTUFBSSxTQUFTLFlBQVksT0FBTztBQUM1QixlQUFXLHFCQUFxQjtBQUNoQyxTQUFLLE1BQU0sUUFBUSxPQUFPLE9BQU87QUFDN0IsYUFBTztBQUFBLElBQ1YsWUFBVyxNQUFNLFdBQVcsT0FBTyxPQUFPO0FBQ3ZDLGFBQU87QUFBQSxJQUNuQixPQUFlO0FBQ0gsVUFBSSxVQUFVLFFBQVEsT0FBTyxLQUFLLE9BQU8sS0FBSztBQUM5QyxhQUFPO0FBQUEsSUFDVjtBQUFBLEVBQ0o7QUFDRCxNQUFJLFVBQVUsTUFBTSxPQUFPLEtBQUssT0FBTyxLQUFLO0FBQzVDLGFBQVcsZ0JBQWdCO0FBQy9CO0FBQ0EsU0FBUyxVQUFVLE1BQU0sR0FBRyxHQUFHLFNBQVM7QUFDcEMsTUFBSSxTQUFTO0FBQ1QsV0FBTyxLQUFLLE1BQU0sR0FBRyxDQUFDO0FBQ3RCLFdBQU8sU0FBUyxNQUFNLEdBQUcsQ0FBQztBQUFBLEVBQ2xDLE9BQVc7QUFDSCxXQUFPLFNBQVMsTUFBTSxHQUFHLENBQUM7QUFBQSxFQUM3QjtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsS0FBSyxNQUFNLElBQUksSUFBSTtBQUN4QixTQUFPLFNBQVMsS0FBSyxLQUFLLFNBQVMsS0FBSyxLQUFLO0FBQ2pEO0FBQ0EsU0FBUyxTQUFTLEdBQUcsT0FBTyxLQUFLO0FBQzdCLFNBQU8sTUFBTSxVQUFVLFFBQVEsTUFBTSxRQUFRLE1BQU07QUFDdkQ7QUFDQSxTQUFTLGlCQUFpQixZQUFZLEVBQUUsY0FBYSxHQUFLLE9BQU87QUFDN0QsYUFBVyxnQkFBZ0Isa0JBQWtCLFNBQVMsVUFBVSxJQUFJLE9BQU8sSUFBSTtBQUNuRjtBQUNBLE1BQU0sc0JBQXNCLGtCQUFrQjtBQUFBLEVBb0M3QyxtQkFBbUIsTUFBTSxNQUFNLE9BQU8sT0FBTztBQUN0QyxXQUFPLHNCQUFzQixNQUFNLE1BQU0sT0FBTyxLQUFLO0FBQUEsRUFDeEQ7QUFBQSxFQUNKLGVBQWUsTUFBTSxNQUFNLE9BQU8sT0FBTztBQUNsQyxXQUFPLHNCQUFzQixNQUFNLE1BQU0sT0FBTyxLQUFLO0FBQUEsRUFDeEQ7QUFBQSxFQUNKLGdCQUFnQixNQUFNLE1BQU0sT0FBTyxPQUFPO0FBQ25DLFVBQU0sRUFBRSxRQUFTLE9BQVMsSUFBRztBQUM3QixVQUFNLEVBQUUsV0FBVSxLQUFNLFdBQVUsSUFBTSxJQUFHLEtBQUs7QUFDaEQsVUFBTSxXQUFXLE9BQU8sU0FBUyxNQUFNLFdBQVc7QUFDbEQsVUFBTSxXQUFXLE9BQU8sU0FBUyxNQUFNLFdBQVc7QUFDbEQsVUFBTSxTQUFTO0FBQ2YsUUFBSSxHQUFHLE1BQU0sTUFBTTtBQUNuQixTQUFJLElBQUksT0FBTyxPQUFPLFFBQVEsT0FBTyxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQy9DLFlBQU0sS0FBSztBQUNYLGFBQU87QUFDUCxXQUFLLE9BQU8sUUFBUSxPQUFPLE1BQU0saUJBQWlCLEtBQUssUUFBUSxHQUFHLENBQUM7QUFDbkUsYUFBTyxLQUFLLFdBQVcsaUJBQWlCLEtBQUssUUFBUSxHQUFHLE1BQU0sUUFBUSxDQUFDLENBQUM7QUFBQSxJQUMzRTtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixzQkFBc0IsT0FBTyxPQUFPLFFBQVEsT0FBTztBQUM1QyxVQUFNLHNCQUFzQixPQUFPLE9BQU8sUUFBUSxLQUFLO0FBQ3ZELFVBQU0sU0FBUyxPQUFPO0FBQ3RCLFFBQUksVUFBVSxVQUFVLEtBQUssWUFBWSxRQUFRO0FBQzdDLFlBQU0sTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLLE9BQU8sR0FBRztBQUMxQyxZQUFNLE1BQU0sS0FBSyxJQUFJLE1BQU0sS0FBSyxPQUFPLEdBQUc7QUFBQSxJQUM3QztBQUFBLEVBQ0o7QUFBQSxFQUNKLGlCQUFpQjtBQUNWLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixpQkFBaUIsT0FBTztBQUNqQixVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLEVBQUUsUUFBUyxPQUFTLElBQUc7QUFDN0IsVUFBTSxTQUFTLEtBQUssVUFBVSxLQUFLO0FBQ25DLFVBQU0sU0FBUyxPQUFPO0FBQ3RCLFVBQU0sUUFBUSxXQUFXLE1BQU0sSUFBSSxNQUFNLE9BQU8sUUFBUSxPQUFPLE9BQU8sTUFBTSxNQUFNLEtBQUssT0FBTyxpQkFBaUIsT0FBTyxPQUFPLEtBQUs7QUFDbEksV0FBTztBQUFBLE1BQ0gsT0FBTyxLQUFLLE9BQU8saUJBQWlCLE9BQU8sT0FBTyxLQUFLO0FBQUEsTUFDdkQ7QUFBQSxJQUNaO0FBQUEsRUFDSztBQUFBLEVBQ0QsYUFBYTtBQUNULFNBQUssc0JBQXNCO0FBQzNCLFVBQU0sV0FBVTtBQUNoQixVQUFNLE9BQU8sS0FBSztBQUNsQixTQUFLLFFBQVEsS0FBSyxXQUFVLEVBQUc7QUFBQSxFQUNsQztBQUFBLEVBQ0QsT0FBTyxNQUFNO0FBQ1QsVUFBTSxPQUFPLEtBQUs7QUFDbEIsU0FBSyxlQUFlLEtBQUssTUFBTSxHQUFHLEtBQUssS0FBSyxRQUFRLElBQUk7QUFBQSxFQUMzRDtBQUFBLEVBQ0QsZUFBZSxNQUFNLE9BQU8sT0FBTyxNQUFNO0FBQ3JDLFVBQU0sUUFBUSxTQUFTO0FBQ3ZCLFVBQU0sRUFBRSxPQUFRLGFBQWEsRUFBRSxPQUFTLE1BQU07QUFDOUMsVUFBTSxPQUFPLE9BQU87QUFDcEIsVUFBTSxhQUFhLE9BQU87QUFDMUIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxFQUFFLGVBQWdCLGVBQWlCLElBQUcsS0FBSyxrQkFBa0IsT0FBTyxJQUFJO0FBQzlFLGFBQVEsSUFBSSxPQUFPLElBQUksUUFBUSxPQUFPLEtBQUk7QUFDdEMsWUFBTSxTQUFTLEtBQUssVUFBVSxDQUFDO0FBQy9CLFlBQU0sVUFBVSxTQUFTLGNBQWMsT0FBTyxPQUFPLEtBQUssSUFBSTtBQUFBLFFBQzFEO0FBQUEsUUFDQSxNQUFNO0FBQUEsTUFDdEIsSUFBZ0IsS0FBSyx5QkFBeUIsQ0FBQztBQUNuQyxZQUFNLFVBQVUsS0FBSyx5QkFBeUIsR0FBRyxLQUFLO0FBQ3RELFlBQU0sU0FBUyxPQUFPLFdBQVcsSUFBSSxPQUFPO0FBQzVDLFlBQU0sYUFBYTtBQUFBLFFBQ2Y7QUFBQSxRQUNBLE1BQU0sUUFBUTtBQUFBLFFBQ2Qsb0JBQW9CLENBQUMsU0FBUyxXQUFXLE9BQU8sT0FBTyxLQUFLLFVBQVUsTUFBTSxRQUFRLFVBQVUsTUFBTTtBQUFBLFFBQ3BHLEdBQUcsYUFBYSxRQUFRLE9BQU8sUUFBUTtBQUFBLFFBQ3ZDLEdBQUcsYUFBYSxRQUFRLFNBQVMsUUFBUTtBQUFBLFFBQ3pDLFFBQVEsYUFBYSxRQUFRLE9BQU8sS0FBSyxJQUFJLFFBQVEsSUFBSTtBQUFBLFFBQ3pELE9BQU8sYUFBYSxLQUFLLElBQUksUUFBUSxJQUFJLElBQUksUUFBUTtBQUFBLE1BQ3JFO0FBQ1ksVUFBSSxnQkFBZ0I7QUFDaEIsbUJBQVcsVUFBVSxpQkFBaUIsS0FBSywwQkFBMEIsR0FBRyxLQUFLLEdBQUcsU0FBUyxXQUFXLElBQUk7QUFBQSxNQUMzRztBQUNELFlBQU0sVUFBVSxXQUFXLFdBQVcsS0FBSyxHQUFHO0FBQzlDLHVCQUFpQixZQUFZLFNBQVMsT0FBTyxLQUFLO0FBQ2xELHVCQUFpQixZQUFZLFNBQVMsTUFBTSxLQUFLO0FBQ2pELFdBQUssY0FBYyxLQUFLLElBQUksR0FBRyxZQUFZLElBQUk7QUFBQSxJQUNsRDtBQUFBLEVBQ0o7QUFBQSxFQUNKLFdBQVcsTUFBTSxXQUFXO0FBQ3JCLFVBQU0sRUFBRSxPQUFNLElBQU0sS0FBSztBQUN6QixVQUFNLFdBQVcsT0FBTyx3QkFBd0IsS0FBSyxLQUFLLEVBQUUsT0FBTyxDQUFDLFNBQU8sS0FBSyxXQUFXLFFBQVEsT0FBTztBQUMxRyxVQUFNLFVBQVUsT0FBTyxRQUFRO0FBQy9CLFVBQU0sU0FBUztBQUNmLFVBQU0sV0FBVyxDQUFDLFNBQU87QUFDckIsWUFBTSxTQUFTLEtBQUssV0FBVyxVQUFVLFNBQVM7QUFDbEQsWUFBTSxNQUFNLFVBQVUsT0FBTyxLQUFLLE9BQU87QUFDekMsVUFBSSxjQUFjLEdBQUcsS0FBSyxNQUFNLEdBQUcsR0FBRztBQUNsQyxlQUFPO0FBQUEsTUFDVjtBQUFBLElBQ2I7QUFDUSxlQUFXLFFBQVEsVUFBUztBQUN4QixVQUFJLGNBQWMsVUFBYSxTQUFTLElBQUksR0FBRztBQUMzQztBQUFBLE1BQ0g7QUFDRCxVQUFJLFlBQVksU0FBUyxPQUFPLFFBQVEsS0FBSyxLQUFLLE1BQU0sTUFBTSxZQUFZLFVBQWEsS0FBSyxVQUFVLFFBQVc7QUFDN0csZUFBTyxLQUFLLEtBQUssS0FBSztBQUFBLE1BQ3pCO0FBQ0QsVUFBSSxLQUFLLFVBQVUsTUFBTTtBQUNyQjtBQUFBLE1BQ0g7QUFBQSxJQUNKO0FBQ0QsUUFBSSxDQUFDLE9BQU8sUUFBUTtBQUNoQixhQUFPLEtBQUssTUFBUztBQUFBLElBQ3hCO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLGVBQWUsT0FBTztBQUNmLFdBQU8sS0FBSyxXQUFXLFFBQVcsS0FBSyxFQUFFO0FBQUEsRUFDNUM7QUFBQSxFQUNKLGVBQWUsY0FBY04sT0FBTSxXQUFXO0FBQ3ZDLFVBQU0sU0FBUyxLQUFLLFdBQVcsY0FBYyxTQUFTO0FBQ3RELFVBQU0sUUFBUUEsVUFBUyxTQUFZLE9BQU8sUUFBUUEsS0FBSSxJQUFJO0FBQzFELFdBQU8sVUFBVSxLQUFLLE9BQU8sU0FBUyxJQUFJO0FBQUEsRUFDN0M7QUFBQSxFQUNKLFlBQVk7QUFDTCxVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLFNBQVMsS0FBSztBQUNwQixVQUFNLFNBQVM7QUFDZixRQUFJLEdBQUc7QUFDUCxTQUFJLElBQUksR0FBRyxPQUFPLEtBQUssS0FBSyxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDOUMsYUFBTyxLQUFLLE9BQU8saUJBQWlCLEtBQUssVUFBVSxDQUFDLEVBQUUsT0FBTyxPQUFPLENBQUMsQ0FBQztBQUFBLElBQ3pFO0FBQ0QsVUFBTSxlQUFlLEtBQUs7QUFDMUIsVUFBTSxNQUFNLGdCQUFnQixxQkFBcUIsSUFBSTtBQUNyRCxXQUFPO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBLE9BQU8sT0FBTztBQUFBLE1BQ2QsS0FBSyxPQUFPO0FBQUEsTUFDWixZQUFZLEtBQUssZUFBZ0I7QUFBQSxNQUNqQyxPQUFPO0FBQUEsTUFDUCxTQUFTLEtBQUs7QUFBQSxNQUNkLE9BQU8sZUFBZSxJQUFJLEtBQUsscUJBQXFCLEtBQUs7QUFBQSxJQUNyRTtBQUFBLEVBQ0s7QUFBQSxFQUNKLHlCQUF5QixPQUFPO0FBQ3pCLFVBQU0sRUFBRSxhQUFhLEVBQUUsUUFBUyxVQUFXLE9BQU8sYUFBWSxHQUFNLFNBQVMsRUFBRSxNQUFNLFdBQVksYUFBZSxNQUFNO0FBQ3RILFVBQU0sYUFBYSxhQUFhO0FBQ2hDLFVBQU0sU0FBUyxLQUFLLFVBQVUsS0FBSztBQUNuQyxVQUFNLFNBQVMsT0FBTztBQUN0QixVQUFNLFdBQVcsV0FBVyxNQUFNO0FBQ2xDLFFBQUksUUFBUSxPQUFPLE9BQU87QUFDMUIsUUFBSSxRQUFRO0FBQ1osUUFBSSxTQUFTLFdBQVcsS0FBSyxXQUFXLFFBQVEsUUFBUSxRQUFRLElBQUk7QUFDcEUsUUFBSSxNQUFNO0FBQ1YsUUFBSSxXQUFXLE9BQU87QUFDbEIsY0FBUSxTQUFTO0FBQ2pCLGVBQVM7QUFBQSxJQUNaO0FBQ0QsUUFBSSxVQUFVO0FBQ1YsY0FBUSxPQUFPO0FBQ2YsZUFBUyxPQUFPLFNBQVMsT0FBTztBQUNoQyxVQUFJLFVBQVUsS0FBSyxLQUFLLEtBQUssTUFBTSxLQUFLLE9BQU8sTUFBTSxHQUFHO0FBQ3BELGdCQUFRO0FBQUEsTUFDWDtBQUNELGVBQVM7QUFBQSxJQUNaO0FBQ0QsVUFBTSxhQUFhLENBQUMsY0FBYyxTQUFTLEtBQUssQ0FBQyxXQUFXLFlBQVk7QUFDeEUsUUFBSSxPQUFPLE9BQU8saUJBQWlCLFVBQVU7QUFDN0MsUUFBSSxLQUFLLE1BQU0sa0JBQWtCLEtBQUssR0FBRztBQUNyQyxhQUFPLE9BQU8saUJBQWlCLFFBQVEsTUFBTTtBQUFBLElBQ3pELE9BQWU7QUFDSCxhQUFPO0FBQUEsSUFDVjtBQUNELFdBQU8sT0FBTztBQUNkLFFBQUksS0FBSyxJQUFJLElBQUksSUFBSSxjQUFjO0FBQy9CLGFBQU8sUUFBUSxNQUFNLFFBQVEsVUFBVSxJQUFJO0FBQzNDLFVBQUksVUFBVSxZQUFZO0FBQ3RCLGdCQUFRLE9BQU87QUFBQSxNQUNsQjtBQUNELFlBQU0sYUFBYSxPQUFPLG1CQUFtQixDQUFDO0FBQzlDLFlBQU0sV0FBVyxPQUFPLG1CQUFtQixDQUFDO0FBQzVDLFlBQU0sTUFBTSxLQUFLLElBQUksWUFBWSxRQUFRO0FBQ3pDLFlBQU0sTUFBTSxLQUFLLElBQUksWUFBWSxRQUFRO0FBQ3pDLGFBQU8sS0FBSyxJQUFJLEtBQUssSUFBSSxNQUFNLEdBQUcsR0FBRyxHQUFHO0FBQ3hDLGFBQU8sT0FBTztBQUNkLFVBQUksWUFBWSxDQUFDLFVBQVU7QUFDdkIsZUFBTyxRQUFRLE9BQU8sTUFBTSxjQUFjLGdCQUFnQixPQUFPLGlCQUFpQixJQUFJLElBQUksT0FBTyxpQkFBaUIsSUFBSTtBQUFBLE1BQ3pIO0FBQUEsSUFDSjtBQUNELFFBQUksU0FBUyxPQUFPLGlCQUFpQixVQUFVLEdBQUc7QUFDOUMsWUFBTSxXQUFXLEtBQUssSUFBSSxJQUFJLE9BQU8scUJBQXFCLFVBQVUsSUFBSTtBQUN4RSxjQUFRO0FBQ1IsY0FBUTtBQUFBLElBQ1g7QUFDRCxXQUFPO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQSxRQUFRLE9BQU8sT0FBTztBQUFBLElBQ2xDO0FBQUEsRUFDSztBQUFBLEVBQ0oseUJBQXlCLE9BQU8sT0FBTztBQUNoQyxVQUFNLFFBQVEsTUFBTTtBQUNwQixVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFNLFdBQVcsUUFBUTtBQUN6QixVQUFNLGtCQUFrQixlQUFlLFFBQVEsaUJBQWlCLFFBQVE7QUFDeEUsUUFBSSxRQUFRO0FBQ1osUUFBSSxNQUFNLFNBQVM7QUFDZixZQUFNLGFBQWEsV0FBVyxLQUFLLGVBQWUsS0FBSyxJQUFJLE1BQU07QUFDakUsWUFBTSxRQUFRLFFBQVEsaUJBQWlCLFNBQVMsMEJBQTBCLE9BQU8sT0FBTyxTQUFTLFVBQVUsSUFBSSx5QkFBeUIsT0FBTyxPQUFPLFNBQVMsVUFBVTtBQUN6SyxZQUFNLGFBQWEsS0FBSyxlQUFlLEtBQUssT0FBTyxLQUFLLFlBQVksT0FBTyxXQUFXLFFBQVEsTUFBUztBQUN2RyxlQUFTLE1BQU0sUUFBUSxNQUFNLFFBQVEsYUFBYSxNQUFNLFFBQVE7QUFDaEUsYUFBTyxLQUFLLElBQUksaUJBQWlCLE1BQU0sUUFBUSxNQUFNLEtBQUs7QUFBQSxJQUN0RSxPQUFlO0FBQ0gsZUFBUyxNQUFNLGlCQUFpQixLQUFLLFVBQVUsS0FBSyxFQUFFLE1BQU0sT0FBTyxLQUFLO0FBQ3hFLGFBQU8sS0FBSyxJQUFJLGlCQUFpQixNQUFNLE1BQU0sTUFBTSxLQUFLO0FBQUEsSUFDM0Q7QUFDRCxXQUFPO0FBQUEsTUFDSCxNQUFNLFNBQVMsT0FBTztBQUFBLE1BQ3RCLE1BQU0sU0FBUyxPQUFPO0FBQUEsTUFDdEI7QUFBQSxNQUNBO0FBQUEsSUFDWjtBQUFBLEVBQ0s7QUFBQSxFQUNELE9BQU87QUFDSCxVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLFNBQVMsS0FBSztBQUNwQixVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLE9BQU8sTUFBTTtBQUNuQixRQUFJLElBQUk7QUFDUixXQUFNLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDaEIsVUFBSSxLQUFLLFVBQVUsQ0FBQyxFQUFFLE9BQU8sVUFBVSxNQUFNO0FBQ3pDLGNBQU0sR0FBRyxLQUFLLEtBQUssSUFBSTtBQUFBLE1BQzFCO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFDTDtBQS9RSSxjQURFLGVBQ0ssTUFBSztBQUNmLGNBRkssZUFFRSxZQUFXO0FBQUEsRUFDWCxvQkFBb0I7QUFBQSxFQUNwQixpQkFBaUI7QUFBQSxFQUNqQixvQkFBb0I7QUFBQSxFQUNwQixlQUFlO0FBQUEsRUFDZixTQUFTO0FBQUEsRUFDVCxZQUFZO0FBQUEsSUFDUixTQUFTO0FBQUEsTUFDTCxNQUFNO0FBQUEsTUFDTixZQUFZO0FBQUEsUUFDUjtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNIO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFDVDtBQUNDLGNBckJLLGVBcUJFLGFBQVk7QUFBQSxFQUNaLFFBQVE7QUFBQSxJQUNKLFNBQVM7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLFFBQVE7QUFBQSxNQUNSLE1BQU07QUFBQSxRQUNGLFFBQVE7QUFBQSxNQUNYO0FBQUEsSUFDSjtBQUFBLElBQ0QsU0FBUztBQUFBLE1BQ0wsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLElBQ2hCO0FBQUEsRUFDSjtBQUNUO0FBcVdBLFNBQVMsa0JBQWtCLFVBQVUsZUFBZSxRQUFRO0FBQ3hELE1BQUksU0FBUztBQUNiLE1BQUksU0FBUztBQUNiLE1BQUksVUFBVTtBQUNkLE1BQUksVUFBVTtBQUNkLE1BQUksZ0JBQWdCLEtBQUs7QUFDckIsVUFBTSxhQUFhO0FBQ25CLFVBQU0sV0FBVyxhQUFhO0FBQzlCLFVBQU0sU0FBUyxLQUFLLElBQUksVUFBVTtBQUNsQyxVQUFNLFNBQVMsS0FBSyxJQUFJLFVBQVU7QUFDbEMsVUFBTSxPQUFPLEtBQUssSUFBSSxRQUFRO0FBQzlCLFVBQU0sT0FBTyxLQUFLLElBQUksUUFBUTtBQUM5QixVQUFNLFVBQVUsQ0FBQyxPQUFPLEdBQUcsTUFBSSxjQUFjLE9BQU8sWUFBWSxVQUFVLElBQUksSUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHLElBQUksUUFBUSxHQUFHLElBQUksTUFBTTtBQUMzSCxVQUFNLFVBQVUsQ0FBQyxPQUFPLEdBQUcsTUFBSSxjQUFjLE9BQU8sWUFBWSxVQUFVLElBQUksSUFBSSxLQUFLLEtBQUssSUFBSSxHQUFHLElBQUksUUFBUSxHQUFHLElBQUksTUFBTTtBQUM1SCxVQUFNLE9BQU8sUUFBUSxHQUFHLFFBQVEsSUFBSTtBQUNwQyxVQUFNLE9BQU8sUUFBUSxTQUFTLFFBQVEsSUFBSTtBQUMxQyxVQUFNLE9BQU8sUUFBUSxJQUFJLFFBQVEsSUFBSTtBQUNyQyxVQUFNLE9BQU8sUUFBUSxLQUFLLFNBQVMsUUFBUSxJQUFJO0FBQy9DLGNBQVUsT0FBTyxRQUFRO0FBQ3pCLGNBQVUsT0FBTyxRQUFRO0FBQ3pCLGNBQVUsRUFBRSxPQUFPLFFBQVE7QUFDM0IsY0FBVSxFQUFFLE9BQU8sUUFBUTtBQUFBLEVBQzlCO0FBQ0QsU0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNSO0FBQ0E7QUFDQSxNQUFNLDJCQUEyQixrQkFBa0I7QUFBQSxFQXVFL0MsWUFBWSxPQUFPLGNBQWE7QUFDNUIsVUFBTSxPQUFPLFlBQVk7QUFDekIsU0FBSyxzQkFBc0I7QUFDM0IsU0FBSyxjQUFjO0FBQ25CLFNBQUssY0FBYztBQUNuQixTQUFLLFVBQVU7QUFDZixTQUFLLFVBQVU7QUFBQSxFQUNsQjtBQUFBLEVBQ0QsYUFBYTtBQUFBLEVBQUU7QUFBQSxFQUNsQixNQUFNLE9BQU8sT0FBTztBQUNiLFVBQU0sT0FBTyxLQUFLLFdBQVUsRUFBRztBQUMvQixVQUFNLE9BQU8sS0FBSztBQUNsQixRQUFJLEtBQUssYUFBYSxPQUFPO0FBQ3pCLFdBQUssVUFBVTtBQUFBLElBQzNCLE9BQWU7QUFDSCxVQUFJLFNBQVMsQ0FBQ08sT0FBSSxDQUFDLEtBQUtBO0FBQ3hCLFVBQUksU0FBUyxLQUFLLE1BQU0sR0FBRztBQUN2QixjQUFNLEVBQUUsTUFBSyxZQUFhLEtBQUs7QUFDL0IsaUJBQVMsQ0FBQ0EsT0FBSSxDQUFDLGlCQUFpQixLQUFLQSxLQUFJLEdBQUc7QUFBQSxNQUMvQztBQUNELFVBQUksR0FBRztBQUNQLFdBQUksSUFBSSxPQUFPLE9BQU8sUUFBUSxPQUFPLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDL0MsYUFBSyxRQUFRLEtBQUssT0FBTyxDQUFDO0FBQUEsTUFDN0I7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUFBLEVBQ0osZUFBZTtBQUNSLFdBQU8sVUFBVSxLQUFLLFFBQVEsV0FBVyxFQUFFO0FBQUEsRUFDOUM7QUFBQSxFQUNKLG9CQUFvQjtBQUNiLFdBQU8sVUFBVSxLQUFLLFFBQVEsYUFBYTtBQUFBLEVBQzlDO0FBQUEsRUFDSixzQkFBc0I7QUFDZixRQUFJLE1BQU07QUFDVixRQUFJLE1BQU0sQ0FBQztBQUNYLGFBQVEsSUFBSSxHQUFHLElBQUksS0FBSyxNQUFNLEtBQUssU0FBUyxRQUFRLEVBQUUsR0FBRTtBQUNwRCxVQUFJLEtBQUssTUFBTSxpQkFBaUIsQ0FBQyxLQUFLLEtBQUssTUFBTSxlQUFlLENBQUMsRUFBRSxTQUFTLEtBQUssT0FBTztBQUNwRixjQUFNLGFBQWEsS0FBSyxNQUFNLGVBQWUsQ0FBQyxFQUFFO0FBQ2hELGNBQU0sV0FBVyxXQUFXO0FBQzVCLGNBQU0sZ0JBQWdCLFdBQVc7QUFDakMsY0FBTSxLQUFLLElBQUksS0FBSyxRQUFRO0FBQzVCLGNBQU0sS0FBSyxJQUFJLEtBQUssV0FBVyxhQUFhO0FBQUEsTUFDL0M7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLE1BQ0gsVUFBVTtBQUFBLE1BQ1YsZUFBZSxNQUFNO0FBQUEsSUFDakM7QUFBQSxFQUNLO0FBQUEsRUFDSixPQUFPLE1BQU07QUFDTixVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLEVBQUUsVUFBWSxJQUFHO0FBQ3ZCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sVUFBVSxLQUFLLGtCQUFpQixJQUFLLEtBQUssYUFBYSxJQUFJLElBQUksS0FBSyxRQUFRO0FBQ2xGLFVBQU0sVUFBVSxLQUFLLEtBQUssS0FBSyxJQUFJLFVBQVUsT0FBTyxVQUFVLE1BQU0sSUFBSSxXQUFXLEdBQUcsQ0FBQztBQUN2RixVQUFNLFNBQVMsS0FBSyxJQUFJLGFBQWEsS0FBSyxRQUFRLFFBQVEsT0FBTyxHQUFHLENBQUM7QUFDckUsVUFBTSxjQUFjLEtBQUssZUFBZSxLQUFLLEtBQUs7QUFDbEQsVUFBTSxFQUFFLGVBQWdCLFNBQVcsSUFBRyxLQUFLLG9CQUFtQjtBQUM5RCxVQUFNLEVBQUUsUUFBUyxRQUFTLFNBQVUsWUFBYSxrQkFBa0IsVUFBVSxlQUFlLE1BQU07QUFDbEcsVUFBTSxZQUFZLFVBQVUsUUFBUSxXQUFXO0FBQy9DLFVBQU0sYUFBYSxVQUFVLFNBQVMsV0FBVztBQUNqRCxVQUFNLFlBQVksS0FBSyxJQUFJLEtBQUssSUFBSSxVQUFVLFNBQVMsSUFBSSxHQUFHLENBQUM7QUFDL0QsVUFBTSxjQUFjLFlBQVksS0FBSyxRQUFRLFFBQVEsU0FBUztBQUM5RCxVQUFNLGNBQWMsS0FBSyxJQUFJLGNBQWMsUUFBUSxDQUFDO0FBQ3BELFVBQU0sZ0JBQWdCLGNBQWMsZUFBZSxLQUFLLDhCQUE2QjtBQUNyRixTQUFLLFVBQVUsVUFBVTtBQUN6QixTQUFLLFVBQVUsVUFBVTtBQUN6QixTQUFLLFFBQVEsS0FBSztBQUNsQixTQUFLLGNBQWMsY0FBYyxlQUFlLEtBQUsscUJBQXFCLEtBQUssS0FBSztBQUNwRixTQUFLLGNBQWMsS0FBSyxJQUFJLEtBQUssY0FBYyxlQUFlLGFBQWEsQ0FBQztBQUM1RSxTQUFLLGVBQWUsTUFBTSxHQUFHLEtBQUssUUFBUSxJQUFJO0FBQUEsRUFDakQ7QUFBQSxFQUNKLGVBQWUsR0FBRyxPQUFPO0FBQ2xCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sZ0JBQWdCLEtBQUs7QUFDM0IsUUFBSSxTQUFTLEtBQUssVUFBVSxpQkFBaUIsQ0FBQyxLQUFLLE1BQU0sa0JBQWtCLENBQUMsS0FBSyxLQUFLLFFBQVEsT0FBTyxRQUFRLEtBQUssS0FBSyxHQUFHLFFBQVE7QUFDOUgsYUFBTztBQUFBLElBQ1Y7QUFDRCxXQUFPLEtBQUssdUJBQXVCLEtBQUssUUFBUSxLQUFLLGdCQUFnQixHQUFHO0FBQUEsRUFDM0U7QUFBQSxFQUNELGVBQWUsTUFBTSxPQUFPLE9BQU8sTUFBTTtBQUNyQyxVQUFNLFFBQVEsU0FBUztBQUN2QixVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLFlBQVksTUFBTTtBQUN4QixVQUFNLE9BQU8sTUFBTTtBQUNuQixVQUFNLGdCQUFnQixLQUFLO0FBQzNCLFVBQU0sV0FBVyxVQUFVLE9BQU8sVUFBVSxTQUFTO0FBQ3JELFVBQU0sV0FBVyxVQUFVLE1BQU0sVUFBVSxVQUFVO0FBQ3JELFVBQU0sZUFBZSxTQUFTLGNBQWM7QUFDNUMsVUFBTSxjQUFjLGVBQWUsSUFBSSxLQUFLO0FBQzVDLFVBQU0sY0FBYyxlQUFlLElBQUksS0FBSztBQUM1QyxVQUFNLEVBQUUsZUFBZ0IsZUFBaUIsSUFBRyxLQUFLLGtCQUFrQixPQUFPLElBQUk7QUFDOUUsUUFBSSxhQUFhLEtBQUs7QUFDdEIsUUFBSTtBQUNKLFNBQUksSUFBSSxHQUFHLElBQUksT0FBTyxFQUFFLEdBQUU7QUFDdEIsb0JBQWMsS0FBSyxlQUFlLEdBQUcsS0FBSztBQUFBLElBQzdDO0FBQ0QsU0FBSSxJQUFJLE9BQU8sSUFBSSxRQUFRLE9BQU8sRUFBRSxHQUFFO0FBQ2xDLFlBQU0sZ0JBQWdCLEtBQUssZUFBZSxHQUFHLEtBQUs7QUFDbEQsWUFBTSxNQUFNLEtBQUs7QUFDakIsWUFBTSxhQUFhO0FBQUEsUUFDZixHQUFHLFVBQVUsS0FBSztBQUFBLFFBQ2xCLEdBQUcsVUFBVSxLQUFLO0FBQUEsUUFDbEI7QUFBQSxRQUNBLFVBQVUsYUFBYTtBQUFBLFFBQ3ZCO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNoQjtBQUNZLFVBQUksZ0JBQWdCO0FBQ2hCLG1CQUFXLFVBQVUsaUJBQWlCLEtBQUssMEJBQTBCLEdBQUcsSUFBSSxTQUFTLFdBQVcsSUFBSTtBQUFBLE1BQ3ZHO0FBQ0Qsb0JBQWM7QUFDZCxXQUFLLGNBQWMsS0FBSyxHQUFHLFlBQVksSUFBSTtBQUFBLElBQzlDO0FBQUEsRUFDSjtBQUFBLEVBQ0QsaUJBQWlCO0FBQ2IsVUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBTSxXQUFXLEtBQUs7QUFDdEIsUUFBSSxRQUFRO0FBQ1osUUFBSTtBQUNKLFNBQUksSUFBSSxHQUFHLElBQUksU0FBUyxRQUFRLEtBQUk7QUFDaEMsWUFBTSxRQUFRLEtBQUssUUFBUTtBQUMzQixVQUFJLFVBQVUsUUFBUSxDQUFDLE1BQU0sS0FBSyxLQUFLLEtBQUssTUFBTSxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLFFBQVE7QUFDM0YsaUJBQVMsS0FBSyxJQUFJLEtBQUs7QUFBQSxNQUMxQjtBQUFBLElBQ0o7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsdUJBQXVCLE9BQU87QUFDMUIsVUFBTSxRQUFRLEtBQUssWUFBWTtBQUMvQixRQUFJLFFBQVEsS0FBSyxDQUFDLE1BQU0sS0FBSyxHQUFHO0FBQzVCLGFBQU8sT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJO0FBQUEsSUFDbkM7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsaUJBQWlCLE9BQU87QUFDcEIsVUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxTQUFTLE1BQU0sS0FBSyxVQUFVO0FBQ3BDLFVBQU0sUUFBUSxhQUFhLEtBQUssUUFBUSxRQUFRLE1BQU0sUUFBUSxNQUFNO0FBQ3BFLFdBQU87QUFBQSxNQUNILE9BQU8sT0FBTyxVQUFVO0FBQUEsTUFDeEI7QUFBQSxJQUNaO0FBQUEsRUFDSztBQUFBLEVBQ0Qsa0JBQWtCLE1BQU07QUFDcEIsUUFBSSxNQUFNO0FBQ1YsVUFBTSxRQUFRLEtBQUs7QUFDbkIsUUFBSSxHQUFHLE1BQU0sTUFBTSxZQUFZO0FBQy9CLFFBQUksQ0FBQyxNQUFNO0FBQ1AsV0FBSSxJQUFJLEdBQUcsT0FBTyxNQUFNLEtBQUssU0FBUyxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDeEQsWUFBSSxNQUFNLGlCQUFpQixDQUFDLEdBQUc7QUFDM0IsaUJBQU8sTUFBTSxlQUFlLENBQUM7QUFDN0IsaUJBQU8sS0FBSztBQUNaLHVCQUFhLEtBQUs7QUFDbEI7QUFBQSxRQUNIO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFDRCxRQUFJLENBQUMsTUFBTTtBQUNQLGFBQU87QUFBQSxJQUNWO0FBQ0QsU0FBSSxJQUFJLEdBQUcsT0FBTyxLQUFLLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUN6QyxnQkFBVSxXQUFXLDBCQUEwQixDQUFDO0FBQ2hELFVBQUksUUFBUSxnQkFBZ0IsU0FBUztBQUNqQyxjQUFNLEtBQUssSUFBSSxLQUFLLFFBQVEsZUFBZSxHQUFHLFFBQVEsb0JBQW9CLENBQUM7QUFBQSxNQUM5RTtBQUFBLElBQ0o7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsYUFBYSxNQUFNO0FBQ2YsUUFBSSxNQUFNO0FBQ1YsYUFBUSxJQUFJLEdBQUcsT0FBTyxLQUFLLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUM3QyxZQUFNLFVBQVUsS0FBSywwQkFBMEIsQ0FBQztBQUNoRCxZQUFNLEtBQUssSUFBSSxLQUFLLFFBQVEsVUFBVSxHQUFHLFFBQVEsZUFBZSxDQUFDO0FBQUEsSUFDcEU7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0oscUJBQXFCLGNBQWM7QUFDNUIsUUFBSSxtQkFBbUI7QUFDdkIsYUFBUSxJQUFJLEdBQUcsSUFBSSxjQUFjLEVBQUUsR0FBRTtBQUNqQyxVQUFJLEtBQUssTUFBTSxpQkFBaUIsQ0FBQyxHQUFHO0FBQ2hDLDRCQUFvQixLQUFLLGVBQWUsQ0FBQztBQUFBLE1BQzVDO0FBQUEsSUFDSjtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixlQUFlLGNBQWM7QUFDdEIsV0FBTyxLQUFLLElBQUksZUFBZSxLQUFLLE1BQU0sS0FBSyxTQUFTLGNBQWMsUUFBUSxDQUFDLEdBQUcsQ0FBQztBQUFBLEVBQ3RGO0FBQUEsRUFDSixnQ0FBZ0M7QUFDekIsV0FBTyxLQUFLLHFCQUFxQixLQUFLLE1BQU0sS0FBSyxTQUFTLE1BQU0sS0FBSztBQUFBLEVBQ3hFO0FBQ0w7QUExUUksY0FERSxvQkFDSyxNQUFLO0FBQ2YsY0FGSyxvQkFFRSxZQUFXO0FBQUEsRUFDWCxvQkFBb0I7QUFBQSxFQUNwQixpQkFBaUI7QUFBQSxFQUNqQixXQUFXO0FBQUEsSUFDUCxlQUFlO0FBQUEsSUFDZixjQUFjO0FBQUEsRUFDakI7QUFBQSxFQUNELFlBQVk7QUFBQSxJQUNSLFNBQVM7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLFlBQVk7QUFBQSxRQUNSO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsTUFDSDtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFDRCxRQUFRO0FBQUEsRUFDUixVQUFVO0FBQUEsRUFDVixlQUFlO0FBQUEsRUFDZixRQUFRO0FBQUEsRUFDUixTQUFTO0FBQUEsRUFDVCxXQUFXO0FBQ25CO0FBQ0ksY0FqQ0Usb0JBaUNLLGVBQWM7QUFBQSxFQUNqQixhQUFhLENBQUNQLFVBQU9BLFVBQVM7QUFBQSxFQUM5QixZQUFZLENBQUNBLFVBQU9BLFVBQVM7QUFDckM7QUFDQyxjQXJDSyxvQkFxQ0UsYUFBWTtBQUFBLEVBQ1osYUFBYTtBQUFBLEVBQ2IsU0FBUztBQUFBLElBQ0wsUUFBUTtBQUFBLE1BQ0osUUFBUTtBQUFBLFFBQ0osZUFBZ0IsT0FBTztBQUNuQixnQkFBTSxPQUFPLE1BQU07QUFDbkIsY0FBSSxLQUFLLE9BQU8sVUFBVSxLQUFLLFNBQVMsUUFBUTtBQUM1QyxrQkFBTSxFQUFFLFFBQVEsRUFBRSxZQUFhLGNBQVEsTUFBTSxNQUFNLE9BQU87QUFDMUQsbUJBQU8sS0FBSyxPQUFPLElBQUksQ0FBQyxPQUFPLE1BQUk7QUFDL0Isb0JBQU0sT0FBTyxNQUFNLGVBQWUsQ0FBQztBQUNuQyxvQkFBTSxRQUFRLEtBQUssV0FBVyxTQUFTLENBQUM7QUFDeEMscUJBQU87QUFBQSxnQkFDSCxNQUFNO0FBQUEsZ0JBQ04sV0FBVyxNQUFNO0FBQUEsZ0JBQ2pCLGFBQWEsTUFBTTtBQUFBLGdCQUNuQixXQUFXSjtBQUFBLGdCQUNYLFdBQVcsTUFBTTtBQUFBLGdCQUNqQjtBQUFBLGdCQUNBLFFBQVEsQ0FBQyxNQUFNLGtCQUFrQixDQUFDO0FBQUEsZ0JBQ2xDLE9BQU87QUFBQSxjQUMzQztBQUFBLFlBQ0EsQ0FBNkI7QUFBQSxVQUNKO0FBQ0QsaUJBQU87UUFDVjtBQUFBLE1BQ0o7QUFBQSxNQUNELFFBQVMsR0FBRyxZQUFZLFFBQVE7QUFDNUIsZUFBTyxNQUFNLHFCQUFxQixXQUFXLEtBQUs7QUFDbEQsZUFBTyxNQUFNO01BQ2hCO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFDVDtBQXdlQSxNQUFNLHNCQUFzQixtQkFBbUI7QUFRL0M7QUFQSSxjQURFLGVBQ0ssTUFBSztBQUNmLGNBRkssZUFFRSxZQUFXO0FBQUEsRUFDWCxRQUFRO0FBQUEsRUFDUixVQUFVO0FBQUEsRUFDVixlQUFlO0FBQUEsRUFDZixRQUFRO0FBQ2hCO0FBc05JLFNBQVMsV0FBVztBQUNwQixRQUFNLElBQUksTUFBTSxpRkFBaUY7QUFDckc7QUFNSSxNQUFNLGdCQUFnQjtBQUFBLEVBVXBCLE9BQU8sU0FBUyxTQUFTO0FBQ3ZCLFdBQU8sT0FBTyxnQkFBZ0IsV0FBVyxPQUFPO0FBQUEsRUFDbkQ7QUFBQSxFQUNELFlBQVksU0FBUTtBQUNoQixTQUFLLFVBQVUsV0FBVztFQUM3QjtBQUFBLEVBRUQsT0FBTztBQUFBLEVBQUU7QUFBQSxFQUNULFVBQVU7QUFDTixXQUFPLFNBQVE7QUFBQSxFQUNsQjtBQUFBLEVBQ0QsUUFBUTtBQUNKLFdBQU8sU0FBUTtBQUFBLEVBQ2xCO0FBQUEsRUFDRCxTQUFTO0FBQ0wsV0FBTyxTQUFRO0FBQUEsRUFDbEI7QUFBQSxFQUNELE1BQU07QUFDRixXQUFPLFNBQVE7QUFBQSxFQUNsQjtBQUFBLEVBQ0QsT0FBTztBQUNILFdBQU8sU0FBUTtBQUFBLEVBQ2xCO0FBQUEsRUFDRCxVQUFVO0FBQ04sV0FBTyxTQUFRO0FBQUEsRUFDbEI7QUFBQSxFQUNELFFBQVE7QUFDSixXQUFPLFNBQVE7QUFBQSxFQUNsQjtBQUNMO0FBQ0EsSUFBSSxXQUFXO0FBQUEsRUFDWCxPQUFPO0FBQ1g7QUFFQSxTQUFTLGFBQWEsU0FBUyxNQUFNLE9BQU8sV0FBVztBQUNuRCxRQUFNLEVBQUUsWUFBYSxNQUFPLFFBQU8sSUFBTTtBQUN6QyxRQUFNLFNBQVMsV0FBVyxZQUFZO0FBQ3RDLE1BQUksVUFBVSxTQUFTLE9BQU8sUUFBUSxTQUFTLE9BQU8sV0FBVyxLQUFLLFFBQVE7QUFDMUUsVUFBTSxlQUFlLE9BQU8saUJBQWlCLGdCQUFnQjtBQUM3RCxRQUFJLENBQUMsV0FBVztBQUNaLGFBQU8sYUFBYSxNQUFNLE1BQU0sS0FBSztBQUFBLElBQ2pELFdBQW1CLFdBQVcsZ0JBQWdCO0FBQ2xDLFlBQU0sS0FBSyxLQUFLO0FBQ2hCLFlBQU0sUUFBUSxPQUFPLEdBQUcsYUFBYSxjQUFjLEdBQUcsU0FBUyxJQUFJO0FBQ25FLFVBQUksT0FBTztBQUNQLGNBQU0sUUFBUSxhQUFhLE1BQU0sTUFBTSxRQUFRLEtBQUs7QUFDcEQsY0FBTSxNQUFNLGFBQWEsTUFBTSxNQUFNLFFBQVEsS0FBSztBQUNsRCxlQUFPO0FBQUEsVUFDSCxJQUFJLE1BQU07QUFBQSxVQUNWLElBQUksSUFBSTtBQUFBLFFBQzVCO0FBQUEsTUFDYTtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUFBLElBQ0gsSUFBSTtBQUFBLElBQ0osSUFBSSxLQUFLLFNBQVM7QUFBQSxFQUMxQjtBQUNBO0FBQ0MsU0FBUyx5QkFBeUIsT0FBTyxNQUFNLFVBQVUsU0FBUyxXQUFXO0FBQzFFLFFBQU0sV0FBVyxNQUFNO0FBQ3ZCLFFBQU0sUUFBUSxTQUFTO0FBQ3ZCLFdBQVEsSUFBSSxHQUFHLE9BQU8sU0FBUyxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDakQsVUFBTSxFQUFFLE9BQVEsS0FBTyxJQUFHLFNBQVM7QUFDbkMsVUFBTSxFQUFFLElBQUssR0FBSyxJQUFHLGFBQWEsU0FBUyxJQUFJLE1BQU0sT0FBTyxTQUFTO0FBQ3JFLGFBQVEsSUFBSSxJQUFJLEtBQUssSUFBSSxFQUFFLEdBQUU7QUFDekIsWUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBSSxDQUFDLFFBQVEsTUFBTTtBQUNmLGdCQUFRLFNBQVMsT0FBTyxDQUFDO0FBQUEsTUFDNUI7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNMO0FBQ0MsU0FBUyx5QkFBeUIsTUFBTTtBQUNyQyxRQUFNLE9BQU8sS0FBSyxRQUFRLEdBQUcsTUFBTTtBQUNuQyxRQUFNLE9BQU8sS0FBSyxRQUFRLEdBQUcsTUFBTTtBQUNuQyxTQUFPLFNBQVMsS0FBSyxLQUFLO0FBQ3RCLFVBQU0sU0FBUyxPQUFPLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUk7QUFDaEQsVUFBTSxTQUFTLE9BQU8sS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSTtBQUNoRCxXQUFPLEtBQUssS0FBSyxLQUFLLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxJQUFJLFFBQVEsQ0FBQyxDQUFDO0FBQUEsRUFDbEU7QUFDQTtBQUNDLFNBQVMsa0JBQWtCLE9BQU8sVUFBVSxNQUFNLGtCQUFrQixrQkFBa0I7QUFDbkYsUUFBTSxRQUFRO0FBQ2QsTUFBSSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sY0FBYyxRQUFRLEdBQUc7QUFDckQsV0FBTztBQUFBLEVBQ1Y7QUFDRCxRQUFNLGlCQUFpQixTQUFTLFNBQVMsY0FBYyxPQUFPO0FBQzFELFFBQUksQ0FBQyxvQkFBb0IsQ0FBQyxlQUFlLFNBQVMsTUFBTSxXQUFXLENBQUMsR0FBRztBQUNuRTtBQUFBLElBQ0g7QUFDRCxRQUFJLFFBQVEsUUFBUSxTQUFTLEdBQUcsU0FBUyxHQUFHLGdCQUFnQixHQUFHO0FBQzNELFlBQU0sS0FBSztBQUFBLFFBQ1A7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ2hCLENBQWE7QUFBQSxJQUNKO0FBQUEsRUFDVDtBQUNJLDJCQUF5QixPQUFPLE1BQU0sVUFBVSxnQkFBZ0IsSUFBSTtBQUNwRSxTQUFPO0FBQ1g7QUFDQyxTQUFTLHNCQUFzQixPQUFPLFVBQVUsTUFBTSxrQkFBa0I7QUFDckUsTUFBSSxRQUFRO0FBQ1osV0FBUyxlQUFlLFNBQVMsY0FBYyxPQUFPO0FBQ2xELFVBQU0sRUFBRSxZQUFhLGFBQWMsUUFBUSxTQUFTO0FBQUEsTUFDaEQ7QUFBQSxNQUNBO0FBQUEsSUFDSCxHQUFFLGdCQUFnQjtBQUNuQixVQUFNLEVBQUUsTUFBSyxJQUFNLGtCQUFrQixTQUFTO0FBQUEsTUFDMUMsR0FBRyxTQUFTO0FBQUEsTUFDWixHQUFHLFNBQVM7QUFBQSxJQUN4QixDQUFTO0FBQ0QsUUFBSSxjQUFjLE9BQU8sWUFBWSxRQUFRLEdBQUc7QUFDNUMsWUFBTSxLQUFLO0FBQUEsUUFDUDtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsTUFDaEIsQ0FBYTtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0QsMkJBQXlCLE9BQU8sTUFBTSxVQUFVLGNBQWM7QUFDOUQsU0FBTztBQUNYO0FBQ0MsU0FBUyx5QkFBeUIsT0FBTyxVQUFVLE1BQU0sV0FBVyxrQkFBa0Isa0JBQWtCO0FBQ3JHLE1BQUksUUFBUTtBQUNaLFFBQU0saUJBQWlCLHlCQUF5QixJQUFJO0FBQ3BELE1BQUksY0FBYyxPQUFPO0FBQ3pCLFdBQVMsZUFBZSxTQUFTLGNBQWMsT0FBTztBQUNsRCxVQUFNWSxXQUFVLFFBQVEsUUFBUSxTQUFTLEdBQUcsU0FBUyxHQUFHLGdCQUFnQjtBQUN4RSxRQUFJLGFBQWEsQ0FBQ0EsVUFBUztBQUN2QjtBQUFBLElBQ0g7QUFDRCxVQUFNLFNBQVMsUUFBUSxlQUFlLGdCQUFnQjtBQUN0RCxVQUFNLGNBQWMsQ0FBQyxDQUFDLG9CQUFvQixNQUFNLGNBQWMsTUFBTTtBQUNwRSxRQUFJLENBQUMsZUFBZSxDQUFDQSxVQUFTO0FBQzFCO0FBQUEsSUFDSDtBQUNELFVBQU0sV0FBVyxlQUFlLFVBQVUsTUFBTTtBQUNoRCxRQUFJLFdBQVcsYUFBYTtBQUN4QixjQUFRO0FBQUEsUUFDSjtBQUFBLFVBQ0k7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBLFFBQ0g7QUFBQSxNQUNqQjtBQUNZLG9CQUFjO0FBQUEsSUFDMUIsV0FBbUIsYUFBYSxhQUFhO0FBQ2pDLFlBQU0sS0FBSztBQUFBLFFBQ1A7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ2hCLENBQWE7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNELDJCQUF5QixPQUFPLE1BQU0sVUFBVSxjQUFjO0FBQzlELFNBQU87QUFDWDtBQUNDLFNBQVMsZ0JBQWdCLE9BQU8sVUFBVSxNQUFNLFdBQVcsa0JBQWtCLGtCQUFrQjtBQUM1RixNQUFJLENBQUMsb0JBQW9CLENBQUMsTUFBTSxjQUFjLFFBQVEsR0FBRztBQUNyRCxXQUFPO0VBQ1Y7QUFDRCxTQUFPLFNBQVMsT0FBTyxDQUFDLFlBQVksc0JBQXNCLE9BQU8sVUFBVSxNQUFNLGdCQUFnQixJQUFJLHlCQUF5QixPQUFPLFVBQVUsTUFBTSxXQUFXLGtCQUFrQixnQkFBZ0I7QUFDdE07QUFDQyxTQUFTLGFBQWEsT0FBTyxVQUFVLE1BQU0sV0FBVyxrQkFBa0I7QUFDdkUsUUFBTSxRQUFRO0FBQ2QsUUFBTSxjQUFjLFNBQVMsTUFBTSxhQUFhO0FBQ2hELE1BQUksaUJBQWlCO0FBQ3JCLDJCQUF5QixPQUFPLE1BQU0sVUFBVSxDQUFDLFNBQVMsY0FBYyxVQUFRO0FBQzVFLFFBQUksUUFBUSxhQUFhLFNBQVMsT0FBTyxnQkFBZ0IsR0FBRztBQUN4RCxZQUFNLEtBQUs7QUFBQSxRQUNQO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNoQixDQUFhO0FBQ0QsdUJBQWlCLGtCQUFrQixRQUFRLFFBQVEsU0FBUyxHQUFHLFNBQVMsR0FBRyxnQkFBZ0I7QUFBQSxJQUM5RjtBQUFBLEVBQ1QsQ0FBSztBQUNELE1BQUksYUFBYSxDQUFDLGdCQUFnQjtBQUM5QixXQUFPO0VBQ1Y7QUFDRCxTQUFPO0FBQ1g7QUFDQyxJQUFJLGNBQWM7QUFBQSxFQUNmO0FBQUEsRUFDQSxPQUFPO0FBQUEsSUFDVixNQUFPLE9BQU8sR0FBRyxTQUFTLGtCQUFrQjtBQUNqQyxZQUFNLFdBQVcsb0JBQW9CLEdBQUcsS0FBSztBQUM3QyxZQUFNLE9BQU8sUUFBUSxRQUFRO0FBQzdCLFlBQU0sbUJBQW1CLFFBQVEsb0JBQW9CO0FBQ3JELFlBQU0sUUFBUSxRQUFRLFlBQVksa0JBQWtCLE9BQU8sVUFBVSxNQUFNLGtCQUFrQixnQkFBZ0IsSUFBSSxnQkFBZ0IsT0FBTyxVQUFVLE1BQU0sT0FBTyxrQkFBa0IsZ0JBQWdCO0FBQ2pNLFlBQU0sV0FBVztBQUNqQixVQUFJLENBQUMsTUFBTSxRQUFRO0FBQ2YsZUFBTztNQUNWO0FBQ0QsWUFBTSw2QkFBNEIsRUFBRyxRQUFRLENBQUMsU0FBTztBQUNqRCxjQUFNLFFBQVEsTUFBTSxHQUFHO0FBQ3ZCLGNBQU0sVUFBVSxLQUFLLEtBQUs7QUFDMUIsWUFBSSxXQUFXLENBQUMsUUFBUSxNQUFNO0FBQzFCLG1CQUFTLEtBQUs7QUFBQSxZQUNWO0FBQUEsWUFDQSxjQUFjLEtBQUs7QUFBQSxZQUNuQjtBQUFBLFVBQ3hCLENBQXFCO0FBQUEsUUFDSjtBQUFBLE1BQ2pCLENBQWE7QUFDRCxhQUFPO0FBQUEsSUFDVjtBQUFBLElBQ1IsUUFBUyxPQUFPLEdBQUcsU0FBUyxrQkFBa0I7QUFDbkMsWUFBTSxXQUFXLG9CQUFvQixHQUFHLEtBQUs7QUFDN0MsWUFBTSxPQUFPLFFBQVEsUUFBUTtBQUM3QixZQUFNLG1CQUFtQixRQUFRLG9CQUFvQjtBQUNyRCxVQUFJLFFBQVEsUUFBUSxZQUFZLGtCQUFrQixPQUFPLFVBQVUsTUFBTSxrQkFBa0IsZ0JBQWdCLElBQUksZ0JBQWdCLE9BQU8sVUFBVSxNQUFNLE9BQU8sa0JBQWtCLGdCQUFnQjtBQUMvTCxVQUFJLE1BQU0sU0FBUyxHQUFHO0FBQ2xCLGNBQU0sZUFBZSxNQUFNLEdBQUc7QUFDOUIsY0FBTSxPQUFPLE1BQU0sZUFBZSxZQUFZLEVBQUU7QUFDaEQsZ0JBQVE7QUFDUixpQkFBUSxJQUFJLEdBQUcsSUFBSSxLQUFLLFFBQVEsRUFBRSxHQUFFO0FBQ2hDLGdCQUFNLEtBQUs7QUFBQSxZQUNQLFNBQVMsS0FBSztBQUFBLFlBQ2Q7QUFBQSxZQUNBLE9BQU87QUFBQSxVQUMvQixDQUFxQjtBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBQ0QsYUFBTztBQUFBLElBQ1Y7QUFBQSxJQUNSLE1BQU8sT0FBTyxHQUFHLFNBQVMsa0JBQWtCO0FBQ2pDLFlBQU0sV0FBVyxvQkFBb0IsR0FBRyxLQUFLO0FBQzdDLFlBQU0sT0FBTyxRQUFRLFFBQVE7QUFDN0IsWUFBTSxtQkFBbUIsUUFBUSxvQkFBb0I7QUFDckQsYUFBTyxrQkFBa0IsT0FBTyxVQUFVLE1BQU0sa0JBQWtCLGdCQUFnQjtBQUFBLElBQ3JGO0FBQUEsSUFDUixRQUFTLE9BQU8sR0FBRyxTQUFTLGtCQUFrQjtBQUNuQyxZQUFNLFdBQVcsb0JBQW9CLEdBQUcsS0FBSztBQUM3QyxZQUFNLE9BQU8sUUFBUSxRQUFRO0FBQzdCLFlBQU0sbUJBQW1CLFFBQVEsb0JBQW9CO0FBQ3JELGFBQU8sZ0JBQWdCLE9BQU8sVUFBVSxNQUFNLFFBQVEsV0FBVyxrQkFBa0IsZ0JBQWdCO0FBQUEsSUFDdEc7QUFBQSxJQUNSLEVBQUcsT0FBTyxHQUFHLFNBQVMsa0JBQWtCO0FBQzdCLFlBQU0sV0FBVyxvQkFBb0IsR0FBRyxLQUFLO0FBQzdDLGFBQU8sYUFBYSxPQUFPLFVBQVUsS0FBSyxRQUFRLFdBQVcsZ0JBQWdCO0FBQUEsSUFDaEY7QUFBQSxJQUNSLEVBQUcsT0FBTyxHQUFHLFNBQVMsa0JBQWtCO0FBQzdCLFlBQU0sV0FBVyxvQkFBb0IsR0FBRyxLQUFLO0FBQzdDLGFBQU8sYUFBYSxPQUFPLFVBQVUsS0FBSyxRQUFRLFdBQVcsZ0JBQWdCO0FBQUEsSUFDaEY7QUFBQSxFQUNKO0FBQ0w7QUFFQSxNQUFNLG1CQUFtQjtBQUFBLEVBQ3JCO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0o7QUFDQSxTQUFTLGlCQUFpQixPQUFPLFVBQVU7QUFDdkMsU0FBTyxNQUFNLE9BQU8sQ0FBQyxNQUFJLEVBQUUsUUFBUSxRQUFRO0FBQy9DO0FBQ0EsU0FBUyw0QkFBNEIsT0FBTyxNQUFNO0FBQzlDLFNBQU8sTUFBTSxPQUFPLENBQUMsTUFBSSxpQkFBaUIsUUFBUSxFQUFFLEdBQUcsTUFBTSxNQUFNLEVBQUUsSUFBSSxTQUFTLElBQUk7QUFDMUY7QUFDQSxTQUFTLGFBQWEsT0FBTyxTQUFTO0FBQ2xDLFNBQU8sTUFBTSxLQUFLLENBQUMsR0FBRyxNQUFJO0FBQ3RCLFVBQU0sS0FBSyxVQUFVLElBQUk7QUFDekIsVUFBTSxLQUFLLFVBQVUsSUFBSTtBQUN6QixXQUFPLEdBQUcsV0FBVyxHQUFHLFNBQVMsR0FBRyxRQUFRLEdBQUcsUUFBUSxHQUFHLFNBQVMsR0FBRztBQUFBLEVBQzlFLENBQUs7QUFDTDtBQUNBLFNBQVMsVUFBVSxPQUFPO0FBQ3RCLFFBQU0sY0FBYztBQUNwQixNQUFJLEdBQUcsTUFBTSxLQUFLLEtBQUssT0FBTztBQUM5QixPQUFJLElBQUksR0FBRyxRQUFRLFNBQVMsSUFBSSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDbEQsVUFBTSxNQUFNO0FBQ1osS0FBQyxFQUFFLFVBQVUsS0FBTSxTQUFTLEVBQUUsT0FBUSxjQUFhLElBQU8sSUFBRztBQUM3RCxnQkFBWSxLQUFLO0FBQUEsTUFDYixPQUFPO0FBQUEsTUFDUDtBQUFBLE1BQ0E7QUFBQSxNQUNBLFlBQVksSUFBSSxhQUFjO0FBQUEsTUFDOUIsUUFBUSxJQUFJO0FBQUEsTUFDWixPQUFPLFNBQVMsTUFBTTtBQUFBLE1BQ3RCO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsWUFBWUMsVUFBUztBQUMxQixRQUFNLFNBQVM7QUFDZixhQUFXLFFBQVFBLFVBQVE7QUFDdkIsVUFBTSxFQUFFLE9BQVEsS0FBTSxZQUFXLElBQU07QUFDdkMsUUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsU0FBUyxHQUFHLEdBQUc7QUFDM0M7QUFBQSxJQUNIO0FBQ0QsVUFBTSxTQUFTLE9BQU8sV0FBVyxPQUFPLFNBQVM7QUFBQSxNQUM3QyxPQUFPO0FBQUEsTUFDUCxRQUFRO0FBQUEsTUFDUixRQUFRO0FBQUEsTUFDUixNQUFNO0FBQUEsSUFDbEI7QUFDUSxXQUFPO0FBQ1AsV0FBTyxVQUFVO0FBQUEsRUFDcEI7QUFDRCxTQUFPO0FBQ1g7QUFDQyxTQUFTLGNBQWNBLFVBQVMsUUFBUTtBQUNyQyxRQUFNLFNBQVMsWUFBWUEsUUFBTztBQUNsQyxRQUFNLEVBQUUsY0FBZSxjQUFnQixJQUFHO0FBQzFDLE1BQUksR0FBRyxNQUFNO0FBQ2IsT0FBSSxJQUFJLEdBQUcsT0FBT0EsU0FBUSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDNUMsYUFBU0EsU0FBUTtBQUNqQixVQUFNLEVBQUUsU0FBUSxJQUFNLE9BQU87QUFDN0IsVUFBTSxRQUFRLE9BQU8sT0FBTztBQUM1QixVQUFNLFNBQVMsU0FBUyxPQUFPLGNBQWMsTUFBTTtBQUNuRCxRQUFJLE9BQU8sWUFBWTtBQUNuQixhQUFPLFFBQVEsU0FBUyxTQUFTLGVBQWUsWUFBWSxPQUFPO0FBQ25FLGFBQU8sU0FBUztBQUFBLElBQzVCLE9BQWU7QUFDSCxhQUFPLFFBQVE7QUFDZixhQUFPLFNBQVMsU0FBUyxTQUFTLGdCQUFnQixZQUFZLE9BQU87QUFBQSxJQUN4RTtBQUFBLEVBQ0o7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLGlCQUFpQixPQUFPO0FBQzdCLFFBQU0sY0FBYyxVQUFVLEtBQUs7QUFDbkMsUUFBTSxXQUFXLGFBQWEsWUFBWSxPQUFPLENBQUMsU0FBTyxLQUFLLElBQUksUUFBUSxHQUFHLElBQUk7QUFDakYsUUFBTSxPQUFPLGFBQWEsaUJBQWlCLGFBQWEsTUFBTSxHQUFHLElBQUk7QUFDckUsUUFBTSxRQUFRLGFBQWEsaUJBQWlCLGFBQWEsT0FBTyxDQUFDO0FBQ2pFLFFBQU0sTUFBTSxhQUFhLGlCQUFpQixhQUFhLEtBQUssR0FBRyxJQUFJO0FBQ25FLFFBQU0sU0FBUyxhQUFhLGlCQUFpQixhQUFhLFFBQVEsQ0FBQztBQUNuRSxRQUFNLG1CQUFtQiw0QkFBNEIsYUFBYSxHQUFHO0FBQ3JFLFFBQU0saUJBQWlCLDRCQUE0QixhQUFhLEdBQUc7QUFDbkUsU0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBLFlBQVksS0FBSyxPQUFPLEdBQUc7QUFBQSxJQUMzQixnQkFBZ0IsTUFBTSxPQUFPLGNBQWMsRUFBRSxPQUFPLE1BQU0sRUFBRSxPQUFPLGdCQUFnQjtBQUFBLElBQ25GLFdBQVcsaUJBQWlCLGFBQWEsV0FBVztBQUFBLElBQ3BELFVBQVUsS0FBSyxPQUFPLEtBQUssRUFBRSxPQUFPLGNBQWM7QUFBQSxJQUNsRCxZQUFZLElBQUksT0FBTyxNQUFNLEVBQUUsT0FBTyxnQkFBZ0I7QUFBQSxFQUM5RDtBQUNBO0FBQ0EsU0FBUyxlQUFlLFlBQVksV0FBVyxHQUFHLEdBQUc7QUFDakQsU0FBTyxLQUFLLElBQUksV0FBVyxJQUFJLFVBQVUsRUFBRSxJQUFJLEtBQUssSUFBSSxXQUFXLElBQUksVUFBVSxFQUFFO0FBQ3ZGO0FBQ0EsU0FBUyxpQkFBaUIsWUFBWSxZQUFZO0FBQzlDLGFBQVcsTUFBTSxLQUFLLElBQUksV0FBVyxLQUFLLFdBQVcsR0FBRztBQUN4RCxhQUFXLE9BQU8sS0FBSyxJQUFJLFdBQVcsTUFBTSxXQUFXLElBQUk7QUFDM0QsYUFBVyxTQUFTLEtBQUssSUFBSSxXQUFXLFFBQVEsV0FBVyxNQUFNO0FBQ2pFLGFBQVcsUUFBUSxLQUFLLElBQUksV0FBVyxPQUFPLFdBQVcsS0FBSztBQUNsRTtBQUNBLFNBQVMsV0FBVyxXQUFXLFFBQVEsUUFBUSxRQUFRO0FBQ25ELFFBQU0sRUFBRSxLQUFNLElBQU0sSUFBRztBQUN2QixRQUFNLGFBQWEsVUFBVTtBQUM3QixNQUFJLENBQUMsU0FBUyxHQUFHLEdBQUc7QUFDaEIsUUFBSSxPQUFPLE1BQU07QUFDYixnQkFBVSxRQUFRLE9BQU87QUFBQSxJQUM1QjtBQUNELFVBQU0sUUFBUSxPQUFPLE9BQU8sVUFBVTtBQUFBLE1BQ2xDLE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxJQUNuQjtBQUNRLFVBQU0sT0FBTyxLQUFLLElBQUksTUFBTSxNQUFNLE9BQU8sYUFBYSxJQUFJLFNBQVMsSUFBSSxLQUFLO0FBQzVFLFdBQU8sT0FBTyxNQUFNLE9BQU8sTUFBTTtBQUNqQyxjQUFVLFFBQVEsT0FBTztBQUFBLEVBQzVCO0FBQ0QsTUFBSSxJQUFJLFlBQVk7QUFDaEIscUJBQWlCLFlBQVksSUFBSSxXQUFZO0FBQUEsRUFDaEQ7QUFDRCxRQUFNLFdBQVcsS0FBSyxJQUFJLEdBQUcsT0FBTyxhQUFhLGVBQWUsWUFBWSxXQUFXLFFBQVEsT0FBTyxDQUFDO0FBQ3ZHLFFBQU0sWUFBWSxLQUFLLElBQUksR0FBRyxPQUFPLGNBQWMsZUFBZSxZQUFZLFdBQVcsT0FBTyxRQUFRLENBQUM7QUFDekcsUUFBTSxlQUFlLGFBQWEsVUFBVTtBQUM1QyxRQUFNLGdCQUFnQixjQUFjLFVBQVU7QUFDOUMsWUFBVSxJQUFJO0FBQ2QsWUFBVSxJQUFJO0FBQ2QsU0FBTyxPQUFPLGFBQWE7QUFBQSxJQUN2QixNQUFNO0FBQUEsSUFDTixPQUFPO0FBQUEsRUFDZixJQUFRO0FBQUEsSUFDQSxNQUFNO0FBQUEsSUFDTixPQUFPO0FBQUEsRUFDZjtBQUNBO0FBQ0EsU0FBUyxpQkFBaUIsV0FBVztBQUNqQyxRQUFNLGFBQWEsVUFBVTtBQUM3QixXQUFTLFVBQVUsS0FBSztBQUNwQixVQUFNLFNBQVMsS0FBSyxJQUFJLFdBQVcsT0FBTyxVQUFVLE1BQU0sQ0FBQztBQUMzRCxjQUFVLFFBQVE7QUFDbEIsV0FBTztBQUFBLEVBQ1Y7QUFDRCxZQUFVLEtBQUssVUFBVSxLQUFLO0FBQzlCLFlBQVUsS0FBSyxVQUFVLE1BQU07QUFDL0IsWUFBVSxPQUFPO0FBQ2pCLFlBQVUsUUFBUTtBQUN0QjtBQUNBLFNBQVMsV0FBVyxZQUFZLFdBQVc7QUFDdkMsUUFBTSxhQUFhLFVBQVU7QUFDN0IsV0FBUyxtQkFBbUJDLFlBQVc7QUFDbkMsVUFBTSxTQUFTO0FBQUEsTUFDWCxNQUFNO0FBQUEsTUFDTixLQUFLO0FBQUEsTUFDTCxPQUFPO0FBQUEsTUFDUCxRQUFRO0FBQUEsSUFDcEI7QUFDUSxlQUFVLFFBQVEsQ0FBQyxRQUFNO0FBQ3JCLGFBQU8sT0FBTyxLQUFLLElBQUksVUFBVSxNQUFNLFdBQVcsSUFBSTtBQUFBLElBQ2xFLENBQVM7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUNELFNBQU8sYUFBYSxtQkFBbUI7QUFBQSxJQUNuQztBQUFBLElBQ0E7QUFBQSxFQUNILEtBQUksbUJBQW1CO0FBQUEsSUFDcEI7QUFBQSxJQUNBO0FBQUEsRUFDUixDQUFLO0FBQ0w7QUFDQSxTQUFTLFNBQVMsT0FBTyxXQUFXLFFBQVEsUUFBUTtBQUNoRCxRQUFNLGFBQWE7QUFDbkIsTUFBSSxHQUFHLE1BQU0sUUFBUSxLQUFLLE9BQU87QUFDakMsT0FBSSxJQUFJLEdBQUcsT0FBTyxNQUFNLFFBQVEsUUFBUSxHQUFHLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDckQsYUFBUyxNQUFNO0FBQ2YsVUFBTSxPQUFPO0FBQ2IsUUFBSSxPQUFPLE9BQU8sU0FBUyxVQUFVLEdBQUcsT0FBTyxVQUFVLFVBQVUsR0FBRyxXQUFXLE9BQU8sWUFBWSxTQUFTLENBQUM7QUFDOUcsVUFBTSxFQUFFLE1BQU8sVUFBVyxXQUFXLFdBQVcsUUFBUSxRQUFRLE1BQU07QUFDdEUsYUFBUyxRQUFRLFdBQVc7QUFDNUIsY0FBVSxXQUFXO0FBQ3JCLFFBQUksQ0FBQyxJQUFJLFVBQVU7QUFDZixpQkFBVyxLQUFLLE1BQU07QUFBQSxJQUN6QjtBQUFBLEVBQ0o7QUFDRCxTQUFPLFNBQVMsU0FBUyxZQUFZLFdBQVcsUUFBUSxNQUFNLEtBQUs7QUFDdkU7QUFDQSxTQUFTLFdBQVcsS0FBSyxNQUFNLEtBQUssT0FBTyxRQUFRO0FBQy9DLE1BQUksTUFBTTtBQUNWLE1BQUksT0FBTztBQUNYLE1BQUksUUFBUSxPQUFPO0FBQ25CLE1BQUksU0FBUyxNQUFNO0FBQ25CLE1BQUksUUFBUTtBQUNaLE1BQUksU0FBUztBQUNqQjtBQUNBLFNBQVMsV0FBVyxPQUFPLFdBQVcsUUFBUSxRQUFRO0FBQ2xELFFBQU0sY0FBYyxPQUFPO0FBQzNCLE1BQUksRUFBRSxHQUFJLEVBQUksSUFBRztBQUNqQixhQUFXLFVBQVUsT0FBTTtBQUN2QixVQUFNLE1BQU0sT0FBTztBQUNuQixVQUFNLFFBQVEsT0FBTyxPQUFPLFVBQVU7QUFBQSxNQUNsQyxPQUFPO0FBQUEsTUFDUCxRQUFRO0FBQUEsTUFDUixRQUFRO0FBQUEsSUFDcEI7QUFDUSxVQUFNLFNBQVMsT0FBTyxjQUFjLE1BQU0sVUFBVTtBQUNwRCxRQUFJLE9BQU8sWUFBWTtBQUNuQixZQUFNLFFBQVEsVUFBVSxJQUFJO0FBQzVCLFlBQU0sU0FBUyxNQUFNLFFBQVEsSUFBSTtBQUNqQyxVQUFJLFFBQVEsTUFBTSxLQUFLLEdBQUc7QUFDdEIsWUFBSSxNQUFNO0FBQUEsTUFDYjtBQUNELFVBQUksSUFBSSxVQUFVO0FBQ2QsbUJBQVcsS0FBSyxZQUFZLE1BQU0sR0FBRyxPQUFPLGFBQWEsWUFBWSxRQUFRLFlBQVksTUFBTSxNQUFNO0FBQUEsTUFDckgsT0FBbUI7QUFDSCxtQkFBVyxLQUFLLFVBQVUsT0FBTyxNQUFNLFFBQVEsR0FBRyxPQUFPLE1BQU07QUFBQSxNQUNsRTtBQUNELFlBQU0sUUFBUTtBQUNkLFlBQU0sVUFBVTtBQUNoQixVQUFJLElBQUk7QUFBQSxJQUNwQixPQUFlO0FBQ0gsWUFBTSxVQUFVLFVBQVUsSUFBSTtBQUM5QixZQUFNLFNBQVMsTUFBTSxRQUFRLElBQUk7QUFDakMsVUFBSSxRQUFRLE1BQU0sS0FBSyxHQUFHO0FBQ3RCLFlBQUksTUFBTTtBQUFBLE1BQ2I7QUFDRCxVQUFJLElBQUksVUFBVTtBQUNkLG1CQUFXLEtBQUssR0FBRyxZQUFZLEtBQUssUUFBUSxPQUFPLGNBQWMsWUFBWSxTQUFTLFlBQVksR0FBRztBQUFBLE1BQ3JILE9BQW1CO0FBQ0gsbUJBQVcsS0FBSyxHQUFHLFVBQVUsTUFBTSxNQUFNLFFBQVEsUUFBUSxPQUFPO0FBQUEsTUFDbkU7QUFDRCxZQUFNLFFBQVE7QUFDZCxZQUFNLFVBQVU7QUFDaEIsVUFBSSxJQUFJO0FBQUEsSUFDWDtBQUFBLEVBQ0o7QUFDRCxZQUFVLElBQUk7QUFDZCxZQUFVLElBQUk7QUFDbEI7QUFDQSxJQUFJLFVBQVU7QUFBQSxFQUNiLE9BQVEsT0FBTyxNQUFNO0FBQ2QsUUFBSSxDQUFDLE1BQU0sT0FBTztBQUNkLFlBQU0sUUFBUTtJQUNqQjtBQUNELFNBQUssV0FBVyxLQUFLLFlBQVk7QUFDakMsU0FBSyxXQUFXLEtBQUssWUFBWTtBQUNqQyxTQUFLLFNBQVMsS0FBSyxVQUFVO0FBQzdCLFNBQUssVUFBVSxLQUFLLFdBQVcsV0FBVztBQUN0QyxhQUFPO0FBQUEsUUFDSDtBQUFBLFVBQ0ksR0FBRztBQUFBLFVBQ0gsS0FBTSxXQUFXO0FBQ2IsaUJBQUssS0FBSyxTQUFTO0FBQUEsVUFDdEI7QUFBQSxRQUNKO0FBQUEsTUFDakI7QUFBQSxJQUNBO0FBQ1EsVUFBTSxNQUFNLEtBQUssSUFBSTtBQUFBLEVBQ3hCO0FBQUEsRUFDSixVQUFXLE9BQU8sWUFBWTtBQUN2QixVQUFNLFFBQVEsTUFBTSxRQUFRLE1BQU0sTUFBTSxRQUFRLFVBQVUsSUFBSTtBQUM5RCxRQUFJLFVBQVUsSUFBSTtBQUNkLFlBQU0sTUFBTSxPQUFPLE9BQU8sQ0FBQztBQUFBLElBQzlCO0FBQUEsRUFDSjtBQUFBLEVBQ0osVUFBVyxPQUFPLE1BQU0sU0FBUztBQUMxQixTQUFLLFdBQVcsUUFBUTtBQUN4QixTQUFLLFdBQVcsUUFBUTtBQUN4QixTQUFLLFNBQVMsUUFBUTtBQUFBLEVBQ3pCO0FBQUEsRUFDSixPQUFRLE9BQU8sT0FBTyxRQUFRLFlBQVk7QUFDbkMsUUFBSSxDQUFDLE9BQU87QUFDUjtBQUFBLElBQ0g7QUFDRCxVQUFNLFVBQVUsVUFBVSxNQUFNLFFBQVEsT0FBTyxPQUFPO0FBQ3RELFVBQU0saUJBQWlCLEtBQUssSUFBSSxRQUFRLFFBQVEsT0FBTyxDQUFDO0FBQ3hELFVBQU0sa0JBQWtCLEtBQUssSUFBSSxTQUFTLFFBQVEsUUFBUSxDQUFDO0FBQzNELFVBQU0sUUFBUSxpQkFBaUIsTUFBTSxLQUFLO0FBQzFDLFVBQU0sZ0JBQWdCLE1BQU07QUFDNUIsVUFBTSxrQkFBa0IsTUFBTTtBQUM5QixTQUFLLE1BQU0sT0FBTyxDQUFDLFFBQU07QUFDckIsVUFBSSxPQUFPLElBQUksaUJBQWlCLFlBQVk7QUFDeEMsWUFBSSxhQUFZO0FBQUEsTUFDbkI7QUFBQSxJQUNiLENBQVM7QUFDRCxVQUFNLDBCQUEwQixjQUFjLE9BQU8sQ0FBQyxPQUFPLFNBQU8sS0FBSyxJQUFJLFdBQVcsS0FBSyxJQUFJLFFBQVEsWUFBWSxRQUFRLFFBQVEsUUFBUSxHQUFHLENBQUMsS0FBSztBQUN0SixVQUFNLFNBQVMsT0FBTyxPQUFPO0FBQUEsTUFDekIsWUFBWTtBQUFBLE1BQ1osYUFBYTtBQUFBLE1BQ2I7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsY0FBYyxpQkFBaUIsSUFBSTtBQUFBLE1BQ25DLGVBQWUsa0JBQWtCO0FBQUEsSUFDN0MsQ0FBUztBQUNELFVBQU0sYUFBYSxPQUFPLE9BQU8sQ0FBRSxHQUFFLE9BQU87QUFDNUMscUJBQWlCLFlBQVksVUFBVSxVQUFVLENBQUM7QUFDbEQsVUFBTSxZQUFZLE9BQU8sT0FBTztBQUFBLE1BQzVCO0FBQUEsTUFDQSxHQUFHO0FBQUEsTUFDSCxHQUFHO0FBQUEsTUFDSCxHQUFHLFFBQVE7QUFBQSxNQUNYLEdBQUcsUUFBUTtBQUFBLElBQ2QsR0FBRSxPQUFPO0FBQ1YsVUFBTSxTQUFTLGNBQWMsY0FBYyxPQUFPLGVBQWUsR0FBRyxNQUFNO0FBQzFFLGFBQVMsTUFBTSxVQUFVLFdBQVcsUUFBUSxNQUFNO0FBQ2xELGFBQVMsZUFBZSxXQUFXLFFBQVEsTUFBTTtBQUNqRCxRQUFJLFNBQVMsaUJBQWlCLFdBQVcsUUFBUSxNQUFNLEdBQUc7QUFDdEQsZUFBUyxlQUFlLFdBQVcsUUFBUSxNQUFNO0FBQUEsSUFDcEQ7QUFDRCxxQkFBaUIsU0FBUztBQUMxQixlQUFXLE1BQU0sWUFBWSxXQUFXLFFBQVEsTUFBTTtBQUN0RCxjQUFVLEtBQUssVUFBVTtBQUN6QixjQUFVLEtBQUssVUFBVTtBQUN6QixlQUFXLE1BQU0sZ0JBQWdCLFdBQVcsUUFBUSxNQUFNO0FBQzFELFVBQU0sWUFBWTtBQUFBLE1BQ2QsTUFBTSxVQUFVO0FBQUEsTUFDaEIsS0FBSyxVQUFVO0FBQUEsTUFDZixPQUFPLFVBQVUsT0FBTyxVQUFVO0FBQUEsTUFDbEMsUUFBUSxVQUFVLE1BQU0sVUFBVTtBQUFBLE1BQ2xDLFFBQVEsVUFBVTtBQUFBLE1BQ2xCLE9BQU8sVUFBVTtBQUFBLElBQzdCO0FBQ1EsU0FBSyxNQUFNLFdBQVcsQ0FBQyxXQUFTO0FBQzVCLFlBQU0sTUFBTSxPQUFPO0FBQ25CLGFBQU8sT0FBTyxLQUFLLE1BQU0sU0FBUztBQUNsQyxVQUFJLE9BQU8sVUFBVSxHQUFHLFVBQVUsR0FBRztBQUFBLFFBQ2pDLE1BQU07QUFBQSxRQUNOLEtBQUs7QUFBQSxRQUNMLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxNQUN4QixDQUFhO0FBQUEsSUFDYixDQUFTO0FBQUEsRUFDSjtBQUNMO0FBRUEsTUFBTSxhQUFhO0FBQUEsRUFDbEIsZUFBZSxRQUFRLGFBQWE7QUFBQSxFQUFFO0FBQUEsRUFDdEMsZUFBZSxTQUFTO0FBQ2pCLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixpQkFBaUIsT0FBTyxNQUFNLFVBQVU7QUFBQSxFQUFFO0FBQUEsRUFDMUMsb0JBQW9CLE9BQU8sTUFBTSxVQUFVO0FBQUEsRUFBRTtBQUFBLEVBQzdDLHNCQUFzQjtBQUNmLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixlQUFlLFNBQVMsT0FBTyxRQUFRLGFBQWE7QUFDN0MsWUFBUSxLQUFLLElBQUksR0FBRyxTQUFTLFFBQVEsS0FBSztBQUMxQyxhQUFTLFVBQVUsUUFBUTtBQUMzQixXQUFPO0FBQUEsTUFDSDtBQUFBLE1BQ0EsUUFBUSxLQUFLLElBQUksR0FBRyxjQUFjLEtBQUssTUFBTSxRQUFRLFdBQVcsSUFBSSxNQUFNO0FBQUEsSUFDdEY7QUFBQSxFQUNLO0FBQUEsRUFDSixXQUFXLFFBQVE7QUFDWixXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0osYUFBYSxRQUFRO0FBQUEsRUFDakI7QUFDTDtBQUVBLE1BQU0sc0JBQXNCLGFBQWE7QUFBQSxFQUNyQyxlQUFlLE1BQU07QUFDakIsV0FBTyxRQUFRLEtBQUssY0FBYyxLQUFLLFdBQVcsSUFBSSxLQUFLO0FBQUEsRUFDOUQ7QUFBQSxFQUNELGFBQWEsUUFBUTtBQUNqQixXQUFPLFFBQVEsWUFBWTtBQUFBLEVBQzlCO0FBQ0w7QUFFQSxNQUFNLGNBQWM7QUFDbkIsTUFBTSxjQUFjO0FBQUEsRUFDakIsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsY0FBYztBQUFBLEVBQ2QsYUFBYTtBQUFBLEVBQ2IsYUFBYTtBQUFBLEVBQ2IsV0FBVztBQUFBLEVBQ1gsY0FBYztBQUFBLEVBQ2QsWUFBWTtBQUNoQjtBQUNBLE1BQU0sZ0JBQWdCLENBQUMsVUFBUSxVQUFVLFFBQVEsVUFBVTtBQUMxRCxTQUFTLFdBQVcsUUFBUSxhQUFhO0FBQ3RDLFFBQU0sUUFBUSxPQUFPO0FBQ3JCLFFBQU0sZUFBZSxPQUFPLGFBQWEsUUFBUTtBQUNqRCxRQUFNLGNBQWMsT0FBTyxhQUFhLE9BQU87QUFDL0MsU0FBTyxlQUFlO0FBQUEsSUFDbEIsU0FBUztBQUFBLE1BQ0wsUUFBUTtBQUFBLE1BQ1IsT0FBTztBQUFBLE1BQ1AsT0FBTztBQUFBLFFBQ0gsU0FBUyxNQUFNO0FBQUEsUUFDZixRQUFRLE1BQU07QUFBQSxRQUNkLE9BQU8sTUFBTTtBQUFBLE1BQ2hCO0FBQUEsSUFDSjtBQUFBLEVBQ1Q7QUFDSSxRQUFNLFVBQVUsTUFBTSxXQUFXO0FBQ2pDLFFBQU0sWUFBWSxNQUFNLGFBQWE7QUFDckMsTUFBSSxjQUFjLFdBQVcsR0FBRztBQUM1QixVQUFNLGVBQWUsYUFBYSxRQUFRLE9BQU87QUFDakQsUUFBSSxpQkFBaUIsUUFBVztBQUM1QixhQUFPLFFBQVE7QUFBQSxJQUNsQjtBQUFBLEVBQ0o7QUFDRCxNQUFJLGNBQWMsWUFBWSxHQUFHO0FBQzdCLFFBQUksT0FBTyxNQUFNLFdBQVcsSUFBSTtBQUM1QixhQUFPLFNBQVMsT0FBTyxTQUFTLGVBQWU7QUFBQSxJQUMzRCxPQUFlO0FBQ0gsWUFBTSxnQkFBZ0IsYUFBYSxRQUFRLFFBQVE7QUFDbkQsVUFBSSxrQkFBa0IsUUFBVztBQUM3QixlQUFPLFNBQVM7QUFBQSxNQUNuQjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUNYO0FBQ0EsTUFBTSx1QkFBdUIsK0JBQStCO0FBQUEsRUFDeEQsU0FBUztBQUNiLElBQUk7QUFDSixTQUFTLFlBQVksTUFBTSxNQUFNLFVBQVU7QUFDdkMsT0FBSyxpQkFBaUIsTUFBTSxVQUFVLG9CQUFvQjtBQUM5RDtBQUNBLFNBQVMsZUFBZSxPQUFPLE1BQU0sVUFBVTtBQUMzQyxRQUFNLE9BQU8sb0JBQW9CLE1BQU0sVUFBVSxvQkFBb0I7QUFDekU7QUFDQSxTQUFTLGdCQUFnQixPQUFPLE9BQU87QUFDbkMsUUFBTSxPQUFPLFlBQVksTUFBTSxTQUFTLE1BQU07QUFDOUMsUUFBTSxFQUFFLEdBQUksRUFBQyxJQUFNLG9CQUFvQixPQUFPLEtBQUs7QUFDbkQsU0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBO0FBQUEsSUFDQSxRQUFRO0FBQUEsSUFDUixHQUFHLE1BQU0sU0FBWSxJQUFJO0FBQUEsSUFDekIsR0FBRyxNQUFNLFNBQVksSUFBSTtBQUFBLEVBQ2pDO0FBQ0E7QUFDQSxTQUFTLGlCQUFpQixVQUFVLFFBQVE7QUFDeEMsYUFBVyxRQUFRLFVBQVM7QUFDeEIsUUFBSSxTQUFTLFVBQVUsS0FBSyxTQUFTLE1BQU0sR0FBRztBQUMxQyxhQUFPO0FBQUEsSUFDVjtBQUFBLEVBQ0o7QUFDTDtBQUNBLFNBQVMscUJBQXFCLE9BQU8sTUFBTSxVQUFVO0FBQ2pELFFBQU0sU0FBUyxNQUFNO0FBQ3JCLFFBQU0sV0FBVyxJQUFJLGlCQUFpQixDQUFDLFlBQVU7QUFDN0MsUUFBSSxVQUFVO0FBQ2QsZUFBVyxTQUFTLFNBQVE7QUFDeEIsZ0JBQVUsV0FBVyxpQkFBaUIsTUFBTSxZQUFZLE1BQU07QUFDOUQsZ0JBQVUsV0FBVyxDQUFDLGlCQUFpQixNQUFNLGNBQWMsTUFBTTtBQUFBLElBQ3BFO0FBQ0QsUUFBSSxTQUFTO0FBQ1Q7SUFDSDtBQUFBLEVBQ1QsQ0FBSztBQUNELFdBQVMsUUFBUSxVQUFVO0FBQUEsSUFDdkIsV0FBVztBQUFBLElBQ1gsU0FBUztBQUFBLEVBQ2pCLENBQUs7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLHFCQUFxQixPQUFPLE1BQU0sVUFBVTtBQUNqRCxRQUFNLFNBQVMsTUFBTTtBQUNyQixRQUFNLFdBQVcsSUFBSSxpQkFBaUIsQ0FBQyxZQUFVO0FBQzdDLFFBQUksVUFBVTtBQUNkLGVBQVcsU0FBUyxTQUFRO0FBQ3hCLGdCQUFVLFdBQVcsaUJBQWlCLE1BQU0sY0FBYyxNQUFNO0FBQ2hFLGdCQUFVLFdBQVcsQ0FBQyxpQkFBaUIsTUFBTSxZQUFZLE1BQU07QUFBQSxJQUNsRTtBQUNELFFBQUksU0FBUztBQUNUO0lBQ0g7QUFBQSxFQUNULENBQUs7QUFDRCxXQUFTLFFBQVEsVUFBVTtBQUFBLElBQ3ZCLFdBQVc7QUFBQSxJQUNYLFNBQVM7QUFBQSxFQUNqQixDQUFLO0FBQ0QsU0FBTztBQUNYO0FBQ0EsTUFBTSxxQkFBcUIsb0JBQUk7QUFDL0IsSUFBSSxzQkFBc0I7QUFDMUIsU0FBUyxpQkFBaUI7QUFDdEIsUUFBTSxNQUFNLE9BQU87QUFDbkIsTUFBSSxRQUFRLHFCQUFxQjtBQUM3QjtBQUFBLEVBQ0g7QUFDRCx3QkFBc0I7QUFDdEIscUJBQW1CLFFBQVEsQ0FBQyxRQUFRLFVBQVE7QUFDeEMsUUFBSSxNQUFNLDRCQUE0QixLQUFLO0FBQ3ZDO0lBQ0g7QUFBQSxFQUNULENBQUs7QUFDTDtBQUNBLFNBQVMsOEJBQThCLE9BQU8sUUFBUTtBQUNsRCxNQUFJLENBQUMsbUJBQW1CLE1BQU07QUFDMUIsV0FBTyxpQkFBaUIsVUFBVSxjQUFjO0FBQUEsRUFDbkQ7QUFDRCxxQkFBbUIsSUFBSSxPQUFPLE1BQU07QUFDeEM7QUFDQSxTQUFTLGdDQUFnQyxPQUFPO0FBQzVDLHFCQUFtQixPQUFPLEtBQUs7QUFDL0IsTUFBSSxDQUFDLG1CQUFtQixNQUFNO0FBQzFCLFdBQU8sb0JBQW9CLFVBQVUsY0FBYztBQUFBLEVBQ3REO0FBQ0w7QUFDQSxTQUFTLHFCQUFxQixPQUFPLE1BQU0sVUFBVTtBQUNqRCxRQUFNLFNBQVMsTUFBTTtBQUNyQixRQUFNLFlBQVksVUFBVSxlQUFlLE1BQU07QUFDakQsTUFBSSxDQUFDLFdBQVc7QUFDWjtBQUFBLEVBQ0g7QUFDRCxRQUFNLFNBQVMsVUFBVSxDQUFDLE9BQU8sV0FBUztBQUN0QyxVQUFNLElBQUksVUFBVTtBQUNwQixhQUFTLE9BQU8sTUFBTTtBQUN0QixRQUFJLElBQUksVUFBVSxhQUFhO0FBQzNCO0lBQ0g7QUFBQSxFQUNKLEdBQUUsTUFBTTtBQUNULFFBQU0sV0FBVyxJQUFJLGVBQWUsQ0FBQyxZQUFVO0FBQzNDLFVBQU0sUUFBUSxRQUFRO0FBQ3RCLFVBQU0sUUFBUSxNQUFNLFlBQVk7QUFDaEMsVUFBTSxTQUFTLE1BQU0sWUFBWTtBQUNqQyxRQUFJLFVBQVUsS0FBSyxXQUFXLEdBQUc7QUFDN0I7QUFBQSxJQUNIO0FBQ0QsV0FBTyxPQUFPLE1BQU07QUFBQSxFQUM1QixDQUFLO0FBQ0QsV0FBUyxRQUFRLFNBQVM7QUFDMUIsZ0NBQThCLE9BQU8sTUFBTTtBQUMzQyxTQUFPO0FBQ1g7QUFDQSxTQUFTLGdCQUFnQixPQUFPLE1BQU0sVUFBVTtBQUM1QyxNQUFJLFVBQVU7QUFDVixhQUFTLFdBQVU7QUFBQSxFQUN0QjtBQUNELE1BQUksU0FBUyxVQUFVO0FBQ25CLG9DQUFnQyxLQUFLO0FBQUEsRUFDeEM7QUFDTDtBQUNBLFNBQVMscUJBQXFCLE9BQU8sTUFBTSxVQUFVO0FBQ2pELFFBQU0sU0FBUyxNQUFNO0FBQ3JCLFFBQU0sUUFBUSxVQUFVLENBQUMsVUFBUTtBQUM3QixRQUFJLE1BQU0sUUFBUSxNQUFNO0FBQ3BCLGVBQVMsZ0JBQWdCLE9BQU8sS0FBSyxDQUFDO0FBQUEsSUFDekM7QUFBQSxFQUNKLEdBQUUsS0FBSztBQUNSLGNBQVksUUFBUSxNQUFNLEtBQUs7QUFDL0IsU0FBTztBQUNYO0FBQ0MsTUFBTSxvQkFBb0IsYUFBYTtBQUFBLEVBQ3ZDLGVBQWUsUUFBUSxhQUFhO0FBQzdCLFVBQU0sVUFBVSxVQUFVLE9BQU8sY0FBYyxPQUFPLFdBQVcsSUFBSTtBQUNyRSxRQUFJLFdBQVcsUUFBUSxXQUFXLFFBQVE7QUFDdEMsaUJBQVcsUUFBUSxXQUFXO0FBQzlCLGFBQU87QUFBQSxJQUNWO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLGVBQWUsU0FBUztBQUNqQixVQUFNLFNBQVMsUUFBUTtBQUN2QixRQUFJLENBQUMsT0FBTyxjQUFjO0FBQ3RCLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxVQUFVLE9BQU8sYUFBYTtBQUNwQztBQUFBLE1BQ0k7QUFBQSxNQUNBO0FBQUEsSUFDWixFQUFVLFFBQVEsQ0FBQyxTQUFPO0FBQ2QsWUFBTSxRQUFRLFFBQVE7QUFDdEIsVUFBSSxjQUFjLEtBQUssR0FBRztBQUN0QixlQUFPLGdCQUFnQixJQUFJO0FBQUEsTUFDM0MsT0FBbUI7QUFDSCxlQUFPLGFBQWEsTUFBTSxLQUFLO0FBQUEsTUFDbEM7QUFBQSxJQUNiLENBQVM7QUFDRCxVQUFNLFFBQVEsUUFBUSxTQUFTO0FBQy9CLFdBQU8sS0FBSyxLQUFLLEVBQUUsUUFBUSxDQUFDLFFBQU07QUFDOUIsYUFBTyxNQUFNLE9BQU8sTUFBTTtBQUFBLElBQ3RDLENBQVM7QUFDRCxXQUFPLFFBQVEsT0FBTztBQUN0QixXQUFPLE9BQU87QUFDZCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0osaUJBQWlCLE9BQU8sTUFBTSxVQUFVO0FBQ2pDLFNBQUssb0JBQW9CLE9BQU8sSUFBSTtBQUNwQyxVQUFNLFVBQVUsTUFBTSxhQUFhLE1BQU0sV0FBVztBQUNwRCxVQUFNLFdBQVc7QUFBQSxNQUNiLFFBQVE7QUFBQSxNQUNSLFFBQVE7QUFBQSxNQUNSLFFBQVE7QUFBQSxJQUNwQjtBQUNRLFVBQU0sVUFBVSxTQUFTLFNBQVM7QUFDbEMsWUFBUSxRQUFRLFFBQVEsT0FBTyxNQUFNLFFBQVE7QUFBQSxFQUNoRDtBQUFBLEVBQ0osb0JBQW9CLE9BQU8sTUFBTTtBQUMxQixVQUFNLFVBQVUsTUFBTSxhQUFhLE1BQU0sV0FBVztBQUNwRCxVQUFNLFFBQVEsUUFBUTtBQUN0QixRQUFJLENBQUMsT0FBTztBQUNSO0FBQUEsSUFDSDtBQUNELFVBQU0sV0FBVztBQUFBLE1BQ2IsUUFBUTtBQUFBLE1BQ1IsUUFBUTtBQUFBLE1BQ1IsUUFBUTtBQUFBLElBQ3BCO0FBQ1EsVUFBTSxVQUFVLFNBQVMsU0FBUztBQUNsQyxZQUFRLE9BQU8sTUFBTSxLQUFLO0FBQzFCLFlBQVEsUUFBUTtBQUFBLEVBQ25CO0FBQUEsRUFDRCxzQkFBc0I7QUFDbEIsV0FBTyxPQUFPO0FBQUEsRUFDakI7QUFBQSxFQUNKLGVBQWUsUUFBUSxPQUFPLFFBQVEsYUFBYTtBQUM1QyxXQUFPLGVBQWUsUUFBUSxPQUFPLFFBQVEsV0FBVztBQUFBLEVBQzNEO0FBQUEsRUFDSixXQUFXLFFBQVE7QUFDWixVQUFNLFlBQVksZUFBZSxNQUFNO0FBQ3ZDLFdBQU8sQ0FBQyxFQUFFLGFBQWEsVUFBVTtBQUFBLEVBQ3BDO0FBQ0w7QUFFQSxTQUFTLGdCQUFnQixRQUFRO0FBQzdCLE1BQUksQ0FBQyxnQkFBZSxLQUFNLE9BQU8sb0JBQW9CLGVBQWUsa0JBQWtCLGlCQUFpQjtBQUNuRyxXQUFPO0FBQUEsRUFDVjtBQUNELFNBQU87QUFDWDtBQUVBLE1BQU0sUUFBUTtBQUFBLEVBQWQ7QUFHSSxrQ0FBUztBQUFBO0FBQUEsRUFDVCxnQkFBZ0Isa0JBQWtCO0FBQzlCLFVBQU0sRUFBRSxHQUFJLE1BQU8sS0FBSyxTQUFTO0FBQUEsTUFDN0I7QUFBQSxNQUNBO0FBQUEsSUFDSCxHQUFFLGdCQUFnQjtBQUNuQixXQUFPO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxJQUNaO0FBQUEsRUFDSztBQUFBLEVBQ0QsV0FBVztBQUNQLFdBQU8sU0FBUyxLQUFLLENBQUMsS0FBSyxTQUFTLEtBQUssQ0FBQztBQUFBLEVBQzdDO0FBQUEsRUFDRCxTQUFTLE9BQU8sT0FBTztBQUNuQixVQUFNLFFBQVEsS0FBSztBQUNuQixRQUFJLENBQUMsU0FBUyxDQUFDLE9BQU87QUFFbEIsYUFBTztBQUFBLElBQ1Y7QUFDRCxVQUFNLE1BQU07QUFDWixVQUFNLFFBQVEsQ0FBQyxTQUFPO0FBQ2xCLFVBQUksUUFBUSxNQUFNLFNBQVMsTUFBTSxNQUFNLE9BQVEsSUFBRyxNQUFNLE1BQU0sTUFBTSxLQUFLO0FBQUEsSUFDckYsQ0FBUztBQUNELFdBQU87QUFBQSxFQUNWO0FBQ0w7QUE1QkksY0FERSxTQUNLLFlBQVc7QUFDbEIsY0FGRSxTQUVLO0FBNkJYLFNBQVMsU0FBUyxPQUFPLE9BQU87QUFDNUIsUUFBTSxXQUFXLE1BQU0sUUFBUTtBQUMvQixRQUFNLHFCQUFxQixrQkFBa0IsS0FBSztBQUNsRCxRQUFNLGFBQWEsS0FBSyxJQUFJLFNBQVMsaUJBQWlCLG9CQUFvQixrQkFBa0I7QUFDNUYsUUFBTSxlQUFlLFNBQVMsTUFBTSxVQUFVLGdCQUFnQixLQUFLLElBQUk7QUFDdkUsUUFBTSxrQkFBa0IsYUFBYTtBQUNyQyxRQUFNLFFBQVEsYUFBYTtBQUMzQixRQUFNLE9BQU8sYUFBYSxrQkFBa0I7QUFDNUMsUUFBTSxXQUFXO0FBQ2pCLE1BQUksa0JBQWtCLFlBQVk7QUFDOUIsZUFBVyxPQUFPLFVBQVUsY0FBYyxrQkFBa0IsVUFBVTtBQUN0RSxXQUFPO0FBQUEsRUFDVjtBQUNELFFBQU0sVUFBVSxpQkFBaUIsY0FBYyxPQUFPLFVBQVU7QUFDaEUsTUFBSSxrQkFBa0IsR0FBRztBQUNyQixRQUFJLEdBQUc7QUFDUCxVQUFNLGtCQUFrQixrQkFBa0IsSUFBSSxLQUFLLE9BQU8sT0FBTyxVQUFVLGtCQUFrQixFQUFFLElBQUk7QUFDbkcsU0FBSyxPQUFPLFVBQVUsU0FBUyxjQUFjLGVBQWUsSUFBSSxJQUFJLFFBQVEsaUJBQWlCLEtBQUs7QUFDbEcsU0FBSSxJQUFJLEdBQUcsT0FBTyxrQkFBa0IsR0FBRyxJQUFJLE1BQU0sS0FBSTtBQUNqRCxXQUFLLE9BQU8sVUFBVSxTQUFTLGFBQWEsSUFBSSxhQUFhLElBQUksRUFBRTtBQUFBLElBQ3RFO0FBQ0QsU0FBSyxPQUFPLFVBQVUsU0FBUyxNQUFNLGNBQWMsZUFBZSxJQUFJLE1BQU0sU0FBUyxPQUFPLGVBQWU7QUFDM0csV0FBTztBQUFBLEVBQ1Y7QUFDRCxPQUFLLE9BQU8sVUFBVSxPQUFPO0FBQzdCLFNBQU87QUFDWDtBQUNBLFNBQVMsa0JBQWtCLE9BQU87QUFDOUIsUUFBTSxTQUFTLE1BQU0sUUFBUTtBQUM3QixRQUFNLGFBQWEsTUFBTTtBQUN6QixRQUFNLFdBQVcsTUFBTSxVQUFVLGNBQWMsU0FBUyxJQUFJO0FBQzVELFFBQU0sV0FBVyxNQUFNLGFBQWE7QUFDcEMsU0FBTyxLQUFLLE1BQU0sS0FBSyxJQUFJLFVBQVUsUUFBUSxDQUFDO0FBQ2xEO0FBQ0MsU0FBUyxpQkFBaUIsY0FBYyxPQUFPLFlBQVk7QUFDeEQsUUFBTSxtQkFBbUIsZUFBZSxZQUFZO0FBQ3BELFFBQU0sVUFBVSxNQUFNLFNBQVM7QUFDL0IsTUFBSSxDQUFDLGtCQUFrQjtBQUNuQixXQUFPLEtBQUssSUFBSSxTQUFTLENBQUM7QUFBQSxFQUM3QjtBQUNELFFBQU0sVUFBVSxXQUFXLGdCQUFnQjtBQUMzQyxXQUFRLElBQUksR0FBRyxPQUFPLFFBQVEsU0FBUyxHQUFHLElBQUksTUFBTSxLQUFJO0FBQ3BELFVBQU0sU0FBUyxRQUFRO0FBQ3ZCLFFBQUksU0FBUyxTQUFTO0FBQ2xCLGFBQU87QUFBQSxJQUNWO0FBQUEsRUFDSjtBQUNELFNBQU8sS0FBSyxJQUFJLFNBQVMsQ0FBQztBQUM5QjtBQUNDLFNBQVMsZ0JBQWdCLE9BQU87QUFDN0IsUUFBTSxTQUFTO0FBQ2YsTUFBSSxHQUFHO0FBQ1AsT0FBSSxJQUFJLEdBQUcsT0FBTyxNQUFNLFFBQVEsSUFBSSxNQUFNLEtBQUk7QUFDMUMsUUFBSSxNQUFNLEdBQUcsT0FBTztBQUNoQixhQUFPLEtBQUssQ0FBQztBQUFBLElBQ2hCO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUNDLFNBQVMsV0FBVyxPQUFPLFVBQVUsY0FBYyxTQUFTO0FBQ3pELE1BQUksUUFBUTtBQUNaLE1BQUksT0FBTyxhQUFhO0FBQ3hCLE1BQUk7QUFDSixZQUFVLEtBQUssS0FBSyxPQUFPO0FBQzNCLE9BQUksSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEtBQUk7QUFDN0IsUUFBSSxNQUFNLE1BQU07QUFDWixlQUFTLEtBQUssTUFBTSxFQUFFO0FBQ3RCO0FBQ0EsYUFBTyxhQUFhLFFBQVE7QUFBQSxJQUMvQjtBQUFBLEVBQ0o7QUFDTDtBQUNDLFNBQVMsS0FBSyxPQUFPLFVBQVUsU0FBUyxZQUFZLFVBQVU7QUFDM0QsUUFBTSxRQUFRLGVBQWUsWUFBWSxDQUFDO0FBQzFDLFFBQU0sTUFBTSxLQUFLLElBQUksZUFBZSxVQUFVLE1BQU0sTUFBTSxHQUFHLE1BQU0sTUFBTTtBQUN6RSxNQUFJLFFBQVE7QUFDWixNQUFJLFFBQVEsR0FBRztBQUNmLFlBQVUsS0FBSyxLQUFLLE9BQU87QUFDM0IsTUFBSSxVQUFVO0FBQ1YsYUFBUyxXQUFXO0FBQ3BCLGNBQVUsU0FBUyxLQUFLLE1BQU0sU0FBUyxPQUFPO0FBQUEsRUFDakQ7QUFDRCxTQUFPO0FBQ1AsU0FBTSxPQUFPLEdBQUU7QUFDWDtBQUNBLFdBQU8sS0FBSyxNQUFNLFFBQVEsUUFBUSxPQUFPO0FBQUEsRUFDNUM7QUFDRCxPQUFJLElBQUksS0FBSyxJQUFJLE9BQU8sQ0FBQyxHQUFHLElBQUksS0FBSyxLQUFJO0FBQ3JDLFFBQUksTUFBTSxNQUFNO0FBQ1osZUFBUyxLQUFLLE1BQU0sRUFBRTtBQUN0QjtBQUNBLGFBQU8sS0FBSyxNQUFNLFFBQVEsUUFBUSxPQUFPO0FBQUEsSUFDNUM7QUFBQSxFQUNKO0FBQ0w7QUFDQyxTQUFTLGVBQWUsS0FBSztBQUMxQixRQUFNLE1BQU0sSUFBSTtBQUNoQixNQUFJLEdBQUc7QUFDUCxNQUFJLE1BQU0sR0FBRztBQUNULFdBQU87QUFBQSxFQUNWO0FBQ0QsT0FBSSxPQUFPLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxLQUFLLEVBQUUsR0FBRTtBQUNuQyxRQUFJLElBQUksS0FBSyxJQUFJLElBQUksT0FBTyxNQUFNO0FBQzlCLGFBQU87QUFBQSxJQUNWO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUVBLE1BQU0sZUFBZSxDQUFDLFVBQVEsVUFBVSxTQUFTLFVBQVUsVUFBVSxVQUFVLFNBQVM7QUFDeEYsTUFBTSxpQkFBaUIsQ0FBQyxPQUFPLE1BQU0sV0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLE1BQU0sUUFBUSxTQUFTLE1BQU0sUUFBUTtBQUN0SCxTQUFTLE9BQU8sS0FBSyxVQUFVO0FBQzVCLFFBQU0sU0FBUztBQUNmLFFBQU0sWUFBWSxJQUFJLFNBQVM7QUFDL0IsUUFBTSxNQUFNLElBQUk7QUFDaEIsTUFBSSxJQUFJO0FBQ1IsU0FBTSxJQUFJLEtBQUssS0FBSyxXQUFVO0FBQzFCLFdBQU8sS0FBSyxJQUFJLEtBQUssTUFBTSxDQUFDLEVBQUU7QUFBQSxFQUNqQztBQUNELFNBQU87QUFDWDtBQUNDLFNBQVMsb0JBQW9CLE9BQU8sT0FBTyxpQkFBaUI7QUFDekQsUUFBTSxTQUFTLE1BQU0sTUFBTTtBQUMzQixRQUFNQyxjQUFhLEtBQUssSUFBSSxPQUFPLFNBQVMsQ0FBQztBQUM3QyxRQUFNLFFBQVEsTUFBTTtBQUNwQixRQUFNLE1BQU0sTUFBTTtBQUNsQixRQUFNLFVBQVU7QUFDaEIsTUFBSSxZQUFZLE1BQU0sZ0JBQWdCQSxXQUFVO0FBQ2hELE1BQUk7QUFDSixNQUFJLGlCQUFpQjtBQUNqQixRQUFJLFdBQVcsR0FBRztBQUNkLGVBQVMsS0FBSyxJQUFJLFlBQVksT0FBTyxNQUFNLFNBQVM7QUFBQSxJQUNoRSxXQUFtQixVQUFVLEdBQUc7QUFDcEIsZ0JBQVUsTUFBTSxnQkFBZ0IsQ0FBQyxJQUFJLGFBQWE7QUFBQSxJQUM5RCxPQUFlO0FBQ0gsZ0JBQVUsWUFBWSxNQUFNLGdCQUFnQkEsY0FBYSxDQUFDLEtBQUs7QUFBQSxJQUNsRTtBQUNELGlCQUFhQSxjQUFhLFFBQVEsU0FBUyxDQUFDO0FBQzVDLFFBQUksWUFBWSxRQUFRLFdBQVcsWUFBWSxNQUFNLFNBQVM7QUFDMUQ7QUFBQSxJQUNIO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUNDLFNBQVMsZUFBZSxRQUFRLFFBQVE7QUFDckMsT0FBSyxRQUFRLENBQUMsVUFBUTtBQUNsQixVQUFNLEtBQUssTUFBTTtBQUNqQixVQUFNLFFBQVEsR0FBRyxTQUFTO0FBQzFCLFFBQUk7QUFDSixRQUFJLFFBQVEsUUFBUTtBQUNoQixXQUFJLElBQUksR0FBRyxJQUFJLE9BQU8sRUFBRSxHQUFFO0FBQ3RCLGVBQU8sTUFBTSxLQUFLLEdBQUc7QUFBQSxNQUN4QjtBQUNELFNBQUcsT0FBTyxHQUFHLEtBQUs7QUFBQSxJQUNyQjtBQUFBLEVBQ1QsQ0FBSztBQUNMO0FBQ0MsU0FBUyxrQkFBa0IsU0FBUztBQUNqQyxTQUFPLFFBQVEsWUFBWSxRQUFRLGFBQWE7QUFDcEQ7QUFDQyxTQUFTLGVBQWUsU0FBUyxVQUFVO0FBQ3hDLE1BQUksQ0FBQyxRQUFRLFNBQVM7QUFDbEIsV0FBTztBQUFBLEVBQ1Y7QUFDRCxRQUFNLE9BQU8sT0FBTyxRQUFRLE1BQU0sUUFBUTtBQUMxQyxRQUFNLFVBQVUsVUFBVSxRQUFRLE9BQU87QUFDekMsUUFBTSxRQUFRLFFBQVEsUUFBUSxJQUFJLElBQUksUUFBUSxLQUFLLFNBQVM7QUFDNUQsU0FBTyxRQUFRLEtBQUssYUFBYSxRQUFRO0FBQzdDO0FBQ0EsU0FBUyxtQkFBbUIsUUFBUSxPQUFPO0FBQ3ZDLFNBQU8sY0FBYyxRQUFRO0FBQUEsSUFDekI7QUFBQSxJQUNBLE1BQU07QUFBQSxFQUNkLENBQUs7QUFDTDtBQUNBLFNBQVMsa0JBQWtCLFFBQVEsT0FBTyxNQUFNO0FBQzVDLFNBQU8sY0FBYyxRQUFRO0FBQUEsSUFDekI7QUFBQSxJQUNBO0FBQUEsSUFDQSxNQUFNO0FBQUEsRUFDZCxDQUFLO0FBQ0w7QUFDQSxTQUFTLFdBQVcsT0FBTyxVQUFVLFNBQVM7QUFDMUMsTUFBSSxNQUFNLG1CQUFtQixLQUFLO0FBQ2xDLE1BQUksV0FBVyxhQUFhLFdBQVcsQ0FBQyxXQUFXLGFBQWEsU0FBUztBQUNyRSxVQUFNLGFBQWEsR0FBRztBQUFBLEVBQ3pCO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxVQUFVLE9BQU8sUUFBUSxVQUFVLE9BQU87QUFDL0MsUUFBTSxFQUFFLEtBQU0sTUFBTyxRQUFTLE9BQVEsTUFBUSxJQUFHO0FBQ2pELFFBQU0sRUFBRSxXQUFZLE9BQVMsSUFBRztBQUNoQyxNQUFJLFdBQVc7QUFDZixNQUFJLFVBQVUsUUFBUTtBQUN0QixRQUFNLFNBQVMsU0FBUztBQUN4QixRQUFNLFFBQVEsUUFBUTtBQUN0QixNQUFJLE1BQU0sZ0JBQWdCO0FBQ3RCLGFBQVMsZUFBZSxPQUFPLE1BQU0sS0FBSztBQUMxQyxRQUFJLFNBQVMsUUFBUSxHQUFHO0FBQ3BCLFlBQU0saUJBQWlCLE9BQU8sS0FBSyxRQUFRLEVBQUU7QUFDN0MsWUFBTSxRQUFRLFNBQVM7QUFDdkIsZUFBUyxPQUFPLGdCQUFnQixpQkFBaUIsS0FBSyxJQUFJLFNBQVM7QUFBQSxJQUMvRSxXQUFtQixhQUFhLFVBQVU7QUFDOUIsZ0JBQVUsVUFBVSxTQUFTLFVBQVUsT0FBTyxJQUFJLFNBQVM7QUFBQSxJQUN2RSxPQUFlO0FBQ0gsZUFBUyxlQUFlLE9BQU8sVUFBVSxNQUFNO0FBQUEsSUFDbEQ7QUFDRCxlQUFXLFFBQVE7QUFBQSxFQUMzQixPQUFXO0FBQ0gsUUFBSSxTQUFTLFFBQVEsR0FBRztBQUNwQixZQUFNLGtCQUFrQixPQUFPLEtBQUssUUFBUSxFQUFFO0FBQzlDLFlBQU0sU0FBUyxTQUFTO0FBQ3hCLGVBQVMsT0FBTyxpQkFBaUIsaUJBQWlCLE1BQU0sSUFBSSxRQUFRO0FBQUEsSUFDaEYsV0FBbUIsYUFBYSxVQUFVO0FBQzlCLGdCQUFVLFVBQVUsT0FBTyxVQUFVLFNBQVMsSUFBSSxRQUFRO0FBQUEsSUFDdEUsT0FBZTtBQUNILGVBQVMsZUFBZSxPQUFPLFVBQVUsTUFBTTtBQUFBLElBQ2xEO0FBQ0QsYUFBUyxlQUFlLE9BQU8sUUFBUSxHQUFHO0FBQzFDLGVBQVcsYUFBYSxTQUFTLENBQUMsVUFBVTtBQUFBLEVBQy9DO0FBQ0QsU0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNSO0FBQ0E7QUFDQSxNQUFNLGNBQWMsUUFBUTtBQUFBLEVBQ3hCLFlBQVksS0FBSTtBQUNaO0FBQ0MsU0FBSyxLQUFLLElBQUk7QUFDZCxTQUFLLE9BQU8sSUFBSTtBQUNoQixTQUFLLFVBQVU7QUFDZixTQUFLLE1BQU0sSUFBSTtBQUNmLFNBQUssUUFBUSxJQUFJO0FBQ2pCLFNBQUssTUFBTTtBQUNYLFNBQUssU0FBUztBQUNkLFNBQUssT0FBTztBQUNaLFNBQUssUUFBUTtBQUNiLFNBQUssUUFBUTtBQUNiLFNBQUssU0FBUztBQUNmLFNBQUssV0FBVztBQUFBLE1BQ1osTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLE1BQ1AsS0FBSztBQUFBLE1BQ0wsUUFBUTtBQUFBLElBQ3BCO0FBQ1MsU0FBSyxXQUFXO0FBQ2hCLFNBQUssWUFBWTtBQUNqQixTQUFLLGFBQWE7QUFDbEIsU0FBSyxnQkFBZ0I7QUFDckIsU0FBSyxjQUFjO0FBQ25CLFNBQUssZUFBZTtBQUNwQixTQUFLLE9BQU87QUFDWixTQUFLLGdCQUFnQjtBQUN0QixTQUFLLE1BQU07QUFDWCxTQUFLLE1BQU07QUFDWCxTQUFLLFNBQVM7QUFDYixTQUFLLFFBQVE7QUFDYixTQUFLLGlCQUFpQjtBQUN0QixTQUFLLGNBQWM7QUFDbkIsU0FBSyxjQUFjO0FBQ3BCLFNBQUssVUFBVTtBQUNmLFNBQUssYUFBYTtBQUNsQixTQUFLLG9CQUFvQjtBQUN4QixTQUFLLGNBQWM7QUFDbkIsU0FBSyxZQUFZO0FBQ2xCLFNBQUssaUJBQWlCO0FBQ3RCLFNBQUssV0FBVztBQUNoQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxnQkFBZ0I7QUFDckIsU0FBSyxnQkFBZ0I7QUFDckIsU0FBSyxlQUFlO0FBQ3BCLFNBQUssZUFBZTtBQUNwQixTQUFLLFNBQVM7QUFDZCxTQUFLLG9CQUFvQjtBQUN6QixTQUFLLFdBQVc7QUFBQSxFQUNuQjtBQUFBLEVBQ0osS0FBSyxTQUFTO0FBQ1AsU0FBSyxVQUFVLFFBQVEsV0FBVyxLQUFLLFdBQVUsQ0FBRTtBQUNuRCxTQUFLLE9BQU8sUUFBUTtBQUNwQixTQUFLLFdBQVcsS0FBSyxNQUFNLFFBQVEsR0FBRztBQUN0QyxTQUFLLFdBQVcsS0FBSyxNQUFNLFFBQVEsR0FBRztBQUN0QyxTQUFLLGdCQUFnQixLQUFLLE1BQU0sUUFBUSxZQUFZO0FBQ3BELFNBQUssZ0JBQWdCLEtBQUssTUFBTSxRQUFRLFlBQVk7QUFBQSxFQUN2RDtBQUFBLEVBQ0osTUFBTSxLQUFLLE9BQU87QUFDWCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0osZ0JBQWdCO0FBQ1QsUUFBSSxFQUFFLFVBQVcsVUFBVyxlQUFnQixjQUFhLElBQU07QUFDL0QsZUFBVyxnQkFBZ0IsVUFBVSxPQUFPLGlCQUFpQjtBQUM3RCxlQUFXLGdCQUFnQixVQUFVLE9BQU8saUJBQWlCO0FBQzdELG9CQUFnQixnQkFBZ0IsZUFBZSxPQUFPLGlCQUFpQjtBQUN2RSxvQkFBZ0IsZ0JBQWdCLGVBQWUsT0FBTyxpQkFBaUI7QUFDdkUsV0FBTztBQUFBLE1BQ0gsS0FBSyxnQkFBZ0IsVUFBVSxhQUFhO0FBQUEsTUFDNUMsS0FBSyxnQkFBZ0IsVUFBVSxhQUFhO0FBQUEsTUFDNUMsWUFBWSxlQUFlLFFBQVE7QUFBQSxNQUNuQyxZQUFZLGVBQWUsUUFBUTtBQUFBLElBQy9DO0FBQUEsRUFDSztBQUFBLEVBQ0osVUFBVSxVQUFVO0FBQ2IsUUFBSSxFQUFFLEtBQU0sS0FBTSxZQUFhLGVBQWdCLEtBQUs7QUFDcEQsUUFBSTtBQUNKLFFBQUksY0FBYyxZQUFZO0FBQzFCLGFBQU87QUFBQSxRQUNIO0FBQUEsUUFDQTtBQUFBLE1BQ2hCO0FBQUEsSUFDUztBQUNELFVBQU0sUUFBUSxLQUFLO0FBQ25CLGFBQVEsSUFBSSxHQUFHLE9BQU8sTUFBTSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDOUMsY0FBUSxNQUFNLEdBQUcsV0FBVyxVQUFVLE1BQU0sUUFBUTtBQUNwRCxVQUFJLENBQUMsWUFBWTtBQUNiLGNBQU0sS0FBSyxJQUFJLEtBQUssTUFBTSxHQUFHO0FBQUEsTUFDaEM7QUFDRCxVQUFJLENBQUMsWUFBWTtBQUNiLGNBQU0sS0FBSyxJQUFJLEtBQUssTUFBTSxHQUFHO0FBQUEsTUFDaEM7QUFBQSxJQUNKO0FBQ0QsVUFBTSxjQUFjLE1BQU0sTUFBTSxNQUFNO0FBQ3RDLFVBQU0sY0FBYyxNQUFNLE1BQU0sTUFBTTtBQUN0QyxXQUFPO0FBQUEsTUFDSCxLQUFLLGdCQUFnQixLQUFLLGdCQUFnQixLQUFLLEdBQUcsQ0FBQztBQUFBLE1BQ25ELEtBQUssZ0JBQWdCLEtBQUssZ0JBQWdCLEtBQUssR0FBRyxDQUFDO0FBQUEsSUFDL0Q7QUFBQSxFQUNLO0FBQUEsRUFDSixhQUFhO0FBQ04sV0FBTztBQUFBLE1BQ0gsTUFBTSxLQUFLLGVBQWU7QUFBQSxNQUMxQixLQUFLLEtBQUssY0FBYztBQUFBLE1BQ3hCLE9BQU8sS0FBSyxnQkFBZ0I7QUFBQSxNQUM1QixRQUFRLEtBQUssaUJBQWlCO0FBQUEsSUFDMUM7QUFBQSxFQUNLO0FBQUEsRUFDSixXQUFXO0FBQ0osV0FBTyxLQUFLO0FBQUEsRUFDZjtBQUFBLEVBQ0osWUFBWTtBQUNMLFVBQU0sT0FBTyxLQUFLLE1BQU07QUFDeEIsV0FBTyxLQUFLLFFBQVEsV0FBVyxLQUFLLGFBQVksSUFBSyxLQUFLLFVBQVUsS0FBSyxZQUFZLEtBQUssVUFBVTtBQUFBLEVBQ3ZHO0FBQUEsRUFDSixjQUFjLFlBQVksS0FBSyxNQUFNLFdBQVc7QUFDekMsVUFBTSxRQUFRLEtBQUssZ0JBQWdCLEtBQUssY0FBYyxLQUFLLG1CQUFtQixTQUFTO0FBQ3ZGLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDRCxlQUFlO0FBQ1gsU0FBSyxTQUFTO0FBQ2QsU0FBSyxvQkFBb0I7QUFBQSxFQUM1QjtBQUFBLEVBQ0QsZUFBZTtBQUNYLGFBQVMsS0FBSyxRQUFRLGNBQWM7QUFBQSxNQUNoQztBQUFBLElBQ1osQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNKLE9BQU8sVUFBVSxXQUFXLFNBQVM7QUFDOUIsVUFBTSxFQUFFLGFBQWMsT0FBUSxPQUFPLFNBQVcsSUFBRyxLQUFLO0FBQ3hELFVBQU0sYUFBYSxTQUFTO0FBQzVCLFNBQUssYUFBWTtBQUNqQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxZQUFZO0FBQ2pCLFNBQUssV0FBVyxVQUFVLE9BQU8sT0FBTztBQUFBLE1BQ3BDLE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxNQUNQLEtBQUs7QUFBQSxNQUNMLFFBQVE7QUFBQSxJQUNYLEdBQUUsT0FBTztBQUNWLFNBQUssUUFBUTtBQUNiLFNBQUssY0FBYztBQUNuQixTQUFLLGlCQUFpQjtBQUN0QixTQUFLLGNBQWM7QUFDbkIsU0FBSyxvQkFBbUI7QUFDeEIsU0FBSyxjQUFhO0FBQ2xCLFNBQUssbUJBQWtCO0FBQ3ZCLFNBQUssYUFBYSxLQUFLLGFBQWMsSUFBRyxLQUFLLFFBQVEsUUFBUSxPQUFPLFFBQVEsUUFBUSxLQUFLLFNBQVMsUUFBUSxNQUFNLFFBQVE7QUFDeEgsUUFBSSxDQUFDLEtBQUssbUJBQW1CO0FBQ3pCLFdBQUssaUJBQWdCO0FBQ3JCLFdBQUssb0JBQW1CO0FBQ3hCLFdBQUssZ0JBQWU7QUFDcEIsV0FBSyxTQUFTLFVBQVUsTUFBTSxPQUFPLFdBQVc7QUFDaEQsV0FBSyxvQkFBb0I7QUFBQSxJQUM1QjtBQUNELFNBQUssaUJBQWdCO0FBQ3JCLFNBQUssUUFBUSxLQUFLLFdBQVUsS0FBTTtBQUNsQyxTQUFLLGdCQUFlO0FBQ3BCLFVBQU0sa0JBQWtCLGFBQWEsS0FBSyxNQUFNO0FBQ2hELFNBQUssc0JBQXNCLGtCQUFrQixPQUFPLEtBQUssT0FBTyxVQUFVLElBQUksS0FBSyxLQUFLO0FBQ3hGLFNBQUssVUFBUztBQUNkLFNBQUssNkJBQTRCO0FBQ2pDLFNBQUssdUJBQXNCO0FBQzNCLFNBQUssNEJBQTJCO0FBQ2hDLFFBQUksU0FBUyxZQUFZLFNBQVMsWUFBWSxTQUFTLFdBQVcsU0FBUztBQUN2RSxXQUFLLFFBQVEsU0FBUyxNQUFNLEtBQUssS0FBSztBQUN0QyxXQUFLLGNBQWM7QUFDbkIsV0FBSyxjQUFhO0FBQUEsSUFDckI7QUFDRCxRQUFJLGlCQUFpQjtBQUNqQixXQUFLLHNCQUFzQixLQUFLLEtBQUs7QUFBQSxJQUN4QztBQUNELFNBQUssVUFBUztBQUNkLFNBQUssSUFBRztBQUNSLFNBQUssU0FBUTtBQUNiLFNBQUssWUFBVztBQUFBLEVBQ25CO0FBQUEsRUFDSixZQUFZO0FBQ0wsUUFBSSxnQkFBZ0IsS0FBSyxRQUFRO0FBQ2pDLFFBQUksWUFBWTtBQUNoQixRQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLG1CQUFhLEtBQUs7QUFDbEIsaUJBQVcsS0FBSztBQUFBLElBQzVCLE9BQWU7QUFDSCxtQkFBYSxLQUFLO0FBQ2xCLGlCQUFXLEtBQUs7QUFDaEIsc0JBQWdCLENBQUM7QUFBQSxJQUNwQjtBQUNELFNBQUssY0FBYztBQUNuQixTQUFLLFlBQVk7QUFDakIsU0FBSyxpQkFBaUI7QUFDdEIsU0FBSyxVQUFVLFdBQVc7QUFDMUIsU0FBSyxpQkFBaUIsS0FBSyxRQUFRO0FBQUEsRUFDdEM7QUFBQSxFQUNELGNBQWM7QUFDVixhQUFTLEtBQUssUUFBUSxhQUFhO0FBQUEsTUFDL0I7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCxzQkFBc0I7QUFDbEIsYUFBUyxLQUFLLFFBQVEscUJBQXFCO0FBQUEsTUFDdkM7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCxnQkFBZ0I7QUFDWixRQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLFdBQUssUUFBUSxLQUFLO0FBQ2xCLFdBQUssT0FBTztBQUNaLFdBQUssUUFBUSxLQUFLO0FBQUEsSUFDOUIsT0FBZTtBQUNILFdBQUssU0FBUyxLQUFLO0FBQ25CLFdBQUssTUFBTTtBQUNYLFdBQUssU0FBUyxLQUFLO0FBQUEsSUFDdEI7QUFDRCxTQUFLLGNBQWM7QUFDbkIsU0FBSyxhQUFhO0FBQ2xCLFNBQUssZUFBZTtBQUNwQixTQUFLLGdCQUFnQjtBQUFBLEVBQ3hCO0FBQUEsRUFDRCxxQkFBcUI7QUFDakIsYUFBUyxLQUFLLFFBQVEsb0JBQW9CO0FBQUEsTUFDdEM7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCxXQUFXWCxPQUFNO0FBQ2IsU0FBSyxNQUFNLGNBQWNBLE9BQU0sS0FBSyxXQUFVLENBQUU7QUFDaEQsYUFBUyxLQUFLLFFBQVFBLFFBQU87QUFBQSxNQUN6QjtBQUFBLElBQ1osQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNELG1CQUFtQjtBQUNmLFNBQUssV0FBVyxrQkFBa0I7QUFBQSxFQUNyQztBQUFBLEVBQ0Qsc0JBQXNCO0FBQUEsRUFBRTtBQUFBLEVBQ3hCLGtCQUFrQjtBQUNkLFNBQUssV0FBVyxpQkFBaUI7QUFBQSxFQUNwQztBQUFBLEVBQ0QsbUJBQW1CO0FBQ2YsU0FBSyxXQUFXLGtCQUFrQjtBQUFBLEVBQ3JDO0FBQUEsRUFDSixhQUFhO0FBQ04sV0FBTztFQUNWO0FBQUEsRUFDRCxrQkFBa0I7QUFDZCxTQUFLLFdBQVcsaUJBQWlCO0FBQUEsRUFDcEM7QUFBQSxFQUNELDhCQUE4QjtBQUMxQixhQUFTLEtBQUssUUFBUSw2QkFBNkI7QUFBQSxNQUMvQztBQUFBLElBQ1osQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNKLG1CQUFtQixPQUFPO0FBQ25CLFVBQU0sV0FBVyxLQUFLLFFBQVE7QUFDOUIsUUFBSSxHQUFHLE1BQU07QUFDYixTQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sUUFBUSxJQUFJLE1BQU0sS0FBSTtBQUMxQyxhQUFPLE1BQU07QUFDYixXQUFLLFFBQVEsU0FBUyxTQUFTLFVBQVU7QUFBQSxRQUNyQyxLQUFLO0FBQUEsUUFDTDtBQUFBLFFBQ0E7QUFBQSxNQUNILEdBQUUsSUFBSTtBQUFBLElBQ1Y7QUFBQSxFQUNKO0FBQUEsRUFDRCw2QkFBNkI7QUFDekIsYUFBUyxLQUFLLFFBQVEsNEJBQTRCO0FBQUEsTUFDOUM7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCwrQkFBK0I7QUFDM0IsYUFBUyxLQUFLLFFBQVEsOEJBQThCO0FBQUEsTUFDaEQ7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCx5QkFBeUI7QUFDckIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxXQUFXLFFBQVE7QUFDekIsVUFBTSxXQUFXLEtBQUssTUFBTTtBQUM1QixVQUFNLGNBQWMsU0FBUyxlQUFlO0FBQzVDLFVBQU0sY0FBYyxTQUFTO0FBQzdCLFFBQUksZ0JBQWdCO0FBQ3BCLFFBQUksV0FBVyxXQUFXO0FBQzFCLFFBQUksQ0FBQyxLQUFLLGdCQUFnQixDQUFDLFNBQVMsV0FBVyxlQUFlLGVBQWUsWUFBWSxLQUFLLENBQUMsS0FBSyxhQUFZLEdBQUk7QUFDaEgsV0FBSyxnQkFBZ0I7QUFDckI7QUFBQSxJQUNIO0FBQ0QsVUFBTSxhQUFhLEtBQUs7QUFDeEIsVUFBTSxnQkFBZ0IsV0FBVyxPQUFPO0FBQ3hDLFVBQU0saUJBQWlCLFdBQVcsUUFBUTtBQUMxQyxVQUFNLFdBQVcsWUFBWSxLQUFLLE1BQU0sUUFBUSxlQUFlLEdBQUcsS0FBSyxRQUFRO0FBQy9FLGdCQUFZLFFBQVEsU0FBUyxLQUFLLFdBQVcsV0FBVyxZQUFZLFdBQVc7QUFDL0UsUUFBSSxnQkFBZ0IsSUFBSSxXQUFXO0FBQy9CLGtCQUFZLFlBQVksWUFBWSxRQUFRLFNBQVMsTUFBTTtBQUMzRCxrQkFBWSxLQUFLLFlBQVksa0JBQWtCLFFBQVEsSUFBSSxJQUFJLFNBQVMsVUFBVSxlQUFlLFFBQVEsT0FBTyxLQUFLLE1BQU0sUUFBUSxJQUFJO0FBQ3ZJLHlCQUFtQixLQUFLLEtBQUssZ0JBQWdCLGdCQUFnQixpQkFBaUIsY0FBYztBQUM1RixzQkFBZ0IsVUFBVSxLQUFLLElBQUksS0FBSyxLQUFLLGFBQWEsV0FBVyxRQUFRLFNBQVMsS0FBSyxXQUFXLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBSyxLQUFLLFlBQVksWUFBWSxrQkFBa0IsSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLEtBQUssWUFBWSxpQkFBaUIsa0JBQWtCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5TyxzQkFBZ0IsS0FBSyxJQUFJLGFBQWEsS0FBSyxJQUFJLGFBQWEsYUFBYSxDQUFDO0FBQUEsSUFDN0U7QUFDRCxTQUFLLGdCQUFnQjtBQUFBLEVBQ3hCO0FBQUEsRUFDRCw4QkFBOEI7QUFDMUIsYUFBUyxLQUFLLFFBQVEsNkJBQTZCO0FBQUEsTUFDL0M7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNKO0FBQUEsRUFDRCxnQkFBZ0I7QUFBQSxFQUFFO0FBQUEsRUFDbEIsWUFBWTtBQUNSLGFBQVMsS0FBSyxRQUFRLFdBQVc7QUFBQSxNQUM3QjtBQUFBLElBQ1osQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNELE1BQU07QUFDRixVQUFNLFVBQVU7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFFBQVE7QUFBQSxJQUNwQjtBQUNRLFVBQU0sRUFBRSxPQUFRLFNBQVMsRUFBRSxPQUFPLFVBQVcsT0FBTyxXQUFZLE1BQU0sU0FBVyxNQUFNO0FBQ3ZGLFVBQU0sVUFBVSxLQUFLO0FBQ3JCLFVBQU0sZUFBZSxLQUFLO0FBQzFCLFFBQUksU0FBUztBQUNULFlBQU0sY0FBYyxlQUFlLFdBQVcsTUFBTSxRQUFRLElBQUk7QUFDaEUsVUFBSSxjQUFjO0FBQ2QsZ0JBQVEsUUFBUSxLQUFLO0FBQ3JCLGdCQUFRLFNBQVMsa0JBQWtCLFFBQVEsSUFBSTtBQUFBLE1BQy9ELE9BQW1CO0FBQ0gsZ0JBQVEsU0FBUyxLQUFLO0FBQ3RCLGdCQUFRLFFBQVEsa0JBQWtCLFFBQVEsSUFBSTtBQUFBLE1BQ2pEO0FBQ0QsVUFBSSxTQUFTLFdBQVcsS0FBSyxNQUFNLFFBQVE7QUFDdkMsY0FBTSxFQUFFLE9BQVEsTUFBTyxRQUFTLFlBQWEsS0FBSztBQUNsRCxjQUFNLGNBQWMsU0FBUyxVQUFVO0FBQ3ZDLGNBQU0sZUFBZSxVQUFVLEtBQUssYUFBYTtBQUNqRCxjQUFNLE1BQU0sS0FBSyxJQUFJLFlBQVk7QUFDakMsY0FBTSxNQUFNLEtBQUssSUFBSSxZQUFZO0FBQ2pDLFlBQUksY0FBYztBQUNkLGdCQUFNLGNBQWMsU0FBUyxTQUFTLElBQUksTUFBTSxPQUFPLFFBQVEsTUFBTSxRQUFRO0FBQzdFLGtCQUFRLFNBQVMsS0FBSyxJQUFJLEtBQUssV0FBVyxRQUFRLFNBQVMsY0FBYyxXQUFXO0FBQUEsUUFDeEcsT0FBdUI7QUFDSCxnQkFBTSxhQUFhLFNBQVMsU0FBUyxJQUFJLE1BQU0sT0FBTyxRQUFRLE1BQU0sUUFBUTtBQUM1RSxrQkFBUSxRQUFRLEtBQUssSUFBSSxLQUFLLFVBQVUsUUFBUSxRQUFRLGFBQWEsV0FBVztBQUFBLFFBQ25GO0FBQ0QsYUFBSyxrQkFBa0IsT0FBTyxNQUFNLEtBQUssR0FBRztBQUFBLE1BQy9DO0FBQUEsSUFDSjtBQUNELFNBQUssZUFBYztBQUNuQixRQUFJLGNBQWM7QUFDZCxXQUFLLFFBQVEsS0FBSyxVQUFVLE1BQU0sUUFBUSxLQUFLLFNBQVMsT0FBTyxLQUFLLFNBQVM7QUFDN0UsV0FBSyxTQUFTLFFBQVE7QUFBQSxJQUNsQyxPQUFlO0FBQ0gsV0FBSyxRQUFRLFFBQVE7QUFDckIsV0FBSyxTQUFTLEtBQUssVUFBVSxNQUFNLFNBQVMsS0FBSyxTQUFTLE1BQU0sS0FBSyxTQUFTO0FBQUEsSUFDakY7QUFBQSxFQUNKO0FBQUEsRUFDRCxrQkFBa0IsT0FBTyxNQUFNLEtBQUssS0FBSztBQUNyQyxVQUFNLEVBQUUsT0FBTyxFQUFFLE9BQVEsUUFBVSxHQUFHLFNBQVcsSUFBRyxLQUFLO0FBQ3pELFVBQU0sWUFBWSxLQUFLLGtCQUFrQjtBQUN6QyxVQUFNLG1CQUFtQixhQUFhLFNBQVMsS0FBSyxTQUFTO0FBQzdELFFBQUksS0FBSyxnQkFBZ0I7QUFDckIsWUFBTSxhQUFhLEtBQUssZ0JBQWdCLENBQUMsSUFBSSxLQUFLO0FBQ2xELFlBQU0sY0FBYyxLQUFLLFFBQVEsS0FBSyxnQkFBZ0IsS0FBSyxNQUFNLFNBQVMsQ0FBQztBQUMzRSxVQUFJLGNBQWM7QUFDbEIsVUFBSSxlQUFlO0FBQ25CLFVBQUksV0FBVztBQUNYLFlBQUksa0JBQWtCO0FBQ2xCLHdCQUFjLE1BQU0sTUFBTTtBQUMxQix5QkFBZSxNQUFNLEtBQUs7QUFBQSxRQUM5QyxPQUF1QjtBQUNILHdCQUFjLE1BQU0sTUFBTTtBQUMxQix5QkFBZSxNQUFNLEtBQUs7QUFBQSxRQUM3QjtBQUFBLE1BQ2pCLFdBQXVCLFVBQVUsU0FBUztBQUMxQix1QkFBZSxLQUFLO0FBQUEsTUFDcEMsV0FBdUIsVUFBVSxPQUFPO0FBQ3hCLHNCQUFjLE1BQU07QUFBQSxNQUNwQyxXQUF1QixVQUFVLFNBQVM7QUFDMUIsc0JBQWMsTUFBTSxRQUFRO0FBQzVCLHVCQUFlLEtBQUssUUFBUTtBQUFBLE1BQy9CO0FBQ0QsV0FBSyxjQUFjLEtBQUssS0FBSyxjQUFjLGFBQWEsV0FBVyxLQUFLLFNBQVMsS0FBSyxRQUFRLGFBQWEsQ0FBQztBQUM1RyxXQUFLLGVBQWUsS0FBSyxLQUFLLGVBQWUsY0FBYyxXQUFXLEtBQUssU0FBUyxLQUFLLFFBQVEsY0FBYyxDQUFDO0FBQUEsSUFDNUgsT0FBZTtBQUNILFVBQUksYUFBYSxLQUFLLFNBQVM7QUFDL0IsVUFBSSxnQkFBZ0IsTUFBTSxTQUFTO0FBQ25DLFVBQUksVUFBVSxTQUFTO0FBQ25CLHFCQUFhO0FBQ2Isd0JBQWdCLE1BQU07QUFBQSxNQUN0QyxXQUF1QixVQUFVLE9BQU87QUFDeEIscUJBQWEsS0FBSztBQUNsQix3QkFBZ0I7QUFBQSxNQUNuQjtBQUNELFdBQUssYUFBYSxhQUFhO0FBQy9CLFdBQUssZ0JBQWdCLGdCQUFnQjtBQUFBLElBQ3hDO0FBQUEsRUFDSjtBQUFBLEVBQ0osaUJBQWlCO0FBQ1YsUUFBSSxLQUFLLFVBQVU7QUFDZixXQUFLLFNBQVMsT0FBTyxLQUFLLElBQUksS0FBSyxhQUFhLEtBQUssU0FBUyxJQUFJO0FBQ2xFLFdBQUssU0FBUyxNQUFNLEtBQUssSUFBSSxLQUFLLFlBQVksS0FBSyxTQUFTLEdBQUc7QUFDL0QsV0FBSyxTQUFTLFFBQVEsS0FBSyxJQUFJLEtBQUssY0FBYyxLQUFLLFNBQVMsS0FBSztBQUNyRSxXQUFLLFNBQVMsU0FBUyxLQUFLLElBQUksS0FBSyxlQUFlLEtBQUssU0FBUyxNQUFNO0FBQUEsSUFDM0U7QUFBQSxFQUNKO0FBQUEsRUFDRCxXQUFXO0FBQ1AsYUFBUyxLQUFLLFFBQVEsVUFBVTtBQUFBLE1BQzVCO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDSjtBQUFBLEVBQ0osZUFBZTtBQUNSLFVBQU0sRUFBRSxNQUFPLGFBQWMsS0FBSztBQUNsQyxXQUFPLGFBQWEsU0FBUyxhQUFhLFlBQVksU0FBUztBQUFBLEVBQ2xFO0FBQUEsRUFDSixhQUFhO0FBQ04sV0FBTyxLQUFLLFFBQVE7QUFBQSxFQUN2QjtBQUFBLEVBQ0osc0JBQXNCLE9BQU87QUFDdEIsU0FBSyw0QkFBMkI7QUFDaEMsU0FBSyxtQkFBbUIsS0FBSztBQUM3QixRQUFJLEdBQUc7QUFDUCxTQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sUUFBUSxJQUFJLE1BQU0sS0FBSTtBQUMxQyxVQUFJLGNBQWMsTUFBTSxHQUFHLEtBQUssR0FBRztBQUMvQixjQUFNLE9BQU8sR0FBRyxDQUFDO0FBQ2pCO0FBQ0E7QUFBQSxNQUNIO0FBQUEsSUFDSjtBQUNELFNBQUssMkJBQTBCO0FBQUEsRUFDbEM7QUFBQSxFQUNKLGlCQUFpQjtBQUNWLFFBQUksYUFBYSxLQUFLO0FBQ3RCLFFBQUksQ0FBQyxZQUFZO0FBQ2IsWUFBTSxhQUFhLEtBQUssUUFBUSxNQUFNO0FBQ3RDLFVBQUksUUFBUSxLQUFLO0FBQ2pCLFVBQUksYUFBYSxNQUFNLFFBQVE7QUFDM0IsZ0JBQVEsT0FBTyxPQUFPLFVBQVU7QUFBQSxNQUNuQztBQUNELFdBQUssY0FBYyxhQUFhLEtBQUssbUJBQW1CLE9BQU8sTUFBTSxNQUFNO0FBQUEsSUFDOUU7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0osbUJBQW1CLE9BQU8sUUFBUTtBQUMzQixVQUFNLEVBQUUsS0FBTSxtQkFBbUIsT0FBTSxJQUFNO0FBQzdDLFVBQU0sU0FBUztBQUNmLFVBQU0sVUFBVTtBQUNoQixRQUFJLGtCQUFrQjtBQUN0QixRQUFJLG1CQUFtQjtBQUN2QixRQUFJLEdBQUcsR0FBRyxNQUFNLE9BQU8sVUFBVSxZQUFZLE9BQU8sWUFBWSxPQUFPLFFBQVE7QUFDL0UsU0FBSSxJQUFJLEdBQUcsSUFBSSxRQUFRLEVBQUUsR0FBRTtBQUN2QixjQUFRLE1BQU0sR0FBRztBQUNqQixpQkFBVyxLQUFLLHdCQUF3QixDQUFDO0FBQ3pDLFVBQUksT0FBTyxhQUFhLFNBQVM7QUFDakMsY0FBUSxPQUFPLGNBQWMsT0FBTyxlQUFlO0FBQUEsUUFDL0MsTUFBTSxDQUFFO0FBQUEsUUFDUixJQUFJLENBQUU7QUFBQSxNQUN0QjtBQUNZLG1CQUFhLFNBQVM7QUFDdEIsY0FBUSxTQUFTO0FBQ2pCLFVBQUksQ0FBQyxjQUFjLEtBQUssS0FBSyxDQUFDLFFBQVEsS0FBSyxHQUFHO0FBQzFDLGdCQUFRLGFBQWEsS0FBSyxNQUFNLE1BQU0sTUFBTSxJQUFJLE9BQU8sS0FBSztBQUM1RCxpQkFBUztBQUFBLE1BQ3pCLFdBQXVCLFFBQVEsS0FBSyxHQUFHO0FBQ3ZCLGFBQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDMUMsd0JBQWMsTUFBTTtBQUNwQixjQUFJLENBQUMsY0FBYyxXQUFXLEtBQUssQ0FBQyxRQUFRLFdBQVcsR0FBRztBQUN0RCxvQkFBUSxhQUFhLEtBQUssTUFBTSxNQUFNLE1BQU0sSUFBSSxPQUFPLFdBQVc7QUFDbEUsc0JBQVU7QUFBQSxVQUNiO0FBQUEsUUFDSjtBQUFBLE1BQ0o7QUFDRCxhQUFPLEtBQUssS0FBSztBQUNqQixjQUFRLEtBQUssTUFBTTtBQUNuQix3QkFBa0IsS0FBSyxJQUFJLE9BQU8sZUFBZTtBQUNqRCx5QkFBbUIsS0FBSyxJQUFJLFFBQVEsZ0JBQWdCO0FBQUEsSUFDdkQ7QUFDRCxtQkFBZSxRQUFRLE1BQU07QUFDN0IsVUFBTSxTQUFTLE9BQU8sUUFBUSxlQUFlO0FBQzdDLFVBQU0sVUFBVSxRQUFRLFFBQVEsZ0JBQWdCO0FBQ2hELFVBQU0sVUFBVSxDQUFDLFNBQU87QUFBQSxNQUNoQixPQUFPLE9BQU8sUUFBUTtBQUFBLE1BQ3RCLFFBQVEsUUFBUSxRQUFRO0FBQUEsSUFDeEM7QUFDUSxXQUFPO0FBQUEsTUFDSCxPQUFPLFFBQVEsQ0FBQztBQUFBLE1BQ2hCLE1BQU0sUUFBUSxTQUFTLENBQUM7QUFBQSxNQUN4QixRQUFRLFFBQVEsTUFBTTtBQUFBLE1BQ3RCLFNBQVMsUUFBUSxPQUFPO0FBQUEsTUFDeEI7QUFBQSxNQUNBO0FBQUEsSUFDWjtBQUFBLEVBQ0s7QUFBQSxFQUNKLGlCQUFpQixPQUFPO0FBQ2pCLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixpQkFBaUIsT0FBTyxPQUFPO0FBQ3hCLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixpQkFBaUIsT0FBTztBQUFBLEVBQUU7QUFBQSxFQUMxQixnQkFBZ0IsT0FBTztBQUNoQixVQUFNLFFBQVEsS0FBSztBQUNuQixRQUFJLFFBQVEsS0FBSyxRQUFRLE1BQU0sU0FBUyxHQUFHO0FBQ3ZDLGFBQU87QUFBQSxJQUNWO0FBQ0QsV0FBTyxLQUFLLGlCQUFpQixNQUFNLE9BQU8sS0FBSztBQUFBLEVBQ2xEO0FBQUEsRUFDSixtQkFBbUIsU0FBUztBQUNyQixRQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLGdCQUFVLElBQUk7QUFBQSxJQUNqQjtBQUNELFVBQU0sUUFBUSxLQUFLLGNBQWMsVUFBVSxLQUFLO0FBQ2hELFdBQU8sWUFBWSxLQUFLLGlCQUFpQixZQUFZLEtBQUssT0FBTyxPQUFPLENBQUMsSUFBSSxLQUFLO0FBQUEsRUFDckY7QUFBQSxFQUNKLG1CQUFtQixPQUFPO0FBQ25CLFVBQU0sV0FBVyxRQUFRLEtBQUssZUFBZSxLQUFLO0FBQ2xELFdBQU8sS0FBSyxpQkFBaUIsSUFBSSxVQUFVO0FBQUEsRUFDOUM7QUFBQSxFQUNKLGVBQWU7QUFDUixXQUFPLEtBQUssaUJBQWlCLEtBQUssYUFBYztBQUFBLEVBQ25EO0FBQUEsRUFDSixlQUFlO0FBQ1IsVUFBTSxFQUFFLEtBQU0sSUFBTSxJQUFHO0FBQ3ZCLFdBQU8sTUFBTSxLQUFLLE1BQU0sSUFBSSxNQUFNLE1BQU0sS0FBSyxNQUFNLElBQUksTUFBTTtBQUFBLEVBQ2hFO0FBQUEsRUFDSixXQUFXLE9BQU87QUFDWCxVQUFNLFFBQVEsS0FBSyxTQUFTO0FBQzVCLFFBQUksU0FBUyxLQUFLLFFBQVEsTUFBTSxRQUFRO0FBQ3BDLFlBQU0sT0FBTyxNQUFNO0FBQ25CLGFBQU8sS0FBSyxhQUFhLEtBQUssV0FBVyxrQkFBa0IsS0FBSyxXQUFZLEdBQUUsT0FBTyxJQUFJO0FBQUEsSUFDNUY7QUFDRCxXQUFPLEtBQUssYUFBYSxLQUFLLFdBQVcsbUJBQW1CLEtBQUssTUFBTSxjQUFjLElBQUk7QUFBQSxFQUM1RjtBQUFBLEVBQ0osWUFBWTtBQUNMLFVBQU0sY0FBYyxLQUFLLFFBQVE7QUFDakMsVUFBTSxNQUFNLFVBQVUsS0FBSyxhQUFhO0FBQ3hDLFVBQU0sTUFBTSxLQUFLLElBQUksS0FBSyxJQUFJLEdBQUcsQ0FBQztBQUNsQyxVQUFNLE1BQU0sS0FBSyxJQUFJLEtBQUssSUFBSSxHQUFHLENBQUM7QUFDbEMsVUFBTSxhQUFhLEtBQUs7QUFDeEIsVUFBTSxVQUFVLFlBQVksbUJBQW1CO0FBQy9DLFVBQU0sSUFBSSxhQUFhLFdBQVcsT0FBTyxRQUFRLFVBQVU7QUFDM0QsVUFBTVAsS0FBSSxhQUFhLFdBQVcsUUFBUSxTQUFTLFVBQVU7QUFDN0QsV0FBTyxLQUFLLGFBQVksSUFBS0EsS0FBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU1BLEtBQUksTUFBTUEsS0FBSSxNQUFNLElBQUksTUFBTUEsS0FBSSxNQUFNLElBQUk7QUFBQSxFQUMxRztBQUFBLEVBQ0osYUFBYTtBQUNOLFVBQU0sVUFBVSxLQUFLLFFBQVE7QUFDN0IsUUFBSSxZQUFZLFFBQVE7QUFDcEIsYUFBTyxDQUFDLENBQUM7QUFBQSxJQUNaO0FBQ0QsV0FBTyxLQUFLLDBCQUEwQixTQUFTO0FBQUEsRUFDbEQ7QUFBQSxFQUNKLHNCQUFzQixXQUFXO0FBQzFCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sUUFBUSxLQUFLO0FBQ25CLFVBQU0sVUFBVSxLQUFLO0FBQ3JCLFVBQU0sRUFBRSxNQUFPLFVBQVcsT0FBTSxJQUFNO0FBQ3RDLFVBQU0sU0FBUyxLQUFLO0FBQ3BCLFVBQU0sZUFBZSxLQUFLO0FBQzFCLFVBQU0sUUFBUSxLQUFLO0FBQ25CLFVBQU0sY0FBYyxNQUFNLFVBQVUsU0FBUyxJQUFJO0FBQ2pELFVBQU0sS0FBSyxrQkFBa0IsSUFBSTtBQUNqQyxVQUFNLFFBQVE7QUFDZCxVQUFNLGFBQWEsT0FBTyxXQUFXLEtBQUssV0FBWTtBQUN0RCxVQUFNLFlBQVksV0FBVyxVQUFVLFdBQVcsUUFBUTtBQUMxRCxVQUFNLGdCQUFnQixZQUFZO0FBQ2xDLFVBQU0sbUJBQW1CLFNBQVMsT0FBTztBQUNyQyxhQUFPLFlBQVksT0FBTyxPQUFPLFNBQVM7QUFBQSxJQUN0RDtBQUNRLFFBQUksYUFBYSxHQUFHLFdBQVc7QUFDL0IsUUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJO0FBQ3BDLFFBQUksYUFBYSxPQUFPO0FBQ3BCLG9CQUFjLGlCQUFpQixLQUFLLE1BQU07QUFDMUMsWUFBTSxLQUFLLFNBQVM7QUFDcEIsWUFBTSxjQUFjO0FBQ3BCLFdBQUssaUJBQWlCLFVBQVUsR0FBRyxJQUFJO0FBQ3ZDLFdBQUssVUFBVTtBQUFBLElBQzNCLFdBQW1CLGFBQWEsVUFBVTtBQUM5QixvQkFBYyxpQkFBaUIsS0FBSyxHQUFHO0FBQ3ZDLFdBQUssVUFBVTtBQUNmLFdBQUssaUJBQWlCLFVBQVUsTUFBTSxJQUFJO0FBQzFDLFlBQU0sY0FBYztBQUNwQixZQUFNLEtBQUssTUFBTTtBQUFBLElBQzdCLFdBQW1CLGFBQWEsUUFBUTtBQUM1QixvQkFBYyxpQkFBaUIsS0FBSyxLQUFLO0FBQ3pDLFlBQU0sS0FBSyxRQUFRO0FBQ25CLFlBQU0sY0FBYztBQUNwQixXQUFLLGlCQUFpQixVQUFVLElBQUksSUFBSTtBQUN4QyxXQUFLLFVBQVU7QUFBQSxJQUMzQixXQUFtQixhQUFhLFNBQVM7QUFDN0Isb0JBQWMsaUJBQWlCLEtBQUssSUFBSTtBQUN4QyxXQUFLLFVBQVU7QUFDZixXQUFLLGlCQUFpQixVQUFVLEtBQUssSUFBSTtBQUN6QyxZQUFNLGNBQWM7QUFDcEIsWUFBTSxLQUFLLE9BQU87QUFBQSxJQUM5QixXQUFtQixTQUFTLEtBQUs7QUFDckIsVUFBSSxhQUFhLFVBQVU7QUFDdkIsc0JBQWMsa0JBQWtCLFVBQVUsTUFBTSxVQUFVLFVBQVUsSUFBSSxHQUFHO0FBQUEsTUFDM0YsV0FBdUIsU0FBUyxRQUFRLEdBQUc7QUFDM0IsY0FBTSxpQkFBaUIsT0FBTyxLQUFLLFFBQVEsRUFBRTtBQUM3QyxjQUFNLFFBQVEsU0FBUztBQUN2QixzQkFBYyxpQkFBaUIsS0FBSyxNQUFNLE9BQU8sZ0JBQWdCLGlCQUFpQixLQUFLLENBQUM7QUFBQSxNQUMzRjtBQUNELFdBQUssVUFBVTtBQUNmLFdBQUssVUFBVTtBQUNmLFlBQU0sY0FBYztBQUNwQixZQUFNLE1BQU07QUFBQSxJQUN4QixXQUFtQixTQUFTLEtBQUs7QUFDckIsVUFBSSxhQUFhLFVBQVU7QUFDdkIsc0JBQWMsa0JBQWtCLFVBQVUsT0FBTyxVQUFVLFNBQVMsQ0FBQztBQUFBLE1BQ3JGLFdBQXVCLFNBQVMsUUFBUSxHQUFHO0FBQzNCLGNBQU0sa0JBQWtCLE9BQU8sS0FBSyxRQUFRLEVBQUU7QUFDOUMsY0FBTSxTQUFTLFNBQVM7QUFDeEIsc0JBQWMsaUJBQWlCLEtBQUssTUFBTSxPQUFPLGlCQUFpQixpQkFBaUIsTUFBTSxDQUFDO0FBQUEsTUFDN0Y7QUFDRCxZQUFNLGNBQWM7QUFDcEIsWUFBTSxNQUFNO0FBQ1osV0FBSyxVQUFVO0FBQ2YsV0FBSyxVQUFVO0FBQUEsSUFDbEI7QUFDRCxVQUFNLFFBQVEsZUFBZSxRQUFRLE1BQU0sZUFBZSxXQUFXO0FBQ3JFLFVBQU0sT0FBTyxLQUFLLElBQUksR0FBRyxLQUFLLEtBQUssY0FBYyxLQUFLLENBQUM7QUFDdkQsU0FBSSxJQUFJLEdBQUcsSUFBSSxhQUFhLEtBQUssTUFBSztBQUNsQyxZQUFNLFVBQVUsS0FBSyxXQUFXLENBQUM7QUFDakMsWUFBTSxjQUFjLEtBQUssV0FBVyxPQUFPO0FBQzNDLFlBQU0sb0JBQW9CLE9BQU8sV0FBVyxPQUFPO0FBQ25ELFlBQU0sWUFBWSxZQUFZO0FBQzlCLFlBQU0sWUFBWSxZQUFZO0FBQzlCLFlBQU0sYUFBYSxrQkFBa0IsUUFBUTtBQUM3QyxZQUFNLG1CQUFtQixrQkFBa0I7QUFDM0MsWUFBTSxZQUFZLFlBQVk7QUFDOUIsWUFBTSxZQUFZLFlBQVk7QUFDOUIsWUFBTSxpQkFBaUIsWUFBWSxrQkFBa0I7QUFDckQsWUFBTSx1QkFBdUIsWUFBWTtBQUN6QyxrQkFBWSxvQkFBb0IsTUFBTSxHQUFHLE1BQU07QUFDL0MsVUFBSSxjQUFjLFFBQVc7QUFDekI7QUFBQSxNQUNIO0FBQ0QseUJBQW1CLFlBQVksT0FBTyxXQUFXLFNBQVM7QUFDMUQsVUFBSSxjQUFjO0FBQ2QsY0FBTSxNQUFNLEtBQUssS0FBSztBQUFBLE1BQ3RDLE9BQW1CO0FBQ0gsY0FBTSxNQUFNLEtBQUssS0FBSztBQUFBLE1BQ3pCO0FBQ0QsWUFBTSxLQUFLO0FBQUEsUUFDUDtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNoQixDQUFhO0FBQUEsSUFDSjtBQUNELFNBQUssZUFBZTtBQUNwQixTQUFLLGVBQWU7QUFDcEIsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLG1CQUFtQixXQUFXO0FBQ3ZCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sVUFBVSxLQUFLO0FBQ3JCLFVBQU0sRUFBRSxVQUFXLE9BQU8sWUFBVyxJQUFNO0FBQzNDLFVBQU0sZUFBZSxLQUFLO0FBQzFCLFVBQU0sUUFBUSxLQUFLO0FBQ25CLFVBQU0sRUFBRSxPQUFRLFlBQWEsU0FBVSxPQUFNLElBQU07QUFDbkQsVUFBTSxLQUFLLGtCQUFrQixRQUFRLElBQUk7QUFDekMsVUFBTSxpQkFBaUIsS0FBSztBQUM1QixVQUFNLGtCQUFrQixTQUFTLENBQUMsVUFBVTtBQUM1QyxVQUFNLFdBQVcsQ0FBQyxVQUFVLEtBQUssYUFBYTtBQUM5QyxVQUFNLFFBQVE7QUFDZCxRQUFJLEdBQUcsTUFBTSxNQUFNLE9BQU8sR0FBRyxHQUFHLFdBQVcsT0FBTyxNQUFNLFlBQVksV0FBVztBQUMvRSxRQUFJLGVBQWU7QUFDbkIsUUFBSSxhQUFhLE9BQU87QUFDcEIsVUFBSSxLQUFLLFNBQVM7QUFDbEIsa0JBQVksS0FBSztJQUM3QixXQUFtQixhQUFhLFVBQVU7QUFDOUIsVUFBSSxLQUFLLE1BQU07QUFDZixrQkFBWSxLQUFLO0lBQzdCLFdBQW1CLGFBQWEsUUFBUTtBQUM1QixZQUFNLE1BQU0sS0FBSyx3QkFBd0IsRUFBRTtBQUMzQyxrQkFBWSxJQUFJO0FBQ2hCLFVBQUksSUFBSTtBQUFBLElBQ3BCLFdBQW1CLGFBQWEsU0FBUztBQUM3QixZQUFNLE9BQU8sS0FBSyx3QkFBd0IsRUFBRTtBQUM1QyxrQkFBWSxLQUFLO0FBQ2pCLFVBQUksS0FBSztBQUFBLElBQ3JCLFdBQW1CLFNBQVMsS0FBSztBQUNyQixVQUFJLGFBQWEsVUFBVTtBQUN2QixhQUFLLFVBQVUsTUFBTSxVQUFVLFVBQVUsSUFBSTtBQUFBLE1BQzdELFdBQXVCLFNBQVMsUUFBUSxHQUFHO0FBQzNCLGNBQU0saUJBQWlCLE9BQU8sS0FBSyxRQUFRLEVBQUU7QUFDN0MsY0FBTSxRQUFRLFNBQVM7QUFDdkIsWUFBSSxLQUFLLE1BQU0sT0FBTyxnQkFBZ0IsaUJBQWlCLEtBQUssSUFBSTtBQUFBLE1BQ25FO0FBQ0Qsa0JBQVksS0FBSztJQUM3QixXQUFtQixTQUFTLEtBQUs7QUFDckIsVUFBSSxhQUFhLFVBQVU7QUFDdkIsYUFBSyxVQUFVLE9BQU8sVUFBVSxTQUFTLElBQUk7QUFBQSxNQUM3RCxXQUF1QixTQUFTLFFBQVEsR0FBRztBQUMzQixjQUFNLGtCQUFrQixPQUFPLEtBQUssUUFBUSxFQUFFO0FBQzlDLGNBQU0sU0FBUyxTQUFTO0FBQ3hCLFlBQUksS0FBSyxNQUFNLE9BQU8saUJBQWlCLGlCQUFpQixNQUFNO0FBQUEsTUFDakU7QUFDRCxrQkFBWSxLQUFLLHdCQUF3QixFQUFFLEVBQUU7QUFBQSxJQUNoRDtBQUNELFFBQUksU0FBUyxLQUFLO0FBQ2QsVUFBSSxVQUFVLFNBQVM7QUFDbkIsdUJBQWU7QUFBQSxNQUMvQixXQUF1QixVQUFVLE9BQU87QUFDeEIsdUJBQWU7QUFBQSxNQUNsQjtBQUFBLElBQ0o7QUFDRCxVQUFNLGFBQWEsS0FBSztBQUN4QixTQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sUUFBUSxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQzFDLGFBQU8sTUFBTTtBQUNiLGNBQVEsS0FBSztBQUNiLFlBQU0sY0FBYyxZQUFZLFdBQVcsS0FBSyxXQUFXLENBQUMsQ0FBQztBQUM3RCxjQUFRLEtBQUssZ0JBQWdCLENBQUMsSUFBSSxZQUFZO0FBQzlDLGFBQU8sS0FBSyx3QkFBd0IsQ0FBQztBQUNyQyxtQkFBYSxLQUFLO0FBQ2xCLGtCQUFZLFFBQVEsS0FBSyxJQUFJLE1BQU0sU0FBUztBQUM1QyxZQUFNLFlBQVksWUFBWTtBQUM5QixZQUFNRyxTQUFRLFlBQVk7QUFDMUIsWUFBTSxjQUFjLFlBQVk7QUFDaEMsWUFBTSxjQUFjLFlBQVk7QUFDaEMsVUFBSSxnQkFBZ0I7QUFDcEIsVUFBSSxjQUFjO0FBQ2QsWUFBSTtBQUNKLFlBQUksY0FBYyxTQUFTO0FBQ3ZCLGNBQUksTUFBTSxPQUFPLEdBQUc7QUFDaEIsNEJBQWdCLENBQUMsS0FBSyxRQUFRLFVBQVUsVUFBVTtBQUFBLFVBQzFFLFdBQStCLE1BQU0sR0FBRztBQUNoQiw0QkFBZ0IsQ0FBQyxLQUFLLFFBQVEsVUFBVSxTQUFTO0FBQUEsVUFDekUsT0FBMkI7QUFDSCw0QkFBZ0I7QUFBQSxVQUNuQjtBQUFBLFFBQ0o7QUFDRCxZQUFJLGFBQWEsT0FBTztBQUNwQixjQUFJLGVBQWUsVUFBVSxhQUFhLEdBQUc7QUFDekMseUJBQWEsQ0FBQyxZQUFZLGFBQWEsYUFBYTtBQUFBLFVBQzVFLFdBQStCLGVBQWUsVUFBVTtBQUNoQyx5QkFBYSxDQUFDLFdBQVcsUUFBUSxTQUFTLElBQUksWUFBWSxhQUFhO0FBQUEsVUFDL0YsT0FBMkI7QUFDSCx5QkFBYSxDQUFDLFdBQVcsUUFBUSxTQUFTLGFBQWE7QUFBQSxVQUMxRDtBQUFBLFFBQ3JCLE9BQXVCO0FBQ0gsY0FBSSxlQUFlLFVBQVUsYUFBYSxHQUFHO0FBQ3pDLHlCQUFhLGFBQWE7QUFBQSxVQUNsRCxXQUErQixlQUFlLFVBQVU7QUFDaEMseUJBQWEsV0FBVyxRQUFRLFNBQVMsSUFBSSxZQUFZO0FBQUEsVUFDakYsT0FBMkI7QUFDSCx5QkFBYSxXQUFXLFFBQVEsU0FBUyxZQUFZO0FBQUEsVUFDeEQ7QUFBQSxRQUNKO0FBQ0QsWUFBSSxRQUFRO0FBQ1Isd0JBQWM7QUFBQSxRQUNqQjtBQUNELFlBQUksYUFBYSxLQUFLLENBQUMsWUFBWSxtQkFBbUI7QUFDbEQsZUFBSyxhQUFhLElBQUksS0FBSyxJQUFJLFFBQVE7QUFBQSxRQUMxQztBQUFBLE1BQ2pCLE9BQW1CO0FBQ0gsWUFBSTtBQUNKLHNCQUFjLElBQUksYUFBYSxhQUFhO0FBQUEsTUFDL0M7QUFDRCxVQUFJO0FBQ0osVUFBSSxZQUFZLG1CQUFtQjtBQUMvQixjQUFNLGVBQWUsVUFBVSxZQUFZLGVBQWU7QUFDMUQsY0FBTSxTQUFTLFdBQVcsUUFBUTtBQUNsQyxjQUFNLFFBQVEsV0FBVyxPQUFPO0FBQ2hDLFlBQUksTUFBTSxhQUFhLGFBQWE7QUFDcEMsWUFBSSxPQUFPLElBQUksYUFBYTtBQUM1QixnQkFBTztBQUFBLGVBQ0U7QUFDRCxtQkFBTyxTQUFTO0FBQ2hCO0FBQUEsZUFDQztBQUNELG1CQUFPO0FBQ1A7QUFBQTtBQUVSLGdCQUFPO0FBQUEsZUFDRTtBQUNELG9CQUFRLFFBQVE7QUFDaEI7QUFBQSxlQUNDO0FBQ0Qsb0JBQVE7QUFDUjtBQUFBO0FBRVIsbUJBQVc7QUFBQSxVQUNQO0FBQUEsVUFDQTtBQUFBLFVBQ0EsT0FBTyxRQUFRLGFBQWE7QUFBQSxVQUM1QixRQUFRLFNBQVMsYUFBYTtBQUFBLFVBQzlCLE9BQU8sWUFBWTtBQUFBLFFBQ3ZDO0FBQUEsTUFDYTtBQUNELFlBQU0sS0FBSztBQUFBLFFBQ1A7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0EsU0FBUztBQUFBLFVBQ0w7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxVQUNBLFdBQVc7QUFBQSxVQUNYO0FBQUEsVUFDQSxhQUFhO0FBQUEsWUFDVDtBQUFBLFlBQ0E7QUFBQSxVQUNIO0FBQUEsVUFDRDtBQUFBLFFBQ0g7QUFBQSxNQUNqQixDQUFhO0FBQUEsSUFDSjtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDRCwwQkFBMEI7QUFDdEIsVUFBTSxFQUFFLFVBQVcsVUFBVyxLQUFLO0FBQ25DLFVBQU0sV0FBVyxDQUFDLFVBQVUsS0FBSyxhQUFhO0FBQzlDLFFBQUksVUFBVTtBQUNWLGFBQU8sYUFBYSxRQUFRLFNBQVM7QUFBQSxJQUN4QztBQUNELFFBQUksUUFBUTtBQUNaLFFBQUksTUFBTSxVQUFVLFNBQVM7QUFDekIsY0FBUTtBQUFBLElBQ3BCLFdBQW1CLE1BQU0sVUFBVSxPQUFPO0FBQzlCLGNBQVE7QUFBQSxJQUNwQixXQUFtQixNQUFNLFVBQVUsU0FBUztBQUNoQyxjQUFRO0FBQUEsSUFDWDtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDRCx3QkFBd0IsSUFBSTtBQUN4QixVQUFNLEVBQUUsVUFBVyxPQUFPLEVBQUUsWUFBYSxRQUFTLFFBQVUsTUFBTSxLQUFLO0FBQ3ZFLFVBQU0sYUFBYSxLQUFLO0FBQ3hCLFVBQU0saUJBQWlCLEtBQUs7QUFDNUIsVUFBTSxTQUFTLFdBQVcsT0FBTztBQUNqQyxRQUFJO0FBQ0osUUFBSTtBQUNKLFFBQUksYUFBYSxRQUFRO0FBQ3JCLFVBQUksUUFBUTtBQUNSLFlBQUksS0FBSyxRQUFRO0FBQ2pCLFlBQUksZUFBZSxRQUFRO0FBQ3ZCLHNCQUFZO0FBQUEsUUFDaEMsV0FBMkIsZUFBZSxVQUFVO0FBQ2hDLHNCQUFZO0FBQ1osZUFBSyxTQUFTO0FBQUEsUUFDbEMsT0FBdUI7QUFDSCxzQkFBWTtBQUNaLGVBQUs7QUFBQSxRQUNSO0FBQUEsTUFDakIsT0FBbUI7QUFDSCxZQUFJLEtBQUssUUFBUTtBQUNqQixZQUFJLGVBQWUsUUFBUTtBQUN2QixzQkFBWTtBQUFBLFFBQ2hDLFdBQTJCLGVBQWUsVUFBVTtBQUNoQyxzQkFBWTtBQUNaLGVBQUssU0FBUztBQUFBLFFBQ2xDLE9BQXVCO0FBQ0gsc0JBQVk7QUFDWixjQUFJLEtBQUs7QUFBQSxRQUNaO0FBQUEsTUFDSjtBQUFBLElBQ2IsV0FBbUIsYUFBYSxTQUFTO0FBQzdCLFVBQUksUUFBUTtBQUNSLFlBQUksS0FBSyxPQUFPO0FBQ2hCLFlBQUksZUFBZSxRQUFRO0FBQ3ZCLHNCQUFZO0FBQUEsUUFDaEMsV0FBMkIsZUFBZSxVQUFVO0FBQ2hDLHNCQUFZO0FBQ1osZUFBSyxTQUFTO0FBQUEsUUFDbEMsT0FBdUI7QUFDSCxzQkFBWTtBQUNaLGVBQUs7QUFBQSxRQUNSO0FBQUEsTUFDakIsT0FBbUI7QUFDSCxZQUFJLEtBQUssT0FBTztBQUNoQixZQUFJLGVBQWUsUUFBUTtBQUN2QixzQkFBWTtBQUFBLFFBQ2hDLFdBQTJCLGVBQWUsVUFBVTtBQUNoQyxzQkFBWTtBQUNaLGVBQUssU0FBUztBQUFBLFFBQ2xDLE9BQXVCO0FBQ0gsc0JBQVk7QUFDWixjQUFJLEtBQUs7QUFBQSxRQUNaO0FBQUEsTUFDSjtBQUFBLElBQ2IsT0FBZTtBQUNILGtCQUFZO0FBQUEsSUFDZjtBQUNELFdBQU87QUFBQSxNQUNIO0FBQUEsTUFDQTtBQUFBLElBQ1o7QUFBQSxFQUNLO0FBQUEsRUFDSixvQkFBb0I7QUFDYixRQUFJLEtBQUssUUFBUSxNQUFNLFFBQVE7QUFDM0I7QUFBQSxJQUNIO0FBQ0QsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxXQUFXLEtBQUssUUFBUTtBQUM5QixRQUFJLGFBQWEsVUFBVSxhQUFhLFNBQVM7QUFDN0MsYUFBTztBQUFBLFFBQ0gsS0FBSztBQUFBLFFBQ0wsTUFBTSxLQUFLO0FBQUEsUUFDWCxRQUFRLE1BQU07QUFBQSxRQUNkLE9BQU8sS0FBSztBQUFBLE1BQzVCO0FBQUEsSUFDUztBQUNELFFBQUksYUFBYSxTQUFTLGFBQWEsVUFBVTtBQUM3QyxhQUFPO0FBQUEsUUFDSCxLQUFLLEtBQUs7QUFBQSxRQUNWLE1BQU07QUFBQSxRQUNOLFFBQVEsS0FBSztBQUFBLFFBQ2IsT0FBTyxNQUFNO0FBQUEsTUFDN0I7QUFBQSxJQUNTO0FBQUEsRUFDSjtBQUFBLEVBQ0osaUJBQWlCO0FBQ1YsVUFBTSxFQUFFLEtBQU0sU0FBUyxFQUFFLGdCQUFrQixHQUFHLE1BQU8sS0FBTSxPQUFRLE9BQVMsSUFBRztBQUMvRSxRQUFJLGlCQUFpQjtBQUNqQixVQUFJLEtBQUk7QUFDUixVQUFJLFlBQVk7QUFDaEIsVUFBSSxTQUFTLE1BQU0sS0FBSyxPQUFPLE1BQU07QUFDckMsVUFBSSxRQUFPO0FBQUEsSUFDZDtBQUFBLEVBQ0o7QUFBQSxFQUNELHFCQUFxQixPQUFPO0FBQ3hCLFVBQU0sT0FBTyxLQUFLLFFBQVE7QUFDMUIsUUFBSSxDQUFDLEtBQUssV0FBWSxLQUFJLENBQUMsS0FBSyxTQUFTO0FBQ3JDLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxRQUFRLE1BQU0sVUFBVSxDQUFDLE1BQUksRUFBRSxVQUFVLEtBQUs7QUFDcEQsUUFBSSxTQUFTLEdBQUc7QUFDWixZQUFNLE9BQU8sS0FBSyxXQUFXLEtBQUssV0FBVyxLQUFLLENBQUM7QUFDbkQsYUFBTyxLQUFLO0FBQUEsSUFDZjtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixTQUFTLFdBQVc7QUFDYixVQUFNLE9BQU8sS0FBSyxRQUFRO0FBQzFCLFVBQU0sTUFBTSxLQUFLO0FBQ2pCLFVBQU0sUUFBUSxLQUFLLG1CQUFtQixLQUFLLGlCQUFpQixLQUFLLHNCQUFzQixTQUFTO0FBQ2hHLFFBQUksR0FBRztBQUNQLFVBQU0sV0FBVyxDQUFDLElBQUksSUFBSSxVQUFRO0FBQzlCLFVBQUksQ0FBQyxNQUFNLFNBQVMsQ0FBQyxNQUFNLE9BQU87QUFDOUI7QUFBQSxNQUNIO0FBQ0QsVUFBSSxLQUFJO0FBQ1IsVUFBSSxZQUFZLE1BQU07QUFDdEIsVUFBSSxjQUFjLE1BQU07QUFDeEIsVUFBSSxZQUFZLE1BQU0sY0FBYyxDQUFFO0FBQ3RDLFVBQUksaUJBQWlCLE1BQU07QUFDM0IsVUFBSSxVQUFTO0FBQ2IsVUFBSSxPQUFPLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDckIsVUFBSSxPQUFPLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDckIsVUFBSSxPQUFNO0FBQ1YsVUFBSSxRQUFPO0FBQUEsSUFDdkI7QUFDUSxRQUFJLEtBQUssU0FBUztBQUNkLFdBQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDMUMsY0FBTSxPQUFPLE1BQU07QUFDbkIsWUFBSSxLQUFLLGlCQUFpQjtBQUN0QixtQkFBUztBQUFBLFlBQ0wsR0FBRyxLQUFLO0FBQUEsWUFDUixHQUFHLEtBQUs7QUFBQSxVQUNoQyxHQUF1QjtBQUFBLFlBQ0MsR0FBRyxLQUFLO0FBQUEsWUFDUixHQUFHLEtBQUs7QUFBQSxVQUNYLEdBQUUsSUFBSTtBQUFBLFFBQ1Y7QUFDRCxZQUFJLEtBQUssV0FBVztBQUNoQixtQkFBUztBQUFBLFlBQ0wsR0FBRyxLQUFLO0FBQUEsWUFDUixHQUFHLEtBQUs7QUFBQSxVQUNoQyxHQUF1QjtBQUFBLFlBQ0MsR0FBRyxLQUFLO0FBQUEsWUFDUixHQUFHLEtBQUs7QUFBQSxVQUNoQyxHQUF1QjtBQUFBLFlBQ0MsT0FBTyxLQUFLO0FBQUEsWUFDWixPQUFPLEtBQUs7QUFBQSxZQUNaLFlBQVksS0FBSztBQUFBLFlBQ2pCLGtCQUFrQixLQUFLO0FBQUEsVUFDL0MsQ0FBcUI7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFDSixhQUFhO0FBQ04sVUFBTSxFQUFFLE9BQVEsS0FBTSxTQUFTLEVBQUUsUUFBUyxLQUFJLEVBQU0sSUFBRztBQUN2RCxVQUFNLGFBQWEsT0FBTyxXQUFXLEtBQUssV0FBWTtBQUN0RCxVQUFNLFlBQVksT0FBTyxVQUFVLFdBQVcsUUFBUTtBQUN0RCxRQUFJLENBQUMsV0FBVztBQUNaO0FBQUEsSUFDSDtBQUNELFVBQU0sZ0JBQWdCLEtBQUssV0FBVyxLQUFLLFdBQVcsQ0FBQyxDQUFDLEVBQUU7QUFDMUQsVUFBTSxjQUFjLEtBQUs7QUFDekIsUUFBSSxJQUFJLElBQUksSUFBSTtBQUNoQixRQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLFdBQUssWUFBWSxPQUFPLEtBQUssTUFBTSxTQUFTLElBQUksWUFBWTtBQUM1RCxXQUFLLFlBQVksT0FBTyxLQUFLLE9BQU8sYUFBYSxJQUFJLGdCQUFnQjtBQUNyRSxXQUFLLEtBQUs7QUFBQSxJQUN0QixPQUFlO0FBQ0gsV0FBSyxZQUFZLE9BQU8sS0FBSyxLQUFLLFNBQVMsSUFBSSxZQUFZO0FBQzNELFdBQUssWUFBWSxPQUFPLEtBQUssUUFBUSxhQUFhLElBQUksZ0JBQWdCO0FBQ3RFLFdBQUssS0FBSztBQUFBLElBQ2I7QUFDRCxRQUFJLEtBQUk7QUFDUixRQUFJLFlBQVksV0FBVztBQUMzQixRQUFJLGNBQWMsV0FBVztBQUM3QixRQUFJLFVBQVM7QUFDYixRQUFJLE9BQU8sSUFBSSxFQUFFO0FBQ2pCLFFBQUksT0FBTyxJQUFJLEVBQUU7QUFDakIsUUFBSSxPQUFNO0FBQ1YsUUFBSSxRQUFPO0FBQUEsRUFDZDtBQUFBLEVBQ0osV0FBVyxXQUFXO0FBQ2YsVUFBTSxjQUFjLEtBQUssUUFBUTtBQUNqQyxRQUFJLENBQUMsWUFBWSxTQUFTO0FBQ3RCO0FBQUEsSUFDSDtBQUNELFVBQU0sTUFBTSxLQUFLO0FBQ2pCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFFBQUksTUFBTTtBQUNOLGVBQVMsS0FBSyxJQUFJO0FBQUEsSUFDckI7QUFDRCxVQUFNLFFBQVEsS0FBSyxjQUFjLFNBQVM7QUFDMUMsZUFBVyxRQUFRLE9BQU07QUFDckIsWUFBTSxvQkFBb0IsS0FBSztBQUMvQixZQUFNLFdBQVcsS0FBSztBQUN0QixZQUFNLFFBQVEsS0FBSztBQUNuQixZQUFNLElBQUksS0FBSztBQUNmLGlCQUFXLEtBQUssT0FBTyxHQUFHLEdBQUcsVUFBVSxpQkFBaUI7QUFBQSxJQUMzRDtBQUNELFFBQUksTUFBTTtBQUNOLGlCQUFXLEdBQUc7QUFBQSxJQUNqQjtBQUFBLEVBQ0o7QUFBQSxFQUNKLFlBQVk7QUFDTCxVQUFNLEVBQUUsS0FBTSxTQUFTLEVBQUUsVUFBVyxPQUFRLFFBQU8sRUFBTSxJQUFHO0FBQzVELFFBQUksQ0FBQyxNQUFNLFNBQVM7QUFDaEI7QUFBQSxJQUNIO0FBQ0QsVUFBTSxPQUFPLE9BQU8sTUFBTSxJQUFJO0FBQzlCLFVBQU0sVUFBVSxVQUFVLE1BQU0sT0FBTztBQUN2QyxVQUFNLFFBQVEsTUFBTTtBQUNwQixRQUFJLFNBQVMsS0FBSyxhQUFhO0FBQy9CLFFBQUksYUFBYSxZQUFZLGFBQWEsWUFBWSxTQUFTLFFBQVEsR0FBRztBQUN0RSxnQkFBVSxRQUFRO0FBQ2xCLFVBQUksUUFBUSxNQUFNLElBQUksR0FBRztBQUNyQixrQkFBVSxLQUFLLGNBQWMsTUFBTSxLQUFLLFNBQVM7QUFBQSxNQUNwRDtBQUFBLElBQ2IsT0FBZTtBQUNILGdCQUFVLFFBQVE7QUFBQSxJQUNyQjtBQUNELFVBQU0sRUFBRSxRQUFTLFFBQVMsVUFBVyxTQUFRLElBQU0sVUFBVSxNQUFNLFFBQVEsVUFBVSxLQUFLO0FBQzFGLGVBQVcsS0FBSyxNQUFNLE1BQU0sR0FBRyxHQUFHLE1BQU07QUFBQSxNQUNwQyxPQUFPLE1BQU07QUFBQSxNQUNiO0FBQUEsTUFDQTtBQUFBLE1BQ0EsV0FBVyxXQUFXLE9BQU8sVUFBVSxPQUFPO0FBQUEsTUFDOUMsY0FBYztBQUFBLE1BQ2QsYUFBYTtBQUFBLFFBQ1Q7QUFBQSxRQUNBO0FBQUEsTUFDSDtBQUFBLElBQ2IsQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNELEtBQUssV0FBVztBQUNaLFFBQUksQ0FBQyxLQUFLLGNBQWM7QUFDcEI7QUFBQSxJQUNIO0FBQ0QsU0FBSyxlQUFjO0FBQ25CLFNBQUssU0FBUyxTQUFTO0FBQ3ZCLFNBQUssV0FBVTtBQUNmLFNBQUssVUFBUztBQUNkLFNBQUssV0FBVyxTQUFTO0FBQUEsRUFDNUI7QUFBQSxFQUNKLFVBQVU7QUFDSCxVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLEtBQUssS0FBSyxTQUFTLEtBQUssTUFBTSxLQUFLO0FBQ3pDLFVBQU0sS0FBSyxlQUFlLEtBQUssUUFBUSxLQUFLLEtBQUssR0FBRyxFQUFFO0FBQ3RELFVBQU0sS0FBSyxlQUFlLEtBQUssVUFBVSxLQUFLLE9BQU8sR0FBRyxDQUFDO0FBQ3pELFFBQUksQ0FBQyxLQUFLLGdCQUFnQixLQUFLLFNBQVMsTUFBTSxVQUFVLE1BQU07QUFDMUQsYUFBTztBQUFBLFFBQ0g7QUFBQSxVQUNJLEdBQUc7QUFBQSxVQUNILE1BQU0sQ0FBQyxjQUFZO0FBQ2YsaUJBQUssS0FBSyxTQUFTO0FBQUEsVUFDdEI7QUFBQSxRQUNKO0FBQUEsTUFDakI7QUFBQSxJQUNTO0FBQ0QsV0FBTztBQUFBLE1BQ0g7QUFBQSxRQUNJLEdBQUc7QUFBQSxRQUNILE1BQU0sQ0FBQyxjQUFZO0FBQ2YsZUFBSyxlQUFjO0FBQ25CLGVBQUssU0FBUyxTQUFTO0FBQ3ZCLGVBQUssVUFBUztBQUFBLFFBQ2pCO0FBQUEsTUFDSjtBQUFBLE1BQ0Q7QUFBQSxRQUNJLEdBQUc7QUFBQSxRQUNILE1BQU0sTUFBSTtBQUNOLGVBQUssV0FBVTtBQUFBLFFBQ2xCO0FBQUEsTUFDSjtBQUFBLE1BQ0Q7QUFBQSxRQUNJLEdBQUc7QUFBQSxRQUNILE1BQU0sQ0FBQyxjQUFZO0FBQ2YsZUFBSyxXQUFXLFNBQVM7QUFBQSxRQUM1QjtBQUFBLE1BQ0o7QUFBQSxJQUNiO0FBQUEsRUFDSztBQUFBLEVBQ0osd0JBQXdCLE1BQU07QUFDdkIsVUFBTSxRQUFRLEtBQUssTUFBTSw2QkFBNEI7QUFDckQsVUFBTSxTQUFTLEtBQUssT0FBTztBQUMzQixVQUFNLFNBQVM7QUFDZixRQUFJLEdBQUc7QUFDUCxTQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sUUFBUSxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQzFDLFlBQU0sT0FBTyxNQUFNO0FBQ25CLFVBQUksS0FBSyxZQUFZLEtBQUssT0FBTyxDQUFDLFFBQVEsS0FBSyxTQUFTLE9BQU87QUFDM0QsZUFBTyxLQUFLLElBQUk7QUFBQSxNQUNuQjtBQUFBLElBQ0o7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0osd0JBQXdCLE9BQU87QUFDeEIsVUFBTSxPQUFPLEtBQUssUUFBUSxNQUFNLFdBQVcsS0FBSyxXQUFXLEtBQUssQ0FBQztBQUNqRSxXQUFPLE9BQU8sS0FBSyxJQUFJO0FBQUEsRUFDMUI7QUFBQSxFQUNKLGFBQWE7QUFDTixVQUFNLFdBQVcsS0FBSyx3QkFBd0IsQ0FBQyxFQUFFO0FBQ2pELFlBQVEsS0FBSyxpQkFBaUIsS0FBSyxRQUFRLEtBQUssVUFBVTtBQUFBLEVBQzdEO0FBQ0w7QUFFQSxNQUFNLGNBQWM7QUFBQSxFQUNoQixZQUFZLE1BQU0sT0FBTyxVQUFTO0FBQzlCLFNBQUssT0FBTztBQUNaLFNBQUssUUFBUTtBQUNiLFNBQUssV0FBVztBQUNoQixTQUFLLFFBQVEsdUJBQU8sT0FBTyxJQUFJO0FBQUEsRUFDbEM7QUFBQSxFQUNELFVBQVUsTUFBTTtBQUNaLFdBQU8sT0FBTyxVQUFVLGNBQWMsS0FBSyxLQUFLLEtBQUssV0FBVyxLQUFLLFNBQVM7QUFBQSxFQUNqRjtBQUFBLEVBQ0osU0FBUyxNQUFNO0FBQ1IsVUFBTSxRQUFRLE9BQU8sZUFBZSxJQUFJO0FBQ3hDLFFBQUk7QUFDSixRQUFJLGtCQUFrQixLQUFLLEdBQUc7QUFDMUIsb0JBQWMsS0FBSyxTQUFTLEtBQUs7QUFBQSxJQUNwQztBQUNELFVBQU0sUUFBUSxLQUFLO0FBQ25CLFVBQU0sS0FBSyxLQUFLO0FBQ2hCLFVBQU0sUUFBUSxLQUFLLFFBQVEsTUFBTTtBQUNqQyxRQUFJLENBQUMsSUFBSTtBQUNMLFlBQU0sSUFBSSxNQUFNLDZCQUE2QixJQUFJO0FBQUEsSUFDcEQ7QUFDRCxRQUFJLE1BQU0sT0FBTztBQUNiLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxNQUFNO0FBQ1oscUJBQWlCLE1BQU0sT0FBTyxXQUFXO0FBQ3pDLFFBQUksS0FBSyxVQUFVO0FBQ2YsZUFBUyxTQUFTLEtBQUssSUFBSSxLQUFLLFNBQVM7QUFBQSxJQUM1QztBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixJQUFJLElBQUk7QUFDRCxXQUFPLEtBQUssTUFBTTtBQUFBLEVBQ3JCO0FBQUEsRUFDSixXQUFXLE1BQU07QUFDVixVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLEtBQUssS0FBSztBQUNoQixVQUFNLFFBQVEsS0FBSztBQUNuQixRQUFJLE1BQU0sT0FBTztBQUNiLGFBQU8sTUFBTTtBQUFBLElBQ2hCO0FBQ0QsUUFBSSxTQUFTLE1BQU0sU0FBUyxRQUFRO0FBQ2hDLGFBQU8sU0FBUyxPQUFPO0FBQ3ZCLFVBQUksS0FBSyxVQUFVO0FBQ2YsZUFBTyxVQUFVO0FBQUEsTUFDcEI7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNMO0FBQ0EsU0FBUyxpQkFBaUIsTUFBTSxPQUFPLGFBQWE7QUFDaEQsUUFBTSxlQUFlLE1BQU0sdUJBQU8sT0FBTyxJQUFJLEdBQUc7QUFBQSxJQUM1QyxjQUFjLFNBQVMsSUFBSSxXQUFXLElBQUksQ0FBRTtBQUFBLElBQzVDLFNBQVMsSUFBSSxLQUFLO0FBQUEsSUFDbEIsS0FBSztBQUFBLEVBQ2IsQ0FBSztBQUNELFdBQVMsSUFBSSxPQUFPLFlBQVk7QUFDaEMsTUFBSSxLQUFLLGVBQWU7QUFDcEIsa0JBQWMsT0FBTyxLQUFLLGFBQWE7QUFBQSxFQUMxQztBQUNELE1BQUksS0FBSyxhQUFhO0FBQ2xCLGFBQVMsU0FBUyxPQUFPLEtBQUssV0FBVztBQUFBLEVBQzVDO0FBQ0w7QUFDQSxTQUFTLGNBQWMsT0FBTyxRQUFRO0FBQ2xDLFNBQU8sS0FBSyxNQUFNLEVBQUUsUUFBUSxDQUFDLGFBQVc7QUFDcEMsVUFBTSxnQkFBZ0IsU0FBUyxNQUFNLEdBQUc7QUFDeEMsVUFBTSxhQUFhLGNBQWM7QUFDakMsVUFBTSxjQUFjO0FBQUEsTUFDaEI7QUFBQSxJQUNILEVBQUMsT0FBTyxhQUFhLEVBQUUsS0FBSyxHQUFHO0FBQ2hDLFVBQU0sUUFBUSxPQUFPLFVBQVUsTUFBTSxHQUFHO0FBQ3hDLFVBQU0sYUFBYSxNQUFNO0FBQ3pCLFVBQU0sY0FBYyxNQUFNLEtBQUssR0FBRztBQUNsQyxhQUFTLE1BQU0sYUFBYSxZQUFZLGFBQWEsVUFBVTtBQUFBLEVBQ3ZFLENBQUs7QUFDTDtBQUNBLFNBQVMsa0JBQWtCLE9BQU87QUFDOUIsU0FBTyxRQUFRLFNBQVMsY0FBYztBQUMxQztBQUVBLE1BQU0sU0FBUztBQUFBLEVBQ1gsY0FBYTtBQUNULFNBQUssY0FBYyxJQUFJLGNBQWMsbUJBQW1CLFlBQVksSUFBSTtBQUN4RSxTQUFLLFdBQVcsSUFBSSxjQUFjLFNBQVMsVUFBVTtBQUNyRCxTQUFLLFVBQVUsSUFBSSxjQUFjLFFBQVEsU0FBUztBQUNsRCxTQUFLLFNBQVMsSUFBSSxjQUFjLE9BQU8sUUFBUTtBQUMvQyxTQUFLLG1CQUFtQjtBQUFBLE1BQ3BCLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxJQUNqQjtBQUFBLEVBQ0s7QUFBQSxFQUNKLE9BQU8sTUFBTTtBQUNOLFNBQUssTUFBTSxZQUFZLElBQUk7QUFBQSxFQUM5QjtBQUFBLEVBQ0QsVUFBVSxNQUFNO0FBQ1osU0FBSyxNQUFNLGNBQWMsSUFBSTtBQUFBLEVBQ2hDO0FBQUEsRUFDSixrQkFBa0IsTUFBTTtBQUNqQixTQUFLLE1BQU0sWUFBWSxNQUFNLEtBQUssV0FBVztBQUFBLEVBQ2hEO0FBQUEsRUFDSixlQUFlLE1BQU07QUFDZCxTQUFLLE1BQU0sWUFBWSxNQUFNLEtBQUssUUFBUTtBQUFBLEVBQzdDO0FBQUEsRUFDSixjQUFjLE1BQU07QUFDYixTQUFLLE1BQU0sWUFBWSxNQUFNLEtBQUssT0FBTztBQUFBLEVBQzVDO0FBQUEsRUFDSixhQUFhLE1BQU07QUFDWixTQUFLLE1BQU0sWUFBWSxNQUFNLEtBQUssTUFBTTtBQUFBLEVBQzNDO0FBQUEsRUFDSixjQUFjLElBQUk7QUFDWCxXQUFPLEtBQUssS0FBSyxJQUFJLEtBQUssYUFBYSxZQUFZO0FBQUEsRUFDdEQ7QUFBQSxFQUNKLFdBQVcsSUFBSTtBQUNSLFdBQU8sS0FBSyxLQUFLLElBQUksS0FBSyxVQUFVLFNBQVM7QUFBQSxFQUNoRDtBQUFBLEVBQ0osVUFBVSxJQUFJO0FBQ1AsV0FBTyxLQUFLLEtBQUssSUFBSSxLQUFLLFNBQVMsUUFBUTtBQUFBLEVBQzlDO0FBQUEsRUFDSixTQUFTLElBQUk7QUFDTixXQUFPLEtBQUssS0FBSyxJQUFJLEtBQUssUUFBUSxPQUFPO0FBQUEsRUFDNUM7QUFBQSxFQUNKLHFCQUFxQixNQUFNO0FBQ3BCLFNBQUssTUFBTSxjQUFjLE1BQU0sS0FBSyxXQUFXO0FBQUEsRUFDbEQ7QUFBQSxFQUNKLGtCQUFrQixNQUFNO0FBQ2pCLFNBQUssTUFBTSxjQUFjLE1BQU0sS0FBSyxRQUFRO0FBQUEsRUFDL0M7QUFBQSxFQUNKLGlCQUFpQixNQUFNO0FBQ2hCLFNBQUssTUFBTSxjQUFjLE1BQU0sS0FBSyxPQUFPO0FBQUEsRUFDOUM7QUFBQSxFQUNKLGdCQUFnQixNQUFNO0FBQ2YsU0FBSyxNQUFNLGNBQWMsTUFBTSxLQUFLLE1BQU07QUFBQSxFQUM3QztBQUFBLEVBQ0osTUFBTSxRQUFRLE1BQU0sZUFBZTtBQUM1QjtBQUFBLE1BQ0ksR0FBRztBQUFBLElBQ2YsRUFBVSxRQUFRLENBQUMsUUFBTTtBQUNiLFlBQU0sTUFBTSxpQkFBaUIsS0FBSyxvQkFBb0IsR0FBRztBQUN6RCxVQUFJLGlCQUFpQixJQUFJLFVBQVUsR0FBRyxLQUFLLFFBQVEsS0FBSyxXQUFXLElBQUksSUFBSTtBQUN2RSxhQUFLLE1BQU0sUUFBUSxLQUFLLEdBQUc7QUFBQSxNQUMzQyxPQUFtQjtBQUNILGFBQUssS0FBSyxDQUFDLFNBQU87QUFDZCxnQkFBTSxVQUFVLGlCQUFpQixLQUFLLG9CQUFvQixJQUFJO0FBQzlELGVBQUssTUFBTSxRQUFRLFNBQVMsSUFBSTtBQUFBLFFBQ3BELENBQWlCO0FBQUEsTUFDSjtBQUFBLElBQ2IsQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNKLE1BQU0sUUFBUWdCLFdBQVUsV0FBVztBQUM1QixVQUFNLGNBQWMsWUFBWSxNQUFNO0FBQ3RDLGFBQVMsVUFBVSxXQUFXLGNBQWMsSUFBSSxTQUFTO0FBQ3pELGNBQVMsUUFBUSxTQUFTO0FBQzFCLGFBQVMsVUFBVSxVQUFVLGNBQWMsSUFBSSxTQUFTO0FBQUEsRUFDM0Q7QUFBQSxFQUNKLG9CQUFvQixNQUFNO0FBQ25CLGFBQVEsSUFBSSxHQUFHLElBQUksS0FBSyxpQkFBaUIsUUFBUSxLQUFJO0FBQ2pELFlBQU0sTUFBTSxLQUFLLGlCQUFpQjtBQUNsQyxVQUFJLElBQUksVUFBVSxJQUFJLEdBQUc7QUFDckIsZUFBTztBQUFBLE1BQ1Y7QUFBQSxJQUNKO0FBQ0QsV0FBTyxLQUFLO0FBQUEsRUFDZjtBQUFBLEVBQ0osS0FBSyxJQUFJLGVBQWUsTUFBTTtBQUN2QixVQUFNLE9BQU8sY0FBYyxJQUFJLEVBQUU7QUFDakMsUUFBSSxTQUFTLFFBQVc7QUFDcEIsWUFBTSxJQUFJLE1BQU0sTUFBTSxLQUFLLDJCQUEyQixPQUFPLEdBQUc7QUFBQSxJQUNuRTtBQUNELFdBQU87QUFBQSxFQUNWO0FBQ0w7QUFDQSxJQUFJLFdBQTJCLG9CQUFJO0FBRW5DLE1BQU0sY0FBYztBQUFBLEVBQ2hCLGNBQWE7QUFDVCxTQUFLLFFBQVE7RUFDaEI7QUFBQSxFQUNKLE9BQU8sT0FBTyxNQUFNLE1BQU0sUUFBUTtBQUMzQixRQUFJLFNBQVMsY0FBYztBQUN2QixXQUFLLFFBQVEsS0FBSyxtQkFBbUIsT0FBTyxJQUFJO0FBQ2hELFdBQUssUUFBUSxLQUFLLE9BQU8sT0FBTyxTQUFTO0FBQUEsSUFDNUM7QUFDRCxVQUFNVCxlQUFjLFNBQVMsS0FBSyxhQUFhLEtBQUssRUFBRSxPQUFPLE1BQU0sSUFBSSxLQUFLLGFBQWEsS0FBSztBQUM5RixVQUFNLFNBQVMsS0FBSyxRQUFRQSxjQUFhLE9BQU8sTUFBTSxJQUFJO0FBQzFELFFBQUksU0FBUyxnQkFBZ0I7QUFDekIsV0FBSyxRQUFRQSxjQUFhLE9BQU8sTUFBTTtBQUN2QyxXQUFLLFFBQVEsS0FBSyxPQUFPLE9BQU8sV0FBVztBQUFBLElBQzlDO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLFFBQVFBLGNBQWEsT0FBTyxNQUFNLE1BQU07QUFDakMsV0FBTyxRQUFRO0FBQ2YsZUFBVyxjQUFjQSxjQUFZO0FBQ2pDLFlBQU0sU0FBUyxXQUFXO0FBQzFCLFlBQU0sU0FBUyxPQUFPO0FBQ3RCLFlBQU0sU0FBUztBQUFBLFFBQ1g7QUFBQSxRQUNBO0FBQUEsUUFDQSxXQUFXO0FBQUEsTUFDM0I7QUFDWSxVQUFJLFNBQVMsUUFBUSxRQUFRLE1BQU0sTUFBTSxTQUFTLEtBQUssWUFBWTtBQUMvRCxlQUFPO0FBQUEsTUFDVjtBQUFBLElBQ0o7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsYUFBYTtBQUNULFFBQUksQ0FBQyxjQUFjLEtBQUssTUFBTSxHQUFHO0FBQzdCLFdBQUssWUFBWSxLQUFLO0FBQ3RCLFdBQUssU0FBUztBQUFBLElBQ2pCO0FBQUEsRUFDSjtBQUFBLEVBQ0osYUFBYSxPQUFPO0FBQ2IsUUFBSSxLQUFLLFFBQVE7QUFDYixhQUFPLEtBQUs7QUFBQSxJQUNmO0FBQ0QsVUFBTUEsZUFBYyxLQUFLLFNBQVMsS0FBSyxtQkFBbUIsS0FBSztBQUMvRCxTQUFLLG9CQUFvQixLQUFLO0FBQzlCLFdBQU9BO0FBQUEsRUFDVjtBQUFBLEVBQ0QsbUJBQW1CLE9BQU8sS0FBSztBQUMzQixVQUFNLFNBQVMsU0FBUyxNQUFNO0FBQzlCLFVBQU0sVUFBVSxlQUFlLE9BQU8sV0FBVyxPQUFPLFFBQVEsU0FBUyxFQUFFO0FBQzNFLFVBQU0sVUFBVSxXQUFXLE1BQU07QUFDakMsV0FBTyxZQUFZLFNBQVMsQ0FBQyxNQUFNLENBQUUsSUFBRyxrQkFBa0IsT0FBTyxTQUFTLFNBQVMsR0FBRztBQUFBLEVBQ3pGO0FBQUEsRUFDSixvQkFBb0IsT0FBTztBQUNwQixVQUFNLHNCQUFzQixLQUFLLGFBQWE7QUFDOUMsVUFBTUEsZUFBYyxLQUFLO0FBQ3pCLFVBQU0sT0FBTyxDQUFDLEdBQUcsTUFBSSxFQUFFLE9BQU8sQ0FBQyxNQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsTUFBSSxFQUFFLE9BQU8sT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDO0FBQzVFLFNBQUssUUFBUSxLQUFLLHFCQUFxQkEsWUFBVyxHQUFHLE9BQU8sTUFBTTtBQUNsRSxTQUFLLFFBQVEsS0FBS0EsY0FBYSxtQkFBbUIsR0FBRyxPQUFPLE9BQU87QUFBQSxFQUN0RTtBQUNMO0FBQ0MsU0FBUyxXQUFXLFFBQVE7QUFDekIsUUFBTSxXQUFXO0FBQ2pCLFFBQU0sVUFBVTtBQUNoQixRQUFNLE9BQU8sT0FBTyxLQUFLLFNBQVMsUUFBUSxLQUFLO0FBQy9DLFdBQVEsSUFBSSxHQUFHLElBQUksS0FBSyxRQUFRLEtBQUk7QUFDaEMsWUFBUSxLQUFLLFNBQVMsVUFBVSxLQUFLLEVBQUUsQ0FBQztBQUFBLEVBQzNDO0FBQ0QsUUFBTSxRQUFRLE9BQU8sV0FBVztBQUNoQyxXQUFRLEtBQUssR0FBRyxLQUFLLE1BQU0sUUFBUSxNQUFLO0FBQ3BDLFVBQU0sU0FBUyxNQUFNO0FBQ3JCLFFBQUksUUFBUSxRQUFRLE1BQU0sTUFBTSxJQUFJO0FBQ2hDLGNBQVEsS0FBSyxNQUFNO0FBQ25CLGVBQVMsT0FBTyxNQUFNO0FBQUEsSUFDekI7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBO0FBQUEsRUFDUjtBQUNBO0FBQ0EsU0FBUyxRQUFRLFNBQVMsS0FBSztBQUMzQixNQUFJLENBQUMsT0FBTyxZQUFZLE9BQU87QUFDM0IsV0FBTztBQUFBLEVBQ1Y7QUFDRCxNQUFJLFlBQVksTUFBTTtBQUNsQixXQUFPO0VBQ1Y7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLGtCQUFrQixPQUFPLEVBQUUsU0FBVSxTQUFXLEdBQUUsU0FBUyxLQUFLO0FBQ3JFLFFBQU0sU0FBUztBQUNmLFFBQU0sVUFBVSxNQUFNO0FBQ3RCLGFBQVcsVUFBVSxTQUFRO0FBQ3pCLFVBQU0sS0FBSyxPQUFPO0FBQ2xCLFVBQU0sT0FBTyxRQUFRLFFBQVEsS0FBSyxHQUFHO0FBQ3JDLFFBQUksU0FBUyxNQUFNO0FBQ2Y7QUFBQSxJQUNIO0FBQ0QsV0FBTyxLQUFLO0FBQUEsTUFDUjtBQUFBLE1BQ0EsU0FBUyxXQUFXLE1BQU0sUUFBUTtBQUFBLFFBQzlCO0FBQUEsUUFDQSxPQUFPLFNBQVM7QUFBQSxNQUNoQyxHQUFlLE1BQU0sT0FBTztBQUFBLElBQzVCLENBQVM7QUFBQSxFQUNKO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxXQUFXLFFBQVEsRUFBRSxRQUFTLE1BQVEsR0FBRSxNQUFNLFNBQVM7QUFDNUQsUUFBTSxPQUFPLE9BQU8sZ0JBQWdCLE1BQU07QUFDMUMsUUFBTSxTQUFTLE9BQU8sZ0JBQWdCLE1BQU0sSUFBSTtBQUNoRCxNQUFJLFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQU8sS0FBSyxPQUFPLFFBQVE7QUFBQSxFQUM5QjtBQUNELFNBQU8sT0FBTyxlQUFlLFFBQVEsU0FBUztBQUFBLElBQzFDO0FBQUEsRUFDUixHQUFPO0FBQUEsSUFDQyxZQUFZO0FBQUEsSUFDWixXQUFXO0FBQUEsSUFDWCxTQUFTO0FBQUEsRUFDakIsQ0FBSztBQUNMO0FBRUEsU0FBUyxhQUFhLE1BQU0sU0FBUztBQUNqQyxRQUFNLGtCQUFrQixTQUFTLFNBQVMsU0FBUztBQUNuRCxRQUFNLGtCQUFrQixRQUFRLFlBQVksSUFBSSxTQUFTO0FBQ3pELFNBQU8sZUFBZSxhQUFhLFFBQVEsYUFBYSxnQkFBZ0IsYUFBYTtBQUN6RjtBQUNBLFNBQVMsMEJBQTBCLElBQUksV0FBVztBQUM5QyxNQUFJLE9BQU87QUFDWCxNQUFJLE9BQU8sV0FBVztBQUNsQixXQUFPO0FBQUEsRUFDZixXQUFlLE9BQU8sV0FBVztBQUN6QixXQUFPLGNBQWMsTUFBTSxNQUFNO0FBQUEsRUFDcEM7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLDBCQUEwQixNQUFNLFdBQVc7QUFDaEQsU0FBTyxTQUFTLFlBQVksWUFBWTtBQUM1QztBQUNBLFNBQVMsaUJBQWlCLFVBQVU7QUFDaEMsTUFBSSxhQUFhLFNBQVMsYUFBYSxVQUFVO0FBQzdDLFdBQU87QUFBQSxFQUNWO0FBQ0QsTUFBSSxhQUFhLFVBQVUsYUFBYSxTQUFTO0FBQzdDLFdBQU87QUFBQSxFQUNWO0FBQ0w7QUFDQSxTQUFTLGNBQWMsSUFBSSxjQUFjO0FBQ3JDLE1BQUksT0FBTyxPQUFPLE9BQU8sT0FBTyxPQUFPLEtBQUs7QUFDeEMsV0FBTztBQUFBLEVBQ1Y7QUFDRCxPQUFLLGFBQWEsUUFBUSxpQkFBaUIsYUFBYSxRQUFRLEtBQUssR0FBRyxTQUFTLEtBQUssY0FBYyxHQUFHLEdBQUcsWUFBVyxHQUFJLFlBQVk7QUFDckksTUFBSSxJQUFJO0FBQ0osV0FBTztBQUFBLEVBQ1Y7QUFDRCxRQUFNLElBQUksTUFBTSw2QkFBNkIseURBQXlEO0FBQzFHO0FBQ0EsU0FBUyxpQkFBaUIsUUFBUSxTQUFTO0FBQ3ZDLFFBQU0sZ0JBQWdCLFVBQVUsT0FBTyxTQUFTO0FBQUEsSUFDNUMsUUFBUSxDQUFFO0FBQUEsRUFDbEI7QUFDSSxRQUFNLGVBQWUsUUFBUSxVQUFVO0FBQ3ZDLFFBQU0saUJBQWlCLGFBQWEsT0FBTyxNQUFNLE9BQU87QUFDeEQsUUFBTSxTQUFTLHVCQUFPLE9BQU8sSUFBSTtBQUNqQyxTQUFPLEtBQUssWUFBWSxFQUFFLFFBQVEsQ0FBQyxPQUFLO0FBQ3BDLFVBQU0sWUFBWSxhQUFhO0FBQy9CLFFBQUksQ0FBQyxTQUFTLFNBQVMsR0FBRztBQUN0QixhQUFPLFFBQVEsTUFBTSwwQ0FBMEMsSUFBSTtBQUFBLElBQ3RFO0FBQ0QsUUFBSSxVQUFVLFFBQVE7QUFDbEIsYUFBTyxRQUFRLEtBQUssa0RBQWtELElBQUk7QUFBQSxJQUM3RTtBQUNELFVBQU0sT0FBTyxjQUFjLElBQUksU0FBUztBQUN4QyxVQUFNLFlBQVksMEJBQTBCLE1BQU0sY0FBYztBQUNoRSxVQUFNLHNCQUFzQixjQUFjLFVBQVU7QUFDcEQsV0FBTyxNQUFNLFFBQVEsdUJBQU8sT0FBTyxJQUFJLEdBQUc7QUFBQSxNQUN0QztBQUFBLFFBQ0k7QUFBQSxNQUNIO0FBQUEsTUFDRDtBQUFBLE1BQ0Esb0JBQW9CO0FBQUEsTUFDcEIsb0JBQW9CO0FBQUEsSUFDaEMsQ0FBUztBQUFBLEVBQ1QsQ0FBSztBQUNELFNBQU8sS0FBSyxTQUFTLFFBQVEsQ0FBQyxZQUFVO0FBQ3BDLFVBQU0sT0FBTyxRQUFRLFFBQVEsT0FBTztBQUNwQyxVQUFNLFlBQVksUUFBUSxhQUFhLGFBQWEsTUFBTSxPQUFPO0FBQ2pFLFVBQU0sa0JBQWtCLFVBQVUsU0FBUztBQUMzQyxVQUFNLHNCQUFzQixnQkFBZ0IsVUFBVTtBQUN0RCxXQUFPLEtBQUssbUJBQW1CLEVBQUUsUUFBUSxDQUFDLGNBQVk7QUFDbEQsWUFBTSxPQUFPLDBCQUEwQixXQUFXLFNBQVM7QUFDM0QsWUFBTSxLQUFLLFFBQVEsT0FBTyxhQUFhO0FBQ3ZDLGFBQU8sTUFBTSxPQUFPLE9BQU8sdUJBQU8sT0FBTyxJQUFJO0FBQzdDLGNBQVEsT0FBTyxLQUFLO0FBQUEsUUFDaEI7QUFBQSxVQUNJO0FBQUEsUUFDSDtBQUFBLFFBQ0QsYUFBYTtBQUFBLFFBQ2Isb0JBQW9CO0FBQUEsTUFDcEMsQ0FBYTtBQUFBLElBQ2IsQ0FBUztBQUFBLEVBQ1QsQ0FBSztBQUNELFNBQU8sS0FBSyxNQUFNLEVBQUUsUUFBUSxDQUFDLFFBQU07QUFDL0IsVUFBTSxRQUFRLE9BQU87QUFDckIsWUFBUSxPQUFPO0FBQUEsTUFDWCxTQUFTLE9BQU8sTUFBTTtBQUFBLE1BQ3RCLFNBQVM7QUFBQSxJQUNyQixDQUFTO0FBQUEsRUFDVCxDQUFLO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxZQUFZLFFBQVE7QUFDekIsUUFBTSxVQUFVLE9BQU8sWUFBWSxPQUFPLFVBQVU7QUFDcEQsVUFBUSxVQUFVLGVBQWUsUUFBUSxTQUFTLENBQUU7QUFDcEQsVUFBUSxTQUFTLGlCQUFpQixRQUFRLE9BQU87QUFDckQ7QUFDQSxTQUFTLFNBQVMsTUFBTTtBQUNwQixTQUFPLFFBQVE7QUFDZixPQUFLLFdBQVcsS0FBSyxZQUFZO0FBQ2pDLE9BQUssU0FBUyxLQUFLLFVBQVU7QUFDN0IsU0FBTztBQUNYO0FBQ0EsU0FBUyxXQUFXLFFBQVE7QUFDeEIsV0FBUyxVQUFVO0FBQ25CLFNBQU8sT0FBTyxTQUFTLE9BQU8sSUFBSTtBQUNsQyxjQUFZLE1BQU07QUFDbEIsU0FBTztBQUNYO0FBQ0EsTUFBTSxXQUFXLG9CQUFJO0FBQ3JCLE1BQU0sYUFBYSxvQkFBSTtBQUN2QixTQUFTLFdBQVcsVUFBVSxVQUFVO0FBQ3BDLE1BQUksT0FBTyxTQUFTLElBQUksUUFBUTtBQUNoQyxNQUFJLENBQUMsTUFBTTtBQUNQLFdBQU8sU0FBUTtBQUNmLGFBQVMsSUFBSSxVQUFVLElBQUk7QUFDM0IsZUFBVyxJQUFJLElBQUk7QUFBQSxFQUN0QjtBQUNELFNBQU87QUFDWDtBQUNBLE1BQU0sYUFBYSxDQUFDTixNQUFLLEtBQUssUUFBTTtBQUNoQyxRQUFNLE9BQU8saUJBQWlCLEtBQUssR0FBRztBQUN0QyxNQUFJLFNBQVMsUUFBVztBQUNwQixTQUFJLElBQUksSUFBSTtBQUFBLEVBQ2Y7QUFDTDtBQUNBLE1BQU0sT0FBTztBQUFBLEVBQ1QsWUFBWSxRQUFPO0FBQ2YsU0FBSyxVQUFVLFdBQVcsTUFBTTtBQUNoQyxTQUFLLGNBQWMsb0JBQUk7QUFDdkIsU0FBSyxpQkFBaUIsb0JBQUk7RUFDN0I7QUFBQSxFQUNELElBQUksV0FBVztBQUNYLFdBQU8sS0FBSyxRQUFRO0FBQUEsRUFDdkI7QUFBQSxFQUNELElBQUksT0FBTztBQUNQLFdBQU8sS0FBSyxRQUFRO0FBQUEsRUFDdkI7QUFBQSxFQUNELElBQUksS0FBSyxNQUFNO0FBQ1gsU0FBSyxRQUFRLE9BQU87QUFBQSxFQUN2QjtBQUFBLEVBQ0QsSUFBSSxPQUFPO0FBQ1AsV0FBTyxLQUFLLFFBQVE7QUFBQSxFQUN2QjtBQUFBLEVBQ0QsSUFBSSxLQUFLLE1BQU07QUFDWCxTQUFLLFFBQVEsT0FBTyxTQUFTLElBQUk7QUFBQSxFQUNwQztBQUFBLEVBQ0QsSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLFFBQVE7QUFBQSxFQUN2QjtBQUFBLEVBQ0QsSUFBSSxRQUFRLFNBQVM7QUFDakIsU0FBSyxRQUFRLFVBQVU7QUFBQSxFQUMxQjtBQUFBLEVBQ0QsSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLFFBQVE7QUFBQSxFQUN2QjtBQUFBLEVBQ0QsU0FBUztBQUNMLFVBQU0sU0FBUyxLQUFLO0FBQ3BCLFNBQUssV0FBVTtBQUNmLGdCQUFZLE1BQU07QUFBQSxFQUNyQjtBQUFBLEVBQ0QsYUFBYTtBQUNULFNBQUssWUFBWTtBQUNqQixTQUFLLGVBQWU7RUFDdkI7QUFBQSxFQUNKLGlCQUFpQixhQUFhO0FBQ3ZCLFdBQU8sV0FBVyxhQUFhLE1BQUk7QUFBQSxNQUMzQjtBQUFBLFFBQ0ksWUFBWTtBQUFBLFFBQ1o7QUFBQSxNQUNIO0FBQUEsSUFDakIsQ0FBYTtBQUFBLEVBQ1I7QUFBQSxFQUNKLDBCQUEwQixhQUFhLFlBQVk7QUFDNUMsV0FBTyxXQUFXLEdBQUcsMEJBQTBCLGNBQWMsTUFBSTtBQUFBLE1BQ3pEO0FBQUEsUUFDSSxZQUFZLDJCQUEyQjtBQUFBLFFBQ3ZDLGVBQWU7QUFBQSxNQUNsQjtBQUFBLE1BQ0Q7QUFBQSxRQUNJLFlBQVk7QUFBQSxRQUNaO0FBQUEsTUFDSDtBQUFBLElBQ2pCLENBQWE7QUFBQSxFQUNSO0FBQUEsRUFDSix3QkFBd0IsYUFBYSxhQUFhO0FBQzNDLFdBQU8sV0FBVyxHQUFHLGVBQWUsZUFBZSxNQUFJO0FBQUEsTUFDL0M7QUFBQSxRQUNJLFlBQVksd0JBQXdCO0FBQUEsUUFDcEMsWUFBWTtBQUFBLFFBQ1osWUFBWTtBQUFBLFFBQ1o7QUFBQSxNQUNIO0FBQUEsSUFDakIsQ0FBYTtBQUFBLEVBQ1I7QUFBQSxFQUNKLGdCQUFnQixRQUFRO0FBQ2pCLFVBQU0sS0FBSyxPQUFPO0FBQ2xCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFdBQU8sV0FBVyxHQUFHLGVBQWUsTUFBTSxNQUFJO0FBQUEsTUFDdEM7QUFBQSxRQUNJLFdBQVc7QUFBQSxRQUNYLEdBQUcsT0FBTywwQkFBMEIsQ0FBRTtBQUFBLE1BQ3pDO0FBQUEsSUFDakIsQ0FBYTtBQUFBLEVBQ1I7QUFBQSxFQUNKLGNBQWMsV0FBVyxZQUFZO0FBQzlCLFVBQU0sY0FBYyxLQUFLO0FBQ3pCLFFBQUksUUFBUSxZQUFZLElBQUksU0FBUztBQUNyQyxRQUFJLENBQUMsU0FBUyxZQUFZO0FBQ3RCLGNBQVEsb0JBQUk7QUFDWixrQkFBWSxJQUFJLFdBQVcsS0FBSztBQUFBLElBQ25DO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLGdCQUFnQixXQUFXLFVBQVUsWUFBWTtBQUMxQyxVQUFNLEVBQUUsU0FBVSxLQUFPLElBQUc7QUFDNUIsVUFBTSxRQUFRLEtBQUssY0FBYyxXQUFXLFVBQVU7QUFDdEQsVUFBTSxTQUFTLE1BQU0sSUFBSSxRQUFRO0FBQ2pDLFFBQUksUUFBUTtBQUNSLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxTQUFTLG9CQUFJO0FBQ25CLGFBQVMsUUFBUSxDQUFDLFNBQU87QUFDckIsVUFBSSxXQUFXO0FBQ1gsZUFBTyxJQUFJLFNBQVM7QUFDcEIsYUFBSyxRQUFRLENBQUMsUUFBTSxXQUFXLFFBQVEsV0FBVyxHQUFHLENBQUM7QUFBQSxNQUN6RDtBQUNELFdBQUssUUFBUSxDQUFDLFFBQU0sV0FBVyxRQUFRLFNBQVMsR0FBRyxDQUFDO0FBQ3BELFdBQUssUUFBUSxDQUFDLFFBQU0sV0FBVyxRQUFRLFVBQVUsU0FBUyxJQUFJLEdBQUcsQ0FBQztBQUNsRSxXQUFLLFFBQVEsQ0FBQyxRQUFNLFdBQVcsUUFBUSxVQUFVLEdBQUcsQ0FBQztBQUNyRCxXQUFLLFFBQVEsQ0FBQyxRQUFNLFdBQVcsUUFBUSxhQUFhLEdBQUcsQ0FBQztBQUFBLElBQ3BFLENBQVM7QUFDRCxVQUFNLFFBQVEsTUFBTSxLQUFLLE1BQU07QUFDL0IsUUFBSSxNQUFNLFdBQVcsR0FBRztBQUNwQixZQUFNLEtBQUssdUJBQU8sT0FBTyxJQUFJLENBQUM7QUFBQSxJQUNqQztBQUNELFFBQUksV0FBVyxJQUFJLFFBQVEsR0FBRztBQUMxQixZQUFNLElBQUksVUFBVSxLQUFLO0FBQUEsSUFDNUI7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0osb0JBQW9CO0FBQ2IsVUFBTSxFQUFFLFNBQVUsS0FBTyxJQUFHO0FBQzVCLFdBQU87QUFBQSxNQUNIO0FBQUEsTUFDQSxVQUFVLFNBQVMsQ0FBRTtBQUFBLE1BQ3JCLFNBQVMsU0FBUyxTQUFTLENBQUU7QUFBQSxNQUM3QjtBQUFBLFFBQ0k7QUFBQSxNQUNIO0FBQUEsTUFDRDtBQUFBLE1BQ0E7QUFBQSxJQUNaO0FBQUEsRUFDSztBQUFBLEVBQ0osb0JBQW9CLFFBQVFTLFFBQU8sU0FBUyxXQUFXO0FBQUEsSUFDaEQ7QUFBQSxFQUNSLEdBQU87QUFDQyxVQUFNLFNBQVM7QUFBQSxNQUNYLFNBQVM7QUFBQSxJQUNyQjtBQUNRLFVBQU0sRUFBRSxVQUFXLGdCQUFpQixZQUFZLEtBQUssZ0JBQWdCLFFBQVEsUUFBUTtBQUNyRixRQUFJLFVBQVU7QUFDZCxRQUFJLFlBQVksVUFBVUEsTUFBSyxHQUFHO0FBQzlCLGFBQU8sVUFBVTtBQUNqQixnQkFBVSxXQUFXLE9BQU8sSUFBSSxRQUFPLElBQUs7QUFDNUMsWUFBTSxjQUFjLEtBQUssZUFBZSxRQUFRLFNBQVMsV0FBVztBQUNwRSxnQkFBVSxlQUFlLFVBQVUsU0FBUyxXQUFXO0FBQUEsSUFDMUQ7QUFDRCxlQUFXLFFBQVFBLFFBQU07QUFDckIsYUFBTyxRQUFRLFFBQVE7QUFBQSxJQUMxQjtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixlQUFlLFFBQVEsU0FBUyxXQUFXO0FBQUEsSUFDcEM7QUFBQSxFQUNILEdBQUUsb0JBQW9CO0FBQ25CLFVBQU0sRUFBRSxTQUFRLElBQU0sWUFBWSxLQUFLLGdCQUFnQixRQUFRLFFBQVE7QUFDdkUsV0FBTyxTQUFTLE9BQU8sSUFBSSxlQUFlLFVBQVUsU0FBUyxRQUFXLGtCQUFrQixJQUFJO0FBQUEsRUFDakc7QUFDTDtBQUNBLFNBQVMsWUFBWSxlQUFlLFFBQVEsVUFBVTtBQUNsRCxNQUFJLFFBQVEsY0FBYyxJQUFJLE1BQU07QUFDcEMsTUFBSSxDQUFDLE9BQU87QUFDUixZQUFRLG9CQUFJO0FBQ1osa0JBQWMsSUFBSSxRQUFRLEtBQUs7QUFBQSxFQUNsQztBQUNELFFBQU0sV0FBVyxTQUFTO0FBQzFCLE1BQUksU0FBUyxNQUFNLElBQUksUUFBUTtBQUMvQixNQUFJLENBQUMsUUFBUTtBQUNULFVBQU0sV0FBVyxnQkFBZ0IsUUFBUSxRQUFRO0FBQ2pELGFBQVM7QUFBQSxNQUNMO0FBQUEsTUFDQSxhQUFhLFNBQVMsT0FBTyxDQUFDLE1BQUksQ0FBQyxFQUFFLFlBQWEsRUFBQyxTQUFTLE9BQU8sQ0FBQztBQUFBLElBQ2hGO0FBQ1EsVUFBTSxJQUFJLFVBQVUsTUFBTTtBQUFBLEVBQzdCO0FBQ0QsU0FBTztBQUNYO0FBQ0EsTUFBTSxjQUFjLENBQUMsVUFBUSxTQUFTLEtBQUssS0FBSyxPQUFPLG9CQUFvQixLQUFLLEVBQUUsT0FBTyxDQUFDLEtBQUssUUFBTSxPQUFPLFdBQVcsTUFBTSxJQUFJLEdBQUcsS0FBSztBQUN6SSxTQUFTLFlBQVksT0FBT0EsUUFBTztBQUMvQixRQUFNLEVBQUUsY0FBZSxZQUFjLElBQUcsYUFBYSxLQUFLO0FBQzFELGFBQVcsUUFBUUEsUUFBTTtBQUNyQixVQUFNLGFBQWEsYUFBYSxJQUFJO0FBQ3BDLFVBQU0sWUFBWSxZQUFZLElBQUk7QUFDbEMsVUFBTSxTQUFTLGFBQWEsZUFBZSxNQUFNO0FBQ2pELFFBQUksZUFBZSxXQUFXLEtBQUssS0FBSyxZQUFZLEtBQUssTUFBTSxhQUFhLFFBQVEsS0FBSyxHQUFHO0FBQ3hGLGFBQU87QUFBQSxJQUNWO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUVBLElBQUksVUFBVTtBQUVkLE1BQU0sa0JBQWtCO0FBQUEsRUFDcEI7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0o7QUFDQSxTQUFTLHFCQUFxQixVQUFVLE1BQU07QUFDMUMsU0FBTyxhQUFhLFNBQVMsYUFBYSxZQUFZLGdCQUFnQixRQUFRLFFBQVEsTUFBTSxNQUFNLFNBQVM7QUFDL0c7QUFDQSxTQUFTLGNBQWMsSUFBSSxJQUFJO0FBQzNCLFNBQU8sU0FBUyxHQUFHLEdBQUc7QUFDbEIsV0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFBQSxFQUMzRDtBQUNBO0FBQ0EsU0FBUyxxQkFBcUIsU0FBUztBQUNuQyxRQUFNLFFBQVEsUUFBUTtBQUN0QixRQUFNLG1CQUFtQixNQUFNLFFBQVE7QUFDdkMsUUFBTSxjQUFjLGFBQWE7QUFDakMsV0FBUyxvQkFBb0IsaUJBQWlCLFlBQVk7QUFBQSxJQUN0RDtBQUFBLEVBQ0gsR0FBRSxLQUFLO0FBQ1o7QUFDQSxTQUFTLG9CQUFvQixTQUFTO0FBQ2xDLFFBQU0sUUFBUSxRQUFRO0FBQ3RCLFFBQU0sbUJBQW1CLE1BQU0sUUFBUTtBQUN2QyxXQUFTLG9CQUFvQixpQkFBaUIsWUFBWTtBQUFBLElBQ3REO0FBQUEsRUFDSCxHQUFFLEtBQUs7QUFDWjtBQUNDLFNBQVMsVUFBVSxNQUFNO0FBQ3RCLE1BQUksZ0JBQWlCLEtBQUksT0FBTyxTQUFTLFVBQVU7QUFDL0MsV0FBTyxTQUFTLGVBQWUsSUFBSTtBQUFBLEVBQzNDLFdBQWUsUUFBUSxLQUFLLFFBQVE7QUFDNUIsV0FBTyxLQUFLO0FBQUEsRUFDZjtBQUNELE1BQUksUUFBUSxLQUFLLFFBQVE7QUFDckIsV0FBTyxLQUFLO0FBQUEsRUFDZjtBQUNELFNBQU87QUFDWDtBQUNBLE1BQU0sWUFBWTtBQUNsQixNQUFNLFdBQVcsQ0FBQyxRQUFNO0FBQ3BCLFFBQU0sU0FBUyxVQUFVLEdBQUc7QUFDNUIsU0FBTyxPQUFPLE9BQU8sU0FBUyxFQUFFLE9BQU8sQ0FBQyxNQUFJLEVBQUUsV0FBVyxNQUFNLEVBQUUsSUFBRztBQUN4RTtBQUNBLFNBQVMsZ0JBQWdCLEtBQUssT0FBTyxNQUFNO0FBQ3ZDLFFBQU0sT0FBTyxPQUFPLEtBQUssR0FBRztBQUM1QixhQUFXLE9BQU8sTUFBSztBQUNuQixVQUFNLFNBQVMsQ0FBQztBQUNoQixRQUFJLFVBQVUsT0FBTztBQUNqQixZQUFNLFFBQVEsSUFBSTtBQUNsQixhQUFPLElBQUk7QUFDWCxVQUFJLE9BQU8sS0FBSyxTQUFTLE9BQU87QUFDNUIsWUFBSSxTQUFTLFFBQVE7QUFBQSxNQUN4QjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0w7QUFDQyxTQUFTLG1CQUFtQixHQUFHLFdBQVcsYUFBYSxTQUFTO0FBQzdELE1BQUksQ0FBQyxlQUFlLEVBQUUsU0FBUyxZQUFZO0FBQ3ZDLFdBQU87QUFBQSxFQUNWO0FBQ0QsTUFBSSxTQUFTO0FBQ1QsV0FBTztBQUFBLEVBQ1Y7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLGVBQWUsTUFBTTtBQUMxQixRQUFNLEVBQUUsUUFBUyxPQUFTLElBQUc7QUFDN0IsTUFBSSxVQUFVLFFBQVE7QUFDbEIsV0FBTztBQUFBLE1BQ0gsTUFBTSxPQUFPO0FBQUEsTUFDYixPQUFPLE9BQU87QUFBQSxNQUNkLEtBQUssT0FBTztBQUFBLE1BQ1osUUFBUSxPQUFPO0FBQUEsSUFDM0I7QUFBQSxFQUNLO0FBQ0w7QUFDQSxNQUFNTyxRQUFNO0FBQUEsRUFPUixPQUFPLFlBQVksT0FBTztBQUN0QixhQUFTLElBQUksR0FBRyxLQUFLO0FBQ3JCO0VBQ0g7QUFBQSxFQUNELE9BQU8sY0FBYyxPQUFPO0FBQ3hCLGFBQVMsT0FBTyxHQUFHLEtBQUs7QUFDeEI7RUFDSDtBQUFBLEVBQ0QsWUFBWSxNQUFNLFlBQVc7QUFDekIsVUFBTSxTQUFTLEtBQUssU0FBUyxJQUFJLE9BQU8sVUFBVTtBQUNsRCxVQUFNLGdCQUFnQixVQUFVLElBQUk7QUFDcEMsVUFBTSxnQkFBZ0IsU0FBUyxhQUFhO0FBQzVDLFFBQUksZUFBZTtBQUNmLFlBQU0sSUFBSSxNQUFNLDhDQUErQyxjQUFjLEtBQUssb0RBQTJELGNBQWMsT0FBTyxLQUFLLGtCQUFtQjtBQUFBLElBQzdMO0FBQ0QsVUFBTSxVQUFVLE9BQU8sZUFBZSxPQUFPLHFCQUFxQixLQUFLLFdBQVUsQ0FBRTtBQUNuRixTQUFLLFdBQVcsS0FBSyxPQUFPLFlBQVksZ0JBQWdCLGFBQWE7QUFDckUsU0FBSyxTQUFTLGFBQWEsTUFBTTtBQUNqQyxVQUFNLFVBQVUsS0FBSyxTQUFTLGVBQWUsZUFBZSxRQUFRLFdBQVc7QUFDL0UsVUFBTSxTQUFTLFdBQVcsUUFBUTtBQUNsQyxVQUFNLFNBQVMsVUFBVSxPQUFPO0FBQ2hDLFVBQU0sUUFBUSxVQUFVLE9BQU87QUFDL0IsU0FBSyxLQUFLO0FBQ1YsU0FBSyxNQUFNO0FBQ1gsU0FBSyxTQUFTO0FBQ2QsU0FBSyxRQUFRO0FBQ2IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxXQUFXO0FBQ2hCLFNBQUssZUFBZSxLQUFLO0FBQ3pCLFNBQUssVUFBVTtBQUNmLFNBQUssWUFBWTtBQUNqQixTQUFLLFVBQVU7QUFDZixTQUFLLFFBQVE7QUFDYixTQUFLLDBCQUEwQjtBQUMvQixTQUFLLFlBQVk7QUFDakIsU0FBSyxVQUFVO0FBQ2YsU0FBSyxhQUFhO0FBQ2xCLFNBQUssYUFBYTtBQUNqQixTQUFLLHVCQUF1QjtBQUM3QixTQUFLLGtCQUFrQjtBQUN2QixTQUFLLFNBQVM7QUFDZCxTQUFLLFdBQVcsSUFBSTtBQUNwQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxpQkFBaUI7QUFDdEIsU0FBSyxXQUFXO0FBQ2hCLFNBQUssc0JBQXNCO0FBQzNCLFNBQUssV0FBVztBQUNoQixTQUFLLFlBQVksU0FBUyxDQUFDLFNBQU8sS0FBSyxPQUFPLElBQUksR0FBRyxRQUFRLGVBQWUsQ0FBQztBQUM3RSxTQUFLLGVBQWU7QUFDcEIsY0FBVSxLQUFLLE1BQU07QUFDckIsUUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRO0FBQ3JCLGNBQVEsTUFBTSxtRUFBbUU7QUFDakY7QUFBQSxJQUNIO0FBQ0QsYUFBUyxPQUFPLE1BQU0sWUFBWSxvQkFBb0I7QUFDdEQsYUFBUyxPQUFPLE1BQU0sWUFBWSxtQkFBbUI7QUFDckQsU0FBSyxZQUFXO0FBQ2hCLFFBQUksS0FBSyxVQUFVO0FBQ2YsV0FBSyxPQUFNO0FBQUEsSUFDZDtBQUFBLEVBQ0o7QUFBQSxFQUNELElBQUksY0FBYztBQUNkLFVBQU0sRUFBRSxTQUFTLEVBQUUsYUFBYyxvQkFBbUIsR0FBTSxPQUFRLFFBQVMsYUFBZSxJQUFHO0FBQzdGLFFBQUksQ0FBQyxjQUFjLFdBQVcsR0FBRztBQUM3QixhQUFPO0FBQUEsSUFDVjtBQUNELFFBQUksdUJBQXVCLGNBQWM7QUFDckMsYUFBTztBQUFBLElBQ1Y7QUFDRCxXQUFPLFNBQVMsUUFBUSxTQUFTO0FBQUEsRUFDcEM7QUFBQSxFQUNELElBQUksT0FBTztBQUNQLFdBQU8sS0FBSyxPQUFPO0FBQUEsRUFDdEI7QUFBQSxFQUNELElBQUksS0FBSyxNQUFNO0FBQ1gsU0FBSyxPQUFPLE9BQU87QUFBQSxFQUN0QjtBQUFBLEVBQ0QsSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLO0FBQUEsRUFDZjtBQUFBLEVBQ0QsSUFBSSxRQUFRLFNBQVM7QUFDakIsU0FBSyxPQUFPLFVBQVU7QUFBQSxFQUN6QjtBQUFBLEVBQ0QsSUFBSSxXQUFXO0FBQ1gsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLGNBQWM7QUFDUCxTQUFLLGNBQWMsWUFBWTtBQUMvQixRQUFJLEtBQUssUUFBUSxZQUFZO0FBQ3pCLFdBQUssT0FBTTtBQUFBLElBQ3ZCLE9BQWU7QUFDSCxrQkFBWSxNQUFNLEtBQUssUUFBUSxnQkFBZ0I7QUFBQSxJQUNsRDtBQUNELFNBQUssV0FBVTtBQUNmLFNBQUssY0FBYyxXQUFXO0FBQzlCLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDRCxRQUFRO0FBQ0osZ0JBQVksS0FBSyxRQUFRLEtBQUssR0FBRztBQUNqQyxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsT0FBTztBQUNILGFBQVMsS0FBSyxJQUFJO0FBQ2xCLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixPQUFPLE9BQU8sUUFBUTtBQUNmLFFBQUksQ0FBQyxTQUFTLFFBQVEsSUFBSSxHQUFHO0FBQ3pCLFdBQUssUUFBUSxPQUFPLE1BQU07QUFBQSxJQUN0QyxPQUFlO0FBQ0gsV0FBSyxvQkFBb0I7QUFBQSxRQUNyQjtBQUFBLFFBQ0E7QUFBQSxNQUNoQjtBQUFBLElBQ1M7QUFBQSxFQUNKO0FBQUEsRUFDRCxRQUFRLE9BQU8sUUFBUTtBQUNuQixVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFNLFNBQVMsS0FBSztBQUNwQixVQUFNLGNBQWMsUUFBUSx1QkFBdUIsS0FBSztBQUN4RCxVQUFNLFVBQVUsS0FBSyxTQUFTLGVBQWUsUUFBUSxPQUFPLFFBQVEsV0FBVztBQUMvRSxVQUFNLFdBQVcsUUFBUSxvQkFBb0IsS0FBSyxTQUFTO0FBQzNELFVBQU0sT0FBTyxLQUFLLFFBQVEsV0FBVztBQUNyQyxTQUFLLFFBQVEsUUFBUTtBQUNyQixTQUFLLFNBQVMsUUFBUTtBQUN0QixTQUFLLGVBQWUsS0FBSztBQUN6QixRQUFJLENBQUMsWUFBWSxNQUFNLFVBQVUsSUFBSSxHQUFHO0FBQ3BDO0FBQUEsSUFDSDtBQUNELFNBQUssY0FBYyxVQUFVO0FBQUEsTUFDekIsTUFBTTtBQUFBLElBQ2xCLENBQVM7QUFDRCxhQUFTLFFBQVEsVUFBVTtBQUFBLE1BQ3ZCO0FBQUEsTUFDQTtBQUFBLElBQ0gsR0FBRSxJQUFJO0FBQ1AsUUFBSSxLQUFLLFVBQVU7QUFDZixVQUFJLEtBQUssVUFBVSxJQUFJLEdBQUc7QUFDdEIsYUFBSyxPQUFNO0FBQUEsTUFDZDtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFDRCxzQkFBc0I7QUFDbEIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxnQkFBZ0IsUUFBUSxVQUFVO0FBQ3hDLFNBQUssZUFBZSxDQUFDLGFBQWEsV0FBUztBQUN2QyxrQkFBWSxLQUFLO0FBQUEsSUFDN0IsQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNKLHNCQUFzQjtBQUNmLFVBQU0sVUFBVSxLQUFLO0FBQ3JCLFVBQU0sWUFBWSxRQUFRO0FBQzFCLFVBQU0sU0FBUyxLQUFLO0FBQ3BCLFVBQU0sVUFBVSxPQUFPLEtBQUssTUFBTSxFQUFFLE9BQU8sQ0FBQyxLQUFLLE9BQUs7QUFDbEQsVUFBSSxNQUFNO0FBQ1YsYUFBTztBQUFBLElBQ1YsR0FBRSxDQUFFO0FBQ0wsUUFBSSxRQUFRO0FBQ1osUUFBSSxXQUFXO0FBQ1gsY0FBUSxNQUFNLE9BQU8sT0FBTyxLQUFLLFNBQVMsRUFBRSxJQUFJLENBQUMsT0FBSztBQUNsRCxjQUFNLGVBQWUsVUFBVTtBQUMvQixjQUFNLE9BQU8sY0FBYyxJQUFJLFlBQVk7QUFDM0MsY0FBTSxXQUFXLFNBQVM7QUFDMUIsY0FBTSxlQUFlLFNBQVM7QUFDOUIsZUFBTztBQUFBLFVBQ0gsU0FBUztBQUFBLFVBQ1QsV0FBVyxXQUFXLGNBQWMsZUFBZSxXQUFXO0FBQUEsVUFDOUQsT0FBTyxXQUFXLGlCQUFpQixlQUFlLGFBQWE7QUFBQSxRQUNuRjtBQUFBLE1BQ2EsRUFBQztBQUFBLElBQ0w7QUFDRCxTQUFLLE9BQU8sQ0FBQyxTQUFPO0FBQ2hCLFlBQU0sZUFBZSxLQUFLO0FBQzFCLFlBQU0sS0FBSyxhQUFhO0FBQ3hCLFlBQU0sT0FBTyxjQUFjLElBQUksWUFBWTtBQUMzQyxZQUFNLFlBQVksZUFBZSxhQUFhLE1BQU0sS0FBSyxLQUFLO0FBQzlELFVBQUksYUFBYSxhQUFhLFVBQWEscUJBQXFCLGFBQWEsVUFBVSxJQUFJLE1BQU0scUJBQXFCLEtBQUssU0FBUyxHQUFHO0FBQ25JLHFCQUFhLFdBQVcsS0FBSztBQUFBLE1BQ2hDO0FBQ0QsY0FBUSxNQUFNO0FBQ2QsVUFBSSxRQUFRO0FBQ1osVUFBSSxNQUFNLFVBQVUsT0FBTyxJQUFJLFNBQVMsV0FBVztBQUMvQyxnQkFBUSxPQUFPO0FBQUEsTUFDL0IsT0FBbUI7QUFDSCxjQUFNLGFBQWEsU0FBUyxTQUFTLFNBQVM7QUFDOUMsZ0JBQVEsSUFBSSxXQUFXO0FBQUEsVUFDbkI7QUFBQSxVQUNBLE1BQU07QUFBQSxVQUNOLEtBQUssS0FBSztBQUFBLFVBQ1YsT0FBTztBQUFBLFFBQzNCLENBQWlCO0FBQ0QsZUFBTyxNQUFNLE1BQU07QUFBQSxNQUN0QjtBQUNELFlBQU0sS0FBSyxjQUFjLE9BQU87QUFBQSxJQUM1QyxDQUFTO0FBQ0QsU0FBSyxTQUFTLENBQUMsWUFBWSxPQUFLO0FBQzVCLFVBQUksQ0FBQyxZQUFZO0FBQ2IsZUFBTyxPQUFPO0FBQUEsTUFDakI7QUFBQSxJQUNiLENBQVM7QUFDRCxTQUFLLFFBQVEsQ0FBQyxVQUFRO0FBQ2xCLGNBQVEsVUFBVSxNQUFNLE9BQU8sTUFBTSxPQUFPO0FBQzVDLGNBQVEsT0FBTyxNQUFNLEtBQUs7QUFBQSxJQUN0QyxDQUFTO0FBQUEsRUFDSjtBQUFBLEVBQ0osa0JBQWtCO0FBQ1gsVUFBTSxXQUFXLEtBQUs7QUFDdEIsVUFBTSxVQUFVLEtBQUssS0FBSyxTQUFTO0FBQ25DLFVBQU0sVUFBVSxTQUFTO0FBQ3pCLGFBQVMsS0FBSyxDQUFDLEdBQUcsTUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLO0FBQ3ZDLFFBQUksVUFBVSxTQUFTO0FBQ25CLGVBQVEsSUFBSSxTQUFTLElBQUksU0FBUyxFQUFFLEdBQUU7QUFDbEMsYUFBSyxvQkFBb0IsQ0FBQztBQUFBLE1BQzdCO0FBQ0QsZUFBUyxPQUFPLFNBQVMsVUFBVSxPQUFPO0FBQUEsSUFDN0M7QUFDRCxTQUFLLGtCQUFrQixTQUFTLE1BQU0sQ0FBQyxFQUFFLEtBQUssY0FBYyxTQUFTLE9BQU8sQ0FBQztBQUFBLEVBQ2hGO0FBQUEsRUFDSiw4QkFBOEI7QUFDdkIsVUFBTSxFQUFFLFdBQVcsVUFBVyxNQUFNLEVBQUUsU0FBUSxFQUFNLElBQUc7QUFDdkQsUUFBSSxTQUFTLFNBQVMsU0FBUyxRQUFRO0FBQ25DLGFBQU8sS0FBSztBQUFBLElBQ2Y7QUFDRCxhQUFTLFFBQVEsQ0FBQyxNQUFNLFVBQVE7QUFDNUIsVUFBSSxTQUFTLE9BQU8sQ0FBQyxNQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsV0FBVyxHQUFHO0FBQ3hELGFBQUssb0JBQW9CLEtBQUs7QUFBQSxNQUNqQztBQUFBLElBQ2IsQ0FBUztBQUFBLEVBQ0o7QUFBQSxFQUNELDJCQUEyQjtBQUN2QixVQUFNLGlCQUFpQjtBQUN2QixVQUFNLFdBQVcsS0FBSyxLQUFLO0FBQzNCLFFBQUksR0FBRztBQUNQLFNBQUssNEJBQTJCO0FBQ2hDLFNBQUksSUFBSSxHQUFHLE9BQU8sU0FBUyxRQUFRLElBQUksTUFBTSxLQUFJO0FBQzdDLFlBQU0sVUFBVSxTQUFTO0FBQ3pCLFVBQUksT0FBTyxLQUFLLGVBQWUsQ0FBQztBQUNoQyxZQUFNLE9BQU8sUUFBUSxRQUFRLEtBQUssT0FBTztBQUN6QyxVQUFJLEtBQUssUUFBUSxLQUFLLFNBQVMsTUFBTTtBQUNqQyxhQUFLLG9CQUFvQixDQUFDO0FBQzFCLGVBQU8sS0FBSyxlQUFlLENBQUM7QUFBQSxNQUMvQjtBQUNELFdBQUssT0FBTztBQUNaLFdBQUssWUFBWSxRQUFRLGFBQWEsYUFBYSxNQUFNLEtBQUssT0FBTztBQUNyRSxXQUFLLFFBQVEsUUFBUSxTQUFTO0FBQzlCLFdBQUssUUFBUTtBQUNiLFdBQUssUUFBUSxLQUFLLFFBQVE7QUFDMUIsV0FBSyxVQUFVLEtBQUssaUJBQWlCLENBQUM7QUFDdEMsVUFBSSxLQUFLLFlBQVk7QUFDakIsYUFBSyxXQUFXLFlBQVksQ0FBQztBQUM3QixhQUFLLFdBQVc7TUFDaEMsT0FBbUI7QUFDSCxjQUFNLGtCQUFrQixTQUFTLGNBQWMsSUFBSTtBQUNuRCxjQUFNLEVBQUUsb0JBQXFCLGdCQUFlLElBQU0sU0FBUyxTQUFTO0FBQ3BFLGVBQU8sT0FBTyxpQkFBaUI7QUFBQSxVQUMzQixpQkFBaUIsU0FBUyxXQUFXLGVBQWU7QUFBQSxVQUNwRCxvQkFBb0Isc0JBQXNCLFNBQVMsV0FBVyxrQkFBa0I7QUFBQSxRQUNwRyxDQUFpQjtBQUNELGFBQUssYUFBYSxJQUFJLGdCQUFnQixNQUFNLENBQUM7QUFDN0MsdUJBQWUsS0FBSyxLQUFLLFVBQVU7QUFBQSxNQUN0QztBQUFBLElBQ0o7QUFDRCxTQUFLLGdCQUFlO0FBQ3BCLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixpQkFBaUI7QUFDVixTQUFLLEtBQUssS0FBSyxVQUFVLENBQUMsU0FBUyxpQkFBZTtBQUM5QyxXQUFLLGVBQWUsWUFBWSxFQUFFLFdBQVcsTUFBSztBQUFBLElBQ3JELEdBQUUsSUFBSTtBQUFBLEVBQ1Y7QUFBQSxFQUNKLFFBQVE7QUFDRCxTQUFLLGVBQWM7QUFDbkIsU0FBSyxjQUFjLE9BQU87QUFBQSxFQUM3QjtBQUFBLEVBQ0QsT0FBTyxNQUFNO0FBQ1QsVUFBTSxTQUFTLEtBQUs7QUFDcEIsV0FBTyxPQUFNO0FBQ2IsVUFBTSxVQUFVLEtBQUssV0FBVyxPQUFPLGVBQWUsT0FBTyxrQkFBbUIsR0FBRSxLQUFLLFdBQVk7QUFDbkcsVUFBTSxnQkFBZ0IsS0FBSyxzQkFBc0IsQ0FBQyxRQUFRO0FBQzFELFNBQUssY0FBYTtBQUNsQixTQUFLLG9CQUFtQjtBQUN4QixTQUFLLHFCQUFvQjtBQUN6QixTQUFLLFNBQVM7QUFDZCxRQUFJLEtBQUssY0FBYyxnQkFBZ0I7QUFBQSxNQUNuQztBQUFBLE1BQ0EsWUFBWTtBQUFBLElBQ2YsT0FBTSxPQUFPO0FBQ1Y7QUFBQSxJQUNIO0FBQ0QsVUFBTSxpQkFBaUIsS0FBSztBQUM1QixTQUFLLGNBQWMsc0JBQXNCO0FBQ3pDLFFBQUksYUFBYTtBQUNqQixhQUFRLElBQUksR0FBRyxPQUFPLEtBQUssS0FBSyxTQUFTLFFBQVEsSUFBSSxNQUFNLEtBQUk7QUFDM0QsWUFBTSxFQUFFLFdBQWEsSUFBRyxLQUFLLGVBQWUsQ0FBQztBQUM3QyxZQUFNLFFBQVEsQ0FBQyxpQkFBaUIsZUFBZSxRQUFRLFVBQVUsTUFBTTtBQUN2RSxpQkFBVyxzQkFBc0IsS0FBSztBQUN0QyxtQkFBYSxLQUFLLElBQUksQ0FBQyxXQUFXLGVBQWMsR0FBSSxVQUFVO0FBQUEsSUFDakU7QUFDRCxpQkFBYSxLQUFLLGNBQWMsUUFBUSxPQUFPLGNBQWMsYUFBYTtBQUMxRSxTQUFLLGNBQWMsVUFBVTtBQUM3QixRQUFJLENBQUMsZUFBZTtBQUNoQixXQUFLLGdCQUFnQixDQUFDLGVBQWE7QUFDL0IsbUJBQVcsTUFBSztBQUFBLE1BQ2hDLENBQWE7QUFBQSxJQUNKO0FBQ0QsU0FBSyxnQkFBZ0IsSUFBSTtBQUN6QixTQUFLLGNBQWMsZUFBZTtBQUFBLE1BQzlCO0FBQUEsSUFDWixDQUFTO0FBQ0QsU0FBSyxRQUFRLEtBQUssY0FBYyxLQUFLLE1BQU0sQ0FBQztBQUM1QyxVQUFNLEVBQUUsU0FBVSxXQUFhLElBQUc7QUFDbEMsUUFBSSxZQUFZO0FBQ1osV0FBSyxjQUFjLFlBQVksSUFBSTtBQUFBLElBQy9DLFdBQW1CLFFBQVEsUUFBUTtBQUN2QixXQUFLLG1CQUFtQixTQUFTLFNBQVMsSUFBSTtBQUFBLElBQ2pEO0FBQ0QsU0FBSyxPQUFNO0FBQUEsRUFDZDtBQUFBLEVBQ0osZ0JBQWdCO0FBQ1QsU0FBSyxLQUFLLFFBQVEsQ0FBQyxVQUFRO0FBQ3ZCLGNBQVEsVUFBVSxNQUFNLEtBQUs7QUFBQSxJQUN6QyxDQUFTO0FBQ0QsU0FBSyxvQkFBbUI7QUFDeEIsU0FBSyxvQkFBbUI7QUFBQSxFQUMzQjtBQUFBLEVBQ0osc0JBQXNCO0FBQ2YsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxpQkFBaUIsSUFBSSxJQUFJLE9BQU8sS0FBSyxLQUFLLFVBQVUsQ0FBQztBQUMzRCxVQUFNLFlBQVksSUFBSSxJQUFJLFFBQVEsTUFBTTtBQUN4QyxRQUFJLENBQUMsVUFBVSxnQkFBZ0IsU0FBUyxLQUFLLENBQUMsQ0FBQyxLQUFLLHlCQUF5QixRQUFRLFlBQVk7QUFDN0YsV0FBSyxhQUFZO0FBQ2pCLFdBQUssV0FBVTtBQUFBLElBQ2xCO0FBQUEsRUFDSjtBQUFBLEVBQ0osdUJBQXVCO0FBQ2hCLFVBQU0sRUFBRSxlQUFpQixJQUFHO0FBQzVCLFVBQU0sVUFBVSxLQUFLLHVCQUFzQixLQUFNO0FBQ2pELGVBQVcsRUFBRSxRQUFTLE9BQVEsTUFBSyxLQUFPLFNBQVE7QUFDOUMsWUFBTSxPQUFPLFdBQVcsb0JBQW9CLENBQUMsUUFBUTtBQUNyRCxzQkFBZ0IsZ0JBQWdCLE9BQU8sSUFBSTtBQUFBLElBQzlDO0FBQUEsRUFDSjtBQUFBLEVBQ0oseUJBQXlCO0FBQ2xCLFVBQU0sZUFBZSxLQUFLO0FBQzFCLFFBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLFFBQVE7QUFDdkM7QUFBQSxJQUNIO0FBQ0QsU0FBSyxlQUFlO0FBQ3BCLFVBQU0sZUFBZSxLQUFLLEtBQUssU0FBUztBQUN4QyxVQUFNLFVBQVUsQ0FBQyxRQUFNLElBQUksSUFBSSxhQUFhLE9BQU8sQ0FBQyxNQUFJLEVBQUUsT0FBTyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsTUFBSSxJQUFJLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ2xILFVBQU0sWUFBWSxRQUFRLENBQUM7QUFDM0IsYUFBUSxJQUFJLEdBQUcsSUFBSSxjQUFjLEtBQUk7QUFDakMsVUFBSSxDQUFDLFVBQVUsV0FBVyxRQUFRLENBQUMsQ0FBQyxHQUFHO0FBQ25DO0FBQUEsTUFDSDtBQUFBLElBQ0o7QUFDRCxXQUFPLE1BQU0sS0FBSyxTQUFTLEVBQUUsSUFBSSxDQUFDLE1BQUksRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFLO0FBQUEsTUFDdEQsUUFBUSxFQUFFO0FBQUEsTUFDVixPQUFPLENBQUMsRUFBRTtBQUFBLE1BQ1YsT0FBTyxDQUFDLEVBQUU7QUFBQSxJQUNiLEVBQUM7QUFBQSxFQUNUO0FBQUEsRUFDSixjQUFjLFlBQVk7QUFDbkIsUUFBSSxLQUFLLGNBQWMsZ0JBQWdCO0FBQUEsTUFDbkMsWUFBWTtBQUFBLElBQ2YsT0FBTSxPQUFPO0FBQ1Y7QUFBQSxJQUNIO0FBQ0QsWUFBUSxPQUFPLE1BQU0sS0FBSyxPQUFPLEtBQUssUUFBUSxVQUFVO0FBQ3hELFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sU0FBUyxLQUFLLFNBQVMsS0FBSyxLQUFLLFVBQVU7QUFDakQsU0FBSyxVQUFVO0FBQ2YsU0FBSyxLQUFLLE9BQU8sQ0FBQyxRQUFNO0FBQ3BCLFVBQUksVUFBVSxJQUFJLGFBQWEsYUFBYTtBQUN4QztBQUFBLE1BQ0g7QUFDRCxVQUFJLElBQUksV0FBVztBQUNmLFlBQUksVUFBUztBQUFBLE1BQ2hCO0FBQ0QsV0FBSyxRQUFRLEtBQUssR0FBRyxJQUFJLFFBQVM7QUFBQSxJQUNyQyxHQUFFLElBQUk7QUFDUCxTQUFLLFFBQVEsUUFBUSxDQUFDLE1BQU0sVUFBUTtBQUNoQyxXQUFLLE9BQU87QUFBQSxJQUN4QixDQUFTO0FBQ0QsU0FBSyxjQUFjLGFBQWE7QUFBQSxFQUNuQztBQUFBLEVBQ0osZ0JBQWdCLE1BQU07QUFDZixRQUFJLEtBQUssY0FBYyx3QkFBd0I7QUFBQSxNQUMzQztBQUFBLE1BQ0EsWUFBWTtBQUFBLElBQ2YsT0FBTSxPQUFPO0FBQ1Y7QUFBQSxJQUNIO0FBQ0QsYUFBUSxJQUFJLEdBQUcsT0FBTyxLQUFLLEtBQUssU0FBUyxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDM0QsV0FBSyxlQUFlLENBQUMsRUFBRSxXQUFXLFVBQVM7QUFBQSxJQUM5QztBQUNELGFBQVEsS0FBSyxHQUFHLFFBQVEsS0FBSyxLQUFLLFNBQVMsUUFBUSxLQUFLLE9BQU8sRUFBRSxJQUFHO0FBQ2hFLFdBQUssZUFBZSxJQUFJLFdBQVcsSUFBSSxJQUFJLEtBQUs7QUFBQSxRQUM1QyxjQUFjO0FBQUEsTUFDOUIsQ0FBYSxJQUFJLElBQUk7QUFBQSxJQUNaO0FBQ0QsU0FBSyxjQUFjLHVCQUF1QjtBQUFBLE1BQ3RDO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDSjtBQUFBLEVBQ0osZUFBZSxPQUFPLE1BQU07QUFDckIsVUFBTSxPQUFPLEtBQUssZUFBZSxLQUFLO0FBQ3RDLFVBQU0sT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsWUFBWTtBQUFBLElBQ3hCO0FBQ1EsUUFBSSxLQUFLLGNBQWMsdUJBQXVCLElBQUksTUFBTSxPQUFPO0FBQzNEO0FBQUEsSUFDSDtBQUNELFNBQUssV0FBVyxRQUFRLElBQUk7QUFDNUIsU0FBSyxhQUFhO0FBQ2xCLFNBQUssY0FBYyxzQkFBc0IsSUFBSTtBQUFBLEVBQ2hEO0FBQUEsRUFDRCxTQUFTO0FBQ0wsUUFBSSxLQUFLLGNBQWMsZ0JBQWdCO0FBQUEsTUFDbkMsWUFBWTtBQUFBLElBQ2YsT0FBTSxPQUFPO0FBQ1Y7QUFBQSxJQUNIO0FBQ0QsUUFBSSxTQUFTLElBQUksSUFBSSxHQUFHO0FBQ3BCLFVBQUksS0FBSyxZQUFZLENBQUMsU0FBUyxRQUFRLElBQUksR0FBRztBQUMxQyxpQkFBUyxNQUFNLElBQUk7QUFBQSxNQUN0QjtBQUFBLElBQ2IsT0FBZTtBQUNILFdBQUssS0FBSTtBQUNULDJCQUFxQjtBQUFBLFFBQ2pCLE9BQU87QUFBQSxNQUN2QixDQUFhO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFBQSxFQUNELE9BQU87QUFDSCxRQUFJO0FBQ0osUUFBSSxLQUFLLG1CQUFtQjtBQUN4QixZQUFNLEVBQUUsT0FBUSxXQUFZLEtBQUs7QUFDakMsV0FBSyxRQUFRLE9BQU8sTUFBTTtBQUMxQixXQUFLLG9CQUFvQjtBQUFBLElBQzVCO0FBQ0QsU0FBSyxNQUFLO0FBQ1YsUUFBSSxLQUFLLFNBQVMsS0FBSyxLQUFLLFVBQVUsR0FBRztBQUNyQztBQUFBLElBQ0g7QUFDRCxRQUFJLEtBQUssY0FBYyxjQUFjO0FBQUEsTUFDakMsWUFBWTtBQUFBLElBQ2YsT0FBTSxPQUFPO0FBQ1Y7QUFBQSxJQUNIO0FBQ0QsVUFBTSxTQUFTLEtBQUs7QUFDcEIsU0FBSSxJQUFJLEdBQUcsSUFBSSxPQUFPLFVBQVUsT0FBTyxHQUFHLEtBQUssR0FBRyxFQUFFLEdBQUU7QUFDbEQsYUFBTyxHQUFHLEtBQUssS0FBSyxTQUFTO0FBQUEsSUFDaEM7QUFDRCxTQUFLLGNBQWE7QUFDbEIsV0FBTSxJQUFJLE9BQU8sUUFBUSxFQUFFLEdBQUU7QUFDekIsYUFBTyxHQUFHLEtBQUssS0FBSyxTQUFTO0FBQUEsSUFDaEM7QUFDRCxTQUFLLGNBQWMsV0FBVztBQUFBLEVBQ2pDO0FBQUEsRUFDSix1QkFBdUIsZUFBZTtBQUMvQixVQUFNLFdBQVcsS0FBSztBQUN0QixVQUFNLFNBQVM7QUFDZixRQUFJLEdBQUc7QUFDUCxTQUFJLElBQUksR0FBRyxPQUFPLFNBQVMsUUFBUSxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQzdDLFlBQU0sT0FBTyxTQUFTO0FBQ3RCLFVBQUksQ0FBQyxpQkFBaUIsS0FBSyxTQUFTO0FBQ2hDLGVBQU8sS0FBSyxJQUFJO0FBQUEsTUFDbkI7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLCtCQUErQjtBQUN4QixXQUFPLEtBQUssdUJBQXVCLElBQUk7QUFBQSxFQUMxQztBQUFBLEVBQ0osZ0JBQWdCO0FBQ1QsUUFBSSxLQUFLLGNBQWMsc0JBQXNCO0FBQUEsTUFDekMsWUFBWTtBQUFBLElBQ2YsT0FBTSxPQUFPO0FBQ1Y7QUFBQSxJQUNIO0FBQ0QsVUFBTSxXQUFXLEtBQUs7QUFDdEIsYUFBUSxJQUFJLFNBQVMsU0FBUyxHQUFHLEtBQUssR0FBRyxFQUFFLEdBQUU7QUFDekMsV0FBSyxhQUFhLFNBQVMsRUFBRTtBQUFBLElBQ2hDO0FBQ0QsU0FBSyxjQUFjLG1CQUFtQjtBQUFBLEVBQ3pDO0FBQUEsRUFDSixhQUFhLE1BQU07QUFDWixVQUFNLE1BQU0sS0FBSztBQUNqQixVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLFVBQVUsQ0FBQyxLQUFLO0FBQ3RCLFVBQU0sT0FBTyxlQUFlLElBQUksS0FBSyxLQUFLO0FBQzFDLFVBQU0sT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLE9BQU8sS0FBSztBQUFBLE1BQ1osWUFBWTtBQUFBLElBQ3hCO0FBQ1EsUUFBSSxLQUFLLGNBQWMscUJBQXFCLElBQUksTUFBTSxPQUFPO0FBQ3pEO0FBQUEsSUFDSDtBQUNELFFBQUksU0FBUztBQUNULGVBQVMsS0FBSztBQUFBLFFBQ1YsTUFBTSxLQUFLLFNBQVMsUUFBUSxJQUFJLEtBQUssT0FBTyxLQUFLO0FBQUEsUUFDakQsT0FBTyxLQUFLLFVBQVUsUUFBUSxLQUFLLFFBQVEsS0FBSyxRQUFRLEtBQUs7QUFBQSxRQUM3RCxLQUFLLEtBQUssUUFBUSxRQUFRLElBQUksS0FBSyxNQUFNLEtBQUs7QUFBQSxRQUM5QyxRQUFRLEtBQUssV0FBVyxRQUFRLEtBQUssU0FBUyxLQUFLLFNBQVMsS0FBSztBQUFBLE1BQ2pGLENBQWE7QUFBQSxJQUNKO0FBQ0QsU0FBSyxXQUFXO0FBQ2hCLFFBQUksU0FBUztBQUNULGlCQUFXLEdBQUc7QUFBQSxJQUNqQjtBQUNELFNBQUssYUFBYTtBQUNsQixTQUFLLGNBQWMsb0JBQW9CLElBQUk7QUFBQSxFQUM5QztBQUFBLEVBQ0osY0FBYyxPQUFPO0FBQ2QsV0FBTyxlQUFlLE9BQU8sS0FBSyxXQUFXLEtBQUssV0FBVztBQUFBLEVBQ2hFO0FBQUEsRUFDRCwwQkFBMEIsR0FBRyxNQUFNLFNBQVMsa0JBQWtCO0FBQzFELFVBQU0sU0FBUyxZQUFZLE1BQU07QUFDakMsUUFBSSxPQUFPLFdBQVcsWUFBWTtBQUM5QixhQUFPLE9BQU8sTUFBTSxHQUFHLFNBQVMsZ0JBQWdCO0FBQUEsSUFDbkQ7QUFDRCxXQUFPO0VBQ1Y7QUFBQSxFQUNELGVBQWUsY0FBYztBQUN6QixVQUFNLFVBQVUsS0FBSyxLQUFLLFNBQVM7QUFDbkMsVUFBTSxXQUFXLEtBQUs7QUFDdEIsUUFBSSxPQUFPLFNBQVMsT0FBTyxDQUFDLE1BQUksS0FBSyxFQUFFLGFBQWEsT0FBTyxFQUFFLElBQUc7QUFDaEUsUUFBSSxDQUFDLE1BQU07QUFDUCxhQUFPO0FBQUEsUUFDSCxNQUFNO0FBQUEsUUFDTixNQUFNLENBQUU7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFlBQVk7QUFBQSxRQUNaLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULE9BQU8sV0FBVyxRQUFRLFNBQVM7QUFBQSxRQUNuQyxPQUFPO0FBQUEsUUFDUCxVQUFVO0FBQUEsUUFDVixTQUFTLENBQUU7QUFBQSxRQUNYLFNBQVM7QUFBQSxNQUN6QjtBQUNZLGVBQVMsS0FBSyxJQUFJO0FBQUEsSUFDckI7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsYUFBYTtBQUNULFdBQU8sS0FBSyxhQUFhLEtBQUssV0FBVyxjQUFjLE1BQU07QUFBQSxNQUN6RCxPQUFPO0FBQUEsTUFDUCxNQUFNO0FBQUEsSUFDVDtBQUFBLEVBQ0o7QUFBQSxFQUNELHlCQUF5QjtBQUNyQixXQUFPLEtBQUssNkJBQThCLEVBQUM7QUFBQSxFQUM5QztBQUFBLEVBQ0QsaUJBQWlCLGNBQWM7QUFDM0IsVUFBTSxVQUFVLEtBQUssS0FBSyxTQUFTO0FBQ25DLFFBQUksQ0FBQyxTQUFTO0FBQ1YsYUFBTztBQUFBLElBQ1Y7QUFDRCxVQUFNLE9BQU8sS0FBSyxlQUFlLFlBQVk7QUFDN0MsV0FBTyxPQUFPLEtBQUssV0FBVyxZQUFZLENBQUMsS0FBSyxTQUFTLENBQUMsUUFBUTtBQUFBLEVBQ3JFO0FBQUEsRUFDRCxxQkFBcUIsY0FBYyxTQUFTO0FBQ3hDLFVBQU0sT0FBTyxLQUFLLGVBQWUsWUFBWTtBQUM3QyxTQUFLLFNBQVMsQ0FBQztBQUFBLEVBQ2xCO0FBQUEsRUFDRCxxQkFBcUIsT0FBTztBQUN4QixTQUFLLGVBQWUsU0FBUyxDQUFDLEtBQUssZUFBZTtBQUFBLEVBQ3JEO0FBQUEsRUFDRCxrQkFBa0IsT0FBTztBQUNyQixXQUFPLENBQUMsS0FBSyxlQUFlO0FBQUEsRUFDL0I7QUFBQSxFQUNKLGtCQUFrQixjQUFjLFdBQVcsU0FBUztBQUM3QyxVQUFNLE9BQU8sVUFBVSxTQUFTO0FBQ2hDLFVBQU0sT0FBTyxLQUFLLGVBQWUsWUFBWTtBQUM3QyxVQUFNLFFBQVEsS0FBSyxXQUFXLG1CQUFtQixRQUFXLElBQUk7QUFDaEUsUUFBSSxRQUFRLFNBQVMsR0FBRztBQUNwQixXQUFLLEtBQUssV0FBVyxTQUFTLENBQUM7QUFDL0IsV0FBSyxPQUFNO0FBQUEsSUFDdkIsT0FBZTtBQUNILFdBQUsscUJBQXFCLGNBQWMsT0FBTztBQUMvQyxZQUFNLE9BQU8sTUFBTTtBQUFBLFFBQ2Y7QUFBQSxNQUNoQixDQUFhO0FBQ0QsV0FBSyxPQUFPLENBQUMsUUFBTSxJQUFJLGlCQUFpQixlQUFlLE9BQU8sTUFBUztBQUFBLElBQzFFO0FBQUEsRUFDSjtBQUFBLEVBQ0QsS0FBSyxjQUFjLFdBQVc7QUFDMUIsU0FBSyxrQkFBa0IsY0FBYyxXQUFXLEtBQUs7QUFBQSxFQUN4RDtBQUFBLEVBQ0QsS0FBSyxjQUFjLFdBQVc7QUFDMUIsU0FBSyxrQkFBa0IsY0FBYyxXQUFXLElBQUk7QUFBQSxFQUN2RDtBQUFBLEVBQ0osb0JBQW9CLGNBQWM7QUFDM0IsVUFBTSxPQUFPLEtBQUssVUFBVTtBQUM1QixRQUFJLFFBQVEsS0FBSyxZQUFZO0FBQ3pCLFdBQUssV0FBVztJQUNuQjtBQUNELFdBQU8sS0FBSyxVQUFVO0FBQUEsRUFDekI7QUFBQSxFQUNELFFBQVE7QUFDSixRQUFJLEdBQUc7QUFDUCxTQUFLLEtBQUk7QUFDVCxhQUFTLE9BQU8sSUFBSTtBQUNwQixTQUFJLElBQUksR0FBRyxPQUFPLEtBQUssS0FBSyxTQUFTLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUN2RCxXQUFLLG9CQUFvQixDQUFDO0FBQUEsSUFDN0I7QUFBQSxFQUNKO0FBQUEsRUFDRCxVQUFVO0FBQ04sU0FBSyxjQUFjLGVBQWU7QUFDbEMsVUFBTSxFQUFFLFFBQVMsSUFBTSxJQUFHO0FBQzFCLFNBQUssTUFBSztBQUNWLFNBQUssT0FBTztBQUNaLFFBQUksUUFBUTtBQUNSLFdBQUssYUFBWTtBQUNqQixrQkFBWSxRQUFRLEdBQUc7QUFDdkIsV0FBSyxTQUFTLGVBQWUsR0FBRztBQUNoQyxXQUFLLFNBQVM7QUFDZCxXQUFLLE1BQU07QUFBQSxJQUNkO0FBQ0QsV0FBTyxVQUFVLEtBQUs7QUFDdEIsU0FBSyxjQUFjLGNBQWM7QUFBQSxFQUNwQztBQUFBLEVBQ0QsaUJBQWlCLE1BQU07QUFDbkIsV0FBTyxLQUFLLE9BQU8sVUFBVSxHQUFHLElBQUk7QUFBQSxFQUN2QztBQUFBLEVBQ0osYUFBYTtBQUNOLFNBQUssZUFBYztBQUNuQixRQUFJLEtBQUssUUFBUSxZQUFZO0FBQ3pCLFdBQUsscUJBQW9CO0FBQUEsSUFDckMsT0FBZTtBQUNILFdBQUssV0FBVztBQUFBLElBQ25CO0FBQUEsRUFDSjtBQUFBLEVBQ0osaUJBQWlCO0FBQ1YsVUFBTSxZQUFZLEtBQUs7QUFDdkIsVUFBTSxXQUFXLEtBQUs7QUFDdEIsVUFBTSxPQUFPLENBQUMsTUFBTUMsY0FBVztBQUMzQixlQUFTLGlCQUFpQixNQUFNLE1BQU1BLFNBQVE7QUFDOUMsZ0JBQVUsUUFBUUE7QUFBQSxJQUM5QjtBQUNRLFVBQU0sV0FBVyxDQUFDLEdBQUcsR0FBRyxNQUFJO0FBQ3hCLFFBQUUsVUFBVTtBQUNaLFFBQUUsVUFBVTtBQUNaLFdBQUssY0FBYyxDQUFDO0FBQUEsSUFDaEM7QUFDUSxTQUFLLEtBQUssUUFBUSxRQUFRLENBQUMsU0FBTyxLQUFLLE1BQU0sUUFBUSxDQUFDO0FBQUEsRUFDekQ7QUFBQSxFQUNKLHVCQUF1QjtBQUNoQixRQUFJLENBQUMsS0FBSyxzQkFBc0I7QUFDNUIsV0FBSyx1QkFBdUI7SUFDL0I7QUFDRCxVQUFNLFlBQVksS0FBSztBQUN2QixVQUFNLFdBQVcsS0FBSztBQUN0QixVQUFNLE9BQU8sQ0FBQyxNQUFNQSxjQUFXO0FBQzNCLGVBQVMsaUJBQWlCLE1BQU0sTUFBTUEsU0FBUTtBQUM5QyxnQkFBVSxRQUFRQTtBQUFBLElBQzlCO0FBQ1EsVUFBTSxVQUFVLENBQUMsTUFBTUEsY0FBVztBQUM5QixVQUFJLFVBQVUsT0FBTztBQUNqQixpQkFBUyxvQkFBb0IsTUFBTSxNQUFNQSxTQUFRO0FBQ2pELGVBQU8sVUFBVTtBQUFBLE1BQ3BCO0FBQUEsSUFDYjtBQUNRLFVBQU0sV0FBVyxDQUFDLE9BQU8sV0FBUztBQUM5QixVQUFJLEtBQUssUUFBUTtBQUNiLGFBQUssT0FBTyxPQUFPLE1BQU07QUFBQSxNQUM1QjtBQUFBLElBQ2I7QUFDUSxRQUFJO0FBQ0osVUFBTSxXQUFXLE1BQUk7QUFDakIsY0FBUSxVQUFVLFFBQVE7QUFDMUIsV0FBSyxXQUFXO0FBQ2hCLFdBQUssT0FBTTtBQUNYLFdBQUssVUFBVSxRQUFRO0FBQ3ZCLFdBQUssVUFBVSxRQUFRO0FBQUEsSUFDbkM7QUFDUSxlQUFXLE1BQUk7QUFDWCxXQUFLLFdBQVc7QUFDaEIsY0FBUSxVQUFVLFFBQVE7QUFDMUIsV0FBSyxNQUFLO0FBQ1YsV0FBSyxRQUFRLEdBQUcsQ0FBQztBQUNqQixXQUFLLFVBQVUsUUFBUTtBQUFBLElBQ25DO0FBQ1EsUUFBSSxTQUFTLFdBQVcsS0FBSyxNQUFNLEdBQUc7QUFDbEM7SUFDWixPQUFlO0FBQ0g7SUFDSDtBQUFBLEVBQ0o7QUFBQSxFQUNKLGVBQWU7QUFDUixTQUFLLEtBQUssWUFBWSxDQUFDLFVBQVUsU0FBTztBQUNwQyxXQUFLLFNBQVMsb0JBQW9CLE1BQU0sTUFBTSxRQUFRO0FBQUEsSUFDbEUsQ0FBUztBQUNELFNBQUssYUFBYTtBQUNsQixTQUFLLEtBQUssc0JBQXNCLENBQUMsVUFBVSxTQUFPO0FBQzlDLFdBQUssU0FBUyxvQkFBb0IsTUFBTSxNQUFNLFFBQVE7QUFBQSxJQUNsRSxDQUFTO0FBQ0QsU0FBSyx1QkFBdUI7QUFBQSxFQUMvQjtBQUFBLEVBQ0QsaUJBQWlCLE9BQU8sTUFBTSxTQUFTO0FBQ25DLFVBQU0sU0FBUyxVQUFVLFFBQVE7QUFDakMsUUFBSSxNQUFNLE1BQU0sR0FBRztBQUNuQixRQUFJLFNBQVMsV0FBVztBQUNwQixhQUFPLEtBQUssZUFBZSxNQUFNLEdBQUcsWUFBWTtBQUNoRCxXQUFLLFdBQVcsTUFBTSxTQUFTLHFCQUFvQjtBQUFBLElBQ3REO0FBQ0QsU0FBSSxJQUFJLEdBQUcsT0FBTyxNQUFNLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUMxQyxhQUFPLE1BQU07QUFDYixZQUFNLGFBQWEsUUFBUSxLQUFLLGVBQWUsS0FBSyxZQUFZLEVBQUU7QUFDbEUsVUFBSSxZQUFZO0FBQ1osbUJBQVcsU0FBUyxjQUFjLEtBQUssU0FBUyxLQUFLLGNBQWMsS0FBSyxLQUFLO0FBQUEsTUFDaEY7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUFBLEVBQ0osb0JBQW9CO0FBQ2IsV0FBTyxLQUFLLFdBQVc7RUFDMUI7QUFBQSxFQUNKLGtCQUFrQixnQkFBZ0I7QUFDM0IsVUFBTSxhQUFhLEtBQUssV0FBVztBQUNuQyxVQUFNLFNBQVMsZUFBZSxJQUFJLENBQUMsRUFBRSxjQUFlLFlBQVc7QUFDM0QsWUFBTSxPQUFPLEtBQUssZUFBZSxZQUFZO0FBQzdDLFVBQUksQ0FBQyxNQUFNO0FBQ1AsY0FBTSxJQUFJLE1BQU0sK0JBQStCLFlBQVk7QUFBQSxNQUM5RDtBQUNELGFBQU87QUFBQSxRQUNIO0FBQUEsUUFDQSxTQUFTLEtBQUssS0FBSztBQUFBLFFBQ25CO0FBQUEsTUFDaEI7QUFBQSxJQUNBLENBQVM7QUFDRCxVQUFNLFVBQVUsQ0FBQyxlQUFlLFFBQVEsVUFBVTtBQUNsRCxRQUFJLFNBQVM7QUFDVCxXQUFLLFVBQVU7QUFDZixXQUFLLGFBQWE7QUFDbEIsV0FBSyxtQkFBbUIsUUFBUSxVQUFVO0FBQUEsSUFDN0M7QUFBQSxFQUNKO0FBQUEsRUFDSixjQUFjLE1BQU0sTUFBTSxRQUFRO0FBQzNCLFdBQU8sS0FBSyxTQUFTLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUFBLEVBQ3ZEO0FBQUEsRUFDSixnQkFBZ0IsVUFBVTtBQUNuQixXQUFPLEtBQUssU0FBUyxPQUFPLE9BQU8sQ0FBQyxNQUFJLEVBQUUsT0FBTyxPQUFPLFFBQVEsRUFBRSxXQUFXO0FBQUEsRUFDaEY7QUFBQSxFQUNKLG1CQUFtQixRQUFRLFlBQVksUUFBUTtBQUN4QyxVQUFNLGVBQWUsS0FBSyxRQUFRO0FBQ2xDLFVBQU0sT0FBTyxDQUFDLEdBQUcsTUFBSSxFQUFFLE9BQU8sQ0FBQyxNQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsTUFBSSxFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLFVBQVUsRUFBRSxLQUFLLENBQUM7QUFDekcsVUFBTSxjQUFjLEtBQUssWUFBWSxNQUFNO0FBQzNDLFVBQU0sWUFBWSxTQUFTLFNBQVMsS0FBSyxRQUFRLFVBQVU7QUFDM0QsUUFBSSxZQUFZLFFBQVE7QUFDcEIsV0FBSyxpQkFBaUIsYUFBYSxhQUFhLE1BQU0sS0FBSztBQUFBLElBQzlEO0FBQ0QsUUFBSSxVQUFVLFVBQVUsYUFBYSxNQUFNO0FBQ3ZDLFdBQUssaUJBQWlCLFdBQVcsYUFBYSxNQUFNLElBQUk7QUFBQSxJQUMzRDtBQUFBLEVBQ0o7QUFBQSxFQUNKLGNBQWMsR0FBRyxRQUFRO0FBQ2xCLFVBQU0sT0FBTztBQUFBLE1BQ1QsT0FBTztBQUFBLE1BQ1A7QUFBQSxNQUNBLFlBQVk7QUFBQSxNQUNaLGFBQWEsS0FBSyxjQUFjLENBQUM7QUFBQSxJQUM3QztBQUNRLFVBQU0sY0FBYyxDQUFDLFlBQVUsT0FBTyxRQUFRLFVBQVUsS0FBSyxRQUFRLFFBQVEsU0FBUyxFQUFFLE9BQU8sSUFBSTtBQUNuRyxRQUFJLEtBQUssY0FBYyxlQUFlLE1BQU0sV0FBVyxNQUFNLE9BQU87QUFDaEU7QUFBQSxJQUNIO0FBQ0QsVUFBTSxVQUFVLEtBQUssYUFBYSxHQUFHLFFBQVEsS0FBSyxXQUFXO0FBQzdELFNBQUssYUFBYTtBQUNsQixTQUFLLGNBQWMsY0FBYyxNQUFNLFdBQVc7QUFDbEQsUUFBSSxXQUFXLEtBQUssU0FBUztBQUN6QixXQUFLLE9BQU07QUFBQSxJQUNkO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLGFBQWEsR0FBRyxRQUFRLGFBQWE7QUFDOUIsVUFBTSxFQUFFLFNBQVMsYUFBYSxDQUFFLEdBQUcsUUFBTyxJQUFNO0FBQ2hELFVBQU0sbUJBQW1CO0FBQ3pCLFVBQU0sU0FBUyxLQUFLLG1CQUFtQixHQUFHLFlBQVksYUFBYSxnQkFBZ0I7QUFDbkYsVUFBTSxVQUFVLGNBQWMsQ0FBQztBQUMvQixVQUFNLFlBQVksbUJBQW1CLEdBQUcsS0FBSyxZQUFZLGFBQWEsT0FBTztBQUM3RSxRQUFJLGFBQWE7QUFDYixXQUFLLGFBQWE7QUFDbEIsZUFBUyxRQUFRLFNBQVM7QUFBQSxRQUN0QjtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsTUFDSCxHQUFFLElBQUk7QUFDUCxVQUFJLFNBQVM7QUFDVCxpQkFBUyxRQUFRLFNBQVM7QUFBQSxVQUN0QjtBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsUUFDSCxHQUFFLElBQUk7QUFBQSxNQUNWO0FBQUEsSUFDSjtBQUNELFVBQU0sVUFBVSxDQUFDLGVBQWUsUUFBUSxVQUFVO0FBQ2xELFFBQUksV0FBVyxRQUFRO0FBQ25CLFdBQUssVUFBVTtBQUNmLFdBQUssbUJBQW1CLFFBQVEsWUFBWSxNQUFNO0FBQUEsSUFDckQ7QUFDRCxTQUFLLGFBQWE7QUFDbEIsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLG1CQUFtQixHQUFHLFlBQVksYUFBYSxrQkFBa0I7QUFDMUQsUUFBSSxFQUFFLFNBQVMsWUFBWTtBQUN2QixhQUFPO0lBQ1Y7QUFDRCxRQUFJLENBQUMsYUFBYTtBQUNkLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxlQUFlLEtBQUssUUFBUTtBQUNsQyxXQUFPLEtBQUssMEJBQTBCLEdBQUcsYUFBYSxNQUFNLGNBQWMsZ0JBQWdCO0FBQUEsRUFDN0Y7QUFDTDtBQXp6QkksY0FERUQsU0FDSyxZQUFXO0FBQ2xCLGNBRkVBLFNBRUssYUFBWTtBQUNuQixjQUhFQSxTQUdLLGFBQVk7QUFDbkIsY0FKRUEsU0FJSyxZQUFXO0FBQ2xCLGNBTEVBLFNBS0ssV0FBVTtBQUNqQixjQU5FQSxTQU1LLFlBQVc7QUFxekJ0QixTQUFTLG9CQUFvQjtBQUN6QixTQUFPLEtBQUtBLFFBQU0sV0FBVyxDQUFDLFVBQVEsTUFBTSxTQUFTLFdBQVUsQ0FBRTtBQUNyRTtBQUVBLFNBQVMsUUFBUSxLQUFLLFNBQVMsVUFBVTtBQUNyQyxRQUFNLEVBQUUsWUFBYSxhQUFjLEdBQUksR0FBSSxhQUFjLFlBQWMsSUFBRztBQUMxRSxNQUFJLGNBQWMsY0FBYztBQUdoQyxNQUFJLFVBQVM7QUFDYixNQUFJLElBQUksR0FBRyxHQUFHLGFBQWEsYUFBYSxhQUFhLFdBQVcsV0FBVztBQUMzRSxNQUFJLGNBQWMsYUFBYTtBQUMzQixrQkFBYyxjQUFjO0FBQzVCLFFBQUksSUFBSSxHQUFHLEdBQUcsYUFBYSxXQUFXLGFBQWEsYUFBYSxhQUFhLElBQUk7QUFBQSxFQUN6RixPQUFXO0FBQ0gsUUFBSSxJQUFJLEdBQUcsR0FBRyxhQUFhLFdBQVcsU0FBUyxhQUFhLE9BQU87QUFBQSxFQUN0RTtBQUNELE1BQUksVUFBUztBQUNiLE1BQUksS0FBSTtBQUNaO0FBQ0EsU0FBUyxnQkFBZ0IsT0FBTztBQUM1QixTQUFPLGtCQUFrQixPQUFPO0FBQUEsSUFDNUI7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNSLENBQUs7QUFDTDtBQUdJLFNBQVMsb0JBQW9CLEtBQUssYUFBYSxhQUFhLFlBQVk7QUFDeEUsUUFBTSxJQUFJLGdCQUFnQixJQUFJLFFBQVEsWUFBWTtBQUNsRCxRQUFNLGlCQUFpQixjQUFjLGVBQWU7QUFDcEQsUUFBTSxhQUFhLEtBQUssSUFBSSxlQUFlLGFBQWEsY0FBYyxDQUFDO0FBUXZFLFFBQU0sb0JBQW9CLENBQUMsUUFBTTtBQUM3QixVQUFNLGlCQUFpQixjQUFjLEtBQUssSUFBSSxlQUFlLEdBQUcsS0FBSyxhQUFhO0FBQ2xGLFdBQU8sWUFBWSxLQUFLLEdBQUcsS0FBSyxJQUFJLGVBQWUsYUFBYSxDQUFDO0FBQUEsRUFDekU7QUFDSSxTQUFPO0FBQUEsSUFDSCxZQUFZLGtCQUFrQixFQUFFLFVBQVU7QUFBQSxJQUMxQyxVQUFVLGtCQUFrQixFQUFFLFFBQVE7QUFBQSxJQUN0QyxZQUFZLFlBQVksRUFBRSxZQUFZLEdBQUcsVUFBVTtBQUFBLElBQ25ELFVBQVUsWUFBWSxFQUFFLFVBQVUsR0FBRyxVQUFVO0FBQUEsRUFDdkQ7QUFDQTtBQUdJLFNBQVMsV0FBVyxHQUFHLE9BQU8sR0FBRyxHQUFHO0FBQ3BDLFNBQU87QUFBQSxJQUNILEdBQUcsSUFBSSxJQUFJLEtBQUssSUFBSSxLQUFLO0FBQUEsSUFDekIsR0FBRyxJQUFJLElBQUksS0FBSyxJQUFJLEtBQUs7QUFBQSxFQUNqQztBQUNBO0FBY0ksU0FBUyxRQUFRLEtBQUssU0FBUyxRQUFRLFNBQVMsS0FBSyxVQUFVO0FBQy9ELFFBQU0sRUFBRSxHQUFJLEdBQUksWUFBWSxPQUFRLGFBQWMsYUFBYSxPQUFTLElBQUc7QUFDM0UsUUFBTSxjQUFjLEtBQUssSUFBSSxRQUFRLGNBQWMsVUFBVSxTQUFTLGFBQWEsQ0FBQztBQUNwRixRQUFNLGNBQWMsU0FBUyxJQUFJLFNBQVMsVUFBVSxTQUFTLGNBQWM7QUFDM0UsTUFBSSxnQkFBZ0I7QUFDcEIsUUFBTUUsU0FBUSxNQUFNO0FBQ3BCLE1BQUksU0FBUztBQUlULFVBQU0sdUJBQXVCLFNBQVMsSUFBSSxTQUFTLFVBQVU7QUFDN0QsVUFBTSx1QkFBdUIsY0FBYyxJQUFJLGNBQWMsVUFBVTtBQUN2RSxVQUFNLHNCQUFzQix1QkFBdUIsd0JBQXdCO0FBQzNFLFVBQU0sZ0JBQWdCLHVCQUF1QixJQUFJQSxTQUFRLHNCQUFzQixxQkFBcUIsV0FBV0E7QUFDL0cscUJBQWlCQSxTQUFRLGlCQUFpQjtBQUFBLEVBQzdDO0FBQ0QsUUFBTSxPQUFPLEtBQUssSUFBSSxNQUFPQSxTQUFRLGNBQWMsU0FBUyxFQUFFLElBQUk7QUFDbEUsUUFBTSxlQUFlQSxTQUFRLFFBQVE7QUFDckMsUUFBTSxhQUFhLFFBQVEsY0FBYztBQUN6QyxRQUFNLFdBQVcsTUFBTSxjQUFjO0FBQ3JDLFFBQU0sRUFBRSxZQUFhLFVBQVcsWUFBYSxTQUFXLElBQUcsb0JBQW9CLFNBQVMsYUFBYSxhQUFhLFdBQVcsVUFBVTtBQUN2SSxRQUFNLDJCQUEyQixjQUFjO0FBQy9DLFFBQU0seUJBQXlCLGNBQWM7QUFDN0MsUUFBTSwwQkFBMEIsYUFBYSxhQUFhO0FBQzFELFFBQU0sd0JBQXdCLFdBQVcsV0FBVztBQUNwRCxRQUFNLDJCQUEyQixjQUFjO0FBQy9DLFFBQU0seUJBQXlCLGNBQWM7QUFDN0MsUUFBTSwwQkFBMEIsYUFBYSxhQUFhO0FBQzFELFFBQU0sd0JBQXdCLFdBQVcsV0FBVztBQUNwRCxNQUFJLFVBQVM7QUFDYixNQUFJLFVBQVU7QUFFVixVQUFNLHlCQUF5QiwwQkFBMEIseUJBQXlCO0FBQ2xGLFFBQUksSUFBSSxHQUFHLEdBQUcsYUFBYSx5QkFBeUIscUJBQXFCO0FBQ3pFLFFBQUksSUFBSSxHQUFHLEdBQUcsYUFBYSx1QkFBdUIscUJBQXFCO0FBRXZFLFFBQUksV0FBVyxHQUFHO0FBQ2QsWUFBTSxVQUFVLFdBQVcsd0JBQXdCLHVCQUF1QixHQUFHLENBQUM7QUFDOUUsVUFBSSxJQUFJLFFBQVEsR0FBRyxRQUFRLEdBQUcsVUFBVSx1QkFBdUIsV0FBVyxPQUFPO0FBQUEsSUFDcEY7QUFFRCxVQUFNLEtBQUssV0FBVyx3QkFBd0IsVUFBVSxHQUFHLENBQUM7QUFDNUQsUUFBSSxPQUFPLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFFckIsUUFBSSxXQUFXLEdBQUc7QUFDZCxZQUFNLFdBQVcsV0FBVyx3QkFBd0IsdUJBQXVCLEdBQUcsQ0FBQztBQUMvRSxVQUFJLElBQUksU0FBUyxHQUFHLFNBQVMsR0FBRyxVQUFVLFdBQVcsU0FBUyx3QkFBd0IsS0FBSyxFQUFFO0FBQUEsSUFDaEc7QUFFRCxVQUFNLHlCQUF5QixXQUFXLFdBQVcsZUFBZSxhQUFhLGFBQWEsZ0JBQWdCO0FBQzlHLFFBQUksSUFBSSxHQUFHLEdBQUcsYUFBYSxXQUFXLFdBQVcsYUFBYSx1QkFBdUIsSUFBSTtBQUN6RixRQUFJLElBQUksR0FBRyxHQUFHLGFBQWEsdUJBQXVCLGFBQWEsYUFBYSxhQUFhLElBQUk7QUFFN0YsUUFBSSxhQUFhLEdBQUc7QUFDaEIsWUFBTSxXQUFXLFdBQVcsMEJBQTBCLHlCQUF5QixHQUFHLENBQUM7QUFDbkYsVUFBSSxJQUFJLFNBQVMsR0FBRyxTQUFTLEdBQUcsWUFBWSwwQkFBMEIsS0FBSyxJQUFJLGFBQWEsT0FBTztBQUFBLElBQ3RHO0FBRUQsVUFBTSxLQUFLLFdBQVcsMEJBQTBCLFlBQVksR0FBRyxDQUFDO0FBQ2hFLFFBQUksT0FBTyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBRXJCLFFBQUksYUFBYSxHQUFHO0FBQ2hCLFlBQU0sV0FBVyxXQUFXLDBCQUEwQix5QkFBeUIsR0FBRyxDQUFDO0FBQ25GLFVBQUksSUFBSSxTQUFTLEdBQUcsU0FBUyxHQUFHLFlBQVksYUFBYSxTQUFTLHVCQUF1QjtBQUFBLElBQzVGO0FBQUEsRUFDVCxPQUFXO0FBQ0gsUUFBSSxPQUFPLEdBQUcsQ0FBQztBQUNmLFVBQU0sY0FBYyxLQUFLLElBQUksdUJBQXVCLElBQUksY0FBYztBQUN0RSxVQUFNLGNBQWMsS0FBSyxJQUFJLHVCQUF1QixJQUFJLGNBQWM7QUFDdEUsUUFBSSxPQUFPLGFBQWEsV0FBVztBQUNuQyxVQUFNLFlBQVksS0FBSyxJQUFJLHFCQUFxQixJQUFJLGNBQWM7QUFDbEUsVUFBTSxZQUFZLEtBQUssSUFBSSxxQkFBcUIsSUFBSSxjQUFjO0FBQ2xFLFFBQUksT0FBTyxXQUFXLFNBQVM7QUFBQSxFQUNsQztBQUNELE1BQUksVUFBUztBQUNqQjtBQUNBLFNBQVMsUUFBUSxLQUFLLFNBQVMsUUFBUSxTQUFTLFVBQVU7QUFDdEQsUUFBTSxFQUFFLGFBQWMsWUFBYSxjQUFhLElBQU07QUFDdEQsTUFBSSxXQUFXLFFBQVE7QUFDdkIsTUFBSSxhQUFhO0FBQ2IsWUFBUSxLQUFLLFNBQVMsUUFBUSxTQUFTLFVBQVUsUUFBUTtBQUN6RCxhQUFRLElBQUksR0FBRyxJQUFJLGFBQWEsRUFBRSxHQUFFO0FBQ2hDLFVBQUksS0FBSTtBQUFBLElBQ1g7QUFDRCxRQUFJLENBQUMsTUFBTSxhQUFhLEdBQUc7QUFDdkIsaUJBQVcsY0FBYyxnQkFBZ0IsT0FBTztBQUFBLElBQ25EO0FBQUEsRUFDSjtBQUNELFVBQVEsS0FBSyxTQUFTLFFBQVEsU0FBUyxVQUFVLFFBQVE7QUFDekQsTUFBSSxLQUFJO0FBQ1IsU0FBTztBQUNYO0FBQ0EsU0FBUyxXQUFXLEtBQUssU0FBUyxRQUFRLFNBQVMsVUFBVTtBQUN6RCxRQUFNLEVBQUUsYUFBYyxZQUFhLGVBQWdCLFFBQU8sSUFBTTtBQUNoRSxRQUFNLEVBQUUsYUFBYyxnQkFBa0IsSUFBRztBQUMzQyxRQUFNLFFBQVEsUUFBUSxnQkFBZ0I7QUFDdEMsTUFBSSxDQUFDLGFBQWE7QUFDZDtBQUFBLEVBQ0g7QUFDRCxNQUFJLE9BQU87QUFDUCxRQUFJLFlBQVksY0FBYztBQUM5QixRQUFJLFdBQVcsbUJBQW1CO0FBQUEsRUFDMUMsT0FBVztBQUNILFFBQUksWUFBWTtBQUNoQixRQUFJLFdBQVcsbUJBQW1CO0FBQUEsRUFDckM7QUFDRCxNQUFJLFdBQVcsUUFBUTtBQUN2QixNQUFJLGFBQWE7QUFDYixZQUFRLEtBQUssU0FBUyxRQUFRLFNBQVMsVUFBVSxRQUFRO0FBQ3pELGFBQVEsSUFBSSxHQUFHLElBQUksYUFBYSxFQUFFLEdBQUU7QUFDaEMsVUFBSSxPQUFNO0FBQUEsSUFDYjtBQUNELFFBQUksQ0FBQyxNQUFNLGFBQWEsR0FBRztBQUN2QixpQkFBVyxjQUFjLGdCQUFnQixPQUFPO0FBQUEsSUFDbkQ7QUFBQSxFQUNKO0FBQ0QsTUFBSSxPQUFPO0FBQ1AsWUFBUSxLQUFLLFNBQVMsUUFBUTtBQUFBLEVBQ2pDO0FBQ0QsTUFBSSxDQUFDLGFBQWE7QUFDZCxZQUFRLEtBQUssU0FBUyxRQUFRLFNBQVMsVUFBVSxRQUFRO0FBQ3pELFFBQUksT0FBTTtBQUFBLEVBQ2I7QUFDTDtBQUNBLE1BQU0sbUJBQW1CLFFBQVE7QUFBQSxFQWdCN0IsWUFBWSxLQUFJO0FBQ1o7QUFDQSxTQUFLLFVBQVU7QUFDZixTQUFLLGdCQUFnQjtBQUNyQixTQUFLLGFBQWE7QUFDbEIsU0FBSyxXQUFXO0FBQ2hCLFNBQUssY0FBYztBQUNuQixTQUFLLGNBQWM7QUFDbkIsU0FBSyxjQUFjO0FBQ25CLFNBQUssY0FBYztBQUNuQixRQUFJLEtBQUs7QUFDTCxhQUFPLE9BQU8sTUFBTSxHQUFHO0FBQUEsSUFDMUI7QUFBQSxFQUNKO0FBQUEsRUFDRCxRQUFRLFFBQVEsUUFBUSxrQkFBa0I7QUFDdEMsVUFBTSxRQUFRLEtBQUssU0FBUztBQUFBLE1BQ3hCO0FBQUEsTUFDQTtBQUFBLElBQ0gsR0FBRSxnQkFBZ0I7QUFDbkIsVUFBTSxFQUFFLE9BQVEsYUFBYyxrQkFBa0IsT0FBTztBQUFBLE1BQ25ELEdBQUc7QUFBQSxNQUNILEdBQUc7QUFBQSxJQUNmLENBQVM7QUFDRCxVQUFNLEVBQUUsWUFBYSxVQUFXLGFBQWMsYUFBYyxjQUFnQixJQUFHLEtBQUssU0FBUztBQUFBLE1BQ3pGO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0gsR0FBRSxnQkFBZ0I7QUFDbkIsVUFBTSxVQUFVLEtBQUssUUFBUSxVQUFVO0FBQ3ZDLFVBQU0saUJBQWlCLGVBQWUsZUFBZSxXQUFXLFVBQVU7QUFDMUUsVUFBTSxnQkFBZ0Isa0JBQWtCLE9BQU8sY0FBYyxPQUFPLFlBQVksUUFBUTtBQUN4RixVQUFNLGVBQWUsV0FBVyxVQUFVLGNBQWMsU0FBUyxjQUFjLE9BQU87QUFDdEYsV0FBTyxpQkFBaUI7QUFBQSxFQUMzQjtBQUFBLEVBQ0QsZUFBZSxrQkFBa0I7QUFDN0IsVUFBTSxFQUFFLEdBQUksR0FBSSxZQUFhLFVBQVcsYUFBYyxZQUFXLElBQU0sS0FBSyxTQUFTO0FBQUEsTUFDakY7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNILEdBQUUsZ0JBQWdCO0FBQ25CLFVBQU0sRUFBRSxRQUFTLFlBQWEsS0FBSztBQUNuQyxVQUFNLGFBQWEsYUFBYSxZQUFZO0FBQzVDLFVBQU0sY0FBYyxjQUFjLGNBQWMsVUFBVSxVQUFVO0FBQ3BFLFdBQU87QUFBQSxNQUNILEdBQUcsSUFBSSxLQUFLLElBQUksU0FBUyxJQUFJO0FBQUEsTUFDN0IsR0FBRyxJQUFJLEtBQUssSUFBSSxTQUFTLElBQUk7QUFBQSxJQUN6QztBQUFBLEVBQ0s7QUFBQSxFQUNELGdCQUFnQixrQkFBa0I7QUFDOUIsV0FBTyxLQUFLLGVBQWUsZ0JBQWdCO0FBQUEsRUFDOUM7QUFBQSxFQUNELEtBQUssS0FBSztBQUNOLFVBQU0sRUFBRSxTQUFVLGNBQWdCLElBQUc7QUFDckMsVUFBTSxVQUFVLFFBQVEsVUFBVSxLQUFLO0FBQ3ZDLFVBQU0sV0FBVyxRQUFRLFdBQVcsS0FBSztBQUN6QyxVQUFNLFdBQVcsUUFBUTtBQUN6QixTQUFLLGNBQWMsUUFBUSxnQkFBZ0IsVUFBVSxPQUFPO0FBQzVELFNBQUssY0FBYyxnQkFBZ0IsTUFBTSxLQUFLLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSTtBQUMzRSxRQUFJLGtCQUFrQixLQUFLLEtBQUssY0FBYyxLQUFLLEtBQUssY0FBYyxHQUFHO0FBQ3JFO0FBQUEsSUFDSDtBQUNELFFBQUksS0FBSTtBQUNSLFVBQU0sYUFBYSxLQUFLLGFBQWEsS0FBSyxZQUFZO0FBQ3RELFFBQUksVUFBVSxLQUFLLElBQUksU0FBUyxJQUFJLFFBQVEsS0FBSyxJQUFJLFNBQVMsSUFBSSxNQUFNO0FBQ3hFLFVBQU0sTUFBTSxJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksSUFBSSxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3pELFVBQU0sZUFBZSxTQUFTO0FBQzlCLFFBQUksWUFBWSxRQUFRO0FBQ3hCLFFBQUksY0FBYyxRQUFRO0FBQzFCLFlBQVEsS0FBSyxNQUFNLGNBQWMsU0FBUyxRQUFRO0FBQ2xELGVBQVcsS0FBSyxNQUFNLGNBQWMsU0FBUyxRQUFRO0FBQ3JELFFBQUksUUFBTztBQUFBLEVBQ2Q7QUFDTDtBQTdGSSxjQURFLFlBQ0ssTUFBSztBQUNaLGNBRkUsWUFFSyxZQUFXO0FBQUEsRUFDZCxhQUFhO0FBQUEsRUFDYixhQUFhO0FBQUEsRUFDYixpQkFBaUI7QUFBQSxFQUNqQixjQUFjO0FBQUEsRUFDZCxhQUFhO0FBQUEsRUFDYixRQUFRO0FBQUEsRUFDUixTQUFTO0FBQUEsRUFDVCxPQUFPO0FBQUEsRUFDUCxVQUFVO0FBQ2xCO0FBQ0ksY0FiRSxZQWFLLGlCQUFnQjtBQUFBLEVBQ25CLGlCQUFpQjtBQUN6QjtBQW1jQSxTQUFTLGFBQWEsS0FBSyxrQkFBa0I7QUFDekMsUUFBTSxFQUFFLEdBQUksR0FBSSxNQUFPLE9BQVEsT0FBUyxJQUFJLElBQUksU0FBUztBQUFBLElBQ3JEO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ0gsR0FBRSxnQkFBZ0I7QUFDbkIsTUFBSSxNQUFNLE9BQU8sS0FBSyxRQUFRO0FBQzlCLE1BQUksSUFBSSxZQUFZO0FBQ2hCLFdBQU8sU0FBUztBQUNoQixXQUFPLEtBQUssSUFBSSxHQUFHLElBQUk7QUFDdkIsWUFBUSxLQUFLLElBQUksR0FBRyxJQUFJO0FBQ3hCLFVBQU0sSUFBSTtBQUNWLGFBQVMsSUFBSTtBQUFBLEVBQ3JCLE9BQVc7QUFDSCxXQUFPLFFBQVE7QUFDZixXQUFPLElBQUk7QUFDWCxZQUFRLElBQUk7QUFDWixVQUFNLEtBQUssSUFBSSxHQUFHLElBQUk7QUFDdEIsYUFBUyxLQUFLLElBQUksR0FBRyxJQUFJO0FBQUEsRUFDNUI7QUFDRCxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ1I7QUFDQTtBQUNBLFNBQVMsWUFBWUMsT0FBTSxPQUFPLEtBQUssS0FBSztBQUN4QyxTQUFPQSxRQUFPLElBQUksWUFBWSxPQUFPLEtBQUssR0FBRztBQUNqRDtBQUNBLFNBQVMsaUJBQWlCLEtBQUssTUFBTSxNQUFNO0FBQ3ZDLFFBQU0sUUFBUSxJQUFJLFFBQVE7QUFDMUIsUUFBTUEsUUFBTyxJQUFJO0FBQ2pCLFFBQU0sSUFBSSxPQUFPLEtBQUs7QUFDdEIsU0FBTztBQUFBLElBQ0gsR0FBRyxZQUFZQSxNQUFLLEtBQUssRUFBRSxLQUFLLEdBQUcsSUFBSTtBQUFBLElBQ3ZDLEdBQUcsWUFBWUEsTUFBSyxPQUFPLEVBQUUsT0FBTyxHQUFHLElBQUk7QUFBQSxJQUMzQyxHQUFHLFlBQVlBLE1BQUssUUFBUSxFQUFFLFFBQVEsR0FBRyxJQUFJO0FBQUEsSUFDN0MsR0FBRyxZQUFZQSxNQUFLLE1BQU0sRUFBRSxNQUFNLEdBQUcsSUFBSTtBQUFBLEVBQ2pEO0FBQ0E7QUFDQSxTQUFTLGtCQUFrQixLQUFLLE1BQU0sTUFBTTtBQUN4QyxRQUFNLEVBQUUsbUJBQWtCLElBQU0sSUFBSSxTQUFTO0FBQUEsSUFDekM7QUFBQSxFQUNSLENBQUs7QUFDRCxRQUFNLFFBQVEsSUFBSSxRQUFRO0FBQzFCLFFBQU0sSUFBSSxjQUFjLEtBQUs7QUFDN0IsUUFBTSxPQUFPLEtBQUssSUFBSSxNQUFNLElBQUk7QUFDaEMsUUFBTUEsUUFBTyxJQUFJO0FBQ2pCLFFBQU0sZUFBZSxzQkFBc0IsU0FBUyxLQUFLO0FBQ3pELFNBQU87QUFBQSxJQUNILFNBQVMsWUFBWSxDQUFDLGdCQUFnQkEsTUFBSyxPQUFPQSxNQUFLLE1BQU0sRUFBRSxTQUFTLEdBQUcsSUFBSTtBQUFBLElBQy9FLFVBQVUsWUFBWSxDQUFDLGdCQUFnQkEsTUFBSyxPQUFPQSxNQUFLLE9BQU8sRUFBRSxVQUFVLEdBQUcsSUFBSTtBQUFBLElBQ2xGLFlBQVksWUFBWSxDQUFDLGdCQUFnQkEsTUFBSyxVQUFVQSxNQUFLLE1BQU0sRUFBRSxZQUFZLEdBQUcsSUFBSTtBQUFBLElBQ3hGLGFBQWEsWUFBWSxDQUFDLGdCQUFnQkEsTUFBSyxVQUFVQSxNQUFLLE9BQU8sRUFBRSxhQUFhLEdBQUcsSUFBSTtBQUFBLEVBQ25HO0FBQ0E7QUFDQSxTQUFTLGNBQWMsS0FBSztBQUN4QixRQUFNLFNBQVMsYUFBYSxHQUFHO0FBQy9CLFFBQU0sUUFBUSxPQUFPLFFBQVEsT0FBTztBQUNwQyxRQUFNLFNBQVMsT0FBTyxTQUFTLE9BQU87QUFDdEMsUUFBTSxTQUFTLGlCQUFpQixLQUFLLFFBQVEsR0FBRyxTQUFTLENBQUM7QUFDMUQsUUFBTSxTQUFTLGtCQUFrQixLQUFLLFFBQVEsR0FBRyxTQUFTLENBQUM7QUFDM0QsU0FBTztBQUFBLElBQ0gsT0FBTztBQUFBLE1BQ0gsR0FBRyxPQUFPO0FBQUEsTUFDVixHQUFHLE9BQU87QUFBQSxNQUNWLEdBQUc7QUFBQSxNQUNILEdBQUc7QUFBQSxNQUNIO0FBQUEsSUFDSDtBQUFBLElBQ0QsT0FBTztBQUFBLE1BQ0gsR0FBRyxPQUFPLE9BQU8sT0FBTztBQUFBLE1BQ3hCLEdBQUcsT0FBTyxNQUFNLE9BQU87QUFBQSxNQUN2QixHQUFHLFFBQVEsT0FBTyxJQUFJLE9BQU87QUFBQSxNQUM3QixHQUFHLFNBQVMsT0FBTyxJQUFJLE9BQU87QUFBQSxNQUM5QixRQUFRO0FBQUEsUUFDSixTQUFTLEtBQUssSUFBSSxHQUFHLE9BQU8sVUFBVSxLQUFLLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxDQUFDO0FBQUEsUUFDbEUsVUFBVSxLQUFLLElBQUksR0FBRyxPQUFPLFdBQVcsS0FBSyxJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQztBQUFBLFFBQ3BFLFlBQVksS0FBSyxJQUFJLEdBQUcsT0FBTyxhQUFhLEtBQUssSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLENBQUM7QUFBQSxRQUN4RSxhQUFhLEtBQUssSUFBSSxHQUFHLE9BQU8sY0FBYyxLQUFLLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxDQUFDO0FBQUEsTUFDN0U7QUFBQSxJQUNKO0FBQUEsRUFDVDtBQUNBO0FBQ0EsU0FBUyxRQUFRLEtBQUssR0FBRyxHQUFHLGtCQUFrQjtBQUMxQyxRQUFNLFFBQVEsTUFBTTtBQUNwQixRQUFNLFFBQVEsTUFBTTtBQUNwQixRQUFNLFdBQVcsU0FBUztBQUMxQixRQUFNLFNBQVMsT0FBTyxDQUFDLFlBQVksYUFBYSxLQUFLLGdCQUFnQjtBQUNyRSxTQUFPLFdBQVcsU0FBUyxXQUFXLEdBQUcsT0FBTyxNQUFNLE9BQU8sS0FBSyxPQUFPLFNBQVMsV0FBVyxHQUFHLE9BQU8sS0FBSyxPQUFPLE1BQU07QUFDN0g7QUFDQSxTQUFTLFVBQVUsUUFBUTtBQUN2QixTQUFPLE9BQU8sV0FBVyxPQUFPLFlBQVksT0FBTyxjQUFjLE9BQU87QUFDNUU7QUFDQyxTQUFTLGtCQUFrQixLQUFLLE1BQU07QUFDbkMsTUFBSSxLQUFLLEtBQUssR0FBRyxLQUFLLEdBQUcsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUMzQztBQUNBLFNBQVMsWUFBWSxNQUFNLFFBQVEsVUFBVSxJQUFJO0FBQzdDLFFBQU0sSUFBSSxLQUFLLE1BQU0sUUFBUSxJQUFJLENBQUMsU0FBUztBQUMzQyxRQUFNLElBQUksS0FBSyxNQUFNLFFBQVEsSUFBSSxDQUFDLFNBQVM7QUFDM0MsUUFBTSxLQUFLLEtBQUssSUFBSSxLQUFLLE1BQU0sUUFBUSxJQUFJLFFBQVEsSUFBSSxTQUFTLEtBQUs7QUFDckUsUUFBTXZCLE1BQUssS0FBSyxJQUFJLEtBQUssTUFBTSxRQUFRLElBQUksUUFBUSxJQUFJLFNBQVMsS0FBSztBQUNyRSxTQUFPO0FBQUEsSUFDSCxHQUFHLEtBQUssSUFBSTtBQUFBLElBQ1osR0FBRyxLQUFLLElBQUk7QUFBQSxJQUNaLEdBQUcsS0FBSyxJQUFJO0FBQUEsSUFDWixHQUFHLEtBQUssSUFBSUE7QUFBQSxJQUNaLFFBQVEsS0FBSztBQUFBLEVBQ3JCO0FBQ0E7QUFDQSxNQUFNLG1CQUFtQixRQUFRO0FBQUEsRUFhN0IsWUFBWSxLQUFJO0FBQ1o7QUFDQSxTQUFLLFVBQVU7QUFDZixTQUFLLGFBQWE7QUFDbEIsU0FBSyxPQUFPO0FBQ1osU0FBSyxRQUFRO0FBQ2IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxnQkFBZ0I7QUFDckIsUUFBSSxLQUFLO0FBQ0wsYUFBTyxPQUFPLE1BQU0sR0FBRztBQUFBLElBQzFCO0FBQUEsRUFDSjtBQUFBLEVBQ0QsS0FBSyxLQUFLO0FBQ04sVUFBTSxFQUFFLGVBQWdCLFNBQVMsRUFBRSxhQUFjLGdCQUFlLEVBQU0sSUFBRztBQUN6RSxVQUFNLEVBQUUsT0FBUSxNQUFRLElBQUcsY0FBYyxJQUFJO0FBQzdDLFVBQU0sY0FBYyxVQUFVLE1BQU0sTUFBTSxJQUFJLHFCQUFxQjtBQUNuRSxRQUFJLEtBQUk7QUFDUixRQUFJLE1BQU0sTUFBTSxNQUFNLEtBQUssTUFBTSxNQUFNLE1BQU0sR0FBRztBQUM1QyxVQUFJLFVBQVM7QUFDYixrQkFBWSxLQUFLLFlBQVksT0FBTyxlQUFlLEtBQUssQ0FBQztBQUN6RCxVQUFJLEtBQUk7QUFDUixrQkFBWSxLQUFLLFlBQVksT0FBTyxDQUFDLGVBQWUsS0FBSyxDQUFDO0FBQzFELFVBQUksWUFBWTtBQUNoQixVQUFJLEtBQUssU0FBUztBQUFBLElBQ3JCO0FBQ0QsUUFBSSxVQUFTO0FBQ2IsZ0JBQVksS0FBSyxZQUFZLE9BQU8sYUFBYSxDQUFDO0FBQ2xELFFBQUksWUFBWTtBQUNoQixRQUFJLEtBQUk7QUFDUixRQUFJLFFBQU87QUFBQSxFQUNkO0FBQUEsRUFDRCxRQUFRLFFBQVEsUUFBUSxrQkFBa0I7QUFDdEMsV0FBTyxRQUFRLE1BQU0sUUFBUSxRQUFRLGdCQUFnQjtBQUFBLEVBQ3hEO0FBQUEsRUFDRCxTQUFTLFFBQVEsa0JBQWtCO0FBQy9CLFdBQU8sUUFBUSxNQUFNLFFBQVEsTUFBTSxnQkFBZ0I7QUFBQSxFQUN0RDtBQUFBLEVBQ0QsU0FBUyxRQUFRLGtCQUFrQjtBQUMvQixXQUFPLFFBQVEsTUFBTSxNQUFNLFFBQVEsZ0JBQWdCO0FBQUEsRUFDdEQ7QUFBQSxFQUNELGVBQWUsa0JBQWtCO0FBQzdCLFVBQU0sRUFBRSxHQUFJLEdBQUksTUFBTyxXQUFhLElBQUksS0FBSyxTQUFTO0FBQUEsTUFDbEQ7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNILEdBQUUsZ0JBQWdCO0FBQ25CLFdBQU87QUFBQSxNQUNILEdBQUcsY0FBYyxJQUFJLFFBQVEsSUFBSTtBQUFBLE1BQ2pDLEdBQUcsYUFBYSxLQUFLLElBQUksUUFBUTtBQUFBLElBQzdDO0FBQUEsRUFDSztBQUFBLEVBQ0QsU0FBUyxNQUFNO0FBQ1gsV0FBTyxTQUFTLE1BQU0sS0FBSyxRQUFRLElBQUksS0FBSyxTQUFTO0FBQUEsRUFDeEQ7QUFDTDtBQW5FSSxjQURFLFlBQ0ssTUFBSztBQUNmLGNBRkssWUFFRSxZQUFXO0FBQUEsRUFDWCxlQUFlO0FBQUEsRUFDZixhQUFhO0FBQUEsRUFDYixjQUFjO0FBQUEsRUFDZCxlQUFlO0FBQUEsRUFDZixZQUFZO0FBQ3BCO0FBQ0MsY0FUSyxZQVNFLGlCQUFnQjtBQUFBLEVBQ2hCLGlCQUFpQjtBQUFBLEVBQ2pCLGFBQWE7QUFDckI7QUF1NUJBLE1BQU0sYUFBYSxDQUFDLFdBQVcsYUFBVztBQUN0QyxNQUFJLEVBQUUsWUFBVyxVQUFXLFdBQVUsU0FBUSxJQUFNO0FBQ3BELE1BQUksVUFBVSxlQUFlO0FBQ3pCLGdCQUFZLEtBQUssSUFBSSxXQUFXLFFBQVE7QUFDeEMsZUFBVyxVQUFVLG1CQUFtQixLQUFLLElBQUksVUFBVSxRQUFRO0FBQUEsRUFDdEU7QUFDRCxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0E7QUFBQSxJQUNBLFlBQVksS0FBSyxJQUFJLFVBQVUsU0FBUztBQUFBLEVBQ2hEO0FBQ0E7QUFDQSxNQUFNLGFBQWEsQ0FBQyxHQUFHLE1BQUksTUFBTSxRQUFRLE1BQU0sUUFBUSxFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLFVBQVUsRUFBRTtBQUMxRyxNQUFNLGVBQWUsUUFBUTtBQUFBLEVBQzVCLFlBQVksUUFBTztBQUNaO0FBQ0EsU0FBSyxTQUFTO0FBQ2QsU0FBSyxpQkFBaUI7QUFDN0IsU0FBSyxlQUFlO0FBQ2IsU0FBSyxlQUFlO0FBQ3BCLFNBQUssUUFBUSxPQUFPO0FBQ3BCLFNBQUssVUFBVSxPQUFPO0FBQ3RCLFNBQUssTUFBTSxPQUFPO0FBQ2xCLFNBQUssY0FBYztBQUNuQixTQUFLLGNBQWM7QUFDbkIsU0FBSyxhQUFhO0FBQ2xCLFNBQUssWUFBWTtBQUNqQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxNQUFNO0FBQ1gsU0FBSyxTQUFTO0FBQ2QsU0FBSyxPQUFPO0FBQ1osU0FBSyxRQUFRO0FBQ2IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxRQUFRO0FBQ2IsU0FBSyxXQUFXO0FBQ2hCLFNBQUssV0FBVztBQUNoQixTQUFLLFNBQVM7QUFDZCxTQUFLLFdBQVc7QUFBQSxFQUNuQjtBQUFBLEVBQ0QsT0FBTyxVQUFVLFdBQVcsU0FBUztBQUNqQyxTQUFLLFdBQVc7QUFDaEIsU0FBSyxZQUFZO0FBQ2pCLFNBQUssV0FBVztBQUNoQixTQUFLLGNBQWE7QUFDbEIsU0FBSyxZQUFXO0FBQ2hCLFNBQUssSUFBRztBQUFBLEVBQ1g7QUFBQSxFQUNELGdCQUFnQjtBQUNaLFFBQUksS0FBSyxnQkFBZ0I7QUFDckIsV0FBSyxRQUFRLEtBQUs7QUFDbEIsV0FBSyxPQUFPLEtBQUssU0FBUztBQUMxQixXQUFLLFFBQVEsS0FBSztBQUFBLElBQzlCLE9BQWU7QUFDSCxXQUFLLFNBQVMsS0FBSztBQUNuQixXQUFLLE1BQU0sS0FBSyxTQUFTO0FBQ3pCLFdBQUssU0FBUyxLQUFLO0FBQUEsSUFDdEI7QUFBQSxFQUNKO0FBQUEsRUFDRCxjQUFjO0FBQ1YsVUFBTSxZQUFZLEtBQUssUUFBUSxVQUFVO0FBQ3pDLFFBQUksY0FBYyxTQUFTLFVBQVUsZ0JBQWdCO0FBQUEsTUFDakQsS0FBSztBQUFBLElBQ2pCLEdBQVcsSUFBSSxLQUFLO0FBQ1osUUFBSSxVQUFVLFFBQVE7QUFDbEIsb0JBQWMsWUFBWSxPQUFPLENBQUMsU0FBTyxVQUFVLE9BQU8sTUFBTSxLQUFLLE1BQU0sSUFBSSxDQUFDO0FBQUEsSUFDbkY7QUFDRCxRQUFJLFVBQVUsTUFBTTtBQUNoQixvQkFBYyxZQUFZLEtBQUssQ0FBQyxHQUFHLE1BQUksVUFBVSxLQUFLLEdBQUcsR0FBRyxLQUFLLE1BQU0sSUFBSSxDQUFDO0FBQUEsSUFDL0U7QUFDRCxRQUFJLEtBQUssUUFBUSxTQUFTO0FBQ3RCLGtCQUFZLFFBQU87QUFBQSxJQUN0QjtBQUNELFNBQUssY0FBYztBQUFBLEVBQ3RCO0FBQUEsRUFDRCxNQUFNO0FBQ0YsVUFBTSxFQUFFLFNBQVUsSUFBTSxJQUFHO0FBQzNCLFFBQUksQ0FBQyxRQUFRLFNBQVM7QUFDbEIsV0FBSyxRQUFRLEtBQUssU0FBUztBQUMzQjtBQUFBLElBQ0g7QUFDRCxVQUFNLFlBQVksUUFBUTtBQUMxQixVQUFNLFlBQVksT0FBTyxVQUFVLElBQUk7QUFDdkMsVUFBTSxXQUFXLFVBQVU7QUFDM0IsVUFBTSxjQUFjLEtBQUs7QUFDekIsVUFBTSxFQUFFLFVBQVcsV0FBVSxJQUFNLFdBQVcsV0FBVyxRQUFRO0FBQ2pFLFFBQUksT0FBTztBQUNYLFFBQUksT0FBTyxVQUFVO0FBQ3JCLFFBQUksS0FBSyxnQkFBZ0I7QUFDckIsY0FBUSxLQUFLO0FBQ2IsZUFBUyxLQUFLLFNBQVMsYUFBYSxVQUFVLFVBQVUsVUFBVSxJQUFJO0FBQUEsSUFDbEYsT0FBZTtBQUNILGVBQVMsS0FBSztBQUNkLGNBQVEsS0FBSyxTQUFTLGFBQWEsV0FBVyxVQUFVLFVBQVUsSUFBSTtBQUFBLElBQ3pFO0FBQ0QsU0FBSyxRQUFRLEtBQUssSUFBSSxPQUFPLFFBQVEsWUFBWSxLQUFLLFFBQVE7QUFDOUQsU0FBSyxTQUFTLEtBQUssSUFBSSxRQUFRLFFBQVEsYUFBYSxLQUFLLFNBQVM7QUFBQSxFQUNyRTtBQUFBLEVBQ0osU0FBUyxhQUFhLFVBQVUsVUFBVSxZQUFZO0FBQy9DLFVBQU0sRUFBRSxLQUFNLFVBQVcsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFPLElBQVMsSUFBRztBQUNqRSxVQUFNLFdBQVcsS0FBSyxpQkFBaUI7QUFDdkMsVUFBTSxhQUFhLEtBQUssYUFBYTtBQUFBLE1BQ2pDO0FBQUEsSUFDWjtBQUNRLFVBQU0sYUFBYSxhQUFhO0FBQ2hDLFFBQUksY0FBYztBQUNsQixRQUFJLFlBQVk7QUFDaEIsUUFBSSxlQUFlO0FBQ25CLFFBQUksTUFBTTtBQUNWLFFBQUksTUFBTSxDQUFDO0FBQ1gsU0FBSyxZQUFZLFFBQVEsQ0FBQyxZQUFZLE1BQUk7QUFDdEMsWUFBTSxZQUFZLFdBQVcsV0FBVyxJQUFJLElBQUksWUFBWSxXQUFXLElBQUksRUFBRTtBQUM3RSxVQUFJLE1BQU0sS0FBSyxXQUFXLFdBQVcsU0FBUyxLQUFLLFlBQVksSUFBSSxVQUFVLFVBQVU7QUFDbkYsdUJBQWU7QUFDZixtQkFBVyxXQUFXLFVBQVUsSUFBSSxJQUFJLElBQUksTUFBTTtBQUNsRCxlQUFPO0FBQ1A7QUFBQSxNQUNIO0FBQ0QsZUFBUyxLQUFLO0FBQUEsUUFDVixNQUFNO0FBQUEsUUFDTjtBQUFBLFFBQ0E7QUFBQSxRQUNBLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxNQUN4QjtBQUNZLGlCQUFXLFdBQVcsU0FBUyxNQUFNLFlBQVk7QUFBQSxJQUM3RCxDQUFTO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNELFNBQVMsYUFBYSxXQUFXLFVBQVUsYUFBYTtBQUNwRCxVQUFNLEVBQUUsS0FBTSxXQUFZLFNBQVMsRUFBRSxRQUFRLEVBQUUsUUFBTyxJQUFTLElBQUc7QUFDbEUsVUFBTSxXQUFXLEtBQUssaUJBQWlCO0FBQ3ZDLFVBQU0sY0FBYyxLQUFLLGNBQWM7QUFDdkMsVUFBTSxjQUFjLFlBQVk7QUFDaEMsUUFBSSxhQUFhO0FBQ2pCLFFBQUksa0JBQWtCO0FBQ3RCLFFBQUksbUJBQW1CO0FBQ3ZCLFFBQUksT0FBTztBQUNYLFFBQUksTUFBTTtBQUNWLFNBQUssWUFBWSxRQUFRLENBQUMsWUFBWSxNQUFJO0FBQ3RDLFlBQU0sRUFBRSxXQUFZLFdBQVUsSUFBTSxrQkFBa0IsVUFBVSxXQUFXLEtBQUssWUFBWSxXQUFXO0FBQ3ZHLFVBQUksSUFBSSxLQUFLLG1CQUFtQixhQUFhLElBQUksVUFBVSxhQUFhO0FBQ3BFLHNCQUFjLGtCQUFrQjtBQUNoQyxvQkFBWSxLQUFLO0FBQUEsVUFDYixPQUFPO0FBQUEsVUFDUCxRQUFRO0FBQUEsUUFDNUIsQ0FBaUI7QUFDRCxnQkFBUSxrQkFBa0I7QUFDMUI7QUFDQSwwQkFBa0IsbUJBQW1CO0FBQUEsTUFDeEM7QUFDRCxlQUFTLEtBQUs7QUFBQSxRQUNWO0FBQUEsUUFDQSxLQUFLO0FBQUEsUUFDTDtBQUFBLFFBQ0EsT0FBTztBQUFBLFFBQ1AsUUFBUTtBQUFBLE1BQ3hCO0FBQ1ksd0JBQWtCLEtBQUssSUFBSSxpQkFBaUIsU0FBUztBQUNyRCwwQkFBb0IsYUFBYTtBQUFBLElBQzdDLENBQVM7QUFDRCxrQkFBYztBQUNkLGdCQUFZLEtBQUs7QUFBQSxNQUNiLE9BQU87QUFBQSxNQUNQLFFBQVE7QUFBQSxJQUNwQixDQUFTO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNELGlCQUFpQjtBQUNiLFFBQUksQ0FBQyxLQUFLLFFBQVEsU0FBUztBQUN2QjtBQUFBLElBQ0g7QUFDRCxVQUFNLGNBQWMsS0FBSztBQUN6QixVQUFNLEVBQUUsZ0JBQWdCLFVBQVcsU0FBUyxFQUFFLE9BQVEsUUFBUSxFQUFFLFFBQVUsR0FBRyxJQUFNLE1BQU07QUFDekYsVUFBTSxZQUFZLGNBQWMsS0FBSyxLQUFLLE1BQU0sS0FBSyxLQUFLO0FBQzFELFFBQUksS0FBSyxnQkFBZ0I7QUFDckIsVUFBSSxNQUFNO0FBQ1YsVUFBSSxPQUFPLGVBQWUsT0FBTyxLQUFLLE9BQU8sU0FBUyxLQUFLLFFBQVEsS0FBSyxXQUFXLElBQUk7QUFDdkYsaUJBQVcsVUFBVSxVQUFTO0FBQzFCLFlBQUksUUFBUSxPQUFPLEtBQUs7QUFDcEIsZ0JBQU0sT0FBTztBQUNiLGlCQUFPLGVBQWUsT0FBTyxLQUFLLE9BQU8sU0FBUyxLQUFLLFFBQVEsS0FBSyxXQUFXLElBQUk7QUFBQSxRQUN0RjtBQUNELGVBQU8sT0FBTyxLQUFLLE1BQU0sY0FBYztBQUN2QyxlQUFPLE9BQU8sVUFBVSxXQUFXLFVBQVUsRUFBRSxJQUFJLEdBQUcsT0FBTyxLQUFLO0FBQ2xFLGdCQUFRLE9BQU8sUUFBUTtBQUFBLE1BQzFCO0FBQUEsSUFDYixPQUFlO0FBQ0gsVUFBSSxNQUFNO0FBQ1YsVUFBSSxNQUFNLGVBQWUsT0FBTyxLQUFLLE1BQU0sY0FBYyxTQUFTLEtBQUssU0FBUyxLQUFLLFlBQVksS0FBSyxNQUFNO0FBQzVHLGlCQUFXLFdBQVcsVUFBUztBQUMzQixZQUFJLFFBQVEsUUFBUSxLQUFLO0FBQ3JCLGdCQUFNLFFBQVE7QUFDZCxnQkFBTSxlQUFlLE9BQU8sS0FBSyxNQUFNLGNBQWMsU0FBUyxLQUFLLFNBQVMsS0FBSyxZQUFZLEtBQUssTUFBTTtBQUFBLFFBQzNHO0FBQ0QsZ0JBQVEsTUFBTTtBQUNkLGdCQUFRLFFBQVEsS0FBSyxPQUFPO0FBQzVCLGdCQUFRLE9BQU8sVUFBVSxXQUFXLFVBQVUsRUFBRSxRQUFRLElBQUksR0FBRyxRQUFRLEtBQUs7QUFDNUUsZUFBTyxRQUFRLFNBQVM7QUFBQSxNQUMzQjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFDRCxlQUFlO0FBQ1gsV0FBTyxLQUFLLFFBQVEsYUFBYSxTQUFTLEtBQUssUUFBUSxhQUFhO0FBQUEsRUFDdkU7QUFBQSxFQUNELE9BQU87QUFDSCxRQUFJLEtBQUssUUFBUSxTQUFTO0FBQ3RCLFlBQU0sTUFBTSxLQUFLO0FBQ2pCLGVBQVMsS0FBSyxJQUFJO0FBQ2xCLFdBQUssTUFBSztBQUNWLGlCQUFXLEdBQUc7QUFBQSxJQUNqQjtBQUFBLEVBQ0o7QUFBQSxFQUNKLFFBQVE7QUFDRCxVQUFNLEVBQUUsU0FBUyxNQUFPLGFBQWMsWUFBYSxJQUFNLElBQUc7QUFDNUQsVUFBTSxFQUFFLE9BQVEsUUFBUSxVQUFTLElBQU07QUFDdkMsVUFBTSxlQUFlLFNBQVM7QUFDOUIsVUFBTSxZQUFZLGNBQWMsS0FBSyxLQUFLLEtBQUssTUFBTSxLQUFLLEtBQUs7QUFDL0QsVUFBTSxZQUFZLE9BQU8sVUFBVSxJQUFJO0FBQ3ZDLFVBQU0sRUFBRSxRQUFVLElBQUc7QUFDckIsVUFBTSxXQUFXLFVBQVU7QUFDM0IsVUFBTSxlQUFlLFdBQVc7QUFDaEMsUUFBSTtBQUNKLFNBQUssVUFBUztBQUNkLFFBQUksWUFBWSxVQUFVLFVBQVUsTUFBTTtBQUMxQyxRQUFJLGVBQWU7QUFDbkIsUUFBSSxZQUFZO0FBQ2hCLFFBQUksT0FBTyxVQUFVO0FBQ3JCLFVBQU0sRUFBRSxVQUFXLFdBQVksV0FBYSxJQUFHLFdBQVcsV0FBVyxRQUFRO0FBQzdFLFVBQU0sZ0JBQWdCLFNBQVMsR0FBRyxHQUFHLFlBQVk7QUFDN0MsVUFBSSxNQUFNLFFBQVEsS0FBSyxZQUFZLEtBQUssTUFBTSxTQUFTLEtBQUssWUFBWSxHQUFHO0FBQ3ZFO0FBQUEsTUFDSDtBQUNELFVBQUksS0FBSTtBQUNSLFlBQU0sWUFBWSxlQUFlLFdBQVcsV0FBVyxDQUFDO0FBQ3hELFVBQUksWUFBWSxlQUFlLFdBQVcsV0FBVyxZQUFZO0FBQ2pFLFVBQUksVUFBVSxlQUFlLFdBQVcsU0FBUyxNQUFNO0FBQ3ZELFVBQUksaUJBQWlCLGVBQWUsV0FBVyxnQkFBZ0IsQ0FBQztBQUNoRSxVQUFJLFdBQVcsZUFBZSxXQUFXLFVBQVUsT0FBTztBQUMxRCxVQUFJLFlBQVk7QUFDaEIsVUFBSSxjQUFjLGVBQWUsV0FBVyxhQUFhLFlBQVk7QUFDckUsVUFBSSxZQUFZLGVBQWUsV0FBVyxVQUFVLENBQUUsRUFBQztBQUN2RCxVQUFJLFVBQVUsZUFBZTtBQUN6QixjQUFNLGNBQWM7QUFBQSxVQUNoQixRQUFRLFlBQVksS0FBSyxRQUFRO0FBQUEsVUFDakMsWUFBWSxXQUFXO0FBQUEsVUFDdkIsVUFBVSxXQUFXO0FBQUEsVUFDckIsYUFBYTtBQUFBLFFBQ2pDO0FBQ2dCLGNBQU0sVUFBVSxVQUFVLE1BQU0sR0FBRyxXQUFXLENBQUM7QUFDL0MsY0FBTSxVQUFVLElBQUk7QUFDcEIsd0JBQWdCLEtBQUssYUFBYSxTQUFTLFNBQVMsVUFBVSxtQkFBbUIsUUFBUTtBQUFBLE1BQ3pHLE9BQW1CO0FBQ0gsY0FBTSxVQUFVLElBQUksS0FBSyxLQUFLLFdBQVcsYUFBYSxHQUFHLENBQUM7QUFDMUQsY0FBTSxXQUFXLFVBQVUsV0FBVyxHQUFHLFFBQVE7QUFDakQsY0FBTSxlQUFlLGNBQWMsV0FBVyxZQUFZO0FBQzFELFlBQUksVUFBUztBQUNiLFlBQUksT0FBTyxPQUFPLFlBQVksRUFBRSxLQUFLLENBQUMsTUFBSSxNQUFNLENBQUMsR0FBRztBQUNoRCw2QkFBbUIsS0FBSztBQUFBLFlBQ3BCLEdBQUc7QUFBQSxZQUNILEdBQUc7QUFBQSxZQUNILEdBQUc7QUFBQSxZQUNILEdBQUc7QUFBQSxZQUNILFFBQVE7QUFBQSxVQUNoQyxDQUFxQjtBQUFBLFFBQ3JCLE9BQXVCO0FBQ0gsY0FBSSxLQUFLLFVBQVUsU0FBUyxVQUFVLFNBQVM7QUFBQSxRQUNsRDtBQUNELFlBQUksS0FBSTtBQUNSLFlBQUksY0FBYyxHQUFHO0FBQ2pCLGNBQUksT0FBTTtBQUFBLFFBQ2I7QUFBQSxNQUNKO0FBQ0QsVUFBSSxRQUFPO0FBQUEsSUFDdkI7QUFDUSxVQUFNLFdBQVcsU0FBUyxHQUFHLEdBQUcsWUFBWTtBQUN4QyxpQkFBVyxLQUFLLFdBQVcsTUFBTSxHQUFHLElBQUksYUFBYSxHQUFHLFdBQVc7QUFBQSxRQUMvRCxlQUFlLFdBQVc7QUFBQSxRQUMxQixXQUFXLFVBQVUsVUFBVSxXQUFXLFNBQVM7QUFBQSxNQUNuRSxDQUFhO0FBQUEsSUFDYjtBQUNRLFVBQU0sZUFBZSxLQUFLO0FBQzFCLFVBQU0sY0FBYyxLQUFLO0FBQ3pCLFFBQUksY0FBYztBQUNkLGVBQVM7QUFBQSxRQUNMLEdBQUcsZUFBZSxPQUFPLEtBQUssT0FBTyxTQUFTLEtBQUssUUFBUSxXQUFXLEVBQUU7QUFBQSxRQUN4RSxHQUFHLEtBQUssTUFBTSxVQUFVO0FBQUEsUUFDeEIsTUFBTTtBQUFBLE1BQ3RCO0FBQUEsSUFDQSxPQUFlO0FBQ0gsZUFBUztBQUFBLFFBQ0wsR0FBRyxLQUFLLE9BQU87QUFBQSxRQUNmLEdBQUcsZUFBZSxPQUFPLEtBQUssTUFBTSxjQUFjLFNBQVMsS0FBSyxTQUFTLFlBQVksR0FBRyxNQUFNO0FBQUEsUUFDOUYsTUFBTTtBQUFBLE1BQ3RCO0FBQUEsSUFDUztBQUNELDBCQUFzQixLQUFLLEtBQUssS0FBSyxhQUFhO0FBQ2xELFVBQU0sYUFBYSxhQUFhO0FBQ2hDLFNBQUssWUFBWSxRQUFRLENBQUMsWUFBWSxNQUFJO0FBQ3RDLFVBQUksY0FBYyxXQUFXO0FBQzdCLFVBQUksWUFBWSxXQUFXO0FBQzNCLFlBQU0sWUFBWSxJQUFJLFlBQVksV0FBVyxJQUFJLEVBQUU7QUFDbkQsWUFBTSxZQUFZLFVBQVUsVUFBVSxXQUFXLGNBQWMsV0FBVyxZQUFZLFVBQVUsVUFBVTtBQUMxRyxZQUFNLFFBQVEsV0FBVyxlQUFlO0FBQ3hDLFVBQUksSUFBSSxPQUFPO0FBQ2YsVUFBSSxJQUFJLE9BQU87QUFDZixnQkFBVSxTQUFTLEtBQUssS0FBSztBQUM3QixVQUFJLGNBQWM7QUFDZCxZQUFJLElBQUksS0FBSyxJQUFJLFFBQVEsVUFBVSxLQUFLLE9BQU87QUFDM0MsY0FBSSxPQUFPLEtBQUs7QUFDaEIsaUJBQU87QUFDUCxjQUFJLE9BQU8sSUFBSSxlQUFlLE9BQU8sS0FBSyxPQUFPLFNBQVMsS0FBSyxRQUFRLFdBQVcsT0FBTyxLQUFLO0FBQUEsUUFDakc7QUFBQSxNQUNqQixXQUF1QixJQUFJLEtBQUssSUFBSSxhQUFhLEtBQUssUUFBUTtBQUM5QyxZQUFJLE9BQU8sSUFBSSxJQUFJLFlBQVksT0FBTyxNQUFNLFFBQVE7QUFDcEQsZUFBTztBQUNQLFlBQUksT0FBTyxJQUFJLGVBQWUsT0FBTyxLQUFLLE1BQU0sY0FBYyxTQUFTLEtBQUssU0FBUyxZQUFZLE9BQU8sTUFBTSxNQUFNO0FBQUEsTUFDdkg7QUFDRCxZQUFNLFFBQVEsVUFBVSxFQUFFLENBQUM7QUFDM0Isb0JBQWMsT0FBTyxHQUFHLFVBQVU7QUFDbEMsVUFBSSxPQUFPLFdBQVcsSUFBSSxXQUFXLGNBQWMsZUFBZSxJQUFJLFFBQVEsS0FBSyxPQUFPLEtBQUssR0FBRztBQUNsRyxlQUFTLFVBQVUsRUFBRSxDQUFDLEdBQUcsR0FBRyxVQUFVO0FBQ3RDLFVBQUksY0FBYztBQUNkLGVBQU8sS0FBSyxRQUFRO0FBQUEsTUFDdkIsV0FBVSxPQUFPLFdBQVcsU0FBUyxVQUFVO0FBQzVDLGNBQU0saUJBQWlCLFVBQVU7QUFDakMsZUFBTyxLQUFLLDBCQUEwQixZQUFZLGNBQWM7QUFBQSxNQUNoRixPQUFtQjtBQUNILGVBQU8sS0FBSztBQUFBLE1BQ2Y7QUFBQSxJQUNiLENBQVM7QUFDRCx5QkFBcUIsS0FBSyxLQUFLLEtBQUssYUFBYTtBQUFBLEVBQ3BEO0FBQUEsRUFDSixZQUFZO0FBQ0wsVUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBTSxZQUFZLEtBQUs7QUFDdkIsVUFBTSxZQUFZLE9BQU8sVUFBVSxJQUFJO0FBQ3ZDLFVBQU0sZUFBZSxVQUFVLFVBQVUsT0FBTztBQUNoRCxRQUFJLENBQUMsVUFBVSxTQUFTO0FBQ3BCO0FBQUEsSUFDSDtBQUNELFVBQU0sWUFBWSxjQUFjLEtBQUssS0FBSyxLQUFLLE1BQU0sS0FBSyxLQUFLO0FBQy9ELFVBQU0sTUFBTSxLQUFLO0FBQ2pCLFVBQU0sV0FBVyxVQUFVO0FBQzNCLFVBQU0sZUFBZSxVQUFVLE9BQU87QUFDdEMsVUFBTSw2QkFBNkIsYUFBYSxNQUFNO0FBQ3RELFFBQUk7QUFDSixRQUFJLE9BQU8sS0FBSztBQUNoQixRQUFJLFdBQVcsS0FBSztBQUNwQixRQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLGlCQUFXLEtBQUssSUFBSSxHQUFHLEtBQUssVUFBVTtBQUN0QyxVQUFJLEtBQUssTUFBTTtBQUNmLGFBQU8sZUFBZSxLQUFLLE9BQU8sTUFBTSxLQUFLLFFBQVEsUUFBUTtBQUFBLElBQ3pFLE9BQWU7QUFDSCxZQUFNLFlBQVksS0FBSyxZQUFZLE9BQU8sQ0FBQyxLQUFLLFNBQU8sS0FBSyxJQUFJLEtBQUssS0FBSyxNQUFNLEdBQUcsQ0FBQztBQUNwRixVQUFJLDZCQUE2QixlQUFlLEtBQUssT0FBTyxLQUFLLEtBQUssS0FBSyxTQUFTLFlBQVksS0FBSyxPQUFPLFVBQVUsS0FBSyxvQkFBbUIsQ0FBRTtBQUFBLElBQ25KO0FBQ0QsVUFBTSxJQUFJLGVBQWUsVUFBVSxNQUFNLE9BQU8sUUFBUTtBQUN4RCxRQUFJLFlBQVksVUFBVSxVQUFVLG1CQUFtQixRQUFRLENBQUM7QUFDaEUsUUFBSSxlQUFlO0FBQ25CLFFBQUksY0FBYyxVQUFVO0FBQzVCLFFBQUksWUFBWSxVQUFVO0FBQzFCLFFBQUksT0FBTyxVQUFVO0FBQ3JCLGVBQVcsS0FBSyxVQUFVLE1BQU0sR0FBRyxHQUFHLFNBQVM7QUFBQSxFQUNsRDtBQUFBLEVBQ0osc0JBQXNCO0FBQ2YsVUFBTSxZQUFZLEtBQUssUUFBUTtBQUMvQixVQUFNLFlBQVksT0FBTyxVQUFVLElBQUk7QUFDdkMsVUFBTSxlQUFlLFVBQVUsVUFBVSxPQUFPO0FBQ2hELFdBQU8sVUFBVSxVQUFVLFVBQVUsYUFBYSxhQUFhLFNBQVM7QUFBQSxFQUMzRTtBQUFBLEVBQ0osaUJBQWlCLEdBQUcsR0FBRztBQUNoQixRQUFJLEdBQUcsUUFBUTtBQUNmLFFBQUksV0FBVyxHQUFHLEtBQUssTUFBTSxLQUFLLEtBQUssS0FBSyxXQUFXLEdBQUcsS0FBSyxLQUFLLEtBQUssTUFBTSxHQUFHO0FBQzlFLFdBQUssS0FBSztBQUNWLFdBQUksSUFBSSxHQUFHLElBQUksR0FBRyxRQUFRLEVBQUUsR0FBRTtBQUMxQixpQkFBUyxHQUFHO0FBQ1osWUFBSSxXQUFXLEdBQUcsT0FBTyxNQUFNLE9BQU8sT0FBTyxPQUFPLEtBQUssS0FBSyxXQUFXLEdBQUcsT0FBTyxLQUFLLE9BQU8sTUFBTSxPQUFPLE1BQU0sR0FBRztBQUNqSCxpQkFBTyxLQUFLLFlBQVk7QUFBQSxRQUMzQjtBQUFBLE1BQ0o7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLFlBQVksR0FBRztBQUNSLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFFBQUksQ0FBQyxXQUFXLEVBQUUsTUFBTSxJQUFJLEdBQUc7QUFDM0I7QUFBQSxJQUNIO0FBQ0QsVUFBTSxjQUFjLEtBQUssaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDbEQsUUFBSSxFQUFFLFNBQVMsZUFBZSxFQUFFLFNBQVMsWUFBWTtBQUNqRCxZQUFNLFdBQVcsS0FBSztBQUN0QixZQUFNLFdBQVcsV0FBVyxVQUFVLFdBQVc7QUFDakQsVUFBSSxZQUFZLENBQUMsVUFBVTtBQUN2QixpQkFBUyxLQUFLLFNBQVM7QUFBQSxVQUNuQjtBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsUUFDSCxHQUFFLElBQUk7QUFBQSxNQUNWO0FBQ0QsV0FBSyxlQUFlO0FBQ3BCLFVBQUksZUFBZSxDQUFDLFVBQVU7QUFDMUIsaUJBQVMsS0FBSyxTQUFTO0FBQUEsVUFDbkI7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBLFFBQ0gsR0FBRSxJQUFJO0FBQUEsTUFDVjtBQUFBLElBQ0osV0FBVSxhQUFhO0FBQ3BCLGVBQVMsS0FBSyxTQUFTO0FBQUEsUUFDbkI7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0gsR0FBRSxJQUFJO0FBQUEsSUFDVjtBQUFBLEVBQ0o7QUFDTDtBQUNBLFNBQVMsa0JBQWtCLFVBQVUsV0FBVyxLQUFLLFlBQVksYUFBYTtBQUMxRSxRQUFNLFlBQVksbUJBQW1CLFlBQVksVUFBVSxXQUFXLEdBQUc7QUFDekUsUUFBTSxhQUFhLG9CQUFvQixhQUFhLFlBQVksVUFBVSxVQUFVO0FBQ3BGLFNBQU87QUFBQSxJQUNIO0FBQUEsSUFDQTtBQUFBLEVBQ1I7QUFDQTtBQUNBLFNBQVMsbUJBQW1CLFlBQVksVUFBVSxXQUFXLEtBQUs7QUFDOUQsTUFBSSxpQkFBaUIsV0FBVztBQUNoQyxNQUFJLGtCQUFrQixPQUFPLG1CQUFtQixVQUFVO0FBQ3RELHFCQUFpQixlQUFlLE9BQU8sQ0FBQyxHQUFHLE1BQUksRUFBRSxTQUFTLEVBQUUsU0FBUyxJQUFJLENBQUM7QUFBQSxFQUM3RTtBQUNELFNBQU8sV0FBVyxVQUFVLE9BQU8sSUFBSSxJQUFJLFlBQVksY0FBYyxFQUFFO0FBQzNFO0FBQ0EsU0FBUyxvQkFBb0IsYUFBYSxZQUFZLGdCQUFnQjtBQUNsRSxNQUFJLGFBQWE7QUFDakIsTUFBSSxPQUFPLFdBQVcsU0FBUyxVQUFVO0FBQ3JDLGlCQUFhLDBCQUEwQixZQUFZLGNBQWM7QUFBQSxFQUNwRTtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsMEJBQTBCLFlBQVksZ0JBQWdCO0FBQzNELFFBQU0sY0FBYyxXQUFXLE9BQU8sV0FBVyxLQUFLLFNBQVMsTUFBTTtBQUNyRSxTQUFPLGlCQUFpQjtBQUM1QjtBQUNBLFNBQVMsV0FBVyxNQUFNLE1BQU07QUFDNUIsT0FBSyxTQUFTLGVBQWUsU0FBUyxnQkFBZ0IsS0FBSyxXQUFXLEtBQUssVUFBVTtBQUNqRixXQUFPO0FBQUEsRUFDVjtBQUNELE1BQUksS0FBSyxZQUFZLFNBQVMsV0FBVyxTQUFTLFlBQVk7QUFDMUQsV0FBTztBQUFBLEVBQ1Y7QUFDRCxTQUFPO0FBQ1g7QUFDQSxJQUFJLGdCQUFnQjtBQUFBLEVBQ2hCLElBQUk7QUFBQSxFQUNQLFVBQVU7QUFBQSxFQUNQLE1BQU8sT0FBTyxPQUFPLFNBQVM7QUFDMUIsVUFBTSxTQUFTLE1BQU0sU0FBUyxJQUFJLE9BQU87QUFBQSxNQUNyQyxLQUFLLE1BQU07QUFBQSxNQUNYO0FBQUEsTUFDQTtBQUFBLElBQ1osQ0FBUztBQUNELFlBQVEsVUFBVSxPQUFPLFFBQVEsT0FBTztBQUN4QyxZQUFRLE9BQU8sT0FBTyxNQUFNO0FBQUEsRUFDL0I7QUFBQSxFQUNELEtBQU0sT0FBTztBQUNULFlBQVEsVUFBVSxPQUFPLE1BQU0sTUFBTTtBQUNyQyxXQUFPLE1BQU07QUFBQSxFQUNoQjtBQUFBLEVBQ0QsYUFBYyxPQUFPLE9BQU8sU0FBUztBQUNqQyxVQUFNLFNBQVMsTUFBTTtBQUNyQixZQUFRLFVBQVUsT0FBTyxRQUFRLE9BQU87QUFDeEMsV0FBTyxVQUFVO0FBQUEsRUFDcEI7QUFBQSxFQUNELFlBQWEsT0FBTztBQUNoQixVQUFNLFNBQVMsTUFBTTtBQUNyQixXQUFPLFlBQVc7QUFDbEIsV0FBTyxlQUFjO0FBQUEsRUFDeEI7QUFBQSxFQUNELFdBQVksT0FBTyxNQUFNO0FBQ3JCLFFBQUksQ0FBQyxLQUFLLFFBQVE7QUFDZCxZQUFNLE9BQU8sWUFBWSxLQUFLLEtBQUs7QUFBQSxJQUN0QztBQUFBLEVBQ0o7QUFBQSxFQUNELFVBQVU7QUFBQSxJQUNOLFNBQVM7QUFBQSxJQUNULFVBQVU7QUFBQSxJQUNWLE9BQU87QUFBQSxJQUNQLFVBQVU7QUFBQSxJQUNWLFNBQVM7QUFBQSxJQUNULFFBQVE7QUFBQSxJQUNSLFFBQVMsR0FBRyxZQUFZLFFBQVE7QUFDNUIsWUFBTSxRQUFRLFdBQVc7QUFDekIsWUFBTSxLQUFLLE9BQU87QUFDbEIsVUFBSSxHQUFHLGlCQUFpQixLQUFLLEdBQUc7QUFDNUIsV0FBRyxLQUFLLEtBQUs7QUFDYixtQkFBVyxTQUFTO0FBQUEsTUFDcEMsT0FBbUI7QUFDSCxXQUFHLEtBQUssS0FBSztBQUNiLG1CQUFXLFNBQVM7QUFBQSxNQUN2QjtBQUFBLElBQ0o7QUFBQSxJQUNELFNBQVM7QUFBQSxJQUNULFNBQVM7QUFBQSxJQUNULFFBQVE7QUFBQSxNQUNKLE9BQU8sQ0FBQyxRQUFNLElBQUksTUFBTSxRQUFRO0FBQUEsTUFDaEMsVUFBVTtBQUFBLE1BQ1YsU0FBUztBQUFBLE1BQ1QsZUFBZ0IsT0FBTztBQUNuQixjQUFNLFdBQVcsTUFBTSxLQUFLO0FBQzVCLGNBQU0sRUFBRSxRQUFRLEVBQUUsZUFBZ0IsWUFBYSxXQUFZLGVBQVEsaUJBQWtCLGFBQVksRUFBTSxJQUFHLE1BQU0sT0FBTztBQUN2SCxlQUFPLE1BQU0sdUJBQXNCLEVBQUcsSUFBSSxDQUFDLFNBQU87QUFDOUMsZ0JBQU0sUUFBUSxLQUFLLFdBQVcsU0FBUyxnQkFBZ0IsSUFBSSxNQUFTO0FBQ3BFLGdCQUFNLGNBQWMsVUFBVSxNQUFNLFdBQVc7QUFDL0MsaUJBQU87QUFBQSxZQUNILE1BQU0sU0FBUyxLQUFLLE9BQU87QUFBQSxZQUMzQixXQUFXLE1BQU07QUFBQSxZQUNqQixXQUFXRztBQUFBLFlBQ1gsUUFBUSxDQUFDLEtBQUs7QUFBQSxZQUNkLFNBQVMsTUFBTTtBQUFBLFlBQ2YsVUFBVSxNQUFNO0FBQUEsWUFDaEIsZ0JBQWdCLE1BQU07QUFBQSxZQUN0QixVQUFVLE1BQU07QUFBQSxZQUNoQixZQUFZLFlBQVksUUFBUSxZQUFZLFVBQVU7QUFBQSxZQUN0RCxhQUFhLE1BQU07QUFBQSxZQUNuQixZQUFZLGNBQWMsTUFBTTtBQUFBLFlBQ2hDLFVBQVUsTUFBTTtBQUFBLFlBQ2hCLFdBQVcsYUFBYSxNQUFNO0FBQUEsWUFDOUIsY0FBYyxvQkFBb0IsZ0JBQWdCLE1BQU07QUFBQSxZQUN4RCxjQUFjLEtBQUs7QUFBQSxVQUMzQztBQUFBLFFBQ2lCLEdBQUUsSUFBSTtBQUFBLE1BQ1Y7QUFBQSxJQUNKO0FBQUEsSUFDRCxPQUFPO0FBQUEsTUFDSCxPQUFPLENBQUMsUUFBTSxJQUFJLE1BQU0sUUFBUTtBQUFBLE1BQ2hDLFNBQVM7QUFBQSxNQUNULFVBQVU7QUFBQSxNQUNWLE1BQU07QUFBQSxJQUNUO0FBQUEsRUFDSjtBQUFBLEVBQ0QsYUFBYTtBQUFBLElBQ1QsYUFBYSxDQUFDSSxVQUFPLENBQUNBLE1BQUssV0FBVyxJQUFJO0FBQUEsSUFDMUMsUUFBUTtBQUFBLE1BQ0osYUFBYSxDQUFDQSxVQUFPLENBQUM7QUFBQSxRQUNkO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNwQixFQUFrQixTQUFTQSxLQUFJO0FBQUEsSUFDdEI7QUFBQSxFQUNKO0FBQ0w7QUFFQSxNQUFNLGNBQWMsUUFBUTtBQUFBLEVBQzNCLFlBQVksUUFBTztBQUNaO0FBQ0EsU0FBSyxRQUFRLE9BQU87QUFDcEIsU0FBSyxVQUFVLE9BQU87QUFDdEIsU0FBSyxNQUFNLE9BQU87QUFDbEIsU0FBSyxXQUFXO0FBQ2hCLFNBQUssTUFBTTtBQUNYLFNBQUssU0FBUztBQUNkLFNBQUssT0FBTztBQUNaLFNBQUssUUFBUTtBQUNiLFNBQUssUUFBUTtBQUNiLFNBQUssU0FBUztBQUNkLFNBQUssV0FBVztBQUNoQixTQUFLLFNBQVM7QUFDZCxTQUFLLFdBQVc7QUFBQSxFQUNuQjtBQUFBLEVBQ0QsT0FBTyxVQUFVLFdBQVc7QUFDeEIsVUFBTSxPQUFPLEtBQUs7QUFDbEIsU0FBSyxPQUFPO0FBQ1osU0FBSyxNQUFNO0FBQ1gsUUFBSSxDQUFDLEtBQUssU0FBUztBQUNmLFdBQUssUUFBUSxLQUFLLFNBQVMsS0FBSyxRQUFRLEtBQUssU0FBUztBQUN0RDtBQUFBLElBQ0g7QUFDRCxTQUFLLFFBQVEsS0FBSyxRQUFRO0FBQzFCLFNBQUssU0FBUyxLQUFLLFNBQVM7QUFDNUIsVUFBTSxZQUFZLFFBQVEsS0FBSyxJQUFJLElBQUksS0FBSyxLQUFLLFNBQVM7QUFDMUQsU0FBSyxXQUFXLFVBQVUsS0FBSyxPQUFPO0FBQ3RDLFVBQU0sV0FBVyxZQUFZLE9BQU8sS0FBSyxJQUFJLEVBQUUsYUFBYSxLQUFLLFNBQVM7QUFDMUUsUUFBSSxLQUFLLGdCQUFnQjtBQUNyQixXQUFLLFNBQVM7QUFBQSxJQUMxQixPQUFlO0FBQ0gsV0FBSyxRQUFRO0FBQUEsSUFDaEI7QUFBQSxFQUNKO0FBQUEsRUFDRCxlQUFlO0FBQ1gsVUFBTSxNQUFNLEtBQUssUUFBUTtBQUN6QixXQUFPLFFBQVEsU0FBUyxRQUFRO0FBQUEsRUFDbkM7QUFBQSxFQUNELFVBQVUsUUFBUTtBQUNkLFVBQU0sRUFBRSxLQUFNLE1BQU8sUUFBUyxPQUFRLFFBQVUsSUFBRztBQUNuRCxVQUFNLFFBQVEsUUFBUTtBQUN0QixRQUFJLFdBQVc7QUFDZixRQUFJLFVBQVUsUUFBUTtBQUN0QixRQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLGVBQVMsZUFBZSxPQUFPLE1BQU0sS0FBSztBQUMxQyxlQUFTLE1BQU07QUFDZixpQkFBVyxRQUFRO0FBQUEsSUFDL0IsT0FBZTtBQUNILFVBQUksUUFBUSxhQUFhLFFBQVE7QUFDN0IsaUJBQVMsT0FBTztBQUNoQixpQkFBUyxlQUFlLE9BQU8sUUFBUSxHQUFHO0FBQzFDLG1CQUFXLEtBQUs7QUFBQSxNQUNoQyxPQUFtQjtBQUNILGlCQUFTLFFBQVE7QUFDakIsaUJBQVMsZUFBZSxPQUFPLEtBQUssTUFBTTtBQUMxQyxtQkFBVyxLQUFLO0FBQUEsTUFDbkI7QUFDRCxpQkFBVyxTQUFTO0FBQUEsSUFDdkI7QUFDRCxXQUFPO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ1o7QUFBQSxFQUNLO0FBQUEsRUFDRCxPQUFPO0FBQ0gsVUFBTSxNQUFNLEtBQUs7QUFDakIsVUFBTSxPQUFPLEtBQUs7QUFDbEIsUUFBSSxDQUFDLEtBQUssU0FBUztBQUNmO0FBQUEsSUFDSDtBQUNELFVBQU0sV0FBVyxPQUFPLEtBQUssSUFBSTtBQUNqQyxVQUFNLGFBQWEsU0FBUztBQUM1QixVQUFNLFNBQVMsYUFBYSxJQUFJLEtBQUssU0FBUztBQUM5QyxVQUFNLEVBQUUsUUFBUyxRQUFTLFVBQVcsU0FBUSxJQUFNLEtBQUssVUFBVSxNQUFNO0FBQ3hFLGVBQVcsS0FBSyxLQUFLLE1BQU0sR0FBRyxHQUFHLFVBQVU7QUFBQSxNQUN2QyxPQUFPLEtBQUs7QUFBQSxNQUNaO0FBQUEsTUFDQTtBQUFBLE1BQ0EsV0FBVyxtQkFBbUIsS0FBSyxLQUFLO0FBQUEsTUFDeEMsY0FBYztBQUFBLE1BQ2QsYUFBYTtBQUFBLFFBQ1Q7QUFBQSxRQUNBO0FBQUEsTUFDSDtBQUFBLElBQ2IsQ0FBUztBQUFBLEVBQ0o7QUFDTDtBQUNBLFNBQVMsWUFBWSxPQUFPLFdBQVc7QUFDbkMsUUFBTSxRQUFRLElBQUksTUFBTTtBQUFBLElBQ3BCLEtBQUssTUFBTTtBQUFBLElBQ1gsU0FBUztBQUFBLElBQ1Q7QUFBQSxFQUNSLENBQUs7QUFDRCxVQUFRLFVBQVUsT0FBTyxPQUFPLFNBQVM7QUFDekMsVUFBUSxPQUFPLE9BQU8sS0FBSztBQUMzQixRQUFNLGFBQWE7QUFDdkI7QUFDQSxJQUFJLGVBQWU7QUFBQSxFQUNmLElBQUk7QUFBQSxFQUNQLFVBQVU7QUFBQSxFQUNQLE1BQU8sT0FBTyxPQUFPLFNBQVM7QUFDMUIsZ0JBQVksT0FBTyxPQUFPO0FBQUEsRUFDN0I7QUFBQSxFQUNELEtBQU0sT0FBTztBQUNULFVBQU0sYUFBYSxNQUFNO0FBQ3pCLFlBQVEsVUFBVSxPQUFPLFVBQVU7QUFDbkMsV0FBTyxNQUFNO0FBQUEsRUFDaEI7QUFBQSxFQUNELGFBQWMsT0FBTyxPQUFPLFNBQVM7QUFDakMsVUFBTSxRQUFRLE1BQU07QUFDcEIsWUFBUSxVQUFVLE9BQU8sT0FBTyxPQUFPO0FBQ3ZDLFVBQU0sVUFBVTtBQUFBLEVBQ25CO0FBQUEsRUFDRCxVQUFVO0FBQUEsSUFDTixPQUFPO0FBQUEsSUFDUCxTQUFTO0FBQUEsSUFDVCxNQUFNO0FBQUEsTUFDRixRQUFRO0FBQUEsSUFDWDtBQUFBLElBQ0QsVUFBVTtBQUFBLElBQ1YsU0FBUztBQUFBLElBQ1QsVUFBVTtBQUFBLElBQ1YsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLEVBQ1g7QUFBQSxFQUNELGVBQWU7QUFBQSxJQUNYLE9BQU87QUFBQSxFQUNWO0FBQUEsRUFDRCxhQUFhO0FBQUEsSUFDVCxhQUFhO0FBQUEsSUFDYixZQUFZO0FBQUEsRUFDZjtBQUNMO0FBNkNBLE1BQU0sY0FBYztBQUFBLEVBQ25CLFFBQVMsT0FBTztBQUNULFFBQUksQ0FBQyxNQUFNLFFBQVE7QUFDZixhQUFPO0FBQUEsSUFDVjtBQUNELFFBQUksR0FBRztBQUNQLFFBQUksSUFBSTtBQUNSLFFBQUksSUFBSTtBQUNSLFFBQUksUUFBUTtBQUNaLFNBQUksSUFBSSxHQUFHLE1BQU0sTUFBTSxRQUFRLElBQUksS0FBSyxFQUFFLEdBQUU7QUFDeEMsWUFBTSxLQUFLLE1BQU0sR0FBRztBQUNwQixVQUFJLE1BQU0sR0FBRyxZQUFZO0FBQ3JCLGNBQU0sTUFBTSxHQUFHO0FBQ2YsYUFBSyxJQUFJO0FBQ1QsYUFBSyxJQUFJO0FBQ1QsVUFBRTtBQUFBLE1BQ0w7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLE1BQ0gsR0FBRyxJQUFJO0FBQUEsTUFDUCxHQUFHLElBQUk7QUFBQSxJQUNuQjtBQUFBLEVBQ0s7QUFBQSxFQUNKLFFBQVMsT0FBTyxlQUFlO0FBQ3hCLFFBQUksQ0FBQyxNQUFNLFFBQVE7QUFDZixhQUFPO0FBQUEsSUFDVjtBQUNELFFBQUksSUFBSSxjQUFjO0FBQ3RCLFFBQUksSUFBSSxjQUFjO0FBQ3RCLFFBQUksY0FBYyxPQUFPO0FBQ3pCLFFBQUksR0FBRyxLQUFLO0FBQ1osU0FBSSxJQUFJLEdBQUcsTUFBTSxNQUFNLFFBQVEsSUFBSSxLQUFLLEVBQUUsR0FBRTtBQUN4QyxZQUFNLEtBQUssTUFBTSxHQUFHO0FBQ3BCLFVBQUksTUFBTSxHQUFHLFlBQVk7QUFDckIsY0FBTSxTQUFTLEdBQUc7QUFDbEIsY0FBTSxJQUFJLHNCQUFzQixlQUFlLE1BQU07QUFDckQsWUFBSSxJQUFJLGFBQWE7QUFDakIsd0JBQWM7QUFDZCwyQkFBaUI7QUFBQSxRQUNwQjtBQUFBLE1BQ0o7QUFBQSxJQUNKO0FBQ0QsUUFBSSxnQkFBZ0I7QUFDaEIsWUFBTSxLQUFLLGVBQWU7QUFDMUIsVUFBSSxHQUFHO0FBQ1AsVUFBSSxHQUFHO0FBQUEsSUFDVjtBQUNELFdBQU87QUFBQSxNQUNIO0FBQUEsTUFDQTtBQUFBLElBQ1o7QUFBQSxFQUNLO0FBQ0w7QUFDQSxTQUFTLGFBQWEsTUFBTSxRQUFRO0FBQ2hDLE1BQUksUUFBUTtBQUNSLFFBQUksUUFBUSxNQUFNLEdBQUc7QUFDakIsWUFBTSxVQUFVLEtBQUssTUFBTSxNQUFNLE1BQU07QUFBQSxJQUNuRCxPQUFlO0FBQ0gsV0FBSyxLQUFLLE1BQU07QUFBQSxJQUNuQjtBQUFBLEVBQ0o7QUFDRCxTQUFPO0FBQ1g7QUFDQyxTQUFTLGNBQWMsS0FBSztBQUN6QixPQUFLLE9BQU8sUUFBUSxZQUFZLGVBQWUsV0FBVyxJQUFJLFFBQVEsSUFBSSxJQUFJLElBQUk7QUFDOUUsV0FBTyxJQUFJLE1BQU0sSUFBSTtBQUFBLEVBQ3hCO0FBQ0QsU0FBTztBQUNYO0FBQ0MsU0FBUyxrQkFBa0IsT0FBTyxNQUFNO0FBQ3JDLFFBQU0sRUFBRSxTQUFVLGNBQWUsTUFBSyxJQUFNO0FBQzVDLFFBQU0sYUFBYSxNQUFNLGVBQWUsWUFBWSxFQUFFO0FBQ3RELFFBQU0sRUFBRSxPQUFRLE1BQUssSUFBTSxXQUFXLGlCQUFpQixLQUFLO0FBQzVELFNBQU87QUFBQSxJQUNIO0FBQUEsSUFDQTtBQUFBLElBQ0EsUUFBUSxXQUFXLFVBQVUsS0FBSztBQUFBLElBQ2xDLEtBQUssTUFBTSxLQUFLLFNBQVMsY0FBYyxLQUFLO0FBQUEsSUFDNUMsZ0JBQWdCO0FBQUEsSUFDaEIsU0FBUyxXQUFXLFdBQVk7QUFBQSxJQUNoQyxXQUFXO0FBQUEsSUFDWDtBQUFBLElBQ0E7QUFBQSxFQUNSO0FBQ0E7QUFDQyxTQUFTLGVBQWUsU0FBUyxTQUFTO0FBQ3ZDLFFBQU0sTUFBTSxRQUFRLE1BQU07QUFDMUIsUUFBTSxFQUFFLE1BQU8sUUFBUyxNQUFLLElBQU07QUFDbkMsUUFBTSxFQUFFLFVBQVcsVUFBWSxJQUFHO0FBQ2xDLFFBQU0sV0FBVyxPQUFPLFFBQVEsUUFBUTtBQUN4QyxRQUFNLFlBQVksT0FBTyxRQUFRLFNBQVM7QUFDMUMsUUFBTSxhQUFhLE9BQU8sUUFBUSxVQUFVO0FBQzVDLFFBQU0saUJBQWlCLE1BQU07QUFDN0IsUUFBTSxrQkFBa0IsT0FBTztBQUMvQixRQUFNLG9CQUFvQixLQUFLO0FBQy9CLFFBQU0sVUFBVSxVQUFVLFFBQVEsT0FBTztBQUN6QyxNQUFJLFNBQVMsUUFBUTtBQUNyQixNQUFJLFFBQVE7QUFDWixNQUFJLHFCQUFxQixLQUFLLE9BQU8sQ0FBQyxPQUFPLGFBQVcsUUFBUSxTQUFTLE9BQU8sU0FBUyxTQUFTLE1BQU0sU0FBUyxTQUFTLE1BQU0sUUFBUSxDQUFDO0FBQ3pJLHdCQUFzQixRQUFRLFdBQVcsU0FBUyxRQUFRLFVBQVU7QUFDcEUsTUFBSSxnQkFBZ0I7QUFDaEIsY0FBVSxpQkFBaUIsVUFBVSxjQUFjLGlCQUFpQixLQUFLLFFBQVEsZUFBZSxRQUFRO0FBQUEsRUFDM0c7QUFDRCxNQUFJLG9CQUFvQjtBQUNwQixVQUFNLGlCQUFpQixRQUFRLGdCQUFnQixLQUFLLElBQUksV0FBVyxTQUFTLFVBQVUsSUFBSSxTQUFTO0FBQ25HLGNBQVUsb0JBQW9CLGtCQUFrQixxQkFBcUIscUJBQXFCLFNBQVMsY0FBYyxxQkFBcUIsS0FBSyxRQUFRO0FBQUEsRUFDdEo7QUFDRCxNQUFJLGlCQUFpQjtBQUNqQixjQUFVLFFBQVEsa0JBQWtCLGtCQUFrQixXQUFXLGNBQWMsa0JBQWtCLEtBQUssUUFBUTtBQUFBLEVBQ2pIO0FBQ0QsTUFBSSxlQUFlO0FBQ25CLFFBQU0sZUFBZSxTQUFTLE1BQU07QUFDaEMsWUFBUSxLQUFLLElBQUksT0FBTyxJQUFJLFlBQVksSUFBSSxFQUFFLFFBQVEsWUFBWTtBQUFBLEVBQzFFO0FBQ0ksTUFBSSxLQUFJO0FBQ1IsTUFBSSxPQUFPLFVBQVU7QUFDckIsT0FBSyxRQUFRLE9BQU8sWUFBWTtBQUNoQyxNQUFJLE9BQU8sU0FBUztBQUNwQixPQUFLLFFBQVEsV0FBVyxPQUFPLFFBQVEsU0FBUyxHQUFHLFlBQVk7QUFDL0QsaUJBQWUsUUFBUSxnQkFBZ0IsV0FBVyxJQUFJLFFBQVEsYUFBYTtBQUMzRSxPQUFLLE1BQU0sQ0FBQyxhQUFXO0FBQ25CLFNBQUssU0FBUyxRQUFRLFlBQVk7QUFDbEMsU0FBSyxTQUFTLE9BQU8sWUFBWTtBQUNqQyxTQUFLLFNBQVMsT0FBTyxZQUFZO0FBQUEsRUFDekMsQ0FBSztBQUNELGlCQUFlO0FBQ2YsTUFBSSxPQUFPLFdBQVc7QUFDdEIsT0FBSyxRQUFRLFFBQVEsWUFBWTtBQUNqQyxNQUFJLFFBQU87QUFDWCxXQUFTLFFBQVE7QUFDakIsU0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBO0FBQUEsRUFDUjtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0IsT0FBTyxNQUFNO0FBQ2xDLFFBQU0sRUFBRSxHQUFJLE9BQVMsSUFBRztBQUN4QixNQUFJLElBQUksU0FBUyxHQUFHO0FBQ2hCLFdBQU87QUFBQSxFQUNWLFdBQVUsSUFBSSxNQUFNLFNBQVMsU0FBUyxHQUFHO0FBQ3RDLFdBQU87QUFBQSxFQUNWO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxvQkFBb0IsUUFBUSxPQUFPLFNBQVMsTUFBTTtBQUN2RCxRQUFNLEVBQUUsR0FBSSxNQUFRLElBQUc7QUFDdkIsUUFBTSxRQUFRLFFBQVEsWUFBWSxRQUFRO0FBQzFDLE1BQUksV0FBVyxVQUFVLElBQUksUUFBUSxRQUFRLE1BQU0sT0FBTztBQUN0RCxXQUFPO0FBQUEsRUFDVjtBQUNELE1BQUksV0FBVyxXQUFXLElBQUksUUFBUSxRQUFRLEdBQUc7QUFDN0MsV0FBTztBQUFBLEVBQ1Y7QUFDTDtBQUNBLFNBQVMsZ0JBQWdCLE9BQU8sU0FBUyxNQUFNLFFBQVE7QUFDbkQsUUFBTSxFQUFFLEdBQUksTUFBUSxJQUFHO0FBQ3ZCLFFBQU0sRUFBRSxPQUFPLFlBQWEsV0FBVyxFQUFFLE1BQU8sTUFBSyxFQUFNLElBQUc7QUFDOUQsTUFBSSxTQUFTO0FBQ2IsTUFBSSxXQUFXLFVBQVU7QUFDckIsYUFBUyxNQUFNLE9BQU8sU0FBUyxJQUFJLFNBQVM7QUFBQSxFQUNwRCxXQUFlLEtBQUssUUFBUSxHQUFHO0FBQ3ZCLGFBQVM7QUFBQSxFQUNaLFdBQVUsS0FBSyxhQUFhLFFBQVEsR0FBRztBQUNwQyxhQUFTO0FBQUEsRUFDWjtBQUNELE1BQUksb0JBQW9CLFFBQVEsT0FBTyxTQUFTLElBQUksR0FBRztBQUNuRCxhQUFTO0FBQUEsRUFDWjtBQUNELFNBQU87QUFDWDtBQUNDLFNBQVMsbUJBQW1CLE9BQU8sU0FBUyxNQUFNO0FBQy9DLFFBQU0sU0FBUyxLQUFLLFVBQVUsUUFBUSxVQUFVLGdCQUFnQixPQUFPLElBQUk7QUFDM0UsU0FBTztBQUFBLElBQ0gsUUFBUSxLQUFLLFVBQVUsUUFBUSxVQUFVLGdCQUFnQixPQUFPLFNBQVMsTUFBTSxNQUFNO0FBQUEsSUFDckY7QUFBQSxFQUNSO0FBQ0E7QUFDQSxTQUFTLE9BQU8sTUFBTSxRQUFRO0FBQzFCLE1BQUksRUFBRSxHQUFJLE1BQVEsSUFBRztBQUNyQixNQUFJLFdBQVcsU0FBUztBQUNwQixTQUFLO0FBQUEsRUFDYixXQUFlLFdBQVcsVUFBVTtBQUM1QixTQUFLLFFBQVE7QUFBQSxFQUNoQjtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsT0FBTyxNQUFNLFFBQVEsZ0JBQWdCO0FBQzFDLE1BQUksRUFBRSxHQUFJLE9BQVMsSUFBRztBQUN0QixNQUFJLFdBQVcsT0FBTztBQUNsQixTQUFLO0FBQUEsRUFDYixXQUFlLFdBQVcsVUFBVTtBQUM1QixTQUFLLFNBQVM7QUFBQSxFQUN0QixPQUFXO0FBQ0gsU0FBSyxTQUFTO0FBQUEsRUFDakI7QUFDRCxTQUFPO0FBQ1g7QUFDQyxTQUFTLG1CQUFtQixTQUFTLE1BQU0sV0FBVyxPQUFPO0FBQzFELFFBQU0sRUFBRSxXQUFZLGNBQWUsYUFBWSxJQUFNO0FBQ3JELFFBQU0sRUFBRSxRQUFTLE9BQVMsSUFBRztBQUM3QixRQUFNLGlCQUFpQixZQUFZO0FBQ25DLFFBQU0sRUFBRSxTQUFVLFVBQVcsWUFBYSxnQkFBaUIsY0FBYyxZQUFZO0FBQ3JGLE1BQUksSUFBSSxPQUFPLE1BQU0sTUFBTTtBQUMzQixRQUFNLElBQUksT0FBTyxNQUFNLFFBQVEsY0FBYztBQUM3QyxNQUFJLFdBQVcsVUFBVTtBQUNyQixRQUFJLFdBQVcsUUFBUTtBQUNuQixXQUFLO0FBQUEsSUFDakIsV0FBbUIsV0FBVyxTQUFTO0FBQzNCLFdBQUs7QUFBQSxJQUNSO0FBQUEsRUFDVCxXQUFlLFdBQVcsUUFBUTtBQUMxQixTQUFLLEtBQUssSUFBSSxTQUFTLFVBQVUsSUFBSTtBQUFBLEVBQzdDLFdBQWUsV0FBVyxTQUFTO0FBQzNCLFNBQUssS0FBSyxJQUFJLFVBQVUsV0FBVyxJQUFJO0FBQUEsRUFDMUM7QUFDRCxTQUFPO0FBQUEsSUFDSCxHQUFHLFlBQVksR0FBRyxHQUFHLE1BQU0sUUFBUSxLQUFLLEtBQUs7QUFBQSxJQUM3QyxHQUFHLFlBQVksR0FBRyxHQUFHLE1BQU0sU0FBUyxLQUFLLE1BQU07QUFBQSxFQUN2RDtBQUNBO0FBQ0EsU0FBUyxZQUFZLFNBQVMsT0FBTyxTQUFTO0FBQzFDLFFBQU0sVUFBVSxVQUFVLFFBQVEsT0FBTztBQUN6QyxTQUFPLFVBQVUsV0FBVyxRQUFRLElBQUksUUFBUSxRQUFRLElBQUksVUFBVSxVQUFVLFFBQVEsSUFBSSxRQUFRLFFBQVEsUUFBUSxRQUFRLFFBQVEsSUFBSSxRQUFRO0FBQ3BKO0FBQ0MsU0FBUyx3QkFBd0JGLFdBQVU7QUFDeEMsU0FBTyxhQUFhLENBQUUsR0FBRSxjQUFjQSxTQUFRLENBQUM7QUFDbkQ7QUFDQSxTQUFTLHFCQUFxQixRQUFRLFNBQVMsY0FBYztBQUN6RCxTQUFPLGNBQWMsUUFBUTtBQUFBLElBQ3pCO0FBQUEsSUFDQTtBQUFBLElBQ0EsTUFBTTtBQUFBLEVBQ2QsQ0FBSztBQUNMO0FBQ0EsU0FBUyxrQkFBa0IsV0FBVyxTQUFTO0FBQzNDLFFBQU0sV0FBVyxXQUFXLFFBQVEsV0FBVyxRQUFRLFFBQVEsV0FBVyxRQUFRLFFBQVEsUUFBUTtBQUNsRyxTQUFPLFdBQVcsVUFBVSxTQUFTLFFBQVEsSUFBSTtBQUNyRDtBQUNBLE1BQU0sbUJBQW1CO0FBQUEsRUFDckIsYUFBYTtBQUFBLEVBQ2IsTUFBTyxjQUFjO0FBQ2pCLFFBQUksYUFBYSxTQUFTLEdBQUc7QUFDekIsWUFBTSxPQUFPLGFBQWE7QUFDMUIsWUFBTSxTQUFTLEtBQUssTUFBTSxLQUFLO0FBQy9CLFlBQU0sYUFBYSxTQUFTLE9BQU8sU0FBUztBQUM1QyxVQUFJLFFBQVEsS0FBSyxXQUFXLEtBQUssUUFBUSxTQUFTLFdBQVc7QUFDekQsZUFBTyxLQUFLLFFBQVEsU0FBUztBQUFBLE1BQzdDLFdBQXVCLEtBQUssT0FBTztBQUNuQixlQUFPLEtBQUs7QUFBQSxNQUNmLFdBQVUsYUFBYSxLQUFLLEtBQUssWUFBWSxZQUFZO0FBQ3RELGVBQU8sT0FBTyxLQUFLO0FBQUEsTUFDdEI7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNELFlBQVk7QUFBQSxFQUNaLFlBQVk7QUFBQSxFQUNaLGFBQWE7QUFBQSxFQUNiLE1BQU8sYUFBYTtBQUNoQixRQUFJLFFBQVEsS0FBSyxXQUFXLEtBQUssUUFBUSxTQUFTLFdBQVc7QUFDekQsYUFBTyxZQUFZLFFBQVEsT0FBTyxZQUFZLGtCQUFrQixZQUFZO0FBQUEsSUFDL0U7QUFDRCxRQUFJLFFBQVEsWUFBWSxRQUFRLFNBQVM7QUFDekMsUUFBSSxPQUFPO0FBQ1AsZUFBUztBQUFBLElBQ1o7QUFDRCxVQUFNLFFBQVEsWUFBWTtBQUMxQixRQUFJLENBQUMsY0FBYyxLQUFLLEdBQUc7QUFDdkIsZUFBUztBQUFBLElBQ1o7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsV0FBWSxhQUFhO0FBQ3JCLFVBQU0sT0FBTyxZQUFZLE1BQU0sZUFBZSxZQUFZLFlBQVk7QUFDdEUsVUFBTSxVQUFVLEtBQUssV0FBVyxTQUFTLFlBQVksU0FBUztBQUM5RCxXQUFPO0FBQUEsTUFDSCxhQUFhLFFBQVE7QUFBQSxNQUNyQixpQkFBaUIsUUFBUTtBQUFBLE1BQ3pCLGFBQWEsUUFBUTtBQUFBLE1BQ3JCLFlBQVksUUFBUTtBQUFBLE1BQ3BCLGtCQUFrQixRQUFRO0FBQUEsTUFDMUIsY0FBYztBQUFBLElBQzFCO0FBQUEsRUFDSztBQUFBLEVBQ0QsaUJBQWtCO0FBQ2QsV0FBTyxLQUFLLFFBQVE7QUFBQSxFQUN2QjtBQUFBLEVBQ0QsZ0JBQWlCLGFBQWE7QUFDMUIsVUFBTSxPQUFPLFlBQVksTUFBTSxlQUFlLFlBQVksWUFBWTtBQUN0RSxVQUFNLFVBQVUsS0FBSyxXQUFXLFNBQVMsWUFBWSxTQUFTO0FBQzlELFdBQU87QUFBQSxNQUNILFlBQVksUUFBUTtBQUFBLE1BQ3BCLFVBQVUsUUFBUTtBQUFBLElBQzlCO0FBQUEsRUFDSztBQUFBLEVBQ0QsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsY0FBYztBQUFBLEVBQ2QsUUFBUTtBQUFBLEVBQ1IsYUFBYTtBQUNqQjtBQUNDLFNBQVMsMkJBQTJCLFdBQVdFLE9BQU0sS0FBSyxLQUFLO0FBQzVELFFBQU0sU0FBUyxVQUFVQSxPQUFNLEtBQUssS0FBSyxHQUFHO0FBQzVDLE1BQUksT0FBTyxXQUFXLGFBQWE7QUFDL0IsV0FBTyxpQkFBaUJBLE9BQU0sS0FBSyxLQUFLLEdBQUc7QUFBQSxFQUM5QztBQUNELFNBQU87QUFDWDtBQUNBLE1BQU0sZ0JBQWdCLFFBQVE7QUFBQSxFQUUxQixZQUFZLFFBQU87QUFDZjtBQUNBLFNBQUssVUFBVTtBQUNmLFNBQUssVUFBVTtBQUNmLFNBQUssaUJBQWlCO0FBQ3RCLFNBQUssUUFBUTtBQUNiLFNBQUssb0JBQW9CO0FBQ3pCLFNBQUssZ0JBQWdCO0FBQ3JCLFNBQUssY0FBYztBQUNuQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxRQUFRLE9BQU87QUFDcEIsU0FBSyxVQUFVLE9BQU87QUFDdEIsU0FBSyxhQUFhO0FBQ2xCLFNBQUssUUFBUTtBQUNiLFNBQUssYUFBYTtBQUNsQixTQUFLLE9BQU87QUFDWixTQUFLLFlBQVk7QUFDakIsU0FBSyxTQUFTO0FBQ2QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxJQUFJO0FBQ1QsU0FBSyxJQUFJO0FBQ1QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxRQUFRO0FBQ2IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxjQUFjO0FBQ25CLFNBQUssbUJBQW1CO0FBQ3hCLFNBQUssa0JBQWtCO0FBQUEsRUFDMUI7QUFBQSxFQUNELFdBQVcsU0FBUztBQUNoQixTQUFLLFVBQVU7QUFDZixTQUFLLG9CQUFvQjtBQUN6QixTQUFLLFdBQVc7QUFBQSxFQUNuQjtBQUFBLEVBQ0oscUJBQXFCO0FBQ2QsVUFBTSxTQUFTLEtBQUs7QUFDcEIsUUFBSSxRQUFRO0FBQ1IsYUFBTztBQUFBLElBQ1Y7QUFDRCxVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLFVBQVUsS0FBSyxRQUFRLFdBQVcsS0FBSyxXQUFVLENBQUU7QUFDekQsVUFBTSxPQUFPLFFBQVEsV0FBVyxNQUFNLFFBQVEsYUFBYSxRQUFRO0FBQ25FLFVBQU0sYUFBYSxJQUFJLFdBQVcsS0FBSyxPQUFPLElBQUk7QUFDbEQsUUFBSSxLQUFLLFlBQVk7QUFDakIsV0FBSyxvQkFBb0IsT0FBTyxPQUFPLFVBQVU7QUFBQSxJQUNwRDtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixhQUFhO0FBQ04sV0FBTyxLQUFLLGFBQWEsS0FBSyxXQUFXLHFCQUFxQixLQUFLLE1BQU0sV0FBVSxHQUFJLE1BQU0sS0FBSyxhQUFhO0FBQUEsRUFDbEg7QUFBQSxFQUNELFNBQVMsU0FBUyxTQUFTO0FBQ3ZCLFVBQU0sRUFBRSxVQUFZLElBQUc7QUFDdkIsVUFBTSxjQUFjLDJCQUEyQixXQUFXLGVBQWUsTUFBTSxPQUFPO0FBQ3RGLFVBQU0sUUFBUSwyQkFBMkIsV0FBVyxTQUFTLE1BQU0sT0FBTztBQUMxRSxVQUFNLGFBQWEsMkJBQTJCLFdBQVcsY0FBYyxNQUFNLE9BQU87QUFDcEYsUUFBSSxRQUFRO0FBQ1osWUFBUSxhQUFhLE9BQU8sY0FBYyxXQUFXLENBQUM7QUFDdEQsWUFBUSxhQUFhLE9BQU8sY0FBYyxLQUFLLENBQUM7QUFDaEQsWUFBUSxhQUFhLE9BQU8sY0FBYyxVQUFVLENBQUM7QUFDckQsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNELGNBQWMsY0FBYyxTQUFTO0FBQ2pDLFdBQU8sd0JBQXdCLDJCQUEyQixRQUFRLFdBQVcsY0FBYyxNQUFNLFlBQVksQ0FBQztBQUFBLEVBQ2pIO0FBQUEsRUFDRCxRQUFRLGNBQWMsU0FBUztBQUMzQixVQUFNLEVBQUUsVUFBWSxJQUFHO0FBQ3ZCLFVBQU0sWUFBWTtBQUNsQixTQUFLLGNBQWMsQ0FBQyxZQUFVO0FBQzFCLFlBQU0sV0FBVztBQUFBLFFBQ2IsUUFBUSxDQUFFO0FBQUEsUUFDVixPQUFPLENBQUU7QUFBQSxRQUNULE9BQU8sQ0FBRTtBQUFBLE1BQ3pCO0FBQ1ksWUFBTSxTQUFTLGtCQUFrQixXQUFXLE9BQU87QUFDbkQsbUJBQWEsU0FBUyxRQUFRLGNBQWMsMkJBQTJCLFFBQVEsZUFBZSxNQUFNLE9BQU8sQ0FBQyxDQUFDO0FBQzdHLG1CQUFhLFNBQVMsT0FBTywyQkFBMkIsUUFBUSxTQUFTLE1BQU0sT0FBTyxDQUFDO0FBQ3ZGLG1CQUFhLFNBQVMsT0FBTyxjQUFjLDJCQUEyQixRQUFRLGNBQWMsTUFBTSxPQUFPLENBQUMsQ0FBQztBQUMzRyxnQkFBVSxLQUFLLFFBQVE7QUFBQSxJQUNuQyxDQUFTO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNELGFBQWEsY0FBYyxTQUFTO0FBQ2hDLFdBQU8sd0JBQXdCLDJCQUEyQixRQUFRLFdBQVcsYUFBYSxNQUFNLFlBQVksQ0FBQztBQUFBLEVBQ2hIO0FBQUEsRUFDRCxVQUFVLGNBQWMsU0FBUztBQUM3QixVQUFNLEVBQUUsVUFBWSxJQUFHO0FBQ3ZCLFVBQU0sZUFBZSwyQkFBMkIsV0FBVyxnQkFBZ0IsTUFBTSxZQUFZO0FBQzdGLFVBQU0sU0FBUywyQkFBMkIsV0FBVyxVQUFVLE1BQU0sWUFBWTtBQUNqRixVQUFNLGNBQWMsMkJBQTJCLFdBQVcsZUFBZSxNQUFNLFlBQVk7QUFDM0YsUUFBSSxRQUFRO0FBQ1osWUFBUSxhQUFhLE9BQU8sY0FBYyxZQUFZLENBQUM7QUFDdkQsWUFBUSxhQUFhLE9BQU8sY0FBYyxNQUFNLENBQUM7QUFDakQsWUFBUSxhQUFhLE9BQU8sY0FBYyxXQUFXLENBQUM7QUFDdEQsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLGFBQWEsU0FBUztBQUNmLFVBQU0sU0FBUyxLQUFLO0FBQ3BCLFVBQU0sT0FBTyxLQUFLLE1BQU07QUFDeEIsVUFBTSxjQUFjO0FBQ3BCLFVBQU0sbUJBQW1CO0FBQ3pCLFVBQU0sa0JBQWtCO0FBQ3hCLFFBQUksZUFBZTtBQUNuQixRQUFJLEdBQUc7QUFDUCxTQUFJLElBQUksR0FBRyxNQUFNLE9BQU8sUUFBUSxJQUFJLEtBQUssRUFBRSxHQUFFO0FBQ3pDLG1CQUFhLEtBQUssa0JBQWtCLEtBQUssT0FBTyxPQUFPLEVBQUUsQ0FBQztBQUFBLElBQzdEO0FBQ0QsUUFBSSxRQUFRLFFBQVE7QUFDaEIscUJBQWUsYUFBYSxPQUFPLENBQUMsU0FBUyxPQUFPLFVBQVEsUUFBUSxPQUFPLFNBQVMsT0FBTyxPQUFPLElBQUksQ0FBQztBQUFBLElBQzFHO0FBQ0QsUUFBSSxRQUFRLFVBQVU7QUFDbEIscUJBQWUsYUFBYSxLQUFLLENBQUMsR0FBRyxNQUFJLFFBQVEsU0FBUyxHQUFHLEdBQUcsSUFBSSxDQUFDO0FBQUEsSUFDeEU7QUFDRCxTQUFLLGNBQWMsQ0FBQyxZQUFVO0FBQzFCLFlBQU0sU0FBUyxrQkFBa0IsUUFBUSxXQUFXLE9BQU87QUFDM0Qsa0JBQVksS0FBSywyQkFBMkIsUUFBUSxjQUFjLE1BQU0sT0FBTyxDQUFDO0FBQ2hGLHVCQUFpQixLQUFLLDJCQUEyQixRQUFRLG1CQUFtQixNQUFNLE9BQU8sQ0FBQztBQUMxRixzQkFBZ0IsS0FBSywyQkFBMkIsUUFBUSxrQkFBa0IsTUFBTSxPQUFPLENBQUM7QUFBQSxJQUNwRyxDQUFTO0FBQ0QsU0FBSyxjQUFjO0FBQ25CLFNBQUssbUJBQW1CO0FBQ3hCLFNBQUssa0JBQWtCO0FBQ3ZCLFNBQUssYUFBYTtBQUNsQixXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsT0FBTyxTQUFTLFFBQVE7QUFDcEIsVUFBTSxVQUFVLEtBQUssUUFBUSxXQUFXLEtBQUssV0FBVSxDQUFFO0FBQ3pELFVBQU0sU0FBUyxLQUFLO0FBQ3BCLFFBQUk7QUFDSixRQUFJLGVBQWU7QUFDbkIsUUFBSSxDQUFDLE9BQU8sUUFBUTtBQUNoQixVQUFJLEtBQUssWUFBWSxHQUFHO0FBQ3BCLHFCQUFhO0FBQUEsVUFDVCxTQUFTO0FBQUEsUUFDN0I7QUFBQSxNQUNhO0FBQUEsSUFDYixPQUFlO0FBQ0gsWUFBTSxXQUFXLFlBQVksUUFBUSxVQUFVLEtBQUssTUFBTSxRQUFRLEtBQUssY0FBYztBQUNyRixxQkFBZSxLQUFLLGFBQWEsT0FBTztBQUN4QyxXQUFLLFFBQVEsS0FBSyxTQUFTLGNBQWMsT0FBTztBQUNoRCxXQUFLLGFBQWEsS0FBSyxjQUFjLGNBQWMsT0FBTztBQUMxRCxXQUFLLE9BQU8sS0FBSyxRQUFRLGNBQWMsT0FBTztBQUM5QyxXQUFLLFlBQVksS0FBSyxhQUFhLGNBQWMsT0FBTztBQUN4RCxXQUFLLFNBQVMsS0FBSyxVQUFVLGNBQWMsT0FBTztBQUNsRCxZQUFNLE9BQU8sS0FBSyxRQUFRLGVBQWUsTUFBTSxPQUFPO0FBQ3RELFlBQU0sa0JBQWtCLE9BQU8sT0FBTyxJQUFJLFVBQVUsSUFBSTtBQUN4RCxZQUFNLFlBQVksbUJBQW1CLEtBQUssT0FBTyxTQUFTLGVBQWU7QUFDekUsWUFBTSxrQkFBa0IsbUJBQW1CLFNBQVMsaUJBQWlCLFdBQVcsS0FBSyxLQUFLO0FBQzFGLFdBQUssU0FBUyxVQUFVO0FBQ3hCLFdBQUssU0FBUyxVQUFVO0FBQ3hCLG1CQUFhO0FBQUEsUUFDVCxTQUFTO0FBQUEsUUFDVCxHQUFHLGdCQUFnQjtBQUFBLFFBQ25CLEdBQUcsZ0JBQWdCO0FBQUEsUUFDbkIsT0FBTyxLQUFLO0FBQUEsUUFDWixRQUFRLEtBQUs7QUFBQSxRQUNiLFFBQVEsU0FBUztBQUFBLFFBQ2pCLFFBQVEsU0FBUztBQUFBLE1BQ2pDO0FBQUEsSUFDUztBQUNELFNBQUssZ0JBQWdCO0FBQ3JCLFNBQUssV0FBVztBQUNoQixRQUFJLFlBQVk7QUFDWixXQUFLLG1CQUFvQixFQUFDLE9BQU8sTUFBTSxVQUFVO0FBQUEsSUFDcEQ7QUFDRCxRQUFJLFdBQVcsUUFBUSxVQUFVO0FBQzdCLGNBQVEsU0FBUyxLQUFLLE1BQU07QUFBQSxRQUN4QixPQUFPLEtBQUs7QUFBQSxRQUNaLFNBQVM7QUFBQSxRQUNUO0FBQUEsTUFDaEIsQ0FBYTtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFDRCxVQUFVLGNBQWMsS0FBSyxNQUFNLFNBQVM7QUFDeEMsVUFBTSxnQkFBZ0IsS0FBSyxpQkFBaUIsY0FBYyxNQUFNLE9BQU87QUFDdkUsUUFBSSxPQUFPLGNBQWMsSUFBSSxjQUFjLEVBQUU7QUFDN0MsUUFBSSxPQUFPLGNBQWMsSUFBSSxjQUFjLEVBQUU7QUFDN0MsUUFBSSxPQUFPLGNBQWMsSUFBSSxjQUFjLEVBQUU7QUFBQSxFQUNoRDtBQUFBLEVBQ0QsaUJBQWlCLGNBQWMsTUFBTSxTQUFTO0FBQzFDLFVBQU0sRUFBRSxRQUFTLE9BQVMsSUFBRztBQUM3QixVQUFNLEVBQUUsV0FBWSxhQUFlLElBQUc7QUFDdEMsVUFBTSxFQUFFLFNBQVUsVUFBVyxZQUFhLGdCQUFpQixjQUFjLFlBQVk7QUFDckYsVUFBTSxFQUFFLEdBQUcsS0FBTSxHQUFHLElBQUcsSUFBTTtBQUM3QixVQUFNLEVBQUUsT0FBUSxPQUFTLElBQUc7QUFDNUIsUUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUk7QUFDeEIsUUFBSSxXQUFXLFVBQVU7QUFDckIsV0FBSyxNQUFNLFNBQVM7QUFDcEIsVUFBSSxXQUFXLFFBQVE7QUFDbkIsYUFBSztBQUNMLGFBQUssS0FBSztBQUNWLGFBQUssS0FBSztBQUNWLGFBQUssS0FBSztBQUFBLE1BQzFCLE9BQW1CO0FBQ0gsYUFBSyxNQUFNO0FBQ1gsYUFBSyxLQUFLO0FBQ1YsYUFBSyxLQUFLO0FBQ1YsYUFBSyxLQUFLO0FBQUEsTUFDYjtBQUNELFdBQUs7QUFBQSxJQUNqQixPQUFlO0FBQ0gsVUFBSSxXQUFXLFFBQVE7QUFDbkIsYUFBSyxNQUFNLEtBQUssSUFBSSxTQUFTLFVBQVUsSUFBSTtBQUFBLE1BQzNELFdBQXVCLFdBQVcsU0FBUztBQUMzQixhQUFLLE1BQU0sUUFBUSxLQUFLLElBQUksVUFBVSxXQUFXLElBQUk7QUFBQSxNQUNyRSxPQUFtQjtBQUNILGFBQUssS0FBSztBQUFBLE1BQ2I7QUFDRCxVQUFJLFdBQVcsT0FBTztBQUNsQixhQUFLO0FBQ0wsYUFBSyxLQUFLO0FBQ1YsYUFBSyxLQUFLO0FBQ1YsYUFBSyxLQUFLO0FBQUEsTUFDMUIsT0FBbUI7QUFDSCxhQUFLLE1BQU07QUFDWCxhQUFLLEtBQUs7QUFDVixhQUFLLEtBQUs7QUFDVixhQUFLLEtBQUs7QUFBQSxNQUNiO0FBQ0QsV0FBSztBQUFBLElBQ1I7QUFDRCxXQUFPO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDWjtBQUFBLEVBQ0s7QUFBQSxFQUNELFVBQVUsSUFBSSxLQUFLLFNBQVM7QUFDeEIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxTQUFTLE1BQU07QUFDckIsUUFBSSxXQUFXLGNBQWM7QUFDN0IsUUFBSSxRQUFRO0FBQ1IsWUFBTSxZQUFZLGNBQWMsUUFBUSxLQUFLLEtBQUssR0FBRyxLQUFLLEtBQUs7QUFDL0QsU0FBRyxJQUFJLFlBQVksTUFBTSxRQUFRLFlBQVksT0FBTztBQUNwRCxVQUFJLFlBQVksVUFBVSxVQUFVLFFBQVEsVUFBVTtBQUN0RCxVQUFJLGVBQWU7QUFDbkIsa0JBQVksT0FBTyxRQUFRLFNBQVM7QUFDcEMscUJBQWUsUUFBUTtBQUN2QixVQUFJLFlBQVksUUFBUTtBQUN4QixVQUFJLE9BQU8sVUFBVTtBQUNyQixXQUFJLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxHQUFFO0FBQ3ZCLFlBQUksU0FBUyxNQUFNLElBQUksVUFBVSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxVQUFVLGFBQWEsQ0FBQztBQUN6RSxXQUFHLEtBQUssVUFBVSxhQUFhO0FBQy9CLFlBQUksSUFBSSxNQUFNLFFBQVE7QUFDbEIsYUFBRyxLQUFLLFFBQVEsb0JBQW9CO0FBQUEsUUFDdkM7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFBQSxFQUNKLGNBQWMsS0FBSyxJQUFJLEdBQUcsV0FBVyxTQUFTO0FBQ3ZDLFVBQU0sY0FBYyxLQUFLLFlBQVk7QUFDckMsVUFBTSxrQkFBa0IsS0FBSyxpQkFBaUI7QUFDOUMsVUFBTSxFQUFFLFdBQVksVUFBVyxXQUFVLElBQU07QUFDL0MsVUFBTSxXQUFXLE9BQU8sUUFBUSxRQUFRO0FBQ3hDLFVBQU0sU0FBUyxZQUFZLE1BQU0sUUFBUSxPQUFPO0FBQ2hELFVBQU0sWUFBWSxVQUFVLEVBQUUsTUFBTTtBQUNwQyxVQUFNLFVBQVUsWUFBWSxTQUFTLGNBQWMsU0FBUyxhQUFhLGFBQWEsSUFBSTtBQUMxRixVQUFNLFNBQVMsR0FBRyxJQUFJO0FBQ3RCLFFBQUksUUFBUSxlQUFlO0FBQ3ZCLFlBQU0sY0FBYztBQUFBLFFBQ2hCLFFBQVEsS0FBSyxJQUFJLFVBQVUsU0FBUyxJQUFJO0FBQUEsUUFDeEMsWUFBWSxnQkFBZ0I7QUFBQSxRQUM1QixVQUFVLGdCQUFnQjtBQUFBLFFBQzFCLGFBQWE7QUFBQSxNQUM3QjtBQUNZLFlBQU0sVUFBVSxVQUFVLFdBQVcsV0FBVyxRQUFRLElBQUksV0FBVztBQUN2RSxZQUFNLFVBQVUsU0FBUyxZQUFZO0FBQ3JDLFVBQUksY0FBYyxRQUFRO0FBQzFCLFVBQUksWUFBWSxRQUFRO0FBQ3hCLGdCQUFVLEtBQUssYUFBYSxTQUFTLE9BQU87QUFDNUMsVUFBSSxjQUFjLFlBQVk7QUFDOUIsVUFBSSxZQUFZLFlBQVk7QUFDNUIsZ0JBQVUsS0FBSyxhQUFhLFNBQVMsT0FBTztBQUFBLElBQ3hELE9BQWU7QUFDSCxVQUFJLFlBQVksU0FBUyxZQUFZLFdBQVcsSUFBSSxLQUFLLElBQUksR0FBRyxPQUFPLE9BQU8sWUFBWSxXQUFXLENBQUMsSUFBSSxZQUFZLGVBQWU7QUFDckksVUFBSSxjQUFjLFlBQVk7QUFDOUIsVUFBSSxZQUFZLFlBQVksY0FBYyxDQUFFO0FBQzVDLFVBQUksaUJBQWlCLFlBQVksb0JBQW9CO0FBQ3JELFlBQU0sU0FBUyxVQUFVLFdBQVcsV0FBVyxXQUFXLFVBQVU7QUFDcEUsWUFBTSxTQUFTLFVBQVUsV0FBVyxVQUFVLE1BQU0sV0FBVyxDQUFDLEdBQUcsV0FBVyxhQUFhLENBQUM7QUFDNUYsWUFBTSxlQUFlLGNBQWMsWUFBWSxZQUFZO0FBQzNELFVBQUksT0FBTyxPQUFPLFlBQVksRUFBRSxLQUFLLENBQUMsTUFBSSxNQUFNLENBQUMsR0FBRztBQUNoRCxZQUFJLFVBQVM7QUFDYixZQUFJLFlBQVksUUFBUTtBQUN4QiwyQkFBbUIsS0FBSztBQUFBLFVBQ3BCLEdBQUc7QUFBQSxVQUNILEdBQUc7QUFBQSxVQUNILEdBQUc7QUFBQSxVQUNILEdBQUc7QUFBQSxVQUNILFFBQVE7QUFBQSxRQUM1QixDQUFpQjtBQUNELFlBQUksS0FBSTtBQUNSLFlBQUksT0FBTTtBQUNWLFlBQUksWUFBWSxZQUFZO0FBQzVCLFlBQUksVUFBUztBQUNiLDJCQUFtQixLQUFLO0FBQUEsVUFDcEIsR0FBRztBQUFBLFVBQ0gsR0FBRyxTQUFTO0FBQUEsVUFDWixHQUFHLFdBQVc7QUFBQSxVQUNkLEdBQUcsWUFBWTtBQUFBLFVBQ2YsUUFBUTtBQUFBLFFBQzVCLENBQWlCO0FBQ0QsWUFBSSxLQUFJO0FBQUEsTUFDeEIsT0FBbUI7QUFDSCxZQUFJLFlBQVksUUFBUTtBQUN4QixZQUFJLFNBQVMsUUFBUSxRQUFRLFVBQVUsU0FBUztBQUNoRCxZQUFJLFdBQVcsUUFBUSxRQUFRLFVBQVUsU0FBUztBQUNsRCxZQUFJLFlBQVksWUFBWTtBQUM1QixZQUFJLFNBQVMsUUFBUSxTQUFTLEdBQUcsV0FBVyxHQUFHLFlBQVksQ0FBQztBQUFBLE1BQy9EO0FBQUEsSUFDSjtBQUNELFFBQUksWUFBWSxLQUFLLGdCQUFnQjtBQUFBLEVBQ3hDO0FBQUEsRUFDRCxTQUFTLElBQUksS0FBSyxTQUFTO0FBQ3ZCLFVBQU0sRUFBRSxLQUFPLElBQUc7QUFDbEIsVUFBTSxFQUFFLGFBQWMsV0FBWSxlQUFnQixXQUFZLFVBQVcsV0FBYSxJQUFHO0FBQ3pGLFVBQU0sV0FBVyxPQUFPLFFBQVEsUUFBUTtBQUN4QyxRQUFJLGlCQUFpQixTQUFTO0FBQzlCLFFBQUksZUFBZTtBQUNuQixVQUFNLFlBQVksY0FBYyxRQUFRLEtBQUssS0FBSyxHQUFHLEtBQUssS0FBSztBQUMvRCxVQUFNLGlCQUFpQixTQUFTLE1BQU07QUFDbEMsVUFBSSxTQUFTLE1BQU0sVUFBVSxFQUFFLEdBQUcsSUFBSSxZQUFZLEdBQUcsR0FBRyxJQUFJLGlCQUFpQixDQUFDO0FBQzlFLFNBQUcsS0FBSyxpQkFBaUI7QUFBQSxJQUNyQztBQUNRLFVBQU0sMEJBQTBCLFVBQVUsVUFBVSxTQUFTO0FBQzdELFFBQUksVUFBVSxXQUFXLE9BQU8sR0FBRyxHQUFHLE1BQU07QUFDNUMsUUFBSSxZQUFZO0FBQ2hCLFFBQUksZUFBZTtBQUNuQixRQUFJLE9BQU8sU0FBUztBQUNwQixPQUFHLElBQUksWUFBWSxNQUFNLHlCQUF5QixPQUFPO0FBQ3pELFFBQUksWUFBWSxRQUFRO0FBQ3hCLFNBQUssS0FBSyxZQUFZLGNBQWM7QUFDcEMsbUJBQWUsaUJBQWlCLDRCQUE0QixVQUFVLGNBQWMsV0FBVyxXQUFXLElBQUksYUFBYSxXQUFXLElBQUksYUFBYTtBQUN2SixTQUFJLElBQUksR0FBRyxPQUFPLEtBQUssUUFBUSxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQ3pDLGlCQUFXLEtBQUs7QUFDaEIsa0JBQVksS0FBSyxnQkFBZ0I7QUFDakMsVUFBSSxZQUFZO0FBQ2hCLFdBQUssU0FBUyxRQUFRLGNBQWM7QUFDcEMsY0FBUSxTQUFTO0FBQ2pCLFVBQUksaUJBQWlCLE1BQU0sUUFBUTtBQUMvQixhQUFLLGNBQWMsS0FBSyxJQUFJLEdBQUcsV0FBVyxPQUFPO0FBQ2pELHlCQUFpQixLQUFLLElBQUksU0FBUyxZQUFZLFNBQVM7QUFBQSxNQUMzRDtBQUNELFdBQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDMUMsdUJBQWUsTUFBTSxFQUFFO0FBQ3ZCLHlCQUFpQixTQUFTO0FBQUEsTUFDN0I7QUFDRCxXQUFLLFNBQVMsT0FBTyxjQUFjO0FBQUEsSUFDdEM7QUFDRCxtQkFBZTtBQUNmLHFCQUFpQixTQUFTO0FBQzFCLFNBQUssS0FBSyxXQUFXLGNBQWM7QUFDbkMsT0FBRyxLQUFLO0FBQUEsRUFDWDtBQUFBLEVBQ0QsV0FBVyxJQUFJLEtBQUssU0FBUztBQUN6QixVQUFNLFNBQVMsS0FBSztBQUNwQixVQUFNLFNBQVMsT0FBTztBQUN0QixRQUFJLFlBQVk7QUFDaEIsUUFBSSxRQUFRO0FBQ1IsWUFBTSxZQUFZLGNBQWMsUUFBUSxLQUFLLEtBQUssR0FBRyxLQUFLLEtBQUs7QUFDL0QsU0FBRyxJQUFJLFlBQVksTUFBTSxRQUFRLGFBQWEsT0FBTztBQUNyRCxTQUFHLEtBQUssUUFBUTtBQUNoQixVQUFJLFlBQVksVUFBVSxVQUFVLFFBQVEsV0FBVztBQUN2RCxVQUFJLGVBQWU7QUFDbkIsbUJBQWEsT0FBTyxRQUFRLFVBQVU7QUFDdEMsVUFBSSxZQUFZLFFBQVE7QUFDeEIsVUFBSSxPQUFPLFdBQVc7QUFDdEIsV0FBSSxJQUFJLEdBQUcsSUFBSSxRQUFRLEVBQUUsR0FBRTtBQUN2QixZQUFJLFNBQVMsT0FBTyxJQUFJLFVBQVUsRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLElBQUksV0FBVyxhQUFhLENBQUM7QUFDM0UsV0FBRyxLQUFLLFdBQVcsYUFBYSxRQUFRO0FBQUEsTUFDM0M7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUFBLEVBQ0QsZUFBZSxJQUFJLEtBQUssYUFBYSxTQUFTO0FBQzFDLFVBQU0sRUFBRSxRQUFTLE9BQVMsSUFBRztBQUM3QixVQUFNLEVBQUUsR0FBSSxFQUFJLElBQUc7QUFDbkIsVUFBTSxFQUFFLE9BQVEsT0FBUyxJQUFHO0FBQzVCLFVBQU0sRUFBRSxTQUFVLFVBQVcsWUFBYSxZQUFXLElBQU0sY0FBYyxRQUFRLFlBQVk7QUFDN0YsUUFBSSxZQUFZLFFBQVE7QUFDeEIsUUFBSSxjQUFjLFFBQVE7QUFDMUIsUUFBSSxZQUFZLFFBQVE7QUFDeEIsUUFBSSxVQUFTO0FBQ2IsUUFBSSxPQUFPLElBQUksU0FBUyxDQUFDO0FBQ3pCLFFBQUksV0FBVyxPQUFPO0FBQ2xCLFdBQUssVUFBVSxJQUFJLEtBQUssYUFBYSxPQUFPO0FBQUEsSUFDL0M7QUFDRCxRQUFJLE9BQU8sSUFBSSxRQUFRLFVBQVUsQ0FBQztBQUNsQyxRQUFJLGlCQUFpQixJQUFJLE9BQU8sR0FBRyxJQUFJLE9BQU8sSUFBSSxRQUFRO0FBQzFELFFBQUksV0FBVyxZQUFZLFdBQVcsU0FBUztBQUMzQyxXQUFLLFVBQVUsSUFBSSxLQUFLLGFBQWEsT0FBTztBQUFBLElBQy9DO0FBQ0QsUUFBSSxPQUFPLElBQUksT0FBTyxJQUFJLFNBQVMsV0FBVztBQUM5QyxRQUFJLGlCQUFpQixJQUFJLE9BQU8sSUFBSSxRQUFRLElBQUksUUFBUSxhQUFhLElBQUksTUFBTTtBQUMvRSxRQUFJLFdBQVcsVUFBVTtBQUNyQixXQUFLLFVBQVUsSUFBSSxLQUFLLGFBQWEsT0FBTztBQUFBLElBQy9DO0FBQ0QsUUFBSSxPQUFPLElBQUksWUFBWSxJQUFJLE1BQU07QUFDckMsUUFBSSxpQkFBaUIsR0FBRyxJQUFJLFFBQVEsR0FBRyxJQUFJLFNBQVMsVUFBVTtBQUM5RCxRQUFJLFdBQVcsWUFBWSxXQUFXLFFBQVE7QUFDMUMsV0FBSyxVQUFVLElBQUksS0FBSyxhQUFhLE9BQU87QUFBQSxJQUMvQztBQUNELFFBQUksT0FBTyxHQUFHLElBQUksT0FBTztBQUN6QixRQUFJLGlCQUFpQixHQUFHLEdBQUcsSUFBSSxTQUFTLENBQUM7QUFDekMsUUFBSSxVQUFTO0FBQ2IsUUFBSSxLQUFJO0FBQ1IsUUFBSSxRQUFRLGNBQWMsR0FBRztBQUN6QixVQUFJLE9BQU07QUFBQSxJQUNiO0FBQUEsRUFDSjtBQUFBLEVBQ0osdUJBQXVCLFNBQVM7QUFDekIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBTSxRQUFRLFNBQVMsTUFBTTtBQUM3QixVQUFNLFFBQVEsU0FBUyxNQUFNO0FBQzdCLFFBQUksU0FBUyxPQUFPO0FBQ2hCLFlBQU0sV0FBVyxZQUFZLFFBQVEsVUFBVSxLQUFLLE1BQU0sS0FBSyxTQUFTLEtBQUssY0FBYztBQUMzRixVQUFJLENBQUMsVUFBVTtBQUNYO0FBQUEsTUFDSDtBQUNELFlBQU0sT0FBTyxLQUFLLFFBQVEsZUFBZSxNQUFNLE9BQU87QUFDdEQsWUFBTSxrQkFBa0IsT0FBTyxPQUFPLENBQUUsR0FBRSxVQUFVLEtBQUssS0FBSztBQUM5RCxZQUFNLFlBQVksbUJBQW1CLE9BQU8sU0FBUyxlQUFlO0FBQ3BFLFlBQU0sUUFBUSxtQkFBbUIsU0FBUyxpQkFBaUIsV0FBVyxLQUFLO0FBQzNFLFVBQUksTUFBTSxRQUFRLE1BQU0sS0FBSyxNQUFNLFFBQVEsTUFBTSxHQUFHO0FBQ2hELGFBQUssU0FBUyxVQUFVO0FBQ3hCLGFBQUssU0FBUyxVQUFVO0FBQ3hCLGFBQUssUUFBUSxLQUFLO0FBQ2xCLGFBQUssU0FBUyxLQUFLO0FBQ25CLGFBQUssU0FBUyxTQUFTO0FBQ3ZCLGFBQUssU0FBUyxTQUFTO0FBQ3ZCLGFBQUssbUJBQW9CLEVBQUMsT0FBTyxNQUFNLEtBQUs7QUFBQSxNQUMvQztBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFDSixjQUFjO0FBQ1AsV0FBTyxDQUFDLENBQUMsS0FBSztBQUFBLEVBQ2pCO0FBQUEsRUFDRCxLQUFLLEtBQUs7QUFDTixVQUFNLFVBQVUsS0FBSyxRQUFRLFdBQVcsS0FBSyxXQUFVLENBQUU7QUFDekQsUUFBSSxVQUFVLEtBQUs7QUFDbkIsUUFBSSxDQUFDLFNBQVM7QUFDVjtBQUFBLElBQ0g7QUFDRCxTQUFLLHVCQUF1QixPQUFPO0FBQ25DLFVBQU0sY0FBYztBQUFBLE1BQ2hCLE9BQU8sS0FBSztBQUFBLE1BQ1osUUFBUSxLQUFLO0FBQUEsSUFDekI7QUFDUSxVQUFNLEtBQUs7QUFBQSxNQUNQLEdBQUcsS0FBSztBQUFBLE1BQ1IsR0FBRyxLQUFLO0FBQUEsSUFDcEI7QUFDUSxjQUFVLEtBQUssSUFBSSxPQUFPLElBQUksT0FBTyxJQUFJO0FBQ3pDLFVBQU0sVUFBVSxVQUFVLFFBQVEsT0FBTztBQUN6QyxVQUFNLG9CQUFvQixLQUFLLE1BQU0sVUFBVSxLQUFLLFdBQVcsVUFBVSxLQUFLLEtBQUssVUFBVSxLQUFLLFVBQVUsVUFBVSxLQUFLLE9BQU87QUFDbEksUUFBSSxRQUFRLFdBQVcsbUJBQW1CO0FBQ3RDLFVBQUksS0FBSTtBQUNSLFVBQUksY0FBYztBQUNsQixXQUFLLGVBQWUsSUFBSSxLQUFLLGFBQWEsT0FBTztBQUNqRCw0QkFBc0IsS0FBSyxRQUFRLGFBQWE7QUFDaEQsU0FBRyxLQUFLLFFBQVE7QUFDaEIsV0FBSyxVQUFVLElBQUksS0FBSyxPQUFPO0FBQy9CLFdBQUssU0FBUyxJQUFJLEtBQUssT0FBTztBQUM5QixXQUFLLFdBQVcsSUFBSSxLQUFLLE9BQU87QUFDaEMsMkJBQXFCLEtBQUssUUFBUSxhQUFhO0FBQy9DLFVBQUksUUFBTztBQUFBLElBQ2Q7QUFBQSxFQUNKO0FBQUEsRUFDSixvQkFBb0I7QUFDYixXQUFPLEtBQUssV0FBVztFQUMxQjtBQUFBLEVBQ0osa0JBQWtCLGdCQUFnQixlQUFlO0FBQzFDLFVBQU0sYUFBYSxLQUFLO0FBQ3hCLFVBQU0sU0FBUyxlQUFlLElBQUksQ0FBQyxFQUFFLGNBQWUsWUFBVztBQUMzRCxZQUFNLE9BQU8sS0FBSyxNQUFNLGVBQWUsWUFBWTtBQUNuRCxVQUFJLENBQUMsTUFBTTtBQUNQLGNBQU0sSUFBSSxNQUFNLG9DQUFvQyxZQUFZO0FBQUEsTUFDbkU7QUFDRCxhQUFPO0FBQUEsUUFDSDtBQUFBLFFBQ0EsU0FBUyxLQUFLLEtBQUs7QUFBQSxRQUNuQjtBQUFBLE1BQ2hCO0FBQUEsSUFDQSxDQUFTO0FBQ0QsVUFBTSxVQUFVLENBQUMsZUFBZSxZQUFZLE1BQU07QUFDbEQsVUFBTSxrQkFBa0IsS0FBSyxpQkFBaUIsUUFBUSxhQUFhO0FBQ25FLFFBQUksV0FBVyxpQkFBaUI7QUFDNUIsV0FBSyxVQUFVO0FBQ2YsV0FBSyxpQkFBaUI7QUFDdEIsV0FBSyxzQkFBc0I7QUFDM0IsV0FBSyxPQUFPLElBQUk7QUFBQSxJQUNuQjtBQUFBLEVBQ0o7QUFBQSxFQUNKLFlBQVksR0FBRyxRQUFRLGNBQWMsTUFBTTtBQUNwQyxRQUFJLFVBQVUsS0FBSyxxQkFBcUI7QUFDcEMsYUFBTztBQUFBLElBQ1Y7QUFDRCxTQUFLLHNCQUFzQjtBQUMzQixVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFNLGFBQWEsS0FBSyxXQUFXO0FBQ25DLFVBQU0sU0FBUyxLQUFLLG1CQUFtQixHQUFHLFlBQVksUUFBUSxXQUFXO0FBQ3pFLFVBQU0sa0JBQWtCLEtBQUssaUJBQWlCLFFBQVEsQ0FBQztBQUN2RCxVQUFNLFVBQVUsVUFBVSxDQUFDLGVBQWUsUUFBUSxVQUFVLEtBQUs7QUFDakUsUUFBSSxTQUFTO0FBQ1QsV0FBSyxVQUFVO0FBQ2YsVUFBSSxRQUFRLFdBQVcsUUFBUSxVQUFVO0FBQ3JDLGFBQUssaUJBQWlCO0FBQUEsVUFDbEIsR0FBRyxFQUFFO0FBQUEsVUFDTCxHQUFHLEVBQUU7QUFBQSxRQUN6QjtBQUNnQixhQUFLLE9BQU8sTUFBTSxNQUFNO0FBQUEsTUFDM0I7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLG1CQUFtQixHQUFHLFlBQVksUUFBUSxhQUFhO0FBQ2hELFVBQU0sVUFBVSxLQUFLO0FBQ3JCLFFBQUksRUFBRSxTQUFTLFlBQVk7QUFDdkIsYUFBTztJQUNWO0FBQ0QsUUFBSSxDQUFDLGFBQWE7QUFDZCxhQUFPO0FBQUEsSUFDVjtBQUNELFVBQU0sU0FBUyxLQUFLLE1BQU0sMEJBQTBCLEdBQUcsUUFBUSxNQUFNLFNBQVMsTUFBTTtBQUNwRixRQUFJLFFBQVEsU0FBUztBQUNqQixhQUFPLFFBQU87QUFBQSxJQUNqQjtBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixpQkFBaUIsUUFBUSxHQUFHO0FBQ3JCLFVBQU0sRUFBRSxRQUFTLFFBQVMsUUFBTyxJQUFNO0FBQ3ZDLFVBQU0sV0FBVyxZQUFZLFFBQVEsVUFBVSxLQUFLLE1BQU0sUUFBUSxDQUFDO0FBQ25FLFdBQU8sYUFBYSxVQUFVLFdBQVcsU0FBUyxLQUFLLFdBQVcsU0FBUztBQUFBLEVBQzlFO0FBQ0w7QUEzaEJDLGNBREssU0FDRSxlQUFjO0FBNGhCdEIsSUFBSSxpQkFBaUI7QUFBQSxFQUNqQixJQUFJO0FBQUEsRUFDSixVQUFVO0FBQUEsRUFDVjtBQUFBLEVBQ0EsVUFBVyxPQUFPLE9BQU8sU0FBUztBQUM5QixRQUFJLFNBQVM7QUFDVCxZQUFNLFVBQVUsSUFBSSxRQUFRO0FBQUEsUUFDeEI7QUFBQSxRQUNBO0FBQUEsTUFDaEIsQ0FBYTtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFDRCxhQUFjLE9BQU8sT0FBTyxTQUFTO0FBQ2pDLFFBQUksTUFBTSxTQUFTO0FBQ2YsWUFBTSxRQUFRLFdBQVcsT0FBTztBQUFBLElBQ25DO0FBQUEsRUFDSjtBQUFBLEVBQ0QsTUFBTyxPQUFPLE9BQU8sU0FBUztBQUMxQixRQUFJLE1BQU0sU0FBUztBQUNmLFlBQU0sUUFBUSxXQUFXLE9BQU87QUFBQSxJQUNuQztBQUFBLEVBQ0o7QUFBQSxFQUNELFVBQVcsT0FBTztBQUNkLFVBQU0sVUFBVSxNQUFNO0FBQ3RCLFFBQUksV0FBVyxRQUFRLGVBQWU7QUFDbEMsWUFBTSxPQUFPO0FBQUEsUUFDVDtBQUFBLE1BQ2hCO0FBQ1ksVUFBSSxNQUFNLGNBQWMscUJBQXFCO0FBQUEsUUFDekMsR0FBRztBQUFBLFFBQ0gsWUFBWTtBQUFBLE1BQ2YsT0FBTSxPQUFPO0FBQ1Y7QUFBQSxNQUNIO0FBQ0QsY0FBUSxLQUFLLE1BQU0sR0FBRztBQUN0QixZQUFNLGNBQWMsb0JBQW9CLElBQUk7QUFBQSxJQUMvQztBQUFBLEVBQ0o7QUFBQSxFQUNELFdBQVksT0FBTyxNQUFNO0FBQ3JCLFFBQUksTUFBTSxTQUFTO0FBQ2YsWUFBTSxtQkFBbUIsS0FBSztBQUM5QixVQUFJLE1BQU0sUUFBUSxZQUFZLEtBQUssT0FBTyxrQkFBa0IsS0FBSyxXQUFXLEdBQUc7QUFDM0UsYUFBSyxVQUFVO0FBQUEsTUFDbEI7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUFBLEVBQ0QsVUFBVTtBQUFBLElBQ04sU0FBUztBQUFBLElBQ1QsVUFBVTtBQUFBLElBQ1YsVUFBVTtBQUFBLElBQ1YsaUJBQWlCO0FBQUEsSUFDakIsWUFBWTtBQUFBLElBQ1osV0FBVztBQUFBLE1BQ1AsUUFBUTtBQUFBLElBQ1g7QUFBQSxJQUNELGNBQWM7QUFBQSxJQUNkLG1CQUFtQjtBQUFBLElBQ25CLFlBQVk7QUFBQSxJQUNaLFdBQVc7QUFBQSxJQUNYLGFBQWE7QUFBQSxJQUNiLFVBQVUsQ0FBRTtBQUFBLElBQ1osV0FBVztBQUFBLElBQ1gsYUFBYTtBQUFBLElBQ2IsZUFBZTtBQUFBLElBQ2YsaUJBQWlCO0FBQUEsSUFDakIsWUFBWTtBQUFBLE1BQ1IsUUFBUTtBQUFBLElBQ1g7QUFBQSxJQUNELGFBQWE7QUFBQSxJQUNiLFNBQVM7QUFBQSxJQUNULGNBQWM7QUFBQSxJQUNkLFdBQVc7QUFBQSxJQUNYLGNBQWM7QUFBQSxJQUNkLFdBQVcsQ0FBQyxLQUFLLFNBQU8sS0FBSyxTQUFTO0FBQUEsSUFDdEMsVUFBVSxDQUFDLEtBQUssU0FBTyxLQUFLLFNBQVM7QUFBQSxJQUNyQyxvQkFBb0I7QUFBQSxJQUNwQixlQUFlO0FBQUEsSUFDZixZQUFZO0FBQUEsSUFDWixhQUFhO0FBQUEsSUFDYixhQUFhO0FBQUEsSUFDYixXQUFXO0FBQUEsTUFDUCxVQUFVO0FBQUEsTUFDVixRQUFRO0FBQUEsSUFDWDtBQUFBLElBQ0QsWUFBWTtBQUFBLE1BQ1IsU0FBUztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sWUFBWTtBQUFBLFVBQ1I7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBLFFBQ0g7QUFBQSxNQUNKO0FBQUEsTUFDRCxTQUFTO0FBQUEsUUFDTCxRQUFRO0FBQUEsUUFDUixVQUFVO0FBQUEsTUFDYjtBQUFBLElBQ0o7QUFBQSxJQUNELFdBQVc7QUFBQSxFQUNkO0FBQUEsRUFDRCxlQUFlO0FBQUEsSUFDWCxVQUFVO0FBQUEsSUFDVixZQUFZO0FBQUEsSUFDWixXQUFXO0FBQUEsRUFDZDtBQUFBLEVBQ0QsYUFBYTtBQUFBLElBQ1QsYUFBYSxDQUFDQSxVQUFPQSxVQUFTLFlBQVlBLFVBQVMsY0FBY0EsVUFBUztBQUFBLElBQzFFLFlBQVk7QUFBQSxJQUNaLFdBQVc7QUFBQSxNQUNQLGFBQWE7QUFBQSxNQUNiLFlBQVk7QUFBQSxJQUNmO0FBQUEsSUFDRCxXQUFXO0FBQUEsTUFDUCxXQUFXO0FBQUEsSUFDZDtBQUFBLElBQ0QsWUFBWTtBQUFBLE1BQ1IsV0FBVztBQUFBLElBQ2Q7QUFBQSxFQUNKO0FBQUEsRUFDRCx3QkFBd0I7QUFBQSxJQUNwQjtBQUFBLEVBQ0g7QUFDTDtBQWFBLE1BQU0sY0FBYyxDQUFDLFFBQVEsS0FBSyxPQUFPLGdCQUFjO0FBQ25ELE1BQUksT0FBTyxRQUFRLFVBQVU7QUFDekIsWUFBUSxPQUFPLEtBQUssR0FBRyxJQUFJO0FBQzNCLGdCQUFZLFFBQVE7QUFBQSxNQUNoQjtBQUFBLE1BQ0EsT0FBTztBQUFBLElBQ25CLENBQVM7QUFBQSxFQUNULFdBQWUsTUFBTSxHQUFHLEdBQUc7QUFDbkIsWUFBUTtBQUFBLEVBQ1g7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLGVBQWUsUUFBUSxLQUFLLE9BQU8sYUFBYTtBQUNyRCxRQUFNLFFBQVEsT0FBTyxRQUFRLEdBQUc7QUFDaEMsTUFBSSxVQUFVLElBQUk7QUFDZCxXQUFPLFlBQVksUUFBUSxLQUFLLE9BQU8sV0FBVztBQUFBLEVBQ3JEO0FBQ0QsUUFBTSxPQUFPLE9BQU8sWUFBWSxHQUFHO0FBQ25DLFNBQU8sVUFBVSxPQUFPLFFBQVE7QUFDcEM7QUFDQSxNQUFNLGFBQWEsQ0FBQyxPQUFPLFFBQU0sVUFBVSxPQUFPLE9BQU8sWUFBWSxLQUFLLE1BQU0sS0FBSyxHQUFHLEdBQUcsR0FBRztBQUM5RixTQUFTLGtCQUFrQixPQUFPO0FBQzlCLFFBQU0sU0FBUyxLQUFLO0FBQ3BCLE1BQUksU0FBUyxLQUFLLFFBQVEsT0FBTyxRQUFRO0FBQ3JDLFdBQU8sT0FBTztBQUFBLEVBQ2pCO0FBQ0QsU0FBTztBQUNYO0FBQ0EsTUFBTSxzQkFBc0IsTUFBTTtBQUFBLEVBTzlCLFlBQVksS0FBSTtBQUNaLFVBQU0sR0FBRztBQUNSLFNBQUssY0FBYztBQUNwQixTQUFLLGNBQWM7QUFDbkIsU0FBSyxlQUFlO0VBQ3ZCO0FBQUEsRUFDRCxLQUFLLGNBQWM7QUFDZixVQUFNLFFBQVEsS0FBSztBQUNuQixRQUFJLE1BQU0sUUFBUTtBQUNkLFlBQU0sU0FBUyxLQUFLO0FBQ3BCLGlCQUFXLEVBQUUsT0FBUSxNQUFLLEtBQU8sT0FBTTtBQUNuQyxZQUFJLE9BQU8sV0FBVyxPQUFPO0FBQ3pCLGlCQUFPLE9BQU8sT0FBTyxDQUFDO0FBQUEsUUFDekI7QUFBQSxNQUNKO0FBQ0QsV0FBSyxlQUFlO0lBQ3ZCO0FBQ0QsVUFBTSxLQUFLLFlBQVk7QUFBQSxFQUMxQjtBQUFBLEVBQ0QsTUFBTSxLQUFLLE9BQU87QUFDZCxRQUFJLGNBQWMsR0FBRyxHQUFHO0FBQ3BCLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxTQUFTLEtBQUs7QUFDcEIsWUFBUSxTQUFTLEtBQUssS0FBSyxPQUFPLFdBQVcsTUFBTSxRQUFRLGVBQWUsUUFBUSxLQUFLLGVBQWUsT0FBTyxHQUFHLEdBQUcsS0FBSyxZQUFZO0FBQ3BJLFdBQU8sV0FBVyxPQUFPLE9BQU8sU0FBUyxDQUFDO0FBQUEsRUFDN0M7QUFBQSxFQUNELHNCQUFzQjtBQUNsQixVQUFNLEVBQUUsWUFBYSxXQUFhLElBQUcsS0FBSyxjQUFhO0FBQ3ZELFFBQUksRUFBRSxLQUFNLElBQUcsSUFBTSxLQUFLLFVBQVUsSUFBSTtBQUN4QyxRQUFJLEtBQUssUUFBUSxXQUFXLFNBQVM7QUFDakMsVUFBSSxDQUFDLFlBQVk7QUFDYixjQUFNO0FBQUEsTUFDVDtBQUNELFVBQUksQ0FBQyxZQUFZO0FBQ2IsY0FBTSxLQUFLLFlBQVksU0FBUztBQUFBLE1BQ25DO0FBQUEsSUFDSjtBQUNELFNBQUssTUFBTTtBQUNYLFNBQUssTUFBTTtBQUFBLEVBQ2Q7QUFBQSxFQUNELGFBQWE7QUFDVCxVQUFNLE1BQU0sS0FBSztBQUNqQixVQUFNLE1BQU0sS0FBSztBQUNqQixVQUFNLFNBQVMsS0FBSyxRQUFRO0FBQzVCLFVBQU0sUUFBUTtBQUNkLFFBQUksU0FBUyxLQUFLO0FBQ2xCLGFBQVMsUUFBUSxLQUFLLFFBQVEsT0FBTyxTQUFTLElBQUksU0FBUyxPQUFPLE1BQU0sS0FBSyxNQUFNLENBQUM7QUFDcEYsU0FBSyxjQUFjLEtBQUssSUFBSSxPQUFPLFVBQVUsU0FBUyxJQUFJLElBQUksQ0FBQztBQUMvRCxTQUFLLGNBQWMsS0FBSyxPQUFPLFNBQVMsTUFBTTtBQUM5QyxhQUFRLFFBQVEsS0FBSyxTQUFTLEtBQUssU0FBUTtBQUN2QyxZQUFNLEtBQUs7QUFBQSxRQUNQO0FBQUEsTUFDaEIsQ0FBYTtBQUFBLElBQ0o7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsaUJBQWlCLE9BQU87QUFDcEIsV0FBTyxrQkFBa0IsS0FBSyxNQUFNLEtBQUs7QUFBQSxFQUM1QztBQUFBLEVBQ0osWUFBWTtBQUNMLFVBQU0sVUFBUztBQUNmLFFBQUksQ0FBQyxLQUFLLGdCQUFnQjtBQUN0QixXQUFLLGlCQUFpQixDQUFDLEtBQUs7QUFBQSxJQUMvQjtBQUFBLEVBQ0o7QUFBQSxFQUNELGlCQUFpQixPQUFPO0FBQ3BCLFFBQUksT0FBTyxVQUFVLFVBQVU7QUFDM0IsY0FBUSxLQUFLLE1BQU0sS0FBSztBQUFBLElBQzNCO0FBQ0QsV0FBTyxVQUFVLE9BQU8sTUFBTSxLQUFLLG9CQUFvQixRQUFRLEtBQUssZUFBZSxLQUFLLFdBQVc7QUFBQSxFQUN0RztBQUFBLEVBQ0QsZ0JBQWdCLE9BQU87QUFDbkIsVUFBTSxRQUFRLEtBQUs7QUFDbkIsUUFBSSxRQUFRLEtBQUssUUFBUSxNQUFNLFNBQVMsR0FBRztBQUN2QyxhQUFPO0FBQUEsSUFDVjtBQUNELFdBQU8sS0FBSyxpQkFBaUIsTUFBTSxPQUFPLEtBQUs7QUFBQSxFQUNsRDtBQUFBLEVBQ0QsaUJBQWlCLE9BQU87QUFDcEIsV0FBTyxLQUFLLE1BQU0sS0FBSyxjQUFjLEtBQUssbUJBQW1CLEtBQUssSUFBSSxLQUFLLFdBQVc7QUFBQSxFQUN6RjtBQUFBLEVBQ0QsZUFBZTtBQUNYLFdBQU8sS0FBSztBQUFBLEVBQ2Y7QUFDTDtBQTNGSSxjQURFLGVBQ0ssTUFBSztBQUNmLGNBRkssZUFFRSxZQUFXO0FBQUEsRUFDWCxPQUFPO0FBQUEsSUFDSCxVQUFVO0FBQUEsRUFDYjtBQUNUO0FBd0ZBLFNBQVMsZ0JBQWdCLG1CQUFtQixXQUFXO0FBQ25ELFFBQU0sUUFBUTtBQUNkLFFBQU0sY0FBYztBQUNwQixRQUFNLEVBQUUsUUFBUyxNQUFPLEtBQU0sS0FBTSxXQUFZLE9BQVEsVUFBVyxXQUFZLGNBQWEsSUFBTTtBQUNsRyxRQUFNLE9BQU8sUUFBUTtBQUNyQixRQUFNLFlBQVksV0FBVztBQUM3QixRQUFNLEVBQUUsS0FBSyxNQUFPLEtBQUssS0FBSSxJQUFNO0FBQ25DLFFBQU0sYUFBYSxDQUFDLGNBQWMsR0FBRztBQUNyQyxRQUFNLGFBQWEsQ0FBQyxjQUFjLEdBQUc7QUFDckMsUUFBTSxlQUFlLENBQUMsY0FBYyxLQUFLO0FBQ3pDLFFBQU0sY0FBYyxPQUFPLFNBQVMsWUFBWTtBQUNoRCxNQUFJLFVBQVUsU0FBUyxPQUFPLFFBQVEsWUFBWSxJQUFJLElBQUk7QUFDMUQsTUFBSSxRQUFRLFNBQVMsU0FBUztBQUM5QixNQUFJLFVBQVUsZUFBZSxDQUFDLGNBQWMsQ0FBQyxZQUFZO0FBQ3JELFdBQU87QUFBQSxNQUNIO0FBQUEsUUFDSSxPQUFPO0FBQUEsTUFDVjtBQUFBLE1BQ0Q7QUFBQSxRQUNJLE9BQU87QUFBQSxNQUNWO0FBQUEsSUFDYjtBQUFBLEVBQ0s7QUFDRCxjQUFZLEtBQUssS0FBSyxPQUFPLE9BQU8sSUFBSSxLQUFLLE1BQU0sT0FBTyxPQUFPO0FBQ2pFLE1BQUksWUFBWSxXQUFXO0FBQ3ZCLGNBQVUsUUFBUSxZQUFZLFVBQVUsWUFBWSxJQUFJLElBQUk7QUFBQSxFQUMvRDtBQUNELE1BQUksQ0FBQyxjQUFjLFNBQVMsR0FBRztBQUMzQixhQUFTLEtBQUssSUFBSSxJQUFJLFNBQVM7QUFDL0IsY0FBVSxLQUFLLEtBQUssVUFBVSxNQUFNLElBQUk7QUFBQSxFQUMzQztBQUNELE1BQUksV0FBVyxTQUFTO0FBQ3BCLGNBQVUsS0FBSyxNQUFNLE9BQU8sT0FBTyxJQUFJO0FBQ3ZDLGNBQVUsS0FBSyxLQUFLLE9BQU8sT0FBTyxJQUFJO0FBQUEsRUFDOUMsT0FBVztBQUNILGNBQVU7QUFDVixjQUFVO0FBQUEsRUFDYjtBQUNELE1BQUksY0FBYyxjQUFjLFFBQVEsYUFBYSxNQUFNLE9BQU8sTUFBTSxVQUFVLEdBQUksR0FBRztBQUNyRixnQkFBWSxLQUFLLE1BQU0sS0FBSyxLQUFLLE1BQU0sT0FBTyxTQUFTLFFBQVEsQ0FBQztBQUNoRSxlQUFXLE1BQU0sT0FBTztBQUN4QixjQUFVO0FBQ1YsY0FBVTtBQUFBLEVBQ2IsV0FBVSxjQUFjO0FBQ3JCLGNBQVUsYUFBYSxNQUFNO0FBQzdCLGNBQVUsYUFBYSxNQUFNO0FBQzdCLGdCQUFZLFFBQVE7QUFDcEIsZUFBVyxVQUFVLFdBQVc7QUFBQSxFQUN4QyxPQUFXO0FBQ0gsaUJBQWEsVUFBVSxXQUFXO0FBQ2xDLFFBQUksYUFBYSxXQUFXLEtBQUssTUFBTSxTQUFTLEdBQUcsVUFBVSxHQUFJLEdBQUc7QUFDaEUsa0JBQVksS0FBSyxNQUFNLFNBQVM7QUFBQSxJQUM1QyxPQUFlO0FBQ0gsa0JBQVksS0FBSyxLQUFLLFNBQVM7QUFBQSxJQUNsQztBQUFBLEVBQ0o7QUFDRCxRQUFNLGdCQUFnQixLQUFLLElBQUksZUFBZSxPQUFPLEdBQUcsZUFBZSxPQUFPLENBQUM7QUFDL0UsV0FBUyxLQUFLLElBQUksSUFBSSxjQUFjLFNBQVMsSUFBSSxnQkFBZ0IsU0FBUztBQUMxRSxZQUFVLEtBQUssTUFBTSxVQUFVLE1BQU0sSUFBSTtBQUN6QyxZQUFVLEtBQUssTUFBTSxVQUFVLE1BQU0sSUFBSTtBQUN6QyxNQUFJLElBQUk7QUFDUixNQUFJLFlBQVk7QUFDWixRQUFJLGlCQUFpQixZQUFZLEtBQUs7QUFDbEMsWUFBTSxLQUFLO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDdkIsQ0FBYTtBQUNELFVBQUksVUFBVSxLQUFLO0FBQ2Y7QUFBQSxNQUNIO0FBQ0QsVUFBSSxhQUFhLEtBQUssT0FBTyxVQUFVLElBQUksV0FBVyxNQUFNLElBQUksUUFBUSxLQUFLLGtCQUFrQixLQUFLLFlBQVksaUJBQWlCLENBQUMsR0FBRztBQUNqSTtBQUFBLE1BQ0g7QUFBQSxJQUNiLFdBQW1CLFVBQVUsS0FBSztBQUN0QjtBQUFBLElBQ0g7QUFBQSxFQUNKO0FBQ0QsU0FBTSxJQUFJLFdBQVcsRUFBRSxHQUFFO0FBQ3JCLFVBQU0sS0FBSztBQUFBLE1BQ1AsT0FBTyxLQUFLLE9BQU8sVUFBVSxJQUFJLFdBQVcsTUFBTSxJQUFJO0FBQUEsSUFDbEUsQ0FBUztBQUFBLEVBQ0o7QUFDRCxNQUFJLGNBQWMsaUJBQWlCLFlBQVksS0FBSztBQUNoRCxRQUFJLE1BQU0sVUFBVSxhQUFhLE1BQU0sTUFBTSxTQUFTLEdBQUcsT0FBTyxLQUFLLGtCQUFrQixLQUFLLFlBQVksaUJBQWlCLENBQUMsR0FBRztBQUN6SCxZQUFNLE1BQU0sU0FBUyxHQUFHLFFBQVE7QUFBQSxJQUM1QyxPQUFlO0FBQ0gsWUFBTSxLQUFLO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDdkIsQ0FBYTtBQUFBLElBQ0o7QUFBQSxFQUNKLFdBQVUsQ0FBQyxjQUFjLFlBQVksS0FBSztBQUN2QyxVQUFNLEtBQUs7QUFBQSxNQUNQLE9BQU87QUFBQSxJQUNuQixDQUFTO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsa0JBQWtCLE9BQU8sWUFBWSxFQUFFLFlBQWEsWUFBVyxHQUFLO0FBQ3pFLFFBQU0sTUFBTSxVQUFVLFdBQVc7QUFDakMsUUFBTSxTQUFTLGFBQWEsS0FBSyxJQUFJLEdBQUcsSUFBSSxLQUFLLElBQUksR0FBRyxNQUFNO0FBQzlELFFBQU0sU0FBUyxPQUFPLGNBQWMsS0FBSyxPQUFPO0FBQ2hELFNBQU8sS0FBSyxJQUFJLGFBQWEsT0FBTyxNQUFNO0FBQzlDO0FBQ0EsTUFBTSx3QkFBd0IsTUFBTTtBQUFBLEVBQ2hDLFlBQVksS0FBSTtBQUNaLFVBQU0sR0FBRztBQUNSLFNBQUssUUFBUTtBQUNiLFNBQUssTUFBTTtBQUNYLFNBQUssY0FBYztBQUNuQixTQUFLLFlBQVk7QUFDbEIsU0FBSyxjQUFjO0FBQUEsRUFDdEI7QUFBQSxFQUNELE1BQU0sS0FBSyxPQUFPO0FBQ2QsUUFBSSxjQUFjLEdBQUcsR0FBRztBQUNwQixhQUFPO0FBQUEsSUFDVjtBQUNELFNBQUssT0FBTyxRQUFRLFlBQVksZUFBZSxXQUFXLENBQUMsU0FBUyxDQUFDLEdBQUcsR0FBRztBQUN2RSxhQUFPO0FBQUEsSUFDVjtBQUNELFdBQU8sQ0FBQztBQUFBLEVBQ1g7QUFBQSxFQUNELHlCQUF5QjtBQUNyQixVQUFNLEVBQUUsWUFBVyxJQUFNLEtBQUs7QUFDOUIsVUFBTSxFQUFFLFlBQWEsV0FBYSxJQUFHLEtBQUssY0FBYTtBQUN2RCxRQUFJLEVBQUUsS0FBTSxJQUFNLElBQUc7QUFDckIsVUFBTSxTQUFTLENBQUMsTUFBSSxNQUFNLGFBQWEsTUFBTTtBQUM3QyxVQUFNLFNBQVMsQ0FBQyxNQUFJLE1BQU0sYUFBYSxNQUFNO0FBQzdDLFFBQUksYUFBYTtBQUNiLFlBQU0sVUFBVSxLQUFLLEdBQUc7QUFDeEIsWUFBTSxVQUFVLEtBQUssR0FBRztBQUN4QixVQUFJLFVBQVUsS0FBSyxVQUFVLEdBQUc7QUFDNUIsZUFBTyxDQUFDO0FBQUEsTUFDWCxXQUFVLFVBQVUsS0FBSyxVQUFVLEdBQUc7QUFDbkMsZUFBTyxDQUFDO0FBQUEsTUFDWDtBQUFBLElBQ0o7QUFDRCxRQUFJLFFBQVEsS0FBSztBQUNiLFVBQUksU0FBUyxRQUFRLElBQUksSUFBSSxLQUFLLElBQUksTUFBTSxJQUFJO0FBQ2hELGFBQU8sTUFBTSxNQUFNO0FBQ25CLFVBQUksQ0FBQyxhQUFhO0FBQ2QsZUFBTyxNQUFNLE1BQU07QUFBQSxNQUN0QjtBQUFBLElBQ0o7QUFDRCxTQUFLLE1BQU07QUFDWCxTQUFLLE1BQU07QUFBQSxFQUNkO0FBQUEsRUFDRCxlQUFlO0FBQ1gsVUFBTSxXQUFXLEtBQUssUUFBUTtBQUM5QixRQUFJLEVBQUUsZUFBZ0IsU0FBVyxJQUFHO0FBQ3BDLFFBQUk7QUFDSixRQUFJLFVBQVU7QUFDVixpQkFBVyxLQUFLLEtBQUssS0FBSyxNQUFNLFFBQVEsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLFFBQVEsSUFBSTtBQUM5RSxVQUFJLFdBQVcsS0FBTTtBQUNqQixnQkFBUSxLQUFLLFVBQVUsS0FBSyxzQkFBc0IsMENBQTBDLG1DQUFtQztBQUMvSCxtQkFBVztBQUFBLE1BQ2Q7QUFBQSxJQUNiLE9BQWU7QUFDSCxpQkFBVyxLQUFLO0FBQ2hCLHNCQUFnQixpQkFBaUI7QUFBQSxJQUNwQztBQUNELFFBQUksZUFBZTtBQUNmLGlCQUFXLEtBQUssSUFBSSxlQUFlLFFBQVE7QUFBQSxJQUM5QztBQUNELFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixtQkFBbUI7QUFDWixXQUFPLE9BQU87QUFBQSxFQUNqQjtBQUFBLEVBQ0QsYUFBYTtBQUNULFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sV0FBVyxLQUFLO0FBQ3RCLFFBQUksV0FBVyxLQUFLO0FBQ3BCLGVBQVcsS0FBSyxJQUFJLEdBQUcsUUFBUTtBQUMvQixVQUFNLDBCQUEwQjtBQUFBLE1BQzVCO0FBQUEsTUFDQSxRQUFRLEtBQUs7QUFBQSxNQUNiLEtBQUssS0FBSztBQUFBLE1BQ1YsS0FBSyxLQUFLO0FBQUEsTUFDVixXQUFXLFNBQVM7QUFBQSxNQUNwQixNQUFNLFNBQVM7QUFBQSxNQUNmLE9BQU8sU0FBUztBQUFBLE1BQ2hCLFdBQVcsS0FBSyxXQUFZO0FBQUEsTUFDNUIsWUFBWSxLQUFLLGFBQWM7QUFBQSxNQUMvQixhQUFhLFNBQVMsZUFBZTtBQUFBLE1BQ3JDLGVBQWUsU0FBUyxrQkFBa0I7QUFBQSxJQUN0RDtBQUNRLFVBQU0sWUFBWSxLQUFLLFVBQVU7QUFDakMsVUFBTSxRQUFRLGdCQUFnQix5QkFBeUIsU0FBUztBQUNoRSxRQUFJLEtBQUssV0FBVyxTQUFTO0FBQ3pCLHlCQUFtQixPQUFPLE1BQU0sT0FBTztBQUFBLElBQzFDO0FBQ0QsUUFBSSxLQUFLLFNBQVM7QUFDZCxZQUFNLFFBQU87QUFDYixXQUFLLFFBQVEsS0FBSztBQUNsQixXQUFLLE1BQU0sS0FBSztBQUFBLElBQzVCLE9BQWU7QUFDSCxXQUFLLFFBQVEsS0FBSztBQUNsQixXQUFLLE1BQU0sS0FBSztBQUFBLElBQ25CO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLFlBQVk7QUFDTCxVQUFNLFFBQVEsS0FBSztBQUNuQixRQUFJLFFBQVEsS0FBSztBQUNqQixRQUFJLE1BQU0sS0FBSztBQUNmLFVBQU0sVUFBUztBQUNmLFFBQUksS0FBSyxRQUFRLFVBQVUsTUFBTSxRQUFRO0FBQ3JDLFlBQU0sVUFBVSxNQUFNLFNBQVMsS0FBSyxJQUFJLE1BQU0sU0FBUyxHQUFHLENBQUMsSUFBSTtBQUMvRCxlQUFTO0FBQ1QsYUFBTztBQUFBLElBQ1Y7QUFDRCxTQUFLLGNBQWM7QUFDbkIsU0FBSyxZQUFZO0FBQ2pCLFNBQUssY0FBYyxNQUFNO0FBQUEsRUFDNUI7QUFBQSxFQUNELGlCQUFpQixPQUFPO0FBQ3BCLFdBQU8sYUFBYSxPQUFPLEtBQUssTUFBTSxRQUFRLFFBQVEsS0FBSyxRQUFRLE1BQU0sTUFBTTtBQUFBLEVBQ2xGO0FBQ0w7QUFFQSxNQUFNLG9CQUFvQixnQkFBZ0I7QUFBQSxFQU90QyxzQkFBc0I7QUFDbEIsVUFBTSxFQUFFLEtBQU0sSUFBRyxJQUFNLEtBQUssVUFBVSxJQUFJO0FBQzFDLFNBQUssTUFBTSxlQUFlLEdBQUcsSUFBSSxNQUFNO0FBQ3ZDLFNBQUssTUFBTSxlQUFlLEdBQUcsSUFBSSxNQUFNO0FBQ3ZDLFNBQUssdUJBQXNCO0FBQUEsRUFDOUI7QUFBQSxFQUNKLG1CQUFtQjtBQUNaLFVBQU0sYUFBYSxLQUFLO0FBQ3hCLFVBQU0sU0FBUyxhQUFhLEtBQUssUUFBUSxLQUFLO0FBQzlDLFVBQU0sY0FBYyxVQUFVLEtBQUssUUFBUSxNQUFNLFdBQVc7QUFDNUQsVUFBTSxTQUFTLGFBQWEsS0FBSyxJQUFJLFdBQVcsSUFBSSxLQUFLLElBQUksV0FBVyxNQUFNO0FBQzlFLFVBQU0sV0FBVyxLQUFLLHdCQUF3QixDQUFDO0FBQy9DLFdBQU8sS0FBSyxLQUFLLFNBQVMsS0FBSyxJQUFJLElBQUksU0FBUyxhQUFhLEtBQUssQ0FBQztBQUFBLEVBQ3RFO0FBQUEsRUFDRCxpQkFBaUIsT0FBTztBQUNwQixXQUFPLFVBQVUsT0FBTyxNQUFNLEtBQUssb0JBQW9CLFFBQVEsS0FBSyxlQUFlLEtBQUssV0FBVztBQUFBLEVBQ3RHO0FBQUEsRUFDRCxpQkFBaUIsT0FBTztBQUNwQixXQUFPLEtBQUssY0FBYyxLQUFLLG1CQUFtQixLQUFLLElBQUksS0FBSztBQUFBLEVBQ25FO0FBQ0w7QUExQkksY0FERSxhQUNLLE1BQUs7QUFDZixjQUZLLGFBRUUsWUFBVztBQUFBLEVBQ1gsT0FBTztBQUFBLElBQ0gsVUFBVSxNQUFNLFdBQVc7QUFBQSxFQUM5QjtBQUNUO0FBdUJBLE1BQU0sYUFBYSxDQUFDLE1BQUksS0FBSyxNQUFNLE1BQU0sQ0FBQyxDQUFDO0FBQzNDLE1BQU0saUJBQWlCLENBQUMsR0FBRyxNQUFJLEtBQUssSUFBSSxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUM7QUFDN0QsU0FBUyxRQUFRLFNBQVM7QUFDdEIsUUFBTSxTQUFTLFVBQVUsS0FBSyxJQUFJLElBQUksV0FBVyxPQUFPLENBQUM7QUFDekQsU0FBTyxXQUFXO0FBQ3RCO0FBQ0EsU0FBUyxNQUFNLEtBQUssS0FBSyxVQUFVO0FBQy9CLFFBQU0sWUFBWSxLQUFLLElBQUksSUFBSSxRQUFRO0FBQ3ZDLFFBQU0sUUFBUSxLQUFLLE1BQU0sTUFBTSxTQUFTO0FBQ3hDLFFBQU0sTUFBTSxLQUFLLEtBQUssTUFBTSxTQUFTO0FBQ3JDLFNBQU8sTUFBTTtBQUNqQjtBQUNBLFNBQVMsU0FBUyxLQUFLLEtBQUs7QUFDeEIsUUFBTSxRQUFRLE1BQU07QUFDcEIsTUFBSSxXQUFXLFdBQVcsS0FBSztBQUMvQixTQUFNLE1BQU0sS0FBSyxLQUFLLFFBQVEsSUFBSSxJQUFHO0FBQ2pDO0FBQUEsRUFDSDtBQUNELFNBQU0sTUFBTSxLQUFLLEtBQUssUUFBUSxJQUFJLElBQUc7QUFDakM7QUFBQSxFQUNIO0FBQ0QsU0FBTyxLQUFLLElBQUksVUFBVSxXQUFXLEdBQUcsQ0FBQztBQUM3QztBQUNDLFNBQVMsY0FBYyxtQkFBbUIsRUFBRSxLQUFNLElBQUcsR0FBSztBQUN2RCxRQUFNLGdCQUFnQixrQkFBa0IsS0FBSyxHQUFHO0FBQ2hELFFBQU0sUUFBUTtBQUNkLFFBQU0sU0FBUyxXQUFXLEdBQUc7QUFDN0IsTUFBSSxNQUFNLFNBQVMsS0FBSyxHQUFHO0FBQzNCLE1BQUksWUFBWSxNQUFNLElBQUksS0FBSyxJQUFJLElBQUksS0FBSyxJQUFJLEdBQUcsQ0FBQyxJQUFJO0FBQ3hELFFBQU0sV0FBVyxLQUFLLElBQUksSUFBSSxHQUFHO0FBQ2pDLFFBQU0sT0FBTyxTQUFTLE1BQU0sS0FBSyxJQUFJLElBQUksTUFBTSxJQUFJO0FBQ25ELFFBQU0sUUFBUSxLQUFLLE9BQU8sTUFBTSxRQUFRLFNBQVMsSUFBSTtBQUNyRCxRQUFNLFNBQVMsS0FBSyxPQUFPLE1BQU0sUUFBUSxXQUFXLEVBQUUsSUFBSSxXQUFXO0FBQ3JFLE1BQUksY0FBYyxLQUFLLE9BQU8sUUFBUSxVQUFVLEtBQUssSUFBSSxJQUFJLEdBQUcsQ0FBQztBQUNqRSxNQUFJLFFBQVEsZ0JBQWdCLGtCQUFrQixLQUFLLEtBQUssT0FBTyxPQUFPLFNBQVMsY0FBYyxLQUFLLElBQUksSUFBSSxHQUFHLEtBQUssU0FBUyxJQUFJLFNBQVM7QUFDeEksU0FBTSxRQUFRLEtBQUk7QUFDZCxVQUFNLEtBQUs7QUFBQSxNQUNQO0FBQUEsTUFDQSxPQUFPLFFBQVEsS0FBSztBQUFBLE1BQ3BCO0FBQUEsSUFDWixDQUFTO0FBQ0QsUUFBSSxlQUFlLElBQUk7QUFDbkIsb0JBQWMsY0FBYyxLQUFLLEtBQUs7QUFBQSxJQUNsRCxPQUFlO0FBQ0g7QUFBQSxJQUNIO0FBQ0QsUUFBSSxlQUFlLElBQUk7QUFDbkI7QUFDQSxvQkFBYztBQUNkLGtCQUFZLE9BQU8sSUFBSSxJQUFJO0FBQUEsSUFDOUI7QUFDRCxZQUFRLEtBQUssT0FBTyxPQUFPLFNBQVMsY0FBYyxLQUFLLElBQUksSUFBSSxHQUFHLEtBQUssU0FBUyxJQUFJO0FBQUEsRUFDdkY7QUFDRCxRQUFNLFdBQVcsZ0JBQWdCLGtCQUFrQixLQUFLLEtBQUs7QUFDN0QsUUFBTSxLQUFLO0FBQUEsSUFDUCxPQUFPO0FBQUEsSUFDUCxPQUFPLFFBQVEsUUFBUTtBQUFBLElBQ3ZCO0FBQUEsRUFDUixDQUFLO0FBQ0QsU0FBTztBQUNYO0FBQ0EsTUFBTSx5QkFBeUIsTUFBTTtBQUFBLEVBVWpDLFlBQVksS0FBSTtBQUNaLFVBQU0sR0FBRztBQUNSLFNBQUssUUFBUTtBQUNiLFNBQUssTUFBTTtBQUNYLFNBQUssY0FBYztBQUNwQixTQUFLLGNBQWM7QUFBQSxFQUN0QjtBQUFBLEVBQ0QsTUFBTSxLQUFLLE9BQU87QUFDZCxVQUFNLFFBQVEsZ0JBQWdCLFVBQVUsTUFBTSxNQUFNLE1BQU07QUFBQSxNQUN0RDtBQUFBLE1BQ0E7QUFBQSxJQUNaLENBQVM7QUFDRCxRQUFJLFVBQVUsR0FBRztBQUNiLFdBQUssUUFBUTtBQUNiLGFBQU87QUFBQSxJQUNWO0FBQ0QsV0FBTyxlQUFlLEtBQUssS0FBSyxRQUFRLElBQUksUUFBUTtBQUFBLEVBQ3ZEO0FBQUEsRUFDRCxzQkFBc0I7QUFDbEIsVUFBTSxFQUFFLEtBQU0sSUFBRyxJQUFNLEtBQUssVUFBVSxJQUFJO0FBQzFDLFNBQUssTUFBTSxlQUFlLEdBQUcsSUFBSSxLQUFLLElBQUksR0FBRyxHQUFHLElBQUk7QUFDcEQsU0FBSyxNQUFNLGVBQWUsR0FBRyxJQUFJLEtBQUssSUFBSSxHQUFHLEdBQUcsSUFBSTtBQUNwRCxRQUFJLEtBQUssUUFBUSxhQUFhO0FBQzFCLFdBQUssUUFBUTtBQUFBLElBQ2hCO0FBQ0QsUUFBSSxLQUFLLFNBQVMsS0FBSyxRQUFRLEtBQUssaUJBQWlCLENBQUMsZUFBZSxLQUFLLFFBQVEsR0FBRztBQUNqRixXQUFLLE1BQU0sUUFBUSxlQUFlLEtBQUssS0FBSyxDQUFDLElBQUksZUFBZSxLQUFLLEtBQUssRUFBRSxJQUFJLGVBQWUsS0FBSyxLQUFLLENBQUM7QUFBQSxJQUM3RztBQUNELFNBQUssdUJBQXNCO0FBQUEsRUFDOUI7QUFBQSxFQUNELHlCQUF5QjtBQUNyQixVQUFNLEVBQUUsWUFBYSxXQUFhLElBQUcsS0FBSyxjQUFhO0FBQ3ZELFFBQUksTUFBTSxLQUFLO0FBQ2YsUUFBSSxNQUFNLEtBQUs7QUFDZixVQUFNLFNBQVMsQ0FBQyxNQUFJLE1BQU0sYUFBYSxNQUFNO0FBQzdDLFVBQU0sU0FBUyxDQUFDLE1BQUksTUFBTSxhQUFhLE1BQU07QUFDN0MsUUFBSSxRQUFRLEtBQUs7QUFDYixVQUFJLE9BQU8sR0FBRztBQUNWLGVBQU8sQ0FBQztBQUNSLGVBQU8sRUFBRTtBQUFBLE1BQ3pCLE9BQW1CO0FBQ0gsZUFBTyxlQUFlLEtBQUssRUFBRSxDQUFDO0FBQzlCLGVBQU8sZUFBZSxLQUFLLENBQUUsQ0FBQztBQUFBLE1BQ2pDO0FBQUEsSUFDSjtBQUNELFFBQUksT0FBTyxHQUFHO0FBQ1YsYUFBTyxlQUFlLEtBQUssRUFBRSxDQUFDO0FBQUEsSUFDakM7QUFDRCxRQUFJLE9BQU8sR0FBRztBQUNWLGFBQU8sZUFBZSxLQUFLLENBQUUsQ0FBQztBQUFBLElBQ2pDO0FBQ0QsU0FBSyxNQUFNO0FBQ1gsU0FBSyxNQUFNO0FBQUEsRUFDZDtBQUFBLEVBQ0QsYUFBYTtBQUNULFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sb0JBQW9CO0FBQUEsTUFDdEIsS0FBSyxLQUFLO0FBQUEsTUFDVixLQUFLLEtBQUs7QUFBQSxJQUN0QjtBQUNRLFVBQU0sUUFBUSxjQUFjLG1CQUFtQixJQUFJO0FBQ25ELFFBQUksS0FBSyxXQUFXLFNBQVM7QUFDekIseUJBQW1CLE9BQU8sTUFBTSxPQUFPO0FBQUEsSUFDMUM7QUFDRCxRQUFJLEtBQUssU0FBUztBQUNkLFlBQU0sUUFBTztBQUNiLFdBQUssUUFBUSxLQUFLO0FBQ2xCLFdBQUssTUFBTSxLQUFLO0FBQUEsSUFDNUIsT0FBZTtBQUNILFdBQUssUUFBUSxLQUFLO0FBQ2xCLFdBQUssTUFBTSxLQUFLO0FBQUEsSUFDbkI7QUFDRCxXQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0osaUJBQWlCLE9BQU87QUFDakIsV0FBTyxVQUFVLFNBQVksTUFBTSxhQUFhLE9BQU8sS0FBSyxNQUFNLFFBQVEsUUFBUSxLQUFLLFFBQVEsTUFBTSxNQUFNO0FBQUEsRUFDOUc7QUFBQSxFQUNKLFlBQVk7QUFDTCxVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLFVBQVM7QUFDZixTQUFLLGNBQWMsTUFBTSxLQUFLO0FBQzlCLFNBQUssY0FBYyxNQUFNLEtBQUssR0FBRyxJQUFJLE1BQU0sS0FBSztBQUFBLEVBQ25EO0FBQUEsRUFDRCxpQkFBaUIsT0FBTztBQUNwQixRQUFJLFVBQVUsVUFBYSxVQUFVLEdBQUc7QUFDcEMsY0FBUSxLQUFLO0FBQUEsSUFDaEI7QUFDRCxRQUFJLFVBQVUsUUFBUSxNQUFNLEtBQUssR0FBRztBQUNoQyxhQUFPO0FBQUEsSUFDVjtBQUNELFdBQU8sS0FBSyxtQkFBbUIsVUFBVSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssSUFBSSxLQUFLLGVBQWUsS0FBSyxXQUFXO0FBQUEsRUFDL0c7QUFBQSxFQUNELGlCQUFpQixPQUFPO0FBQ3BCLFVBQU0sVUFBVSxLQUFLLG1CQUFtQixLQUFLO0FBQzdDLFdBQU8sS0FBSyxJQUFJLElBQUksS0FBSyxjQUFjLFVBQVUsS0FBSyxXQUFXO0FBQUEsRUFDcEU7QUFDTDtBQXpHSSxjQURFLGtCQUNLLE1BQUs7QUFDZixjQUZLLGtCQUVFLFlBQVc7QUFBQSxFQUNYLE9BQU87QUFBQSxJQUNILFVBQVUsTUFBTSxXQUFXO0FBQUEsSUFDM0IsT0FBTztBQUFBLE1BQ0gsU0FBUztBQUFBLElBQ1o7QUFBQSxFQUNKO0FBQ1Q7QUFtR0EsU0FBUyxzQkFBc0IsTUFBTTtBQUNqQyxRQUFNLFdBQVcsS0FBSztBQUN0QixNQUFJLFNBQVMsV0FBVyxLQUFLLFNBQVM7QUFDbEMsVUFBTSxVQUFVLFVBQVUsU0FBUyxlQUFlO0FBQ2xELFdBQU8sZUFBZSxTQUFTLFFBQVEsU0FBUyxLQUFLLE1BQU0sU0FBUyxLQUFLLElBQUksSUFBSSxRQUFRO0FBQUEsRUFDNUY7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLGlCQUFpQixLQUFLLE1BQU0sT0FBTztBQUN4QyxVQUFRLFFBQVEsS0FBSyxJQUFJLFFBQVE7QUFBQSxJQUM3QjtBQUFBLEVBQ1I7QUFDSSxTQUFPO0FBQUEsSUFDSCxHQUFHLGFBQWEsS0FBSyxLQUFLLFFBQVEsS0FBSztBQUFBLElBQ3ZDLEdBQUcsTUFBTSxTQUFTLEtBQUs7QUFBQSxFQUMvQjtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0IsT0FBTyxLQUFLLE1BQU0sS0FBSyxLQUFLO0FBQ2pELE1BQUksVUFBVSxPQUFPLFVBQVUsS0FBSztBQUNoQyxXQUFPO0FBQUEsTUFDSCxPQUFPLE1BQU0sT0FBTztBQUFBLE1BQ3BCLEtBQUssTUFBTSxPQUFPO0FBQUEsSUFDOUI7QUFBQSxFQUNLLFdBQVUsUUFBUSxPQUFPLFFBQVEsS0FBSztBQUNuQyxXQUFPO0FBQUEsTUFDSCxPQUFPLE1BQU07QUFBQSxNQUNiLEtBQUs7QUFBQSxJQUNqQjtBQUFBLEVBQ0s7QUFDRCxTQUFPO0FBQUEsSUFDSCxPQUFPO0FBQUEsSUFDUCxLQUFLLE1BQU07QUFBQSxFQUNuQjtBQUNBO0FBQ0MsU0FBUyxtQkFBbUIsT0FBTztBQUNoQyxRQUFNLE9BQU87QUFBQSxJQUNULEdBQUcsTUFBTSxPQUFPLE1BQU0sU0FBUztBQUFBLElBQy9CLEdBQUcsTUFBTSxRQUFRLE1BQU0sU0FBUztBQUFBLElBQ2hDLEdBQUcsTUFBTSxNQUFNLE1BQU0sU0FBUztBQUFBLElBQzlCLEdBQUcsTUFBTSxTQUFTLE1BQU0sU0FBUztBQUFBLEVBQ3pDO0FBQ0ksUUFBTSxTQUFTLE9BQU8sT0FBTyxDQUFFLEdBQUUsSUFBSTtBQUNyQyxRQUFNLGFBQWE7QUFDbkIsUUFBTSxVQUFVO0FBQ2hCLFFBQU0sYUFBYSxNQUFNLGFBQWE7QUFDdEMsUUFBTSxpQkFBaUIsTUFBTSxRQUFRO0FBQ3JDLFFBQU0sa0JBQWtCLGVBQWUsb0JBQW9CLEtBQUssYUFBYTtBQUM3RSxXQUFRLElBQUksR0FBRyxJQUFJLFlBQVksS0FBSTtBQUMvQixVQUFNLE9BQU8sZUFBZSxXQUFXLE1BQU0scUJBQXFCLENBQUMsQ0FBQztBQUNwRSxZQUFRLEtBQUssS0FBSztBQUNsQixVQUFNLGdCQUFnQixNQUFNLGlCQUFpQixHQUFHLE1BQU0sY0FBYyxRQUFRLElBQUksZUFBZTtBQUMvRixVQUFNLFNBQVMsT0FBTyxLQUFLLElBQUk7QUFDL0IsVUFBTSxXQUFXLGlCQUFpQixNQUFNLEtBQUssUUFBUSxNQUFNLGFBQWEsRUFBRTtBQUMxRSxlQUFXLEtBQUs7QUFDaEIsVUFBTSxlQUFlLGdCQUFnQixNQUFNLGNBQWMsQ0FBQyxJQUFJLGVBQWU7QUFDN0UsVUFBTSxRQUFRLEtBQUssTUFBTSxVQUFVLFlBQVksQ0FBQztBQUNoRCxVQUFNLFVBQVUsZ0JBQWdCLE9BQU8sY0FBYyxHQUFHLFNBQVMsR0FBRyxHQUFHLEdBQUc7QUFDMUUsVUFBTSxVQUFVLGdCQUFnQixPQUFPLGNBQWMsR0FBRyxTQUFTLEdBQUcsSUFBSSxHQUFHO0FBQzNFLGlCQUFhLFFBQVEsTUFBTSxjQUFjLFNBQVMsT0FBTztBQUFBLEVBQzVEO0FBQ0QsUUFBTSxlQUFlLEtBQUssSUFBSSxPQUFPLEdBQUcsT0FBTyxJQUFJLEtBQUssR0FBRyxLQUFLLElBQUksT0FBTyxHQUFHLE9BQU8sSUFBSSxLQUFLLENBQUM7QUFDL0YsUUFBTSxtQkFBbUIscUJBQXFCLE9BQU8sWUFBWSxPQUFPO0FBQzVFO0FBQ0EsU0FBUyxhQUFhLFFBQVEsTUFBTSxPQUFPLFNBQVMsU0FBUztBQUN6RCxRQUFNLE1BQU0sS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUM7QUFDcEMsUUFBTSxNQUFNLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDO0FBQ3BDLE1BQUksSUFBSTtBQUNSLE1BQUksSUFBSTtBQUNSLE1BQUksUUFBUSxRQUFRLEtBQUssR0FBRztBQUN4QixTQUFLLEtBQUssSUFBSSxRQUFRLFNBQVM7QUFDL0IsV0FBTyxJQUFJLEtBQUssSUFBSSxPQUFPLEdBQUcsS0FBSyxJQUFJLENBQUM7QUFBQSxFQUMzQyxXQUFVLFFBQVEsTUFBTSxLQUFLLEdBQUc7QUFDN0IsU0FBSyxRQUFRLE1BQU0sS0FBSyxLQUFLO0FBQzdCLFdBQU8sSUFBSSxLQUFLLElBQUksT0FBTyxHQUFHLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDM0M7QUFDRCxNQUFJLFFBQVEsUUFBUSxLQUFLLEdBQUc7QUFDeEIsU0FBSyxLQUFLLElBQUksUUFBUSxTQUFTO0FBQy9CLFdBQU8sSUFBSSxLQUFLLElBQUksT0FBTyxHQUFHLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDM0MsV0FBVSxRQUFRLE1BQU0sS0FBSyxHQUFHO0FBQzdCLFNBQUssUUFBUSxNQUFNLEtBQUssS0FBSztBQUM3QixXQUFPLElBQUksS0FBSyxJQUFJLE9BQU8sR0FBRyxLQUFLLElBQUksQ0FBQztBQUFBLEVBQzNDO0FBQ0w7QUFDQSxTQUFTLHFCQUFxQixPQUFPLFlBQVksU0FBUztBQUN0RCxRQUFNLFFBQVE7QUFDZCxRQUFNLGFBQWEsTUFBTSxhQUFhO0FBQ3RDLFFBQU0sT0FBTyxNQUFNO0FBQ25CLFFBQU0sUUFBUSxzQkFBc0IsSUFBSSxJQUFJO0FBQzVDLFFBQU0sZ0JBQWdCLE1BQU07QUFDNUIsUUFBTSxrQkFBa0IsS0FBSyxZQUFZLG9CQUFvQixLQUFLLGFBQWE7QUFDL0UsV0FBUSxJQUFJLEdBQUcsSUFBSSxZQUFZLEtBQUk7QUFDL0IsVUFBTSxxQkFBcUIsTUFBTSxpQkFBaUIsR0FBRyxnQkFBZ0IsUUFBUSxRQUFRLElBQUksZUFBZTtBQUN4RyxVQUFNLFFBQVEsS0FBSyxNQUFNLFVBQVUsZ0JBQWdCLG1CQUFtQixRQUFRLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZGLFVBQU0sT0FBTyxXQUFXO0FBQ3hCLFVBQU0sSUFBSSxVQUFVLG1CQUFtQixHQUFHLEtBQUssR0FBRyxLQUFLO0FBQ3ZELFVBQU0sWUFBWSxxQkFBcUIsS0FBSztBQUM1QyxVQUFNLE9BQU8saUJBQWlCLG1CQUFtQixHQUFHLEtBQUssR0FBRyxTQUFTO0FBQ3JFLFVBQU0sS0FBSztBQUFBLE1BQ1AsR0FBRyxtQkFBbUI7QUFBQSxNQUN0QjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQSxLQUFLO0FBQUEsTUFDTCxPQUFPLE9BQU8sS0FBSztBQUFBLE1BQ25CLFFBQVEsSUFBSSxLQUFLO0FBQUEsSUFDN0IsQ0FBUztBQUFBLEVBQ0o7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLHFCQUFxQixPQUFPO0FBQ2pDLE1BQUksVUFBVSxLQUFLLFVBQVUsS0FBSztBQUM5QixXQUFPO0FBQUEsRUFDZixXQUFlLFFBQVEsS0FBSztBQUNwQixXQUFPO0FBQUEsRUFDVjtBQUNELFNBQU87QUFDWDtBQUNBLFNBQVMsaUJBQWlCLEdBQUcsR0FBRyxPQUFPO0FBQ25DLE1BQUksVUFBVSxTQUFTO0FBQ25CLFNBQUs7QUFBQSxFQUNiLFdBQWUsVUFBVSxVQUFVO0FBQzNCLFNBQUssSUFBSTtBQUFBLEVBQ1o7QUFDRCxTQUFPO0FBQ1g7QUFDQSxTQUFTLFVBQVUsR0FBR1AsSUFBRyxPQUFPO0FBQzVCLE1BQUksVUFBVSxNQUFNLFVBQVUsS0FBSztBQUMvQixTQUFLQSxLQUFJO0FBQUEsRUFDWixXQUFVLFFBQVEsT0FBTyxRQUFRLElBQUk7QUFDbEMsU0FBS0E7QUFBQSxFQUNSO0FBQ0QsU0FBTztBQUNYO0FBQ0EsU0FBUyxnQkFBZ0IsT0FBTyxZQUFZO0FBQ3hDLFFBQU0sRUFBRSxLQUFNLFNBQVMsRUFBRSxZQUFjLE1BQU07QUFDN0MsV0FBUSxJQUFJLGFBQWEsR0FBRyxLQUFLLEdBQUcsS0FBSTtBQUNwQyxVQUFNLGNBQWMsWUFBWSxXQUFXLE1BQU0scUJBQXFCLENBQUMsQ0FBQztBQUN4RSxVQUFNLFNBQVMsT0FBTyxZQUFZLElBQUk7QUFDdEMsVUFBTSxFQUFFLEdBQUksR0FBSSxXQUFZLE1BQU8sS0FBTSxPQUFRLE9BQU0sSUFBTSxNQUFNLGlCQUFpQjtBQUNwRixVQUFNLEVBQUUsY0FBZ0IsSUFBRztBQUMzQixRQUFJLENBQUMsY0FBYyxhQUFhLEdBQUc7QUFDL0IsWUFBTSxlQUFlLGNBQWMsWUFBWSxZQUFZO0FBQzNELFlBQU0sVUFBVSxVQUFVLFlBQVksZUFBZTtBQUNyRCxVQUFJLFlBQVk7QUFDaEIsWUFBTSxlQUFlLE9BQU8sUUFBUTtBQUNwQyxZQUFNLGNBQWMsTUFBTSxRQUFRO0FBQ2xDLFlBQU0sZ0JBQWdCLFFBQVEsT0FBTyxRQUFRO0FBQzdDLFlBQU0saUJBQWlCLFNBQVMsTUFBTSxRQUFRO0FBQzlDLFVBQUksT0FBTyxPQUFPLFlBQVksRUFBRSxLQUFLLENBQUMsTUFBSSxNQUFNLENBQUMsR0FBRztBQUNoRCxZQUFJLFVBQVM7QUFDYiwyQkFBbUIsS0FBSztBQUFBLFVBQ3BCLEdBQUc7QUFBQSxVQUNILEdBQUc7QUFBQSxVQUNILEdBQUc7QUFBQSxVQUNILEdBQUc7QUFBQSxVQUNILFFBQVE7QUFBQSxRQUM1QixDQUFpQjtBQUNELFlBQUksS0FBSTtBQUFBLE1BQ3hCLE9BQW1CO0FBQ0gsWUFBSSxTQUFTLGNBQWMsYUFBYSxlQUFlLGNBQWM7QUFBQSxNQUN4RTtBQUFBLElBQ0o7QUFDRCxlQUFXLEtBQUssTUFBTSxhQUFhLElBQUksR0FBRyxJQUFJLE9BQU8sYUFBYSxHQUFHLFFBQVE7QUFBQSxNQUN6RSxPQUFPLFlBQVk7QUFBQSxNQUNuQjtBQUFBLE1BQ0EsY0FBYztBQUFBLElBQzFCLENBQVM7QUFBQSxFQUNKO0FBQ0w7QUFDQSxTQUFTLGVBQWUsT0FBTyxRQUFRLFVBQVUsWUFBWTtBQUN6RCxRQUFNLEVBQUUsSUFBTSxJQUFHO0FBQ2pCLE1BQUksVUFBVTtBQUNWLFFBQUksSUFBSSxNQUFNLFNBQVMsTUFBTSxTQUFTLFFBQVEsR0FBRyxHQUFHO0FBQUEsRUFDNUQsT0FBVztBQUNILFFBQUksZ0JBQWdCLE1BQU0saUJBQWlCLEdBQUcsTUFBTTtBQUNwRCxRQUFJLE9BQU8sY0FBYyxHQUFHLGNBQWMsQ0FBQztBQUMzQyxhQUFRLElBQUksR0FBRyxJQUFJLFlBQVksS0FBSTtBQUMvQixzQkFBZ0IsTUFBTSxpQkFBaUIsR0FBRyxNQUFNO0FBQ2hELFVBQUksT0FBTyxjQUFjLEdBQUcsY0FBYyxDQUFDO0FBQUEsSUFDOUM7QUFBQSxFQUNKO0FBQ0w7QUFDQSxTQUFTLGVBQWUsT0FBTyxjQUFjLFFBQVEsWUFBWSxZQUFZO0FBQ3pFLFFBQU0sTUFBTSxNQUFNO0FBQ2xCLFFBQU0sV0FBVyxhQUFhO0FBQzlCLFFBQU0sRUFBRSxlQUFRLFVBQVksSUFBRztBQUMvQixNQUFJLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQ0csVUFBUyxDQUFDLGFBQWEsU0FBUyxHQUFHO0FBQ2hFO0FBQUEsRUFDSDtBQUNELE1BQUksS0FBSTtBQUNSLE1BQUksY0FBY0E7QUFDbEIsTUFBSSxZQUFZO0FBQ2hCLE1BQUksWUFBWSxXQUFXLElBQUk7QUFDL0IsTUFBSSxpQkFBaUIsV0FBVztBQUNoQyxNQUFJLFVBQVM7QUFDYixpQkFBZSxPQUFPLFFBQVEsVUFBVSxVQUFVO0FBQ2xELE1BQUksVUFBUztBQUNiLE1BQUksT0FBTTtBQUNWLE1BQUksUUFBTztBQUNmO0FBQ0EsU0FBUyx3QkFBd0IsUUFBUSxPQUFPLE9BQU87QUFDbkQsU0FBTyxjQUFjLFFBQVE7QUFBQSxJQUN6QjtBQUFBLElBQ0E7QUFBQSxJQUNBLE1BQU07QUFBQSxFQUNkLENBQUs7QUFDTDtBQUNBLE1BQU0sMEJBQTBCLGdCQUFnQjtBQUFBLEVBNEM1QyxZQUFZLEtBQUk7QUFDWixVQUFNLEdBQUc7QUFDUixTQUFLLFVBQVU7QUFDZixTQUFLLFVBQVU7QUFDZixTQUFLLGNBQWM7QUFDbkIsU0FBSyxlQUFlO0FBQ3JCLFNBQUssbUJBQW1CO0VBQzNCO0FBQUEsRUFDRCxnQkFBZ0I7QUFDWixVQUFNLFVBQVUsS0FBSyxXQUFXLFVBQVUsc0JBQXNCLEtBQUssT0FBTyxJQUFJLENBQUM7QUFDakYsVUFBTSxJQUFJLEtBQUssUUFBUSxLQUFLLFdBQVcsUUFBUTtBQUMvQyxVQUFNSCxLQUFJLEtBQUssU0FBUyxLQUFLLFlBQVksUUFBUTtBQUNqRCxTQUFLLFVBQVUsS0FBSyxNQUFNLEtBQUssT0FBTyxJQUFJLElBQUksUUFBUSxJQUFJO0FBQzFELFNBQUssVUFBVSxLQUFLLE1BQU0sS0FBSyxNQUFNQSxLQUFJLElBQUksUUFBUSxHQUFHO0FBQ3hELFNBQUssY0FBYyxLQUFLLE1BQU0sS0FBSyxJQUFJLEdBQUdBLEVBQUMsSUFBSSxDQUFDO0FBQUEsRUFDbkQ7QUFBQSxFQUNELHNCQUFzQjtBQUNsQixVQUFNLEVBQUUsS0FBTSxJQUFHLElBQU0sS0FBSyxVQUFVLEtBQUs7QUFDM0MsU0FBSyxNQUFNLGVBQWUsR0FBRyxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksTUFBTTtBQUN0RCxTQUFLLE1BQU0sZUFBZSxHQUFHLEtBQUssQ0FBQyxNQUFNLEdBQUcsSUFBSSxNQUFNO0FBQ3RELFNBQUssdUJBQXNCO0FBQUEsRUFDOUI7QUFBQSxFQUNKLG1CQUFtQjtBQUNaLFdBQU8sS0FBSyxLQUFLLEtBQUssY0FBYyxzQkFBc0IsS0FBSyxPQUFPLENBQUM7QUFBQSxFQUMxRTtBQUFBLEVBQ0QsbUJBQW1CLE9BQU87QUFDdEIsb0JBQWdCLFVBQVUsbUJBQW1CLEtBQUssTUFBTSxLQUFLO0FBQzdELFNBQUssZUFBZSxLQUFLLFVBQVcsRUFBQyxJQUFJLENBQUMsT0FBTyxVQUFRO0FBQ3JELFlBQU0sUUFBUSxTQUFTLEtBQUssUUFBUSxZQUFZLFVBQVU7QUFBQSxRQUN0RDtBQUFBLFFBQ0E7QUFBQSxNQUNILEdBQUUsSUFBSTtBQUNQLGFBQU8sU0FBUyxVQUFVLElBQUksUUFBUTtBQUFBLElBQ2xELENBQVMsRUFBRSxPQUFPLENBQUMsR0FBRyxNQUFJLEtBQUssTUFBTSxrQkFBa0IsQ0FBQyxDQUFDO0FBQUEsRUFDcEQ7QUFBQSxFQUNELE1BQU07QUFDRixVQUFNLE9BQU8sS0FBSztBQUNsQixRQUFJLEtBQUssV0FBVyxLQUFLLFlBQVksU0FBUztBQUMxQyx5QkFBbUIsSUFBSTtBQUFBLElBQ25DLE9BQWU7QUFDSCxXQUFLLGVBQWUsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBLElBQ2pDO0FBQUEsRUFDSjtBQUFBLEVBQ0QsZUFBZSxjQUFjLGVBQWUsYUFBYSxnQkFBZ0I7QUFDckUsU0FBSyxXQUFXLEtBQUssT0FBTyxlQUFlLGlCQUFpQixDQUFDO0FBQzdELFNBQUssV0FBVyxLQUFLLE9BQU8sY0FBYyxrQkFBa0IsQ0FBQztBQUM3RCxTQUFLLGVBQWUsS0FBSyxJQUFJLEtBQUssY0FBYyxHQUFHLEtBQUssSUFBSSxjQUFjLGVBQWUsYUFBYSxjQUFjLENBQUM7QUFBQSxFQUN4SDtBQUFBLEVBQ0QsY0FBYyxPQUFPO0FBQ2pCLFVBQU0sa0JBQWtCLE9BQU8sS0FBSyxhQUFhLFVBQVU7QUFDM0QsVUFBTSxhQUFhLEtBQUssUUFBUSxjQUFjO0FBQzlDLFdBQU8sZ0JBQWdCLFFBQVEsa0JBQWtCLFVBQVUsVUFBVSxDQUFDO0FBQUEsRUFDekU7QUFBQSxFQUNELDhCQUE4QixPQUFPO0FBQ2pDLFFBQUksY0FBYyxLQUFLLEdBQUc7QUFDdEIsYUFBTztBQUFBLElBQ1Y7QUFDRCxVQUFNLGdCQUFnQixLQUFLLGVBQWUsS0FBSyxNQUFNLEtBQUs7QUFDMUQsUUFBSSxLQUFLLFFBQVEsU0FBUztBQUN0QixjQUFRLEtBQUssTUFBTSxTQUFTO0FBQUEsSUFDL0I7QUFDRCxZQUFRLFFBQVEsS0FBSyxPQUFPO0FBQUEsRUFDL0I7QUFBQSxFQUNELDhCQUE4QixVQUFVO0FBQ3BDLFFBQUksY0FBYyxRQUFRLEdBQUc7QUFDekIsYUFBTztBQUFBLElBQ1Y7QUFDRCxVQUFNLGlCQUFpQixZQUFZLEtBQUssZUFBZSxLQUFLLE1BQU0sS0FBSztBQUN2RSxXQUFPLEtBQUssUUFBUSxVQUFVLEtBQUssTUFBTSxpQkFBaUIsS0FBSyxNQUFNO0FBQUEsRUFDeEU7QUFBQSxFQUNELHFCQUFxQixPQUFPO0FBQ3hCLFVBQU0sY0FBYyxLQUFLLGdCQUFnQjtBQUN6QyxRQUFJLFNBQVMsS0FBSyxRQUFRLFlBQVksUUFBUTtBQUMxQyxZQUFNLGFBQWEsWUFBWTtBQUMvQixhQUFPLHdCQUF3QixLQUFLLFdBQVksR0FBRSxPQUFPLFVBQVU7QUFBQSxJQUN0RTtBQUFBLEVBQ0o7QUFBQSxFQUNELGlCQUFpQixPQUFPLG9CQUFvQixrQkFBa0IsR0FBRztBQUM3RCxVQUFNLFFBQVEsS0FBSyxjQUFjLEtBQUssSUFBSSxVQUFVO0FBQ3BELFdBQU87QUFBQSxNQUNILEdBQUcsS0FBSyxJQUFJLEtBQUssSUFBSSxxQkFBcUIsS0FBSztBQUFBLE1BQy9DLEdBQUcsS0FBSyxJQUFJLEtBQUssSUFBSSxxQkFBcUIsS0FBSztBQUFBLE1BQy9DO0FBQUEsSUFDWjtBQUFBLEVBQ0s7QUFBQSxFQUNELHlCQUF5QixPQUFPLE9BQU87QUFDbkMsV0FBTyxLQUFLLGlCQUFpQixPQUFPLEtBQUssOEJBQThCLEtBQUssQ0FBQztBQUFBLEVBQ2hGO0FBQUEsRUFDRCxnQkFBZ0IsT0FBTztBQUNuQixXQUFPLEtBQUsseUJBQXlCLFNBQVMsR0FBRyxLQUFLLGFBQVksQ0FBRTtBQUFBLEVBQ3ZFO0FBQUEsRUFDRCxzQkFBc0IsT0FBTztBQUN6QixVQUFNLEVBQUUsTUFBTyxLQUFNLE9BQVEsT0FBTSxJQUFNLEtBQUssaUJBQWlCO0FBQy9ELFdBQU87QUFBQSxNQUNIO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDWjtBQUFBLEVBQ0s7QUFBQSxFQUNKLGlCQUFpQjtBQUNWLFVBQU0sRUFBRSxpQkFBa0IsTUFBTSxFQUFFLFNBQVEsRUFBTSxJQUFHLEtBQUs7QUFDeEQsUUFBSSxpQkFBaUI7QUFDakIsWUFBTSxNQUFNLEtBQUs7QUFDakIsVUFBSSxLQUFJO0FBQ1IsVUFBSSxVQUFTO0FBQ2IscUJBQWUsTUFBTSxLQUFLLDhCQUE4QixLQUFLLFNBQVMsR0FBRyxVQUFVLEtBQUssYUFBYSxNQUFNO0FBQzNHLFVBQUksVUFBUztBQUNiLFVBQUksWUFBWTtBQUNoQixVQUFJLEtBQUk7QUFDUixVQUFJLFFBQU87QUFBQSxJQUNkO0FBQUEsRUFDSjtBQUFBLEVBQ0osV0FBVztBQUNKLFVBQU0sTUFBTSxLQUFLO0FBQ2pCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sRUFBRSxZQUFhLE1BQU8sT0FBTSxJQUFNO0FBQ3hDLFVBQU0sYUFBYSxLQUFLLGFBQWE7QUFDckMsUUFBSSxHQUFHLFFBQVE7QUFDZixRQUFJLEtBQUssWUFBWSxTQUFTO0FBQzFCLHNCQUFnQixNQUFNLFVBQVU7QUFBQSxJQUNuQztBQUNELFFBQUksS0FBSyxTQUFTO0FBQ2QsV0FBSyxNQUFNLFFBQVEsQ0FBQyxNQUFNLFVBQVE7QUFDOUIsWUFBSSxVQUFVLEdBQUc7QUFDYixtQkFBUyxLQUFLLDhCQUE4QixLQUFLLEtBQUs7QUFDdEQsZ0JBQU0sVUFBVSxLQUFLLFdBQVcsS0FBSztBQUNyQyxnQkFBTSxjQUFjLEtBQUssV0FBVyxPQUFPO0FBQzNDLGdCQUFNLG9CQUFvQixPQUFPLFdBQVcsT0FBTztBQUNuRCx5QkFBZSxNQUFNLGFBQWEsUUFBUSxZQUFZLGlCQUFpQjtBQUFBLFFBQzFFO0FBQUEsTUFDakIsQ0FBYTtBQUFBLElBQ0o7QUFDRCxRQUFJLFdBQVcsU0FBUztBQUNwQixVQUFJLEtBQUk7QUFDUixXQUFJLElBQUksYUFBYSxHQUFHLEtBQUssR0FBRyxLQUFJO0FBQ2hDLGNBQU0sY0FBYyxXQUFXLFdBQVcsS0FBSyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3RFLGNBQU0sRUFBRSxlQUFRLFVBQVksSUFBRztBQUMvQixZQUFJLENBQUMsYUFBYSxDQUFDRyxRQUFPO0FBQ3RCO0FBQUEsUUFDSDtBQUNELFlBQUksWUFBWTtBQUNoQixZQUFJLGNBQWNBO0FBQ2xCLFlBQUksWUFBWSxZQUFZLFVBQVU7QUFDdEMsWUFBSSxpQkFBaUIsWUFBWTtBQUNqQyxpQkFBUyxLQUFLLDhCQUE4QixLQUFLLE1BQU0sVUFBVSxLQUFLLE1BQU0sS0FBSyxHQUFHO0FBQ3BGLG1CQUFXLEtBQUssaUJBQWlCLEdBQUcsTUFBTTtBQUMxQyxZQUFJLFVBQVM7QUFDYixZQUFJLE9BQU8sS0FBSyxTQUFTLEtBQUssT0FBTztBQUNyQyxZQUFJLE9BQU8sU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUNqQyxZQUFJLE9BQU07QUFBQSxNQUNiO0FBQ0QsVUFBSSxRQUFPO0FBQUEsSUFDZDtBQUFBLEVBQ0o7QUFBQSxFQUNKLGFBQWE7QUFBQSxFQUFFO0FBQUEsRUFDZixhQUFhO0FBQ04sVUFBTSxNQUFNLEtBQUs7QUFDakIsVUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBTSxXQUFXLEtBQUs7QUFDdEIsUUFBSSxDQUFDLFNBQVMsU0FBUztBQUNuQjtBQUFBLElBQ0g7QUFDRCxVQUFNLGFBQWEsS0FBSyxjQUFjLENBQUM7QUFDdkMsUUFBSSxRQUFRO0FBQ1osUUFBSSxLQUFJO0FBQ1IsUUFBSSxVQUFVLEtBQUssU0FBUyxLQUFLLE9BQU87QUFDeEMsUUFBSSxPQUFPLFVBQVU7QUFDckIsUUFBSSxZQUFZO0FBQ2hCLFFBQUksZUFBZTtBQUNuQixTQUFLLE1BQU0sUUFBUSxDQUFDLE1BQU0sVUFBUTtBQUM5QixVQUFJLFVBQVUsS0FBSyxDQUFDLEtBQUssU0FBUztBQUM5QjtBQUFBLE1BQ0g7QUFDRCxZQUFNLGNBQWMsU0FBUyxXQUFXLEtBQUssV0FBVyxLQUFLLENBQUM7QUFDOUQsWUFBTSxXQUFXLE9BQU8sWUFBWSxJQUFJO0FBQ3hDLGVBQVMsS0FBSyw4QkFBOEIsS0FBSyxNQUFNLE9BQU8sS0FBSztBQUNuRSxVQUFJLFlBQVksbUJBQW1CO0FBQy9CLFlBQUksT0FBTyxTQUFTO0FBQ3BCLGdCQUFRLElBQUksWUFBWSxLQUFLLEtBQUssRUFBRTtBQUNwQyxZQUFJLFlBQVksWUFBWTtBQUM1QixjQUFNLFVBQVUsVUFBVSxZQUFZLGVBQWU7QUFDckQsWUFBSSxTQUFTLENBQUMsUUFBUSxJQUFJLFFBQVEsTUFBTSxDQUFDLFNBQVMsU0FBUyxPQUFPLElBQUksUUFBUSxLQUFLLFFBQVEsUUFBUSxPQUFPLFNBQVMsT0FBTyxRQUFRLE1BQU07QUFBQSxNQUMzSTtBQUNELGlCQUFXLEtBQUssS0FBSyxPQUFPLEdBQUcsQ0FBQyxRQUFRLFVBQVU7QUFBQSxRQUM5QyxPQUFPLFlBQVk7QUFBQSxNQUNuQyxDQUFhO0FBQUEsSUFDYixDQUFTO0FBQ0QsUUFBSSxRQUFPO0FBQUEsRUFDZDtBQUFBLEVBQ0osWUFBWTtBQUFBLEVBQUU7QUFDZjtBQTFPSSxjQURFLG1CQUNLLE1BQUs7QUFDZixjQUZLLG1CQUVFLFlBQVc7QUFBQSxFQUNYLFNBQVM7QUFBQSxFQUNULFNBQVM7QUFBQSxFQUNULFVBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxJQUNSLFNBQVM7QUFBQSxJQUNULFdBQVc7QUFBQSxJQUNYLFlBQVksQ0FBRTtBQUFBLElBQ2Qsa0JBQWtCO0FBQUEsRUFDckI7QUFBQSxFQUNELE1BQU07QUFBQSxJQUNGLFVBQVU7QUFBQSxFQUNiO0FBQUEsRUFDRCxZQUFZO0FBQUEsRUFDWixPQUFPO0FBQUEsSUFDSCxtQkFBbUI7QUFBQSxJQUNuQixVQUFVLE1BQU0sV0FBVztBQUFBLEVBQzlCO0FBQUEsRUFDRCxhQUFhO0FBQUEsSUFDVCxlQUFlO0FBQUEsSUFDZixpQkFBaUI7QUFBQSxJQUNqQixTQUFTO0FBQUEsSUFDVCxNQUFNO0FBQUEsTUFDRixNQUFNO0FBQUEsSUFDVDtBQUFBLElBQ0QsU0FBVSxPQUFPO0FBQ2IsYUFBTztBQUFBLElBQ1Y7QUFBQSxJQUNELFNBQVM7QUFBQSxJQUNULG1CQUFtQjtBQUFBLEVBQ3RCO0FBQ1Q7QUFDSSxjQWxDRSxtQkFrQ0ssaUJBQWdCO0FBQUEsRUFDbkIsb0JBQW9CO0FBQUEsRUFDcEIscUJBQXFCO0FBQUEsRUFDckIsZUFBZTtBQUN2QjtBQUNJLGNBdkNFLG1CQXVDSyxlQUFjO0FBQUEsRUFDakIsWUFBWTtBQUFBLElBQ1IsV0FBVztBQUFBLEVBQ2Q7QUFDVDtBQWtNQSxNQUFNLFlBQVk7QUFBQSxFQUNkLGFBQWE7QUFBQSxJQUNULFFBQVE7QUFBQSxJQUNSLE1BQU07QUFBQSxJQUNOLE9BQU87QUFBQSxFQUNWO0FBQUEsRUFDRCxRQUFRO0FBQUEsSUFDSixRQUFRO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixPQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsUUFBUTtBQUFBLElBQ0osUUFBUTtBQUFBLElBQ1IsTUFBTTtBQUFBLElBQ04sT0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNELE1BQU07QUFBQSxJQUNGLFFBQVE7QUFBQSxJQUNSLE1BQU07QUFBQSxJQUNOLE9BQU87QUFBQSxFQUNWO0FBQUEsRUFDRCxLQUFLO0FBQUEsSUFDRCxRQUFRO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixPQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsTUFBTTtBQUFBLElBQ0YsUUFBUTtBQUFBLElBQ1IsTUFBTTtBQUFBLElBQ04sT0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNELE9BQU87QUFBQSxJQUNILFFBQVE7QUFBQSxJQUNSLE1BQU07QUFBQSxJQUNOLE9BQU87QUFBQSxFQUNWO0FBQUEsRUFDRCxTQUFTO0FBQUEsSUFDTCxRQUFRO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixPQUFPO0FBQUEsRUFDVjtBQUFBLEVBQ0QsTUFBTTtBQUFBLElBQ0YsUUFBUTtBQUFBLElBQ1IsTUFBTTtBQUFBLEVBQ1Q7QUFDTDtBQUNDLE1BQU0sUUFBeUIsdUJBQU8sS0FBSyxTQUFTO0FBQ3BELFNBQVMsT0FBTyxHQUFHLEdBQUc7QUFDbkIsU0FBTyxJQUFJO0FBQ2Y7QUFDQyxTQUFTLE1BQU0sT0FBTyxPQUFPO0FBQzFCLE1BQUksY0FBYyxLQUFLLEdBQUc7QUFDdEIsV0FBTztBQUFBLEVBQ1Y7QUFDRCxRQUFNLFVBQVUsTUFBTTtBQUN0QixRQUFNLEVBQUUsUUFBUyxlQUFRLFdBQVUsSUFBTSxNQUFNO0FBQy9DLE1BQUksUUFBUTtBQUNaLE1BQUksT0FBTyxXQUFXLFlBQVk7QUFDOUIsWUFBUSxPQUFPLEtBQUs7QUFBQSxFQUN2QjtBQUNELE1BQUksQ0FBQyxlQUFlLEtBQUssR0FBRztBQUN4QixZQUFRLE9BQU8sV0FBVyxXQUFXLFFBQVEsTUFBTSxPQUFRLE1BQU0sSUFBSSxRQUFRLE1BQU0sS0FBSztBQUFBLEVBQzNGO0FBQ0QsTUFBSSxVQUFVLE1BQU07QUFDaEIsV0FBTztBQUFBLEVBQ1Y7QUFDRCxNQUFJcUIsUUFBTztBQUNQLFlBQVFBLFdBQVUsV0FBVyxTQUFTLFVBQVUsS0FBSyxlQUFlLFFBQVEsUUFBUSxRQUFRLE9BQU8sV0FBVyxVQUFVLElBQUksUUFBUSxRQUFRLE9BQU9BLE1BQUs7QUFBQSxFQUMzSjtBQUNELFNBQU8sQ0FBQztBQUNaO0FBQ0MsU0FBUywwQkFBMEIsU0FBUyxLQUFLLEtBQUssVUFBVTtBQUM3RCxRQUFNLE9BQU8sTUFBTTtBQUNuQixXQUFRLElBQUksTUFBTSxRQUFRLE9BQU8sR0FBRyxJQUFJLE9BQU8sR0FBRyxFQUFFLEdBQUU7QUFDbEQsVUFBTSxXQUFXLFVBQVUsTUFBTTtBQUNqQyxVQUFNLFNBQVMsU0FBUyxRQUFRLFNBQVMsUUFBUSxPQUFPO0FBQ3hELFFBQUksU0FBUyxVQUFVLEtBQUssTUFBTSxNQUFNLFFBQVEsU0FBUyxTQUFTLEtBQUssS0FBSyxVQUFVO0FBQ2xGLGFBQU8sTUFBTTtBQUFBLElBQ2hCO0FBQUEsRUFDSjtBQUNELFNBQU8sTUFBTSxPQUFPO0FBQ3hCO0FBQ0MsU0FBUywyQkFBMkIsT0FBTyxVQUFVLFNBQVMsS0FBSyxLQUFLO0FBQ3JFLFdBQVEsSUFBSSxNQUFNLFNBQVMsR0FBRyxLQUFLLE1BQU0sUUFBUSxPQUFPLEdBQUcsS0FBSTtBQUMzRCxVQUFNLE9BQU8sTUFBTTtBQUNuQixRQUFJLFVBQVUsTUFBTSxVQUFVLE1BQU0sU0FBUyxLQUFLLEtBQUssS0FBSyxJQUFJLEtBQUssV0FBVyxHQUFHO0FBQy9FLGFBQU87QUFBQSxJQUNWO0FBQUEsRUFDSjtBQUNELFNBQU8sTUFBTSxVQUFVLE1BQU0sUUFBUSxPQUFPLElBQUk7QUFDcEQ7QUFDQyxTQUFTLG1CQUFtQixNQUFNO0FBQy9CLFdBQVEsSUFBSSxNQUFNLFFBQVEsSUFBSSxJQUFJLEdBQUcsT0FBTyxNQUFNLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUNwRSxRQUFJLFVBQVUsTUFBTSxJQUFJLFFBQVE7QUFDNUIsYUFBTyxNQUFNO0FBQUEsSUFDaEI7QUFBQSxFQUNKO0FBQ0w7QUFDQyxTQUFTLFFBQVEsT0FBTyxNQUFNLFlBQVk7QUFDdkMsTUFBSSxDQUFDLFlBQVk7QUFDYixVQUFNLFFBQVE7QUFBQSxFQUN0QixXQUFlLFdBQVcsUUFBUTtBQUMxQixVQUFNLEVBQUUsSUFBSyxHQUFFLElBQU0sUUFBUSxZQUFZLElBQUk7QUFDN0MsVUFBTSxZQUFZLFdBQVcsT0FBTyxPQUFPLFdBQVcsTUFBTSxXQUFXO0FBQ3ZFLFVBQU0sYUFBYTtBQUFBLEVBQ3RCO0FBQ0w7QUFDQyxTQUFTLGNBQWMsT0FBTyxPQUFPQyxNQUFLLFdBQVc7QUFDbEQsUUFBTSxVQUFVLE1BQU07QUFDdEIsUUFBTSxRQUFRLENBQUMsUUFBUSxRQUFRLE1BQU0sR0FBRyxPQUFPLFNBQVM7QUFDeEQsUUFBTSxPQUFPLE1BQU0sTUFBTSxTQUFTLEdBQUc7QUFDckMsTUFBSSxPQUFPO0FBQ1gsT0FBSSxRQUFRLE9BQU8sU0FBUyxNQUFNLFFBQVEsQ0FBQyxRQUFRLElBQUksT0FBTyxHQUFHLFNBQVMsR0FBRTtBQUN4RSxZQUFRQSxLQUFJO0FBQ1osUUFBSSxTQUFTLEdBQUc7QUFDWixZQUFNLE9BQU8sUUFBUTtBQUFBLElBQ3hCO0FBQUEsRUFDSjtBQUNELFNBQU87QUFDWDtBQUNDLFNBQVMsb0JBQW9CLE9BQU8sUUFBUSxXQUFXO0FBQ3BELFFBQU0sUUFBUTtBQUNiLFFBQU1BLE9BQU07QUFDYixRQUFNLE9BQU8sT0FBTztBQUNwQixNQUFJLEdBQUc7QUFDUCxPQUFJLElBQUksR0FBRyxJQUFJLE1BQU0sRUFBRSxHQUFFO0FBQ3JCLFlBQVEsT0FBTztBQUNmLFNBQUksU0FBUztBQUNiLFVBQU0sS0FBSztBQUFBLE1BQ1A7QUFBQSxNQUNBLE9BQU87QUFBQSxJQUNuQixDQUFTO0FBQUEsRUFDSjtBQUNELFNBQU8sU0FBUyxLQUFLLENBQUMsWUFBWSxRQUFRLGNBQWMsT0FBTyxPQUFPQSxNQUFLLFNBQVM7QUFDeEY7QUFDQSxNQUFNLGtCQUFrQixNQUFNO0FBQUEsRUFxQjdCLFlBQVksT0FBTTtBQUNYLFVBQU0sS0FBSztBQUNWLFNBQUssU0FBUztBQUFBLE1BQ1gsTUFBTSxDQUFFO0FBQUEsTUFDUixRQUFRLENBQUU7QUFBQSxNQUNWLEtBQUssQ0FBRTtBQUFBLElBQ25CO0FBQ1MsU0FBSyxRQUFRO0FBQ2IsU0FBSyxhQUFhO0FBQ25CLFNBQUssV0FBVztBQUNoQixTQUFLLGNBQWM7QUFDbkIsU0FBSyxhQUFhO0FBQUEsRUFDckI7QUFBQSxFQUNELEtBQUssV0FBVyxPQUFPLElBQUk7QUFDdkIsVUFBTSxPQUFPLFVBQVUsU0FBUyxVQUFVLE9BQU87QUFDaEQsVUFBTSxVQUFVLEtBQUssV0FBVyxJQUFJLFNBQVMsTUFBTSxVQUFVLFNBQVMsSUFBSTtBQUMzRSxZQUFRLEtBQUssSUFBSTtBQUNqQixZQUFRLEtBQUssZ0JBQWdCLFFBQVEsUUFBUztBQUM5QyxTQUFLLGFBQWE7QUFBQSxNQUNkLFFBQVEsS0FBSztBQUFBLE1BQ2IsT0FBTyxLQUFLO0FBQUEsTUFDWixZQUFZLEtBQUs7QUFBQSxJQUM3QjtBQUNRLFVBQU0sS0FBSyxTQUFTO0FBQ3BCLFNBQUssY0FBYyxLQUFLO0FBQUEsRUFDM0I7QUFBQSxFQUNKLE1BQU0sS0FBSyxPQUFPO0FBQ1gsUUFBSSxRQUFRLFFBQVc7QUFDbkIsYUFBTztBQUFBLElBQ1Y7QUFDRCxXQUFPLE1BQU0sTUFBTSxHQUFHO0FBQUEsRUFDekI7QUFBQSxFQUNELGVBQWU7QUFDWCxVQUFNLGFBQVk7QUFDbEIsU0FBSyxTQUFTO0FBQUEsTUFDVixNQUFNLENBQUU7QUFBQSxNQUNSLFFBQVEsQ0FBRTtBQUFBLE1BQ1YsS0FBSyxDQUFFO0FBQUEsSUFDbkI7QUFBQSxFQUNLO0FBQUEsRUFDRCxzQkFBc0I7QUFDbEIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxPQUFPLFFBQVEsS0FBSyxRQUFRO0FBQ2xDLFFBQUksRUFBRSxLQUFNLEtBQU0sWUFBYSxlQUFnQixLQUFLO0FBQzNELGFBQVMsYUFBYSxRQUFRO0FBQ25CLFVBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxPQUFPLEdBQUcsR0FBRztBQUNuQyxjQUFNLEtBQUssSUFBSSxLQUFLLE9BQU8sR0FBRztBQUFBLE1BQ2pDO0FBQ0QsVUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLE9BQU8sR0FBRyxHQUFHO0FBQ25DLGNBQU0sS0FBSyxJQUFJLEtBQUssT0FBTyxHQUFHO0FBQUEsTUFDakM7QUFBQSxJQUNKO0FBQ0QsUUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZO0FBQzVCLG1CQUFhLEtBQUssZ0JBQWUsQ0FBRTtBQUNuQyxVQUFJLFFBQVEsV0FBVyxXQUFXLFFBQVEsTUFBTSxXQUFXLFVBQVU7QUFDakUscUJBQWEsS0FBSyxVQUFVLEtBQUssQ0FBQztBQUFBLE1BQ3JDO0FBQUEsSUFDSjtBQUNELFVBQU0sZUFBZSxHQUFHLEtBQUssQ0FBQyxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxRQUFRLEtBQUssSUFBSyxHQUFFLElBQUk7QUFDbEYsVUFBTSxlQUFlLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLE1BQU0sS0FBSyxJQUFHLEdBQUksSUFBSSxJQUFJO0FBQ3BGLFNBQUssTUFBTSxLQUFLLElBQUksS0FBSyxNQUFNLENBQUM7QUFDaEMsU0FBSyxNQUFNLEtBQUssSUFBSSxNQUFNLEdBQUcsR0FBRztBQUFBLEVBQ25DO0FBQUEsRUFDSixrQkFBa0I7QUFDWCxVQUFNLE1BQU0sS0FBSztBQUNqQixRQUFJLE1BQU0sT0FBTztBQUNqQixRQUFJLE1BQU0sT0FBTztBQUNqQixRQUFJLElBQUksUUFBUTtBQUNaLFlBQU0sSUFBSTtBQUNWLFlBQU0sSUFBSSxJQUFJLFNBQVM7QUFBQSxJQUMxQjtBQUNELFdBQU87QUFBQSxNQUNIO0FBQUEsTUFDQTtBQUFBLElBQ1o7QUFBQSxFQUNLO0FBQUEsRUFDSixhQUFhO0FBQ04sVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxXQUFXLFFBQVE7QUFDekIsVUFBTSxXQUFXLFFBQVE7QUFDekIsVUFBTSxhQUFhLFNBQVMsV0FBVyxXQUFXLEtBQUssbUJBQW9CLElBQUcsS0FBSztBQUNuRixRQUFJLFFBQVEsV0FBVyxXQUFXLFdBQVcsUUFBUTtBQUNqRCxXQUFLLE1BQU0sS0FBSyxZQUFZLFdBQVc7QUFDdkMsV0FBSyxNQUFNLEtBQUssWUFBWSxXQUFXLFdBQVcsU0FBUztBQUFBLElBQzlEO0FBQ0QsVUFBTSxNQUFNLEtBQUs7QUFDakIsVUFBTSxNQUFNLEtBQUs7QUFDakIsVUFBTSxRQUFRLGVBQWUsWUFBWSxLQUFLLEdBQUc7QUFDakQsU0FBSyxRQUFRLFNBQVMsU0FBUyxTQUFTLFdBQVcsMEJBQTBCLFNBQVMsU0FBUyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssa0JBQWtCLEdBQUcsQ0FBQyxJQUFJLDJCQUEyQixNQUFNLE1BQU0sUUFBUSxTQUFTLFNBQVMsS0FBSyxLQUFLLEtBQUssR0FBRztBQUNyTyxTQUFLLGFBQWEsQ0FBQyxTQUFTLE1BQU0sV0FBVyxLQUFLLFVBQVUsU0FBUyxTQUFZLG1CQUFtQixLQUFLLEtBQUs7QUFDOUcsU0FBSyxZQUFZLFVBQVU7QUFDM0IsUUFBSSxRQUFRLFNBQVM7QUFDakIsWUFBTSxRQUFPO0FBQUEsSUFDaEI7QUFDRCxXQUFPLG9CQUFvQixNQUFNLE9BQU8sS0FBSyxVQUFVO0FBQUEsRUFDMUQ7QUFBQSxFQUNELGdCQUFnQjtBQUNaLFFBQUksS0FBSyxRQUFRLHFCQUFxQjtBQUNsQyxXQUFLLFlBQVksS0FBSyxNQUFNLElBQUksQ0FBQyxTQUFPLENBQUMsS0FBSyxLQUFLLENBQUM7QUFBQSxJQUN2RDtBQUFBLEVBQ0o7QUFBQSxFQUNKLFlBQVksYUFBYSxJQUFJO0FBQ3RCLFFBQUksUUFBUTtBQUNaLFFBQUksTUFBTTtBQUNWLFFBQUksT0FBTztBQUNYLFFBQUksS0FBSyxRQUFRLFVBQVUsV0FBVyxRQUFRO0FBQzFDLGNBQVEsS0FBSyxtQkFBbUIsV0FBVyxFQUFFO0FBQzdDLFVBQUksV0FBVyxXQUFXLEdBQUc7QUFDekIsZ0JBQVEsSUFBSTtBQUFBLE1BQzVCLE9BQW1CO0FBQ0gsaUJBQVMsS0FBSyxtQkFBbUIsV0FBVyxFQUFFLElBQUksU0FBUztBQUFBLE1BQzlEO0FBQ0QsYUFBTyxLQUFLLG1CQUFtQixXQUFXLFdBQVcsU0FBUyxFQUFFO0FBQ2hFLFVBQUksV0FBVyxXQUFXLEdBQUc7QUFDekIsY0FBTTtBQUFBLE1BQ3RCLE9BQW1CO0FBQ0gsZUFBTyxPQUFPLEtBQUssbUJBQW1CLFdBQVcsV0FBVyxTQUFTLEVBQUUsS0FBSztBQUFBLE1BQy9FO0FBQUEsSUFDSjtBQUNELFVBQU0sUUFBUSxXQUFXLFNBQVMsSUFBSSxNQUFNO0FBQzVDLFlBQVEsWUFBWSxPQUFPLEdBQUcsS0FBSztBQUNuQyxVQUFNLFlBQVksS0FBSyxHQUFHLEtBQUs7QUFDL0IsU0FBSyxXQUFXO0FBQUEsTUFDWjtBQUFBLE1BQ0E7QUFBQSxNQUNBLFFBQVEsS0FBSyxRQUFRLElBQUk7QUFBQSxJQUNyQztBQUFBLEVBQ0s7QUFBQSxFQUNKLFlBQVk7QUFDTCxVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFNLE1BQU0sS0FBSztBQUNqQixVQUFNLE1BQU0sS0FBSztBQUNqQixVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFNLFdBQVcsUUFBUTtBQUN6QixVQUFNLFFBQVEsU0FBUyxRQUFRLDBCQUEwQixTQUFTLFNBQVMsS0FBSyxLQUFLLEtBQUssa0JBQWtCLEdBQUcsQ0FBQztBQUNoSCxVQUFNLFdBQVcsZUFBZSxRQUFRLE1BQU0sVUFBVSxDQUFDO0FBQ3pELFVBQU0sVUFBVSxVQUFVLFNBQVMsU0FBUyxhQUFhO0FBQ3pELFVBQU0sYUFBYSxTQUFTLE9BQU8sS0FBSyxZQUFZO0FBQ3BELFVBQU0sUUFBUTtBQUNkLFFBQUksUUFBUTtBQUNaLFFBQUksTUFBTTtBQUNWLFFBQUksWUFBWTtBQUNaLGNBQVEsQ0FBQyxRQUFRLFFBQVEsT0FBTyxXQUFXLE9BQU87QUFBQSxJQUNyRDtBQUNELFlBQVEsQ0FBQyxRQUFRLFFBQVEsT0FBTyxhQUFhLFFBQVEsS0FBSztBQUMxRCxRQUFJLFFBQVEsS0FBSyxLQUFLLEtBQUssS0FBSyxJQUFJLE1BQVMsVUFBVTtBQUNuRCxZQUFNLElBQUksTUFBTSxNQUFNLFVBQVUsTUFBTSx5Q0FBeUMsV0FBVyxNQUFNLEtBQUs7QUFBQSxJQUN4RztBQUNELFVBQU0sYUFBYSxRQUFRLE1BQU0sV0FBVyxVQUFVLEtBQUs7QUFDM0QsU0FBSSxPQUFPLE9BQU8sUUFBUSxHQUFHLE9BQU8sS0FBSyxPQUFPLENBQUMsUUFBUSxJQUFJLE1BQU0sVUFBVSxLQUFLLEdBQUcsU0FBUTtBQUN6RixjQUFRLE9BQU8sTUFBTSxVQUFVO0FBQUEsSUFDbEM7QUFDRCxRQUFJLFNBQVMsT0FBTyxRQUFRLFdBQVcsV0FBVyxVQUFVLEdBQUc7QUFDM0QsY0FBUSxPQUFPLE1BQU0sVUFBVTtBQUFBLElBQ2xDO0FBQ0QsV0FBTyxPQUFPLEtBQUssS0FBSyxFQUFFLEtBQUssQ0FBQyxHQUFHLE1BQUksSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQUksQ0FBQyxDQUFDO0FBQUEsRUFDNUQ7QUFBQSxFQUNKLGlCQUFpQixPQUFPO0FBQ2pCLFVBQU0sVUFBVSxLQUFLO0FBQ3JCLFVBQU0sV0FBVyxLQUFLLFFBQVE7QUFDOUIsUUFBSSxTQUFTLGVBQWU7QUFDeEIsYUFBTyxRQUFRLE9BQU8sT0FBTyxTQUFTLGFBQWE7QUFBQSxJQUN0RDtBQUNELFdBQU8sUUFBUSxPQUFPLE9BQU8sU0FBUyxlQUFlLFFBQVE7QUFBQSxFQUNoRTtBQUFBLEVBQ0osb0JBQW9CLE1BQU0sT0FBTyxPQUFPLFFBQVE7QUFDekMsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxZQUFZLFFBQVEsTUFBTTtBQUNoQyxRQUFJLFdBQVc7QUFDWCxhQUFPLFNBQVMsV0FBVztBQUFBLFFBQ3ZCO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNILEdBQUUsSUFBSTtBQUFBLElBQ1Y7QUFDRCxVQUFNLFVBQVUsUUFBUSxLQUFLO0FBQzdCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQU0sWUFBWSxLQUFLO0FBQ3ZCLFVBQU0sY0FBYyxRQUFRLFFBQVE7QUFDcEMsVUFBTSxjQUFjLGFBQWEsUUFBUTtBQUN6QyxVQUFNLE9BQU8sTUFBTTtBQUNuQixVQUFNLFFBQVEsYUFBYSxlQUFlLFFBQVEsS0FBSztBQUN2RCxXQUFPLEtBQUssU0FBUyxPQUFPLE1BQU0sV0FBVyxRQUFRLGNBQWMsWUFBWTtBQUFBLEVBQ2xGO0FBQUEsRUFDSixtQkFBbUIsT0FBTztBQUNuQixRQUFJLEdBQUcsTUFBTTtBQUNiLFNBQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDMUMsYUFBTyxNQUFNO0FBQ2IsV0FBSyxRQUFRLEtBQUssb0JBQW9CLEtBQUssT0FBTyxHQUFHLEtBQUs7QUFBQSxJQUM3RDtBQUFBLEVBQ0o7QUFBQSxFQUNKLG1CQUFtQixPQUFPO0FBQ25CLFdBQU8sVUFBVSxPQUFPLE9BQU8sUUFBUSxLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUs7QUFBQSxFQUN2RTtBQUFBLEVBQ0osaUJBQWlCLE9BQU87QUFDakIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxNQUFNLEtBQUssbUJBQW1CLEtBQUs7QUFDekMsV0FBTyxLQUFLLG9CQUFvQixRQUFRLFFBQVEsT0FBTyxRQUFRLE1BQU07QUFBQSxFQUN4RTtBQUFBLEVBQ0osaUJBQWlCLE9BQU87QUFDakIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxNQUFNLEtBQUssbUJBQW1CLEtBQUssSUFBSSxRQUFRLFNBQVMsUUFBUTtBQUN0RSxXQUFPLEtBQUssTUFBTSxPQUFPLEtBQUssTUFBTSxLQUFLO0FBQUEsRUFDNUM7QUFBQSxFQUNKLGNBQWMsT0FBTztBQUNkLFVBQU0sWUFBWSxLQUFLLFFBQVE7QUFDL0IsVUFBTSxpQkFBaUIsS0FBSyxJQUFJLFlBQVksS0FBSyxFQUFFO0FBQ25ELFVBQU0sUUFBUSxVQUFVLEtBQUssYUFBWSxJQUFLLFVBQVUsY0FBYyxVQUFVLFdBQVc7QUFDM0YsVUFBTSxjQUFjLEtBQUssSUFBSSxLQUFLO0FBQ2xDLFVBQU0sY0FBYyxLQUFLLElBQUksS0FBSztBQUNsQyxVQUFNLGVBQWUsS0FBSyx3QkFBd0IsQ0FBQyxFQUFFO0FBQ3JELFdBQU87QUFBQSxNQUNILEdBQUcsaUJBQWlCLGNBQWMsZUFBZTtBQUFBLE1BQ2pELEdBQUcsaUJBQWlCLGNBQWMsZUFBZTtBQUFBLElBQzdEO0FBQUEsRUFDSztBQUFBLEVBQ0osa0JBQWtCLGFBQWE7QUFDeEIsVUFBTSxXQUFXLEtBQUssUUFBUTtBQUM5QixVQUFNLGlCQUFpQixTQUFTO0FBQ2hDLFVBQU0sU0FBUyxlQUFlLFNBQVMsU0FBUyxlQUFlO0FBQy9ELFVBQU0sZUFBZSxLQUFLLG9CQUFvQixhQUFhLEdBQUcsb0JBQW9CLE1BQU07QUFBQSxNQUNwRjtBQUFBLElBQ0gsR0FBRSxLQUFLLFVBQVUsR0FBRyxNQUFNO0FBQzNCLFVBQU0sT0FBTyxLQUFLLGNBQWMsWUFBWTtBQUM1QyxVQUFNLFdBQVcsS0FBSyxNQUFNLEtBQUssYUFBYyxJQUFHLEtBQUssUUFBUSxLQUFLLElBQUksS0FBSyxTQUFTLEtBQUssQ0FBQyxJQUFJO0FBQ2hHLFdBQU8sV0FBVyxJQUFJLFdBQVc7QUFBQSxFQUNwQztBQUFBLEVBQ0osb0JBQW9CO0FBQ2IsUUFBSSxhQUFhLEtBQUssT0FBTyxRQUFRO0FBQ3JDLFFBQUksR0FBRztBQUNQLFFBQUksV0FBVyxRQUFRO0FBQ25CLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxRQUFRLEtBQUs7QUFDbkIsUUFBSSxLQUFLLGVBQWUsTUFBTSxRQUFRO0FBQ2xDLGFBQU8sS0FBSyxPQUFPLE9BQU8sTUFBTSxHQUFHLFdBQVcsbUJBQW1CLElBQUk7QUFBQSxJQUN4RTtBQUNELFNBQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDMUMsbUJBQWEsV0FBVyxPQUFPLE1BQU0sR0FBRyxXQUFXLG1CQUFtQixJQUFJLENBQUM7QUFBQSxJQUM5RTtBQUNELFdBQU8sS0FBSyxPQUFPLE9BQU8sS0FBSyxVQUFVLFVBQVU7QUFBQSxFQUN0RDtBQUFBLEVBQ0oscUJBQXFCO0FBQ2QsVUFBTSxhQUFhLEtBQUssT0FBTyxVQUFVO0FBQ3pDLFFBQUksR0FBRztBQUNQLFFBQUksV0FBVyxRQUFRO0FBQ25CLGFBQU87QUFBQSxJQUNWO0FBQ0QsVUFBTSxTQUFTLEtBQUs7QUFDcEIsU0FBSSxJQUFJLEdBQUcsT0FBTyxPQUFPLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUMzQyxpQkFBVyxLQUFLLE1BQU0sTUFBTSxPQUFPLEVBQUUsQ0FBQztBQUFBLElBQ3pDO0FBQ0QsV0FBTyxLQUFLLE9BQU8sU0FBUyxLQUFLLGNBQWMsYUFBYSxLQUFLLFVBQVUsVUFBVTtBQUFBLEVBQ3hGO0FBQUEsRUFDSixVQUFVLFFBQVE7QUFDWCxXQUFPLGFBQWEsT0FBTyxLQUFLLE1BQU0sQ0FBQztBQUFBLEVBQzFDO0FBQ0w7QUF0UkksY0FERSxXQUNLLE1BQUs7QUFDZixjQUZLLFdBRUUsWUFBVztBQUFBLEVBQ2xCLFFBQVE7QUFBQSxFQUNELFVBQVUsQ0FBRTtBQUFBLEVBQ1osTUFBTTtBQUFBLElBQ0YsUUFBUTtBQUFBLElBQ1IsTUFBTTtBQUFBLElBQ04sT0FBTztBQUFBLElBQ1AsWUFBWTtBQUFBLElBQ1osU0FBUztBQUFBLElBQ1QsZ0JBQWdCLENBQUU7QUFBQSxFQUNyQjtBQUFBLEVBQ0QsT0FBTztBQUFBLElBQ2QsUUFBUTtBQUFBLElBQ0csVUFBVTtBQUFBLElBQ1YsT0FBTztBQUFBLE1BQ0gsU0FBUztBQUFBLElBQ1o7QUFBQSxFQUNKO0FBQ1Q7QUFxUUEsU0FBUyxZQUFZLE9BQU8sS0FBSyxTQUFTO0FBQ3RDLE1BQUksS0FBSztBQUNULE1BQUksS0FBSyxNQUFNLFNBQVM7QUFDeEIsTUFBSSxZQUFZLFlBQVksWUFBWTtBQUN4QyxNQUFJLFNBQVM7QUFDVCxRQUFJLE9BQU8sTUFBTSxJQUFJLE9BQU8sT0FBTyxNQUFNLElBQUksS0FBSztBQUM5QyxPQUFDLEVBQUUsSUFBSyxHQUFLLElBQUcsYUFBYSxPQUFPLE9BQU8sR0FBRztBQUFBLElBQ2pEO0FBQ0QsS0FBQyxFQUFFLEtBQUssWUFBYSxNQUFNLGVBQWdCLE1BQU07QUFDakQsS0FBQyxFQUFFLEtBQUssWUFBYSxNQUFNLGVBQWdCLE1BQU07QUFBQSxFQUN6RCxPQUFXO0FBQ0gsUUFBSSxPQUFPLE1BQU0sSUFBSSxRQUFRLE9BQU8sTUFBTSxJQUFJLE1BQU07QUFDaEQsT0FBQyxFQUFFLElBQUssR0FBSyxJQUFHLGFBQWEsT0FBTyxRQUFRLEdBQUc7QUFBQSxJQUNsRDtBQUNELEtBQUMsRUFBRSxNQUFNLFlBQWEsS0FBSyxlQUFnQixNQUFNO0FBQ2pELEtBQUMsRUFBRSxNQUFNLFlBQWEsS0FBSyxlQUFnQixNQUFNO0FBQUEsRUFDcEQ7QUFDRCxRQUFNLE9BQU8sYUFBYTtBQUMxQixTQUFPLE9BQU8sY0FBYyxhQUFhLGVBQWUsTUFBTSxjQUFjLE9BQU87QUFDdkY7QUFDQSxNQUFNLHdCQUF3QixVQUFVO0FBQUEsRUFHdkMsWUFBWSxPQUFNO0FBQ1gsVUFBTSxLQUFLO0FBQ1YsU0FBSyxTQUFTO0FBQ2QsU0FBSyxVQUFVO0FBQ2YsU0FBSyxjQUFjO0FBQUEsRUFDdkI7QUFBQSxFQUNKLGNBQWM7QUFDUCxVQUFNLGFBQWEsS0FBSztBQUN4QixVQUFNLFFBQVEsS0FBSyxTQUFTLEtBQUssaUJBQWlCLFVBQVU7QUFDNUQsU0FBSyxVQUFVLFlBQVksT0FBTyxLQUFLLEdBQUc7QUFDMUMsU0FBSyxjQUFjLFlBQVksT0FBTyxLQUFLLEdBQUcsSUFBSSxLQUFLO0FBQ3ZELFVBQU0sWUFBWSxVQUFVO0FBQUEsRUFDL0I7QUFBQSxFQUNKLGlCQUFpQixZQUFZO0FBQ3RCLFVBQU0sRUFBRSxLQUFNLElBQU0sSUFBRztBQUN2QixVQUFNLFFBQVE7QUFDZCxVQUFNLFFBQVE7QUFDZCxRQUFJLEdBQUcsTUFBTSxNQUFNLE1BQU07QUFDekIsU0FBSSxJQUFJLEdBQUcsT0FBTyxXQUFXLFFBQVEsSUFBSSxNQUFNLEVBQUUsR0FBRTtBQUMvQyxhQUFPLFdBQVc7QUFDbEIsVUFBSSxRQUFRLE9BQU8sUUFBUSxLQUFLO0FBQzVCLGNBQU0sS0FBSyxJQUFJO0FBQUEsTUFDbEI7QUFBQSxJQUNKO0FBQ0QsUUFBSSxNQUFNLFNBQVMsR0FBRztBQUNsQixhQUFPO0FBQUEsUUFDSDtBQUFBLFVBQ0ksTUFBTTtBQUFBLFVBQ04sS0FBSztBQUFBLFFBQ1I7QUFBQSxRQUNEO0FBQUEsVUFDSSxNQUFNO0FBQUEsVUFDTixLQUFLO0FBQUEsUUFDUjtBQUFBLE1BQ2pCO0FBQUEsSUFDUztBQUNELFNBQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxRQUFRLElBQUksTUFBTSxFQUFFLEdBQUU7QUFDMUMsYUFBTyxNQUFNLElBQUk7QUFDakIsYUFBTyxNQUFNLElBQUk7QUFDakIsYUFBTyxNQUFNO0FBQ2IsVUFBSSxLQUFLLE9BQU8sT0FBTyxRQUFRLENBQUMsTUFBTSxNQUFNO0FBQ3hDLGNBQU0sS0FBSztBQUFBLFVBQ1AsTUFBTTtBQUFBLFVBQ04sS0FBSyxLQUFLLE9BQU87QUFBQSxRQUNyQyxDQUFpQjtBQUFBLE1BQ0o7QUFBQSxJQUNKO0FBQ0QsV0FBTztBQUFBLEVBQ1Y7QUFBQSxFQUNKLHlCQUF5QjtBQUNsQixRQUFJLGFBQWEsS0FBSyxPQUFPLE9BQU87QUFDcEMsUUFBSSxXQUFXLFFBQVE7QUFDbkIsYUFBTztBQUFBLElBQ1Y7QUFDRCxVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLFFBQVEsS0FBSztBQUNuQixRQUFJLEtBQUssVUFBVSxNQUFNLFFBQVE7QUFDN0IsbUJBQWEsS0FBSyxVQUFVLEtBQUssT0FBTyxLQUFLLENBQUM7QUFBQSxJQUMxRCxPQUFlO0FBQ0gsbUJBQWEsS0FBSyxTQUFTLE9BQU87QUFBQSxJQUNyQztBQUNELGlCQUFhLEtBQUssT0FBTyxNQUFNO0FBQy9CLFdBQU87QUFBQSxFQUNWO0FBQUEsRUFDSixtQkFBbUIsT0FBTztBQUNuQixZQUFRLFlBQVksS0FBSyxRQUFRLEtBQUssSUFBSSxLQUFLLFdBQVcsS0FBSztBQUFBLEVBQ2xFO0FBQUEsRUFDSixpQkFBaUIsT0FBTztBQUNqQixVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFNLFVBQVUsS0FBSyxtQkFBbUIsS0FBSyxJQUFJLFFBQVEsU0FBUyxRQUFRO0FBQzFFLFdBQU8sWUFBWSxLQUFLLFFBQVEsVUFBVSxLQUFLLGNBQWMsS0FBSyxTQUFTLElBQUk7QUFBQSxFQUNsRjtBQUNMO0FBMUVJLGNBREUsaUJBQ0ssTUFBSztBQUNmLGNBRkssaUJBRUUsWUFBVyxVQUFVO0FDbDlWN0IsTUFBTSxjQUFjO0FBQUEsRUFDaEIsTUFBTTtBQUFBLElBQ0YsTUFBTTtBQUFBLElBQ04sVUFBVTtBQUFBLEVBQ2I7QUFBQSxFQUNELFNBQVM7QUFBQSxJQUNMLE1BQU07QUFBQSxJQUNOLFNBQVMsT0FBSztBQUFBLEVBQ2pCO0FBQUEsRUFDRCxTQUFTO0FBQUEsSUFDTCxNQUFNO0FBQUEsSUFDTixTQUFTLE1BQUksQ0FBRTtBQUFBLEVBQ2xCO0FBQUEsRUFDRCxjQUFjO0FBQUEsSUFDVixNQUFNO0FBQUEsSUFDTixTQUFTO0FBQUEsRUFDWjtBQUFBLEVBQ0QsWUFBWTtBQUFBLElBQ1IsTUFBTTtBQUFBLElBQ04sU0FBUztBQUFBLEVBQ1o7QUFDTDtBQUNBLE1BQU0sUUFBUTtBQUFBLEVBQ1YsTUFBTTtBQUFBLElBQ0YsTUFBTTtBQUFBLElBQ04sVUFBVTtBQUFBLEVBQ2I7QUFBQSxFQUNELEdBQUc7QUFDUDtBQUVBLE1BQU0sY0FBY0MsVUFBUSxPQUFPLE1BQU0sQ0FBQyxXQUFXLFVBQVEsT0FBTyxPQUFPLFdBQVc7QUFBQSxFQUM5RSxPQUFPO0FBQ2YsQ0FBSyxJQUFJLENBQUMsV0FBVyxVQUFRLE9BQU8sT0FBTyxXQUFXLEtBQUs7QUFDM0QsU0FBUyxhQUFhLEtBQUs7QUFDdkIsU0FBTyxRQUFRLEdBQUcsSUFBSSxNQUFNLEdBQUcsSUFBSTtBQUN2QztBQUNBLFNBQVMsV0FBVyxLQUFLO0FBQ3JCLE1BQUksTUFBTSxVQUFVLFNBQVMsS0FBSyxVQUFVLE9BQU8sU0FBUyxVQUFVLEtBQUs7QUFDM0UsU0FBTyxRQUFRLEdBQUcsSUFBSSxJQUFJLE1BQU0sS0FBSyxFQUFFLElBQUk7QUFDL0M7QUFDQSxTQUFTLFdBQVcsT0FBTyxhQUFhO0FBQ3BDLFFBQU0sVUFBVSxNQUFNO0FBQ3RCLE1BQUksV0FBVyxhQUFhO0FBQ3hCLFdBQU8sT0FBTyxTQUFTLFdBQVc7QUFBQSxFQUNyQztBQUNMO0FBQ0EsU0FBUyxVQUFVLGFBQWEsWUFBWTtBQUN4QyxjQUFZLFNBQVM7QUFDekI7QUFDQSxTQUFTLFlBQVksYUFBYSxjQUFjLGNBQWM7QUFDMUQsUUFBTSxnQkFBZ0I7QUFDdEIsY0FBWSxXQUFXLGFBQWEsSUFBSSxDQUFDLGdCQUFjO0FBRW5ELFVBQU0saUJBQWlCLFlBQVksU0FBUyxLQUFLLENBQUMsWUFBVSxRQUFRLGtCQUFrQixZQUFZLGFBQWE7QUFFL0csUUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksUUFBUSxjQUFjLFNBQVMsY0FBYyxHQUFHO0FBQ2hGLGFBQU87QUFBQSxRQUNILEdBQUc7QUFBQSxNQUNuQjtBQUFBLElBQ1M7QUFDRCxrQkFBYyxLQUFLLGNBQWM7QUFDakMsV0FBTyxPQUFPLGdCQUFnQixXQUFXO0FBQ3pDLFdBQU87QUFBQSxFQUNmLENBQUs7QUFDTDtBQUNBLFNBQVMsVUFBVSxNQUFNLGNBQWM7QUFDbkMsUUFBTSxXQUFXO0FBQUEsSUFDYixRQUFRLENBQUU7QUFBQSxJQUNWLFVBQVUsQ0FBRTtBQUFBLEVBQ3BCO0FBQ0ksWUFBVSxVQUFVLEtBQUssTUFBTTtBQUMvQixjQUFZLFVBQVUsS0FBSyxVQUFVLFlBQVk7QUFDakQsU0FBTztBQUNYO0FBZ0NBLE1BQU0sUUFBUSxnQkFBZ0I7QUFBQSxFQUMxQixPQUFPO0FBQUEsRUFDUCxNQUFPLE9BQU8sT0FBTztBQUNqQixRQUFJLEVBQUUsT0FBUyxJQUFHO0FBQ2xCLFVBQU0sWUFBWSxJQUFJLElBQUk7QUFDMUIsVUFBTSxXQUFXLFdBQVcsSUFBSTtBQUNoQyxXQUFPO0FBQUEsTUFDSCxPQUFPO0FBQUEsSUFDbkIsQ0FBUztBQUNELFVBQU0sY0FBYyxNQUFJO0FBQ3BCLFVBQUksQ0FBQyxVQUFVO0FBQU87QUFDdEIsWUFBTSxFQUFFLE1BQU8sTUFBTyxTQUFVLFNBQVUsYUFBZSxJQUFHO0FBQzVELFlBQU0sYUFBYSxVQUFVLE1BQU0sWUFBWTtBQUMvQyxZQUFNLGNBQWMsV0FBVyxZQUFZLElBQUk7QUFDL0MsZUFBUyxRQUFRLElBQUksUUFBUSxVQUFVLE9BQU87QUFBQSxRQUMxQztBQUFBLFFBQ0EsTUFBTTtBQUFBLFFBQ04sU0FBUztBQUFBLFVBQ0wsR0FBRztBQUFBLFFBQ047QUFBQSxRQUNEO0FBQUEsTUFDaEIsQ0FBYTtBQUFBLElBQ2I7QUFDUSxVQUFNLGVBQWUsTUFBSTtBQUNyQixZQUFNLFFBQVEsTUFBTSxTQUFTLEtBQUs7QUFDbEMsVUFBSSxPQUFPO0FBQ1AsY0FBTSxRQUFPO0FBQ2IsaUJBQVMsUUFBUTtBQUFBLE1BQ3BCO0FBQUEsSUFDYjtBQUNRLFVBQU0sU0FBUyxDQUFDLFVBQVE7QUFDcEIsWUFBTSxPQUFPLE1BQU0sVUFBVTtBQUFBLElBQ3pDO0FBQ1EsY0FBVSxXQUFXO0FBQ3JCLG9CQUFnQixZQUFZO0FBQzVCLFVBQU07QUFBQSxNQUNGLE1BQUksTUFBTTtBQUFBLE1BQ1YsTUFBSSxNQUFNO0FBQUEsSUFDdEIsR0FBVyxDQUFDQyxRQUFPLFdBQVM7QUFDaEIsVUFBSSxDQUFDLGtCQUFrQixhQUFhLElBQUlBLFFBQU8sQ0FBQyxrQkFBa0IsYUFBYSxJQUFJO0FBQ25GLFlBQU0sUUFBUSxNQUFNLFNBQVMsS0FBSztBQUNsQyxVQUFJLENBQUMsT0FBTztBQUNSO0FBQUEsTUFDSDtBQUNELFVBQUksZUFBZTtBQUNuQixVQUFJLGtCQUFrQjtBQUNsQixjQUFNLGNBQWMsYUFBYSxnQkFBZ0I7QUFDakQsY0FBTSxjQUFjLGFBQWEsZ0JBQWdCO0FBQ2pELFlBQUksZUFBZSxnQkFBZ0IsYUFBYTtBQUM1QyxxQkFBVyxPQUFPLFdBQVc7QUFDN0IseUJBQWU7QUFBQSxRQUNsQjtBQUFBLE1BQ0o7QUFDRCxVQUFJLGVBQWU7QUFDZixjQUFNLGFBQWEsYUFBYSxjQUFjLE1BQU07QUFDcEQsY0FBTSxhQUFhLGFBQWEsY0FBYyxNQUFNO0FBQ3BELGNBQU0sZUFBZSxhQUFhLGNBQWMsUUFBUTtBQUN4RCxjQUFNLGVBQWUsYUFBYSxjQUFjLFFBQVE7QUFDeEQsWUFBSSxlQUFlLFlBQVk7QUFDM0Isb0JBQVUsTUFBTSxPQUFPLE1BQU0sVUFBVTtBQUN2Qyx5QkFBZTtBQUFBLFFBQ2xCO0FBQ0QsWUFBSSxnQkFBZ0IsaUJBQWlCLGNBQWM7QUFDL0Msc0JBQVksTUFBTSxPQUFPLE1BQU0sY0FBYyxNQUFNLFlBQVk7QUFDL0QseUJBQWU7QUFBQSxRQUNsQjtBQUFBLE1BQ0o7QUFDRCxVQUFJLGNBQWM7QUFDZCxlQUFPLEtBQUs7QUFBQSxNQUNmO0FBQUEsSUFDYixHQUFXO0FBQUEsTUFDQyxNQUFNO0FBQUEsSUFDbEIsQ0FBUztBQUNELFdBQU8sTUFBSTtBQUNQLGFBQU8sRUFBRSxVQUFVO0FBQUEsUUFDZixLQUFLO0FBQUEsTUFDckIsQ0FBYTtBQUFBLElBQ2I7QUFBQSxFQUNLO0FBQ0wsQ0FBQztBQUVELFNBQVMsaUJBQWlCLE1BQU0sZUFBZTtBQUMzQyxVQUFRLFNBQVMsYUFBYTtBQUM5QixTQUFPLGdCQUFnQjtBQUFBLElBQ25CLE9BQU87QUFBQSxJQUNQLE1BQU8sT0FBTyxPQUFPO0FBQ2pCLFVBQUksRUFBRSxPQUFTLElBQUc7QUFDbEIsWUFBTUMsT0FBTSxXQUFXLElBQUk7QUFDM0IsWUFBTSxlQUFlLENBQUMsYUFBVztBQUM3QixhQUFJLFFBQVEscUNBQVU7QUFBQSxNQUN0QztBQUNZLGFBQU87QUFBQSxRQUNILE9BQU9BO0FBQUEsTUFDdkIsQ0FBYTtBQUNELGFBQU8sTUFBSTtBQUNQLGVBQU8sRUFBRSxPQUFPLFlBQVk7QUFBQSxVQUN4QixLQUFLO0FBQUEsUUFDekIsR0FBbUI7QUFBQSxVQUNDO0FBQUEsVUFDQSxHQUFHO0FBQUEsUUFDTixFQUFDO0FBQUEsTUFDbEI7QUFBQSxJQUNTO0FBQUEsRUFDVCxDQUFLO0FBQ0w7QUFDQSxNQUFNLE1BQXNCLGlDQUFpQixPQUFPLGFBQWE7QUFHakUsTUFBTSxNQUFzQixpQ0FBaUIsT0FBTyxhQUFhOzs7Ozs7Ozs7Ozs7Ozs7OztBQ2pNakVDLFlBQVEsU0FBUyxlQUFlLGFBQWEsWUFBWUMsY0FBT0MsZ0JBQVNDLGFBQU07QUF3Qi9FLFVBQU0sS0FBSztBQUNMLFlBQUUsTUFBTTtBQVlkLFVBQU0sV0FBVyxHQUFHO0FBQ3BCLFVBQU0sTUFBTSxJQUFJLElBQUksS0FBTTtBQVMxQixVQUFNLFlBQVksSUFBSSxLQUFPLGVBQWEsSUFDdEMsSUFBSSxLQUFLLEVBQUUsWUFDWCxRQUFJLEtBQUssRUFBRSxnQkFBZ0I7QUFHL0IsVUFBTSxjQUFjO0FBY1I7QUFBQSxNQUNWLEdBQUcsRUFBRSxrQ0FBa0MsS0FBSztBQUFBLE1BQzVDLEdBQUcsRUFBRSxrQ0FBa0MsS0FBSztBQUFBLE1BQzVDLEdBQUcsRUFBRSxvQ0FBb0MsS0FBSztBQUFBLE1BQzlDLEdBQUcsRUFBRSx1Q0FBdUMsS0FBSztBQUFBLE1BQ2pELEdBQUcsRUFBRSxxQ0FBcUMsS0FBSztBQUFBLE1BQy9DLEdBQUcsRUFBRSxzQ0FBc0MsS0FBSztBQUFBLE1BQ2hELEdBQUcsRUFBRSxzQ0FBc0MsS0FBSztBQUFBLE1BQ2hELEdBQUcsRUFBRSxxQ0FBcUMsS0FBTSxZQUFZO0FBQUEsTUFDNUQsR0FBRyxFQUFFLHNDQUFzQyxLQUFNLFlBQVk7QUFBQSxNQUM3RCxHQUFHLEVBQUUsbUNBQW1DLEtBQU0sWUFBWTtBQUFBLE1BQzFELEdBQUcsRUFBRSxtQ0FBbUMsS0FBTSxZQUFZO0FBQUEsTUFDMUQsR0FBRyxFQUFFLGlDQUFpQyxLQUFNLFlBQVk7QUFBQTtBQU0xRCxVQUFNLFFBQVEsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDdEQsVUFBTSxZQUFZLElBQUk7QUFBQSxNQUNwQixRQUFRO0FBQUEsTUFDUixVQUFVO0FBQUEsUUFDUjtBQUFBLFVBQ0UsT0FBTyxFQUFFLHFDQUFxQztBQUFBLFVBQzlDLGlCQUFpQjtBQUFBLFVBQ2pCLE1BQU0sTUFBTTtBQUFBLFFBQ2Q7QUFBQSxNQUNGO0FBQUEsS0FDRDtBQUNLLHdCQUFjLElBQUksSUFBSTtBQUN0QixvQkFBVSxTQUFTLE1BQU07QUFDN0IsVUFBSSxNQUFNO0FBQ04sV0FBQyxDQUFDLFlBQVksT0FBTTtBQUN0QixZQUFJLFlBQVksVUFBVSxzQkFBc0IsWUFBWSxVQUFVLHNCQUFxQjtBQUNuRjtBQUFBLFFBQ1I7QUFBQSxNQUNGO0FBQ087QUFBQSxLQUNSO0FBQ0ssdUJBQWEsU0FBUyxNQUFNO0FBQ2hDLFlBQU0sTUFBTTtBQUFBLFFBQ1YsVUFBVTtBQUFBLFFBQ1YsWUFBWTtBQUFBO0FBRVYsV0FBQyxRQUFRLE9BQU87QUFDbEIsWUFBSSxhQUFhO0FBQ2pCLFlBQUksU0FBUyxNQUFNO0FBQ25CLFlBQUksUUFBUSxNQUFNO0FBQUEsTUFDcEI7QUFDTztBQUFBLEtBQ1I7QUFDSyxtQkFBUyxJQUFJLEtBQUs7QUFFeEIsUUFBSSxlQUFlLE1BQU0sWUFBWSxNQUFNLFFBQVE7QUFHL0MsaUJBQVMsR0FBRyxTQUFRO0FBQ3RCLHFCQUFlLGdCQUFnQjtBQUMvQixrQkFBWSxhQUFhO0FBQUEsV0FHdEI7QUFDUywwQkFBUSxPQUFPLE9BQU8sWUFBWTtBQUN2Qyw4QkFBaUIscUJBQXFCLGlCQUFpQjtBQUFBLElBQ2hFO0FBQ0EsS0FBQyxZQUFXO0FBQ04sbUJBQVMsR0FBRyxTQUFRO0FBQ0c7QUFFbkIsZUFBQyxDQUFDLE1BQU0sZUFBZTtBQUN6QixrQkFBTSxhQUFhLHlCQUF5QixVQUFVLFFBQVEsTUFBTTtBQUFBLFFBQ3hFO0FBQUEsYUFFRztBQUVILGdCQUFRLDBCQUFNLE9BQU87QUFDckIsY0FBTSxNQUFNLE1BQU0sTUFBTSxRQUFRLE1BQU07QUFJdEMsWUFBSSxZQUFZO0FBQ2hCLFlBQUksSUFBSSxNQUFNLFNBQVMsSUFBSSxHQUFHO0FBQzVCLHNCQUFZLElBQUksS0FBSyxHQUFHLElBQUksTUFBTSxnQkFBZ0IsU0FBUztBQUFBLGVBRXhEO0FBQ0gsc0JBQVksSUFBSSxLQUFLLEdBQUcsSUFBSSxNQUFNLHFCQUFxQjtBQUFBLFFBQ3pEO0FBRUEsWUFBSSxDQUFDLENBQUMsTUFBTSxlQUFlLE9BQU07QUFDL0IsY0FBSSxTQUFTLE1BQU0sbUJBQW1CLE1BQU0sTUFBTTtBQUN6QyxvQkFBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLE1BQU0saUJBQWlCLE1BQU0sTUFBTSxJQUFJO0FBQ3RFLGNBQUksUUFBUTtBQUNWLGtCQUFNLE1BQU0sNnNFQUE2c0UsSUFBSSxLQUFLLGlEQUFpRCxVQUFVLFlBQVk7QUFFdnlFLGdCQUFJLGNBQWMsTUFBTSxNQUFNLFFBQVEsU0FBUztBQUUvQyxrQkFBTSxTQUFTLE1BQU0sU0FBUyxNQUFNLFFBQVEsR0FBRztBQUcvQyxnQkFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLE9BQU8sUUFBTztBQUM3Qiw2QkFBUyxvQkFBb0IsT0FBTyxNQUFNO0FBRWhELG9CQUFNLGNBQWM7QUFDZCwwQkFBTSxNQUFNLGlCQUFpQixNQUFNO0FBSXpDLDRCQUFjLENBQUMsQ0FBQyxjQUFjLGNBQWM7QUFDNUMsMEJBQVksYUFBYTtBQUN6QixvQkFBTSxNQUFNLFFBQVEsV0FBVyxhQUFhLEtBQUs7QUFBQSxZQUduRDtBQUFBLGlCQWtCQztBQUNHLHdCQUFNLFFBQVEsV0FBVztBQUFBLGNBQzdCLFVBQVU7QUFBQSxnQkFDUjtBQUFBLGtCQUNFLFVBQVU7QUFBQSxrQkFDVixTQUFTLEVBQUUsd0NBQXdDLEVBQUUsS0FBSyw4QkFBOEI7QUFBQSxnQkFDMUY7QUFBQSxjQUNGO0FBQUEsY0FDQSxvQkFBb0I7QUFBQSxhQUNyQjtBQUFBLFVBR0g7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUVBLFlBQU0sYUFBYSxjQUFjLFlBQVksQ0FBQyxJQUMxQyxPQUNBO0FBSUosWUFBTSxRQUFRO0FBQ1YsZ0JBQU0sR0FBRyxRQUFRO0FBQ3JCLGFBQU8sTUFBTSxJQUFHO0FBQ1Ysb0JBQVEsSUFBSSxPQUFPO0FBQ2pCLHVCQUFTLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUNyQyxZQUFJLFVBQVUsSUFBRztBQUNQO0FBQUEsUUFDVjtBQUNBLFlBQUksT0FBTyxVQUFVLENBQUMsU0FBUyxTQUFTLEtBQUssTUFBTSxJQUFHO0FBQzdDO0FBQUEsUUFDVDtBQUNBLFlBQUksUUFBUSxJQUFHO0FBQ2IsY0FBSSxVQUFVLEdBQUU7QUFDZCxrQkFBTSxLQUFLLEdBQUcsWUFBWSxNQUFNLFVBQVU7QUFDMUMsa0JBQU0sS0FBSyxHQUFHLFlBQVksTUFBTSxTQUFTLFlBQVk7QUFBQSxxQkFFOUMsUUFBUSxHQUFFO0FBQ1gsdUJBQUssR0FBRyxjQUFjLFVBQVU7QUFDdEMsa0JBQU0sS0FBSyxHQUFHLGNBQWMsU0FBUyxNQUFNO0FBQUEsaUJBRXhDO0FBQ0gsa0JBQU0sS0FBSyxHQUFHLFlBQVksTUFBTSxVQUFVO0FBQzFDLGtCQUFNLEtBQUssR0FBRyxZQUFZLE1BQU0sU0FBUyxNQUFNO0FBQUEsVUFDakQ7QUFBQSxlQUVHO0FBQ0cscUJBQUssR0FBRyxhQUFhLFVBQVU7QUFDckMsZ0JBQU0sS0FBSyxHQUFHLGFBQWEsU0FBUyxNQUFNO0FBQUEsUUFDNUM7QUFFQSxjQUFNLE1BQU0sTUFBTTtBQUFBLFVBQ2hCLElBQUksS0FBSyxNQUFNLEVBQUU7QUFBQSxVQUNqQixJQUFJLEtBQUssTUFBTSxFQUFFO0FBQUE7QUFFYixvQkFBTSxLQUFLLEdBQUc7QUFDcEI7QUFDQTtBQUFBLE1BQ0Y7QUFJQSxnQkFBVSxRQUFRO0FBQUEsUUFDaEIsUUFBUTtBQUFBLFFBQ1IsVUFBVTtBQUFBLFVBQ1I7QUFBQSxZQUNFLE9BQU8sRUFBRSxxQ0FBcUM7QUFBQSxZQUM5QyxpQkFBaUI7QUFBQSxZQUNqQixNQUFNLE1BQU07QUFBQSxVQUNkO0FBQUEsUUFDRjtBQUFBO0FBR0YsYUFBTyxRQUFRO0FBQUE7QUFLRixpQ0FBYyxXQUFpQixTQUFlO0FBQzNELFVBQUksTUFBTTtBQUNOLG1CQUFTLEdBQUcsU0FBUTtBQUN0QixjQUFNLFdBQVcsQ0FBQyxDQUFDLE1BQU0sYUFDckIsTUFBTSxhQUNOLGFBQWE7QUFDakIsbUJBQVcsS0FBSyxVQUFVO0FBQ3hCLGdCQUFNLElBQUksSUFBSSxLQUFLLFNBQVMsR0FBRyxJQUFJO0FBQy9CLG1CQUFLLGFBQWEsS0FBSztBQUFnQjtBQUFBLFFBQzdDO0FBQUEsYUFFRztBQUNILGNBQU0sUUFBUSxNQUFNLE1BQU0sUUFBUSxTQUFTO0FBQzNDLGNBQU0sV0FBVyxDQUFDLENBQUMsTUFBTSxhQUNyQixNQUFNLGFBQ0wsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sYUFBYSxNQUFNLGFBQWE7QUFDeEQsbUJBQVcsS0FBSyxVQUFVO0FBQ3hCLGdCQUFNLElBQUksSUFBSSxLQUFLLFNBQVMsR0FBRyxJQUFJO0FBQy9CLG1CQUFLLGFBQWEsS0FBSztBQUNsQjtBQUFBLFFBQ1g7QUFBQSxNQUNGO0FBRU87QUFBQSxJQUNUO0FBQ0EsYUFBUyxvQkFBb0IsS0FBVTtBQUNqQyxnQkFBTSxJQUFJLE1BQU07QUFFcEIsaUJBQVcsS0FBSyxLQUFLO0FBQ25CLGNBQU0sU0FBUyxJQUFJLElBQUksSUFBSSxJQUFJLEdBQUcsWUFBWTtBQUM5QyxZQUFJLFVBQVUsV0FBVyxJQUFJLEdBQUcsV0FBVTtBQUN4QztBQUFBLFFBQ0Y7QUFDQSxZQUFJLENBQUMsVUFBVyxVQUFVLFdBQVcsSUFBSSxHQUFHLFdBQVk7QUFDdEQsY0FBSSxPQUFPO1FBQ2I7QUFDVyx3QkFBSyxJQUFJLElBQUk7QUFDbEIseUJBQVcsSUFBSSxHQUFHLFdBQVc7QUFDL0IsZ0JBQUksTUFBTSxxQkFBcUI7QUFFekIsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDNUUsa0JBQUcsQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzNCLHdCQUFJLEdBQUcsT0FBTztBQUNaLDJCQUFLLGFBQWEsS0FBSyxFQUFDLFNBQVMsSUFBSSxHQUFHLEdBQUc7QUFBQSxxQkFFOUM7QUFDRyxtQ0FBYSxJQUFJLEtBQUssYUFBYSxVQUFVLFVBQVEsS0FBSyxZQUFZLElBQUksR0FBRyxFQUFFO0FBQ2pGLHdCQUFJLEdBQUcsT0FBTyxNQUFLO0FBQ3JCLHNCQUFJLGVBQWU7QUFDYiw2QkFBSyxhQUFhLEtBQUssRUFBQyxTQUFTLElBQUksR0FBRyxHQUFHO0FBQUE7QUFFL0Msd0JBQUksS0FBSyxhQUFhLFlBQVksVUFBVSxJQUFJLEdBQUc7QUFBQSxnQkFDdkQ7QUFBQSxjQUNGO0FBQUEsdUJBRU0sTUFBTSxnQ0FBZ0M7QUFDeEMsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFFMUUsa0JBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzVCLHlCQUFLLGFBQWEsS0FBSyxFQUFDLG9CQUFvQixJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUV4RDtBQUNJLG1DQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDN0Ysb0JBQUksZUFBZTtBQUNiLDJCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLHFCQUFxQixJQUFJLEdBQUc7QUFBQTtBQUVwRixzQkFBSSxLQUFLLGFBQWEsWUFBWSxxQkFBcUIsSUFBSSxHQUFHO0FBQUEsY0FDbEU7QUFBQSx1QkFHSSxNQUFNLHFCQUFxQjtBQUM3Qix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsU0FBUyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU3QztBQUNJLHFDQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDekYsMEJBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsd0JBQUcsZUFBZTtBQUNaLCtCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFVBQVUsSUFBSSxHQUFHO0FBQUE7QUFFekUsMEJBQUksS0FBSyxhQUFhLFlBQVksVUFBVSxJQUFJLEdBQUc7QUFBQSxrQkFDdkQ7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSx1QkFFTSxNQUFNLHVCQUF1QjtBQUMvQix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUUvQztBQUNJLHFDQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDekYsMEJBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsd0JBQUksZUFBZTtBQUNiLCtCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFlBQVksSUFBSSxHQUFHO0FBQUE7QUFFM0UsMEJBQUksS0FBSyxhQUFhLFlBQVksWUFBWSxJQUFJLEdBQUc7QUFBQSxrQkFDekQ7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHNCQUFzQjtBQUUvQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUvQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLEVBQUU7QUFDbEYsd0JBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsc0JBQUksZUFBZTtBQUNiLDZCQUFLLFlBQVksS0FBSyxFQUFDLFdBQVcsSUFBSSxHQUFHLEdBQUc7QUFBQTtBQUVoRCx3QkFBSSxLQUFLLFlBQVksWUFBWSxZQUFZLElBQUksR0FBRztBQUFBLGdCQUN4RDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLGlCQUFpQjtBQUUxQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsTUFBTSxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUxQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsT0FBTyxJQUFJLEdBQUc7QUFBQTtBQUVwRSx3QkFBSSxLQUFLLFlBQVksWUFBWSxPQUFPLElBQUksR0FBRztBQUFBLGdCQUNuRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHlCQUF5QjtBQUVsQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsY0FBYyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUVsRDtBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsZUFBZSxJQUFJLEdBQUc7QUFBQTtBQUU1RSx3QkFBSSxLQUFLLFlBQVksWUFBWSxlQUFlLElBQUksR0FBRztBQUFBLGdCQUMzRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHdCQUF3QjtBQUVqQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsYUFBYSxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUVqRDtBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsY0FBYyxJQUFJLEdBQUc7QUFBQTtBQUUzRSx3QkFBSSxLQUFLLFlBQVksWUFBWSxjQUFjLElBQUksR0FBRztBQUFBLGdCQUMxRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHNCQUFzQjtBQUUvQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUvQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsWUFBWSxJQUFJLEdBQUc7QUFBQTtBQUV6RSx3QkFBSSxLQUFLLFlBQVksWUFBWSxZQUFZLElBQUksR0FBRztBQUFBLGdCQUN4RDtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBQUEsaUJBRUc7QUFDSCxnQkFBSSxNQUFNLG1CQUFtQjtBQUN2Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGNBQWMsSUFBSSxHQUFHO0FBQUEsY0FDMUM7QUFBQSx1QkFFTSxNQUFNLGtCQUFpQjtBQUN6Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGFBQWEsSUFBSSxHQUFHO0FBQUEsY0FDekM7QUFBQSx1QkFFTyxNQUFNLGNBQWE7QUFDdEIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxTQUFTLElBQUksR0FBRztBQUFBLGNBQ3JDO0FBQUEsdUJBRU8sTUFBTSxtQkFBa0I7QUFDM0IsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxjQUFjLElBQUksR0FBRztBQUFBLGNBQzFDO0FBQUEsdUJBRU8sTUFBTSxrQkFBaUI7QUFDMUIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxhQUFhLElBQUksR0FBRztBQUFBLGNBQ3pDO0FBQUEsdUJBRU8sTUFBTSxrQkFBaUI7QUFDMUIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxhQUFhLElBQUksR0FBRztBQUFBLGNBQ3pDO0FBQUEsdUJBRU8sTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLGFBQWEsSUFBSSxHQUFHO0FBQUEsY0FDeEM7QUFBQSx1QkFFTyxNQUFNLFlBQVc7QUFDcEIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFFBQVEsSUFBSSxHQUFHO0FBQUEsY0FDbkM7QUFBQSx1QkFFTyxNQUFNLGVBQWM7QUFDdkIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFdBQVcsSUFBSSxHQUFHO0FBQUEsY0FDdEM7QUFBQSx1QkFFTyxNQUFNLGFBQVk7QUFDckIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFNBQVMsSUFBSSxHQUFHO0FBQUEsY0FDcEM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3ZDO0FBQUEsdUJBRU8sTUFBTSx1QkFBc0I7QUFDL0IsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3BFLGtCQUFJLEtBQUssU0FBUyxtQkFBbUIsSUFBSSxHQUFHO0FBQUEsdUJBRXJDLE1BQU0sZ0JBQWU7QUFDeEIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDdkM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3ZDO0FBQUEsdUJBRU8sTUFBTSxhQUFZO0FBQ3JCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxTQUFTLElBQUksR0FBRztBQUFBLGNBQ3BDO0FBQUEsdUJBRU8sTUFBTSxxQkFBb0I7QUFDN0IsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLGlCQUFpQixJQUFJLEdBQUc7QUFBQSxjQUM1QztBQUFBLHVCQUVPLE1BQU0sZUFBYztBQUN2Qix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsV0FBVyxJQUFJLEdBQUc7QUFBQSxjQUN0QztBQUFBLHVCQUVPLE1BQU0sa0JBQWlCO0FBQzFCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsYUFBYSxJQUFJLEdBQUc7QUFBQSxjQUN6QztBQUFBLHVCQUVPLE1BQU0sYUFBWTtBQUNyQix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFFBQVEsSUFBSSxHQUFHO0FBQUEsY0FDcEM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsV0FBVyxJQUFJLEdBQUc7QUFBQSxjQUN2QztBQUFBLHVCQUVPLE1BQU0sY0FBYTtBQUN0Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFNBQVMsSUFBSSxHQUFHO0FBQUEsY0FDckM7QUFBQSx1QkFFTyxNQUFNLGlCQUFnQjtBQUN6Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDeEM7QUFBQSx1QkFFTyxNQUFNLHdCQUF1QjtBQUNoQyx1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDdEUsa0JBQUksS0FBSyxVQUFVLG1CQUFtQixJQUFJLEdBQUc7QUFBQSx1QkFFdEMsTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3hDO0FBQUEsdUJBRU8sTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3hDO0FBQUEsdUJBRU8sTUFBTSxjQUFhO0FBQ3RCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsU0FBUyxJQUFJLEdBQUc7QUFBQSxjQUNyQztBQUFBLHVCQUVPLE1BQU0sc0JBQXFCO0FBQzlCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsaUJBQWlCLElBQUksR0FBRztBQUFBLGNBQzdDO0FBQUEsdUJBRU8sTUFBTSxnQkFBZTtBQUN4Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFdBQVcsSUFBSSxHQUFHO0FBQUEsY0FDdkM7QUFBQSx1QkFFTSxNQUFNLHFCQUFxQjtBQUM3Qix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsU0FBUyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU3QztBQUNFLDJCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFVBQVUsSUFBSSxHQUFHO0FBQUEsZ0JBQzNFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0sZ0NBQWdDO0FBQ3hDLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxvQkFBb0IsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFeEQ7QUFDRSwyQkFBSyxhQUFhLElBQUksS0FBSyxhQUFhLFNBQVMsR0FBRyxxQkFBcUIsSUFBSSxHQUFHO0FBQUEsZ0JBQ3RGO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0scUJBQXFCO0FBQzdCLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxTQUFTLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTdDO0FBQ0UsMkJBQUssYUFBYSxJQUFJLEtBQUssYUFBYSxTQUFTLEdBQUcsVUFBVSxJQUFJLEdBQUc7QUFBQSxnQkFDM0U7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSx1QkFBdUI7QUFDL0IsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDeEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzVCLDJCQUFLLGFBQWEsS0FBSyxFQUFDLFdBQVcsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFL0M7QUFDRSwyQkFBSyxhQUFhLElBQUksS0FBSyxhQUFhLFNBQVMsR0FBRyxZQUFZLElBQUksR0FBRztBQUFBLGdCQUM3RTtBQUFBLGNBQ0Y7QUFBQSx1QkFHTSxNQUFNLHNCQUFzQjtBQUM5Qix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUN0RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDM0IsMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU5QztBQUNFLDJCQUFLLFlBQVksSUFBSSxLQUFLLFlBQVksU0FBUyxHQUFHLFlBQVksSUFBSSxHQUFHO0FBQUEsZ0JBQzNFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0saUJBQWlCO0FBQ3pCLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3RFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMzQiwyQkFBSyxZQUFZLEtBQUssRUFBQyxNQUFNLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRXpDO0FBQ0UsMkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsT0FBTyxJQUFJLEdBQUc7QUFBQSxnQkFDdEU7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSx5QkFBeUI7QUFDakMsdUJBQUssY0FBYyxJQUFJLEtBQUssZ0JBQWdCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDdEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssWUFBWSxRQUFPO0FBQzNCLDJCQUFLLFlBQVksS0FBSyxFQUFDLGNBQWMsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFakQ7QUFDRSwyQkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxlQUFlLElBQUksR0FBRztBQUFBLGdCQUM5RTtBQUFBLGNBQ0Y7QUFBQSx1QkFHTSxNQUFNLHdCQUF3QjtBQUNoQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUN0RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDM0IsMkJBQUssWUFBWSxLQUFLLEVBQUMsYUFBYSxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUVoRDtBQUNFLDJCQUFLLFlBQVksSUFBSSxLQUFLLFlBQVksU0FBUyxHQUFHLGNBQWMsSUFBSSxHQUFHO0FBQUEsZ0JBQzdFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0sc0JBQXNCO0FBQzlCLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3RFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMzQiwyQkFBSyxZQUFZLEtBQUssRUFBQyxXQUFXLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTlDO0FBQ0UsMkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsWUFBWSxJQUFJLEdBQUc7QUFBQSxnQkFDM0U7QUFBQSxjQUNGO0FBQUEsbUJBR0c7QUFDQyx1QkFBSyxLQUFLLElBQUksR0FBRztBQUFBLFlBQ3ZCO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQ087QUFBQSxJQUNUO0FBQ0EsYUFBUyxjQUFjLE1BQWE7QUFDbEMsVUFBSSxNQUFNO0FBQ1YsVUFBSSxRQUFRLEtBQUk7QUFDZCxZQUFJLENBQUMsT0FBTyxVQUFVLE9BQU8sQ0FBQyxLQUN6QixDQUFDLE9BQU8sVUFBVSxPQUFPLEdBQUcsS0FDNUIsQ0FBQyxPQUFPLFVBQVUsT0FBTyxHQUFHLEdBQUU7QUFDMUI7QUFBQSxRQUVBLGtCQUFPLFVBQVUsT0FBTyxDQUFDLEdBQUU7QUFDOUIscUJBQU8sVUFBVSxPQUFPLEdBQUcsS0FDMUIsQ0FBQyxPQUFPLFVBQVUsT0FBTyxHQUFHLEdBQUU7QUFDMUI7QUFBQSxpQkFFSjtBQUNHO0FBQUEsVUFDUjtBQUFBLFFBQ1Esa0JBQU8sVUFBVSxPQUFPLEdBQUcsR0FBRztBQUNoQztBQUFBLFFBQ1I7QUFBQSxNQUNGO0FBQ087QUFBQSxJQUNUO0FBQ0EsYUFBUyxvQkFBbUI7QUFFZCwwQkFBUSxPQUFPLFlBQVk7QUFBQSxJQUN6Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0ekJRSCxxQkFBUyxZQUFZRSxnQkFBU0MsYUFBTTtBQXVCNUMsVUFBTSxLQUFLO0FBQ1gsVUFBTSxXQUFXLEdBQUc7QUFDZCxZQUFFLE1BQU07QUFhVixtQkFBVyxNQUNiLFFBQVEsTUFDUixVQUFVLE1BQ1YsU0FBUyxNQUNULFlBQVksSUFBSTtBQUFBLE1BQ2QsUUFBUTtBQUFBLFFBQ04sRUFBRSxnQ0FBZ0M7QUFBQSxRQUNsQyxFQUFFLGtDQUFrQztBQUFBLFFBQ3BDLEVBQUUsaUNBQWlDO0FBQUEsTUFDckM7QUFBQSxNQUNBLFVBQVU7QUFBQSxRQUNSO0FBQUEsVUFDRSxpQkFBaUIsQ0FBQyxXQUFXLFdBQVcsU0FBUztBQUFBLFVBQ2pELE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUFBLFFBQ2hCO0FBQUEsTUFDRjtBQUFBLEtBQ0Q7QUFDRyx3QkFBYyxJQUFJLElBQUk7QUFDdEIsb0JBQVUsU0FBUyxNQUFNO0FBQzdCLFVBQUksTUFBTTtBQUNOLFdBQUMsQ0FBQyxZQUFZLE9BQU07QUFDdEIsWUFBSSxZQUFZLFVBQVUsc0JBQXNCLFlBQVksVUFBVSxzQkFBcUI7QUFDbkY7QUFBQSxRQUNSO0FBQUEsTUFDRjtBQUNPO0FBQUEsS0FDUjtBQUNLLHVCQUFhLFNBQVMsTUFBTTtBQUNoQyxZQUFNLE1BQU07QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFlBQVk7QUFBQTtBQUdWLFdBQUMsUUFBUSxPQUFPO0FBQ2xCLFlBQUksYUFBYTtBQUNiLHFCQUFTLEdBQUcsTUFBTTtBQUNsQixvQkFBUSxHQUFHLE1BQU07QUFBQSxNQUN2QjtBQUNPO0FBQUEsS0FDUjtBQUNLLG1CQUFTLElBQUksS0FBSztBQVN4QixRQUFJLGVBQWUsTUFBTSxZQUFZLE1BQU0sUUFBUTtBQUcvQyxpQkFBUyxHQUFHLFNBQVM7QUFDdkIscUJBQWUsZ0JBQWdCO0FBQy9CLGtCQUFZLGFBQWE7QUFBQSxXQUV0QjtBQUNTLDBCQUFRLE9BQU8sT0FBTyxZQUFZO0FBQ3ZDLDhCQUFpQixxQkFBcUIsaUJBQWlCO0FBQUEsSUFDaEU7QUFFQSxLQUFDLFlBQVk7QUFDUCxtQkFBUyxHQUFHLFNBQVE7QUFDRztBQUVuQixlQUFDLENBQUMsTUFBTSxlQUFlO0FBQ3pCLGtCQUFNLGFBQWEseUJBQXlCLFVBQVUsUUFBUSxNQUFNO0FBQUEsUUFDeEU7QUFBQSxhQUVFO0FBQ0YsZ0JBQVEsMEJBQU0sT0FBTztBQUNyQixjQUFNLE1BQU0sTUFBTSxNQUFNLFFBQVEsTUFBTTtBQUN0QyxZQUFJLFlBQVk7QUFDVixvQkFBTSxJQUFJO0FBQ1osZ0JBQUksU0FBUyxJQUFJLEdBQUc7QUFDdEIsc0JBQVksSUFBSSxLQUFLLEdBQUcsSUFBSSxnQkFBZ0IsU0FBUztBQUFBLGVBRWxEO0FBQ0gsc0JBQVksSUFBSSxLQUFLLEdBQUcsSUFBSSxZQUFxQjtBQUFBLFFBQ25EO0FBQ0EsWUFBSSxDQUFDLENBQUMsTUFBTSxlQUFlLE9BQU07QUFDL0IsY0FBSSxTQUFTLE1BQU0sbUJBQW1CLE1BQU0sTUFBTTtBQUN6QyxvQkFBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLE1BQU0saUJBQWlCLE1BQU0sTUFBTSxJQUFJO0FBQ3RFLGNBQUksUUFBUTtBQUNWLGtCQUFNLE1BQU0sNnNFQUE2c0UsSUFBSSxLQUFLLGlEQUFpRCxVQUFVLFlBQVk7QUFFdnlFLGdCQUFJLGNBQWMsTUFBTSxNQUFNLFFBQVEsU0FBUztBQUUvQyxrQkFBTSxTQUFTLE1BQU0sU0FBUyxNQUFNLFFBQVEsR0FBRztBQUUzQyx1QkFBTyxPQUFPLFFBQU87QUFDakIsNkJBQVMsb0JBQW9CLE9BQU8sTUFBTTtBQUVoRCxvQkFBTSxjQUFjO0FBQ2QsMEJBQU0sTUFBTSxpQkFBaUIsTUFBTTtBQUV6Qyw0QkFBYyxDQUFDLENBQUMsY0FBYyxjQUFjO0FBQzVDLDBCQUFZLGFBQWE7QUFDekIsb0JBQU0sTUFBTSxRQUFRLFdBQVcsYUFBYSxLQUFLO0FBQUEsWUFDbkQ7QUFBQSxpQkFFQztBQUNHLHdCQUFNLFFBQVEsV0FBVztBQUFBLGNBQzdCLFVBQVU7QUFBQSxnQkFDUjtBQUFBLGtCQUNFLFVBQVU7QUFBQSxrQkFDVixTQUFTLEVBQUUsd0NBQXdDLEVBQUUsS0FBSyw4QkFBOEI7QUFBQSxnQkFDMUY7QUFBQSxjQUNGO0FBQUEsY0FDQSxvQkFBb0I7QUFBQSxhQUNyQjtBQUFBLFVBQ0g7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUNBLGlCQUFXLE1BQU07QUFFYixtQkFBUyxPQUFPLFNBQVM7QUFDbkIsNEJBQWEsU0FBUyxLQUFLLE1BQU8sU0FBUyxLQUFLLFFBQVEsQ0FBQyxDQUFDO0FBQUE7QUFDdkQ7QUFDVCxtQkFBUyxPQUFPLFNBQVM7QUFDakIsOEJBQWEsU0FBUyxPQUFPLE1BQU8sU0FBUyxLQUFLLFFBQVEsQ0FBQyxDQUFDO0FBQUE7QUFDekQ7QUFDWCxtQkFBUyxPQUFPLFNBQVM7QUFDbEIsNkJBQWEsU0FBUyxNQUFNLE1BQU8sU0FBUyxLQUFLLFFBQVEsQ0FBQyxDQUFDO0FBQUE7QUFDeEQ7QUFFZCxnQkFBVSxRQUFRO0FBQUEsUUFDaEIsUUFBUTtBQUFBLFVBQ04sRUFBRSxnQ0FBZ0M7QUFBQSxVQUNsQyxFQUFFLGtDQUFrQztBQUFBLFVBQ3BDLEVBQUUsaUNBQWlDO0FBQUEsUUFDckM7QUFBQSxRQUNBLFVBQVU7QUFBQSxVQUNSO0FBQUEsWUFDRSxpQkFBaUIsQ0FBQyxXQUFXLFdBQVcsU0FBUztBQUFBLFlBQ2pELE1BQU0sQ0FBQyxPQUFPLFNBQVMsTUFBTTtBQUFBLFVBQy9CO0FBQUEsUUFDRjtBQUFBO0FBRUYsYUFBTyxRQUFRO0FBQUE7QUFvQmpCLG1CQUFlLG1CQUFtQjtBQUM1QixnQkFBTSxFQUFFLElBQUksR0FBRyxNQUFNLEdBQUcsS0FBSyxHQUFHLEtBQUs7QUFDckMsbUJBQVMsR0FBRyxTQUFRO0FBQ3RCLGNBQU0sV0FBVyxDQUFDLENBQUMsTUFBTSxhQUNyQixNQUFNLGFBQ04sYUFBYTtBQUNqQixtQkFBVyxLQUFLLFVBQVU7QUFDYiwwQkFBSyxTQUFTLEdBQUcsYUFBYTtBQUN2QyxnQkFBSSxTQUFTLEdBQUcsWUFBWSxHQUFHLE1BQU07QUFFakMsK0JBQVMsR0FBRyxZQUFZLEdBQUc7QUFBQSxxQkFFdEI7QUFDSCxzQkFBSSxNQUFNO0FBQ1Ysc0JBQUksT0FBTztBQUNYO0FBQUEscUJBQ0c7QUFDSCxzQkFBSSxRQUFRO0FBQ1osc0JBQUksT0FBTztBQUNYO0FBQUEscUJBQ0c7QUFDSCxzQkFBSSxPQUFPO0FBQ1gsc0JBQUksT0FBTztBQUNYO0FBQUE7QUFBQSxZQUlOO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxhQUVHO0FBQ0gsY0FBTSxRQUFRLE1BQU0sTUFBTSxRQUFRLFNBQVM7QUFDM0MsY0FBTSxXQUFXLENBQUMsQ0FBQyxNQUFNLGFBQ3ZCLE1BQU0sYUFDTCxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxhQUFhLE1BQU0sYUFBYTtBQUl0RCxtQkFBVyxLQUFLLFVBQVU7QUFDYiwwQkFBSyxTQUFTLEdBQUcsYUFBYTtBQUN2QyxnQkFBSSxTQUFTLEdBQUcsWUFBWSxHQUFHLE1BQU07QUFFakMsK0JBQVMsR0FBRyxZQUFZLEdBQUc7QUFBQSxxQkFFdEI7QUFDSCxzQkFBSSxNQUFNO0FBQ1Ysc0JBQUksT0FBTztBQUNYO0FBQUEscUJBQ0c7QUFDSCxzQkFBSSxRQUFRO0FBQ1osc0JBQUksT0FBTztBQUNYO0FBQUEscUJBQ0c7QUFDSCxzQkFBSSxPQUFPO0FBQ1gsc0JBQUksT0FBTztBQUNYO0FBQUE7QUFBQSxZQUlOO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQ087QUFBQSxJQUNUO0FBQ0EsYUFBUyxvQkFBb0IsS0FBVTtBQUNqQyxnQkFBTSxJQUFJLE1BQU07QUFDcEIsaUJBQVcsS0FBSyxLQUFLO0FBQ25CLGNBQU0sU0FBUyxJQUFJLElBQUksSUFBSSxJQUFJLEdBQUcsWUFBWTtBQUM5QyxZQUFJLFVBQVUsV0FBVyxJQUFJLEdBQUcsV0FBVTtBQUN4QztBQUFBLFFBQ0Y7QUFDQSxZQUFJLENBQUMsVUFBVyxVQUFVLFdBQVcsSUFBSSxHQUFHLFdBQVk7QUFDdEQsY0FBSSxPQUFPO1FBQ2I7QUFDVyx3QkFBSyxJQUFJLElBQUk7QUFDbEIseUJBQVcsSUFBSSxHQUFHLFdBQVc7QUFDL0IsZ0JBQUksTUFBTSxxQkFBcUI7QUFFekIsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDNUUsa0JBQUcsQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzNCLHdCQUFJLEdBQUcsT0FBTztBQUNaLDJCQUFLLGFBQWEsS0FBSyxFQUFDLFNBQVMsSUFBSSxHQUFHLEdBQUc7QUFBQSxxQkFFOUM7QUFDRyxtQ0FBYSxJQUFJLEtBQUssYUFBYSxVQUFVLFVBQVEsS0FBSyxZQUFZLElBQUksR0FBRyxFQUFFO0FBQ2pGLHdCQUFJLEdBQUcsT0FBTyxNQUFLO0FBQ3JCLHNCQUFJLGVBQWU7QUFDYiw2QkFBSyxhQUFhLEtBQUssRUFBQyxTQUFTLElBQUksR0FBRyxHQUFHO0FBQUE7QUFFL0Msd0JBQUksS0FBSyxhQUFhLFlBQVksVUFBVSxJQUFJLEdBQUc7QUFBQSxnQkFDdkQ7QUFBQSxjQUNGO0FBQUEsdUJBRU0sTUFBTSxnQ0FBZ0M7QUFDeEMsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFFMUUsa0JBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzVCLHlCQUFLLGFBQWEsS0FBSyxFQUFDLG9CQUFvQixJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUV4RDtBQUNJLG1DQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDN0Ysb0JBQUksZUFBZTtBQUNiLDJCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLHFCQUFxQixJQUFJLEdBQUc7QUFBQTtBQUVwRixzQkFBSSxLQUFLLGFBQWEsWUFBWSxxQkFBcUIsSUFBSSxHQUFHO0FBQUEsY0FDbEU7QUFBQSx1QkFHSSxNQUFNLHFCQUFxQjtBQUM3Qix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsU0FBUyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU3QztBQUNJLHFDQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDekYsMEJBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsd0JBQUcsZUFBZTtBQUNaLCtCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFVBQVUsSUFBSSxHQUFHO0FBQUE7QUFFekUsMEJBQUksS0FBSyxhQUFhLFlBQVksVUFBVSxJQUFJLEdBQUc7QUFBQSxrQkFDdkQ7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSx1QkFFTSxNQUFNLHVCQUF1QjtBQUMvQix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUUvQztBQUNJLHFDQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDekYsMEJBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsd0JBQUksZUFBZTtBQUNiLCtCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFlBQVksSUFBSSxHQUFHO0FBQUE7QUFFM0UsMEJBQUksS0FBSyxhQUFhLFlBQVksWUFBWSxJQUFJLEdBQUc7QUFBQSxrQkFDekQ7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHNCQUFzQjtBQUUvQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUvQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLEVBQUU7QUFDbEYsd0JBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsc0JBQUksZUFBZTtBQUNiLDZCQUFLLFlBQVksS0FBSyxFQUFDLFdBQVcsSUFBSSxHQUFHLEdBQUc7QUFBQTtBQUVoRCx3QkFBSSxLQUFLLFlBQVksWUFBWSxZQUFZLElBQUksR0FBRztBQUFBLGdCQUN4RDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLGlCQUFpQjtBQUUxQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsTUFBTSxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUxQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsT0FBTyxJQUFJLEdBQUc7QUFBQTtBQUVwRSx3QkFBSSxLQUFLLFlBQVksWUFBWSxPQUFPLElBQUksR0FBRztBQUFBLGdCQUNuRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHlCQUF5QjtBQUVsQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsY0FBYyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUVsRDtBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsZUFBZSxJQUFJLEdBQUc7QUFBQTtBQUU1RSx3QkFBSSxLQUFLLFlBQVksWUFBWSxlQUFlLElBQUksR0FBRztBQUFBLGdCQUMzRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHdCQUF3QjtBQUVqQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsYUFBYSxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUVqRDtBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsY0FBYyxJQUFJLEdBQUc7QUFBQTtBQUUzRSx3QkFBSSxLQUFLLFlBQVksWUFBWSxjQUFjLElBQUksR0FBRztBQUFBLGdCQUMxRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHNCQUFzQjtBQUUvQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUvQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsWUFBWSxJQUFJLEdBQUc7QUFBQTtBQUV6RSx3QkFBSSxLQUFLLFlBQVksWUFBWSxZQUFZLElBQUksR0FBRztBQUFBLGdCQUN4RDtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBQUEsaUJBRUc7QUFDSCxnQkFBSSxNQUFNLG1CQUFtQjtBQUN2Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGNBQWMsSUFBSSxHQUFHO0FBQUEsY0FDMUM7QUFBQSx1QkFFTSxNQUFNLGtCQUFpQjtBQUN6Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGFBQWEsSUFBSSxHQUFHO0FBQUEsY0FDekM7QUFBQSx1QkFFTyxNQUFNLGNBQWE7QUFDdEIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxTQUFTLElBQUksR0FBRztBQUFBLGNBQ3JDO0FBQUEsdUJBRU8sTUFBTSxtQkFBa0I7QUFDM0IsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxjQUFjLElBQUksR0FBRztBQUFBLGNBQzFDO0FBQUEsdUJBRU8sTUFBTSxrQkFBaUI7QUFDMUIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxhQUFhLElBQUksR0FBRztBQUFBLGNBQ3pDO0FBQUEsdUJBRU8sTUFBTSxrQkFBaUI7QUFDMUIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxhQUFhLElBQUksR0FBRztBQUFBLGNBQ3pDO0FBQUEsdUJBRU8sTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLGFBQWEsSUFBSSxHQUFHO0FBQUEsY0FDeEM7QUFBQSx1QkFFTyxNQUFNLFlBQVc7QUFDcEIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFFBQVEsSUFBSSxHQUFHO0FBQUEsY0FDbkM7QUFBQSx1QkFFTyxNQUFNLGVBQWM7QUFDdkIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFdBQVcsSUFBSSxHQUFHO0FBQUEsY0FDdEM7QUFBQSx1QkFFTyxNQUFNLGFBQVk7QUFDckIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFNBQVMsSUFBSSxHQUFHO0FBQUEsY0FDcEM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3ZDO0FBQUEsdUJBRU8sTUFBTSx1QkFBc0I7QUFDL0IsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3BFLGtCQUFJLEtBQUssU0FBUyxtQkFBbUIsSUFBSSxHQUFHO0FBQUEsdUJBRXJDLE1BQU0sZ0JBQWU7QUFDeEIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDdkM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3ZDO0FBQUEsdUJBRU8sTUFBTSxhQUFZO0FBQ3JCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxTQUFTLElBQUksR0FBRztBQUFBLGNBQ3BDO0FBQUEsdUJBRU8sTUFBTSxxQkFBb0I7QUFDN0IsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLGlCQUFpQixJQUFJLEdBQUc7QUFBQSxjQUM1QztBQUFBLHVCQUVPLE1BQU0sZUFBYztBQUN2Qix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsV0FBVyxJQUFJLEdBQUc7QUFBQSxjQUN0QztBQUFBLHVCQUVPLE1BQU0sa0JBQWlCO0FBQzFCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsYUFBYSxJQUFJLEdBQUc7QUFBQSxjQUN6QztBQUFBLHVCQUVPLE1BQU0sYUFBWTtBQUNyQix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFFBQVEsSUFBSSxHQUFHO0FBQUEsY0FDcEM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsV0FBVyxJQUFJLEdBQUc7QUFBQSxjQUN2QztBQUFBLHVCQUVPLE1BQU0sY0FBYTtBQUN0Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFNBQVMsSUFBSSxHQUFHO0FBQUEsY0FDckM7QUFBQSx1QkFFTyxNQUFNLGlCQUFnQjtBQUN6Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDeEM7QUFBQSx1QkFFTyxNQUFNLHdCQUF1QjtBQUNoQyx1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDdEUsa0JBQUksS0FBSyxVQUFVLG1CQUFtQixJQUFJLEdBQUc7QUFBQSx1QkFFdEMsTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3hDO0FBQUEsdUJBRU8sTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3hDO0FBQUEsdUJBRU8sTUFBTSxjQUFhO0FBQ3RCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsU0FBUyxJQUFJLEdBQUc7QUFBQSxjQUNyQztBQUFBLHVCQUVPLE1BQU0sc0JBQXFCO0FBQzlCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsaUJBQWlCLElBQUksR0FBRztBQUFBLGNBQzdDO0FBQUEsdUJBRU8sTUFBTSxnQkFBZTtBQUN4Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFdBQVcsSUFBSSxHQUFHO0FBQUEsY0FDdkM7QUFBQSx1QkFFTSxNQUFNLHFCQUFxQjtBQUM3Qix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsU0FBUyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU3QztBQUNFLDJCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFVBQVUsSUFBSSxHQUFHO0FBQUEsZ0JBQzNFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0sZ0NBQWdDO0FBQ3hDLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxvQkFBb0IsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFeEQ7QUFDRSwyQkFBSyxhQUFhLElBQUksS0FBSyxhQUFhLFNBQVMsR0FBRyxxQkFBcUIsSUFBSSxHQUFHO0FBQUEsZ0JBQ3RGO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0scUJBQXFCO0FBQzdCLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxTQUFTLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTdDO0FBQ0UsMkJBQUssYUFBYSxJQUFJLEtBQUssYUFBYSxTQUFTLEdBQUcsVUFBVSxJQUFJLEdBQUc7QUFBQSxnQkFDM0U7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSx1QkFBdUI7QUFDL0IsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDeEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzVCLDJCQUFLLGFBQWEsS0FBSyxFQUFDLFdBQVcsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFL0M7QUFDRSwyQkFBSyxhQUFhLElBQUksS0FBSyxhQUFhLFNBQVMsR0FBRyxZQUFZLElBQUksR0FBRztBQUFBLGdCQUM3RTtBQUFBLGNBQ0Y7QUFBQSx1QkFHTSxNQUFNLHNCQUFzQjtBQUM5Qix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUN0RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDM0IsMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU5QztBQUNFLDJCQUFLLFlBQVksSUFBSSxLQUFLLFlBQVksU0FBUyxHQUFHLFlBQVksSUFBSSxHQUFHO0FBQUEsZ0JBQzNFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0saUJBQWlCO0FBQ3pCLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3RFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMzQiwyQkFBSyxZQUFZLEtBQUssRUFBQyxNQUFNLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRXpDO0FBQ0UsMkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsT0FBTyxJQUFJLEdBQUc7QUFBQSxnQkFDdEU7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSx5QkFBeUI7QUFDakMsdUJBQUssY0FBYyxJQUFJLEtBQUssZ0JBQWdCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDdEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssWUFBWSxRQUFPO0FBQzNCLDJCQUFLLFlBQVksS0FBSyxFQUFDLGNBQWMsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFakQ7QUFDRSwyQkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxlQUFlLElBQUksR0FBRztBQUFBLGdCQUM5RTtBQUFBLGNBQ0Y7QUFBQSx1QkFHTSxNQUFNLHdCQUF3QjtBQUNoQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUN0RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDM0IsMkJBQUssWUFBWSxLQUFLLEVBQUMsYUFBYSxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUVoRDtBQUNFLDJCQUFLLFlBQVksSUFBSSxLQUFLLFlBQVksU0FBUyxHQUFHLGNBQWMsSUFBSSxHQUFHO0FBQUEsZ0JBQzdFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0sc0JBQXNCO0FBQzlCLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3RFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMzQiwyQkFBSyxZQUFZLEtBQUssRUFBQyxXQUFXLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTlDO0FBQ0UsMkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsWUFBWSxJQUFJLEdBQUc7QUFBQSxnQkFDM0U7QUFBQSxjQUNGO0FBQUEsbUJBR0c7QUFDQyx1QkFBSyxLQUFLLElBQUksR0FBRztBQUFBLFlBQ3ZCO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQ087QUFBQSxJQUNUO0FBQ0EsYUFBUyxvQkFBbUI7QUFFZCwwQkFBUSxPQUFPLFlBQVk7QUFBQSxJQUN6Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDenRCQSxVQUFNLEtBQUs7QUFDWCxVQUFNLFdBQVcsR0FBRztBQUNkLFlBQUUsTUFBTTtBQVNkLFVBQU0sc0JBQXNCO0FBQUEsTUFBQztBQUFBLFFBQzNCLE1BQU07QUFBQSxRQUNOLE9BQU8sRUFBRSxrREFBa0Q7QUFBQSxRQUMzRCxPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsUUFDUCxVQUFVO0FBQUEsUUFDVixhQUFhO0FBQUEsTUFDZjtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU8sRUFBRSxrREFBa0Q7QUFBQSxRQUMzRCxPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsUUFDUCxVQUFVO0FBQUEsUUFDVixhQUFhO0FBQUEsTUFDZjtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU8sRUFBRSx3REFBd0Q7QUFBQSxRQUNqRSxPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsUUFDUCxVQUFVO0FBQUEsUUFDVixhQUFhO0FBQUEsTUFDZjtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU8sRUFBRSx3REFBd0Q7QUFBQSxRQUNqRSxPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsUUFDUCxVQUFVO0FBQUEsUUFDVixhQUFhO0FBQUEsTUFDZjtBQUFBO0FBRUEsVUFBTSxZQUFZLElBQUksTUFBTSxhQUFhLFNBQVMsTUFBTSxlQUFlLG1CQUFtQjtBQUNwRix5QkFBZSxJQUFJLE1BQU0sZ0JBQWdCLFNBQVMsTUFBTSxlQUFlLEVBQUU7QUFDekUsd0JBQWMsSUFBSSxJQUFJO0FBQ3RCLG9CQUFVLElBQUksS0FBSztBQUV6QixRQUFJLFlBQVksTUFBTSxTQUFTLE1BQU0sZUFBZSxNQUFNLFNBQVMsTUFBTSxlQUFlLE1BQU0sUUFBUSxNQUFNLFVBQVU7QUFHbEgsaUJBQVMsR0FBRyxTQUFTO0FBQ3ZCLGtCQUFZLGFBQWE7QUFDekIscUJBQWUsZ0JBQWdCO0FBQy9CLHFCQUFlLGdCQUFnQjtBQUMvQixlQUFTLGFBQWEscUJBQXFCLE9BQU8sYUFBYSxpQkFBaUIsTUFBTTtBQUM3RDtBQUN2QixTQUFDLFlBQVc7QUFDVixtQkFBUyxVQUFVLFFBQVE7QUFDM0IsZ0JBQU0sYUFBYTtBQUNmLGVBQUMsQ0FBQyxNQUFNLGVBQWU7QUFDekIsa0JBQU0sYUFBYSx5QkFBeUIsVUFBVSxRQUFRLE1BQU07QUFDdEUsZ0JBQU0sYUFBYSwyQkFBMkIsVUFBVSxRQUFRLE1BQU07QUFDbEUscUJBQU8sWUFBWSxHQUFHO0FBQ3hCLHlCQUFhLE1BQU07QUFBQSxjQUNqQjtBQUFBLGdCQUNFLDRCQUE0QixHQUFHLE1BQU0sY0FBYyxPQUFPO0FBQUEsZ0JBQzFELDRCQUE0QixHQUFHLE1BQU0sY0FBYyxPQUFPO0FBQUEsZ0JBQzFELGtDQUFrQyxHQUFHLE1BQU0sZUFBZSxPQUFPO0FBQUEsZ0JBQ2pFLGtDQUFrQyxHQUFHLE1BQU0sa0JBQWtCLE9BQU87QUFBQSxjQUN0RTtBQUFBO0FBQUEsVUFDRixPQUNLO0FBQ0wseUJBQWEsTUFBTTtBQUFBLGNBQ2pCO0FBQUEsZ0JBQ0UsNEJBQTRCLEdBQUcsT0FBTyxXQUFXLE1BQU0sU0FBUztBQUFBLGdCQUNoRSw0QkFBNEIsR0FBRyxPQUFPLFdBQVcsTUFBTSxTQUFTO0FBQUEsZ0JBQ2hFLGtDQUFrQyxHQUFHLE9BQU8sV0FBVyxNQUFNLFVBQVU7QUFBQSxnQkFDdkUsa0NBQWtDLEdBQUcsT0FBTyxXQUFXLE1BQU0sYUFBYTtBQUFBLGNBQzVFO0FBQUE7QUFBQSxVQUVKO0FBQUE7TUFFSjtBQUFBLFdBRUc7QUFDUywwQkFBUSxPQUFPLE9BQU8sWUFBWTtBQUM5QyxVQUFJLFlBQVksVUFBVSxzQkFBc0IsWUFBWSxVQUFVLHNCQUFxQjtBQUN6RixnQkFBUSxRQUFRO0FBQUEsTUFDbEI7QUFDTyw4QkFBaUIscUJBQXFCLGlCQUFpQjtBQUM5RCxPQUFDLFlBQVc7QUFDVixnQkFBUSwwQkFBTSxPQUFPO0FBRXJCLGNBQU0sTUFBTSxNQUFNLE1BQU0sUUFBUSxNQUFNO0FBQ3RDLGNBQU0sVUFBVSxNQUFNLE1BQU0sUUFBUSxTQUFTO0FBQzdDLGNBQU0sUUFBUSxNQUFNLE1BQU0sUUFBUSxTQUFTO0FBQ2pDLG1CQUFDLENBQUMsUUFBUSxRQUFRO0FBRzVCLGlCQUFTLElBQUksS0FBSztBQUNULGtCQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxnQkFBZ0IsUUFBUSxjQUFjLE1BQU07QUFDeEUsd0JBQVksTUFBTSxtQkFBbUI7QUFDbkMsb0JBQU0sSUFBSTtBQUNaLGdCQUFJLFNBQVMsSUFBSSxHQUFHO0FBQ3RCLHNCQUFZLElBQUksS0FBSyxHQUFHLElBQUksZ0JBQWdCLFNBQVM7QUFBQSxlQUVsRDtBQUNILHNCQUFZLElBQUksS0FBSyxHQUFHLElBQUksWUFBcUI7QUFBQSxRQUNuRDtBQUNBLDJCQUFtQixVQUFVO0FBRzdCLFlBQUksU0FBUyxNQUFNLG1CQUFtQixNQUFNLE1BQU07QUFDekMsa0JBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxNQUFNLGlCQUFpQixNQUFNLE1BQU0sSUFBSTtBQUN0RSxZQUFJLFFBQVE7QUFDVixjQUFJLGFBQWE7QUFDakIsY0FBSSxNQUFNO0FBQ1YsY0FBSSxTQUFTO0FBRWIsY0FBSSxDQUFDLENBQUMsWUFBWSxTQUFTLENBQUMsQ0FBQyxRQUFRLFdBQVcsU0FBUyxDQUFDLFFBQVEsT0FBTyxRQUFPO0FBQzlFLHFCQUFTLE1BQU0sU0FBUyxNQUFNLFFBQVEsR0FBRztBQUV6QyxnQkFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLE9BQU8sUUFBUTtBQUNwQywyQkFBYSxDQUFDLENBQUMsVUFBVSxVQUFVO0FBQ25DLHlCQUFXLFNBQVMsT0FBTztBQUFBLG1CQUV4QjtBQUNILDJCQUFhLENBQUMsQ0FBQyxVQUFVLFVBQVU7QUFDbkMseUJBQVcsU0FBUztZQUN0QjtBQUNBLGtCQUFNLE1BQU0sUUFBUSxXQUFXLFlBQVksS0FBSztBQUN0QztBQUFBLFVBQ1o7QUFDQSxnQkFBTSw4S0FBOEssSUFBSSxLQUFLLGlEQUFpRCxVQUFVO0FBRXhQLG1CQUFTLE1BQU0sU0FBUyxNQUFNLFFBQVEsR0FBRztBQUVyQyxxQkFBTyxPQUFPLFFBQU87QUFDakIsd0JBQU0sT0FBTyxPQUFPO0FBQzFCLGtCQUFNLE1BQU07QUFBQSxjQUFRO0FBQUEsY0FBVztBQUFBLGdCQUMzQixZQUFZLElBQUk7QUFBQSxjQUNsQjtBQUFBLGNBQ0E7QUFBQTtBQUFBLFVBQ0YsT0FHRztBQUNHLHdCQUFNLFFBQVEsV0FBVztBQUFBLGNBQzdCLFVBQVU7QUFBQSxnQkFDUjtBQUFBLGtCQUNFLFVBQVU7QUFBQSxrQkFDVixTQUFTLEVBQUUsd0NBQXdDLEVBQUUsS0FBSywwQ0FBMEM7QUFBQSxnQkFDdEc7QUFBQSxjQUNGO0FBQUEsY0FDQSxvQkFBb0I7QUFBQSxhQUNyQjtBQUFBLFVBRUg7QUFFQSxjQUFJLENBQUMsQ0FBQyxNQUFNLGVBQWUsT0FBTTtBQUN6QixrakZBQWdpRixJQUFJLEtBQUssa0RBQWtEO0FBRWptRixnQkFBSSxjQUFjLE1BQU0sTUFBTSxRQUFRLFNBQVM7QUFDL0MscUJBQVMsTUFBTSxTQUFTLE1BQU0sUUFBUSxHQUFHO0FBRXJDLHVCQUFPLE9BQU8sUUFBTztBQUNqQiw2QkFBUyxvQkFBb0IsT0FBTyxNQUFNO0FBRWhELG9CQUFNLGNBQWM7QUFDZCwwQkFBTSxNQUFNLGlCQUFpQixNQUFNO0FBSXpDLDRCQUFjLENBQUMsQ0FBQyxjQUFjLGNBQWM7QUFDNUMsMEJBQVksYUFBYTtBQUN6QixvQkFBTSxNQUFNLFFBQVEsV0FBVyxhQUFhLEtBQUs7QUFBQSxZQUNuRDtBQUFBLFVBQ0Y7QUFBQSxlQUVHO0FBQ0csc0JBQU0sUUFBUSxXQUFXO0FBQUEsWUFDN0IsVUFBVTtBQUFBLGNBQ1I7QUFBQSxnQkFDRSxVQUFVO0FBQUEsZ0JBQ1YsU0FBUyxFQUFFLHdDQUF3QyxFQUFFLEtBQUssOEJBQThCO0FBQUEsY0FDMUY7QUFBQSxZQUNGO0FBQUEsWUFDQSxvQkFBb0I7QUFBQSxXQUNyQjtBQUFBLFFBRUg7QUFFSSxtQkFBTyxZQUFZLEdBQUc7QUFDeEIsdUJBQWEsTUFBTTtBQUFBLFlBQ2pCO0FBQUEsY0FDRSw0QkFBNEIsR0FBRyxNQUFNLGNBQWMsT0FBTztBQUFBLGNBQzFELDRCQUE0QixHQUFHLE1BQU0sY0FBYyxPQUFPO0FBQUEsY0FDMUQsa0NBQWtDLEdBQUcsTUFBTSxlQUFlLE9BQU87QUFBQSxjQUNqRSxrQ0FBa0MsR0FBRyxNQUFNLGtCQUFrQixPQUFPO0FBQUEsWUFDdEU7QUFBQTtBQUFBLFFBQ0YsT0FDSztBQUNMLHVCQUFhLE1BQU07QUFBQSxZQUNqQjtBQUFBLGNBQ0UsNEJBQTRCLEdBQUcsT0FBTyxXQUFXLE1BQU0sU0FBUztBQUFBLGNBQ2hFLDRCQUE0QixHQUFHLE9BQU8sV0FBVyxNQUFNLFNBQVM7QUFBQSxjQUNoRSxrQ0FBa0MsR0FBRyxPQUFPLFdBQVcsTUFBTSxVQUFVO0FBQUEsY0FDdkUsa0NBQWtDLEdBQUcsT0FBTyxXQUFXLE1BQU0sYUFBYTtBQUFBLFlBQzVFO0FBQUE7QUFBQSxRQUVKO0FBQUE7SUFJSjtBQUdBLG1CQUFlLFdBQVc7QUFDeEIsVUFBSSxNQUFNO0FBQ04sbUJBQVMsR0FBRyxTQUFRO0FBQ3RCLGNBQU0sV0FBVyxDQUFDLENBQUMsTUFBTSxhQUNyQixNQUFNLGFBQ04sYUFBYTtBQUVqQixtQkFBVyxLQUFLLFVBQVU7QUFLYiwwQkFBSyxTQUFTLEdBQUcsV0FBVTtBQUU3Qiw0QkFBUyxHQUFHLFVBQVUsR0FBRztBQUFBLFVBQ2xDO0FBQUEsUUFDRjtBQUNPLG1CQUFJLEtBQUssYUFBYSxRQUFRO0FBQUEsVUFDbkMsdUJBQXVCO0FBQUEsUUFDeEIsR0FBRSxPQUFPLElBQUksUUFBUSxDQUFDLENBQUM7QUFBQSxhQUVyQjtBQUNILGNBQU1DLFdBQVUsTUFBTSxNQUFNLFFBQVEsU0FBUztBQUM3QyxjQUFNLFdBQVcsQ0FBQyxDQUFDLE1BQU0sYUFDckIsTUFBTSxhQUNMLENBQUMsQ0FBQ0EsWUFBVyxDQUFDLENBQUNBLFNBQVEsYUFBYUEsU0FBUSxhQUFhO0FBQzlELG1CQUFXLEtBQUssVUFBVTtBQUNiLDBCQUFLLFNBQVMsR0FBRyxXQUFVO0FBRTdCLDRCQUFTLEdBQUcsVUFBVSxHQUFHO0FBQUEsVUFDbEM7QUFBQSxRQUNGO0FBQ08sbUJBQUksS0FBSyxhQUFhLFFBQVE7QUFBQSxVQUNuQyx1QkFBdUI7QUFBQSxRQUN4QixHQUFFLE9BQU8sSUFBSSxRQUFRLENBQUMsQ0FBQztBQUFBLE1BQzFCO0FBQUEsSUFFRjtBQUNBLG1CQUFlLFdBQVc7QUFDeEIsVUFBSSxNQUFNO0FBQ04sbUJBQVMsR0FBRyxTQUFRO0FBQ3RCLGNBQU0sV0FBVyxDQUFDLENBQUMsTUFBTSxhQUNyQixNQUFNLGFBQ04sYUFBYTtBQUNqQixtQkFBVyxLQUFLLFVBQVU7QUFDYiwwQkFBSyxTQUFTLEdBQUcsV0FBVTtBQUNwQyxtQkFBTyxTQUFTLEdBQUcsVUFBVSxHQUFHLFdBQVcsSUFBSSxTQUFTLEdBQUc7QUFBQSxVQUM3RDtBQUFBLFFBQ0Y7QUFDTyxtQkFBSSxLQUFLLGFBQWEsUUFBUTtBQUFBLFVBQ25DLHVCQUF1QjtBQUFBLFFBQ3hCLEdBQUUsT0FBTyxJQUFJLFFBQVEsQ0FBQyxDQUFDO0FBQUEsYUFFckI7QUFDSCxjQUFNQSxXQUFVLE1BQU0sTUFBTSxRQUFRLFNBQVM7QUFDN0MsY0FBTSxXQUFXLENBQUMsQ0FBQyxNQUFNLGFBQ3JCLE1BQU0sYUFDTCxDQUFDLENBQUNBLFlBQVcsQ0FBQyxDQUFDQSxTQUFRLGFBQWFBLFNBQVEsYUFBYTtBQUM5RCxtQkFBVyxLQUFLLFVBQVU7QUFDYiwwQkFBSyxTQUFTLEdBQUcsV0FBVTtBQUNwQyxtQkFBTyxTQUFTLEdBQUcsVUFBVSxHQUFHLFdBQVcsSUFBSSxTQUFTLEdBQUc7QUFBQSxVQUM3RDtBQUFBLFFBQ0Y7QUFDTyxtQkFBSSxLQUFLLGFBQWEsUUFBUTtBQUFBLFVBQ25DLHVCQUF1QjtBQUFBLFFBQ3hCLEdBQUUsT0FBTyxJQUFJLFFBQVEsQ0FBQyxDQUFDO0FBQUEsTUFDMUI7QUFBQSxJQUVGO0FBQ0EsbUJBQWUsWUFBWTtBQUN6QixVQUFJLE1BQU07QUFDTixtQkFBUyxHQUFHLFNBQVE7QUFDdEIsY0FBTSxXQUFXLENBQUMsQ0FBQyxNQUFNLGFBQ3JCLE1BQU0sYUFDTixhQUFhO0FBQ2pCLG1CQUFXLEtBQUssVUFBVTtBQUNiLDBCQUFLLFNBQVMsR0FBRyxhQUFhO0FBQ3ZDLGdCQUFJLFNBQVMsR0FBRyxZQUFZLEdBQUcsU0FBUyxHQUFHO0FBQ3pDLHFCQUFPLFNBQVMsR0FBRyxZQUFZLEdBQUcsZUFDOUIsY0FBYyxTQUFTLEdBQUcsWUFBWSxHQUFHLGNBQWMsT0FBTyxTQUFTLGVBQWUsU0FBUyxHQUFHLE9BQU8sT0FBTyxDQUFDLElBQ2pIO0FBQUEsWUFDTjtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBQ08sbUJBQUksS0FBSyxhQUFhLFFBQVE7QUFBQSxVQUNuQyx1QkFBdUI7QUFBQSxRQUN4QixHQUFFLE9BQU8sSUFBSSxRQUFRLENBQUMsQ0FBQztBQUFBLGFBRXJCO0FBQ0gsY0FBTUEsV0FBVSxNQUFNLE1BQU0sUUFBUSxTQUFTO0FBQzdDLGNBQU0sV0FBVyxDQUFDLENBQUMsTUFBTSxhQUNyQixNQUFNLGFBQ0wsQ0FBQyxDQUFDQSxZQUFXLENBQUMsQ0FBQ0EsU0FBUSxhQUFhQSxTQUFRLGFBQWE7QUFDOUQsbUJBQVcsS0FBSyxVQUFVO0FBQ2IsMEJBQUssU0FBUyxHQUFHLGFBQVk7QUFDdEMsZ0JBQUksU0FBUyxHQUFHLFlBQVksR0FBRyxTQUFTLEdBQUU7QUFDeEMscUJBQU8sU0FBUyxHQUFHLFlBQVksR0FBRyxlQUM5QixjQUFjLFNBQVMsR0FBRyxZQUFZLEdBQUcsY0FBYyxPQUFPLFNBQVMsZUFBZSxTQUFTLEdBQUcsT0FBTyxPQUFPLENBQUMsSUFDakg7QUFBQSxZQUNOO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFDTyxtQkFBSSxLQUFLLGFBQWEsUUFBUTtBQUFBLFVBQ25DLHVCQUF1QjtBQUFBLFFBQ3hCLEdBQUUsT0FBTyxJQUFJLFFBQVEsQ0FBQyxDQUFDO0FBQUEsTUFDMUI7QUFBQSxJQUVGO0FBQ0EsbUJBQWUsZUFBZTtBQUM1QixVQUFJLE1BQU07QUFDTixtQkFBUyxHQUFHLFNBQVE7QUFDdEIsY0FBTSxXQUFXLENBQUMsQ0FBQyxNQUFNLGFBQ3JCLE1BQU0sYUFDTixhQUFhO0FBQ2pCLG1CQUFXLEtBQUssVUFBVTtBQUNiLDBCQUFLLFNBQVMsR0FBRyxhQUFhO0FBQ3ZDLGdCQUFJLFNBQVMsR0FBRyxZQUFZLEdBQUcsU0FBUyxHQUFHO0FBQ3pDLHFCQUFPLFNBQVMsR0FBRyxZQUFZLEdBQUcsZUFDOUIsY0FBYyxTQUFTLEdBQUcsWUFBWSxHQUFHLGNBQWMsT0FBTyxTQUFTLGVBQWUsU0FBUyxHQUFHLE9BQU8sT0FBTyxDQUFDLElBQ2pIO0FBQUEsWUFDTjtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBQ08sbUJBQUksS0FBSyxhQUFhLFFBQVE7QUFBQSxVQUNuQyx1QkFBdUI7QUFBQSxRQUN4QixHQUFFLE9BQU8sSUFBSSxRQUFRLENBQUMsQ0FBQztBQUFBLGFBRXJCO0FBQ0gsY0FBTUEsV0FBVSxNQUFNLE1BQU0sUUFBUSxTQUFTO0FBQzdDLGNBQU0sV0FBVyxDQUFDLENBQUMsTUFBTSxhQUNyQixNQUFNLGFBQ0wsQ0FBQyxDQUFDQSxZQUFXLENBQUMsQ0FBQ0EsU0FBUSxhQUFhQSxTQUFRLGFBQWE7QUFDOUQsbUJBQVcsS0FBSyxVQUFVO0FBQ2IsMEJBQUssU0FBUyxHQUFHLGFBQVk7QUFDdEMsZ0JBQUksU0FBUyxHQUFHLFlBQVksR0FBRyxTQUFTLEdBQUU7QUFDeEMscUJBQU8sU0FBUyxHQUFHLFlBQVksR0FBRyxlQUM5QixjQUFjLFNBQVMsR0FBRyxZQUFZLEdBQUcsY0FBYyxPQUFPLFNBQVMsZUFBZSxTQUFTLEdBQUcsT0FBTyxPQUFPLENBQUMsSUFDakg7QUFBQSxZQUNOO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFDTyxtQkFBSSxLQUFLLGFBQWEsUUFBUTtBQUFBLFVBQ25DLHVCQUF1QjtBQUFBLFFBQ3hCLEdBQUUsT0FBTyxJQUFJLFFBQVEsQ0FBQyxDQUFDO0FBQUEsTUFDMUI7QUFBQSxJQUVGO0FBQ0EsYUFBUyxvQkFBb0IsS0FBVTtBQUNqQyxnQkFBTSxJQUFJLE1BQU07QUFFcEIsaUJBQVcsS0FBSyxLQUFLO0FBQ25CLGNBQU0sU0FBUyxJQUFJLElBQUksSUFBSSxJQUFJLEdBQUcsWUFBWTtBQUM5QyxZQUFJLFVBQVUsV0FBVyxJQUFJLEdBQUcsV0FBVTtBQUN4QztBQUFBLFFBQ0Y7QUFDQSxZQUFJLENBQUMsVUFBVyxVQUFVLFdBQVcsSUFBSSxHQUFHLFdBQVk7QUFDdEQsY0FBSSxPQUFPO1FBQ2I7QUFDVyx3QkFBSyxJQUFJLElBQUk7QUFDbEIseUJBQVcsSUFBSSxHQUFHLFdBQVc7QUFDL0IsZ0JBQUksTUFBTSxxQkFBcUI7QUFFekIsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDNUUsa0JBQUcsQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzNCLHdCQUFJLEdBQUcsT0FBTztBQUNaLDJCQUFLLGFBQWEsS0FBSyxFQUFDLFNBQVMsSUFBSSxHQUFHLEdBQUc7QUFBQSxxQkFFOUM7QUFDRyxtQ0FBYSxJQUFJLEtBQUssYUFBYSxVQUFVLFVBQVEsS0FBSyxZQUFZLElBQUksR0FBRyxFQUFFO0FBQ2pGLHdCQUFJLEdBQUcsT0FBTyxNQUFLO0FBQ3JCLHNCQUFJLGVBQWU7QUFDYiw2QkFBSyxhQUFhLEtBQUssRUFBQyxTQUFTLElBQUksR0FBRyxHQUFHO0FBQUE7QUFFL0Msd0JBQUksS0FBSyxhQUFhLFlBQVksVUFBVSxJQUFJLEdBQUc7QUFBQSxnQkFDdkQ7QUFBQSxjQUNGO0FBQUEsdUJBRU0sTUFBTSxnQ0FBZ0M7QUFDeEMsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFFMUUsa0JBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzVCLHlCQUFLLGFBQWEsS0FBSyxFQUFDLG9CQUFvQixJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUV4RDtBQUNJLG1DQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDN0Ysb0JBQUksZUFBZTtBQUNiLDJCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLHFCQUFxQixJQUFJLEdBQUc7QUFBQTtBQUVwRixzQkFBSSxLQUFLLGFBQWEsWUFBWSxxQkFBcUIsSUFBSSxHQUFHO0FBQUEsY0FDbEU7QUFBQSx1QkFHSSxNQUFNLHFCQUFxQjtBQUM3Qix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsU0FBUyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU3QztBQUNJLHFDQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDekYsMEJBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsd0JBQUcsZUFBZTtBQUNaLCtCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFVBQVUsSUFBSSxHQUFHO0FBQUE7QUFFekUsMEJBQUksS0FBSyxhQUFhLFlBQVksVUFBVSxJQUFJLEdBQUc7QUFBQSxrQkFDdkQ7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSx1QkFFTSxNQUFNLHVCQUF1QjtBQUMvQix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUUvQztBQUNJLHFDQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLFVBQVU7QUFDekYsMEJBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsd0JBQUksZUFBZTtBQUNiLCtCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFlBQVksSUFBSSxHQUFHO0FBQUE7QUFFM0UsMEJBQUksS0FBSyxhQUFhLFlBQVksWUFBWSxJQUFJLEdBQUc7QUFBQSxrQkFDekQ7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHNCQUFzQjtBQUUvQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUvQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLEVBQUU7QUFDbEYsd0JBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsc0JBQUksZUFBZTtBQUNiLDZCQUFLLFlBQVksS0FBSyxFQUFDLFdBQVcsSUFBSSxHQUFHLEdBQUc7QUFBQTtBQUVoRCx3QkFBSSxLQUFLLFlBQVksWUFBWSxZQUFZLElBQUksR0FBRztBQUFBLGdCQUN4RDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLGlCQUFpQjtBQUUxQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsTUFBTSxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUxQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsT0FBTyxJQUFJLEdBQUc7QUFBQTtBQUVwRSx3QkFBSSxLQUFLLFlBQVksWUFBWSxPQUFPLElBQUksR0FBRztBQUFBLGdCQUNuRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHlCQUF5QjtBQUVsQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsY0FBYyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUVsRDtBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsZUFBZSxJQUFJLEdBQUc7QUFBQTtBQUU1RSx3QkFBSSxLQUFLLFlBQVksWUFBWSxlQUFlLElBQUksR0FBRztBQUFBLGdCQUMzRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHdCQUF3QjtBQUVqQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsYUFBYSxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUVqRDtBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsY0FBYyxJQUFJLEdBQUc7QUFBQTtBQUUzRSx3QkFBSSxLQUFLLFlBQVksWUFBWSxjQUFjLElBQUksR0FBRztBQUFBLGdCQUMxRDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTyxNQUFNLHNCQUFzQjtBQUUvQix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUMxRSxrQkFBRyxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDMUIsd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUUvQztBQUNHLG1DQUFhLElBQUksS0FBSyxZQUFZLFVBQVUsVUFBUSxLQUFLLGNBQWMsSUFBSSxHQUFHLHFCQUFxQjtBQUNyRyx3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsWUFBWSxJQUFJLEdBQUc7QUFBQTtBQUV6RSx3QkFBSSxLQUFLLFlBQVksWUFBWSxZQUFZLElBQUksR0FBRztBQUFBLGdCQUN4RDtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBQUEsaUJBRUc7QUFDSCxnQkFBSSxNQUFNLG1CQUFtQjtBQUN2Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGNBQWMsSUFBSSxHQUFHO0FBQUEsY0FDMUM7QUFBQSx1QkFFTSxNQUFNLGtCQUFpQjtBQUN6Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGFBQWEsSUFBSSxHQUFHO0FBQUEsY0FDekM7QUFBQSx1QkFFTyxNQUFNLGNBQWE7QUFDdEIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxTQUFTLElBQUksR0FBRztBQUFBLGNBQ3JDO0FBQUEsdUJBRU8sTUFBTSxtQkFBa0I7QUFDM0IsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxjQUFjLElBQUksR0FBRztBQUFBLGNBQzFDO0FBQUEsdUJBRU8sTUFBTSxrQkFBaUI7QUFDMUIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxhQUFhLElBQUksR0FBRztBQUFBLGNBQ3pDO0FBQUEsdUJBRU8sTUFBTSxrQkFBaUI7QUFDMUIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxhQUFhLElBQUksR0FBRztBQUFBLGNBQ3pDO0FBQUEsdUJBRU8sTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLGFBQWEsSUFBSSxHQUFHO0FBQUEsY0FDeEM7QUFBQSx1QkFFTyxNQUFNLFlBQVc7QUFDcEIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFFBQVEsSUFBSSxHQUFHO0FBQUEsY0FDbkM7QUFBQSx1QkFFTyxNQUFNLGVBQWM7QUFDdkIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFdBQVcsSUFBSSxHQUFHO0FBQUEsY0FDdEM7QUFBQSx1QkFFTyxNQUFNLGFBQVk7QUFDckIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFNBQVMsSUFBSSxHQUFHO0FBQUEsY0FDcEM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3ZDO0FBQUEsdUJBRU8sTUFBTSx1QkFBc0I7QUFDL0IsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3BFLGtCQUFJLEtBQUssU0FBUyxtQkFBbUIsSUFBSSxHQUFHO0FBQUEsdUJBRXJDLE1BQU0sZ0JBQWU7QUFDeEIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDdkM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3ZDO0FBQUEsdUJBRU8sTUFBTSxhQUFZO0FBQ3JCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxTQUFTLElBQUksR0FBRztBQUFBLGNBQ3BDO0FBQUEsdUJBRU8sTUFBTSxxQkFBb0I7QUFDN0IsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLGlCQUFpQixJQUFJLEdBQUc7QUFBQSxjQUM1QztBQUFBLHVCQUVPLE1BQU0sZUFBYztBQUN2Qix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsV0FBVyxJQUFJLEdBQUc7QUFBQSxjQUN0QztBQUFBLHVCQUVPLE1BQU0sa0JBQWlCO0FBQzFCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsYUFBYSxJQUFJLEdBQUc7QUFBQSxjQUN6QztBQUFBLHVCQUVPLE1BQU0sYUFBWTtBQUNyQix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFFBQVEsSUFBSSxHQUFHO0FBQUEsY0FDcEM7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsV0FBVyxJQUFJLEdBQUc7QUFBQSxjQUN2QztBQUFBLHVCQUVPLE1BQU0sY0FBYTtBQUN0Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFNBQVMsSUFBSSxHQUFHO0FBQUEsY0FDckM7QUFBQSx1QkFFTyxNQUFNLGlCQUFnQjtBQUN6Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDeEM7QUFBQSx1QkFFTyxNQUFNLHdCQUF1QjtBQUNoQyx1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDdEUsa0JBQUksS0FBSyxVQUFVLG1CQUFtQixJQUFJLEdBQUc7QUFBQSx1QkFFdEMsTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3hDO0FBQUEsdUJBRU8sTUFBTSxpQkFBZ0I7QUFDekIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxZQUFZLElBQUksR0FBRztBQUFBLGNBQ3hDO0FBQUEsdUJBRU8sTUFBTSxjQUFhO0FBQ3RCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsU0FBUyxJQUFJLEdBQUc7QUFBQSxjQUNyQztBQUFBLHVCQUVPLE1BQU0sc0JBQXFCO0FBQzlCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsaUJBQWlCLElBQUksR0FBRztBQUFBLGNBQzdDO0FBQUEsdUJBRU8sTUFBTSxnQkFBZTtBQUN4Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFdBQVcsSUFBSSxHQUFHO0FBQUEsY0FDdkM7QUFBQSx1QkFFTSxNQUFNLHFCQUFxQjtBQUM3Qix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsU0FBUyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU3QztBQUNFLDJCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFVBQVUsSUFBSSxHQUFHO0FBQUEsZ0JBQzNFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0sZ0NBQWdDO0FBQ3hDLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxvQkFBb0IsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFeEQ7QUFDRSwyQkFBSyxhQUFhLElBQUksS0FBSyxhQUFhLFNBQVMsR0FBRyxxQkFBcUIsSUFBSSxHQUFHO0FBQUEsZ0JBQ3RGO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0scUJBQXFCO0FBQzdCLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxTQUFTLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTdDO0FBQ0UsMkJBQUssYUFBYSxJQUFJLEtBQUssYUFBYSxTQUFTLEdBQUcsVUFBVSxJQUFJLEdBQUc7QUFBQSxnQkFDM0U7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSx1QkFBdUI7QUFDL0IsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDeEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzVCLDJCQUFLLGFBQWEsS0FBSyxFQUFDLFdBQVcsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFL0M7QUFDRSwyQkFBSyxhQUFhLElBQUksS0FBSyxhQUFhLFNBQVMsR0FBRyxZQUFZLElBQUksR0FBRztBQUFBLGdCQUM3RTtBQUFBLGNBQ0Y7QUFBQSx1QkFHTSxNQUFNLHNCQUFzQjtBQUM5Qix1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUN0RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDM0IsMkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUU5QztBQUNFLDJCQUFLLFlBQVksSUFBSSxLQUFLLFlBQVksU0FBUyxHQUFHLFlBQVksSUFBSSxHQUFHO0FBQUEsZ0JBQzNFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0saUJBQWlCO0FBQ3pCLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3RFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMzQiwyQkFBSyxZQUFZLEtBQUssRUFBQyxNQUFNLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRXpDO0FBQ0UsMkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsT0FBTyxJQUFJLEdBQUc7QUFBQSxnQkFDdEU7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSx5QkFBeUI7QUFDakMsdUJBQUssY0FBYyxJQUFJLEtBQUssZ0JBQWdCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDdEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssWUFBWSxRQUFPO0FBQzNCLDJCQUFLLFlBQVksS0FBSyxFQUFDLGNBQWMsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFakQ7QUFDRSwyQkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxlQUFlLElBQUksR0FBRztBQUFBLGdCQUM5RTtBQUFBLGNBQ0Y7QUFBQSx1QkFHTSxNQUFNLHdCQUF3QjtBQUNoQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUN0RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDM0IsMkJBQUssWUFBWSxLQUFLLEVBQUMsYUFBYSxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUVoRDtBQUNFLDJCQUFLLFlBQVksSUFBSSxLQUFLLFlBQVksU0FBUyxHQUFHLGNBQWMsSUFBSSxHQUFHO0FBQUEsZ0JBQzdFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0sc0JBQXNCO0FBQzlCLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3RFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMzQiwyQkFBSyxZQUFZLEtBQUssRUFBQyxXQUFXLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTlDO0FBQ0UsMkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsWUFBWSxJQUFJLEdBQUc7QUFBQSxnQkFDM0U7QUFBQSxjQUNGO0FBQUEsbUJBR0c7QUFDQyx1QkFBSyxLQUFLLElBQUksR0FBRztBQUFBLFlBQ3ZCO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQ087QUFBQSxJQUNUO0FBQ0EsYUFBUyxvQkFBbUI7QUFFZCwwQkFBUSxPQUFPLFlBQVk7QUFFdkMsVUFBSSxZQUFZLFVBQVUsc0JBQXNCLFlBQVksVUFBVSxzQkFBcUI7QUFDekYsZ0JBQVEsUUFBUTtBQUFBLGFBRWI7QUFDSCxnQkFBUSxRQUFRO0FBQUEsTUFDbEI7QUFBQSxJQUNGO0FBQ0EsYUFBUyxlQUFlLEtBQWE7QUFDbkMsVUFBSSxNQUFNO0FBQ0Y7QUFBQSxhQUNEO0FBQ0c7QUFDTjtBQUFBLGFBQ0c7QUFDRztBQUNOO0FBQUEsYUFDRztBQUNHO0FBQ047QUFBQTtBQUVNO0FBQ047QUFBQTtBQUVHO0FBQUEsSUFDVDtBQUNTLDJCQUFjLEtBQWEsTUFBYyxNQUFXO0FBQ3BELGtCQUFLLEtBQUssSUFBSTtBQUFBLElBQ3ZCO0FBQ1MsNkJBQWdCLEtBQWEsTUFBc0I7QUFDMUQsVUFBSSxNQUFNO0FBQ1YsVUFBSSxjQUFjO0FBQ2QsbUJBQVMsR0FBRyxTQUFRO0FBQ3RCLHNCQUFjLGFBQWE7QUFBQSxhQUV4QjtBQUNILHNCQUFjLFFBQVEsT0FBTyxLQUFLLENBQUMsTUFBVztBQUM1QyxpQkFBTyxFQUFFLFNBQVM7QUFBQSxTQUNuQjtBQUFBLE1BQ0g7QUFDTSxzQkFBVSxnQkFBZ0IsT0FBTyxjQUFjO0FBQzdDO0FBQUEsYUFDRDtBQUNJLDZCQUFZLE9BQU8sUUFBUSxTQUFTO0FBQzNDO0FBQUEsYUFDRztBQUNJLDZCQUFZLE9BQU8sUUFBUSxRQUFRO0FBQzFDO0FBQUE7QUFJRztBQUFBLElBQ1Q7QUFDUywrQkFBa0IsS0FBYSxNQUFzQjtBQUN4RCxnQkFBTSxLQUFLLGNBQWM7QUFDekIsbUJBQVMsR0FBRyxTQUFRO0FBQ3RCLHNCQUFjLGFBQWE7QUFBQSxhQUV4QjtBQUNILHNCQUFjLFFBQVEsT0FBTyxLQUFLLENBQUMsTUFBVztBQUM1QyxpQkFBTyxFQUFFLFdBQVc7QUFBQSxTQUNyQjtBQUFBLE1BQ0g7QUFDTSxzQkFBVSxnQkFBZ0IsT0FBTyxjQUFjO0FBQzdDO0FBQUEsYUFDRDtBQUNJLDZCQUFZLE9BQU8sUUFBUSxPQUFPO0FBQ3pDO0FBQUEsYUFDRztBQUNJLDZCQUFZLE9BQU8sUUFBUSxRQUFRO0FBQzFDO0FBQUE7QUFJRztBQUFBLElBQ1Q7QUFDUyw4QkFBaUIsS0FBYSxNQUFzQjtBQUMzRCxVQUFJLE1BQU07QUFDVixVQUFJLGNBQWM7QUFDZCxtQkFBUyxHQUFHLFNBQVE7QUFDdEIsc0JBQWMsYUFBYTtBQUFBLGFBRXhCO0FBQ0gsc0JBQWMsUUFBUSxPQUFPLEtBQUssQ0FBQyxNQUFXO0FBQzVDLGlCQUFPLEVBQUUsVUFBVTtBQUFBLFNBQ3BCO0FBQUEsTUFDSDtBQUNNLHNCQUFVLGdCQUFnQixPQUFPLGNBQWM7QUFDN0M7QUFBQSxhQUNEO0FBQ0ksNkJBQVksT0FBTyxRQUFRLFNBQVM7QUFDM0M7QUFBQSxhQUNHO0FBQ0ksNkJBQVksT0FBTyxRQUFRLE9BQU87QUFDekM7QUFBQTtBQUlHO0FBQUEsSUFDVDtBQUdBO0FBQUEsTUFDRSxNQUFNLENBQUMsTUFBTSxpQkFBaUIsTUFBTSxZQUFZO0FBQUEsTUFDaEQsQ0FBQyxDQUFDLFNBQVMsSUFBSSxNQUFNO0FBSW5CLGtCQUFVLFFBQVE7QUFDbEIscUJBQWEsUUFBUTtBQUFBLE1BQ3ZCO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNzNCRixVQUFNLEtBQUs7QUFFTCw0QkFBa0IsSUFBSSxJQUFJO0FBQ2hDLFVBQU0sV0FBVyxHQUFHO0FBQ3BCLFVBQU0sRUFBRSxFQUFFLElBQUksUUFBUSxFQUFFLFVBQVUsVUFBVTtBQUN0Qyx1QkFBYSxJQUFJLENBQUM7QUFDbEIscUJBQVcsSUFBSSxDQUFDO0FBQ2hCLHFCQUFXLElBQUksQ0FBQztBQUNoQix1QkFBYSxJQUFJLENBQUM7QUFDbEIscUJBQVcsSUFBSSxJQUFJO0FBQ25CLDhCQUFvQixJQUFJLEtBQUs7QUFDN0Isd0JBQWMsSUFBSSxJQUFJO0FBQ3RCLG9CQUFVLElBQUksS0FBSztBQUNuQix3QkFBYyxJQUFJLEtBQUs7QUFFekIsdUJBQWUsTUFDakIsZUFBZSxNQUFNLFFBQVEsTUFBTSxZQUFZLE1BQU0sbUJBQW1CO0FBR3RFLGlCQUFTLEdBQUcsUUFBUTtBQUNWLDBCQUFRLE9BQU8sT0FBTyxZQUFZO0FBQzlDLFVBQUksWUFBWSxVQUFVLHNCQUFzQixZQUFZLFVBQVUsc0JBQXFCO0FBQ3pGLGdCQUFRLFFBQVE7QUFBQSxNQUNsQjtBQUNPLDhCQUFpQixxQkFBcUIsaUJBQWlCO0FBQUEsSUFDaEU7QUFHQSxhQUFTLG9CQUFvQixLQUFVO0FBQ2pDLGdCQUFNLElBQUksTUFBTTtBQUVwQixpQkFBVyxLQUFLLEtBQUs7QUFDbkIsY0FBTSxTQUFTLElBQUksSUFBSSxJQUFJLElBQUksR0FBRyxZQUFZO0FBQzlDLFlBQUksVUFBVSxXQUFXLElBQUksR0FBRyxXQUFVO0FBQ3hDO0FBQUEsUUFDRjtBQUNBLFlBQUksQ0FBQyxVQUFXLFVBQVUsV0FBVyxJQUFJLEdBQUcsV0FBWTtBQUN0RCxjQUFJLE9BQU87UUFDYjtBQUNXLHdCQUFLLElBQUksSUFBSTtBQUNsQix5QkFBVyxJQUFJLEdBQUcsV0FBVztBQUMvQixnQkFBSSxNQUFNLHFCQUFxQjtBQUV6Qix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUM1RSxrQkFBRyxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDM0Isd0JBQUksR0FBRyxPQUFPO0FBQ1osMkJBQUssYUFBYSxLQUFLLEVBQUMsU0FBUyxJQUFJLEdBQUcsR0FBRztBQUFBLHFCQUU5QztBQUNHLG1DQUFhLElBQUksS0FBSyxhQUFhLFVBQVUsVUFBUSxLQUFLLFlBQVksSUFBSSxHQUFHLEVBQUU7QUFDakYsd0JBQUksR0FBRyxPQUFPLE1BQUs7QUFDckIsc0JBQUksZUFBZTtBQUNiLDZCQUFLLGFBQWEsS0FBSyxFQUFDLFNBQVMsSUFBSSxHQUFHLEdBQUc7QUFBQTtBQUUvQyx3QkFBSSxLQUFLLGFBQWEsWUFBWSxVQUFVLElBQUksR0FBRztBQUFBLGdCQUN2RDtBQUFBLGNBQ0Y7QUFBQSx1QkFFTSxNQUFNLGdDQUFnQztBQUN4Qyx1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUUxRSxrQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIseUJBQUssYUFBYSxLQUFLLEVBQUMsb0JBQW9CLElBQUksR0FBRyxHQUFHO0FBQUEscUJBRXhEO0FBQ0ksbUNBQWEsSUFBSSxLQUFLLGFBQWEsVUFBVSxVQUFRLEtBQUssWUFBWSxJQUFJLEdBQUcsVUFBVTtBQUM3RixvQkFBSSxlQUFlO0FBQ2IsMkJBQUssYUFBYSxJQUFJLEtBQUssYUFBYSxTQUFTLEdBQUcscUJBQXFCLElBQUksR0FBRztBQUFBO0FBRXBGLHNCQUFJLEtBQUssYUFBYSxZQUFZLHFCQUFxQixJQUFJLEdBQUc7QUFBQSxjQUNsRTtBQUFBLHVCQUdJLE1BQU0scUJBQXFCO0FBQzdCLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxTQUFTLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTdDO0FBQ0kscUNBQWEsSUFBSSxLQUFLLGFBQWEsVUFBVSxVQUFRLEtBQUssWUFBWSxJQUFJLEdBQUcsVUFBVTtBQUN6RiwwQkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQix3QkFBRyxlQUFlO0FBQ1osK0JBQUssYUFBYSxJQUFJLEtBQUssYUFBYSxTQUFTLEdBQUcsVUFBVSxJQUFJLEdBQUc7QUFBQTtBQUV6RSwwQkFBSSxLQUFLLGFBQWEsWUFBWSxVQUFVLElBQUksR0FBRztBQUFBLGtCQUN2RDtBQUFBLGdCQUNGO0FBQUEsY0FDRjtBQUFBLHVCQUVNLE1BQU0sdUJBQXVCO0FBQy9CLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFLO0FBQ3JCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxXQUFXLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRS9DO0FBQ0kscUNBQWEsSUFBSSxLQUFLLGFBQWEsVUFBVSxVQUFRLEtBQUssWUFBWSxJQUFJLEdBQUcsVUFBVTtBQUN6RiwwQkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQix3QkFBSSxlQUFlO0FBQ2IsK0JBQUssYUFBYSxJQUFJLEtBQUssYUFBYSxTQUFTLEdBQUcsWUFBWSxJQUFJLEdBQUc7QUFBQTtBQUUzRSwwQkFBSSxLQUFLLGFBQWEsWUFBWSxZQUFZLElBQUksR0FBRztBQUFBLGtCQUN6RDtBQUFBLGdCQUNGO0FBQUEsY0FDRjtBQUFBLHVCQUVPLE1BQU0sc0JBQXNCO0FBRS9CLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQzFFLGtCQUFHLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMxQix3QkFBSSxHQUFHLE9BQU87QUFDWiwyQkFBSyxZQUFZLEtBQUssRUFBQyxXQUFXLElBQUksR0FBRyxHQUFHO0FBQUEscUJBRS9DO0FBQ0csbUNBQWEsSUFBSSxLQUFLLFlBQVksVUFBVSxVQUFRLEtBQUssY0FBYyxJQUFJLEdBQUcsRUFBRTtBQUNsRix3QkFBSSxHQUFHLE9BQU8sTUFBSztBQUNyQixzQkFBSSxlQUFlO0FBQ2IsNkJBQUssWUFBWSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBO0FBRWhELHdCQUFJLEtBQUssWUFBWSxZQUFZLFlBQVksSUFBSSxHQUFHO0FBQUEsZ0JBQ3hEO0FBQUEsY0FDRjtBQUFBLHVCQUVPLE1BQU0saUJBQWlCO0FBRTFCLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQzFFLGtCQUFHLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMxQix3QkFBSSxHQUFHLE9BQU87QUFDWiwyQkFBSyxZQUFZLEtBQUssRUFBQyxNQUFNLElBQUksR0FBRyxHQUFHO0FBQUEscUJBRTFDO0FBQ0csbUNBQWEsSUFBSSxLQUFLLFlBQVksVUFBVSxVQUFRLEtBQUssY0FBYyxJQUFJLEdBQUcscUJBQXFCO0FBQ3JHLHdCQUFJLEdBQUcsT0FBTyxNQUFLO0FBQ3JCLHNCQUFJLGVBQWU7QUFDYiw2QkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxPQUFPLElBQUksR0FBRztBQUFBO0FBRXBFLHdCQUFJLEtBQUssWUFBWSxZQUFZLE9BQU8sSUFBSSxHQUFHO0FBQUEsZ0JBQ25EO0FBQUEsY0FDRjtBQUFBLHVCQUVPLE1BQU0seUJBQXlCO0FBRWxDLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQzFFLGtCQUFHLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMxQix3QkFBSSxHQUFHLE9BQU87QUFDWiwyQkFBSyxZQUFZLEtBQUssRUFBQyxjQUFjLElBQUksR0FBRyxHQUFHO0FBQUEscUJBRWxEO0FBQ0csbUNBQWEsSUFBSSxLQUFLLFlBQVksVUFBVSxVQUFRLEtBQUssY0FBYyxJQUFJLEdBQUcscUJBQXFCO0FBQ3JHLHdCQUFJLEdBQUcsT0FBTyxNQUFLO0FBQ3JCLHNCQUFJLGVBQWU7QUFDYiw2QkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxlQUFlLElBQUksR0FBRztBQUFBO0FBRTVFLHdCQUFJLEtBQUssWUFBWSxZQUFZLGVBQWUsSUFBSSxHQUFHO0FBQUEsZ0JBQzNEO0FBQUEsY0FDRjtBQUFBLHVCQUVPLE1BQU0sd0JBQXdCO0FBRWpDLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQzFFLGtCQUFHLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMxQix3QkFBSSxHQUFHLE9BQU87QUFDWiwyQkFBSyxZQUFZLEtBQUssRUFBQyxhQUFhLElBQUksR0FBRyxHQUFHO0FBQUEscUJBRWpEO0FBQ0csbUNBQWEsSUFBSSxLQUFLLFlBQVksVUFBVSxVQUFRLEtBQUssY0FBYyxJQUFJLEdBQUcscUJBQXFCO0FBQ3JHLHdCQUFJLEdBQUcsT0FBTyxNQUFLO0FBQ3JCLHNCQUFJLGVBQWU7QUFDYiw2QkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxjQUFjLElBQUksR0FBRztBQUFBO0FBRTNFLHdCQUFJLEtBQUssWUFBWSxZQUFZLGNBQWMsSUFBSSxHQUFHO0FBQUEsZ0JBQzFEO0FBQUEsY0FDRjtBQUFBLHVCQUVPLE1BQU0sc0JBQXNCO0FBRS9CLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQzFFLGtCQUFHLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMxQix3QkFBSSxHQUFHLE9BQU87QUFDWiwyQkFBSyxZQUFZLEtBQUssRUFBQyxXQUFXLElBQUksR0FBRyxHQUFHO0FBQUEscUJBRS9DO0FBQ0csbUNBQWEsSUFBSSxLQUFLLFlBQVksVUFBVSxVQUFRLEtBQUssY0FBYyxJQUFJLEdBQUcscUJBQXFCO0FBQ3JHLHdCQUFJLEdBQUcsT0FBTyxNQUFLO0FBQ3JCLHNCQUFJLGVBQWU7QUFDYiw2QkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxZQUFZLElBQUksR0FBRztBQUFBO0FBRXpFLHdCQUFJLEtBQUssWUFBWSxZQUFZLFlBQVksSUFBSSxHQUFHO0FBQUEsZ0JBQ3hEO0FBQUEsY0FDRjtBQUFBLFlBQ0Y7QUFBQSxpQkFFRztBQUNILGdCQUFJLE1BQU0sbUJBQW1CO0FBQ3ZCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsY0FBYyxJQUFJLEdBQUc7QUFBQSxjQUMxQztBQUFBLHVCQUVNLE1BQU0sa0JBQWlCO0FBQ3pCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsYUFBYSxJQUFJLEdBQUc7QUFBQSxjQUN6QztBQUFBLHVCQUVPLE1BQU0sY0FBYTtBQUN0Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFNBQVMsSUFBSSxHQUFHO0FBQUEsY0FDckM7QUFBQSx1QkFFTyxNQUFNLG1CQUFrQjtBQUMzQix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGNBQWMsSUFBSSxHQUFHO0FBQUEsY0FDMUM7QUFBQSx1QkFFTyxNQUFNLGtCQUFpQjtBQUMxQix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGFBQWEsSUFBSSxHQUFHO0FBQUEsY0FDekM7QUFBQSx1QkFFTyxNQUFNLGtCQUFpQjtBQUMxQix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLGFBQWEsSUFBSSxHQUFHO0FBQUEsY0FDekM7QUFBQSx1QkFFTyxNQUFNLGlCQUFnQjtBQUN6Qix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsYUFBYSxJQUFJLEdBQUc7QUFBQSxjQUN4QztBQUFBLHVCQUVPLE1BQU0sWUFBVztBQUNwQix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsUUFBUSxJQUFJLEdBQUc7QUFBQSxjQUNuQztBQUFBLHVCQUVPLE1BQU0sZUFBYztBQUN2Qix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsV0FBVyxJQUFJLEdBQUc7QUFBQSxjQUN0QztBQUFBLHVCQUVPLE1BQU0sYUFBWTtBQUNyQix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsU0FBUyxJQUFJLEdBQUc7QUFBQSxjQUNwQztBQUFBLHVCQUVPLE1BQU0sZ0JBQWU7QUFDeEIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDdkM7QUFBQSx1QkFFTyxNQUFNLHVCQUFzQjtBQUMvQix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDcEUsa0JBQUksS0FBSyxTQUFTLG1CQUFtQixJQUFJLEdBQUc7QUFBQSx1QkFFckMsTUFBTSxnQkFBZTtBQUN4Qix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsWUFBWSxJQUFJLEdBQUc7QUFBQSxjQUN2QztBQUFBLHVCQUVPLE1BQU0sZ0JBQWU7QUFDeEIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDdkM7QUFBQSx1QkFFTyxNQUFNLGFBQVk7QUFDckIsdUJBQUssV0FBVyxJQUFJLEtBQUssYUFBYSxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssV0FBVztBQUFBLHFCQUNmO0FBQ0wsb0JBQUksS0FBSyxTQUFTLFNBQVMsSUFBSSxHQUFHO0FBQUEsY0FDcEM7QUFBQSx1QkFFTyxNQUFNLHFCQUFvQjtBQUM3Qix1QkFBSyxXQUFXLElBQUksS0FBSyxhQUFhLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDaEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxXQUFXO0FBQUEscUJBQ2Y7QUFDTCxvQkFBSSxLQUFLLFNBQVMsaUJBQWlCLElBQUksR0FBRztBQUFBLGNBQzVDO0FBQUEsdUJBRU8sTUFBTSxlQUFjO0FBQ3ZCLHVCQUFLLFdBQVcsSUFBSSxLQUFLLGFBQWEsU0FBWSxLQUFLLElBQUksS0FBSztBQUNoRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFdBQVc7QUFBQSxxQkFDZjtBQUNMLG9CQUFJLEtBQUssU0FBUyxXQUFXLElBQUksR0FBRztBQUFBLGNBQ3RDO0FBQUEsdUJBRU8sTUFBTSxrQkFBaUI7QUFDMUIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxhQUFhLElBQUksR0FBRztBQUFBLGNBQ3pDO0FBQUEsdUJBRU8sTUFBTSxhQUFZO0FBQ3JCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsUUFBUSxJQUFJLEdBQUc7QUFBQSxjQUNwQztBQUFBLHVCQUVPLE1BQU0sZ0JBQWU7QUFDeEIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxXQUFXLElBQUksR0FBRztBQUFBLGNBQ3ZDO0FBQUEsdUJBRU8sTUFBTSxjQUFhO0FBQ3RCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsU0FBUyxJQUFJLEdBQUc7QUFBQSxjQUNyQztBQUFBLHVCQUVPLE1BQU0saUJBQWdCO0FBQ3pCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsWUFBWSxJQUFJLEdBQUc7QUFBQSxjQUN4QztBQUFBLHVCQUVPLE1BQU0sd0JBQXVCO0FBQ2hDLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUN0RSxrQkFBSSxLQUFLLFVBQVUsbUJBQW1CLElBQUksR0FBRztBQUFBLHVCQUV0QyxNQUFNLGlCQUFnQjtBQUN6Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDeEM7QUFBQSx1QkFFTyxNQUFNLGlCQUFnQjtBQUN6Qix1QkFBSyxZQUFZLElBQUksS0FBSyxjQUFjLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDbEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksS0FBSyxZQUFZO0FBQUEscUJBQ2hCO0FBQ0wsb0JBQUksS0FBSyxVQUFVLFlBQVksSUFBSSxHQUFHO0FBQUEsY0FDeEM7QUFBQSx1QkFFTyxNQUFNLGNBQWE7QUFDdEIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxTQUFTLElBQUksR0FBRztBQUFBLGNBQ3JDO0FBQUEsdUJBRU8sTUFBTSxzQkFBcUI7QUFDOUIsdUJBQUssWUFBWSxJQUFJLEtBQUssY0FBYyxTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ2xFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLEtBQUssWUFBWTtBQUFBLHFCQUNoQjtBQUNMLG9CQUFJLEtBQUssVUFBVSxpQkFBaUIsSUFBSSxHQUFHO0FBQUEsY0FDN0M7QUFBQSx1QkFFTyxNQUFNLGdCQUFlO0FBQ3hCLHVCQUFLLFlBQVksSUFBSSxLQUFLLGNBQWMsU0FBWSxLQUFLLElBQUksS0FBSztBQUNsRSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxLQUFLLFlBQVk7QUFBQSxxQkFDaEI7QUFDTCxvQkFBSSxLQUFLLFVBQVUsV0FBVyxJQUFJLEdBQUc7QUFBQSxjQUN2QztBQUFBLHVCQUVNLE1BQU0scUJBQXFCO0FBQzdCLHVCQUFLLGVBQWUsSUFBSSxLQUFLLGlCQUFpQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3hFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLGFBQWEsUUFBTztBQUM1QiwyQkFBSyxhQUFhLEtBQUssRUFBQyxTQUFTLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTdDO0FBQ0UsMkJBQUssYUFBYSxJQUFJLEtBQUssYUFBYSxTQUFTLEdBQUcsVUFBVSxJQUFJLEdBQUc7QUFBQSxnQkFDM0U7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSxnQ0FBZ0M7QUFDeEMsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDeEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzVCLDJCQUFLLGFBQWEsS0FBSyxFQUFDLG9CQUFvQixJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUV4RDtBQUNFLDJCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLHFCQUFxQixJQUFJLEdBQUc7QUFBQSxnQkFDdEY7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSxxQkFBcUI7QUFDN0IsdUJBQUssZUFBZSxJQUFJLEtBQUssaUJBQWlCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDeEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxRQUFPO0FBQzVCLDJCQUFLLGFBQWEsS0FBSyxFQUFDLFNBQVMsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFN0M7QUFDRSwyQkFBSyxhQUFhLElBQUksS0FBSyxhQUFhLFNBQVMsR0FBRyxVQUFVLElBQUksR0FBRztBQUFBLGdCQUMzRTtBQUFBLGNBQ0Y7QUFBQSx1QkFHTSxNQUFNLHVCQUF1QjtBQUMvQix1QkFBSyxlQUFlLElBQUksS0FBSyxpQkFBaUIsU0FBWSxLQUFLLElBQUksS0FBSztBQUN4RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxhQUFhLFFBQU87QUFDNUIsMkJBQUssYUFBYSxLQUFLLEVBQUMsV0FBVyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUUvQztBQUNFLDJCQUFLLGFBQWEsSUFBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLFlBQVksSUFBSSxHQUFHO0FBQUEsZ0JBQzdFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0sc0JBQXNCO0FBQzlCLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3RFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMzQiwyQkFBSyxZQUFZLEtBQUssRUFBQyxXQUFXLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRTlDO0FBQ0UsMkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsWUFBWSxJQUFJLEdBQUc7QUFBQSxnQkFDM0U7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSxpQkFBaUI7QUFDekIsdUJBQUssY0FBYyxJQUFJLEtBQUssZ0JBQWdCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDdEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssWUFBWSxRQUFPO0FBQzNCLDJCQUFLLFlBQVksS0FBSyxFQUFDLE1BQU0sSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFekM7QUFDRSwyQkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxPQUFPLElBQUksR0FBRztBQUFBLGdCQUN0RTtBQUFBLGNBQ0Y7QUFBQSx1QkFHTSxNQUFNLHlCQUF5QjtBQUNqQyx1QkFBSyxjQUFjLElBQUksS0FBSyxnQkFBZ0IsU0FBWSxLQUFLLElBQUksS0FBSztBQUN0RSxzQkFBSSxHQUFHLE9BQU8sTUFBTTtBQUN0QixvQkFBSSxDQUFDLElBQUksS0FBSyxZQUFZLFFBQU87QUFDM0IsMkJBQUssWUFBWSxLQUFLLEVBQUMsY0FBYyxJQUFJLEdBQUcsR0FBRztBQUFBLHVCQUVqRDtBQUNFLDJCQUFLLFlBQVksSUFBSSxLQUFLLFlBQVksU0FBUyxHQUFHLGVBQWUsSUFBSSxHQUFHO0FBQUEsZ0JBQzlFO0FBQUEsY0FDRjtBQUFBLHVCQUdNLE1BQU0sd0JBQXdCO0FBQ2hDLHVCQUFLLGNBQWMsSUFBSSxLQUFLLGdCQUFnQixTQUFZLEtBQUssSUFBSSxLQUFLO0FBQ3RFLHNCQUFJLEdBQUcsT0FBTyxNQUFNO0FBQ3RCLG9CQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksUUFBTztBQUMzQiwyQkFBSyxZQUFZLEtBQUssRUFBQyxhQUFhLElBQUksR0FBRyxHQUFHO0FBQUEsdUJBRWhEO0FBQ0UsMkJBQUssWUFBWSxJQUFJLEtBQUssWUFBWSxTQUFTLEdBQUcsY0FBYyxJQUFJLEdBQUc7QUFBQSxnQkFDN0U7QUFBQSxjQUNGO0FBQUEsdUJBR00sTUFBTSxzQkFBc0I7QUFDOUIsdUJBQUssY0FBYyxJQUFJLEtBQUssZ0JBQWdCLFNBQVksS0FBSyxJQUFJLEtBQUs7QUFDdEUsc0JBQUksR0FBRyxPQUFPLE1BQU07QUFDdEIsb0JBQUksQ0FBQyxJQUFJLEtBQUssWUFBWSxRQUFPO0FBQzNCLDJCQUFLLFlBQVksS0FBSyxFQUFDLFdBQVcsSUFBSSxHQUFHLEdBQUc7QUFBQSx1QkFFOUM7QUFDRSwyQkFBSyxZQUFZLElBQUksS0FBSyxZQUFZLFNBQVMsR0FBRyxZQUFZLElBQUksR0FBRztBQUFBLGdCQUMzRTtBQUFBLGNBQ0Y7QUFBQSxtQkFHRztBQUNDLHVCQUFLLEtBQUssSUFBSSxHQUFHO0FBQUEsWUFDdkI7QUFBQSxVQUNGO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFDTztBQUFBLElBQ1Q7QUFDQSxhQUFTLG9CQUFtQjtBQUVkLDBCQUFRLE9BQU8sWUFBWTtBQUFBLElBQ3pDO0FBUUE7QUFBQSxNQUNFO0FBQUEsTUFDQSxDQUFDLG1CQUFtQjtBQUNkLGFBQUMsQ0FBQyxnQkFBZ0I7QUFDaEIsaUNBQW1CLHNCQUFzQixtQkFBbUIsc0JBQXFCO0FBQ25GLG9CQUFRLFFBQVE7QUFBQSxpQkFFYjtBQUNILG9CQUFRLFFBQVE7QUFBQSxVQUNsQjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQUE7QUFJRixjQUFVLE1BQU07QUFDZCxXQUFLLGNBQWMsTUFBTTtBQUFBLEtBQzFCO0FBQ0Qsa0JBQWMsWUFBVztBQUNuQixtQkFBUyxHQUFHLFNBQVM7QUFFdkIsdUJBQWUsZ0JBQWdCO0FBQy9CLHVCQUFlLGdCQUFnQjtBQUMvQixvQkFBWSxhQUFhO0FBQ3pCLFlBQUksYUFBYSxZQUFZO0FBQzNCLHVCQUFhLHNCQUFzQixJQUFJO0FBQ3pDLDBCQUFrQixRQUFRLGFBQWE7QUFDZDtBQUN2QixnQkFBTSxhQUFhLHlCQUF5QixVQUFVLFFBQVEsTUFBTTtBQUNwRSxnQkFBTSxhQUFhO0FBQ25CLGdCQUFNLGFBQWE7QUFDbkIsZ0JBQU0sYUFBYTtBQUNuQixnQkFBTSxhQUFhLDJCQUEyQixVQUFVLFFBQVEsTUFBTTtBQUN0RSxxQkFBVyxRQUFRLGFBQWE7QUFDaEMsbUJBQVMsUUFBUSxhQUFhO0FBQzlCLG1CQUFTLFFBQVEsYUFBYTtBQUM5QixxQkFBVyxRQUFRLGFBQWE7QUFDaEMsbUJBQVMsUUFBUSxhQUFhO0FBQUEsUUFDaEM7QUFBQSxhQUVHO0FBQ0gsZ0JBQVEsMEJBQU0sT0FBTztBQUVyQixjQUFNLE9BQU8sTUFBTSxNQUFNLFFBQVEsU0FBUztBQUMxQyxjQUFNLE1BQU0sTUFBTSxNQUFNLFFBQVEsTUFBTTtBQUl0QyxjQUFNLFdBQVcsQ0FBQyxDQUFDLE9BQU8sS0FBSyxXQUFXO0FBQzFDLGNBQU0sTUFBTSxDQUFDLENBQUMsT0FBTyxLQUFLLHFCQUFxQjtBQUMzQyxxQkFBUyxVQUFVLFFBQVEsTUFBTTtBQUNuQyw0QkFBa0IsUUFBUTtBQUFBLGVBQ3JCO0FBQ2Esb0NBQVEsUUFBUSxPQUFPLE1BQU07QUFBQSxRQUNqRDtBQUVBLFlBQUksWUFBWTtBQUNWLG9CQUFNLElBQUk7QUFDWixnQkFBSSxTQUFTLElBQUksR0FBRztBQUN0QixzQkFBWSxJQUFJLEtBQUssR0FBRyxJQUFJLGdCQUFnQixTQUFTO0FBQUEsZUFFbEQ7QUFDSCxzQkFBWSxJQUFJLEtBQUssR0FBRyxJQUFJLFlBQXFCO0FBQUEsUUFDbkQ7QUFDQSwyQkFBbUIsVUFBVTtBQUU3QixZQUFJLFNBQVMsTUFBTSxtQkFBbUIsTUFBTSxNQUFNO0FBQ3pDLGtCQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsTUFBTSxpQkFBaUIsTUFBTSxNQUFNLElBQUk7QUFDdEUsWUFBSSxRQUFRO0FBQ1YsY0FBSSxNQUFNLDhLQUE4SyxJQUFJLEtBQUssaURBQWlELFVBQVUsWUFBWTtBQUV4USxjQUFJLFNBQVMsTUFBTSxTQUFTLE1BQU0sUUFBUSxHQUFHO0FBRXpDLHFCQUFPLE9BQU8sUUFBTztBQUNaLCtCQUFRLE9BQU8sT0FBTyxHQUFHO0FBQUEsaUJBRWpDO0FBQ0csd0JBQU0sUUFBUSxXQUFXO0FBQUEsY0FDN0IsVUFBVTtBQUFBLGdCQUNSO0FBQUEsa0JBQ0UsVUFBVTtBQUFBLGtCQUNWLFNBQVMsRUFBRSx3Q0FBd0MsRUFBRSxLQUFLLDBDQUEwQztBQUFBLGdCQUN0RztBQUFBLGNBQ0Y7QUFBQSxjQUNBLG9CQUFvQjtBQUFBLGFBQ3JCO0FBQ0QsOEJBQWtCLFFBQVE7QUFBQSxVQUM1QjtBQUVNO0FBQ04sbUJBQVMsTUFBTSxTQUFTLE1BQU0sUUFBUSxHQUFHO0FBRXJDLHFCQUFPLE9BQU8sUUFBTztBQUNkLDZCQUFRLE9BQU8sT0FBTyxHQUFHO0FBQUEsaUJBRS9CO0FBQ0csd0JBQU0sUUFBUSxXQUFXO0FBQUEsY0FDN0IsVUFBVTtBQUFBLGdCQUNSO0FBQUEsa0JBQ0UsVUFBVTtBQUFBLGtCQUNWLFNBQVMsRUFBRSx3Q0FBd0MsRUFBRSxLQUFLLHdDQUF3QztBQUFBLGdCQUNwRztBQUFBLGNBQ0Y7QUFBQSxjQUNBLG9CQUFvQjtBQUFBLGFBQ3JCO0FBQ0QsOEJBQWtCLFFBQVE7QUFBQSxVQUM1QjtBQUVNO0FBQ04sbUJBQVMsTUFBTSxTQUFTLE1BQU0sUUFBUSxHQUFHO0FBRXJDLHFCQUFPLE9BQU8sUUFBTztBQUNkLDZCQUFRLE9BQU8sT0FBTyxHQUFHO0FBQUEsaUJBRS9CO0FBQ0csd0JBQU0sUUFBUSxXQUFXO0FBQUEsY0FDN0IsVUFBVTtBQUFBLGdCQUNSO0FBQUEsa0JBQ0UsVUFBVTtBQUFBLGtCQUNWLFNBQVMsRUFBRSx3Q0FBd0MsRUFBRSxLQUFLLHdDQUF3QztBQUFBLGdCQUNwRztBQUFBLGNBQ0Y7QUFBQSxjQUNBLG9CQUFvQjtBQUFBLGFBQ3JCO0FBQ0QsOEJBQWtCLFFBQVE7QUFBQSxVQUM1QjtBQUVNO0FBRU4sbUJBQVMsTUFBTSxTQUFTLE1BQU0sUUFBUSxHQUFHO0FBRXJDLHFCQUFPLE9BQU8sUUFBTztBQUNaLCtCQUFRLE9BQU8sT0FBTyxHQUFHO0FBQUEsaUJBRWpDO0FBQ0csd0JBQU0sUUFBUSxXQUFXO0FBQUEsY0FDN0IsVUFBVTtBQUFBLGdCQUNSO0FBQUEsa0JBQ0UsVUFBVTtBQUFBLGtCQUNWLFNBQVMsRUFBRSx3Q0FBd0MsRUFBRSxLQUFLLDBDQUEwQztBQUFBLGdCQUN0RztBQUFBLGNBQ0Y7QUFBQSxjQUNBLG9CQUFvQjtBQUFBLGFBQ3JCO0FBQ0QsOEJBQWtCLFFBQVE7QUFBQSxVQUM1QjtBQUVNLGdqRkFBZ2lGLElBQUksS0FBSyxrREFBa0Q7QUFHam1GLGNBQUksY0FBYyxNQUFNLE1BQU0sUUFBUSxTQUFTO0FBQy9DLG1CQUFTLE1BQU0sU0FBUyxNQUFNLFFBQVEsR0FBRztBQUV6QyxjQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sT0FBTyxRQUFPO0FBQzdCLDJCQUFTLG9CQUFvQixPQUFPLE1BQU07QUFFaEQsa0JBQU0sY0FBYztBQUNkLHdCQUFNLE1BQU0saUJBQWlCLE1BQU07QUFJekMsMEJBQWMsQ0FBQyxDQUFDLGNBQWMsY0FBYztBQUM1Qyx3QkFBWSxhQUFhO0FBQ3pCLHFCQUFTLFFBQVE7QUFDakIsa0JBQU0sTUFBTSxRQUFRLFdBQVcsYUFBYSxLQUFLO0FBQUEsaUJBRTlDO0FBQ0gscUJBQVMsUUFBUTtVQUNuQjtBQUFBLGVBRUc7QUFDRyxzQkFBTSxRQUFRLFdBQVc7QUFBQSxZQUM3QixVQUFVO0FBQUEsY0FDUjtBQUFBLGdCQUNFLFVBQVU7QUFBQSxnQkFDVixTQUFTLEVBQUUsd0NBQXdDLEVBQUUsS0FBSyw4QkFBOEI7QUFBQSxjQUMxRjtBQUFBLFlBQ0Y7QUFBQSxZQUNBLG9CQUFvQjtBQUFBLFdBQ3JCO0FBQ0QsNEJBQWtCLFFBQVE7QUFBQSxRQUM1QjtBQUFBLE1BQ0Y7QUFDQSxrQkFBWSxRQUFRO0FBQUEsS0FDckIiLCJuYW1lcyI6WyJoIiwiaW50ZXJwb2xhdGUiLCJjbG9uZSIsImNvbG9yIiwic2V0IiwiY2FsbGJhY2siLCJkZWZhdWx0cyIsIm5hbWUiLCJfZGVzY3JpcHRvcnMiLCJyZXNvbHZlIiwiZGVzY3JpcHRvcnMiLCJmcm9tIiwidG8iLCJuYW1lcyIsImkiLCJpblJhbmdlIiwibGF5b3V0cyIsInBvc2l0aW9ucyIsInZhbGlkSW5kZXgiLCJyZWdpc3RyeSIsIkNoYXJ0IiwibGlzdGVuZXIiLCJhbHBoYSIsInNraXAiLCJyb3VuZCIsIm1hcCIsInZlcnNpb24iLCJwYXJhbSIsInJlZiIsIkNoYXJ0SlMiLCJUaXRsZSIsIlRvb2x0aXAiLCJMZWdlbmQiLCJjb3VudGVyIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BrdXJrbGUvY29sb3IvZGlzdC9jb2xvci5lc20uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY2hhcnQuanMvZGlzdC9jaHVua3MvaGVscGVycy5zZWdtZW50LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL2Rpc3QvY2hhcnQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWNoYXJ0anMvZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0JhckNoYXJ0LnZ1ZSIsIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1BpZUNoYXJ0LnZ1ZSIsIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0hvbWVUYWJsZS52dWUiLCIuLi8uLi8uLi9zcmMvcGFnZXMvSW5kZXhQYWdlLnZ1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBrdXJrbGUvY29sb3IgdjAuMy4xXG4gKiBodHRwczovL2dpdGh1Yi5jb20va3Vya2xlL2NvbG9yI3JlYWRtZVxuICogKGMpIDIwMjIgSnVra2EgS3Vya2VsYVxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKi9cbmZ1bmN0aW9uIHJvdW5kKHYpIHtcbiAgcmV0dXJuIHYgKyAwLjUgfCAwO1xufVxuY29uc3QgbGltID0gKHYsIGwsIGgpID0+IE1hdGgubWF4KE1hdGgubWluKHYsIGgpLCBsKTtcbmZ1bmN0aW9uIHAyYih2KSB7XG4gIHJldHVybiBsaW0ocm91bmQodiAqIDIuNTUpLCAwLCAyNTUpO1xufVxuZnVuY3Rpb24gYjJwKHYpIHtcbiAgcmV0dXJuIGxpbShyb3VuZCh2IC8gMi41NSksIDAsIDEwMCk7XG59XG5mdW5jdGlvbiBuMmIodikge1xuICByZXR1cm4gbGltKHJvdW5kKHYgKiAyNTUpLCAwLCAyNTUpO1xufVxuZnVuY3Rpb24gYjJuKHYpIHtcbiAgcmV0dXJuIGxpbShyb3VuZCh2IC8gMi41NSkgLyAxMDAsIDAsIDEpO1xufVxuZnVuY3Rpb24gbjJwKHYpIHtcbiAgcmV0dXJuIGxpbShyb3VuZCh2ICogMTAwKSwgMCwgMTAwKTtcbn1cblxuY29uc3QgbWFwJDEgPSB7MDogMCwgMTogMSwgMjogMiwgMzogMywgNDogNCwgNTogNSwgNjogNiwgNzogNywgODogOCwgOTogOSwgQTogMTAsIEI6IDExLCBDOiAxMiwgRDogMTMsIEU6IDE0LCBGOiAxNSwgYTogMTAsIGI6IDExLCBjOiAxMiwgZDogMTMsIGU6IDE0LCBmOiAxNX07XG5jb25zdCBoZXggPSBbLi4uJzAxMjM0NTY3ODlBQkNERUYnXTtcbmNvbnN0IGgxID0gYiA9PiBoZXhbYiAmIDB4Rl07XG5jb25zdCBoMiA9IGIgPT4gaGV4WyhiICYgMHhGMCkgPj4gNF0gKyBoZXhbYiAmIDB4Rl07XG5jb25zdCBlcSA9IGIgPT4gKChiICYgMHhGMCkgPj4gNCkgPT09IChiICYgMHhGKTtcbmNvbnN0IGlzU2hvcnQgPSB2ID0+IGVxKHYucikgJiYgZXEodi5nKSAmJiBlcSh2LmIpICYmIGVxKHYuYSk7XG5mdW5jdGlvbiBoZXhQYXJzZShzdHIpIHtcbiAgdmFyIGxlbiA9IHN0ci5sZW5ndGg7XG4gIHZhciByZXQ7XG4gIGlmIChzdHJbMF0gPT09ICcjJykge1xuICAgIGlmIChsZW4gPT09IDQgfHwgbGVuID09PSA1KSB7XG4gICAgICByZXQgPSB7XG4gICAgICAgIHI6IDI1NSAmIG1hcCQxW3N0clsxXV0gKiAxNyxcbiAgICAgICAgZzogMjU1ICYgbWFwJDFbc3RyWzJdXSAqIDE3LFxuICAgICAgICBiOiAyNTUgJiBtYXAkMVtzdHJbM11dICogMTcsXG4gICAgICAgIGE6IGxlbiA9PT0gNSA/IG1hcCQxW3N0cls0XV0gKiAxNyA6IDI1NVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGxlbiA9PT0gNyB8fCBsZW4gPT09IDkpIHtcbiAgICAgIHJldCA9IHtcbiAgICAgICAgcjogbWFwJDFbc3RyWzFdXSA8PCA0IHwgbWFwJDFbc3RyWzJdXSxcbiAgICAgICAgZzogbWFwJDFbc3RyWzNdXSA8PCA0IHwgbWFwJDFbc3RyWzRdXSxcbiAgICAgICAgYjogbWFwJDFbc3RyWzVdXSA8PCA0IHwgbWFwJDFbc3RyWzZdXSxcbiAgICAgICAgYTogbGVuID09PSA5ID8gKG1hcCQxW3N0cls3XV0gPDwgNCB8IG1hcCQxW3N0cls4XV0pIDogMjU1XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuY29uc3QgYWxwaGEgPSAoYSwgZikgPT4gYSA8IDI1NSA/IGYoYSkgOiAnJztcbmZ1bmN0aW9uIGhleFN0cmluZyh2KSB7XG4gIHZhciBmID0gaXNTaG9ydCh2KSA/IGgxIDogaDI7XG4gIHJldHVybiB2XG4gICAgPyAnIycgKyBmKHYucikgKyBmKHYuZykgKyBmKHYuYikgKyBhbHBoYSh2LmEsIGYpXG4gICAgOiB1bmRlZmluZWQ7XG59XG5cbmNvbnN0IEhVRV9SRSA9IC9eKGhzbGE/fGh3Ynxoc3YpXFwoXFxzKihbLSsuZVxcZF0rKSg/OmRlZyk/W1xccyxdKyhbLSsuZVxcZF0rKSVbXFxzLF0rKFstKy5lXFxkXSspJSg/OltcXHMsXSsoWy0rLmVcXGRdKykoJSk/KT9cXHMqXFwpJC87XG5mdW5jdGlvbiBoc2wycmdibihoLCBzLCBsKSB7XG4gIGNvbnN0IGEgPSBzICogTWF0aC5taW4obCwgMSAtIGwpO1xuICBjb25zdCBmID0gKG4sIGsgPSAobiArIGggLyAzMCkgJSAxMikgPT4gbCAtIGEgKiBNYXRoLm1heChNYXRoLm1pbihrIC0gMywgOSAtIGssIDEpLCAtMSk7XG4gIHJldHVybiBbZigwKSwgZig4KSwgZig0KV07XG59XG5mdW5jdGlvbiBoc3YycmdibihoLCBzLCB2KSB7XG4gIGNvbnN0IGYgPSAobiwgayA9IChuICsgaCAvIDYwKSAlIDYpID0+IHYgLSB2ICogcyAqIE1hdGgubWF4KE1hdGgubWluKGssIDQgLSBrLCAxKSwgMCk7XG4gIHJldHVybiBbZig1KSwgZigzKSwgZigxKV07XG59XG5mdW5jdGlvbiBod2IycmdibihoLCB3LCBiKSB7XG4gIGNvbnN0IHJnYiA9IGhzbDJyZ2JuKGgsIDEsIDAuNSk7XG4gIGxldCBpO1xuICBpZiAodyArIGIgPiAxKSB7XG4gICAgaSA9IDEgLyAodyArIGIpO1xuICAgIHcgKj0gaTtcbiAgICBiICo9IGk7XG4gIH1cbiAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykge1xuICAgIHJnYltpXSAqPSAxIC0gdyAtIGI7XG4gICAgcmdiW2ldICs9IHc7XG4gIH1cbiAgcmV0dXJuIHJnYjtcbn1cbmZ1bmN0aW9uIGh1ZVZhbHVlKHIsIGcsIGIsIGQsIG1heCkge1xuICBpZiAociA9PT0gbWF4KSB7XG4gICAgcmV0dXJuICgoZyAtIGIpIC8gZCkgKyAoZyA8IGIgPyA2IDogMCk7XG4gIH1cbiAgaWYgKGcgPT09IG1heCkge1xuICAgIHJldHVybiAoYiAtIHIpIC8gZCArIDI7XG4gIH1cbiAgcmV0dXJuIChyIC0gZykgLyBkICsgNDtcbn1cbmZ1bmN0aW9uIHJnYjJoc2wodikge1xuICBjb25zdCByYW5nZSA9IDI1NTtcbiAgY29uc3QgciA9IHYuciAvIHJhbmdlO1xuICBjb25zdCBnID0gdi5nIC8gcmFuZ2U7XG4gIGNvbnN0IGIgPSB2LmIgLyByYW5nZTtcbiAgY29uc3QgbWF4ID0gTWF0aC5tYXgociwgZywgYik7XG4gIGNvbnN0IG1pbiA9IE1hdGgubWluKHIsIGcsIGIpO1xuICBjb25zdCBsID0gKG1heCArIG1pbikgLyAyO1xuICBsZXQgaCwgcywgZDtcbiAgaWYgKG1heCAhPT0gbWluKSB7XG4gICAgZCA9IG1heCAtIG1pbjtcbiAgICBzID0gbCA+IDAuNSA/IGQgLyAoMiAtIG1heCAtIG1pbikgOiBkIC8gKG1heCArIG1pbik7XG4gICAgaCA9IGh1ZVZhbHVlKHIsIGcsIGIsIGQsIG1heCk7XG4gICAgaCA9IGggKiA2MCArIDAuNTtcbiAgfVxuICByZXR1cm4gW2ggfCAwLCBzIHx8IDAsIGxdO1xufVxuZnVuY3Rpb24gY2FsbG4oZiwgYSwgYiwgYykge1xuICByZXR1cm4gKFxuICAgIEFycmF5LmlzQXJyYXkoYSlcbiAgICAgID8gZihhWzBdLCBhWzFdLCBhWzJdKVxuICAgICAgOiBmKGEsIGIsIGMpXG4gICkubWFwKG4yYik7XG59XG5mdW5jdGlvbiBoc2wycmdiKGgsIHMsIGwpIHtcbiAgcmV0dXJuIGNhbGxuKGhzbDJyZ2JuLCBoLCBzLCBsKTtcbn1cbmZ1bmN0aW9uIGh3YjJyZ2IoaCwgdywgYikge1xuICByZXR1cm4gY2FsbG4oaHdiMnJnYm4sIGgsIHcsIGIpO1xufVxuZnVuY3Rpb24gaHN2MnJnYihoLCBzLCB2KSB7XG4gIHJldHVybiBjYWxsbihoc3YycmdibiwgaCwgcywgdik7XG59XG5mdW5jdGlvbiBodWUoaCkge1xuICByZXR1cm4gKGggJSAzNjAgKyAzNjApICUgMzYwO1xufVxuZnVuY3Rpb24gaHVlUGFyc2Uoc3RyKSB7XG4gIGNvbnN0IG0gPSBIVUVfUkUuZXhlYyhzdHIpO1xuICBsZXQgYSA9IDI1NTtcbiAgbGV0IHY7XG4gIGlmICghbSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAobVs1XSAhPT0gdikge1xuICAgIGEgPSBtWzZdID8gcDJiKCttWzVdKSA6IG4yYigrbVs1XSk7XG4gIH1cbiAgY29uc3QgaCA9IGh1ZSgrbVsyXSk7XG4gIGNvbnN0IHAxID0gK21bM10gLyAxMDA7XG4gIGNvbnN0IHAyID0gK21bNF0gLyAxMDA7XG4gIGlmIChtWzFdID09PSAnaHdiJykge1xuICAgIHYgPSBod2IycmdiKGgsIHAxLCBwMik7XG4gIH0gZWxzZSBpZiAobVsxXSA9PT0gJ2hzdicpIHtcbiAgICB2ID0gaHN2MnJnYihoLCBwMSwgcDIpO1xuICB9IGVsc2Uge1xuICAgIHYgPSBoc2wycmdiKGgsIHAxLCBwMik7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICByOiB2WzBdLFxuICAgIGc6IHZbMV0sXG4gICAgYjogdlsyXSxcbiAgICBhOiBhXG4gIH07XG59XG5mdW5jdGlvbiByb3RhdGUodiwgZGVnKSB7XG4gIHZhciBoID0gcmdiMmhzbCh2KTtcbiAgaFswXSA9IGh1ZShoWzBdICsgZGVnKTtcbiAgaCA9IGhzbDJyZ2IoaCk7XG4gIHYuciA9IGhbMF07XG4gIHYuZyA9IGhbMV07XG4gIHYuYiA9IGhbMl07XG59XG5mdW5jdGlvbiBoc2xTdHJpbmcodikge1xuICBpZiAoIXYpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgYSA9IHJnYjJoc2wodik7XG4gIGNvbnN0IGggPSBhWzBdO1xuICBjb25zdCBzID0gbjJwKGFbMV0pO1xuICBjb25zdCBsID0gbjJwKGFbMl0pO1xuICByZXR1cm4gdi5hIDwgMjU1XG4gICAgPyBgaHNsYSgke2h9LCAke3N9JSwgJHtsfSUsICR7YjJuKHYuYSl9KWBcbiAgICA6IGBoc2woJHtofSwgJHtzfSUsICR7bH0lKWA7XG59XG5cbmNvbnN0IG1hcCA9IHtcbiAgeDogJ2RhcmsnLFxuICBaOiAnbGlnaHQnLFxuICBZOiAncmUnLFxuICBYOiAnYmx1JyxcbiAgVzogJ2dyJyxcbiAgVjogJ21lZGl1bScsXG4gIFU6ICdzbGF0ZScsXG4gIEE6ICdlZScsXG4gIFQ6ICdvbCcsXG4gIFM6ICdvcicsXG4gIEI6ICdyYScsXG4gIEM6ICdsYXRlZycsXG4gIEQ6ICdpZ2h0cycsXG4gIFI6ICdpbicsXG4gIFE6ICd0dXJxdW9pcycsXG4gIEU6ICdoaScsXG4gIFA6ICdybycsXG4gIE86ICdhbCcsXG4gIE46ICdsZScsXG4gIE06ICdkZScsXG4gIEw6ICd5ZWxsbycsXG4gIEY6ICdlbicsXG4gIEs6ICdjaCcsXG4gIEc6ICdhcmtzJyxcbiAgSDogJ2VhJyxcbiAgSTogJ2lnaHRnJyxcbiAgSjogJ3doJ1xufTtcbmNvbnN0IG5hbWVzJDEgPSB7XG4gIE9pY2VYZTogJ2YwZjhmZicsXG4gIGFudGlxdWV3RXRlOiAnZmFlYmQ3JyxcbiAgYXF1YTogJ2ZmZmYnLFxuICBhcXVhbWFyUmU6ICc3ZmZmZDQnLFxuICBhenVZOiAnZjBmZmZmJyxcbiAgYmVpZ2U6ICdmNWY1ZGMnLFxuICBiaXNxdWU6ICdmZmU0YzQnLFxuICBibGFjazogJzAnLFxuICBibGFuS2VkT21vbmQ6ICdmZmViY2QnLFxuICBYZTogJ2ZmJyxcbiAgWGV2aVRldDogJzhhMmJlMicsXG4gIGJQd246ICdhNTJhMmEnLFxuICBidXJseXdvb2Q6ICdkZWI4ODcnLFxuICBjYU10WGU6ICc1ZjllYTAnLFxuICBLYXJ0WXVzZTogJzdmZmYwMCcsXG4gIEtvY1RhdGU6ICdkMjY5MWUnLFxuICBjU086ICdmZjdmNTAnLFxuICBjU25mbG93ZXJYZTogJzY0OTVlZCcsXG4gIGNTbnNpbGs6ICdmZmY4ZGMnLFxuICBjcmltc29uOiAnZGMxNDNjJyxcbiAgY3lhbjogJ2ZmZmYnLFxuICB4WGU6ICc4YicsXG4gIHhjeWFuOiAnOGI4YicsXG4gIHhnVE1uUGQ6ICdiODg2MGInLFxuICB4V2F5OiAnYTlhOWE5JyxcbiAgeGdZRjogJzY0MDAnLFxuICB4Z1l5OiAnYTlhOWE5JyxcbiAgeGtoYWtpOiAnYmRiNzZiJyxcbiAgeG1hZ0Z0YTogJzhiMDA4YicsXG4gIHhUaXZlZ1lGOiAnNTU2YjJmJyxcbiAgeFNhbmdlOiAnZmY4YzAwJyxcbiAgeFNjRWQ6ICc5OTMyY2MnLFxuICB4WWQ6ICc4YjAwMDAnLFxuICB4c09tb246ICdlOTk2N2EnLFxuICB4c0hnWUY6ICc4ZmJjOGYnLFxuICB4VVhlOiAnNDgzZDhiJyxcbiAgeFVXYXk6ICcyZjRmNGYnLFxuICB4VWdZeTogJzJmNGY0ZicsXG4gIHhRZTogJ2NlZDEnLFxuICB4dmlUZXQ6ICc5NDAwZDMnLFxuICBkQXBwUms6ICdmZjE0OTMnLFxuICBkQXBza3lYZTogJ2JmZmYnLFxuICBkaW1XYXk6ICc2OTY5NjknLFxuICBkaW1nWXk6ICc2OTY5NjknLFxuICBkb2RnZXJYZTogJzFlOTBmZicsXG4gIGZpWWJyaWNrOiAnYjIyMjIyJyxcbiAgZmxTT3dFdGU6ICdmZmZhZjAnLFxuICBmb1lzdFdBbjogJzIyOGIyMicsXG4gIGZ1S3NpYTogJ2ZmMDBmZicsXG4gIGdhUnNiU286ICdkY2RjZGMnLFxuICBnaG9zdHdFdGU6ICdmOGY4ZmYnLFxuICBnVGQ6ICdmZmQ3MDAnLFxuICBnVE1uUGQ6ICdkYWE1MjAnLFxuICBXYXk6ICc4MDgwODAnLFxuICBnWUY6ICc4MDAwJyxcbiAgZ1lGTHc6ICdhZGZmMmYnLFxuICBnWXk6ICc4MDgwODAnLFxuICBob25leU13OiAnZjBmZmYwJyxcbiAgaG90cFJrOiAnZmY2OWI0JyxcbiAgUmRpYW5ZZDogJ2NkNWM1YycsXG4gIFJkaWdvOiAnNGIwMDgyJyxcbiAgaXZTeTogJ2ZmZmZmMCcsXG4gIGtoYWtpOiAnZjBlNjhjJyxcbiAgbGF2Rk1yOiAnZTZlNmZhJyxcbiAgbGF2Rk1yWHNoOiAnZmZmMGY1JyxcbiAgbGF3bmdZRjogJzdjZmMwMCcsXG4gIE5tb25jRWZmb246ICdmZmZhY2QnLFxuICBaWGU6ICdhZGQ4ZTYnLFxuICBaY1NPOiAnZjA4MDgwJyxcbiAgWmN5YW46ICdlMGZmZmYnLFxuICBaZ1RNblBkTHc6ICdmYWZhZDInLFxuICBaV2F5OiAnZDNkM2QzJyxcbiAgWmdZRjogJzkwZWU5MCcsXG4gIFpnWXk6ICdkM2QzZDMnLFxuICBacFJrOiAnZmZiNmMxJyxcbiAgWnNPbW9uOiAnZmZhMDdhJyxcbiAgWnNIZ1lGOiAnMjBiMmFhJyxcbiAgWnNreVhlOiAnODdjZWZhJyxcbiAgWlVXYXk6ICc3Nzg4OTknLFxuICBaVWdZeTogJzc3ODg5OScsXG4gIFpzdEFsWGU6ICdiMGM0ZGUnLFxuICBaTHc6ICdmZmZmZTAnLFxuICBsaW1lOiAnZmYwMCcsXG4gIGxpbWVnWUY6ICczMmNkMzInLFxuICBsUkY6ICdmYWYwZTYnLFxuICBtYWdGdGE6ICdmZjAwZmYnLFxuICBtYVBvbjogJzgwMDAwMCcsXG4gIFZhcXVhbWFyUmU6ICc2NmNkYWEnLFxuICBWWGU6ICdjZCcsXG4gIFZTY0VkOiAnYmE1NWQzJyxcbiAgVnB1cnBOOiAnOTM3MGRiJyxcbiAgVnNIZ1lGOiAnM2NiMzcxJyxcbiAgVlVYZTogJzdiNjhlZScsXG4gIFZzcHJSZ2dZRjogJ2ZhOWEnLFxuICBWUWU6ICc0OGQxY2MnLFxuICBWdmlUZXRZZDogJ2M3MTU4NScsXG4gIG1pZG5pZ2h0WGU6ICcxOTE5NzAnLFxuICBtUnRjWWFtOiAnZjVmZmZhJyxcbiAgbWlzdHlQc2U6ICdmZmU0ZTEnLFxuICBtb2NjYXNSOiAnZmZlNGI1JyxcbiAgbmF2YWpvd0V0ZTogJ2ZmZGVhZCcsXG4gIG5hdnk6ICc4MCcsXG4gIFRkbGFjZTogJ2ZkZjVlNicsXG4gIFRpdmU6ICc4MDgwMDAnLFxuICBUaXZlZEJiOiAnNmI4ZTIzJyxcbiAgU2FuZ2U6ICdmZmE1MDAnLFxuICBTYW5nZVlkOiAnZmY0NTAwJyxcbiAgU2NFZDogJ2RhNzBkNicsXG4gIHBPZWdUTW5QZDogJ2VlZThhYScsXG4gIHBPZWdZRjogJzk4ZmI5OCcsXG4gIHBPZVFlOiAnYWZlZWVlJyxcbiAgcE9ldmlUZXRZZDogJ2RiNzA5MycsXG4gIHBhcGF5YXdFcDogJ2ZmZWZkNScsXG4gIHBIS3B1ZmY6ICdmZmRhYjknLFxuICBwZXJ1OiAnY2Q4NTNmJyxcbiAgcFJrOiAnZmZjMGNiJyxcbiAgcGx1bTogJ2RkYTBkZCcsXG4gIHBvd01yWGU6ICdiMGUwZTYnLFxuICBwdXJwTjogJzgwMDA4MCcsXG4gIFliZWNjYXB1cnBOOiAnNjYzMzk5JyxcbiAgWWQ6ICdmZjAwMDAnLFxuICBQc3licm93bjogJ2JjOGY4ZicsXG4gIFB5T1hlOiAnNDE2OWUxJyxcbiAgc2FkZE5iUHduOiAnOGI0NTEzJyxcbiAgc09tb246ICdmYTgwNzInLFxuICBzYW5keWJQd246ICdmNGE0NjAnLFxuICBzSGdZRjogJzJlOGI1NycsXG4gIHNIc2hlbGw6ICdmZmY1ZWUnLFxuICBzaUZuYTogJ2EwNTIyZCcsXG4gIHNpbHZlcjogJ2MwYzBjMCcsXG4gIHNreVhlOiAnODdjZWViJyxcbiAgVVhlOiAnNmE1YWNkJyxcbiAgVVdheTogJzcwODA5MCcsXG4gIFVnWXk6ICc3MDgwOTAnLFxuICBzbm93OiAnZmZmYWZhJyxcbiAgc3ByUmdnWUY6ICdmZjdmJyxcbiAgc3RBbFhlOiAnNDY4MmI0JyxcbiAgdGFuOiAnZDJiNDhjJyxcbiAgdGVPOiAnODA4MCcsXG4gIHRFc3ROOiAnZDhiZmQ4JyxcbiAgdG9tYXRvOiAnZmY2MzQ3JyxcbiAgUWU6ICc0MGUwZDAnLFxuICB2aVRldDogJ2VlODJlZScsXG4gIEpIdDogJ2Y1ZGViMycsXG4gIHdFdGU6ICdmZmZmZmYnLFxuICB3RXRlc21va2U6ICdmNWY1ZjUnLFxuICBMdzogJ2ZmZmYwMCcsXG4gIEx3Z1lGOiAnOWFjZDMyJ1xufTtcbmZ1bmN0aW9uIHVucGFjaygpIHtcbiAgY29uc3QgdW5wYWNrZWQgPSB7fTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG5hbWVzJDEpO1xuICBjb25zdCB0a2V5cyA9IE9iamVjdC5rZXlzKG1hcCk7XG4gIGxldCBpLCBqLCBrLCBvaywgbms7XG4gIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgb2sgPSBuayA9IGtleXNbaV07XG4gICAgZm9yIChqID0gMDsgaiA8IHRrZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICBrID0gdGtleXNbal07XG4gICAgICBuayA9IG5rLnJlcGxhY2UoaywgbWFwW2tdKTtcbiAgICB9XG4gICAgayA9IHBhcnNlSW50KG5hbWVzJDFbb2tdLCAxNik7XG4gICAgdW5wYWNrZWRbbmtdID0gW2sgPj4gMTYgJiAweEZGLCBrID4+IDggJiAweEZGLCBrICYgMHhGRl07XG4gIH1cbiAgcmV0dXJuIHVucGFja2VkO1xufVxuXG5sZXQgbmFtZXM7XG5mdW5jdGlvbiBuYW1lUGFyc2Uoc3RyKSB7XG4gIGlmICghbmFtZXMpIHtcbiAgICBuYW1lcyA9IHVucGFjaygpO1xuICAgIG5hbWVzLnRyYW5zcGFyZW50ID0gWzAsIDAsIDAsIDBdO1xuICB9XG4gIGNvbnN0IGEgPSBuYW1lc1tzdHIudG9Mb3dlckNhc2UoKV07XG4gIHJldHVybiBhICYmIHtcbiAgICByOiBhWzBdLFxuICAgIGc6IGFbMV0sXG4gICAgYjogYVsyXSxcbiAgICBhOiBhLmxlbmd0aCA9PT0gNCA/IGFbM10gOiAyNTVcbiAgfTtcbn1cblxuY29uc3QgUkdCX1JFID0gL15yZ2JhP1xcKFxccyooWy0rLlxcZF0rKSglKT9bXFxzLF0rKFstKy5lXFxkXSspKCUpP1tcXHMsXSsoWy0rLmVcXGRdKykoJSk/KD86W1xccywvXSsoWy0rLmVcXGRdKykoJSk/KT9cXHMqXFwpJC87XG5mdW5jdGlvbiByZ2JQYXJzZShzdHIpIHtcbiAgY29uc3QgbSA9IFJHQl9SRS5leGVjKHN0cik7XG4gIGxldCBhID0gMjU1O1xuICBsZXQgciwgZywgYjtcbiAgaWYgKCFtKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChtWzddICE9PSByKSB7XG4gICAgY29uc3QgdiA9ICttWzddO1xuICAgIGEgPSBtWzhdID8gcDJiKHYpIDogbGltKHYgKiAyNTUsIDAsIDI1NSk7XG4gIH1cbiAgciA9ICttWzFdO1xuICBnID0gK21bM107XG4gIGIgPSArbVs1XTtcbiAgciA9IDI1NSAmIChtWzJdID8gcDJiKHIpIDogbGltKHIsIDAsIDI1NSkpO1xuICBnID0gMjU1ICYgKG1bNF0gPyBwMmIoZykgOiBsaW0oZywgMCwgMjU1KSk7XG4gIGIgPSAyNTUgJiAobVs2XSA/IHAyYihiKSA6IGxpbShiLCAwLCAyNTUpKTtcbiAgcmV0dXJuIHtcbiAgICByOiByLFxuICAgIGc6IGcsXG4gICAgYjogYixcbiAgICBhOiBhXG4gIH07XG59XG5mdW5jdGlvbiByZ2JTdHJpbmcodikge1xuICByZXR1cm4gdiAmJiAoXG4gICAgdi5hIDwgMjU1XG4gICAgICA/IGByZ2JhKCR7di5yfSwgJHt2Lmd9LCAke3YuYn0sICR7YjJuKHYuYSl9KWBcbiAgICAgIDogYHJnYigke3Yucn0sICR7di5nfSwgJHt2LmJ9KWBcbiAgKTtcbn1cblxuY29uc3QgdG8gPSB2ID0+IHYgPD0gMC4wMDMxMzA4ID8gdiAqIDEyLjkyIDogTWF0aC5wb3codiwgMS4wIC8gMi40KSAqIDEuMDU1IC0gMC4wNTU7XG5jb25zdCBmcm9tID0gdiA9PiB2IDw9IDAuMDQwNDUgPyB2IC8gMTIuOTIgOiBNYXRoLnBvdygodiArIDAuMDU1KSAvIDEuMDU1LCAyLjQpO1xuZnVuY3Rpb24gaW50ZXJwb2xhdGUocmdiMSwgcmdiMiwgdCkge1xuICBjb25zdCByID0gZnJvbShiMm4ocmdiMS5yKSk7XG4gIGNvbnN0IGcgPSBmcm9tKGIybihyZ2IxLmcpKTtcbiAgY29uc3QgYiA9IGZyb20oYjJuKHJnYjEuYikpO1xuICByZXR1cm4ge1xuICAgIHI6IG4yYih0byhyICsgdCAqIChmcm9tKGIybihyZ2IyLnIpKSAtIHIpKSksXG4gICAgZzogbjJiKHRvKGcgKyB0ICogKGZyb20oYjJuKHJnYjIuZykpIC0gZykpKSxcbiAgICBiOiBuMmIodG8oYiArIHQgKiAoZnJvbShiMm4ocmdiMi5iKSkgLSBiKSkpLFxuICAgIGE6IHJnYjEuYSArIHQgKiAocmdiMi5hIC0gcmdiMS5hKVxuICB9O1xufVxuXG5mdW5jdGlvbiBtb2RIU0wodiwgaSwgcmF0aW8pIHtcbiAgaWYgKHYpIHtcbiAgICBsZXQgdG1wID0gcmdiMmhzbCh2KTtcbiAgICB0bXBbaV0gPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0bXBbaV0gKyB0bXBbaV0gKiByYXRpbywgaSA9PT0gMCA/IDM2MCA6IDEpKTtcbiAgICB0bXAgPSBoc2wycmdiKHRtcCk7XG4gICAgdi5yID0gdG1wWzBdO1xuICAgIHYuZyA9IHRtcFsxXTtcbiAgICB2LmIgPSB0bXBbMl07XG4gIH1cbn1cbmZ1bmN0aW9uIGNsb25lKHYsIHByb3RvKSB7XG4gIHJldHVybiB2ID8gT2JqZWN0LmFzc2lnbihwcm90byB8fCB7fSwgdikgOiB2O1xufVxuZnVuY3Rpb24gZnJvbU9iamVjdChpbnB1dCkge1xuICB2YXIgdiA9IHtyOiAwLCBnOiAwLCBiOiAwLCBhOiAyNTV9O1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICBpZiAoaW5wdXQubGVuZ3RoID49IDMpIHtcbiAgICAgIHYgPSB7cjogaW5wdXRbMF0sIGc6IGlucHV0WzFdLCBiOiBpbnB1dFsyXSwgYTogMjU1fTtcbiAgICAgIGlmIChpbnB1dC5sZW5ndGggPiAzKSB7XG4gICAgICAgIHYuYSA9IG4yYihpbnB1dFszXSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHYgPSBjbG9uZShpbnB1dCwge3I6IDAsIGc6IDAsIGI6IDAsIGE6IDF9KTtcbiAgICB2LmEgPSBuMmIodi5hKTtcbiAgfVxuICByZXR1cm4gdjtcbn1cbmZ1bmN0aW9uIGZ1bmN0aW9uUGFyc2Uoc3RyKSB7XG4gIGlmIChzdHIuY2hhckF0KDApID09PSAncicpIHtcbiAgICByZXR1cm4gcmdiUGFyc2Uoc3RyKTtcbiAgfVxuICByZXR1cm4gaHVlUGFyc2Uoc3RyKTtcbn1cbmNsYXNzIENvbG9yIHtcbiAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBDb2xvcikge1xuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIGlucHV0O1xuICAgIGxldCB2O1xuICAgIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgdiA9IGZyb21PYmplY3QoaW5wdXQpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHYgPSBoZXhQYXJzZShpbnB1dCkgfHwgbmFtZVBhcnNlKGlucHV0KSB8fCBmdW5jdGlvblBhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdGhpcy5fcmdiID0gdjtcbiAgICB0aGlzLl92YWxpZCA9ICEhdjtcbiAgfVxuICBnZXQgdmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbGlkO1xuICB9XG4gIGdldCByZ2IoKSB7XG4gICAgdmFyIHYgPSBjbG9uZSh0aGlzLl9yZ2IpO1xuICAgIGlmICh2KSB7XG4gICAgICB2LmEgPSBiMm4odi5hKTtcbiAgICB9XG4gICAgcmV0dXJuIHY7XG4gIH1cbiAgc2V0IHJnYihvYmopIHtcbiAgICB0aGlzLl9yZ2IgPSBmcm9tT2JqZWN0KG9iaik7XG4gIH1cbiAgcmdiU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLl92YWxpZCA/IHJnYlN0cmluZyh0aGlzLl9yZ2IpIDogdW5kZWZpbmVkO1xuICB9XG4gIGhleFN0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsaWQgPyBoZXhTdHJpbmcodGhpcy5fcmdiKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBoc2xTdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbGlkID8gaHNsU3RyaW5nKHRoaXMuX3JnYikgOiB1bmRlZmluZWQ7XG4gIH1cbiAgbWl4KGNvbG9yLCB3ZWlnaHQpIHtcbiAgICBpZiAoY29sb3IpIHtcbiAgICAgIGNvbnN0IGMxID0gdGhpcy5yZ2I7XG4gICAgICBjb25zdCBjMiA9IGNvbG9yLnJnYjtcbiAgICAgIGxldCB3MjtcbiAgICAgIGNvbnN0IHAgPSB3ZWlnaHQgPT09IHcyID8gMC41IDogd2VpZ2h0O1xuICAgICAgY29uc3QgdyA9IDIgKiBwIC0gMTtcbiAgICAgIGNvbnN0IGEgPSBjMS5hIC0gYzIuYTtcbiAgICAgIGNvbnN0IHcxID0gKCh3ICogYSA9PT0gLTEgPyB3IDogKHcgKyBhKSAvICgxICsgdyAqIGEpKSArIDEpIC8gMi4wO1xuICAgICAgdzIgPSAxIC0gdzE7XG4gICAgICBjMS5yID0gMHhGRiAmIHcxICogYzEuciArIHcyICogYzIuciArIDAuNTtcbiAgICAgIGMxLmcgPSAweEZGICYgdzEgKiBjMS5nICsgdzIgKiBjMi5nICsgMC41O1xuICAgICAgYzEuYiA9IDB4RkYgJiB3MSAqIGMxLmIgKyB3MiAqIGMyLmIgKyAwLjU7XG4gICAgICBjMS5hID0gcCAqIGMxLmEgKyAoMSAtIHApICogYzIuYTtcbiAgICAgIHRoaXMucmdiID0gYzE7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGludGVycG9sYXRlKGNvbG9yLCB0KSB7XG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICB0aGlzLl9yZ2IgPSBpbnRlcnBvbGF0ZSh0aGlzLl9yZ2IsIGNvbG9yLl9yZ2IsIHQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IENvbG9yKHRoaXMucmdiKTtcbiAgfVxuICBhbHBoYShhKSB7XG4gICAgdGhpcy5fcmdiLmEgPSBuMmIoYSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xlYXJlcihyYXRpbykge1xuICAgIGNvbnN0IHJnYiA9IHRoaXMuX3JnYjtcbiAgICByZ2IuYSAqPSAxIC0gcmF0aW87XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ3JleXNjYWxlKCkge1xuICAgIGNvbnN0IHJnYiA9IHRoaXMuX3JnYjtcbiAgICBjb25zdCB2YWwgPSByb3VuZChyZ2IuciAqIDAuMyArIHJnYi5nICogMC41OSArIHJnYi5iICogMC4xMSk7XG4gICAgcmdiLnIgPSByZ2IuZyA9IHJnYi5iID0gdmFsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG9wYXF1ZXIocmF0aW8pIHtcbiAgICBjb25zdCByZ2IgPSB0aGlzLl9yZ2I7XG4gICAgcmdiLmEgKj0gMSArIHJhdGlvO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG5lZ2F0ZSgpIHtcbiAgICBjb25zdCB2ID0gdGhpcy5fcmdiO1xuICAgIHYuciA9IDI1NSAtIHYucjtcbiAgICB2LmcgPSAyNTUgLSB2Lmc7XG4gICAgdi5iID0gMjU1IC0gdi5iO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGxpZ2h0ZW4ocmF0aW8pIHtcbiAgICBtb2RIU0wodGhpcy5fcmdiLCAyLCByYXRpbyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGFya2VuKHJhdGlvKSB7XG4gICAgbW9kSFNMKHRoaXMuX3JnYiwgMiwgLXJhdGlvKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzYXR1cmF0ZShyYXRpbykge1xuICAgIG1vZEhTTCh0aGlzLl9yZ2IsIDEsIHJhdGlvKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkZXNhdHVyYXRlKHJhdGlvKSB7XG4gICAgbW9kSFNMKHRoaXMuX3JnYiwgMSwgLXJhdGlvKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByb3RhdGUoZGVnKSB7XG4gICAgcm90YXRlKHRoaXMuX3JnYiwgZGVnKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5mdW5jdGlvbiBpbmRleF9lc20oaW5wdXQpIHtcbiAgcmV0dXJuIG5ldyBDb2xvcihpbnB1dCk7XG59XG5cbmV4cG9ydCB7IENvbG9yLCBiMm4sIGIycCwgaW5kZXhfZXNtIGFzIGRlZmF1bHQsIGhleFBhcnNlLCBoZXhTdHJpbmcsIGhzbDJyZ2IsIGhzbFN0cmluZywgaHN2MnJnYiwgaHVlUGFyc2UsIGh3YjJyZ2IsIGxpbSwgbjJiLCBuMnAsIG5hbWVQYXJzZSwgcDJiLCByZ2IyaHNsLCByZ2JQYXJzZSwgcmdiU3RyaW5nLCByb3RhdGUsIHJvdW5kIH07XG4iLCIvKiFcbiAqIENoYXJ0LmpzIHY0LjEuMVxuICogaHR0cHM6Ly93d3cuY2hhcnRqcy5vcmdcbiAqIChjKSAyMDIyIENoYXJ0LmpzIENvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IENvbG9yIH0gZnJvbSAnQGt1cmtsZS9jb2xvcic7XG5cbi8qKlxuICogQG5hbWVzcGFjZSBDaGFydC5oZWxwZXJzXG4gKi8gLyoqXG4gKiBBbiBlbXB0eSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkLCBmb3IgZXhhbXBsZSwgZm9yIG9wdGlvbmFsIGNhbGxiYWNrLlxuICovIGZ1bmN0aW9uIG5vb3AoKSB7XG4vKiBub29wICovIH1cbi8qKlxuICogUmV0dXJucyBhIHVuaXF1ZSBpZCwgc2VxdWVudGlhbGx5IGdlbmVyYXRlZCBmcm9tIGEgZ2xvYmFsIHZhcmlhYmxlLlxuICovIGNvbnN0IHVpZCA9ICgoKT0+e1xuICAgIGxldCBpZCA9IDA7XG4gICAgcmV0dXJuICgpPT5pZCsrO1xufSkoKTtcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgbmVpdGhlciBudWxsIG5vciB1bmRlZmluZWQsIGVsc2UgcmV0dXJucyBmYWxzZS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byB0ZXN0LlxuICogQHNpbmNlIDIuNy4wXG4gKi8gZnVuY3Rpb24gaXNOdWxsT3JVbmRlZih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSAoaW5jbHVkaW5nIHR5cGVkIGFycmF5cyksIGVsc2UgcmV0dXJucyBmYWxzZS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byB0ZXN0LlxuICogQGZ1bmN0aW9uXG4gKi8gZnVuY3Rpb24gaXNBcnJheSh2YWx1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5ICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgICBpZiAodHlwZS5zbGljZSgwLCA3KSA9PT0gJ1tvYmplY3QnICYmIHR5cGUuc2xpY2UoLTYpID09PSAnQXJyYXldJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QgKGV4Y2x1ZGluZyBudWxsKSwgZWxzZSByZXR1cm5zIGZhbHNlLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHRlc3QuXG4gKiBAc2luY2UgMi43LjBcbiAqLyBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBmaW5pdGUgbnVtYmVyLCBlbHNlIHJldHVybnMgZmFsc2VcbiAqIEBwYXJhbSB2YWx1ZSAgLSBUaGUgdmFsdWUgdG8gdGVzdC5cbiAqLyBmdW5jdGlvbiBpc051bWJlckZpbml0ZSh2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB2YWx1ZSBpbnN0YW5jZW9mIE51bWJlcikgJiYgaXNGaW5pdGUoK3ZhbHVlKTtcbn1cbi8qKlxuICogUmV0dXJucyBgdmFsdWVgIGlmIGZpbml0ZSwgZWxzZSByZXR1cm5zIGBkZWZhdWx0VmFsdWVgLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHJldHVybiBpZiBkZWZpbmVkLlxuICogQHBhcmFtIGRlZmF1bHRWYWx1ZSAtIFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgYHZhbHVlYCBpcyBub3QgZmluaXRlLlxuICovIGZ1bmN0aW9uIGZpbml0ZU9yRGVmYXVsdCh2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIGlzTnVtYmVyRmluaXRlKHZhbHVlKSA/IHZhbHVlIDogZGVmYXVsdFZhbHVlO1xufVxuLyoqXG4gKiBSZXR1cm5zIGB2YWx1ZWAgaWYgZGVmaW5lZCwgZWxzZSByZXR1cm5zIGBkZWZhdWx0VmFsdWVgLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHJldHVybiBpZiBkZWZpbmVkLlxuICogQHBhcmFtIGRlZmF1bHRWYWx1ZSAtIFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgYHZhbHVlYCBpcyB1bmRlZmluZWQuXG4gKi8gZnVuY3Rpb24gdmFsdWVPckRlZmF1bHQodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gZGVmYXVsdFZhbHVlIDogdmFsdWU7XG59XG5jb25zdCB0b1BlcmNlbnRhZ2UgPSAodmFsdWUsIGRpbWVuc2lvbik9PnR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZW5kc1dpdGgoJyUnKSA/IHBhcnNlRmxvYXQodmFsdWUpIC8gMTAwIDogK3ZhbHVlIC8gZGltZW5zaW9uO1xuY29uc3QgdG9EaW1lbnNpb24gPSAodmFsdWUsIGRpbWVuc2lvbik9PnR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZW5kc1dpdGgoJyUnKSA/IHBhcnNlRmxvYXQodmFsdWUpIC8gMTAwICogZGltZW5zaW9uIDogK3ZhbHVlO1xuLyoqXG4gKiBDYWxscyBgZm5gIHdpdGggdGhlIGdpdmVuIGBhcmdzYCBpbiB0aGUgc2NvcGUgZGVmaW5lZCBieSBgdGhpc0FyZ2AgYW5kIHJldHVybnMgdGhlXG4gKiB2YWx1ZSByZXR1cm5lZCBieSBgZm5gLiBJZiBgZm5gIGlzIG5vdCBhIGZ1bmN0aW9uLCB0aGlzIG1ldGhvZCByZXR1cm5zIHVuZGVmaW5lZC5cbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIHdpdGggd2hpY2ggYGZuYCBzaG91bGQgYmUgY2FsbGVkLlxuICogQHBhcmFtIFt0aGlzQXJnXSAtIFRoZSB2YWx1ZSBvZiBgdGhpc2AgcHJvdmlkZWQgZm9yIHRoZSBjYWxsIHRvIGBmbmAuXG4gKi8gZnVuY3Rpb24gY2FsbGJhY2soZm4sIGFyZ3MsIHRoaXNBcmcpIHtcbiAgICBpZiAoZm4gJiYgdHlwZW9mIGZuLmNhbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVhY2gobG9vcGFibGUsIGZuLCB0aGlzQXJnLCByZXZlcnNlKSB7XG4gICAgbGV0IGksIGxlbiwga2V5cztcbiAgICBpZiAoaXNBcnJheShsb29wYWJsZSkpIHtcbiAgICAgICAgbGVuID0gbG9vcGFibGUubGVuZ3RoO1xuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgZm9yKGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSl7XG4gICAgICAgICAgICAgICAgZm4uY2FsbCh0aGlzQXJnLCBsb29wYWJsZVtpXSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKyl7XG4gICAgICAgICAgICAgICAgZm4uY2FsbCh0aGlzQXJnLCBsb29wYWJsZVtpXSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxvb3BhYmxlKSkge1xuICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMobG9vcGFibGUpO1xuICAgICAgICBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspe1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzQXJnLCBsb29wYWJsZVtrZXlzW2ldXSwga2V5c1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYGEwYCBhbmQgYGExYCBhcnJheXMgaGF2ZSB0aGUgc2FtZSBjb250ZW50LCBlbHNlIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0gYTAgLSBUaGUgYXJyYXkgdG8gY29tcGFyZVxuICogQHBhcmFtIGExIC0gVGhlIGFycmF5IHRvIGNvbXBhcmVcbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2VsZW1lbnRzRXF1YWwoYTAsIGExKSB7XG4gICAgbGV0IGksIGlsZW4sIHYwLCB2MTtcbiAgICBpZiAoIWEwIHx8ICFhMSB8fCBhMC5sZW5ndGggIT09IGExLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvcihpID0gMCwgaWxlbiA9IGEwLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgIHYwID0gYTBbaV07XG4gICAgICAgIHYxID0gYTFbaV07XG4gICAgICAgIGlmICh2MC5kYXRhc2V0SW5kZXggIT09IHYxLmRhdGFzZXRJbmRleCB8fCB2MC5pbmRleCAhPT0gdjEuaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogUmV0dXJucyBhIGRlZXAgY29weSBvZiBgc291cmNlYCB3aXRob3V0IGtlZXBpbmcgcmVmZXJlbmNlcyBvbiBvYmplY3RzIGFuZCBhcnJheXMuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIHZhbHVlIHRvIGNsb25lLlxuICovIGZ1bmN0aW9uIGNsb25lKHNvdXJjZSkge1xuICAgIGlmIChpc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5tYXAoY2xvbmUpO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICAgICAgY29uc3Qga2xlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICBsZXQgayA9IDA7XG4gICAgICAgIGZvcig7IGsgPCBrbGVuOyArK2spe1xuICAgICAgICAgICAgdGFyZ2V0W2tleXNba11dID0gY2xvbmUoc291cmNlW2tleXNba11dKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICAnX19wcm90b19fJyxcbiAgICAgICAgJ3Byb3RvdHlwZScsXG4gICAgICAgICdjb25zdHJ1Y3RvcidcbiAgICBdLmluZGV4T2Yoa2V5KSA9PT0gLTE7XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IG1lcmdlciB3aGVuIENoYXJ0LmhlbHBlcnMubWVyZ2UgaXMgY2FsbGVkIHdpdGhvdXQgbWVyZ2VyIG9wdGlvbi5cbiAqIE5vdGUoU0IpOiBhbHNvIHVzZWQgYnkgbWVyZ2VDb25maWcgYW5kIG1lcmdlU2NhbGVDb25maWcgYXMgZmFsbGJhY2suXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIF9tZXJnZXIoa2V5LCB0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuICAgIGlmICghaXNWYWxpZEtleShrZXkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdHZhbCA9IHRhcmdldFtrZXldO1xuICAgIGNvbnN0IHN2YWwgPSBzb3VyY2Vba2V5XTtcbiAgICBpZiAoaXNPYmplY3QodHZhbCkgJiYgaXNPYmplY3Qoc3ZhbCkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBtZXJnZSh0dmFsLCBzdmFsLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRba2V5XSA9IGNsb25lKHN2YWwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlKHRhcmdldCwgc291cmNlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgc291cmNlcyA9IGlzQXJyYXkoc291cmNlKSA/IHNvdXJjZSA6IFtcbiAgICAgICAgc291cmNlXG4gICAgXTtcbiAgICBjb25zdCBpbGVuID0gc291cmNlcy5sZW5ndGg7XG4gICAgaWYgKCFpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGNvbnN0IG1lcmdlciA9IG9wdGlvbnMubWVyZ2VyIHx8IF9tZXJnZXI7XG4gICAgbGV0IGN1cnJlbnQ7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgIGN1cnJlbnQgPSBzb3VyY2VzW2ldO1xuICAgICAgICBpZiAoIWlzT2JqZWN0KGN1cnJlbnQpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY3VycmVudCk7XG4gICAgICAgIGZvcihsZXQgayA9IDAsIGtsZW4gPSBrZXlzLmxlbmd0aDsgayA8IGtsZW47ICsrayl7XG4gICAgICAgICAgICBtZXJnZXIoa2V5c1trXSwgdGFyZ2V0LCBjdXJyZW50LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gbWVyZ2VJZih0YXJnZXQsIHNvdXJjZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICByZXR1cm4gbWVyZ2UodGFyZ2V0LCBzb3VyY2UsIHtcbiAgICAgICAgbWVyZ2VyOiBfbWVyZ2VySWZcbiAgICB9KTtcbn1cbi8qKlxuICogTWVyZ2VzIHNvdXJjZVtrZXldIGluIHRhcmdldFtrZXldIG9ubHkgaWYgdGFyZ2V0W2tleV0gaXMgdW5kZWZpbmVkLlxuICogQHByaXZhdGVcbiAqLyBmdW5jdGlvbiBfbWVyZ2VySWYoa2V5LCB0YXJnZXQsIHNvdXJjZSkge1xuICAgIGlmICghaXNWYWxpZEtleShrZXkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdHZhbCA9IHRhcmdldFtrZXldO1xuICAgIGNvbnN0IHN2YWwgPSBzb3VyY2Vba2V5XTtcbiAgICBpZiAoaXNPYmplY3QodHZhbCkgJiYgaXNPYmplY3Qoc3ZhbCkpIHtcbiAgICAgICAgbWVyZ2VJZih0dmFsLCBzdmFsKTtcbiAgICB9IGVsc2UgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gY2xvbmUoc3ZhbCk7XG4gICAgfVxufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIF9kZXByZWNhdGVkKHNjb3BlLCB2YWx1ZSwgcHJldmlvdXMsIGN1cnJlbnQpIHtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zb2xlLndhcm4oc2NvcGUgKyAnOiBcIicgKyBwcmV2aW91cyArICdcIiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFwiJyArIGN1cnJlbnQgKyAnXCIgaW5zdGVhZCcpO1xuICAgIH1cbn1cbi8vIHJlc29sdmVPYmplY3RLZXkgcmVzb2x2ZXIgY2FjaGVcbmNvbnN0IGtleVJlc29sdmVycyA9IHtcbiAgICAvLyBDaGFydC5oZWxwZXJzLmNvcmUgcmVzb2x2ZU9iamVjdEtleSBzaG91bGQgcmVzb2x2ZSBlbXB0eSBrZXkgdG8gcm9vdCBvYmplY3RcbiAgICAnJzogKHYpPT52LFxuICAgIC8vIGRlZmF1bHQgcmVzb2x2ZXJzXG4gICAgeDogKG8pPT5vLngsXG4gICAgeTogKG8pPT5vLnlcbn07XG4vKipcbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX3NwbGl0S2V5KGtleSkge1xuICAgIGNvbnN0IHBhcnRzID0ga2V5LnNwbGl0KCcuJyk7XG4gICAgY29uc3Qga2V5cyA9IFtdO1xuICAgIGxldCB0bXAgPSAnJztcbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpe1xuICAgICAgICB0bXAgKz0gcGFydDtcbiAgICAgICAgaWYgKHRtcC5lbmRzV2l0aCgnXFxcXCcpKSB7XG4gICAgICAgICAgICB0bXAgPSB0bXAuc2xpY2UoMCwgLTEpICsgJy4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAga2V5cy5wdXNoKHRtcCk7XG4gICAgICAgICAgICB0bXAgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn1cbmZ1bmN0aW9uIF9nZXRLZXlSZXNvbHZlcihrZXkpIHtcbiAgICBjb25zdCBrZXlzID0gX3NwbGl0S2V5KGtleSk7XG4gICAgcmV0dXJuIChvYmopPT57XG4gICAgICAgIGZvciAoY29uc3QgayBvZiBrZXlzKXtcbiAgICAgICAgICAgIGlmIChrID09PSAnJykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gb2JqICYmIG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG59XG5mdW5jdGlvbiByZXNvbHZlT2JqZWN0S2V5KG9iaiwga2V5KSB7XG4gICAgY29uc3QgcmVzb2x2ZXIgPSBrZXlSZXNvbHZlcnNba2V5XSB8fCAoa2V5UmVzb2x2ZXJzW2tleV0gPSBfZ2V0S2V5UmVzb2x2ZXIoa2V5KSk7XG4gICAgcmV0dXJuIHJlc29sdmVyKG9iaik7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2NhcGl0YWxpemUoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cbmNvbnN0IGRlZmluZWQgPSAodmFsdWUpPT50eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnO1xuY29uc3QgaXNGdW5jdGlvbiA9ICh2YWx1ZSk9PnR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMTEyODg1NS9jb21wYXJpbmctZWNtYTYtc2V0cy1mb3ItZXF1YWxpdHkjMzExMjkzODRcbmNvbnN0IHNldHNFcXVhbCA9IChhLCBiKT0+e1xuICAgIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBhKXtcbiAgICAgICAgaWYgKCFiLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuICogQHBhcmFtIGUgLSBUaGUgZXZlbnRcbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2lzQ2xpY2tFdmVudChlKSB7XG4gICAgcmV0dXJuIGUudHlwZSA9PT0gJ21vdXNldXAnIHx8IGUudHlwZSA9PT0gJ2NsaWNrJyB8fCBlLnR5cGUgPT09ICdjb250ZXh0bWVudSc7XG59XG5cbi8qKlxuICogQGFsaWFzIENoYXJ0LmhlbHBlcnMubWF0aFxuICogQG5hbWVzcGFjZVxuICovIGNvbnN0IFBJID0gTWF0aC5QSTtcbmNvbnN0IFRBVSA9IDIgKiBQSTtcbmNvbnN0IFBJVEFVID0gVEFVICsgUEk7XG5jb25zdCBJTkZJTklUWSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbmNvbnN0IFJBRF9QRVJfREVHID0gUEkgLyAxODA7XG5jb25zdCBIQUxGX1BJID0gUEkgLyAyO1xuY29uc3QgUVVBUlRFUl9QSSA9IFBJIC8gNDtcbmNvbnN0IFRXT19USElSRFNfUEkgPSBQSSAqIDIgLyAzO1xuY29uc3QgbG9nMTAgPSBNYXRoLmxvZzEwO1xuY29uc3Qgc2lnbiA9IE1hdGguc2lnbjtcbmZ1bmN0aW9uIGFsbW9zdEVxdWFscyh4LCB5LCBlcHNpbG9uKSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKHggLSB5KSA8IGVwc2lsb247XG59XG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBuaWNlIG51bWJlciBhbGdvcml0aG0gdXNlZCBpbiBkZXRlcm1pbmluZyB3aGVyZSBheGlzIGxhYmVscyB3aWxsIGdvXG4gKi8gZnVuY3Rpb24gbmljZU51bShyYW5nZSkge1xuICAgIGNvbnN0IHJvdW5kZWRSYW5nZSA9IE1hdGgucm91bmQocmFuZ2UpO1xuICAgIHJhbmdlID0gYWxtb3N0RXF1YWxzKHJhbmdlLCByb3VuZGVkUmFuZ2UsIHJhbmdlIC8gMTAwMCkgPyByb3VuZGVkUmFuZ2UgOiByYW5nZTtcbiAgICBjb25zdCBuaWNlUmFuZ2UgPSBNYXRoLnBvdygxMCwgTWF0aC5mbG9vcihsb2cxMChyYW5nZSkpKTtcbiAgICBjb25zdCBmcmFjdGlvbiA9IHJhbmdlIC8gbmljZVJhbmdlO1xuICAgIGNvbnN0IG5pY2VGcmFjdGlvbiA9IGZyYWN0aW9uIDw9IDEgPyAxIDogZnJhY3Rpb24gPD0gMiA/IDIgOiBmcmFjdGlvbiA8PSA1ID8gNSA6IDEwO1xuICAgIHJldHVybiBuaWNlRnJhY3Rpb24gKiBuaWNlUmFuZ2U7XG59XG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgZmFjdG9ycyBzb3J0ZWQgZnJvbSAxIHRvIHNxcnQodmFsdWUpXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIF9mYWN0b3JpemUodmFsdWUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBjb25zdCBzcXJ0ID0gTWF0aC5zcXJ0KHZhbHVlKTtcbiAgICBsZXQgaTtcbiAgICBmb3IoaSA9IDE7IGkgPCBzcXJ0OyBpKyspe1xuICAgICAgICBpZiAodmFsdWUgJSBpID09PSAwKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChpKTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlIC8gaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNxcnQgPT09IChzcXJ0IHwgMCkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goc3FydCk7XG4gICAgfVxuICAgIHJlc3VsdC5zb3J0KChhLCBiKT0+YSAtIGIpLnBvcCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpc051bWJlcihuKSB7XG4gICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcbn1cbmZ1bmN0aW9uIGFsbW9zdFdob2xlKHgsIGVwc2lsb24pIHtcbiAgICBjb25zdCByb3VuZGVkID0gTWF0aC5yb3VuZCh4KTtcbiAgICByZXR1cm4gcm91bmRlZCAtIGVwc2lsb24gPD0geCAmJiByb3VuZGVkICsgZXBzaWxvbiA+PSB4O1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIF9zZXRNaW5BbmRNYXhCeUtleShhcnJheSwgdGFyZ2V0LCBwcm9wZXJ0eSkge1xuICAgIGxldCBpLCBpbGVuLCB2YWx1ZTtcbiAgICBmb3IoaSA9IDAsIGlsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBpbGVuOyBpKyspe1xuICAgICAgICB2YWx1ZSA9IGFycmF5W2ldW3Byb3BlcnR5XTtcbiAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRhcmdldC5taW4gPSBNYXRoLm1pbih0YXJnZXQubWluLCB2YWx1ZSk7XG4gICAgICAgICAgICB0YXJnZXQubWF4ID0gTWF0aC5tYXgodGFyZ2V0Lm1heCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdG9SYWRpYW5zKGRlZ3JlZXMpIHtcbiAgICByZXR1cm4gZGVncmVlcyAqIChQSSAvIDE4MCk7XG59XG5mdW5jdGlvbiB0b0RlZ3JlZXMocmFkaWFucykge1xuICAgIHJldHVybiByYWRpYW5zICogKDE4MCAvIFBJKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzXG4gKiBpLmUuIHRoZSBudW1iZXIgb2YgZGlnaXRzIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LCBvZiB0aGUgdmFsdWUgb2YgdGhpcyBOdW1iZXIuXG4gKiBAcGFyYW0geCAtIEEgbnVtYmVyLlxuICogQHJldHVybnMgVGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcy5cbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2RlY2ltYWxQbGFjZXMoeCkge1xuICAgIGlmICghaXNOdW1iZXJGaW5pdGUoeCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgZSA9IDE7XG4gICAgbGV0IHAgPSAwO1xuICAgIHdoaWxlKE1hdGgucm91bmQoeCAqIGUpIC8gZSAhPT0geCl7XG4gICAgICAgIGUgKj0gMTA7XG4gICAgICAgIHArKztcbiAgICB9XG4gICAgcmV0dXJuIHA7XG59XG4vLyBHZXRzIHRoZSBhbmdsZSBmcm9tIHZlcnRpY2FsIHVwcmlnaHQgdG8gdGhlIHBvaW50IGFib3V0IGEgY2VudHJlLlxuZnVuY3Rpb24gZ2V0QW5nbGVGcm9tUG9pbnQoY2VudHJlUG9pbnQsIGFuZ2xlUG9pbnQpIHtcbiAgICBjb25zdCBkaXN0YW5jZUZyb21YQ2VudGVyID0gYW5nbGVQb2ludC54IC0gY2VudHJlUG9pbnQueDtcbiAgICBjb25zdCBkaXN0YW5jZUZyb21ZQ2VudGVyID0gYW5nbGVQb2ludC55IC0gY2VudHJlUG9pbnQueTtcbiAgICBjb25zdCByYWRpYWxEaXN0YW5jZUZyb21DZW50ZXIgPSBNYXRoLnNxcnQoZGlzdGFuY2VGcm9tWENlbnRlciAqIGRpc3RhbmNlRnJvbVhDZW50ZXIgKyBkaXN0YW5jZUZyb21ZQ2VudGVyICogZGlzdGFuY2VGcm9tWUNlbnRlcik7XG4gICAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMihkaXN0YW5jZUZyb21ZQ2VudGVyLCBkaXN0YW5jZUZyb21YQ2VudGVyKTtcbiAgICBpZiAoYW5nbGUgPCAtMC41ICogUEkpIHtcbiAgICAgICAgYW5nbGUgKz0gVEFVOyAvLyBtYWtlIHN1cmUgdGhlIHJldHVybmVkIGFuZ2xlIGlzIGluIHRoZSByYW5nZSBvZiAoLVBJLzIsIDNQSS8yXVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBhbmdsZSxcbiAgICAgICAgZGlzdGFuY2U6IHJhZGlhbERpc3RhbmNlRnJvbUNlbnRlclxuICAgIH07XG59XG5mdW5jdGlvbiBkaXN0YW5jZUJldHdlZW5Qb2ludHMocHQxLCBwdDIpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHB0Mi54IC0gcHQxLngsIDIpICsgTWF0aC5wb3cocHQyLnkgLSBwdDEueSwgMikpO1xufVxuLyoqXG4gKiBTaG9ydGVzdCBkaXN0YW5jZSBiZXR3ZWVuIGFuZ2xlcywgaW4gZWl0aGVyIGRpcmVjdGlvbi5cbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2FuZ2xlRGlmZihhLCBiKSB7XG4gICAgcmV0dXJuIChhIC0gYiArIFBJVEFVKSAlIFRBVSAtIFBJO1xufVxuLyoqXG4gKiBOb3JtYWxpemUgYW5nbGUgdG8gYmUgYmV0d2VlbiAwIGFuZCAyKlBJXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIF9ub3JtYWxpemVBbmdsZShhKSB7XG4gICAgcmV0dXJuIChhICUgVEFVICsgVEFVKSAlIFRBVTtcbn1cbi8qKlxuICogQHByaXZhdGVcbiAqLyBmdW5jdGlvbiBfYW5nbGVCZXR3ZWVuKGFuZ2xlLCBzdGFydCwgZW5kLCBzYW1lQW5nbGVJc0Z1bGxDaXJjbGUpIHtcbiAgICBjb25zdCBhID0gX25vcm1hbGl6ZUFuZ2xlKGFuZ2xlKTtcbiAgICBjb25zdCBzID0gX25vcm1hbGl6ZUFuZ2xlKHN0YXJ0KTtcbiAgICBjb25zdCBlID0gX25vcm1hbGl6ZUFuZ2xlKGVuZCk7XG4gICAgY29uc3QgYW5nbGVUb1N0YXJ0ID0gX25vcm1hbGl6ZUFuZ2xlKHMgLSBhKTtcbiAgICBjb25zdCBhbmdsZVRvRW5kID0gX25vcm1hbGl6ZUFuZ2xlKGUgLSBhKTtcbiAgICBjb25zdCBzdGFydFRvQW5nbGUgPSBfbm9ybWFsaXplQW5nbGUoYSAtIHMpO1xuICAgIGNvbnN0IGVuZFRvQW5nbGUgPSBfbm9ybWFsaXplQW5nbGUoYSAtIGUpO1xuICAgIHJldHVybiBhID09PSBzIHx8IGEgPT09IGUgfHwgc2FtZUFuZ2xlSXNGdWxsQ2lyY2xlICYmIHMgPT09IGUgfHwgYW5nbGVUb1N0YXJ0ID4gYW5nbGVUb0VuZCAmJiBzdGFydFRvQW5nbGUgPCBlbmRUb0FuZ2xlO1xufVxuLyoqXG4gKiBMaW1pdCBgdmFsdWVgIGJldHdlZW4gYG1pbmAgYW5kIGBtYXhgXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEBwYXJhbSBtaW5cbiAqIEBwYXJhbSBtYXhcbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2xpbWl0VmFsdWUodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCB2YWx1ZSkpO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2ludDE2UmFuZ2UodmFsdWUpIHtcbiAgICByZXR1cm4gX2xpbWl0VmFsdWUodmFsdWUsIC0zMjc2OCwgMzI3NjcpO1xufVxuLyoqXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEBwYXJhbSBzdGFydFxuICogQHBhcmFtIGVuZFxuICogQHBhcmFtIFtlcHNpbG9uXVxuICogQHByaXZhdGVcbiAqLyBmdW5jdGlvbiBfaXNCZXR3ZWVuKHZhbHVlLCBzdGFydCwgZW5kLCBlcHNpbG9uID0gMWUtNikge1xuICAgIHJldHVybiB2YWx1ZSA+PSBNYXRoLm1pbihzdGFydCwgZW5kKSAtIGVwc2lsb24gJiYgdmFsdWUgPD0gTWF0aC5tYXgoc3RhcnQsIGVuZCkgKyBlcHNpbG9uO1xufVxuXG5mdW5jdGlvbiBfbG9va3VwKHRhYmxlLCB2YWx1ZSwgY21wKSB7XG4gICAgY21wID0gY21wIHx8ICgoaW5kZXgpPT50YWJsZVtpbmRleF0gPCB2YWx1ZSk7XG4gICAgbGV0IGhpID0gdGFibGUubGVuZ3RoIC0gMTtcbiAgICBsZXQgbG8gPSAwO1xuICAgIGxldCBtaWQ7XG4gICAgd2hpbGUoaGkgLSBsbyA+IDEpe1xuICAgICAgICBtaWQgPSBsbyArIGhpID4+IDE7XG4gICAgICAgIGlmIChjbXAobWlkKSkge1xuICAgICAgICAgICAgbG8gPSBtaWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoaSA9IG1pZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBsbyxcbiAgICAgICAgaGlcbiAgICB9O1xufVxuLyoqXG4gKiBCaW5hcnkgc2VhcmNoXG4gKiBAcGFyYW0gdGFibGUgLSB0aGUgdGFibGUgc2VhcmNoLiBtdXN0IGJlIHNvcnRlZCFcbiAqIEBwYXJhbSBrZXkgLSBwcm9wZXJ0eSBuYW1lIGZvciB0aGUgdmFsdWUgaW4gZWFjaCBlbnRyeVxuICogQHBhcmFtIHZhbHVlIC0gdmFsdWUgdG8gZmluZFxuICogQHBhcmFtIGxhc3QgLSBsb29rdXAgbGFzdCBpbmRleFxuICogQHByaXZhdGVcbiAqLyBjb25zdCBfbG9va3VwQnlLZXkgPSAodGFibGUsIGtleSwgdmFsdWUsIGxhc3QpPT5fbG9va3VwKHRhYmxlLCB2YWx1ZSwgbGFzdCA/IChpbmRleCk9PntcbiAgICAgICAgY29uc3QgdGkgPSB0YWJsZVtpbmRleF1ba2V5XTtcbiAgICAgICAgcmV0dXJuIHRpIDwgdmFsdWUgfHwgdGkgPT09IHZhbHVlICYmIHRhYmxlW2luZGV4ICsgMV1ba2V5XSA9PT0gdmFsdWU7XG4gICAgfSA6IChpbmRleCk9PnRhYmxlW2luZGV4XVtrZXldIDwgdmFsdWUpO1xuLyoqXG4gKiBSZXZlcnNlIGJpbmFyeSBzZWFyY2hcbiAqIEBwYXJhbSB0YWJsZSAtIHRoZSB0YWJsZSBzZWFyY2guIG11c3QgYmUgc29ydGVkIVxuICogQHBhcmFtIGtleSAtIHByb3BlcnR5IG5hbWUgZm9yIHRoZSB2YWx1ZSBpbiBlYWNoIGVudHJ5XG4gKiBAcGFyYW0gdmFsdWUgLSB2YWx1ZSB0byBmaW5kXG4gKiBAcHJpdmF0ZVxuICovIGNvbnN0IF9ybG9va3VwQnlLZXkgPSAodGFibGUsIGtleSwgdmFsdWUpPT5fbG9va3VwKHRhYmxlLCB2YWx1ZSwgKGluZGV4KT0+dGFibGVbaW5kZXhdW2tleV0gPj0gdmFsdWUpO1xuLyoqXG4gKiBSZXR1cm4gc3Vic2V0IG9mIGB2YWx1ZXNgIGJldHdlZW4gYG1pbmAgYW5kIGBtYXhgIGluY2x1c2l2ZS5cbiAqIFZhbHVlcyBhcmUgYXNzdW1lZCB0byBiZSBpbiBzb3J0ZWQgb3JkZXIuXG4gKiBAcGFyYW0gdmFsdWVzIC0gc29ydGVkIGFycmF5IG9mIHZhbHVlc1xuICogQHBhcmFtIG1pbiAtIG1pbiB2YWx1ZVxuICogQHBhcmFtIG1heCAtIG1heCB2YWx1ZVxuICovIGZ1bmN0aW9uIF9maWx0ZXJCZXR3ZWVuKHZhbHVlcywgbWluLCBtYXgpIHtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGxldCBlbmQgPSB2YWx1ZXMubGVuZ3RoO1xuICAgIHdoaWxlKHN0YXJ0IDwgZW5kICYmIHZhbHVlc1tzdGFydF0gPCBtaW4pe1xuICAgICAgICBzdGFydCsrO1xuICAgIH1cbiAgICB3aGlsZShlbmQgPiBzdGFydCAmJiB2YWx1ZXNbZW5kIC0gMV0gPiBtYXgpe1xuICAgICAgICBlbmQtLTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0ID4gMCB8fCBlbmQgPCB2YWx1ZXMubGVuZ3RoID8gdmFsdWVzLnNsaWNlKHN0YXJ0LCBlbmQpIDogdmFsdWVzO1xufVxuY29uc3QgYXJyYXlFdmVudHMgPSBbXG4gICAgJ3B1c2gnLFxuICAgICdwb3AnLFxuICAgICdzaGlmdCcsXG4gICAgJ3NwbGljZScsXG4gICAgJ3Vuc2hpZnQnXG5dO1xuZnVuY3Rpb24gbGlzdGVuQXJyYXlFdmVudHMoYXJyYXksIGxpc3RlbmVyKSB7XG4gICAgaWYgKGFycmF5Ll9jaGFydGpzKSB7XG4gICAgICAgIGFycmF5Ll9jaGFydGpzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXJyYXksICdfY2hhcnRqcycsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIGxpc3RlbmVyczogW1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyXG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBhcnJheUV2ZW50cy5mb3JFYWNoKChrZXkpPT57XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9ICdfb25EYXRhJyArIF9jYXBpdGFsaXplKGtleSk7XG4gICAgICAgIGNvbnN0IGJhc2UgPSBhcnJheVtrZXldO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXJyYXksIGtleSwge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZSAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGJhc2UuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgYXJyYXkuX2NoYXJ0anMubGlzdGVuZXJzLmZvckVhY2goKG9iamVjdCk9PntcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3RbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0W21ldGhvZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHVubGlzdGVuQXJyYXlFdmVudHMoYXJyYXksIGxpc3RlbmVyKSB7XG4gICAgY29uc3Qgc3R1YiA9IGFycmF5Ll9jaGFydGpzO1xuICAgIGlmICghc3R1Yikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxpc3RlbmVycyA9IHN0dWIubGlzdGVuZXJzO1xuICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIGlmIChsaXN0ZW5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFycmF5RXZlbnRzLmZvckVhY2goKGtleSk9PntcbiAgICAgICAgZGVsZXRlIGFycmF5W2tleV07XG4gICAgfSk7XG4gICAgZGVsZXRlIGFycmF5Ll9jaGFydGpzO1xufVxuLyoqXG4gKiBAcGFyYW0gaXRlbXNcbiAqLyBmdW5jdGlvbiBfYXJyYXlVbmlxdWUoaXRlbXMpIHtcbiAgICBjb25zdCBzZXQgPSBuZXcgU2V0KCk7XG4gICAgbGV0IGksIGlsZW47XG4gICAgZm9yKGkgPSAwLCBpbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgc2V0LmFkZChpdGVtc1tpXSk7XG4gICAgfVxuICAgIGlmIChzZXQuc2l6ZSA9PT0gaWxlbikge1xuICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKHNldCk7XG59XG5cbmZ1bmN0aW9uIGZvbnRTdHJpbmcocGl4ZWxTaXplLCBmb250U3R5bGUsIGZvbnRGYW1pbHkpIHtcbiAgICByZXR1cm4gZm9udFN0eWxlICsgJyAnICsgcGl4ZWxTaXplICsgJ3B4ICcgKyBmb250RmFtaWx5O1xufVxuLyoqXG4qIFJlcXVlc3QgYW5pbWF0aW9uIHBvbHlmaWxsXG4qLyBjb25zdCByZXF1ZXN0QW5pbUZyYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xufSgpO1xuLyoqXG4gKiBUaHJvdHRsZXMgY2FsbGluZyBgZm5gIG9uY2UgcGVyIGFuaW1hdGlvbiBmcmFtZVxuICogTGF0ZXN0IGFyZ3VtZW50cyBhcmUgdXNlZCBvbiB0aGUgYWN0dWFsIGNhbGxcbiAqLyBmdW5jdGlvbiB0aHJvdHRsZWQoZm4sIHRoaXNBcmcpIHtcbiAgICBsZXQgYXJnc1RvVXNlID0gW107XG4gICAgbGV0IHRpY2tpbmcgPSBmYWxzZTtcbiAgICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAvLyBTYXZlIHRoZSBhcmdzIGZvciB1c2UgbGF0ZXJcbiAgICAgICAgYXJnc1RvVXNlID0gYXJncztcbiAgICAgICAgaWYgKCF0aWNraW5nKSB7XG4gICAgICAgICAgICB0aWNraW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltRnJhbWUuY2FsbCh3aW5kb3csICgpPT57XG4gICAgICAgICAgICAgICAgdGlja2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3NUb1VzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIERlYm91bmNlcyBjYWxsaW5nIGBmbmAgZm9yIGBkZWxheWAgbXNcbiAqLyBmdW5jdGlvbiBkZWJvdW5jZShmbiwgZGVsYXkpIHtcbiAgICBsZXQgdGltZW91dDtcbiAgICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZuLCBkZWxheSwgYXJncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVsYXk7XG4gICAgfTtcbn1cbi8qKlxuICogQ29udmVydHMgJ3N0YXJ0JyB0byAnbGVmdCcsICdlbmQnIHRvICdyaWdodCcgYW5kIG90aGVycyB0byAnY2VudGVyJ1xuICogQHByaXZhdGVcbiAqLyBjb25zdCBfdG9MZWZ0UmlnaHRDZW50ZXIgPSAoYWxpZ24pPT5hbGlnbiA9PT0gJ3N0YXJ0JyA/ICdsZWZ0JyA6IGFsaWduID09PSAnZW5kJyA/ICdyaWdodCcgOiAnY2VudGVyJztcbi8qKlxuICogUmV0dXJucyBgc3RhcnRgLCBgZW5kYCBvciBgKHN0YXJ0ICsgZW5kKSAvIDJgIGRlcGVuZGluZyBvbiBgYWxpZ25gLiBEZWZhdWx0cyB0byBgY2VudGVyYFxuICogQHByaXZhdGVcbiAqLyBjb25zdCBfYWxpZ25TdGFydEVuZCA9IChhbGlnbiwgc3RhcnQsIGVuZCk9PmFsaWduID09PSAnc3RhcnQnID8gc3RhcnQgOiBhbGlnbiA9PT0gJ2VuZCcgPyBlbmQgOiAoc3RhcnQgKyBlbmQpIC8gMjtcbi8qKlxuICogUmV0dXJucyBgbGVmdGAsIGByaWdodGAgb3IgYChsZWZ0ICsgcmlnaHQpIC8gMmAgZGVwZW5kaW5nIG9uIGBhbGlnbmAuIERlZmF1bHRzIHRvIGBsZWZ0YFxuICogQHByaXZhdGVcbiAqLyBjb25zdCBfdGV4dFggPSAoYWxpZ24sIGxlZnQsIHJpZ2h0LCBydGwpPT57XG4gICAgY29uc3QgY2hlY2sgPSBydGwgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgIHJldHVybiBhbGlnbiA9PT0gY2hlY2sgPyByaWdodCA6IGFsaWduID09PSAnY2VudGVyJyA/IChsZWZ0ICsgcmlnaHQpIC8gMiA6IGxlZnQ7XG59O1xuLyoqXG4gKiBSZXR1cm4gc3RhcnQgYW5kIGNvdW50IG9mIHZpc2libGUgcG9pbnRzLlxuICogQHByaXZhdGVcbiAqLyBmdW5jdGlvbiBfZ2V0U3RhcnRBbmRDb3VudE9mVmlzaWJsZVBvaW50cyhtZXRhLCBwb2ludHMsIGFuaW1hdGlvbnNEaXNhYmxlZCkge1xuICAgIGNvbnN0IHBvaW50Q291bnQgPSBwb2ludHMubGVuZ3RoO1xuICAgIGxldCBzdGFydCA9IDA7XG4gICAgbGV0IGNvdW50ID0gcG9pbnRDb3VudDtcbiAgICBpZiAobWV0YS5fc29ydGVkKSB7XG4gICAgICAgIGNvbnN0IHsgaVNjYWxlICwgX3BhcnNlZCAgfSA9IG1ldGE7XG4gICAgICAgIGNvbnN0IGF4aXMgPSBpU2NhbGUuYXhpcztcbiAgICAgICAgY29uc3QgeyBtaW4gLCBtYXggLCBtaW5EZWZpbmVkICwgbWF4RGVmaW5lZCAgfSA9IGlTY2FsZS5nZXRVc2VyQm91bmRzKCk7XG4gICAgICAgIGlmIChtaW5EZWZpbmVkKSB7XG4gICAgICAgICAgICBzdGFydCA9IF9saW1pdFZhbHVlKE1hdGgubWluKC8vIEB0cy1leHBlY3QtZXJyb3IgTmVlZCB0byB0eXBlIF9wYXJzZWRcbiAgICAgICAgICAgIF9sb29rdXBCeUtleShfcGFyc2VkLCBpU2NhbGUuYXhpcywgbWluKS5sbywgLy8gQHRzLWV4cGVjdC1lcnJvciBOZWVkIHRvIGZpeCB0eXBlcyBvbiBfbG9va3VwQnlLZXlcbiAgICAgICAgICAgIGFuaW1hdGlvbnNEaXNhYmxlZCA/IHBvaW50Q291bnQgOiBfbG9va3VwQnlLZXkocG9pbnRzLCBheGlzLCBpU2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShtaW4pKS5sbyksIDAsIHBvaW50Q291bnQgLSAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4RGVmaW5lZCkge1xuICAgICAgICAgICAgY291bnQgPSBfbGltaXRWYWx1ZShNYXRoLm1heCgvLyBAdHMtZXhwZWN0LWVycm9yIE5lZWQgdG8gdHlwZSBfcGFyc2VkXG4gICAgICAgICAgICBfbG9va3VwQnlLZXkoX3BhcnNlZCwgaVNjYWxlLmF4aXMsIG1heCwgdHJ1ZSkuaGkgKyAxLCAvLyBAdHMtZXhwZWN0LWVycm9yIE5lZWQgdG8gZml4IHR5cGVzIG9uIF9sb29rdXBCeUtleVxuICAgICAgICAgICAgYW5pbWF0aW9uc0Rpc2FibGVkID8gMCA6IF9sb29rdXBCeUtleShwb2ludHMsIGF4aXMsIGlTY2FsZS5nZXRQaXhlbEZvclZhbHVlKG1heCksIHRydWUpLmhpICsgMSksIHN0YXJ0LCBwb2ludENvdW50KSAtIHN0YXJ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY291bnQgPSBwb2ludENvdW50IC0gc3RhcnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIGNvdW50XG4gICAgfTtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBzY2FsZSByYW5nZXMgaGF2ZSBjaGFuZ2VkLlxuICogQHBhcmFtIHtvYmplY3R9IG1ldGEgLSBkYXRhc2V0IG1ldGEuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX3NjYWxlUmFuZ2VzQ2hhbmdlZChtZXRhKSB7XG4gICAgY29uc3QgeyB4U2NhbGUgLCB5U2NhbGUgLCBfc2NhbGVSYW5nZXMgIH0gPSBtZXRhO1xuICAgIGNvbnN0IG5ld1JhbmdlcyA9IHtcbiAgICAgICAgeG1pbjogeFNjYWxlLm1pbixcbiAgICAgICAgeG1heDogeFNjYWxlLm1heCxcbiAgICAgICAgeW1pbjogeVNjYWxlLm1pbixcbiAgICAgICAgeW1heDogeVNjYWxlLm1heFxuICAgIH07XG4gICAgaWYgKCFfc2NhbGVSYW5nZXMpIHtcbiAgICAgICAgbWV0YS5fc2NhbGVSYW5nZXMgPSBuZXdSYW5nZXM7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBjaGFuZ2VkID0gX3NjYWxlUmFuZ2VzLnhtaW4gIT09IHhTY2FsZS5taW4gfHwgX3NjYWxlUmFuZ2VzLnhtYXggIT09IHhTY2FsZS5tYXggfHwgX3NjYWxlUmFuZ2VzLnltaW4gIT09IHlTY2FsZS5taW4gfHwgX3NjYWxlUmFuZ2VzLnltYXggIT09IHlTY2FsZS5tYXg7XG4gICAgT2JqZWN0LmFzc2lnbihfc2NhbGVSYW5nZXMsIG5ld1Jhbmdlcyk7XG4gICAgcmV0dXJuIGNoYW5nZWQ7XG59XG5cbmNvbnN0IGF0RWRnZSA9ICh0KT0+dCA9PT0gMCB8fCB0ID09PSAxO1xuY29uc3QgZWxhc3RpY0luID0gKHQsIHMsIHApPT4tKE1hdGgucG93KDIsIDEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgLSBzKSAqIFRBVSAvIHApKTtcbmNvbnN0IGVsYXN0aWNPdXQgPSAodCwgcywgcCk9Pk1hdGgucG93KDIsIC0xMCAqIHQpICogTWF0aC5zaW4oKHQgLSBzKSAqIFRBVSAvIHApICsgMTtcbi8qKlxuICogRWFzaW5nIGZ1bmN0aW9ucyBhZGFwdGVkIGZyb20gUm9iZXJ0IFBlbm5lcidzIGVhc2luZyBlcXVhdGlvbnMuXG4gKiBAbmFtZXNwYWNlIENoYXJ0LmhlbHBlcnMuZWFzaW5nLmVmZmVjdHNcbiAqIEBzZWUgaHR0cDovL3d3dy5yb2JlcnRwZW5uZXIuY29tL2Vhc2luZy9cbiAqLyBjb25zdCBlZmZlY3RzID0ge1xuICAgIGxpbmVhcjogKHQpPT50LFxuICAgIGVhc2VJblF1YWQ6ICh0KT0+dCAqIHQsXG4gICAgZWFzZU91dFF1YWQ6ICh0KT0+LXQgKiAodCAtIDIpLFxuICAgIGVhc2VJbk91dFF1YWQ6ICh0KT0+KHQgLz0gMC41KSA8IDEgPyAwLjUgKiB0ICogdCA6IC0wLjUgKiAoLS10ICogKHQgLSAyKSAtIDEpLFxuICAgIGVhc2VJbkN1YmljOiAodCk9PnQgKiB0ICogdCxcbiAgICBlYXNlT3V0Q3ViaWM6ICh0KT0+KHQgLT0gMSkgKiB0ICogdCArIDEsXG4gICAgZWFzZUluT3V0Q3ViaWM6ICh0KT0+KHQgLz0gMC41KSA8IDEgPyAwLjUgKiB0ICogdCAqIHQgOiAwLjUgKiAoKHQgLT0gMikgKiB0ICogdCArIDIpLFxuICAgIGVhc2VJblF1YXJ0OiAodCk9PnQgKiB0ICogdCAqIHQsXG4gICAgZWFzZU91dFF1YXJ0OiAodCk9Pi0oKHQgLT0gMSkgKiB0ICogdCAqIHQgLSAxKSxcbiAgICBlYXNlSW5PdXRRdWFydDogKHQpPT4odCAvPSAwLjUpIDwgMSA/IDAuNSAqIHQgKiB0ICogdCAqIHQgOiAtMC41ICogKCh0IC09IDIpICogdCAqIHQgKiB0IC0gMiksXG4gICAgZWFzZUluUXVpbnQ6ICh0KT0+dCAqIHQgKiB0ICogdCAqIHQsXG4gICAgZWFzZU91dFF1aW50OiAodCk9Pih0IC09IDEpICogdCAqIHQgKiB0ICogdCArIDEsXG4gICAgZWFzZUluT3V0UXVpbnQ6ICh0KT0+KHQgLz0gMC41KSA8IDEgPyAwLjUgKiB0ICogdCAqIHQgKiB0ICogdCA6IDAuNSAqICgodCAtPSAyKSAqIHQgKiB0ICogdCAqIHQgKyAyKSxcbiAgICBlYXNlSW5TaW5lOiAodCk9Pi1NYXRoLmNvcyh0ICogSEFMRl9QSSkgKyAxLFxuICAgIGVhc2VPdXRTaW5lOiAodCk9Pk1hdGguc2luKHQgKiBIQUxGX1BJKSxcbiAgICBlYXNlSW5PdXRTaW5lOiAodCk9Pi0wLjUgKiAoTWF0aC5jb3MoUEkgKiB0KSAtIDEpLFxuICAgIGVhc2VJbkV4cG86ICh0KT0+dCA9PT0gMCA/IDAgOiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpLFxuICAgIGVhc2VPdXRFeHBvOiAodCk9PnQgPT09IDEgPyAxIDogLU1hdGgucG93KDIsIC0xMCAqIHQpICsgMSxcbiAgICBlYXNlSW5PdXRFeHBvOiAodCk9PmF0RWRnZSh0KSA/IHQgOiB0IDwgMC41ID8gMC41ICogTWF0aC5wb3coMiwgMTAgKiAodCAqIDIgLSAxKSkgOiAwLjUgKiAoLU1hdGgucG93KDIsIC0xMCAqICh0ICogMiAtIDEpKSArIDIpLFxuICAgIGVhc2VJbkNpcmM6ICh0KT0+dCA+PSAxID8gdCA6IC0oTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKSxcbiAgICBlYXNlT3V0Q2lyYzogKHQpPT5NYXRoLnNxcnQoMSAtICh0IC09IDEpICogdCksXG4gICAgZWFzZUluT3V0Q2lyYzogKHQpPT4odCAvPSAwLjUpIDwgMSA/IC0wLjUgKiAoTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKSA6IDAuNSAqIChNYXRoLnNxcnQoMSAtICh0IC09IDIpICogdCkgKyAxKSxcbiAgICBlYXNlSW5FbGFzdGljOiAodCk9PmF0RWRnZSh0KSA/IHQgOiBlbGFzdGljSW4odCwgMC4wNzUsIDAuMyksXG4gICAgZWFzZU91dEVsYXN0aWM6ICh0KT0+YXRFZGdlKHQpID8gdCA6IGVsYXN0aWNPdXQodCwgMC4wNzUsIDAuMyksXG4gICAgZWFzZUluT3V0RWxhc3RpYyAodCkge1xuICAgICAgICBjb25zdCBzID0gMC4xMTI1O1xuICAgICAgICBjb25zdCBwID0gMC40NTtcbiAgICAgICAgcmV0dXJuIGF0RWRnZSh0KSA/IHQgOiB0IDwgMC41ID8gMC41ICogZWxhc3RpY0luKHQgKiAyLCBzLCBwKSA6IDAuNSArIDAuNSAqIGVsYXN0aWNPdXQodCAqIDIgLSAxLCBzLCBwKTtcbiAgICB9LFxuICAgIGVhc2VJbkJhY2sgKHQpIHtcbiAgICAgICAgY29uc3QgcyA9IDEuNzAxNTg7XG4gICAgICAgIHJldHVybiB0ICogdCAqICgocyArIDEpICogdCAtIHMpO1xuICAgIH0sXG4gICAgZWFzZU91dEJhY2sgKHQpIHtcbiAgICAgICAgY29uc3QgcyA9IDEuNzAxNTg7XG4gICAgICAgIHJldHVybiAodCAtPSAxKSAqIHQgKiAoKHMgKyAxKSAqIHQgKyBzKSArIDE7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRCYWNrICh0KSB7XG4gICAgICAgIGxldCBzID0gMS43MDE1ODtcbiAgICAgICAgaWYgKCh0IC89IDAuNSkgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogKHQgKiB0ICogKCgocyAqPSAxLjUyNSkgKyAxKSAqIHQgLSBzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDAuNSAqICgodCAtPSAyKSAqIHQgKiAoKChzICo9IDEuNTI1KSArIDEpICogdCArIHMpICsgMik7XG4gICAgfSxcbiAgICBlYXNlSW5Cb3VuY2U6ICh0KT0+MSAtIGVmZmVjdHMuZWFzZU91dEJvdW5jZSgxIC0gdCksXG4gICAgZWFzZU91dEJvdW5jZSAodCkge1xuICAgICAgICBjb25zdCBtID0gNy41NjI1O1xuICAgICAgICBjb25zdCBkID0gMi43NTtcbiAgICAgICAgaWYgKHQgPCAxIC8gZCkge1xuICAgICAgICAgICAgcmV0dXJuIG0gKiB0ICogdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCA8IDIgLyBkKSB7XG4gICAgICAgICAgICByZXR1cm4gbSAqICh0IC09IDEuNSAvIGQpICogdCArIDAuNzU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgPCAyLjUgLyBkKSB7XG4gICAgICAgICAgICByZXR1cm4gbSAqICh0IC09IDIuMjUgLyBkKSAqIHQgKyAwLjkzNzU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG0gKiAodCAtPSAyLjYyNSAvIGQpICogdCArIDAuOTg0Mzc1O1xuICAgIH0sXG4gICAgZWFzZUluT3V0Qm91bmNlOiAodCk9PnQgPCAwLjUgPyBlZmZlY3RzLmVhc2VJbkJvdW5jZSh0ICogMikgKiAwLjUgOiBlZmZlY3RzLmVhc2VPdXRCb3VuY2UodCAqIDIgLSAxKSAqIDAuNSArIDAuNVxufTtcblxuZnVuY3Rpb24gaXNQYXR0ZXJuT3JHcmFkaWVudCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gdHlwZSA9PT0gJ1tvYmplY3QgQ2FudmFzUGF0dGVybl0nIHx8IHR5cGUgPT09ICdbb2JqZWN0IENhbnZhc0dyYWRpZW50XSc7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNvbG9yKHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzUGF0dGVybk9yR3JhZGllbnQodmFsdWUpID8gdmFsdWUgOiBuZXcgQ29sb3IodmFsdWUpO1xufVxuZnVuY3Rpb24gZ2V0SG92ZXJDb2xvcih2YWx1ZSkge1xuICAgIHJldHVybiBpc1BhdHRlcm5PckdyYWRpZW50KHZhbHVlKSA/IHZhbHVlIDogbmV3IENvbG9yKHZhbHVlKS5zYXR1cmF0ZSgwLjUpLmRhcmtlbigwLjEpLmhleFN0cmluZygpO1xufVxuXG5jb25zdCBudW1iZXJzID0gW1xuICAgICd4JyxcbiAgICAneScsXG4gICAgJ2JvcmRlcldpZHRoJyxcbiAgICAncmFkaXVzJyxcbiAgICAndGVuc2lvbidcbl07XG5jb25zdCBjb2xvcnMgPSBbXG4gICAgJ2NvbG9yJyxcbiAgICAnYm9yZGVyQ29sb3InLFxuICAgICdiYWNrZ3JvdW5kQ29sb3InXG5dO1xuZnVuY3Rpb24gYXBwbHlBbmltYXRpb25zRGVmYXVsdHMoZGVmYXVsdHMpIHtcbiAgICBkZWZhdWx0cy5zZXQoJ2FuaW1hdGlvbicsIHtcbiAgICAgICAgZGVsYXk6IHVuZGVmaW5lZCxcbiAgICAgICAgZHVyYXRpb246IDEwMDAsXG4gICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFydCcsXG4gICAgICAgIGZuOiB1bmRlZmluZWQsXG4gICAgICAgIGZyb206IHVuZGVmaW5lZCxcbiAgICAgICAgbG9vcDogdW5kZWZpbmVkLFxuICAgICAgICB0bzogdW5kZWZpbmVkLFxuICAgICAgICB0eXBlOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgICBkZWZhdWx0cy5kZXNjcmliZSgnYW5pbWF0aW9uJywge1xuICAgICAgICBfZmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICBfaW5kZXhhYmxlOiBmYWxzZSxcbiAgICAgICAgX3NjcmlwdGFibGU6IChuYW1lKT0+bmFtZSAhPT0gJ29uUHJvZ3Jlc3MnICYmIG5hbWUgIT09ICdvbkNvbXBsZXRlJyAmJiBuYW1lICE9PSAnZm4nXG4gICAgfSk7XG4gICAgZGVmYXVsdHMuc2V0KCdhbmltYXRpb25zJywge1xuICAgICAgICBjb2xvcnM6IHtcbiAgICAgICAgICAgIHR5cGU6ICdjb2xvcicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBjb2xvcnNcbiAgICAgICAgfSxcbiAgICAgICAgbnVtYmVyczoge1xuICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBudW1iZXJzXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBkZWZhdWx0cy5kZXNjcmliZSgnYW5pbWF0aW9ucycsIHtcbiAgICAgICAgX2ZhbGxiYWNrOiAnYW5pbWF0aW9uJ1xuICAgIH0pO1xuICAgIGRlZmF1bHRzLnNldCgndHJhbnNpdGlvbnMnLCB7XG4gICAgICAgIGFjdGl2ZToge1xuICAgICAgICAgICAgYW5pbWF0aW9uOiB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDQwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNpemU6IHtcbiAgICAgICAgICAgIGFuaW1hdGlvbjoge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNob3c6IHtcbiAgICAgICAgICAgIGFuaW1hdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBjb2xvcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJ3RyYW5zcGFyZW50J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmlzaWJsZToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBoaWRlOiB7XG4gICAgICAgICAgICBhbmltYXRpb25zOiB7XG4gICAgICAgICAgICAgICAgY29sb3JzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRvOiAndHJhbnNwYXJlbnQnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICAgICAgICAgICAgICAgICAgZm46ICh2KT0+diB8IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYXBwbHlMYXlvdXRzRGVmYXVsdHMoZGVmYXVsdHMpIHtcbiAgICBkZWZhdWx0cy5zZXQoJ2xheW91dCcsIHtcbiAgICAgICAgYXV0b1BhZGRpbmc6IHRydWUsXG4gICAgICAgIHBhZGRpbmc6IHtcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmNvbnN0IGludGxDYWNoZSA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGdldE51bWJlckZvcm1hdChsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBjb25zdCBjYWNoZUtleSA9IGxvY2FsZSArIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpO1xuICAgIGxldCBmb3JtYXR0ZXIgPSBpbnRsQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgICBpZiAoIWZvcm1hdHRlcikge1xuICAgICAgICBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlLCBvcHRpb25zKTtcbiAgICAgICAgaW50bENhY2hlLnNldChjYWNoZUtleSwgZm9ybWF0dGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdHRlcjtcbn1cbmZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW0sIGxvY2FsZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBnZXROdW1iZXJGb3JtYXQobG9jYWxlLCBvcHRpb25zKS5mb3JtYXQobnVtKTtcbn1cblxuY29uc3QgZm9ybWF0dGVycyA9IHtcbiB2YWx1ZXMgKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBpc0FycmF5KHZhbHVlKSA/ICB2YWx1ZSA6ICcnICsgdmFsdWU7XG4gICAgfSxcbiBudW1lcmljICh0aWNrVmFsdWUsIGluZGV4LCB0aWNrcykge1xuICAgICAgICBpZiAodGlja1ZhbHVlID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJzAnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2FsZSA9IHRoaXMuY2hhcnQub3B0aW9ucy5sb2NhbGU7XG4gICAgICAgIGxldCBub3RhdGlvbjtcbiAgICAgICAgbGV0IGRlbHRhID0gdGlja1ZhbHVlO1xuICAgICAgICBpZiAodGlja3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY29uc3QgbWF4VGljayA9IE1hdGgubWF4KE1hdGguYWJzKHRpY2tzWzBdLnZhbHVlKSwgTWF0aC5hYnModGlja3NbdGlja3MubGVuZ3RoIC0gMV0udmFsdWUpKTtcbiAgICAgICAgICAgIGlmIChtYXhUaWNrIDwgMWUtNCB8fCBtYXhUaWNrID4gMWUrMTUpIHtcbiAgICAgICAgICAgICAgICBub3RhdGlvbiA9ICdzY2llbnRpZmljJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlbHRhID0gY2FsY3VsYXRlRGVsdGEodGlja1ZhbHVlLCB0aWNrcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9nRGVsdGEgPSBsb2cxMChNYXRoLmFicyhkZWx0YSkpO1xuICAgICAgICBjb25zdCBudW1EZWNpbWFsID0gTWF0aC5tYXgoTWF0aC5taW4oLTEgKiBNYXRoLmZsb29yKGxvZ0RlbHRhKSwgMjApLCAwKTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG5vdGF0aW9uLFxuICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiBudW1EZWNpbWFsLFxuICAgICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiBudW1EZWNpbWFsXG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5hc3NpZ24ob3B0aW9ucywgdGhpcy5vcHRpb25zLnRpY2tzLmZvcm1hdCk7XG4gICAgICAgIHJldHVybiBmb3JtYXROdW1iZXIodGlja1ZhbHVlLCBsb2NhbGUsIG9wdGlvbnMpO1xuICAgIH0sXG4gbG9nYXJpdGhtaWMgKHRpY2tWYWx1ZSwgaW5kZXgsIHRpY2tzKSB7XG4gICAgICAgIGlmICh0aWNrVmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAnMCc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtYWluID0gdGlja3NbaW5kZXhdLnNpZ25pZmljYW5kIHx8IHRpY2tWYWx1ZSAvIE1hdGgucG93KDEwLCBNYXRoLmZsb29yKGxvZzEwKHRpY2tWYWx1ZSkpKTtcbiAgICAgICAgaWYgKFtcbiAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAyLFxuICAgICAgICAgICAgMyxcbiAgICAgICAgICAgIDUsXG4gICAgICAgICAgICAxMCxcbiAgICAgICAgICAgIDE1XG4gICAgICAgIF0uaW5jbHVkZXMocmVtYWluKSB8fCBpbmRleCA+IDAuOCAqIHRpY2tzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlcnMubnVtZXJpYy5jYWxsKHRoaXMsIHRpY2tWYWx1ZSwgaW5kZXgsIHRpY2tzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZURlbHRhKHRpY2tWYWx1ZSwgdGlja3MpIHtcbiAgICBsZXQgZGVsdGEgPSB0aWNrcy5sZW5ndGggPiAzID8gdGlja3NbMl0udmFsdWUgLSB0aWNrc1sxXS52YWx1ZSA6IHRpY2tzWzFdLnZhbHVlIC0gdGlja3NbMF0udmFsdWU7XG4gICAgaWYgKE1hdGguYWJzKGRlbHRhKSA+PSAxICYmIHRpY2tWYWx1ZSAhPT0gTWF0aC5mbG9vcih0aWNrVmFsdWUpKSB7XG4gICAgICAgIGRlbHRhID0gdGlja1ZhbHVlIC0gTWF0aC5mbG9vcih0aWNrVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZGVsdGE7XG59XG4gdmFyIFRpY2tzID0ge1xuICAgIGZvcm1hdHRlcnNcbn07XG5cbmZ1bmN0aW9uIGFwcGx5U2NhbGVEZWZhdWx0cyhkZWZhdWx0cykge1xuICAgIGRlZmF1bHRzLnNldCgnc2NhbGUnLCB7XG4gICAgICAgIGRpc3BsYXk6IHRydWUsXG4gICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgIHJldmVyc2U6IGZhbHNlLFxuICAgICAgICBiZWdpbkF0WmVybzogZmFsc2UsXG4gYm91bmRzOiAndGlja3MnLFxuIGdyYWNlOiAwLFxuICAgICAgICBncmlkOiB7XG4gICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgICAgICAgbGluZVdpZHRoOiAxLFxuICAgICAgICAgICAgZHJhd09uQ2hhcnRBcmVhOiB0cnVlLFxuICAgICAgICAgICAgZHJhd1RpY2tzOiB0cnVlLFxuICAgICAgICAgICAgdGlja0xlbmd0aDogOCxcbiAgICAgICAgICAgIHRpY2tXaWR0aDogKF9jdHgsIG9wdGlvbnMpPT5vcHRpb25zLmxpbmVXaWR0aCxcbiAgICAgICAgICAgIHRpY2tDb2xvcjogKF9jdHgsIG9wdGlvbnMpPT5vcHRpb25zLmNvbG9yLFxuICAgICAgICAgICAgb2Zmc2V0OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXG4gICAgICAgICAgICBkYXNoOiBbXSxcbiAgICAgICAgICAgIGRhc2hPZmZzZXQ6IDAuMCxcbiAgICAgICAgICAgIHdpZHRoOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmYWxzZSxcbiAgICAgICAgICAgIHRleHQ6ICcnLFxuICAgICAgICAgICAgcGFkZGluZzoge1xuICAgICAgICAgICAgICAgIHRvcDogNCxcbiAgICAgICAgICAgICAgICBib3R0b206IDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgIG1pblJvdGF0aW9uOiAwLFxuICAgICAgICAgICAgbWF4Um90YXRpb246IDUwLFxuICAgICAgICAgICAgbWlycm9yOiBmYWxzZSxcbiAgICAgICAgICAgIHRleHRTdHJva2VXaWR0aDogMCxcbiAgICAgICAgICAgIHRleHRTdHJva2VDb2xvcjogJycsXG4gICAgICAgICAgICBwYWRkaW5nOiAzLFxuICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgICAgIGF1dG9Ta2lwOiB0cnVlLFxuICAgICAgICAgICAgYXV0b1NraXBQYWRkaW5nOiAzLFxuICAgICAgICAgICAgbGFiZWxPZmZzZXQ6IDAsXG4gICAgICAgICAgICBjYWxsYmFjazogVGlja3MuZm9ybWF0dGVycy52YWx1ZXMsXG4gICAgICAgICAgICBtaW5vcjoge30sXG4gICAgICAgICAgICBtYWpvcjoge30sXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICBjcm9zc0FsaWduOiAnbmVhcicsXG4gICAgICAgICAgICBzaG93TGFiZWxCYWNrZHJvcDogZmFsc2UsXG4gICAgICAgICAgICBiYWNrZHJvcENvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjc1KScsXG4gICAgICAgICAgICBiYWNrZHJvcFBhZGRpbmc6IDJcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGRlZmF1bHRzLnJvdXRlKCdzY2FsZS50aWNrcycsICdjb2xvcicsICcnLCAnY29sb3InKTtcbiAgICBkZWZhdWx0cy5yb3V0ZSgnc2NhbGUuZ3JpZCcsICdjb2xvcicsICcnLCAnYm9yZGVyQ29sb3InKTtcbiAgICBkZWZhdWx0cy5yb3V0ZSgnc2NhbGUuYm9yZGVyJywgJ2NvbG9yJywgJycsICdib3JkZXJDb2xvcicpO1xuICAgIGRlZmF1bHRzLnJvdXRlKCdzY2FsZS50aXRsZScsICdjb2xvcicsICcnLCAnY29sb3InKTtcbiAgICBkZWZhdWx0cy5kZXNjcmliZSgnc2NhbGUnLCB7XG4gICAgICAgIF9mYWxsYmFjazogZmFsc2UsXG4gICAgICAgIF9zY3JpcHRhYmxlOiAobmFtZSk9PiFuYW1lLnN0YXJ0c1dpdGgoJ2JlZm9yZScpICYmICFuYW1lLnN0YXJ0c1dpdGgoJ2FmdGVyJykgJiYgbmFtZSAhPT0gJ2NhbGxiYWNrJyAmJiBuYW1lICE9PSAncGFyc2VyJyxcbiAgICAgICAgX2luZGV4YWJsZTogKG5hbWUpPT5uYW1lICE9PSAnYm9yZGVyRGFzaCcgJiYgbmFtZSAhPT0gJ3RpY2tCb3JkZXJEYXNoJyAmJiBuYW1lICE9PSAnZGFzaCdcbiAgICB9KTtcbiAgICBkZWZhdWx0cy5kZXNjcmliZSgnc2NhbGVzJywge1xuICAgICAgICBfZmFsbGJhY2s6ICdzY2FsZSdcbiAgICB9KTtcbiAgICBkZWZhdWx0cy5kZXNjcmliZSgnc2NhbGUudGlja3MnLCB7XG4gICAgICAgIF9zY3JpcHRhYmxlOiAobmFtZSk9Pm5hbWUgIT09ICdiYWNrZHJvcFBhZGRpbmcnICYmIG5hbWUgIT09ICdjYWxsYmFjaycsXG4gICAgICAgIF9pbmRleGFibGU6IChuYW1lKT0+bmFtZSAhPT0gJ2JhY2tkcm9wUGFkZGluZydcbiAgICB9KTtcbn1cblxuY29uc3Qgb3ZlcnJpZGVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBmdW5jdGlvbiBnZXRTY29wZSQxKG5vZGUsIGtleSkge1xuICAgIGlmICgha2V5KSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0ga2V5LnNwbGl0KCcuJyk7XG4gICAgZm9yKGxldCBpID0gMCwgbiA9IGtleXMubGVuZ3RoOyBpIDwgbjsgKytpKXtcbiAgICAgICAgY29uc3QgayA9IGtleXNbaV07XG4gICAgICAgIG5vZGUgPSBub2RlW2tdIHx8IChub2RlW2tdID0gT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gc2V0KHJvb3QsIHNjb3BlLCB2YWx1ZXMpIHtcbiAgICBpZiAodHlwZW9mIHNjb3BlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gbWVyZ2UoZ2V0U2NvcGUkMShyb290LCBzY29wZSksIHZhbHVlcyk7XG4gICAgfVxuICAgIHJldHVybiBtZXJnZShnZXRTY29wZSQxKHJvb3QsICcnKSwgc2NvcGUpO1xufVxuIGNsYXNzIERlZmF1bHRzIHtcbiAgICBjb25zdHJ1Y3RvcihfZGVzY3JpcHRvcnMsIF9hcHBsaWVycyl7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsMCwwLDAuMSknO1xuICAgICAgICB0aGlzLmJvcmRlckNvbG9yID0gJ3JnYmEoMCwwLDAsMC4xKSc7XG4gICAgICAgIHRoaXMuY29sb3IgPSAnIzY2Nic7XG4gICAgICAgIHRoaXMuZGF0YXNldHMgPSB7fTtcbiAgICAgICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvID0gKGNvbnRleHQpPT5jb250ZXh0LmNoYXJ0LnBsYXRmb3JtLmdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IHt9O1xuICAgICAgICB0aGlzLmV2ZW50cyA9IFtcbiAgICAgICAgICAgICdtb3VzZW1vdmUnLFxuICAgICAgICAgICAgJ21vdXNlb3V0JyxcbiAgICAgICAgICAgICdjbGljaycsXG4gICAgICAgICAgICAndG91Y2hzdGFydCcsXG4gICAgICAgICAgICAndG91Y2htb3ZlJ1xuICAgICAgICBdO1xuICAgICAgICB0aGlzLmZvbnQgPSB7XG4gICAgICAgICAgICBmYW1pbHk6IFwiJ0hlbHZldGljYSBOZXVlJywgJ0hlbHZldGljYScsICdBcmlhbCcsIHNhbnMtc2VyaWZcIixcbiAgICAgICAgICAgIHNpemU6IDEyLFxuICAgICAgICAgICAgc3R5bGU6ICdub3JtYWwnLFxuICAgICAgICAgICAgbGluZUhlaWdodDogMS4yLFxuICAgICAgICAgICAgd2VpZ2h0OiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaG92ZXIgPSB7fTtcbiAgICAgICAgdGhpcy5ob3ZlckJhY2tncm91bmRDb2xvciA9IChjdHgsIG9wdGlvbnMpPT5nZXRIb3ZlckNvbG9yKG9wdGlvbnMuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgdGhpcy5ob3ZlckJvcmRlckNvbG9yID0gKGN0eCwgb3B0aW9ucyk9PmdldEhvdmVyQ29sb3Iob3B0aW9ucy5ib3JkZXJDb2xvcik7XG4gICAgICAgIHRoaXMuaG92ZXJDb2xvciA9IChjdHgsIG9wdGlvbnMpPT5nZXRIb3ZlckNvbG9yKG9wdGlvbnMuY29sb3IpO1xuICAgICAgICB0aGlzLmluZGV4QXhpcyA9ICd4JztcbiAgICAgICAgdGhpcy5pbnRlcmFjdGlvbiA9IHtcbiAgICAgICAgICAgIG1vZGU6ICduZWFyZXN0JyxcbiAgICAgICAgICAgIGludGVyc2VjdDogdHJ1ZSxcbiAgICAgICAgICAgIGluY2x1ZGVJbnZpc2libGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubWFpbnRhaW5Bc3BlY3RSYXRpbyA9IHRydWU7XG4gICAgICAgIHRoaXMub25Ib3ZlciA9IG51bGw7XG4gICAgICAgIHRoaXMub25DbGljayA9IG51bGw7XG4gICAgICAgIHRoaXMucGFyc2luZyA9IHRydWU7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IHt9O1xuICAgICAgICB0aGlzLnJlc3BvbnNpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjYWxlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNjYWxlcyA9IHt9O1xuICAgICAgICB0aGlzLnNob3dMaW5lID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kcmF3QWN0aXZlRWxlbWVudHNPblRvcCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGVzY3JpYmUoX2Rlc2NyaXB0b3JzKTtcbiAgICAgICAgdGhpcy5hcHBseShfYXBwbGllcnMpO1xuICAgIH1cbiBzZXQoc2NvcGUsIHZhbHVlcykge1xuICAgICAgICByZXR1cm4gc2V0KHRoaXMsIHNjb3BlLCB2YWx1ZXMpO1xuICAgIH1cbiBnZXQoc2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIGdldFNjb3BlJDEodGhpcywgc2NvcGUpO1xuICAgIH1cbiBkZXNjcmliZShzY29wZSwgdmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBzZXQoZGVzY3JpcHRvcnMsIHNjb3BlLCB2YWx1ZXMpO1xuICAgIH1cbiAgICBvdmVycmlkZShzY29wZSwgdmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBzZXQob3ZlcnJpZGVzLCBzY29wZSwgdmFsdWVzKTtcbiAgICB9XG4gcm91dGUoc2NvcGUsIG5hbWUsIHRhcmdldFNjb3BlLCB0YXJnZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHNjb3BlT2JqZWN0ID0gZ2V0U2NvcGUkMSh0aGlzLCBzY29wZSk7XG4gICAgICAgIGNvbnN0IHRhcmdldFNjb3BlT2JqZWN0ID0gZ2V0U2NvcGUkMSh0aGlzLCB0YXJnZXRTY29wZSk7XG4gICAgICAgIGNvbnN0IHByaXZhdGVOYW1lID0gJ18nICsgbmFtZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2NvcGVPYmplY3QsIHtcbiAgICAgICAgICAgIFtwcml2YXRlTmFtZV06IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogc2NvcGVPYmplY3RbbmFtZV0sXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbbmFtZV06IHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldCAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsID0gdGhpc1twcml2YXRlTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldFNjb3BlT2JqZWN0W3RhcmdldE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3QobG9jYWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGFyZ2V0LCBsb2NhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlT3JEZWZhdWx0KGxvY2FsLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0ICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW3ByaXZhdGVOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFwcGx5KGFwcGxpZXJzKSB7XG4gICAgICAgIGFwcGxpZXJzLmZvckVhY2goKGFwcGx5KT0+YXBwbHkodGhpcykpO1xuICAgIH1cbn1cbnZhciBkZWZhdWx0cyA9IC8qICNfX1BVUkVfXyAqLyBuZXcgRGVmYXVsdHMoe1xuICAgIF9zY3JpcHRhYmxlOiAobmFtZSk9PiFuYW1lLnN0YXJ0c1dpdGgoJ29uJyksXG4gICAgX2luZGV4YWJsZTogKG5hbWUpPT5uYW1lICE9PSAnZXZlbnRzJyxcbiAgICBob3Zlcjoge1xuICAgICAgICBfZmFsbGJhY2s6ICdpbnRlcmFjdGlvbidcbiAgICB9LFxuICAgIGludGVyYWN0aW9uOiB7XG4gICAgICAgIF9zY3JpcHRhYmxlOiBmYWxzZSxcbiAgICAgICAgX2luZGV4YWJsZTogZmFsc2VcbiAgICB9XG59LCBbXG4gICAgYXBwbHlBbmltYXRpb25zRGVmYXVsdHMsXG4gICAgYXBwbHlMYXlvdXRzRGVmYXVsdHMsXG4gICAgYXBwbHlTY2FsZURlZmF1bHRzXG5dKTtcblxuZnVuY3Rpb24gdG9Gb250U3RyaW5nKGZvbnQpIHtcbiAgICBpZiAoIWZvbnQgfHwgaXNOdWxsT3JVbmRlZihmb250LnNpemUpIHx8IGlzTnVsbE9yVW5kZWYoZm9udC5mYW1pbHkpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gKGZvbnQuc3R5bGUgPyBmb250LnN0eWxlICsgJyAnIDogJycpICsgKGZvbnQud2VpZ2h0ID8gZm9udC53ZWlnaHQgKyAnICcgOiAnJykgKyBmb250LnNpemUgKyAncHggJyArIGZvbnQuZmFtaWx5O1xufVxuIGZ1bmN0aW9uIF9tZWFzdXJlVGV4dChjdHgsIGRhdGEsIGdjLCBsb25nZXN0LCBzdHJpbmcpIHtcbiAgICBsZXQgdGV4dFdpZHRoID0gZGF0YVtzdHJpbmddO1xuICAgIGlmICghdGV4dFdpZHRoKSB7XG4gICAgICAgIHRleHRXaWR0aCA9IGRhdGFbc3RyaW5nXSA9IGN0eC5tZWFzdXJlVGV4dChzdHJpbmcpLndpZHRoO1xuICAgICAgICBnYy5wdXNoKHN0cmluZyk7XG4gICAgfVxuICAgIGlmICh0ZXh0V2lkdGggPiBsb25nZXN0KSB7XG4gICAgICAgIGxvbmdlc3QgPSB0ZXh0V2lkdGg7XG4gICAgfVxuICAgIHJldHVybiBsb25nZXN0O1xufVxuIGZ1bmN0aW9uIF9sb25nZXN0VGV4dChjdHgsIGZvbnQsIGFycmF5T2ZUaGluZ3MsIGNhY2hlKSB7XG4gICAgY2FjaGUgPSBjYWNoZSB8fCB7fTtcbiAgICBsZXQgZGF0YSA9IGNhY2hlLmRhdGEgPSBjYWNoZS5kYXRhIHx8IHt9O1xuICAgIGxldCBnYyA9IGNhY2hlLmdhcmJhZ2VDb2xsZWN0ID0gY2FjaGUuZ2FyYmFnZUNvbGxlY3QgfHwgW107XG4gICAgaWYgKGNhY2hlLmZvbnQgIT09IGZvbnQpIHtcbiAgICAgICAgZGF0YSA9IGNhY2hlLmRhdGEgPSB7fTtcbiAgICAgICAgZ2MgPSBjYWNoZS5nYXJiYWdlQ29sbGVjdCA9IFtdO1xuICAgICAgICBjYWNoZS5mb250ID0gZm9udDtcbiAgICB9XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguZm9udCA9IGZvbnQ7XG4gICAgbGV0IGxvbmdlc3QgPSAwO1xuICAgIGNvbnN0IGlsZW4gPSBhcnJheU9mVGhpbmdzLmxlbmd0aDtcbiAgICBsZXQgaSwgaiwgamxlbiwgdGhpbmcsIG5lc3RlZFRoaW5nO1xuICAgIGZvcihpID0gMDsgaSA8IGlsZW47IGkrKyl7XG4gICAgICAgIHRoaW5nID0gYXJyYXlPZlRoaW5nc1tpXTtcbiAgICAgICAgaWYgKHRoaW5nICE9PSB1bmRlZmluZWQgJiYgdGhpbmcgIT09IG51bGwgJiYgaXNBcnJheSh0aGluZykgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGxvbmdlc3QgPSBfbWVhc3VyZVRleHQoY3R4LCBkYXRhLCBnYywgbG9uZ2VzdCwgdGhpbmcpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkodGhpbmcpKSB7XG4gICAgICAgICAgICBmb3IoaiA9IDAsIGpsZW4gPSB0aGluZy5sZW5ndGg7IGogPCBqbGVuOyBqKyspe1xuICAgICAgICAgICAgICAgIG5lc3RlZFRoaW5nID0gdGhpbmdbal07XG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZFRoaW5nICE9PSB1bmRlZmluZWQgJiYgbmVzdGVkVGhpbmcgIT09IG51bGwgJiYgIWlzQXJyYXkobmVzdGVkVGhpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvbmdlc3QgPSBfbWVhc3VyZVRleHQoY3R4LCBkYXRhLCBnYywgbG9uZ2VzdCwgbmVzdGVkVGhpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIGNvbnN0IGdjTGVuID0gZ2MubGVuZ3RoIC8gMjtcbiAgICBpZiAoZ2NMZW4gPiBhcnJheU9mVGhpbmdzLmxlbmd0aCkge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBnY0xlbjsgaSsrKXtcbiAgICAgICAgICAgIGRlbGV0ZSBkYXRhW2djW2ldXTtcbiAgICAgICAgfVxuICAgICAgICBnYy5zcGxpY2UoMCwgZ2NMZW4pO1xuICAgIH1cbiAgICByZXR1cm4gbG9uZ2VzdDtcbn1cbiBmdW5jdGlvbiBfYWxpZ25QaXhlbChjaGFydCwgcGl4ZWwsIHdpZHRoKSB7XG4gICAgY29uc3QgZGV2aWNlUGl4ZWxSYXRpbyA9IGNoYXJ0LmN1cnJlbnREZXZpY2VQaXhlbFJhdGlvO1xuICAgIGNvbnN0IGhhbGZXaWR0aCA9IHdpZHRoICE9PSAwID8gTWF0aC5tYXgod2lkdGggLyAyLCAwLjUpIDogMDtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgocGl4ZWwgLSBoYWxmV2lkdGgpICogZGV2aWNlUGl4ZWxSYXRpbykgLyBkZXZpY2VQaXhlbFJhdGlvICsgaGFsZldpZHRoO1xufVxuIGZ1bmN0aW9uIGNsZWFyQ2FudmFzKGNhbnZhcywgY3R4KSB7XG4gICAgY3R4ID0gY3R4IHx8IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnJlc2V0VHJhbnNmb3JtKCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG59XG5mdW5jdGlvbiBkcmF3UG9pbnQoY3R4LCBvcHRpb25zLCB4LCB5KSB7XG4gICAgZHJhd1BvaW50TGVnZW5kKGN0eCwgb3B0aW9ucywgeCwgeSwgbnVsbCk7XG59XG5mdW5jdGlvbiBkcmF3UG9pbnRMZWdlbmQoY3R4LCBvcHRpb25zLCB4LCB5LCB3KSB7XG4gICAgbGV0IHR5cGUsIHhPZmZzZXQsIHlPZmZzZXQsIHNpemUsIGNvcm5lclJhZGl1cywgd2lkdGgsIHhPZmZzZXRXLCB5T2Zmc2V0VztcbiAgICBjb25zdCBzdHlsZSA9IG9wdGlvbnMucG9pbnRTdHlsZTtcbiAgICBjb25zdCByb3RhdGlvbiA9IG9wdGlvbnMucm90YXRpb247XG4gICAgY29uc3QgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXM7XG4gICAgbGV0IHJhZCA9IChyb3RhdGlvbiB8fCAwKSAqIFJBRF9QRVJfREVHO1xuICAgIGlmIChzdHlsZSAmJiB0eXBlb2Ygc3R5bGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHR5cGUgPSBzdHlsZS50b1N0cmluZygpO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ1tvYmplY3QgSFRNTEltYWdlRWxlbWVudF0nIHx8IHR5cGUgPT09ICdbb2JqZWN0IEhUTUxDYW52YXNFbGVtZW50XScpIHtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgICAgICAgY3R4LnJvdGF0ZShyYWQpO1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShzdHlsZSwgLXN0eWxlLndpZHRoIC8gMiwgLXN0eWxlLmhlaWdodCAvIDIsIHN0eWxlLndpZHRoLCBzdHlsZS5oZWlnaHQpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNOYU4ocmFkaXVzKSB8fCByYWRpdXMgPD0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBzd2l0Y2goc3R5bGUpe1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKHcpIHtcbiAgICAgICAgICAgICAgICBjdHguZWxsaXBzZSh4LCB5LCB3IC8gMiwgcmFkaXVzLCAwLCAwLCBUQVUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHguYXJjKHgsIHksIHJhZGl1cywgMCwgVEFVKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0cmlhbmdsZSc6XG4gICAgICAgICAgICB3aWR0aCA9IHcgPyB3IC8gMiA6IHJhZGl1cztcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCArIE1hdGguc2luKHJhZCkgKiB3aWR0aCwgeSAtIE1hdGguY29zKHJhZCkgKiByYWRpdXMpO1xuICAgICAgICAgICAgcmFkICs9IFRXT19USElSRFNfUEk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHggKyBNYXRoLnNpbihyYWQpICogd2lkdGgsIHkgLSBNYXRoLmNvcyhyYWQpICogcmFkaXVzKTtcbiAgICAgICAgICAgIHJhZCArPSBUV09fVEhJUkRTX1BJO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4ICsgTWF0aC5zaW4ocmFkKSAqIHdpZHRoLCB5IC0gTWF0aC5jb3MocmFkKSAqIHJhZGl1cyk7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmVjdFJvdW5kZWQnOlxuICAgICAgICAgICAgY29ybmVyUmFkaXVzID0gcmFkaXVzICogMC41MTY7XG4gICAgICAgICAgICBzaXplID0gcmFkaXVzIC0gY29ybmVyUmFkaXVzO1xuICAgICAgICAgICAgeE9mZnNldCA9IE1hdGguY29zKHJhZCArIFFVQVJURVJfUEkpICogc2l6ZTtcbiAgICAgICAgICAgIHhPZmZzZXRXID0gTWF0aC5jb3MocmFkICsgUVVBUlRFUl9QSSkgKiAodyA/IHcgLyAyIC0gY29ybmVyUmFkaXVzIDogc2l6ZSk7XG4gICAgICAgICAgICB5T2Zmc2V0ID0gTWF0aC5zaW4ocmFkICsgUVVBUlRFUl9QSSkgKiBzaXplO1xuICAgICAgICAgICAgeU9mZnNldFcgPSBNYXRoLnNpbihyYWQgKyBRVUFSVEVSX1BJKSAqICh3ID8gdyAvIDIgLSBjb3JuZXJSYWRpdXMgOiBzaXplKTtcbiAgICAgICAgICAgIGN0eC5hcmMoeCAtIHhPZmZzZXRXLCB5IC0geU9mZnNldCwgY29ybmVyUmFkaXVzLCByYWQgLSBQSSwgcmFkIC0gSEFMRl9QSSk7XG4gICAgICAgICAgICBjdHguYXJjKHggKyB5T2Zmc2V0VywgeSAtIHhPZmZzZXQsIGNvcm5lclJhZGl1cywgcmFkIC0gSEFMRl9QSSwgcmFkKTtcbiAgICAgICAgICAgIGN0eC5hcmMoeCArIHhPZmZzZXRXLCB5ICsgeU9mZnNldCwgY29ybmVyUmFkaXVzLCByYWQsIHJhZCArIEhBTEZfUEkpO1xuICAgICAgICAgICAgY3R4LmFyYyh4IC0geU9mZnNldFcsIHkgKyB4T2Zmc2V0LCBjb3JuZXJSYWRpdXMsIHJhZCArIEhBTEZfUEksIHJhZCArIFBJKTtcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyZWN0JzpcbiAgICAgICAgICAgIGlmICghcm90YXRpb24pIHtcbiAgICAgICAgICAgICAgICBzaXplID0gTWF0aC5TUVJUMV8yICogcmFkaXVzO1xuICAgICAgICAgICAgICAgIHdpZHRoID0gdyA/IHcgLyAyIDogc2l6ZTtcbiAgICAgICAgICAgICAgICBjdHgucmVjdCh4IC0gd2lkdGgsIHkgLSBzaXplLCAyICogd2lkdGgsIDIgKiBzaXplKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJhZCArPSBRVUFSVEVSX1BJO1xuICAgICAgICAgY2FzZSAncmVjdFJvdCc6XG4gICAgICAgICAgICB4T2Zmc2V0VyA9IE1hdGguY29zKHJhZCkgKiAodyA/IHcgLyAyIDogcmFkaXVzKTtcbiAgICAgICAgICAgIHhPZmZzZXQgPSBNYXRoLmNvcyhyYWQpICogcmFkaXVzO1xuICAgICAgICAgICAgeU9mZnNldCA9IE1hdGguc2luKHJhZCkgKiByYWRpdXM7XG4gICAgICAgICAgICB5T2Zmc2V0VyA9IE1hdGguc2luKHJhZCkgKiAodyA/IHcgLyAyIDogcmFkaXVzKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCAtIHhPZmZzZXRXLCB5IC0geU9mZnNldCk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHggKyB5T2Zmc2V0VywgeSAtIHhPZmZzZXQpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4ICsgeE9mZnNldFcsIHkgKyB5T2Zmc2V0KTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oeCAtIHlPZmZzZXRXLCB5ICsgeE9mZnNldCk7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY3Jvc3NSb3QnOlxuICAgICAgICAgICAgcmFkICs9IFFVQVJURVJfUEk7XG4gICAgICAgICBjYXNlICdjcm9zcyc6XG4gICAgICAgICAgICB4T2Zmc2V0VyA9IE1hdGguY29zKHJhZCkgKiAodyA/IHcgLyAyIDogcmFkaXVzKTtcbiAgICAgICAgICAgIHhPZmZzZXQgPSBNYXRoLmNvcyhyYWQpICogcmFkaXVzO1xuICAgICAgICAgICAgeU9mZnNldCA9IE1hdGguc2luKHJhZCkgKiByYWRpdXM7XG4gICAgICAgICAgICB5T2Zmc2V0VyA9IE1hdGguc2luKHJhZCkgKiAodyA/IHcgLyAyIDogcmFkaXVzKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCAtIHhPZmZzZXRXLCB5IC0geU9mZnNldCk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHggKyB4T2Zmc2V0VywgeSArIHlPZmZzZXQpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyh4ICsgeU9mZnNldFcsIHkgLSB4T2Zmc2V0KTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oeCAtIHlPZmZzZXRXLCB5ICsgeE9mZnNldCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc3Rhcic6XG4gICAgICAgICAgICB4T2Zmc2V0VyA9IE1hdGguY29zKHJhZCkgKiAodyA/IHcgLyAyIDogcmFkaXVzKTtcbiAgICAgICAgICAgIHhPZmZzZXQgPSBNYXRoLmNvcyhyYWQpICogcmFkaXVzO1xuICAgICAgICAgICAgeU9mZnNldCA9IE1hdGguc2luKHJhZCkgKiByYWRpdXM7XG4gICAgICAgICAgICB5T2Zmc2V0VyA9IE1hdGguc2luKHJhZCkgKiAodyA/IHcgLyAyIDogcmFkaXVzKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCAtIHhPZmZzZXRXLCB5IC0geU9mZnNldCk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHggKyB4T2Zmc2V0VywgeSArIHlPZmZzZXQpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyh4ICsgeU9mZnNldFcsIHkgLSB4T2Zmc2V0KTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oeCAtIHlPZmZzZXRXLCB5ICsgeE9mZnNldCk7XG4gICAgICAgICAgICByYWQgKz0gUVVBUlRFUl9QSTtcbiAgICAgICAgICAgIHhPZmZzZXRXID0gTWF0aC5jb3MocmFkKSAqICh3ID8gdyAvIDIgOiByYWRpdXMpO1xuICAgICAgICAgICAgeE9mZnNldCA9IE1hdGguY29zKHJhZCkgKiByYWRpdXM7XG4gICAgICAgICAgICB5T2Zmc2V0ID0gTWF0aC5zaW4ocmFkKSAqIHJhZGl1cztcbiAgICAgICAgICAgIHlPZmZzZXRXID0gTWF0aC5zaW4ocmFkKSAqICh3ID8gdyAvIDIgOiByYWRpdXMpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyh4IC0geE9mZnNldFcsIHkgLSB5T2Zmc2V0KTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oeCArIHhPZmZzZXRXLCB5ICsgeU9mZnNldCk7XG4gICAgICAgICAgICBjdHgubW92ZVRvKHggKyB5T2Zmc2V0VywgeSAtIHhPZmZzZXQpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4IC0geU9mZnNldFcsIHkgKyB4T2Zmc2V0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICAgIHhPZmZzZXQgPSB3ID8gdyAvIDIgOiBNYXRoLmNvcyhyYWQpICogcmFkaXVzO1xuICAgICAgICAgICAgeU9mZnNldCA9IE1hdGguc2luKHJhZCkgKiByYWRpdXM7XG4gICAgICAgICAgICBjdHgubW92ZVRvKHggLSB4T2Zmc2V0LCB5IC0geU9mZnNldCk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHggKyB4T2Zmc2V0LCB5ICsgeU9mZnNldCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZGFzaCc6XG4gICAgICAgICAgICBjdHgubW92ZVRvKHgsIHkpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4ICsgTWF0aC5jb3MocmFkKSAqICh3ID8gdyAvIDIgOiByYWRpdXMpLCB5ICsgTWF0aC5zaW4ocmFkKSAqIHJhZGl1cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBmYWxzZTpcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjdHguZmlsbCgpO1xuICAgIGlmIChvcHRpb25zLmJvcmRlcldpZHRoID4gMCkge1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxufVxuIGZ1bmN0aW9uIF9pc1BvaW50SW5BcmVhKHBvaW50LCBhcmVhLCBtYXJnaW4pIHtcbiAgICBtYXJnaW4gPSBtYXJnaW4gfHwgMC41O1xuICAgIHJldHVybiAhYXJlYSB8fCBwb2ludCAmJiBwb2ludC54ID4gYXJlYS5sZWZ0IC0gbWFyZ2luICYmIHBvaW50LnggPCBhcmVhLnJpZ2h0ICsgbWFyZ2luICYmIHBvaW50LnkgPiBhcmVhLnRvcCAtIG1hcmdpbiAmJiBwb2ludC55IDwgYXJlYS5ib3R0b20gKyBtYXJnaW47XG59XG5mdW5jdGlvbiBjbGlwQXJlYShjdHgsIGFyZWEpIHtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgucmVjdChhcmVhLmxlZnQsIGFyZWEudG9wLCBhcmVhLnJpZ2h0IC0gYXJlYS5sZWZ0LCBhcmVhLmJvdHRvbSAtIGFyZWEudG9wKTtcbiAgICBjdHguY2xpcCgpO1xufVxuZnVuY3Rpb24gdW5jbGlwQXJlYShjdHgpIHtcbiAgICBjdHgucmVzdG9yZSgpO1xufVxuIGZ1bmN0aW9uIF9zdGVwcGVkTGluZVRvKGN0eCwgcHJldmlvdXMsIHRhcmdldCwgZmxpcCwgbW9kZSkge1xuICAgIGlmICghcHJldmlvdXMpIHtcbiAgICAgICAgcmV0dXJuIGN0eC5saW5lVG8odGFyZ2V0LngsIHRhcmdldC55KTtcbiAgICB9XG4gICAgaWYgKG1vZGUgPT09ICdtaWRkbGUnKSB7XG4gICAgICAgIGNvbnN0IG1pZHBvaW50ID0gKHByZXZpb3VzLnggKyB0YXJnZXQueCkgLyAyLjA7XG4gICAgICAgIGN0eC5saW5lVG8obWlkcG9pbnQsIHByZXZpb3VzLnkpO1xuICAgICAgICBjdHgubGluZVRvKG1pZHBvaW50LCB0YXJnZXQueSk7XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSAnYWZ0ZXInICE9PSAhIWZsaXApIHtcbiAgICAgICAgY3R4LmxpbmVUbyhwcmV2aW91cy54LCB0YXJnZXQueSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmxpbmVUbyh0YXJnZXQueCwgcHJldmlvdXMueSk7XG4gICAgfVxuICAgIGN0eC5saW5lVG8odGFyZ2V0LngsIHRhcmdldC55KTtcbn1cbiBmdW5jdGlvbiBfYmV6aWVyQ3VydmVUbyhjdHgsIHByZXZpb3VzLCB0YXJnZXQsIGZsaXApIHtcbiAgICBpZiAoIXByZXZpb3VzKSB7XG4gICAgICAgIHJldHVybiBjdHgubGluZVRvKHRhcmdldC54LCB0YXJnZXQueSk7XG4gICAgfVxuICAgIGN0eC5iZXppZXJDdXJ2ZVRvKGZsaXAgPyBwcmV2aW91cy5jcDF4IDogcHJldmlvdXMuY3AyeCwgZmxpcCA/IHByZXZpb3VzLmNwMXkgOiBwcmV2aW91cy5jcDJ5LCBmbGlwID8gdGFyZ2V0LmNwMnggOiB0YXJnZXQuY3AxeCwgZmxpcCA/IHRhcmdldC5jcDJ5IDogdGFyZ2V0LmNwMXksIHRhcmdldC54LCB0YXJnZXQueSk7XG59XG4gZnVuY3Rpb24gcmVuZGVyVGV4dChjdHgsIHRleHQsIHgsIHksIGZvbnQsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IGxpbmVzID0gaXNBcnJheSh0ZXh0KSA/IHRleHQgOiBbXG4gICAgICAgIHRleHRcbiAgICBdO1xuICAgIGNvbnN0IHN0cm9rZSA9IG9wdHMuc3Ryb2tlV2lkdGggPiAwICYmIG9wdHMuc3Ryb2tlQ29sb3IgIT09ICcnO1xuICAgIGxldCBpLCBsaW5lO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LmZvbnQgPSBmb250LnN0cmluZztcbiAgICBzZXRSZW5kZXJPcHRzKGN0eCwgb3B0cyk7XG4gICAgZm9yKGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpe1xuICAgICAgICBsaW5lID0gbGluZXNbaV07XG4gICAgICAgIGlmIChvcHRzLmJhY2tkcm9wKSB7XG4gICAgICAgICAgICBkcmF3QmFja2Ryb3AoY3R4LCBvcHRzLmJhY2tkcm9wKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3Ryb2tlKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5zdHJva2VDb2xvcikge1xuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IG9wdHMuc3Ryb2tlQ29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWYob3B0cy5zdHJva2VXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gb3B0cy5zdHJva2VXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5zdHJva2VUZXh0KGxpbmUsIHgsIHksIG9wdHMubWF4V2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5maWxsVGV4dChsaW5lLCB4LCB5LCBvcHRzLm1heFdpZHRoKTtcbiAgICAgICAgZGVjb3JhdGVUZXh0KGN0eCwgeCwgeSwgbGluZSwgb3B0cyk7XG4gICAgICAgIHkgKz0gZm9udC5saW5lSGVpZ2h0O1xuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xufVxuZnVuY3Rpb24gc2V0UmVuZGVyT3B0cyhjdHgsIG9wdHMpIHtcbiAgICBpZiAob3B0cy50cmFuc2xhdGlvbikge1xuICAgICAgICBjdHgudHJhbnNsYXRlKG9wdHMudHJhbnNsYXRpb25bMF0sIG9wdHMudHJhbnNsYXRpb25bMV0pO1xuICAgIH1cbiAgICBpZiAoIWlzTnVsbE9yVW5kZWYob3B0cy5yb3RhdGlvbikpIHtcbiAgICAgICAgY3R4LnJvdGF0ZShvcHRzLnJvdGF0aW9uKTtcbiAgICB9XG4gICAgaWYgKG9wdHMuY29sb3IpIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdHMuY29sb3I7XG4gICAgfVxuICAgIGlmIChvcHRzLnRleHRBbGlnbikge1xuICAgICAgICBjdHgudGV4dEFsaWduID0gb3B0cy50ZXh0QWxpZ247XG4gICAgfVxuICAgIGlmIChvcHRzLnRleHRCYXNlbGluZSkge1xuICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gb3B0cy50ZXh0QmFzZWxpbmU7XG4gICAgfVxufVxuZnVuY3Rpb24gZGVjb3JhdGVUZXh0KGN0eCwgeCwgeSwgbGluZSwgb3B0cykge1xuICAgIGlmIChvcHRzLnN0cmlrZXRocm91Z2ggfHwgb3B0cy51bmRlcmxpbmUpIHtcbiBjb25zdCBtZXRyaWNzID0gY3R4Lm1lYXN1cmVUZXh0KGxpbmUpO1xuICAgICAgICBjb25zdCBsZWZ0ID0geCAtIG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hMZWZ0O1xuICAgICAgICBjb25zdCByaWdodCA9IHggKyBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94UmlnaHQ7XG4gICAgICAgIGNvbnN0IHRvcCA9IHkgLSBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50O1xuICAgICAgICBjb25zdCBib3R0b20gPSB5ICsgbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQ7XG4gICAgICAgIGNvbnN0IHlEZWNvcmF0aW9uID0gb3B0cy5zdHJpa2V0aHJvdWdoID8gKHRvcCArIGJvdHRvbSkgLyAyIDogYm90dG9tO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjdHguZmlsbFN0eWxlO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBvcHRzLmRlY29yYXRpb25XaWR0aCB8fCAyO1xuICAgICAgICBjdHgubW92ZVRvKGxlZnQsIHlEZWNvcmF0aW9uKTtcbiAgICAgICAgY3R4LmxpbmVUbyhyaWdodCwgeURlY29yYXRpb24pO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZHJhd0JhY2tkcm9wKGN0eCwgb3B0cykge1xuICAgIGNvbnN0IG9sZENvbG9yID0gY3R4LmZpbGxTdHlsZTtcbiAgICBjdHguZmlsbFN0eWxlID0gb3B0cy5jb2xvcjtcbiAgICBjdHguZmlsbFJlY3Qob3B0cy5sZWZ0LCBvcHRzLnRvcCwgb3B0cy53aWR0aCwgb3B0cy5oZWlnaHQpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBvbGRDb2xvcjtcbn1cbiBmdW5jdGlvbiBhZGRSb3VuZGVkUmVjdFBhdGgoY3R4LCByZWN0KSB7XG4gICAgY29uc3QgeyB4ICwgeSAsIHcgLCBoICwgcmFkaXVzICB9ID0gcmVjdDtcbiAgICBjdHguYXJjKHggKyByYWRpdXMudG9wTGVmdCwgeSArIHJhZGl1cy50b3BMZWZ0LCByYWRpdXMudG9wTGVmdCwgLUhBTEZfUEksIFBJLCB0cnVlKTtcbiAgICBjdHgubGluZVRvKHgsIHkgKyBoIC0gcmFkaXVzLmJvdHRvbUxlZnQpO1xuICAgIGN0eC5hcmMoeCArIHJhZGl1cy5ib3R0b21MZWZ0LCB5ICsgaCAtIHJhZGl1cy5ib3R0b21MZWZ0LCByYWRpdXMuYm90dG9tTGVmdCwgUEksIEhBTEZfUEksIHRydWUpO1xuICAgIGN0eC5saW5lVG8oeCArIHcgLSByYWRpdXMuYm90dG9tUmlnaHQsIHkgKyBoKTtcbiAgICBjdHguYXJjKHggKyB3IC0gcmFkaXVzLmJvdHRvbVJpZ2h0LCB5ICsgaCAtIHJhZGl1cy5ib3R0b21SaWdodCwgcmFkaXVzLmJvdHRvbVJpZ2h0LCBIQUxGX1BJLCAwLCB0cnVlKTtcbiAgICBjdHgubGluZVRvKHggKyB3LCB5ICsgcmFkaXVzLnRvcFJpZ2h0KTtcbiAgICBjdHguYXJjKHggKyB3IC0gcmFkaXVzLnRvcFJpZ2h0LCB5ICsgcmFkaXVzLnRvcFJpZ2h0LCByYWRpdXMudG9wUmlnaHQsIDAsIC1IQUxGX1BJLCB0cnVlKTtcbiAgICBjdHgubGluZVRvKHggKyByYWRpdXMudG9wTGVmdCwgeSk7XG59XG5cbmNvbnN0IExJTkVfSEVJR0hUID0gL14obm9ybWFsfChcXGQrKD86XFwuXFxkKyk/KShweHxlbXwlKT8pJC87XG5jb25zdCBGT05UX1NUWUxFID0gL14obm9ybWFsfGl0YWxpY3xpbml0aWFsfGluaGVyaXR8dW5zZXR8KG9ibGlxdWUoIC0/WzAtOV0/WzAtOV1kZWcpPykpJC87XG4vKipcbiAqIEBhbGlhcyBDaGFydC5oZWxwZXJzLm9wdGlvbnNcbiAqIEBuYW1lc3BhY2VcbiAqLyAvKipcbiAqIENvbnZlcnRzIHRoZSBnaXZlbiBsaW5lIGhlaWdodCBgdmFsdWVgIGluIHBpeGVscyBmb3IgYSBzcGVjaWZpYyBmb250IGBzaXplYC5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBsaW5lSGVpZ2h0IHRvIHBhcnNlIChlZy4gMS42LCAnMTRweCcsICc3NSUnLCAnMS42ZW0nKS5cbiAqIEBwYXJhbSBzaXplIC0gVGhlIGZvbnQgc2l6ZSAoaW4gcGl4ZWxzKSB1c2VkIHRvIHJlc29sdmUgcmVsYXRpdmUgYHZhbHVlYC5cbiAqIEByZXR1cm5zIFRoZSBlZmZlY3RpdmUgbGluZSBoZWlnaHQgaW4gcGl4ZWxzIChzaXplICogMS4yIGlmIHZhbHVlIGlzIGludmFsaWQpLlxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvbGluZS1oZWlnaHRcbiAqIEBzaW5jZSAyLjcuMFxuICovIGZ1bmN0aW9uIHRvTGluZUhlaWdodCh2YWx1ZSwgc2l6ZSkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSAoJycgKyB2YWx1ZSkubWF0Y2goTElORV9IRUlHSFQpO1xuICAgIGlmICghbWF0Y2hlcyB8fCBtYXRjaGVzWzFdID09PSAnbm9ybWFsJykge1xuICAgICAgICByZXR1cm4gc2l6ZSAqIDEuMjtcbiAgICB9XG4gICAgdmFsdWUgPSArbWF0Y2hlc1syXTtcbiAgICBzd2l0Y2gobWF0Y2hlc1szXSl7XG4gICAgICAgIGNhc2UgJ3B4JzpcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgY2FzZSAnJSc6XG4gICAgICAgICAgICB2YWx1ZSAvPSAxMDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHNpemUgKiB2YWx1ZTtcbn1cbmNvbnN0IG51bWJlck9yWmVybyA9ICh2KT0+K3YgfHwgMDtcbmZ1bmN0aW9uIF9yZWFkVmFsdWVUb1Byb3BzKHZhbHVlLCBwcm9wcykge1xuICAgIGNvbnN0IHJldCA9IHt9O1xuICAgIGNvbnN0IG9ialByb3BzID0gaXNPYmplY3QocHJvcHMpO1xuICAgIGNvbnN0IGtleXMgPSBvYmpQcm9wcyA/IE9iamVjdC5rZXlzKHByb3BzKSA6IHByb3BzO1xuICAgIGNvbnN0IHJlYWQgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmpQcm9wcyA/IChwcm9wKT0+dmFsdWVPckRlZmF1bHQodmFsdWVbcHJvcF0sIHZhbHVlW3Byb3BzW3Byb3BdXSkgOiAocHJvcCk9PnZhbHVlW3Byb3BdIDogKCk9PnZhbHVlO1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBrZXlzKXtcbiAgICAgICAgcmV0W3Byb3BdID0gbnVtYmVyT3JaZXJvKHJlYWQocHJvcCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gdmFsdWUgaW50byBhIFRSQkwgb2JqZWN0LlxuICogQHBhcmFtIHZhbHVlIC0gSWYgYSBudW1iZXIsIHNldCB0aGUgdmFsdWUgdG8gYWxsIFRSQkwgY29tcG9uZW50LFxuICogIGVsc2UsIGlmIGFuIG9iamVjdCwgdXNlIGRlZmluZWQgcHJvcGVydGllcyBhbmQgc2V0cyB1bmRlZmluZWQgb25lcyB0byAwLlxuICogIHggLyB5IGFyZSBzaG9ydGhhbmRzIGZvciBzYW1lIHZhbHVlIGZvciBsZWZ0L3JpZ2h0IGFuZCB0b3AvYm90dG9tLlxuICogQHJldHVybnMgVGhlIHBhZGRpbmcgdmFsdWVzICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpXG4gKiBAc2luY2UgMy4wLjBcbiAqLyBmdW5jdGlvbiB0b1RSQkwodmFsdWUpIHtcbiAgICByZXR1cm4gX3JlYWRWYWx1ZVRvUHJvcHModmFsdWUsIHtcbiAgICAgICAgdG9wOiAneScsXG4gICAgICAgIHJpZ2h0OiAneCcsXG4gICAgICAgIGJvdHRvbTogJ3knLFxuICAgICAgICBsZWZ0OiAneCdcbiAgICB9KTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGdpdmVuIHZhbHVlIGludG8gYSBUUkJMIGNvcm5lcnMgb2JqZWN0IChzaW1pbGFyIHdpdGggY3NzIGJvcmRlci1yYWRpdXMpLlxuICogQHBhcmFtIHZhbHVlIC0gSWYgYSBudW1iZXIsIHNldCB0aGUgdmFsdWUgdG8gYWxsIFRSQkwgY29ybmVyIGNvbXBvbmVudHMsXG4gKiAgZWxzZSwgaWYgYW4gb2JqZWN0LCB1c2UgZGVmaW5lZCBwcm9wZXJ0aWVzIGFuZCBzZXRzIHVuZGVmaW5lZCBvbmVzIHRvIDAuXG4gKiBAcmV0dXJucyBUaGUgVFJCTCBjb3JuZXIgdmFsdWVzICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYm90dG9tUmlnaHQpXG4gKiBAc2luY2UgMy4wLjBcbiAqLyBmdW5jdGlvbiB0b1RSQkxDb3JuZXJzKHZhbHVlKSB7XG4gICAgcmV0dXJuIF9yZWFkVmFsdWVUb1Byb3BzKHZhbHVlLCBbXG4gICAgICAgICd0b3BMZWZ0JyxcbiAgICAgICAgJ3RvcFJpZ2h0JyxcbiAgICAgICAgJ2JvdHRvbUxlZnQnLFxuICAgICAgICAnYm90dG9tUmlnaHQnXG4gICAgXSk7XG59XG4vKipcbiAqIENvbnZlcnRzIHRoZSBnaXZlbiB2YWx1ZSBpbnRvIGEgcGFkZGluZyBvYmplY3Qgd2l0aCBwcmUtY29tcHV0ZWQgd2lkdGgvaGVpZ2h0LlxuICogQHBhcmFtIHZhbHVlIC0gSWYgYSBudW1iZXIsIHNldCB0aGUgdmFsdWUgdG8gYWxsIFRSQkwgY29tcG9uZW50LFxuICogIGVsc2UsIGlmIGFuIG9iamVjdCwgdXNlIGRlZmluZWQgcHJvcGVydGllcyBhbmQgc2V0cyB1bmRlZmluZWQgb25lcyB0byAwLlxuICogIHggLyB5IGFyZSBzaG9ydGhhbmRzIGZvciBzYW1lIHZhbHVlIGZvciBsZWZ0L3JpZ2h0IGFuZCB0b3AvYm90dG9tLlxuICogQHJldHVybnMgVGhlIHBhZGRpbmcgdmFsdWVzICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQsIHdpZHRoLCBoZWlnaHQpXG4gKiBAc2luY2UgMi43LjBcbiAqLyBmdW5jdGlvbiB0b1BhZGRpbmcodmFsdWUpIHtcbiAgICBjb25zdCBvYmogPSB0b1RSQkwodmFsdWUpO1xuICAgIG9iai53aWR0aCA9IG9iai5sZWZ0ICsgb2JqLnJpZ2h0O1xuICAgIG9iai5oZWlnaHQgPSBvYmoudG9wICsgb2JqLmJvdHRvbTtcbiAgICByZXR1cm4gb2JqO1xufVxuLyoqXG4gKiBQYXJzZXMgZm9udCBvcHRpb25zIGFuZCByZXR1cm5zIHRoZSBmb250IG9iamVjdC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gQSBvYmplY3QgdGhhdCBjb250YWlucyBmb250IG9wdGlvbnMgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGZhbGxiYWNrIC0gQSBvYmplY3QgdGhhdCBjb250YWlucyBmYWxsYmFjayBmb250IG9wdGlvbnMuXG4gKiBAcmV0dXJuIFRoZSBmb250IG9iamVjdC5cbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gdG9Gb250KG9wdGlvbnMsIGZhbGxiYWNrKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgZmFsbGJhY2sgPSBmYWxsYmFjayB8fCBkZWZhdWx0cy5mb250O1xuICAgIGxldCBzaXplID0gdmFsdWVPckRlZmF1bHQob3B0aW9ucy5zaXplLCBmYWxsYmFjay5zaXplKTtcbiAgICBpZiAodHlwZW9mIHNpemUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNpemUgPSBwYXJzZUludChzaXplLCAxMCk7XG4gICAgfVxuICAgIGxldCBzdHlsZSA9IHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMuc3R5bGUsIGZhbGxiYWNrLnN0eWxlKTtcbiAgICBpZiAoc3R5bGUgJiYgISgnJyArIHN0eWxlKS5tYXRjaChGT05UX1NUWUxFKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgZm9udCBzdHlsZSBzcGVjaWZpZWQ6IFwiJyArIHN0eWxlICsgJ1wiJyk7XG4gICAgICAgIHN0eWxlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBmb250ID0ge1xuICAgICAgICBmYW1pbHk6IHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMuZmFtaWx5LCBmYWxsYmFjay5mYW1pbHkpLFxuICAgICAgICBsaW5lSGVpZ2h0OiB0b0xpbmVIZWlnaHQodmFsdWVPckRlZmF1bHQob3B0aW9ucy5saW5lSGVpZ2h0LCBmYWxsYmFjay5saW5lSGVpZ2h0KSwgc2l6ZSksXG4gICAgICAgIHNpemUsXG4gICAgICAgIHN0eWxlLFxuICAgICAgICB3ZWlnaHQ6IHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMud2VpZ2h0LCBmYWxsYmFjay53ZWlnaHQpLFxuICAgICAgICBzdHJpbmc6ICcnXG4gICAgfTtcbiAgICBmb250LnN0cmluZyA9IHRvRm9udFN0cmluZyhmb250KTtcbiAgICByZXR1cm4gZm9udDtcbn1cbi8qKlxuICogRXZhbHVhdGVzIHRoZSBnaXZlbiBgaW5wdXRzYCBzZXF1ZW50aWFsbHkgYW5kIHJldHVybnMgdGhlIGZpcnN0IGRlZmluZWQgdmFsdWUuXG4gKiBAcGFyYW0gaW5wdXRzIC0gQW4gYXJyYXkgb2YgdmFsdWVzLCBmYWxsaW5nIGJhY2sgdG8gdGhlIGxhc3QgdmFsdWUuXG4gKiBAcGFyYW0gY29udGV4dCAtIElmIGRlZmluZWQgYW5kIHRoZSBjdXJyZW50IHZhbHVlIGlzIGEgZnVuY3Rpb24sIHRoZSB2YWx1ZVxuICogaXMgY2FsbGVkIHdpdGggYGNvbnRleHRgIGFzIGZpcnN0IGFyZ3VtZW50IGFuZCB0aGUgcmVzdWx0IGJlY29tZXMgdGhlIG5ldyBpbnB1dC5cbiAqIEBwYXJhbSBpbmRleCAtIElmIGRlZmluZWQgYW5kIHRoZSBjdXJyZW50IHZhbHVlIGlzIGFuIGFycmF5LCB0aGUgdmFsdWVcbiAqIGF0IGBpbmRleGAgYmVjb21lIHRoZSBuZXcgaW5wdXQuXG4gKiBAcGFyYW0gaW5mbyAtIG9iamVjdCB0byByZXR1cm4gaW5mb3JtYXRpb24gYWJvdXQgcmVzb2x1dGlvbiBpblxuICogQHBhcmFtIGluZm8uY2FjaGVhYmxlIC0gV2lsbCBiZSBzZXQgdG8gYGZhbHNlYCBpZiBvcHRpb24gaXMgbm90IGNhY2hlYWJsZS5cbiAqIEBzaW5jZSAyLjcuMFxuICovIGZ1bmN0aW9uIHJlc29sdmUoaW5wdXRzLCBjb250ZXh0LCBpbmRleCwgaW5mbykge1xuICAgIGxldCBjYWNoZWFibGUgPSB0cnVlO1xuICAgIGxldCBpLCBpbGVuLCB2YWx1ZTtcbiAgICBmb3IoaSA9IDAsIGlsZW4gPSBpbnB1dHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgdmFsdWUgPSBpbnB1dHNbaV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZShjb250ZXh0KTtcbiAgICAgICAgICAgIGNhY2hlYWJsZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkICYmIGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlW2luZGV4ICUgdmFsdWUubGVuZ3RoXTtcbiAgICAgICAgICAgIGNhY2hlYWJsZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoaW5mbyAmJiAhY2FjaGVhYmxlKSB7XG4gICAgICAgICAgICAgICAgaW5mby5jYWNoZWFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIG1pbm1heFxuICogQHBhcmFtIGdyYWNlXG4gKiBAcGFyYW0gYmVnaW5BdFplcm9cbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2FkZEdyYWNlKG1pbm1heCwgZ3JhY2UsIGJlZ2luQXRaZXJvKSB7XG4gICAgY29uc3QgeyBtaW4gLCBtYXggIH0gPSBtaW5tYXg7XG4gICAgY29uc3QgY2hhbmdlID0gdG9EaW1lbnNpb24oZ3JhY2UsIChtYXggLSBtaW4pIC8gMik7XG4gICAgY29uc3Qga2VlcFplcm8gPSAodmFsdWUsIGFkZCk9PmJlZ2luQXRaZXJvICYmIHZhbHVlID09PSAwID8gMCA6IHZhbHVlICsgYWRkO1xuICAgIHJldHVybiB7XG4gICAgICAgIG1pbjoga2VlcFplcm8obWluLCAtTWF0aC5hYnMoY2hhbmdlKSksXG4gICAgICAgIG1heDoga2VlcFplcm8obWF4LCBjaGFuZ2UpXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHQocGFyZW50Q29udGV4dCwgY29udGV4dCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUocGFyZW50Q29udGV4dCksIGNvbnRleHQpO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlUmVzb2x2ZXIoc2NvcGVzLCBwcmVmaXhlcyA9IFtcbiAgICAnJ1xuXSwgcm9vdFNjb3BlcyA9IHNjb3BlcywgZmFsbGJhY2ssIGdldFRhcmdldCA9ICgpPT5zY29wZXNbMF0pIHtcbiAgICBpZiAoIWRlZmluZWQoZmFsbGJhY2spKSB7XG4gICAgICAgIGZhbGxiYWNrID0gX3Jlc29sdmUoJ19mYWxsYmFjaycsIHNjb3Blcyk7XG4gICAgfVxuICAgIGNvbnN0IGNhY2hlID0ge1xuICAgICAgICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ09iamVjdCcsXG4gICAgICAgIF9jYWNoZWFibGU6IHRydWUsXG4gICAgICAgIF9zY29wZXM6IHNjb3BlcyxcbiAgICAgICAgX3Jvb3RTY29wZXM6IHJvb3RTY29wZXMsXG4gICAgICAgIF9mYWxsYmFjazogZmFsbGJhY2ssXG4gICAgICAgIF9nZXRUYXJnZXQ6IGdldFRhcmdldCxcbiAgICAgICAgb3ZlcnJpZGU6IChzY29wZSk9Pl9jcmVhdGVSZXNvbHZlcihbXG4gICAgICAgICAgICAgICAgc2NvcGUsXG4gICAgICAgICAgICAgICAgLi4uc2NvcGVzXG4gICAgICAgICAgICBdLCBwcmVmaXhlcywgcm9vdFNjb3BlcywgZmFsbGJhY2spXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFByb3h5KGNhY2hlLCB7XG4gZGVsZXRlUHJvcGVydHkgKHRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgZGVsZXRlIHRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXQuX2tleXM7XG4gICAgICAgICAgICBkZWxldGUgc2NvcGVzWzBdW3Byb3BdO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG4gZ2V0ICh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiBfY2FjaGVkKHRhcmdldCwgcHJvcCwgKCk9Pl9yZXNvbHZlV2l0aFByZWZpeGVzKHByb3AsIHByZWZpeGVzLCBzY29wZXMsIHRhcmdldCkpO1xuICAgICAgICB9LFxuIGdldE93blByb3BlcnR5RGVzY3JpcHRvciAodGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0Ll9zY29wZXNbMF0sIHByb3ApO1xuICAgICAgICB9LFxuIGdldFByb3RvdHlwZU9mICgpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHNjb3Blc1swXSk7XG4gICAgICAgIH0sXG4gaGFzICh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRLZXlzRnJvbUFsbFNjb3Blcyh0YXJnZXQpLmluY2x1ZGVzKHByb3ApO1xuICAgICAgICB9LFxuIG93bktleXMgKHRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEtleXNGcm9tQWxsU2NvcGVzKHRhcmdldCk7XG4gICAgICAgIH0sXG4gc2V0ICh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBzdG9yYWdlID0gdGFyZ2V0Ll9zdG9yYWdlIHx8ICh0YXJnZXQuX3N0b3JhZ2UgPSBnZXRUYXJnZXQoKSk7XG4gICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSBzdG9yYWdlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICBkZWxldGUgdGFyZ2V0Ll9rZXlzO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiBmdW5jdGlvbiBfYXR0YWNoQ29udGV4dChwcm94eSwgY29udGV4dCwgc3ViUHJveHksIGRlc2NyaXB0b3JEZWZhdWx0cykge1xuICAgIGNvbnN0IGNhY2hlID0ge1xuICAgICAgICBfY2FjaGVhYmxlOiBmYWxzZSxcbiAgICAgICAgX3Byb3h5OiBwcm94eSxcbiAgICAgICAgX2NvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgIF9zdWJQcm94eTogc3ViUHJveHksXG4gICAgICAgIF9zdGFjazogbmV3IFNldCgpLFxuICAgICAgICBfZGVzY3JpcHRvcnM6IF9kZXNjcmlwdG9ycyhwcm94eSwgZGVzY3JpcHRvckRlZmF1bHRzKSxcbiAgICAgICAgc2V0Q29udGV4dDogKGN0eCk9Pl9hdHRhY2hDb250ZXh0KHByb3h5LCBjdHgsIHN1YlByb3h5LCBkZXNjcmlwdG9yRGVmYXVsdHMpLFxuICAgICAgICBvdmVycmlkZTogKHNjb3BlKT0+X2F0dGFjaENvbnRleHQocHJveHkub3ZlcnJpZGUoc2NvcGUpLCBjb250ZXh0LCBzdWJQcm94eSwgZGVzY3JpcHRvckRlZmF1bHRzKVxuICAgIH07XG4gICAgcmV0dXJuIG5ldyBQcm94eShjYWNoZSwge1xuIGRlbGV0ZVByb3BlcnR5ICh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRbcHJvcF07XG4gICAgICAgICAgICBkZWxldGUgcHJveHlbcHJvcF07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcbiBnZXQgKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBfY2FjaGVkKHRhcmdldCwgcHJvcCwgKCk9Pl9yZXNvbHZlV2l0aENvbnRleHQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikpO1xuICAgICAgICB9LFxuIGdldE93blByb3BlcnR5RGVzY3JpcHRvciAodGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0Ll9kZXNjcmlwdG9ycy5hbGxLZXlzID8gUmVmbGVjdC5oYXMocHJveHksIHByb3ApID8ge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9IDogdW5kZWZpbmVkIDogUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJveHksIHByb3ApO1xuICAgICAgICB9LFxuIGdldFByb3RvdHlwZU9mICgpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHByb3h5KTtcbiAgICAgICAgfSxcbiBoYXMgKHRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuaGFzKHByb3h5LCBwcm9wKTtcbiAgICAgICAgfSxcbiBvd25LZXlzICgpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXMocHJveHkpO1xuICAgICAgICB9LFxuIHNldCAodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICAgICAgcHJveHlbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRbcHJvcF07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuIGZ1bmN0aW9uIF9kZXNjcmlwdG9ycyhwcm94eSwgZGVmYXVsdHMgPSB7XG4gICAgc2NyaXB0YWJsZTogdHJ1ZSxcbiAgICBpbmRleGFibGU6IHRydWVcbn0pIHtcbiAgICBjb25zdCB7IF9zY3JpcHRhYmxlID1kZWZhdWx0cy5zY3JpcHRhYmxlICwgX2luZGV4YWJsZSA9ZGVmYXVsdHMuaW5kZXhhYmxlICwgX2FsbEtleXMgPWRlZmF1bHRzLmFsbEtleXMgIH0gPSBwcm94eTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhbGxLZXlzOiBfYWxsS2V5cyxcbiAgICAgICAgc2NyaXB0YWJsZTogX3NjcmlwdGFibGUsXG4gICAgICAgIGluZGV4YWJsZTogX2luZGV4YWJsZSxcbiAgICAgICAgaXNTY3JpcHRhYmxlOiBpc0Z1bmN0aW9uKF9zY3JpcHRhYmxlKSA/IF9zY3JpcHRhYmxlIDogKCk9Pl9zY3JpcHRhYmxlLFxuICAgICAgICBpc0luZGV4YWJsZTogaXNGdW5jdGlvbihfaW5kZXhhYmxlKSA/IF9pbmRleGFibGUgOiAoKT0+X2luZGV4YWJsZVxuICAgIH07XG59XG5jb25zdCByZWFkS2V5ID0gKHByZWZpeCwgbmFtZSk9PnByZWZpeCA/IHByZWZpeCArIF9jYXBpdGFsaXplKG5hbWUpIDogbmFtZTtcbmNvbnN0IG5lZWRzU3ViUmVzb2x2ZXIgPSAocHJvcCwgdmFsdWUpPT5pc09iamVjdCh2YWx1ZSkgJiYgcHJvcCAhPT0gJ2FkYXB0ZXJzJyAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSA9PT0gbnVsbCB8fCB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KTtcbmZ1bmN0aW9uIF9jYWNoZWQodGFyZ2V0LCBwcm9wLCByZXNvbHZlKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0YXJnZXQsIHByb3ApKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXRbcHJvcF07XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlID0gcmVzb2x2ZSgpO1xuICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9yZXNvbHZlV2l0aENvbnRleHQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgIGNvbnN0IHsgX3Byb3h5ICwgX2NvbnRleHQgLCBfc3ViUHJveHkgLCBfZGVzY3JpcHRvcnM6IGRlc2NyaXB0b3JzICB9ID0gdGFyZ2V0O1xuICAgIGxldCB2YWx1ZSA9IF9wcm94eVtwcm9wXTtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkgJiYgZGVzY3JpcHRvcnMuaXNTY3JpcHRhYmxlKHByb3ApKSB7XG4gICAgICAgIHZhbHVlID0gX3Jlc29sdmVTY3JpcHRhYmxlKHByb3AsIHZhbHVlLCB0YXJnZXQsIHJlY2VpdmVyKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCkge1xuICAgICAgICB2YWx1ZSA9IF9yZXNvbHZlQXJyYXkocHJvcCwgdmFsdWUsIHRhcmdldCwgZGVzY3JpcHRvcnMuaXNJbmRleGFibGUpO1xuICAgIH1cbiAgICBpZiAobmVlZHNTdWJSZXNvbHZlcihwcm9wLCB2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBfYXR0YWNoQ29udGV4dCh2YWx1ZSwgX2NvbnRleHQsIF9zdWJQcm94eSAmJiBfc3ViUHJveHlbcHJvcF0sIGRlc2NyaXB0b3JzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gX3Jlc29sdmVTY3JpcHRhYmxlKHByb3AsIHZhbHVlLCB0YXJnZXQsIHJlY2VpdmVyKSB7XG4gICAgY29uc3QgeyBfcHJveHkgLCBfY29udGV4dCAsIF9zdWJQcm94eSAsIF9zdGFjayAgfSA9IHRhcmdldDtcbiAgICBpZiAoX3N0YWNrLmhhcyhwcm9wKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlY3Vyc2lvbiBkZXRlY3RlZDogJyArIEFycmF5LmZyb20oX3N0YWNrKS5qb2luKCctPicpICsgJy0+JyArIHByb3ApO1xuICAgIH1cbiAgICBfc3RhY2suYWRkKHByb3ApO1xuICAgIHZhbHVlID0gdmFsdWUoX2NvbnRleHQsIF9zdWJQcm94eSB8fCByZWNlaXZlcik7XG4gICAgX3N0YWNrLmRlbGV0ZShwcm9wKTtcbiAgICBpZiAobmVlZHNTdWJSZXNvbHZlcihwcm9wLCB2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBjcmVhdGVTdWJSZXNvbHZlcihfcHJveHkuX3Njb3BlcywgX3Byb3h5LCBwcm9wLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9yZXNvbHZlQXJyYXkocHJvcCwgdmFsdWUsIHRhcmdldCwgaXNJbmRleGFibGUpIHtcbiAgICBjb25zdCB7IF9wcm94eSAsIF9jb250ZXh0ICwgX3N1YlByb3h5ICwgX2Rlc2NyaXB0b3JzOiBkZXNjcmlwdG9ycyAgfSA9IHRhcmdldDtcbiAgICBpZiAoZGVmaW5lZChfY29udGV4dC5pbmRleCkgJiYgaXNJbmRleGFibGUocHJvcCkpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZVtfY29udGV4dC5pbmRleCAlIHZhbHVlLmxlbmd0aF07XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZVswXSkpIHtcbiAgICAgICAgY29uc3QgYXJyID0gdmFsdWU7XG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IF9wcm94eS5fc2NvcGVzLmZpbHRlcigocyk9PnMgIT09IGFycik7XG4gICAgICAgIHZhbHVlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpe1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSBjcmVhdGVTdWJSZXNvbHZlcihzY29wZXMsIF9wcm94eSwgcHJvcCwgaXRlbSk7XG4gICAgICAgICAgICB2YWx1ZS5wdXNoKF9hdHRhY2hDb250ZXh0KHJlc29sdmVyLCBfY29udGV4dCwgX3N1YlByb3h5ICYmIF9zdWJQcm94eVtwcm9wXSwgZGVzY3JpcHRvcnMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiByZXNvbHZlRmFsbGJhY2soZmFsbGJhY2ssIHByb3AsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oZmFsbGJhY2spID8gZmFsbGJhY2socHJvcCwgdmFsdWUpIDogZmFsbGJhY2s7XG59XG5jb25zdCBnZXRTY29wZSA9IChrZXksIHBhcmVudCk9PmtleSA9PT0gdHJ1ZSA/IHBhcmVudCA6IHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnID8gcmVzb2x2ZU9iamVjdEtleShwYXJlbnQsIGtleSkgOiB1bmRlZmluZWQ7XG5mdW5jdGlvbiBhZGRTY29wZXMoc2V0LCBwYXJlbnRTY29wZXMsIGtleSwgcGFyZW50RmFsbGJhY2ssIHZhbHVlKSB7XG4gICAgZm9yIChjb25zdCBwYXJlbnQgb2YgcGFyZW50U2NvcGVzKXtcbiAgICAgICAgY29uc3Qgc2NvcGUgPSBnZXRTY29wZShrZXksIHBhcmVudCk7XG4gICAgICAgIGlmIChzY29wZSkge1xuICAgICAgICAgICAgc2V0LmFkZChzY29wZSk7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFjayA9IHJlc29sdmVGYWxsYmFjayhzY29wZS5fZmFsbGJhY2ssIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKGRlZmluZWQoZmFsbGJhY2spICYmIGZhbGxiYWNrICE9PSBrZXkgJiYgZmFsbGJhY2sgIT09IHBhcmVudEZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNjb3BlID09PSBmYWxzZSAmJiBkZWZpbmVkKHBhcmVudEZhbGxiYWNrKSAmJiBrZXkgIT09IHBhcmVudEZhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBjcmVhdGVTdWJSZXNvbHZlcihwYXJlbnRTY29wZXMsIHJlc29sdmVyLCBwcm9wLCB2YWx1ZSkge1xuICAgIGNvbnN0IHJvb3RTY29wZXMgPSByZXNvbHZlci5fcm9vdFNjb3BlcztcbiAgICBjb25zdCBmYWxsYmFjayA9IHJlc29sdmVGYWxsYmFjayhyZXNvbHZlci5fZmFsbGJhY2ssIHByb3AsIHZhbHVlKTtcbiAgICBjb25zdCBhbGxTY29wZXMgPSBbXG4gICAgICAgIC4uLnBhcmVudFNjb3BlcyxcbiAgICAgICAgLi4ucm9vdFNjb3Blc1xuICAgIF07XG4gICAgY29uc3Qgc2V0ID0gbmV3IFNldCgpO1xuICAgIHNldC5hZGQodmFsdWUpO1xuICAgIGxldCBrZXkgPSBhZGRTY29wZXNGcm9tS2V5KHNldCwgYWxsU2NvcGVzLCBwcm9wLCBmYWxsYmFjayB8fCBwcm9wLCB2YWx1ZSk7XG4gICAgaWYgKGtleSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKGZhbGxiYWNrKSAmJiBmYWxsYmFjayAhPT0gcHJvcCkge1xuICAgICAgICBrZXkgPSBhZGRTY29wZXNGcm9tS2V5KHNldCwgYWxsU2NvcGVzLCBmYWxsYmFjaywga2V5LCB2YWx1ZSk7XG4gICAgICAgIGlmIChrZXkgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gX2NyZWF0ZVJlc29sdmVyKEFycmF5LmZyb20oc2V0KSwgW1xuICAgICAgICAnJ1xuICAgIF0sIHJvb3RTY29wZXMsIGZhbGxiYWNrLCAoKT0+c3ViR2V0VGFyZ2V0KHJlc29sdmVyLCBwcm9wLCB2YWx1ZSkpO1xufVxuZnVuY3Rpb24gYWRkU2NvcGVzRnJvbUtleShzZXQsIGFsbFNjb3Blcywga2V5LCBmYWxsYmFjaywgaXRlbSkge1xuICAgIHdoaWxlKGtleSl7XG4gICAgICAgIGtleSA9IGFkZFNjb3BlcyhzZXQsIGFsbFNjb3Blcywga2V5LCBmYWxsYmFjaywgaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG59XG5mdW5jdGlvbiBzdWJHZXRUYXJnZXQocmVzb2x2ZXIsIHByb3AsIHZhbHVlKSB7XG4gICAgY29uc3QgcGFyZW50ID0gcmVzb2x2ZXIuX2dldFRhcmdldCgpO1xuICAgIGlmICghKHByb3AgaW4gcGFyZW50KSkge1xuICAgICAgICBwYXJlbnRbcHJvcF0gPSB7fTtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0ID0gcGFyZW50W3Byb3BdO1xuICAgIGlmIChpc0FycmF5KHRhcmdldCkgJiYgaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldCB8fCB7fTtcbn1cbmZ1bmN0aW9uIF9yZXNvbHZlV2l0aFByZWZpeGVzKHByb3AsIHByZWZpeGVzLCBzY29wZXMsIHByb3h5KSB7XG4gICAgbGV0IHZhbHVlO1xuICAgIGZvciAoY29uc3QgcHJlZml4IG9mIHByZWZpeGVzKXtcbiAgICAgICAgdmFsdWUgPSBfcmVzb2x2ZShyZWFkS2V5KHByZWZpeCwgcHJvcCksIHNjb3Blcyk7XG4gICAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5lZWRzU3ViUmVzb2x2ZXIocHJvcCwgdmFsdWUpID8gY3JlYXRlU3ViUmVzb2x2ZXIoc2NvcGVzLCBwcm94eSwgcHJvcCwgdmFsdWUpIDogdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBfcmVzb2x2ZShrZXksIHNjb3Blcykge1xuICAgIGZvciAoY29uc3Qgc2NvcGUgb2Ygc2NvcGVzKXtcbiAgICAgICAgaWYgKCFzY29wZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSBzY29wZVtrZXldO1xuICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEtleXNGcm9tQWxsU2NvcGVzKHRhcmdldCkge1xuICAgIGxldCBrZXlzID0gdGFyZ2V0Ll9rZXlzO1xuICAgIGlmICgha2V5cykge1xuICAgICAgICBrZXlzID0gdGFyZ2V0Ll9rZXlzID0gcmVzb2x2ZUtleXNGcm9tQWxsU2NvcGVzKHRhcmdldC5fc2NvcGVzKTtcbiAgICB9XG4gICAgcmV0dXJuIGtleXM7XG59XG5mdW5jdGlvbiByZXNvbHZlS2V5c0Zyb21BbGxTY29wZXMoc2NvcGVzKSB7XG4gICAgY29uc3Qgc2V0ID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgc2NvcGUgb2Ygc2NvcGVzKXtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2NvcGUpLmZpbHRlcigoayk9PiFrLnN0YXJ0c1dpdGgoJ18nKSkpe1xuICAgICAgICAgICAgc2V0LmFkZChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKHNldCk7XG59XG5mdW5jdGlvbiBfcGFyc2VPYmplY3REYXRhUmFkaWFsU2NhbGUobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KSB7XG4gICAgY29uc3QgeyBpU2NhbGUgIH0gPSBtZXRhO1xuICAgIGNvbnN0IHsga2V5ID0ncicgIH0gPSB0aGlzLl9wYXJzaW5nO1xuICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgbGV0IGksIGlsZW4sIGluZGV4LCBpdGVtO1xuICAgIGZvcihpID0gMCwgaWxlbiA9IGNvdW50OyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgaW5kZXggPSBpICsgc3RhcnQ7XG4gICAgICAgIGl0ZW0gPSBkYXRhW2luZGV4XTtcbiAgICAgICAgcGFyc2VkW2ldID0ge1xuICAgICAgICAgICAgcjogaVNjYWxlLnBhcnNlKHJlc29sdmVPYmplY3RLZXkoaXRlbSwga2V5KSwgaW5kZXgpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWQ7XG59XG5cbmNvbnN0IEVQU0lMT04gPSBOdW1iZXIuRVBTSUxPTiB8fCAxZS0xNDtcbmNvbnN0IGdldFBvaW50ID0gKHBvaW50cywgaSk9PmkgPCBwb2ludHMubGVuZ3RoICYmICFwb2ludHNbaV0uc2tpcCAmJiBwb2ludHNbaV07XG5jb25zdCBnZXRWYWx1ZUF4aXMgPSAoaW5kZXhBeGlzKT0+aW5kZXhBeGlzID09PSAneCcgPyAneScgOiAneCc7XG5mdW5jdGlvbiBzcGxpbmVDdXJ2ZShmaXJzdFBvaW50LCBtaWRkbGVQb2ludCwgYWZ0ZXJQb2ludCwgdCkge1xuICAgIC8vIFByb3BzIHRvIFJvYiBTcGVuY2VyIGF0IHNjYWxlZCBpbm5vdmF0aW9uIGZvciBoaXMgcG9zdCBvbiBzcGxpbmluZyBiZXR3ZWVuIHBvaW50c1xuICAgIC8vIGh0dHA6Ly9zY2FsZWRpbm5vdmF0aW9uLmNvbS9hbmFseXRpY3Mvc3BsaW5lcy9hYm91dFNwbGluZXMuaHRtbFxuICAgIC8vIFRoaXMgZnVuY3Rpb24gbXVzdCBhbHNvIHJlc3BlY3QgXCJza2lwcGVkXCIgcG9pbnRzXG4gICAgY29uc3QgcHJldmlvdXMgPSBmaXJzdFBvaW50LnNraXAgPyBtaWRkbGVQb2ludCA6IGZpcnN0UG9pbnQ7XG4gICAgY29uc3QgY3VycmVudCA9IG1pZGRsZVBvaW50O1xuICAgIGNvbnN0IG5leHQgPSBhZnRlclBvaW50LnNraXAgPyBtaWRkbGVQb2ludCA6IGFmdGVyUG9pbnQ7XG4gICAgY29uc3QgZDAxID0gZGlzdGFuY2VCZXR3ZWVuUG9pbnRzKGN1cnJlbnQsIHByZXZpb3VzKTtcbiAgICBjb25zdCBkMTIgPSBkaXN0YW5jZUJldHdlZW5Qb2ludHMobmV4dCwgY3VycmVudCk7XG4gICAgbGV0IHMwMSA9IGQwMSAvIChkMDEgKyBkMTIpO1xuICAgIGxldCBzMTIgPSBkMTIgLyAoZDAxICsgZDEyKTtcbiAgICAvLyBJZiBhbGwgcG9pbnRzIGFyZSB0aGUgc2FtZSwgczAxICYgczAyIHdpbGwgYmUgaW5mXG4gICAgczAxID0gaXNOYU4oczAxKSA/IDAgOiBzMDE7XG4gICAgczEyID0gaXNOYU4oczEyKSA/IDAgOiBzMTI7XG4gICAgY29uc3QgZmEgPSB0ICogczAxOyAvLyBzY2FsaW5nIGZhY3RvciBmb3IgdHJpYW5nbGUgVGFcbiAgICBjb25zdCBmYiA9IHQgKiBzMTI7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJldmlvdXM6IHtcbiAgICAgICAgICAgIHg6IGN1cnJlbnQueCAtIGZhICogKG5leHQueCAtIHByZXZpb3VzLngpLFxuICAgICAgICAgICAgeTogY3VycmVudC55IC0gZmEgKiAobmV4dC55IC0gcHJldmlvdXMueSlcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dDoge1xuICAgICAgICAgICAgeDogY3VycmVudC54ICsgZmIgKiAobmV4dC54IC0gcHJldmlvdXMueCksXG4gICAgICAgICAgICB5OiBjdXJyZW50LnkgKyBmYiAqIChuZXh0LnkgLSBwcmV2aW91cy55KVxuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogQWRqdXN0IHRhbmdlbnRzIHRvIGVuc3VyZSBtb25vdG9uaWMgcHJvcGVydGllc1xuICovIGZ1bmN0aW9uIG1vbm90b25lQWRqdXN0KHBvaW50cywgZGVsdGFLLCBtSykge1xuICAgIGNvbnN0IHBvaW50c0xlbiA9IHBvaW50cy5sZW5ndGg7XG4gICAgbGV0IGFscGhhSywgYmV0YUssIHRhdUssIHNxdWFyZWRNYWduaXR1ZGUsIHBvaW50Q3VycmVudDtcbiAgICBsZXQgcG9pbnRBZnRlciA9IGdldFBvaW50KHBvaW50cywgMCk7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHBvaW50c0xlbiAtIDE7ICsraSl7XG4gICAgICAgIHBvaW50Q3VycmVudCA9IHBvaW50QWZ0ZXI7XG4gICAgICAgIHBvaW50QWZ0ZXIgPSBnZXRQb2ludChwb2ludHMsIGkgKyAxKTtcbiAgICAgICAgaWYgKCFwb2ludEN1cnJlbnQgfHwgIXBvaW50QWZ0ZXIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbG1vc3RFcXVhbHMoZGVsdGFLW2ldLCAwLCBFUFNJTE9OKSkge1xuICAgICAgICAgICAgbUtbaV0gPSBtS1tpICsgMV0gPSAwO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYWxwaGFLID0gbUtbaV0gLyBkZWx0YUtbaV07XG4gICAgICAgIGJldGFLID0gbUtbaSArIDFdIC8gZGVsdGFLW2ldO1xuICAgICAgICBzcXVhcmVkTWFnbml0dWRlID0gTWF0aC5wb3coYWxwaGFLLCAyKSArIE1hdGgucG93KGJldGFLLCAyKTtcbiAgICAgICAgaWYgKHNxdWFyZWRNYWduaXR1ZGUgPD0gOSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGF1SyA9IDMgLyBNYXRoLnNxcnQoc3F1YXJlZE1hZ25pdHVkZSk7XG4gICAgICAgIG1LW2ldID0gYWxwaGFLICogdGF1SyAqIGRlbHRhS1tpXTtcbiAgICAgICAgbUtbaSArIDFdID0gYmV0YUsgKiB0YXVLICogZGVsdGFLW2ldO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1vbm90b25lQ29tcHV0ZShwb2ludHMsIG1LLCBpbmRleEF4aXMgPSAneCcpIHtcbiAgICBjb25zdCB2YWx1ZUF4aXMgPSBnZXRWYWx1ZUF4aXMoaW5kZXhBeGlzKTtcbiAgICBjb25zdCBwb2ludHNMZW4gPSBwb2ludHMubGVuZ3RoO1xuICAgIGxldCBkZWx0YSwgcG9pbnRCZWZvcmUsIHBvaW50Q3VycmVudDtcbiAgICBsZXQgcG9pbnRBZnRlciA9IGdldFBvaW50KHBvaW50cywgMCk7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHBvaW50c0xlbjsgKytpKXtcbiAgICAgICAgcG9pbnRCZWZvcmUgPSBwb2ludEN1cnJlbnQ7XG4gICAgICAgIHBvaW50Q3VycmVudCA9IHBvaW50QWZ0ZXI7XG4gICAgICAgIHBvaW50QWZ0ZXIgPSBnZXRQb2ludChwb2ludHMsIGkgKyAxKTtcbiAgICAgICAgaWYgKCFwb2ludEN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlQaXhlbCA9IHBvaW50Q3VycmVudFtpbmRleEF4aXNdO1xuICAgICAgICBjb25zdCB2UGl4ZWwgPSBwb2ludEN1cnJlbnRbdmFsdWVBeGlzXTtcbiAgICAgICAgaWYgKHBvaW50QmVmb3JlKSB7XG4gICAgICAgICAgICBkZWx0YSA9IChpUGl4ZWwgLSBwb2ludEJlZm9yZVtpbmRleEF4aXNdKSAvIDM7XG4gICAgICAgICAgICBwb2ludEN1cnJlbnRbYGNwMSR7aW5kZXhBeGlzfWBdID0gaVBpeGVsIC0gZGVsdGE7XG4gICAgICAgICAgICBwb2ludEN1cnJlbnRbYGNwMSR7dmFsdWVBeGlzfWBdID0gdlBpeGVsIC0gZGVsdGEgKiBtS1tpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9pbnRBZnRlcikge1xuICAgICAgICAgICAgZGVsdGEgPSAocG9pbnRBZnRlcltpbmRleEF4aXNdIC0gaVBpeGVsKSAvIDM7XG4gICAgICAgICAgICBwb2ludEN1cnJlbnRbYGNwMiR7aW5kZXhBeGlzfWBdID0gaVBpeGVsICsgZGVsdGE7XG4gICAgICAgICAgICBwb2ludEN1cnJlbnRbYGNwMiR7dmFsdWVBeGlzfWBdID0gdlBpeGVsICsgZGVsdGEgKiBtS1tpXTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxjdWxhdGVzIELDqXppZXIgY29udHJvbCBwb2ludHMgaW4gYSBzaW1pbGFyIHdheSB0aGFuIHxzcGxpbmVDdXJ2ZXwsXG4gKiBidXQgcHJlc2VydmVzIG1vbm90b25pY2l0eSBvZiB0aGUgcHJvdmlkZWQgZGF0YSBhbmQgZW5zdXJlcyBubyBsb2NhbCBleHRyZW11bXMgYXJlIGFkZGVkXG4gKiBiZXR3ZWVuIHRoZSBkYXRhc2V0IGRpc2NyZXRlIHBvaW50cyBkdWUgdG8gdGhlIGludGVycG9sYXRpb24uXG4gKiBTZWUgOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Nb25vdG9uZV9jdWJpY19pbnRlcnBvbGF0aW9uXG4gKi8gZnVuY3Rpb24gc3BsaW5lQ3VydmVNb25vdG9uZShwb2ludHMsIGluZGV4QXhpcyA9ICd4Jykge1xuICAgIGNvbnN0IHZhbHVlQXhpcyA9IGdldFZhbHVlQXhpcyhpbmRleEF4aXMpO1xuICAgIGNvbnN0IHBvaW50c0xlbiA9IHBvaW50cy5sZW5ndGg7XG4gICAgY29uc3QgZGVsdGFLID0gQXJyYXkocG9pbnRzTGVuKS5maWxsKDApO1xuICAgIGNvbnN0IG1LID0gQXJyYXkocG9pbnRzTGVuKTtcbiAgICAvLyBDYWxjdWxhdGUgc2xvcGVzIChkZWx0YUspIGFuZCBpbml0aWFsaXplIHRhbmdlbnRzIChtSylcbiAgICBsZXQgaSwgcG9pbnRCZWZvcmUsIHBvaW50Q3VycmVudDtcbiAgICBsZXQgcG9pbnRBZnRlciA9IGdldFBvaW50KHBvaW50cywgMCk7XG4gICAgZm9yKGkgPSAwOyBpIDwgcG9pbnRzTGVuOyArK2kpe1xuICAgICAgICBwb2ludEJlZm9yZSA9IHBvaW50Q3VycmVudDtcbiAgICAgICAgcG9pbnRDdXJyZW50ID0gcG9pbnRBZnRlcjtcbiAgICAgICAgcG9pbnRBZnRlciA9IGdldFBvaW50KHBvaW50cywgaSArIDEpO1xuICAgICAgICBpZiAoIXBvaW50Q3VycmVudCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvaW50QWZ0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsb3BlRGVsdGEgPSBwb2ludEFmdGVyW2luZGV4QXhpc10gLSBwb2ludEN1cnJlbnRbaW5kZXhBeGlzXTtcbiAgICAgICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIHR3byBwb2ludHMgdGhhdCBhcHBlYXIgYXQgdGhlIHNhbWUgeCBwaXhlbCwgc2xvcGVEZWx0YVggaXMgMFxuICAgICAgICAgICAgZGVsdGFLW2ldID0gc2xvcGVEZWx0YSAhPT0gMCA/IChwb2ludEFmdGVyW3ZhbHVlQXhpc10gLSBwb2ludEN1cnJlbnRbdmFsdWVBeGlzXSkgLyBzbG9wZURlbHRhIDogMDtcbiAgICAgICAgfVxuICAgICAgICBtS1tpXSA9ICFwb2ludEJlZm9yZSA/IGRlbHRhS1tpXSA6ICFwb2ludEFmdGVyID8gZGVsdGFLW2kgLSAxXSA6IHNpZ24oZGVsdGFLW2kgLSAxXSkgIT09IHNpZ24oZGVsdGFLW2ldKSA/IDAgOiAoZGVsdGFLW2kgLSAxXSArIGRlbHRhS1tpXSkgLyAyO1xuICAgIH1cbiAgICBtb25vdG9uZUFkanVzdChwb2ludHMsIGRlbHRhSywgbUspO1xuICAgIG1vbm90b25lQ29tcHV0ZShwb2ludHMsIG1LLCBpbmRleEF4aXMpO1xufVxuZnVuY3Rpb24gY2FwQ29udHJvbFBvaW50KHB0LCBtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihwdCwgbWF4KSwgbWluKTtcbn1cbmZ1bmN0aW9uIGNhcEJlemllclBvaW50cyhwb2ludHMsIGFyZWEpIHtcbiAgICBsZXQgaSwgaWxlbiwgcG9pbnQsIGluQXJlYSwgaW5BcmVhUHJldjtcbiAgICBsZXQgaW5BcmVhTmV4dCA9IF9pc1BvaW50SW5BcmVhKHBvaW50c1swXSwgYXJlYSk7XG4gICAgZm9yKGkgPSAwLCBpbGVuID0gcG9pbnRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgIGluQXJlYVByZXYgPSBpbkFyZWE7XG4gICAgICAgIGluQXJlYSA9IGluQXJlYU5leHQ7XG4gICAgICAgIGluQXJlYU5leHQgPSBpIDwgaWxlbiAtIDEgJiYgX2lzUG9pbnRJbkFyZWEocG9pbnRzW2kgKyAxXSwgYXJlYSk7XG4gICAgICAgIGlmICghaW5BcmVhKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwb2ludCA9IHBvaW50c1tpXTtcbiAgICAgICAgaWYgKGluQXJlYVByZXYpIHtcbiAgICAgICAgICAgIHBvaW50LmNwMXggPSBjYXBDb250cm9sUG9pbnQocG9pbnQuY3AxeCwgYXJlYS5sZWZ0LCBhcmVhLnJpZ2h0KTtcbiAgICAgICAgICAgIHBvaW50LmNwMXkgPSBjYXBDb250cm9sUG9pbnQocG9pbnQuY3AxeSwgYXJlYS50b3AsIGFyZWEuYm90dG9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5BcmVhTmV4dCkge1xuICAgICAgICAgICAgcG9pbnQuY3AyeCA9IGNhcENvbnRyb2xQb2ludChwb2ludC5jcDJ4LCBhcmVhLmxlZnQsIGFyZWEucmlnaHQpO1xuICAgICAgICAgICAgcG9pbnQuY3AyeSA9IGNhcENvbnRyb2xQb2ludChwb2ludC5jcDJ5LCBhcmVhLnRvcCwgYXJlYS5ib3R0b20pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIF91cGRhdGVCZXppZXJDb250cm9sUG9pbnRzKHBvaW50cywgb3B0aW9ucywgYXJlYSwgbG9vcCwgaW5kZXhBeGlzKSB7XG4gICAgbGV0IGksIGlsZW4sIHBvaW50LCBjb250cm9sUG9pbnRzO1xuICAgIC8vIE9ubHkgY29uc2lkZXIgcG9pbnRzIHRoYXQgYXJlIGRyYXduIGluIGNhc2UgdGhlIHNwYW5HYXBzIG9wdGlvbiBpcyB1c2VkXG4gICAgaWYgKG9wdGlvbnMuc3BhbkdhcHMpIHtcbiAgICAgICAgcG9pbnRzID0gcG9pbnRzLmZpbHRlcigocHQpPT4hcHQuc2tpcCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmN1YmljSW50ZXJwb2xhdGlvbk1vZGUgPT09ICdtb25vdG9uZScpIHtcbiAgICAgICAgc3BsaW5lQ3VydmVNb25vdG9uZShwb2ludHMsIGluZGV4QXhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHByZXYgPSBsb29wID8gcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSA6IHBvaW50c1swXTtcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gcG9pbnRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBwb2ludCA9IHBvaW50c1tpXTtcbiAgICAgICAgICAgIGNvbnRyb2xQb2ludHMgPSBzcGxpbmVDdXJ2ZShwcmV2LCBwb2ludCwgcG9pbnRzW01hdGgubWluKGkgKyAxLCBpbGVuIC0gKGxvb3AgPyAwIDogMSkpICUgaWxlbl0sIG9wdGlvbnMudGVuc2lvbik7XG4gICAgICAgICAgICBwb2ludC5jcDF4ID0gY29udHJvbFBvaW50cy5wcmV2aW91cy54O1xuICAgICAgICAgICAgcG9pbnQuY3AxeSA9IGNvbnRyb2xQb2ludHMucHJldmlvdXMueTtcbiAgICAgICAgICAgIHBvaW50LmNwMnggPSBjb250cm9sUG9pbnRzLm5leHQueDtcbiAgICAgICAgICAgIHBvaW50LmNwMnkgPSBjb250cm9sUG9pbnRzLm5leHQueTtcbiAgICAgICAgICAgIHByZXYgPSBwb2ludDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5jYXBCZXppZXJQb2ludHMpIHtcbiAgICAgICAgY2FwQmV6aWVyUG9pbnRzKHBvaW50cywgYXJlYSk7XG4gICAgfVxufVxuXG4vKipcbiAqIE5vdGU6IHR5cGVkZWZzIGFyZSBhdXRvLWV4cG9ydGVkLCBzbyB1c2UgYSBtYWRlLXVwIGBkb21gIG5hbWVzcGFjZSB3aGVyZVxuICogbmVjZXNzYXJ5IHRvIGF2b2lkIGR1cGxpY2F0ZXMgd2l0aCBgZXhwb3J0ICogZnJvbSAnLi9oZWxwZXJzYDsgc2VlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQ2MDExXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vY29yZS9jb3JlLmNvbnRyb2xsZXIuanMnKS5kZWZhdWx0IH0gZG9tLkNoYXJ0XG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vLi4vdHlwZXMnKS5DaGFydEV2ZW50IH0gQ2hhcnRFdmVudFxuICovIC8qKlxuICogQHByaXZhdGVcbiAqLyBmdW5jdGlvbiBfaXNEb21TdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX2dldFBhcmVudE5vZGUoZG9tTm9kZSkge1xuICAgIGxldCBwYXJlbnQgPSBkb21Ob2RlLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCAmJiBwYXJlbnQudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU2hhZG93Um9vdF0nKSB7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5ob3N0O1xuICAgIH1cbiAgICByZXR1cm4gcGFyZW50O1xufVxuLyoqXG4gKiBjb252ZXJ0IG1heC13aWR0aC9tYXgtaGVpZ2h0IHZhbHVlcyB0aGF0IG1heSBiZSBwZXJjZW50YWdlcyBpbnRvIGEgbnVtYmVyXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIHBhcnNlTWF4U3R5bGUoc3R5bGVWYWx1ZSwgbm9kZSwgcGFyZW50UHJvcGVydHkpIHtcbiAgICBsZXQgdmFsdWVJblBpeGVscztcbiAgICBpZiAodHlwZW9mIHN0eWxlVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHZhbHVlSW5QaXhlbHMgPSBwYXJzZUludChzdHlsZVZhbHVlLCAxMCk7XG4gICAgICAgIGlmIChzdHlsZVZhbHVlLmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIHBlcmNlbnRhZ2UgKiBzaXplIGluIGRpbWVuc2lvblxuICAgICAgICAgICAgdmFsdWVJblBpeGVscyA9IHZhbHVlSW5QaXhlbHMgLyAxMDAgKiBub2RlLnBhcmVudE5vZGVbcGFyZW50UHJvcGVydHldO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVJblBpeGVscyA9IHN0eWxlVmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZUluUGl4ZWxzO1xufVxuY29uc3QgZ2V0Q29tcHV0ZWRTdHlsZSA9IChlbGVtZW50KT0+ZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7XG5mdW5jdGlvbiBnZXRTdHlsZShlbCwgcHJvcGVydHkpIHtcbiAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZShwcm9wZXJ0eSk7XG59XG5jb25zdCBwb3NpdGlvbnMgPSBbXG4gICAgJ3RvcCcsXG4gICAgJ3JpZ2h0JyxcbiAgICAnYm90dG9tJyxcbiAgICAnbGVmdCdcbl07XG5mdW5jdGlvbiBnZXRQb3NpdGlvbmVkU3R5bGUoc3R5bGVzLCBzdHlsZSwgc3VmZml4KSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgc3VmZml4ID0gc3VmZml4ID8gJy0nICsgc3VmZml4IDogJyc7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDQ7IGkrKyl7XG4gICAgICAgIGNvbnN0IHBvcyA9IHBvc2l0aW9uc1tpXTtcbiAgICAgICAgcmVzdWx0W3Bvc10gPSBwYXJzZUZsb2F0KHN0eWxlc1tzdHlsZSArICctJyArIHBvcyArIHN1ZmZpeF0pIHx8IDA7XG4gICAgfVxuICAgIHJlc3VsdC53aWR0aCA9IHJlc3VsdC5sZWZ0ICsgcmVzdWx0LnJpZ2h0O1xuICAgIHJlc3VsdC5oZWlnaHQgPSByZXN1bHQudG9wICsgcmVzdWx0LmJvdHRvbTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuY29uc3QgdXNlT2Zmc2V0UG9zID0gKHgsIHksIHRhcmdldCk9Pih4ID4gMCB8fCB5ID4gMCkgJiYgKCF0YXJnZXQgfHwgIXRhcmdldC5zaGFkb3dSb290KTtcbi8qKlxuICogQHBhcmFtIGVcbiAqIEBwYXJhbSBjYW52YXNcbiAqIEByZXR1cm5zIENhbnZhcyBwb3NpdGlvblxuICovIGZ1bmN0aW9uIGdldENhbnZhc1Bvc2l0aW9uKGUsIGNhbnZhcykge1xuICAgIGNvbnN0IHRvdWNoZXMgPSBlLnRvdWNoZXM7XG4gICAgY29uc3Qgc291cmNlID0gdG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA/IHRvdWNoZXNbMF0gOiBlO1xuICAgIGNvbnN0IHsgb2Zmc2V0WCAsIG9mZnNldFkgIH0gPSBzb3VyY2U7XG4gICAgbGV0IGJveCA9IGZhbHNlO1xuICAgIGxldCB4LCB5O1xuICAgIGlmICh1c2VPZmZzZXRQb3Mob2Zmc2V0WCwgb2Zmc2V0WSwgZS50YXJnZXQpKSB7XG4gICAgICAgIHggPSBvZmZzZXRYO1xuICAgICAgICB5ID0gb2Zmc2V0WTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB4ID0gc291cmNlLmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgICAgIHkgPSBzb3VyY2UuY2xpZW50WSAtIHJlY3QudG9wO1xuICAgICAgICBib3ggPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB4LFxuICAgICAgICB5LFxuICAgICAgICBib3hcbiAgICB9O1xufVxuLyoqXG4gKiBHZXRzIGFuIGV2ZW50J3MgeCwgeSBjb29yZGluYXRlcywgcmVsYXRpdmUgdG8gdGhlIGNoYXJ0IGFyZWFcbiAqIEBwYXJhbSBldmVudFxuICogQHBhcmFtIGNoYXJ0XG4gKiBAcmV0dXJucyB4IGFuZCB5IGNvb3JkaW5hdGVzIG9mIHRoZSBldmVudFxuICovIGZ1bmN0aW9uIGdldFJlbGF0aXZlUG9zaXRpb24oZXZlbnQsIGNoYXJ0KSB7XG4gICAgaWYgKCduYXRpdmUnIGluIGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG4gICAgY29uc3QgeyBjYW52YXMgLCBjdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyAgfSA9IGNoYXJ0O1xuICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpO1xuICAgIGNvbnN0IGJvcmRlckJveCA9IHN0eWxlLmJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnO1xuICAgIGNvbnN0IHBhZGRpbmdzID0gZ2V0UG9zaXRpb25lZFN0eWxlKHN0eWxlLCAncGFkZGluZycpO1xuICAgIGNvbnN0IGJvcmRlcnMgPSBnZXRQb3NpdGlvbmVkU3R5bGUoc3R5bGUsICdib3JkZXInLCAnd2lkdGgnKTtcbiAgICBjb25zdCB7IHggLCB5ICwgYm94ICB9ID0gZ2V0Q2FudmFzUG9zaXRpb24oZXZlbnQsIGNhbnZhcyk7XG4gICAgY29uc3QgeE9mZnNldCA9IHBhZGRpbmdzLmxlZnQgKyAoYm94ICYmIGJvcmRlcnMubGVmdCk7XG4gICAgY29uc3QgeU9mZnNldCA9IHBhZGRpbmdzLnRvcCArIChib3ggJiYgYm9yZGVycy50b3ApO1xuICAgIGxldCB7IHdpZHRoICwgaGVpZ2h0ICB9ID0gY2hhcnQ7XG4gICAgaWYgKGJvcmRlckJveCkge1xuICAgICAgICB3aWR0aCAtPSBwYWRkaW5ncy53aWR0aCArIGJvcmRlcnMud2lkdGg7XG4gICAgICAgIGhlaWdodCAtPSBwYWRkaW5ncy5oZWlnaHQgKyBib3JkZXJzLmhlaWdodDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogTWF0aC5yb3VuZCgoeCAtIHhPZmZzZXQpIC8gd2lkdGggKiBjYW52YXMud2lkdGggLyBjdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyksXG4gICAgICAgIHk6IE1hdGgucm91bmQoKHkgLSB5T2Zmc2V0KSAvIGhlaWdodCAqIGNhbnZhcy5oZWlnaHQgLyBjdXJyZW50RGV2aWNlUGl4ZWxSYXRpbylcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0Q29udGFpbmVyU2l6ZShjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBsZXQgbWF4V2lkdGgsIG1heEhlaWdodDtcbiAgICBpZiAod2lkdGggPT09IHVuZGVmaW5lZCB8fCBoZWlnaHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBfZ2V0UGFyZW50Tm9kZShjYW52YXMpO1xuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgd2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgLy8gdGhpcyBpcyB0aGUgYm9yZGVyIGJveCBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoY29udGFpbmVyKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lckJvcmRlciA9IGdldFBvc2l0aW9uZWRTdHlsZShjb250YWluZXJTdHlsZSwgJ2JvcmRlcicsICd3aWR0aCcpO1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyUGFkZGluZyA9IGdldFBvc2l0aW9uZWRTdHlsZShjb250YWluZXJTdHlsZSwgJ3BhZGRpbmcnKTtcbiAgICAgICAgICAgIHdpZHRoID0gcmVjdC53aWR0aCAtIGNvbnRhaW5lclBhZGRpbmcud2lkdGggLSBjb250YWluZXJCb3JkZXIud2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSByZWN0LmhlaWdodCAtIGNvbnRhaW5lclBhZGRpbmcuaGVpZ2h0IC0gY29udGFpbmVyQm9yZGVyLmhlaWdodDtcbiAgICAgICAgICAgIG1heFdpZHRoID0gcGFyc2VNYXhTdHlsZShjb250YWluZXJTdHlsZS5tYXhXaWR0aCwgY29udGFpbmVyLCAnY2xpZW50V2lkdGgnKTtcbiAgICAgICAgICAgIG1heEhlaWdodCA9IHBhcnNlTWF4U3R5bGUoY29udGFpbmVyU3R5bGUubWF4SGVpZ2h0LCBjb250YWluZXIsICdjbGllbnRIZWlnaHQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0LFxuICAgICAgICBtYXhXaWR0aDogbWF4V2lkdGggfHwgSU5GSU5JVFksXG4gICAgICAgIG1heEhlaWdodDogbWF4SGVpZ2h0IHx8IElORklOSVRZXG4gICAgfTtcbn1cbmNvbnN0IHJvdW5kMSA9ICh2KT0+TWF0aC5yb3VuZCh2ICogMTApIC8gMTA7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gZ2V0TWF4aW11bVNpemUoY2FudmFzLCBiYldpZHRoLCBiYkhlaWdodCwgYXNwZWN0UmF0aW8pIHtcbiAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoY2FudmFzKTtcbiAgICBjb25zdCBtYXJnaW5zID0gZ2V0UG9zaXRpb25lZFN0eWxlKHN0eWxlLCAnbWFyZ2luJyk7XG4gICAgY29uc3QgbWF4V2lkdGggPSBwYXJzZU1heFN0eWxlKHN0eWxlLm1heFdpZHRoLCBjYW52YXMsICdjbGllbnRXaWR0aCcpIHx8IElORklOSVRZO1xuICAgIGNvbnN0IG1heEhlaWdodCA9IHBhcnNlTWF4U3R5bGUoc3R5bGUubWF4SGVpZ2h0LCBjYW52YXMsICdjbGllbnRIZWlnaHQnKSB8fCBJTkZJTklUWTtcbiAgICBjb25zdCBjb250YWluZXJTaXplID0gZ2V0Q29udGFpbmVyU2l6ZShjYW52YXMsIGJiV2lkdGgsIGJiSGVpZ2h0KTtcbiAgICBsZXQgeyB3aWR0aCAsIGhlaWdodCAgfSA9IGNvbnRhaW5lclNpemU7XG4gICAgaWYgKHN0eWxlLmJveFNpemluZyA9PT0gJ2NvbnRlbnQtYm94Jykge1xuICAgICAgICBjb25zdCBib3JkZXJzID0gZ2V0UG9zaXRpb25lZFN0eWxlKHN0eWxlLCAnYm9yZGVyJywgJ3dpZHRoJyk7XG4gICAgICAgIGNvbnN0IHBhZGRpbmdzID0gZ2V0UG9zaXRpb25lZFN0eWxlKHN0eWxlLCAncGFkZGluZycpO1xuICAgICAgICB3aWR0aCAtPSBwYWRkaW5ncy53aWR0aCArIGJvcmRlcnMud2lkdGg7XG4gICAgICAgIGhlaWdodCAtPSBwYWRkaW5ncy5oZWlnaHQgKyBib3JkZXJzLmhlaWdodDtcbiAgICB9XG4gICAgd2lkdGggPSBNYXRoLm1heCgwLCB3aWR0aCAtIG1hcmdpbnMud2lkdGgpO1xuICAgIGhlaWdodCA9IE1hdGgubWF4KDAsIGFzcGVjdFJhdGlvID8gd2lkdGggLyBhc3BlY3RSYXRpbyA6IGhlaWdodCAtIG1hcmdpbnMuaGVpZ2h0KTtcbiAgICB3aWR0aCA9IHJvdW5kMShNYXRoLm1pbih3aWR0aCwgbWF4V2lkdGgsIGNvbnRhaW5lclNpemUubWF4V2lkdGgpKTtcbiAgICBoZWlnaHQgPSByb3VuZDEoTWF0aC5taW4oaGVpZ2h0LCBtYXhIZWlnaHQsIGNvbnRhaW5lclNpemUubWF4SGVpZ2h0KSk7XG4gICAgaWYgKHdpZHRoICYmICFoZWlnaHQpIHtcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzQ2NTlcbiAgICAgICAgLy8gSWYgdGhlIGNhbnZhcyBoYXMgd2lkdGgsIGJ1dCBubyBoZWlnaHQsIGRlZmF1bHQgdG8gYXNwZWN0UmF0aW8gb2YgMiAoY2FudmFzIGRlZmF1bHQpXG4gICAgICAgIGhlaWdodCA9IHJvdW5kMSh3aWR0aCAvIDIpO1xuICAgIH1cbiAgICBjb25zdCBtYWludGFpbkhlaWdodCA9IGJiV2lkdGggIT09IHVuZGVmaW5lZCB8fCBiYkhlaWdodCAhPT0gdW5kZWZpbmVkO1xuICAgIGlmIChtYWludGFpbkhlaWdodCAmJiBhc3BlY3RSYXRpbyAmJiBjb250YWluZXJTaXplLmhlaWdodCAmJiBoZWlnaHQgPiBjb250YWluZXJTaXplLmhlaWdodCkge1xuICAgICAgICBoZWlnaHQgPSBjb250YWluZXJTaXplLmhlaWdodDtcbiAgICAgICAgd2lkdGggPSByb3VuZDEoTWF0aC5mbG9vcihoZWlnaHQgKiBhc3BlY3RSYXRpbykpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0XG4gICAgfTtcbn1cbi8qKlxuICogQHBhcmFtIGNoYXJ0XG4gKiBAcGFyYW0gZm9yY2VSYXRpb1xuICogQHBhcmFtIGZvcmNlU3R5bGVcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGNhbnZhcyBjb250ZXh0IHNpemUgb3IgdHJhbnNmb3JtYXRpb24gaGFzIGNoYW5nZWQuXG4gKi8gZnVuY3Rpb24gcmV0aW5hU2NhbGUoY2hhcnQsIGZvcmNlUmF0aW8sIGZvcmNlU3R5bGUpIHtcbiAgICBjb25zdCBwaXhlbFJhdGlvID0gZm9yY2VSYXRpbyB8fCAxO1xuICAgIGNvbnN0IGRldmljZUhlaWdodCA9IE1hdGguZmxvb3IoY2hhcnQuaGVpZ2h0ICogcGl4ZWxSYXRpbyk7XG4gICAgY29uc3QgZGV2aWNlV2lkdGggPSBNYXRoLmZsb29yKGNoYXJ0LndpZHRoICogcGl4ZWxSYXRpbyk7XG4gICAgY2hhcnQuaGVpZ2h0ID0gTWF0aC5mbG9vcihjaGFydC5oZWlnaHQpO1xuICAgIGNoYXJ0LndpZHRoID0gTWF0aC5mbG9vcihjaGFydC53aWR0aCk7XG4gICAgY29uc3QgY2FudmFzID0gY2hhcnQuY2FudmFzO1xuICAgIC8vIElmIG5vIHN0eWxlIGhhcyBiZWVuIHNldCBvbiB0aGUgY2FudmFzLCB0aGUgcmVuZGVyIHNpemUgaXMgdXNlZCBhcyBkaXNwbGF5IHNpemUsXG4gICAgLy8gbWFraW5nIHRoZSBjaGFydCB2aXN1YWxseSBiaWdnZXIsIHNvIGxldCdzIGVuZm9yY2UgaXQgdG8gdGhlIFwiY29ycmVjdFwiIHZhbHVlcy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzM1NzVcbiAgICBpZiAoY2FudmFzLnN0eWxlICYmIChmb3JjZVN0eWxlIHx8ICFjYW52YXMuc3R5bGUuaGVpZ2h0ICYmICFjYW52YXMuc3R5bGUud2lkdGgpKSB7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBgJHtjaGFydC5oZWlnaHR9cHhgO1xuICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBgJHtjaGFydC53aWR0aH1weGA7XG4gICAgfVxuICAgIGlmIChjaGFydC5jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyAhPT0gcGl4ZWxSYXRpbyB8fCBjYW52YXMuaGVpZ2h0ICE9PSBkZXZpY2VIZWlnaHQgfHwgY2FudmFzLndpZHRoICE9PSBkZXZpY2VXaWR0aCkge1xuICAgICAgICBjaGFydC5jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBkZXZpY2VIZWlnaHQ7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGRldmljZVdpZHRoO1xuICAgICAgICBjaGFydC5jdHguc2V0VHJhbnNmb3JtKHBpeGVsUmF0aW8sIDAsIDAsIHBpeGVsUmF0aW8sIDAsIDApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBEZXRlY3RzIHN1cHBvcnQgZm9yIG9wdGlvbnMgb2JqZWN0IGFyZ3VtZW50IGluIGFkZEV2ZW50TGlzdGVuZXIuXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnRUYXJnZXQvYWRkRXZlbnRMaXN0ZW5lciNTYWZlbHlfZGV0ZWN0aW5nX29wdGlvbl9zdXBwb3J0XG4gKiBAcHJpdmF0ZVxuICovIGNvbnN0IHN1cHBvcnRzRXZlbnRMaXN0ZW5lck9wdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICBsZXQgcGFzc2l2ZVN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBnZXQgcGFzc2l2ZSAoKSB7XG4gICAgICAgICAgICAgICAgcGFzc2l2ZVN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIG9wdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBjb250aW51ZSByZWdhcmRsZXNzIG9mIGVycm9yXG4gICAgfVxuICAgIHJldHVybiBwYXNzaXZlU3VwcG9ydGVkO1xufSgpO1xuLyoqXG4gKiBUaGUgXCJ1c2VkXCIgc2l6ZSBpcyB0aGUgZmluYWwgdmFsdWUgb2YgYSBkaW1lbnNpb24gcHJvcGVydHkgYWZ0ZXIgYWxsIGNhbGN1bGF0aW9ucyBoYXZlXG4gKiBiZWVuIHBlcmZvcm1lZC4gVGhpcyBtZXRob2QgdXNlcyB0aGUgY29tcHV0ZWQgc3R5bGUgb2YgYGVsZW1lbnRgIGJ1dCByZXR1cm5zIHVuZGVmaW5lZFxuICogaWYgdGhlIGNvbXB1dGVkIHN0eWxlIGlzIG5vdCBleHByZXNzZWQgaW4gcGl4ZWxzLiBUaGF0IGNhbiBoYXBwZW4gaW4gc29tZSBjYXNlcyB3aGVyZVxuICogYGVsZW1lbnRgIGhhcyBhIHNpemUgcmVsYXRpdmUgdG8gaXRzIHBhcmVudCBhbmQgdGhpcyBsYXN0IG9uZSBpcyBub3QgeWV0IGRpc3BsYXllZCxcbiAqIGZvciBleGFtcGxlIGJlY2F1c2Ugb2YgYGRpc3BsYXk6IG5vbmVgIG9uIGEgcGFyZW50IG5vZGUuXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy91c2VkX3ZhbHVlXG4gKiBAcmV0dXJucyBTaXplIGluIHBpeGVscyBvciB1bmRlZmluZWQgaWYgdW5rbm93bi5cbiAqLyBmdW5jdGlvbiByZWFkVXNlZFNpemUoZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGdldFN0eWxlKGVsZW1lbnQsIHByb3BlcnR5KTtcbiAgICBjb25zdCBtYXRjaGVzID0gdmFsdWUgJiYgdmFsdWUubWF0Y2goL14oXFxkKykoXFwuXFxkKyk/cHgkLyk7XG4gICAgcmV0dXJuIG1hdGNoZXMgPyArbWF0Y2hlc1sxXSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIF9wb2ludEluTGluZShwMSwgcDIsIHQsIG1vZGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiBwMS54ICsgdCAqIChwMi54IC0gcDEueCksXG4gICAgICAgIHk6IHAxLnkgKyB0ICogKHAyLnkgLSBwMS55KVxuICAgIH07XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi8gZnVuY3Rpb24gX3N0ZXBwZWRJbnRlcnBvbGF0aW9uKHAxLCBwMiwgdCwgbW9kZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHAxLnggKyB0ICogKHAyLnggLSBwMS54KSxcbiAgICAgICAgeTogbW9kZSA9PT0gJ21pZGRsZScgPyB0IDwgMC41ID8gcDEueSA6IHAyLnkgOiBtb2RlID09PSAnYWZ0ZXInID8gdCA8IDEgPyBwMS55IDogcDIueSA6IHQgPiAwID8gcDIueSA6IHAxLnlcbiAgICB9O1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIF9iZXppZXJJbnRlcnBvbGF0aW9uKHAxLCBwMiwgdCwgbW9kZSkge1xuICAgIGNvbnN0IGNwMSA9IHtcbiAgICAgICAgeDogcDEuY3AyeCxcbiAgICAgICAgeTogcDEuY3AyeVxuICAgIH07XG4gICAgY29uc3QgY3AyID0ge1xuICAgICAgICB4OiBwMi5jcDF4LFxuICAgICAgICB5OiBwMi5jcDF5XG4gICAgfTtcbiAgICBjb25zdCBhID0gX3BvaW50SW5MaW5lKHAxLCBjcDEsIHQpO1xuICAgIGNvbnN0IGIgPSBfcG9pbnRJbkxpbmUoY3AxLCBjcDIsIHQpO1xuICAgIGNvbnN0IGMgPSBfcG9pbnRJbkxpbmUoY3AyLCBwMiwgdCk7XG4gICAgY29uc3QgZCA9IF9wb2ludEluTGluZShhLCBiLCB0KTtcbiAgICBjb25zdCBlID0gX3BvaW50SW5MaW5lKGIsIGMsIHQpO1xuICAgIHJldHVybiBfcG9pbnRJbkxpbmUoZCwgZSwgdCk7XG59XG5cbmNvbnN0IGdldFJpZ2h0VG9MZWZ0QWRhcHRlciA9IGZ1bmN0aW9uKHJlY3RYLCB3aWR0aCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHggKHgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWN0WCArIHJlY3RYICsgd2lkdGggLSB4O1xuICAgICAgICB9LFxuICAgICAgICBzZXRXaWR0aCAodykge1xuICAgICAgICAgICAgd2lkdGggPSB3O1xuICAgICAgICB9LFxuICAgICAgICB0ZXh0QWxpZ24gKGFsaWduKSB7XG4gICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsaWduO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFsaWduID09PSAncmlnaHQnID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgfSxcbiAgICAgICAgeFBsdXMgKHgsIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4geCAtIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBsZWZ0Rm9yTHRyICh4LCBpdGVtV2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB4IC0gaXRlbVdpZHRoO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5jb25zdCBnZXRMZWZ0VG9SaWdodEFkYXB0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4ICh4KSB7XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0V2lkdGggKHcpIHt9LFxuICAgICAgICB0ZXh0QWxpZ24gKGFsaWduKSB7XG4gICAgICAgICAgICByZXR1cm4gYWxpZ247XG4gICAgICAgIH0sXG4gICAgICAgIHhQbHVzICh4LCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHggKyB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgbGVmdEZvckx0ciAoeCwgX2l0ZW1XaWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbmZ1bmN0aW9uIGdldFJ0bEFkYXB0ZXIocnRsLCByZWN0WCwgd2lkdGgpIHtcbiAgICByZXR1cm4gcnRsID8gZ2V0UmlnaHRUb0xlZnRBZGFwdGVyKHJlY3RYLCB3aWR0aCkgOiBnZXRMZWZ0VG9SaWdodEFkYXB0ZXIoKTtcbn1cbmZ1bmN0aW9uIG92ZXJyaWRlVGV4dERpcmVjdGlvbihjdHgsIGRpcmVjdGlvbikge1xuICAgIGxldCBzdHlsZSwgb3JpZ2luYWw7XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2x0cicgfHwgZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICBzdHlsZSA9IGN0eC5jYW52YXMuc3R5bGU7XG4gICAgICAgIG9yaWdpbmFsID0gW1xuICAgICAgICAgICAgc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnZGlyZWN0aW9uJyksXG4gICAgICAgICAgICBzdHlsZS5nZXRQcm9wZXJ0eVByaW9yaXR5KCdkaXJlY3Rpb24nKVxuICAgICAgICBdO1xuICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eSgnZGlyZWN0aW9uJywgZGlyZWN0aW9uLCAnaW1wb3J0YW50Jyk7XG4gICAgICAgIGN0eC5wcmV2VGV4dERpcmVjdGlvbiA9IG9yaWdpbmFsO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlc3RvcmVUZXh0RGlyZWN0aW9uKGN0eCwgb3JpZ2luYWwpIHtcbiAgICBpZiAob3JpZ2luYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWxldGUgY3R4LnByZXZUZXh0RGlyZWN0aW9uO1xuICAgICAgICBjdHguY2FudmFzLnN0eWxlLnNldFByb3BlcnR5KCdkaXJlY3Rpb24nLCBvcmlnaW5hbFswXSwgb3JpZ2luYWxbMV0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcHJvcGVydHlGbihwcm9wZXJ0eSkge1xuICAgIGlmIChwcm9wZXJ0eSA9PT0gJ2FuZ2xlJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmV0d2VlbjogX2FuZ2xlQmV0d2VlbixcbiAgICAgICAgICAgIGNvbXBhcmU6IF9hbmdsZURpZmYsXG4gICAgICAgICAgICBub3JtYWxpemU6IF9ub3JtYWxpemVBbmdsZVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBiZXR3ZWVuOiBfaXNCZXR3ZWVuLFxuICAgICAgICBjb21wYXJlOiAoYSwgYik9PmEgLSBiLFxuICAgICAgICBub3JtYWxpemU6ICh4KT0+eFxuICAgIH07XG59XG5mdW5jdGlvbiBub3JtYWxpemVTZWdtZW50KHsgc3RhcnQgLCBlbmQgLCBjb3VudCAsIGxvb3AgLCBzdHlsZSAgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiBzdGFydCAlIGNvdW50LFxuICAgICAgICBlbmQ6IGVuZCAlIGNvdW50LFxuICAgICAgICBsb29wOiBsb29wICYmIChlbmQgLSBzdGFydCArIDEpICUgY291bnQgPT09IDAsXG4gICAgICAgIHN0eWxlXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGdldFNlZ21lbnQoc2VnbWVudCwgcG9pbnRzLCBib3VuZHMpIHtcbiAgICBjb25zdCB7IHByb3BlcnR5ICwgc3RhcnQ6IHN0YXJ0Qm91bmQgLCBlbmQ6IGVuZEJvdW5kICB9ID0gYm91bmRzO1xuICAgIGNvbnN0IHsgYmV0d2VlbiAsIG5vcm1hbGl6ZSAgfSA9IHByb3BlcnR5Rm4ocHJvcGVydHkpO1xuICAgIGNvbnN0IGNvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgICBsZXQgeyBzdGFydCAsIGVuZCAsIGxvb3AgIH0gPSBzZWdtZW50O1xuICAgIGxldCBpLCBpbGVuO1xuICAgIGlmIChsb29wKSB7XG4gICAgICAgIHN0YXJ0ICs9IGNvdW50O1xuICAgICAgICBlbmQgKz0gY291bnQ7XG4gICAgICAgIGZvcihpID0gMCwgaWxlbiA9IGNvdW50OyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgIGlmICghYmV0d2Vlbihub3JtYWxpemUocG9pbnRzW3N0YXJ0ICUgY291bnRdW3Byb3BlcnR5XSksIHN0YXJ0Qm91bmQsIGVuZEJvdW5kKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhcnQtLTtcbiAgICAgICAgICAgIGVuZC0tO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0ICU9IGNvdW50O1xuICAgICAgICBlbmQgJT0gY291bnQ7XG4gICAgfVxuICAgIGlmIChlbmQgPCBzdGFydCkge1xuICAgICAgICBlbmQgKz0gY291bnQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBlbmQsXG4gICAgICAgIGxvb3AsXG4gICAgICAgIHN0eWxlOiBzZWdtZW50LnN0eWxlXG4gICAgfTtcbn1cbiBmdW5jdGlvbiBfYm91bmRTZWdtZW50KHNlZ21lbnQsIHBvaW50cywgYm91bmRzKSB7XG4gICAgaWYgKCFib3VuZHMpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHNlZ21lbnRcbiAgICAgICAgXTtcbiAgICB9XG4gICAgY29uc3QgeyBwcm9wZXJ0eSAsIHN0YXJ0OiBzdGFydEJvdW5kICwgZW5kOiBlbmRCb3VuZCAgfSA9IGJvdW5kcztcbiAgICBjb25zdCBjb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gICAgY29uc3QgeyBjb21wYXJlICwgYmV0d2VlbiAsIG5vcm1hbGl6ZSAgfSA9IHByb3BlcnR5Rm4ocHJvcGVydHkpO1xuICAgIGNvbnN0IHsgc3RhcnQgLCBlbmQgLCBsb29wICwgc3R5bGUgIH0gPSBnZXRTZWdtZW50KHNlZ21lbnQsIHBvaW50cywgYm91bmRzKTtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBsZXQgaW5zaWRlID0gZmFsc2U7XG4gICAgbGV0IHN1YlN0YXJ0ID0gbnVsbDtcbiAgICBsZXQgdmFsdWUsIHBvaW50LCBwcmV2VmFsdWU7XG4gICAgY29uc3Qgc3RhcnRJc0JlZm9yZSA9ICgpPT5iZXR3ZWVuKHN0YXJ0Qm91bmQsIHByZXZWYWx1ZSwgdmFsdWUpICYmIGNvbXBhcmUoc3RhcnRCb3VuZCwgcHJldlZhbHVlKSAhPT0gMDtcbiAgICBjb25zdCBlbmRJc0JlZm9yZSA9ICgpPT5jb21wYXJlKGVuZEJvdW5kLCB2YWx1ZSkgPT09IDAgfHwgYmV0d2VlbihlbmRCb3VuZCwgcHJldlZhbHVlLCB2YWx1ZSk7XG4gICAgY29uc3Qgc2hvdWxkU3RhcnQgPSAoKT0+aW5zaWRlIHx8IHN0YXJ0SXNCZWZvcmUoKTtcbiAgICBjb25zdCBzaG91bGRTdG9wID0gKCk9PiFpbnNpZGUgfHwgZW5kSXNCZWZvcmUoKTtcbiAgICBmb3IobGV0IGkgPSBzdGFydCwgcHJldiA9IHN0YXJ0OyBpIDw9IGVuZDsgKytpKXtcbiAgICAgICAgcG9pbnQgPSBwb2ludHNbaSAlIGNvdW50XTtcbiAgICAgICAgaWYgKHBvaW50LnNraXApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gbm9ybWFsaXplKHBvaW50W3Byb3BlcnR5XSk7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gcHJldlZhbHVlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpbnNpZGUgPSBiZXR3ZWVuKHZhbHVlLCBzdGFydEJvdW5kLCBlbmRCb3VuZCk7XG4gICAgICAgIGlmIChzdWJTdGFydCA9PT0gbnVsbCAmJiBzaG91bGRTdGFydCgpKSB7XG4gICAgICAgICAgICBzdWJTdGFydCA9IGNvbXBhcmUodmFsdWUsIHN0YXJ0Qm91bmQpID09PSAwID8gaSA6IHByZXY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1YlN0YXJ0ICE9PSBudWxsICYmIHNob3VsZFN0b3AoKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9ybWFsaXplU2VnbWVudCh7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN1YlN0YXJ0LFxuICAgICAgICAgICAgICAgIGVuZDogaSxcbiAgICAgICAgICAgICAgICBsb29wLFxuICAgICAgICAgICAgICAgIGNvdW50LFxuICAgICAgICAgICAgICAgIHN0eWxlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBzdWJTdGFydCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcHJldiA9IGk7XG4gICAgICAgIHByZXZWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBpZiAoc3ViU3RhcnQgIT09IG51bGwpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobm9ybWFsaXplU2VnbWVudCh7XG4gICAgICAgICAgICBzdGFydDogc3ViU3RhcnQsXG4gICAgICAgICAgICBlbmQsXG4gICAgICAgICAgICBsb29wLFxuICAgICAgICAgICAgY291bnQsXG4gICAgICAgICAgICBzdHlsZVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4gZnVuY3Rpb24gX2JvdW5kU2VnbWVudHMobGluZSwgYm91bmRzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgY29uc3Qgc2VnbWVudHMgPSBsaW5lLnNlZ21lbnRzO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGNvbnN0IHN1YiA9IF9ib3VuZFNlZ21lbnQoc2VnbWVudHNbaV0sIGxpbmUucG9pbnRzLCBib3VuZHMpO1xuICAgICAgICBpZiAoc3ViLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goLi4uc3ViKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIGZ1bmN0aW9uIGZpbmRTdGFydEFuZEVuZChwb2ludHMsIGNvdW50LCBsb29wLCBzcGFuR2Fwcykge1xuICAgIGxldCBzdGFydCA9IDA7XG4gICAgbGV0IGVuZCA9IGNvdW50IC0gMTtcbiAgICBpZiAobG9vcCAmJiAhc3BhbkdhcHMpIHtcbiAgICAgICAgd2hpbGUoc3RhcnQgPCBjb3VudCAmJiAhcG9pbnRzW3N0YXJ0XS5za2lwKXtcbiAgICAgICAgICAgIHN0YXJ0Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2hpbGUoc3RhcnQgPCBjb3VudCAmJiBwb2ludHNbc3RhcnRdLnNraXApe1xuICAgICAgICBzdGFydCsrO1xuICAgIH1cbiAgICBzdGFydCAlPSBjb3VudDtcbiAgICBpZiAobG9vcCkge1xuICAgICAgICBlbmQgKz0gc3RhcnQ7XG4gICAgfVxuICAgIHdoaWxlKGVuZCA+IHN0YXJ0ICYmIHBvaW50c1tlbmQgJSBjb3VudF0uc2tpcCl7XG4gICAgICAgIGVuZC0tO1xuICAgIH1cbiAgICBlbmQgJT0gY291bnQ7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIGVuZFxuICAgIH07XG59XG4gZnVuY3Rpb24gc29saWRTZWdtZW50cyhwb2ludHMsIHN0YXJ0LCBtYXgsIGxvb3ApIHtcbiAgICBjb25zdCBjb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgbGV0IGxhc3QgPSBzdGFydDtcbiAgICBsZXQgcHJldiA9IHBvaW50c1tzdGFydF07XG4gICAgbGV0IGVuZDtcbiAgICBmb3IoZW5kID0gc3RhcnQgKyAxOyBlbmQgPD0gbWF4OyArK2VuZCl7XG4gICAgICAgIGNvbnN0IGN1ciA9IHBvaW50c1tlbmQgJSBjb3VudF07XG4gICAgICAgIGlmIChjdXIuc2tpcCB8fCBjdXIuc3RvcCkge1xuICAgICAgICAgICAgaWYgKCFwcmV2LnNraXApIHtcbiAgICAgICAgICAgICAgICBsb29wID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQgJSBjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiAoZW5kIC0gMSkgJSBjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgbG9vcFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gbGFzdCA9IGN1ci5zdG9wID8gZW5kIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxhc3QgPSBlbmQ7XG4gICAgICAgICAgICBpZiAocHJldi5za2lwKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBlbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJldiA9IGN1cjtcbiAgICB9XG4gICAgaWYgKGxhc3QgIT09IG51bGwpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0ICUgY291bnQsXG4gICAgICAgICAgICBlbmQ6IGxhc3QgJSBjb3VudCxcbiAgICAgICAgICAgIGxvb3BcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4gZnVuY3Rpb24gX2NvbXB1dGVTZWdtZW50cyhsaW5lLCBzZWdtZW50T3B0aW9ucykge1xuICAgIGNvbnN0IHBvaW50cyA9IGxpbmUucG9pbnRzO1xuICAgIGNvbnN0IHNwYW5HYXBzID0gbGluZS5vcHRpb25zLnNwYW5HYXBzO1xuICAgIGNvbnN0IGNvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgICBpZiAoIWNvdW50KSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgY29uc3QgbG9vcCA9ICEhbGluZS5fbG9vcDtcbiAgICBjb25zdCB7IHN0YXJ0ICwgZW5kICB9ID0gZmluZFN0YXJ0QW5kRW5kKHBvaW50cywgY291bnQsIGxvb3AsIHNwYW5HYXBzKTtcbiAgICBpZiAoc3BhbkdhcHMgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHNwbGl0QnlTdHlsZXMobGluZSwgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgICAgIGVuZCxcbiAgICAgICAgICAgICAgICBsb29wXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sIHBvaW50cywgc2VnbWVudE9wdGlvbnMpO1xuICAgIH1cbiAgICBjb25zdCBtYXggPSBlbmQgPCBzdGFydCA/IGVuZCArIGNvdW50IDogZW5kO1xuICAgIGNvbnN0IGNvbXBsZXRlTG9vcCA9ICEhbGluZS5fZnVsbExvb3AgJiYgc3RhcnQgPT09IDAgJiYgZW5kID09PSBjb3VudCAtIDE7XG4gICAgcmV0dXJuIHNwbGl0QnlTdHlsZXMobGluZSwgc29saWRTZWdtZW50cyhwb2ludHMsIHN0YXJ0LCBtYXgsIGNvbXBsZXRlTG9vcCksIHBvaW50cywgc2VnbWVudE9wdGlvbnMpO1xufVxuIGZ1bmN0aW9uIHNwbGl0QnlTdHlsZXMobGluZSwgc2VnbWVudHMsIHBvaW50cywgc2VnbWVudE9wdGlvbnMpIHtcbiAgICBpZiAoIXNlZ21lbnRPcHRpb25zIHx8ICFzZWdtZW50T3B0aW9ucy5zZXRDb250ZXh0IHx8ICFwb2ludHMpIHtcbiAgICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cbiAgICByZXR1cm4gZG9TcGxpdEJ5U3R5bGVzKGxpbmUsIHNlZ21lbnRzLCBwb2ludHMsIHNlZ21lbnRPcHRpb25zKTtcbn1cbiBmdW5jdGlvbiBkb1NwbGl0QnlTdHlsZXMobGluZSwgc2VnbWVudHMsIHBvaW50cywgc2VnbWVudE9wdGlvbnMpIHtcbiAgICBjb25zdCBjaGFydENvbnRleHQgPSBsaW5lLl9jaGFydC5nZXRDb250ZXh0KCk7XG4gICAgY29uc3QgYmFzZVN0eWxlID0gcmVhZFN0eWxlKGxpbmUub3B0aW9ucyk7XG4gICAgY29uc3QgeyBfZGF0YXNldEluZGV4OiBkYXRhc2V0SW5kZXggLCBvcHRpb25zOiB7IHNwYW5HYXBzICB9ICB9ID0gbGluZTtcbiAgICBjb25zdCBjb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgbGV0IHByZXZTdHlsZSA9IGJhc2VTdHlsZTtcbiAgICBsZXQgc3RhcnQgPSBzZWdtZW50c1swXS5zdGFydDtcbiAgICBsZXQgaSA9IHN0YXJ0O1xuICAgIGZ1bmN0aW9uIGFkZFN0eWxlKHMsIGUsIGwsIHN0KSB7XG4gICAgICAgIGNvbnN0IGRpciA9IHNwYW5HYXBzID8gLTEgOiAxO1xuICAgICAgICBpZiAocyA9PT0gZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHMgKz0gY291bnQ7XG4gICAgICAgIHdoaWxlKHBvaW50c1tzICUgY291bnRdLnNraXApe1xuICAgICAgICAgICAgcyAtPSBkaXI7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUocG9pbnRzW2UgJSBjb3VudF0uc2tpcCl7XG4gICAgICAgICAgICBlICs9IGRpcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocyAlIGNvdW50ICE9PSBlICUgY291bnQpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBzdGFydDogcyAlIGNvdW50LFxuICAgICAgICAgICAgICAgIGVuZDogZSAlIGNvdW50LFxuICAgICAgICAgICAgICAgIGxvb3A6IGwsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHN0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHByZXZTdHlsZSA9IHN0O1xuICAgICAgICAgICAgc3RhcnQgPSBlICUgY291bnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKXtcbiAgICAgICAgc3RhcnQgPSBzcGFuR2FwcyA/IHN0YXJ0IDogc2VnbWVudC5zdGFydDtcbiAgICAgICAgbGV0IHByZXYgPSBwb2ludHNbc3RhcnQgJSBjb3VudF07XG4gICAgICAgIGxldCBzdHlsZTtcbiAgICAgICAgZm9yKGkgPSBzdGFydCArIDE7IGkgPD0gc2VnbWVudC5lbmQ7IGkrKyl7XG4gICAgICAgICAgICBjb25zdCBwdCA9IHBvaW50c1tpICUgY291bnRdO1xuICAgICAgICAgICAgc3R5bGUgPSByZWFkU3R5bGUoc2VnbWVudE9wdGlvbnMuc2V0Q29udGV4dChjcmVhdGVDb250ZXh0KGNoYXJ0Q29udGV4dCwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZWdtZW50JyxcbiAgICAgICAgICAgICAgICBwMDogcHJldixcbiAgICAgICAgICAgICAgICBwMTogcHQsXG4gICAgICAgICAgICAgICAgcDBEYXRhSW5kZXg6IChpIC0gMSkgJSBjb3VudCxcbiAgICAgICAgICAgICAgICBwMURhdGFJbmRleDogaSAlIGNvdW50LFxuICAgICAgICAgICAgICAgIGRhdGFzZXRJbmRleFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgIGlmIChzdHlsZUNoYW5nZWQoc3R5bGUsIHByZXZTdHlsZSkpIHtcbiAgICAgICAgICAgICAgICBhZGRTdHlsZShzdGFydCwgaSAtIDEsIHNlZ21lbnQubG9vcCwgcHJldlN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXYgPSBwdDtcbiAgICAgICAgICAgIHByZXZTdHlsZSA9IHN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydCA8IGkgLSAxKSB7XG4gICAgICAgICAgICBhZGRTdHlsZShzdGFydCwgaSAtIDEsIHNlZ21lbnQubG9vcCwgcHJldlN0eWxlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcmVhZFN0eWxlKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICBib3JkZXJDYXBTdHlsZTogb3B0aW9ucy5ib3JkZXJDYXBTdHlsZSxcbiAgICAgICAgYm9yZGVyRGFzaDogb3B0aW9ucy5ib3JkZXJEYXNoLFxuICAgICAgICBib3JkZXJEYXNoT2Zmc2V0OiBvcHRpb25zLmJvcmRlckRhc2hPZmZzZXQsXG4gICAgICAgIGJvcmRlckpvaW5TdHlsZTogb3B0aW9ucy5ib3JkZXJKb2luU3R5bGUsXG4gICAgICAgIGJvcmRlcldpZHRoOiBvcHRpb25zLmJvcmRlcldpZHRoLFxuICAgICAgICBib3JkZXJDb2xvcjogb3B0aW9ucy5ib3JkZXJDb2xvclxuICAgIH07XG59XG5mdW5jdGlvbiBzdHlsZUNoYW5nZWQoc3R5bGUsIHByZXZTdHlsZSkge1xuICAgIHJldHVybiBwcmV2U3R5bGUgJiYgSlNPTi5zdHJpbmdpZnkoc3R5bGUpICE9PSBKU09OLnN0cmluZ2lmeShwcmV2U3R5bGUpO1xufVxuXG5leHBvcnQgeyB1bmNsaXBBcmVhIGFzICQsIF9ybG9va3VwQnlLZXkgYXMgQSwgX2xvb2t1cEJ5S2V5IGFzIEIsIF9pc1BvaW50SW5BcmVhIGFzIEMsIGdldEFuZ2xlRnJvbVBvaW50IGFzIEQsIHRvUGFkZGluZyBhcyBFLCBlYWNoIGFzIEYsIGdldE1heGltdW1TaXplIGFzIEcsIEhBTEZfUEkgYXMgSCwgX2dldFBhcmVudE5vZGUgYXMgSSwgcmVhZFVzZWRTaXplIGFzIEosIHN1cHBvcnRzRXZlbnRMaXN0ZW5lck9wdGlvbnMgYXMgSywgdGhyb3R0bGVkIGFzIEwsIF9pc0RvbVN1cHBvcnRlZCBhcyBNLCBfZmFjdG9yaXplIGFzIE4sIGZpbml0ZU9yRGVmYXVsdCBhcyBPLCBQSSBhcyBQLCBjYWxsYmFjayBhcyBRLCBfYWRkR3JhY2UgYXMgUiwgX2xpbWl0VmFsdWUgYXMgUywgVEFVIGFzIFQsIHRvRGVncmVlcyBhcyBVLCBfbWVhc3VyZVRleHQgYXMgViwgX2ludDE2UmFuZ2UgYXMgVywgX2FsaWduUGl4ZWwgYXMgWCwgY2xpcEFyZWEgYXMgWSwgcmVuZGVyVGV4dCBhcyBaLCBfYXJyYXlVbmlxdWUgYXMgXywgcmVzb2x2ZSBhcyBhLCBmb250U3RyaW5nIGFzIGEkLCB0b0ZvbnQgYXMgYTAsIF90b0xlZnRSaWdodENlbnRlciBhcyBhMSwgX2FsaWduU3RhcnRFbmQgYXMgYTIsIG92ZXJyaWRlcyBhcyBhMywgbWVyZ2UgYXMgYTQsIF9jYXBpdGFsaXplIGFzIGE1LCBkZXNjcmlwdG9ycyBhcyBhNiwgaXNGdW5jdGlvbiBhcyBhNywgX2F0dGFjaENvbnRleHQgYXMgYTgsIF9jcmVhdGVSZXNvbHZlciBhcyBhOSwgb3ZlcnJpZGVUZXh0RGlyZWN0aW9uIGFzIGFBLCBfdGV4dFggYXMgYUIsIHJlc3RvcmVUZXh0RGlyZWN0aW9uIGFzIGFDLCBkcmF3UG9pbnRMZWdlbmQgYXMgYUQsIGRpc3RhbmNlQmV0d2VlblBvaW50cyBhcyBhRSwgbm9vcCBhcyBhRiwgX3NldE1pbkFuZE1heEJ5S2V5IGFzIGFHLCBuaWNlTnVtIGFzIGFILCBhbG1vc3RXaG9sZSBhcyBhSSwgYWxtb3N0RXF1YWxzIGFzIGFKLCBfZGVjaW1hbFBsYWNlcyBhcyBhSywgVGlja3MgYXMgYUwsIGxvZzEwIGFzIGFNLCBfbG9uZ2VzdFRleHQgYXMgYU4sIF9maWx0ZXJCZXR3ZWVuIGFzIGFPLCBfbG9va3VwIGFzIGFQLCBpc1BhdHRlcm5PckdyYWRpZW50IGFzIGFRLCBnZXRIb3ZlckNvbG9yIGFzIGFSLCBjbG9uZSBhcyBhUywgX21lcmdlciBhcyBhVCwgX21lcmdlcklmIGFzIGFVLCBfZGVwcmVjYXRlZCBhcyBhViwgX3NwbGl0S2V5IGFzIGFXLCB0b0ZvbnRTdHJpbmcgYXMgYVgsIHNwbGluZUN1cnZlIGFzIGFZLCBzcGxpbmVDdXJ2ZU1vbm90b25lIGFzIGFaLCBnZXRTdHlsZSBhcyBhXywgX2Rlc2NyaXB0b3JzIGFzIGFhLCBtZXJnZUlmIGFzIGFiLCB1aWQgYXMgYWMsIGRlYm91bmNlIGFzIGFkLCByZXRpbmFTY2FsZSBhcyBhZSwgY2xlYXJDYW52YXMgYXMgYWYsIHNldHNFcXVhbCBhcyBhZywgX2VsZW1lbnRzRXF1YWwgYXMgYWgsIF9pc0NsaWNrRXZlbnQgYXMgYWksIF9pc0JldHdlZW4gYXMgYWosIF9yZWFkVmFsdWVUb1Byb3BzIGFzIGFrLCBfdXBkYXRlQmV6aWVyQ29udHJvbFBvaW50cyBhcyBhbCwgX2NvbXB1dGVTZWdtZW50cyBhcyBhbSwgX2JvdW5kU2VnbWVudHMgYXMgYW4sIF9zdGVwcGVkSW50ZXJwb2xhdGlvbiBhcyBhbywgX2JlemllckludGVycG9sYXRpb24gYXMgYXAsIF9wb2ludEluTGluZSBhcyBhcSwgX3N0ZXBwZWRMaW5lVG8gYXMgYXIsIF9iZXppZXJDdXJ2ZVRvIGFzIGFzLCBkcmF3UG9pbnQgYXMgYXQsIGFkZFJvdW5kZWRSZWN0UGF0aCBhcyBhdSwgdG9UUkJMIGFzIGF2LCB0b1RSQkxDb3JuZXJzIGFzIGF3LCBfYm91bmRTZWdtZW50IGFzIGF4LCBfbm9ybWFsaXplQW5nbGUgYXMgYXksIGdldFJ0bEFkYXB0ZXIgYXMgYXosIGlzQXJyYXkgYXMgYiwgdG9MaW5lSGVpZ2h0IGFzIGIwLCBQSVRBVSBhcyBiMSwgSU5GSU5JVFkgYXMgYjIsIFJBRF9QRVJfREVHIGFzIGIzLCBRVUFSVEVSX1BJIGFzIGI0LCBUV09fVEhJUkRTX1BJIGFzIGI1LCBfYW5nbGVEaWZmIGFzIGI2LCBjb2xvciBhcyBjLCBkZWZhdWx0cyBhcyBkLCBlZmZlY3RzIGFzIGUsIHJlc29sdmVPYmplY3RLZXkgYXMgZiwgaXNOdW1iZXJGaW5pdGUgYXMgZywgZGVmaW5lZCBhcyBoLCBpc09iamVjdCBhcyBpLCBjcmVhdGVDb250ZXh0IGFzIGosIGlzTnVsbE9yVW5kZWYgYXMgaywgbGlzdGVuQXJyYXlFdmVudHMgYXMgbCwgdG9QZXJjZW50YWdlIGFzIG0sIHRvRGltZW5zaW9uIGFzIG4sIGZvcm1hdE51bWJlciBhcyBvLCBfYW5nbGVCZXR3ZWVuIGFzIHAsIF9nZXRTdGFydEFuZENvdW50T2ZWaXNpYmxlUG9pbnRzIGFzIHEsIHJlcXVlc3RBbmltRnJhbWUgYXMgciwgc2lnbiBhcyBzLCB0b1JhZGlhbnMgYXMgdCwgdW5saXN0ZW5BcnJheUV2ZW50cyBhcyB1LCB2YWx1ZU9yRGVmYXVsdCBhcyB2LCBfc2NhbGVSYW5nZXNDaGFuZ2VkIGFzIHcsIGlzTnVtYmVyIGFzIHgsIF9wYXJzZU9iamVjdERhdGFSYWRpYWxTY2FsZSBhcyB5LCBnZXRSZWxhdGl2ZVBvc2l0aW9uIGFzIHogfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMuc2VnbWVudC5qcy5tYXBcbiIsIi8qIVxuICogQ2hhcnQuanMgdjQuMS4xXG4gKiBodHRwczovL3d3dy5jaGFydGpzLm9yZ1xuICogKGMpIDIwMjIgQ2hhcnQuanMgQ29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgciBhcyByZXF1ZXN0QW5pbUZyYW1lLCBhIGFzIHJlc29sdmUsIGUgYXMgZWZmZWN0cywgYyBhcyBjb2xvciwgaSBhcyBpc09iamVjdCwgZCBhcyBkZWZhdWx0cywgYiBhcyBpc0FycmF5LCB2IGFzIHZhbHVlT3JEZWZhdWx0LCB1IGFzIHVubGlzdGVuQXJyYXlFdmVudHMsIGwgYXMgbGlzdGVuQXJyYXlFdmVudHMsIGYgYXMgcmVzb2x2ZU9iamVjdEtleSwgZyBhcyBpc051bWJlckZpbml0ZSwgaCBhcyBkZWZpbmVkLCBzIGFzIHNpZ24sIGogYXMgY3JlYXRlQ29udGV4dCwgayBhcyBpc051bGxPclVuZGVmLCBfIGFzIF9hcnJheVVuaXF1ZSwgdCBhcyB0b1JhZGlhbnMsIG0gYXMgdG9QZXJjZW50YWdlLCBuIGFzIHRvRGltZW5zaW9uLCBUIGFzIFRBVSwgbyBhcyBmb3JtYXROdW1iZXIsIHAgYXMgX2FuZ2xlQmV0d2VlbiwgSCBhcyBIQUxGX1BJLCBQIGFzIFBJLCBxIGFzIF9nZXRTdGFydEFuZENvdW50T2ZWaXNpYmxlUG9pbnRzLCB3IGFzIF9zY2FsZVJhbmdlc0NoYW5nZWQsIHggYXMgaXNOdW1iZXIsIHkgYXMgX3BhcnNlT2JqZWN0RGF0YVJhZGlhbFNjYWxlLCB6IGFzIGdldFJlbGF0aXZlUG9zaXRpb24sIEEgYXMgX3Jsb29rdXBCeUtleSwgQiBhcyBfbG9va3VwQnlLZXksIEMgYXMgX2lzUG9pbnRJbkFyZWEsIEQgYXMgZ2V0QW5nbGVGcm9tUG9pbnQsIEUgYXMgdG9QYWRkaW5nLCBGIGFzIGVhY2gsIEcgYXMgZ2V0TWF4aW11bVNpemUsIEkgYXMgX2dldFBhcmVudE5vZGUsIEogYXMgcmVhZFVzZWRTaXplLCBLIGFzIHN1cHBvcnRzRXZlbnRMaXN0ZW5lck9wdGlvbnMsIEwgYXMgdGhyb3R0bGVkLCBNIGFzIF9pc0RvbVN1cHBvcnRlZCwgTiBhcyBfZmFjdG9yaXplLCBPIGFzIGZpbml0ZU9yRGVmYXVsdCwgUSBhcyBjYWxsYmFjaywgUiBhcyBfYWRkR3JhY2UsIFMgYXMgX2xpbWl0VmFsdWUsIFUgYXMgdG9EZWdyZWVzLCBWIGFzIF9tZWFzdXJlVGV4dCwgVyBhcyBfaW50MTZSYW5nZSwgWCBhcyBfYWxpZ25QaXhlbCwgWSBhcyBjbGlwQXJlYSwgWiBhcyByZW5kZXJUZXh0LCAkIGFzIHVuY2xpcEFyZWEsIGEwIGFzIHRvRm9udCwgYTEgYXMgX3RvTGVmdFJpZ2h0Q2VudGVyLCBhMiBhcyBfYWxpZ25TdGFydEVuZCwgYTMgYXMgb3ZlcnJpZGVzLCBhNCBhcyBtZXJnZSwgYTUgYXMgX2NhcGl0YWxpemUsIGE2IGFzIGRlc2NyaXB0b3JzLCBhNyBhcyBpc0Z1bmN0aW9uLCBhOCBhcyBfYXR0YWNoQ29udGV4dCwgYTkgYXMgX2NyZWF0ZVJlc29sdmVyLCBhYSBhcyBfZGVzY3JpcHRvcnMsIGFiIGFzIG1lcmdlSWYsIGFjIGFzIHVpZCwgYWQgYXMgZGVib3VuY2UsIGFlIGFzIHJldGluYVNjYWxlLCBhZiBhcyBjbGVhckNhbnZhcywgYWcgYXMgc2V0c0VxdWFsLCBhaCBhcyBfZWxlbWVudHNFcXVhbCwgYWkgYXMgX2lzQ2xpY2tFdmVudCwgYWogYXMgX2lzQmV0d2VlbiwgYWsgYXMgX3JlYWRWYWx1ZVRvUHJvcHMsIGFsIGFzIF91cGRhdGVCZXppZXJDb250cm9sUG9pbnRzLCBhbSBhcyBfY29tcHV0ZVNlZ21lbnRzLCBhbiBhcyBfYm91bmRTZWdtZW50cywgYW8gYXMgX3N0ZXBwZWRJbnRlcnBvbGF0aW9uLCBhcCBhcyBfYmV6aWVySW50ZXJwb2xhdGlvbiwgYXEgYXMgX3BvaW50SW5MaW5lLCBhciBhcyBfc3RlcHBlZExpbmVUbywgYXMgYXMgX2JlemllckN1cnZlVG8sIGF0IGFzIGRyYXdQb2ludCwgYXUgYXMgYWRkUm91bmRlZFJlY3RQYXRoLCBhdiBhcyB0b1RSQkwsIGF3IGFzIHRvVFJCTENvcm5lcnMsIGF4IGFzIF9ib3VuZFNlZ21lbnQsIGF5IGFzIF9ub3JtYWxpemVBbmdsZSwgYXogYXMgZ2V0UnRsQWRhcHRlciwgYUEgYXMgb3ZlcnJpZGVUZXh0RGlyZWN0aW9uLCBhQiBhcyBfdGV4dFgsIGFDIGFzIHJlc3RvcmVUZXh0RGlyZWN0aW9uLCBhRCBhcyBkcmF3UG9pbnRMZWdlbmQsIGFFIGFzIGRpc3RhbmNlQmV0d2VlblBvaW50cywgYUYgYXMgbm9vcCwgYUcgYXMgX3NldE1pbkFuZE1heEJ5S2V5LCBhSCBhcyBuaWNlTnVtLCBhSSBhcyBhbG1vc3RXaG9sZSwgYUogYXMgYWxtb3N0RXF1YWxzLCBhSyBhcyBfZGVjaW1hbFBsYWNlcywgYUwgYXMgVGlja3MsIGFNIGFzIGxvZzEwLCBhTiBhcyBfbG9uZ2VzdFRleHQsIGFPIGFzIF9maWx0ZXJCZXR3ZWVuLCBhUCBhcyBfbG9va3VwIH0gZnJvbSAnLi9jaHVua3MvaGVscGVycy5zZWdtZW50LmpzJztcbmV4cG9ydCB7IGFMIGFzIFRpY2tzLCBkIGFzIGRlZmF1bHRzIH0gZnJvbSAnLi9jaHVua3MvaGVscGVycy5zZWdtZW50LmpzJztcbmltcG9ydCAnQGt1cmtsZS9jb2xvcic7XG5cbmNsYXNzIEFuaW1hdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLl9yZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2hhcnRzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2xhc3REYXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbiBfbm90aWZ5KGNoYXJ0LCBhbmltcywgZGF0ZSwgdHlwZSkge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBhbmltcy5saXN0ZW5lcnNbdHlwZV07XG4gICAgICAgIGNvbnN0IG51bVN0ZXBzID0gYW5pbXMuZHVyYXRpb247XG4gICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKChmbik9PmZuKHtcbiAgICAgICAgICAgICAgICBjaGFydCxcbiAgICAgICAgICAgICAgICBpbml0aWFsOiBhbmltcy5pbml0aWFsLFxuICAgICAgICAgICAgICAgIG51bVN0ZXBzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwOiBNYXRoLm1pbihkYXRlIC0gYW5pbXMuc3RhcnQsIG51bVN0ZXBzKVxuICAgICAgICAgICAgfSkpO1xuICAgIH1cbiBfcmVmcmVzaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlcXVlc3QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVxdWVzdCA9IHJlcXVlc3RBbmltRnJhbWUuY2FsbCh3aW5kb3csICgpPT57XG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3J1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiBfdXBkYXRlKGRhdGUgPSBEYXRlLm5vdygpKSB7XG4gICAgICAgIGxldCByZW1haW5pbmcgPSAwO1xuICAgICAgICB0aGlzLl9jaGFydHMuZm9yRWFjaCgoYW5pbXMsIGNoYXJ0KT0+e1xuICAgICAgICAgICAgaWYgKCFhbmltcy5ydW5uaW5nIHx8ICFhbmltcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IGFuaW1zLml0ZW1zO1xuICAgICAgICAgICAgbGV0IGkgPSBpdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgbGV0IGRyYXcgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBpdGVtO1xuICAgICAgICAgICAgZm9yKDsgaSA+PSAwOyAtLWkpe1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5fYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLl90b3RhbCA+IGFuaW1zLmR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltcy5kdXJhdGlvbiA9IGl0ZW0uX3RvdGFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udGljayhkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgZHJhdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0gPSBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRyYXcpIHtcbiAgICAgICAgICAgICAgICBjaGFydC5kcmF3KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbm90aWZ5KGNoYXJ0LCBhbmltcywgZGF0ZSwgJ3Byb2dyZXNzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFuaW1zLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnkoY2hhcnQsIGFuaW1zLCBkYXRlLCAnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICBhbmltcy5pbml0aWFsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW1haW5pbmcgKz0gaXRlbXMubGVuZ3RoO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbGFzdERhdGUgPSBkYXRlO1xuICAgICAgICBpZiAocmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gX2dldEFuaW1zKGNoYXJ0KSB7XG4gICAgICAgIGNvbnN0IGNoYXJ0cyA9IHRoaXMuX2NoYXJ0cztcbiAgICAgICAgbGV0IGFuaW1zID0gY2hhcnRzLmdldChjaGFydCk7XG4gICAgICAgIGlmICghYW5pbXMpIHtcbiAgICAgICAgICAgIGFuaW1zID0ge1xuICAgICAgICAgICAgICAgIHJ1bm5pbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGluaXRpYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogW10sXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzOiBbXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjaGFydHMuc2V0KGNoYXJ0LCBhbmltcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuaW1zO1xuICAgIH1cbiBsaXN0ZW4oY2hhcnQsIGV2ZW50LCBjYikge1xuICAgICAgICB0aGlzLl9nZXRBbmltcyhjaGFydCkubGlzdGVuZXJzW2V2ZW50XS5wdXNoKGNiKTtcbiAgICB9XG4gYWRkKGNoYXJ0LCBpdGVtcykge1xuICAgICAgICBpZiAoIWl0ZW1zIHx8ICFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9nZXRBbmltcyhjaGFydCkuaXRlbXMucHVzaCguLi5pdGVtcyk7XG4gICAgfVxuIGhhcyhjaGFydCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0QW5pbXMoY2hhcnQpLml0ZW1zLmxlbmd0aCA+IDA7XG4gICAgfVxuIHN0YXJ0KGNoYXJ0KSB7XG4gICAgICAgIGNvbnN0IGFuaW1zID0gdGhpcy5fY2hhcnRzLmdldChjaGFydCk7XG4gICAgICAgIGlmICghYW5pbXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhbmltcy5ydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgYW5pbXMuc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICBhbmltcy5kdXJhdGlvbiA9IGFuaW1zLml0ZW1zLnJlZHVjZSgoYWNjLCBjdXIpPT5NYXRoLm1heChhY2MsIGN1ci5fZHVyYXRpb24pLCAwKTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuICAgIH1cbiAgICBydW5uaW5nKGNoYXJ0KSB7XG4gICAgICAgIGlmICghdGhpcy5fcnVubmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuaW1zID0gdGhpcy5fY2hhcnRzLmdldChjaGFydCk7XG4gICAgICAgIGlmICghYW5pbXMgfHwgIWFuaW1zLnJ1bm5pbmcgfHwgIWFuaW1zLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiBzdG9wKGNoYXJ0KSB7XG4gICAgICAgIGNvbnN0IGFuaW1zID0gdGhpcy5fY2hhcnRzLmdldChjaGFydCk7XG4gICAgICAgIGlmICghYW5pbXMgfHwgIWFuaW1zLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gYW5pbXMuaXRlbXM7XG4gICAgICAgIGxldCBpID0gaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgZm9yKDsgaSA+PSAwOyAtLWkpe1xuICAgICAgICAgICAgaXRlbXNbaV0uY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgYW5pbXMuaXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5fbm90aWZ5KGNoYXJ0LCBhbmltcywgRGF0ZS5ub3coKSwgJ2NvbXBsZXRlJyk7XG4gICAgfVxuIHJlbW92ZShjaGFydCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hhcnRzLmRlbGV0ZShjaGFydCk7XG4gICAgfVxufVxudmFyIGFuaW1hdG9yID0gLyogI19fUFVSRV9fICovIG5ldyBBbmltYXRvcigpO1xuXG5jb25zdCB0cmFuc3BhcmVudCA9ICd0cmFuc3BhcmVudCc7XG5jb25zdCBpbnRlcnBvbGF0b3JzID0ge1xuICAgIGJvb2xlYW4gKGZyb20sIHRvLCBmYWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIGZhY3RvciA+IDAuNSA/IHRvIDogZnJvbTtcbiAgICB9LFxuIGNvbG9yIChmcm9tLCB0bywgZmFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGMwID0gY29sb3IoZnJvbSB8fCB0cmFuc3BhcmVudCk7XG4gICAgICAgIGNvbnN0IGMxID0gYzAudmFsaWQgJiYgY29sb3IodG8gfHwgdHJhbnNwYXJlbnQpO1xuICAgICAgICByZXR1cm4gYzEgJiYgYzEudmFsaWQgPyBjMS5taXgoYzAsIGZhY3RvcikuaGV4U3RyaW5nKCkgOiB0bztcbiAgICB9LFxuICAgIG51bWJlciAoZnJvbSwgdG8sIGZhY3Rvcikge1xuICAgICAgICByZXR1cm4gZnJvbSArICh0byAtIGZyb20pICogZmFjdG9yO1xuICAgIH1cbn07XG5jbGFzcyBBbmltYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNmZywgdGFyZ2V0LCBwcm9wLCB0byl7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRhcmdldFtwcm9wXTtcbiAgICAgICAgdG8gPSByZXNvbHZlKFtcbiAgICAgICAgICAgIGNmZy50byxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgY3VycmVudFZhbHVlLFxuICAgICAgICAgICAgY2ZnLmZyb21cbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IGZyb20gPSByZXNvbHZlKFtcbiAgICAgICAgICAgIGNmZy5mcm9tLFxuICAgICAgICAgICAgY3VycmVudFZhbHVlLFxuICAgICAgICAgICAgdG9cbiAgICAgICAgXSk7XG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuX2ZuID0gY2ZnLmZuIHx8IGludGVycG9sYXRvcnNbY2ZnLnR5cGUgfHwgdHlwZW9mIGZyb21dO1xuICAgICAgICB0aGlzLl9lYXNpbmcgPSBlZmZlY3RzW2NmZy5lYXNpbmddIHx8IGVmZmVjdHMubGluZWFyO1xuICAgICAgICB0aGlzLl9zdGFydCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSArIChjZmcuZGVsYXkgfHwgMCkpO1xuICAgICAgICB0aGlzLl9kdXJhdGlvbiA9IHRoaXMuX3RvdGFsID0gTWF0aC5mbG9vcihjZmcuZHVyYXRpb24pO1xuICAgICAgICB0aGlzLl9sb29wID0gISFjZmcubG9vcDtcbiAgICAgICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLl9wcm9wID0gcHJvcDtcbiAgICAgICAgdGhpcy5fZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMuX3RvID0gdG87XG4gICAgICAgIHRoaXMuX3Byb21pc2VzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY3RpdmU7XG4gICAgfVxuICAgIHVwZGF0ZShjZmcsIHRvLCBkYXRlKSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeShmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLl90YXJnZXRbdGhpcy5fcHJvcF07XG4gICAgICAgICAgICBjb25zdCBlbGFwc2VkID0gZGF0ZSAtIHRoaXMuX3N0YXJ0O1xuICAgICAgICAgICAgY29uc3QgcmVtYWluID0gdGhpcy5fZHVyYXRpb24gLSBlbGFwc2VkO1xuICAgICAgICAgICAgdGhpcy5fc3RhcnQgPSBkYXRlO1xuICAgICAgICAgICAgdGhpcy5fZHVyYXRpb24gPSBNYXRoLmZsb29yKE1hdGgubWF4KHJlbWFpbiwgY2ZnLmR1cmF0aW9uKSk7XG4gICAgICAgICAgICB0aGlzLl90b3RhbCArPSBlbGFwc2VkO1xuICAgICAgICAgICAgdGhpcy5fbG9vcCA9ICEhY2ZnLmxvb3A7XG4gICAgICAgICAgICB0aGlzLl90byA9IHJlc29sdmUoW1xuICAgICAgICAgICAgICAgIGNmZy50byxcbiAgICAgICAgICAgICAgICB0byxcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgICAgICAgY2ZnLmZyb21cbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGhpcy5fZnJvbSA9IHJlc29sdmUoW1xuICAgICAgICAgICAgICAgIGNmZy5mcm9tLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICAgICAgICB0b1xuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLnRpY2soRGF0ZS5ub3coKSk7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGljayhkYXRlKSB7XG4gICAgICAgIGNvbnN0IGVsYXBzZWQgPSBkYXRlIC0gdGhpcy5fc3RhcnQ7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5fZHVyYXRpb247XG4gICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLl9wcm9wO1xuICAgICAgICBjb25zdCBmcm9tID0gdGhpcy5fZnJvbTtcbiAgICAgICAgY29uc3QgbG9vcCA9IHRoaXMuX2xvb3A7XG4gICAgICAgIGNvbnN0IHRvID0gdGhpcy5fdG87XG4gICAgICAgIGxldCBmYWN0b3I7XG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IGZyb20gIT09IHRvICYmIChsb29wIHx8IGVsYXBzZWQgPCBkdXJhdGlvbik7XG4gICAgICAgIGlmICghdGhpcy5fYWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLl90YXJnZXRbcHJvcF0gPSB0bztcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeSh0cnVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxhcHNlZCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3RhcmdldFtwcm9wXSA9IGZyb207XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZmFjdG9yID0gZWxhcHNlZCAvIGR1cmF0aW9uICUgMjtcbiAgICAgICAgZmFjdG9yID0gbG9vcCAmJiBmYWN0b3IgPiAxID8gMiAtIGZhY3RvciA6IGZhY3RvcjtcbiAgICAgICAgZmFjdG9yID0gdGhpcy5fZWFzaW5nKE1hdGgubWluKDEsIE1hdGgubWF4KDAsIGZhY3RvcikpKTtcbiAgICAgICAgdGhpcy5fdGFyZ2V0W3Byb3BdID0gdGhpcy5fZm4oZnJvbSwgdG8sIGZhY3Rvcik7XG4gICAgfVxuICAgIHdhaXQoKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gdGhpcy5fcHJvbWlzZXMgfHwgKHRoaXMuX3Byb21pc2VzID0gW10pO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKT0+e1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgIHJlalxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfbm90aWZ5KHJlc29sdmVkKSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHJlc29sdmVkID8gJ3JlcycgOiAncmVqJztcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLl9wcm9taXNlcyB8fCBbXTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHByb21pc2VzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHByb21pc2VzW2ldW21ldGhvZF0oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgQW5pbWF0aW9ucyB7XG4gICAgY29uc3RydWN0b3IoY2hhcnQsIGNvbmZpZyl7XG4gICAgICAgIHRoaXMuX2NoYXJ0ID0gY2hhcnQ7XG4gICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuY29uZmlndXJlKGNvbmZpZyk7XG4gICAgfVxuICAgIGNvbmZpZ3VyZShjb25maWcpIHtcbiAgICAgICAgaWYgKCFpc09iamVjdChjb25maWcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYW5pbWF0aW9uT3B0aW9ucyA9IE9iamVjdC5rZXlzKGRlZmF1bHRzLmFuaW1hdGlvbik7XG4gICAgICAgIGNvbnN0IGFuaW1hdGVkUHJvcHMgPSB0aGlzLl9wcm9wZXJ0aWVzO1xuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjb25maWcpLmZvckVhY2goKGtleSk9PntcbiAgICAgICAgICAgIGNvbnN0IGNmZyA9IGNvbmZpZ1trZXldO1xuICAgICAgICAgICAgaWYgKCFpc09iamVjdChjZmcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWQgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGFuaW1hdGlvbk9wdGlvbnMpe1xuICAgICAgICAgICAgICAgIHJlc29sdmVkW29wdGlvbl0gPSBjZmdbb3B0aW9uXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChpc0FycmF5KGNmZy5wcm9wZXJ0aWVzKSAmJiBjZmcucHJvcGVydGllcyB8fCBbXG4gICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICBdKS5mb3JFYWNoKChwcm9wKT0+e1xuICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBrZXkgfHwgIWFuaW1hdGVkUHJvcHMuaGFzKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGVkUHJvcHMuc2V0KHByb3AsIHJlc29sdmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuIF9hbmltYXRlT3B0aW9ucyh0YXJnZXQsIHZhbHVlcykge1xuICAgICAgICBjb25zdCBuZXdPcHRpb25zID0gdmFsdWVzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSByZXNvbHZlVGFyZ2V0T3B0aW9ucyh0YXJnZXQsIG5ld09wdGlvbnMpO1xuICAgICAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbmltYXRpb25zID0gdGhpcy5fY3JlYXRlQW5pbWF0aW9ucyhvcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgICAgICAgaWYgKG5ld09wdGlvbnMuJHNoYXJlZCkge1xuICAgICAgICAgICAgYXdhaXRBbGwodGFyZ2V0Lm9wdGlvbnMuJGFuaW1hdGlvbnMsIG5ld09wdGlvbnMpLnRoZW4oKCk9PntcbiAgICAgICAgICAgICAgICB0YXJnZXQub3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gICAgICAgICAgICB9LCAoKT0+e1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbnM7XG4gICAgfVxuIF9jcmVhdGVBbmltYXRpb25zKHRhcmdldCwgdmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGFuaW1hdGVkUHJvcHMgPSB0aGlzLl9wcm9wZXJ0aWVzO1xuICAgICAgICBjb25zdCBhbmltYXRpb25zID0gW107XG4gICAgICAgIGNvbnN0IHJ1bm5pbmcgPSB0YXJnZXQuJGFuaW1hdGlvbnMgfHwgKHRhcmdldC4kYW5pbWF0aW9ucyA9IHt9KTtcbiAgICAgICAgY29uc3QgcHJvcHMgPSBPYmplY3Qua2V5cyh2YWx1ZXMpO1xuICAgICAgICBjb25zdCBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGZvcihpID0gcHJvcHMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpe1xuICAgICAgICAgICAgY29uc3QgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgICAgICAgaWYgKHByb3AuY2hhckF0KDApID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb3B0aW9ucycpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zLnB1c2goLi4udGhpcy5fYW5pbWF0ZU9wdGlvbnModGFyZ2V0LCB2YWx1ZXMpKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW3Byb3BdO1xuICAgICAgICAgICAgbGV0IGFuaW1hdGlvbiA9IHJ1bm5pbmdbcHJvcF07XG4gICAgICAgICAgICBjb25zdCBjZmcgPSBhbmltYXRlZFByb3BzLmdldChwcm9wKTtcbiAgICAgICAgICAgIGlmIChhbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoY2ZnICYmIGFuaW1hdGlvbi5hY3RpdmUoKSkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24udXBkYXRlKGNmZywgdmFsdWUsIGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjZmcgfHwgIWNmZy5kdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVubmluZ1twcm9wXSA9IGFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb24oY2ZnLCB0YXJnZXQsIHByb3AsIHZhbHVlKTtcbiAgICAgICAgICAgIGFuaW1hdGlvbnMucHVzaChhbmltYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbmltYXRpb25zO1xuICAgIH1cbiB1cGRhdGUodGFyZ2V0LCB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Byb3BlcnRpZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHZhbHVlcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYW5pbWF0aW9ucyA9IHRoaXMuX2NyZWF0ZUFuaW1hdGlvbnModGFyZ2V0LCB2YWx1ZXMpO1xuICAgICAgICBpZiAoYW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFuaW1hdG9yLmFkZCh0aGlzLl9jaGFydCwgYW5pbWF0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGF3YWl0QWxsKGFuaW1hdGlvbnMsIHByb3BlcnRpZXMpIHtcbiAgICBjb25zdCBydW5uaW5nID0gW107XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3QgYW5pbSA9IGFuaW1hdGlvbnNba2V5c1tpXV07XG4gICAgICAgIGlmIChhbmltICYmIGFuaW0uYWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHJ1bm5pbmcucHVzaChhbmltLndhaXQoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHJ1bm5pbmcpO1xufVxuZnVuY3Rpb24gcmVzb2x2ZVRhcmdldE9wdGlvbnModGFyZ2V0LCBuZXdPcHRpb25zKSB7XG4gICAgaWYgKCFuZXdPcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG9wdGlvbnMgPSB0YXJnZXQub3B0aW9ucztcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgdGFyZ2V0Lm9wdGlvbnMgPSBuZXdPcHRpb25zO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvcHRpb25zLiRzaGFyZWQpIHtcbiAgICAgICAgdGFyZ2V0Lm9wdGlvbnMgPSBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucywge1xuICAgICAgICAgICAgJHNoYXJlZDogZmFsc2UsXG4gICAgICAgICAgICAkYW5pbWF0aW9uczoge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zO1xufVxuXG5mdW5jdGlvbiBzY2FsZUNsaXAoc2NhbGUsIGFsbG93ZWRPdmVyZmxvdykge1xuICAgIGNvbnN0IG9wdHMgPSBzY2FsZSAmJiBzY2FsZS5vcHRpb25zIHx8IHt9O1xuICAgIGNvbnN0IHJldmVyc2UgPSBvcHRzLnJldmVyc2U7XG4gICAgY29uc3QgbWluID0gb3B0cy5taW4gPT09IHVuZGVmaW5lZCA/IGFsbG93ZWRPdmVyZmxvdyA6IDA7XG4gICAgY29uc3QgbWF4ID0gb3B0cy5tYXggPT09IHVuZGVmaW5lZCA/IGFsbG93ZWRPdmVyZmxvdyA6IDA7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6IHJldmVyc2UgPyBtYXggOiBtaW4sXG4gICAgICAgIGVuZDogcmV2ZXJzZSA/IG1pbiA6IG1heFxuICAgIH07XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xpcCh4U2NhbGUsIHlTY2FsZSwgYWxsb3dlZE92ZXJmbG93KSB7XG4gICAgaWYgKGFsbG93ZWRPdmVyZmxvdyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB4ID0gc2NhbGVDbGlwKHhTY2FsZSwgYWxsb3dlZE92ZXJmbG93KTtcbiAgICBjb25zdCB5ID0gc2NhbGVDbGlwKHlTY2FsZSwgYWxsb3dlZE92ZXJmbG93KTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IHkuZW5kLFxuICAgICAgICByaWdodDogeC5lbmQsXG4gICAgICAgIGJvdHRvbTogeS5zdGFydCxcbiAgICAgICAgbGVmdDogeC5zdGFydFxuICAgIH07XG59XG5mdW5jdGlvbiB0b0NsaXAodmFsdWUpIHtcbiAgICBsZXQgdCwgciwgYiwgbDtcbiAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHQgPSB2YWx1ZS50b3A7XG4gICAgICAgIHIgPSB2YWx1ZS5yaWdodDtcbiAgICAgICAgYiA9IHZhbHVlLmJvdHRvbTtcbiAgICAgICAgbCA9IHZhbHVlLmxlZnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdCA9IHIgPSBiID0gbCA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IHQsXG4gICAgICAgIHJpZ2h0OiByLFxuICAgICAgICBib3R0b206IGIsXG4gICAgICAgIGxlZnQ6IGwsXG4gICAgICAgIGRpc2FibGVkOiB2YWx1ZSA9PT0gZmFsc2VcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0U29ydGVkRGF0YXNldEluZGljZXMoY2hhcnQsIGZpbHRlclZpc2libGUpIHtcbiAgICBjb25zdCBrZXlzID0gW107XG4gICAgY29uc3QgbWV0YXNldHMgPSBjaGFydC5fZ2V0U29ydGVkRGF0YXNldE1ldGFzKGZpbHRlclZpc2libGUpO1xuICAgIGxldCBpLCBpbGVuO1xuICAgIGZvcihpID0gMCwgaWxlbiA9IG1ldGFzZXRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgIGtleXMucHVzaChtZXRhc2V0c1tpXS5pbmRleCk7XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xufVxuZnVuY3Rpb24gYXBwbHlTdGFjayhzdGFjaywgdmFsdWUsIGRzSW5kZXgsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGtleXMgPSBzdGFjay5rZXlzO1xuICAgIGNvbnN0IHNpbmdsZU1vZGUgPSBvcHRpb25zLm1vZGUgPT09ICdzaW5nbGUnO1xuICAgIGxldCBpLCBpbGVuLCBkYXRhc2V0SW5kZXgsIG90aGVyVmFsdWU7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yKGkgPSAwLCBpbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICBkYXRhc2V0SW5kZXggPSAra2V5c1tpXTtcbiAgICAgICAgaWYgKGRhdGFzZXRJbmRleCA9PT0gZHNJbmRleCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBvdGhlclZhbHVlID0gc3RhY2sudmFsdWVzW2RhdGFzZXRJbmRleF07XG4gICAgICAgIGlmIChpc051bWJlckZpbml0ZShvdGhlclZhbHVlKSAmJiAoc2luZ2xlTW9kZSB8fCB2YWx1ZSA9PT0gMCB8fCBzaWduKHZhbHVlKSA9PT0gc2lnbihvdGhlclZhbHVlKSkpIHtcbiAgICAgICAgICAgIHZhbHVlICs9IG90aGVyVmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gY29udmVydE9iamVjdERhdGFUb0FycmF5KGRhdGEpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgY29uc3QgYWRhdGEgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICAgIGxldCBpLCBpbGVuLCBrZXk7XG4gICAgZm9yKGkgPSAwLCBpbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICBhZGF0YVtpXSA9IHtcbiAgICAgICAgICAgIHg6IGtleSxcbiAgICAgICAgICAgIHk6IGRhdGFba2V5XVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYWRhdGE7XG59XG5mdW5jdGlvbiBpc1N0YWNrZWQoc2NhbGUsIG1ldGEpIHtcbiAgICBjb25zdCBzdGFja2VkID0gc2NhbGUgJiYgc2NhbGUub3B0aW9ucy5zdGFja2VkO1xuICAgIHJldHVybiBzdGFja2VkIHx8IHN0YWNrZWQgPT09IHVuZGVmaW5lZCAmJiBtZXRhLnN0YWNrICE9PSB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBnZXRTdGFja0tleShpbmRleFNjYWxlLCB2YWx1ZVNjYWxlLCBtZXRhKSB7XG4gICAgcmV0dXJuIGAke2luZGV4U2NhbGUuaWR9LiR7dmFsdWVTY2FsZS5pZH0uJHttZXRhLnN0YWNrIHx8IG1ldGEudHlwZX1gO1xufVxuZnVuY3Rpb24gZ2V0VXNlckJvdW5kcyhzY2FsZSkge1xuICAgIGNvbnN0IHsgbWluICwgbWF4ICwgbWluRGVmaW5lZCAsIG1heERlZmluZWQgIH0gPSBzY2FsZS5nZXRVc2VyQm91bmRzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWluOiBtaW5EZWZpbmVkID8gbWluIDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLFxuICAgICAgICBtYXg6IG1heERlZmluZWQgPyBtYXggOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFlcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0T3JDcmVhdGVTdGFjayhzdGFja3MsIHN0YWNrS2V5LCBpbmRleFZhbHVlKSB7XG4gICAgY29uc3Qgc3ViU3RhY2sgPSBzdGFja3Nbc3RhY2tLZXldIHx8IChzdGFja3Nbc3RhY2tLZXldID0ge30pO1xuICAgIHJldHVybiBzdWJTdGFja1tpbmRleFZhbHVlXSB8fCAoc3ViU3RhY2tbaW5kZXhWYWx1ZV0gPSB7fSk7XG59XG5mdW5jdGlvbiBnZXRMYXN0SW5kZXhJblN0YWNrKHN0YWNrLCB2U2NhbGUsIHBvc2l0aXZlLCB0eXBlKSB7XG4gICAgZm9yIChjb25zdCBtZXRhIG9mIHZTY2FsZS5nZXRNYXRjaGluZ1Zpc2libGVNZXRhcyh0eXBlKS5yZXZlcnNlKCkpe1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0YWNrW21ldGEuaW5kZXhdO1xuICAgICAgICBpZiAocG9zaXRpdmUgJiYgdmFsdWUgPiAwIHx8ICFwb3NpdGl2ZSAmJiB2YWx1ZSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRhLmluZGV4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gdXBkYXRlU3RhY2tzKGNvbnRyb2xsZXIsIHBhcnNlZCkge1xuICAgIGNvbnN0IHsgY2hhcnQgLCBfY2FjaGVkTWV0YTogbWV0YSAgfSA9IGNvbnRyb2xsZXI7XG4gICAgY29uc3Qgc3RhY2tzID0gY2hhcnQuX3N0YWNrcyB8fCAoY2hhcnQuX3N0YWNrcyA9IHt9KTtcbiAgICBjb25zdCB7IGlTY2FsZSAsIHZTY2FsZSAsIGluZGV4OiBkYXRhc2V0SW5kZXggIH0gPSBtZXRhO1xuICAgIGNvbnN0IGlBeGlzID0gaVNjYWxlLmF4aXM7XG4gICAgY29uc3QgdkF4aXMgPSB2U2NhbGUuYXhpcztcbiAgICBjb25zdCBrZXkgPSBnZXRTdGFja0tleShpU2NhbGUsIHZTY2FsZSwgbWV0YSk7XG4gICAgY29uc3QgaWxlbiA9IHBhcnNlZC5sZW5ndGg7XG4gICAgbGV0IHN0YWNrO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkW2ldO1xuICAgICAgICBjb25zdCB7IFtpQXhpc106IGluZGV4ICwgW3ZBeGlzXTogdmFsdWUgIH0gPSBpdGVtO1xuICAgICAgICBjb25zdCBpdGVtU3RhY2tzID0gaXRlbS5fc3RhY2tzIHx8IChpdGVtLl9zdGFja3MgPSB7fSk7XG4gICAgICAgIHN0YWNrID0gaXRlbVN0YWNrc1t2QXhpc10gPSBnZXRPckNyZWF0ZVN0YWNrKHN0YWNrcywga2V5LCBpbmRleCk7XG4gICAgICAgIHN0YWNrW2RhdGFzZXRJbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgc3RhY2suX3RvcCA9IGdldExhc3RJbmRleEluU3RhY2soc3RhY2ssIHZTY2FsZSwgdHJ1ZSwgbWV0YS50eXBlKTtcbiAgICAgICAgc3RhY2suX2JvdHRvbSA9IGdldExhc3RJbmRleEluU3RhY2soc3RhY2ssIHZTY2FsZSwgZmFsc2UsIG1ldGEudHlwZSk7XG4gICAgICAgIGNvbnN0IHZpc3VhbFZhbHVlcyA9IHN0YWNrLl92aXN1YWxWYWx1ZXMgfHwgKHN0YWNrLl92aXN1YWxWYWx1ZXMgPSB7fSk7XG4gICAgICAgIHZpc3VhbFZhbHVlc1tkYXRhc2V0SW5kZXhdID0gdmFsdWU7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0Rmlyc3RTY2FsZUlkKGNoYXJ0LCBheGlzKSB7XG4gICAgY29uc3Qgc2NhbGVzID0gY2hhcnQuc2NhbGVzO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzY2FsZXMpLmZpbHRlcigoa2V5KT0+c2NhbGVzW2tleV0uYXhpcyA9PT0gYXhpcykuc2hpZnQoKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURhdGFzZXRDb250ZXh0KHBhcmVudCwgaW5kZXgpIHtcbiAgICByZXR1cm4gY3JlYXRlQ29udGV4dChwYXJlbnQsIHtcbiAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgZGF0YXNldDogdW5kZWZpbmVkLFxuICAgICAgICBkYXRhc2V0SW5kZXg6IGluZGV4LFxuICAgICAgICBpbmRleCxcbiAgICAgICAgbW9kZTogJ2RlZmF1bHQnLFxuICAgICAgICB0eXBlOiAnZGF0YXNldCdcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURhdGFDb250ZXh0KHBhcmVudCwgaW5kZXgsIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gY3JlYXRlQ29udGV4dChwYXJlbnQsIHtcbiAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgZGF0YUluZGV4OiBpbmRleCxcbiAgICAgICAgcGFyc2VkOiB1bmRlZmluZWQsXG4gICAgICAgIHJhdzogdW5kZWZpbmVkLFxuICAgICAgICBlbGVtZW50LFxuICAgICAgICBpbmRleCxcbiAgICAgICAgbW9kZTogJ2RlZmF1bHQnLFxuICAgICAgICB0eXBlOiAnZGF0YSdcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGNsZWFyU3RhY2tzKG1ldGEsIGl0ZW1zKSB7XG4gICAgY29uc3QgZGF0YXNldEluZGV4ID0gbWV0YS5jb250cm9sbGVyLmluZGV4O1xuICAgIGNvbnN0IGF4aXMgPSBtZXRhLnZTY2FsZSAmJiBtZXRhLnZTY2FsZS5heGlzO1xuICAgIGlmICghYXhpcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGl0ZW1zID0gaXRlbXMgfHwgbWV0YS5fcGFyc2VkO1xuICAgIGZvciAoY29uc3QgcGFyc2VkIG9mIGl0ZW1zKXtcbiAgICAgICAgY29uc3Qgc3RhY2tzID0gcGFyc2VkLl9zdGFja3M7XG4gICAgICAgIGlmICghc3RhY2tzIHx8IHN0YWNrc1theGlzXSA9PT0gdW5kZWZpbmVkIHx8IHN0YWNrc1theGlzXVtkYXRhc2V0SW5kZXhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgc3RhY2tzW2F4aXNdW2RhdGFzZXRJbmRleF07XG4gICAgICAgIGlmIChzdGFja3NbYXhpc10uX3Zpc3VhbFZhbHVlcyAhPT0gdW5kZWZpbmVkICYmIHN0YWNrc1theGlzXS5fdmlzdWFsVmFsdWVzW2RhdGFzZXRJbmRleF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVsZXRlIHN0YWNrc1theGlzXS5fdmlzdWFsVmFsdWVzW2RhdGFzZXRJbmRleF07XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBpc0RpcmVjdFVwZGF0ZU1vZGUgPSAobW9kZSk9Pm1vZGUgPT09ICdyZXNldCcgfHwgbW9kZSA9PT0gJ25vbmUnO1xuY29uc3QgY2xvbmVJZk5vdFNoYXJlZCA9IChjYWNoZWQsIHNoYXJlZCk9PnNoYXJlZCA/IGNhY2hlZCA6IE9iamVjdC5hc3NpZ24oe30sIGNhY2hlZCk7XG5jb25zdCBjcmVhdGVTdGFjayA9IChjYW5TdGFjaywgbWV0YSwgY2hhcnQpPT5jYW5TdGFjayAmJiAhbWV0YS5oaWRkZW4gJiYgbWV0YS5fc3RhY2tlZCAmJiB7XG4gICAgICAgIGtleXM6IGdldFNvcnRlZERhdGFzZXRJbmRpY2VzKGNoYXJ0LCB0cnVlKSxcbiAgICAgICAgdmFsdWVzOiBudWxsXG4gICAgfTtcbmNsYXNzIERhdGFzZXRDb250cm9sbGVyIHtcbiBzdGF0aWMgZGVmYXVsdHMgPSB7fTtcbiBzdGF0aWMgZGF0YXNldEVsZW1lbnRUeXBlID0gbnVsbDtcbiBzdGF0aWMgZGF0YUVsZW1lbnRUeXBlID0gbnVsbDtcbiBjb25zdHJ1Y3RvcihjaGFydCwgZGF0YXNldEluZGV4KXtcbiAgICAgICAgdGhpcy5jaGFydCA9IGNoYXJ0O1xuICAgICAgICB0aGlzLl9jdHggPSBjaGFydC5jdHg7XG4gICAgICAgIHRoaXMuaW5kZXggPSBkYXRhc2V0SW5kZXg7XG4gICAgICAgIHRoaXMuX2NhY2hlZERhdGFPcHRzID0ge307XG4gICAgICAgIHRoaXMuX2NhY2hlZE1ldGEgPSB0aGlzLmdldE1ldGEoKTtcbiAgICAgICAgdGhpcy5fdHlwZSA9IHRoaXMuX2NhY2hlZE1ldGEudHlwZTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy5fcGFyc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9vYmplY3REYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9zaGFyZWRPcHRpb25zID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9kcmF3U3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2RyYXdDb3VudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lbmFibGVPcHRpb25TaGFyaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3VwcG9ydHNEZWNpbWF0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJGNvbnRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3N5bmNMaXN0ID0gW107XG4gICAgICAgIHRoaXMuZGF0YXNldEVsZW1lbnRUeXBlID0gbmV3LnRhcmdldC5kYXRhc2V0RWxlbWVudFR5cGU7XG4gICAgICAgIHRoaXMuZGF0YUVsZW1lbnRUeXBlID0gbmV3LnRhcmdldC5kYXRhRWxlbWVudFR5cGU7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgICBpbml0aWFsaXplKCkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgdGhpcy5jb25maWd1cmUoKTtcbiAgICAgICAgdGhpcy5saW5rU2NhbGVzKCk7XG4gICAgICAgIG1ldGEuX3N0YWNrZWQgPSBpc1N0YWNrZWQobWV0YS52U2NhbGUsIG1ldGEpO1xuICAgICAgICB0aGlzLmFkZEVsZW1lbnRzKCk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZmlsbCAmJiAhdGhpcy5jaGFydC5pc1BsdWdpbkVuYWJsZWQoJ2ZpbGxlcicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJUcmllZCB0byB1c2UgdGhlICdmaWxsJyBvcHRpb24gd2l0aG91dCB0aGUgJ0ZpbGxlcicgcGx1Z2luIGVuYWJsZWQuIFBsZWFzZSBpbXBvcnQgYW5kIHJlZ2lzdGVyIHRoZSAnRmlsbGVyJyBwbHVnaW4gYW5kIG1ha2Ugc3VyZSBpdCBpcyBub3QgZGlzYWJsZWQgaW4gdGhlIG9wdGlvbnNcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlSW5kZXgoZGF0YXNldEluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmluZGV4ICE9PSBkYXRhc2V0SW5kZXgpIHtcbiAgICAgICAgICAgIGNsZWFyU3RhY2tzKHRoaXMuX2NhY2hlZE1ldGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5kZXggPSBkYXRhc2V0SW5kZXg7XG4gICAgfVxuICAgIGxpbmtTY2FsZXMoKSB7XG4gICAgICAgIGNvbnN0IGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgICAgIGNvbnN0IGRhdGFzZXQgPSB0aGlzLmdldERhdGFzZXQoKTtcbiAgICAgICAgY29uc3QgY2hvb3NlSWQgPSAoYXhpcywgeCwgeSwgcik9PmF4aXMgPT09ICd4JyA/IHggOiBheGlzID09PSAncicgPyByIDogeTtcbiAgICAgICAgY29uc3QgeGlkID0gbWV0YS54QXhpc0lEID0gdmFsdWVPckRlZmF1bHQoZGF0YXNldC54QXhpc0lELCBnZXRGaXJzdFNjYWxlSWQoY2hhcnQsICd4JykpO1xuICAgICAgICBjb25zdCB5aWQgPSBtZXRhLnlBeGlzSUQgPSB2YWx1ZU9yRGVmYXVsdChkYXRhc2V0LnlBeGlzSUQsIGdldEZpcnN0U2NhbGVJZChjaGFydCwgJ3knKSk7XG4gICAgICAgIGNvbnN0IHJpZCA9IG1ldGEuckF4aXNJRCA9IHZhbHVlT3JEZWZhdWx0KGRhdGFzZXQuckF4aXNJRCwgZ2V0Rmlyc3RTY2FsZUlkKGNoYXJ0LCAncicpKTtcbiAgICAgICAgY29uc3QgaW5kZXhBeGlzID0gbWV0YS5pbmRleEF4aXM7XG4gICAgICAgIGNvbnN0IGlpZCA9IG1ldGEuaUF4aXNJRCA9IGNob29zZUlkKGluZGV4QXhpcywgeGlkLCB5aWQsIHJpZCk7XG4gICAgICAgIGNvbnN0IHZpZCA9IG1ldGEudkF4aXNJRCA9IGNob29zZUlkKGluZGV4QXhpcywgeWlkLCB4aWQsIHJpZCk7XG4gICAgICAgIG1ldGEueFNjYWxlID0gdGhpcy5nZXRTY2FsZUZvcklkKHhpZCk7XG4gICAgICAgIG1ldGEueVNjYWxlID0gdGhpcy5nZXRTY2FsZUZvcklkKHlpZCk7XG4gICAgICAgIG1ldGEuclNjYWxlID0gdGhpcy5nZXRTY2FsZUZvcklkKHJpZCk7XG4gICAgICAgIG1ldGEuaVNjYWxlID0gdGhpcy5nZXRTY2FsZUZvcklkKGlpZCk7XG4gICAgICAgIG1ldGEudlNjYWxlID0gdGhpcy5nZXRTY2FsZUZvcklkKHZpZCk7XG4gICAgfVxuICAgIGdldERhdGFzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmRhdGEuZGF0YXNldHNbdGhpcy5pbmRleF07XG4gICAgfVxuICAgIGdldE1ldGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldERhdGFzZXRNZXRhKHRoaXMuaW5kZXgpO1xuICAgIH1cbiBnZXRTY2FsZUZvcklkKHNjYWxlSUQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnQuc2NhbGVzW3NjYWxlSURdO1xuICAgIH1cbiBfZ2V0T3RoZXJTY2FsZShzY2FsZSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgcmV0dXJuIHNjYWxlID09PSBtZXRhLmlTY2FsZSA/IG1ldGEudlNjYWxlIDogbWV0YS5pU2NhbGU7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLl91cGRhdGUoJ3Jlc2V0Jyk7XG4gICAgfVxuIF9kZXN0cm95KCkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RhdGEpIHtcbiAgICAgICAgICAgIHVubGlzdGVuQXJyYXlFdmVudHModGhpcy5fZGF0YSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGEuX3N0YWNrZWQpIHtcbiAgICAgICAgICAgIGNsZWFyU3RhY2tzKG1ldGEpO1xuICAgICAgICB9XG4gICAgfVxuIF9kYXRhQ2hlY2soKSB7XG4gICAgICAgIGNvbnN0IGRhdGFzZXQgPSB0aGlzLmdldERhdGFzZXQoKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRhdGFzZXQuZGF0YSB8fCAoZGF0YXNldC5kYXRhID0gW10pO1xuICAgICAgICBjb25zdCBfZGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgICAgIGlmIChpc09iamVjdChkYXRhKSkge1xuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IGNvbnZlcnRPYmplY3REYXRhVG9BcnJheShkYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChfZGF0YSAhPT0gZGF0YSkge1xuICAgICAgICAgICAgaWYgKF9kYXRhKSB7XG4gICAgICAgICAgICAgICAgdW5saXN0ZW5BcnJheUV2ZW50cyhfZGF0YSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgICAgICAgICAgICAgY2xlYXJTdGFja3MobWV0YSk7XG4gICAgICAgICAgICAgICAgbWV0YS5fcGFyc2VkID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuQXJyYXlFdmVudHMoZGF0YSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zeW5jTGlzdCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkRWxlbWVudHMoKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICB0aGlzLl9kYXRhQ2hlY2soKTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YXNldEVsZW1lbnRUeXBlKSB7XG4gICAgICAgICAgICBtZXRhLmRhdGFzZXQgPSBuZXcgdGhpcy5kYXRhc2V0RWxlbWVudFR5cGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBidWlsZE9yVXBkYXRlRWxlbWVudHMocmVzZXROZXdFbGVtZW50cykge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgZGF0YXNldCA9IHRoaXMuZ2V0RGF0YXNldCgpO1xuICAgICAgICBsZXQgc3RhY2tDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2RhdGFDaGVjaygpO1xuICAgICAgICBjb25zdCBvbGRTdGFja2VkID0gbWV0YS5fc3RhY2tlZDtcbiAgICAgICAgbWV0YS5fc3RhY2tlZCA9IGlzU3RhY2tlZChtZXRhLnZTY2FsZSwgbWV0YSk7XG4gICAgICAgIGlmIChtZXRhLnN0YWNrICE9PSBkYXRhc2V0LnN0YWNrKSB7XG4gICAgICAgICAgICBzdGFja0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2xlYXJTdGFja3MobWV0YSk7XG4gICAgICAgICAgICBtZXRhLnN0YWNrID0gZGF0YXNldC5zdGFjaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZXN5bmNFbGVtZW50cyhyZXNldE5ld0VsZW1lbnRzKTtcbiAgICAgICAgaWYgKHN0YWNrQ2hhbmdlZCB8fCBvbGRTdGFja2VkICE9PSBtZXRhLl9zdGFja2VkKSB7XG4gICAgICAgICAgICB1cGRhdGVTdGFja3ModGhpcywgbWV0YS5fcGFyc2VkKTtcbiAgICAgICAgfVxuICAgIH1cbiBjb25maWd1cmUoKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY2hhcnQuY29uZmlnO1xuICAgICAgICBjb25zdCBzY29wZUtleXMgPSBjb25maWcuZGF0YXNldFNjb3BlS2V5cyh0aGlzLl90eXBlKTtcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gY29uZmlnLmdldE9wdGlvblNjb3Blcyh0aGlzLmdldERhdGFzZXQoKSwgc2NvcGVLZXlzLCB0cnVlKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gY29uZmlnLmNyZWF0ZVJlc29sdmVyKHNjb3BlcywgdGhpcy5nZXRDb250ZXh0KCkpO1xuICAgICAgICB0aGlzLl9wYXJzaW5nID0gdGhpcy5vcHRpb25zLnBhcnNpbmc7XG4gICAgICAgIHRoaXMuX2NhY2hlZERhdGFPcHRzID0ge307XG4gICAgfVxuIHBhcnNlKHN0YXJ0LCBjb3VudCkge1xuICAgICAgICBjb25zdCB7IF9jYWNoZWRNZXRhOiBtZXRhICwgX2RhdGE6IGRhdGEgIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB7IGlTY2FsZSAsIF9zdGFja2VkICB9ID0gbWV0YTtcbiAgICAgICAgY29uc3QgaUF4aXMgPSBpU2NhbGUuYXhpcztcbiAgICAgICAgbGV0IHNvcnRlZCA9IHN0YXJ0ID09PSAwICYmIGNvdW50ID09PSBkYXRhLmxlbmd0aCA/IHRydWUgOiBtZXRhLl9zb3J0ZWQ7XG4gICAgICAgIGxldCBwcmV2ID0gc3RhcnQgPiAwICYmIG1ldGEuX3BhcnNlZFtzdGFydCAtIDFdO1xuICAgICAgICBsZXQgaSwgY3VyLCBwYXJzZWQ7XG4gICAgICAgIGlmICh0aGlzLl9wYXJzaW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgbWV0YS5fcGFyc2VkID0gZGF0YTtcbiAgICAgICAgICAgIG1ldGEuX3NvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBwYXJzZWQgPSBkYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkoZGF0YVtzdGFydF0pKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gdGhpcy5wYXJzZUFycmF5RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChkYXRhW3N0YXJ0XSkpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWQgPSB0aGlzLnBhcnNlT2JqZWN0RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWQgPSB0aGlzLnBhcnNlUHJpbWl0aXZlRGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNOb3RJbk9yZGVyQ29tcGFyZWRUb1ByZXYgPSAoKT0+Y3VyW2lBeGlzXSA9PT0gbnVsbCB8fCBwcmV2ICYmIGN1cltpQXhpc10gPCBwcmV2W2lBeGlzXTtcbiAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGNvdW50OyArK2kpe1xuICAgICAgICAgICAgICAgIG1ldGEuX3BhcnNlZFtpICsgc3RhcnRdID0gY3VyID0gcGFyc2VkW2ldO1xuICAgICAgICAgICAgICAgIGlmIChzb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm90SW5PcmRlckNvbXBhcmVkVG9QcmV2KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByZXYgPSBjdXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWV0YS5fc29ydGVkID0gc29ydGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc3RhY2tlZCkge1xuICAgICAgICAgICAgdXBkYXRlU3RhY2tzKHRoaXMsIHBhcnNlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gcGFyc2VQcmltaXRpdmVEYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgICAgICBjb25zdCB7IGlTY2FsZSAsIHZTY2FsZSAgfSA9IG1ldGE7XG4gICAgICAgIGNvbnN0IGlBeGlzID0gaVNjYWxlLmF4aXM7XG4gICAgICAgIGNvbnN0IHZBeGlzID0gdlNjYWxlLmF4aXM7XG4gICAgICAgIGNvbnN0IGxhYmVscyA9IGlTY2FsZS5nZXRMYWJlbHMoKTtcbiAgICAgICAgY29uc3Qgc2luZ2xlU2NhbGUgPSBpU2NhbGUgPT09IHZTY2FsZTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICAgICAgbGV0IGksIGlsZW4sIGluZGV4O1xuICAgICAgICBmb3IoaSA9IDAsIGlsZW4gPSBjb3VudDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBpbmRleCA9IGkgKyBzdGFydDtcbiAgICAgICAgICAgIHBhcnNlZFtpXSA9IHtcbiAgICAgICAgICAgICAgICBbaUF4aXNdOiBzaW5nbGVTY2FsZSB8fCBpU2NhbGUucGFyc2UobGFiZWxzW2luZGV4XSwgaW5kZXgpLFxuICAgICAgICAgICAgICAgIFt2QXhpc106IHZTY2FsZS5wYXJzZShkYXRhW2luZGV4XSwgaW5kZXgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfVxuIHBhcnNlQXJyYXlEYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgICAgICBjb25zdCB7IHhTY2FsZSAsIHlTY2FsZSAgfSA9IG1ldGE7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgICAgIGxldCBpLCBpbGVuLCBpbmRleCwgaXRlbTtcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gY291bnQ7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICAgICAgaW5kZXggPSBpICsgc3RhcnQ7XG4gICAgICAgICAgICBpdGVtID0gZGF0YVtpbmRleF07XG4gICAgICAgICAgICBwYXJzZWRbaV0gPSB7XG4gICAgICAgICAgICAgICAgeDogeFNjYWxlLnBhcnNlKGl0ZW1bMF0sIGluZGV4KSxcbiAgICAgICAgICAgICAgICB5OiB5U2NhbGUucGFyc2UoaXRlbVsxXSwgaW5kZXgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfVxuIHBhcnNlT2JqZWN0RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICAgICAgY29uc3QgeyB4U2NhbGUgLCB5U2NhbGUgIH0gPSBtZXRhO1xuICAgICAgICBjb25zdCB7IHhBeGlzS2V5ID0neCcgLCB5QXhpc0tleSA9J3knICB9ID0gdGhpcy5fcGFyc2luZztcbiAgICAgICAgY29uc3QgcGFyc2VkID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICAgICAgbGV0IGksIGlsZW4sIGluZGV4LCBpdGVtO1xuICAgICAgICBmb3IoaSA9IDAsIGlsZW4gPSBjb3VudDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBpbmRleCA9IGkgKyBzdGFydDtcbiAgICAgICAgICAgIGl0ZW0gPSBkYXRhW2luZGV4XTtcbiAgICAgICAgICAgIHBhcnNlZFtpXSA9IHtcbiAgICAgICAgICAgICAgICB4OiB4U2NhbGUucGFyc2UocmVzb2x2ZU9iamVjdEtleShpdGVtLCB4QXhpc0tleSksIGluZGV4KSxcbiAgICAgICAgICAgICAgICB5OiB5U2NhbGUucGFyc2UocmVzb2x2ZU9iamVjdEtleShpdGVtLCB5QXhpc0tleSksIGluZGV4KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH1cbiBnZXRQYXJzZWQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZE1ldGEuX3BhcnNlZFtpbmRleF07XG4gICAgfVxuIGdldERhdGFFbGVtZW50KGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRNZXRhLmRhdGFbaW5kZXhdO1xuICAgIH1cbiBhcHBseVN0YWNrKHNjYWxlLCBwYXJzZWQsIG1vZGUpIHtcbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZWRbc2NhbGUuYXhpc107XG4gICAgICAgIGNvbnN0IHN0YWNrID0ge1xuICAgICAgICAgICAga2V5czogZ2V0U29ydGVkRGF0YXNldEluZGljZXMoY2hhcnQsIHRydWUpLFxuICAgICAgICAgICAgdmFsdWVzOiBwYXJzZWQuX3N0YWNrc1tzY2FsZS5heGlzXS5fdmlzdWFsVmFsdWVzXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBhcHBseVN0YWNrKHN0YWNrLCB2YWx1ZSwgbWV0YS5pbmRleCwge1xuICAgICAgICAgICAgbW9kZVxuICAgICAgICB9KTtcbiAgICB9XG4gdXBkYXRlUmFuZ2VGcm9tUGFyc2VkKHJhbmdlLCBzY2FsZSwgcGFyc2VkLCBzdGFjaykge1xuICAgICAgICBjb25zdCBwYXJzZWRWYWx1ZSA9IHBhcnNlZFtzY2FsZS5heGlzXTtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VkVmFsdWUgPT09IG51bGwgPyBOYU4gOiBwYXJzZWRWYWx1ZTtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gc3RhY2sgJiYgcGFyc2VkLl9zdGFja3Nbc2NhbGUuYXhpc107XG4gICAgICAgIGlmIChzdGFjayAmJiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIHN0YWNrLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgICAgIHZhbHVlID0gYXBwbHlTdGFjayhzdGFjaywgcGFyc2VkVmFsdWUsIHRoaXMuX2NhY2hlZE1ldGEuaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJhbmdlLm1pbiA9IE1hdGgubWluKHJhbmdlLm1pbiwgdmFsdWUpO1xuICAgICAgICByYW5nZS5tYXggPSBNYXRoLm1heChyYW5nZS5tYXgsIHZhbHVlKTtcbiAgICB9XG4gZ2V0TWluTWF4KHNjYWxlLCBjYW5TdGFjaykge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgX3BhcnNlZCA9IG1ldGEuX3BhcnNlZDtcbiAgICAgICAgY29uc3Qgc29ydGVkID0gbWV0YS5fc29ydGVkICYmIHNjYWxlID09PSBtZXRhLmlTY2FsZTtcbiAgICAgICAgY29uc3QgaWxlbiA9IF9wYXJzZWQubGVuZ3RoO1xuICAgICAgICBjb25zdCBvdGhlclNjYWxlID0gdGhpcy5fZ2V0T3RoZXJTY2FsZShzY2FsZSk7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gY3JlYXRlU3RhY2soY2FuU3RhY2ssIG1ldGEsIHRoaXMuY2hhcnQpO1xuICAgICAgICBjb25zdCByYW5nZSA9IHtcbiAgICAgICAgICAgIG1pbjogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgICAgICAgICAgbWF4OiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFlcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgeyBtaW46IG90aGVyTWluICwgbWF4OiBvdGhlck1heCAgfSA9IGdldFVzZXJCb3VuZHMob3RoZXJTY2FsZSk7XG4gICAgICAgIGxldCBpLCBwYXJzZWQ7XG4gICAgICAgIGZ1bmN0aW9uIF9za2lwKCkge1xuICAgICAgICAgICAgcGFyc2VkID0gX3BhcnNlZFtpXTtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyVmFsdWUgPSBwYXJzZWRbb3RoZXJTY2FsZS5heGlzXTtcbiAgICAgICAgICAgIHJldHVybiAhaXNOdW1iZXJGaW5pdGUocGFyc2VkW3NjYWxlLmF4aXNdKSB8fCBvdGhlck1pbiA+IG90aGVyVmFsdWUgfHwgb3RoZXJNYXggPCBvdGhlclZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBpZiAoX3NraXAoKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSYW5nZUZyb21QYXJzZWQocmFuZ2UsIHNjYWxlLCBwYXJzZWQsIHN0YWNrKTtcbiAgICAgICAgICAgIGlmIChzb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc29ydGVkKSB7XG4gICAgICAgICAgICBmb3IoaSA9IGlsZW4gLSAxOyBpID49IDA7IC0taSl7XG4gICAgICAgICAgICAgICAgaWYgKF9za2lwKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmFuZ2VGcm9tUGFyc2VkKHJhbmdlLCBzY2FsZSwgcGFyc2VkLCBzdGFjayk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgIH1cbiAgICBnZXRBbGxQYXJzZWRWYWx1ZXMoc2NhbGUpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5fY2FjaGVkTWV0YS5fcGFyc2VkO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgbGV0IGksIGlsZW4sIHZhbHVlO1xuICAgICAgICBmb3IoaSA9IDAsIGlsZW4gPSBwYXJzZWQubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgIHZhbHVlID0gcGFyc2VkW2ldW3NjYWxlLmF4aXNdO1xuICAgICAgICAgICAgaWYgKGlzTnVtYmVyRmluaXRlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH1cbiBnZXRNYXhPdmVyZmxvdygpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiBnZXRMYWJlbEFuZFZhbHVlKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBjb25zdCBpU2NhbGUgPSBtZXRhLmlTY2FsZTtcbiAgICAgICAgY29uc3QgdlNjYWxlID0gbWV0YS52U2NhbGU7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHRoaXMuZ2V0UGFyc2VkKGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhYmVsOiBpU2NhbGUgPyAnJyArIGlTY2FsZS5nZXRMYWJlbEZvclZhbHVlKHBhcnNlZFtpU2NhbGUuYXhpc10pIDogJycsXG4gICAgICAgICAgICB2YWx1ZTogdlNjYWxlID8gJycgKyB2U2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWRbdlNjYWxlLmF4aXNdKSA6ICcnXG4gICAgICAgIH07XG4gICAgfVxuIF91cGRhdGUobW9kZSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgdGhpcy51cGRhdGUobW9kZSB8fCAnZGVmYXVsdCcpO1xuICAgICAgICBtZXRhLl9jbGlwID0gdG9DbGlwKHZhbHVlT3JEZWZhdWx0KHRoaXMub3B0aW9ucy5jbGlwLCBkZWZhdWx0Q2xpcChtZXRhLnhTY2FsZSwgbWV0YS55U2NhbGUsIHRoaXMuZ2V0TWF4T3ZlcmZsb3coKSkpKTtcbiAgICB9XG4gdXBkYXRlKG1vZGUpIHt9XG4gICAgZHJhdygpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IG1ldGEuZGF0YSB8fCBbXTtcbiAgICAgICAgY29uc3QgYXJlYSA9IGNoYXJ0LmNoYXJ0QXJlYTtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gW107XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fZHJhd1N0YXJ0IHx8IDA7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5fZHJhd0NvdW50IHx8IGVsZW1lbnRzLmxlbmd0aCAtIHN0YXJ0O1xuICAgICAgICBjb25zdCBkcmF3QWN0aXZlRWxlbWVudHNPblRvcCA9IHRoaXMub3B0aW9ucy5kcmF3QWN0aXZlRWxlbWVudHNPblRvcDtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmIChtZXRhLmRhdGFzZXQpIHtcbiAgICAgICAgICAgIG1ldGEuZGF0YXNldC5kcmF3KGN0eCwgYXJlYSwgc3RhcnQsIGNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IoaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgKytpKXtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmhpZGRlbikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuYWN0aXZlICYmIGRyYXdBY3RpdmVFbGVtZW50c09uVG9wKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZHJhdyhjdHgsIGFyZWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGFjdGl2ZS5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICBhY3RpdmVbaV0uZHJhdyhjdHgsIGFyZWEpO1xuICAgICAgICB9XG4gICAgfVxuIGdldFN0eWxlKGluZGV4LCBhY3RpdmUpIHtcbiAgICAgICAgY29uc3QgbW9kZSA9IGFjdGl2ZSA/ICdhY3RpdmUnIDogJ2RlZmF1bHQnO1xuICAgICAgICByZXR1cm4gaW5kZXggPT09IHVuZGVmaW5lZCAmJiB0aGlzLl9jYWNoZWRNZXRhLmRhdGFzZXQgPyB0aGlzLnJlc29sdmVEYXRhc2V0RWxlbWVudE9wdGlvbnMobW9kZSkgOiB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaW5kZXggfHwgMCwgbW9kZSk7XG4gICAgfVxuIGdldENvbnRleHQoaW5kZXgsIGFjdGl2ZSwgbW9kZSkge1xuICAgICAgICBjb25zdCBkYXRhc2V0ID0gdGhpcy5nZXREYXRhc2V0KCk7XG4gICAgICAgIGxldCBjb250ZXh0O1xuICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMuX2NhY2hlZE1ldGEuZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9jYWNoZWRNZXRhLmRhdGFbaW5kZXhdO1xuICAgICAgICAgICAgY29udGV4dCA9IGVsZW1lbnQuJGNvbnRleHQgfHwgKGVsZW1lbnQuJGNvbnRleHQgPSBjcmVhdGVEYXRhQ29udGV4dCh0aGlzLmdldENvbnRleHQoKSwgaW5kZXgsIGVsZW1lbnQpKTtcbiAgICAgICAgICAgIGNvbnRleHQucGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaW5kZXgpO1xuICAgICAgICAgICAgY29udGV4dC5yYXcgPSBkYXRhc2V0LmRhdGFbaW5kZXhdO1xuICAgICAgICAgICAgY29udGV4dC5pbmRleCA9IGNvbnRleHQuZGF0YUluZGV4ID0gaW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gdGhpcy4kY29udGV4dCB8fCAodGhpcy4kY29udGV4dCA9IGNyZWF0ZURhdGFzZXRDb250ZXh0KHRoaXMuY2hhcnQuZ2V0Q29udGV4dCgpLCB0aGlzLmluZGV4KSk7XG4gICAgICAgICAgICBjb250ZXh0LmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICAgICAgY29udGV4dC5pbmRleCA9IGNvbnRleHQuZGF0YXNldEluZGV4ID0gdGhpcy5pbmRleDtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmFjdGl2ZSA9ICEhYWN0aXZlO1xuICAgICAgICBjb250ZXh0Lm1vZGUgPSBtb2RlO1xuICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICB9XG4gcmVzb2x2ZURhdGFzZXRFbGVtZW50T3B0aW9ucyhtb2RlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNvbHZlRWxlbWVudE9wdGlvbnModGhpcy5kYXRhc2V0RWxlbWVudFR5cGUuaWQsIG1vZGUpO1xuICAgIH1cbiByZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGluZGV4LCBtb2RlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNvbHZlRWxlbWVudE9wdGlvbnModGhpcy5kYXRhRWxlbWVudFR5cGUuaWQsIG1vZGUsIGluZGV4KTtcbiAgICB9XG4gX3Jlc29sdmVFbGVtZW50T3B0aW9ucyhlbGVtZW50VHlwZSwgbW9kZSA9ICdkZWZhdWx0JywgaW5kZXgpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gbW9kZSA9PT0gJ2FjdGl2ZSc7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5fY2FjaGVkRGF0YU9wdHM7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gZWxlbWVudFR5cGUgKyAnLScgKyBtb2RlO1xuICAgICAgICBjb25zdCBjYWNoZWQgPSBjYWNoZVtjYWNoZUtleV07XG4gICAgICAgIGNvbnN0IHNoYXJpbmcgPSB0aGlzLmVuYWJsZU9wdGlvblNoYXJpbmcgJiYgZGVmaW5lZChpbmRleCk7XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjbG9uZUlmTm90U2hhcmVkKGNhY2hlZCwgc2hhcmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5jaGFydC5jb25maWc7XG4gICAgICAgIGNvbnN0IHNjb3BlS2V5cyA9IGNvbmZpZy5kYXRhc2V0RWxlbWVudFNjb3BlS2V5cyh0aGlzLl90eXBlLCBlbGVtZW50VHlwZSk7XG4gICAgICAgIGNvbnN0IHByZWZpeGVzID0gYWN0aXZlID8gW1xuICAgICAgICAgICAgYCR7ZWxlbWVudFR5cGV9SG92ZXJgLFxuICAgICAgICAgICAgJ2hvdmVyJyxcbiAgICAgICAgICAgIGVsZW1lbnRUeXBlLFxuICAgICAgICAgICAgJydcbiAgICAgICAgXSA6IFtcbiAgICAgICAgICAgIGVsZW1lbnRUeXBlLFxuICAgICAgICAgICAgJydcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gY29uZmlnLmdldE9wdGlvblNjb3Blcyh0aGlzLmdldERhdGFzZXQoKSwgc2NvcGVLZXlzKTtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhkZWZhdWx0cy5lbGVtZW50c1tlbGVtZW50VHlwZV0pO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gKCk9PnRoaXMuZ2V0Q29udGV4dChpbmRleCwgYWN0aXZlLCBtb2RlKTtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gY29uZmlnLnJlc29sdmVOYW1lZE9wdGlvbnMoc2NvcGVzLCBuYW1lcywgY29udGV4dCwgcHJlZml4ZXMpO1xuICAgICAgICBpZiAodmFsdWVzLiRzaGFyZWQpIHtcbiAgICAgICAgICAgIHZhbHVlcy4kc2hhcmVkID0gc2hhcmluZztcbiAgICAgICAgICAgIGNhY2hlW2NhY2hlS2V5XSA9IE9iamVjdC5mcmVlemUoY2xvbmVJZk5vdFNoYXJlZCh2YWx1ZXMsIHNoYXJpbmcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH1cbiBfcmVzb2x2ZUFuaW1hdGlvbnMoaW5kZXgsIHRyYW5zaXRpb24sIGFjdGl2ZSkge1xuICAgICAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5fY2FjaGVkRGF0YU9wdHM7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYGFuaW1hdGlvbi0ke3RyYW5zaXRpb259YDtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gY2FjaGVbY2FjaGVLZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAoY2hhcnQub3B0aW9ucy5hbmltYXRpb24gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNoYXJ0LmNvbmZpZztcbiAgICAgICAgICAgIGNvbnN0IHNjb3BlS2V5cyA9IGNvbmZpZy5kYXRhc2V0QW5pbWF0aW9uU2NvcGVLZXlzKHRoaXMuX3R5cGUsIHRyYW5zaXRpb24pO1xuICAgICAgICAgICAgY29uc3Qgc2NvcGVzID0gY29uZmlnLmdldE9wdGlvblNjb3Blcyh0aGlzLmdldERhdGFzZXQoKSwgc2NvcGVLZXlzKTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBjb25maWcuY3JlYXRlUmVzb2x2ZXIoc2NvcGVzLCB0aGlzLmdldENvbnRleHQoaW5kZXgsIGFjdGl2ZSwgdHJhbnNpdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbnMgPSBuZXcgQW5pbWF0aW9ucyhjaGFydCwgb3B0aW9ucyAmJiBvcHRpb25zLmFuaW1hdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLl9jYWNoZWFibGUpIHtcbiAgICAgICAgICAgIGNhY2hlW2NhY2hlS2V5XSA9IE9iamVjdC5mcmVlemUoYW5pbWF0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbnM7XG4gICAgfVxuIGdldFNoYXJlZE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMuJHNoYXJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFyZWRPcHRpb25zIHx8ICh0aGlzLl9zaGFyZWRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucykpO1xuICAgIH1cbiBpbmNsdWRlT3B0aW9ucyhtb2RlLCBzaGFyZWRPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAhc2hhcmVkT3B0aW9ucyB8fCBpc0RpcmVjdFVwZGF0ZU1vZGUobW9kZSkgfHwgdGhpcy5jaGFydC5fYW5pbWF0aW9uc0Rpc2FibGVkO1xuICAgIH1cbiBfZ2V0U2hhcmVkT3B0aW9ucyhzdGFydCwgbW9kZSkge1xuICAgICAgICBjb25zdCBmaXJzdE9wdHMgPSB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoc3RhcnQsIG1vZGUpO1xuICAgICAgICBjb25zdCBwcmV2aW91c2x5U2hhcmVkT3B0aW9ucyA9IHRoaXMuX3NoYXJlZE9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHNoYXJlZE9wdGlvbnMgPSB0aGlzLmdldFNoYXJlZE9wdGlvbnMoZmlyc3RPcHRzKTtcbiAgICAgICAgY29uc3QgaW5jbHVkZU9wdGlvbnMgPSB0aGlzLmluY2x1ZGVPcHRpb25zKG1vZGUsIHNoYXJlZE9wdGlvbnMpIHx8IHNoYXJlZE9wdGlvbnMgIT09IHByZXZpb3VzbHlTaGFyZWRPcHRpb25zO1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYXJlZE9wdGlvbnMoc2hhcmVkT3B0aW9ucywgbW9kZSwgZmlyc3RPcHRzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNoYXJlZE9wdGlvbnMsXG4gICAgICAgICAgICBpbmNsdWRlT3B0aW9uc1xuICAgICAgICB9O1xuICAgIH1cbiB1cGRhdGVFbGVtZW50KGVsZW1lbnQsIGluZGV4LCBwcm9wZXJ0aWVzLCBtb2RlKSB7XG4gICAgICAgIGlmIChpc0RpcmVjdFVwZGF0ZU1vZGUobW9kZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudCwgcHJvcGVydGllcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlQW5pbWF0aW9ucyhpbmRleCwgbW9kZSkudXBkYXRlKGVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgfVxuIHVwZGF0ZVNoYXJlZE9wdGlvbnMoc2hhcmVkT3B0aW9ucywgbW9kZSwgbmV3T3B0aW9ucykge1xuICAgICAgICBpZiAoc2hhcmVkT3B0aW9ucyAmJiAhaXNEaXJlY3RVcGRhdGVNb2RlKG1vZGUpKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlQW5pbWF0aW9ucyh1bmRlZmluZWQsIG1vZGUpLnVwZGF0ZShzaGFyZWRPcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiBfc2V0U3R5bGUoZWxlbWVudCwgaW5kZXgsIG1vZGUsIGFjdGl2ZSkge1xuICAgICAgICBlbGVtZW50LmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ2V0U3R5bGUoaW5kZXgsIGFjdGl2ZSk7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVBbmltYXRpb25zKGluZGV4LCBtb2RlLCBhY3RpdmUpLnVwZGF0ZShlbGVtZW50LCB7XG4gICAgICAgICAgICBvcHRpb25zOiAhYWN0aXZlICYmIHRoaXMuZ2V0U2hhcmVkT3B0aW9ucyhvcHRpb25zKSB8fCBvcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVIb3ZlclN0eWxlKGVsZW1lbnQsIGRhdGFzZXRJbmRleCwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5fc2V0U3R5bGUoZWxlbWVudCwgaW5kZXgsICdhY3RpdmUnLCBmYWxzZSk7XG4gICAgfVxuICAgIHNldEhvdmVyU3R5bGUoZWxlbWVudCwgZGF0YXNldEluZGV4LCBpbmRleCkge1xuICAgICAgICB0aGlzLl9zZXRTdHlsZShlbGVtZW50LCBpbmRleCwgJ2FjdGl2ZScsIHRydWUpO1xuICAgIH1cbiBfcmVtb3ZlRGF0YXNldEhvdmVyU3R5bGUoKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9jYWNoZWRNZXRhLmRhdGFzZXQ7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRTdHlsZShlbGVtZW50LCB1bmRlZmluZWQsICdhY3RpdmUnLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gX3NldERhdGFzZXRIb3ZlclN0eWxlKCkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fY2FjaGVkTWV0YS5kYXRhc2V0O1xuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5fc2V0U3R5bGUoZWxlbWVudCwgdW5kZWZpbmVkLCAnYWN0aXZlJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gX3Jlc3luY0VsZW1lbnRzKHJlc2V0TmV3RWxlbWVudHMpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5fY2FjaGVkTWV0YS5kYXRhO1xuICAgICAgICBmb3IgKGNvbnN0IFttZXRob2QsIGFyZzEsIGFyZzJdIG9mIHRoaXMuX3N5bmNMaXN0KXtcbiAgICAgICAgICAgIHRoaXNbbWV0aG9kXShhcmcxLCBhcmcyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zeW5jTGlzdCA9IFtdO1xuICAgICAgICBjb25zdCBudW1NZXRhID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBudW1EYXRhID0gZGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gTWF0aC5taW4obnVtRGF0YSwgbnVtTWV0YSk7XG4gICAgICAgIGlmIChjb3VudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJzZSgwLCBjb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bURhdGEgPiBudW1NZXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnNlcnRFbGVtZW50cyhudW1NZXRhLCBudW1EYXRhIC0gbnVtTWV0YSwgcmVzZXROZXdFbGVtZW50cyk7XG4gICAgICAgIH0gZWxzZSBpZiAobnVtRGF0YSA8IG51bU1ldGEpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnRzKG51bURhdGEsIG51bU1ldGEgLSBudW1EYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiBfaW5zZXJ0RWxlbWVudHMoc3RhcnQsIGNvdW50LCByZXNldE5ld0VsZW1lbnRzID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgZGF0YSA9IG1ldGEuZGF0YTtcbiAgICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyBjb3VudDtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGNvbnN0IG1vdmUgPSAoYXJyKT0+e1xuICAgICAgICAgICAgYXJyLmxlbmd0aCArPSBjb3VudDtcbiAgICAgICAgICAgIGZvcihpID0gYXJyLmxlbmd0aCAtIDE7IGkgPj0gZW5kOyBpLS0pe1xuICAgICAgICAgICAgICAgIGFycltpXSA9IGFycltpIC0gY291bnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBtb3ZlKGRhdGEpO1xuICAgICAgICBmb3IoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpe1xuICAgICAgICAgICAgZGF0YVtpXSA9IG5ldyB0aGlzLmRhdGFFbGVtZW50VHlwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9wYXJzaW5nKSB7XG4gICAgICAgICAgICBtb3ZlKG1ldGEuX3BhcnNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZShzdGFydCwgY291bnQpO1xuICAgICAgICBpZiAocmVzZXROZXdFbGVtZW50cykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50cyhkYXRhLCBzdGFydCwgY291bnQsICdyZXNldCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUVsZW1lbnRzKGVsZW1lbnQsIHN0YXJ0LCBjb3VudCwgbW9kZSkge31cbiBfcmVtb3ZlRWxlbWVudHMoc3RhcnQsIGNvdW50KSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBpZiAodGhpcy5fcGFyc2luZykge1xuICAgICAgICAgICAgY29uc3QgcmVtb3ZlZCA9IG1ldGEuX3BhcnNlZC5zcGxpY2Uoc3RhcnQsIGNvdW50KTtcbiAgICAgICAgICAgIGlmIChtZXRhLl9zdGFja2VkKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJTdGFja3MobWV0YSwgcmVtb3ZlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWV0YS5kYXRhLnNwbGljZShzdGFydCwgY291bnQpO1xuICAgIH1cbiBfc3luYyhhcmdzKSB7XG4gICAgICAgIGlmICh0aGlzLl9wYXJzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9zeW5jTGlzdC5wdXNoKGFyZ3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgW21ldGhvZCwgYXJnMSwgYXJnMl0gPSBhcmdzO1xuICAgICAgICAgICAgdGhpc1ttZXRob2RdKGFyZzEsIGFyZzIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhcnQuX2RhdGFDaGFuZ2VzLnB1c2goW1xuICAgICAgICAgICAgdGhpcy5pbmRleCxcbiAgICAgICAgICAgIC4uLmFyZ3NcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIF9vbkRhdGFQdXNoKCkge1xuICAgICAgICBjb25zdCBjb3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX3N5bmMoW1xuICAgICAgICAgICAgJ19pbnNlcnRFbGVtZW50cycsXG4gICAgICAgICAgICB0aGlzLmdldERhdGFzZXQoKS5kYXRhLmxlbmd0aCAtIGNvdW50LFxuICAgICAgICAgICAgY291bnRcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIF9vbkRhdGFQb3AoKSB7XG4gICAgICAgIHRoaXMuX3N5bmMoW1xuICAgICAgICAgICAgJ19yZW1vdmVFbGVtZW50cycsXG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRNZXRhLmRhdGEubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIF9vbkRhdGFTaGlmdCgpIHtcbiAgICAgICAgdGhpcy5fc3luYyhbXG4gICAgICAgICAgICAnX3JlbW92ZUVsZW1lbnRzJyxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAxXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBfb25EYXRhU3BsaWNlKHN0YXJ0LCBjb3VudCkge1xuICAgICAgICBpZiAoY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N5bmMoW1xuICAgICAgICAgICAgICAgICdfcmVtb3ZlRWxlbWVudHMnLFxuICAgICAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgICAgIGNvdW50XG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdDb3VudCA9IGFyZ3VtZW50cy5sZW5ndGggLSAyO1xuICAgICAgICBpZiAobmV3Q291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N5bmMoW1xuICAgICAgICAgICAgICAgICdfaW5zZXJ0RWxlbWVudHMnLFxuICAgICAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgICAgIG5ld0NvdW50XG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfb25EYXRhVW5zaGlmdCgpIHtcbiAgICAgICAgdGhpcy5fc3luYyhbXG4gICAgICAgICAgICAnX2luc2VydEVsZW1lbnRzJyxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgIF0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0QWxsU2NhbGVWYWx1ZXMoc2NhbGUsIHR5cGUpIHtcbiAgICBpZiAoIXNjYWxlLl9jYWNoZS4kYmFyKSB7XG4gICAgICAgIGNvbnN0IHZpc2libGVNZXRhcyA9IHNjYWxlLmdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKHR5cGUpO1xuICAgICAgICBsZXQgdmFsdWVzID0gW107XG4gICAgICAgIGZvcihsZXQgaSA9IDAsIGlsZW4gPSB2aXNpYmxlTWV0YXMubGVuZ3RoOyBpIDwgaWxlbjsgaSsrKXtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQodmlzaWJsZU1ldGFzW2ldLmNvbnRyb2xsZXIuZ2V0QWxsUGFyc2VkVmFsdWVzKHNjYWxlKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2NhbGUuX2NhY2hlLiRiYXIgPSBfYXJyYXlVbmlxdWUodmFsdWVzLnNvcnQoKGEsIGIpPT5hIC0gYikpO1xuICAgIH1cbiAgICByZXR1cm4gc2NhbGUuX2NhY2hlLiRiYXI7XG59XG4gZnVuY3Rpb24gY29tcHV0ZU1pblNhbXBsZVNpemUobWV0YSkge1xuICAgIGNvbnN0IHNjYWxlID0gbWV0YS5pU2NhbGU7XG4gICAgY29uc3QgdmFsdWVzID0gZ2V0QWxsU2NhbGVWYWx1ZXMoc2NhbGUsIG1ldGEudHlwZSk7XG4gICAgbGV0IG1pbiA9IHNjYWxlLl9sZW5ndGg7XG4gICAgbGV0IGksIGlsZW4sIGN1cnIsIHByZXY7XG4gICAgY29uc3QgdXBkYXRlTWluQW5kUHJldiA9ICgpPT57XG4gICAgICAgIGlmIChjdXJyID09PSAzMjc2NyB8fCBjdXJyID09PSAtMzI3NjgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmaW5lZChwcmV2KSkge1xuICAgICAgICAgICAgbWluID0gTWF0aC5taW4obWluLCBNYXRoLmFicyhjdXJyIC0gcHJldikgfHwgbWluKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2ID0gY3VycjtcbiAgICB9O1xuICAgIGZvcihpID0gMCwgaWxlbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICBjdXJyID0gc2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZXNbaV0pO1xuICAgICAgICB1cGRhdGVNaW5BbmRQcmV2KCk7XG4gICAgfVxuICAgIHByZXYgPSB1bmRlZmluZWQ7XG4gICAgZm9yKGkgPSAwLCBpbGVuID0gc2NhbGUudGlja3MubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgY3VyciA9IHNjYWxlLmdldFBpeGVsRm9yVGljayhpKTtcbiAgICAgICAgdXBkYXRlTWluQW5kUHJldigpO1xuICAgIH1cbiAgICByZXR1cm4gbWluO1xufVxuIGZ1bmN0aW9uIGNvbXB1dGVGaXRDYXRlZ29yeVRyYWl0cyhpbmRleCwgcnVsZXIsIG9wdGlvbnMsIHN0YWNrQ291bnQpIHtcbiAgICBjb25zdCB0aGlja25lc3MgPSBvcHRpb25zLmJhclRoaWNrbmVzcztcbiAgICBsZXQgc2l6ZSwgcmF0aW87XG4gICAgaWYgKGlzTnVsbE9yVW5kZWYodGhpY2tuZXNzKSkge1xuICAgICAgICBzaXplID0gcnVsZXIubWluICogb3B0aW9ucy5jYXRlZ29yeVBlcmNlbnRhZ2U7XG4gICAgICAgIHJhdGlvID0gb3B0aW9ucy5iYXJQZXJjZW50YWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNpemUgPSB0aGlja25lc3MgKiBzdGFja0NvdW50O1xuICAgICAgICByYXRpbyA9IDE7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNodW5rOiBzaXplIC8gc3RhY2tDb3VudCxcbiAgICAgICAgcmF0aW8sXG4gICAgICAgIHN0YXJ0OiBydWxlci5waXhlbHNbaW5kZXhdIC0gc2l6ZSAvIDJcbiAgICB9O1xufVxuIGZ1bmN0aW9uIGNvbXB1dGVGbGV4Q2F0ZWdvcnlUcmFpdHMoaW5kZXgsIHJ1bGVyLCBvcHRpb25zLCBzdGFja0NvdW50KSB7XG4gICAgY29uc3QgcGl4ZWxzID0gcnVsZXIucGl4ZWxzO1xuICAgIGNvbnN0IGN1cnIgPSBwaXhlbHNbaW5kZXhdO1xuICAgIGxldCBwcmV2ID0gaW5kZXggPiAwID8gcGl4ZWxzW2luZGV4IC0gMV0gOiBudWxsO1xuICAgIGxldCBuZXh0ID0gaW5kZXggPCBwaXhlbHMubGVuZ3RoIC0gMSA/IHBpeGVsc1tpbmRleCArIDFdIDogbnVsbDtcbiAgICBjb25zdCBwZXJjZW50ID0gb3B0aW9ucy5jYXRlZ29yeVBlcmNlbnRhZ2U7XG4gICAgaWYgKHByZXYgPT09IG51bGwpIHtcbiAgICAgICAgcHJldiA9IGN1cnIgLSAobmV4dCA9PT0gbnVsbCA/IHJ1bGVyLmVuZCAtIHJ1bGVyLnN0YXJ0IDogbmV4dCAtIGN1cnIpO1xuICAgIH1cbiAgICBpZiAobmV4dCA9PT0gbnVsbCkge1xuICAgICAgICBuZXh0ID0gY3VyciArIGN1cnIgLSBwcmV2O1xuICAgIH1cbiAgICBjb25zdCBzdGFydCA9IGN1cnIgLSAoY3VyciAtIE1hdGgubWluKHByZXYsIG5leHQpKSAvIDIgKiBwZXJjZW50O1xuICAgIGNvbnN0IHNpemUgPSBNYXRoLmFicyhuZXh0IC0gcHJldikgLyAyICogcGVyY2VudDtcbiAgICByZXR1cm4ge1xuICAgICAgICBjaHVuazogc2l6ZSAvIHN0YWNrQ291bnQsXG4gICAgICAgIHJhdGlvOiBvcHRpb25zLmJhclBlcmNlbnRhZ2UsXG4gICAgICAgIHN0YXJ0XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlRmxvYXRCYXIoZW50cnksIGl0ZW0sIHZTY2FsZSwgaSkge1xuICAgIGNvbnN0IHN0YXJ0VmFsdWUgPSB2U2NhbGUucGFyc2UoZW50cnlbMF0sIGkpO1xuICAgIGNvbnN0IGVuZFZhbHVlID0gdlNjYWxlLnBhcnNlKGVudHJ5WzFdLCBpKTtcbiAgICBjb25zdCBtaW4gPSBNYXRoLm1pbihzdGFydFZhbHVlLCBlbmRWYWx1ZSk7XG4gICAgY29uc3QgbWF4ID0gTWF0aC5tYXgoc3RhcnRWYWx1ZSwgZW5kVmFsdWUpO1xuICAgIGxldCBiYXJTdGFydCA9IG1pbjtcbiAgICBsZXQgYmFyRW5kID0gbWF4O1xuICAgIGlmIChNYXRoLmFicyhtaW4pID4gTWF0aC5hYnMobWF4KSkge1xuICAgICAgICBiYXJTdGFydCA9IG1heDtcbiAgICAgICAgYmFyRW5kID0gbWluO1xuICAgIH1cbiAgICBpdGVtW3ZTY2FsZS5heGlzXSA9IGJhckVuZDtcbiAgICBpdGVtLl9jdXN0b20gPSB7XG4gICAgICAgIGJhclN0YXJ0LFxuICAgICAgICBiYXJFbmQsXG4gICAgICAgIHN0YXJ0OiBzdGFydFZhbHVlLFxuICAgICAgICBlbmQ6IGVuZFZhbHVlLFxuICAgICAgICBtaW4sXG4gICAgICAgIG1heFxuICAgIH07XG59XG5mdW5jdGlvbiBwYXJzZVZhbHVlKGVudHJ5LCBpdGVtLCB2U2NhbGUsIGkpIHtcbiAgICBpZiAoaXNBcnJheShlbnRyeSkpIHtcbiAgICAgICAgcGFyc2VGbG9hdEJhcihlbnRyeSwgaXRlbSwgdlNjYWxlLCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtW3ZTY2FsZS5heGlzXSA9IHZTY2FsZS5wYXJzZShlbnRyeSwgaSk7XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufVxuZnVuY3Rpb24gcGFyc2VBcnJheU9yUHJpbWl0aXZlKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgIGNvbnN0IGlTY2FsZSA9IG1ldGEuaVNjYWxlO1xuICAgIGNvbnN0IHZTY2FsZSA9IG1ldGEudlNjYWxlO1xuICAgIGNvbnN0IGxhYmVscyA9IGlTY2FsZS5nZXRMYWJlbHMoKTtcbiAgICBjb25zdCBzaW5nbGVTY2FsZSA9IGlTY2FsZSA9PT0gdlNjYWxlO1xuICAgIGNvbnN0IHBhcnNlZCA9IFtdO1xuICAgIGxldCBpLCBpbGVuLCBpdGVtLCBlbnRyeTtcbiAgICBmb3IoaSA9IHN0YXJ0LCBpbGVuID0gc3RhcnQgKyBjb3VudDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgIGVudHJ5ID0gZGF0YVtpXTtcbiAgICAgICAgaXRlbSA9IHt9O1xuICAgICAgICBpdGVtW2lTY2FsZS5heGlzXSA9IHNpbmdsZVNjYWxlIHx8IGlTY2FsZS5wYXJzZShsYWJlbHNbaV0sIGkpO1xuICAgICAgICBwYXJzZWQucHVzaChwYXJzZVZhbHVlKGVudHJ5LCBpdGVtLCB2U2NhbGUsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZDtcbn1cbmZ1bmN0aW9uIGlzRmxvYXRCYXIoY3VzdG9tKSB7XG4gICAgcmV0dXJuIGN1c3RvbSAmJiBjdXN0b20uYmFyU3RhcnQgIT09IHVuZGVmaW5lZCAmJiBjdXN0b20uYmFyRW5kICE9PSB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBiYXJTaWduKHNpemUsIHZTY2FsZSwgYWN0dWFsQmFzZSkge1xuICAgIGlmIChzaXplICE9PSAwKSB7XG4gICAgICAgIHJldHVybiBzaWduKHNpemUpO1xuICAgIH1cbiAgICByZXR1cm4gKHZTY2FsZS5pc0hvcml6b250YWwoKSA/IDEgOiAtMSkgKiAodlNjYWxlLm1pbiA+PSBhY3R1YWxCYXNlID8gMSA6IC0xKTtcbn1cbmZ1bmN0aW9uIGJvcmRlclByb3BzKHByb3BlcnRpZXMpIHtcbiAgICBsZXQgcmV2ZXJzZSwgc3RhcnQsIGVuZCwgdG9wLCBib3R0b207XG4gICAgaWYgKHByb3BlcnRpZXMuaG9yaXpvbnRhbCkge1xuICAgICAgICByZXZlcnNlID0gcHJvcGVydGllcy5iYXNlID4gcHJvcGVydGllcy54O1xuICAgICAgICBzdGFydCA9ICdsZWZ0JztcbiAgICAgICAgZW5kID0gJ3JpZ2h0JztcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXZlcnNlID0gcHJvcGVydGllcy5iYXNlIDwgcHJvcGVydGllcy55O1xuICAgICAgICBzdGFydCA9ICdib3R0b20nO1xuICAgICAgICBlbmQgPSAndG9wJztcbiAgICB9XG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgdG9wID0gJ2VuZCc7XG4gICAgICAgIGJvdHRvbSA9ICdzdGFydCc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdG9wID0gJ3N0YXJ0JztcbiAgICAgICAgYm90dG9tID0gJ2VuZCc7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBlbmQsXG4gICAgICAgIHJldmVyc2UsXG4gICAgICAgIHRvcCxcbiAgICAgICAgYm90dG9tXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNldEJvcmRlclNraXBwZWQocHJvcGVydGllcywgb3B0aW9ucywgc3RhY2ssIGluZGV4KSB7XG4gICAgbGV0IGVkZ2UgPSBvcHRpb25zLmJvcmRlclNraXBwZWQ7XG4gICAgY29uc3QgcmVzID0ge307XG4gICAgaWYgKCFlZGdlKSB7XG4gICAgICAgIHByb3BlcnRpZXMuYm9yZGVyU2tpcHBlZCA9IHJlcztcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZWRnZSA9PT0gdHJ1ZSkge1xuICAgICAgICBwcm9wZXJ0aWVzLmJvcmRlclNraXBwZWQgPSB7XG4gICAgICAgICAgICB0b3A6IHRydWUsXG4gICAgICAgICAgICByaWdodDogdHJ1ZSxcbiAgICAgICAgICAgIGJvdHRvbTogdHJ1ZSxcbiAgICAgICAgICAgIGxlZnQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHN0YXJ0ICwgZW5kICwgcmV2ZXJzZSAsIHRvcCAsIGJvdHRvbSAgfSA9IGJvcmRlclByb3BzKHByb3BlcnRpZXMpO1xuICAgIGlmIChlZGdlID09PSAnbWlkZGxlJyAmJiBzdGFjaykge1xuICAgICAgICBwcm9wZXJ0aWVzLmVuYWJsZUJvcmRlclJhZGl1cyA9IHRydWU7XG4gICAgICAgIGlmICgoc3RhY2suX3RvcCB8fCAwKSA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgIGVkZ2UgPSB0b3A7XG4gICAgICAgIH0gZWxzZSBpZiAoKHN0YWNrLl9ib3R0b20gfHwgMCkgPT09IGluZGV4KSB7XG4gICAgICAgICAgICBlZGdlID0gYm90dG9tO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzW3BhcnNlRWRnZShib3R0b20sIHN0YXJ0LCBlbmQsIHJldmVyc2UpXSA9IHRydWU7XG4gICAgICAgICAgICBlZGdlID0gdG9wO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc1twYXJzZUVkZ2UoZWRnZSwgc3RhcnQsIGVuZCwgcmV2ZXJzZSldID0gdHJ1ZTtcbiAgICBwcm9wZXJ0aWVzLmJvcmRlclNraXBwZWQgPSByZXM7XG59XG5mdW5jdGlvbiBwYXJzZUVkZ2UoZWRnZSwgYSwgYiwgcmV2ZXJzZSkge1xuICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgIGVkZ2UgPSBzd2FwKGVkZ2UsIGEsIGIpO1xuICAgICAgICBlZGdlID0gc3RhcnRFbmQoZWRnZSwgYiwgYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWRnZSA9IHN0YXJ0RW5kKGVkZ2UsIGEsIGIpO1xuICAgIH1cbiAgICByZXR1cm4gZWRnZTtcbn1cbmZ1bmN0aW9uIHN3YXAob3JpZywgdjEsIHYyKSB7XG4gICAgcmV0dXJuIG9yaWcgPT09IHYxID8gdjIgOiBvcmlnID09PSB2MiA/IHYxIDogb3JpZztcbn1cbmZ1bmN0aW9uIHN0YXJ0RW5kKHYsIHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gdiA9PT0gJ3N0YXJ0JyA/IHN0YXJ0IDogdiA9PT0gJ2VuZCcgPyBlbmQgOiB2O1xufVxuZnVuY3Rpb24gc2V0SW5mbGF0ZUFtb3VudChwcm9wZXJ0aWVzLCB7IGluZmxhdGVBbW91bnQgIH0sIHJhdGlvKSB7XG4gICAgcHJvcGVydGllcy5pbmZsYXRlQW1vdW50ID0gaW5mbGF0ZUFtb3VudCA9PT0gJ2F1dG8nID8gcmF0aW8gPT09IDEgPyAwLjMzIDogMCA6IGluZmxhdGVBbW91bnQ7XG59XG5jbGFzcyBCYXJDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXIge1xuICAgIHN0YXRpYyBpZCA9ICdiYXInO1xuIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICAgICAgZGF0YXNldEVsZW1lbnRUeXBlOiBmYWxzZSxcbiAgICAgICAgZGF0YUVsZW1lbnRUeXBlOiAnYmFyJyxcbiAgICAgICAgY2F0ZWdvcnlQZXJjZW50YWdlOiAwLjgsXG4gICAgICAgIGJhclBlcmNlbnRhZ2U6IDAuOSxcbiAgICAgICAgZ3JvdXBlZDogdHJ1ZSxcbiAgICAgICAgYW5pbWF0aW9uczoge1xuICAgICAgICAgICAgbnVtYmVyczoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ3gnLFxuICAgICAgICAgICAgICAgICAgICAneScsXG4gICAgICAgICAgICAgICAgICAgICdiYXNlJyxcbiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyxcbiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCdcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuIHN0YXRpYyBvdmVycmlkZXMgPSB7XG4gICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgX2luZGV4Xzoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF92YWx1ZV86IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbGluZWFyJyxcbiAgICAgICAgICAgICAgICBiZWdpbkF0WmVybzogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiBwYXJzZVByaW1pdGl2ZURhdGEobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUFycmF5T3JQcmltaXRpdmUobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KTtcbiAgICB9XG4gcGFyc2VBcnJheURhdGEobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUFycmF5T3JQcmltaXRpdmUobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KTtcbiAgICB9XG4gcGFyc2VPYmplY3REYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgICAgICBjb25zdCB7IGlTY2FsZSAsIHZTY2FsZSAgfSA9IG1ldGE7XG4gICAgICAgIGNvbnN0IHsgeEF4aXNLZXkgPSd4JyAsIHlBeGlzS2V5ID0neScgIH0gPSB0aGlzLl9wYXJzaW5nO1xuICAgICAgICBjb25zdCBpQXhpc0tleSA9IGlTY2FsZS5heGlzID09PSAneCcgPyB4QXhpc0tleSA6IHlBeGlzS2V5O1xuICAgICAgICBjb25zdCB2QXhpc0tleSA9IHZTY2FsZS5heGlzID09PSAneCcgPyB4QXhpc0tleSA6IHlBeGlzS2V5O1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBbXTtcbiAgICAgICAgbGV0IGksIGlsZW4sIGl0ZW0sIG9iajtcbiAgICAgICAgZm9yKGkgPSBzdGFydCwgaWxlbiA9IHN0YXJ0ICsgY291bnQ7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICAgICAgb2JqID0gZGF0YVtpXTtcbiAgICAgICAgICAgIGl0ZW0gPSB7fTtcbiAgICAgICAgICAgIGl0ZW1baVNjYWxlLmF4aXNdID0gaVNjYWxlLnBhcnNlKHJlc29sdmVPYmplY3RLZXkob2JqLCBpQXhpc0tleSksIGkpO1xuICAgICAgICAgICAgcGFyc2VkLnB1c2gocGFyc2VWYWx1ZShyZXNvbHZlT2JqZWN0S2V5KG9iaiwgdkF4aXNLZXkpLCBpdGVtLCB2U2NhbGUsIGkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH1cbiB1cGRhdGVSYW5nZUZyb21QYXJzZWQocmFuZ2UsIHNjYWxlLCBwYXJzZWQsIHN0YWNrKSB7XG4gICAgICAgIHN1cGVyLnVwZGF0ZVJhbmdlRnJvbVBhcnNlZChyYW5nZSwgc2NhbGUsIHBhcnNlZCwgc3RhY2spO1xuICAgICAgICBjb25zdCBjdXN0b20gPSBwYXJzZWQuX2N1c3RvbTtcbiAgICAgICAgaWYgKGN1c3RvbSAmJiBzY2FsZSA9PT0gdGhpcy5fY2FjaGVkTWV0YS52U2NhbGUpIHtcbiAgICAgICAgICAgIHJhbmdlLm1pbiA9IE1hdGgubWluKHJhbmdlLm1pbiwgY3VzdG9tLm1pbik7XG4gICAgICAgICAgICByYW5nZS5tYXggPSBNYXRoLm1heChyYW5nZS5tYXgsIGN1c3RvbS5tYXgpO1xuICAgICAgICB9XG4gICAgfVxuIGdldE1heE92ZXJmbG93KCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgeyBpU2NhbGUgLCB2U2NhbGUgIH0gPSBtZXRhO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpbmRleCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbSA9IHBhcnNlZC5fY3VzdG9tO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGlzRmxvYXRCYXIoY3VzdG9tKSA/ICdbJyArIGN1c3RvbS5zdGFydCArICcsICcgKyBjdXN0b20uZW5kICsgJ10nIDogJycgKyB2U2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWRbdlNjYWxlLmF4aXNdKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhYmVsOiAnJyArIGlTY2FsZS5nZXRMYWJlbEZvclZhbHVlKHBhcnNlZFtpU2NhbGUuYXhpc10pLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdGhpcy5lbmFibGVPcHRpb25TaGFyaW5nID0gdHJ1ZTtcbiAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgbWV0YS5zdGFjayA9IHRoaXMuZ2V0RGF0YXNldCgpLnN0YWNrO1xuICAgIH1cbiAgICB1cGRhdGUobW9kZSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50cyhtZXRhLmRhdGEsIDAsIG1ldGEuZGF0YS5sZW5ndGgsIG1vZGUpO1xuICAgIH1cbiAgICB1cGRhdGVFbGVtZW50cyhiYXJzLCBzdGFydCwgY291bnQsIG1vZGUpIHtcbiAgICAgICAgY29uc3QgcmVzZXQgPSBtb2RlID09PSAncmVzZXQnO1xuICAgICAgICBjb25zdCB7IGluZGV4ICwgX2NhY2hlZE1ldGE6IHsgdlNjYWxlICB9ICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgYmFzZSA9IHZTY2FsZS5nZXRCYXNlUGl4ZWwoKTtcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbCA9IHZTY2FsZS5pc0hvcml6b250YWwoKTtcbiAgICAgICAgY29uc3QgcnVsZXIgPSB0aGlzLl9nZXRSdWxlcigpO1xuICAgICAgICBjb25zdCB7IHNoYXJlZE9wdGlvbnMgLCBpbmNsdWRlT3B0aW9ucyAgfSA9IHRoaXMuX2dldFNoYXJlZE9wdGlvbnMoc3RhcnQsIG1vZGUpO1xuICAgICAgICBmb3IobGV0IGkgPSBzdGFydDsgaSA8IHN0YXJ0ICsgY291bnQ7IGkrKyl7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpKTtcbiAgICAgICAgICAgIGNvbnN0IHZwaXhlbHMgPSByZXNldCB8fCBpc051bGxPclVuZGVmKHBhcnNlZFt2U2NhbGUuYXhpc10pID8ge1xuICAgICAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICAgICAgaGVhZDogYmFzZVxuICAgICAgICAgICAgfSA6IHRoaXMuX2NhbGN1bGF0ZUJhclZhbHVlUGl4ZWxzKGkpO1xuICAgICAgICAgICAgY29uc3QgaXBpeGVscyA9IHRoaXMuX2NhbGN1bGF0ZUJhckluZGV4UGl4ZWxzKGksIHJ1bGVyKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gKHBhcnNlZC5fc3RhY2tzIHx8IHt9KVt2U2NhbGUuYXhpc107XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgIGhvcml6b250YWwsXG4gICAgICAgICAgICAgICAgYmFzZTogdnBpeGVscy5iYXNlLFxuICAgICAgICAgICAgICAgIGVuYWJsZUJvcmRlclJhZGl1czogIXN0YWNrIHx8IGlzRmxvYXRCYXIocGFyc2VkLl9jdXN0b20pIHx8IGluZGV4ID09PSBzdGFjay5fdG9wIHx8IGluZGV4ID09PSBzdGFjay5fYm90dG9tLFxuICAgICAgICAgICAgICAgIHg6IGhvcml6b250YWwgPyB2cGl4ZWxzLmhlYWQgOiBpcGl4ZWxzLmNlbnRlcixcbiAgICAgICAgICAgICAgICB5OiBob3Jpem9udGFsID8gaXBpeGVscy5jZW50ZXIgOiB2cGl4ZWxzLmhlYWQsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBob3Jpem9udGFsID8gaXBpeGVscy5zaXplIDogTWF0aC5hYnModnBpeGVscy5zaXplKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogaG9yaXpvbnRhbCA/IE1hdGguYWJzKHZwaXhlbHMuc2l6ZSkgOiBpcGl4ZWxzLnNpemVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoaW5jbHVkZU9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm9wdGlvbnMgPSBzaGFyZWRPcHRpb25zIHx8IHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpLCBiYXJzW2ldLmFjdGl2ZSA/ICdhY3RpdmUnIDogbW9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gcHJvcGVydGllcy5vcHRpb25zIHx8IGJhcnNbaV0ub3B0aW9ucztcbiAgICAgICAgICAgIHNldEJvcmRlclNraXBwZWQocHJvcGVydGllcywgb3B0aW9ucywgc3RhY2ssIGluZGV4KTtcbiAgICAgICAgICAgIHNldEluZmxhdGVBbW91bnQocHJvcGVydGllcywgb3B0aW9ucywgcnVsZXIucmF0aW8pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KGJhcnNbaV0sIGksIHByb3BlcnRpZXMsIG1vZGUpO1xuICAgICAgICB9XG4gICAgfVxuIF9nZXRTdGFja3MobGFzdCwgZGF0YUluZGV4KSB7XG4gICAgICAgIGNvbnN0IHsgaVNjYWxlICB9ID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgbWV0YXNldHMgPSBpU2NhbGUuZ2V0TWF0Y2hpbmdWaXNpYmxlTWV0YXModGhpcy5fdHlwZSkuZmlsdGVyKChtZXRhKT0+bWV0YS5jb250cm9sbGVyLm9wdGlvbnMuZ3JvdXBlZCk7XG4gICAgICAgIGNvbnN0IHN0YWNrZWQgPSBpU2NhbGUub3B0aW9ucy5zdGFja2VkO1xuICAgICAgICBjb25zdCBzdGFja3MgPSBbXTtcbiAgICAgICAgY29uc3Qgc2tpcE51bGwgPSAobWV0YSk9PntcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IG1ldGEuY29udHJvbGxlci5nZXRQYXJzZWQoZGF0YUluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlZCAmJiBwYXJzZWRbbWV0YS52U2NhbGUuYXhpc107XG4gICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZih2YWwpIHx8IGlzTmFOKHZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBtZXRhIG9mIG1ldGFzZXRzKXtcbiAgICAgICAgICAgIGlmIChkYXRhSW5kZXggIT09IHVuZGVmaW5lZCAmJiBza2lwTnVsbChtZXRhKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YWNrZWQgPT09IGZhbHNlIHx8IHN0YWNrcy5pbmRleE9mKG1ldGEuc3RhY2spID09PSAtMSB8fCBzdGFja2VkID09PSB1bmRlZmluZWQgJiYgbWV0YS5zdGFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3RhY2tzLnB1c2gobWV0YS5zdGFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWV0YS5pbmRleCA9PT0gbGFzdCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghc3RhY2tzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3RhY2tzLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhY2tzO1xuICAgIH1cbiBfZ2V0U3RhY2tDb3VudChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0U3RhY2tzKHVuZGVmaW5lZCwgaW5kZXgpLmxlbmd0aDtcbiAgICB9XG4gX2dldFN0YWNrSW5kZXgoZGF0YXNldEluZGV4LCBuYW1lLCBkYXRhSW5kZXgpIHtcbiAgICAgICAgY29uc3Qgc3RhY2tzID0gdGhpcy5fZ2V0U3RhY2tzKGRhdGFzZXRJbmRleCwgZGF0YUluZGV4KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBuYW1lICE9PSB1bmRlZmluZWQgPyBzdGFja3MuaW5kZXhPZihuYW1lKSA6IC0xO1xuICAgICAgICByZXR1cm4gaW5kZXggPT09IC0xID8gc3RhY2tzLmxlbmd0aCAtIDEgOiBpbmRleDtcbiAgICB9XG4gX2dldFJ1bGVyKCkge1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgaVNjYWxlID0gbWV0YS5pU2NhbGU7XG4gICAgICAgIGNvbnN0IHBpeGVscyA9IFtdO1xuICAgICAgICBsZXQgaSwgaWxlbjtcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gbWV0YS5kYXRhLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBwaXhlbHMucHVzaChpU2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZSh0aGlzLmdldFBhcnNlZChpKVtpU2NhbGUuYXhpc10sIGkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYXJUaGlja25lc3MgPSBvcHRzLmJhclRoaWNrbmVzcztcbiAgICAgICAgY29uc3QgbWluID0gYmFyVGhpY2tuZXNzIHx8IGNvbXB1dGVNaW5TYW1wbGVTaXplKG1ldGEpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWluLFxuICAgICAgICAgICAgcGl4ZWxzLFxuICAgICAgICAgICAgc3RhcnQ6IGlTY2FsZS5fc3RhcnRQaXhlbCxcbiAgICAgICAgICAgIGVuZDogaVNjYWxlLl9lbmRQaXhlbCxcbiAgICAgICAgICAgIHN0YWNrQ291bnQ6IHRoaXMuX2dldFN0YWNrQ291bnQoKSxcbiAgICAgICAgICAgIHNjYWxlOiBpU2NhbGUsXG4gICAgICAgICAgICBncm91cGVkOiBvcHRzLmdyb3VwZWQsXG4gICAgICAgICAgICByYXRpbzogYmFyVGhpY2tuZXNzID8gMSA6IG9wdHMuY2F0ZWdvcnlQZXJjZW50YWdlICogb3B0cy5iYXJQZXJjZW50YWdlXG4gICAgICAgIH07XG4gICAgfVxuIF9jYWxjdWxhdGVCYXJWYWx1ZVBpeGVscyhpbmRleCkge1xuICAgICAgICBjb25zdCB7IF9jYWNoZWRNZXRhOiB7IHZTY2FsZSAsIF9zdGFja2VkICwgaW5kZXg6IGRhdGFzZXRJbmRleCAgfSAsIG9wdGlvbnM6IHsgYmFzZTogYmFzZVZhbHVlICwgbWluQmFyTGVuZ3RoICB9ICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgYWN0dWFsQmFzZSA9IGJhc2VWYWx1ZSB8fCAwO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpbmRleCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbSA9IHBhcnNlZC5fY3VzdG9tO1xuICAgICAgICBjb25zdCBmbG9hdGluZyA9IGlzRmxvYXRCYXIoY3VzdG9tKTtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VkW3ZTY2FsZS5heGlzXTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gMDtcbiAgICAgICAgbGV0IGxlbmd0aCA9IF9zdGFja2VkID8gdGhpcy5hcHBseVN0YWNrKHZTY2FsZSwgcGFyc2VkLCBfc3RhY2tlZCkgOiB2YWx1ZTtcbiAgICAgICAgbGV0IGhlYWQsIHNpemU7XG4gICAgICAgIGlmIChsZW5ndGggIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBzdGFydCA9IGxlbmd0aCAtIHZhbHVlO1xuICAgICAgICAgICAgbGVuZ3RoID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsb2F0aW5nKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGN1c3RvbS5iYXJTdGFydDtcbiAgICAgICAgICAgIGxlbmd0aCA9IGN1c3RvbS5iYXJFbmQgLSBjdXN0b20uYmFyU3RhcnQ7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IDAgJiYgc2lnbih2YWx1ZSkgIT09IHNpZ24oY3VzdG9tLmJhckVuZCkpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFydCArPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGFydFZhbHVlID0gIWlzTnVsbE9yVW5kZWYoYmFzZVZhbHVlKSAmJiAhZmxvYXRpbmcgPyBiYXNlVmFsdWUgOiBzdGFydDtcbiAgICAgICAgbGV0IGJhc2UgPSB2U2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShzdGFydFZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMuY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoaW5kZXgpKSB7XG4gICAgICAgICAgICBoZWFkID0gdlNjYWxlLmdldFBpeGVsRm9yVmFsdWUoc3RhcnQgKyBsZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVhZCA9IGJhc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2l6ZSA9IGhlYWQgLSBiYXNlO1xuICAgICAgICBpZiAoTWF0aC5hYnMoc2l6ZSkgPCBtaW5CYXJMZW5ndGgpIHtcbiAgICAgICAgICAgIHNpemUgPSBiYXJTaWduKHNpemUsIHZTY2FsZSwgYWN0dWFsQmFzZSkgKiBtaW5CYXJMZW5ndGg7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IGFjdHVhbEJhc2UpIHtcbiAgICAgICAgICAgICAgICBiYXNlIC09IHNpemUgLyAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3RhcnRQaXhlbCA9IHZTY2FsZS5nZXRQaXhlbEZvckRlY2ltYWwoMCk7XG4gICAgICAgICAgICBjb25zdCBlbmRQaXhlbCA9IHZTY2FsZS5nZXRQaXhlbEZvckRlY2ltYWwoMSk7XG4gICAgICAgICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbihzdGFydFBpeGVsLCBlbmRQaXhlbCk7XG4gICAgICAgICAgICBjb25zdCBtYXggPSBNYXRoLm1heChzdGFydFBpeGVsLCBlbmRQaXhlbCk7XG4gICAgICAgICAgICBiYXNlID0gTWF0aC5tYXgoTWF0aC5taW4oYmFzZSwgbWF4KSwgbWluKTtcbiAgICAgICAgICAgIGhlYWQgPSBiYXNlICsgc2l6ZTtcbiAgICAgICAgICAgIGlmIChfc3RhY2tlZCAmJiAhZmxvYXRpbmcpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWQuX3N0YWNrc1t2U2NhbGUuYXhpc10uX3Zpc3VhbFZhbHVlc1tkYXRhc2V0SW5kZXhdID0gdlNjYWxlLmdldFZhbHVlRm9yUGl4ZWwoaGVhZCkgLSB2U2NhbGUuZ2V0VmFsdWVGb3JQaXhlbChiYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYmFzZSA9PT0gdlNjYWxlLmdldFBpeGVsRm9yVmFsdWUoYWN0dWFsQmFzZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbGZHcmlkID0gc2lnbihzaXplKSAqIHZTY2FsZS5nZXRMaW5lV2lkdGhGb3JWYWx1ZShhY3R1YWxCYXNlKSAvIDI7XG4gICAgICAgICAgICBiYXNlICs9IGhhbGZHcmlkO1xuICAgICAgICAgICAgc2l6ZSAtPSBoYWxmR3JpZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICBoZWFkLFxuICAgICAgICAgICAgY2VudGVyOiBoZWFkICsgc2l6ZSAvIDJcbiAgICAgICAgfTtcbiAgICB9XG4gX2NhbGN1bGF0ZUJhckluZGV4UGl4ZWxzKGluZGV4LCBydWxlcikge1xuICAgICAgICBjb25zdCBzY2FsZSA9IHJ1bGVyLnNjYWxlO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBza2lwTnVsbCA9IG9wdGlvbnMuc2tpcE51bGw7XG4gICAgICAgIGNvbnN0IG1heEJhclRoaWNrbmVzcyA9IHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMubWF4QmFyVGhpY2tuZXNzLCBJbmZpbml0eSk7XG4gICAgICAgIGxldCBjZW50ZXIsIHNpemU7XG4gICAgICAgIGlmIChydWxlci5ncm91cGVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFja0NvdW50ID0gc2tpcE51bGwgPyB0aGlzLl9nZXRTdGFja0NvdW50KGluZGV4KSA6IHJ1bGVyLnN0YWNrQ291bnQ7XG4gICAgICAgICAgICBjb25zdCByYW5nZSA9IG9wdGlvbnMuYmFyVGhpY2tuZXNzID09PSAnZmxleCcgPyBjb21wdXRlRmxleENhdGVnb3J5VHJhaXRzKGluZGV4LCBydWxlciwgb3B0aW9ucywgc3RhY2tDb3VudCkgOiBjb21wdXRlRml0Q2F0ZWdvcnlUcmFpdHMoaW5kZXgsIHJ1bGVyLCBvcHRpb25zLCBzdGFja0NvdW50KTtcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrSW5kZXggPSB0aGlzLl9nZXRTdGFja0luZGV4KHRoaXMuaW5kZXgsIHRoaXMuX2NhY2hlZE1ldGEuc3RhY2ssIHNraXBOdWxsID8gaW5kZXggOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgY2VudGVyID0gcmFuZ2Uuc3RhcnQgKyByYW5nZS5jaHVuayAqIHN0YWNrSW5kZXggKyByYW5nZS5jaHVuayAvIDI7XG4gICAgICAgICAgICBzaXplID0gTWF0aC5taW4obWF4QmFyVGhpY2tuZXNzLCByYW5nZS5jaHVuayAqIHJhbmdlLnJhdGlvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNlbnRlciA9IHNjYWxlLmdldFBpeGVsRm9yVmFsdWUodGhpcy5nZXRQYXJzZWQoaW5kZXgpW3NjYWxlLmF4aXNdLCBpbmRleCk7XG4gICAgICAgICAgICBzaXplID0gTWF0aC5taW4obWF4QmFyVGhpY2tuZXNzLCBydWxlci5taW4gKiBydWxlci5yYXRpbyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJhc2U6IGNlbnRlciAtIHNpemUgLyAyLFxuICAgICAgICAgICAgaGVhZDogY2VudGVyICsgc2l6ZSAvIDIsXG4gICAgICAgICAgICBjZW50ZXIsXG4gICAgICAgICAgICBzaXplXG4gICAgICAgIH07XG4gICAgfVxuICAgIGRyYXcoKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBjb25zdCB2U2NhbGUgPSBtZXRhLnZTY2FsZTtcbiAgICAgICAgY29uc3QgcmVjdHMgPSBtZXRhLmRhdGE7XG4gICAgICAgIGNvbnN0IGlsZW4gPSByZWN0cy5sZW5ndGg7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yKDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRQYXJzZWQoaSlbdlNjYWxlLmF4aXNdICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVjdHNbaV0uZHJhdyh0aGlzLl9jdHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBCdWJibGVDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXIge1xuICAgIHN0YXRpYyBpZCA9ICdidWJibGUnO1xuIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICAgICAgZGF0YXNldEVsZW1lbnRUeXBlOiBmYWxzZSxcbiAgICAgICAgZGF0YUVsZW1lbnRUeXBlOiAncG9pbnQnLFxuICAgICAgICBhbmltYXRpb25zOiB7XG4gICAgICAgICAgICBudW1iZXJzOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczogW1xuICAgICAgICAgICAgICAgICAgICAneCcsXG4gICAgICAgICAgICAgICAgICAgICd5JyxcbiAgICAgICAgICAgICAgICAgICAgJ2JvcmRlcldpZHRoJyxcbiAgICAgICAgICAgICAgICAgICAgJ3JhZGl1cydcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuIHN0YXRpYyBvdmVycmlkZXMgPSB7XG4gICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lYXInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lYXInXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlT3B0aW9uU2hhcmluZyA9IHRydWU7XG4gICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgICB9XG4gcGFyc2VQcmltaXRpdmVEYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBzdXBlci5wYXJzZVByaW1pdGl2ZURhdGEobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHBhcnNlZC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBwYXJzZWRbaV0uX2N1c3RvbSA9IHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpICsgc3RhcnQpLnJhZGl1cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH1cbiBwYXJzZUFycmF5RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gc3VwZXIucGFyc2VBcnJheURhdGEobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHBhcnNlZC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZGF0YVtzdGFydCArIGldO1xuICAgICAgICAgICAgcGFyc2VkW2ldLl9jdXN0b20gPSB2YWx1ZU9yRGVmYXVsdChpdGVtWzJdLCB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSArIHN0YXJ0KS5yYWRpdXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfVxuIHBhcnNlT2JqZWN0RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gc3VwZXIucGFyc2VPYmplY3REYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCk7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwYXJzZWQubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGRhdGFbc3RhcnQgKyBpXTtcbiAgICAgICAgICAgIHBhcnNlZFtpXS5fY3VzdG9tID0gdmFsdWVPckRlZmF1bHQoaXRlbSAmJiBpdGVtLnIgJiYgK2l0ZW0uciwgdGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGkgKyBzdGFydCkucmFkaXVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH1cbiBnZXRNYXhPdmVyZmxvdygpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2NhY2hlZE1ldGEuZGF0YTtcbiAgICAgICAgbGV0IG1heCA9IDA7XG4gICAgICAgIGZvcihsZXQgaSA9IGRhdGEubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpe1xuICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBkYXRhW2ldLnNpemUodGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGkpKSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXggPiAwICYmIG1heDtcbiAgICB9XG4gZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgbGFiZWxzID0gdGhpcy5jaGFydC5kYXRhLmxhYmVscyB8fCBbXTtcbiAgICAgICAgY29uc3QgeyB4U2NhbGUgLCB5U2NhbGUgIH0gPSBtZXRhO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpbmRleCk7XG4gICAgICAgIGNvbnN0IHggPSB4U2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWQueCk7XG4gICAgICAgIGNvbnN0IHkgPSB5U2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWQueSk7XG4gICAgICAgIGNvbnN0IHIgPSBwYXJzZWQuX2N1c3RvbTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbHNbaW5kZXhdIHx8ICcnLFxuICAgICAgICAgICAgdmFsdWU6ICcoJyArIHggKyAnLCAnICsgeSArIChyID8gJywgJyArIHIgOiAnJykgKyAnKSdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdXBkYXRlKG1vZGUpIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5fY2FjaGVkTWV0YS5kYXRhO1xuICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRzKHBvaW50cywgMCwgcG9pbnRzLmxlbmd0aCwgbW9kZSk7XG4gICAgfVxuICAgIHVwZGF0ZUVsZW1lbnRzKHBvaW50cywgc3RhcnQsIGNvdW50LCBtb2RlKSB7XG4gICAgICAgIGNvbnN0IHJlc2V0ID0gbW9kZSA9PT0gJ3Jlc2V0JztcbiAgICAgICAgY29uc3QgeyBpU2NhbGUgLCB2U2NhbGUgIH0gPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBjb25zdCB7IHNoYXJlZE9wdGlvbnMgLCBpbmNsdWRlT3B0aW9ucyAgfSA9IHRoaXMuX2dldFNoYXJlZE9wdGlvbnMoc3RhcnQsIG1vZGUpO1xuICAgICAgICBjb25zdCBpQXhpcyA9IGlTY2FsZS5heGlzO1xuICAgICAgICBjb25zdCB2QXhpcyA9IHZTY2FsZS5heGlzO1xuICAgICAgICBmb3IobGV0IGkgPSBzdGFydDsgaSA8IHN0YXJ0ICsgY291bnQ7IGkrKyl7XG4gICAgICAgICAgICBjb25zdCBwb2ludCA9IHBvaW50c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9ICFyZXNldCAmJiB0aGlzLmdldFBhcnNlZChpKTtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGlQaXhlbCA9IHByb3BlcnRpZXNbaUF4aXNdID0gcmVzZXQgPyBpU2NhbGUuZ2V0UGl4ZWxGb3JEZWNpbWFsKDAuNSkgOiBpU2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShwYXJzZWRbaUF4aXNdKTtcbiAgICAgICAgICAgIGNvbnN0IHZQaXhlbCA9IHByb3BlcnRpZXNbdkF4aXNdID0gcmVzZXQgPyB2U2NhbGUuZ2V0QmFzZVBpeGVsKCkgOiB2U2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShwYXJzZWRbdkF4aXNdKTtcbiAgICAgICAgICAgIHByb3BlcnRpZXMuc2tpcCA9IGlzTmFOKGlQaXhlbCkgfHwgaXNOYU4odlBpeGVsKTtcbiAgICAgICAgICAgIGlmIChpbmNsdWRlT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMub3B0aW9ucyA9IHNoYXJlZE9wdGlvbnMgfHwgdGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGksIHBvaW50LmFjdGl2ZSA/ICdhY3RpdmUnIDogbW9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMub3B0aW9ucy5yYWRpdXMgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudChwb2ludCwgaSwgcHJvcGVydGllcywgbW9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gcmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpbmRleCwgbW9kZSkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpbmRleCk7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBzdXBlci5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGluZGV4LCBtb2RlKTtcbiAgICAgICAgaWYgKHZhbHVlcy4kc2hhcmVkKSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSBPYmplY3QuYXNzaWduKHt9LCB2YWx1ZXMsIHtcbiAgICAgICAgICAgICAgICAkc2hhcmVkOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmFkaXVzID0gdmFsdWVzLnJhZGl1cztcbiAgICAgICAgaWYgKG1vZGUgIT09ICdhY3RpdmUnKSB7XG4gICAgICAgICAgICB2YWx1ZXMucmFkaXVzID0gMDtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXMucmFkaXVzICs9IHZhbHVlT3JEZWZhdWx0KHBhcnNlZCAmJiBwYXJzZWQuX2N1c3RvbSwgcmFkaXVzKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFJhdGlvQW5kT2Zmc2V0KHJvdGF0aW9uLCBjaXJjdW1mZXJlbmNlLCBjdXRvdXQpIHtcbiAgICBsZXQgcmF0aW9YID0gMTtcbiAgICBsZXQgcmF0aW9ZID0gMTtcbiAgICBsZXQgb2Zmc2V0WCA9IDA7XG4gICAgbGV0IG9mZnNldFkgPSAwO1xuICAgIGlmIChjaXJjdW1mZXJlbmNlIDwgVEFVKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0QW5nbGUgPSByb3RhdGlvbjtcbiAgICAgICAgY29uc3QgZW5kQW5nbGUgPSBzdGFydEFuZ2xlICsgY2lyY3VtZmVyZW5jZTtcbiAgICAgICAgY29uc3Qgc3RhcnRYID0gTWF0aC5jb3Moc3RhcnRBbmdsZSk7XG4gICAgICAgIGNvbnN0IHN0YXJ0WSA9IE1hdGguc2luKHN0YXJ0QW5nbGUpO1xuICAgICAgICBjb25zdCBlbmRYID0gTWF0aC5jb3MoZW5kQW5nbGUpO1xuICAgICAgICBjb25zdCBlbmRZID0gTWF0aC5zaW4oZW5kQW5nbGUpO1xuICAgICAgICBjb25zdCBjYWxjTWF4ID0gKGFuZ2xlLCBhLCBiKT0+X2FuZ2xlQmV0d2VlbihhbmdsZSwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIHRydWUpID8gMSA6IE1hdGgubWF4KGEsIGEgKiBjdXRvdXQsIGIsIGIgKiBjdXRvdXQpO1xuICAgICAgICBjb25zdCBjYWxjTWluID0gKGFuZ2xlLCBhLCBiKT0+X2FuZ2xlQmV0d2VlbihhbmdsZSwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIHRydWUpID8gLTEgOiBNYXRoLm1pbihhLCBhICogY3V0b3V0LCBiLCBiICogY3V0b3V0KTtcbiAgICAgICAgY29uc3QgbWF4WCA9IGNhbGNNYXgoMCwgc3RhcnRYLCBlbmRYKTtcbiAgICAgICAgY29uc3QgbWF4WSA9IGNhbGNNYXgoSEFMRl9QSSwgc3RhcnRZLCBlbmRZKTtcbiAgICAgICAgY29uc3QgbWluWCA9IGNhbGNNaW4oUEksIHN0YXJ0WCwgZW5kWCk7XG4gICAgICAgIGNvbnN0IG1pblkgPSBjYWxjTWluKFBJICsgSEFMRl9QSSwgc3RhcnRZLCBlbmRZKTtcbiAgICAgICAgcmF0aW9YID0gKG1heFggLSBtaW5YKSAvIDI7XG4gICAgICAgIHJhdGlvWSA9IChtYXhZIC0gbWluWSkgLyAyO1xuICAgICAgICBvZmZzZXRYID0gLShtYXhYICsgbWluWCkgLyAyO1xuICAgICAgICBvZmZzZXRZID0gLShtYXhZICsgbWluWSkgLyAyO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICByYXRpb1gsXG4gICAgICAgIHJhdGlvWSxcbiAgICAgICAgb2Zmc2V0WCxcbiAgICAgICAgb2Zmc2V0WVxuICAgIH07XG59XG5jbGFzcyBEb3VnaG51dENvbnRyb2xsZXIgZXh0ZW5kcyBEYXRhc2V0Q29udHJvbGxlciB7XG4gICAgc3RhdGljIGlkID0gJ2RvdWdobnV0JztcbiBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgICAgIGRhdGFzZXRFbGVtZW50VHlwZTogZmFsc2UsXG4gICAgICAgIGRhdGFFbGVtZW50VHlwZTogJ2FyYycsXG4gICAgICAgIGFuaW1hdGlvbjoge1xuICAgICAgICAgICAgYW5pbWF0ZVJvdGF0ZTogdHJ1ZSxcbiAgICAgICAgICAgIGFuaW1hdGVTY2FsZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgYW5pbWF0aW9uczoge1xuICAgICAgICAgICAgbnVtYmVyczoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ2NpcmN1bWZlcmVuY2UnLFxuICAgICAgICAgICAgICAgICAgICAnZW5kQW5nbGUnLFxuICAgICAgICAgICAgICAgICAgICAnaW5uZXJSYWRpdXMnLFxuICAgICAgICAgICAgICAgICAgICAnb3V0ZXJSYWRpdXMnLFxuICAgICAgICAgICAgICAgICAgICAnc3RhcnRBbmdsZScsXG4gICAgICAgICAgICAgICAgICAgICd4JyxcbiAgICAgICAgICAgICAgICAgICAgJ3knLFxuICAgICAgICAgICAgICAgICAgICAnb2Zmc2V0JyxcbiAgICAgICAgICAgICAgICAgICAgJ2JvcmRlcldpZHRoJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NwYWNpbmcnXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjdXRvdXQ6ICc1MCUnLFxuICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgY2lyY3VtZmVyZW5jZTogMzYwLFxuICAgICAgICByYWRpdXM6ICcxMDAlJyxcbiAgICAgICAgc3BhY2luZzogMCxcbiAgICAgICAgaW5kZXhBeGlzOiAncidcbiAgICB9O1xuICAgIHN0YXRpYyBkZXNjcmlwdG9ycyA9IHtcbiAgICAgICAgX3NjcmlwdGFibGU6IChuYW1lKT0+bmFtZSAhPT0gJ3NwYWNpbmcnLFxuICAgICAgICBfaW5kZXhhYmxlOiAobmFtZSk9Pm5hbWUgIT09ICdzcGFjaW5nJ1xuICAgIH07XG4gc3RhdGljIG92ZXJyaWRlcyA9IHtcbiAgICAgICAgYXNwZWN0UmF0aW86IDEsXG4gICAgICAgIHBsdWdpbnM6IHtcbiAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUxhYmVscyAoY2hhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjaGFydC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGFiZWxzLmxlbmd0aCAmJiBkYXRhLmRhdGFzZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbGFiZWxzOiB7IHBvaW50U3R5bGUgLCBjb2xvciAgfSAgfSA9IGNoYXJ0LmxlZ2VuZC5vcHRpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmxhYmVscy5tYXAoKGxhYmVsLCBpKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gbWV0YS5jb250cm9sbGVyLmdldFN0eWxlKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IHN0eWxlLmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBzdHlsZS5ib3JkZXJDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRDb2xvcjogY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IHN0eWxlLmJvcmRlcldpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRTdHlsZTogcG9pbnRTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogIWNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DbGljayAoZSwgbGVnZW5kSXRlbSwgbGVnZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZC5jaGFydC50b2dnbGVEYXRhVmlzaWJpbGl0eShsZWdlbmRJdGVtLmluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kLmNoYXJ0LnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3RydWN0b3IoY2hhcnQsIGRhdGFzZXRJbmRleCl7XG4gICAgICAgIHN1cGVyKGNoYXJ0LCBkYXRhc2V0SW5kZXgpO1xuICAgICAgICB0aGlzLmVuYWJsZU9wdGlvblNoYXJpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmlubmVyUmFkaXVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm91dGVyUmFkaXVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9mZnNldFggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgbGlua1NjYWxlcygpIHt9XG4gcGFyc2Uoc3RhcnQsIGNvdW50KSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldERhdGFzZXQoKS5kYXRhO1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgaWYgKHRoaXMuX3BhcnNpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBtZXRhLl9wYXJzZWQgPSBkYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGdldHRlciA9IChpKT0+K2RhdGFbaV07XG4gICAgICAgICAgICBpZiAoaXNPYmplY3QoZGF0YVtzdGFydF0pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBrZXkgPSd2YWx1ZScgIH0gPSB0aGlzLl9wYXJzaW5nO1xuICAgICAgICAgICAgICAgIGdldHRlciA9IChpKT0+K3Jlc29sdmVPYmplY3RLZXkoZGF0YVtpXSwga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpLCBpbGVuO1xuICAgICAgICAgICAgZm9yKGkgPSBzdGFydCwgaWxlbiA9IHN0YXJ0ICsgY291bnQ7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICAgICAgICAgIG1ldGEuX3BhcnNlZFtpXSA9IGdldHRlcihpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiBfZ2V0Um90YXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0b1JhZGlhbnModGhpcy5vcHRpb25zLnJvdGF0aW9uIC0gOTApO1xuICAgIH1cbiBfZ2V0Q2lyY3VtZmVyZW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRvUmFkaWFucyh0aGlzLm9wdGlvbnMuY2lyY3VtZmVyZW5jZSk7XG4gICAgfVxuIF9nZXRSb3RhdGlvbkV4dGVudHMoKSB7XG4gICAgICAgIGxldCBtaW4gPSBUQVU7XG4gICAgICAgIGxldCBtYXggPSAtVEFVO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzLmxlbmd0aDsgKytpKXtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0LmlzRGF0YXNldFZpc2libGUoaSkgJiYgdGhpcy5jaGFydC5nZXREYXRhc2V0TWV0YShpKS50eXBlID09PSB0aGlzLl90eXBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuY2hhcnQuZ2V0RGF0YXNldE1ldGEoaSkuY29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICBjb25zdCByb3RhdGlvbiA9IGNvbnRyb2xsZXIuX2dldFJvdGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2lyY3VtZmVyZW5jZSA9IGNvbnRyb2xsZXIuX2dldENpcmN1bWZlcmVuY2UoKTtcbiAgICAgICAgICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIHJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICBtYXggPSBNYXRoLm1heChtYXgsIHJvdGF0aW9uICsgY2lyY3VtZmVyZW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvdGF0aW9uOiBtaW4sXG4gICAgICAgICAgICBjaXJjdW1mZXJlbmNlOiBtYXggLSBtaW5cbiAgICAgICAgfTtcbiAgICB9XG4gdXBkYXRlKG1vZGUpIHtcbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCB7IGNoYXJ0QXJlYSAgfSA9IGNoYXJ0O1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgYXJjcyA9IG1ldGEuZGF0YTtcbiAgICAgICAgY29uc3Qgc3BhY2luZyA9IHRoaXMuZ2V0TWF4Qm9yZGVyV2lkdGgoKSArIHRoaXMuZ2V0TWF4T2Zmc2V0KGFyY3MpICsgdGhpcy5vcHRpb25zLnNwYWNpbmc7XG4gICAgICAgIGNvbnN0IG1heFNpemUgPSBNYXRoLm1heCgoTWF0aC5taW4oY2hhcnRBcmVhLndpZHRoLCBjaGFydEFyZWEuaGVpZ2h0KSAtIHNwYWNpbmcpIC8gMiwgMCk7XG4gICAgICAgIGNvbnN0IGN1dG91dCA9IE1hdGgubWluKHRvUGVyY2VudGFnZSh0aGlzLm9wdGlvbnMuY3V0b3V0LCBtYXhTaXplKSwgMSk7XG4gICAgICAgIGNvbnN0IGNoYXJ0V2VpZ2h0ID0gdGhpcy5fZ2V0UmluZ1dlaWdodCh0aGlzLmluZGV4KTtcbiAgICAgICAgY29uc3QgeyBjaXJjdW1mZXJlbmNlICwgcm90YXRpb24gIH0gPSB0aGlzLl9nZXRSb3RhdGlvbkV4dGVudHMoKTtcbiAgICAgICAgY29uc3QgeyByYXRpb1ggLCByYXRpb1kgLCBvZmZzZXRYICwgb2Zmc2V0WSAgfSA9IGdldFJhdGlvQW5kT2Zmc2V0KHJvdGF0aW9uLCBjaXJjdW1mZXJlbmNlLCBjdXRvdXQpO1xuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IChjaGFydEFyZWEud2lkdGggLSBzcGFjaW5nKSAvIHJhdGlvWDtcbiAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gKGNoYXJ0QXJlYS5oZWlnaHQgLSBzcGFjaW5nKSAvIHJhdGlvWTtcbiAgICAgICAgY29uc3QgbWF4UmFkaXVzID0gTWF0aC5tYXgoTWF0aC5taW4obWF4V2lkdGgsIG1heEhlaWdodCkgLyAyLCAwKTtcbiAgICAgICAgY29uc3Qgb3V0ZXJSYWRpdXMgPSB0b0RpbWVuc2lvbih0aGlzLm9wdGlvbnMucmFkaXVzLCBtYXhSYWRpdXMpO1xuICAgICAgICBjb25zdCBpbm5lclJhZGl1cyA9IE1hdGgubWF4KG91dGVyUmFkaXVzICogY3V0b3V0LCAwKTtcbiAgICAgICAgY29uc3QgcmFkaXVzTGVuZ3RoID0gKG91dGVyUmFkaXVzIC0gaW5uZXJSYWRpdXMpIC8gdGhpcy5fZ2V0VmlzaWJsZURhdGFzZXRXZWlnaHRUb3RhbCgpO1xuICAgICAgICB0aGlzLm9mZnNldFggPSBvZmZzZXRYICogb3V0ZXJSYWRpdXM7XG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IG9mZnNldFkgKiBvdXRlclJhZGl1cztcbiAgICAgICAgbWV0YS50b3RhbCA9IHRoaXMuY2FsY3VsYXRlVG90YWwoKTtcbiAgICAgICAgdGhpcy5vdXRlclJhZGl1cyA9IG91dGVyUmFkaXVzIC0gcmFkaXVzTGVuZ3RoICogdGhpcy5fZ2V0UmluZ1dlaWdodE9mZnNldCh0aGlzLmluZGV4KTtcbiAgICAgICAgdGhpcy5pbm5lclJhZGl1cyA9IE1hdGgubWF4KHRoaXMub3V0ZXJSYWRpdXMgLSByYWRpdXNMZW5ndGggKiBjaGFydFdlaWdodCwgMCk7XG4gICAgICAgIHRoaXMudXBkYXRlRWxlbWVudHMoYXJjcywgMCwgYXJjcy5sZW5ndGgsIG1vZGUpO1xuICAgIH1cbiBfY2lyY3VtZmVyZW5jZShpLCByZXNldCkge1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgY2lyY3VtZmVyZW5jZSA9IHRoaXMuX2dldENpcmN1bWZlcmVuY2UoKTtcbiAgICAgICAgaWYgKHJlc2V0ICYmIG9wdHMuYW5pbWF0aW9uLmFuaW1hdGVSb3RhdGUgfHwgIXRoaXMuY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoaSkgfHwgbWV0YS5fcGFyc2VkW2ldID09PSBudWxsIHx8IG1ldGEuZGF0YVtpXS5oaWRkZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUNpcmN1bWZlcmVuY2UobWV0YS5fcGFyc2VkW2ldICogY2lyY3VtZmVyZW5jZSAvIFRBVSk7XG4gICAgfVxuICAgIHVwZGF0ZUVsZW1lbnRzKGFyY3MsIHN0YXJ0LCBjb3VudCwgbW9kZSkge1xuICAgICAgICBjb25zdCByZXNldCA9IG1vZGUgPT09ICdyZXNldCc7XG4gICAgICAgIGNvbnN0IGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgY29uc3QgY2hhcnRBcmVhID0gY2hhcnQuY2hhcnRBcmVhO1xuICAgICAgICBjb25zdCBvcHRzID0gY2hhcnQub3B0aW9ucztcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uT3B0cyA9IG9wdHMuYW5pbWF0aW9uO1xuICAgICAgICBjb25zdCBjZW50ZXJYID0gKGNoYXJ0QXJlYS5sZWZ0ICsgY2hhcnRBcmVhLnJpZ2h0KSAvIDI7XG4gICAgICAgIGNvbnN0IGNlbnRlclkgPSAoY2hhcnRBcmVhLnRvcCArIGNoYXJ0QXJlYS5ib3R0b20pIC8gMjtcbiAgICAgICAgY29uc3QgYW5pbWF0ZVNjYWxlID0gcmVzZXQgJiYgYW5pbWF0aW9uT3B0cy5hbmltYXRlU2NhbGU7XG4gICAgICAgIGNvbnN0IGlubmVyUmFkaXVzID0gYW5pbWF0ZVNjYWxlID8gMCA6IHRoaXMuaW5uZXJSYWRpdXM7XG4gICAgICAgIGNvbnN0IG91dGVyUmFkaXVzID0gYW5pbWF0ZVNjYWxlID8gMCA6IHRoaXMub3V0ZXJSYWRpdXM7XG4gICAgICAgIGNvbnN0IHsgc2hhcmVkT3B0aW9ucyAsIGluY2x1ZGVPcHRpb25zICB9ID0gdGhpcy5fZ2V0U2hhcmVkT3B0aW9ucyhzdGFydCwgbW9kZSk7XG4gICAgICAgIGxldCBzdGFydEFuZ2xlID0gdGhpcy5fZ2V0Um90YXRpb24oKTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IHN0YXJ0OyArK2kpe1xuICAgICAgICAgICAgc3RhcnRBbmdsZSArPSB0aGlzLl9jaXJjdW1mZXJlbmNlKGksIHJlc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IoaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgKytpKXtcbiAgICAgICAgICAgIGNvbnN0IGNpcmN1bWZlcmVuY2UgPSB0aGlzLl9jaXJjdW1mZXJlbmNlKGksIHJlc2V0KTtcbiAgICAgICAgICAgIGNvbnN0IGFyYyA9IGFyY3NbaV07XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgIHg6IGNlbnRlclggKyB0aGlzLm9mZnNldFgsXG4gICAgICAgICAgICAgICAgeTogY2VudGVyWSArIHRoaXMub2Zmc2V0WSxcbiAgICAgICAgICAgICAgICBzdGFydEFuZ2xlLFxuICAgICAgICAgICAgICAgIGVuZEFuZ2xlOiBzdGFydEFuZ2xlICsgY2lyY3VtZmVyZW5jZSxcbiAgICAgICAgICAgICAgICBjaXJjdW1mZXJlbmNlLFxuICAgICAgICAgICAgICAgIG91dGVyUmFkaXVzLFxuICAgICAgICAgICAgICAgIGlubmVyUmFkaXVzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGluY2x1ZGVPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5vcHRpb25zID0gc2hhcmVkT3B0aW9ucyB8fCB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSwgYXJjLmFjdGl2ZSA/ICdhY3RpdmUnIDogbW9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFydEFuZ2xlICs9IGNpcmN1bWZlcmVuY2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQoYXJjLCBpLCBwcm9wZXJ0aWVzLCBtb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWxjdWxhdGVUb3RhbCgpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgICAgIGNvbnN0IG1ldGFEYXRhID0gbWV0YS5kYXRhO1xuICAgICAgICBsZXQgdG90YWwgPSAwO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgbWV0YURhdGEubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBtZXRhLl9wYXJzZWRbaV07XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgIWlzTmFOKHZhbHVlKSAmJiB0aGlzLmNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGkpICYmICFtZXRhRGF0YVtpXS5oaWRkZW4pIHtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBNYXRoLmFicyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvdGFsO1xuICAgIH1cbiAgICBjYWxjdWxhdGVDaXJjdW1mZXJlbmNlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5fY2FjaGVkTWV0YS50b3RhbDtcbiAgICAgICAgaWYgKHRvdGFsID4gMCAmJiAhaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gVEFVICogKE1hdGguYWJzKHZhbHVlKSAvIHRvdGFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCBsYWJlbHMgPSBjaGFydC5kYXRhLmxhYmVscyB8fCBbXTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmb3JtYXROdW1iZXIobWV0YS5fcGFyc2VkW2luZGV4XSwgY2hhcnQub3B0aW9ucy5sb2NhbGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGFiZWw6IGxhYmVsc1tpbmRleF0gfHwgJycsXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRNYXhCb3JkZXJXaWR0aChhcmNzKSB7XG4gICAgICAgIGxldCBtYXggPSAwO1xuICAgICAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgIGxldCBpLCBpbGVuLCBtZXRhLCBjb250cm9sbGVyLCBvcHRpb25zO1xuICAgICAgICBpZiAoIWFyY3MpIHtcbiAgICAgICAgICAgIGZvcihpID0gMCwgaWxlbiA9IGNoYXJ0LmRhdGEuZGF0YXNldHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgICAgICBpZiAoY2hhcnQuaXNEYXRhc2V0VmlzaWJsZShpKSkge1xuICAgICAgICAgICAgICAgICAgICBtZXRhID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoaSk7XG4gICAgICAgICAgICAgICAgICAgIGFyY3MgPSBtZXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBtZXRhLmNvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFyY3MpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGZvcihpID0gMCwgaWxlbiA9IGFyY3MubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBjb250cm9sbGVyLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ib3JkZXJBbGlnbiAhPT0gJ2lubmVyJykge1xuICAgICAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgb3B0aW9ucy5ib3JkZXJXaWR0aCB8fCAwLCBvcHRpb25zLmhvdmVyQm9yZGVyV2lkdGggfHwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0TWF4T2Zmc2V0KGFyY3MpIHtcbiAgICAgICAgbGV0IG1heCA9IDA7XG4gICAgICAgIGZvcihsZXQgaSA9IDAsIGlsZW4gPSBhcmNzLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGkpO1xuICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBvcHRpb25zLm9mZnNldCB8fCAwLCBvcHRpb25zLmhvdmVyT2Zmc2V0IHx8IDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuIF9nZXRSaW5nV2VpZ2h0T2Zmc2V0KGRhdGFzZXRJbmRleCkge1xuICAgICAgICBsZXQgcmluZ1dlaWdodE9mZnNldCA9IDA7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhc2V0SW5kZXg7ICsraSl7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydC5pc0RhdGFzZXRWaXNpYmxlKGkpKSB7XG4gICAgICAgICAgICAgICAgcmluZ1dlaWdodE9mZnNldCArPSB0aGlzLl9nZXRSaW5nV2VpZ2h0KGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByaW5nV2VpZ2h0T2Zmc2V0O1xuICAgIH1cbiBfZ2V0UmluZ1dlaWdodChkYXRhc2V0SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHZhbHVlT3JEZWZhdWx0KHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1tkYXRhc2V0SW5kZXhdLndlaWdodCwgMSksIDApO1xuICAgIH1cbiBfZ2V0VmlzaWJsZURhdGFzZXRXZWlnaHRUb3RhbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJpbmdXZWlnaHRPZmZzZXQodGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzLmxlbmd0aCkgfHwgMTtcbiAgICB9XG59XG5cbmNsYXNzIExpbmVDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXIge1xuICAgIHN0YXRpYyBpZCA9ICdsaW5lJztcbiBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgICAgIGRhdGFzZXRFbGVtZW50VHlwZTogJ2xpbmUnLFxuICAgICAgICBkYXRhRWxlbWVudFR5cGU6ICdwb2ludCcsXG4gICAgICAgIHNob3dMaW5lOiB0cnVlLFxuICAgICAgICBzcGFuR2FwczogZmFsc2VcbiAgICB9O1xuIHN0YXRpYyBvdmVycmlkZXMgPSB7XG4gICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgX2luZGV4Xzoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdmFsdWVfOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpbmVhcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdGhpcy5lbmFibGVPcHRpb25TaGFyaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdXBwb3J0c0RlY2ltYXRpb24gPSB0cnVlO1xuICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gICAgfVxuICAgIHVwZGF0ZShtb2RlKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBjb25zdCB7IGRhdGFzZXQ6IGxpbmUgLCBkYXRhOiBwb2ludHMgPSBbXSAsIF9kYXRhc2V0ICB9ID0gbWV0YTtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uc0Rpc2FibGVkID0gdGhpcy5jaGFydC5fYW5pbWF0aW9uc0Rpc2FibGVkO1xuICAgICAgICBsZXQgeyBzdGFydCAsIGNvdW50ICB9ID0gX2dldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHMobWV0YSwgcG9pbnRzLCBhbmltYXRpb25zRGlzYWJsZWQpO1xuICAgICAgICB0aGlzLl9kcmF3U3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGhpcy5fZHJhd0NvdW50ID0gY291bnQ7XG4gICAgICAgIGlmIChfc2NhbGVSYW5nZXNDaGFuZ2VkKG1ldGEpKSB7XG4gICAgICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgICAgICBjb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgbGluZS5fY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBsaW5lLl9kYXRhc2V0SW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICBsaW5lLl9kZWNpbWF0ZWQgPSAhIV9kYXRhc2V0Ll9kZWNpbWF0ZWQ7XG4gICAgICAgIGxpbmUucG9pbnRzID0gcG9pbnRzO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5yZXNvbHZlRGF0YXNldEVsZW1lbnRPcHRpb25zKG1vZGUpO1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5zaG93TGluZSkge1xuICAgICAgICAgICAgb3B0aW9ucy5ib3JkZXJXaWR0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5zZWdtZW50ID0gdGhpcy5vcHRpb25zLnNlZ21lbnQ7XG4gICAgICAgIHRoaXMudXBkYXRlRWxlbWVudChsaW5lLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgIGFuaW1hdGVkOiAhYW5pbWF0aW9uc0Rpc2FibGVkLFxuICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICB9LCBtb2RlKTtcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50cyhwb2ludHMsIHN0YXJ0LCBjb3VudCwgbW9kZSk7XG4gICAgfVxuICAgIHVwZGF0ZUVsZW1lbnRzKHBvaW50cywgc3RhcnQsIGNvdW50LCBtb2RlKSB7XG4gICAgICAgIGNvbnN0IHJlc2V0ID0gbW9kZSA9PT0gJ3Jlc2V0JztcbiAgICAgICAgY29uc3QgeyBpU2NhbGUgLCB2U2NhbGUgLCBfc3RhY2tlZCAsIF9kYXRhc2V0ICB9ID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgeyBzaGFyZWRPcHRpb25zICwgaW5jbHVkZU9wdGlvbnMgIH0gPSB0aGlzLl9nZXRTaGFyZWRPcHRpb25zKHN0YXJ0LCBtb2RlKTtcbiAgICAgICAgY29uc3QgaUF4aXMgPSBpU2NhbGUuYXhpcztcbiAgICAgICAgY29uc3QgdkF4aXMgPSB2U2NhbGUuYXhpcztcbiAgICAgICAgY29uc3QgeyBzcGFuR2FwcyAsIHNlZ21lbnQgIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG1heEdhcExlbmd0aCA9IGlzTnVtYmVyKHNwYW5HYXBzKSA/IHNwYW5HYXBzIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgICBjb25zdCBkaXJlY3RVcGRhdGUgPSB0aGlzLmNoYXJ0Ll9hbmltYXRpb25zRGlzYWJsZWQgfHwgcmVzZXQgfHwgbW9kZSA9PT0gJ25vbmUnO1xuICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIGNvdW50O1xuICAgICAgICBjb25zdCBwb2ludHNDb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gICAgICAgIGxldCBwcmV2UGFyc2VkID0gc3RhcnQgPiAwICYmIHRoaXMuZ2V0UGFyc2VkKHN0YXJ0IC0gMSk7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwb2ludHNDb3VudDsgKytpKXtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGRpcmVjdFVwZGF0ZSA/IHBvaW50IDoge307XG4gICAgICAgICAgICBpZiAoaSA8IHN0YXJ0IHx8IGkgPj0gZW5kKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5za2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHRoaXMuZ2V0UGFyc2VkKGkpO1xuICAgICAgICAgICAgY29uc3QgbnVsbERhdGEgPSBpc051bGxPclVuZGVmKHBhcnNlZFt2QXhpc10pO1xuICAgICAgICAgICAgY29uc3QgaVBpeGVsID0gcHJvcGVydGllc1tpQXhpc10gPSBpU2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShwYXJzZWRbaUF4aXNdLCBpKTtcbiAgICAgICAgICAgIGNvbnN0IHZQaXhlbCA9IHByb3BlcnRpZXNbdkF4aXNdID0gcmVzZXQgfHwgbnVsbERhdGEgPyB2U2NhbGUuZ2V0QmFzZVBpeGVsKCkgOiB2U2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShfc3RhY2tlZCA/IHRoaXMuYXBwbHlTdGFjayh2U2NhbGUsIHBhcnNlZCwgX3N0YWNrZWQpIDogcGFyc2VkW3ZBeGlzXSwgaSk7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnNraXAgPSBpc05hTihpUGl4ZWwpIHx8IGlzTmFOKHZQaXhlbCkgfHwgbnVsbERhdGE7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnN0b3AgPSBpID4gMCAmJiBNYXRoLmFicyhwYXJzZWRbaUF4aXNdIC0gcHJldlBhcnNlZFtpQXhpc10pID4gbWF4R2FwTGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnBhcnNlZCA9IHBhcnNlZDtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnJhdyA9IF9kYXRhc2V0LmRhdGFbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5jbHVkZU9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm9wdGlvbnMgPSBzaGFyZWRPcHRpb25zIHx8IHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpLCBwb2ludC5hY3RpdmUgPyAnYWN0aXZlJyA6IG1vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkaXJlY3RVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQocG9pbnQsIGksIHByb3BlcnRpZXMsIG1vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldlBhcnNlZCA9IHBhcnNlZDtcbiAgICAgICAgfVxuICAgIH1cbiBnZXRNYXhPdmVyZmxvdygpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgICAgIGNvbnN0IGRhdGFzZXQgPSBtZXRhLmRhdGFzZXQ7XG4gICAgICAgIGNvbnN0IGJvcmRlciA9IGRhdGFzZXQub3B0aW9ucyAmJiBkYXRhc2V0Lm9wdGlvbnMuYm9yZGVyV2lkdGggfHwgMDtcbiAgICAgICAgY29uc3QgZGF0YSA9IG1ldGEuZGF0YSB8fCBbXTtcbiAgICAgICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGJvcmRlcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaXJzdFBvaW50ID0gZGF0YVswXS5zaXplKHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucygwKSk7XG4gICAgICAgIGNvbnN0IGxhc3RQb2ludCA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXS5zaXplKHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhkYXRhLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGJvcmRlciwgZmlyc3RQb2ludCwgbGFzdFBvaW50KSAvIDI7XG4gICAgfVxuICAgIGRyYXcoKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBtZXRhLmRhdGFzZXQudXBkYXRlQ29udHJvbFBvaW50cyh0aGlzLmNoYXJ0LmNoYXJ0QXJlYSwgbWV0YS5pU2NhbGUuYXhpcyk7XG4gICAgICAgIHN1cGVyLmRyYXcoKTtcbiAgICB9XG59XG5cbmNsYXNzIFBvbGFyQXJlYUNvbnRyb2xsZXIgZXh0ZW5kcyBEYXRhc2V0Q29udHJvbGxlciB7XG4gICAgc3RhdGljIGlkID0gJ3BvbGFyQXJlYSc7XG4gc3RhdGljIGRlZmF1bHRzID0ge1xuICAgICAgICBkYXRhRWxlbWVudFR5cGU6ICdhcmMnLFxuICAgICAgICBhbmltYXRpb246IHtcbiAgICAgICAgICAgIGFuaW1hdGVSb3RhdGU6IHRydWUsXG4gICAgICAgICAgICBhbmltYXRlU2NhbGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgYW5pbWF0aW9uczoge1xuICAgICAgICAgICAgbnVtYmVyczoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ3gnLFxuICAgICAgICAgICAgICAgICAgICAneScsXG4gICAgICAgICAgICAgICAgICAgICdzdGFydEFuZ2xlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2VuZEFuZ2xlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2lubmVyUmFkaXVzJyxcbiAgICAgICAgICAgICAgICAgICAgJ291dGVyUmFkaXVzJ1xuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5kZXhBeGlzOiAncicsXG4gICAgICAgIHN0YXJ0QW5nbGU6IDBcbiAgICB9O1xuIHN0YXRpYyBvdmVycmlkZXMgPSB7XG4gICAgICAgIGFzcGVjdFJhdGlvOiAxLFxuICAgICAgICBwbHVnaW5zOiB7XG4gICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVMYWJlbHMgKGNoYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gY2hhcnQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxhYmVscy5sZW5ndGggJiYgZGF0YS5kYXRhc2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGxhYmVsczogeyBwb2ludFN0eWxlICwgY29sb3IgIH0gIH0gPSBjaGFydC5sZWdlbmQub3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5sYWJlbHMubWFwKChsYWJlbCwgaSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YSA9IGNoYXJ0LmdldERhdGFzZXRNZXRhKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IG1ldGEuY29udHJvbGxlci5nZXRTdHlsZShpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiBzdHlsZS5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTdHlsZTogc3R5bGUuYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250Q29sb3I6IGNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoOiBzdHlsZS5ib3JkZXJXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50U3R5bGU6IHBvaW50U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46ICFjaGFydC5nZXREYXRhVmlzaWJpbGl0eShpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ2xpY2sgKGUsIGxlZ2VuZEl0ZW0sIGxlZ2VuZCkge1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmQuY2hhcnQudG9nZ2xlRGF0YVZpc2liaWxpdHkobGVnZW5kSXRlbS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZC5jaGFydC51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgcjoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyYWRpYWxMaW5lYXInLFxuICAgICAgICAgICAgICAgIGFuZ2xlTGluZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJlZ2luQXRaZXJvOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY2lyY3VsYXI6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBvaW50TGFiZWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdGFydEFuZ2xlOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0cnVjdG9yKGNoYXJ0LCBkYXRhc2V0SW5kZXgpe1xuICAgICAgICBzdXBlcihjaGFydCwgZGF0YXNldEluZGV4KTtcbiAgICAgICAgdGhpcy5pbm5lclJhZGl1cyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5vdXRlclJhZGl1cyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCBsYWJlbHMgPSBjaGFydC5kYXRhLmxhYmVscyB8fCBbXTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmb3JtYXROdW1iZXIobWV0YS5fcGFyc2VkW2luZGV4XS5yLCBjaGFydC5vcHRpb25zLmxvY2FsZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYWJlbDogbGFiZWxzW2luZGV4XSB8fCAnJyxcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHBhcnNlT2JqZWN0RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICAgICAgcmV0dXJuIF9wYXJzZU9iamVjdERhdGFSYWRpYWxTY2FsZS5iaW5kKHRoaXMpKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCk7XG4gICAgfVxuICAgIHVwZGF0ZShtb2RlKSB7XG4gICAgICAgIGNvbnN0IGFyY3MgPSB0aGlzLl9jYWNoZWRNZXRhLmRhdGE7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVJhZGl1cygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRzKGFyY3MsIDAsIGFyY3MubGVuZ3RoLCBtb2RlKTtcbiAgICB9XG4gZ2V0TWluTWF4KCkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgcmFuZ2UgPSB7XG4gICAgICAgICAgICBtaW46IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSxcbiAgICAgICAgICAgIG1heDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZXG4gICAgICAgIH07XG4gICAgICAgIG1ldGEuZGF0YS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCk9PntcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHRoaXMuZ2V0UGFyc2VkKGluZGV4KS5yO1xuICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZWQpICYmIHRoaXMuY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8IHJhbmdlLm1pbikge1xuICAgICAgICAgICAgICAgICAgICByYW5nZS5taW4gPSBwYXJzZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYXJzZWQgPiByYW5nZS5tYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UubWF4ID0gcGFyc2VkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByYW5nZTtcbiAgICB9XG4gX3VwZGF0ZVJhZGl1cygpIHtcbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCBjaGFydEFyZWEgPSBjaGFydC5jaGFydEFyZWE7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBjaGFydC5vcHRpb25zO1xuICAgICAgICBjb25zdCBtaW5TaXplID0gTWF0aC5taW4oY2hhcnRBcmVhLnJpZ2h0IC0gY2hhcnRBcmVhLmxlZnQsIGNoYXJ0QXJlYS5ib3R0b20gLSBjaGFydEFyZWEudG9wKTtcbiAgICAgICAgY29uc3Qgb3V0ZXJSYWRpdXMgPSBNYXRoLm1heChtaW5TaXplIC8gMiwgMCk7XG4gICAgICAgIGNvbnN0IGlubmVyUmFkaXVzID0gTWF0aC5tYXgob3B0cy5jdXRvdXRQZXJjZW50YWdlID8gb3V0ZXJSYWRpdXMgLyAxMDAgKiBvcHRzLmN1dG91dFBlcmNlbnRhZ2UgOiAxLCAwKTtcbiAgICAgICAgY29uc3QgcmFkaXVzTGVuZ3RoID0gKG91dGVyUmFkaXVzIC0gaW5uZXJSYWRpdXMpIC8gY2hhcnQuZ2V0VmlzaWJsZURhdGFzZXRDb3VudCgpO1xuICAgICAgICB0aGlzLm91dGVyUmFkaXVzID0gb3V0ZXJSYWRpdXMgLSByYWRpdXNMZW5ndGggKiB0aGlzLmluZGV4O1xuICAgICAgICB0aGlzLmlubmVyUmFkaXVzID0gdGhpcy5vdXRlclJhZGl1cyAtIHJhZGl1c0xlbmd0aDtcbiAgICB9XG4gICAgdXBkYXRlRWxlbWVudHMoYXJjcywgc3RhcnQsIGNvdW50LCBtb2RlKSB7XG4gICAgICAgIGNvbnN0IHJlc2V0ID0gbW9kZSA9PT0gJ3Jlc2V0JztcbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCBvcHRzID0gY2hhcnQub3B0aW9ucztcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uT3B0cyA9IG9wdHMuYW5pbWF0aW9uO1xuICAgICAgICBjb25zdCBzY2FsZSA9IHRoaXMuX2NhY2hlZE1ldGEuclNjYWxlO1xuICAgICAgICBjb25zdCBjZW50ZXJYID0gc2NhbGUueENlbnRlcjtcbiAgICAgICAgY29uc3QgY2VudGVyWSA9IHNjYWxlLnlDZW50ZXI7XG4gICAgICAgIGNvbnN0IGRhdGFzZXRTdGFydEFuZ2xlID0gc2NhbGUuZ2V0SW5kZXhBbmdsZSgwKSAtIDAuNSAqIFBJO1xuICAgICAgICBsZXQgYW5nbGUgPSBkYXRhc2V0U3RhcnRBbmdsZTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRBbmdsZSA9IDM2MCAvIHRoaXMuY291bnRWaXNpYmxlRWxlbWVudHMoKTtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgc3RhcnQ7ICsraSl7XG4gICAgICAgICAgICBhbmdsZSArPSB0aGlzLl9jb21wdXRlQW5nbGUoaSwgbW9kZSwgZGVmYXVsdEFuZ2xlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IoaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgaSsrKXtcbiAgICAgICAgICAgIGNvbnN0IGFyYyA9IGFyY3NbaV07XG4gICAgICAgICAgICBsZXQgc3RhcnRBbmdsZSA9IGFuZ2xlO1xuICAgICAgICAgICAgbGV0IGVuZEFuZ2xlID0gYW5nbGUgKyB0aGlzLl9jb21wdXRlQW5nbGUoaSwgbW9kZSwgZGVmYXVsdEFuZ2xlKTtcbiAgICAgICAgICAgIGxldCBvdXRlclJhZGl1cyA9IGNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGkpID8gc2NhbGUuZ2V0RGlzdGFuY2VGcm9tQ2VudGVyRm9yVmFsdWUodGhpcy5nZXRQYXJzZWQoaSkucikgOiAwO1xuICAgICAgICAgICAgYW5nbGUgPSBlbmRBbmdsZTtcbiAgICAgICAgICAgIGlmIChyZXNldCkge1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb25PcHRzLmFuaW1hdGVTY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRlclJhZGl1cyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb25PcHRzLmFuaW1hdGVSb3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRBbmdsZSA9IGVuZEFuZ2xlID0gZGF0YXNldFN0YXJ0QW5nbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICB4OiBjZW50ZXJYLFxuICAgICAgICAgICAgICAgIHk6IGNlbnRlclksXG4gICAgICAgICAgICAgICAgaW5uZXJSYWRpdXM6IDAsXG4gICAgICAgICAgICAgICAgb3V0ZXJSYWRpdXMsXG4gICAgICAgICAgICAgICAgc3RhcnRBbmdsZSxcbiAgICAgICAgICAgICAgICBlbmRBbmdsZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSwgYXJjLmFjdGl2ZSA/ICdhY3RpdmUnIDogbW9kZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQoYXJjLCBpLCBwcm9wZXJ0aWVzLCBtb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3VudFZpc2libGVFbGVtZW50cygpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIG1ldGEuZGF0YS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCk9PntcbiAgICAgICAgICAgIGlmICghaXNOYU4odGhpcy5nZXRQYXJzZWQoaW5kZXgpLnIpICYmIHRoaXMuY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG4gX2NvbXB1dGVBbmdsZShpbmRleCwgbW9kZSwgZGVmYXVsdEFuZ2xlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGluZGV4KSA/IHRvUmFkaWFucyh0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaW5kZXgsIG1vZGUpLmFuZ2xlIHx8IGRlZmF1bHRBbmdsZSkgOiAwO1xuICAgIH1cbn1cblxuY2xhc3MgUGllQ29udHJvbGxlciBleHRlbmRzIERvdWdobnV0Q29udHJvbGxlciB7XG4gICAgc3RhdGljIGlkID0gJ3BpZSc7XG4gc3RhdGljIGRlZmF1bHRzID0ge1xuICAgICAgICBjdXRvdXQ6IDAsXG4gICAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgICBjaXJjdW1mZXJlbmNlOiAzNjAsXG4gICAgICAgIHJhZGl1czogJzEwMCUnXG4gICAgfTtcbn1cblxuY2xhc3MgUmFkYXJDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXIge1xuICAgIHN0YXRpYyBpZCA9ICdyYWRhcic7XG4gc3RhdGljIGRlZmF1bHRzID0ge1xuICAgICAgICBkYXRhc2V0RWxlbWVudFR5cGU6ICdsaW5lJyxcbiAgICAgICAgZGF0YUVsZW1lbnRUeXBlOiAncG9pbnQnLFxuICAgICAgICBpbmRleEF4aXM6ICdyJyxcbiAgICAgICAgc2hvd0xpbmU6IHRydWUsXG4gICAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgICAgICBsaW5lOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogJ3N0YXJ0J1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiBzdGF0aWMgb3ZlcnJpZGVzID0ge1xuICAgICAgICBhc3BlY3RSYXRpbzogMSxcbiAgICAgICAgc2NhbGVzOiB7XG4gICAgICAgICAgICByOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3JhZGlhbExpbmVhcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCkge1xuICAgICAgICBjb25zdCB2U2NhbGUgPSB0aGlzLl9jYWNoZWRNZXRhLnZTY2FsZTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaW5kZXgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGFiZWw6IHZTY2FsZS5nZXRMYWJlbHMoKVtpbmRleF0sXG4gICAgICAgICAgICB2YWx1ZTogJycgKyB2U2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWRbdlNjYWxlLmF4aXNdKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBwYXJzZU9iamVjdERhdGEobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KSB7XG4gICAgICAgIHJldHVybiBfcGFyc2VPYmplY3REYXRhUmFkaWFsU2NhbGUuYmluZCh0aGlzKShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICAgIH1cbiAgICB1cGRhdGUobW9kZSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgbGluZSA9IG1ldGEuZGF0YXNldDtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gbWV0YS5kYXRhIHx8IFtdO1xuICAgICAgICBjb25zdCBsYWJlbHMgPSBtZXRhLmlTY2FsZS5nZXRMYWJlbHMoKTtcbiAgICAgICAgbGluZS5wb2ludHMgPSBwb2ludHM7XG4gICAgICAgIGlmIChtb2RlICE9PSAncmVzaXplJykge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMucmVzb2x2ZURhdGFzZXRFbGVtZW50T3B0aW9ucyhtb2RlKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnNob3dMaW5lKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5ib3JkZXJXaWR0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgIF9sb29wOiB0cnVlLFxuICAgICAgICAgICAgICAgIF9mdWxsTG9vcDogbGFiZWxzLmxlbmd0aCA9PT0gcG9pbnRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KGxpbmUsIHVuZGVmaW5lZCwgcHJvcGVydGllcywgbW9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50cyhwb2ludHMsIDAsIHBvaW50cy5sZW5ndGgsIG1vZGUpO1xuICAgIH1cbiAgICB1cGRhdGVFbGVtZW50cyhwb2ludHMsIHN0YXJ0LCBjb3VudCwgbW9kZSkge1xuICAgICAgICBjb25zdCBzY2FsZSA9IHRoaXMuX2NhY2hlZE1ldGEuclNjYWxlO1xuICAgICAgICBjb25zdCByZXNldCA9IG1vZGUgPT09ICdyZXNldCc7XG4gICAgICAgIGZvcihsZXQgaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgaSsrKXtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpLCBwb2ludC5hY3RpdmUgPyAnYWN0aXZlJyA6IG1vZGUpO1xuICAgICAgICAgICAgY29uc3QgcG9pbnRQb3NpdGlvbiA9IHNjYWxlLmdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZShpLCB0aGlzLmdldFBhcnNlZChpKS5yKTtcbiAgICAgICAgICAgIGNvbnN0IHggPSByZXNldCA/IHNjYWxlLnhDZW50ZXIgOiBwb2ludFBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5ID0gcmVzZXQgPyBzY2FsZS55Q2VudGVyIDogcG9pbnRQb3NpdGlvbi55O1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICB4LFxuICAgICAgICAgICAgICAgIHksXG4gICAgICAgICAgICAgICAgYW5nbGU6IHBvaW50UG9zaXRpb24uYW5nbGUsXG4gICAgICAgICAgICAgICAgc2tpcDogaXNOYU4oeCkgfHwgaXNOYU4oeSksXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudChwb2ludCwgaSwgcHJvcGVydGllcywgbW9kZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIFNjYXR0ZXJDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXIge1xuICAgIHN0YXRpYyBpZCA9ICdzY2F0dGVyJztcbiBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgICAgIGRhdGFzZXRFbGVtZW50VHlwZTogZmFsc2UsXG4gICAgICAgIGRhdGFFbGVtZW50VHlwZTogJ3BvaW50JyxcbiAgICAgICAgc2hvd0xpbmU6IGZhbHNlLFxuICAgICAgICBmaWxsOiBmYWxzZVxuICAgIH07XG4gc3RhdGljIG92ZXJyaWRlcyA9IHtcbiAgICAgICAgaW50ZXJhY3Rpb246IHtcbiAgICAgICAgICAgIG1vZGU6ICdwb2ludCdcbiAgICAgICAgfSxcbiAgICAgICAgc2NhbGVzOiB7XG4gICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpbmVhcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB5OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpbmVhcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgbGFiZWxzID0gdGhpcy5jaGFydC5kYXRhLmxhYmVscyB8fCBbXTtcbiAgICAgICAgY29uc3QgeyB4U2NhbGUgLCB5U2NhbGUgIH0gPSBtZXRhO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpbmRleCk7XG4gICAgICAgIGNvbnN0IHggPSB4U2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWQueCk7XG4gICAgICAgIGNvbnN0IHkgPSB5U2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWQueSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYWJlbDogbGFiZWxzW2luZGV4XSB8fCAnJyxcbiAgICAgICAgICAgIHZhbHVlOiAnKCcgKyB4ICsgJywgJyArIHkgKyAnKSdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdXBkYXRlKG1vZGUpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcG9pbnRzID0gW10gIH0gPSBtZXRhO1xuICAgICAgICBjb25zdCBhbmltYXRpb25zRGlzYWJsZWQgPSB0aGlzLmNoYXJ0Ll9hbmltYXRpb25zRGlzYWJsZWQ7XG4gICAgICAgIGxldCB7IHN0YXJ0ICwgY291bnQgIH0gPSBfZ2V0U3RhcnRBbmRDb3VudE9mVmlzaWJsZVBvaW50cyhtZXRhLCBwb2ludHMsIGFuaW1hdGlvbnNEaXNhYmxlZCk7XG4gICAgICAgIHRoaXMuX2RyYXdTdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLl9kcmF3Q291bnQgPSBjb3VudDtcbiAgICAgICAgaWYgKF9zY2FsZVJhbmdlc0NoYW5nZWQobWV0YSkpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgIGNvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dMaW5lKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGFzZXQ6IGxpbmUgLCBfZGF0YXNldCAgfSA9IG1ldGE7XG4gICAgICAgICAgICBsaW5lLl9jaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICBsaW5lLl9kYXRhc2V0SW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICAgICAgbGluZS5fZGVjaW1hdGVkID0gISFfZGF0YXNldC5fZGVjaW1hdGVkO1xuICAgICAgICAgICAgbGluZS5wb2ludHMgPSBwb2ludHM7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5yZXNvbHZlRGF0YXNldEVsZW1lbnRPcHRpb25zKG1vZGUpO1xuICAgICAgICAgICAgb3B0aW9ucy5zZWdtZW50ID0gdGhpcy5vcHRpb25zLnNlZ21lbnQ7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQobGluZSwgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZWQ6ICFhbmltYXRpb25zRGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgfSwgbW9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50cyhwb2ludHMsIHN0YXJ0LCBjb3VudCwgbW9kZSk7XG4gICAgfVxuICAgIGFkZEVsZW1lbnRzKCkge1xuICAgICAgICBjb25zdCB7IHNob3dMaW5lICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBpZiAoIXRoaXMuZGF0YXNldEVsZW1lbnRUeXBlICYmIHNob3dMaW5lKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFzZXRFbGVtZW50VHlwZSA9IHRoaXMuY2hhcnQucmVnaXN0cnkuZ2V0RWxlbWVudCgnbGluZScpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmFkZEVsZW1lbnRzKCk7XG4gICAgfVxuICAgIHVwZGF0ZUVsZW1lbnRzKHBvaW50cywgc3RhcnQsIGNvdW50LCBtb2RlKSB7XG4gICAgICAgIGNvbnN0IHJlc2V0ID0gbW9kZSA9PT0gJ3Jlc2V0JztcbiAgICAgICAgY29uc3QgeyBpU2NhbGUgLCB2U2NhbGUgLCBfc3RhY2tlZCAsIF9kYXRhc2V0ICB9ID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICAgICAgY29uc3QgZmlyc3RPcHRzID0gdGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHN0YXJ0LCBtb2RlKTtcbiAgICAgICAgY29uc3Qgc2hhcmVkT3B0aW9ucyA9IHRoaXMuZ2V0U2hhcmVkT3B0aW9ucyhmaXJzdE9wdHMpO1xuICAgICAgICBjb25zdCBpbmNsdWRlT3B0aW9ucyA9IHRoaXMuaW5jbHVkZU9wdGlvbnMobW9kZSwgc2hhcmVkT3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlBeGlzID0gaVNjYWxlLmF4aXM7XG4gICAgICAgIGNvbnN0IHZBeGlzID0gdlNjYWxlLmF4aXM7XG4gICAgICAgIGNvbnN0IHsgc3BhbkdhcHMgLCBzZWdtZW50ICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBtYXhHYXBMZW5ndGggPSBpc051bWJlcihzcGFuR2FwcykgPyBzcGFuR2FwcyA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgY29uc3QgZGlyZWN0VXBkYXRlID0gdGhpcy5jaGFydC5fYW5pbWF0aW9uc0Rpc2FibGVkIHx8IHJlc2V0IHx8IG1vZGUgPT09ICdub25lJztcbiAgICAgICAgbGV0IHByZXZQYXJzZWQgPSBzdGFydCA+IDAgJiYgdGhpcy5nZXRQYXJzZWQoc3RhcnQgLSAxKTtcbiAgICAgICAgZm9yKGxldCBpID0gc3RhcnQ7IGkgPCBzdGFydCArIGNvdW50OyArK2kpe1xuICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBwb2ludHNbaV07XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpKTtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBkaXJlY3RVcGRhdGUgPyBwb2ludCA6IHt9O1xuICAgICAgICAgICAgY29uc3QgbnVsbERhdGEgPSBpc051bGxPclVuZGVmKHBhcnNlZFt2QXhpc10pO1xuICAgICAgICAgICAgY29uc3QgaVBpeGVsID0gcHJvcGVydGllc1tpQXhpc10gPSBpU2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShwYXJzZWRbaUF4aXNdLCBpKTtcbiAgICAgICAgICAgIGNvbnN0IHZQaXhlbCA9IHByb3BlcnRpZXNbdkF4aXNdID0gcmVzZXQgfHwgbnVsbERhdGEgPyB2U2NhbGUuZ2V0QmFzZVBpeGVsKCkgOiB2U2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShfc3RhY2tlZCA/IHRoaXMuYXBwbHlTdGFjayh2U2NhbGUsIHBhcnNlZCwgX3N0YWNrZWQpIDogcGFyc2VkW3ZBeGlzXSwgaSk7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnNraXAgPSBpc05hTihpUGl4ZWwpIHx8IGlzTmFOKHZQaXhlbCkgfHwgbnVsbERhdGE7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnN0b3AgPSBpID4gMCAmJiBNYXRoLmFicyhwYXJzZWRbaUF4aXNdIC0gcHJldlBhcnNlZFtpQXhpc10pID4gbWF4R2FwTGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnBhcnNlZCA9IHBhcnNlZDtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnJhdyA9IF9kYXRhc2V0LmRhdGFbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5jbHVkZU9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm9wdGlvbnMgPSBzaGFyZWRPcHRpb25zIHx8IHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpLCBwb2ludC5hY3RpdmUgPyAnYWN0aXZlJyA6IG1vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkaXJlY3RVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQocG9pbnQsIGksIHByb3BlcnRpZXMsIG1vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldlBhcnNlZCA9IHBhcnNlZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVNoYXJlZE9wdGlvbnMoc2hhcmVkT3B0aW9ucywgbW9kZSwgZmlyc3RPcHRzKTtcbiAgICB9XG4gZ2V0TWF4T3ZlcmZsb3coKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBjb25zdCBkYXRhID0gbWV0YS5kYXRhIHx8IFtdO1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5zaG93TGluZSkge1xuICAgICAgICAgICAgbGV0IG1heCA9IDA7XG4gICAgICAgICAgICBmb3IobGV0IGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKXtcbiAgICAgICAgICAgICAgICBtYXggPSBNYXRoLm1heChtYXgsIGRhdGFbaV0uc2l6ZSh0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSkpIC8gMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF4ID4gMCAmJiBtYXg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YXNldCA9IG1ldGEuZGF0YXNldDtcbiAgICAgICAgY29uc3QgYm9yZGVyID0gZGF0YXNldC5vcHRpb25zICYmIGRhdGFzZXQub3B0aW9ucy5ib3JkZXJXaWR0aCB8fCAwO1xuICAgICAgICBpZiAoIWRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gYm9yZGVyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpcnN0UG9pbnQgPSBkYXRhWzBdLnNpemUodGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKDApKTtcbiAgICAgICAgY29uc3QgbGFzdFBvaW50ID0gZGF0YVtkYXRhLmxlbmd0aCAtIDFdLnNpemUodGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGRhdGEubGVuZ3RoIC0gMSkpO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoYm9yZGVyLCBmaXJzdFBvaW50LCBsYXN0UG9pbnQpIC8gMjtcbiAgICB9XG59XG5cbnZhciBjb250cm9sbGVycyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbl9fcHJvdG9fXzogbnVsbCxcbkJhckNvbnRyb2xsZXI6IEJhckNvbnRyb2xsZXIsXG5CdWJibGVDb250cm9sbGVyOiBCdWJibGVDb250cm9sbGVyLFxuRG91Z2hudXRDb250cm9sbGVyOiBEb3VnaG51dENvbnRyb2xsZXIsXG5MaW5lQ29udHJvbGxlcjogTGluZUNvbnRyb2xsZXIsXG5Qb2xhckFyZWFDb250cm9sbGVyOiBQb2xhckFyZWFDb250cm9sbGVyLFxuUGllQ29udHJvbGxlcjogUGllQ29udHJvbGxlcixcblJhZGFyQ29udHJvbGxlcjogUmFkYXJDb250cm9sbGVyLFxuU2NhdHRlckNvbnRyb2xsZXI6IFNjYXR0ZXJDb250cm9sbGVyXG59KTtcblxuLyoqXG4gKiBAbmFtZXNwYWNlIENoYXJ0Ll9hZGFwdGVyc1xuICogQHNpbmNlIDIuOC4wXG4gKiBAcHJpdmF0ZVxuICovIGZ1bmN0aW9uIGFic3RyYWN0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkOiBDaGVjayB0aGF0IGEgY29tcGxldGUgZGF0ZSBhZGFwdGVyIGlzIHByb3ZpZGVkLicpO1xufVxuLyoqXG4gKiBEYXRlIGFkYXB0ZXIgKGN1cnJlbnQgdXNlZCBieSB0aGUgdGltZSBzY2FsZSlcbiAqIEBuYW1lc3BhY2UgQ2hhcnQuX2FkYXB0ZXJzLl9kYXRlXG4gKiBAbWVtYmVyb2YgQ2hhcnQuX2FkYXB0ZXJzXG4gKiBAcHJpdmF0ZVxuICovIGNsYXNzIERhdGVBZGFwdGVyQmFzZSB7XG4gICAgLyoqXG4gICAqIE92ZXJyaWRlIGRlZmF1bHQgZGF0ZSBhZGFwdGVyIG1ldGhvZHMuXG4gICAqIEFjY2VwdHMgdHlwZSBwYXJhbWV0ZXIgdG8gZGVmaW5lIG9wdGlvbnMgdHlwZS5cbiAgICogQGV4YW1wbGVcbiAgICogQ2hhcnQuX2FkYXB0ZXJzLl9kYXRlLm92ZXJyaWRlPHtteUFkYXB0ZXJPcHRpb246IHN0cmluZ30+KHtcbiAgICogICBpbml0KCkge1xuICAgKiAgICAgY29uc29sZS5sb2codGhpcy5vcHRpb25zLm15QWRhcHRlck9wdGlvbik7XG4gICAqICAgfVxuICAgKiB9KVxuICAgKi8gc3RhdGljIG92ZXJyaWRlKG1lbWJlcnMpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihEYXRlQWRhcHRlckJhc2UucHJvdG90eXBlLCBtZW1iZXJzKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyl7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICBpbml0KCkge31cbiAgICBmb3JtYXRzKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9XG4gICAgcGFyc2UoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH1cbiAgICBmb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH1cbiAgICBhZGQoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH1cbiAgICBkaWZmKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9XG4gICAgc3RhcnRPZigpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfVxuICAgIGVuZE9mKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9XG59XG52YXIgYWRhcHRlcnMgPSB7XG4gICAgX2RhdGU6IERhdGVBZGFwdGVyQmFzZVxufTtcblxuZnVuY3Rpb24gYmluYXJ5U2VhcmNoKG1ldGFzZXQsIGF4aXMsIHZhbHVlLCBpbnRlcnNlY3QpIHtcbiAgICBjb25zdCB7IGNvbnRyb2xsZXIgLCBkYXRhICwgX3NvcnRlZCAgfSA9IG1ldGFzZXQ7XG4gICAgY29uc3QgaVNjYWxlID0gY29udHJvbGxlci5fY2FjaGVkTWV0YS5pU2NhbGU7XG4gICAgaWYgKGlTY2FsZSAmJiBheGlzID09PSBpU2NhbGUuYXhpcyAmJiBheGlzICE9PSAncicgJiYgX3NvcnRlZCAmJiBkYXRhLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBsb29rdXBNZXRob2QgPSBpU2NhbGUuX3JldmVyc2VQaXhlbHMgPyBfcmxvb2t1cEJ5S2V5IDogX2xvb2t1cEJ5S2V5O1xuICAgICAgICBpZiAoIWludGVyc2VjdCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvb2t1cE1ldGhvZChkYXRhLCBheGlzLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29udHJvbGxlci5fc2hhcmVkT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBkYXRhWzBdO1xuICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSB0eXBlb2YgZWwuZ2V0UmFuZ2UgPT09ICdmdW5jdGlvbicgJiYgZWwuZ2V0UmFuZ2UoYXhpcyk7XG4gICAgICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IGxvb2t1cE1ldGhvZChkYXRhLCBheGlzLCB2YWx1ZSAtIHJhbmdlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBsb29rdXBNZXRob2QoZGF0YSwgYXhpcywgdmFsdWUgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbG86IHN0YXJ0LmxvLFxuICAgICAgICAgICAgICAgICAgICBoaTogZW5kLmhpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBsbzogMCxcbiAgICAgICAgaGk6IGRhdGEubGVuZ3RoIC0gMVxuICAgIH07XG59XG4gZnVuY3Rpb24gZXZhbHVhdGVJbnRlcmFjdGlvbkl0ZW1zKGNoYXJ0LCBheGlzLCBwb3NpdGlvbiwgaGFuZGxlciwgaW50ZXJzZWN0KSB7XG4gICAgY29uc3QgbWV0YXNldHMgPSBjaGFydC5nZXRTb3J0ZWRWaXNpYmxlRGF0YXNldE1ldGFzKCk7XG4gICAgY29uc3QgdmFsdWUgPSBwb3NpdGlvbltheGlzXTtcbiAgICBmb3IobGV0IGkgPSAwLCBpbGVuID0gbWV0YXNldHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgY29uc3QgeyBpbmRleCAsIGRhdGEgIH0gPSBtZXRhc2V0c1tpXTtcbiAgICAgICAgY29uc3QgeyBsbyAsIGhpICB9ID0gYmluYXJ5U2VhcmNoKG1ldGFzZXRzW2ldLCBheGlzLCB2YWx1ZSwgaW50ZXJzZWN0KTtcbiAgICAgICAgZm9yKGxldCBqID0gbG87IGogPD0gaGk7ICsrail7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZGF0YVtqXTtcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5za2lwKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlcihlbGVtZW50LCBpbmRleCwgaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4gZnVuY3Rpb24gZ2V0RGlzdGFuY2VNZXRyaWNGb3JBeGlzKGF4aXMpIHtcbiAgICBjb25zdCB1c2VYID0gYXhpcy5pbmRleE9mKCd4JykgIT09IC0xO1xuICAgIGNvbnN0IHVzZVkgPSBheGlzLmluZGV4T2YoJ3knKSAhPT0gLTE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHB0MSwgcHQyKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhWCA9IHVzZVggPyBNYXRoLmFicyhwdDEueCAtIHB0Mi54KSA6IDA7XG4gICAgICAgIGNvbnN0IGRlbHRhWSA9IHVzZVkgPyBNYXRoLmFicyhwdDEueSAtIHB0Mi55KSA6IDA7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coZGVsdGFYLCAyKSArIE1hdGgucG93KGRlbHRhWSwgMikpO1xuICAgIH07XG59XG4gZnVuY3Rpb24gZ2V0SW50ZXJzZWN0SXRlbXMoY2hhcnQsIHBvc2l0aW9uLCBheGlzLCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICBpZiAoIWluY2x1ZGVJbnZpc2libGUgJiYgIWNoYXJ0LmlzUG9pbnRJbkFyZWEocG9zaXRpb24pKSB7XG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9XG4gICAgY29uc3QgZXZhbHVhdGlvbkZ1bmMgPSBmdW5jdGlvbihlbGVtZW50LCBkYXRhc2V0SW5kZXgsIGluZGV4KSB7XG4gICAgICAgIGlmICghaW5jbHVkZUludmlzaWJsZSAmJiAhX2lzUG9pbnRJbkFyZWEoZWxlbWVudCwgY2hhcnQuY2hhcnRBcmVhLCAwKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LmluUmFuZ2UocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgdXNlRmluYWxQb3NpdGlvbikpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgZGF0YXNldEluZGV4LFxuICAgICAgICAgICAgICAgIGluZGV4XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZXZhbHVhdGVJbnRlcmFjdGlvbkl0ZW1zKGNoYXJ0LCBheGlzLCBwb3NpdGlvbiwgZXZhbHVhdGlvbkZ1bmMsIHRydWUpO1xuICAgIHJldHVybiBpdGVtcztcbn1cbiBmdW5jdGlvbiBnZXROZWFyZXN0UmFkaWFsSXRlbXMoY2hhcnQsIHBvc2l0aW9uLCBheGlzLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgbGV0IGl0ZW1zID0gW107XG4gICAgZnVuY3Rpb24gZXZhbHVhdGlvbkZ1bmMoZWxlbWVudCwgZGF0YXNldEluZGV4LCBpbmRleCkge1xuICAgICAgICBjb25zdCB7IHN0YXJ0QW5nbGUgLCBlbmRBbmdsZSAgfSA9IGVsZW1lbnQuZ2V0UHJvcHMoW1xuICAgICAgICAgICAgJ3N0YXJ0QW5nbGUnLFxuICAgICAgICAgICAgJ2VuZEFuZ2xlJ1xuICAgICAgICBdLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgeyBhbmdsZSAgfSA9IGdldEFuZ2xlRnJvbVBvaW50KGVsZW1lbnQsIHtcbiAgICAgICAgICAgIHg6IHBvc2l0aW9uLngsXG4gICAgICAgICAgICB5OiBwb3NpdGlvbi55XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoX2FuZ2xlQmV0d2VlbihhbmdsZSwgc3RhcnRBbmdsZSwgZW5kQW5nbGUpKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgICAgIGRhdGFzZXRJbmRleCxcbiAgICAgICAgICAgICAgICBpbmRleFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXZhbHVhdGVJbnRlcmFjdGlvbkl0ZW1zKGNoYXJ0LCBheGlzLCBwb3NpdGlvbiwgZXZhbHVhdGlvbkZ1bmMpO1xuICAgIHJldHVybiBpdGVtcztcbn1cbiBmdW5jdGlvbiBnZXROZWFyZXN0Q2FydGVzaWFuSXRlbXMoY2hhcnQsIHBvc2l0aW9uLCBheGlzLCBpbnRlcnNlY3QsIHVzZUZpbmFsUG9zaXRpb24sIGluY2x1ZGVJbnZpc2libGUpIHtcbiAgICBsZXQgaXRlbXMgPSBbXTtcbiAgICBjb25zdCBkaXN0YW5jZU1ldHJpYyA9IGdldERpc3RhbmNlTWV0cmljRm9yQXhpcyhheGlzKTtcbiAgICBsZXQgbWluRGlzdGFuY2UgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgZnVuY3Rpb24gZXZhbHVhdGlvbkZ1bmMoZWxlbWVudCwgZGF0YXNldEluZGV4LCBpbmRleCkge1xuICAgICAgICBjb25zdCBpblJhbmdlID0gZWxlbWVudC5pblJhbmdlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgICAgICBpZiAoaW50ZXJzZWN0ICYmICFpblJhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2VudGVyID0gZWxlbWVudC5nZXRDZW50ZXJQb2ludCh1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgcG9pbnRJbkFyZWEgPSAhIWluY2x1ZGVJbnZpc2libGUgfHwgY2hhcnQuaXNQb2ludEluQXJlYShjZW50ZXIpO1xuICAgICAgICBpZiAoIXBvaW50SW5BcmVhICYmICFpblJhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZU1ldHJpYyhwb3NpdGlvbiwgY2VudGVyKTtcbiAgICAgICAgaWYgKGRpc3RhbmNlIDwgbWluRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIGl0ZW1zID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldEluZGV4LFxuICAgICAgICAgICAgICAgICAgICBpbmRleFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICB9IGVsc2UgaWYgKGRpc3RhbmNlID09PSBtaW5EaXN0YW5jZSkge1xuICAgICAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgICAgICBkYXRhc2V0SW5kZXgsXG4gICAgICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV2YWx1YXRlSW50ZXJhY3Rpb25JdGVtcyhjaGFydCwgYXhpcywgcG9zaXRpb24sIGV2YWx1YXRpb25GdW5jKTtcbiAgICByZXR1cm4gaXRlbXM7XG59XG4gZnVuY3Rpb24gZ2V0TmVhcmVzdEl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgaW50ZXJzZWN0LCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKSB7XG4gICAgaWYgKCFpbmNsdWRlSW52aXNpYmxlICYmICFjaGFydC5pc1BvaW50SW5BcmVhKHBvc2l0aW9uKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBheGlzID09PSAncicgJiYgIWludGVyc2VjdCA/IGdldE5lYXJlc3RSYWRpYWxJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIHVzZUZpbmFsUG9zaXRpb24pIDogZ2V0TmVhcmVzdENhcnRlc2lhbkl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgaW50ZXJzZWN0LCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKTtcbn1cbiBmdW5jdGlvbiBnZXRBeGlzSXRlbXMoY2hhcnQsIHBvc2l0aW9uLCBheGlzLCBpbnRlcnNlY3QsIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdO1xuICAgIGNvbnN0IHJhbmdlTWV0aG9kID0gYXhpcyA9PT0gJ3gnID8gJ2luWFJhbmdlJyA6ICdpbllSYW5nZSc7XG4gICAgbGV0IGludGVyc2VjdHNJdGVtID0gZmFsc2U7XG4gICAgZXZhbHVhdGVJbnRlcmFjdGlvbkl0ZW1zKGNoYXJ0LCBheGlzLCBwb3NpdGlvbiwgKGVsZW1lbnQsIGRhdGFzZXRJbmRleCwgaW5kZXgpPT57XG4gICAgICAgIGlmIChlbGVtZW50W3JhbmdlTWV0aG9kXShwb3NpdGlvbltheGlzXSwgdXNlRmluYWxQb3NpdGlvbikpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgZGF0YXNldEluZGV4LFxuICAgICAgICAgICAgICAgIGluZGV4XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGludGVyc2VjdHNJdGVtID0gaW50ZXJzZWN0c0l0ZW0gfHwgZWxlbWVudC5pblJhbmdlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGludGVyc2VjdCAmJiAhaW50ZXJzZWN0c0l0ZW0pIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbXM7XG59XG4gdmFyIEludGVyYWN0aW9uID0ge1xuICAgIGV2YWx1YXRlSW50ZXJhY3Rpb25JdGVtcyxcbiAgICBtb2Rlczoge1xuIGluZGV4IChjaGFydCwgZSwgb3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGUsIGNoYXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IGF4aXMgPSBvcHRpb25zLmF4aXMgfHwgJ3gnO1xuICAgICAgICAgICAgY29uc3QgaW5jbHVkZUludmlzaWJsZSA9IG9wdGlvbnMuaW5jbHVkZUludmlzaWJsZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gb3B0aW9ucy5pbnRlcnNlY3QgPyBnZXRJbnRlcnNlY3RJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIHVzZUZpbmFsUG9zaXRpb24sIGluY2x1ZGVJbnZpc2libGUpIDogZ2V0TmVhcmVzdEl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgZmFsc2UsIHVzZUZpbmFsUG9zaXRpb24sIGluY2x1ZGVJbnZpc2libGUpO1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbXTtcbiAgICAgICAgICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hhcnQuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpLmZvckVhY2goKG1ldGEpPT57XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpdGVtc1swXS5pbmRleDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gbWV0YS5kYXRhW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5za2lwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXRJbmRleDogbWV0YS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9LFxuIGRhdGFzZXQgKGNoYXJ0LCBlLCBvcHRpb25zLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGdldFJlbGF0aXZlUG9zaXRpb24oZSwgY2hhcnQpO1xuICAgICAgICAgICAgY29uc3QgYXhpcyA9IG9wdGlvbnMuYXhpcyB8fCAneHknO1xuICAgICAgICAgICAgY29uc3QgaW5jbHVkZUludmlzaWJsZSA9IG9wdGlvbnMuaW5jbHVkZUludmlzaWJsZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIGxldCBpdGVtcyA9IG9wdGlvbnMuaW50ZXJzZWN0ID8gZ2V0SW50ZXJzZWN0SXRlbXMoY2hhcnQsIHBvc2l0aW9uLCBheGlzLCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKSA6IGdldE5lYXJlc3RJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIGZhbHNlLCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKTtcbiAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YXNldEluZGV4ID0gaXRlbXNbMF0uZGF0YXNldEluZGV4O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjaGFydC5nZXREYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpLmRhdGE7XG4gICAgICAgICAgICAgICAgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZGF0YVtpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfSxcbiBwb2ludCAoY2hhcnQsIGUsIG9wdGlvbnMsIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlLCBjaGFydCk7XG4gICAgICAgICAgICBjb25zdCBheGlzID0gb3B0aW9ucy5heGlzIHx8ICd4eSc7XG4gICAgICAgICAgICBjb25zdCBpbmNsdWRlSW52aXNpYmxlID0gb3B0aW9ucy5pbmNsdWRlSW52aXNpYmxlIHx8IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGdldEludGVyc2VjdEl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgdXNlRmluYWxQb3NpdGlvbiwgaW5jbHVkZUludmlzaWJsZSk7XG4gICAgICAgIH0sXG4gbmVhcmVzdCAoY2hhcnQsIGUsIG9wdGlvbnMsIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlLCBjaGFydCk7XG4gICAgICAgICAgICBjb25zdCBheGlzID0gb3B0aW9ucy5heGlzIHx8ICd4eSc7XG4gICAgICAgICAgICBjb25zdCBpbmNsdWRlSW52aXNpYmxlID0gb3B0aW9ucy5pbmNsdWRlSW52aXNpYmxlIHx8IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGdldE5lYXJlc3RJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIG9wdGlvbnMuaW50ZXJzZWN0LCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKTtcbiAgICAgICAgfSxcbiB4IChjaGFydCwgZSwgb3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGUsIGNoYXJ0KTtcbiAgICAgICAgICAgIHJldHVybiBnZXRBeGlzSXRlbXMoY2hhcnQsIHBvc2l0aW9uLCAneCcsIG9wdGlvbnMuaW50ZXJzZWN0LCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICAgICAgfSxcbiB5IChjaGFydCwgZSwgb3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGUsIGNoYXJ0KTtcbiAgICAgICAgICAgIHJldHVybiBnZXRBeGlzSXRlbXMoY2hhcnQsIHBvc2l0aW9uLCAneScsIG9wdGlvbnMuaW50ZXJzZWN0LCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmNvbnN0IFNUQVRJQ19QT1NJVElPTlMgPSBbXG4gICAgJ2xlZnQnLFxuICAgICd0b3AnLFxuICAgICdyaWdodCcsXG4gICAgJ2JvdHRvbSdcbl07XG5mdW5jdGlvbiBmaWx0ZXJCeVBvc2l0aW9uKGFycmF5LCBwb3NpdGlvbikge1xuICAgIHJldHVybiBhcnJheS5maWx0ZXIoKHYpPT52LnBvcyA9PT0gcG9zaXRpb24pO1xufVxuZnVuY3Rpb24gZmlsdGVyRHluYW1pY1Bvc2l0aW9uQnlBeGlzKGFycmF5LCBheGlzKSB7XG4gICAgcmV0dXJuIGFycmF5LmZpbHRlcigodik9PlNUQVRJQ19QT1NJVElPTlMuaW5kZXhPZih2LnBvcykgPT09IC0xICYmIHYuYm94LmF4aXMgPT09IGF4aXMpO1xufVxuZnVuY3Rpb24gc29ydEJ5V2VpZ2h0KGFycmF5LCByZXZlcnNlKSB7XG4gICAgcmV0dXJuIGFycmF5LnNvcnQoKGEsIGIpPT57XG4gICAgICAgIGNvbnN0IHYwID0gcmV2ZXJzZSA/IGIgOiBhO1xuICAgICAgICBjb25zdCB2MSA9IHJldmVyc2UgPyBhIDogYjtcbiAgICAgICAgcmV0dXJuIHYwLndlaWdodCA9PT0gdjEud2VpZ2h0ID8gdjAuaW5kZXggLSB2MS5pbmRleCA6IHYwLndlaWdodCAtIHYxLndlaWdodDtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHdyYXBCb3hlcyhib3hlcykge1xuICAgIGNvbnN0IGxheW91dEJveGVzID0gW107XG4gICAgbGV0IGksIGlsZW4sIGJveCwgcG9zLCBzdGFjaywgc3RhY2tXZWlnaHQ7XG4gICAgZm9yKGkgPSAwLCBpbGVuID0gKGJveGVzIHx8IFtdKS5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICBib3ggPSBib3hlc1tpXTtcbiAgICAgICAgKHsgcG9zaXRpb246IHBvcyAsIG9wdGlvbnM6IHsgc3RhY2sgLCBzdGFja1dlaWdodCA9MSAgfSAgfSA9IGJveCk7XG4gICAgICAgIGxheW91dEJveGVzLnB1c2goe1xuICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICBib3gsXG4gICAgICAgICAgICBwb3MsXG4gICAgICAgICAgICBob3Jpem9udGFsOiBib3guaXNIb3Jpem9udGFsKCksXG4gICAgICAgICAgICB3ZWlnaHQ6IGJveC53ZWlnaHQsXG4gICAgICAgICAgICBzdGFjazogc3RhY2sgJiYgcG9zICsgc3RhY2ssXG4gICAgICAgICAgICBzdGFja1dlaWdodFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGxheW91dEJveGVzO1xufVxuZnVuY3Rpb24gYnVpbGRTdGFja3MobGF5b3V0cykge1xuICAgIGNvbnN0IHN0YWNrcyA9IHt9O1xuICAgIGZvciAoY29uc3Qgd3JhcCBvZiBsYXlvdXRzKXtcbiAgICAgICAgY29uc3QgeyBzdGFjayAsIHBvcyAsIHN0YWNrV2VpZ2h0ICB9ID0gd3JhcDtcbiAgICAgICAgaWYgKCFzdGFjayB8fCAhU1RBVElDX1BPU0lUSU9OUy5pbmNsdWRlcyhwb3MpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfc3RhY2sgPSBzdGFja3Nbc3RhY2tdIHx8IChzdGFja3Nbc3RhY2tdID0ge1xuICAgICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgICBwbGFjZWQ6IDAsXG4gICAgICAgICAgICB3ZWlnaHQ6IDAsXG4gICAgICAgICAgICBzaXplOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBfc3RhY2suY291bnQrKztcbiAgICAgICAgX3N0YWNrLndlaWdodCArPSBzdGFja1dlaWdodDtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrcztcbn1cbiBmdW5jdGlvbiBzZXRMYXlvdXREaW1zKGxheW91dHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHN0YWNrcyA9IGJ1aWxkU3RhY2tzKGxheW91dHMpO1xuICAgIGNvbnN0IHsgdkJveE1heFdpZHRoICwgaEJveE1heEhlaWdodCAgfSA9IHBhcmFtcztcbiAgICBsZXQgaSwgaWxlbiwgbGF5b3V0O1xuICAgIGZvcihpID0gMCwgaWxlbiA9IGxheW91dHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgbGF5b3V0ID0gbGF5b3V0c1tpXTtcbiAgICAgICAgY29uc3QgeyBmdWxsU2l6ZSAgfSA9IGxheW91dC5ib3g7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gc3RhY2tzW2xheW91dC5zdGFja107XG4gICAgICAgIGNvbnN0IGZhY3RvciA9IHN0YWNrICYmIGxheW91dC5zdGFja1dlaWdodCAvIHN0YWNrLndlaWdodDtcbiAgICAgICAgaWYgKGxheW91dC5ob3Jpem9udGFsKSB7XG4gICAgICAgICAgICBsYXlvdXQud2lkdGggPSBmYWN0b3IgPyBmYWN0b3IgKiB2Qm94TWF4V2lkdGggOiBmdWxsU2l6ZSAmJiBwYXJhbXMuYXZhaWxhYmxlV2lkdGg7XG4gICAgICAgICAgICBsYXlvdXQuaGVpZ2h0ID0gaEJveE1heEhlaWdodDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxheW91dC53aWR0aCA9IHZCb3hNYXhXaWR0aDtcbiAgICAgICAgICAgIGxheW91dC5oZWlnaHQgPSBmYWN0b3IgPyBmYWN0b3IgKiBoQm94TWF4SGVpZ2h0IDogZnVsbFNpemUgJiYgcGFyYW1zLmF2YWlsYWJsZUhlaWdodDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RhY2tzO1xufVxuZnVuY3Rpb24gYnVpbGRMYXlvdXRCb3hlcyhib3hlcykge1xuICAgIGNvbnN0IGxheW91dEJveGVzID0gd3JhcEJveGVzKGJveGVzKTtcbiAgICBjb25zdCBmdWxsU2l6ZSA9IHNvcnRCeVdlaWdodChsYXlvdXRCb3hlcy5maWx0ZXIoKHdyYXApPT53cmFwLmJveC5mdWxsU2l6ZSksIHRydWUpO1xuICAgIGNvbnN0IGxlZnQgPSBzb3J0QnlXZWlnaHQoZmlsdGVyQnlQb3NpdGlvbihsYXlvdXRCb3hlcywgJ2xlZnQnKSwgdHJ1ZSk7XG4gICAgY29uc3QgcmlnaHQgPSBzb3J0QnlXZWlnaHQoZmlsdGVyQnlQb3NpdGlvbihsYXlvdXRCb3hlcywgJ3JpZ2h0JykpO1xuICAgIGNvbnN0IHRvcCA9IHNvcnRCeVdlaWdodChmaWx0ZXJCeVBvc2l0aW9uKGxheW91dEJveGVzLCAndG9wJyksIHRydWUpO1xuICAgIGNvbnN0IGJvdHRvbSA9IHNvcnRCeVdlaWdodChmaWx0ZXJCeVBvc2l0aW9uKGxheW91dEJveGVzLCAnYm90dG9tJykpO1xuICAgIGNvbnN0IGNlbnRlckhvcml6b250YWwgPSBmaWx0ZXJEeW5hbWljUG9zaXRpb25CeUF4aXMobGF5b3V0Qm94ZXMsICd4Jyk7XG4gICAgY29uc3QgY2VudGVyVmVydGljYWwgPSBmaWx0ZXJEeW5hbWljUG9zaXRpb25CeUF4aXMobGF5b3V0Qm94ZXMsICd5Jyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZnVsbFNpemUsXG4gICAgICAgIGxlZnRBbmRUb3A6IGxlZnQuY29uY2F0KHRvcCksXG4gICAgICAgIHJpZ2h0QW5kQm90dG9tOiByaWdodC5jb25jYXQoY2VudGVyVmVydGljYWwpLmNvbmNhdChib3R0b20pLmNvbmNhdChjZW50ZXJIb3Jpem9udGFsKSxcbiAgICAgICAgY2hhcnRBcmVhOiBmaWx0ZXJCeVBvc2l0aW9uKGxheW91dEJveGVzLCAnY2hhcnRBcmVhJyksXG4gICAgICAgIHZlcnRpY2FsOiBsZWZ0LmNvbmNhdChyaWdodCkuY29uY2F0KGNlbnRlclZlcnRpY2FsKSxcbiAgICAgICAgaG9yaXpvbnRhbDogdG9wLmNvbmNhdChib3R0b20pLmNvbmNhdChjZW50ZXJIb3Jpem9udGFsKVxuICAgIH07XG59XG5mdW5jdGlvbiBnZXRDb21iaW5lZE1heChtYXhQYWRkaW5nLCBjaGFydEFyZWEsIGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgobWF4UGFkZGluZ1thXSwgY2hhcnRBcmVhW2FdKSArIE1hdGgubWF4KG1heFBhZGRpbmdbYl0sIGNoYXJ0QXJlYVtiXSk7XG59XG5mdW5jdGlvbiB1cGRhdGVNYXhQYWRkaW5nKG1heFBhZGRpbmcsIGJveFBhZGRpbmcpIHtcbiAgICBtYXhQYWRkaW5nLnRvcCA9IE1hdGgubWF4KG1heFBhZGRpbmcudG9wLCBib3hQYWRkaW5nLnRvcCk7XG4gICAgbWF4UGFkZGluZy5sZWZ0ID0gTWF0aC5tYXgobWF4UGFkZGluZy5sZWZ0LCBib3hQYWRkaW5nLmxlZnQpO1xuICAgIG1heFBhZGRpbmcuYm90dG9tID0gTWF0aC5tYXgobWF4UGFkZGluZy5ib3R0b20sIGJveFBhZGRpbmcuYm90dG9tKTtcbiAgICBtYXhQYWRkaW5nLnJpZ2h0ID0gTWF0aC5tYXgobWF4UGFkZGluZy5yaWdodCwgYm94UGFkZGluZy5yaWdodCk7XG59XG5mdW5jdGlvbiB1cGRhdGVEaW1zKGNoYXJ0QXJlYSwgcGFyYW1zLCBsYXlvdXQsIHN0YWNrcykge1xuICAgIGNvbnN0IHsgcG9zICwgYm94ICB9ID0gbGF5b3V0O1xuICAgIGNvbnN0IG1heFBhZGRpbmcgPSBjaGFydEFyZWEubWF4UGFkZGluZztcbiAgICBpZiAoIWlzT2JqZWN0KHBvcykpIHtcbiAgICAgICAgaWYgKGxheW91dC5zaXplKSB7XG4gICAgICAgICAgICBjaGFydEFyZWFbcG9zXSAtPSBsYXlvdXQuc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGFjayA9IHN0YWNrc1tsYXlvdXQuc3RhY2tdIHx8IHtcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICBjb3VudDogMVxuICAgICAgICB9O1xuICAgICAgICBzdGFjay5zaXplID0gTWF0aC5tYXgoc3RhY2suc2l6ZSwgbGF5b3V0Lmhvcml6b250YWwgPyBib3guaGVpZ2h0IDogYm94LndpZHRoKTtcbiAgICAgICAgbGF5b3V0LnNpemUgPSBzdGFjay5zaXplIC8gc3RhY2suY291bnQ7XG4gICAgICAgIGNoYXJ0QXJlYVtwb3NdICs9IGxheW91dC5zaXplO1xuICAgIH1cbiAgICBpZiAoYm94LmdldFBhZGRpbmcpIHtcbiAgICAgICAgdXBkYXRlTWF4UGFkZGluZyhtYXhQYWRkaW5nLCBib3guZ2V0UGFkZGluZygpKTtcbiAgICB9XG4gICAgY29uc3QgbmV3V2lkdGggPSBNYXRoLm1heCgwLCBwYXJhbXMub3V0ZXJXaWR0aCAtIGdldENvbWJpbmVkTWF4KG1heFBhZGRpbmcsIGNoYXJ0QXJlYSwgJ2xlZnQnLCAncmlnaHQnKSk7XG4gICAgY29uc3QgbmV3SGVpZ2h0ID0gTWF0aC5tYXgoMCwgcGFyYW1zLm91dGVySGVpZ2h0IC0gZ2V0Q29tYmluZWRNYXgobWF4UGFkZGluZywgY2hhcnRBcmVhLCAndG9wJywgJ2JvdHRvbScpKTtcbiAgICBjb25zdCB3aWR0aENoYW5nZWQgPSBuZXdXaWR0aCAhPT0gY2hhcnRBcmVhLnc7XG4gICAgY29uc3QgaGVpZ2h0Q2hhbmdlZCA9IG5ld0hlaWdodCAhPT0gY2hhcnRBcmVhLmg7XG4gICAgY2hhcnRBcmVhLncgPSBuZXdXaWR0aDtcbiAgICBjaGFydEFyZWEuaCA9IG5ld0hlaWdodDtcbiAgICByZXR1cm4gbGF5b3V0Lmhvcml6b250YWwgPyB7XG4gICAgICAgIHNhbWU6IHdpZHRoQ2hhbmdlZCxcbiAgICAgICAgb3RoZXI6IGhlaWdodENoYW5nZWRcbiAgICB9IDoge1xuICAgICAgICBzYW1lOiBoZWlnaHRDaGFuZ2VkLFxuICAgICAgICBvdGhlcjogd2lkdGhDaGFuZ2VkXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGhhbmRsZU1heFBhZGRpbmcoY2hhcnRBcmVhKSB7XG4gICAgY29uc3QgbWF4UGFkZGluZyA9IGNoYXJ0QXJlYS5tYXhQYWRkaW5nO1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVBvcyhwb3MpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlID0gTWF0aC5tYXgobWF4UGFkZGluZ1twb3NdIC0gY2hhcnRBcmVhW3Bvc10sIDApO1xuICAgICAgICBjaGFydEFyZWFbcG9zXSArPSBjaGFuZ2U7XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfVxuICAgIGNoYXJ0QXJlYS55ICs9IHVwZGF0ZVBvcygndG9wJyk7XG4gICAgY2hhcnRBcmVhLnggKz0gdXBkYXRlUG9zKCdsZWZ0Jyk7XG4gICAgdXBkYXRlUG9zKCdyaWdodCcpO1xuICAgIHVwZGF0ZVBvcygnYm90dG9tJyk7XG59XG5mdW5jdGlvbiBnZXRNYXJnaW5zKGhvcml6b250YWwsIGNoYXJ0QXJlYSkge1xuICAgIGNvbnN0IG1heFBhZGRpbmcgPSBjaGFydEFyZWEubWF4UGFkZGluZztcbiAgICBmdW5jdGlvbiBtYXJnaW5Gb3JQb3NpdGlvbnMocG9zaXRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IHtcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMFxuICAgICAgICB9O1xuICAgICAgICBwb3NpdGlvbnMuZm9yRWFjaCgocG9zKT0+e1xuICAgICAgICAgICAgbWFyZ2luW3Bvc10gPSBNYXRoLm1heChjaGFydEFyZWFbcG9zXSwgbWF4UGFkZGluZ1twb3NdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtYXJnaW47XG4gICAgfVxuICAgIHJldHVybiBob3Jpem9udGFsID8gbWFyZ2luRm9yUG9zaXRpb25zKFtcbiAgICAgICAgJ2xlZnQnLFxuICAgICAgICAncmlnaHQnXG4gICAgXSkgOiBtYXJnaW5Gb3JQb3NpdGlvbnMoW1xuICAgICAgICAndG9wJyxcbiAgICAgICAgJ2JvdHRvbSdcbiAgICBdKTtcbn1cbmZ1bmN0aW9uIGZpdEJveGVzKGJveGVzLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKSB7XG4gICAgY29uc3QgcmVmaXRCb3hlcyA9IFtdO1xuICAgIGxldCBpLCBpbGVuLCBsYXlvdXQsIGJveCwgcmVmaXQsIGNoYW5nZWQ7XG4gICAgZm9yKGkgPSAwLCBpbGVuID0gYm94ZXMubGVuZ3RoLCByZWZpdCA9IDA7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICBsYXlvdXQgPSBib3hlc1tpXTtcbiAgICAgICAgYm94ID0gbGF5b3V0LmJveDtcbiAgICAgICAgYm94LnVwZGF0ZShsYXlvdXQud2lkdGggfHwgY2hhcnRBcmVhLncsIGxheW91dC5oZWlnaHQgfHwgY2hhcnRBcmVhLmgsIGdldE1hcmdpbnMobGF5b3V0Lmhvcml6b250YWwsIGNoYXJ0QXJlYSkpO1xuICAgICAgICBjb25zdCB7IHNhbWUgLCBvdGhlciAgfSA9IHVwZGF0ZURpbXMoY2hhcnRBcmVhLCBwYXJhbXMsIGxheW91dCwgc3RhY2tzKTtcbiAgICAgICAgcmVmaXQgfD0gc2FtZSAmJiByZWZpdEJveGVzLmxlbmd0aDtcbiAgICAgICAgY2hhbmdlZCA9IGNoYW5nZWQgfHwgb3RoZXI7XG4gICAgICAgIGlmICghYm94LmZ1bGxTaXplKSB7XG4gICAgICAgICAgICByZWZpdEJveGVzLnB1c2gobGF5b3V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVmaXQgJiYgZml0Qm94ZXMocmVmaXRCb3hlcywgY2hhcnRBcmVhLCBwYXJhbXMsIHN0YWNrcykgfHwgY2hhbmdlZDtcbn1cbmZ1bmN0aW9uIHNldEJveERpbXMoYm94LCBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBib3gudG9wID0gdG9wO1xuICAgIGJveC5sZWZ0ID0gbGVmdDtcbiAgICBib3gucmlnaHQgPSBsZWZ0ICsgd2lkdGg7XG4gICAgYm94LmJvdHRvbSA9IHRvcCArIGhlaWdodDtcbiAgICBib3gud2lkdGggPSB3aWR0aDtcbiAgICBib3guaGVpZ2h0ID0gaGVpZ2h0O1xufVxuZnVuY3Rpb24gcGxhY2VCb3hlcyhib3hlcywgY2hhcnRBcmVhLCBwYXJhbXMsIHN0YWNrcykge1xuICAgIGNvbnN0IHVzZXJQYWRkaW5nID0gcGFyYW1zLnBhZGRpbmc7XG4gICAgbGV0IHsgeCAsIHkgIH0gPSBjaGFydEFyZWE7XG4gICAgZm9yIChjb25zdCBsYXlvdXQgb2YgYm94ZXMpe1xuICAgICAgICBjb25zdCBib3ggPSBsYXlvdXQuYm94O1xuICAgICAgICBjb25zdCBzdGFjayA9IHN0YWNrc1tsYXlvdXQuc3RhY2tdIHx8IHtcbiAgICAgICAgICAgIGNvdW50OiAxLFxuICAgICAgICAgICAgcGxhY2VkOiAwLFxuICAgICAgICAgICAgd2VpZ2h0OiAxXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHdlaWdodCA9IGxheW91dC5zdGFja1dlaWdodCAvIHN0YWNrLndlaWdodCB8fCAxO1xuICAgICAgICBpZiAobGF5b3V0Lmhvcml6b250YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gY2hhcnRBcmVhLncgKiB3ZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBzdGFjay5zaXplIHx8IGJveC5oZWlnaHQ7XG4gICAgICAgICAgICBpZiAoZGVmaW5lZChzdGFjay5zdGFydCkpIHtcbiAgICAgICAgICAgICAgICB5ID0gc3RhY2suc3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYm94LmZ1bGxTaXplKSB7XG4gICAgICAgICAgICAgICAgc2V0Qm94RGltcyhib3gsIHVzZXJQYWRkaW5nLmxlZnQsIHksIHBhcmFtcy5vdXRlcldpZHRoIC0gdXNlclBhZGRpbmcucmlnaHQgLSB1c2VyUGFkZGluZy5sZWZ0LCBoZWlnaHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRCb3hEaW1zKGJveCwgY2hhcnRBcmVhLmxlZnQgKyBzdGFjay5wbGFjZWQsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhY2suc3RhcnQgPSB5O1xuICAgICAgICAgICAgc3RhY2sucGxhY2VkICs9IHdpZHRoO1xuICAgICAgICAgICAgeSA9IGJveC5ib3R0b207XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQxID0gY2hhcnRBcmVhLmggKiB3ZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCB3aWR0aDEgPSBzdGFjay5zaXplIHx8IGJveC53aWR0aDtcbiAgICAgICAgICAgIGlmIChkZWZpbmVkKHN0YWNrLnN0YXJ0KSkge1xuICAgICAgICAgICAgICAgIHggPSBzdGFjay5zdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChib3guZnVsbFNpemUpIHtcbiAgICAgICAgICAgICAgICBzZXRCb3hEaW1zKGJveCwgeCwgdXNlclBhZGRpbmcudG9wLCB3aWR0aDEsIHBhcmFtcy5vdXRlckhlaWdodCAtIHVzZXJQYWRkaW5nLmJvdHRvbSAtIHVzZXJQYWRkaW5nLnRvcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldEJveERpbXMoYm94LCB4LCBjaGFydEFyZWEudG9wICsgc3RhY2sucGxhY2VkLCB3aWR0aDEsIGhlaWdodDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhY2suc3RhcnQgPSB4O1xuICAgICAgICAgICAgc3RhY2sucGxhY2VkICs9IGhlaWdodDE7XG4gICAgICAgICAgICB4ID0gYm94LnJpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoYXJ0QXJlYS54ID0geDtcbiAgICBjaGFydEFyZWEueSA9IHk7XG59XG52YXIgbGF5b3V0cyA9IHtcbiBhZGRCb3ggKGNoYXJ0LCBpdGVtKSB7XG4gICAgICAgIGlmICghY2hhcnQuYm94ZXMpIHtcbiAgICAgICAgICAgIGNoYXJ0LmJveGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaXRlbS5mdWxsU2l6ZSA9IGl0ZW0uZnVsbFNpemUgfHwgZmFsc2U7XG4gICAgICAgIGl0ZW0ucG9zaXRpb24gPSBpdGVtLnBvc2l0aW9uIHx8ICd0b3AnO1xuICAgICAgICBpdGVtLndlaWdodCA9IGl0ZW0ud2VpZ2h0IHx8IDA7XG4gICAgICAgIGl0ZW0uX2xheWVycyA9IGl0ZW0uX2xheWVycyB8fCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB6OiAwLFxuICAgICAgICAgICAgICAgICAgICBkcmF3IChjaGFydEFyZWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZHJhdyhjaGFydEFyZWEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfTtcbiAgICAgICAgY2hhcnQuYm94ZXMucHVzaChpdGVtKTtcbiAgICB9LFxuIHJlbW92ZUJveCAoY2hhcnQsIGxheW91dEl0ZW0pIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBjaGFydC5ib3hlcyA/IGNoYXJ0LmJveGVzLmluZGV4T2YobGF5b3V0SXRlbSkgOiAtMTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgY2hhcnQuYm94ZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH0sXG4gY29uZmlndXJlIChjaGFydCwgaXRlbSwgb3B0aW9ucykge1xuICAgICAgICBpdGVtLmZ1bGxTaXplID0gb3B0aW9ucy5mdWxsU2l6ZTtcbiAgICAgICAgaXRlbS5wb3NpdGlvbiA9IG9wdGlvbnMucG9zaXRpb247XG4gICAgICAgIGl0ZW0ud2VpZ2h0ID0gb3B0aW9ucy53ZWlnaHQ7XG4gICAgfSxcbiB1cGRhdGUgKGNoYXJ0LCB3aWR0aCwgaGVpZ2h0LCBtaW5QYWRkaW5nKSB7XG4gICAgICAgIGlmICghY2hhcnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKGNoYXJ0Lm9wdGlvbnMubGF5b3V0LnBhZGRpbmcpO1xuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IE1hdGgubWF4KHdpZHRoIC0gcGFkZGluZy53aWR0aCwgMCk7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZUhlaWdodCA9IE1hdGgubWF4KGhlaWdodCAtIHBhZGRpbmcuaGVpZ2h0LCAwKTtcbiAgICAgICAgY29uc3QgYm94ZXMgPSBidWlsZExheW91dEJveGVzKGNoYXJ0LmJveGVzKTtcbiAgICAgICAgY29uc3QgdmVydGljYWxCb3hlcyA9IGJveGVzLnZlcnRpY2FsO1xuICAgICAgICBjb25zdCBob3Jpem9udGFsQm94ZXMgPSBib3hlcy5ob3Jpem9udGFsO1xuICAgICAgICBlYWNoKGNoYXJ0LmJveGVzLCAoYm94KT0+e1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBib3guYmVmb3JlTGF5b3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYm94LmJlZm9yZUxheW91dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdmlzaWJsZVZlcnRpY2FsQm94Q291bnQgPSB2ZXJ0aWNhbEJveGVzLnJlZHVjZSgodG90YWwsIHdyYXApPT53cmFwLmJveC5vcHRpb25zICYmIHdyYXAuYm94Lm9wdGlvbnMuZGlzcGxheSA9PT0gZmFsc2UgPyB0b3RhbCA6IHRvdGFsICsgMSwgMCkgfHwgMTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgICAgICBvdXRlcldpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIG91dGVySGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICBwYWRkaW5nLFxuICAgICAgICAgICAgYXZhaWxhYmxlV2lkdGgsXG4gICAgICAgICAgICBhdmFpbGFibGVIZWlnaHQsXG4gICAgICAgICAgICB2Qm94TWF4V2lkdGg6IGF2YWlsYWJsZVdpZHRoIC8gMiAvIHZpc2libGVWZXJ0aWNhbEJveENvdW50LFxuICAgICAgICAgICAgaEJveE1heEhlaWdodDogYXZhaWxhYmxlSGVpZ2h0IC8gMlxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbWF4UGFkZGluZyA9IE9iamVjdC5hc3NpZ24oe30sIHBhZGRpbmcpO1xuICAgICAgICB1cGRhdGVNYXhQYWRkaW5nKG1heFBhZGRpbmcsIHRvUGFkZGluZyhtaW5QYWRkaW5nKSk7XG4gICAgICAgIGNvbnN0IGNoYXJ0QXJlYSA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgbWF4UGFkZGluZyxcbiAgICAgICAgICAgIHc6IGF2YWlsYWJsZVdpZHRoLFxuICAgICAgICAgICAgaDogYXZhaWxhYmxlSGVpZ2h0LFxuICAgICAgICAgICAgeDogcGFkZGluZy5sZWZ0LFxuICAgICAgICAgICAgeTogcGFkZGluZy50b3BcbiAgICAgICAgfSwgcGFkZGluZyk7XG4gICAgICAgIGNvbnN0IHN0YWNrcyA9IHNldExheW91dERpbXModmVydGljYWxCb3hlcy5jb25jYXQoaG9yaXpvbnRhbEJveGVzKSwgcGFyYW1zKTtcbiAgICAgICAgZml0Qm94ZXMoYm94ZXMuZnVsbFNpemUsIGNoYXJ0QXJlYSwgcGFyYW1zLCBzdGFja3MpO1xuICAgICAgICBmaXRCb3hlcyh2ZXJ0aWNhbEJveGVzLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKTtcbiAgICAgICAgaWYgKGZpdEJveGVzKGhvcml6b250YWxCb3hlcywgY2hhcnRBcmVhLCBwYXJhbXMsIHN0YWNrcykpIHtcbiAgICAgICAgICAgIGZpdEJveGVzKHZlcnRpY2FsQm94ZXMsIGNoYXJ0QXJlYSwgcGFyYW1zLCBzdGFja3MpO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZU1heFBhZGRpbmcoY2hhcnRBcmVhKTtcbiAgICAgICAgcGxhY2VCb3hlcyhib3hlcy5sZWZ0QW5kVG9wLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKTtcbiAgICAgICAgY2hhcnRBcmVhLnggKz0gY2hhcnRBcmVhLnc7XG4gICAgICAgIGNoYXJ0QXJlYS55ICs9IGNoYXJ0QXJlYS5oO1xuICAgICAgICBwbGFjZUJveGVzKGJveGVzLnJpZ2h0QW5kQm90dG9tLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKTtcbiAgICAgICAgY2hhcnQuY2hhcnRBcmVhID0ge1xuICAgICAgICAgICAgbGVmdDogY2hhcnRBcmVhLmxlZnQsXG4gICAgICAgICAgICB0b3A6IGNoYXJ0QXJlYS50b3AsXG4gICAgICAgICAgICByaWdodDogY2hhcnRBcmVhLmxlZnQgKyBjaGFydEFyZWEudyxcbiAgICAgICAgICAgIGJvdHRvbTogY2hhcnRBcmVhLnRvcCArIGNoYXJ0QXJlYS5oLFxuICAgICAgICAgICAgaGVpZ2h0OiBjaGFydEFyZWEuaCxcbiAgICAgICAgICAgIHdpZHRoOiBjaGFydEFyZWEud1xuICAgICAgICB9O1xuICAgICAgICBlYWNoKGJveGVzLmNoYXJ0QXJlYSwgKGxheW91dCk9PntcbiAgICAgICAgICAgIGNvbnN0IGJveCA9IGxheW91dC5ib3g7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGJveCwgY2hhcnQuY2hhcnRBcmVhKTtcbiAgICAgICAgICAgIGJveC51cGRhdGUoY2hhcnRBcmVhLncsIGNoYXJ0QXJlYS5oLCB7XG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuY2xhc3MgQmFzZVBsYXRmb3JtIHtcbiBhY3F1aXJlQ29udGV4dChjYW52YXMsIGFzcGVjdFJhdGlvKSB7fVxuIHJlbGVhc2VDb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiBhZGRFdmVudExpc3RlbmVyKGNoYXJ0LCB0eXBlLCBsaXN0ZW5lcikge31cbiByZW1vdmVFdmVudExpc3RlbmVyKGNoYXJ0LCB0eXBlLCBsaXN0ZW5lcikge31cbiBnZXREZXZpY2VQaXhlbFJhdGlvKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gZ2V0TWF4aW11bVNpemUoZWxlbWVudCwgd2lkdGgsIGhlaWdodCwgYXNwZWN0UmF0aW8pIHtcbiAgICAgICAgd2lkdGggPSBNYXRoLm1heCgwLCB3aWR0aCB8fCBlbGVtZW50LndpZHRoKTtcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IGVsZW1lbnQuaGVpZ2h0O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGgubWF4KDAsIGFzcGVjdFJhdGlvID8gTWF0aC5mbG9vcih3aWR0aCAvIGFzcGVjdFJhdGlvKSA6IGhlaWdodClcbiAgICAgICAgfTtcbiAgICB9XG4gaXNBdHRhY2hlZChjYW52YXMpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuIHVwZGF0ZUNvbmZpZyhjb25maWcpIHtcbiAgICB9XG59XG5cbmNsYXNzIEJhc2ljUGxhdGZvcm0gZXh0ZW5kcyBCYXNlUGxhdGZvcm0ge1xuICAgIGFjcXVpcmVDb250ZXh0KGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gJiYgaXRlbS5nZXRDb250ZXh0ICYmIGl0ZW0uZ2V0Q29udGV4dCgnMmQnKSB8fCBudWxsO1xuICAgIH1cbiAgICB1cGRhdGVDb25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmFuaW1hdGlvbiA9IGZhbHNlO1xuICAgIH1cbn1cblxuY29uc3QgRVhQQU5ET19LRVkgPSAnJGNoYXJ0anMnO1xuIGNvbnN0IEVWRU5UX1RZUEVTID0ge1xuICAgIHRvdWNoc3RhcnQ6ICdtb3VzZWRvd24nLFxuICAgIHRvdWNobW92ZTogJ21vdXNlbW92ZScsXG4gICAgdG91Y2hlbmQ6ICdtb3VzZXVwJyxcbiAgICBwb2ludGVyZW50ZXI6ICdtb3VzZWVudGVyJyxcbiAgICBwb2ludGVyZG93bjogJ21vdXNlZG93bicsXG4gICAgcG9pbnRlcm1vdmU6ICdtb3VzZW1vdmUnLFxuICAgIHBvaW50ZXJ1cDogJ21vdXNldXAnLFxuICAgIHBvaW50ZXJsZWF2ZTogJ21vdXNlb3V0JyxcbiAgICBwb2ludGVyb3V0OiAnbW91c2VvdXQnXG59O1xuY29uc3QgaXNOdWxsT3JFbXB0eSA9ICh2YWx1ZSk9PnZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAnJztcbiBmdW5jdGlvbiBpbml0Q2FudmFzKGNhbnZhcywgYXNwZWN0UmF0aW8pIHtcbiAgICBjb25zdCBzdHlsZSA9IGNhbnZhcy5zdHlsZTtcbiAgICBjb25zdCByZW5kZXJIZWlnaHQgPSBjYW52YXMuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKTtcbiAgICBjb25zdCByZW5kZXJXaWR0aCA9IGNhbnZhcy5nZXRBdHRyaWJ1dGUoJ3dpZHRoJyk7XG4gICAgY2FudmFzW0VYUEFORE9fS0VZXSA9IHtcbiAgICAgICAgaW5pdGlhbDoge1xuICAgICAgICAgICAgaGVpZ2h0OiByZW5kZXJIZWlnaHQsXG4gICAgICAgICAgICB3aWR0aDogcmVuZGVyV2lkdGgsXG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IHN0eWxlLmRpc3BsYXksXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBzdHlsZS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHN0eWxlLndpZHRoXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHN0eWxlLmRpc3BsYXkgPSBzdHlsZS5kaXNwbGF5IHx8ICdibG9jayc7XG4gICAgc3R5bGUuYm94U2l6aW5nID0gc3R5bGUuYm94U2l6aW5nIHx8ICdib3JkZXItYm94JztcbiAgICBpZiAoaXNOdWxsT3JFbXB0eShyZW5kZXJXaWR0aCkpIHtcbiAgICAgICAgY29uc3QgZGlzcGxheVdpZHRoID0gcmVhZFVzZWRTaXplKGNhbnZhcywgJ3dpZHRoJyk7XG4gICAgICAgIGlmIChkaXNwbGF5V2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gZGlzcGxheVdpZHRoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc051bGxPckVtcHR5KHJlbmRlckhlaWdodCkpIHtcbiAgICAgICAgaWYgKGNhbnZhcy5zdHlsZS5oZWlnaHQgPT09ICcnKSB7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLndpZHRoIC8gKGFzcGVjdFJhdGlvIHx8IDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGlzcGxheUhlaWdodCA9IHJlYWRVc2VkU2l6ZShjYW52YXMsICdoZWlnaHQnKTtcbiAgICAgICAgICAgIGlmIChkaXNwbGF5SGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gZGlzcGxheUhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FudmFzO1xufVxuY29uc3QgZXZlbnRMaXN0ZW5lck9wdGlvbnMgPSBzdXBwb3J0c0V2ZW50TGlzdGVuZXJPcHRpb25zID8ge1xuICAgIHBhc3NpdmU6IHRydWVcbn0gOiBmYWxzZTtcbmZ1bmN0aW9uIGFkZExpc3RlbmVyKG5vZGUsIHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBldmVudExpc3RlbmVyT3B0aW9ucyk7XG59XG5mdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihjaGFydCwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgICBjaGFydC5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgZXZlbnRMaXN0ZW5lck9wdGlvbnMpO1xufVxuZnVuY3Rpb24gZnJvbU5hdGl2ZUV2ZW50KGV2ZW50LCBjaGFydCkge1xuICAgIGNvbnN0IHR5cGUgPSBFVkVOVF9UWVBFU1tldmVudC50eXBlXSB8fCBldmVudC50eXBlO1xuICAgIGNvbnN0IHsgeCAsIHkgIH0gPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGV2ZW50LCBjaGFydCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY2hhcnQsXG4gICAgICAgIG5hdGl2ZTogZXZlbnQsXG4gICAgICAgIHg6IHggIT09IHVuZGVmaW5lZCA/IHggOiBudWxsLFxuICAgICAgICB5OiB5ICE9PSB1bmRlZmluZWQgPyB5IDogbnVsbFxuICAgIH07XG59XG5mdW5jdGlvbiBub2RlTGlzdENvbnRhaW5zKG5vZGVMaXN0LCBjYW52YXMpIHtcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZUxpc3Qpe1xuICAgICAgICBpZiAobm9kZSA9PT0gY2FudmFzIHx8IG5vZGUuY29udGFpbnMoY2FudmFzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVBdHRhY2hPYnNlcnZlcihjaGFydCwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgICBjb25zdCBjYW52YXMgPSBjaGFydC5jYW52YXM7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoZW50cmllcyk9PntcbiAgICAgICAgbGV0IHRyaWdnZXIgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKXtcbiAgICAgICAgICAgIHRyaWdnZXIgPSB0cmlnZ2VyIHx8IG5vZGVMaXN0Q29udGFpbnMoZW50cnkuYWRkZWROb2RlcywgY2FudmFzKTtcbiAgICAgICAgICAgIHRyaWdnZXIgPSB0cmlnZ2VyICYmICFub2RlTGlzdENvbnRhaW5zKGVudHJ5LnJlbW92ZWROb2RlcywgY2FudmFzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJpZ2dlcikge1xuICAgICAgICAgICAgbGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQsIHtcbiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIG9ic2VydmVyO1xufVxuZnVuY3Rpb24gY3JlYXRlRGV0YWNoT2JzZXJ2ZXIoY2hhcnQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgY2FudmFzID0gY2hhcnQuY2FudmFzO1xuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpPT57XG4gICAgICAgIGxldCB0cmlnZ2VyID0gZmFsc2U7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcyl7XG4gICAgICAgICAgICB0cmlnZ2VyID0gdHJpZ2dlciB8fCBub2RlTGlzdENvbnRhaW5zKGVudHJ5LnJlbW92ZWROb2RlcywgY2FudmFzKTtcbiAgICAgICAgICAgIHRyaWdnZXIgPSB0cmlnZ2VyICYmICFub2RlTGlzdENvbnRhaW5zKGVudHJ5LmFkZGVkTm9kZXMsIGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyaWdnZXIpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LCB7XG4gICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBvYnNlcnZlcjtcbn1cbmNvbnN0IGRycExpc3RlbmluZ0NoYXJ0cyA9IG5ldyBNYXAoKTtcbmxldCBvbGREZXZpY2VQaXhlbFJhdGlvID0gMDtcbmZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkge1xuICAgIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIGlmIChkcHIgPT09IG9sZERldmljZVBpeGVsUmF0aW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvbGREZXZpY2VQaXhlbFJhdGlvID0gZHByO1xuICAgIGRycExpc3RlbmluZ0NoYXJ0cy5mb3JFYWNoKChyZXNpemUsIGNoYXJ0KT0+e1xuICAgICAgICBpZiAoY2hhcnQuY3VycmVudERldmljZVBpeGVsUmF0aW8gIT09IGRwcikge1xuICAgICAgICAgICAgcmVzaXplKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGxpc3RlbkRldmljZVBpeGVsUmF0aW9DaGFuZ2VzKGNoYXJ0LCByZXNpemUpIHtcbiAgICBpZiAoIWRycExpc3RlbmluZ0NoYXJ0cy5zaXplKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG4gICAgfVxuICAgIGRycExpc3RlbmluZ0NoYXJ0cy5zZXQoY2hhcnQsIHJlc2l6ZSk7XG59XG5mdW5jdGlvbiB1bmxpc3RlbkRldmljZVBpeGVsUmF0aW9DaGFuZ2VzKGNoYXJ0KSB7XG4gICAgZHJwTGlzdGVuaW5nQ2hhcnRzLmRlbGV0ZShjaGFydCk7XG4gICAgaWYgKCFkcnBMaXN0ZW5pbmdDaGFydHMuc2l6ZSkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25XaW5kb3dSZXNpemUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlc2l6ZU9ic2VydmVyKGNoYXJ0LCB0eXBlLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IGNhbnZhcyA9IGNoYXJ0LmNhbnZhcztcbiAgICBjb25zdCBjb250YWluZXIgPSBjYW52YXMgJiYgX2dldFBhcmVudE5vZGUoY2FudmFzKTtcbiAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlc2l6ZSA9IHRocm90dGxlZCgod2lkdGgsIGhlaWdodCk9PntcbiAgICAgICAgY29uc3QgdyA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICAgICAgbGlzdGVuZXIod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGlmICh3IDwgY29udGFpbmVyLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgfSwgd2luZG93KTtcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcyk9PntcbiAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyaWVzWzBdO1xuICAgICAgICBjb25zdCB3aWR0aCA9IGVudHJ5LmNvbnRlbnRSZWN0LndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gMCAmJiBoZWlnaHQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfSk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIpO1xuICAgIGxpc3RlbkRldmljZVBpeGVsUmF0aW9DaGFuZ2VzKGNoYXJ0LCByZXNpemUpO1xuICAgIHJldHVybiBvYnNlcnZlcjtcbn1cbmZ1bmN0aW9uIHJlbGVhc2VPYnNlcnZlcihjaGFydCwgdHlwZSwgb2JzZXJ2ZXIpIHtcbiAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ3Jlc2l6ZScpIHtcbiAgICAgICAgdW5saXN0ZW5EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlcyhjaGFydCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlUHJveHlBbmRMaXN0ZW4oY2hhcnQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgY2FudmFzID0gY2hhcnQuY2FudmFzO1xuICAgIGNvbnN0IHByb3h5ID0gdGhyb3R0bGVkKChldmVudCk9PntcbiAgICAgICAgaWYgKGNoYXJ0LmN0eCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGlzdGVuZXIoZnJvbU5hdGl2ZUV2ZW50KGV2ZW50LCBjaGFydCkpO1xuICAgICAgICB9XG4gICAgfSwgY2hhcnQpO1xuICAgIGFkZExpc3RlbmVyKGNhbnZhcywgdHlwZSwgcHJveHkpO1xuICAgIHJldHVybiBwcm94eTtcbn1cbiBjbGFzcyBEb21QbGF0Zm9ybSBleHRlbmRzIEJhc2VQbGF0Zm9ybSB7XG4gYWNxdWlyZUNvbnRleHQoY2FudmFzLCBhc3BlY3RSYXRpbykge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzICYmIGNhbnZhcy5nZXRDb250ZXh0ICYmIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LmNhbnZhcyA9PT0gY2FudmFzKSB7XG4gICAgICAgICAgICBpbml0Q2FudmFzKGNhbnZhcywgYXNwZWN0UmF0aW8pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuIHJlbGVhc2VDb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIGlmICghY2FudmFzW0VYUEFORE9fS0VZXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluaXRpYWwgPSBjYW52YXNbRVhQQU5ET19LRVldLmluaXRpYWw7XG4gICAgICAgIFtcbiAgICAgICAgICAgICdoZWlnaHQnLFxuICAgICAgICAgICAgJ3dpZHRoJ1xuICAgICAgICBdLmZvckVhY2goKHByb3ApPT57XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGluaXRpYWxbcHJvcF07XG4gICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlQXR0cmlidXRlKHByb3ApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKHByb3AsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gaW5pdGlhbC5zdHlsZSB8fCB7fTtcbiAgICAgICAgT2JqZWN0LmtleXMoc3R5bGUpLmZvckVhY2goKGtleSk9PntcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZVtrZXldID0gc3R5bGVba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgZGVsZXRlIGNhbnZhc1tFWFBBTkRPX0tFWV07XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiBhZGRFdmVudExpc3RlbmVyKGNoYXJ0LCB0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoY2hhcnQsIHR5cGUpO1xuICAgICAgICBjb25zdCBwcm94aWVzID0gY2hhcnQuJHByb3hpZXMgfHwgKGNoYXJ0LiRwcm94aWVzID0ge30pO1xuICAgICAgICBjb25zdCBoYW5kbGVycyA9IHtcbiAgICAgICAgICAgIGF0dGFjaDogY3JlYXRlQXR0YWNoT2JzZXJ2ZXIsXG4gICAgICAgICAgICBkZXRhY2g6IGNyZWF0ZURldGFjaE9ic2VydmVyLFxuICAgICAgICAgICAgcmVzaXplOiBjcmVhdGVSZXNpemVPYnNlcnZlclxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gaGFuZGxlcnNbdHlwZV0gfHwgY3JlYXRlUHJveHlBbmRMaXN0ZW47XG4gICAgICAgIHByb3hpZXNbdHlwZV0gPSBoYW5kbGVyKGNoYXJ0LCB0eXBlLCBsaXN0ZW5lcik7XG4gICAgfVxuIHJlbW92ZUV2ZW50TGlzdGVuZXIoY2hhcnQsIHR5cGUpIHtcbiAgICAgICAgY29uc3QgcHJveGllcyA9IGNoYXJ0LiRwcm94aWVzIHx8IChjaGFydC4kcHJveGllcyA9IHt9KTtcbiAgICAgICAgY29uc3QgcHJveHkgPSBwcm94aWVzW3R5cGVdO1xuICAgICAgICBpZiAoIXByb3h5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB7XG4gICAgICAgICAgICBhdHRhY2g6IHJlbGVhc2VPYnNlcnZlcixcbiAgICAgICAgICAgIGRldGFjaDogcmVsZWFzZU9ic2VydmVyLFxuICAgICAgICAgICAgcmVzaXplOiByZWxlYXNlT2JzZXJ2ZXJcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IGhhbmRsZXJzW3R5cGVdIHx8IHJlbW92ZUxpc3RlbmVyO1xuICAgICAgICBoYW5kbGVyKGNoYXJ0LCB0eXBlLCBwcm94eSk7XG4gICAgICAgIHByb3hpZXNbdHlwZV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldERldmljZVBpeGVsUmF0aW8oKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB9XG4gZ2V0TWF4aW11bVNpemUoY2FudmFzLCB3aWR0aCwgaGVpZ2h0LCBhc3BlY3RSYXRpbykge1xuICAgICAgICByZXR1cm4gZ2V0TWF4aW11bVNpemUoY2FudmFzLCB3aWR0aCwgaGVpZ2h0LCBhc3BlY3RSYXRpbyk7XG4gICAgfVxuIGlzQXR0YWNoZWQoY2FudmFzKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IF9nZXRQYXJlbnROb2RlKGNhbnZhcyk7XG4gICAgICAgIHJldHVybiAhIShjb250YWluZXIgJiYgY29udGFpbmVyLmlzQ29ubmVjdGVkKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9kZXRlY3RQbGF0Zm9ybShjYW52YXMpIHtcbiAgICBpZiAoIV9pc0RvbVN1cHBvcnRlZCgpIHx8IHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgIT09ICd1bmRlZmluZWQnICYmIGNhbnZhcyBpbnN0YW5jZW9mIE9mZnNjcmVlbkNhbnZhcykge1xuICAgICAgICByZXR1cm4gQmFzaWNQbGF0Zm9ybTtcbiAgICB9XG4gICAgcmV0dXJuIERvbVBsYXRmb3JtO1xufVxuXG5jbGFzcyBFbGVtZW50IHtcbiAgICBzdGF0aWMgZGVmYXVsdHMgPSB7fTtcbiAgICBzdGF0aWMgZGVmYXVsdFJvdXRlcyA9IHVuZGVmaW5lZDtcbiAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICB0b29sdGlwUG9zaXRpb24odXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICBjb25zdCB7IHggLCB5ICB9ID0gdGhpcy5nZXRQcm9wcyhbXG4gICAgICAgICAgICAneCcsXG4gICAgICAgICAgICAneSdcbiAgICAgICAgXSwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeVxuICAgICAgICB9O1xuICAgIH1cbiAgICBoYXNWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIGlzTnVtYmVyKHRoaXMueCkgJiYgaXNOdW1iZXIodGhpcy55KTtcbiAgICB9XG4gICAgZ2V0UHJvcHMocHJvcHMsIGZpbmFsKSB7XG4gICAgICAgIGNvbnN0IGFuaW1zID0gdGhpcy4kYW5pbWF0aW9ucztcbiAgICAgICAgaWYgKCFmaW5hbCB8fCAhYW5pbXMpIHtcbiAgICAgICAgICAgIC8vIGxldCdzIG5vdCBjcmVhdGUgYW4gb2JqZWN0LCBpZiBub3QgbmVlZGVkXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXQgPSB7fTtcbiAgICAgICAgcHJvcHMuZm9yRWFjaCgocHJvcCk9PntcbiAgICAgICAgICAgIHJldFtwcm9wXSA9IGFuaW1zW3Byb3BdICYmIGFuaW1zW3Byb3BdLmFjdGl2ZSgpID8gYW5pbXNbcHJvcF0uX3RvIDogdGhpc1twcm9wXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhdXRvU2tpcChzY2FsZSwgdGlja3MpIHtcbiAgICBjb25zdCB0aWNrT3B0cyA9IHNjYWxlLm9wdGlvbnMudGlja3M7XG4gICAgY29uc3QgZGV0ZXJtaW5lZE1heFRpY2tzID0gZGV0ZXJtaW5lTWF4VGlja3Moc2NhbGUpO1xuICAgIGNvbnN0IHRpY2tzTGltaXQgPSBNYXRoLm1pbih0aWNrT3B0cy5tYXhUaWNrc0xpbWl0IHx8IGRldGVybWluZWRNYXhUaWNrcywgZGV0ZXJtaW5lZE1heFRpY2tzKTtcbiAgICBjb25zdCBtYWpvckluZGljZXMgPSB0aWNrT3B0cy5tYWpvci5lbmFibGVkID8gZ2V0TWFqb3JJbmRpY2VzKHRpY2tzKSA6IFtdO1xuICAgIGNvbnN0IG51bU1ham9ySW5kaWNlcyA9IG1ham9ySW5kaWNlcy5sZW5ndGg7XG4gICAgY29uc3QgZmlyc3QgPSBtYWpvckluZGljZXNbMF07XG4gICAgY29uc3QgbGFzdCA9IG1ham9ySW5kaWNlc1tudW1NYWpvckluZGljZXMgLSAxXTtcbiAgICBjb25zdCBuZXdUaWNrcyA9IFtdO1xuICAgIGlmIChudW1NYWpvckluZGljZXMgPiB0aWNrc0xpbWl0KSB7XG4gICAgICAgIHNraXBNYWpvcnModGlja3MsIG5ld1RpY2tzLCBtYWpvckluZGljZXMsIG51bU1ham9ySW5kaWNlcyAvIHRpY2tzTGltaXQpO1xuICAgICAgICByZXR1cm4gbmV3VGlja3M7XG4gICAgfVxuICAgIGNvbnN0IHNwYWNpbmcgPSBjYWxjdWxhdGVTcGFjaW5nKG1ham9ySW5kaWNlcywgdGlja3MsIHRpY2tzTGltaXQpO1xuICAgIGlmIChudW1NYWpvckluZGljZXMgPiAwKSB7XG4gICAgICAgIGxldCBpLCBpbGVuO1xuICAgICAgICBjb25zdCBhdmdNYWpvclNwYWNpbmcgPSBudW1NYWpvckluZGljZXMgPiAxID8gTWF0aC5yb3VuZCgobGFzdCAtIGZpcnN0KSAvIChudW1NYWpvckluZGljZXMgLSAxKSkgOiBudWxsO1xuICAgICAgICBza2lwKHRpY2tzLCBuZXdUaWNrcywgc3BhY2luZywgaXNOdWxsT3JVbmRlZihhdmdNYWpvclNwYWNpbmcpID8gMCA6IGZpcnN0IC0gYXZnTWFqb3JTcGFjaW5nLCBmaXJzdCk7XG4gICAgICAgIGZvcihpID0gMCwgaWxlbiA9IG51bU1ham9ySW5kaWNlcyAtIDE7IGkgPCBpbGVuOyBpKyspe1xuICAgICAgICAgICAgc2tpcCh0aWNrcywgbmV3VGlja3MsIHNwYWNpbmcsIG1ham9ySW5kaWNlc1tpXSwgbWFqb3JJbmRpY2VzW2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgc2tpcCh0aWNrcywgbmV3VGlja3MsIHNwYWNpbmcsIGxhc3QsIGlzTnVsbE9yVW5kZWYoYXZnTWFqb3JTcGFjaW5nKSA/IHRpY2tzLmxlbmd0aCA6IGxhc3QgKyBhdmdNYWpvclNwYWNpbmcpO1xuICAgICAgICByZXR1cm4gbmV3VGlja3M7XG4gICAgfVxuICAgIHNraXAodGlja3MsIG5ld1RpY2tzLCBzcGFjaW5nKTtcbiAgICByZXR1cm4gbmV3VGlja3M7XG59XG5mdW5jdGlvbiBkZXRlcm1pbmVNYXhUaWNrcyhzY2FsZSkge1xuICAgIGNvbnN0IG9mZnNldCA9IHNjYWxlLm9wdGlvbnMub2Zmc2V0O1xuICAgIGNvbnN0IHRpY2tMZW5ndGggPSBzY2FsZS5fdGlja1NpemUoKTtcbiAgICBjb25zdCBtYXhTY2FsZSA9IHNjYWxlLl9sZW5ndGggLyB0aWNrTGVuZ3RoICsgKG9mZnNldCA/IDAgOiAxKTtcbiAgICBjb25zdCBtYXhDaGFydCA9IHNjYWxlLl9tYXhMZW5ndGggLyB0aWNrTGVuZ3RoO1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgubWluKG1heFNjYWxlLCBtYXhDaGFydCkpO1xufVxuIGZ1bmN0aW9uIGNhbGN1bGF0ZVNwYWNpbmcobWFqb3JJbmRpY2VzLCB0aWNrcywgdGlja3NMaW1pdCkge1xuICAgIGNvbnN0IGV2ZW5NYWpvclNwYWNpbmcgPSBnZXRFdmVuU3BhY2luZyhtYWpvckluZGljZXMpO1xuICAgIGNvbnN0IHNwYWNpbmcgPSB0aWNrcy5sZW5ndGggLyB0aWNrc0xpbWl0O1xuICAgIGlmICghZXZlbk1ham9yU3BhY2luZykge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoc3BhY2luZywgMSk7XG4gICAgfVxuICAgIGNvbnN0IGZhY3RvcnMgPSBfZmFjdG9yaXplKGV2ZW5NYWpvclNwYWNpbmcpO1xuICAgIGZvcihsZXQgaSA9IDAsIGlsZW4gPSBmYWN0b3JzLmxlbmd0aCAtIDE7IGkgPCBpbGVuOyBpKyspe1xuICAgICAgICBjb25zdCBmYWN0b3IgPSBmYWN0b3JzW2ldO1xuICAgICAgICBpZiAoZmFjdG9yID4gc3BhY2luZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhY3RvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gTWF0aC5tYXgoc3BhY2luZywgMSk7XG59XG4gZnVuY3Rpb24gZ2V0TWFqb3JJbmRpY2VzKHRpY2tzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgbGV0IGksIGlsZW47XG4gICAgZm9yKGkgPSAwLCBpbGVuID0gdGlja3MubGVuZ3RoOyBpIDwgaWxlbjsgaSsrKXtcbiAgICAgICAgaWYgKHRpY2tzW2ldLm1ham9yKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIGZ1bmN0aW9uIHNraXBNYWpvcnModGlja3MsIG5ld1RpY2tzLCBtYWpvckluZGljZXMsIHNwYWNpbmcpIHtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIGxldCBuZXh0ID0gbWFqb3JJbmRpY2VzWzBdO1xuICAgIGxldCBpO1xuICAgIHNwYWNpbmcgPSBNYXRoLmNlaWwoc3BhY2luZyk7XG4gICAgZm9yKGkgPSAwOyBpIDwgdGlja3MubGVuZ3RoOyBpKyspe1xuICAgICAgICBpZiAoaSA9PT0gbmV4dCkge1xuICAgICAgICAgICAgbmV3VGlja3MucHVzaCh0aWNrc1tpXSk7XG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgbmV4dCA9IG1ham9ySW5kaWNlc1tjb3VudCAqIHNwYWNpbmddO1xuICAgICAgICB9XG4gICAgfVxufVxuIGZ1bmN0aW9uIHNraXAodGlja3MsIG5ld1RpY2tzLCBzcGFjaW5nLCBtYWpvclN0YXJ0LCBtYWpvckVuZCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdmFsdWVPckRlZmF1bHQobWFqb3JTdGFydCwgMCk7XG4gICAgY29uc3QgZW5kID0gTWF0aC5taW4odmFsdWVPckRlZmF1bHQobWFqb3JFbmQsIHRpY2tzLmxlbmd0aCksIHRpY2tzLmxlbmd0aCk7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBsZXQgbGVuZ3RoLCBpLCBuZXh0O1xuICAgIHNwYWNpbmcgPSBNYXRoLmNlaWwoc3BhY2luZyk7XG4gICAgaWYgKG1ham9yRW5kKSB7XG4gICAgICAgIGxlbmd0aCA9IG1ham9yRW5kIC0gbWFqb3JTdGFydDtcbiAgICAgICAgc3BhY2luZyA9IGxlbmd0aCAvIE1hdGguZmxvb3IobGVuZ3RoIC8gc3BhY2luZyk7XG4gICAgfVxuICAgIG5leHQgPSBzdGFydDtcbiAgICB3aGlsZShuZXh0IDwgMCl7XG4gICAgICAgIGNvdW50Kys7XG4gICAgICAgIG5leHQgPSBNYXRoLnJvdW5kKHN0YXJ0ICsgY291bnQgKiBzcGFjaW5nKTtcbiAgICB9XG4gICAgZm9yKGkgPSBNYXRoLm1heChzdGFydCwgMCk7IGkgPCBlbmQ7IGkrKyl7XG4gICAgICAgIGlmIChpID09PSBuZXh0KSB7XG4gICAgICAgICAgICBuZXdUaWNrcy5wdXNoKHRpY2tzW2ldKTtcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICBuZXh0ID0gTWF0aC5yb3VuZChzdGFydCArIGNvdW50ICogc3BhY2luZyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4gZnVuY3Rpb24gZ2V0RXZlblNwYWNpbmcoYXJyKSB7XG4gICAgY29uc3QgbGVuID0gYXJyLmxlbmd0aDtcbiAgICBsZXQgaSwgZGlmZjtcbiAgICBpZiAobGVuIDwgMikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvcihkaWZmID0gYXJyWzBdLCBpID0gMTsgaSA8IGxlbjsgKytpKXtcbiAgICAgICAgaWYgKGFycltpXSAtIGFycltpIC0gMV0gIT09IGRpZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGlmZjtcbn1cblxuY29uc3QgcmV2ZXJzZUFsaWduID0gKGFsaWduKT0+YWxpZ24gPT09ICdsZWZ0JyA/ICdyaWdodCcgOiBhbGlnbiA9PT0gJ3JpZ2h0JyA/ICdsZWZ0JyA6IGFsaWduO1xuY29uc3Qgb2Zmc2V0RnJvbUVkZ2UgPSAoc2NhbGUsIGVkZ2UsIG9mZnNldCk9PmVkZ2UgPT09ICd0b3AnIHx8IGVkZ2UgPT09ICdsZWZ0JyA/IHNjYWxlW2VkZ2VdICsgb2Zmc2V0IDogc2NhbGVbZWRnZV0gLSBvZmZzZXQ7XG4gZnVuY3Rpb24gc2FtcGxlKGFyciwgbnVtSXRlbXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBjb25zdCBpbmNyZW1lbnQgPSBhcnIubGVuZ3RoIC8gbnVtSXRlbXM7XG4gICAgY29uc3QgbGVuID0gYXJyLmxlbmd0aDtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yKDsgaSA8IGxlbjsgaSArPSBpbmNyZW1lbnQpe1xuICAgICAgICByZXN1bHQucHVzaChhcnJbTWF0aC5mbG9vcihpKV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIGZ1bmN0aW9uIGdldFBpeGVsRm9yR3JpZExpbmUoc2NhbGUsIGluZGV4LCBvZmZzZXRHcmlkTGluZXMpIHtcbiAgICBjb25zdCBsZW5ndGggPSBzY2FsZS50aWNrcy5sZW5ndGg7XG4gICAgY29uc3QgdmFsaWRJbmRleCA9IE1hdGgubWluKGluZGV4LCBsZW5ndGggLSAxKTtcbiAgICBjb25zdCBzdGFydCA9IHNjYWxlLl9zdGFydFBpeGVsO1xuICAgIGNvbnN0IGVuZCA9IHNjYWxlLl9lbmRQaXhlbDtcbiAgICBjb25zdCBlcHNpbG9uID0gMWUtNjtcbiAgICBsZXQgbGluZVZhbHVlID0gc2NhbGUuZ2V0UGl4ZWxGb3JUaWNrKHZhbGlkSW5kZXgpO1xuICAgIGxldCBvZmZzZXQ7XG4gICAgaWYgKG9mZnNldEdyaWRMaW5lcykge1xuICAgICAgICBpZiAobGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBNYXRoLm1heChsaW5lVmFsdWUgLSBzdGFydCwgZW5kIC0gbGluZVZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gKHNjYWxlLmdldFBpeGVsRm9yVGljaygxKSAtIGxpbmVWYWx1ZSkgLyAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2Zmc2V0ID0gKGxpbmVWYWx1ZSAtIHNjYWxlLmdldFBpeGVsRm9yVGljayh2YWxpZEluZGV4IC0gMSkpIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBsaW5lVmFsdWUgKz0gdmFsaWRJbmRleCA8IGluZGV4ID8gb2Zmc2V0IDogLW9mZnNldDtcbiAgICAgICAgaWYgKGxpbmVWYWx1ZSA8IHN0YXJ0IC0gZXBzaWxvbiB8fCBsaW5lVmFsdWUgPiBlbmQgKyBlcHNpbG9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpbmVWYWx1ZTtcbn1cbiBmdW5jdGlvbiBnYXJiYWdlQ29sbGVjdChjYWNoZXMsIGxlbmd0aCkge1xuICAgIGVhY2goY2FjaGVzLCAoY2FjaGUpPT57XG4gICAgICAgIGNvbnN0IGdjID0gY2FjaGUuZ2M7XG4gICAgICAgIGNvbnN0IGdjTGVuID0gZ2MubGVuZ3RoIC8gMjtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmIChnY0xlbiA+IGxlbmd0aCkge1xuICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgZ2NMZW47ICsraSl7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlLmRhdGFbZ2NbaV1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2Muc3BsaWNlKDAsIGdjTGVuKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuIGZ1bmN0aW9uIGdldFRpY2tNYXJrTGVuZ3RoKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5kcmF3VGlja3MgPyBvcHRpb25zLnRpY2tMZW5ndGggOiAwO1xufVxuIGZ1bmN0aW9uIGdldFRpdGxlSGVpZ2h0KG9wdGlvbnMsIGZhbGxiYWNrKSB7XG4gICAgaWYgKCFvcHRpb25zLmRpc3BsYXkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGNvbnN0IGZvbnQgPSB0b0ZvbnQob3B0aW9ucy5mb250LCBmYWxsYmFjayk7XG4gICAgY29uc3QgcGFkZGluZyA9IHRvUGFkZGluZyhvcHRpb25zLnBhZGRpbmcpO1xuICAgIGNvbnN0IGxpbmVzID0gaXNBcnJheShvcHRpb25zLnRleHQpID8gb3B0aW9ucy50ZXh0Lmxlbmd0aCA6IDE7XG4gICAgcmV0dXJuIGxpbmVzICogZm9udC5saW5lSGVpZ2h0ICsgcGFkZGluZy5oZWlnaHQ7XG59XG5mdW5jdGlvbiBjcmVhdGVTY2FsZUNvbnRleHQocGFyZW50LCBzY2FsZSkge1xuICAgIHJldHVybiBjcmVhdGVDb250ZXh0KHBhcmVudCwge1xuICAgICAgICBzY2FsZSxcbiAgICAgICAgdHlwZTogJ3NjYWxlJ1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlVGlja0NvbnRleHQocGFyZW50LCBpbmRleCwgdGljaykge1xuICAgIHJldHVybiBjcmVhdGVDb250ZXh0KHBhcmVudCwge1xuICAgICAgICB0aWNrLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgdHlwZTogJ3RpY2snXG4gICAgfSk7XG59XG5mdW5jdGlvbiB0aXRsZUFsaWduKGFsaWduLCBwb3NpdGlvbiwgcmV2ZXJzZSkge1xuICAgIGxldCByZXQgPSBfdG9MZWZ0UmlnaHRDZW50ZXIoYWxpZ24pO1xuICAgIGlmIChyZXZlcnNlICYmIHBvc2l0aW9uICE9PSAncmlnaHQnIHx8ICFyZXZlcnNlICYmIHBvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgIHJldCA9IHJldmVyc2VBbGlnbihyZXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gdGl0bGVBcmdzKHNjYWxlLCBvZmZzZXQsIHBvc2l0aW9uLCBhbGlnbikge1xuICAgIGNvbnN0IHsgdG9wICwgbGVmdCAsIGJvdHRvbSAsIHJpZ2h0ICwgY2hhcnQgIH0gPSBzY2FsZTtcbiAgICBjb25zdCB7IGNoYXJ0QXJlYSAsIHNjYWxlcyAgfSA9IGNoYXJ0O1xuICAgIGxldCByb3RhdGlvbiA9IDA7XG4gICAgbGV0IG1heFdpZHRoLCB0aXRsZVgsIHRpdGxlWTtcbiAgICBjb25zdCBoZWlnaHQgPSBib3R0b20gLSB0b3A7XG4gICAgY29uc3Qgd2lkdGggPSByaWdodCAtIGxlZnQ7XG4gICAgaWYgKHNjYWxlLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIHRpdGxlWCA9IF9hbGlnblN0YXJ0RW5kKGFsaWduLCBsZWZ0LCByaWdodCk7XG4gICAgICAgIGlmIChpc09iamVjdChwb3NpdGlvbikpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uQXhpc0lEID0gT2JqZWN0LmtleXMocG9zaXRpb24pWzBdO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwb3NpdGlvbltwb3NpdGlvbkF4aXNJRF07XG4gICAgICAgICAgICB0aXRsZVkgPSBzY2FsZXNbcG9zaXRpb25BeGlzSURdLmdldFBpeGVsRm9yVmFsdWUodmFsdWUpICsgaGVpZ2h0IC0gb2Zmc2V0O1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnY2VudGVyJykge1xuICAgICAgICAgICAgdGl0bGVZID0gKGNoYXJ0QXJlYS5ib3R0b20gKyBjaGFydEFyZWEudG9wKSAvIDIgKyBoZWlnaHQgLSBvZmZzZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aXRsZVkgPSBvZmZzZXRGcm9tRWRnZShzY2FsZSwgcG9zaXRpb24sIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgbWF4V2lkdGggPSByaWdodCAtIGxlZnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KHBvc2l0aW9uKSkge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25BeGlzSUQxID0gT2JqZWN0LmtleXMocG9zaXRpb24pWzBdO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUxID0gcG9zaXRpb25bcG9zaXRpb25BeGlzSUQxXTtcbiAgICAgICAgICAgIHRpdGxlWCA9IHNjYWxlc1twb3NpdGlvbkF4aXNJRDFdLmdldFBpeGVsRm9yVmFsdWUodmFsdWUxKSAtIHdpZHRoICsgb2Zmc2V0O1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnY2VudGVyJykge1xuICAgICAgICAgICAgdGl0bGVYID0gKGNoYXJ0QXJlYS5sZWZ0ICsgY2hhcnRBcmVhLnJpZ2h0KSAvIDIgLSB3aWR0aCArIG9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpdGxlWCA9IG9mZnNldEZyb21FZGdlKHNjYWxlLCBwb3NpdGlvbiwgb2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aXRsZVkgPSBfYWxpZ25TdGFydEVuZChhbGlnbiwgYm90dG9tLCB0b3ApO1xuICAgICAgICByb3RhdGlvbiA9IHBvc2l0aW9uID09PSAnbGVmdCcgPyAtSEFMRl9QSSA6IEhBTEZfUEk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlWCxcbiAgICAgICAgdGl0bGVZLFxuICAgICAgICBtYXhXaWR0aCxcbiAgICAgICAgcm90YXRpb25cbiAgICB9O1xufVxuY2xhc3MgU2NhbGUgZXh0ZW5kcyBFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihjZmcpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAgdGhpcy5pZCA9IGNmZy5pZDtcbiAgICAgICAgIHRoaXMudHlwZSA9IGNmZy50eXBlO1xuICAgICAgICAgdGhpcy5vcHRpb25zID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy5jdHggPSBjZmcuY3R4O1xuICAgICAgICAgdGhpcy5jaGFydCA9IGNmZy5jaGFydDtcbiAgICAgICAgIHRoaXMudG9wID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy5ib3R0b20gPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLmxlZnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLnJpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy53aWR0aCA9IHVuZGVmaW5lZDtcbiAgICAgICAgIHRoaXMuaGVpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9tYXJnaW5zID0ge1xuICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgYm90dG9tOiAwXG4gICAgICAgIH07XG4gICAgICAgICB0aGlzLm1heFdpZHRoID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLnBhZGRpbmdUb3AgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLnBhZGRpbmdCb3R0b20gPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLnBhZGRpbmdMZWZ0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy5wYWRkaW5nUmlnaHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLmF4aXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLmxhYmVsUm90YXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubWluID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm1heCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fcmFuZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLnRpY2tzID0gW107XG4gICAgICAgICB0aGlzLl9ncmlkTGluZUl0ZW1zID0gbnVsbDtcbiAgICAgICAgIHRoaXMuX2xhYmVsSXRlbXMgPSBudWxsO1xuICAgICAgICAgdGhpcy5fbGFiZWxTaXplcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX21heExlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2xvbmdlc3RUZXh0Q2FjaGUgPSB7fTtcbiAgICAgICAgIHRoaXMuX3N0YXJ0UGl4ZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLl9lbmRQaXhlbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fcmV2ZXJzZVBpeGVscyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl91c2VyTWF4ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl91c2VyTWluID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9zdWdnZXN0ZWRNYXggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3N1Z2dlc3RlZE1pbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fdGlja3NMZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9ib3JkZXJWYWx1ZSA9IDA7XG4gICAgICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgICAgIHRoaXMuX2RhdGFMaW1pdHNDYWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kY29udGV4dCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gaW5pdChvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoKSk7XG4gICAgICAgIHRoaXMuYXhpcyA9IG9wdGlvbnMuYXhpcztcbiAgICAgICAgdGhpcy5fdXNlck1pbiA9IHRoaXMucGFyc2Uob3B0aW9ucy5taW4pO1xuICAgICAgICB0aGlzLl91c2VyTWF4ID0gdGhpcy5wYXJzZShvcHRpb25zLm1heCk7XG4gICAgICAgIHRoaXMuX3N1Z2dlc3RlZE1pbiA9IHRoaXMucGFyc2Uob3B0aW9ucy5zdWdnZXN0ZWRNaW4pO1xuICAgICAgICB0aGlzLl9zdWdnZXN0ZWRNYXggPSB0aGlzLnBhcnNlKG9wdGlvbnMuc3VnZ2VzdGVkTWF4KTtcbiAgICB9XG4gcGFyc2UocmF3LCBpbmRleCkge1xuICAgICAgICByZXR1cm4gcmF3O1xuICAgIH1cbiBnZXRVc2VyQm91bmRzKCkge1xuICAgICAgICBsZXQgeyBfdXNlck1pbiAsIF91c2VyTWF4ICwgX3N1Z2dlc3RlZE1pbiAsIF9zdWdnZXN0ZWRNYXggIH0gPSB0aGlzO1xuICAgICAgICBfdXNlck1pbiA9IGZpbml0ZU9yRGVmYXVsdChfdXNlck1pbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgX3VzZXJNYXggPSBmaW5pdGVPckRlZmF1bHQoX3VzZXJNYXgsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSk7XG4gICAgICAgIF9zdWdnZXN0ZWRNaW4gPSBmaW5pdGVPckRlZmF1bHQoX3N1Z2dlc3RlZE1pbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgX3N1Z2dlc3RlZE1heCA9IGZpbml0ZU9yRGVmYXVsdChfc3VnZ2VzdGVkTWF4LCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWluOiBmaW5pdGVPckRlZmF1bHQoX3VzZXJNaW4sIF9zdWdnZXN0ZWRNaW4pLFxuICAgICAgICAgICAgbWF4OiBmaW5pdGVPckRlZmF1bHQoX3VzZXJNYXgsIF9zdWdnZXN0ZWRNYXgpLFxuICAgICAgICAgICAgbWluRGVmaW5lZDogaXNOdW1iZXJGaW5pdGUoX3VzZXJNaW4pLFxuICAgICAgICAgICAgbWF4RGVmaW5lZDogaXNOdW1iZXJGaW5pdGUoX3VzZXJNYXgpXG4gICAgICAgIH07XG4gICAgfVxuIGdldE1pbk1heChjYW5TdGFjaykge1xuICAgICAgICBsZXQgeyBtaW4gLCBtYXggLCBtaW5EZWZpbmVkICwgbWF4RGVmaW5lZCAgfSA9IHRoaXMuZ2V0VXNlckJvdW5kcygpO1xuICAgICAgICBsZXQgcmFuZ2U7XG4gICAgICAgIGlmIChtaW5EZWZpbmVkICYmIG1heERlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWluLFxuICAgICAgICAgICAgICAgIG1heFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXRhcyA9IHRoaXMuZ2V0TWF0Y2hpbmdWaXNpYmxlTWV0YXMoKTtcbiAgICAgICAgZm9yKGxldCBpID0gMCwgaWxlbiA9IG1ldGFzLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICByYW5nZSA9IG1ldGFzW2ldLmNvbnRyb2xsZXIuZ2V0TWluTWF4KHRoaXMsIGNhblN0YWNrKTtcbiAgICAgICAgICAgIGlmICghbWluRGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgcmFuZ2UubWluKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWF4RGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgcmFuZ2UubWF4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtaW4gPSBtYXhEZWZpbmVkICYmIG1pbiA+IG1heCA/IG1heCA6IG1pbjtcbiAgICAgICAgbWF4ID0gbWluRGVmaW5lZCAmJiBtaW4gPiBtYXggPyBtaW4gOiBtYXg7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtaW46IGZpbml0ZU9yRGVmYXVsdChtaW4sIGZpbml0ZU9yRGVmYXVsdChtYXgsIG1pbikpLFxuICAgICAgICAgICAgbWF4OiBmaW5pdGVPckRlZmF1bHQobWF4LCBmaW5pdGVPckRlZmF1bHQobWluLCBtYXgpKVxuICAgICAgICB9O1xuICAgIH1cbiBnZXRQYWRkaW5nKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVmdDogdGhpcy5wYWRkaW5nTGVmdCB8fCAwLFxuICAgICAgICAgICAgdG9wOiB0aGlzLnBhZGRpbmdUb3AgfHwgMCxcbiAgICAgICAgICAgIHJpZ2h0OiB0aGlzLnBhZGRpbmdSaWdodCB8fCAwLFxuICAgICAgICAgICAgYm90dG9tOiB0aGlzLnBhZGRpbmdCb3R0b20gfHwgMFxuICAgICAgICB9O1xuICAgIH1cbiBnZXRUaWNrcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlja3M7XG4gICAgfVxuIGdldExhYmVscygpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY2hhcnQuZGF0YTtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5sYWJlbHMgfHwgKHRoaXMuaXNIb3Jpem9udGFsKCkgPyBkYXRhLnhMYWJlbHMgOiBkYXRhLnlMYWJlbHMpIHx8IGRhdGEubGFiZWxzIHx8IFtdO1xuICAgIH1cbiBnZXRMYWJlbEl0ZW1zKGNoYXJ0QXJlYSA9IHRoaXMuY2hhcnQuY2hhcnRBcmVhKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5fbGFiZWxJdGVtcyB8fCAodGhpcy5fbGFiZWxJdGVtcyA9IHRoaXMuX2NvbXB1dGVMYWJlbEl0ZW1zKGNoYXJ0QXJlYSkpO1xuICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgfVxuICAgIGJlZm9yZUxheW91dCgpIHtcbiAgICAgICAgdGhpcy5fY2FjaGUgPSB7fTtcbiAgICAgICAgdGhpcy5fZGF0YUxpbWl0c0NhY2hlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBiZWZvcmVVcGRhdGUoKSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMub3B0aW9ucy5iZWZvcmVVcGRhdGUsIFtcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgXSk7XG4gICAgfVxuIHVwZGF0ZShtYXhXaWR0aCwgbWF4SGVpZ2h0LCBtYXJnaW5zKSB7XG4gICAgICAgIGNvbnN0IHsgYmVnaW5BdFplcm8gLCBncmFjZSAsIHRpY2tzOiB0aWNrT3B0cyAgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3Qgc2FtcGxlU2l6ZSA9IHRpY2tPcHRzLnNhbXBsZVNpemU7XG4gICAgICAgIHRoaXMuYmVmb3JlVXBkYXRlKCk7XG4gICAgICAgIHRoaXMubWF4V2lkdGggPSBtYXhXaWR0aDtcbiAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSBtYXhIZWlnaHQ7XG4gICAgICAgIHRoaXMuX21hcmdpbnMgPSBtYXJnaW5zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBib3R0b206IDBcbiAgICAgICAgfSwgbWFyZ2lucyk7XG4gICAgICAgIHRoaXMudGlja3MgPSBudWxsO1xuICAgICAgICB0aGlzLl9sYWJlbFNpemVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZ3JpZExpbmVJdGVtcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2xhYmVsSXRlbXMgPSBudWxsO1xuICAgICAgICB0aGlzLmJlZm9yZVNldERpbWVuc2lvbnMoKTtcbiAgICAgICAgdGhpcy5zZXREaW1lbnNpb25zKCk7XG4gICAgICAgIHRoaXMuYWZ0ZXJTZXREaW1lbnNpb25zKCk7XG4gICAgICAgIHRoaXMuX21heExlbmd0aCA9IHRoaXMuaXNIb3Jpem9udGFsKCkgPyB0aGlzLndpZHRoICsgbWFyZ2lucy5sZWZ0ICsgbWFyZ2lucy5yaWdodCA6IHRoaXMuaGVpZ2h0ICsgbWFyZ2lucy50b3AgKyBtYXJnaW5zLmJvdHRvbTtcbiAgICAgICAgaWYgKCF0aGlzLl9kYXRhTGltaXRzQ2FjaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmJlZm9yZURhdGFMaW1pdHMoKTtcbiAgICAgICAgICAgIHRoaXMuZGV0ZXJtaW5lRGF0YUxpbWl0cygpO1xuICAgICAgICAgICAgdGhpcy5hZnRlckRhdGFMaW1pdHMoKTtcbiAgICAgICAgICAgIHRoaXMuX3JhbmdlID0gX2FkZEdyYWNlKHRoaXMsIGdyYWNlLCBiZWdpbkF0WmVybyk7XG4gICAgICAgICAgICB0aGlzLl9kYXRhTGltaXRzQ2FjaGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJlZm9yZUJ1aWxkVGlja3MoKTtcbiAgICAgICAgdGhpcy50aWNrcyA9IHRoaXMuYnVpbGRUaWNrcygpIHx8IFtdO1xuICAgICAgICB0aGlzLmFmdGVyQnVpbGRUaWNrcygpO1xuICAgICAgICBjb25zdCBzYW1wbGluZ0VuYWJsZWQgPSBzYW1wbGVTaXplIDwgdGhpcy50aWNrcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX2NvbnZlcnRUaWNrc1RvTGFiZWxzKHNhbXBsaW5nRW5hYmxlZCA/IHNhbXBsZSh0aGlzLnRpY2tzLCBzYW1wbGVTaXplKSA6IHRoaXMudGlja3MpO1xuICAgICAgICB0aGlzLmNvbmZpZ3VyZSgpO1xuICAgICAgICB0aGlzLmJlZm9yZUNhbGN1bGF0ZUxhYmVsUm90YXRpb24oKTtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVMYWJlbFJvdGF0aW9uKCk7XG4gICAgICAgIHRoaXMuYWZ0ZXJDYWxjdWxhdGVMYWJlbFJvdGF0aW9uKCk7XG4gICAgICAgIGlmICh0aWNrT3B0cy5kaXNwbGF5ICYmICh0aWNrT3B0cy5hdXRvU2tpcCB8fCB0aWNrT3B0cy5zb3VyY2UgPT09ICdhdXRvJykpIHtcbiAgICAgICAgICAgIHRoaXMudGlja3MgPSBhdXRvU2tpcCh0aGlzLCB0aGlzLnRpY2tzKTtcbiAgICAgICAgICAgIHRoaXMuX2xhYmVsU2l6ZXMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5hZnRlckF1dG9Ta2lwKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNhbXBsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5fY29udmVydFRpY2tzVG9MYWJlbHModGhpcy50aWNrcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iZWZvcmVGaXQoKTtcbiAgICAgICAgdGhpcy5maXQoKTtcbiAgICAgICAgdGhpcy5hZnRlckZpdCgpO1xuICAgICAgICB0aGlzLmFmdGVyVXBkYXRlKCk7XG4gICAgfVxuIGNvbmZpZ3VyZSgpIHtcbiAgICAgICAgbGV0IHJldmVyc2VQaXhlbHMgPSB0aGlzLm9wdGlvbnMucmV2ZXJzZTtcbiAgICAgICAgbGV0IHN0YXJ0UGl4ZWwsIGVuZFBpeGVsO1xuICAgICAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgICAgc3RhcnRQaXhlbCA9IHRoaXMubGVmdDtcbiAgICAgICAgICAgIGVuZFBpeGVsID0gdGhpcy5yaWdodDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXJ0UGl4ZWwgPSB0aGlzLnRvcDtcbiAgICAgICAgICAgIGVuZFBpeGVsID0gdGhpcy5ib3R0b207XG4gICAgICAgICAgICByZXZlcnNlUGl4ZWxzID0gIXJldmVyc2VQaXhlbHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RhcnRQaXhlbCA9IHN0YXJ0UGl4ZWw7XG4gICAgICAgIHRoaXMuX2VuZFBpeGVsID0gZW5kUGl4ZWw7XG4gICAgICAgIHRoaXMuX3JldmVyc2VQaXhlbHMgPSByZXZlcnNlUGl4ZWxzO1xuICAgICAgICB0aGlzLl9sZW5ndGggPSBlbmRQaXhlbCAtIHN0YXJ0UGl4ZWw7XG4gICAgICAgIHRoaXMuX2FsaWduVG9QaXhlbHMgPSB0aGlzLm9wdGlvbnMuYWxpZ25Ub1BpeGVscztcbiAgICB9XG4gICAgYWZ0ZXJVcGRhdGUoKSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMub3B0aW9ucy5hZnRlclVwZGF0ZSwgW1xuICAgICAgICAgICAgdGhpc1xuICAgICAgICBdKTtcbiAgICB9XG4gICAgYmVmb3JlU2V0RGltZW5zaW9ucygpIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5vcHRpb25zLmJlZm9yZVNldERpbWVuc2lvbnMsIFtcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIHNldERpbWVuc2lvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5tYXhXaWR0aDtcbiAgICAgICAgICAgIHRoaXMubGVmdCA9IDA7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0ID0gdGhpcy53aWR0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnRvcCA9IDA7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbSA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFkZGluZ0xlZnQgPSAwO1xuICAgICAgICB0aGlzLnBhZGRpbmdUb3AgPSAwO1xuICAgICAgICB0aGlzLnBhZGRpbmdSaWdodCA9IDA7XG4gICAgICAgIHRoaXMucGFkZGluZ0JvdHRvbSA9IDA7XG4gICAgfVxuICAgIGFmdGVyU2V0RGltZW5zaW9ucygpIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5vcHRpb25zLmFmdGVyU2V0RGltZW5zaW9ucywgW1xuICAgICAgICAgICAgdGhpc1xuICAgICAgICBdKTtcbiAgICB9XG4gICAgX2NhbGxIb29rcyhuYW1lKSB7XG4gICAgICAgIHRoaXMuY2hhcnQubm90aWZ5UGx1Z2lucyhuYW1lLCB0aGlzLmdldENvbnRleHQoKSk7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMub3B0aW9uc1tuYW1lXSwgW1xuICAgICAgICAgICAgdGhpc1xuICAgICAgICBdKTtcbiAgICB9XG4gICAgYmVmb3JlRGF0YUxpbWl0cygpIHtcbiAgICAgICAgdGhpcy5fY2FsbEhvb2tzKCdiZWZvcmVEYXRhTGltaXRzJyk7XG4gICAgfVxuICAgIGRldGVybWluZURhdGFMaW1pdHMoKSB7fVxuICAgIGFmdGVyRGF0YUxpbWl0cygpIHtcbiAgICAgICAgdGhpcy5fY2FsbEhvb2tzKCdhZnRlckRhdGFMaW1pdHMnKTtcbiAgICB9XG4gICAgYmVmb3JlQnVpbGRUaWNrcygpIHtcbiAgICAgICAgdGhpcy5fY2FsbEhvb2tzKCdiZWZvcmVCdWlsZFRpY2tzJyk7XG4gICAgfVxuIGJ1aWxkVGlja3MoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgYWZ0ZXJCdWlsZFRpY2tzKCkge1xuICAgICAgICB0aGlzLl9jYWxsSG9va3MoJ2FmdGVyQnVpbGRUaWNrcycpO1xuICAgIH1cbiAgICBiZWZvcmVUaWNrVG9MYWJlbENvbnZlcnNpb24oKSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMub3B0aW9ucy5iZWZvcmVUaWNrVG9MYWJlbENvbnZlcnNpb24sIFtcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgXSk7XG4gICAgfVxuIGdlbmVyYXRlVGlja0xhYmVscyh0aWNrcykge1xuICAgICAgICBjb25zdCB0aWNrT3B0cyA9IHRoaXMub3B0aW9ucy50aWNrcztcbiAgICAgICAgbGV0IGksIGlsZW4sIHRpY2s7XG4gICAgICAgIGZvcihpID0gMCwgaWxlbiA9IHRpY2tzLmxlbmd0aDsgaSA8IGlsZW47IGkrKyl7XG4gICAgICAgICAgICB0aWNrID0gdGlja3NbaV07XG4gICAgICAgICAgICB0aWNrLmxhYmVsID0gY2FsbGJhY2sodGlja09wdHMuY2FsbGJhY2ssIFtcbiAgICAgICAgICAgICAgICB0aWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgIGksXG4gICAgICAgICAgICAgICAgdGlja3NcbiAgICAgICAgICAgIF0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFmdGVyVGlja1RvTGFiZWxDb252ZXJzaW9uKCkge1xuICAgICAgICBjYWxsYmFjayh0aGlzLm9wdGlvbnMuYWZ0ZXJUaWNrVG9MYWJlbENvbnZlcnNpb24sIFtcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGJlZm9yZUNhbGN1bGF0ZUxhYmVsUm90YXRpb24oKSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMub3B0aW9ucy5iZWZvcmVDYWxjdWxhdGVMYWJlbFJvdGF0aW9uLCBbXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBjYWxjdWxhdGVMYWJlbFJvdGF0aW9uKCkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCB0aWNrT3B0cyA9IG9wdGlvbnMudGlja3M7XG4gICAgICAgIGNvbnN0IG51bVRpY2tzID0gdGhpcy50aWNrcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG1pblJvdGF0aW9uID0gdGlja09wdHMubWluUm90YXRpb24gfHwgMDtcbiAgICAgICAgY29uc3QgbWF4Um90YXRpb24gPSB0aWNrT3B0cy5tYXhSb3RhdGlvbjtcbiAgICAgICAgbGV0IGxhYmVsUm90YXRpb24gPSBtaW5Sb3RhdGlvbjtcbiAgICAgICAgbGV0IHRpY2tXaWR0aCwgbWF4SGVpZ2h0LCBtYXhMYWJlbERpYWdvbmFsO1xuICAgICAgICBpZiAoIXRoaXMuX2lzVmlzaWJsZSgpIHx8ICF0aWNrT3B0cy5kaXNwbGF5IHx8IG1pblJvdGF0aW9uID49IG1heFJvdGF0aW9uIHx8IG51bVRpY2tzIDw9IDEgfHwgIXRoaXMuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICAgIHRoaXMubGFiZWxSb3RhdGlvbiA9IG1pblJvdGF0aW9uO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxhYmVsU2l6ZXMgPSB0aGlzLl9nZXRMYWJlbFNpemVzKCk7XG4gICAgICAgIGNvbnN0IG1heExhYmVsV2lkdGggPSBsYWJlbFNpemVzLndpZGVzdC53aWR0aDtcbiAgICAgICAgY29uc3QgbWF4TGFiZWxIZWlnaHQgPSBsYWJlbFNpemVzLmhpZ2hlc3QuaGVpZ2h0O1xuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IF9saW1pdFZhbHVlKHRoaXMuY2hhcnQud2lkdGggLSBtYXhMYWJlbFdpZHRoLCAwLCB0aGlzLm1heFdpZHRoKTtcbiAgICAgICAgdGlja1dpZHRoID0gb3B0aW9ucy5vZmZzZXQgPyB0aGlzLm1heFdpZHRoIC8gbnVtVGlja3MgOiBtYXhXaWR0aCAvIChudW1UaWNrcyAtIDEpO1xuICAgICAgICBpZiAobWF4TGFiZWxXaWR0aCArIDYgPiB0aWNrV2lkdGgpIHtcbiAgICAgICAgICAgIHRpY2tXaWR0aCA9IG1heFdpZHRoIC8gKG51bVRpY2tzIC0gKG9wdGlvbnMub2Zmc2V0ID8gMC41IDogMSkpO1xuICAgICAgICAgICAgbWF4SGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgLSBnZXRUaWNrTWFya0xlbmd0aChvcHRpb25zLmdyaWQpIC0gdGlja09wdHMucGFkZGluZyAtIGdldFRpdGxlSGVpZ2h0KG9wdGlvbnMudGl0bGUsIHRoaXMuY2hhcnQub3B0aW9ucy5mb250KTtcbiAgICAgICAgICAgIG1heExhYmVsRGlhZ29uYWwgPSBNYXRoLnNxcnQobWF4TGFiZWxXaWR0aCAqIG1heExhYmVsV2lkdGggKyBtYXhMYWJlbEhlaWdodCAqIG1heExhYmVsSGVpZ2h0KTtcbiAgICAgICAgICAgIGxhYmVsUm90YXRpb24gPSB0b0RlZ3JlZXMoTWF0aC5taW4oTWF0aC5hc2luKF9saW1pdFZhbHVlKChsYWJlbFNpemVzLmhpZ2hlc3QuaGVpZ2h0ICsgNikgLyB0aWNrV2lkdGgsIC0xLCAxKSksIE1hdGguYXNpbihfbGltaXRWYWx1ZShtYXhIZWlnaHQgLyBtYXhMYWJlbERpYWdvbmFsLCAtMSwgMSkpIC0gTWF0aC5hc2luKF9saW1pdFZhbHVlKG1heExhYmVsSGVpZ2h0IC8gbWF4TGFiZWxEaWFnb25hbCwgLTEsIDEpKSkpO1xuICAgICAgICAgICAgbGFiZWxSb3RhdGlvbiA9IE1hdGgubWF4KG1pblJvdGF0aW9uLCBNYXRoLm1pbihtYXhSb3RhdGlvbiwgbGFiZWxSb3RhdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFiZWxSb3RhdGlvbiA9IGxhYmVsUm90YXRpb247XG4gICAgfVxuICAgIGFmdGVyQ2FsY3VsYXRlTGFiZWxSb3RhdGlvbigpIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5vcHRpb25zLmFmdGVyQ2FsY3VsYXRlTGFiZWxSb3RhdGlvbiwgW1xuICAgICAgICAgICAgdGhpc1xuICAgICAgICBdKTtcbiAgICB9XG4gICAgYWZ0ZXJBdXRvU2tpcCgpIHt9XG4gICAgYmVmb3JlRml0KCkge1xuICAgICAgICBjYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlRml0LCBbXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBmaXQoKSB7XG4gICAgICAgIGNvbnN0IG1pblNpemUgPSB7XG4gICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgIGhlaWdodDogMFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCB7IGNoYXJ0ICwgb3B0aW9uczogeyB0aWNrczogdGlja09wdHMgLCB0aXRsZTogdGl0bGVPcHRzICwgZ3JpZDogZ3JpZE9wdHMgIH0gIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBkaXNwbGF5ID0gdGhpcy5faXNWaXNpYmxlKCk7XG4gICAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IHRoaXMuaXNIb3Jpem9udGFsKCk7XG4gICAgICAgIGlmIChkaXNwbGF5KSB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZUhlaWdodCA9IGdldFRpdGxlSGVpZ2h0KHRpdGxlT3B0cywgY2hhcnQub3B0aW9ucy5mb250KTtcbiAgICAgICAgICAgIGlmIChpc0hvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICBtaW5TaXplLndpZHRoID0gdGhpcy5tYXhXaWR0aDtcbiAgICAgICAgICAgICAgICBtaW5TaXplLmhlaWdodCA9IGdldFRpY2tNYXJrTGVuZ3RoKGdyaWRPcHRzKSArIHRpdGxlSGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW5TaXplLmhlaWdodCA9IHRoaXMubWF4SGVpZ2h0O1xuICAgICAgICAgICAgICAgIG1pblNpemUud2lkdGggPSBnZXRUaWNrTWFya0xlbmd0aChncmlkT3B0cykgKyB0aXRsZUhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aWNrT3B0cy5kaXNwbGF5ICYmIHRoaXMudGlja3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBmaXJzdCAsIGxhc3QgLCB3aWRlc3QgLCBoaWdoZXN0ICB9ID0gdGhpcy5fZ2V0TGFiZWxTaXplcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpY2tQYWRkaW5nID0gdGlja09wdHMucGFkZGluZyAqIDI7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5nbGVSYWRpYW5zID0gdG9SYWRpYW5zKHRoaXMubGFiZWxSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgY29zID0gTWF0aC5jb3MoYW5nbGVSYWRpYW5zKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbihhbmdsZVJhZGlhbnMpO1xuICAgICAgICAgICAgICAgIGlmIChpc0hvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSB0aWNrT3B0cy5taXJyb3IgPyAwIDogc2luICogd2lkZXN0LndpZHRoICsgY29zICogaGlnaGVzdC5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIG1pblNpemUuaGVpZ2h0ID0gTWF0aC5taW4odGhpcy5tYXhIZWlnaHQsIG1pblNpemUuaGVpZ2h0ICsgbGFiZWxIZWlnaHQgKyB0aWNrUGFkZGluZyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWxXaWR0aCA9IHRpY2tPcHRzLm1pcnJvciA/IDAgOiBjb3MgKiB3aWRlc3Qud2lkdGggKyBzaW4gKiBoaWdoZXN0LmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgbWluU2l6ZS53aWR0aCA9IE1hdGgubWluKHRoaXMubWF4V2lkdGgsIG1pblNpemUud2lkdGggKyBsYWJlbFdpZHRoICsgdGlja1BhZGRpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVQYWRkaW5nKGZpcnN0LCBsYXN0LCBzaW4sIGNvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faGFuZGxlTWFyZ2lucygpO1xuICAgICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5fbGVuZ3RoID0gY2hhcnQud2lkdGggLSB0aGlzLl9tYXJnaW5zLmxlZnQgLSB0aGlzLl9tYXJnaW5zLnJpZ2h0O1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBtaW5TaXplLmhlaWdodDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBtaW5TaXplLndpZHRoO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLl9sZW5ndGggPSBjaGFydC5oZWlnaHQgLSB0aGlzLl9tYXJnaW5zLnRvcCAtIHRoaXMuX21hcmdpbnMuYm90dG9tO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9jYWxjdWxhdGVQYWRkaW5nKGZpcnN0LCBsYXN0LCBzaW4sIGNvcykge1xuICAgICAgICBjb25zdCB7IHRpY2tzOiB7IGFsaWduICwgcGFkZGluZyAgfSAsIHBvc2l0aW9uICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBpc1JvdGF0ZWQgPSB0aGlzLmxhYmVsUm90YXRpb24gIT09IDA7XG4gICAgICAgIGNvbnN0IGxhYmVsc0JlbG93VGlja3MgPSBwb3NpdGlvbiAhPT0gJ3RvcCcgJiYgdGhpcy5heGlzID09PSAneCc7XG4gICAgICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRMZWZ0ID0gdGhpcy5nZXRQaXhlbEZvclRpY2soMCkgLSB0aGlzLmxlZnQ7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRSaWdodCA9IHRoaXMucmlnaHQgLSB0aGlzLmdldFBpeGVsRm9yVGljayh0aGlzLnRpY2tzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgbGV0IHBhZGRpbmdMZWZ0ID0gMDtcbiAgICAgICAgICAgIGxldCBwYWRkaW5nUmlnaHQgPSAwO1xuICAgICAgICAgICAgaWYgKGlzUm90YXRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChsYWJlbHNCZWxvd1RpY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0ID0gY29zICogZmlyc3Qud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodCA9IHNpbiAqIGxhc3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0ID0gc2luICogZmlyc3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQgPSBjb3MgKiBsYXN0LndpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdzdGFydCcpIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQgPSBsYXN0LndpZHRoO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2VuZCcpIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdCA9IGZpcnN0LndpZHRoO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiAhPT0gJ2lubmVyJykge1xuICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0ID0gZmlyc3Qud2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodCA9IGxhc3Qud2lkdGggLyAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWRkaW5nTGVmdCA9IE1hdGgubWF4KChwYWRkaW5nTGVmdCAtIG9mZnNldExlZnQgKyBwYWRkaW5nKSAqIHRoaXMud2lkdGggLyAodGhpcy53aWR0aCAtIG9mZnNldExlZnQpLCAwKTtcbiAgICAgICAgICAgIHRoaXMucGFkZGluZ1JpZ2h0ID0gTWF0aC5tYXgoKHBhZGRpbmdSaWdodCAtIG9mZnNldFJpZ2h0ICsgcGFkZGluZykgKiB0aGlzLndpZHRoIC8gKHRoaXMud2lkdGggLSBvZmZzZXRSaWdodCksIDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHBhZGRpbmdUb3AgPSBsYXN0LmhlaWdodCAvIDI7XG4gICAgICAgICAgICBsZXQgcGFkZGluZ0JvdHRvbSA9IGZpcnN0LmhlaWdodCAvIDI7XG4gICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdzdGFydCcpIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nVG9wID0gMDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tID0gZmlyc3QuaGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2VuZCcpIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nVG9wID0gbGFzdC5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZGRpbmdUb3AgPSBwYWRkaW5nVG9wICsgcGFkZGluZztcbiAgICAgICAgICAgIHRoaXMucGFkZGluZ0JvdHRvbSA9IHBhZGRpbmdCb3R0b20gKyBwYWRkaW5nO1xuICAgICAgICB9XG4gICAgfVxuIF9oYW5kbGVNYXJnaW5zKCkge1xuICAgICAgICBpZiAodGhpcy5fbWFyZ2lucykge1xuICAgICAgICAgICAgdGhpcy5fbWFyZ2lucy5sZWZ0ID0gTWF0aC5tYXgodGhpcy5wYWRkaW5nTGVmdCwgdGhpcy5fbWFyZ2lucy5sZWZ0KTtcbiAgICAgICAgICAgIHRoaXMuX21hcmdpbnMudG9wID0gTWF0aC5tYXgodGhpcy5wYWRkaW5nVG9wLCB0aGlzLl9tYXJnaW5zLnRvcCk7XG4gICAgICAgICAgICB0aGlzLl9tYXJnaW5zLnJpZ2h0ID0gTWF0aC5tYXgodGhpcy5wYWRkaW5nUmlnaHQsIHRoaXMuX21hcmdpbnMucmlnaHQpO1xuICAgICAgICAgICAgdGhpcy5fbWFyZ2lucy5ib3R0b20gPSBNYXRoLm1heCh0aGlzLnBhZGRpbmdCb3R0b20sIHRoaXMuX21hcmdpbnMuYm90dG9tKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZnRlckZpdCgpIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5vcHRpb25zLmFmdGVyRml0LCBbXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgIF0pO1xuICAgIH1cbiBpc0hvcml6b250YWwoKSB7XG4gICAgICAgIGNvbnN0IHsgYXhpcyAsIHBvc2l0aW9uICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICByZXR1cm4gcG9zaXRpb24gPT09ICd0b3AnIHx8IHBvc2l0aW9uID09PSAnYm90dG9tJyB8fCBheGlzID09PSAneCc7XG4gICAgfVxuIGlzRnVsbFNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZnVsbFNpemU7XG4gICAgfVxuIF9jb252ZXJ0VGlja3NUb0xhYmVscyh0aWNrcykge1xuICAgICAgICB0aGlzLmJlZm9yZVRpY2tUb0xhYmVsQ29udmVyc2lvbigpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlVGlja0xhYmVscyh0aWNrcyk7XG4gICAgICAgIGxldCBpLCBpbGVuO1xuICAgICAgICBmb3IoaSA9IDAsIGlsZW4gPSB0aWNrcy5sZW5ndGg7IGkgPCBpbGVuOyBpKyspe1xuICAgICAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWYodGlja3NbaV0ubGFiZWwpKSB7XG4gICAgICAgICAgICAgICAgdGlja3Muc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGlsZW4tLTtcbiAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZnRlclRpY2tUb0xhYmVsQ29udmVyc2lvbigpO1xuICAgIH1cbiBfZ2V0TGFiZWxTaXplcygpIHtcbiAgICAgICAgbGV0IGxhYmVsU2l6ZXMgPSB0aGlzLl9sYWJlbFNpemVzO1xuICAgICAgICBpZiAoIWxhYmVsU2l6ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZVNpemUgPSB0aGlzLm9wdGlvbnMudGlja3Muc2FtcGxlU2l6ZTtcbiAgICAgICAgICAgIGxldCB0aWNrcyA9IHRoaXMudGlja3M7XG4gICAgICAgICAgICBpZiAoc2FtcGxlU2l6ZSA8IHRpY2tzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRpY2tzID0gc2FtcGxlKHRpY2tzLCBzYW1wbGVTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2xhYmVsU2l6ZXMgPSBsYWJlbFNpemVzID0gdGhpcy5fY29tcHV0ZUxhYmVsU2l6ZXModGlja3MsIHRpY2tzLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxhYmVsU2l6ZXM7XG4gICAgfVxuIF9jb21wdXRlTGFiZWxTaXplcyh0aWNrcywgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHsgY3R4ICwgX2xvbmdlc3RUZXh0Q2FjaGU6IGNhY2hlcyAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHdpZHRocyA9IFtdO1xuICAgICAgICBjb25zdCBoZWlnaHRzID0gW107XG4gICAgICAgIGxldCB3aWRlc3RMYWJlbFNpemUgPSAwO1xuICAgICAgICBsZXQgaGlnaGVzdExhYmVsU2l6ZSA9IDA7XG4gICAgICAgIGxldCBpLCBqLCBqbGVuLCBsYWJlbCwgdGlja0ZvbnQsIGZvbnRTdHJpbmcsIGNhY2hlLCBsaW5lSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBuZXN0ZWRMYWJlbDtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgbGFiZWwgPSB0aWNrc1tpXS5sYWJlbDtcbiAgICAgICAgICAgIHRpY2tGb250ID0gdGhpcy5fcmVzb2x2ZVRpY2tGb250T3B0aW9ucyhpKTtcbiAgICAgICAgICAgIGN0eC5mb250ID0gZm9udFN0cmluZyA9IHRpY2tGb250LnN0cmluZztcbiAgICAgICAgICAgIGNhY2hlID0gY2FjaGVzW2ZvbnRTdHJpbmddID0gY2FjaGVzW2ZvbnRTdHJpbmddIHx8IHtcbiAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICBnYzogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsaW5lSGVpZ2h0ID0gdGlja0ZvbnQubGluZUhlaWdodDtcbiAgICAgICAgICAgIHdpZHRoID0gaGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZihsYWJlbCkgJiYgIWlzQXJyYXkobGFiZWwpKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSBfbWVhc3VyZVRleHQoY3R4LCBjYWNoZS5kYXRhLCBjYWNoZS5nYywgd2lkdGgsIGxhYmVsKTtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBsaW5lSGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KGxhYmVsKSkge1xuICAgICAgICAgICAgICAgIGZvcihqID0gMCwgamxlbiA9IGxhYmVsLmxlbmd0aDsgaiA8IGpsZW47ICsrail7XG4gICAgICAgICAgICAgICAgICAgIG5lc3RlZExhYmVsID0gbGFiZWxbal07XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZihuZXN0ZWRMYWJlbCkgJiYgIWlzQXJyYXkobmVzdGVkTGFiZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IF9tZWFzdXJlVGV4dChjdHgsIGNhY2hlLmRhdGEsIGNhY2hlLmdjLCB3aWR0aCwgbmVzdGVkTGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aWR0aHMucHVzaCh3aWR0aCk7XG4gICAgICAgICAgICBoZWlnaHRzLnB1c2goaGVpZ2h0KTtcbiAgICAgICAgICAgIHdpZGVzdExhYmVsU2l6ZSA9IE1hdGgubWF4KHdpZHRoLCB3aWRlc3RMYWJlbFNpemUpO1xuICAgICAgICAgICAgaGlnaGVzdExhYmVsU2l6ZSA9IE1hdGgubWF4KGhlaWdodCwgaGlnaGVzdExhYmVsU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2FyYmFnZUNvbGxlY3QoY2FjaGVzLCBsZW5ndGgpO1xuICAgICAgICBjb25zdCB3aWRlc3QgPSB3aWR0aHMuaW5kZXhPZih3aWRlc3RMYWJlbFNpemUpO1xuICAgICAgICBjb25zdCBoaWdoZXN0ID0gaGVpZ2h0cy5pbmRleE9mKGhpZ2hlc3RMYWJlbFNpemUpO1xuICAgICAgICBjb25zdCB2YWx1ZUF0ID0gKGlkeCk9Pih7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoc1tpZHhdIHx8IDAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRzW2lkeF0gfHwgMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaXJzdDogdmFsdWVBdCgwKSxcbiAgICAgICAgICAgIGxhc3Q6IHZhbHVlQXQobGVuZ3RoIC0gMSksXG4gICAgICAgICAgICB3aWRlc3Q6IHZhbHVlQXQod2lkZXN0KSxcbiAgICAgICAgICAgIGhpZ2hlc3Q6IHZhbHVlQXQoaGlnaGVzdCksXG4gICAgICAgICAgICB3aWR0aHMsXG4gICAgICAgICAgICBoZWlnaHRzXG4gICAgICAgIH07XG4gICAgfVxuIGdldExhYmVsRm9yVmFsdWUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiBnZXRQaXhlbEZvclZhbHVlKHZhbHVlLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiBnZXRWYWx1ZUZvclBpeGVsKHBpeGVsKSB7fVxuIGdldFBpeGVsRm9yVGljayhpbmRleCkge1xuICAgICAgICBjb25zdCB0aWNrcyA9IHRoaXMudGlja3M7XG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiB0aWNrcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQaXhlbEZvclZhbHVlKHRpY2tzW2luZGV4XS52YWx1ZSk7XG4gICAgfVxuIGdldFBpeGVsRm9yRGVjaW1hbChkZWNpbWFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZXZlcnNlUGl4ZWxzKSB7XG4gICAgICAgICAgICBkZWNpbWFsID0gMSAtIGRlY2ltYWw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGl4ZWwgPSB0aGlzLl9zdGFydFBpeGVsICsgZGVjaW1hbCAqIHRoaXMuX2xlbmd0aDtcbiAgICAgICAgcmV0dXJuIF9pbnQxNlJhbmdlKHRoaXMuX2FsaWduVG9QaXhlbHMgPyBfYWxpZ25QaXhlbCh0aGlzLmNoYXJ0LCBwaXhlbCwgMCkgOiBwaXhlbCk7XG4gICAgfVxuIGdldERlY2ltYWxGb3JQaXhlbChwaXhlbCkge1xuICAgICAgICBjb25zdCBkZWNpbWFsID0gKHBpeGVsIC0gdGhpcy5fc3RhcnRQaXhlbCkgLyB0aGlzLl9sZW5ndGg7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXZlcnNlUGl4ZWxzID8gMSAtIGRlY2ltYWwgOiBkZWNpbWFsO1xuICAgIH1cbiBnZXRCYXNlUGl4ZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBpeGVsRm9yVmFsdWUodGhpcy5nZXRCYXNlVmFsdWUoKSk7XG4gICAgfVxuIGdldEJhc2VWYWx1ZSgpIHtcbiAgICAgICAgY29uc3QgeyBtaW4gLCBtYXggIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gbWluIDwgMCAmJiBtYXggPCAwID8gbWF4IDogbWluID4gMCAmJiBtYXggPiAwID8gbWluIDogMDtcbiAgICB9XG4gZ2V0Q29udGV4dChpbmRleCkge1xuICAgICAgICBjb25zdCB0aWNrcyA9IHRoaXMudGlja3MgfHwgW107XG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGlja3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCB0aWNrID0gdGlja3NbaW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIHRpY2suJGNvbnRleHQgfHwgKHRpY2suJGNvbnRleHQgPSBjcmVhdGVUaWNrQ29udGV4dCh0aGlzLmdldENvbnRleHQoKSwgaW5kZXgsIHRpY2spKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy4kY29udGV4dCB8fCAodGhpcy4kY29udGV4dCA9IGNyZWF0ZVNjYWxlQ29udGV4dCh0aGlzLmNoYXJ0LmdldENvbnRleHQoKSwgdGhpcykpO1xuICAgIH1cbiBfdGlja1NpemUoKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvblRpY2tzID0gdGhpcy5vcHRpb25zLnRpY2tzO1xuICAgICAgICBjb25zdCByb3QgPSB0b1JhZGlhbnModGhpcy5sYWJlbFJvdGF0aW9uKTtcbiAgICAgICAgY29uc3QgY29zID0gTWF0aC5hYnMoTWF0aC5jb3Mocm90KSk7XG4gICAgICAgIGNvbnN0IHNpbiA9IE1hdGguYWJzKE1hdGguc2luKHJvdCkpO1xuICAgICAgICBjb25zdCBsYWJlbFNpemVzID0gdGhpcy5fZ2V0TGFiZWxTaXplcygpO1xuICAgICAgICBjb25zdCBwYWRkaW5nID0gb3B0aW9uVGlja3MuYXV0b1NraXBQYWRkaW5nIHx8IDA7XG4gICAgICAgIGNvbnN0IHcgPSBsYWJlbFNpemVzID8gbGFiZWxTaXplcy53aWRlc3Qud2lkdGggKyBwYWRkaW5nIDogMDtcbiAgICAgICAgY29uc3QgaCA9IGxhYmVsU2l6ZXMgPyBsYWJlbFNpemVzLmhpZ2hlc3QuaGVpZ2h0ICsgcGFkZGluZyA6IDA7XG4gICAgICAgIHJldHVybiB0aGlzLmlzSG9yaXpvbnRhbCgpID8gaCAqIGNvcyA+IHcgKiBzaW4gPyB3IC8gY29zIDogaCAvIHNpbiA6IGggKiBzaW4gPCB3ICogY29zID8gaCAvIGNvcyA6IHcgLyBzaW47XG4gICAgfVxuIF9pc1Zpc2libGUoKSB7XG4gICAgICAgIGNvbnN0IGRpc3BsYXkgPSB0aGlzLm9wdGlvbnMuZGlzcGxheTtcbiAgICAgICAgaWYgKGRpc3BsYXkgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgcmV0dXJuICEhZGlzcGxheTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYXRjaGluZ1Zpc2libGVNZXRhcygpLmxlbmd0aCA+IDA7XG4gICAgfVxuIF9jb21wdXRlR3JpZExpbmVJdGVtcyhjaGFydEFyZWEpIHtcbiAgICAgICAgY29uc3QgYXhpcyA9IHRoaXMuYXhpcztcbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCB7IGdyaWQgLCBwb3NpdGlvbiAsIGJvcmRlciAgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGdyaWQub2Zmc2V0O1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSB0aGlzLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgICBjb25zdCB0aWNrcyA9IHRoaXMudGlja3M7XG4gICAgICAgIGNvbnN0IHRpY2tzTGVuZ3RoID0gdGlja3MubGVuZ3RoICsgKG9mZnNldCA/IDEgOiAwKTtcbiAgICAgICAgY29uc3QgdGwgPSBnZXRUaWNrTWFya0xlbmd0aChncmlkKTtcbiAgICAgICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICAgICAgY29uc3QgYm9yZGVyT3B0cyA9IGJvcmRlci5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICAgICAgY29uc3QgYXhpc1dpZHRoID0gYm9yZGVyT3B0cy5kaXNwbGF5ID8gYm9yZGVyT3B0cy53aWR0aCA6IDA7XG4gICAgICAgIGNvbnN0IGF4aXNIYWxmV2lkdGggPSBheGlzV2lkdGggLyAyO1xuICAgICAgICBjb25zdCBhbGlnbkJvcmRlclZhbHVlID0gZnVuY3Rpb24ocGl4ZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBfYWxpZ25QaXhlbChjaGFydCwgcGl4ZWwsIGF4aXNXaWR0aCk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBib3JkZXJWYWx1ZSwgaSwgbGluZVZhbHVlLCBhbGlnbmVkTGluZVZhbHVlO1xuICAgICAgICBsZXQgdHgxLCB0eTEsIHR4MiwgdHkyLCB4MSwgeTEsIHgyLCB5MjtcbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgICAgICAgYm9yZGVyVmFsdWUgPSBhbGlnbkJvcmRlclZhbHVlKHRoaXMuYm90dG9tKTtcbiAgICAgICAgICAgIHR5MSA9IHRoaXMuYm90dG9tIC0gdGw7XG4gICAgICAgICAgICB0eTIgPSBib3JkZXJWYWx1ZSAtIGF4aXNIYWxmV2lkdGg7XG4gICAgICAgICAgICB5MSA9IGFsaWduQm9yZGVyVmFsdWUoY2hhcnRBcmVhLnRvcCkgKyBheGlzSGFsZldpZHRoO1xuICAgICAgICAgICAgeTIgPSBjaGFydEFyZWEuYm90dG9tO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgYm9yZGVyVmFsdWUgPSBhbGlnbkJvcmRlclZhbHVlKHRoaXMudG9wKTtcbiAgICAgICAgICAgIHkxID0gY2hhcnRBcmVhLnRvcDtcbiAgICAgICAgICAgIHkyID0gYWxpZ25Cb3JkZXJWYWx1ZShjaGFydEFyZWEuYm90dG9tKSAtIGF4aXNIYWxmV2lkdGg7XG4gICAgICAgICAgICB0eTEgPSBib3JkZXJWYWx1ZSArIGF4aXNIYWxmV2lkdGg7XG4gICAgICAgICAgICB0eTIgPSB0aGlzLnRvcCArIHRsO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGJvcmRlclZhbHVlID0gYWxpZ25Cb3JkZXJWYWx1ZSh0aGlzLnJpZ2h0KTtcbiAgICAgICAgICAgIHR4MSA9IHRoaXMucmlnaHQgLSB0bDtcbiAgICAgICAgICAgIHR4MiA9IGJvcmRlclZhbHVlIC0gYXhpc0hhbGZXaWR0aDtcbiAgICAgICAgICAgIHgxID0gYWxpZ25Cb3JkZXJWYWx1ZShjaGFydEFyZWEubGVmdCkgKyBheGlzSGFsZldpZHRoO1xuICAgICAgICAgICAgeDIgPSBjaGFydEFyZWEucmlnaHQ7XG4gICAgICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGJvcmRlclZhbHVlID0gYWxpZ25Cb3JkZXJWYWx1ZSh0aGlzLmxlZnQpO1xuICAgICAgICAgICAgeDEgPSBjaGFydEFyZWEubGVmdDtcbiAgICAgICAgICAgIHgyID0gYWxpZ25Cb3JkZXJWYWx1ZShjaGFydEFyZWEucmlnaHQpIC0gYXhpc0hhbGZXaWR0aDtcbiAgICAgICAgICAgIHR4MSA9IGJvcmRlclZhbHVlICsgYXhpc0hhbGZXaWR0aDtcbiAgICAgICAgICAgIHR4MiA9IHRoaXMubGVmdCArIHRsO1xuICAgICAgICB9IGVsc2UgaWYgKGF4aXMgPT09ICd4Jykge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnY2VudGVyJykge1xuICAgICAgICAgICAgICAgIGJvcmRlclZhbHVlID0gYWxpZ25Cb3JkZXJWYWx1ZSgoY2hhcnRBcmVhLnRvcCArIGNoYXJ0QXJlYS5ib3R0b20pIC8gMiArIDAuNSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uQXhpc0lEID0gT2JqZWN0LmtleXMocG9zaXRpb24pWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcG9zaXRpb25bcG9zaXRpb25BeGlzSURdO1xuICAgICAgICAgICAgICAgIGJvcmRlclZhbHVlID0gYWxpZ25Cb3JkZXJWYWx1ZSh0aGlzLmNoYXJ0LnNjYWxlc1twb3NpdGlvbkF4aXNJRF0uZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeTEgPSBjaGFydEFyZWEudG9wO1xuICAgICAgICAgICAgeTIgPSBjaGFydEFyZWEuYm90dG9tO1xuICAgICAgICAgICAgdHkxID0gYm9yZGVyVmFsdWUgKyBheGlzSGFsZldpZHRoO1xuICAgICAgICAgICAgdHkyID0gdHkxICsgdGw7XG4gICAgICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gJ3knKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgYm9yZGVyVmFsdWUgPSBhbGlnbkJvcmRlclZhbHVlKChjaGFydEFyZWEubGVmdCArIGNoYXJ0QXJlYS5yaWdodCkgLyAyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QocG9zaXRpb24pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zaXRpb25BeGlzSUQxID0gT2JqZWN0LmtleXMocG9zaXRpb24pWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlMSA9IHBvc2l0aW9uW3Bvc2l0aW9uQXhpc0lEMV07XG4gICAgICAgICAgICAgICAgYm9yZGVyVmFsdWUgPSBhbGlnbkJvcmRlclZhbHVlKHRoaXMuY2hhcnQuc2NhbGVzW3Bvc2l0aW9uQXhpc0lEMV0uZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZTEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR4MSA9IGJvcmRlclZhbHVlIC0gYXhpc0hhbGZXaWR0aDtcbiAgICAgICAgICAgIHR4MiA9IHR4MSAtIHRsO1xuICAgICAgICAgICAgeDEgPSBjaGFydEFyZWEubGVmdDtcbiAgICAgICAgICAgIHgyID0gY2hhcnRBcmVhLnJpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gdmFsdWVPckRlZmF1bHQob3B0aW9ucy50aWNrcy5tYXhUaWNrc0xpbWl0LCB0aWNrc0xlbmd0aCk7XG4gICAgICAgIGNvbnN0IHN0ZXAgPSBNYXRoLm1heCgxLCBNYXRoLmNlaWwodGlja3NMZW5ndGggLyBsaW1pdCkpO1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCB0aWNrc0xlbmd0aDsgaSArPSBzdGVwKXtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoaSk7XG4gICAgICAgICAgICBjb25zdCBvcHRzQXRJbmRleCA9IGdyaWQuc2V0Q29udGV4dChjb250ZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IG9wdHNBdEluZGV4Qm9yZGVyID0gYm9yZGVyLnNldENvbnRleHQoY29udGV4dCk7XG4gICAgICAgICAgICBjb25zdCBsaW5lV2lkdGggPSBvcHRzQXRJbmRleC5saW5lV2lkdGg7XG4gICAgICAgICAgICBjb25zdCBsaW5lQ29sb3IgPSBvcHRzQXRJbmRleC5jb2xvcjtcbiAgICAgICAgICAgIGNvbnN0IGJvcmRlckRhc2ggPSBvcHRzQXRJbmRleEJvcmRlci5kYXNoIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgYm9yZGVyRGFzaE9mZnNldCA9IG9wdHNBdEluZGV4Qm9yZGVyLmRhc2hPZmZzZXQ7XG4gICAgICAgICAgICBjb25zdCB0aWNrV2lkdGggPSBvcHRzQXRJbmRleC50aWNrV2lkdGg7XG4gICAgICAgICAgICBjb25zdCB0aWNrQ29sb3IgPSBvcHRzQXRJbmRleC50aWNrQ29sb3I7XG4gICAgICAgICAgICBjb25zdCB0aWNrQm9yZGVyRGFzaCA9IG9wdHNBdEluZGV4LnRpY2tCb3JkZXJEYXNoIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgdGlja0JvcmRlckRhc2hPZmZzZXQgPSBvcHRzQXRJbmRleC50aWNrQm9yZGVyRGFzaE9mZnNldDtcbiAgICAgICAgICAgIGxpbmVWYWx1ZSA9IGdldFBpeGVsRm9yR3JpZExpbmUodGhpcywgaSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIGlmIChsaW5lVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWxpZ25lZExpbmVWYWx1ZSA9IF9hbGlnblBpeGVsKGNoYXJ0LCBsaW5lVmFsdWUsIGxpbmVXaWR0aCk7XG4gICAgICAgICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICAgICAgICAgICAgdHgxID0gdHgyID0geDEgPSB4MiA9IGFsaWduZWRMaW5lVmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHR5MSA9IHR5MiA9IHkxID0geTIgPSBhbGlnbmVkTGluZVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgdHgxLFxuICAgICAgICAgICAgICAgIHR5MSxcbiAgICAgICAgICAgICAgICB0eDIsXG4gICAgICAgICAgICAgICAgdHkyLFxuICAgICAgICAgICAgICAgIHgxLFxuICAgICAgICAgICAgICAgIHkxLFxuICAgICAgICAgICAgICAgIHgyLFxuICAgICAgICAgICAgICAgIHkyLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBsaW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgY29sb3I6IGxpbmVDb2xvcixcbiAgICAgICAgICAgICAgICBib3JkZXJEYXNoLFxuICAgICAgICAgICAgICAgIGJvcmRlckRhc2hPZmZzZXQsXG4gICAgICAgICAgICAgICAgdGlja1dpZHRoLFxuICAgICAgICAgICAgICAgIHRpY2tDb2xvcixcbiAgICAgICAgICAgICAgICB0aWNrQm9yZGVyRGFzaCxcbiAgICAgICAgICAgICAgICB0aWNrQm9yZGVyRGFzaE9mZnNldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGlja3NMZW5ndGggPSB0aWNrc0xlbmd0aDtcbiAgICAgICAgdGhpcy5fYm9yZGVyVmFsdWUgPSBib3JkZXJWYWx1ZTtcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cbiBfY29tcHV0ZUxhYmVsSXRlbXMoY2hhcnRBcmVhKSB7XG4gICAgICAgIGNvbnN0IGF4aXMgPSB0aGlzLmF4aXM7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgcG9zaXRpb24gLCB0aWNrczogb3B0aW9uVGlja3MgIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSB0aGlzLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgICBjb25zdCB0aWNrcyA9IHRoaXMudGlja3M7XG4gICAgICAgIGNvbnN0IHsgYWxpZ24gLCBjcm9zc0FsaWduICwgcGFkZGluZyAsIG1pcnJvciAgfSA9IG9wdGlvblRpY2tzO1xuICAgICAgICBjb25zdCB0bCA9IGdldFRpY2tNYXJrTGVuZ3RoKG9wdGlvbnMuZ3JpZCk7XG4gICAgICAgIGNvbnN0IHRpY2tBbmRQYWRkaW5nID0gdGwgKyBwYWRkaW5nO1xuICAgICAgICBjb25zdCBoVGlja0FuZFBhZGRpbmcgPSBtaXJyb3IgPyAtcGFkZGluZyA6IHRpY2tBbmRQYWRkaW5nO1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IC10b1JhZGlhbnModGhpcy5sYWJlbFJvdGF0aW9uKTtcbiAgICAgICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICAgICAgbGV0IGksIGlsZW4sIHRpY2ssIGxhYmVsLCB4LCB5LCB0ZXh0QWxpZ24sIHBpeGVsLCBmb250LCBsaW5lSGVpZ2h0LCBsaW5lQ291bnQsIHRleHRPZmZzZXQ7XG4gICAgICAgIGxldCB0ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgICAgICAgeSA9IHRoaXMuYm90dG9tIC0gaFRpY2tBbmRQYWRkaW5nO1xuICAgICAgICAgICAgdGV4dEFsaWduID0gdGhpcy5fZ2V0WEF4aXNMYWJlbEFsaWdubWVudCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgeSA9IHRoaXMudG9wICsgaFRpY2tBbmRQYWRkaW5nO1xuICAgICAgICAgICAgdGV4dEFsaWduID0gdGhpcy5fZ2V0WEF4aXNMYWJlbEFsaWdubWVudCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHRoaXMuX2dldFlBeGlzTGFiZWxBbGlnbm1lbnQodGwpO1xuICAgICAgICAgICAgdGV4dEFsaWduID0gcmV0LnRleHRBbGlnbjtcbiAgICAgICAgICAgIHggPSByZXQueDtcbiAgICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgY29uc3QgcmV0MSA9IHRoaXMuX2dldFlBeGlzTGFiZWxBbGlnbm1lbnQodGwpO1xuICAgICAgICAgICAgdGV4dEFsaWduID0gcmV0MS50ZXh0QWxpZ247XG4gICAgICAgICAgICB4ID0gcmV0MS54O1xuICAgICAgICB9IGVsc2UgaWYgKGF4aXMgPT09ICd4Jykge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnY2VudGVyJykge1xuICAgICAgICAgICAgICAgIHkgPSAoY2hhcnRBcmVhLnRvcCArIGNoYXJ0QXJlYS5ib3R0b20pIC8gMiArIHRpY2tBbmRQYWRkaW5nO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChwb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbkF4aXNJRCA9IE9iamVjdC5rZXlzKHBvc2l0aW9uKVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBvc2l0aW9uW3Bvc2l0aW9uQXhpc0lEXTtcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5jaGFydC5zY2FsZXNbcG9zaXRpb25BeGlzSURdLmdldFBpeGVsRm9yVmFsdWUodmFsdWUpICsgdGlja0FuZFBhZGRpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0QWxpZ24gPSB0aGlzLl9nZXRYQXhpc0xhYmVsQWxpZ25tZW50KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gJ3knKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgeCA9IChjaGFydEFyZWEubGVmdCArIGNoYXJ0QXJlYS5yaWdodCkgLyAyIC0gdGlja0FuZFBhZGRpbmc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uQXhpc0lEMSA9IE9iamVjdC5rZXlzKHBvc2l0aW9uKVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZTEgPSBwb3NpdGlvbltwb3NpdGlvbkF4aXNJRDFdO1xuICAgICAgICAgICAgICAgIHggPSB0aGlzLmNoYXJ0LnNjYWxlc1twb3NpdGlvbkF4aXNJRDFdLmdldFBpeGVsRm9yVmFsdWUodmFsdWUxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHRBbGlnbiA9IHRoaXMuX2dldFlBeGlzTGFiZWxBbGlnbm1lbnQodGwpLnRleHRBbGlnbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXhpcyA9PT0gJ3knKSB7XG4gICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdzdGFydCcpIHtcbiAgICAgICAgICAgICAgICB0ZXh0QmFzZWxpbmUgPSAndG9wJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdlbmQnKSB7XG4gICAgICAgICAgICAgICAgdGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGFiZWxTaXplcyA9IHRoaXMuX2dldExhYmVsU2l6ZXMoKTtcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gdGlja3MubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgIHRpY2sgPSB0aWNrc1tpXTtcbiAgICAgICAgICAgIGxhYmVsID0gdGljay5sYWJlbDtcbiAgICAgICAgICAgIGNvbnN0IG9wdHNBdEluZGV4ID0gb3B0aW9uVGlja3Muc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoaSkpO1xuICAgICAgICAgICAgcGl4ZWwgPSB0aGlzLmdldFBpeGVsRm9yVGljayhpKSArIG9wdGlvblRpY2tzLmxhYmVsT2Zmc2V0O1xuICAgICAgICAgICAgZm9udCA9IHRoaXMuX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoaSk7XG4gICAgICAgICAgICBsaW5lSGVpZ2h0ID0gZm9udC5saW5lSGVpZ2h0O1xuICAgICAgICAgICAgbGluZUNvdW50ID0gaXNBcnJheShsYWJlbCkgPyBsYWJlbC5sZW5ndGggOiAxO1xuICAgICAgICAgICAgY29uc3QgaGFsZkNvdW50ID0gbGluZUNvdW50IC8gMjtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gb3B0c0F0SW5kZXguY29sb3I7XG4gICAgICAgICAgICBjb25zdCBzdHJva2VDb2xvciA9IG9wdHNBdEluZGV4LnRleHRTdHJva2VDb2xvcjtcbiAgICAgICAgICAgIGNvbnN0IHN0cm9rZVdpZHRoID0gb3B0c0F0SW5kZXgudGV4dFN0cm9rZVdpZHRoO1xuICAgICAgICAgICAgbGV0IHRpY2tUZXh0QWxpZ24gPSB0ZXh0QWxpZ247XG4gICAgICAgICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICAgICAgICAgICAgeCA9IHBpeGVsO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0QWxpZ24gPT09ICdpbm5lcicpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGlsZW4gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrVGV4dEFsaWduID0gIXRoaXMub3B0aW9ucy5yZXZlcnNlID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrVGV4dEFsaWduID0gIXRoaXMub3B0aW9ucy5yZXZlcnNlID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tUZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICd0b3AnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjcm9zc0FsaWduID09PSAnbmVhcicgfHwgcm90YXRpb24gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRPZmZzZXQgPSAtbGluZUNvdW50ICogbGluZUhlaWdodCArIGxpbmVIZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNyb3NzQWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0T2Zmc2V0ID0gLWxhYmVsU2l6ZXMuaGlnaGVzdC5oZWlnaHQgLyAyIC0gaGFsZkNvdW50ICogbGluZUhlaWdodCArIGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0T2Zmc2V0ID0gLWxhYmVsU2l6ZXMuaGlnaGVzdC5oZWlnaHQgKyBsaW5lSGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjcm9zc0FsaWduID09PSAnbmVhcicgfHwgcm90YXRpb24gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRPZmZzZXQgPSBsaW5lSGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjcm9zc0FsaWduID09PSAnY2VudGVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dE9mZnNldCA9IGxhYmVsU2l6ZXMuaGlnaGVzdC5oZWlnaHQgLyAyIC0gaGFsZkNvdW50ICogbGluZUhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRPZmZzZXQgPSBsYWJlbFNpemVzLmhpZ2hlc3QuaGVpZ2h0IC0gbGluZUNvdW50ICogbGluZUhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWlycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRPZmZzZXQgKj0gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb3RhdGlvbiAhPT0gMCAmJiAhb3B0c0F0SW5kZXguc2hvd0xhYmVsQmFja2Ryb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgeCArPSBsaW5lSGVpZ2h0IC8gMiAqIE1hdGguc2luKHJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHkgPSBwaXhlbDtcbiAgICAgICAgICAgICAgICB0ZXh0T2Zmc2V0ID0gKDEgLSBsaW5lQ291bnQpICogbGluZUhlaWdodCAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYmFja2Ryb3A7XG4gICAgICAgICAgICBpZiAob3B0c0F0SW5kZXguc2hvd0xhYmVsQmFja2Ryb3ApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFBhZGRpbmcgPSB0b1BhZGRpbmcob3B0c0F0SW5kZXguYmFja2Ryb3BQYWRkaW5nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBsYWJlbFNpemVzLmhlaWdodHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBsYWJlbFNpemVzLndpZHRoc1tpXTtcbiAgICAgICAgICAgICAgICBsZXQgdG9wID0gdGV4dE9mZnNldCAtIGxhYmVsUGFkZGluZy50b3A7XG4gICAgICAgICAgICAgICAgbGV0IGxlZnQgPSAwIC0gbGFiZWxQYWRkaW5nLmxlZnQ7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRleHRCYXNlbGluZSl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgLT0gaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzd2l0Y2godGV4dEFsaWduKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmFja2Ryb3AgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICAgICAgICAgIHRvcCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoICsgbGFiZWxQYWRkaW5nLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCArIGxhYmVsUGFkZGluZy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBvcHRzQXRJbmRleC5iYWNrZHJvcENvbG9yXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgICAgIGZvbnQsXG4gICAgICAgICAgICAgICAgdGV4dE9mZnNldCxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcixcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IHRpY2tUZXh0QWxpZ24sXG4gICAgICAgICAgICAgICAgICAgIHRleHRCYXNlbGluZSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb246IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgsXG4gICAgICAgICAgICAgICAgICAgICAgICB5XG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIGJhY2tkcm9wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cbiAgICBfZ2V0WEF4aXNMYWJlbEFsaWdubWVudCgpIHtcbiAgICAgICAgY29uc3QgeyBwb3NpdGlvbiAsIHRpY2tzICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IC10b1JhZGlhbnModGhpcy5sYWJlbFJvdGF0aW9uKTtcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcG9zaXRpb24gPT09ICd0b3AnID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgfVxuICAgICAgICBsZXQgYWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgaWYgKHRpY2tzLmFsaWduID09PSAnc3RhcnQnKSB7XG4gICAgICAgICAgICBhbGlnbiA9ICdsZWZ0JztcbiAgICAgICAgfSBlbHNlIGlmICh0aWNrcy5hbGlnbiA9PT0gJ2VuZCcpIHtcbiAgICAgICAgICAgIGFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgfSBlbHNlIGlmICh0aWNrcy5hbGlnbiA9PT0gJ2lubmVyJykge1xuICAgICAgICAgICAgYWxpZ24gPSAnaW5uZXInO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGlnbjtcbiAgICB9XG4gICAgX2dldFlBeGlzTGFiZWxBbGlnbm1lbnQodGwpIHtcbiAgICAgICAgY29uc3QgeyBwb3NpdGlvbiAsIHRpY2tzOiB7IGNyb3NzQWxpZ24gLCBtaXJyb3IgLCBwYWRkaW5nICB9ICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBsYWJlbFNpemVzID0gdGhpcy5fZ2V0TGFiZWxTaXplcygpO1xuICAgICAgICBjb25zdCB0aWNrQW5kUGFkZGluZyA9IHRsICsgcGFkZGluZztcbiAgICAgICAgY29uc3Qgd2lkZXN0ID0gbGFiZWxTaXplcy53aWRlc3Qud2lkdGg7XG4gICAgICAgIGxldCB0ZXh0QWxpZ247XG4gICAgICAgIGxldCB4O1xuICAgICAgICBpZiAocG9zaXRpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgaWYgKG1pcnJvcikge1xuICAgICAgICAgICAgICAgIHggPSB0aGlzLnJpZ2h0ICsgcGFkZGluZztcbiAgICAgICAgICAgICAgICBpZiAoY3Jvc3NBbGlnbiA9PT0gJ25lYXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdsZWZ0JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNyb3NzQWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgICAgICB4ICs9IHdpZGVzdCAvIDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgICAgICAgeCArPSB3aWRlc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5yaWdodCAtIHRpY2tBbmRQYWRkaW5nO1xuICAgICAgICAgICAgICAgIGlmIChjcm9zc0FsaWduID09PSAnbmVhcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNyb3NzQWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgICAgICB4IC09IHdpZGVzdCAvIDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduID0gJ2xlZnQnO1xuICAgICAgICAgICAgICAgICAgICB4ID0gdGhpcy5sZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgaWYgKG1pcnJvcikge1xuICAgICAgICAgICAgICAgIHggPSB0aGlzLmxlZnQgKyBwYWRkaW5nO1xuICAgICAgICAgICAgICAgIGlmIChjcm9zc0FsaWduID09PSAnbmVhcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNyb3NzQWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgICAgICB4IC09IHdpZGVzdCAvIDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduID0gJ2xlZnQnO1xuICAgICAgICAgICAgICAgICAgICB4IC09IHdpZGVzdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHggPSB0aGlzLmxlZnQgKyB0aWNrQW5kUGFkZGluZztcbiAgICAgICAgICAgICAgICBpZiAoY3Jvc3NBbGlnbiA9PT0gJ25lYXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdsZWZ0JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNyb3NzQWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgICAgICB4ICs9IHdpZGVzdCAvIDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgICAgICAgeCA9IHRoaXMucmlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGV4dEFsaWduLFxuICAgICAgICAgICAgeFxuICAgICAgICB9O1xuICAgIH1cbiBfY29tcHV0ZUxhYmVsQXJlYSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50aWNrcy5taXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5vcHRpb25zLnBvc2l0aW9uO1xuICAgICAgICBpZiAocG9zaXRpb24gPT09ICdsZWZ0JyB8fCBwb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogdGhpcy5sZWZ0LFxuICAgICAgICAgICAgICAgIGJvdHRvbTogY2hhcnQuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIHJpZ2h0OiB0aGlzLnJpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ3RvcCcgfHwgcG9zaXRpb24gPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvcDogdGhpcy50b3AsXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICBib3R0b206IHRoaXMuYm90dG9tLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiBjaGFydC53aWR0aFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiBkcmF3QmFja2dyb3VuZCgpIHtcbiAgICAgICAgY29uc3QgeyBjdHggLCBvcHRpb25zOiB7IGJhY2tncm91bmRDb2xvciAgfSAsIGxlZnQgLCB0b3AgLCB3aWR0aCAsIGhlaWdodCAgfSA9IHRoaXM7XG4gICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldExpbmVXaWR0aEZvclZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGdyaWQgPSB0aGlzLm9wdGlvbnMuZ3JpZDtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1Zpc2libGUoKSB8fCAhZ3JpZC5kaXNwbGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aWNrcyA9IHRoaXMudGlja3M7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGlja3MuZmluZEluZGV4KCh0KT0+dC52YWx1ZSA9PT0gdmFsdWUpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0cyA9IGdyaWQuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoaW5kZXgpKTtcbiAgICAgICAgICAgIHJldHVybiBvcHRzLmxpbmVXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gZHJhd0dyaWQoY2hhcnRBcmVhKSB7XG4gICAgICAgIGNvbnN0IGdyaWQgPSB0aGlzLm9wdGlvbnMuZ3JpZDtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5fZ3JpZExpbmVJdGVtcyB8fCAodGhpcy5fZ3JpZExpbmVJdGVtcyA9IHRoaXMuX2NvbXB1dGVHcmlkTGluZUl0ZW1zKGNoYXJ0QXJlYSkpO1xuICAgICAgICBsZXQgaSwgaWxlbjtcbiAgICAgICAgY29uc3QgZHJhd0xpbmUgPSAocDEsIHAyLCBzdHlsZSk9PntcbiAgICAgICAgICAgIGlmICghc3R5bGUud2lkdGggfHwgIXN0eWxlLmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBzdHlsZS53aWR0aDtcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0eWxlLmNvbG9yO1xuICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKHN0eWxlLmJvcmRlckRhc2ggfHwgW10pO1xuICAgICAgICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gc3R5bGUuYm9yZGVyRGFzaE9mZnNldDtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8ocDEueCwgcDEueSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHAyLngsIHAyLnkpO1xuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGdyaWQuZGlzcGxheSkge1xuICAgICAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGdyaWQuZHJhd09uQ2hhcnRBcmVhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYXdMaW5lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IGl0ZW0ueDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBpdGVtLnkxXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IGl0ZW0ueDIsXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBpdGVtLnkyXG4gICAgICAgICAgICAgICAgICAgIH0sIGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ3JpZC5kcmF3VGlja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhd0xpbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogaXRlbS50eDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBpdGVtLnR5MVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBpdGVtLnR4MixcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IGl0ZW0udHkyXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBpdGVtLnRpY2tDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBpdGVtLnRpY2tXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckRhc2g6IGl0ZW0udGlja0JvcmRlckRhc2gsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJEYXNoT2Zmc2V0OiBpdGVtLnRpY2tCb3JkZXJEYXNoT2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiBkcmF3Qm9yZGVyKCkge1xuICAgICAgICBjb25zdCB7IGNoYXJ0ICwgY3R4ICwgb3B0aW9uczogeyBib3JkZXIgLCBncmlkICB9ICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgYm9yZGVyT3B0cyA9IGJvcmRlci5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICAgICAgY29uc3QgYXhpc1dpZHRoID0gYm9yZGVyLmRpc3BsYXkgPyBib3JkZXJPcHRzLndpZHRoIDogMDtcbiAgICAgICAgaWYgKCFheGlzV2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsYXN0TGluZVdpZHRoID0gZ3JpZC5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgwKSkubGluZVdpZHRoO1xuICAgICAgICBjb25zdCBib3JkZXJWYWx1ZSA9IHRoaXMuX2JvcmRlclZhbHVlO1xuICAgICAgICBsZXQgeDEsIHgyLCB5MSwgeTI7XG4gICAgICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgICAgICB4MSA9IF9hbGlnblBpeGVsKGNoYXJ0LCB0aGlzLmxlZnQsIGF4aXNXaWR0aCkgLSBheGlzV2lkdGggLyAyO1xuICAgICAgICAgICAgeDIgPSBfYWxpZ25QaXhlbChjaGFydCwgdGhpcy5yaWdodCwgbGFzdExpbmVXaWR0aCkgKyBsYXN0TGluZVdpZHRoIC8gMjtcbiAgICAgICAgICAgIHkxID0geTIgPSBib3JkZXJWYWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHkxID0gX2FsaWduUGl4ZWwoY2hhcnQsIHRoaXMudG9wLCBheGlzV2lkdGgpIC0gYXhpc1dpZHRoIC8gMjtcbiAgICAgICAgICAgIHkyID0gX2FsaWduUGl4ZWwoY2hhcnQsIHRoaXMuYm90dG9tLCBsYXN0TGluZVdpZHRoKSArIGxhc3RMaW5lV2lkdGggLyAyO1xuICAgICAgICAgICAgeDEgPSB4MiA9IGJvcmRlclZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBib3JkZXJPcHRzLndpZHRoO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBib3JkZXJPcHRzLmNvbG9yO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oeDEsIHkxKTtcbiAgICAgICAgY3R4LmxpbmVUbyh4MiwgeTIpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuIGRyYXdMYWJlbHMoY2hhcnRBcmVhKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvblRpY2tzID0gdGhpcy5vcHRpb25zLnRpY2tzO1xuICAgICAgICBpZiAoIW9wdGlvblRpY2tzLmRpc3BsYXkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICAgICAgY29uc3QgYXJlYSA9IHRoaXMuX2NvbXB1dGVMYWJlbEFyZWEoKTtcbiAgICAgICAgaWYgKGFyZWEpIHtcbiAgICAgICAgICAgIGNsaXBBcmVhKGN0eCwgYXJlYSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLmdldExhYmVsSXRlbXMoY2hhcnRBcmVhKTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKXtcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlclRleHRPcHRpb25zID0gaXRlbS5vcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgdGlja0ZvbnQgPSBpdGVtLmZvbnQ7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGl0ZW0ubGFiZWw7XG4gICAgICAgICAgICBjb25zdCB5ID0gaXRlbS50ZXh0T2Zmc2V0O1xuICAgICAgICAgICAgcmVuZGVyVGV4dChjdHgsIGxhYmVsLCAwLCB5LCB0aWNrRm9udCwgcmVuZGVyVGV4dE9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmVhKSB7XG4gICAgICAgICAgICB1bmNsaXBBcmVhKGN0eCk7XG4gICAgICAgIH1cbiAgICB9XG4gZHJhd1RpdGxlKCkge1xuICAgICAgICBjb25zdCB7IGN0eCAsIG9wdGlvbnM6IHsgcG9zaXRpb24gLCB0aXRsZSAsIHJldmVyc2UgIH0gIH0gPSB0aGlzO1xuICAgICAgICBpZiAoIXRpdGxlLmRpc3BsYXkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb250ID0gdG9Gb250KHRpdGxlLmZvbnQpO1xuICAgICAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKHRpdGxlLnBhZGRpbmcpO1xuICAgICAgICBjb25zdCBhbGlnbiA9IHRpdGxlLmFsaWduO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gZm9udC5saW5lSGVpZ2h0IC8gMjtcbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnYm90dG9tJyB8fCBwb3NpdGlvbiA9PT0gJ2NlbnRlcicgfHwgaXNPYmplY3QocG9zaXRpb24pKSB7XG4gICAgICAgICAgICBvZmZzZXQgKz0gcGFkZGluZy5ib3R0b207XG4gICAgICAgICAgICBpZiAoaXNBcnJheSh0aXRsZS50ZXh0KSkge1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBmb250LmxpbmVIZWlnaHQgKiAodGl0bGUudGV4dC5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCArPSBwYWRkaW5nLnRvcDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHRpdGxlWCAsIHRpdGxlWSAsIG1heFdpZHRoICwgcm90YXRpb24gIH0gPSB0aXRsZUFyZ3ModGhpcywgb2Zmc2V0LCBwb3NpdGlvbiwgYWxpZ24pO1xuICAgICAgICByZW5kZXJUZXh0KGN0eCwgdGl0bGUudGV4dCwgMCwgMCwgZm9udCwge1xuICAgICAgICAgICAgY29sb3I6IHRpdGxlLmNvbG9yLFxuICAgICAgICAgICAgbWF4V2lkdGgsXG4gICAgICAgICAgICByb3RhdGlvbixcbiAgICAgICAgICAgIHRleHRBbGlnbjogdGl0bGVBbGlnbihhbGlnbiwgcG9zaXRpb24sIHJldmVyc2UpLFxuICAgICAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJyxcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uOiBbXG4gICAgICAgICAgICAgICAgdGl0bGVYLFxuICAgICAgICAgICAgICAgIHRpdGxlWVxuICAgICAgICAgICAgXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZHJhdyhjaGFydEFyZWEpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1Zpc2libGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhd0JhY2tncm91bmQoKTtcbiAgICAgICAgdGhpcy5kcmF3R3JpZChjaGFydEFyZWEpO1xuICAgICAgICB0aGlzLmRyYXdCb3JkZXIoKTtcbiAgICAgICAgdGhpcy5kcmF3VGl0bGUoKTtcbiAgICAgICAgdGhpcy5kcmF3TGFiZWxzKGNoYXJ0QXJlYSk7XG4gICAgfVxuIF9sYXllcnMoKSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHR6ID0gb3B0cy50aWNrcyAmJiBvcHRzLnRpY2tzLnogfHwgMDtcbiAgICAgICAgY29uc3QgZ3ogPSB2YWx1ZU9yRGVmYXVsdChvcHRzLmdyaWQgJiYgb3B0cy5ncmlkLnosIC0xKTtcbiAgICAgICAgY29uc3QgYnogPSB2YWx1ZU9yRGVmYXVsdChvcHRzLmJvcmRlciAmJiBvcHRzLmJvcmRlci56LCAwKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1Zpc2libGUoKSB8fCB0aGlzLmRyYXcgIT09IFNjYWxlLnByb3RvdHlwZS5kcmF3KSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgejogdHosXG4gICAgICAgICAgICAgICAgICAgIGRyYXc6IChjaGFydEFyZWEpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoY2hhcnRBcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB6OiBneixcbiAgICAgICAgICAgICAgICBkcmF3OiAoY2hhcnRBcmVhKT0+e1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdCYWNrZ3JvdW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0dyaWQoY2hhcnRBcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3VGl0bGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHo6IGJ6LFxuICAgICAgICAgICAgICAgIGRyYXc6ICgpPT57XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0JvcmRlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgejogdHosXG4gICAgICAgICAgICAgICAgZHJhdzogKGNoYXJ0QXJlYSk9PntcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3TGFiZWxzKGNoYXJ0QXJlYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgIH1cbiBnZXRNYXRjaGluZ1Zpc2libGVNZXRhcyh0eXBlKSB7XG4gICAgICAgIGNvbnN0IG1ldGFzID0gdGhpcy5jaGFydC5nZXRTb3J0ZWRWaXNpYmxlRGF0YXNldE1ldGFzKCk7XG4gICAgICAgIGNvbnN0IGF4aXNJRCA9IHRoaXMuYXhpcyArICdBeGlzSUQnO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IGksIGlsZW47XG4gICAgICAgIGZvcihpID0gMCwgaWxlbiA9IG1ldGFzLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBjb25zdCBtZXRhID0gbWV0YXNbaV07XG4gICAgICAgICAgICBpZiAobWV0YVtheGlzSURdID09PSB0aGlzLmlkICYmICghdHlwZSB8fCBtZXRhLnR5cGUgPT09IHR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobWV0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0aW9ucy50aWNrcy5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dChpbmRleCkpO1xuICAgICAgICByZXR1cm4gdG9Gb250KG9wdHMuZm9udCk7XG4gICAgfVxuIF9tYXhEaWdpdHMoKSB7XG4gICAgICAgIGNvbnN0IGZvbnRTaXplID0gdGhpcy5fcmVzb2x2ZVRpY2tGb250T3B0aW9ucygwKS5saW5lSGVpZ2h0O1xuICAgICAgICByZXR1cm4gKHRoaXMuaXNIb3Jpem9udGFsKCkgPyB0aGlzLndpZHRoIDogdGhpcy5oZWlnaHQpIC8gZm9udFNpemU7XG4gICAgfVxufVxuXG5jbGFzcyBUeXBlZFJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBzY29wZSwgb3ZlcnJpZGUpe1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgICAgIHRoaXMub3ZlcnJpZGUgPSBvdmVycmlkZTtcbiAgICAgICAgdGhpcy5pdGVtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICAgIGlzRm9yVHlwZSh0eXBlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YuY2FsbCh0aGlzLnR5cGUucHJvdG90eXBlLCB0eXBlLnByb3RvdHlwZSk7XG4gICAgfVxuIHJlZ2lzdGVyKGl0ZW0pIHtcbiAgICAgICAgY29uc3QgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaXRlbSk7XG4gICAgICAgIGxldCBwYXJlbnRTY29wZTtcbiAgICAgICAgaWYgKGlzSUNoYXJ0Q29tcG9uZW50KHByb3RvKSkge1xuICAgICAgICAgICAgcGFyZW50U2NvcGUgPSB0aGlzLnJlZ2lzdGVyKHByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXM7XG4gICAgICAgIGNvbnN0IGlkID0gaXRlbS5pZDtcbiAgICAgICAgY29uc3Qgc2NvcGUgPSB0aGlzLnNjb3BlICsgJy4nICsgaWQ7XG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY2xhc3MgZG9lcyBub3QgaGF2ZSBpZDogJyArIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZCBpbiBpdGVtcykge1xuICAgICAgICAgICAgcmV0dXJuIHNjb3BlO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW1zW2lkXSA9IGl0ZW07XG4gICAgICAgIHJlZ2lzdGVyRGVmYXVsdHMoaXRlbSwgc2NvcGUsIHBhcmVudFNjb3BlKTtcbiAgICAgICAgaWYgKHRoaXMub3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIGRlZmF1bHRzLm92ZXJyaWRlKGl0ZW0uaWQsIGl0ZW0ub3ZlcnJpZGVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NvcGU7XG4gICAgfVxuIGdldChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtc1tpZF07XG4gICAgfVxuIHVucmVnaXN0ZXIoaXRlbSkge1xuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXM7XG4gICAgICAgIGNvbnN0IGlkID0gaXRlbS5pZDtcbiAgICAgICAgY29uc3Qgc2NvcGUgPSB0aGlzLnNjb3BlO1xuICAgICAgICBpZiAoaWQgaW4gaXRlbXMpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBpdGVtc1tpZF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjb3BlICYmIGlkIGluIGRlZmF1bHRzW3Njb3BlXSkge1xuICAgICAgICAgICAgZGVsZXRlIGRlZmF1bHRzW3Njb3BlXVtpZF07XG4gICAgICAgICAgICBpZiAodGhpcy5vdmVycmlkZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvdmVycmlkZXNbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gcmVnaXN0ZXJEZWZhdWx0cyhpdGVtLCBzY29wZSwgcGFyZW50U2NvcGUpIHtcbiAgICBjb25zdCBpdGVtRGVmYXVsdHMgPSBtZXJnZShPYmplY3QuY3JlYXRlKG51bGwpLCBbXG4gICAgICAgIHBhcmVudFNjb3BlID8gZGVmYXVsdHMuZ2V0KHBhcmVudFNjb3BlKSA6IHt9LFxuICAgICAgICBkZWZhdWx0cy5nZXQoc2NvcGUpLFxuICAgICAgICBpdGVtLmRlZmF1bHRzXG4gICAgXSk7XG4gICAgZGVmYXVsdHMuc2V0KHNjb3BlLCBpdGVtRGVmYXVsdHMpO1xuICAgIGlmIChpdGVtLmRlZmF1bHRSb3V0ZXMpIHtcbiAgICAgICAgcm91dGVEZWZhdWx0cyhzY29wZSwgaXRlbS5kZWZhdWx0Um91dGVzKTtcbiAgICB9XG4gICAgaWYgKGl0ZW0uZGVzY3JpcHRvcnMpIHtcbiAgICAgICAgZGVmYXVsdHMuZGVzY3JpYmUoc2NvcGUsIGl0ZW0uZGVzY3JpcHRvcnMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJvdXRlRGVmYXVsdHMoc2NvcGUsIHJvdXRlcykge1xuICAgIE9iamVjdC5rZXlzKHJvdXRlcykuZm9yRWFjaCgocHJvcGVydHkpPT57XG4gICAgICAgIGNvbnN0IHByb3BlcnR5UGFydHMgPSBwcm9wZXJ0eS5zcGxpdCgnLicpO1xuICAgICAgICBjb25zdCBzb3VyY2VOYW1lID0gcHJvcGVydHlQYXJ0cy5wb3AoKTtcbiAgICAgICAgY29uc3Qgc291cmNlU2NvcGUgPSBbXG4gICAgICAgICAgICBzY29wZVxuICAgICAgICBdLmNvbmNhdChwcm9wZXJ0eVBhcnRzKS5qb2luKCcuJyk7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gcm91dGVzW3Byb3BlcnR5XS5zcGxpdCgnLicpO1xuICAgICAgICBjb25zdCB0YXJnZXROYW1lID0gcGFydHMucG9wKCk7XG4gICAgICAgIGNvbnN0IHRhcmdldFNjb3BlID0gcGFydHMuam9pbignLicpO1xuICAgICAgICBkZWZhdWx0cy5yb3V0ZShzb3VyY2VTY29wZSwgc291cmNlTmFtZSwgdGFyZ2V0U2NvcGUsIHRhcmdldE5hbWUpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gaXNJQ2hhcnRDb21wb25lbnQocHJvdG8pIHtcbiAgICByZXR1cm4gJ2lkJyBpbiBwcm90byAmJiAnZGVmYXVsdHMnIGluIHByb3RvO1xufVxuXG5jbGFzcyBSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5jb250cm9sbGVycyA9IG5ldyBUeXBlZFJlZ2lzdHJ5KERhdGFzZXRDb250cm9sbGVyLCAnZGF0YXNldHMnLCB0cnVlKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IG5ldyBUeXBlZFJlZ2lzdHJ5KEVsZW1lbnQsICdlbGVtZW50cycpO1xuICAgICAgICB0aGlzLnBsdWdpbnMgPSBuZXcgVHlwZWRSZWdpc3RyeShPYmplY3QsICdwbHVnaW5zJyk7XG4gICAgICAgIHRoaXMuc2NhbGVzID0gbmV3IFR5cGVkUmVnaXN0cnkoU2NhbGUsICdzY2FsZXMnKTtcbiAgICAgICAgdGhpcy5fdHlwZWRSZWdpc3RyaWVzID0gW1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVycyxcbiAgICAgICAgICAgIHRoaXMuc2NhbGVzLFxuICAgICAgICAgICAgdGhpcy5lbGVtZW50c1xuICAgICAgICBdO1xuICAgIH1cbiBhZGQoLi4uYXJncykge1xuICAgICAgICB0aGlzLl9lYWNoKCdyZWdpc3RlcicsIGFyZ3MpO1xuICAgIH1cbiAgICByZW1vdmUoLi4uYXJncykge1xuICAgICAgICB0aGlzLl9lYWNoKCd1bnJlZ2lzdGVyJywgYXJncyk7XG4gICAgfVxuIGFkZENvbnRyb2xsZXJzKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fZWFjaCgncmVnaXN0ZXInLCBhcmdzLCB0aGlzLmNvbnRyb2xsZXJzKTtcbiAgICB9XG4gYWRkRWxlbWVudHMoLi4uYXJncykge1xuICAgICAgICB0aGlzLl9lYWNoKCdyZWdpc3RlcicsIGFyZ3MsIHRoaXMuZWxlbWVudHMpO1xuICAgIH1cbiBhZGRQbHVnaW5zKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fZWFjaCgncmVnaXN0ZXInLCBhcmdzLCB0aGlzLnBsdWdpbnMpO1xuICAgIH1cbiBhZGRTY2FsZXMoLi4uYXJncykge1xuICAgICAgICB0aGlzLl9lYWNoKCdyZWdpc3RlcicsIGFyZ3MsIHRoaXMuc2NhbGVzKTtcbiAgICB9XG4gZ2V0Q29udHJvbGxlcihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0KGlkLCB0aGlzLmNvbnRyb2xsZXJzLCAnY29udHJvbGxlcicpO1xuICAgIH1cbiBnZXRFbGVtZW50KGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXQoaWQsIHRoaXMuZWxlbWVudHMsICdlbGVtZW50Jyk7XG4gICAgfVxuIGdldFBsdWdpbihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0KGlkLCB0aGlzLnBsdWdpbnMsICdwbHVnaW4nKTtcbiAgICB9XG4gZ2V0U2NhbGUoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldChpZCwgdGhpcy5zY2FsZXMsICdzY2FsZScpO1xuICAgIH1cbiByZW1vdmVDb250cm9sbGVycyguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuX2VhY2goJ3VucmVnaXN0ZXInLCBhcmdzLCB0aGlzLmNvbnRyb2xsZXJzKTtcbiAgICB9XG4gcmVtb3ZlRWxlbWVudHMoLi4uYXJncykge1xuICAgICAgICB0aGlzLl9lYWNoKCd1bnJlZ2lzdGVyJywgYXJncywgdGhpcy5lbGVtZW50cyk7XG4gICAgfVxuIHJlbW92ZVBsdWdpbnMoLi4uYXJncykge1xuICAgICAgICB0aGlzLl9lYWNoKCd1bnJlZ2lzdGVyJywgYXJncywgdGhpcy5wbHVnaW5zKTtcbiAgICB9XG4gcmVtb3ZlU2NhbGVzKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fZWFjaCgndW5yZWdpc3RlcicsIGFyZ3MsIHRoaXMuc2NhbGVzKTtcbiAgICB9XG4gX2VhY2gobWV0aG9kLCBhcmdzLCB0eXBlZFJlZ2lzdHJ5KSB7XG4gICAgICAgIFtcbiAgICAgICAgICAgIC4uLmFyZ3NcbiAgICAgICAgXS5mb3JFYWNoKChhcmcpPT57XG4gICAgICAgICAgICBjb25zdCByZWcgPSB0eXBlZFJlZ2lzdHJ5IHx8IHRoaXMuX2dldFJlZ2lzdHJ5Rm9yVHlwZShhcmcpO1xuICAgICAgICAgICAgaWYgKHR5cGVkUmVnaXN0cnkgfHwgcmVnLmlzRm9yVHlwZShhcmcpIHx8IHJlZyA9PT0gdGhpcy5wbHVnaW5zICYmIGFyZy5pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2V4ZWMobWV0aG9kLCByZWcsIGFyZyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVhY2goYXJnLCAoaXRlbSk9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbVJlZyA9IHR5cGVkUmVnaXN0cnkgfHwgdGhpcy5fZ2V0UmVnaXN0cnlGb3JUeXBlKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9leGVjKG1ldGhvZCwgaXRlbVJlZywgaXRlbSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiBfZXhlYyhtZXRob2QsIHJlZ2lzdHJ5LCBjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgY2FtZWxNZXRob2QgPSBfY2FwaXRhbGl6ZShtZXRob2QpO1xuICAgICAgICBjYWxsYmFjayhjb21wb25lbnRbJ2JlZm9yZScgKyBjYW1lbE1ldGhvZF0sIFtdLCBjb21wb25lbnQpO1xuICAgICAgICByZWdpc3RyeVttZXRob2RdKGNvbXBvbmVudCk7XG4gICAgICAgIGNhbGxiYWNrKGNvbXBvbmVudFsnYWZ0ZXInICsgY2FtZWxNZXRob2RdLCBbXSwgY29tcG9uZW50KTtcbiAgICB9XG4gX2dldFJlZ2lzdHJ5Rm9yVHlwZSh0eXBlKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLl90eXBlZFJlZ2lzdHJpZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgY29uc3QgcmVnID0gdGhpcy5fdHlwZWRSZWdpc3RyaWVzW2ldO1xuICAgICAgICAgICAgaWYgKHJlZy5pc0ZvclR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnBsdWdpbnM7XG4gICAgfVxuIF9nZXQoaWQsIHR5cGVkUmVnaXN0cnksIHR5cGUpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHR5cGVkUmVnaXN0cnkuZ2V0KGlkKTtcbiAgICAgICAgaWYgKGl0ZW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyBpZCArICdcIiBpcyBub3QgYSByZWdpc3RlcmVkICcgKyB0eXBlICsgJy4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG59XG52YXIgcmVnaXN0cnkgPSAvKiAjX19QVVJFX18gKi8gbmV3IFJlZ2lzdHJ5KCk7XG5cbmNsYXNzIFBsdWdpblNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMuX2luaXQgPSBbXTtcbiAgICB9XG4gbm90aWZ5KGNoYXJ0LCBob29rLCBhcmdzLCBmaWx0ZXIpIHtcbiAgICAgICAgaWYgKGhvb2sgPT09ICdiZWZvcmVJbml0Jykge1xuICAgICAgICAgICAgdGhpcy5faW5pdCA9IHRoaXMuX2NyZWF0ZURlc2NyaXB0b3JzKGNoYXJ0LCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeSh0aGlzLl9pbml0LCBjaGFydCwgJ2luc3RhbGwnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXNjcmlwdG9ycyA9IGZpbHRlciA/IHRoaXMuX2Rlc2NyaXB0b3JzKGNoYXJ0KS5maWx0ZXIoZmlsdGVyKSA6IHRoaXMuX2Rlc2NyaXB0b3JzKGNoYXJ0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fbm90aWZ5KGRlc2NyaXB0b3JzLCBjaGFydCwgaG9vaywgYXJncyk7XG4gICAgICAgIGlmIChob29rID09PSAnYWZ0ZXJEZXN0cm95Jykge1xuICAgICAgICAgICAgdGhpcy5fbm90aWZ5KGRlc2NyaXB0b3JzLCBjaGFydCwgJ3N0b3AnKTtcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeSh0aGlzLl9pbml0LCBjaGFydCwgJ3VuaW5zdGFsbCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuIF9ub3RpZnkoZGVzY3JpcHRvcnMsIGNoYXJ0LCBob29rLCBhcmdzKSB7XG4gICAgICAgIGFyZ3MgPSBhcmdzIHx8IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGRlc2NyaXB0b3Igb2YgZGVzY3JpcHRvcnMpe1xuICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gZGVzY3JpcHRvci5wbHVnaW47XG4gICAgICAgICAgICBjb25zdCBtZXRob2QgPSBwbHVnaW5baG9va107XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBbXG4gICAgICAgICAgICAgICAgY2hhcnQsXG4gICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLm9wdGlvbnNcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sobWV0aG9kLCBwYXJhbXMsIHBsdWdpbikgPT09IGZhbHNlICYmIGFyZ3MuY2FuY2VsYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmKHRoaXMuX2NhY2hlKSkge1xuICAgICAgICAgICAgdGhpcy5fb2xkQ2FjaGUgPSB0aGlzLl9jYWNoZTtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuIF9kZXNjcmlwdG9ycyhjaGFydCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXNjcmlwdG9ycyA9IHRoaXMuX2NhY2hlID0gdGhpcy5fY3JlYXRlRGVzY3JpcHRvcnMoY2hhcnQpO1xuICAgICAgICB0aGlzLl9ub3RpZnlTdGF0ZUNoYW5nZXMoY2hhcnQpO1xuICAgICAgICByZXR1cm4gZGVzY3JpcHRvcnM7XG4gICAgfVxuICAgIF9jcmVhdGVEZXNjcmlwdG9ycyhjaGFydCwgYWxsKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGNoYXJ0ICYmIGNoYXJ0LmNvbmZpZztcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHZhbHVlT3JEZWZhdWx0KGNvbmZpZy5vcHRpb25zICYmIGNvbmZpZy5vcHRpb25zLnBsdWdpbnMsIHt9KTtcbiAgICAgICAgY29uc3QgcGx1Z2lucyA9IGFsbFBsdWdpbnMoY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMgPT09IGZhbHNlICYmICFhbGwgPyBbXSA6IGNyZWF0ZURlc2NyaXB0b3JzKGNoYXJ0LCBwbHVnaW5zLCBvcHRpb25zLCBhbGwpO1xuICAgIH1cbiBfbm90aWZ5U3RhdGVDaGFuZ2VzKGNoYXJ0KSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzRGVzY3JpcHRvcnMgPSB0aGlzLl9vbGRDYWNoZSB8fCBbXTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvcnMgPSB0aGlzLl9jYWNoZTtcbiAgICAgICAgY29uc3QgZGlmZiA9IChhLCBiKT0+YS5maWx0ZXIoKHgpPT4hYi5zb21lKCh5KT0+eC5wbHVnaW4uaWQgPT09IHkucGx1Z2luLmlkKSk7XG4gICAgICAgIHRoaXMuX25vdGlmeShkaWZmKHByZXZpb3VzRGVzY3JpcHRvcnMsIGRlc2NyaXB0b3JzKSwgY2hhcnQsICdzdG9wJyk7XG4gICAgICAgIHRoaXMuX25vdGlmeShkaWZmKGRlc2NyaXB0b3JzLCBwcmV2aW91c0Rlc2NyaXB0b3JzKSwgY2hhcnQsICdzdGFydCcpO1xuICAgIH1cbn1cbiBmdW5jdGlvbiBhbGxQbHVnaW5zKGNvbmZpZykge1xuICAgIGNvbnN0IGxvY2FsSWRzID0ge307XG4gICAgY29uc3QgcGx1Z2lucyA9IFtdO1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhyZWdpc3RyeS5wbHVnaW5zLml0ZW1zKTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIHBsdWdpbnMucHVzaChyZWdpc3RyeS5nZXRQbHVnaW4oa2V5c1tpXSkpO1xuICAgIH1cbiAgICBjb25zdCBsb2NhbCA9IGNvbmZpZy5wbHVnaW5zIHx8IFtdO1xuICAgIGZvcihsZXQgaTEgPSAwOyBpMSA8IGxvY2FsLmxlbmd0aDsgaTErKyl7XG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IGxvY2FsW2kxXTtcbiAgICAgICAgaWYgKHBsdWdpbnMuaW5kZXhPZihwbHVnaW4pID09PSAtMSkge1xuICAgICAgICAgICAgcGx1Z2lucy5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICBsb2NhbElkc1twbHVnaW4uaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBwbHVnaW5zLFxuICAgICAgICBsb2NhbElkc1xuICAgIH07XG59XG5mdW5jdGlvbiBnZXRPcHRzKG9wdGlvbnMsIGFsbCkge1xuICAgIGlmICghYWxsICYmIG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucyA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zO1xufVxuZnVuY3Rpb24gY3JlYXRlRGVzY3JpcHRvcnMoY2hhcnQsIHsgcGx1Z2lucyAsIGxvY2FsSWRzICB9LCBvcHRpb25zLCBhbGwpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBjb25zdCBjb250ZXh0ID0gY2hhcnQuZ2V0Q29udGV4dCgpO1xuICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbnMpe1xuICAgICAgICBjb25zdCBpZCA9IHBsdWdpbi5pZDtcbiAgICAgICAgY29uc3Qgb3B0cyA9IGdldE9wdHMob3B0aW9uc1tpZF0sIGFsbCk7XG4gICAgICAgIGlmIChvcHRzID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICBwbHVnaW4sXG4gICAgICAgICAgICBvcHRpb25zOiBwbHVnaW5PcHRzKGNoYXJ0LmNvbmZpZywge1xuICAgICAgICAgICAgICAgIHBsdWdpbixcbiAgICAgICAgICAgICAgICBsb2NhbDogbG9jYWxJZHNbaWRdXG4gICAgICAgICAgICB9LCBvcHRzLCBjb250ZXh0KVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHBsdWdpbk9wdHMoY29uZmlnLCB7IHBsdWdpbiAsIGxvY2FsICB9LCBvcHRzLCBjb250ZXh0KSB7XG4gICAgY29uc3Qga2V5cyA9IGNvbmZpZy5wbHVnaW5TY29wZUtleXMocGx1Z2luKTtcbiAgICBjb25zdCBzY29wZXMgPSBjb25maWcuZ2V0T3B0aW9uU2NvcGVzKG9wdHMsIGtleXMpO1xuICAgIGlmIChsb2NhbCAmJiBwbHVnaW4uZGVmYXVsdHMpIHtcbiAgICAgICAgc2NvcGVzLnB1c2gocGx1Z2luLmRlZmF1bHRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbmZpZy5jcmVhdGVSZXNvbHZlcihzY29wZXMsIGNvbnRleHQsIFtcbiAgICAgICAgJydcbiAgICBdLCB7XG4gICAgICAgIHNjcmlwdGFibGU6IGZhbHNlLFxuICAgICAgICBpbmRleGFibGU6IGZhbHNlLFxuICAgICAgICBhbGxLZXlzOiB0cnVlXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEluZGV4QXhpcyh0eXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgZGF0YXNldERlZmF1bHRzID0gZGVmYXVsdHMuZGF0YXNldHNbdHlwZV0gfHwge307XG4gICAgY29uc3QgZGF0YXNldE9wdGlvbnMgPSAob3B0aW9ucy5kYXRhc2V0cyB8fCB7fSlbdHlwZV0gfHwge307XG4gICAgcmV0dXJuIGRhdGFzZXRPcHRpb25zLmluZGV4QXhpcyB8fCBvcHRpb25zLmluZGV4QXhpcyB8fCBkYXRhc2V0RGVmYXVsdHMuaW5kZXhBeGlzIHx8ICd4Jztcbn1cbmZ1bmN0aW9uIGdldEF4aXNGcm9tRGVmYXVsdFNjYWxlSUQoaWQsIGluZGV4QXhpcykge1xuICAgIGxldCBheGlzID0gaWQ7XG4gICAgaWYgKGlkID09PSAnX2luZGV4XycpIHtcbiAgICAgICAgYXhpcyA9IGluZGV4QXhpcztcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnX3ZhbHVlXycpIHtcbiAgICAgICAgYXhpcyA9IGluZGV4QXhpcyA9PT0gJ3gnID8gJ3knIDogJ3gnO1xuICAgIH1cbiAgICByZXR1cm4gYXhpcztcbn1cbmZ1bmN0aW9uIGdldERlZmF1bHRTY2FsZUlERnJvbUF4aXMoYXhpcywgaW5kZXhBeGlzKSB7XG4gICAgcmV0dXJuIGF4aXMgPT09IGluZGV4QXhpcyA/ICdfaW5kZXhfJyA6ICdfdmFsdWVfJztcbn1cbmZ1bmN0aW9uIGF4aXNGcm9tUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICBpZiAocG9zaXRpb24gPT09ICd0b3AnIHx8IHBvc2l0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgICByZXR1cm4gJ3gnO1xuICAgIH1cbiAgICBpZiAocG9zaXRpb24gPT09ICdsZWZ0JyB8fCBwb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICByZXR1cm4gJ3knO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGVybWluZUF4aXMoaWQsIHNjYWxlT3B0aW9ucykge1xuICAgIGlmIChpZCA9PT0gJ3gnIHx8IGlkID09PSAneScgfHwgaWQgPT09ICdyJykge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIGlkID0gc2NhbGVPcHRpb25zLmF4aXMgfHwgYXhpc0Zyb21Qb3NpdGlvbihzY2FsZU9wdGlvbnMucG9zaXRpb24pIHx8IGlkLmxlbmd0aCA+IDEgJiYgZGV0ZXJtaW5lQXhpcyhpZFswXS50b0xvd2VyQ2FzZSgpLCBzY2FsZU9wdGlvbnMpO1xuICAgIGlmIChpZCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGRldGVybWluZSB0eXBlIG9mICcke25hbWV9JyBheGlzLiBQbGVhc2UgcHJvdmlkZSAnYXhpcycgb3IgJ3Bvc2l0aW9uJyBvcHRpb24uYCk7XG59XG5mdW5jdGlvbiBtZXJnZVNjYWxlQ29uZmlnKGNvbmZpZywgb3B0aW9ucykge1xuICAgIGNvbnN0IGNoYXJ0RGVmYXVsdHMgPSBvdmVycmlkZXNbY29uZmlnLnR5cGVdIHx8IHtcbiAgICAgICAgc2NhbGVzOiB7fVxuICAgIH07XG4gICAgY29uc3QgY29uZmlnU2NhbGVzID0gb3B0aW9ucy5zY2FsZXMgfHwge307XG4gICAgY29uc3QgY2hhcnRJbmRleEF4aXMgPSBnZXRJbmRleEF4aXMoY29uZmlnLnR5cGUsIG9wdGlvbnMpO1xuICAgIGNvbnN0IHNjYWxlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgT2JqZWN0LmtleXMoY29uZmlnU2NhbGVzKS5mb3JFYWNoKChpZCk9PntcbiAgICAgICAgY29uc3Qgc2NhbGVDb25mID0gY29uZmlnU2NhbGVzW2lkXTtcbiAgICAgICAgaWYgKCFpc09iamVjdChzY2FsZUNvbmYpKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihgSW52YWxpZCBzY2FsZSBjb25maWd1cmF0aW9uIGZvciBzY2FsZTogJHtpZH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NhbGVDb25mLl9wcm94eSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihgSWdub3JpbmcgcmVzb2x2ZXIgcGFzc2VkIGFzIG9wdGlvbnMgZm9yIHNjYWxlOiAke2lkfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF4aXMgPSBkZXRlcm1pbmVBeGlzKGlkLCBzY2FsZUNvbmYpO1xuICAgICAgICBjb25zdCBkZWZhdWx0SWQgPSBnZXREZWZhdWx0U2NhbGVJREZyb21BeGlzKGF4aXMsIGNoYXJ0SW5kZXhBeGlzKTtcbiAgICAgICAgY29uc3QgZGVmYXVsdFNjYWxlT3B0aW9ucyA9IGNoYXJ0RGVmYXVsdHMuc2NhbGVzIHx8IHt9O1xuICAgICAgICBzY2FsZXNbaWRdID0gbWVyZ2VJZihPYmplY3QuY3JlYXRlKG51bGwpLCBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXhpc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjYWxlQ29uZixcbiAgICAgICAgICAgIGRlZmF1bHRTY2FsZU9wdGlvbnNbYXhpc10sXG4gICAgICAgICAgICBkZWZhdWx0U2NhbGVPcHRpb25zW2RlZmF1bHRJZF1cbiAgICAgICAgXSk7XG4gICAgfSk7XG4gICAgY29uZmlnLmRhdGEuZGF0YXNldHMuZm9yRWFjaCgoZGF0YXNldCk9PntcbiAgICAgICAgY29uc3QgdHlwZSA9IGRhdGFzZXQudHlwZSB8fCBjb25maWcudHlwZTtcbiAgICAgICAgY29uc3QgaW5kZXhBeGlzID0gZGF0YXNldC5pbmRleEF4aXMgfHwgZ2V0SW5kZXhBeGlzKHR5cGUsIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBkYXRhc2V0RGVmYXVsdHMgPSBvdmVycmlkZXNbdHlwZV0gfHwge307XG4gICAgICAgIGNvbnN0IGRlZmF1bHRTY2FsZU9wdGlvbnMgPSBkYXRhc2V0RGVmYXVsdHMuc2NhbGVzIHx8IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhkZWZhdWx0U2NhbGVPcHRpb25zKS5mb3JFYWNoKChkZWZhdWx0SUQpPT57XG4gICAgICAgICAgICBjb25zdCBheGlzID0gZ2V0QXhpc0Zyb21EZWZhdWx0U2NhbGVJRChkZWZhdWx0SUQsIGluZGV4QXhpcyk7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGRhdGFzZXRbYXhpcyArICdBeGlzSUQnXSB8fCBheGlzO1xuICAgICAgICAgICAgc2NhbGVzW2lkXSA9IHNjYWxlc1tpZF0gfHwgT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgIG1lcmdlSWYoc2NhbGVzW2lkXSwgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYXhpc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29uZmlnU2NhbGVzW2lkXSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0U2NhbGVPcHRpb25zW2RlZmF1bHRJRF1cbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBPYmplY3Qua2V5cyhzY2FsZXMpLmZvckVhY2goKGtleSk9PntcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBzY2FsZXNba2V5XTtcbiAgICAgICAgbWVyZ2VJZihzY2FsZSwgW1xuICAgICAgICAgICAgZGVmYXVsdHMuc2NhbGVzW3NjYWxlLnR5cGVdLFxuICAgICAgICAgICAgZGVmYXVsdHMuc2NhbGVcbiAgICAgICAgXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNjYWxlcztcbn1cbmZ1bmN0aW9uIGluaXRPcHRpb25zKGNvbmZpZykge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjb25maWcub3B0aW9ucyB8fCAoY29uZmlnLm9wdGlvbnMgPSB7fSk7XG4gICAgb3B0aW9ucy5wbHVnaW5zID0gdmFsdWVPckRlZmF1bHQob3B0aW9ucy5wbHVnaW5zLCB7fSk7XG4gICAgb3B0aW9ucy5zY2FsZXMgPSBtZXJnZVNjYWxlQ29uZmlnKGNvbmZpZywgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBpbml0RGF0YShkYXRhKSB7XG4gICAgZGF0YSA9IGRhdGEgfHwge307XG4gICAgZGF0YS5kYXRhc2V0cyA9IGRhdGEuZGF0YXNldHMgfHwgW107XG4gICAgZGF0YS5sYWJlbHMgPSBkYXRhLmxhYmVscyB8fCBbXTtcbiAgICByZXR1cm4gZGF0YTtcbn1cbmZ1bmN0aW9uIGluaXRDb25maWcoY29uZmlnKSB7XG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICAgIGNvbmZpZy5kYXRhID0gaW5pdERhdGEoY29uZmlnLmRhdGEpO1xuICAgIGluaXRPcHRpb25zKGNvbmZpZyk7XG4gICAgcmV0dXJuIGNvbmZpZztcbn1cbmNvbnN0IGtleUNhY2hlID0gbmV3IE1hcCgpO1xuY29uc3Qga2V5c0NhY2hlZCA9IG5ldyBTZXQoKTtcbmZ1bmN0aW9uIGNhY2hlZEtleXMoY2FjaGVLZXksIGdlbmVyYXRlKSB7XG4gICAgbGV0IGtleXMgPSBrZXlDYWNoZS5nZXQoY2FjaGVLZXkpO1xuICAgIGlmICgha2V5cykge1xuICAgICAgICBrZXlzID0gZ2VuZXJhdGUoKTtcbiAgICAgICAga2V5Q2FjaGUuc2V0KGNhY2hlS2V5LCBrZXlzKTtcbiAgICAgICAga2V5c0NhY2hlZC5hZGQoa2V5cyk7XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xufVxuY29uc3QgYWRkSWZGb3VuZCA9IChzZXQsIG9iaiwga2V5KT0+e1xuICAgIGNvbnN0IG9wdHMgPSByZXNvbHZlT2JqZWN0S2V5KG9iaiwga2V5KTtcbiAgICBpZiAob3B0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNldC5hZGQob3B0cyk7XG4gICAgfVxufTtcbmNsYXNzIENvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKXtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gaW5pdENvbmZpZyhjb25maWcpO1xuICAgICAgICB0aGlzLl9zY29wZUNhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9yZXNvbHZlckNhY2hlID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBnZXQgcGxhdGZvcm0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcucGxhdGZvcm07XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLnR5cGU7XG4gICAgfVxuICAgIHNldCB0eXBlKHR5cGUpIHtcbiAgICAgICAgdGhpcy5fY29uZmlnLnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5kYXRhO1xuICAgIH1cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5kYXRhID0gaW5pdERhdGEoZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLm9wdGlvbnM7XG4gICAgfVxuICAgIHNldCBvcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fY29uZmlnLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICBnZXQgcGx1Z2lucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5wbHVnaW5zO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuX2NvbmZpZztcbiAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG4gICAgICAgIGluaXRPcHRpb25zKGNvbmZpZyk7XG4gICAgfVxuICAgIGNsZWFyQ2FjaGUoKSB7XG4gICAgICAgIHRoaXMuX3Njb3BlQ2FjaGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZXJDYWNoZS5jbGVhcigpO1xuICAgIH1cbiBkYXRhc2V0U2NvcGVLZXlzKGRhdGFzZXRUeXBlKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWRLZXlzKGRhdGFzZXRUeXBlLCAoKT0+W1xuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgYGRhdGFzZXRzLiR7ZGF0YXNldFR5cGV9YCxcbiAgICAgICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICBdKTtcbiAgICB9XG4gZGF0YXNldEFuaW1hdGlvblNjb3BlS2V5cyhkYXRhc2V0VHlwZSwgdHJhbnNpdGlvbikge1xuICAgICAgICByZXR1cm4gY2FjaGVkS2V5cyhgJHtkYXRhc2V0VHlwZX0udHJhbnNpdGlvbi4ke3RyYW5zaXRpb259YCwgKCk9PltcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIGBkYXRhc2V0cy4ke2RhdGFzZXRUeXBlfS50cmFuc2l0aW9ucy4ke3RyYW5zaXRpb259YCxcbiAgICAgICAgICAgICAgICAgICAgYHRyYW5zaXRpb25zLiR7dHJhbnNpdGlvbn1gXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIGBkYXRhc2V0cy4ke2RhdGFzZXRUeXBlfWAsXG4gICAgICAgICAgICAgICAgICAgICcnXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgXSk7XG4gICAgfVxuIGRhdGFzZXRFbGVtZW50U2NvcGVLZXlzKGRhdGFzZXRUeXBlLCBlbGVtZW50VHlwZSkge1xuICAgICAgICByZXR1cm4gY2FjaGVkS2V5cyhgJHtkYXRhc2V0VHlwZX0tJHtlbGVtZW50VHlwZX1gLCAoKT0+W1xuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgYGRhdGFzZXRzLiR7ZGF0YXNldFR5cGV9LmVsZW1lbnRzLiR7ZWxlbWVudFR5cGV9YCxcbiAgICAgICAgICAgICAgICAgICAgYGRhdGFzZXRzLiR7ZGF0YXNldFR5cGV9YCxcbiAgICAgICAgICAgICAgICAgICAgYGVsZW1lbnRzLiR7ZWxlbWVudFR5cGV9YCxcbiAgICAgICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICBdKTtcbiAgICB9XG4gcGx1Z2luU2NvcGVLZXlzKHBsdWdpbikge1xuICAgICAgICBjb25zdCBpZCA9IHBsdWdpbi5pZDtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMudHlwZTtcbiAgICAgICAgcmV0dXJuIGNhY2hlZEtleXMoYCR7dHlwZX0tcGx1Z2luLSR7aWR9YCwgKCk9PltcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIGBwbHVnaW5zLiR7aWR9YCxcbiAgICAgICAgICAgICAgICAgICAgLi4ucGx1Z2luLmFkZGl0aW9uYWxPcHRpb25TY29wZXMgfHwgW11cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICBdKTtcbiAgICB9XG4gX2NhY2hlZFNjb3BlcyhtYWluU2NvcGUsIHJlc2V0Q2FjaGUpIHtcbiAgICAgICAgY29uc3QgX3Njb3BlQ2FjaGUgPSB0aGlzLl9zY29wZUNhY2hlO1xuICAgICAgICBsZXQgY2FjaGUgPSBfc2NvcGVDYWNoZS5nZXQobWFpblNjb3BlKTtcbiAgICAgICAgaWYgKCFjYWNoZSB8fCByZXNldENhY2hlKSB7XG4gICAgICAgICAgICBjYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIF9zY29wZUNhY2hlLnNldChtYWluU2NvcGUsIGNhY2hlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgfVxuIGdldE9wdGlvblNjb3BlcyhtYWluU2NvcGUsIGtleUxpc3RzLCByZXNldENhY2hlKSB7XG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyAsIHR5cGUgIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuX2NhY2hlZFNjb3BlcyhtYWluU2NvcGUsIHJlc2V0Q2FjaGUpO1xuICAgICAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoa2V5TGlzdHMpO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAga2V5TGlzdHMuZm9yRWFjaCgoa2V5cyk9PntcbiAgICAgICAgICAgIGlmIChtYWluU2NvcGUpIHtcbiAgICAgICAgICAgICAgICBzY29wZXMuYWRkKG1haW5TY29wZSk7XG4gICAgICAgICAgICAgICAga2V5cy5mb3JFYWNoKChrZXkpPT5hZGRJZkZvdW5kKHNjb3BlcywgbWFpblNjb3BlLCBrZXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KT0+YWRkSWZGb3VuZChzY29wZXMsIG9wdGlvbnMsIGtleSkpO1xuICAgICAgICAgICAga2V5cy5mb3JFYWNoKChrZXkpPT5hZGRJZkZvdW5kKHNjb3Blcywgb3ZlcnJpZGVzW3R5cGVdIHx8IHt9LCBrZXkpKTtcbiAgICAgICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KT0+YWRkSWZGb3VuZChzY29wZXMsIGRlZmF1bHRzLCBrZXkpKTtcbiAgICAgICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KT0+YWRkSWZGb3VuZChzY29wZXMsIGRlc2NyaXB0b3JzLCBrZXkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gQXJyYXkuZnJvbShzY29wZXMpO1xuICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBhcnJheS5wdXNoKE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXlzQ2FjaGVkLmhhcyhrZXlMaXN0cykpIHtcbiAgICAgICAgICAgIGNhY2hlLnNldChrZXlMaXN0cywgYXJyYXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG4gY2hhcnRPcHRpb25TY29wZXMoKSB7XG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyAsIHR5cGUgIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG92ZXJyaWRlc1t0eXBlXSB8fCB7fSxcbiAgICAgICAgICAgIGRlZmF1bHRzLmRhdGFzZXRzW3R5cGVdIHx8IHt9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0cyxcbiAgICAgICAgICAgIGRlc2NyaXB0b3JzXG4gICAgICAgIF07XG4gICAgfVxuIHJlc29sdmVOYW1lZE9wdGlvbnMoc2NvcGVzLCBuYW1lcywgY29udGV4dCwgcHJlZml4ZXMgPSBbXG4gICAgICAgICcnXG4gICAgXSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAkc2hhcmVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZXIgLCBzdWJQcmVmaXhlcyAgfSA9IGdldFJlc29sdmVyKHRoaXMuX3Jlc29sdmVyQ2FjaGUsIHNjb3BlcywgcHJlZml4ZXMpO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHJlc29sdmVyO1xuICAgICAgICBpZiAobmVlZENvbnRleHQocmVzb2x2ZXIsIG5hbWVzKSkge1xuICAgICAgICAgICAgcmVzdWx0LiRzaGFyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRleHQgPSBpc0Z1bmN0aW9uKGNvbnRleHQpID8gY29udGV4dCgpIDogY29udGV4dDtcbiAgICAgICAgICAgIGNvbnN0IHN1YlJlc29sdmVyID0gdGhpcy5jcmVhdGVSZXNvbHZlcihzY29wZXMsIGNvbnRleHQsIHN1YlByZWZpeGVzKTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBfYXR0YWNoQ29udGV4dChyZXNvbHZlciwgY29udGV4dCwgc3ViUmVzb2x2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBvZiBuYW1lcyl7XG4gICAgICAgICAgICByZXN1bHRbcHJvcF0gPSBvcHRpb25zW3Byb3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuIGNyZWF0ZVJlc29sdmVyKHNjb3BlcywgY29udGV4dCwgcHJlZml4ZXMgPSBbXG4gICAgICAgICcnXG4gICAgXSwgZGVzY3JpcHRvckRlZmF1bHRzKSB7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZXIgIH0gPSBnZXRSZXNvbHZlcih0aGlzLl9yZXNvbHZlckNhY2hlLCBzY29wZXMsIHByZWZpeGVzKTtcbiAgICAgICAgcmV0dXJuIGlzT2JqZWN0KGNvbnRleHQpID8gX2F0dGFjaENvbnRleHQocmVzb2x2ZXIsIGNvbnRleHQsIHVuZGVmaW5lZCwgZGVzY3JpcHRvckRlZmF1bHRzKSA6IHJlc29sdmVyO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFJlc29sdmVyKHJlc29sdmVyQ2FjaGUsIHNjb3BlcywgcHJlZml4ZXMpIHtcbiAgICBsZXQgY2FjaGUgPSByZXNvbHZlckNhY2hlLmdldChzY29wZXMpO1xuICAgIGlmICghY2FjaGUpIHtcbiAgICAgICAgY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJlc29sdmVyQ2FjaGUuc2V0KHNjb3BlcywgY2FjaGUpO1xuICAgIH1cbiAgICBjb25zdCBjYWNoZUtleSA9IHByZWZpeGVzLmpvaW4oKTtcbiAgICBsZXQgY2FjaGVkID0gY2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgICBpZiAoIWNhY2hlZCkge1xuICAgICAgICBjb25zdCByZXNvbHZlciA9IF9jcmVhdGVSZXNvbHZlcihzY29wZXMsIHByZWZpeGVzKTtcbiAgICAgICAgY2FjaGVkID0ge1xuICAgICAgICAgICAgcmVzb2x2ZXIsXG4gICAgICAgICAgICBzdWJQcmVmaXhlczogcHJlZml4ZXMuZmlsdGVyKChwKT0+IXAudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnaG92ZXInKSlcbiAgICAgICAgfTtcbiAgICAgICAgY2FjaGUuc2V0KGNhY2hlS2V5LCBjYWNoZWQpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVkO1xufVxuY29uc3QgaGFzRnVuY3Rpb24gPSAodmFsdWUpPT5pc09iamVjdCh2YWx1ZSkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpLnJlZHVjZSgoYWNjLCBrZXkpPT5hY2MgfHwgaXNGdW5jdGlvbih2YWx1ZVtrZXldKSwgZmFsc2UpO1xuZnVuY3Rpb24gbmVlZENvbnRleHQocHJveHksIG5hbWVzKSB7XG4gICAgY29uc3QgeyBpc1NjcmlwdGFibGUgLCBpc0luZGV4YWJsZSAgfSA9IF9kZXNjcmlwdG9ycyhwcm94eSk7XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIG5hbWVzKXtcbiAgICAgICAgY29uc3Qgc2NyaXB0YWJsZSA9IGlzU2NyaXB0YWJsZShwcm9wKTtcbiAgICAgICAgY29uc3QgaW5kZXhhYmxlID0gaXNJbmRleGFibGUocHJvcCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gKGluZGV4YWJsZSB8fCBzY3JpcHRhYmxlKSAmJiBwcm94eVtwcm9wXTtcbiAgICAgICAgaWYgKHNjcmlwdGFibGUgJiYgKGlzRnVuY3Rpb24odmFsdWUpIHx8IGhhc0Z1bmN0aW9uKHZhbHVlKSkgfHwgaW5kZXhhYmxlICYmIGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciB2ZXJzaW9uID0gXCI0LjEuMVwiO1xuXG5jb25zdCBLTk9XTl9QT1NJVElPTlMgPSBbXG4gICAgJ3RvcCcsXG4gICAgJ2JvdHRvbScsXG4gICAgJ2xlZnQnLFxuICAgICdyaWdodCcsXG4gICAgJ2NoYXJ0QXJlYSdcbl07XG5mdW5jdGlvbiBwb3NpdGlvbklzSG9yaXpvbnRhbChwb3NpdGlvbiwgYXhpcykge1xuICAgIHJldHVybiBwb3NpdGlvbiA9PT0gJ3RvcCcgfHwgcG9zaXRpb24gPT09ICdib3R0b20nIHx8IEtOT1dOX1BPU0lUSU9OUy5pbmRleE9mKHBvc2l0aW9uKSA9PT0gLTEgJiYgYXhpcyA9PT0gJ3gnO1xufVxuZnVuY3Rpb24gY29tcGFyZTJMZXZlbChsMSwgbDIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgICAgICByZXR1cm4gYVtsMV0gPT09IGJbbDFdID8gYVtsMl0gLSBiW2wyXSA6IGFbbDFdIC0gYltsMV07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG9uQW5pbWF0aW9uc0NvbXBsZXRlKGNvbnRleHQpIHtcbiAgICBjb25zdCBjaGFydCA9IGNvbnRleHQuY2hhcnQ7XG4gICAgY29uc3QgYW5pbWF0aW9uT3B0aW9ucyA9IGNoYXJ0Lm9wdGlvbnMuYW5pbWF0aW9uO1xuICAgIGNoYXJ0Lm5vdGlmeVBsdWdpbnMoJ2FmdGVyUmVuZGVyJyk7XG4gICAgY2FsbGJhY2soYW5pbWF0aW9uT3B0aW9ucyAmJiBhbmltYXRpb25PcHRpb25zLm9uQ29tcGxldGUsIFtcbiAgICAgICAgY29udGV4dFxuICAgIF0sIGNoYXJ0KTtcbn1cbmZ1bmN0aW9uIG9uQW5pbWF0aW9uUHJvZ3Jlc3MoY29udGV4dCkge1xuICAgIGNvbnN0IGNoYXJ0ID0gY29udGV4dC5jaGFydDtcbiAgICBjb25zdCBhbmltYXRpb25PcHRpb25zID0gY2hhcnQub3B0aW9ucy5hbmltYXRpb247XG4gICAgY2FsbGJhY2soYW5pbWF0aW9uT3B0aW9ucyAmJiBhbmltYXRpb25PcHRpb25zLm9uUHJvZ3Jlc3MsIFtcbiAgICAgICAgY29udGV4dFxuICAgIF0sIGNoYXJ0KTtcbn1cbiBmdW5jdGlvbiBnZXRDYW52YXMoaXRlbSkge1xuICAgIGlmIChfaXNEb21TdXBwb3J0ZWQoKSAmJiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW0pO1xuICAgIH0gZWxzZSBpZiAoaXRlbSAmJiBpdGVtLmxlbmd0aCkge1xuICAgICAgICBpdGVtID0gaXRlbVswXTtcbiAgICB9XG4gICAgaWYgKGl0ZW0gJiYgaXRlbS5jYW52YXMpIHtcbiAgICAgICAgaXRlbSA9IGl0ZW0uY2FudmFzO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbn1cbmNvbnN0IGluc3RhbmNlcyA9IHt9O1xuY29uc3QgZ2V0Q2hhcnQgPSAoa2V5KT0+e1xuICAgIGNvbnN0IGNhbnZhcyA9IGdldENhbnZhcyhrZXkpO1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKGluc3RhbmNlcykuZmlsdGVyKChjKT0+Yy5jYW52YXMgPT09IGNhbnZhcykucG9wKCk7XG59O1xuZnVuY3Rpb24gbW92ZU51bWVyaWNLZXlzKG9iaiwgc3RhcnQsIG1vdmUpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKXtcbiAgICAgICAgY29uc3QgaW50S2V5ID0gK2tleTtcbiAgICAgICAgaWYgKGludEtleSA+PSBzdGFydCkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgICAgICAgICAgIGlmIChtb3ZlID4gMCB8fCBpbnRLZXkgPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIG9ialtpbnRLZXkgKyBtb3ZlXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIGZ1bmN0aW9uIGRldGVybWluZUxhc3RFdmVudChlLCBsYXN0RXZlbnQsIGluQ2hhcnRBcmVhLCBpc0NsaWNrKSB7XG4gICAgaWYgKCFpbkNoYXJ0QXJlYSB8fCBlLnR5cGUgPT09ICdtb3VzZW91dCcpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChpc0NsaWNrKSB7XG4gICAgICAgIHJldHVybiBsYXN0RXZlbnQ7XG4gICAgfVxuICAgIHJldHVybiBlO1xufVxuZnVuY3Rpb24gZ2V0RGF0YXNldEFyZWEobWV0YSkge1xuICAgIGNvbnN0IHsgeFNjYWxlICwgeVNjYWxlICB9ID0gbWV0YTtcbiAgICBpZiAoeFNjYWxlICYmIHlTY2FsZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVmdDogeFNjYWxlLmxlZnQsXG4gICAgICAgICAgICByaWdodDogeFNjYWxlLnJpZ2h0LFxuICAgICAgICAgICAgdG9wOiB5U2NhbGUudG9wLFxuICAgICAgICAgICAgYm90dG9tOiB5U2NhbGUuYm90dG9tXG4gICAgICAgIH07XG4gICAgfVxufVxuY2xhc3MgQ2hhcnQge1xuICAgIHN0YXRpYyBkZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAgIHN0YXRpYyBpbnN0YW5jZXMgPSBpbnN0YW5jZXM7XG4gICAgc3RhdGljIG92ZXJyaWRlcyA9IG92ZXJyaWRlcztcbiAgICBzdGF0aWMgcmVnaXN0cnkgPSByZWdpc3RyeTtcbiAgICBzdGF0aWMgdmVyc2lvbiA9IHZlcnNpb247XG4gICAgc3RhdGljIGdldENoYXJ0ID0gZ2V0Q2hhcnQ7XG4gICAgc3RhdGljIHJlZ2lzdGVyKC4uLml0ZW1zKSB7XG4gICAgICAgIHJlZ2lzdHJ5LmFkZCguLi5pdGVtcyk7XG4gICAgICAgIGludmFsaWRhdGVQbHVnaW5zKCk7XG4gICAgfVxuICAgIHN0YXRpYyB1bnJlZ2lzdGVyKC4uLml0ZW1zKSB7XG4gICAgICAgIHJlZ2lzdHJ5LnJlbW92ZSguLi5pdGVtcyk7XG4gICAgICAgIGludmFsaWRhdGVQbHVnaW5zKCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHVzZXJDb25maWcpe1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZyA9IG5ldyBDb25maWcodXNlckNvbmZpZyk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxDYW52YXMgPSBnZXRDYW52YXMoaXRlbSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2hhcnQgPSBnZXRDaGFydChpbml0aWFsQ2FudmFzKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nQ2hhcnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FudmFzIGlzIGFscmVhZHkgaW4gdXNlLiBDaGFydCB3aXRoIElEIFxcJycgKyBleGlzdGluZ0NoYXJ0LmlkICsgJ1xcJycgKyAnIG11c3QgYmUgZGVzdHJveWVkIGJlZm9yZSB0aGUgY2FudmFzIHdpdGggSUQgXFwnJyArIGV4aXN0aW5nQ2hhcnQuY2FudmFzLmlkICsgJ1xcJyBjYW4gYmUgcmV1c2VkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBjb25maWcuY3JlYXRlUmVzb2x2ZXIoY29uZmlnLmNoYXJ0T3B0aW9uU2NvcGVzKCksIHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IG5ldyAoY29uZmlnLnBsYXRmb3JtIHx8IF9kZXRlY3RQbGF0Zm9ybShpbml0aWFsQ2FudmFzKSkoKTtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybS51cGRhdGVDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMucGxhdGZvcm0uYWNxdWlyZUNvbnRleHQoaW5pdGlhbENhbnZhcywgb3B0aW9ucy5hc3BlY3RSYXRpbyk7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGNvbnRleHQgJiYgY29udGV4dC5jYW52YXM7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcyAmJiBjYW52YXMuaGVpZ2h0O1xuICAgICAgICBjb25zdCB3aWR0aCA9IGNhbnZhcyAmJiBjYW52YXMud2lkdGg7XG4gICAgICAgIHRoaXMuaWQgPSB1aWQoKTtcbiAgICAgICAgdGhpcy5jdHggPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuX2FzcGVjdFJhdGlvID0gdGhpcy5hc3BlY3RSYXRpbztcbiAgICAgICAgdGhpcy5fbGF5ZXJzID0gW107XG4gICAgICAgIHRoaXMuX21ldGFzZXRzID0gW107XG4gICAgICAgIHRoaXMuX3N0YWNrcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5ib3hlcyA9IFtdO1xuICAgICAgICB0aGlzLmN1cnJlbnREZXZpY2VQaXhlbFJhdGlvID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNoYXJ0QXJlYSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYWN0aXZlID0gW107XG4gICAgICAgIHRoaXMuX2xhc3RFdmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG4gICAgICAgICB0aGlzLl9yZXNwb25zaXZlTGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9zb3J0ZWRNZXRhc2V0cyA9IFtdO1xuICAgICAgICB0aGlzLnNjYWxlcyA9IHt9O1xuICAgICAgICB0aGlzLl9wbHVnaW5zID0gbmV3IFBsdWdpblNlcnZpY2UoKTtcbiAgICAgICAgdGhpcy4kcHJveGllcyA9IHt9O1xuICAgICAgICB0aGlzLl9oaWRkZW5JbmRpY2VzID0ge307XG4gICAgICAgIHRoaXMuYXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uc0Rpc2FibGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLiRjb250ZXh0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9kb1Jlc2l6ZSA9IGRlYm91bmNlKChtb2RlKT0+dGhpcy51cGRhdGUobW9kZSksIG9wdGlvbnMucmVzaXplRGVsYXkgfHwgMCk7XG4gICAgICAgIHRoaXMuX2RhdGFDaGFuZ2VzID0gW107XG4gICAgICAgIGluc3RhbmNlc1t0aGlzLmlkXSA9IHRoaXM7XG4gICAgICAgIGlmICghY29udGV4dCB8fCAhY2FudmFzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBjaGFydDogY2FuJ3QgYWNxdWlyZSBjb250ZXh0IGZyb20gdGhlIGdpdmVuIGl0ZW1cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYW5pbWF0b3IubGlzdGVuKHRoaXMsICdjb21wbGV0ZScsIG9uQW5pbWF0aW9uc0NvbXBsZXRlKTtcbiAgICAgICAgYW5pbWF0b3IubGlzdGVuKHRoaXMsICdwcm9ncmVzcycsIG9uQW5pbWF0aW9uUHJvZ3Jlc3MpO1xuICAgICAgICB0aGlzLl9pbml0aWFsaXplKCk7XG4gICAgICAgIGlmICh0aGlzLmF0dGFjaGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBhc3BlY3RSYXRpbygpIHtcbiAgICAgICAgY29uc3QgeyBvcHRpb25zOiB7IGFzcGVjdFJhdGlvICwgbWFpbnRhaW5Bc3BlY3RSYXRpbyAgfSAsIHdpZHRoICwgaGVpZ2h0ICwgX2FzcGVjdFJhdGlvICB9ID0gdGhpcztcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmKGFzcGVjdFJhdGlvKSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzcGVjdFJhdGlvO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYWludGFpbkFzcGVjdFJhdGlvICYmIF9hc3BlY3RSYXRpbykge1xuICAgICAgICAgICAgcmV0dXJuIF9hc3BlY3RSYXRpbztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVpZ2h0ID8gd2lkdGggLyBoZWlnaHQgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmRhdGE7XG4gICAgfVxuICAgIHNldCBkYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5jb25maWcuZGF0YSA9IGRhdGE7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9XG4gICAgc2V0IG9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICB0aGlzLmNvbmZpZy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IHJlZ2lzdHJ5KCkge1xuICAgICAgICByZXR1cm4gcmVnaXN0cnk7XG4gICAgfVxuIF9pbml0aWFsaXplKCkge1xuICAgICAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZUluaXQnKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXNwb25zaXZlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0aW5hU2NhbGUodGhpcywgdGhpcy5vcHRpb25zLmRldmljZVBpeGVsUmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgICAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2FmdGVySW5pdCcpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIGNsZWFyQ2FudmFzKHRoaXMuY2FudmFzLCB0aGlzLmN0eCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBhbmltYXRvci5zdG9wKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gcmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgaWYgKCFhbmltYXRvci5ydW5uaW5nKHRoaXMpKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNpemVCZWZvcmVEcmF3ID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jYW52YXM7XG4gICAgICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gb3B0aW9ucy5tYWludGFpbkFzcGVjdFJhdGlvICYmIHRoaXMuYXNwZWN0UmF0aW87XG4gICAgICAgIGNvbnN0IG5ld1NpemUgPSB0aGlzLnBsYXRmb3JtLmdldE1heGltdW1TaXplKGNhbnZhcywgd2lkdGgsIGhlaWdodCwgYXNwZWN0UmF0aW8pO1xuICAgICAgICBjb25zdCBuZXdSYXRpbyA9IG9wdGlvbnMuZGV2aWNlUGl4ZWxSYXRpbyB8fCB0aGlzLnBsYXRmb3JtLmdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICAgICAgY29uc3QgbW9kZSA9IHRoaXMud2lkdGggPyAncmVzaXplJyA6ICdhdHRhY2gnO1xuICAgICAgICB0aGlzLndpZHRoID0gbmV3U2l6ZS53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBuZXdTaXplLmhlaWdodDtcbiAgICAgICAgdGhpcy5fYXNwZWN0UmF0aW8gPSB0aGlzLmFzcGVjdFJhdGlvO1xuICAgICAgICBpZiAoIXJldGluYVNjYWxlKHRoaXMsIG5ld1JhdGlvLCB0cnVlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90aWZ5UGx1Z2lucygncmVzaXplJywge1xuICAgICAgICAgICAgc2l6ZTogbmV3U2l6ZVxuICAgICAgICB9KTtcbiAgICAgICAgY2FsbGJhY2sob3B0aW9ucy5vblJlc2l6ZSwgW1xuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG5ld1NpemVcbiAgICAgICAgXSwgdGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmF0dGFjaGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZG9SZXNpemUobW9kZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVuc3VyZVNjYWxlc0hhdmVJRHMoKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHNjYWxlc09wdGlvbnMgPSBvcHRpb25zLnNjYWxlcyB8fCB7fTtcbiAgICAgICAgZWFjaChzY2FsZXNPcHRpb25zLCAoYXhpc09wdGlvbnMsIGF4aXNJRCk9PntcbiAgICAgICAgICAgIGF4aXNPcHRpb25zLmlkID0gYXhpc0lEO1xuICAgICAgICB9KTtcbiAgICB9XG4gYnVpbGRPclVwZGF0ZVNjYWxlcygpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3Qgc2NhbGVPcHRzID0gb3B0aW9ucy5zY2FsZXM7XG4gICAgICAgIGNvbnN0IHNjYWxlcyA9IHRoaXMuc2NhbGVzO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0gT2JqZWN0LmtleXMoc2NhbGVzKS5yZWR1Y2UoKG9iaiwgaWQpPT57XG4gICAgICAgICAgICBvYmpbaWRdID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIGxldCBpdGVtcyA9IFtdO1xuICAgICAgICBpZiAoc2NhbGVPcHRzKSB7XG4gICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLmNvbmNhdChPYmplY3Qua2V5cyhzY2FsZU9wdHMpLm1hcCgoaWQpPT57XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVPcHRpb25zID0gc2NhbGVPcHRzW2lkXTtcbiAgICAgICAgICAgICAgICBjb25zdCBheGlzID0gZGV0ZXJtaW5lQXhpcyhpZCwgc2NhbGVPcHRpb25zKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1JhZGlhbCA9IGF4aXMgPT09ICdyJztcbiAgICAgICAgICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSBheGlzID09PSAneCc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogc2NhbGVPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBkcG9zaXRpb246IGlzUmFkaWFsID8gJ2NoYXJ0QXJlYScgOiBpc0hvcml6b250YWwgPyAnYm90dG9tJyA6ICdsZWZ0JyxcbiAgICAgICAgICAgICAgICAgICAgZHR5cGU6IGlzUmFkaWFsID8gJ3JhZGlhbExpbmVhcicgOiBpc0hvcml6b250YWwgPyAnY2F0ZWdvcnknIDogJ2xpbmVhcidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVhY2goaXRlbXMsIChpdGVtKT0+e1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVPcHRpb25zID0gaXRlbS5vcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgaWQgPSBzY2FsZU9wdGlvbnMuaWQ7XG4gICAgICAgICAgICBjb25zdCBheGlzID0gZGV0ZXJtaW5lQXhpcyhpZCwgc2NhbGVPcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlVHlwZSA9IHZhbHVlT3JEZWZhdWx0KHNjYWxlT3B0aW9ucy50eXBlLCBpdGVtLmR0eXBlKTtcbiAgICAgICAgICAgIGlmIChzY2FsZU9wdGlvbnMucG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCBwb3NpdGlvbklzSG9yaXpvbnRhbChzY2FsZU9wdGlvbnMucG9zaXRpb24sIGF4aXMpICE9PSBwb3NpdGlvbklzSG9yaXpvbnRhbChpdGVtLmRwb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICBzY2FsZU9wdGlvbnMucG9zaXRpb24gPSBpdGVtLmRwb3NpdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZWRbaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBzY2FsZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoaWQgaW4gc2NhbGVzICYmIHNjYWxlc1tpZF0udHlwZSA9PT0gc2NhbGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgc2NhbGUgPSBzY2FsZXNbaWRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZUNsYXNzID0gcmVnaXN0cnkuZ2V0U2NhbGUoc2NhbGVUeXBlKTtcbiAgICAgICAgICAgICAgICBzY2FsZSA9IG5ldyBzY2FsZUNsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHNjYWxlVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiB0aGlzLmN0eCxcbiAgICAgICAgICAgICAgICAgICAgY2hhcnQ6IHRoaXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzY2FsZXNbc2NhbGUuaWRdID0gc2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzY2FsZS5pbml0KHNjYWxlT3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBlYWNoKHVwZGF0ZWQsIChoYXNVcGRhdGVkLCBpZCk9PntcbiAgICAgICAgICAgIGlmICghaGFzVXBkYXRlZCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2FsZXNbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZWFjaChzY2FsZXMsIChzY2FsZSk9PntcbiAgICAgICAgICAgIGxheW91dHMuY29uZmlndXJlKHRoaXMsIHNjYWxlLCBzY2FsZS5vcHRpb25zKTtcbiAgICAgICAgICAgIGxheW91dHMuYWRkQm94KHRoaXMsIHNjYWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuIF91cGRhdGVNZXRhc2V0cygpIHtcbiAgICAgICAgY29uc3QgbWV0YXNldHMgPSB0aGlzLl9tZXRhc2V0cztcbiAgICAgICAgY29uc3QgbnVtRGF0YSA9IHRoaXMuZGF0YS5kYXRhc2V0cy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG51bU1ldGEgPSBtZXRhc2V0cy5sZW5ndGg7XG4gICAgICAgIG1ldGFzZXRzLnNvcnQoKGEsIGIpPT5hLmluZGV4IC0gYi5pbmRleCk7XG4gICAgICAgIGlmIChudW1NZXRhID4gbnVtRGF0YSkge1xuICAgICAgICAgICAgZm9yKGxldCBpID0gbnVtRGF0YTsgaSA8IG51bU1ldGE7ICsraSl7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVzdHJveURhdGFzZXRNZXRhKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWV0YXNldHMuc3BsaWNlKG51bURhdGEsIG51bU1ldGEgLSBudW1EYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zb3J0ZWRNZXRhc2V0cyA9IG1ldGFzZXRzLnNsaWNlKDApLnNvcnQoY29tcGFyZTJMZXZlbCgnb3JkZXInLCAnaW5kZXgnKSk7XG4gICAgfVxuIF9yZW1vdmVVbnJlZmVyZW5jZWRNZXRhc2V0cygpIHtcbiAgICAgICAgY29uc3QgeyBfbWV0YXNldHM6IG1ldGFzZXRzICwgZGF0YTogeyBkYXRhc2V0cyAgfSAgfSA9IHRoaXM7XG4gICAgICAgIGlmIChtZXRhc2V0cy5sZW5ndGggPiBkYXRhc2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9zdGFja3M7XG4gICAgICAgIH1cbiAgICAgICAgbWV0YXNldHMuZm9yRWFjaCgobWV0YSwgaW5kZXgpPT57XG4gICAgICAgICAgICBpZiAoZGF0YXNldHMuZmlsdGVyKCh4KT0+eCA9PT0gbWV0YS5fZGF0YXNldCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVzdHJveURhdGFzZXRNZXRhKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGJ1aWxkT3JVcGRhdGVDb250cm9sbGVycygpIHtcbiAgICAgICAgY29uc3QgbmV3Q29udHJvbGxlcnMgPSBbXTtcbiAgICAgICAgY29uc3QgZGF0YXNldHMgPSB0aGlzLmRhdGEuZGF0YXNldHM7XG4gICAgICAgIGxldCBpLCBpbGVuO1xuICAgICAgICB0aGlzLl9yZW1vdmVVbnJlZmVyZW5jZWRNZXRhc2V0cygpO1xuICAgICAgICBmb3IoaSA9IDAsIGlsZW4gPSBkYXRhc2V0cy5sZW5ndGg7IGkgPCBpbGVuOyBpKyspe1xuICAgICAgICAgICAgY29uc3QgZGF0YXNldCA9IGRhdGFzZXRzW2ldO1xuICAgICAgICAgICAgbGV0IG1ldGEgPSB0aGlzLmdldERhdGFzZXRNZXRhKGkpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IGRhdGFzZXQudHlwZSB8fCB0aGlzLmNvbmZpZy50eXBlO1xuICAgICAgICAgICAgaWYgKG1ldGEudHlwZSAmJiBtZXRhLnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZXN0cm95RGF0YXNldE1ldGEoaSk7XG4gICAgICAgICAgICAgICAgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXRhLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgbWV0YS5pbmRleEF4aXMgPSBkYXRhc2V0LmluZGV4QXhpcyB8fCBnZXRJbmRleEF4aXModHlwZSwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgIG1ldGEub3JkZXIgPSBkYXRhc2V0Lm9yZGVyIHx8IDA7XG4gICAgICAgICAgICBtZXRhLmluZGV4ID0gaTtcbiAgICAgICAgICAgIG1ldGEubGFiZWwgPSAnJyArIGRhdGFzZXQubGFiZWw7XG4gICAgICAgICAgICBtZXRhLnZpc2libGUgPSB0aGlzLmlzRGF0YXNldFZpc2libGUoaSk7XG4gICAgICAgICAgICBpZiAobWV0YS5jb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgbWV0YS5jb250cm9sbGVyLnVwZGF0ZUluZGV4KGkpO1xuICAgICAgICAgICAgICAgIG1ldGEuY29udHJvbGxlci5saW5rU2NhbGVzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IENvbnRyb2xsZXJDbGFzcyA9IHJlZ2lzdHJ5LmdldENvbnRyb2xsZXIodHlwZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhc2V0RWxlbWVudFR5cGUgLCBkYXRhRWxlbWVudFR5cGUgIH0gPSBkZWZhdWx0cy5kYXRhc2V0c1t0eXBlXTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKENvbnRyb2xsZXJDbGFzcywge1xuICAgICAgICAgICAgICAgICAgICBkYXRhRWxlbWVudFR5cGU6IHJlZ2lzdHJ5LmdldEVsZW1lbnQoZGF0YUVsZW1lbnRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldEVsZW1lbnRUeXBlOiBkYXRhc2V0RWxlbWVudFR5cGUgJiYgcmVnaXN0cnkuZ2V0RWxlbWVudChkYXRhc2V0RWxlbWVudFR5cGUpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbWV0YS5jb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXJDbGFzcyh0aGlzLCBpKTtcbiAgICAgICAgICAgICAgICBuZXdDb250cm9sbGVycy5wdXNoKG1ldGEuY29udHJvbGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdXBkYXRlTWV0YXNldHMoKTtcbiAgICAgICAgcmV0dXJuIG5ld0NvbnRyb2xsZXJzO1xuICAgIH1cbiBfcmVzZXRFbGVtZW50cygpIHtcbiAgICAgICAgZWFjaCh0aGlzLmRhdGEuZGF0YXNldHMsIChkYXRhc2V0LCBkYXRhc2V0SW5kZXgpPT57XG4gICAgICAgICAgICB0aGlzLmdldERhdGFzZXRNZXRhKGRhdGFzZXRJbmRleCkuY29udHJvbGxlci5yZXNldCgpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG4gcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0RWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdyZXNldCcpO1xuICAgIH1cbiAgICB1cGRhdGUobW9kZSkge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgICAgY29uZmlnLnVwZGF0ZSgpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fb3B0aW9ucyA9IGNvbmZpZy5jcmVhdGVSZXNvbHZlcihjb25maWcuY2hhcnRPcHRpb25TY29wZXMoKSwgdGhpcy5nZXRDb250ZXh0KCkpO1xuICAgICAgICBjb25zdCBhbmltc0Rpc2FibGVkID0gdGhpcy5fYW5pbWF0aW9uc0Rpc2FibGVkID0gIW9wdGlvbnMuYW5pbWF0aW9uO1xuICAgICAgICB0aGlzLl91cGRhdGVTY2FsZXMoKTtcbiAgICAgICAgdGhpcy5fY2hlY2tFdmVudEJpbmRpbmdzKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUhpZGRlbkluZGljZXMoKTtcbiAgICAgICAgdGhpcy5fcGx1Z2lucy5pbnZhbGlkYXRlKCk7XG4gICAgICAgIGlmICh0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZVVwZGF0ZScsIHtcbiAgICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgIH0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld0NvbnRyb2xsZXJzID0gdGhpcy5idWlsZE9yVXBkYXRlQ29udHJvbGxlcnMoKTtcbiAgICAgICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdiZWZvcmVFbGVtZW50c1VwZGF0ZScpO1xuICAgICAgICBsZXQgbWluUGFkZGluZyA9IDA7XG4gICAgICAgIGZvcihsZXQgaSA9IDAsIGlsZW4gPSB0aGlzLmRhdGEuZGF0YXNldHMubGVuZ3RoOyBpIDwgaWxlbjsgaSsrKXtcbiAgICAgICAgICAgIGNvbnN0IHsgY29udHJvbGxlciAgfSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoaSk7XG4gICAgICAgICAgICBjb25zdCByZXNldCA9ICFhbmltc0Rpc2FibGVkICYmIG5ld0NvbnRyb2xsZXJzLmluZGV4T2YoY29udHJvbGxlcikgPT09IC0xO1xuICAgICAgICAgICAgY29udHJvbGxlci5idWlsZE9yVXBkYXRlRWxlbWVudHMocmVzZXQpO1xuICAgICAgICAgICAgbWluUGFkZGluZyA9IE1hdGgubWF4KCtjb250cm9sbGVyLmdldE1heE92ZXJmbG93KCksIG1pblBhZGRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIG1pblBhZGRpbmcgPSB0aGlzLl9taW5QYWRkaW5nID0gb3B0aW9ucy5sYXlvdXQuYXV0b1BhZGRpbmcgPyBtaW5QYWRkaW5nIDogMDtcbiAgICAgICAgdGhpcy5fdXBkYXRlTGF5b3V0KG1pblBhZGRpbmcpO1xuICAgICAgICBpZiAoIWFuaW1zRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGVhY2gobmV3Q29udHJvbGxlcnMsIChjb250cm9sbGVyKT0+e1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIucmVzZXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VwZGF0ZURhdGFzZXRzKG1vZGUpO1xuICAgICAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2FmdGVyVXBkYXRlJywge1xuICAgICAgICAgICAgbW9kZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbGF5ZXJzLnNvcnQoY29tcGFyZTJMZXZlbCgneicsICdfaWR4JykpO1xuICAgICAgICBjb25zdCB7IF9hY3RpdmUgLCBfbGFzdEV2ZW50ICB9ID0gdGhpcztcbiAgICAgICAgaWYgKF9sYXN0RXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50SGFuZGxlcihfbGFzdEV2ZW50LCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChfYWN0aXZlLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSG92ZXJTdHlsZXMoX2FjdGl2ZSwgX2FjdGl2ZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gX3VwZGF0ZVNjYWxlcygpIHtcbiAgICAgICAgZWFjaCh0aGlzLnNjYWxlcywgKHNjYWxlKT0+e1xuICAgICAgICAgICAgbGF5b3V0cy5yZW1vdmVCb3godGhpcywgc2NhbGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbnN1cmVTY2FsZXNIYXZlSURzKCk7XG4gICAgICAgIHRoaXMuYnVpbGRPclVwZGF0ZVNjYWxlcygpO1xuICAgIH1cbiBfY2hlY2tFdmVudEJpbmRpbmdzKCkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBleGlzdGluZ0V2ZW50cyA9IG5ldyBTZXQoT2JqZWN0LmtleXModGhpcy5fbGlzdGVuZXJzKSk7XG4gICAgICAgIGNvbnN0IG5ld0V2ZW50cyA9IG5ldyBTZXQob3B0aW9ucy5ldmVudHMpO1xuICAgICAgICBpZiAoIXNldHNFcXVhbChleGlzdGluZ0V2ZW50cywgbmV3RXZlbnRzKSB8fCAhIXRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnMgIT09IG9wdGlvbnMucmVzcG9uc2l2ZSkge1xuICAgICAgICAgICAgdGhpcy51bmJpbmRFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgICAgICB9XG4gICAgfVxuIF91cGRhdGVIaWRkZW5JbmRpY2VzKCkge1xuICAgICAgICBjb25zdCB7IF9oaWRkZW5JbmRpY2VzICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuX2dldFVuaWZvcm1EYXRhQ2hhbmdlcygpIHx8IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHsgbWV0aG9kICwgc3RhcnQgLCBjb3VudCAgfSBvZiBjaGFuZ2VzKXtcbiAgICAgICAgICAgIGNvbnN0IG1vdmUgPSBtZXRob2QgPT09ICdfcmVtb3ZlRWxlbWVudHMnID8gLWNvdW50IDogY291bnQ7XG4gICAgICAgICAgICBtb3ZlTnVtZXJpY0tleXMoX2hpZGRlbkluZGljZXMsIHN0YXJ0LCBtb3ZlKTtcbiAgICAgICAgfVxuICAgIH1cbiBfZ2V0VW5pZm9ybURhdGFDaGFuZ2VzKCkge1xuICAgICAgICBjb25zdCBfZGF0YUNoYW5nZXMgPSB0aGlzLl9kYXRhQ2hhbmdlcztcbiAgICAgICAgaWYgKCFfZGF0YUNoYW5nZXMgfHwgIV9kYXRhQ2hhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kYXRhQ2hhbmdlcyA9IFtdO1xuICAgICAgICBjb25zdCBkYXRhc2V0Q291bnQgPSB0aGlzLmRhdGEuZGF0YXNldHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBtYWtlU2V0ID0gKGlkeCk9Pm5ldyBTZXQoX2RhdGFDaGFuZ2VzLmZpbHRlcigoYyk9PmNbMF0gPT09IGlkeCkubWFwKChjLCBpKT0+aSArICcsJyArIGMuc3BsaWNlKDEpLmpvaW4oJywnKSkpO1xuICAgICAgICBjb25zdCBjaGFuZ2VTZXQgPSBtYWtlU2V0KDApO1xuICAgICAgICBmb3IobGV0IGkgPSAxOyBpIDwgZGF0YXNldENvdW50OyBpKyspe1xuICAgICAgICAgICAgaWYgKCFzZXRzRXF1YWwoY2hhbmdlU2V0LCBtYWtlU2V0KGkpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShjaGFuZ2VTZXQpLm1hcCgoYyk9PmMuc3BsaXQoJywnKSkubWFwKChhKT0+KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IGFbMV0sXG4gICAgICAgICAgICAgICAgc3RhcnQ6ICthWzJdLFxuICAgICAgICAgICAgICAgIGNvdW50OiArYVszXVxuICAgICAgICAgICAgfSkpO1xuICAgIH1cbiBfdXBkYXRlTGF5b3V0KG1pblBhZGRpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlTGF5b3V0Jywge1xuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICB9KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsYXlvdXRzLnVwZGF0ZSh0aGlzLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgbWluUGFkZGluZyk7XG4gICAgICAgIGNvbnN0IGFyZWEgPSB0aGlzLmNoYXJ0QXJlYTtcbiAgICAgICAgY29uc3Qgbm9BcmVhID0gYXJlYS53aWR0aCA8PSAwIHx8IGFyZWEuaGVpZ2h0IDw9IDA7XG4gICAgICAgIHRoaXMuX2xheWVycyA9IFtdO1xuICAgICAgICBlYWNoKHRoaXMuYm94ZXMsIChib3gpPT57XG4gICAgICAgICAgICBpZiAobm9BcmVhICYmIGJveC5wb3NpdGlvbiA9PT0gJ2NoYXJ0QXJlYScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYm94LmNvbmZpZ3VyZSkge1xuICAgICAgICAgICAgICAgIGJveC5jb25maWd1cmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2xheWVycy5wdXNoKC4uLmJveC5fbGF5ZXJzKCkpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgdGhpcy5fbGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KT0+e1xuICAgICAgICAgICAgaXRlbS5faWR4ID0gaW5kZXg7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2FmdGVyTGF5b3V0Jyk7XG4gICAgfVxuIF91cGRhdGVEYXRhc2V0cyhtb2RlKSB7XG4gICAgICAgIGlmICh0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZURhdGFzZXRzVXBkYXRlJywge1xuICAgICAgICAgICAgbW9kZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgfSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yKGxldCBpID0gMCwgaWxlbiA9IHRoaXMuZGF0YS5kYXRhc2V0cy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICAgICAgdGhpcy5nZXREYXRhc2V0TWV0YShpKS5jb250cm9sbGVyLmNvbmZpZ3VyZSgpO1xuICAgICAgICB9XG4gICAgICAgIGZvcihsZXQgaTEgPSAwLCBpbGVuMSA9IHRoaXMuZGF0YS5kYXRhc2V0cy5sZW5ndGg7IGkxIDwgaWxlbjE7ICsraTEpe1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlRGF0YXNldChpMSwgaXNGdW5jdGlvbihtb2RlKSA/IG1vZGUoe1xuICAgICAgICAgICAgICAgIGRhdGFzZXRJbmRleDogaTFcbiAgICAgICAgICAgIH0pIDogbW9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdhZnRlckRhdGFzZXRzVXBkYXRlJywge1xuICAgICAgICAgICAgbW9kZVxuICAgICAgICB9KTtcbiAgICB9XG4gX3VwZGF0ZURhdGFzZXQoaW5kZXgsIG1vZGUpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoaW5kZXgpO1xuICAgICAgICBjb25zdCBhcmdzID0ge1xuICAgICAgICAgICAgbWV0YSxcbiAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgbW9kZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlRGF0YXNldFVwZGF0ZScsIGFyZ3MpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG1ldGEuY29udHJvbGxlci5fdXBkYXRlKG1vZGUpO1xuICAgICAgICBhcmdzLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdhZnRlckRhdGFzZXRVcGRhdGUnLCBhcmdzKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5ub3RpZnlQbHVnaW5zKCdiZWZvcmVSZW5kZXInLCB7XG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgIH0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmltYXRvci5oYXModGhpcykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmF0dGFjaGVkICYmICFhbmltYXRvci5ydW5uaW5nKHRoaXMpKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0b3Iuc3RhcnQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgICAgIG9uQW5pbWF0aW9uc0NvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICBjaGFydDogdGhpc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZHJhdygpIHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmICh0aGlzLl9yZXNpemVCZWZvcmVEcmF3KSB7XG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoICwgaGVpZ2h0ICB9ID0gdGhpcy5fcmVzaXplQmVmb3JlRHJhdztcbiAgICAgICAgICAgIHRoaXMuX3Jlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc2l6ZUJlZm9yZURyYXcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgaWYgKHRoaXMud2lkdGggPD0gMCB8fCB0aGlzLmhlaWdodCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlRHJhdycsIHtcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgfSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGF5ZXJzID0gdGhpcy5fbGF5ZXJzO1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoICYmIGxheWVyc1tpXS56IDw9IDA7ICsraSl7XG4gICAgICAgICAgICBsYXllcnNbaV0uZHJhdyh0aGlzLmNoYXJ0QXJlYSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZHJhd0RhdGFzZXRzKCk7XG4gICAgICAgIGZvcig7IGkgPCBsYXllcnMubGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgbGF5ZXJzW2ldLmRyYXcodGhpcy5jaGFydEFyZWEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90aWZ5UGx1Z2lucygnYWZ0ZXJEcmF3Jyk7XG4gICAgfVxuIF9nZXRTb3J0ZWREYXRhc2V0TWV0YXMoZmlsdGVyVmlzaWJsZSkge1xuICAgICAgICBjb25zdCBtZXRhc2V0cyA9IHRoaXMuX3NvcnRlZE1ldGFzZXRzO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IGksIGlsZW47XG4gICAgICAgIGZvcihpID0gMCwgaWxlbiA9IG1ldGFzZXRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBjb25zdCBtZXRhID0gbWV0YXNldHNbaV07XG4gICAgICAgICAgICBpZiAoIWZpbHRlclZpc2libGUgfHwgbWV0YS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobWV0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFNvcnRlZERhdGFzZXRNZXRhcyh0cnVlKTtcbiAgICB9XG4gX2RyYXdEYXRhc2V0cygpIHtcbiAgICAgICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlRGF0YXNldHNEcmF3Jywge1xuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICB9KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXRhc2V0cyA9IHRoaXMuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpO1xuICAgICAgICBmb3IobGV0IGkgPSBtZXRhc2V0cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSl7XG4gICAgICAgICAgICB0aGlzLl9kcmF3RGF0YXNldChtZXRhc2V0c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdhZnRlckRhdGFzZXRzRHJhdycpO1xuICAgIH1cbiBfZHJhd0RhdGFzZXQobWV0YSkge1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICAgICAgY29uc3QgY2xpcCA9IG1ldGEuX2NsaXA7XG4gICAgICAgIGNvbnN0IHVzZUNsaXAgPSAhY2xpcC5kaXNhYmxlZDtcbiAgICAgICAgY29uc3QgYXJlYSA9IGdldERhdGFzZXRBcmVhKG1ldGEpIHx8IHRoaXMuY2hhcnRBcmVhO1xuICAgICAgICBjb25zdCBhcmdzID0ge1xuICAgICAgICAgICAgbWV0YSxcbiAgICAgICAgICAgIGluZGV4OiBtZXRhLmluZGV4LFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5ub3RpZnlQbHVnaW5zKCdiZWZvcmVEYXRhc2V0RHJhdycsIGFyZ3MpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VDbGlwKSB7XG4gICAgICAgICAgICBjbGlwQXJlYShjdHgsIHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBjbGlwLmxlZnQgPT09IGZhbHNlID8gMCA6IGFyZWEubGVmdCAtIGNsaXAubGVmdCxcbiAgICAgICAgICAgICAgICByaWdodDogY2xpcC5yaWdodCA9PT0gZmFsc2UgPyB0aGlzLndpZHRoIDogYXJlYS5yaWdodCArIGNsaXAucmlnaHQsXG4gICAgICAgICAgICAgICAgdG9wOiBjbGlwLnRvcCA9PT0gZmFsc2UgPyAwIDogYXJlYS50b3AgLSBjbGlwLnRvcCxcbiAgICAgICAgICAgICAgICBib3R0b206IGNsaXAuYm90dG9tID09PSBmYWxzZSA/IHRoaXMuaGVpZ2h0IDogYXJlYS5ib3R0b20gKyBjbGlwLmJvdHRvbVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbWV0YS5jb250cm9sbGVyLmRyYXcoKTtcbiAgICAgICAgaWYgKHVzZUNsaXApIHtcbiAgICAgICAgICAgIHVuY2xpcEFyZWEoY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBhcmdzLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdhZnRlckRhdGFzZXREcmF3JywgYXJncyk7XG4gICAgfVxuIGlzUG9pbnRJbkFyZWEocG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIF9pc1BvaW50SW5BcmVhKHBvaW50LCB0aGlzLmNoYXJ0QXJlYSwgdGhpcy5fbWluUGFkZGluZyk7XG4gICAgfVxuICAgIGdldEVsZW1lbnRzQXRFdmVudEZvck1vZGUoZSwgbW9kZSwgb3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICBjb25zdCBtZXRob2QgPSBJbnRlcmFjdGlvbi5tb2Rlc1ttb2RlXTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2QodGhpcywgZSwgb3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBnZXREYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgZGF0YXNldCA9IHRoaXMuZGF0YS5kYXRhc2V0c1tkYXRhc2V0SW5kZXhdO1xuICAgICAgICBjb25zdCBtZXRhc2V0cyA9IHRoaXMuX21ldGFzZXRzO1xuICAgICAgICBsZXQgbWV0YSA9IG1ldGFzZXRzLmZpbHRlcigoeCk9PnggJiYgeC5fZGF0YXNldCA9PT0gZGF0YXNldCkucG9wKCk7XG4gICAgICAgIGlmICghbWV0YSkge1xuICAgICAgICAgICAgbWV0YSA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBudWxsLFxuICAgICAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgICAgIGRhdGFzZXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBoaWRkZW46IG51bGwsXG4gICAgICAgICAgICAgICAgeEF4aXNJRDogbnVsbCxcbiAgICAgICAgICAgICAgICB5QXhpc0lEOiBudWxsLFxuICAgICAgICAgICAgICAgIG9yZGVyOiBkYXRhc2V0ICYmIGRhdGFzZXQub3JkZXIgfHwgMCxcbiAgICAgICAgICAgICAgICBpbmRleDogZGF0YXNldEluZGV4LFxuICAgICAgICAgICAgICAgIF9kYXRhc2V0OiBkYXRhc2V0LFxuICAgICAgICAgICAgICAgIF9wYXJzZWQ6IFtdLFxuICAgICAgICAgICAgICAgIF9zb3J0ZWQ6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWV0YXNldHMucHVzaChtZXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWV0YTtcbiAgICB9XG4gICAgZ2V0Q29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGNvbnRleHQgfHwgKHRoaXMuJGNvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwsIHtcbiAgICAgICAgICAgIGNoYXJ0OiB0aGlzLFxuICAgICAgICAgICAgdHlwZTogJ2NoYXJ0J1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldFZpc2libGVEYXRhc2V0Q291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNvcnRlZFZpc2libGVEYXRhc2V0TWV0YXMoKS5sZW5ndGg7XG4gICAgfVxuICAgIGlzRGF0YXNldFZpc2libGUoZGF0YXNldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IGRhdGFzZXQgPSB0aGlzLmRhdGEuZGF0YXNldHNbZGF0YXNldEluZGV4XTtcbiAgICAgICAgaWYgKCFkYXRhc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBtZXRhLmhpZGRlbiA9PT0gJ2Jvb2xlYW4nID8gIW1ldGEuaGlkZGVuIDogIWRhdGFzZXQuaGlkZGVuO1xuICAgIH1cbiAgICBzZXREYXRhc2V0VmlzaWJpbGl0eShkYXRhc2V0SW5kZXgsIHZpc2libGUpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcbiAgICAgICAgbWV0YS5oaWRkZW4gPSAhdmlzaWJsZTtcbiAgICB9XG4gICAgdG9nZ2xlRGF0YVZpc2liaWxpdHkoaW5kZXgpIHtcbiAgICAgICAgdGhpcy5faGlkZGVuSW5kaWNlc1tpbmRleF0gPSAhdGhpcy5faGlkZGVuSW5kaWNlc1tpbmRleF07XG4gICAgfVxuICAgIGdldERhdGFWaXNpYmlsaXR5KGluZGV4KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5faGlkZGVuSW5kaWNlc1tpbmRleF07XG4gICAgfVxuIF91cGRhdGVWaXNpYmlsaXR5KGRhdGFzZXRJbmRleCwgZGF0YUluZGV4LCB2aXNpYmxlKSB7XG4gICAgICAgIGNvbnN0IG1vZGUgPSB2aXNpYmxlID8gJ3Nob3cnIDogJ2hpZGUnO1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5nZXREYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBhbmltcyA9IG1ldGEuY29udHJvbGxlci5fcmVzb2x2ZUFuaW1hdGlvbnModW5kZWZpbmVkLCBtb2RlKTtcbiAgICAgICAgaWYgKGRlZmluZWQoZGF0YUluZGV4KSkge1xuICAgICAgICAgICAgbWV0YS5kYXRhW2RhdGFJbmRleF0uaGlkZGVuID0gIXZpc2libGU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXREYXRhc2V0VmlzaWJpbGl0eShkYXRhc2V0SW5kZXgsIHZpc2libGUpO1xuICAgICAgICAgICAgYW5pbXMudXBkYXRlKG1ldGEsIHtcbiAgICAgICAgICAgICAgICB2aXNpYmxlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKChjdHgpPT5jdHguZGF0YXNldEluZGV4ID09PSBkYXRhc2V0SW5kZXggPyBtb2RlIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoaWRlKGRhdGFzZXRJbmRleCwgZGF0YUluZGV4KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVZpc2liaWxpdHkoZGF0YXNldEluZGV4LCBkYXRhSW5kZXgsIGZhbHNlKTtcbiAgICB9XG4gICAgc2hvdyhkYXRhc2V0SW5kZXgsIGRhdGFJbmRleCkge1xuICAgICAgICB0aGlzLl91cGRhdGVWaXNpYmlsaXR5KGRhdGFzZXRJbmRleCwgZGF0YUluZGV4LCB0cnVlKTtcbiAgICB9XG4gX2Rlc3Ryb3lEYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX21ldGFzZXRzW2RhdGFzZXRJbmRleF07XG4gICAgICAgIGlmIChtZXRhICYmIG1ldGEuY29udHJvbGxlcikge1xuICAgICAgICAgICAgbWV0YS5jb250cm9sbGVyLl9kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuX21ldGFzZXRzW2RhdGFzZXRJbmRleF07XG4gICAgfVxuICAgIF9zdG9wKCkge1xuICAgICAgICBsZXQgaSwgaWxlbjtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIGFuaW1hdG9yLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gdGhpcy5kYXRhLmRhdGFzZXRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICB0aGlzLl9kZXN0cm95RGF0YXNldE1ldGEoaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdiZWZvcmVEZXN0cm95Jyk7XG4gICAgICAgIGNvbnN0IHsgY2FudmFzICwgY3R4ICB9ID0gdGhpcztcbiAgICAgICAgdGhpcy5fc3RvcCgpO1xuICAgICAgICB0aGlzLmNvbmZpZy5jbGVhckNhY2hlKCk7XG4gICAgICAgIGlmIChjYW52YXMpIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kRXZlbnRzKCk7XG4gICAgICAgICAgICBjbGVhckNhbnZhcyhjYW52YXMsIGN0eCk7XG4gICAgICAgICAgICB0aGlzLnBsYXRmb3JtLnJlbGVhc2VDb250ZXh0KGN0eCk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmN0eCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIGluc3RhbmNlc1t0aGlzLmlkXTtcbiAgICAgICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdhZnRlckRlc3Ryb3knKTtcbiAgICB9XG4gICAgdG9CYXNlNjRJbWFnZSguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy50b0RhdGFVUkwoLi4uYXJncyk7XG4gICAgfVxuIGJpbmRFdmVudHMoKSB7XG4gICAgICAgIHRoaXMuYmluZFVzZXJFdmVudHMoKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXNwb25zaXZlKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRSZXNwb25zaXZlRXZlbnRzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiBiaW5kVXNlckV2ZW50cygpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgICAgICBjb25zdCBwbGF0Zm9ybSA9IHRoaXMucGxhdGZvcm07XG4gICAgICAgIGNvbnN0IF9hZGQgPSAodHlwZSwgbGlzdGVuZXIpPT57XG4gICAgICAgICAgICBwbGF0Zm9ybS5hZGRFdmVudExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBsaXN0ZW5lciA9IChlLCB4LCB5KT0+e1xuICAgICAgICAgICAgZS5vZmZzZXRYID0geDtcbiAgICAgICAgICAgIGUub2Zmc2V0WSA9IHk7XG4gICAgICAgICAgICB0aGlzLl9ldmVudEhhbmRsZXIoZSk7XG4gICAgICAgIH07XG4gICAgICAgIGVhY2godGhpcy5vcHRpb25zLmV2ZW50cywgKHR5cGUpPT5fYWRkKHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgfVxuIGJpbmRSZXNwb25zaXZlRXZlbnRzKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9yZXNwb25zaXZlTGlzdGVuZXJzO1xuICAgICAgICBjb25zdCBwbGF0Zm9ybSA9IHRoaXMucGxhdGZvcm07XG4gICAgICAgIGNvbnN0IF9hZGQgPSAodHlwZSwgbGlzdGVuZXIpPT57XG4gICAgICAgICAgICBwbGF0Zm9ybS5hZGRFdmVudExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBfcmVtb3ZlID0gKHR5cGUsIGxpc3RlbmVyKT0+e1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSkge1xuICAgICAgICAgICAgICAgIHBsYXRmb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbdHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyID0gKHdpZHRoLCBoZWlnaHQpPT57XG4gICAgICAgICAgICBpZiAodGhpcy5jYW52YXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGRldGFjaGVkO1xuICAgICAgICBjb25zdCBhdHRhY2hlZCA9ICgpPT57XG4gICAgICAgICAgICBfcmVtb3ZlKCdhdHRhY2gnLCBhdHRhY2hlZCk7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgICAgICAgICBfYWRkKCdyZXNpemUnLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICBfYWRkKCdkZXRhY2gnLCBkZXRhY2hlZCk7XG4gICAgICAgIH07XG4gICAgICAgIGRldGFjaGVkID0gKCk9PntcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIF9yZW1vdmUoJ3Jlc2l6ZScsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIHRoaXMuX3N0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc2l6ZSgwLCAwKTtcbiAgICAgICAgICAgIF9hZGQoJ2F0dGFjaCcsIGF0dGFjaGVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHBsYXRmb3JtLmlzQXR0YWNoZWQodGhpcy5jYW52YXMpKSB7XG4gICAgICAgICAgICBhdHRhY2hlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGV0YWNoZWQoKTtcbiAgICAgICAgfVxuICAgIH1cbiB1bmJpbmRFdmVudHMoKSB7XG4gICAgICAgIGVhY2godGhpcy5fbGlzdGVuZXJzLCAobGlzdGVuZXIsIHR5cGUpPT57XG4gICAgICAgICAgICB0aGlzLnBsYXRmb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG4gICAgICAgIGVhY2godGhpcy5fcmVzcG9uc2l2ZUxpc3RlbmVycywgKGxpc3RlbmVyLCB0eXBlKT0+e1xuICAgICAgICAgICAgdGhpcy5wbGF0Zm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHVwZGF0ZUhvdmVyU3R5bGUoaXRlbXMsIG1vZGUsIGVuYWJsZWQpIHtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gZW5hYmxlZCA/ICdzZXQnIDogJ3JlbW92ZSc7XG4gICAgICAgIGxldCBtZXRhLCBpdGVtLCBpLCBpbGVuO1xuICAgICAgICBpZiAobW9kZSA9PT0gJ2RhdGFzZXQnKSB7XG4gICAgICAgICAgICBtZXRhID0gdGhpcy5nZXREYXRhc2V0TWV0YShpdGVtc1swXS5kYXRhc2V0SW5kZXgpO1xuICAgICAgICAgICAgbWV0YS5jb250cm9sbGVyWydfJyArIHByZWZpeCArICdEYXRhc2V0SG92ZXJTdHlsZSddKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgIGl0ZW0gPSBpdGVtc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBpdGVtICYmIHRoaXMuZ2V0RGF0YXNldE1ldGEoaXRlbS5kYXRhc2V0SW5kZXgpLmNvbnRyb2xsZXI7XG4gICAgICAgICAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJbcHJlZml4ICsgJ0hvdmVyU3R5bGUnXShpdGVtLmVsZW1lbnQsIGl0ZW0uZGF0YXNldEluZGV4LCBpdGVtLmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiBnZXRBY3RpdmVFbGVtZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZSB8fCBbXTtcbiAgICB9XG4gc2V0QWN0aXZlRWxlbWVudHMoYWN0aXZlRWxlbWVudHMpIHtcbiAgICAgICAgY29uc3QgbGFzdEFjdGl2ZSA9IHRoaXMuX2FjdGl2ZSB8fCBbXTtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gYWN0aXZlRWxlbWVudHMubWFwKCh7IGRhdGFzZXRJbmRleCAsIGluZGV4ICB9KT0+e1xuICAgICAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcbiAgICAgICAgICAgIGlmICghbWV0YSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGF0YXNldCBmb3VuZCBhdCBpbmRleCAnICsgZGF0YXNldEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YXNldEluZGV4LFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IG1ldGEuZGF0YVtpbmRleF0sXG4gICAgICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gIV9lbGVtZW50c0VxdWFsKGFjdGl2ZSwgbGFzdEFjdGl2ZSk7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgICAgICB0aGlzLl9sYXN0RXZlbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSG92ZXJTdHlsZXMoYWN0aXZlLCBsYXN0QWN0aXZlKTtcbiAgICAgICAgfVxuICAgIH1cbiBub3RpZnlQbHVnaW5zKGhvb2ssIGFyZ3MsIGZpbHRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGx1Z2lucy5ub3RpZnkodGhpcywgaG9vaywgYXJncywgZmlsdGVyKTtcbiAgICB9XG4gaXNQbHVnaW5FbmFibGVkKHBsdWdpbklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wbHVnaW5zLl9jYWNoZS5maWx0ZXIoKHApPT5wLnBsdWdpbi5pZCA9PT0gcGx1Z2luSWQpLmxlbmd0aCA9PT0gMTtcbiAgICB9XG4gX3VwZGF0ZUhvdmVyU3R5bGVzKGFjdGl2ZSwgbGFzdEFjdGl2ZSwgcmVwbGF5KSB7XG4gICAgICAgIGNvbnN0IGhvdmVyT3B0aW9ucyA9IHRoaXMub3B0aW9ucy5ob3ZlcjtcbiAgICAgICAgY29uc3QgZGlmZiA9IChhLCBiKT0+YS5maWx0ZXIoKHgpPT4hYi5zb21lKCh5KT0+eC5kYXRhc2V0SW5kZXggPT09IHkuZGF0YXNldEluZGV4ICYmIHguaW5kZXggPT09IHkuaW5kZXgpKTtcbiAgICAgICAgY29uc3QgZGVhY3RpdmF0ZWQgPSBkaWZmKGxhc3RBY3RpdmUsIGFjdGl2ZSk7XG4gICAgICAgIGNvbnN0IGFjdGl2YXRlZCA9IHJlcGxheSA/IGFjdGl2ZSA6IGRpZmYoYWN0aXZlLCBsYXN0QWN0aXZlKTtcbiAgICAgICAgaWYgKGRlYWN0aXZhdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVIb3ZlclN0eWxlKGRlYWN0aXZhdGVkLCBob3Zlck9wdGlvbnMubW9kZSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3RpdmF0ZWQubGVuZ3RoICYmIGhvdmVyT3B0aW9ucy5tb2RlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUhvdmVyU3R5bGUoYWN0aXZhdGVkLCBob3Zlck9wdGlvbnMubW9kZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gX2V2ZW50SGFuZGxlcihlLCByZXBsYXkpIHtcbiAgICAgICAgY29uc3QgYXJncyA9IHtcbiAgICAgICAgICAgIGV2ZW50OiBlLFxuICAgICAgICAgICAgcmVwbGF5LFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGluQ2hhcnRBcmVhOiB0aGlzLmlzUG9pbnRJbkFyZWEoZSlcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXZlbnRGaWx0ZXIgPSAocGx1Z2luKT0+KHBsdWdpbi5vcHRpb25zLmV2ZW50cyB8fCB0aGlzLm9wdGlvbnMuZXZlbnRzKS5pbmNsdWRlcyhlLm5hdGl2ZS50eXBlKTtcbiAgICAgICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlRXZlbnQnLCBhcmdzLCBldmVudEZpbHRlcikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IHRoaXMuX2hhbmRsZUV2ZW50KGUsIHJlcGxheSwgYXJncy5pbkNoYXJ0QXJlYSk7XG4gICAgICAgIGFyZ3MuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2FmdGVyRXZlbnQnLCBhcmdzLCBldmVudEZpbHRlcik7XG4gICAgICAgIGlmIChjaGFuZ2VkIHx8IGFyZ3MuY2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gX2hhbmRsZUV2ZW50KGUsIHJlcGxheSwgaW5DaGFydEFyZWEpIHtcbiAgICAgICAgY29uc3QgeyBfYWN0aXZlOiBsYXN0QWN0aXZlID0gW10gLCBvcHRpb25zICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgdXNlRmluYWxQb3NpdGlvbiA9IHJlcGxheTtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5fZ2V0QWN0aXZlRWxlbWVudHMoZSwgbGFzdEFjdGl2ZSwgaW5DaGFydEFyZWEsIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgICAgICBjb25zdCBpc0NsaWNrID0gX2lzQ2xpY2tFdmVudChlKTtcbiAgICAgICAgY29uc3QgbGFzdEV2ZW50ID0gZGV0ZXJtaW5lTGFzdEV2ZW50KGUsIHRoaXMuX2xhc3RFdmVudCwgaW5DaGFydEFyZWEsIGlzQ2xpY2spO1xuICAgICAgICBpZiAoaW5DaGFydEFyZWEpIHtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RFdmVudCA9IG51bGw7XG4gICAgICAgICAgICBjYWxsYmFjayhvcHRpb25zLm9uSG92ZXIsIFtcbiAgICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICAgIGFjdGl2ZSxcbiAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICBdLCB0aGlzKTtcbiAgICAgICAgICAgIGlmIChpc0NsaWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sob3B0aW9ucy5vbkNsaWNrLCBbXG4gICAgICAgICAgICAgICAgICAgIGUsXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgIF0sIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoYW5nZWQgPSAhX2VsZW1lbnRzRXF1YWwoYWN0aXZlLCBsYXN0QWN0aXZlKTtcbiAgICAgICAgaWYgKGNoYW5nZWQgfHwgcmVwbGF5KSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVIb3ZlclN0eWxlcyhhY3RpdmUsIGxhc3RBY3RpdmUsIHJlcGxheSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGFzdEV2ZW50ID0gbGFzdEV2ZW50O1xuICAgICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9XG4gX2dldEFjdGl2ZUVsZW1lbnRzKGUsIGxhc3RBY3RpdmUsIGluQ2hhcnRBcmVhLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZW91dCcpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWluQ2hhcnRBcmVhKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFzdEFjdGl2ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3Zlck9wdGlvbnMgPSB0aGlzLm9wdGlvbnMuaG92ZXI7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRzQXRFdmVudEZvck1vZGUoZSwgaG92ZXJPcHRpb25zLm1vZGUsIGhvdmVyT3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgfVxufVxuZnVuY3Rpb24gaW52YWxpZGF0ZVBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIGVhY2goQ2hhcnQuaW5zdGFuY2VzLCAoY2hhcnQpPT5jaGFydC5fcGx1Z2lucy5pbnZhbGlkYXRlKCkpO1xufVxuXG5mdW5jdGlvbiBjbGlwQXJjKGN0eCwgZWxlbWVudCwgZW5kQW5nbGUpIHtcbiAgICBjb25zdCB7IHN0YXJ0QW5nbGUgLCBwaXhlbE1hcmdpbiAsIHggLCB5ICwgb3V0ZXJSYWRpdXMgLCBpbm5lclJhZGl1cyAgfSA9IGVsZW1lbnQ7XG4gICAgbGV0IGFuZ2xlTWFyZ2luID0gcGl4ZWxNYXJnaW4gLyBvdXRlclJhZGl1cztcbiAgICAvLyBEcmF3IGFuIGlubmVyIGJvcmRlciBieSBjbGlwcGluZyB0aGUgYXJjIGFuZCBkcmF3aW5nIGEgZG91YmxlLXdpZHRoIGJvcmRlclxuICAgIC8vIEVubGFyZ2UgdGhlIGNsaXBwaW5nIGFyYyBieSAwLjMzIHBpeGVscyB0byBlbGltaW5hdGUgZ2xpdGNoZXMgYmV0d2VlbiBib3JkZXJzXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5hcmMoeCwgeSwgb3V0ZXJSYWRpdXMsIHN0YXJ0QW5nbGUgLSBhbmdsZU1hcmdpbiwgZW5kQW5nbGUgKyBhbmdsZU1hcmdpbik7XG4gICAgaWYgKGlubmVyUmFkaXVzID4gcGl4ZWxNYXJnaW4pIHtcbiAgICAgICAgYW5nbGVNYXJnaW4gPSBwaXhlbE1hcmdpbiAvIGlubmVyUmFkaXVzO1xuICAgICAgICBjdHguYXJjKHgsIHksIGlubmVyUmFkaXVzLCBlbmRBbmdsZSArIGFuZ2xlTWFyZ2luLCBzdGFydEFuZ2xlIC0gYW5nbGVNYXJnaW4sIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5hcmMoeCwgeSwgcGl4ZWxNYXJnaW4sIGVuZEFuZ2xlICsgSEFMRl9QSSwgc3RhcnRBbmdsZSAtIEhBTEZfUEkpO1xuICAgIH1cbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmNsaXAoKTtcbn1cbmZ1bmN0aW9uIHRvUmFkaXVzQ29ybmVycyh2YWx1ZSkge1xuICAgIHJldHVybiBfcmVhZFZhbHVlVG9Qcm9wcyh2YWx1ZSwgW1xuICAgICAgICAnb3V0ZXJTdGFydCcsXG4gICAgICAgICdvdXRlckVuZCcsXG4gICAgICAgICdpbm5lclN0YXJ0JyxcbiAgICAgICAgJ2lubmVyRW5kJ1xuICAgIF0pO1xufVxuLyoqXG4gKiBQYXJzZSBib3JkZXIgcmFkaXVzIGZyb20gdGhlIHByb3ZpZGVkIG9wdGlvbnNcbiAqLyBmdW5jdGlvbiBwYXJzZUJvcmRlclJhZGl1cyQxKGFyYywgaW5uZXJSYWRpdXMsIG91dGVyUmFkaXVzLCBhbmdsZURlbHRhKSB7XG4gICAgY29uc3QgbyA9IHRvUmFkaXVzQ29ybmVycyhhcmMub3B0aW9ucy5ib3JkZXJSYWRpdXMpO1xuICAgIGNvbnN0IGhhbGZUaGlja25lc3MgPSAob3V0ZXJSYWRpdXMgLSBpbm5lclJhZGl1cykgLyAyO1xuICAgIGNvbnN0IGlubmVyTGltaXQgPSBNYXRoLm1pbihoYWxmVGhpY2tuZXNzLCBhbmdsZURlbHRhICogaW5uZXJSYWRpdXMgLyAyKTtcbiAgICAvLyBPdXRlciBsaW1pdHMgYXJlIGNvbXBsaWNhdGVkLiBXZSB3YW50IHRvIGNvbXB1dGUgdGhlIGF2YWlsYWJsZSBhbmd1bGFyIGRpc3RhbmNlIGF0XG4gICAgLy8gYSByYWRpdXMgb2Ygb3V0ZXJSYWRpdXMgLSBib3JkZXJSYWRpdXMgYmVjYXVzZSBmb3Igc21hbGwgYW5ndWxhciBkaXN0YW5jZXMsIHRoaXMgdGVybSBsaW1pdHMuXG4gICAgLy8gV2UgY29tcHV0ZSBhdCByID0gb3V0ZXJSYWRpdXMgLSBib3JkZXJSYWRpdXMgYmVjYXVzZSB0aGlzIGNpcmNsZSBkZWZpbmVzIHRoZSBjZW50ZXIgb2YgdGhlIGJvcmRlciBjb3JuZXJzLlxuICAgIC8vXG4gICAgLy8gSWYgdGhlIGJvcmRlclJhZGl1cyBpcyBsYXJnZSwgdGhhdCB2YWx1ZSBjYW4gYmVjb21lIG5lZ2F0aXZlLlxuICAgIC8vIFRoaXMgY2F1c2VzIHRoZSBvdXRlciBib3JkZXJzIHRvIGxvc2UgdGhlaXIgcmFkaXVzIGVudGlyZWx5LCB3aGljaCBpcyByYXRoZXIgdW5leHBlY3RlZC4gVG8gc29sdmUgdGhhdCwgaWYgYm9yZGVyUmFkaXVzID4gb3V0ZXJSYWRpdXNcbiAgICAvLyB3ZSBrbm93IHRoYXQgdGhlIHRoaWNrbmVzcyB0ZXJtIHdpbGwgZG9taW5hdGUgYW5kIGNvbXB1dGUgdGhlIGxpbWl0cyBhdCB0aGF0IHBvaW50XG4gICAgY29uc3QgY29tcHV0ZU91dGVyTGltaXQgPSAodmFsKT0+e1xuICAgICAgICBjb25zdCBvdXRlckFyY0xpbWl0ID0gKG91dGVyUmFkaXVzIC0gTWF0aC5taW4oaGFsZlRoaWNrbmVzcywgdmFsKSkgKiBhbmdsZURlbHRhIC8gMjtcbiAgICAgICAgcmV0dXJuIF9saW1pdFZhbHVlKHZhbCwgMCwgTWF0aC5taW4oaGFsZlRoaWNrbmVzcywgb3V0ZXJBcmNMaW1pdCkpO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3V0ZXJTdGFydDogY29tcHV0ZU91dGVyTGltaXQoby5vdXRlclN0YXJ0KSxcbiAgICAgICAgb3V0ZXJFbmQ6IGNvbXB1dGVPdXRlckxpbWl0KG8ub3V0ZXJFbmQpLFxuICAgICAgICBpbm5lclN0YXJ0OiBfbGltaXRWYWx1ZShvLmlubmVyU3RhcnQsIDAsIGlubmVyTGltaXQpLFxuICAgICAgICBpbm5lckVuZDogX2xpbWl0VmFsdWUoby5pbm5lckVuZCwgMCwgaW5uZXJMaW1pdClcbiAgICB9O1xufVxuLyoqXG4gKiBDb252ZXJ0IChyLCDwnZyDKSB0byAoeCwgeSlcbiAqLyBmdW5jdGlvbiByVGhldGFUb1hZKHIsIHRoZXRhLCB4LCB5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogeCArIHIgKiBNYXRoLmNvcyh0aGV0YSksXG4gICAgICAgIHk6IHkgKyByICogTWF0aC5zaW4odGhldGEpXG4gICAgfTtcbn1cbi8qKlxuICogUGF0aCB0aGUgYXJjLCByZXNwZWN0aW5nIGJvcmRlciByYWRpdXMgYnkgc2VwYXJhdGluZyBpbnRvIGxlZnQgYW5kIHJpZ2h0IGhhbHZlcy5cbiAqXG4gKiAgIFN0YXJ0ICAgICAgRW5kXG4gKlxuICogICAgMS0tLT5hLS0tPjIgICAgT3V0ZXJcbiAqICAgLyAgICAgICAgICAgXFxcbiAqICAgOCAgICAgICAgICAgM1xuICogICB8ICAgICAgICAgICB8XG4gKiAgIHwgICAgICAgICAgIHxcbiAqICAgNyAgICAgICAgICAgNFxuICogICBcXCAgICAgICAgICAgL1xuICogICAgNjwtLS1iPC0tLTUgICAgSW5uZXJcbiAqLyBmdW5jdGlvbiBwYXRoQXJjKGN0eCwgZWxlbWVudCwgb2Zmc2V0LCBzcGFjaW5nLCBlbmQsIGNpcmN1bGFyKSB7XG4gICAgY29uc3QgeyB4ICwgeSAsIHN0YXJ0QW5nbGU6IHN0YXJ0ICwgcGl4ZWxNYXJnaW4gLCBpbm5lclJhZGl1czogaW5uZXJSICB9ID0gZWxlbWVudDtcbiAgICBjb25zdCBvdXRlclJhZGl1cyA9IE1hdGgubWF4KGVsZW1lbnQub3V0ZXJSYWRpdXMgKyBzcGFjaW5nICsgb2Zmc2V0IC0gcGl4ZWxNYXJnaW4sIDApO1xuICAgIGNvbnN0IGlubmVyUmFkaXVzID0gaW5uZXJSID4gMCA/IGlubmVyUiArIHNwYWNpbmcgKyBvZmZzZXQgKyBwaXhlbE1hcmdpbiA6IDA7XG4gICAgbGV0IHNwYWNpbmdPZmZzZXQgPSAwO1xuICAgIGNvbnN0IGFscGhhID0gZW5kIC0gc3RhcnQ7XG4gICAgaWYgKHNwYWNpbmcpIHtcbiAgICAgICAgLy8gV2hlbiBzcGFjaW5nIGlzIHByZXNlbnQsIGl0IGlzIHRoZSBzYW1lIGZvciBhbGwgaXRlbXNcbiAgICAgICAgLy8gU28gd2UgYWRqdXN0IHRoZSBzdGFydCBhbmQgZW5kIGFuZ2xlIG9mIHRoZSBhcmMgc3VjaCB0aGF0XG4gICAgICAgIC8vIHRoZSBkaXN0YW5jZSBpcyB0aGUgc2FtZSBhcyBpdCB3b3VsZCBiZSB3aXRob3V0IHRoZSBzcGFjaW5nXG4gICAgICAgIGNvbnN0IG5vU3BhY2luZ0lubmVyUmFkaXVzID0gaW5uZXJSID4gMCA/IGlubmVyUiAtIHNwYWNpbmcgOiAwO1xuICAgICAgICBjb25zdCBub1NwYWNpbmdPdXRlclJhZGl1cyA9IG91dGVyUmFkaXVzID4gMCA/IG91dGVyUmFkaXVzIC0gc3BhY2luZyA6IDA7XG4gICAgICAgIGNvbnN0IGF2Tm9nU3BhY2luZ1JhZGl1cyA9IChub1NwYWNpbmdJbm5lclJhZGl1cyArIG5vU3BhY2luZ091dGVyUmFkaXVzKSAvIDI7XG4gICAgICAgIGNvbnN0IGFkanVzdGVkQW5nbGUgPSBhdk5vZ1NwYWNpbmdSYWRpdXMgIT09IDAgPyBhbHBoYSAqIGF2Tm9nU3BhY2luZ1JhZGl1cyAvIChhdk5vZ1NwYWNpbmdSYWRpdXMgKyBzcGFjaW5nKSA6IGFscGhhO1xuICAgICAgICBzcGFjaW5nT2Zmc2V0ID0gKGFscGhhIC0gYWRqdXN0ZWRBbmdsZSkgLyAyO1xuICAgIH1cbiAgICBjb25zdCBiZXRhID0gTWF0aC5tYXgoMC4wMDEsIGFscGhhICogb3V0ZXJSYWRpdXMgLSBvZmZzZXQgLyBQSSkgLyBvdXRlclJhZGl1cztcbiAgICBjb25zdCBhbmdsZU9mZnNldCA9IChhbHBoYSAtIGJldGEpIC8gMjtcbiAgICBjb25zdCBzdGFydEFuZ2xlID0gc3RhcnQgKyBhbmdsZU9mZnNldCArIHNwYWNpbmdPZmZzZXQ7XG4gICAgY29uc3QgZW5kQW5nbGUgPSBlbmQgLSBhbmdsZU9mZnNldCAtIHNwYWNpbmdPZmZzZXQ7XG4gICAgY29uc3QgeyBvdXRlclN0YXJ0ICwgb3V0ZXJFbmQgLCBpbm5lclN0YXJ0ICwgaW5uZXJFbmQgIH0gPSBwYXJzZUJvcmRlclJhZGl1cyQxKGVsZW1lbnQsIGlubmVyUmFkaXVzLCBvdXRlclJhZGl1cywgZW5kQW5nbGUgLSBzdGFydEFuZ2xlKTtcbiAgICBjb25zdCBvdXRlclN0YXJ0QWRqdXN0ZWRSYWRpdXMgPSBvdXRlclJhZGl1cyAtIG91dGVyU3RhcnQ7XG4gICAgY29uc3Qgb3V0ZXJFbmRBZGp1c3RlZFJhZGl1cyA9IG91dGVyUmFkaXVzIC0gb3V0ZXJFbmQ7XG4gICAgY29uc3Qgb3V0ZXJTdGFydEFkanVzdGVkQW5nbGUgPSBzdGFydEFuZ2xlICsgb3V0ZXJTdGFydCAvIG91dGVyU3RhcnRBZGp1c3RlZFJhZGl1cztcbiAgICBjb25zdCBvdXRlckVuZEFkanVzdGVkQW5nbGUgPSBlbmRBbmdsZSAtIG91dGVyRW5kIC8gb3V0ZXJFbmRBZGp1c3RlZFJhZGl1cztcbiAgICBjb25zdCBpbm5lclN0YXJ0QWRqdXN0ZWRSYWRpdXMgPSBpbm5lclJhZGl1cyArIGlubmVyU3RhcnQ7XG4gICAgY29uc3QgaW5uZXJFbmRBZGp1c3RlZFJhZGl1cyA9IGlubmVyUmFkaXVzICsgaW5uZXJFbmQ7XG4gICAgY29uc3QgaW5uZXJTdGFydEFkanVzdGVkQW5nbGUgPSBzdGFydEFuZ2xlICsgaW5uZXJTdGFydCAvIGlubmVyU3RhcnRBZGp1c3RlZFJhZGl1cztcbiAgICBjb25zdCBpbm5lckVuZEFkanVzdGVkQW5nbGUgPSBlbmRBbmdsZSAtIGlubmVyRW5kIC8gaW5uZXJFbmRBZGp1c3RlZFJhZGl1cztcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgaWYgKGNpcmN1bGFyKSB7XG4gICAgICAgIC8vIFRoZSBmaXJzdCBhcmMgc2VnbWVudHMgZnJvbSBwb2ludCAxIHRvIHBvaW50IGEgdG8gcG9pbnQgMlxuICAgICAgICBjb25zdCBvdXRlck1pZEFkanVzdGVkQW5nbGUgPSAob3V0ZXJTdGFydEFkanVzdGVkQW5nbGUgKyBvdXRlckVuZEFkanVzdGVkQW5nbGUpIC8gMjtcbiAgICAgICAgY3R4LmFyYyh4LCB5LCBvdXRlclJhZGl1cywgb3V0ZXJTdGFydEFkanVzdGVkQW5nbGUsIG91dGVyTWlkQWRqdXN0ZWRBbmdsZSk7XG4gICAgICAgIGN0eC5hcmMoeCwgeSwgb3V0ZXJSYWRpdXMsIG91dGVyTWlkQWRqdXN0ZWRBbmdsZSwgb3V0ZXJFbmRBZGp1c3RlZEFuZ2xlKTtcbiAgICAgICAgLy8gVGhlIGNvcm5lciBzZWdtZW50IGZyb20gcG9pbnQgMiB0byBwb2ludCAzXG4gICAgICAgIGlmIChvdXRlckVuZCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHBDZW50ZXIgPSByVGhldGFUb1hZKG91dGVyRW5kQWRqdXN0ZWRSYWRpdXMsIG91dGVyRW5kQWRqdXN0ZWRBbmdsZSwgeCwgeSk7XG4gICAgICAgICAgICBjdHguYXJjKHBDZW50ZXIueCwgcENlbnRlci55LCBvdXRlckVuZCwgb3V0ZXJFbmRBZGp1c3RlZEFuZ2xlLCBlbmRBbmdsZSArIEhBTEZfUEkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBsaW5lIGZyb20gcG9pbnQgMyB0byBwb2ludCA0XG4gICAgICAgIGNvbnN0IHA0ID0gclRoZXRhVG9YWShpbm5lckVuZEFkanVzdGVkUmFkaXVzLCBlbmRBbmdsZSwgeCwgeSk7XG4gICAgICAgIGN0eC5saW5lVG8ocDQueCwgcDQueSk7XG4gICAgICAgIC8vIFRoZSBjb3JuZXIgc2VnbWVudCBmcm9tIHBvaW50IDQgdG8gcG9pbnQgNVxuICAgICAgICBpZiAoaW5uZXJFbmQgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwQ2VudGVyMSA9IHJUaGV0YVRvWFkoaW5uZXJFbmRBZGp1c3RlZFJhZGl1cywgaW5uZXJFbmRBZGp1c3RlZEFuZ2xlLCB4LCB5KTtcbiAgICAgICAgICAgIGN0eC5hcmMocENlbnRlcjEueCwgcENlbnRlcjEueSwgaW5uZXJFbmQsIGVuZEFuZ2xlICsgSEFMRl9QSSwgaW5uZXJFbmRBZGp1c3RlZEFuZ2xlICsgTWF0aC5QSSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGlubmVyIGFyYyBmcm9tIHBvaW50IDUgdG8gcG9pbnQgYiB0byBwb2ludCA2XG4gICAgICAgIGNvbnN0IGlubmVyTWlkQWRqdXN0ZWRBbmdsZSA9IChlbmRBbmdsZSAtIGlubmVyRW5kIC8gaW5uZXJSYWRpdXMgKyAoc3RhcnRBbmdsZSArIGlubmVyU3RhcnQgLyBpbm5lclJhZGl1cykpIC8gMjtcbiAgICAgICAgY3R4LmFyYyh4LCB5LCBpbm5lclJhZGl1cywgZW5kQW5nbGUgLSBpbm5lckVuZCAvIGlubmVyUmFkaXVzLCBpbm5lck1pZEFkanVzdGVkQW5nbGUsIHRydWUpO1xuICAgICAgICBjdHguYXJjKHgsIHksIGlubmVyUmFkaXVzLCBpbm5lck1pZEFkanVzdGVkQW5nbGUsIHN0YXJ0QW5nbGUgKyBpbm5lclN0YXJ0IC8gaW5uZXJSYWRpdXMsIHRydWUpO1xuICAgICAgICAvLyBUaGUgY29ybmVyIHNlZ21lbnQgZnJvbSBwb2ludCA2IHRvIHBvaW50IDdcbiAgICAgICAgaWYgKGlubmVyU3RhcnQgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwQ2VudGVyMiA9IHJUaGV0YVRvWFkoaW5uZXJTdGFydEFkanVzdGVkUmFkaXVzLCBpbm5lclN0YXJ0QWRqdXN0ZWRBbmdsZSwgeCwgeSk7XG4gICAgICAgICAgICBjdHguYXJjKHBDZW50ZXIyLngsIHBDZW50ZXIyLnksIGlubmVyU3RhcnQsIGlubmVyU3RhcnRBZGp1c3RlZEFuZ2xlICsgTWF0aC5QSSwgc3RhcnRBbmdsZSAtIEhBTEZfUEkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBsaW5lIGZyb20gcG9pbnQgNyB0byBwb2ludCA4XG4gICAgICAgIGNvbnN0IHA4ID0gclRoZXRhVG9YWShvdXRlclN0YXJ0QWRqdXN0ZWRSYWRpdXMsIHN0YXJ0QW5nbGUsIHgsIHkpO1xuICAgICAgICBjdHgubGluZVRvKHA4LngsIHA4LnkpO1xuICAgICAgICAvLyBUaGUgY29ybmVyIHNlZ21lbnQgZnJvbSBwb2ludCA4IHRvIHBvaW50IDFcbiAgICAgICAgaWYgKG91dGVyU3RhcnQgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwQ2VudGVyMyA9IHJUaGV0YVRvWFkob3V0ZXJTdGFydEFkanVzdGVkUmFkaXVzLCBvdXRlclN0YXJ0QWRqdXN0ZWRBbmdsZSwgeCwgeSk7XG4gICAgICAgICAgICBjdHguYXJjKHBDZW50ZXIzLngsIHBDZW50ZXIzLnksIG91dGVyU3RhcnQsIHN0YXJ0QW5nbGUgLSBIQUxGX1BJLCBvdXRlclN0YXJ0QWRqdXN0ZWRBbmdsZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjdHgubW92ZVRvKHgsIHkpO1xuICAgICAgICBjb25zdCBvdXRlclN0YXJ0WCA9IE1hdGguY29zKG91dGVyU3RhcnRBZGp1c3RlZEFuZ2xlKSAqIG91dGVyUmFkaXVzICsgeDtcbiAgICAgICAgY29uc3Qgb3V0ZXJTdGFydFkgPSBNYXRoLnNpbihvdXRlclN0YXJ0QWRqdXN0ZWRBbmdsZSkgKiBvdXRlclJhZGl1cyArIHk7XG4gICAgICAgIGN0eC5saW5lVG8ob3V0ZXJTdGFydFgsIG91dGVyU3RhcnRZKTtcbiAgICAgICAgY29uc3Qgb3V0ZXJFbmRYID0gTWF0aC5jb3Mob3V0ZXJFbmRBZGp1c3RlZEFuZ2xlKSAqIG91dGVyUmFkaXVzICsgeDtcbiAgICAgICAgY29uc3Qgb3V0ZXJFbmRZID0gTWF0aC5zaW4ob3V0ZXJFbmRBZGp1c3RlZEFuZ2xlKSAqIG91dGVyUmFkaXVzICsgeTtcbiAgICAgICAgY3R4LmxpbmVUbyhvdXRlckVuZFgsIG91dGVyRW5kWSk7XG4gICAgfVxuICAgIGN0eC5jbG9zZVBhdGgoKTtcbn1cbmZ1bmN0aW9uIGRyYXdBcmMoY3R4LCBlbGVtZW50LCBvZmZzZXQsIHNwYWNpbmcsIGNpcmN1bGFyKSB7XG4gICAgY29uc3QgeyBmdWxsQ2lyY2xlcyAsIHN0YXJ0QW5nbGUgLCBjaXJjdW1mZXJlbmNlICB9ID0gZWxlbWVudDtcbiAgICBsZXQgZW5kQW5nbGUgPSBlbGVtZW50LmVuZEFuZ2xlO1xuICAgIGlmIChmdWxsQ2lyY2xlcykge1xuICAgICAgICBwYXRoQXJjKGN0eCwgZWxlbWVudCwgb2Zmc2V0LCBzcGFjaW5nLCBlbmRBbmdsZSwgY2lyY3VsYXIpO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZnVsbENpcmNsZXM7ICsraSl7XG4gICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOYU4oY2lyY3VtZmVyZW5jZSkpIHtcbiAgICAgICAgICAgIGVuZEFuZ2xlID0gc3RhcnRBbmdsZSArIChjaXJjdW1mZXJlbmNlICUgVEFVIHx8IFRBVSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGF0aEFyYyhjdHgsIGVsZW1lbnQsIG9mZnNldCwgc3BhY2luZywgZW5kQW5nbGUsIGNpcmN1bGFyKTtcbiAgICBjdHguZmlsbCgpO1xuICAgIHJldHVybiBlbmRBbmdsZTtcbn1cbmZ1bmN0aW9uIGRyYXdCb3JkZXIoY3R4LCBlbGVtZW50LCBvZmZzZXQsIHNwYWNpbmcsIGNpcmN1bGFyKSB7XG4gICAgY29uc3QgeyBmdWxsQ2lyY2xlcyAsIHN0YXJ0QW5nbGUgLCBjaXJjdW1mZXJlbmNlICwgb3B0aW9ucyAgfSA9IGVsZW1lbnQ7XG4gICAgY29uc3QgeyBib3JkZXJXaWR0aCAsIGJvcmRlckpvaW5TdHlsZSAgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgaW5uZXIgPSBvcHRpb25zLmJvcmRlckFsaWduID09PSAnaW5uZXInO1xuICAgIGlmICghYm9yZGVyV2lkdGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaW5uZXIpIHtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGJvcmRlcldpZHRoICogMjtcbiAgICAgICAgY3R4LmxpbmVKb2luID0gYm9yZGVySm9pblN0eWxlIHx8ICdyb3VuZCc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGJvcmRlcldpZHRoO1xuICAgICAgICBjdHgubGluZUpvaW4gPSBib3JkZXJKb2luU3R5bGUgfHwgJ2JldmVsJztcbiAgICB9XG4gICAgbGV0IGVuZEFuZ2xlID0gZWxlbWVudC5lbmRBbmdsZTtcbiAgICBpZiAoZnVsbENpcmNsZXMpIHtcbiAgICAgICAgcGF0aEFyYyhjdHgsIGVsZW1lbnQsIG9mZnNldCwgc3BhY2luZywgZW5kQW5nbGUsIGNpcmN1bGFyKTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGZ1bGxDaXJjbGVzOyArK2kpe1xuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOYU4oY2lyY3VtZmVyZW5jZSkpIHtcbiAgICAgICAgICAgIGVuZEFuZ2xlID0gc3RhcnRBbmdsZSArIChjaXJjdW1mZXJlbmNlICUgVEFVIHx8IFRBVSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlubmVyKSB7XG4gICAgICAgIGNsaXBBcmMoY3R4LCBlbGVtZW50LCBlbmRBbmdsZSk7XG4gICAgfVxuICAgIGlmICghZnVsbENpcmNsZXMpIHtcbiAgICAgICAgcGF0aEFyYyhjdHgsIGVsZW1lbnQsIG9mZnNldCwgc3BhY2luZywgZW5kQW5nbGUsIGNpcmN1bGFyKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cbn1cbmNsYXNzIEFyY0VsZW1lbnQgZXh0ZW5kcyBFbGVtZW50IHtcbiAgICBzdGF0aWMgaWQgPSAnYXJjJztcbiAgICBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgICAgIGJvcmRlckFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgYm9yZGVyQ29sb3I6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVySm9pblN0eWxlOiB1bmRlZmluZWQsXG4gICAgICAgIGJvcmRlclJhZGl1czogMCxcbiAgICAgICAgYm9yZGVyV2lkdGg6IDIsXG4gICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgc3BhY2luZzogMCxcbiAgICAgICAgYW5nbGU6IHVuZGVmaW5lZCxcbiAgICAgICAgY2lyY3VsYXI6IHRydWVcbiAgICB9O1xuICAgIHN0YXRpYyBkZWZhdWx0Um91dGVzID0ge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdiYWNrZ3JvdW5kQ29sb3InXG4gICAgfTtcbiAgICBjb25zdHJ1Y3RvcihjZmcpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2lyY3VtZmVyZW5jZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zdGFydEFuZ2xlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVuZEFuZ2xlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmlubmVyUmFkaXVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm91dGVyUmFkaXVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBpeGVsTWFyZ2luID0gMDtcbiAgICAgICAgdGhpcy5mdWxsQ2lyY2xlcyA9IDA7XG4gICAgICAgIGlmIChjZmcpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY2ZnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpblJhbmdlKGNoYXJ0WCwgY2hhcnRZLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgICAgIGNvbnN0IHBvaW50ID0gdGhpcy5nZXRQcm9wcyhbXG4gICAgICAgICAgICAneCcsXG4gICAgICAgICAgICAneSdcbiAgICAgICAgXSwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IHsgYW5nbGUgLCBkaXN0YW5jZSAgfSA9IGdldEFuZ2xlRnJvbVBvaW50KHBvaW50LCB7XG4gICAgICAgICAgICB4OiBjaGFydFgsXG4gICAgICAgICAgICB5OiBjaGFydFlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgc3RhcnRBbmdsZSAsIGVuZEFuZ2xlICwgaW5uZXJSYWRpdXMgLCBvdXRlclJhZGl1cyAsIGNpcmN1bWZlcmVuY2UgIH0gPSB0aGlzLmdldFByb3BzKFtcbiAgICAgICAgICAgICdzdGFydEFuZ2xlJyxcbiAgICAgICAgICAgICdlbmRBbmdsZScsXG4gICAgICAgICAgICAnaW5uZXJSYWRpdXMnLFxuICAgICAgICAgICAgJ291dGVyUmFkaXVzJyxcbiAgICAgICAgICAgICdjaXJjdW1mZXJlbmNlJ1xuICAgICAgICBdLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgckFkanVzdCA9IHRoaXMub3B0aW9ucy5zcGFjaW5nIC8gMjtcbiAgICAgICAgY29uc3QgX2NpcmN1bWZlcmVuY2UgPSB2YWx1ZU9yRGVmYXVsdChjaXJjdW1mZXJlbmNlLCBlbmRBbmdsZSAtIHN0YXJ0QW5nbGUpO1xuICAgICAgICBjb25zdCBiZXR3ZWVuQW5nbGVzID0gX2NpcmN1bWZlcmVuY2UgPj0gVEFVIHx8IF9hbmdsZUJldHdlZW4oYW5nbGUsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlKTtcbiAgICAgICAgY29uc3Qgd2l0aGluUmFkaXVzID0gX2lzQmV0d2VlbihkaXN0YW5jZSwgaW5uZXJSYWRpdXMgKyByQWRqdXN0LCBvdXRlclJhZGl1cyArIHJBZGp1c3QpO1xuICAgICAgICByZXR1cm4gYmV0d2VlbkFuZ2xlcyAmJiB3aXRoaW5SYWRpdXM7XG4gICAgfVxuICAgIGdldENlbnRlclBvaW50KHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgeyB4ICwgeSAsIHN0YXJ0QW5nbGUgLCBlbmRBbmdsZSAsIGlubmVyUmFkaXVzICwgb3V0ZXJSYWRpdXMgIH0gPSB0aGlzLmdldFByb3BzKFtcbiAgICAgICAgICAgICd4JyxcbiAgICAgICAgICAgICd5JyxcbiAgICAgICAgICAgICdzdGFydEFuZ2xlJyxcbiAgICAgICAgICAgICdlbmRBbmdsZScsXG4gICAgICAgICAgICAnaW5uZXJSYWRpdXMnLFxuICAgICAgICAgICAgJ291dGVyUmFkaXVzJyxcbiAgICAgICAgICAgICdjaXJjdW1mZXJlbmNlJ1xuICAgICAgICBdLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgeyBvZmZzZXQgLCBzcGFjaW5nICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBoYWxmQW5nbGUgPSAoc3RhcnRBbmdsZSArIGVuZEFuZ2xlKSAvIDI7XG4gICAgICAgIGNvbnN0IGhhbGZSYWRpdXMgPSAoaW5uZXJSYWRpdXMgKyBvdXRlclJhZGl1cyArIHNwYWNpbmcgKyBvZmZzZXQpIC8gMjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHggKyBNYXRoLmNvcyhoYWxmQW5nbGUpICogaGFsZlJhZGl1cyxcbiAgICAgICAgICAgIHk6IHkgKyBNYXRoLnNpbihoYWxmQW5nbGUpICogaGFsZlJhZGl1c1xuICAgICAgICB9O1xuICAgIH1cbiAgICB0b29sdGlwUG9zaXRpb24odXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDZW50ZXJQb2ludCh1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICB9XG4gICAgZHJhdyhjdHgpIHtcbiAgICAgICAgY29uc3QgeyBvcHRpb25zICwgY2lyY3VtZmVyZW5jZSAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IChvcHRpb25zLm9mZnNldCB8fCAwKSAvIDQ7XG4gICAgICAgIGNvbnN0IHNwYWNpbmcgPSAob3B0aW9ucy5zcGFjaW5nIHx8IDApIC8gMjtcbiAgICAgICAgY29uc3QgY2lyY3VsYXIgPSBvcHRpb25zLmNpcmN1bGFyO1xuICAgICAgICB0aGlzLnBpeGVsTWFyZ2luID0gb3B0aW9ucy5ib3JkZXJBbGlnbiA9PT0gJ2lubmVyJyA/IDAuMzMgOiAwO1xuICAgICAgICB0aGlzLmZ1bGxDaXJjbGVzID0gY2lyY3VtZmVyZW5jZSA+IFRBVSA/IE1hdGguZmxvb3IoY2lyY3VtZmVyZW5jZSAvIFRBVSkgOiAwO1xuICAgICAgICBpZiAoY2lyY3VtZmVyZW5jZSA9PT0gMCB8fCB0aGlzLmlubmVyUmFkaXVzIDwgMCB8fCB0aGlzLm91dGVyUmFkaXVzIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGNvbnN0IGhhbGZBbmdsZSA9ICh0aGlzLnN0YXJ0QW5nbGUgKyB0aGlzLmVuZEFuZ2xlKSAvIDI7XG4gICAgICAgIGN0eC50cmFuc2xhdGUoTWF0aC5jb3MoaGFsZkFuZ2xlKSAqIG9mZnNldCwgTWF0aC5zaW4oaGFsZkFuZ2xlKSAqIG9mZnNldCk7XG4gICAgICAgIGNvbnN0IGZpeCA9IDEgLSBNYXRoLnNpbihNYXRoLm1pbihQSSwgY2lyY3VtZmVyZW5jZSB8fCAwKSk7XG4gICAgICAgIGNvbnN0IHJhZGl1c09mZnNldCA9IG9mZnNldCAqIGZpeDtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBvcHRpb25zLmJvcmRlckNvbG9yO1xuICAgICAgICBkcmF3QXJjKGN0eCwgdGhpcywgcmFkaXVzT2Zmc2V0LCBzcGFjaW5nLCBjaXJjdWxhcik7XG4gICAgICAgIGRyYXdCb3JkZXIoY3R4LCB0aGlzLCByYWRpdXNPZmZzZXQsIHNwYWNpbmcsIGNpcmN1bGFyKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldFN0eWxlKGN0eCwgb3B0aW9ucywgc3R5bGUgPSBvcHRpb25zKSB7XG4gICAgY3R4LmxpbmVDYXAgPSB2YWx1ZU9yRGVmYXVsdChzdHlsZS5ib3JkZXJDYXBTdHlsZSwgb3B0aW9ucy5ib3JkZXJDYXBTdHlsZSk7XG4gICAgY3R4LnNldExpbmVEYXNoKHZhbHVlT3JEZWZhdWx0KHN0eWxlLmJvcmRlckRhc2gsIG9wdGlvbnMuYm9yZGVyRGFzaCkpO1xuICAgIGN0eC5saW5lRGFzaE9mZnNldCA9IHZhbHVlT3JEZWZhdWx0KHN0eWxlLmJvcmRlckRhc2hPZmZzZXQsIG9wdGlvbnMuYm9yZGVyRGFzaE9mZnNldCk7XG4gICAgY3R4LmxpbmVKb2luID0gdmFsdWVPckRlZmF1bHQoc3R5bGUuYm9yZGVySm9pblN0eWxlLCBvcHRpb25zLmJvcmRlckpvaW5TdHlsZSk7XG4gICAgY3R4LmxpbmVXaWR0aCA9IHZhbHVlT3JEZWZhdWx0KHN0eWxlLmJvcmRlcldpZHRoLCBvcHRpb25zLmJvcmRlcldpZHRoKTtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSB2YWx1ZU9yRGVmYXVsdChzdHlsZS5ib3JkZXJDb2xvciwgb3B0aW9ucy5ib3JkZXJDb2xvcik7XG59XG5mdW5jdGlvbiBsaW5lVG8oY3R4LCBwcmV2aW91cywgdGFyZ2V0KSB7XG4gICAgY3R4LmxpbmVUbyh0YXJnZXQueCwgdGFyZ2V0LnkpO1xufVxuZnVuY3Rpb24gZ2V0TGluZU1ldGhvZChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuc3RlcHBlZCkge1xuICAgICAgICByZXR1cm4gX3N0ZXBwZWRMaW5lVG87XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnRlbnNpb24gfHwgb3B0aW9ucy5jdWJpY0ludGVycG9sYXRpb25Nb2RlID09PSAnbW9ub3RvbmUnKSB7XG4gICAgICAgIHJldHVybiBfYmV6aWVyQ3VydmVUbztcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVUbztcbn1cbmZ1bmN0aW9uIHBhdGhWYXJzKHBvaW50cywgc2VnbWVudCwgcGFyYW1zID0ge30pIHtcbiAgICBjb25zdCBjb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gICAgY29uc3QgeyBzdGFydDogcGFyYW1zU3RhcnQgPSAwICwgZW5kOiBwYXJhbXNFbmQgPSBjb3VudCAtIDEgIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgeyBzdGFydDogc2VnbWVudFN0YXJ0ICwgZW5kOiBzZWdtZW50RW5kICB9ID0gc2VnbWVudDtcbiAgICBjb25zdCBzdGFydCA9IE1hdGgubWF4KHBhcmFtc1N0YXJ0LCBzZWdtZW50U3RhcnQpO1xuICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKHBhcmFtc0VuZCwgc2VnbWVudEVuZCk7XG4gICAgY29uc3Qgb3V0c2lkZSA9IHBhcmFtc1N0YXJ0IDwgc2VnbWVudFN0YXJ0ICYmIHBhcmFtc0VuZCA8IHNlZ21lbnRTdGFydCB8fCBwYXJhbXNTdGFydCA+IHNlZ21lbnRFbmQgJiYgcGFyYW1zRW5kID4gc2VnbWVudEVuZDtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb3VudCxcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIGxvb3A6IHNlZ21lbnQubG9vcCxcbiAgICAgICAgaWxlbjogZW5kIDwgc3RhcnQgJiYgIW91dHNpZGUgPyBjb3VudCArIGVuZCAtIHN0YXJ0IDogZW5kIC0gc3RhcnRcbiAgICB9O1xufVxuIGZ1bmN0aW9uIHBhdGhTZWdtZW50KGN0eCwgbGluZSwgc2VnbWVudCwgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBwb2ludHMgLCBvcHRpb25zICB9ID0gbGluZTtcbiAgICBjb25zdCB7IGNvdW50ICwgc3RhcnQgLCBsb29wICwgaWxlbiAgfSA9IHBhdGhWYXJzKHBvaW50cywgc2VnbWVudCwgcGFyYW1zKTtcbiAgICBjb25zdCBsaW5lTWV0aG9kID0gZ2V0TGluZU1ldGhvZChvcHRpb25zKTtcbiAgICBsZXQgeyBtb3ZlID10cnVlICwgcmV2ZXJzZSAgfSA9IHBhcmFtcyB8fCB7fTtcbiAgICBsZXQgaSwgcG9pbnQsIHByZXY7XG4gICAgZm9yKGkgPSAwOyBpIDw9IGlsZW47ICsraSl7XG4gICAgICAgIHBvaW50ID0gcG9pbnRzWyhzdGFydCArIChyZXZlcnNlID8gaWxlbiAtIGkgOiBpKSkgJSBjb3VudF07XG4gICAgICAgIGlmIChwb2ludC5za2lwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIGlmIChtb3ZlKSB7XG4gICAgICAgICAgICBjdHgubW92ZVRvKHBvaW50LngsIHBvaW50LnkpO1xuICAgICAgICAgICAgbW92ZSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGluZU1ldGhvZChjdHgsIHByZXYsIHBvaW50LCByZXZlcnNlLCBvcHRpb25zLnN0ZXBwZWQpO1xuICAgICAgICB9XG4gICAgICAgIHByZXYgPSBwb2ludDtcbiAgICB9XG4gICAgaWYgKGxvb3ApIHtcbiAgICAgICAgcG9pbnQgPSBwb2ludHNbKHN0YXJ0ICsgKHJldmVyc2UgPyBpbGVuIDogMCkpICUgY291bnRdO1xuICAgICAgICBsaW5lTWV0aG9kKGN0eCwgcHJldiwgcG9pbnQsIHJldmVyc2UsIG9wdGlvbnMuc3RlcHBlZCk7XG4gICAgfVxuICAgIHJldHVybiAhIWxvb3A7XG59XG4gZnVuY3Rpb24gZmFzdFBhdGhTZWdtZW50KGN0eCwgbGluZSwgc2VnbWVudCwgcGFyYW1zKSB7XG4gICAgY29uc3QgcG9pbnRzID0gbGluZS5wb2ludHM7XG4gICAgY29uc3QgeyBjb3VudCAsIHN0YXJ0ICwgaWxlbiAgfSA9IHBhdGhWYXJzKHBvaW50cywgc2VnbWVudCwgcGFyYW1zKTtcbiAgICBjb25zdCB7IG1vdmUgPXRydWUgLCByZXZlcnNlICB9ID0gcGFyYW1zIHx8IHt9O1xuICAgIGxldCBhdmdYID0gMDtcbiAgICBsZXQgY291bnRYID0gMDtcbiAgICBsZXQgaSwgcG9pbnQsIHByZXZYLCBtaW5ZLCBtYXhZLCBsYXN0WTtcbiAgICBjb25zdCBwb2ludEluZGV4ID0gKGluZGV4KT0+KHN0YXJ0ICsgKHJldmVyc2UgPyBpbGVuIC0gaW5kZXggOiBpbmRleCkpICUgY291bnQ7XG4gICAgY29uc3QgZHJhd1ggPSAoKT0+e1xuICAgICAgICBpZiAobWluWSAhPT0gbWF4WSkge1xuICAgICAgICAgICAgY3R4LmxpbmVUbyhhdmdYLCBtYXhZKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oYXZnWCwgbWluWSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKGF2Z1gsIGxhc3RZKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKG1vdmUpIHtcbiAgICAgICAgcG9pbnQgPSBwb2ludHNbcG9pbnRJbmRleCgwKV07XG4gICAgICAgIGN0eC5tb3ZlVG8ocG9pbnQueCwgcG9pbnQueSk7XG4gICAgfVxuICAgIGZvcihpID0gMDsgaSA8PSBpbGVuOyArK2kpe1xuICAgICAgICBwb2ludCA9IHBvaW50c1twb2ludEluZGV4KGkpXTtcbiAgICAgICAgaWYgKHBvaW50LnNraXApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHggPSBwb2ludC54O1xuICAgICAgICBjb25zdCB5ID0gcG9pbnQueTtcbiAgICAgICAgY29uc3QgdHJ1bmNYID0geCB8IDA7XG4gICAgICAgIGlmICh0cnVuY1ggPT09IHByZXZYKSB7XG4gICAgICAgICAgICBpZiAoeSA8IG1pblkpIHtcbiAgICAgICAgICAgICAgICBtaW5ZID0geTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeSA+IG1heFkpIHtcbiAgICAgICAgICAgICAgICBtYXhZID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF2Z1ggPSAoY291bnRYICogYXZnWCArIHgpIC8gKytjb3VudFg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkcmF3WCgpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4LCB5KTtcbiAgICAgICAgICAgIHByZXZYID0gdHJ1bmNYO1xuICAgICAgICAgICAgY291bnRYID0gMDtcbiAgICAgICAgICAgIG1pblkgPSBtYXhZID0geTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0WSA9IHk7XG4gICAgfVxuICAgIGRyYXdYKCk7XG59XG4gZnVuY3Rpb24gX2dldFNlZ21lbnRNZXRob2QobGluZSkge1xuICAgIGNvbnN0IG9wdHMgPSBsaW5lLm9wdGlvbnM7XG4gICAgY29uc3QgYm9yZGVyRGFzaCA9IG9wdHMuYm9yZGVyRGFzaCAmJiBvcHRzLmJvcmRlckRhc2gubGVuZ3RoO1xuICAgIGNvbnN0IHVzZUZhc3RQYXRoID0gIWxpbmUuX2RlY2ltYXRlZCAmJiAhbGluZS5fbG9vcCAmJiAhb3B0cy50ZW5zaW9uICYmIG9wdHMuY3ViaWNJbnRlcnBvbGF0aW9uTW9kZSAhPT0gJ21vbm90b25lJyAmJiAhb3B0cy5zdGVwcGVkICYmICFib3JkZXJEYXNoO1xuICAgIHJldHVybiB1c2VGYXN0UGF0aCA/IGZhc3RQYXRoU2VnbWVudCA6IHBhdGhTZWdtZW50O1xufVxuIGZ1bmN0aW9uIF9nZXRJbnRlcnBvbGF0aW9uTWV0aG9kKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5zdGVwcGVkKSB7XG4gICAgICAgIHJldHVybiBfc3RlcHBlZEludGVycG9sYXRpb247XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnRlbnNpb24gfHwgb3B0aW9ucy5jdWJpY0ludGVycG9sYXRpb25Nb2RlID09PSAnbW9ub3RvbmUnKSB7XG4gICAgICAgIHJldHVybiBfYmV6aWVySW50ZXJwb2xhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIF9wb2ludEluTGluZTtcbn1cbmZ1bmN0aW9uIHN0cm9rZVBhdGhXaXRoQ2FjaGUoY3R4LCBsaW5lLCBzdGFydCwgY291bnQpIHtcbiAgICBsZXQgcGF0aCA9IGxpbmUuX3BhdGg7XG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICAgIHBhdGggPSBsaW5lLl9wYXRoID0gbmV3IFBhdGgyRCgpO1xuICAgICAgICBpZiAobGluZS5wYXRoKHBhdGgsIHN0YXJ0LCBjb3VudCkpIHtcbiAgICAgICAgICAgIHBhdGguY2xvc2VQYXRoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0U3R5bGUoY3R4LCBsaW5lLm9wdGlvbnMpO1xuICAgIGN0eC5zdHJva2UocGF0aCk7XG59XG5mdW5jdGlvbiBzdHJva2VQYXRoRGlyZWN0KGN0eCwgbGluZSwgc3RhcnQsIGNvdW50KSB7XG4gICAgY29uc3QgeyBzZWdtZW50cyAsIG9wdGlvbnMgIH0gPSBsaW5lO1xuICAgIGNvbnN0IHNlZ21lbnRNZXRob2QgPSBfZ2V0U2VnbWVudE1ldGhvZChsaW5lKTtcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpe1xuICAgICAgICBzZXRTdHlsZShjdHgsIG9wdGlvbnMsIHNlZ21lbnQuc3R5bGUpO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGlmIChzZWdtZW50TWV0aG9kKGN0eCwgbGluZSwgc2VnbWVudCwge1xuICAgICAgICAgICAgc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHN0YXJ0ICsgY291bnQgLSAxXG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cbn1cbmNvbnN0IHVzZVBhdGgyRCA9IHR5cGVvZiBQYXRoMkQgPT09ICdmdW5jdGlvbic7XG5mdW5jdGlvbiBkcmF3KGN0eCwgbGluZSwgc3RhcnQsIGNvdW50KSB7XG4gICAgaWYgKHVzZVBhdGgyRCAmJiAhbGluZS5vcHRpb25zLnNlZ21lbnQpIHtcbiAgICAgICAgc3Ryb2tlUGF0aFdpdGhDYWNoZShjdHgsIGxpbmUsIHN0YXJ0LCBjb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3Ryb2tlUGF0aERpcmVjdChjdHgsIGxpbmUsIHN0YXJ0LCBjb3VudCk7XG4gICAgfVxufVxuY2xhc3MgTGluZUVsZW1lbnQgZXh0ZW5kcyBFbGVtZW50IHtcbiAgICBzdGF0aWMgaWQgPSAnbGluZSc7XG4gc3RhdGljIGRlZmF1bHRzID0ge1xuICAgICAgICBib3JkZXJDYXBTdHlsZTogJ2J1dHQnLFxuICAgICAgICBib3JkZXJEYXNoOiBbXSxcbiAgICAgICAgYm9yZGVyRGFzaE9mZnNldDogMCxcbiAgICAgICAgYm9yZGVySm9pblN0eWxlOiAnbWl0ZXInLFxuICAgICAgICBib3JkZXJXaWR0aDogMyxcbiAgICAgICAgY2FwQmV6aWVyUG9pbnRzOiB0cnVlLFxuICAgICAgICBjdWJpY0ludGVycG9sYXRpb25Nb2RlOiAnZGVmYXVsdCcsXG4gICAgICAgIGZpbGw6IGZhbHNlLFxuICAgICAgICBzcGFuR2FwczogZmFsc2UsXG4gICAgICAgIHN0ZXBwZWQ6IGZhbHNlLFxuICAgICAgICB0ZW5zaW9uOiAwXG4gICAgfTtcbiBzdGF0aWMgZGVmYXVsdFJvdXRlcyA9IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnYmFja2dyb3VuZENvbG9yJyxcbiAgICAgICAgYm9yZGVyQ29sb3I6ICdib3JkZXJDb2xvcidcbiAgICB9O1xuICAgIHN0YXRpYyBkZXNjcmlwdG9ycyA9IHtcbiAgICAgICAgX3NjcmlwdGFibGU6IHRydWUsXG4gICAgICAgIF9pbmRleGFibGU6IChuYW1lKT0+bmFtZSAhPT0gJ2JvcmRlckRhc2gnICYmIG5hbWUgIT09ICdmaWxsJ1xuICAgIH07XG4gICAgY29uc3RydWN0b3IoY2ZnKXtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5hbmltYXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fY2hhcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2xvb3AgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2Z1bGxMb29wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9wYXRoID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9wb2ludHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3NlZ21lbnRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9kZWNpbWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcG9pbnRzVXBkYXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kYXRhc2V0SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChjZmcpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY2ZnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVDb250cm9sUG9pbnRzKGNoYXJ0QXJlYSwgaW5kZXhBeGlzKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGlmICgob3B0aW9ucy50ZW5zaW9uIHx8IG9wdGlvbnMuY3ViaWNJbnRlcnBvbGF0aW9uTW9kZSA9PT0gJ21vbm90b25lJykgJiYgIW9wdGlvbnMuc3RlcHBlZCAmJiAhdGhpcy5fcG9pbnRzVXBkYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbG9vcCA9IG9wdGlvbnMuc3BhbkdhcHMgPyB0aGlzLl9sb29wIDogdGhpcy5fZnVsbExvb3A7XG4gICAgICAgICAgICBfdXBkYXRlQmV6aWVyQ29udHJvbFBvaW50cyh0aGlzLl9wb2ludHMsIG9wdGlvbnMsIGNoYXJ0QXJlYSwgbG9vcCwgaW5kZXhBeGlzKTtcbiAgICAgICAgICAgIHRoaXMuX3BvaW50c1VwZGF0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldCBwb2ludHMocG9pbnRzKSB7XG4gICAgICAgIHRoaXMuX3BvaW50cyA9IHBvaW50cztcbiAgICAgICAgZGVsZXRlIHRoaXMuX3NlZ21lbnRzO1xuICAgICAgICBkZWxldGUgdGhpcy5fcGF0aDtcbiAgICAgICAgdGhpcy5fcG9pbnRzVXBkYXRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgcG9pbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9pbnRzO1xuICAgIH1cbiAgICBnZXQgc2VnbWVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWdtZW50cyB8fCAodGhpcy5fc2VnbWVudHMgPSBfY29tcHV0ZVNlZ21lbnRzKHRoaXMsIHRoaXMub3B0aW9ucy5zZWdtZW50KSk7XG4gICAgfVxuIGZpcnN0KCkge1xuICAgICAgICBjb25zdCBzZWdtZW50cyA9IHRoaXMuc2VnbWVudHM7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMucG9pbnRzO1xuICAgICAgICByZXR1cm4gc2VnbWVudHMubGVuZ3RoICYmIHBvaW50c1tzZWdtZW50c1swXS5zdGFydF07XG4gICAgfVxuIGxhc3QoKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gdGhpcy5zZWdtZW50cztcbiAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5wb2ludHM7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gc2VnbWVudHMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gY291bnQgJiYgcG9pbnRzW3NlZ21lbnRzW2NvdW50IC0gMV0uZW5kXTtcbiAgICB9XG4gaW50ZXJwb2xhdGUocG9pbnQsIHByb3BlcnR5KSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcG9pbnRbcHJvcGVydHldO1xuICAgICAgICBjb25zdCBwb2ludHMgPSB0aGlzLnBvaW50cztcbiAgICAgICAgY29uc3Qgc2VnbWVudHMgPSBfYm91bmRTZWdtZW50cyh0aGlzLCB7XG4gICAgICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgICAgIHN0YXJ0OiB2YWx1ZSxcbiAgICAgICAgICAgIGVuZDogdmFsdWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghc2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGNvbnN0IF9pbnRlcnBvbGF0ZSA9IF9nZXRJbnRlcnBvbGF0aW9uTWV0aG9kKG9wdGlvbnMpO1xuICAgICAgICBsZXQgaSwgaWxlbjtcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhcnQgLCBlbmQgIH0gPSBzZWdtZW50c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHAxID0gcG9pbnRzW3N0YXJ0XTtcbiAgICAgICAgICAgIGNvbnN0IHAyID0gcG9pbnRzW2VuZF07XG4gICAgICAgICAgICBpZiAocDEgPT09IHAyKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocDEpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdCA9IE1hdGguYWJzKCh2YWx1ZSAtIHAxW3Byb3BlcnR5XSkgLyAocDJbcHJvcGVydHldIC0gcDFbcHJvcGVydHldKSk7XG4gICAgICAgICAgICBjb25zdCBpbnRlcnBvbGF0ZWQgPSBfaW50ZXJwb2xhdGUocDEsIHAyLCB0LCBvcHRpb25zLnN0ZXBwZWQpO1xuICAgICAgICAgICAgaW50ZXJwb2xhdGVkW3Byb3BlcnR5XSA9IHBvaW50W3Byb3BlcnR5XTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGludGVycG9sYXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPT09IDEgPyByZXN1bHRbMF0gOiByZXN1bHQ7XG4gICAgfVxuIHBhdGhTZWdtZW50KGN0eCwgc2VnbWVudCwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRNZXRob2QgPSBfZ2V0U2VnbWVudE1ldGhvZCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHNlZ21lbnRNZXRob2QoY3R4LCB0aGlzLCBzZWdtZW50LCBwYXJhbXMpO1xuICAgIH1cbiBwYXRoKGN0eCwgc3RhcnQsIGNvdW50KSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gdGhpcy5zZWdtZW50cztcbiAgICAgICAgY29uc3Qgc2VnbWVudE1ldGhvZCA9IF9nZXRTZWdtZW50TWV0aG9kKHRoaXMpO1xuICAgICAgICBsZXQgbG9vcCA9IHRoaXMuX2xvb3A7XG4gICAgICAgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgICAgICAgY291bnQgPSBjb3VudCB8fCB0aGlzLnBvaW50cy5sZW5ndGggLSBzdGFydDtcbiAgICAgICAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKXtcbiAgICAgICAgICAgIGxvb3AgJj0gc2VnbWVudE1ldGhvZChjdHgsIHRoaXMsIHNlZ21lbnQsIHtcbiAgICAgICAgICAgICAgICBzdGFydCxcbiAgICAgICAgICAgICAgICBlbmQ6IHN0YXJ0ICsgY291bnQgLSAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gISFsb29wO1xuICAgIH1cbiBkcmF3KGN0eCwgY2hhcnRBcmVhLCBzdGFydCwgY291bnQpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyB8fCB7fTtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5wb2ludHMgfHwgW107XG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoICYmIG9wdGlvbnMuYm9yZGVyV2lkdGgpIHtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBkcmF3KGN0eCwgdGhpcywgc3RhcnQsIGNvdW50KTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYW5pbWF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BvaW50c1VwZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX3BhdGggPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluUmFuZ2UkMShlbCwgcG9zLCBheGlzLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG4gICAgY29uc3QgeyBbYXhpc106IHZhbHVlICB9ID0gZWwuZ2V0UHJvcHMoW1xuICAgICAgICBheGlzXG4gICAgXSwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgcmV0dXJuIE1hdGguYWJzKHBvcyAtIHZhbHVlKSA8IG9wdGlvbnMucmFkaXVzICsgb3B0aW9ucy5oaXRSYWRpdXM7XG59XG5jbGFzcyBQb2ludEVsZW1lbnQgZXh0ZW5kcyBFbGVtZW50IHtcbiAgICBzdGF0aWMgaWQgPSAncG9pbnQnO1xuICAgIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi8gc3RhdGljIGRlZmF1bHRzID0ge1xuICAgICAgICBib3JkZXJXaWR0aDogMSxcbiAgICAgICAgaGl0UmFkaXVzOiAxLFxuICAgICAgICBob3ZlckJvcmRlcldpZHRoOiAxLFxuICAgICAgICBob3ZlclJhZGl1czogNCxcbiAgICAgICAgcG9pbnRTdHlsZTogJ2NpcmNsZScsXG4gICAgICAgIHJhZGl1czogMyxcbiAgICAgICAgcm90YXRpb246IDBcbiAgICB9O1xuICAgIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi8gc3RhdGljIGRlZmF1bHRSb3V0ZXMgPSB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIGJvcmRlckNvbG9yOiAnYm9yZGVyQ29sb3InXG4gICAgfTtcbiAgICBjb25zdHJ1Y3RvcihjZmcpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucGFyc2VkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNraXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc3RvcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGNmZykge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjZmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluUmFuZ2UobW91c2VYLCBtb3VzZVksIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgeyB4ICwgeSAgfSA9IHRoaXMuZ2V0UHJvcHMoW1xuICAgICAgICAgICAgJ3gnLFxuICAgICAgICAgICAgJ3knXG4gICAgICAgIF0sIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3cobW91c2VYIC0geCwgMikgKyBNYXRoLnBvdyhtb3VzZVkgLSB5LCAyKSA8IE1hdGgucG93KG9wdGlvbnMuaGl0UmFkaXVzICsgb3B0aW9ucy5yYWRpdXMsIDIpO1xuICAgIH1cbiAgICBpblhSYW5nZShtb3VzZVgsIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGluUmFuZ2UkMSh0aGlzLCBtb3VzZVgsICd4JywgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgfVxuICAgIGluWVJhbmdlKG1vdXNlWSwgdXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICByZXR1cm4gaW5SYW5nZSQxKHRoaXMsIG1vdXNlWSwgJ3knLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICB9XG4gICAgZ2V0Q2VudGVyUG9pbnQodXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICBjb25zdCB7IHggLCB5ICB9ID0gdGhpcy5nZXRQcm9wcyhbXG4gICAgICAgICAgICAneCcsXG4gICAgICAgICAgICAneSdcbiAgICAgICAgXSwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzaXplKG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgdGhpcy5vcHRpb25zIHx8IHt9O1xuICAgICAgICBsZXQgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXMgfHwgMDtcbiAgICAgICAgcmFkaXVzID0gTWF0aC5tYXgocmFkaXVzLCByYWRpdXMgJiYgb3B0aW9ucy5ob3ZlclJhZGl1cyB8fCAwKTtcbiAgICAgICAgY29uc3QgYm9yZGVyV2lkdGggPSByYWRpdXMgJiYgb3B0aW9ucy5ib3JkZXJXaWR0aCB8fCAwO1xuICAgICAgICByZXR1cm4gKHJhZGl1cyArIGJvcmRlcldpZHRoKSAqIDI7XG4gICAgfVxuICAgIGRyYXcoY3R4LCBhcmVhKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGlmICh0aGlzLnNraXAgfHwgb3B0aW9ucy5yYWRpdXMgPCAwLjEgfHwgIV9pc1BvaW50SW5BcmVhKHRoaXMsIGFyZWEsIHRoaXMuc2l6ZShvcHRpb25zKSAvIDIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gb3B0aW9ucy5ib3JkZXJDb2xvcjtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IG9wdGlvbnMuYm9yZGVyV2lkdGg7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBvcHRpb25zLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgZHJhd1BvaW50KGN0eCwgb3B0aW9ucywgdGhpcy54LCB0aGlzLnkpO1xuICAgIH1cbiAgICBnZXRSYW5nZSgpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBGYWxsYmFja3Mgc2hvdWxkIG5ldmVyIGJlIGhpdCBpbiBwcmFjdGljZVxuICAgICAgICByZXR1cm4gb3B0aW9ucy5yYWRpdXMgKyBvcHRpb25zLmhpdFJhZGl1cztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEJhckJvdW5kcyhiYXIsIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICBjb25zdCB7IHggLCB5ICwgYmFzZSAsIHdpZHRoICwgaGVpZ2h0ICB9ID0gIGJhci5nZXRQcm9wcyhbXG4gICAgICAgICd4JyxcbiAgICAgICAgJ3knLFxuICAgICAgICAnYmFzZScsXG4gICAgICAgICd3aWR0aCcsXG4gICAgICAgICdoZWlnaHQnXG4gICAgXSwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgbGV0IGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSwgaGFsZjtcbiAgICBpZiAoYmFyLmhvcml6b250YWwpIHtcbiAgICAgICAgaGFsZiA9IGhlaWdodCAvIDI7XG4gICAgICAgIGxlZnQgPSBNYXRoLm1pbih4LCBiYXNlKTtcbiAgICAgICAgcmlnaHQgPSBNYXRoLm1heCh4LCBiYXNlKTtcbiAgICAgICAgdG9wID0geSAtIGhhbGY7XG4gICAgICAgIGJvdHRvbSA9IHkgKyBoYWxmO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGhhbGYgPSB3aWR0aCAvIDI7XG4gICAgICAgIGxlZnQgPSB4IC0gaGFsZjtcbiAgICAgICAgcmlnaHQgPSB4ICsgaGFsZjtcbiAgICAgICAgdG9wID0gTWF0aC5taW4oeSwgYmFzZSk7XG4gICAgICAgIGJvdHRvbSA9IE1hdGgubWF4KHksIGJhc2UpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBsZWZ0LFxuICAgICAgICB0b3AsXG4gICAgICAgIHJpZ2h0LFxuICAgICAgICBib3R0b21cbiAgICB9O1xufVxuZnVuY3Rpb24gc2tpcE9yTGltaXQoc2tpcCwgdmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIHNraXAgPyAwIDogX2xpbWl0VmFsdWUodmFsdWUsIG1pbiwgbWF4KTtcbn1cbmZ1bmN0aW9uIHBhcnNlQm9yZGVyV2lkdGgoYmFyLCBtYXhXLCBtYXhIKSB7XG4gICAgY29uc3QgdmFsdWUgPSBiYXIub3B0aW9ucy5ib3JkZXJXaWR0aDtcbiAgICBjb25zdCBza2lwID0gYmFyLmJvcmRlclNraXBwZWQ7XG4gICAgY29uc3QgbyA9IHRvVFJCTCh2YWx1ZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdDogc2tpcE9yTGltaXQoc2tpcC50b3AsIG8udG9wLCAwLCBtYXhIKSxcbiAgICAgICAgcjogc2tpcE9yTGltaXQoc2tpcC5yaWdodCwgby5yaWdodCwgMCwgbWF4VyksXG4gICAgICAgIGI6IHNraXBPckxpbWl0KHNraXAuYm90dG9tLCBvLmJvdHRvbSwgMCwgbWF4SCksXG4gICAgICAgIGw6IHNraXBPckxpbWl0KHNraXAubGVmdCwgby5sZWZ0LCAwLCBtYXhXKVxuICAgIH07XG59XG5mdW5jdGlvbiBwYXJzZUJvcmRlclJhZGl1cyhiYXIsIG1heFcsIG1heEgpIHtcbiAgICBjb25zdCB7IGVuYWJsZUJvcmRlclJhZGl1cyAgfSA9IGJhci5nZXRQcm9wcyhbXG4gICAgICAgICdlbmFibGVCb3JkZXJSYWRpdXMnXG4gICAgXSk7XG4gICAgY29uc3QgdmFsdWUgPSBiYXIub3B0aW9ucy5ib3JkZXJSYWRpdXM7XG4gICAgY29uc3QgbyA9IHRvVFJCTENvcm5lcnModmFsdWUpO1xuICAgIGNvbnN0IG1heFIgPSBNYXRoLm1pbihtYXhXLCBtYXhIKTtcbiAgICBjb25zdCBza2lwID0gYmFyLmJvcmRlclNraXBwZWQ7XG4gICAgY29uc3QgZW5hYmxlQm9yZGVyID0gZW5hYmxlQm9yZGVyUmFkaXVzIHx8IGlzT2JqZWN0KHZhbHVlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b3BMZWZ0OiBza2lwT3JMaW1pdCghZW5hYmxlQm9yZGVyIHx8IHNraXAudG9wIHx8IHNraXAubGVmdCwgby50b3BMZWZ0LCAwLCBtYXhSKSxcbiAgICAgICAgdG9wUmlnaHQ6IHNraXBPckxpbWl0KCFlbmFibGVCb3JkZXIgfHwgc2tpcC50b3AgfHwgc2tpcC5yaWdodCwgby50b3BSaWdodCwgMCwgbWF4UiksXG4gICAgICAgIGJvdHRvbUxlZnQ6IHNraXBPckxpbWl0KCFlbmFibGVCb3JkZXIgfHwgc2tpcC5ib3R0b20gfHwgc2tpcC5sZWZ0LCBvLmJvdHRvbUxlZnQsIDAsIG1heFIpLFxuICAgICAgICBib3R0b21SaWdodDogc2tpcE9yTGltaXQoIWVuYWJsZUJvcmRlciB8fCBza2lwLmJvdHRvbSB8fCBza2lwLnJpZ2h0LCBvLmJvdHRvbVJpZ2h0LCAwLCBtYXhSKVxuICAgIH07XG59XG5mdW5jdGlvbiBib3VuZGluZ1JlY3RzKGJhcikge1xuICAgIGNvbnN0IGJvdW5kcyA9IGdldEJhckJvdW5kcyhiYXIpO1xuICAgIGNvbnN0IHdpZHRoID0gYm91bmRzLnJpZ2h0IC0gYm91bmRzLmxlZnQ7XG4gICAgY29uc3QgaGVpZ2h0ID0gYm91bmRzLmJvdHRvbSAtIGJvdW5kcy50b3A7XG4gICAgY29uc3QgYm9yZGVyID0gcGFyc2VCb3JkZXJXaWR0aChiYXIsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgY29uc3QgcmFkaXVzID0gcGFyc2VCb3JkZXJSYWRpdXMoYmFyLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG91dGVyOiB7XG4gICAgICAgICAgICB4OiBib3VuZHMubGVmdCxcbiAgICAgICAgICAgIHk6IGJvdW5kcy50b3AsXG4gICAgICAgICAgICB3OiB3aWR0aCxcbiAgICAgICAgICAgIGg6IGhlaWdodCxcbiAgICAgICAgICAgIHJhZGl1c1xuICAgICAgICB9LFxuICAgICAgICBpbm5lcjoge1xuICAgICAgICAgICAgeDogYm91bmRzLmxlZnQgKyBib3JkZXIubCxcbiAgICAgICAgICAgIHk6IGJvdW5kcy50b3AgKyBib3JkZXIudCxcbiAgICAgICAgICAgIHc6IHdpZHRoIC0gYm9yZGVyLmwgLSBib3JkZXIucixcbiAgICAgICAgICAgIGg6IGhlaWdodCAtIGJvcmRlci50IC0gYm9yZGVyLmIsXG4gICAgICAgICAgICByYWRpdXM6IHtcbiAgICAgICAgICAgICAgICB0b3BMZWZ0OiBNYXRoLm1heCgwLCByYWRpdXMudG9wTGVmdCAtIE1hdGgubWF4KGJvcmRlci50LCBib3JkZXIubCkpLFxuICAgICAgICAgICAgICAgIHRvcFJpZ2h0OiBNYXRoLm1heCgwLCByYWRpdXMudG9wUmlnaHQgLSBNYXRoLm1heChib3JkZXIudCwgYm9yZGVyLnIpKSxcbiAgICAgICAgICAgICAgICBib3R0b21MZWZ0OiBNYXRoLm1heCgwLCByYWRpdXMuYm90dG9tTGVmdCAtIE1hdGgubWF4KGJvcmRlci5iLCBib3JkZXIubCkpLFxuICAgICAgICAgICAgICAgIGJvdHRvbVJpZ2h0OiBNYXRoLm1heCgwLCByYWRpdXMuYm90dG9tUmlnaHQgLSBNYXRoLm1heChib3JkZXIuYiwgYm9yZGVyLnIpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGluUmFuZ2UoYmFyLCB4LCB5LCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgY29uc3Qgc2tpcFggPSB4ID09PSBudWxsO1xuICAgIGNvbnN0IHNraXBZID0geSA9PT0gbnVsbDtcbiAgICBjb25zdCBza2lwQm90aCA9IHNraXBYICYmIHNraXBZO1xuICAgIGNvbnN0IGJvdW5kcyA9IGJhciAmJiAhc2tpcEJvdGggJiYgZ2V0QmFyQm91bmRzKGJhciwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgcmV0dXJuIGJvdW5kcyAmJiAoc2tpcFggfHwgX2lzQmV0d2Vlbih4LCBib3VuZHMubGVmdCwgYm91bmRzLnJpZ2h0KSkgJiYgKHNraXBZIHx8IF9pc0JldHdlZW4oeSwgYm91bmRzLnRvcCwgYm91bmRzLmJvdHRvbSkpO1xufVxuZnVuY3Rpb24gaGFzUmFkaXVzKHJhZGl1cykge1xuICAgIHJldHVybiByYWRpdXMudG9wTGVmdCB8fCByYWRpdXMudG9wUmlnaHQgfHwgcmFkaXVzLmJvdHRvbUxlZnQgfHwgcmFkaXVzLmJvdHRvbVJpZ2h0O1xufVxuIGZ1bmN0aW9uIGFkZE5vcm1hbFJlY3RQYXRoKGN0eCwgcmVjdCkge1xuICAgIGN0eC5yZWN0KHJlY3QueCwgcmVjdC55LCByZWN0LncsIHJlY3QuaCk7XG59XG5mdW5jdGlvbiBpbmZsYXRlUmVjdChyZWN0LCBhbW91bnQsIHJlZlJlY3QgPSB7fSkge1xuICAgIGNvbnN0IHggPSByZWN0LnggIT09IHJlZlJlY3QueCA/IC1hbW91bnQgOiAwO1xuICAgIGNvbnN0IHkgPSByZWN0LnkgIT09IHJlZlJlY3QueSA/IC1hbW91bnQgOiAwO1xuICAgIGNvbnN0IHcgPSAocmVjdC54ICsgcmVjdC53ICE9PSByZWZSZWN0LnggKyByZWZSZWN0LncgPyBhbW91bnQgOiAwKSAtIHg7XG4gICAgY29uc3QgaCA9IChyZWN0LnkgKyByZWN0LmggIT09IHJlZlJlY3QueSArIHJlZlJlY3QuaCA/IGFtb3VudCA6IDApIC0geTtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiByZWN0LnggKyB4LFxuICAgICAgICB5OiByZWN0LnkgKyB5LFxuICAgICAgICB3OiByZWN0LncgKyB3LFxuICAgICAgICBoOiByZWN0LmggKyBoLFxuICAgICAgICByYWRpdXM6IHJlY3QucmFkaXVzXG4gICAgfTtcbn1cbmNsYXNzIEJhckVsZW1lbnQgZXh0ZW5kcyBFbGVtZW50IHtcbiAgICBzdGF0aWMgaWQgPSAnYmFyJztcbiBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgICAgIGJvcmRlclNraXBwZWQ6ICdzdGFydCcsXG4gICAgICAgIGJvcmRlcldpZHRoOiAwLFxuICAgICAgICBib3JkZXJSYWRpdXM6IDAsXG4gICAgICAgIGluZmxhdGVBbW91bnQ6ICdhdXRvJyxcbiAgICAgICAgcG9pbnRTdHlsZTogdW5kZWZpbmVkXG4gICAgfTtcbiBzdGF0aWMgZGVmYXVsdFJvdXRlcyA9IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnYmFja2dyb3VuZENvbG9yJyxcbiAgICAgICAgYm9yZGVyQ29sb3I6ICdib3JkZXJDb2xvcidcbiAgICB9O1xuICAgIGNvbnN0cnVjdG9yKGNmZyl7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5ob3Jpem9udGFsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmJhc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2lkdGggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmluZmxhdGVBbW91bnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChjZmcpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY2ZnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3KGN0eCkge1xuICAgICAgICBjb25zdCB7IGluZmxhdGVBbW91bnQgLCBvcHRpb25zOiB7IGJvcmRlckNvbG9yICwgYmFja2dyb3VuZENvbG9yICB9ICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgeyBpbm5lciAsIG91dGVyICB9ID0gYm91bmRpbmdSZWN0cyh0aGlzKTtcbiAgICAgICAgY29uc3QgYWRkUmVjdFBhdGggPSBoYXNSYWRpdXMob3V0ZXIucmFkaXVzKSA/IGFkZFJvdW5kZWRSZWN0UGF0aCA6IGFkZE5vcm1hbFJlY3RQYXRoO1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBpZiAob3V0ZXIudyAhPT0gaW5uZXIudyB8fCBvdXRlci5oICE9PSBpbm5lci5oKSB7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBhZGRSZWN0UGF0aChjdHgsIGluZmxhdGVSZWN0KG91dGVyLCBpbmZsYXRlQW1vdW50LCBpbm5lcikpO1xuICAgICAgICAgICAgY3R4LmNsaXAoKTtcbiAgICAgICAgICAgIGFkZFJlY3RQYXRoKGN0eCwgaW5mbGF0ZVJlY3QoaW5uZXIsIC1pbmZsYXRlQW1vdW50LCBvdXRlcikpO1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGJvcmRlckNvbG9yO1xuICAgICAgICAgICAgY3R4LmZpbGwoJ2V2ZW5vZGQnKTtcbiAgICAgICAgfVxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGFkZFJlY3RQYXRoKGN0eCwgaW5mbGF0ZVJlY3QoaW5uZXIsIGluZmxhdGVBbW91bnQpKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgaW5SYW5nZShtb3VzZVgsIG1vdXNlWSwgdXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICByZXR1cm4gaW5SYW5nZSh0aGlzLCBtb3VzZVgsIG1vdXNlWSwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgfVxuICAgIGluWFJhbmdlKG1vdXNlWCwgdXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICByZXR1cm4gaW5SYW5nZSh0aGlzLCBtb3VzZVgsIG51bGwsIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIH1cbiAgICBpbllSYW5nZShtb3VzZVksIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGluUmFuZ2UodGhpcywgbnVsbCwgbW91c2VZLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICB9XG4gICAgZ2V0Q2VudGVyUG9pbnQodXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgICBjb25zdCB7IHggLCB5ICwgYmFzZSAsIGhvcml6b250YWwgIH0gPSAgdGhpcy5nZXRQcm9wcyhbXG4gICAgICAgICAgICAneCcsXG4gICAgICAgICAgICAneScsXG4gICAgICAgICAgICAnYmFzZScsXG4gICAgICAgICAgICAnaG9yaXpvbnRhbCdcbiAgICAgICAgXSwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBob3Jpem9udGFsID8gKHggKyBiYXNlKSAvIDIgOiB4LFxuICAgICAgICAgICAgeTogaG9yaXpvbnRhbCA/IHkgOiAoeSArIGJhc2UpIC8gMlxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRSYW5nZShheGlzKSB7XG4gICAgICAgIHJldHVybiBheGlzID09PSAneCcgPyB0aGlzLndpZHRoIC8gMiA6IHRoaXMuaGVpZ2h0IC8gMjtcbiAgICB9XG59XG5cbnZhciBlbGVtZW50cyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbl9fcHJvdG9fXzogbnVsbCxcbkFyY0VsZW1lbnQ6IEFyY0VsZW1lbnQsXG5MaW5lRWxlbWVudDogTGluZUVsZW1lbnQsXG5Qb2ludEVsZW1lbnQ6IFBvaW50RWxlbWVudCxcbkJhckVsZW1lbnQ6IEJhckVsZW1lbnRcbn0pO1xuXG5jb25zdCBCT1JERVJfQ09MT1JTID0gW1xuICAgICdyZ2IoNTQsIDE2MiwgMjM1KScsXG4gICAgJ3JnYigyNTUsIDk5LCAxMzIpJyxcbiAgICAncmdiKDI1NSwgMTU5LCA2NCknLFxuICAgICdyZ2IoMjU1LCAyMDUsIDg2KScsXG4gICAgJ3JnYig3NSwgMTkyLCAxOTIpJyxcbiAgICAncmdiKDE1MywgMTAyLCAyNTUpJyxcbiAgICAncmdiKDIwMSwgMjAzLCAyMDcpJyAvLyBncmV5XG5dO1xuLy8gQm9yZGVyIGNvbG9ycyB3aXRoIDUwJSB0cmFuc3BhcmVuY3lcbmNvbnN0IEJBQ0tHUk9VTkRfQ09MT1JTID0gLyogI19fUFVSRV9fICovIEJPUkRFUl9DT0xPUlMubWFwKChjb2xvcik9PmNvbG9yLnJlcGxhY2UoJ3JnYignLCAncmdiYSgnKS5yZXBsYWNlKCcpJywgJywgMC41KScpKTtcbmZ1bmN0aW9uIGdldEJvcmRlckNvbG9yKGkpIHtcbiAgICByZXR1cm4gQk9SREVSX0NPTE9SU1tpICUgQk9SREVSX0NPTE9SUy5sZW5ndGhdO1xufVxuZnVuY3Rpb24gZ2V0QmFja2dyb3VuZENvbG9yKGkpIHtcbiAgICByZXR1cm4gQkFDS0dST1VORF9DT0xPUlNbaSAlIEJBQ0tHUk9VTkRfQ09MT1JTLmxlbmd0aF07XG59XG5mdW5jdGlvbiBjb2xvcml6ZURlZmF1bHREYXRhc2V0KGRhdGFzZXQsIGkpIHtcbiAgICBkYXRhc2V0LmJvcmRlckNvbG9yID0gZ2V0Qm9yZGVyQ29sb3IoaSk7XG4gICAgZGF0YXNldC5iYWNrZ3JvdW5kQ29sb3IgPSBnZXRCYWNrZ3JvdW5kQ29sb3IoaSk7XG4gICAgcmV0dXJuICsraTtcbn1cbmZ1bmN0aW9uIGNvbG9yaXplRG91Z2hudXREYXRhc2V0KGRhdGFzZXQsIGkpIHtcbiAgICBkYXRhc2V0LmJhY2tncm91bmRDb2xvciA9IGRhdGFzZXQuZGF0YS5tYXAoKCk9PmdldEJvcmRlckNvbG9yKGkrKykpO1xuICAgIHJldHVybiBpO1xufVxuZnVuY3Rpb24gY29sb3JpemVQb2xhckFyZWFEYXRhc2V0KGRhdGFzZXQsIGkpIHtcbiAgICBkYXRhc2V0LmJhY2tncm91bmRDb2xvciA9IGRhdGFzZXQuZGF0YS5tYXAoKCk9PmdldEJhY2tncm91bmRDb2xvcihpKyspKTtcbiAgICByZXR1cm4gaTtcbn1cbmZ1bmN0aW9uIGdldENvbG9yaXplcihjaGFydCkge1xuICAgIGxldCBpID0gMDtcbiAgICByZXR1cm4gKGRhdGFzZXQsIGRhdGFzZXRJbmRleCk9PntcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IGNoYXJ0LmdldERhdGFzZXRNZXRhKGRhdGFzZXRJbmRleCkuY29udHJvbGxlcjtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIgaW5zdGFuY2VvZiBEb3VnaG51dENvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGkgPSBjb2xvcml6ZURvdWdobnV0RGF0YXNldChkYXRhc2V0LCBpKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb250cm9sbGVyIGluc3RhbmNlb2YgUG9sYXJBcmVhQ29udHJvbGxlcikge1xuICAgICAgICAgICAgaSA9IGNvbG9yaXplUG9sYXJBcmVhRGF0YXNldChkYXRhc2V0LCBpKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBpID0gY29sb3JpemVEZWZhdWx0RGF0YXNldChkYXRhc2V0LCBpKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjb250YWluc0NvbG9yc0RlZmluaXRpb25zKGRlc2NyaXB0b3JzKSB7XG4gICAgbGV0IGs7XG4gICAgZm9yKGsgaW4gZGVzY3JpcHRvcnMpe1xuICAgICAgICBpZiAoZGVzY3JpcHRvcnNba10uYm9yZGVyQ29sb3IgfHwgZGVzY3JpcHRvcnNba10uYmFja2dyb3VuZENvbG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG52YXIgcGx1Z2luX2NvbG9ycyA9IHtcbiAgICBpZDogJ2NvbG9ycycsXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgZm9yY2VPdmVycmlkZTogZmFsc2VcbiAgICB9LFxuICAgIGJlZm9yZUxheW91dCAoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5lbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBvcHRpb25zOiB7IGVsZW1lbnRzICB9ICwgZGF0YTogeyBkYXRhc2V0cyAgfSAgfSA9IGNoYXJ0LmNvbmZpZztcbiAgICAgICAgaWYgKCFvcHRpb25zLmZvcmNlT3ZlcnJpZGUgJiYgKGNvbnRhaW5zQ29sb3JzRGVmaW5pdGlvbnMoZGF0YXNldHMpIHx8IGVsZW1lbnRzICYmIGNvbnRhaW5zQ29sb3JzRGVmaW5pdGlvbnMoZWxlbWVudHMpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbG9yaXplciA9IGdldENvbG9yaXplcihjaGFydCk7XG4gICAgICAgIGRhdGFzZXRzLmZvckVhY2goY29sb3JpemVyKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBsdHRiRGVjaW1hdGlvbihkYXRhLCBzdGFydCwgY291bnQsIGF2YWlsYWJsZVdpZHRoLCBvcHRpb25zKSB7XG4gY29uc3Qgc2FtcGxlcyA9IG9wdGlvbnMuc2FtcGxlcyB8fCBhdmFpbGFibGVXaWR0aDtcbiAgICBpZiAoc2FtcGxlcyA+PSBjb3VudCkge1xuICAgICAgICByZXR1cm4gZGF0YS5zbGljZShzdGFydCwgc3RhcnQgKyBjb3VudCk7XG4gICAgfVxuICAgIGNvbnN0IGRlY2ltYXRlZCA9IFtdO1xuICAgIGNvbnN0IGJ1Y2tldFdpZHRoID0gKGNvdW50IC0gMikgLyAoc2FtcGxlcyAtIDIpO1xuICAgIGxldCBzYW1wbGVkSW5kZXggPSAwO1xuICAgIGNvbnN0IGVuZEluZGV4ID0gc3RhcnQgKyBjb3VudCAtIDE7XG4gICAgbGV0IGEgPSBzdGFydDtcbiAgICBsZXQgaSwgbWF4QXJlYVBvaW50LCBtYXhBcmVhLCBhcmVhLCBuZXh0QTtcbiAgICBkZWNpbWF0ZWRbc2FtcGxlZEluZGV4KytdID0gZGF0YVthXTtcbiAgICBmb3IoaSA9IDA7IGkgPCBzYW1wbGVzIC0gMjsgaSsrKXtcbiAgICAgICAgbGV0IGF2Z1ggPSAwO1xuICAgICAgICBsZXQgYXZnWSA9IDA7XG4gICAgICAgIGxldCBqO1xuICAgICAgICBjb25zdCBhdmdSYW5nZVN0YXJ0ID0gTWF0aC5mbG9vcigoaSArIDEpICogYnVja2V0V2lkdGgpICsgMSArIHN0YXJ0O1xuICAgICAgICBjb25zdCBhdmdSYW5nZUVuZCA9IE1hdGgubWluKE1hdGguZmxvb3IoKGkgKyAyKSAqIGJ1Y2tldFdpZHRoKSArIDEsIGNvdW50KSArIHN0YXJ0O1xuICAgICAgICBjb25zdCBhdmdSYW5nZUxlbmd0aCA9IGF2Z1JhbmdlRW5kIC0gYXZnUmFuZ2VTdGFydDtcbiAgICAgICAgZm9yKGogPSBhdmdSYW5nZVN0YXJ0OyBqIDwgYXZnUmFuZ2VFbmQ7IGorKyl7XG4gICAgICAgICAgICBhdmdYICs9IGRhdGFbal0ueDtcbiAgICAgICAgICAgIGF2Z1kgKz0gZGF0YVtqXS55O1xuICAgICAgICB9XG4gICAgICAgIGF2Z1ggLz0gYXZnUmFuZ2VMZW5ndGg7XG4gICAgICAgIGF2Z1kgLz0gYXZnUmFuZ2VMZW5ndGg7XG4gICAgICAgIGNvbnN0IHJhbmdlT2ZmcyA9IE1hdGguZmxvb3IoaSAqIGJ1Y2tldFdpZHRoKSArIDEgKyBzdGFydDtcbiAgICAgICAgY29uc3QgcmFuZ2VUbyA9IE1hdGgubWluKE1hdGguZmxvb3IoKGkgKyAxKSAqIGJ1Y2tldFdpZHRoKSArIDEsIGNvdW50KSArIHN0YXJ0O1xuICAgICAgICBjb25zdCB7IHg6IHBvaW50QXggLCB5OiBwb2ludEF5ICB9ID0gZGF0YVthXTtcbiAgICAgICAgbWF4QXJlYSA9IGFyZWEgPSAtMTtcbiAgICAgICAgZm9yKGogPSByYW5nZU9mZnM7IGogPCByYW5nZVRvOyBqKyspe1xuICAgICAgICAgICAgYXJlYSA9IDAuNSAqIE1hdGguYWJzKChwb2ludEF4IC0gYXZnWCkgKiAoZGF0YVtqXS55IC0gcG9pbnRBeSkgLSAocG9pbnRBeCAtIGRhdGFbal0ueCkgKiAoYXZnWSAtIHBvaW50QXkpKTtcbiAgICAgICAgICAgIGlmIChhcmVhID4gbWF4QXJlYSkge1xuICAgICAgICAgICAgICAgIG1heEFyZWEgPSBhcmVhO1xuICAgICAgICAgICAgICAgIG1heEFyZWFQb2ludCA9IGRhdGFbal07XG4gICAgICAgICAgICAgICAgbmV4dEEgPSBqO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlY2ltYXRlZFtzYW1wbGVkSW5kZXgrK10gPSBtYXhBcmVhUG9pbnQ7XG4gICAgICAgIGEgPSBuZXh0QTtcbiAgICB9XG4gICAgZGVjaW1hdGVkW3NhbXBsZWRJbmRleCsrXSA9IGRhdGFbZW5kSW5kZXhdO1xuICAgIHJldHVybiBkZWNpbWF0ZWQ7XG59XG5mdW5jdGlvbiBtaW5NYXhEZWNpbWF0aW9uKGRhdGEsIHN0YXJ0LCBjb3VudCwgYXZhaWxhYmxlV2lkdGgpIHtcbiAgICBsZXQgYXZnWCA9IDA7XG4gICAgbGV0IGNvdW50WCA9IDA7XG4gICAgbGV0IGksIHBvaW50LCB4LCB5LCBwcmV2WCwgbWluSW5kZXgsIG1heEluZGV4LCBzdGFydEluZGV4LCBtaW5ZLCBtYXhZO1xuICAgIGNvbnN0IGRlY2ltYXRlZCA9IFtdO1xuICAgIGNvbnN0IGVuZEluZGV4ID0gc3RhcnQgKyBjb3VudCAtIDE7XG4gICAgY29uc3QgeE1pbiA9IGRhdGFbc3RhcnRdLng7XG4gICAgY29uc3QgeE1heCA9IGRhdGFbZW5kSW5kZXhdLng7XG4gICAgY29uc3QgZHggPSB4TWF4IC0geE1pbjtcbiAgICBmb3IoaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgKytpKXtcbiAgICAgICAgcG9pbnQgPSBkYXRhW2ldO1xuICAgICAgICB4ID0gKHBvaW50LnggLSB4TWluKSAvIGR4ICogYXZhaWxhYmxlV2lkdGg7XG4gICAgICAgIHkgPSBwb2ludC55O1xuICAgICAgICBjb25zdCB0cnVuY1ggPSB4IHwgMDtcbiAgICAgICAgaWYgKHRydW5jWCA9PT0gcHJldlgpIHtcbiAgICAgICAgICAgIGlmICh5IDwgbWluWSkge1xuICAgICAgICAgICAgICAgIG1pblkgPSB5O1xuICAgICAgICAgICAgICAgIG1pbkluZGV4ID0gaTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeSA+IG1heFkpIHtcbiAgICAgICAgICAgICAgICBtYXhZID0geTtcbiAgICAgICAgICAgICAgICBtYXhJbmRleCA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdmdYID0gKGNvdW50WCAqIGF2Z1ggKyBwb2ludC54KSAvICsrY291bnRYO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbGFzdEluZGV4ID0gaSAtIDE7XG4gICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWYobWluSW5kZXgpICYmICFpc051bGxPclVuZGVmKG1heEluZGV4KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGludGVybWVkaWF0ZUluZGV4MSA9IE1hdGgubWluKG1pbkluZGV4LCBtYXhJbmRleCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJtZWRpYXRlSW5kZXgyID0gTWF0aC5tYXgobWluSW5kZXgsIG1heEluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJtZWRpYXRlSW5kZXgxICE9PSBzdGFydEluZGV4ICYmIGludGVybWVkaWF0ZUluZGV4MSAhPT0gbGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2ltYXRlZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFbaW50ZXJtZWRpYXRlSW5kZXgxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IGF2Z1hcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnRlcm1lZGlhdGVJbmRleDIgIT09IHN0YXJ0SW5kZXggJiYgaW50ZXJtZWRpYXRlSW5kZXgyICE9PSBsYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVjaW1hdGVkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YVtpbnRlcm1lZGlhdGVJbmRleDJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDogYXZnWFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA+IDAgJiYgbGFzdEluZGV4ICE9PSBzdGFydEluZGV4KSB7XG4gICAgICAgICAgICAgICAgZGVjaW1hdGVkLnB1c2goZGF0YVtsYXN0SW5kZXhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlY2ltYXRlZC5wdXNoKHBvaW50KTtcbiAgICAgICAgICAgIHByZXZYID0gdHJ1bmNYO1xuICAgICAgICAgICAgY291bnRYID0gMDtcbiAgICAgICAgICAgIG1pblkgPSBtYXhZID0geTtcbiAgICAgICAgICAgIG1pbkluZGV4ID0gbWF4SW5kZXggPSBzdGFydEluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVjaW1hdGVkO1xufVxuZnVuY3Rpb24gY2xlYW5EZWNpbWF0ZWREYXRhc2V0KGRhdGFzZXQpIHtcbiAgICBpZiAoZGF0YXNldC5fZGVjaW1hdGVkKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkYXRhc2V0Ll9kYXRhO1xuICAgICAgICBkZWxldGUgZGF0YXNldC5fZGVjaW1hdGVkO1xuICAgICAgICBkZWxldGUgZGF0YXNldC5fZGF0YTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGFzZXQsICdkYXRhJywge1xuICAgICAgICAgICAgdmFsdWU6IGRhdGFcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYW5EZWNpbWF0ZWREYXRhKGNoYXJ0KSB7XG4gICAgY2hhcnQuZGF0YS5kYXRhc2V0cy5mb3JFYWNoKChkYXRhc2V0KT0+e1xuICAgICAgICBjbGVhbkRlY2ltYXRlZERhdGFzZXQoZGF0YXNldCk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRTdGFydEFuZENvdW50T2ZWaXNpYmxlUG9pbnRzU2ltcGxpZmllZChtZXRhLCBwb2ludHMpIHtcbiAgICBjb25zdCBwb2ludENvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGxldCBjb3VudDtcbiAgICBjb25zdCB7IGlTY2FsZSAgfSA9IG1ldGE7XG4gICAgY29uc3QgeyBtaW4gLCBtYXggLCBtaW5EZWZpbmVkICwgbWF4RGVmaW5lZCAgfSA9IGlTY2FsZS5nZXRVc2VyQm91bmRzKCk7XG4gICAgaWYgKG1pbkRlZmluZWQpIHtcbiAgICAgICAgc3RhcnQgPSBfbGltaXRWYWx1ZShfbG9va3VwQnlLZXkocG9pbnRzLCBpU2NhbGUuYXhpcywgbWluKS5sbywgMCwgcG9pbnRDb3VudCAtIDEpO1xuICAgIH1cbiAgICBpZiAobWF4RGVmaW5lZCkge1xuICAgICAgICBjb3VudCA9IF9saW1pdFZhbHVlKF9sb29rdXBCeUtleShwb2ludHMsIGlTY2FsZS5heGlzLCBtYXgpLmhpICsgMSwgc3RhcnQsIHBvaW50Q291bnQpIC0gc3RhcnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY291bnQgPSBwb2ludENvdW50IC0gc3RhcnQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBjb3VudFxuICAgIH07XG59XG52YXIgcGx1Z2luX2RlY2ltYXRpb24gPSB7XG4gICAgaWQ6ICdkZWNpbWF0aW9uJyxcbiAgICBkZWZhdWx0czoge1xuICAgICAgICBhbGdvcml0aG06ICdtaW4tbWF4JyxcbiAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICB9LFxuICAgIGJlZm9yZUVsZW1lbnRzVXBkYXRlOiAoY2hhcnQsIGFyZ3MsIG9wdGlvbnMpPT57XG4gICAgICAgIGlmICghb3B0aW9ucy5lbmFibGVkKSB7XG4gICAgICAgICAgICBjbGVhbkRlY2ltYXRlZERhdGEoY2hhcnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gY2hhcnQud2lkdGg7XG4gICAgICAgIGNoYXJ0LmRhdGEuZGF0YXNldHMuZm9yRWFjaCgoZGF0YXNldCwgZGF0YXNldEluZGV4KT0+e1xuICAgICAgICAgICAgY29uc3QgeyBfZGF0YSAsIGluZGV4QXhpcyAgfSA9IGRhdGFzZXQ7XG4gICAgICAgICAgICBjb25zdCBtZXRhID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBfZGF0YSB8fCBkYXRhc2V0LmRhdGE7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZShbXG4gICAgICAgICAgICAgICAgaW5kZXhBeGlzLFxuICAgICAgICAgICAgICAgIGNoYXJ0Lm9wdGlvbnMuaW5kZXhBeGlzXG4gICAgICAgICAgICBdKSA9PT0gJ3knKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtZXRhLmNvbnRyb2xsZXIuc3VwcG9ydHNEZWNpbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeEF4aXMgPSBjaGFydC5zY2FsZXNbbWV0YS54QXhpc0lEXTtcbiAgICAgICAgICAgIGlmICh4QXhpcy50eXBlICE9PSAnbGluZWFyJyAmJiB4QXhpcy50eXBlICE9PSAndGltZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhcnQub3B0aW9ucy5wYXJzaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHsgc3RhcnQgLCBjb3VudCAgfSA9IGdldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHNTaW1wbGlmaWVkKG1ldGEsIGRhdGEpO1xuICAgICAgICAgICAgY29uc3QgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGQgfHwgNCAqIGF2YWlsYWJsZVdpZHRoO1xuICAgICAgICAgICAgaWYgKGNvdW50IDw9IHRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIGNsZWFuRGVjaW1hdGVkRGF0YXNldChkYXRhc2V0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZihfZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhc2V0Ll9kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICBkZWxldGUgZGF0YXNldC5kYXRhO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkYXRhc2V0LCAnZGF0YScsIHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlY2ltYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhID0gZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGRlY2ltYXRlZDtcbiAgICAgICAgICAgIHN3aXRjaChvcHRpb25zLmFsZ29yaXRobSl7XG4gICAgICAgICAgICAgICAgY2FzZSAnbHR0Yic6XG4gICAgICAgICAgICAgICAgICAgIGRlY2ltYXRlZCA9IGx0dGJEZWNpbWF0aW9uKGRhdGEsIHN0YXJ0LCBjb3VudCwgYXZhaWxhYmxlV2lkdGgsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtaW4tbWF4JzpcbiAgICAgICAgICAgICAgICAgICAgZGVjaW1hdGVkID0gbWluTWF4RGVjaW1hdGlvbihkYXRhLCBzdGFydCwgY291bnQsIGF2YWlsYWJsZVdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBkZWNpbWF0aW9uIGFsZ29yaXRobSAnJHtvcHRpb25zLmFsZ29yaXRobX0nYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhc2V0Ll9kZWNpbWF0ZWQgPSBkZWNpbWF0ZWQ7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVzdHJveSAoY2hhcnQpIHtcbiAgICAgICAgY2xlYW5EZWNpbWF0ZWREYXRhKGNoYXJ0KTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBfc2VnbWVudHMobGluZSwgdGFyZ2V0LCBwcm9wZXJ0eSkge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gbGluZS5zZWdtZW50cztcbiAgICBjb25zdCBwb2ludHMgPSBsaW5lLnBvaW50cztcbiAgICBjb25zdCB0cG9pbnRzID0gdGFyZ2V0LnBvaW50cztcbiAgICBjb25zdCBwYXJ0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cyl7XG4gICAgICAgIGxldCB7IHN0YXJ0ICwgZW5kICB9ID0gc2VnbWVudDtcbiAgICAgICAgZW5kID0gX2ZpbmRTZWdtZW50RW5kKHN0YXJ0LCBlbmQsIHBvaW50cyk7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IF9nZXRCb3VuZHMocHJvcGVydHksIHBvaW50c1tzdGFydF0sIHBvaW50c1tlbmRdLCBzZWdtZW50Lmxvb3ApO1xuICAgICAgICBpZiAoIXRhcmdldC5zZWdtZW50cykge1xuICAgICAgICAgICAgcGFydHMucHVzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlOiBzZWdtZW50LFxuICAgICAgICAgICAgICAgIHRhcmdldDogYm91bmRzLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiBwb2ludHNbc3RhcnRdLFxuICAgICAgICAgICAgICAgIGVuZDogcG9pbnRzW2VuZF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0U2VnbWVudHMgPSBfYm91bmRTZWdtZW50cyh0YXJnZXQsIGJvdW5kcyk7XG4gICAgICAgIGZvciAoY29uc3QgdGd0IG9mIHRhcmdldFNlZ21lbnRzKXtcbiAgICAgICAgICAgIGNvbnN0IHN1YkJvdW5kcyA9IF9nZXRCb3VuZHMocHJvcGVydHksIHRwb2ludHNbdGd0LnN0YXJ0XSwgdHBvaW50c1t0Z3QuZW5kXSwgdGd0Lmxvb3ApO1xuICAgICAgICAgICAgY29uc3QgZmlsbFNvdXJjZXMgPSBfYm91bmRTZWdtZW50KHNlZ21lbnQsIHBvaW50cywgc3ViQm91bmRzKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsbFNvdXJjZSBvZiBmaWxsU291cmNlcyl7XG4gICAgICAgICAgICAgICAgcGFydHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogZmlsbFNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0Z3QsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbcHJvcGVydHldOiBfZ2V0RWRnZShib3VuZHMsIHN1YkJvdW5kcywgJ3N0YXJ0JywgTWF0aC5tYXgpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVuZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgW3Byb3BlcnR5XTogX2dldEVkZ2UoYm91bmRzLCBzdWJCb3VuZHMsICdlbmQnLCBNYXRoLm1pbilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cztcbn1cbmZ1bmN0aW9uIF9nZXRCb3VuZHMocHJvcGVydHksIGZpcnN0LCBsYXN0LCBsb29wKSB7XG4gICAgaWYgKGxvb3ApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgc3RhcnQgPSBmaXJzdFtwcm9wZXJ0eV07XG4gICAgbGV0IGVuZCA9IGxhc3RbcHJvcGVydHldO1xuICAgIGlmIChwcm9wZXJ0eSA9PT0gJ2FuZ2xlJykge1xuICAgICAgICBzdGFydCA9IF9ub3JtYWxpemVBbmdsZShzdGFydCk7XG4gICAgICAgIGVuZCA9IF9ub3JtYWxpemVBbmdsZShlbmQpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIGVuZFxuICAgIH07XG59XG5mdW5jdGlvbiBfcG9pbnRzRnJvbVNlZ21lbnRzKGJvdW5kYXJ5LCBsaW5lKSB7XG4gICAgY29uc3QgeyB4ID1udWxsICwgeSA9bnVsbCAgfSA9IGJvdW5kYXJ5IHx8IHt9O1xuICAgIGNvbnN0IGxpbmVQb2ludHMgPSBsaW5lLnBvaW50cztcbiAgICBjb25zdCBwb2ludHMgPSBbXTtcbiAgICBsaW5lLnNlZ21lbnRzLmZvckVhY2goKHsgc3RhcnQgLCBlbmQgIH0pPT57XG4gICAgICAgIGVuZCA9IF9maW5kU2VnbWVudEVuZChzdGFydCwgZW5kLCBsaW5lUG9pbnRzKTtcbiAgICAgICAgY29uc3QgZmlyc3QgPSBsaW5lUG9pbnRzW3N0YXJ0XTtcbiAgICAgICAgY29uc3QgbGFzdCA9IGxpbmVQb2ludHNbZW5kXTtcbiAgICAgICAgaWYgKHkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB4OiBmaXJzdC54LFxuICAgICAgICAgICAgICAgIHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcG9pbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHg6IGxhc3QueCxcbiAgICAgICAgICAgICAgICB5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBwb2ludHMucHVzaCh7XG4gICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICB5OiBmaXJzdC55XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB4LFxuICAgICAgICAgICAgICAgIHk6IGxhc3QueVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcG9pbnRzO1xufVxuZnVuY3Rpb24gX2ZpbmRTZWdtZW50RW5kKHN0YXJ0LCBlbmQsIHBvaW50cykge1xuICAgIGZvcig7IGVuZCA+IHN0YXJ0OyBlbmQtLSl7XG4gICAgICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzW2VuZF07XG4gICAgICAgIGlmICghaXNOYU4ocG9pbnQueCkgJiYgIWlzTmFOKHBvaW50LnkpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZW5kO1xufVxuZnVuY3Rpb24gX2dldEVkZ2UoYSwgYiwgcHJvcCwgZm4pIHtcbiAgICBpZiAoYSAmJiBiKSB7XG4gICAgICAgIHJldHVybiBmbihhW3Byb3BdLCBiW3Byb3BdKTtcbiAgICB9XG4gICAgcmV0dXJuIGEgPyBhW3Byb3BdIDogYiA/IGJbcHJvcF0gOiAwO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlQm91bmRhcnlMaW5lKGJvdW5kYXJ5LCBsaW5lKSB7XG4gICAgbGV0IHBvaW50cyA9IFtdO1xuICAgIGxldCBfbG9vcCA9IGZhbHNlO1xuICAgIGlmIChpc0FycmF5KGJvdW5kYXJ5KSkge1xuICAgICAgICBfbG9vcCA9IHRydWU7XG4gICAgICAgIHBvaW50cyA9IGJvdW5kYXJ5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBvaW50cyA9IF9wb2ludHNGcm9tU2VnbWVudHMoYm91bmRhcnksIGxpbmUpO1xuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzLmxlbmd0aCA/IG5ldyBMaW5lRWxlbWVudCh7XG4gICAgICAgIHBvaW50cyxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgdGVuc2lvbjogMFxuICAgICAgICB9LFxuICAgICAgICBfbG9vcCxcbiAgICAgICAgX2Z1bGxMb29wOiBfbG9vcFxuICAgIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIF9zaG91bGRBcHBseUZpbGwoc291cmNlKSB7XG4gICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2UuZmlsbCAhPT0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIF9yZXNvbHZlVGFyZ2V0KHNvdXJjZXMsIGluZGV4LCBwcm9wYWdhdGUpIHtcbiAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICBsZXQgZmlsbCA9IHNvdXJjZS5maWxsO1xuICAgIGNvbnN0IHZpc2l0ZWQgPSBbXG4gICAgICAgIGluZGV4XG4gICAgXTtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIGlmICghcHJvcGFnYXRlKSB7XG4gICAgICAgIHJldHVybiBmaWxsO1xuICAgIH1cbiAgICB3aGlsZShmaWxsICE9PSBmYWxzZSAmJiB2aXNpdGVkLmluZGV4T2YoZmlsbCkgPT09IC0xKXtcbiAgICAgICAgaWYgKCFpc051bWJlckZpbml0ZShmaWxsKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpbGw7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0ID0gc291cmNlc1tmaWxsXTtcbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0LnZpc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWxsO1xuICAgICAgICB9XG4gICAgICAgIHZpc2l0ZWQucHVzaChmaWxsKTtcbiAgICAgICAgZmlsbCA9IHRhcmdldC5maWxsO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4gZnVuY3Rpb24gX2RlY29kZUZpbGwobGluZSwgaW5kZXgsIGNvdW50KSB7XG4gICAgIGNvbnN0IGZpbGwgPSBwYXJzZUZpbGxPcHRpb24obGluZSk7XG4gICAgaWYgKGlzT2JqZWN0KGZpbGwpKSB7XG4gICAgICAgIHJldHVybiBpc05hTihmaWxsLnZhbHVlKSA/IGZhbHNlIDogZmlsbDtcbiAgICB9XG4gICAgbGV0IHRhcmdldCA9IHBhcnNlRmxvYXQoZmlsbCk7XG4gICAgaWYgKGlzTnVtYmVyRmluaXRlKHRhcmdldCkgJiYgTWF0aC5mbG9vcih0YXJnZXQpID09PSB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVRhcmdldEluZGV4KGZpbGxbMF0sIGluZGV4LCB0YXJnZXQsIGNvdW50KTtcbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgICAgJ29yaWdpbicsXG4gICAgICAgICdzdGFydCcsXG4gICAgICAgICdlbmQnLFxuICAgICAgICAnc3RhY2snLFxuICAgICAgICAnc2hhcGUnXG4gICAgXS5pbmRleE9mKGZpbGwpID49IDAgJiYgZmlsbDtcbn1cbmZ1bmN0aW9uIGRlY29kZVRhcmdldEluZGV4KGZpcnN0Q2gsIGluZGV4LCB0YXJnZXQsIGNvdW50KSB7XG4gICAgaWYgKGZpcnN0Q2ggPT09ICctJyB8fCBmaXJzdENoID09PSAnKycpIHtcbiAgICAgICAgdGFyZ2V0ID0gaW5kZXggKyB0YXJnZXQ7XG4gICAgfVxuICAgIGlmICh0YXJnZXQgPT09IGluZGV4IHx8IHRhcmdldCA8IDAgfHwgdGFyZ2V0ID49IGNvdW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbiBmdW5jdGlvbiBfZ2V0VGFyZ2V0UGl4ZWwoZmlsbCwgc2NhbGUpIHtcbiAgICBsZXQgcGl4ZWwgPSBudWxsO1xuICAgIGlmIChmaWxsID09PSAnc3RhcnQnKSB7XG4gICAgICAgIHBpeGVsID0gc2NhbGUuYm90dG9tO1xuICAgIH0gZWxzZSBpZiAoZmlsbCA9PT0gJ2VuZCcpIHtcbiAgICAgICAgcGl4ZWwgPSBzY2FsZS50b3A7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChmaWxsKSkge1xuICAgICAgICBwaXhlbCA9IHNjYWxlLmdldFBpeGVsRm9yVmFsdWUoZmlsbC52YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChzY2FsZS5nZXRCYXNlUGl4ZWwpIHtcbiAgICAgICAgcGl4ZWwgPSBzY2FsZS5nZXRCYXNlUGl4ZWwoKTtcbiAgICB9XG4gICAgcmV0dXJuIHBpeGVsO1xufVxuIGZ1bmN0aW9uIF9nZXRUYXJnZXRWYWx1ZShmaWxsLCBzY2FsZSwgc3RhcnRWYWx1ZSkge1xuICAgIGxldCB2YWx1ZTtcbiAgICBpZiAoZmlsbCA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICB2YWx1ZSA9IHN0YXJ0VmFsdWU7XG4gICAgfSBlbHNlIGlmIChmaWxsID09PSAnZW5kJykge1xuICAgICAgICB2YWx1ZSA9IHNjYWxlLm9wdGlvbnMucmV2ZXJzZSA/IHNjYWxlLm1pbiA6IHNjYWxlLm1heDtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGZpbGwpKSB7XG4gICAgICAgIHZhbHVlID0gZmlsbC52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHNjYWxlLmdldEJhc2VWYWx1ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4gZnVuY3Rpb24gcGFyc2VGaWxsT3B0aW9uKGxpbmUpIHtcbiAgICBjb25zdCBvcHRpb25zID0gbGluZS5vcHRpb25zO1xuICAgIGNvbnN0IGZpbGxPcHRpb24gPSBvcHRpb25zLmZpbGw7XG4gICAgbGV0IGZpbGwgPSB2YWx1ZU9yRGVmYXVsdChmaWxsT3B0aW9uICYmIGZpbGxPcHRpb24udGFyZ2V0LCBmaWxsT3B0aW9uKTtcbiAgICBpZiAoZmlsbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpbGwgPSAhIW9wdGlvbnMuYmFja2dyb3VuZENvbG9yO1xuICAgIH1cbiAgICBpZiAoZmlsbCA9PT0gZmFsc2UgfHwgZmlsbCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChmaWxsID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiAnb3JpZ2luJztcbiAgICB9XG4gICAgcmV0dXJuIGZpbGw7XG59XG5cbmZ1bmN0aW9uIF9idWlsZFN0YWNrTGluZShzb3VyY2UpIHtcbiAgICBjb25zdCB7IHNjYWxlICwgaW5kZXggLCBsaW5lICB9ID0gc291cmNlO1xuICAgIGNvbnN0IHBvaW50cyA9IFtdO1xuICAgIGNvbnN0IHNlZ21lbnRzID0gbGluZS5zZWdtZW50cztcbiAgICBjb25zdCBzb3VyY2VQb2ludHMgPSBsaW5lLnBvaW50cztcbiAgICBjb25zdCBsaW5lc0JlbG93ID0gZ2V0TGluZXNCZWxvdyhzY2FsZSwgaW5kZXgpO1xuICAgIGxpbmVzQmVsb3cucHVzaChfY3JlYXRlQm91bmRhcnlMaW5lKHtcbiAgICAgICAgeDogbnVsbCxcbiAgICAgICAgeTogc2NhbGUuYm90dG9tXG4gICAgfSwgbGluZSkpO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGNvbnN0IHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcbiAgICAgICAgZm9yKGxldCBqID0gc2VnbWVudC5zdGFydDsgaiA8PSBzZWdtZW50LmVuZDsgaisrKXtcbiAgICAgICAgICAgIGFkZFBvaW50c0JlbG93KHBvaW50cywgc291cmNlUG9pbnRzW2pdLCBsaW5lc0JlbG93KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IExpbmVFbGVtZW50KHtcbiAgICAgICAgcG9pbnRzLFxuICAgICAgICBvcHRpb25zOiB7fVxuICAgIH0pO1xufVxuIGZ1bmN0aW9uIGdldExpbmVzQmVsb3coc2NhbGUsIGluZGV4KSB7XG4gICAgY29uc3QgYmVsb3cgPSBbXTtcbiAgICBjb25zdCBtZXRhcyA9IHNjYWxlLmdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKCdsaW5lJyk7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG1ldGFzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3QgbWV0YSA9IG1ldGFzW2ldO1xuICAgICAgICBpZiAobWV0YS5pbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWV0YS5oaWRkZW4pIHtcbiAgICAgICAgICAgIGJlbG93LnVuc2hpZnQobWV0YS5kYXRhc2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYmVsb3c7XG59XG4gZnVuY3Rpb24gYWRkUG9pbnRzQmVsb3cocG9pbnRzLCBzb3VyY2VQb2ludCwgbGluZXNCZWxvdykge1xuICAgIGNvbnN0IHBvc3Rwb25lZCA9IFtdO1xuICAgIGZvcihsZXQgaiA9IDA7IGogPCBsaW5lc0JlbG93Lmxlbmd0aDsgaisrKXtcbiAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzQmVsb3dbal07XG4gICAgICAgIGNvbnN0IHsgZmlyc3QgLCBsYXN0ICwgcG9pbnQgIH0gPSBmaW5kUG9pbnQobGluZSwgc291cmNlUG9pbnQsICd4Jyk7XG4gICAgICAgIGlmICghcG9pbnQgfHwgZmlyc3QgJiYgbGFzdCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0KSB7XG4gICAgICAgICAgICBwb3N0cG9uZWQudW5zaGlmdChwb2ludCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb2ludHMucHVzaChwb2ludCk7XG4gICAgICAgICAgICBpZiAoIWxhc3QpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwb2ludHMucHVzaCguLi5wb3N0cG9uZWQpO1xufVxuIGZ1bmN0aW9uIGZpbmRQb2ludChsaW5lLCBzb3VyY2VQb2ludCwgcHJvcGVydHkpIHtcbiAgICBjb25zdCBwb2ludCA9IGxpbmUuaW50ZXJwb2xhdGUoc291cmNlUG9pbnQsIHByb3BlcnR5KTtcbiAgICBpZiAoIXBvaW50KSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgY29uc3QgcG9pbnRWYWx1ZSA9IHBvaW50W3Byb3BlcnR5XTtcbiAgICBjb25zdCBzZWdtZW50cyA9IGxpbmUuc2VnbWVudHM7XG4gICAgY29uc3QgbGluZVBvaW50cyA9IGxpbmUucG9pbnRzO1xuICAgIGxldCBmaXJzdCA9IGZhbHNlO1xuICAgIGxldCBsYXN0ID0gZmFsc2U7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3Qgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuICAgICAgICBjb25zdCBmaXJzdFZhbHVlID0gbGluZVBvaW50c1tzZWdtZW50LnN0YXJ0XVtwcm9wZXJ0eV07XG4gICAgICAgIGNvbnN0IGxhc3RWYWx1ZSA9IGxpbmVQb2ludHNbc2VnbWVudC5lbmRdW3Byb3BlcnR5XTtcbiAgICAgICAgaWYgKF9pc0JldHdlZW4ocG9pbnRWYWx1ZSwgZmlyc3RWYWx1ZSwgbGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgZmlyc3QgPSBwb2ludFZhbHVlID09PSBmaXJzdFZhbHVlO1xuICAgICAgICAgICAgbGFzdCA9IHBvaW50VmFsdWUgPT09IGxhc3RWYWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGZpcnN0LFxuICAgICAgICBsYXN0LFxuICAgICAgICBwb2ludFxuICAgIH07XG59XG5cbmNsYXNzIHNpbXBsZUFyYyB7XG4gICAgY29uc3RydWN0b3Iob3B0cyl7XG4gICAgICAgIHRoaXMueCA9IG9wdHMueDtcbiAgICAgICAgdGhpcy55ID0gb3B0cy55O1xuICAgICAgICB0aGlzLnJhZGl1cyA9IG9wdHMucmFkaXVzO1xuICAgIH1cbiAgICBwYXRoU2VnbWVudChjdHgsIGJvdW5kcywgb3B0cykge1xuICAgICAgICBjb25zdCB7IHggLCB5ICwgcmFkaXVzICB9ID0gdGhpcztcbiAgICAgICAgYm91bmRzID0gYm91bmRzIHx8IHtcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICAgICAgZW5kOiBUQVVcbiAgICAgICAgfTtcbiAgICAgICAgY3R4LmFyYyh4LCB5LCByYWRpdXMsIGJvdW5kcy5lbmQsIGJvdW5kcy5zdGFydCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiAhb3B0cy5ib3VuZHM7XG4gICAgfVxuICAgIGludGVycG9sYXRlKHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHsgeCAsIHkgLCByYWRpdXMgIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBhbmdsZSA9IHBvaW50LmFuZ2xlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogeCArIE1hdGguY29zKGFuZ2xlKSAqIHJhZGl1cyxcbiAgICAgICAgICAgIHk6IHkgKyBNYXRoLnNpbihhbmdsZSkgKiByYWRpdXMsXG4gICAgICAgICAgICBhbmdsZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX2dldFRhcmdldChzb3VyY2UpIHtcbiAgICBjb25zdCB7IGNoYXJ0ICwgZmlsbCAsIGxpbmUgIH0gPSBzb3VyY2U7XG4gICAgaWYgKGlzTnVtYmVyRmluaXRlKGZpbGwpKSB7XG4gICAgICAgIHJldHVybiBnZXRMaW5lQnlJbmRleChjaGFydCwgZmlsbCk7XG4gICAgfVxuICAgIGlmIChmaWxsID09PSAnc3RhY2snKSB7XG4gICAgICAgIHJldHVybiBfYnVpbGRTdGFja0xpbmUoc291cmNlKTtcbiAgICB9XG4gICAgaWYgKGZpbGwgPT09ICdzaGFwZScpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGJvdW5kYXJ5ID0gY29tcHV0ZUJvdW5kYXJ5KHNvdXJjZSk7XG4gICAgaWYgKGJvdW5kYXJ5IGluc3RhbmNlb2Ygc2ltcGxlQXJjKSB7XG4gICAgICAgIHJldHVybiBib3VuZGFyeTtcbiAgICB9XG4gICAgcmV0dXJuIF9jcmVhdGVCb3VuZGFyeUxpbmUoYm91bmRhcnksIGxpbmUpO1xufVxuIGZ1bmN0aW9uIGdldExpbmVCeUluZGV4KGNoYXJ0LCBpbmRleCkge1xuICAgIGNvbnN0IG1ldGEgPSBjaGFydC5nZXREYXRhc2V0TWV0YShpbmRleCk7XG4gICAgY29uc3QgdmlzaWJsZSA9IG1ldGEgJiYgY2hhcnQuaXNEYXRhc2V0VmlzaWJsZShpbmRleCk7XG4gICAgcmV0dXJuIHZpc2libGUgPyBtZXRhLmRhdGFzZXQgOiBudWxsO1xufVxuZnVuY3Rpb24gY29tcHV0ZUJvdW5kYXJ5KHNvdXJjZSkge1xuICAgIGNvbnN0IHNjYWxlID0gc291cmNlLnNjYWxlIHx8IHt9O1xuICAgIGlmIChzY2FsZS5nZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGNvbXB1dGVDaXJjdWxhckJvdW5kYXJ5KHNvdXJjZSk7XG4gICAgfVxuICAgIHJldHVybiBjb21wdXRlTGluZWFyQm91bmRhcnkoc291cmNlKTtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVMaW5lYXJCb3VuZGFyeShzb3VyY2UpIHtcbiAgICBjb25zdCB7IHNjYWxlID17fSAsIGZpbGwgIH0gPSBzb3VyY2U7XG4gICAgY29uc3QgcGl4ZWwgPSBfZ2V0VGFyZ2V0UGl4ZWwoZmlsbCwgc2NhbGUpO1xuICAgIGlmIChpc051bWJlckZpbml0ZShwaXhlbCkpIHtcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbCA9IHNjYWxlLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogaG9yaXpvbnRhbCA/IHBpeGVsIDogbnVsbCxcbiAgICAgICAgICAgIHk6IGhvcml6b250YWwgPyBudWxsIDogcGl4ZWxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBjb21wdXRlQ2lyY3VsYXJCb3VuZGFyeShzb3VyY2UpIHtcbiAgICBjb25zdCB7IHNjYWxlICwgZmlsbCAgfSA9IHNvdXJjZTtcbiAgICBjb25zdCBvcHRpb25zID0gc2NhbGUub3B0aW9ucztcbiAgICBjb25zdCBsZW5ndGggPSBzY2FsZS5nZXRMYWJlbHMoKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RhcnQgPSBvcHRpb25zLnJldmVyc2UgPyBzY2FsZS5tYXggOiBzY2FsZS5taW47XG4gICAgY29uc3QgdmFsdWUgPSBfZ2V0VGFyZ2V0VmFsdWUoZmlsbCwgc2NhbGUsIHN0YXJ0KTtcbiAgICBjb25zdCB0YXJnZXQgPSBbXTtcbiAgICBpZiAob3B0aW9ucy5ncmlkLmNpcmN1bGFyKSB7XG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHNjYWxlLmdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZSgwLCBzdGFydCk7XG4gICAgICAgIHJldHVybiBuZXcgc2ltcGxlQXJjKHtcbiAgICAgICAgICAgIHg6IGNlbnRlci54LFxuICAgICAgICAgICAgeTogY2VudGVyLnksXG4gICAgICAgICAgICByYWRpdXM6IHNjYWxlLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHZhbHVlKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKXtcbiAgICAgICAgdGFyZ2V0LnB1c2goc2NhbGUuZ2V0UG9pbnRQb3NpdGlvbkZvclZhbHVlKGksIHZhbHVlKSk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIF9kcmF3ZmlsbChjdHgsIHNvdXJjZSwgYXJlYSkge1xuICAgIGNvbnN0IHRhcmdldCA9IF9nZXRUYXJnZXQoc291cmNlKTtcbiAgICBjb25zdCB7IGxpbmUgLCBzY2FsZSAsIGF4aXMgIH0gPSBzb3VyY2U7XG4gICAgY29uc3QgbGluZU9wdHMgPSBsaW5lLm9wdGlvbnM7XG4gICAgY29uc3QgZmlsbE9wdGlvbiA9IGxpbmVPcHRzLmZpbGw7XG4gICAgY29uc3QgY29sb3IgPSBsaW5lT3B0cy5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgY29uc3QgeyBhYm92ZSA9Y29sb3IgLCBiZWxvdyA9Y29sb3IgIH0gPSBmaWxsT3B0aW9uIHx8IHt9O1xuICAgIGlmICh0YXJnZXQgJiYgbGluZS5wb2ludHMubGVuZ3RoKSB7XG4gICAgICAgIGNsaXBBcmVhKGN0eCwgYXJlYSk7XG4gICAgICAgIGRvRmlsbChjdHgsIHtcbiAgICAgICAgICAgIGxpbmUsXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICBhYm92ZSxcbiAgICAgICAgICAgIGJlbG93LFxuICAgICAgICAgICAgYXJlYSxcbiAgICAgICAgICAgIHNjYWxlLFxuICAgICAgICAgICAgYXhpc1xuICAgICAgICB9KTtcbiAgICAgICAgdW5jbGlwQXJlYShjdHgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRvRmlsbChjdHgsIGNmZykge1xuICAgIGNvbnN0IHsgbGluZSAsIHRhcmdldCAsIGFib3ZlICwgYmVsb3cgLCBhcmVhICwgc2NhbGUgIH0gPSBjZmc7XG4gICAgY29uc3QgcHJvcGVydHkgPSBsaW5lLl9sb29wID8gJ2FuZ2xlJyA6IGNmZy5heGlzO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgaWYgKHByb3BlcnR5ID09PSAneCcgJiYgYmVsb3cgIT09IGFib3ZlKSB7XG4gICAgICAgIGNsaXBWZXJ0aWNhbChjdHgsIHRhcmdldCwgYXJlYS50b3ApO1xuICAgICAgICBmaWxsKGN0eCwge1xuICAgICAgICAgICAgbGluZSxcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgIGNvbG9yOiBhYm92ZSxcbiAgICAgICAgICAgIHNjYWxlLFxuICAgICAgICAgICAgcHJvcGVydHlcbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGNsaXBWZXJ0aWNhbChjdHgsIHRhcmdldCwgYXJlYS5ib3R0b20pO1xuICAgIH1cbiAgICBmaWxsKGN0eCwge1xuICAgICAgICBsaW5lLFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIGNvbG9yOiBiZWxvdyxcbiAgICAgICAgc2NhbGUsXG4gICAgICAgIHByb3BlcnR5XG4gICAgfSk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbn1cbmZ1bmN0aW9uIGNsaXBWZXJ0aWNhbChjdHgsIHRhcmdldCwgY2xpcFkpIHtcbiAgICBjb25zdCB7IHNlZ21lbnRzICwgcG9pbnRzICB9ID0gdGFyZ2V0O1xuICAgIGxldCBmaXJzdCA9IHRydWU7XG4gICAgbGV0IGxpbmVMb29wID0gZmFsc2U7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cyl7XG4gICAgICAgIGNvbnN0IHsgc3RhcnQgLCBlbmQgIH0gPSBzZWdtZW50O1xuICAgICAgICBjb25zdCBmaXJzdFBvaW50ID0gcG9pbnRzW3N0YXJ0XTtcbiAgICAgICAgY29uc3QgbGFzdFBvaW50ID0gcG9pbnRzW19maW5kU2VnbWVudEVuZChzdGFydCwgZW5kLCBwb2ludHMpXTtcbiAgICAgICAgaWYgKGZpcnN0KSB7XG4gICAgICAgICAgICBjdHgubW92ZVRvKGZpcnN0UG9pbnQueCwgZmlyc3RQb2ludC55KTtcbiAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHgubGluZVRvKGZpcnN0UG9pbnQueCwgY2xpcFkpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyhmaXJzdFBvaW50LngsIGZpcnN0UG9pbnQueSk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZUxvb3AgPSAhIXRhcmdldC5wYXRoU2VnbWVudChjdHgsIHNlZ21lbnQsIHtcbiAgICAgICAgICAgIG1vdmU6IGxpbmVMb29wXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobGluZUxvb3ApIHtcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5saW5lVG8obGFzdFBvaW50LngsIGNsaXBZKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjdHgubGluZVRvKHRhcmdldC5maXJzdCgpLngsIGNsaXBZKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmNsaXAoKTtcbn1cbmZ1bmN0aW9uIGZpbGwoY3R4LCBjZmcpIHtcbiAgICBjb25zdCB7IGxpbmUgLCB0YXJnZXQgLCBwcm9wZXJ0eSAsIGNvbG9yICwgc2NhbGUgIH0gPSBjZmc7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBfc2VnbWVudHMobGluZSwgdGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgZm9yIChjb25zdCB7IHNvdXJjZTogc3JjICwgdGFyZ2V0OiB0Z3QgLCBzdGFydCAsIGVuZCAgfSBvZiBzZWdtZW50cyl7XG4gICAgICAgIGNvbnN0IHsgc3R5bGU6IHsgYmFja2dyb3VuZENvbG9yID1jb2xvciAgfSA9IHt9ICB9ID0gc3JjO1xuICAgICAgICBjb25zdCBub3RTaGFwZSA9IHRhcmdldCAhPT0gdHJ1ZTtcbiAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgY2xpcEJvdW5kcyhjdHgsIHNjYWxlLCBub3RTaGFwZSAmJiBfZ2V0Qm91bmRzKHByb3BlcnR5LCBzdGFydCwgZW5kKSk7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29uc3QgbGluZUxvb3AgPSAhIWxpbmUucGF0aFNlZ21lbnQoY3R4LCBzcmMpO1xuICAgICAgICBsZXQgbG9vcDtcbiAgICAgICAgaWYgKG5vdFNoYXBlKSB7XG4gICAgICAgICAgICBpZiAobGluZUxvb3ApIHtcbiAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVycG9sYXRlZExpbmVUbyhjdHgsIHRhcmdldCwgZW5kLCBwcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRMb29wID0gISF0YXJnZXQucGF0aFNlZ21lbnQoY3R4LCB0Z3QsIHtcbiAgICAgICAgICAgICAgICBtb3ZlOiBsaW5lTG9vcCxcbiAgICAgICAgICAgICAgICByZXZlcnNlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvb3AgPSBsaW5lTG9vcCAmJiB0YXJnZXRMb29wO1xuICAgICAgICAgICAgaWYgKCFsb29wKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVkTGluZVRvKGN0eCwgdGFyZ2V0LCBzdGFydCwgcHJvcGVydHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY3R4LmZpbGwobG9vcCA/ICdldmVub2RkJyA6ICdub256ZXJvJyk7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xpcEJvdW5kcyhjdHgsIHNjYWxlLCBib3VuZHMpIHtcbiAgICBjb25zdCB7IHRvcCAsIGJvdHRvbSAgfSA9IHNjYWxlLmNoYXJ0LmNoYXJ0QXJlYTtcbiAgICBjb25zdCB7IHByb3BlcnR5ICwgc3RhcnQgLCBlbmQgIH0gPSBib3VuZHMgfHwge307XG4gICAgaWYgKHByb3BlcnR5ID09PSAneCcpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgucmVjdChzdGFydCwgdG9wLCBlbmQgLSBzdGFydCwgYm90dG9tIC0gdG9wKTtcbiAgICAgICAgY3R4LmNsaXAoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbnRlcnBvbGF0ZWRMaW5lVG8oY3R4LCB0YXJnZXQsIHBvaW50LCBwcm9wZXJ0eSkge1xuICAgIGNvbnN0IGludGVycG9sYXRlZFBvaW50ID0gdGFyZ2V0LmludGVycG9sYXRlKHBvaW50LCBwcm9wZXJ0eSk7XG4gICAgaWYgKGludGVycG9sYXRlZFBvaW50KSB7XG4gICAgICAgIGN0eC5saW5lVG8oaW50ZXJwb2xhdGVkUG9pbnQueCwgaW50ZXJwb2xhdGVkUG9pbnQueSk7XG4gICAgfVxufVxuXG52YXIgaW5kZXggPSB7XG4gICAgaWQ6ICdmaWxsZXInLFxuICAgIGFmdGVyRGF0YXNldHNVcGRhdGUgKGNoYXJ0LCBfYXJncywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb3VudCA9IChjaGFydC5kYXRhLmRhdGFzZXRzIHx8IFtdKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHNvdXJjZXMgPSBbXTtcbiAgICAgICAgbGV0IG1ldGEsIGksIGxpbmUsIHNvdXJjZTtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgY291bnQ7ICsraSl7XG4gICAgICAgICAgICBtZXRhID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoaSk7XG4gICAgICAgICAgICBsaW5lID0gbWV0YS5kYXRhc2V0O1xuICAgICAgICAgICAgc291cmNlID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChsaW5lICYmIGxpbmUub3B0aW9ucyAmJiBsaW5lIGluc3RhbmNlb2YgTGluZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGNoYXJ0LmlzRGF0YXNldFZpc2libGUoaSksXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBfZGVjb2RlRmlsbChsaW5lLCBpLCBjb3VudCksXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LFxuICAgICAgICAgICAgICAgICAgICBheGlzOiBtZXRhLmNvbnRyb2xsZXIub3B0aW9ucy5pbmRleEF4aXMsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBtZXRhLnZTY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgbGluZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXRhLiRmaWxsZXIgPSBzb3VyY2U7XG4gICAgICAgICAgICBzb3VyY2VzLnB1c2goc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBjb3VudDsgKytpKXtcbiAgICAgICAgICAgIHNvdXJjZSA9IHNvdXJjZXNbaV07XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSB8fCBzb3VyY2UuZmlsbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdXJjZS5maWxsID0gX3Jlc29sdmVUYXJnZXQoc291cmNlcywgaSwgb3B0aW9ucy5wcm9wYWdhdGUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBiZWZvcmVEcmF3IChjaGFydCwgX2FyZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZHJhdyA9IG9wdGlvbnMuZHJhd1RpbWUgPT09ICdiZWZvcmVEcmF3JztcbiAgICAgICAgY29uc3QgbWV0YXNldHMgPSBjaGFydC5nZXRTb3J0ZWRWaXNpYmxlRGF0YXNldE1ldGFzKCk7XG4gICAgICAgIGNvbnN0IGFyZWEgPSBjaGFydC5jaGFydEFyZWE7XG4gICAgICAgIGZvcihsZXQgaSA9IG1ldGFzZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKXtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IG1ldGFzZXRzW2ldLiRmaWxsZXI7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc291cmNlLmxpbmUudXBkYXRlQ29udHJvbFBvaW50cyhhcmVhLCBzb3VyY2UuYXhpcyk7XG4gICAgICAgICAgICBpZiAoZHJhdyAmJiBzb3VyY2UuZmlsbCkge1xuICAgICAgICAgICAgICAgIF9kcmF3ZmlsbChjaGFydC5jdHgsIHNvdXJjZSwgYXJlYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGJlZm9yZURhdGFzZXRzRHJhdyAoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmRyYXdUaW1lICE9PSAnYmVmb3JlRGF0YXNldHNEcmF3Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1ldGFzZXRzID0gY2hhcnQuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpO1xuICAgICAgICBmb3IobGV0IGkgPSBtZXRhc2V0cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSl7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBtZXRhc2V0c1tpXS4kZmlsbGVyO1xuICAgICAgICAgICAgaWYgKF9zaG91bGRBcHBseUZpbGwoc291cmNlKSkge1xuICAgICAgICAgICAgICAgIF9kcmF3ZmlsbChjaGFydC5jdHgsIHNvdXJjZSwgY2hhcnQuY2hhcnRBcmVhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgYmVmb3JlRGF0YXNldERyYXcgKGNoYXJ0LCBhcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGFyZ3MubWV0YS4kZmlsbGVyO1xuICAgICAgICBpZiAoIV9zaG91bGRBcHBseUZpbGwoc291cmNlKSB8fCBvcHRpb25zLmRyYXdUaW1lICE9PSAnYmVmb3JlRGF0YXNldERyYXcnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgX2RyYXdmaWxsKGNoYXJ0LmN0eCwgc291cmNlLCBjaGFydC5jaGFydEFyZWEpO1xuICAgIH0sXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgICAgICBkcmF3VGltZTogJ2JlZm9yZURhdGFzZXREcmF3J1xuICAgIH1cbn07XG5cbmNvbnN0IGdldEJveFNpemUgPSAobGFiZWxPcHRzLCBmb250U2l6ZSk9PntcbiAgICBsZXQgeyBib3hIZWlnaHQgPWZvbnRTaXplICwgYm94V2lkdGggPWZvbnRTaXplICB9ID0gbGFiZWxPcHRzO1xuICAgIGlmIChsYWJlbE9wdHMudXNlUG9pbnRTdHlsZSkge1xuICAgICAgICBib3hIZWlnaHQgPSBNYXRoLm1pbihib3hIZWlnaHQsIGZvbnRTaXplKTtcbiAgICAgICAgYm94V2lkdGggPSBsYWJlbE9wdHMucG9pbnRTdHlsZVdpZHRoIHx8IE1hdGgubWluKGJveFdpZHRoLCBmb250U2l6ZSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGJveFdpZHRoLFxuICAgICAgICBib3hIZWlnaHQsXG4gICAgICAgIGl0ZW1IZWlnaHQ6IE1hdGgubWF4KGZvbnRTaXplLCBib3hIZWlnaHQpXG4gICAgfTtcbn07XG5jb25zdCBpdGVtc0VxdWFsID0gKGEsIGIpPT5hICE9PSBudWxsICYmIGIgIT09IG51bGwgJiYgYS5kYXRhc2V0SW5kZXggPT09IGIuZGF0YXNldEluZGV4ICYmIGEuaW5kZXggPT09IGIuaW5kZXg7XG5jbGFzcyBMZWdlbmQgZXh0ZW5kcyBFbGVtZW50IHtcbiBjb25zdHJ1Y3Rvcihjb25maWcpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9hZGRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxlZ2VuZEhpdEJveGVzID0gW107XG4gdGhpcy5faG92ZXJlZEl0ZW0gPSBudWxsO1xuICAgICAgICB0aGlzLmRvdWdobnV0TW9kZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNoYXJ0ID0gY29uZmlnLmNoYXJ0O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBjb25maWcub3B0aW9ucztcbiAgICAgICAgdGhpcy5jdHggPSBjb25maWcuY3R4O1xuICAgICAgICB0aGlzLmxlZ2VuZEl0ZW1zID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbHVtblNpemVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmxpbmVXaWR0aHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm1heFdpZHRoID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRvcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5ib3R0b20gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubGVmdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yaWdodCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2lkdGggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX21hcmdpbnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2VpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmZ1bGxTaXplID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB1cGRhdGUobWF4V2lkdGgsIG1heEhlaWdodCwgbWFyZ2lucykge1xuICAgICAgICB0aGlzLm1heFdpZHRoID0gbWF4V2lkdGg7XG4gICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gbWF4SGVpZ2h0O1xuICAgICAgICB0aGlzLl9tYXJnaW5zID0gbWFyZ2lucztcbiAgICAgICAgdGhpcy5zZXREaW1lbnNpb25zKCk7XG4gICAgICAgIHRoaXMuYnVpbGRMYWJlbHMoKTtcbiAgICAgICAgdGhpcy5maXQoKTtcbiAgICB9XG4gICAgc2V0RGltZW5zaW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSB0aGlzLm1heFdpZHRoO1xuICAgICAgICAgICAgdGhpcy5sZWZ0ID0gdGhpcy5fbWFyZ2lucy5sZWZ0O1xuICAgICAgICAgICAgdGhpcy5yaWdodCA9IHRoaXMud2lkdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMubWF4SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy50b3AgPSB0aGlzLl9tYXJnaW5zLnRvcDtcbiAgICAgICAgICAgIHRoaXMuYm90dG9tID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYnVpbGRMYWJlbHMoKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsT3B0cyA9IHRoaXMub3B0aW9ucy5sYWJlbHMgfHwge307XG4gICAgICAgIGxldCBsZWdlbmRJdGVtcyA9IGNhbGxiYWNrKGxhYmVsT3B0cy5nZW5lcmF0ZUxhYmVscywgW1xuICAgICAgICAgICAgdGhpcy5jaGFydFxuICAgICAgICBdLCB0aGlzKSB8fCBbXTtcbiAgICAgICAgaWYgKGxhYmVsT3B0cy5maWx0ZXIpIHtcbiAgICAgICAgICAgIGxlZ2VuZEl0ZW1zID0gbGVnZW5kSXRlbXMuZmlsdGVyKChpdGVtKT0+bGFiZWxPcHRzLmZpbHRlcihpdGVtLCB0aGlzLmNoYXJ0LmRhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFiZWxPcHRzLnNvcnQpIHtcbiAgICAgICAgICAgIGxlZ2VuZEl0ZW1zID0gbGVnZW5kSXRlbXMuc29ydCgoYSwgYik9PmxhYmVsT3B0cy5zb3J0KGEsIGIsIHRoaXMuY2hhcnQuZGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmV2ZXJzZSkge1xuICAgICAgICAgICAgbGVnZW5kSXRlbXMucmV2ZXJzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGVnZW5kSXRlbXMgPSBsZWdlbmRJdGVtcztcbiAgICB9XG4gICAgZml0KCkge1xuICAgICAgICBjb25zdCB7IG9wdGlvbnMgLCBjdHggIH0gPSB0aGlzO1xuICAgICAgICBpZiAoIW9wdGlvbnMuZGlzcGxheSkge1xuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuaGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsYWJlbE9wdHMgPSBvcHRpb25zLmxhYmVscztcbiAgICAgICAgY29uc3QgbGFiZWxGb250ID0gdG9Gb250KGxhYmVsT3B0cy5mb250KTtcbiAgICAgICAgY29uc3QgZm9udFNpemUgPSBsYWJlbEZvbnQuc2l6ZTtcbiAgICAgICAgY29uc3QgdGl0bGVIZWlnaHQgPSB0aGlzLl9jb21wdXRlVGl0bGVIZWlnaHQoKTtcbiAgICAgICAgY29uc3QgeyBib3hXaWR0aCAsIGl0ZW1IZWlnaHQgIH0gPSBnZXRCb3hTaXplKGxhYmVsT3B0cywgZm9udFNpemUpO1xuICAgICAgICBsZXQgd2lkdGgsIGhlaWdodDtcbiAgICAgICAgY3R4LmZvbnQgPSBsYWJlbEZvbnQuc3RyaW5nO1xuICAgICAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgICAgd2lkdGggPSB0aGlzLm1heFdpZHRoO1xuICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5fZml0Um93cyh0aXRsZUhlaWdodCwgZm9udFNpemUsIGJveFdpZHRoLCBpdGVtSGVpZ2h0KSArIDEwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQ7XG4gICAgICAgICAgICB3aWR0aCA9IHRoaXMuX2ZpdENvbHModGl0bGVIZWlnaHQsIGxhYmVsRm9udCwgYm94V2lkdGgsIGl0ZW1IZWlnaHQpICsgMTA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53aWR0aCA9IE1hdGgubWluKHdpZHRoLCBvcHRpb25zLm1heFdpZHRoIHx8IHRoaXMubWF4V2lkdGgpO1xuICAgICAgICB0aGlzLmhlaWdodCA9IE1hdGgubWluKGhlaWdodCwgb3B0aW9ucy5tYXhIZWlnaHQgfHwgdGhpcy5tYXhIZWlnaHQpO1xuICAgIH1cbiBfZml0Um93cyh0aXRsZUhlaWdodCwgZm9udFNpemUsIGJveFdpZHRoLCBpdGVtSGVpZ2h0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4ICwgbWF4V2lkdGggLCBvcHRpb25zOiB7IGxhYmVsczogeyBwYWRkaW5nICB9ICB9ICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgaGl0Ym94ZXMgPSB0aGlzLmxlZ2VuZEhpdEJveGVzID0gW107XG4gICAgICAgIGNvbnN0IGxpbmVXaWR0aHMgPSB0aGlzLmxpbmVXaWR0aHMgPSBbXG4gICAgICAgICAgICAwXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBpdGVtSGVpZ2h0ICsgcGFkZGluZztcbiAgICAgICAgbGV0IHRvdGFsSGVpZ2h0ID0gdGl0bGVIZWlnaHQ7XG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7XG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgbGV0IHJvdyA9IC0xO1xuICAgICAgICBsZXQgdG9wID0gLWxpbmVIZWlnaHQ7XG4gICAgICAgIHRoaXMubGVnZW5kSXRlbXMuZm9yRWFjaCgobGVnZW5kSXRlbSwgaSk9PntcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1XaWR0aCA9IGJveFdpZHRoICsgZm9udFNpemUgLyAyICsgY3R4Lm1lYXN1cmVUZXh0KGxlZ2VuZEl0ZW0udGV4dCkud2lkdGg7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBsaW5lV2lkdGhzW2xpbmVXaWR0aHMubGVuZ3RoIC0gMV0gKyBpdGVtV2lkdGggKyAyICogcGFkZGluZyA+IG1heFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgdG90YWxIZWlnaHQgKz0gbGluZUhlaWdodDtcbiAgICAgICAgICAgICAgICBsaW5lV2lkdGhzW2xpbmVXaWR0aHMubGVuZ3RoIC0gKGkgPiAwID8gMCA6IDEpXSA9IDA7XG4gICAgICAgICAgICAgICAgdG9wICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgcm93Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoaXRib3hlc1tpXSA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIHRvcCxcbiAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgd2lkdGg6IGl0ZW1XaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGl0ZW1IZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsaW5lV2lkdGhzW2xpbmVXaWR0aHMubGVuZ3RoIC0gMV0gKz0gaXRlbVdpZHRoICsgcGFkZGluZztcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0b3RhbEhlaWdodDtcbiAgICB9XG4gICAgX2ZpdENvbHModGl0bGVIZWlnaHQsIGxhYmVsRm9udCwgYm94V2lkdGgsIF9pdGVtSGVpZ2h0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4ICwgbWF4SGVpZ2h0ICwgb3B0aW9uczogeyBsYWJlbHM6IHsgcGFkZGluZyAgfSAgfSAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGhpdGJveGVzID0gdGhpcy5sZWdlbmRIaXRCb3hlcyA9IFtdO1xuICAgICAgICBjb25zdCBjb2x1bW5TaXplcyA9IHRoaXMuY29sdW1uU2l6ZXMgPSBbXTtcbiAgICAgICAgY29uc3QgaGVpZ2h0TGltaXQgPSBtYXhIZWlnaHQgLSB0aXRsZUhlaWdodDtcbiAgICAgICAgbGV0IHRvdGFsV2lkdGggPSBwYWRkaW5nO1xuICAgICAgICBsZXQgY3VycmVudENvbFdpZHRoID0gMDtcbiAgICAgICAgbGV0IGN1cnJlbnRDb2xIZWlnaHQgPSAwO1xuICAgICAgICBsZXQgbGVmdCA9IDA7XG4gICAgICAgIGxldCBjb2wgPSAwO1xuICAgICAgICB0aGlzLmxlZ2VuZEl0ZW1zLmZvckVhY2goKGxlZ2VuZEl0ZW0sIGkpPT57XG4gICAgICAgICAgICBjb25zdCB7IGl0ZW1XaWR0aCAsIGl0ZW1IZWlnaHQgIH0gPSBjYWxjdWxhdGVJdGVtU2l6ZShib3hXaWR0aCwgbGFiZWxGb250LCBjdHgsIGxlZ2VuZEl0ZW0sIF9pdGVtSGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChpID4gMCAmJiBjdXJyZW50Q29sSGVpZ2h0ICsgaXRlbUhlaWdodCArIDIgKiBwYWRkaW5nID4gaGVpZ2h0TGltaXQpIHtcbiAgICAgICAgICAgICAgICB0b3RhbFdpZHRoICs9IGN1cnJlbnRDb2xXaWR0aCArIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgY29sdW1uU2l6ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBjdXJyZW50Q29sV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogY3VycmVudENvbEhlaWdodFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxlZnQgKz0gY3VycmVudENvbFdpZHRoICsgcGFkZGluZztcbiAgICAgICAgICAgICAgICBjb2wrKztcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29sV2lkdGggPSBjdXJyZW50Q29sSGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhpdGJveGVzW2ldID0ge1xuICAgICAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICAgICAgdG9wOiBjdXJyZW50Q29sSGVpZ2h0LFxuICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICB3aWR0aDogaXRlbVdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaXRlbUhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGN1cnJlbnRDb2xXaWR0aCA9IE1hdGgubWF4KGN1cnJlbnRDb2xXaWR0aCwgaXRlbVdpZHRoKTtcbiAgICAgICAgICAgIGN1cnJlbnRDb2xIZWlnaHQgKz0gaXRlbUhlaWdodCArIHBhZGRpbmc7XG4gICAgICAgIH0pO1xuICAgICAgICB0b3RhbFdpZHRoICs9IGN1cnJlbnRDb2xXaWR0aDtcbiAgICAgICAgY29sdW1uU2l6ZXMucHVzaCh7XG4gICAgICAgICAgICB3aWR0aDogY3VycmVudENvbFdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBjdXJyZW50Q29sSGVpZ2h0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdG90YWxXaWR0aDtcbiAgICB9XG4gICAgYWRqdXN0SGl0Qm94ZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRpc3BsYXkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aXRsZUhlaWdodCA9IHRoaXMuX2NvbXB1dGVUaXRsZUhlaWdodCgpO1xuICAgICAgICBjb25zdCB7IGxlZ2VuZEhpdEJveGVzOiBoaXRib3hlcyAsIG9wdGlvbnM6IHsgYWxpZ24gLCBsYWJlbHM6IHsgcGFkZGluZyAgfSAsIHJ0bCAgfSAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHJ0bEhlbHBlciA9IGdldFJ0bEFkYXB0ZXIocnRsLCB0aGlzLmxlZnQsIHRoaXMud2lkdGgpO1xuICAgICAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgICAgbGV0IHJvdyA9IDA7XG4gICAgICAgICAgICBsZXQgbGVmdCA9IF9hbGlnblN0YXJ0RW5kKGFsaWduLCB0aGlzLmxlZnQgKyBwYWRkaW5nLCB0aGlzLnJpZ2h0IC0gdGhpcy5saW5lV2lkdGhzW3Jvd10pO1xuICAgICAgICAgICAgZm9yIChjb25zdCBoaXRib3ggb2YgaGl0Ym94ZXMpe1xuICAgICAgICAgICAgICAgIGlmIChyb3cgIT09IGhpdGJveC5yb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gaGl0Ym94LnJvdztcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IF9hbGlnblN0YXJ0RW5kKGFsaWduLCB0aGlzLmxlZnQgKyBwYWRkaW5nLCB0aGlzLnJpZ2h0IC0gdGhpcy5saW5lV2lkdGhzW3Jvd10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoaXRib3gudG9wICs9IHRoaXMudG9wICsgdGl0bGVIZWlnaHQgKyBwYWRkaW5nO1xuICAgICAgICAgICAgICAgIGhpdGJveC5sZWZ0ID0gcnRsSGVscGVyLmxlZnRGb3JMdHIocnRsSGVscGVyLngobGVmdCksIGhpdGJveC53aWR0aCk7XG4gICAgICAgICAgICAgICAgbGVmdCArPSBoaXRib3gud2lkdGggKyBwYWRkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGNvbCA9IDA7XG4gICAgICAgICAgICBsZXQgdG9wID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIHRoaXMudG9wICsgdGl0bGVIZWlnaHQgKyBwYWRkaW5nLCB0aGlzLmJvdHRvbSAtIHRoaXMuY29sdW1uU2l6ZXNbY29sXS5oZWlnaHQpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBoaXRib3gxIG9mIGhpdGJveGVzKXtcbiAgICAgICAgICAgICAgICBpZiAoaGl0Ym94MS5jb2wgIT09IGNvbCkge1xuICAgICAgICAgICAgICAgICAgICBjb2wgPSBoaXRib3gxLmNvbDtcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIHRoaXMudG9wICsgdGl0bGVIZWlnaHQgKyBwYWRkaW5nLCB0aGlzLmJvdHRvbSAtIHRoaXMuY29sdW1uU2l6ZXNbY29sXS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoaXRib3gxLnRvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICBoaXRib3gxLmxlZnQgKz0gdGhpcy5sZWZ0ICsgcGFkZGluZztcbiAgICAgICAgICAgICAgICBoaXRib3gxLmxlZnQgPSBydGxIZWxwZXIubGVmdEZvckx0cihydGxIZWxwZXIueChoaXRib3gxLmxlZnQpLCBoaXRib3gxLndpZHRoKTtcbiAgICAgICAgICAgICAgICB0b3AgKz0gaGl0Ym94MS5oZWlnaHQgKyBwYWRkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlzSG9yaXpvbnRhbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gJ3RvcCcgfHwgdGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSAnYm90dG9tJztcbiAgICB9XG4gICAgZHJhdygpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNwbGF5KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICAgICAgICAgIGNsaXBBcmVhKGN0eCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9kcmF3KCk7XG4gICAgICAgICAgICB1bmNsaXBBcmVhKGN0eCk7XG4gICAgICAgIH1cbiAgICB9XG4gX2RyYXcoKSB7XG4gICAgICAgIGNvbnN0IHsgb3B0aW9uczogb3B0cyAsIGNvbHVtblNpemVzICwgbGluZVdpZHRocyAsIGN0eCAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHsgYWxpZ24gLCBsYWJlbHM6IGxhYmVsT3B0cyAgfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDb2xvciA9IGRlZmF1bHRzLmNvbG9yO1xuICAgICAgICBjb25zdCBydGxIZWxwZXIgPSBnZXRSdGxBZGFwdGVyKG9wdHMucnRsLCB0aGlzLmxlZnQsIHRoaXMud2lkdGgpO1xuICAgICAgICBjb25zdCBsYWJlbEZvbnQgPSB0b0ZvbnQobGFiZWxPcHRzLmZvbnQpO1xuICAgICAgICBjb25zdCB7IHBhZGRpbmcgIH0gPSBsYWJlbE9wdHM7XG4gICAgICAgIGNvbnN0IGZvbnRTaXplID0gbGFiZWxGb250LnNpemU7XG4gICAgICAgIGNvbnN0IGhhbGZGb250U2l6ZSA9IGZvbnRTaXplIC8gMjtcbiAgICAgICAgbGV0IGN1cnNvcjtcbiAgICAgICAgdGhpcy5kcmF3VGl0bGUoKTtcbiAgICAgICAgY3R4LnRleHRBbGlnbiA9IHJ0bEhlbHBlci50ZXh0QWxpZ24oJ2xlZnQnKTtcbiAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gMC41O1xuICAgICAgICBjdHguZm9udCA9IGxhYmVsRm9udC5zdHJpbmc7XG4gICAgICAgIGNvbnN0IHsgYm94V2lkdGggLCBib3hIZWlnaHQgLCBpdGVtSGVpZ2h0ICB9ID0gZ2V0Qm94U2l6ZShsYWJlbE9wdHMsIGZvbnRTaXplKTtcbiAgICAgICAgY29uc3QgZHJhd0xlZ2VuZEJveCA9IGZ1bmN0aW9uKHgsIHksIGxlZ2VuZEl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpc05hTihib3hXaWR0aCkgfHwgYm94V2lkdGggPD0gMCB8fCBpc05hTihib3hIZWlnaHQpIHx8IGJveEhlaWdodCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY29uc3QgbGluZVdpZHRoID0gdmFsdWVPckRlZmF1bHQobGVnZW5kSXRlbS5saW5lV2lkdGgsIDEpO1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHZhbHVlT3JEZWZhdWx0KGxlZ2VuZEl0ZW0uZmlsbFN0eWxlLCBkZWZhdWx0Q29sb3IpO1xuICAgICAgICAgICAgY3R4LmxpbmVDYXAgPSB2YWx1ZU9yRGVmYXVsdChsZWdlbmRJdGVtLmxpbmVDYXAsICdidXR0Jyk7XG4gICAgICAgICAgICBjdHgubGluZURhc2hPZmZzZXQgPSB2YWx1ZU9yRGVmYXVsdChsZWdlbmRJdGVtLmxpbmVEYXNoT2Zmc2V0LCAwKTtcbiAgICAgICAgICAgIGN0eC5saW5lSm9pbiA9IHZhbHVlT3JEZWZhdWx0KGxlZ2VuZEl0ZW0ubGluZUpvaW4sICdtaXRlcicpO1xuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHZhbHVlT3JEZWZhdWx0KGxlZ2VuZEl0ZW0uc3Ryb2tlU3R5bGUsIGRlZmF1bHRDb2xvcik7XG4gICAgICAgICAgICBjdHguc2V0TGluZURhc2godmFsdWVPckRlZmF1bHQobGVnZW5kSXRlbS5saW5lRGFzaCwgW10pKTtcbiAgICAgICAgICAgIGlmIChsYWJlbE9wdHMudXNlUG9pbnRTdHlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRyYXdPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IGJveEhlaWdodCAqIE1hdGguU1FSVDIgLyAyLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFN0eWxlOiBsZWdlbmRJdGVtLnBvaW50U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBsZWdlbmRJdGVtLnJvdGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogbGluZVdpZHRoXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXJYID0gcnRsSGVscGVyLnhQbHVzKHgsIGJveFdpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VudGVyWSA9IHkgKyBoYWxmRm9udFNpemU7XG4gICAgICAgICAgICAgICAgZHJhd1BvaW50TGVnZW5kKGN0eCwgZHJhd09wdGlvbnMsIGNlbnRlclgsIGNlbnRlclksIGxhYmVsT3B0cy5wb2ludFN0eWxlV2lkdGggJiYgYm94V2lkdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB5Qm94VG9wID0geSArIE1hdGgubWF4KChmb250U2l6ZSAtIGJveEhlaWdodCkgLyAyLCAwKTtcbiAgICAgICAgICAgICAgICBjb25zdCB4Qm94TGVmdCA9IHJ0bEhlbHBlci5sZWZ0Rm9yTHRyKHgsIGJveFdpZHRoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3JkZXJSYWRpdXMgPSB0b1RSQkxDb3JuZXJzKGxlZ2VuZEl0ZW0uYm9yZGVyUmFkaXVzKTtcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoYm9yZGVyUmFkaXVzKS5zb21lKCh2KT0+diAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUm91bmRlZFJlY3RQYXRoKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogeEJveExlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiB5Qm94VG9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgdzogYm94V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoOiBib3hIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM6IGJvcmRlclJhZGl1c1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjdHgucmVjdCh4Qm94TGVmdCwgeUJveFRvcCwgYm94V2lkdGgsIGJveEhlaWdodCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVXaWR0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmlsbFRleHQgPSBmdW5jdGlvbih4LCB5LCBsZWdlbmRJdGVtKSB7XG4gICAgICAgICAgICByZW5kZXJUZXh0KGN0eCwgbGVnZW5kSXRlbS50ZXh0LCB4LCB5ICsgaXRlbUhlaWdodCAvIDIsIGxhYmVsRm9udCwge1xuICAgICAgICAgICAgICAgIHN0cmlrZXRocm91Z2g6IGxlZ2VuZEl0ZW0uaGlkZGVuLFxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogcnRsSGVscGVyLnRleHRBbGlnbihsZWdlbmRJdGVtLnRleHRBbGlnbilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSB0aGlzLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgICBjb25zdCB0aXRsZUhlaWdodCA9IHRoaXMuX2NvbXB1dGVUaXRsZUhlaWdodCgpO1xuICAgICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICAgICAgICBjdXJzb3IgPSB7XG4gICAgICAgICAgICAgICAgeDogX2FsaWduU3RhcnRFbmQoYWxpZ24sIHRoaXMubGVmdCArIHBhZGRpbmcsIHRoaXMucmlnaHQgLSBsaW5lV2lkdGhzWzBdKSxcbiAgICAgICAgICAgICAgICB5OiB0aGlzLnRvcCArIHBhZGRpbmcgKyB0aXRsZUhlaWdodCxcbiAgICAgICAgICAgICAgICBsaW5lOiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3Vyc29yID0ge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMubGVmdCArIHBhZGRpbmcsXG4gICAgICAgICAgICAgICAgeTogX2FsaWduU3RhcnRFbmQoYWxpZ24sIHRoaXMudG9wICsgdGl0bGVIZWlnaHQgKyBwYWRkaW5nLCB0aGlzLmJvdHRvbSAtIGNvbHVtblNpemVzWzBdLmhlaWdodCksXG4gICAgICAgICAgICAgICAgbGluZTogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBvdmVycmlkZVRleHREaXJlY3Rpb24odGhpcy5jdHgsIG9wdHMudGV4dERpcmVjdGlvbik7XG4gICAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBpdGVtSGVpZ2h0ICsgcGFkZGluZztcbiAgICAgICAgdGhpcy5sZWdlbmRJdGVtcy5mb3JFYWNoKChsZWdlbmRJdGVtLCBpKT0+e1xuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gbGVnZW5kSXRlbS5mb250Q29sb3I7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gbGVnZW5kSXRlbS5mb250Q29sb3I7XG4gICAgICAgICAgICBjb25zdCB0ZXh0V2lkdGggPSBjdHgubWVhc3VyZVRleHQobGVnZW5kSXRlbS50ZXh0KS53aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IHRleHRBbGlnbiA9IHJ0bEhlbHBlci50ZXh0QWxpZ24obGVnZW5kSXRlbS50ZXh0QWxpZ24gfHwgKGxlZ2VuZEl0ZW0udGV4dEFsaWduID0gbGFiZWxPcHRzLnRleHRBbGlnbikpO1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBib3hXaWR0aCArIGhhbGZGb250U2l6ZSArIHRleHRXaWR0aDtcbiAgICAgICAgICAgIGxldCB4ID0gY3Vyc29yLng7XG4gICAgICAgICAgICBsZXQgeSA9IGN1cnNvci55O1xuICAgICAgICAgICAgcnRsSGVscGVyLnNldFdpZHRoKHRoaXMud2lkdGgpO1xuICAgICAgICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgICAgIGlmIChpID4gMCAmJiB4ICsgd2lkdGggKyBwYWRkaW5nID4gdGhpcy5yaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB5ID0gY3Vyc29yLnkgKz0gbGluZUhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmxpbmUrKztcbiAgICAgICAgICAgICAgICAgICAgeCA9IGN1cnNvci54ID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIHRoaXMubGVmdCArIHBhZGRpbmcsIHRoaXMucmlnaHQgLSBsaW5lV2lkdGhzW2N1cnNvci5saW5lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpID4gMCAmJiB5ICsgbGluZUhlaWdodCA+IHRoaXMuYm90dG9tKSB7XG4gICAgICAgICAgICAgICAgeCA9IGN1cnNvci54ID0geCArIGNvbHVtblNpemVzW2N1cnNvci5saW5lXS53aWR0aCArIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgY3Vyc29yLmxpbmUrKztcbiAgICAgICAgICAgICAgICB5ID0gY3Vyc29yLnkgPSBfYWxpZ25TdGFydEVuZChhbGlnbiwgdGhpcy50b3AgKyB0aXRsZUhlaWdodCArIHBhZGRpbmcsIHRoaXMuYm90dG9tIC0gY29sdW1uU2l6ZXNbY3Vyc29yLmxpbmVdLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZWFsWCA9IHJ0bEhlbHBlci54KHgpO1xuICAgICAgICAgICAgZHJhd0xlZ2VuZEJveChyZWFsWCwgeSwgbGVnZW5kSXRlbSk7XG4gICAgICAgICAgICB4ID0gX3RleHRYKHRleHRBbGlnbiwgeCArIGJveFdpZHRoICsgaGFsZkZvbnRTaXplLCBpc0hvcml6b250YWwgPyB4ICsgd2lkdGggOiB0aGlzLnJpZ2h0LCBvcHRzLnJ0bCk7XG4gICAgICAgICAgICBmaWxsVGV4dChydGxIZWxwZXIueCh4KSwgeSwgbGVnZW5kSXRlbSk7XG4gICAgICAgICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICAgICAgICAgICAgY3Vyc29yLnggKz0gd2lkdGggKyBwYWRkaW5nO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbGVnZW5kSXRlbS50ZXh0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvbnRMaW5lSGVpZ2h0ID0gbGFiZWxGb250LmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgY3Vyc29yLnkgKz0gY2FsY3VsYXRlTGVnZW5kSXRlbUhlaWdodChsZWdlbmRJdGVtLCBmb250TGluZUhlaWdodCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnNvci55ICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXN0b3JlVGV4dERpcmVjdGlvbih0aGlzLmN0eCwgb3B0cy50ZXh0RGlyZWN0aW9uKTtcbiAgICB9XG4gZHJhd1RpdGxlKCkge1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCB0aXRsZU9wdHMgPSBvcHRzLnRpdGxlO1xuICAgICAgICBjb25zdCB0aXRsZUZvbnQgPSB0b0ZvbnQodGl0bGVPcHRzLmZvbnQpO1xuICAgICAgICBjb25zdCB0aXRsZVBhZGRpbmcgPSB0b1BhZGRpbmcodGl0bGVPcHRzLnBhZGRpbmcpO1xuICAgICAgICBpZiAoIXRpdGxlT3B0cy5kaXNwbGF5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnRsSGVscGVyID0gZ2V0UnRsQWRhcHRlcihvcHRzLnJ0bCwgdGhpcy5sZWZ0LCB0aGlzLndpZHRoKTtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGl0bGVPcHRzLnBvc2l0aW9uO1xuICAgICAgICBjb25zdCBoYWxmRm9udFNpemUgPSB0aXRsZUZvbnQuc2l6ZSAvIDI7XG4gICAgICAgIGNvbnN0IHRvcFBhZGRpbmdQbHVzSGFsZkZvbnRTaXplID0gdGl0bGVQYWRkaW5nLnRvcCArIGhhbGZGb250U2l6ZTtcbiAgICAgICAgbGV0IHk7XG4gICAgICAgIGxldCBsZWZ0ID0gdGhpcy5sZWZ0O1xuICAgICAgICBsZXQgbWF4V2lkdGggPSB0aGlzLndpZHRoO1xuICAgICAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgICAgbWF4V2lkdGggPSBNYXRoLm1heCguLi50aGlzLmxpbmVXaWR0aHMpO1xuICAgICAgICAgICAgeSA9IHRoaXMudG9wICsgdG9wUGFkZGluZ1BsdXNIYWxmRm9udFNpemU7XG4gICAgICAgICAgICBsZWZ0ID0gX2FsaWduU3RhcnRFbmQob3B0cy5hbGlnbiwgbGVmdCwgdGhpcy5yaWdodCAtIG1heFdpZHRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG1heEhlaWdodCA9IHRoaXMuY29sdW1uU2l6ZXMucmVkdWNlKChhY2MsIHNpemUpPT5NYXRoLm1heChhY2MsIHNpemUuaGVpZ2h0KSwgMCk7XG4gICAgICAgICAgICB5ID0gdG9wUGFkZGluZ1BsdXNIYWxmRm9udFNpemUgKyBfYWxpZ25TdGFydEVuZChvcHRzLmFsaWduLCB0aGlzLnRvcCwgdGhpcy5ib3R0b20gLSBtYXhIZWlnaHQgLSBvcHRzLmxhYmVscy5wYWRkaW5nIC0gdGhpcy5fY29tcHV0ZVRpdGxlSGVpZ2h0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHggPSBfYWxpZ25TdGFydEVuZChwb3NpdGlvbiwgbGVmdCwgbGVmdCArIG1heFdpZHRoKTtcbiAgICAgICAgY3R4LnRleHRBbGlnbiA9IHJ0bEhlbHBlci50ZXh0QWxpZ24oX3RvTGVmdFJpZ2h0Q2VudGVyKHBvc2l0aW9uKSk7XG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGl0bGVPcHRzLmNvbG9yO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gdGl0bGVPcHRzLmNvbG9yO1xuICAgICAgICBjdHguZm9udCA9IHRpdGxlRm9udC5zdHJpbmc7XG4gICAgICAgIHJlbmRlclRleHQoY3R4LCB0aXRsZU9wdHMudGV4dCwgeCwgeSwgdGl0bGVGb250KTtcbiAgICB9XG4gX2NvbXB1dGVUaXRsZUhlaWdodCgpIHtcbiAgICAgICAgY29uc3QgdGl0bGVPcHRzID0gdGhpcy5vcHRpb25zLnRpdGxlO1xuICAgICAgICBjb25zdCB0aXRsZUZvbnQgPSB0b0ZvbnQodGl0bGVPcHRzLmZvbnQpO1xuICAgICAgICBjb25zdCB0aXRsZVBhZGRpbmcgPSB0b1BhZGRpbmcodGl0bGVPcHRzLnBhZGRpbmcpO1xuICAgICAgICByZXR1cm4gdGl0bGVPcHRzLmRpc3BsYXkgPyB0aXRsZUZvbnQubGluZUhlaWdodCArIHRpdGxlUGFkZGluZy5oZWlnaHQgOiAwO1xuICAgIH1cbiBfZ2V0TGVnZW5kSXRlbUF0KHgsIHkpIHtcbiAgICAgICAgbGV0IGksIGhpdEJveCwgbGg7XG4gICAgICAgIGlmIChfaXNCZXR3ZWVuKHgsIHRoaXMubGVmdCwgdGhpcy5yaWdodCkgJiYgX2lzQmV0d2Vlbih5LCB0aGlzLnRvcCwgdGhpcy5ib3R0b20pKSB7XG4gICAgICAgICAgICBsaCA9IHRoaXMubGVnZW5kSGl0Qm94ZXM7XG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBsaC5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICAgICAgaGl0Qm94ID0gbGhbaV07XG4gICAgICAgICAgICAgICAgaWYgKF9pc0JldHdlZW4oeCwgaGl0Qm94LmxlZnQsIGhpdEJveC5sZWZ0ICsgaGl0Qm94LndpZHRoKSAmJiBfaXNCZXR3ZWVuKHksIGhpdEJveC50b3AsIGhpdEJveC50b3AgKyBoaXRCb3guaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sZWdlbmRJdGVtc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuIGhhbmRsZUV2ZW50KGUpIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgaWYgKCFpc0xpc3RlbmVkKGUudHlwZSwgb3B0cykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3ZlcmVkSXRlbSA9IHRoaXMuX2dldExlZ2VuZEl0ZW1BdChlLngsIGUueSk7XG4gICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZW1vdmUnIHx8IGUudHlwZSA9PT0gJ21vdXNlb3V0Jykge1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXMgPSB0aGlzLl9ob3ZlcmVkSXRlbTtcbiAgICAgICAgICAgIGNvbnN0IHNhbWVJdGVtID0gaXRlbXNFcXVhbChwcmV2aW91cywgaG92ZXJlZEl0ZW0pO1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzICYmICFzYW1lSXRlbSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG9wdHMub25MZWF2ZSwgW1xuICAgICAgICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91cyxcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgIF0sIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5faG92ZXJlZEl0ZW0gPSBob3ZlcmVkSXRlbTtcbiAgICAgICAgICAgIGlmIChob3ZlcmVkSXRlbSAmJiAhc2FtZUl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhvcHRzLm9uSG92ZXIsIFtcbiAgICAgICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJlZEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICBdLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChob3ZlcmVkSXRlbSkge1xuICAgICAgICAgICAgY2FsbGJhY2sob3B0cy5vbkNsaWNrLCBbXG4gICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICBob3ZlcmVkSXRlbSxcbiAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICBdLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNhbGN1bGF0ZUl0ZW1TaXplKGJveFdpZHRoLCBsYWJlbEZvbnQsIGN0eCwgbGVnZW5kSXRlbSwgX2l0ZW1IZWlnaHQpIHtcbiAgICBjb25zdCBpdGVtV2lkdGggPSBjYWxjdWxhdGVJdGVtV2lkdGgobGVnZW5kSXRlbSwgYm94V2lkdGgsIGxhYmVsRm9udCwgY3R4KTtcbiAgICBjb25zdCBpdGVtSGVpZ2h0ID0gY2FsY3VsYXRlSXRlbUhlaWdodChfaXRlbUhlaWdodCwgbGVnZW5kSXRlbSwgbGFiZWxGb250LmxpbmVIZWlnaHQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGl0ZW1XaWR0aCxcbiAgICAgICAgaXRlbUhlaWdodFxuICAgIH07XG59XG5mdW5jdGlvbiBjYWxjdWxhdGVJdGVtV2lkdGgobGVnZW5kSXRlbSwgYm94V2lkdGgsIGxhYmVsRm9udCwgY3R4KSB7XG4gICAgbGV0IGxlZ2VuZEl0ZW1UZXh0ID0gbGVnZW5kSXRlbS50ZXh0O1xuICAgIGlmIChsZWdlbmRJdGVtVGV4dCAmJiB0eXBlb2YgbGVnZW5kSXRlbVRleHQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGxlZ2VuZEl0ZW1UZXh0ID0gbGVnZW5kSXRlbVRleHQucmVkdWNlKChhLCBiKT0+YS5sZW5ndGggPiBiLmxlbmd0aCA/IGEgOiBiKTtcbiAgICB9XG4gICAgcmV0dXJuIGJveFdpZHRoICsgbGFiZWxGb250LnNpemUgLyAyICsgY3R4Lm1lYXN1cmVUZXh0KGxlZ2VuZEl0ZW1UZXh0KS53aWR0aDtcbn1cbmZ1bmN0aW9uIGNhbGN1bGF0ZUl0ZW1IZWlnaHQoX2l0ZW1IZWlnaHQsIGxlZ2VuZEl0ZW0sIGZvbnRMaW5lSGVpZ2h0KSB7XG4gICAgbGV0IGl0ZW1IZWlnaHQgPSBfaXRlbUhlaWdodDtcbiAgICBpZiAodHlwZW9mIGxlZ2VuZEl0ZW0udGV4dCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgaXRlbUhlaWdodCA9IGNhbGN1bGF0ZUxlZ2VuZEl0ZW1IZWlnaHQobGVnZW5kSXRlbSwgZm9udExpbmVIZWlnaHQpO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbUhlaWdodDtcbn1cbmZ1bmN0aW9uIGNhbGN1bGF0ZUxlZ2VuZEl0ZW1IZWlnaHQobGVnZW5kSXRlbSwgZm9udExpbmVIZWlnaHQpIHtcbiAgICBjb25zdCBsYWJlbEhlaWdodCA9IGxlZ2VuZEl0ZW0udGV4dCA/IGxlZ2VuZEl0ZW0udGV4dC5sZW5ndGggKyAwLjUgOiAwO1xuICAgIHJldHVybiBmb250TGluZUhlaWdodCAqIGxhYmVsSGVpZ2h0O1xufVxuZnVuY3Rpb24gaXNMaXN0ZW5lZCh0eXBlLCBvcHRzKSB7XG4gICAgaWYgKCh0eXBlID09PSAnbW91c2Vtb3ZlJyB8fCB0eXBlID09PSAnbW91c2VvdXQnKSAmJiAob3B0cy5vbkhvdmVyIHx8IG9wdHMub25MZWF2ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChvcHRzLm9uQ2xpY2sgJiYgKHR5cGUgPT09ICdjbGljaycgfHwgdHlwZSA9PT0gJ21vdXNldXAnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxudmFyIHBsdWdpbl9sZWdlbmQgPSB7XG4gICAgaWQ6ICdsZWdlbmQnLFxuIF9lbGVtZW50OiBMZWdlbmQsXG4gICAgc3RhcnQgKGNoYXJ0LCBfYXJncywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBsZWdlbmQgPSBjaGFydC5sZWdlbmQgPSBuZXcgTGVnZW5kKHtcbiAgICAgICAgICAgIGN0eDogY2hhcnQuY3R4LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIGNoYXJ0XG4gICAgICAgIH0pO1xuICAgICAgICBsYXlvdXRzLmNvbmZpZ3VyZShjaGFydCwgbGVnZW5kLCBvcHRpb25zKTtcbiAgICAgICAgbGF5b3V0cy5hZGRCb3goY2hhcnQsIGxlZ2VuZCk7XG4gICAgfSxcbiAgICBzdG9wIChjaGFydCkge1xuICAgICAgICBsYXlvdXRzLnJlbW92ZUJveChjaGFydCwgY2hhcnQubGVnZW5kKTtcbiAgICAgICAgZGVsZXRlIGNoYXJ0LmxlZ2VuZDtcbiAgICB9LFxuICAgIGJlZm9yZVVwZGF0ZSAoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGxlZ2VuZCA9IGNoYXJ0LmxlZ2VuZDtcbiAgICAgICAgbGF5b3V0cy5jb25maWd1cmUoY2hhcnQsIGxlZ2VuZCwgb3B0aW9ucyk7XG4gICAgICAgIGxlZ2VuZC5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9LFxuICAgIGFmdGVyVXBkYXRlIChjaGFydCkge1xuICAgICAgICBjb25zdCBsZWdlbmQgPSBjaGFydC5sZWdlbmQ7XG4gICAgICAgIGxlZ2VuZC5idWlsZExhYmVscygpO1xuICAgICAgICBsZWdlbmQuYWRqdXN0SGl0Qm94ZXMoKTtcbiAgICB9LFxuICAgIGFmdGVyRXZlbnQgKGNoYXJ0LCBhcmdzKSB7XG4gICAgICAgIGlmICghYXJncy5yZXBsYXkpIHtcbiAgICAgICAgICAgIGNoYXJ0LmxlZ2VuZC5oYW5kbGVFdmVudChhcmdzLmV2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgcG9zaXRpb246ICd0b3AnLFxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICAgIGZ1bGxTaXplOiB0cnVlLFxuICAgICAgICByZXZlcnNlOiBmYWxzZSxcbiAgICAgICAgd2VpZ2h0OiAxMDAwLFxuICAgICAgICBvbkNsaWNrIChlLCBsZWdlbmRJdGVtLCBsZWdlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbGVnZW5kSXRlbS5kYXRhc2V0SW5kZXg7XG4gICAgICAgICAgICBjb25zdCBjaSA9IGxlZ2VuZC5jaGFydDtcbiAgICAgICAgICAgIGlmIChjaS5pc0RhdGFzZXRWaXNpYmxlKGluZGV4KSkge1xuICAgICAgICAgICAgICAgIGNpLmhpZGUoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGxlZ2VuZEl0ZW0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2kuc2hvdyhpbmRleCk7XG4gICAgICAgICAgICAgICAgbGVnZW5kSXRlbS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25Ib3ZlcjogbnVsbCxcbiAgICAgICAgb25MZWF2ZTogbnVsbCxcbiAgICAgICAgbGFiZWxzOiB7XG4gICAgICAgICAgICBjb2xvcjogKGN0eCk9PmN0eC5jaGFydC5vcHRpb25zLmNvbG9yLFxuICAgICAgICAgICAgYm94V2lkdGg6IDQwLFxuICAgICAgICAgICAgcGFkZGluZzogMTAsXG4gICAgICAgICAgICBnZW5lcmF0ZUxhYmVscyAoY2hhcnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhc2V0cyA9IGNoYXJ0LmRhdGEuZGF0YXNldHM7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBsYWJlbHM6IHsgdXNlUG9pbnRTdHlsZSAsIHBvaW50U3R5bGUgLCB0ZXh0QWxpZ24gLCBjb2xvciAsIHVzZUJvcmRlclJhZGl1cyAsIGJvcmRlclJhZGl1cyAgfSAgfSA9IGNoYXJ0LmxlZ2VuZC5vcHRpb25zO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFydC5fZ2V0U29ydGVkRGF0YXNldE1ldGFzKCkubWFwKChtZXRhKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IG1ldGEuY29udHJvbGxlci5nZXRTdHlsZSh1c2VQb2ludFN0eWxlID8gMCA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvcmRlcldpZHRoID0gdG9QYWRkaW5nKHN0eWxlLmJvcmRlcldpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRhdGFzZXRzW21ldGEuaW5kZXhdLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiBzdHlsZS5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250Q29sb3I6IGNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiAhbWV0YS52aXNpYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUNhcDogc3R5bGUuYm9yZGVyQ2FwU3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lRGFzaDogc3R5bGUuYm9yZGVyRGFzaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVEYXNoT2Zmc2V0OiBzdHlsZS5ib3JkZXJEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUpvaW46IHN0eWxlLmJvcmRlckpvaW5TdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogKGJvcmRlcldpZHRoLndpZHRoICsgYm9yZGVyV2lkdGguaGVpZ2h0KSAvIDQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTdHlsZTogc3R5bGUuYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludFN0eWxlOiBwb2ludFN0eWxlIHx8IHN0eWxlLnBvaW50U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogc3R5bGUucm90YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IHRleHRBbGlnbiB8fCBzdHlsZS50ZXh0QWxpZ24sXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IHVzZUJvcmRlclJhZGl1cyAmJiAoYm9yZGVyUmFkaXVzIHx8IHN0eWxlLmJvcmRlclJhZGl1cyksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0SW5kZXg6IG1ldGEuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgIGNvbG9yOiAoY3R4KT0+Y3R4LmNoYXJ0Lm9wdGlvbnMuY29sb3IsXG4gICAgICAgICAgICBkaXNwbGF5OiBmYWxzZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnY2VudGVyJyxcbiAgICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRlc2NyaXB0b3JzOiB7XG4gICAgICAgIF9zY3JpcHRhYmxlOiAobmFtZSk9PiFuYW1lLnN0YXJ0c1dpdGgoJ29uJyksXG4gICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgX3NjcmlwdGFibGU6IChuYW1lKT0+IVtcbiAgICAgICAgICAgICAgICAgICAgJ2dlbmVyYXRlTGFiZWxzJyxcbiAgICAgICAgICAgICAgICAgICAgJ2ZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgICdzb3J0J1xuICAgICAgICAgICAgICAgIF0uaW5jbHVkZXMobmFtZSlcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmNsYXNzIFRpdGxlIGV4dGVuZHMgRWxlbWVudCB7XG4gY29uc3RydWN0b3IoY29uZmlnKXtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jaGFydCA9IGNvbmZpZy5jaGFydDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gY29uZmlnLm9wdGlvbnM7XG4gICAgICAgIHRoaXMuY3R4ID0gY29uZmlnLmN0eDtcbiAgICAgICAgdGhpcy5fcGFkZGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50b3AgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYm90dG9tID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmxlZnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmlnaHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2lkdGggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLndlaWdodCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5mdWxsU2l6ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdXBkYXRlKG1heFdpZHRoLCBtYXhIZWlnaHQpIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdGhpcy5sZWZ0ID0gMDtcbiAgICAgICAgdGhpcy50b3AgPSAwO1xuICAgICAgICBpZiAoIW9wdHMuZGlzcGxheSkge1xuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuaGVpZ2h0ID0gdGhpcy5yaWdodCA9IHRoaXMuYm90dG9tID0gMDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5yaWdodCA9IG1heFdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuYm90dG9tID0gbWF4SGVpZ2h0O1xuICAgICAgICBjb25zdCBsaW5lQ291bnQgPSBpc0FycmF5KG9wdHMudGV4dCkgPyBvcHRzLnRleHQubGVuZ3RoIDogMTtcbiAgICAgICAgdGhpcy5fcGFkZGluZyA9IHRvUGFkZGluZyhvcHRzLnBhZGRpbmcpO1xuICAgICAgICBjb25zdCB0ZXh0U2l6ZSA9IGxpbmVDb3VudCAqIHRvRm9udChvcHRzLmZvbnQpLmxpbmVIZWlnaHQgKyB0aGlzLl9wYWRkaW5nLmhlaWdodDtcbiAgICAgICAgaWYgKHRoaXMuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gdGV4dFNpemU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGV4dFNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNIb3Jpem9udGFsKCkge1xuICAgICAgICBjb25zdCBwb3MgPSB0aGlzLm9wdGlvbnMucG9zaXRpb247XG4gICAgICAgIHJldHVybiBwb3MgPT09ICd0b3AnIHx8IHBvcyA9PT0gJ2JvdHRvbSc7XG4gICAgfVxuICAgIF9kcmF3QXJncyhvZmZzZXQpIHtcbiAgICAgICAgY29uc3QgeyB0b3AgLCBsZWZ0ICwgYm90dG9tICwgcmlnaHQgLCBvcHRpb25zICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgYWxpZ24gPSBvcHRpb25zLmFsaWduO1xuICAgICAgICBsZXQgcm90YXRpb24gPSAwO1xuICAgICAgICBsZXQgbWF4V2lkdGgsIHRpdGxlWCwgdGl0bGVZO1xuICAgICAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgICAgdGl0bGVYID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIGxlZnQsIHJpZ2h0KTtcbiAgICAgICAgICAgIHRpdGxlWSA9IHRvcCArIG9mZnNldDtcbiAgICAgICAgICAgIG1heFdpZHRoID0gcmlnaHQgLSBsZWZ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIHRpdGxlWCA9IGxlZnQgKyBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgdGl0bGVZID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIGJvdHRvbSwgdG9wKTtcbiAgICAgICAgICAgICAgICByb3RhdGlvbiA9IFBJICogLTAuNTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0bGVYID0gcmlnaHQgLSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgdGl0bGVZID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIHRvcCwgYm90dG9tKTtcbiAgICAgICAgICAgICAgICByb3RhdGlvbiA9IFBJICogMC41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWF4V2lkdGggPSBib3R0b20gLSB0b3A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpdGxlWCxcbiAgICAgICAgICAgIHRpdGxlWSxcbiAgICAgICAgICAgIG1heFdpZHRoLFxuICAgICAgICAgICAgcm90YXRpb25cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZHJhdygpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGlmICghb3B0cy5kaXNwbGF5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9udE9wdHMgPSB0b0ZvbnQob3B0cy5mb250KTtcbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IGZvbnRPcHRzLmxpbmVIZWlnaHQ7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGxpbmVIZWlnaHQgLyAyICsgdGhpcy5fcGFkZGluZy50b3A7XG4gICAgICAgIGNvbnN0IHsgdGl0bGVYICwgdGl0bGVZICwgbWF4V2lkdGggLCByb3RhdGlvbiAgfSA9IHRoaXMuX2RyYXdBcmdzKG9mZnNldCk7XG4gICAgICAgIHJlbmRlclRleHQoY3R4LCBvcHRzLnRleHQsIDAsIDAsIGZvbnRPcHRzLCB7XG4gICAgICAgICAgICBjb2xvcjogb3B0cy5jb2xvcixcbiAgICAgICAgICAgIG1heFdpZHRoLFxuICAgICAgICAgICAgcm90YXRpb24sXG4gICAgICAgICAgICB0ZXh0QWxpZ246IF90b0xlZnRSaWdodENlbnRlcihvcHRzLmFsaWduKSxcbiAgICAgICAgICAgIHRleHRCYXNlbGluZTogJ21pZGRsZScsXG4gICAgICAgICAgICB0cmFuc2xhdGlvbjogW1xuICAgICAgICAgICAgICAgIHRpdGxlWCxcbiAgICAgICAgICAgICAgICB0aXRsZVlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlVGl0bGUoY2hhcnQsIHRpdGxlT3B0cykge1xuICAgIGNvbnN0IHRpdGxlID0gbmV3IFRpdGxlKHtcbiAgICAgICAgY3R4OiBjaGFydC5jdHgsXG4gICAgICAgIG9wdGlvbnM6IHRpdGxlT3B0cyxcbiAgICAgICAgY2hhcnRcbiAgICB9KTtcbiAgICBsYXlvdXRzLmNvbmZpZ3VyZShjaGFydCwgdGl0bGUsIHRpdGxlT3B0cyk7XG4gICAgbGF5b3V0cy5hZGRCb3goY2hhcnQsIHRpdGxlKTtcbiAgICBjaGFydC50aXRsZUJsb2NrID0gdGl0bGU7XG59XG52YXIgcGx1Z2luX3RpdGxlID0ge1xuICAgIGlkOiAndGl0bGUnLFxuIF9lbGVtZW50OiBUaXRsZSxcbiAgICBzdGFydCAoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGNyZWF0ZVRpdGxlKGNoYXJ0LCBvcHRpb25zKTtcbiAgICB9LFxuICAgIHN0b3AgKGNoYXJ0KSB7XG4gICAgICAgIGNvbnN0IHRpdGxlQmxvY2sgPSBjaGFydC50aXRsZUJsb2NrO1xuICAgICAgICBsYXlvdXRzLnJlbW92ZUJveChjaGFydCwgdGl0bGVCbG9jayk7XG4gICAgICAgIGRlbGV0ZSBjaGFydC50aXRsZUJsb2NrO1xuICAgIH0sXG4gICAgYmVmb3JlVXBkYXRlIChjaGFydCwgX2FyZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBjaGFydC50aXRsZUJsb2NrO1xuICAgICAgICBsYXlvdXRzLmNvbmZpZ3VyZShjaGFydCwgdGl0bGUsIG9wdGlvbnMpO1xuICAgICAgICB0aXRsZS5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9LFxuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgZGlzcGxheTogZmFsc2UsXG4gICAgICAgIGZvbnQ6IHtcbiAgICAgICAgICAgIHdlaWdodDogJ2JvbGQnXG4gICAgICAgIH0sXG4gICAgICAgIGZ1bGxTaXplOiB0cnVlLFxuICAgICAgICBwYWRkaW5nOiAxMCxcbiAgICAgICAgcG9zaXRpb246ICd0b3AnLFxuICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgd2VpZ2h0OiAyMDAwXG4gICAgfSxcbiAgICBkZWZhdWx0Um91dGVzOiB7XG4gICAgICAgIGNvbG9yOiAnY29sb3InXG4gICAgfSxcbiAgICBkZXNjcmlwdG9yczoge1xuICAgICAgICBfc2NyaXB0YWJsZTogdHJ1ZSxcbiAgICAgICAgX2luZGV4YWJsZTogZmFsc2VcbiAgICB9XG59O1xuXG5jb25zdCBtYXAgPSBuZXcgV2Vha01hcCgpO1xudmFyIHBsdWdpbl9zdWJ0aXRsZSA9IHtcbiAgICBpZDogJ3N1YnRpdGxlJyxcbiAgICBzdGFydCAoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gbmV3IFRpdGxlKHtcbiAgICAgICAgICAgIGN0eDogY2hhcnQuY3R4LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIGNoYXJ0XG4gICAgICAgIH0pO1xuICAgICAgICBsYXlvdXRzLmNvbmZpZ3VyZShjaGFydCwgdGl0bGUsIG9wdGlvbnMpO1xuICAgICAgICBsYXlvdXRzLmFkZEJveChjaGFydCwgdGl0bGUpO1xuICAgICAgICBtYXAuc2V0KGNoYXJ0LCB0aXRsZSk7XG4gICAgfSxcbiAgICBzdG9wIChjaGFydCkge1xuICAgICAgICBsYXlvdXRzLnJlbW92ZUJveChjaGFydCwgbWFwLmdldChjaGFydCkpO1xuICAgICAgICBtYXAuZGVsZXRlKGNoYXJ0KTtcbiAgICB9LFxuICAgIGJlZm9yZVVwZGF0ZSAoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gbWFwLmdldChjaGFydCk7XG4gICAgICAgIGxheW91dHMuY29uZmlndXJlKGNoYXJ0LCB0aXRsZSwgb3B0aW9ucyk7XG4gICAgICAgIHRpdGxlLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH0sXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgYWxpZ246ICdjZW50ZXInLFxuICAgICAgICBkaXNwbGF5OiBmYWxzZSxcbiAgICAgICAgZm9udDoge1xuICAgICAgICAgICAgd2VpZ2h0OiAnbm9ybWFsJ1xuICAgICAgICB9LFxuICAgICAgICBmdWxsU2l6ZTogdHJ1ZSxcbiAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgcG9zaXRpb246ICd0b3AnLFxuICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgd2VpZ2h0OiAxNTAwXG4gICAgfSxcbiAgICBkZWZhdWx0Um91dGVzOiB7XG4gICAgICAgIGNvbG9yOiAnY29sb3InXG4gICAgfSxcbiAgICBkZXNjcmlwdG9yczoge1xuICAgICAgICBfc2NyaXB0YWJsZTogdHJ1ZSxcbiAgICAgICAgX2luZGV4YWJsZTogZmFsc2VcbiAgICB9XG59O1xuXG5jb25zdCBwb3NpdGlvbmVycyA9IHtcbiBhdmVyYWdlIChpdGVtcykge1xuICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpLCBsZW47XG4gICAgICAgIGxldCB4ID0gMDtcbiAgICAgICAgbGV0IHkgPSAwO1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICBmb3IoaSA9IDAsIGxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbjsgKytpKXtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gaXRlbXNbaV0uZWxlbWVudDtcbiAgICAgICAgICAgIGlmIChlbCAmJiBlbC5oYXNWYWx1ZSgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zID0gZWwudG9vbHRpcFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgeCArPSBwb3MueDtcbiAgICAgICAgICAgICAgICB5ICs9IHBvcy55O1xuICAgICAgICAgICAgICAgICsrY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHggLyBjb3VudCxcbiAgICAgICAgICAgIHk6IHkgLyBjb3VudFxuICAgICAgICB9O1xuICAgIH0sXG4gbmVhcmVzdCAoaXRlbXMsIGV2ZW50UG9zaXRpb24pIHtcbiAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeCA9IGV2ZW50UG9zaXRpb24ueDtcbiAgICAgICAgbGV0IHkgPSBldmVudFBvc2l0aW9uLnk7XG4gICAgICAgIGxldCBtaW5EaXN0YW5jZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgbGV0IGksIGxlbiwgbmVhcmVzdEVsZW1lbnQ7XG4gICAgICAgIGZvcihpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpe1xuICAgICAgICAgICAgY29uc3QgZWwgPSBpdGVtc1tpXS5lbGVtZW50O1xuICAgICAgICAgICAgaWYgKGVsICYmIGVsLmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBlbC5nZXRDZW50ZXJQb2ludCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBkaXN0YW5jZUJldHdlZW5Qb2ludHMoZXZlbnRQb3NpdGlvbiwgY2VudGVyKTtcbiAgICAgICAgICAgICAgICBpZiAoZCA8IG1pbkRpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkRpc3RhbmNlID0gZDtcbiAgICAgICAgICAgICAgICAgICAgbmVhcmVzdEVsZW1lbnQgPSBlbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5lYXJlc3RFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0cCA9IG5lYXJlc3RFbGVtZW50LnRvb2x0aXBQb3NpdGlvbigpO1xuICAgICAgICAgICAgeCA9IHRwLng7XG4gICAgICAgICAgICB5ID0gdHAueTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeCxcbiAgICAgICAgICAgIHlcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHVzaE9yQ29uY2F0KGJhc2UsIHRvUHVzaCkge1xuICAgIGlmICh0b1B1c2gpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkodG9QdXNoKSkge1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYmFzZSwgdG9QdXNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJhc2UucHVzaCh0b1B1c2gpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBiYXNlO1xufVxuIGZ1bmN0aW9uIHNwbGl0TmV3bGluZXMoc3RyKSB7XG4gICAgaWYgKCh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyB8fCBzdHIgaW5zdGFuY2VvZiBTdHJpbmcpICYmIHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBzdHIuc3BsaXQoJ1xcbicpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuIGZ1bmN0aW9uIGNyZWF0ZVRvb2x0aXBJdGVtKGNoYXJ0LCBpdGVtKSB7XG4gICAgY29uc3QgeyBlbGVtZW50ICwgZGF0YXNldEluZGV4ICwgaW5kZXggIH0gPSBpdGVtO1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBjaGFydC5nZXREYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpLmNvbnRyb2xsZXI7XG4gICAgY29uc3QgeyBsYWJlbCAsIHZhbHVlICB9ID0gY29udHJvbGxlci5nZXRMYWJlbEFuZFZhbHVlKGluZGV4KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjaGFydCxcbiAgICAgICAgbGFiZWwsXG4gICAgICAgIHBhcnNlZDogY29udHJvbGxlci5nZXRQYXJzZWQoaW5kZXgpLFxuICAgICAgICByYXc6IGNoYXJ0LmRhdGEuZGF0YXNldHNbZGF0YXNldEluZGV4XS5kYXRhW2luZGV4XSxcbiAgICAgICAgZm9ybWF0dGVkVmFsdWU6IHZhbHVlLFxuICAgICAgICBkYXRhc2V0OiBjb250cm9sbGVyLmdldERhdGFzZXQoKSxcbiAgICAgICAgZGF0YUluZGV4OiBpbmRleCxcbiAgICAgICAgZGF0YXNldEluZGV4LFxuICAgICAgICBlbGVtZW50XG4gICAgfTtcbn1cbiBmdW5jdGlvbiBnZXRUb29sdGlwU2l6ZSh0b29sdGlwLCBvcHRpb25zKSB7XG4gICAgY29uc3QgY3R4ID0gdG9vbHRpcC5jaGFydC5jdHg7XG4gICAgY29uc3QgeyBib2R5ICwgZm9vdGVyICwgdGl0bGUgIH0gPSB0b29sdGlwO1xuICAgIGNvbnN0IHsgYm94V2lkdGggLCBib3hIZWlnaHQgIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGJvZHlGb250ID0gdG9Gb250KG9wdGlvbnMuYm9keUZvbnQpO1xuICAgIGNvbnN0IHRpdGxlRm9udCA9IHRvRm9udChvcHRpb25zLnRpdGxlRm9udCk7XG4gICAgY29uc3QgZm9vdGVyRm9udCA9IHRvRm9udChvcHRpb25zLmZvb3RlckZvbnQpO1xuICAgIGNvbnN0IHRpdGxlTGluZUNvdW50ID0gdGl0bGUubGVuZ3RoO1xuICAgIGNvbnN0IGZvb3RlckxpbmVDb3VudCA9IGZvb3Rlci5sZW5ndGg7XG4gICAgY29uc3QgYm9keUxpbmVJdGVtQ291bnQgPSBib2R5Lmxlbmd0aDtcbiAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKG9wdGlvbnMucGFkZGluZyk7XG4gICAgbGV0IGhlaWdodCA9IHBhZGRpbmcuaGVpZ2h0O1xuICAgIGxldCB3aWR0aCA9IDA7XG4gICAgbGV0IGNvbWJpbmVkQm9keUxlbmd0aCA9IGJvZHkucmVkdWNlKChjb3VudCwgYm9keUl0ZW0pPT5jb3VudCArIGJvZHlJdGVtLmJlZm9yZS5sZW5ndGggKyBib2R5SXRlbS5saW5lcy5sZW5ndGggKyBib2R5SXRlbS5hZnRlci5sZW5ndGgsIDApO1xuICAgIGNvbWJpbmVkQm9keUxlbmd0aCArPSB0b29sdGlwLmJlZm9yZUJvZHkubGVuZ3RoICsgdG9vbHRpcC5hZnRlckJvZHkubGVuZ3RoO1xuICAgIGlmICh0aXRsZUxpbmVDb3VudCkge1xuICAgICAgICBoZWlnaHQgKz0gdGl0bGVMaW5lQ291bnQgKiB0aXRsZUZvbnQubGluZUhlaWdodCArICh0aXRsZUxpbmVDb3VudCAtIDEpICogb3B0aW9ucy50aXRsZVNwYWNpbmcgKyBvcHRpb25zLnRpdGxlTWFyZ2luQm90dG9tO1xuICAgIH1cbiAgICBpZiAoY29tYmluZWRCb2R5TGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGJvZHlMaW5lSGVpZ2h0ID0gb3B0aW9ucy5kaXNwbGF5Q29sb3JzID8gTWF0aC5tYXgoYm94SGVpZ2h0LCBib2R5Rm9udC5saW5lSGVpZ2h0KSA6IGJvZHlGb250LmxpbmVIZWlnaHQ7XG4gICAgICAgIGhlaWdodCArPSBib2R5TGluZUl0ZW1Db3VudCAqIGJvZHlMaW5lSGVpZ2h0ICsgKGNvbWJpbmVkQm9keUxlbmd0aCAtIGJvZHlMaW5lSXRlbUNvdW50KSAqIGJvZHlGb250LmxpbmVIZWlnaHQgKyAoY29tYmluZWRCb2R5TGVuZ3RoIC0gMSkgKiBvcHRpb25zLmJvZHlTcGFjaW5nO1xuICAgIH1cbiAgICBpZiAoZm9vdGVyTGluZUNvdW50KSB7XG4gICAgICAgIGhlaWdodCArPSBvcHRpb25zLmZvb3Rlck1hcmdpblRvcCArIGZvb3RlckxpbmVDb3VudCAqIGZvb3RlckZvbnQubGluZUhlaWdodCArIChmb290ZXJMaW5lQ291bnQgLSAxKSAqIG9wdGlvbnMuZm9vdGVyU3BhY2luZztcbiAgICB9XG4gICAgbGV0IHdpZHRoUGFkZGluZyA9IDA7XG4gICAgY29uc3QgbWF4TGluZVdpZHRoID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICB3aWR0aCA9IE1hdGgubWF4KHdpZHRoLCBjdHgubWVhc3VyZVRleHQobGluZSkud2lkdGggKyB3aWR0aFBhZGRpbmcpO1xuICAgIH07XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguZm9udCA9IHRpdGxlRm9udC5zdHJpbmc7XG4gICAgZWFjaCh0b29sdGlwLnRpdGxlLCBtYXhMaW5lV2lkdGgpO1xuICAgIGN0eC5mb250ID0gYm9keUZvbnQuc3RyaW5nO1xuICAgIGVhY2godG9vbHRpcC5iZWZvcmVCb2R5LmNvbmNhdCh0b29sdGlwLmFmdGVyQm9keSksIG1heExpbmVXaWR0aCk7XG4gICAgd2lkdGhQYWRkaW5nID0gb3B0aW9ucy5kaXNwbGF5Q29sb3JzID8gYm94V2lkdGggKyAyICsgb3B0aW9ucy5ib3hQYWRkaW5nIDogMDtcbiAgICBlYWNoKGJvZHksIChib2R5SXRlbSk9PntcbiAgICAgICAgZWFjaChib2R5SXRlbS5iZWZvcmUsIG1heExpbmVXaWR0aCk7XG4gICAgICAgIGVhY2goYm9keUl0ZW0ubGluZXMsIG1heExpbmVXaWR0aCk7XG4gICAgICAgIGVhY2goYm9keUl0ZW0uYWZ0ZXIsIG1heExpbmVXaWR0aCk7XG4gICAgfSk7XG4gICAgd2lkdGhQYWRkaW5nID0gMDtcbiAgICBjdHguZm9udCA9IGZvb3RlckZvbnQuc3RyaW5nO1xuICAgIGVhY2godG9vbHRpcC5mb290ZXIsIG1heExpbmVXaWR0aCk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICB3aWR0aCArPSBwYWRkaW5nLndpZHRoO1xuICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHRcbiAgICB9O1xufVxuZnVuY3Rpb24gZGV0ZXJtaW5lWUFsaWduKGNoYXJ0LCBzaXplKSB7XG4gICAgY29uc3QgeyB5ICwgaGVpZ2h0ICB9ID0gc2l6ZTtcbiAgICBpZiAoeSA8IGhlaWdodCAvIDIpIHtcbiAgICAgICAgcmV0dXJuICd0b3AnO1xuICAgIH0gZWxzZSBpZiAoeSA+IGNoYXJ0LmhlaWdodCAtIGhlaWdodCAvIDIpIHtcbiAgICAgICAgcmV0dXJuICdib3R0b20nO1xuICAgIH1cbiAgICByZXR1cm4gJ2NlbnRlcic7XG59XG5mdW5jdGlvbiBkb2VzTm90Rml0V2l0aEFsaWduKHhBbGlnbiwgY2hhcnQsIG9wdGlvbnMsIHNpemUpIHtcbiAgICBjb25zdCB7IHggLCB3aWR0aCAgfSA9IHNpemU7XG4gICAgY29uc3QgY2FyZXQgPSBvcHRpb25zLmNhcmV0U2l6ZSArIG9wdGlvbnMuY2FyZXRQYWRkaW5nO1xuICAgIGlmICh4QWxpZ24gPT09ICdsZWZ0JyAmJiB4ICsgd2lkdGggKyBjYXJldCA+IGNoYXJ0LndpZHRoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoeEFsaWduID09PSAncmlnaHQnICYmIHggLSB3aWR0aCAtIGNhcmV0IDwgMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRlcm1pbmVYQWxpZ24oY2hhcnQsIG9wdGlvbnMsIHNpemUsIHlBbGlnbikge1xuICAgIGNvbnN0IHsgeCAsIHdpZHRoICB9ID0gc2l6ZTtcbiAgICBjb25zdCB7IHdpZHRoOiBjaGFydFdpZHRoICwgY2hhcnRBcmVhOiB7IGxlZnQgLCByaWdodCAgfSAgfSA9IGNoYXJ0O1xuICAgIGxldCB4QWxpZ24gPSAnY2VudGVyJztcbiAgICBpZiAoeUFsaWduID09PSAnY2VudGVyJykge1xuICAgICAgICB4QWxpZ24gPSB4IDw9IChsZWZ0ICsgcmlnaHQpIC8gMiA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gICAgfSBlbHNlIGlmICh4IDw9IHdpZHRoIC8gMikge1xuICAgICAgICB4QWxpZ24gPSAnbGVmdCc7XG4gICAgfSBlbHNlIGlmICh4ID49IGNoYXJ0V2lkdGggLSB3aWR0aCAvIDIpIHtcbiAgICAgICAgeEFsaWduID0gJ3JpZ2h0JztcbiAgICB9XG4gICAgaWYgKGRvZXNOb3RGaXRXaXRoQWxpZ24oeEFsaWduLCBjaGFydCwgb3B0aW9ucywgc2l6ZSkpIHtcbiAgICAgICAgeEFsaWduID0gJ2NlbnRlcic7XG4gICAgfVxuICAgIHJldHVybiB4QWxpZ247XG59XG4gZnVuY3Rpb24gZGV0ZXJtaW5lQWxpZ25tZW50KGNoYXJ0LCBvcHRpb25zLCBzaXplKSB7XG4gICAgY29uc3QgeUFsaWduID0gc2l6ZS55QWxpZ24gfHwgb3B0aW9ucy55QWxpZ24gfHwgZGV0ZXJtaW5lWUFsaWduKGNoYXJ0LCBzaXplKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB4QWxpZ246IHNpemUueEFsaWduIHx8IG9wdGlvbnMueEFsaWduIHx8IGRldGVybWluZVhBbGlnbihjaGFydCwgb3B0aW9ucywgc2l6ZSwgeUFsaWduKSxcbiAgICAgICAgeUFsaWduXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGFsaWduWChzaXplLCB4QWxpZ24pIHtcbiAgICBsZXQgeyB4ICwgd2lkdGggIH0gPSBzaXplO1xuICAgIGlmICh4QWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgeCAtPSB3aWR0aDtcbiAgICB9IGVsc2UgaWYgKHhBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgeCAtPSB3aWR0aCAvIDI7XG4gICAgfVxuICAgIHJldHVybiB4O1xufVxuZnVuY3Rpb24gYWxpZ25ZKHNpemUsIHlBbGlnbiwgcGFkZGluZ0FuZFNpemUpIHtcbiAgICBsZXQgeyB5ICwgaGVpZ2h0ICB9ID0gc2l6ZTtcbiAgICBpZiAoeUFsaWduID09PSAndG9wJykge1xuICAgICAgICB5ICs9IHBhZGRpbmdBbmRTaXplO1xuICAgIH0gZWxzZSBpZiAoeUFsaWduID09PSAnYm90dG9tJykge1xuICAgICAgICB5IC09IGhlaWdodCArIHBhZGRpbmdBbmRTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHkgLT0gaGVpZ2h0IC8gMjtcbiAgICB9XG4gICAgcmV0dXJuIHk7XG59XG4gZnVuY3Rpb24gZ2V0QmFja2dyb3VuZFBvaW50KG9wdGlvbnMsIHNpemUsIGFsaWdubWVudCwgY2hhcnQpIHtcbiAgICBjb25zdCB7IGNhcmV0U2l6ZSAsIGNhcmV0UGFkZGluZyAsIGNvcm5lclJhZGl1cyAgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgeyB4QWxpZ24gLCB5QWxpZ24gIH0gPSBhbGlnbm1lbnQ7XG4gICAgY29uc3QgcGFkZGluZ0FuZFNpemUgPSBjYXJldFNpemUgKyBjYXJldFBhZGRpbmc7XG4gICAgY29uc3QgeyB0b3BMZWZ0ICwgdG9wUmlnaHQgLCBib3R0b21MZWZ0ICwgYm90dG9tUmlnaHQgIH0gPSB0b1RSQkxDb3JuZXJzKGNvcm5lclJhZGl1cyk7XG4gICAgbGV0IHggPSBhbGlnblgoc2l6ZSwgeEFsaWduKTtcbiAgICBjb25zdCB5ID0gYWxpZ25ZKHNpemUsIHlBbGlnbiwgcGFkZGluZ0FuZFNpemUpO1xuICAgIGlmICh5QWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgIGlmICh4QWxpZ24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgeCArPSBwYWRkaW5nQW5kU2l6ZTtcbiAgICAgICAgfSBlbHNlIGlmICh4QWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIHggLT0gcGFkZGluZ0FuZFNpemU7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHhBbGlnbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgIHggLT0gTWF0aC5tYXgodG9wTGVmdCwgYm90dG9tTGVmdCkgKyBjYXJldFNpemU7XG4gICAgfSBlbHNlIGlmICh4QWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgeCArPSBNYXRoLm1heCh0b3BSaWdodCwgYm90dG9tUmlnaHQpICsgY2FyZXRTaXplO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB4OiBfbGltaXRWYWx1ZSh4LCAwLCBjaGFydC53aWR0aCAtIHNpemUud2lkdGgpLFxuICAgICAgICB5OiBfbGltaXRWYWx1ZSh5LCAwLCBjaGFydC5oZWlnaHQgLSBzaXplLmhlaWdodClcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0QWxpZ25lZFgodG9vbHRpcCwgYWxpZ24sIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKG9wdGlvbnMucGFkZGluZyk7XG4gICAgcmV0dXJuIGFsaWduID09PSAnY2VudGVyJyA/IHRvb2x0aXAueCArIHRvb2x0aXAud2lkdGggLyAyIDogYWxpZ24gPT09ICdyaWdodCcgPyB0b29sdGlwLnggKyB0b29sdGlwLndpZHRoIC0gcGFkZGluZy5yaWdodCA6IHRvb2x0aXAueCArIHBhZGRpbmcubGVmdDtcbn1cbiBmdW5jdGlvbiBnZXRCZWZvcmVBZnRlckJvZHlMaW5lcyhjYWxsYmFjaykge1xuICAgIHJldHVybiBwdXNoT3JDb25jYXQoW10sIHNwbGl0TmV3bGluZXMoY2FsbGJhY2spKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRvb2x0aXBDb250ZXh0KHBhcmVudCwgdG9vbHRpcCwgdG9vbHRpcEl0ZW1zKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUNvbnRleHQocGFyZW50LCB7XG4gICAgICAgIHRvb2x0aXAsXG4gICAgICAgIHRvb2x0aXBJdGVtcyxcbiAgICAgICAgdHlwZTogJ3Rvb2x0aXAnXG4gICAgfSk7XG59XG5mdW5jdGlvbiBvdmVycmlkZUNhbGxiYWNrcyhjYWxsYmFja3MsIGNvbnRleHQpIHtcbiAgICBjb25zdCBvdmVycmlkZSA9IGNvbnRleHQgJiYgY29udGV4dC5kYXRhc2V0ICYmIGNvbnRleHQuZGF0YXNldC50b29sdGlwICYmIGNvbnRleHQuZGF0YXNldC50b29sdGlwLmNhbGxiYWNrcztcbiAgICByZXR1cm4gb3ZlcnJpZGUgPyBjYWxsYmFja3Mub3ZlcnJpZGUob3ZlcnJpZGUpIDogY2FsbGJhY2tzO1xufVxuY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICBiZWZvcmVUaXRsZTogbm9vcCxcbiAgICB0aXRsZSAodG9vbHRpcEl0ZW1zKSB7XG4gICAgICAgIGlmICh0b29sdGlwSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRvb2x0aXBJdGVtc1swXTtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IGl0ZW0uY2hhcnQuZGF0YS5sYWJlbHM7XG4gICAgICAgICAgICBjb25zdCBsYWJlbENvdW50ID0gbGFiZWxzID8gbGFiZWxzLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICBpZiAodGhpcyAmJiB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLm1vZGUgPT09ICdkYXRhc2V0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmRhdGFzZXQubGFiZWwgfHwgJyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0ubGFiZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5sYWJlbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFiZWxDb3VudCA+IDAgJiYgaXRlbS5kYXRhSW5kZXggPCBsYWJlbENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsc1tpdGVtLmRhdGFJbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH0sXG4gICAgYWZ0ZXJUaXRsZTogbm9vcCxcbiAgICBiZWZvcmVCb2R5OiBub29wLFxuICAgIGJlZm9yZUxhYmVsOiBub29wLFxuICAgIGxhYmVsICh0b29sdGlwSXRlbSkge1xuICAgICAgICBpZiAodGhpcyAmJiB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLm1vZGUgPT09ICdkYXRhc2V0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXBJdGVtLmxhYmVsICsgJzogJyArIHRvb2x0aXBJdGVtLmZvcm1hdHRlZFZhbHVlIHx8IHRvb2x0aXBJdGVtLmZvcm1hdHRlZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsYWJlbCA9IHRvb2x0aXBJdGVtLmRhdGFzZXQubGFiZWwgfHwgJyc7XG4gICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgbGFiZWwgKz0gJzogJztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRvb2x0aXBJdGVtLmZvcm1hdHRlZFZhbHVlO1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWYodmFsdWUpKSB7XG4gICAgICAgICAgICBsYWJlbCArPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGFiZWw7XG4gICAgfSxcbiAgICBsYWJlbENvbG9yICh0b29sdGlwSXRlbSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdG9vbHRpcEl0ZW0uY2hhcnQuZ2V0RGF0YXNldE1ldGEodG9vbHRpcEl0ZW0uZGF0YXNldEluZGV4KTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG1ldGEuY29udHJvbGxlci5nZXRTdHlsZSh0b29sdGlwSXRlbS5kYXRhSW5kZXgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9yZGVyQ29sb3I6IG9wdGlvbnMuYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgYm9yZGVyV2lkdGg6IG9wdGlvbnMuYm9yZGVyV2lkdGgsXG4gICAgICAgICAgICBib3JkZXJEYXNoOiBvcHRpb25zLmJvcmRlckRhc2gsXG4gICAgICAgICAgICBib3JkZXJEYXNoT2Zmc2V0OiBvcHRpb25zLmJvcmRlckRhc2hPZmZzZXQsXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6IDBcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGxhYmVsVGV4dENvbG9yICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5ib2R5Q29sb3I7XG4gICAgfSxcbiAgICBsYWJlbFBvaW50U3R5bGUgKHRvb2x0aXBJdGVtKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0b29sdGlwSXRlbS5jaGFydC5nZXREYXRhc2V0TWV0YSh0b29sdGlwSXRlbS5kYXRhc2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gbWV0YS5jb250cm9sbGVyLmdldFN0eWxlKHRvb2x0aXBJdGVtLmRhdGFJbmRleCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb2ludFN0eWxlOiBvcHRpb25zLnBvaW50U3R5bGUsXG4gICAgICAgICAgICByb3RhdGlvbjogb3B0aW9ucy5yb3RhdGlvblxuICAgICAgICB9O1xuICAgIH0sXG4gICAgYWZ0ZXJMYWJlbDogbm9vcCxcbiAgICBhZnRlckJvZHk6IG5vb3AsXG4gICAgYmVmb3JlRm9vdGVyOiBub29wLFxuICAgIGZvb3Rlcjogbm9vcCxcbiAgICBhZnRlckZvb3Rlcjogbm9vcFxufTtcbiBmdW5jdGlvbiBpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhjYWxsYmFja3MsIG5hbWUsIGN0eCwgYXJnKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gY2FsbGJhY2tzW25hbWVdLmNhbGwoY3R4LCBhcmcpO1xuICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZGVmYXVsdENhbGxiYWNrc1tuYW1lXS5jYWxsKGN0eCwgYXJnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNsYXNzIFRvb2x0aXAgZXh0ZW5kcyBFbGVtZW50IHtcbiBzdGF0aWMgcG9zaXRpb25lcnMgPSBwb3NpdGlvbmVycztcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm9wYWNpdHkgPSAwO1xuICAgICAgICB0aGlzLl9hY3RpdmUgPSBbXTtcbiAgICAgICAgdGhpcy5fZXZlbnRQb3NpdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fc2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fY2FjaGVkQW5pbWF0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fdG9vbHRpcEl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuJGFuaW1hdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuJGNvbnRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2hhcnQgPSBjb25maWcuY2hhcnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGNvbmZpZy5vcHRpb25zO1xuICAgICAgICB0aGlzLmRhdGFQb2ludHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudGl0bGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYmVmb3JlQm9keSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5ib2R5ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmFmdGVyQm9keSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5mb290ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMueEFsaWduID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnlBbGlnbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy54ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLndpZHRoID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNhcmV0WCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jYXJldFkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubGFiZWxDb2xvcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubGFiZWxQb2ludFN0eWxlcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sYWJlbFRleHRDb2xvcnMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGluaXRpYWxpemUob3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLl9jYWNoZWRBbmltYXRpb25zID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLiRjb250ZXh0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiBfcmVzb2x2ZUFuaW1hdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuX2NhY2hlZEFuaW1hdGlvbnM7XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zLnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KCkpO1xuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucy5lbmFibGVkICYmIGNoYXJ0Lm9wdGlvbnMuYW5pbWF0aW9uICYmIG9wdGlvbnMuYW5pbWF0aW9ucztcbiAgICAgICAgY29uc3QgYW5pbWF0aW9ucyA9IG5ldyBBbmltYXRpb25zKHRoaXMuY2hhcnQsIG9wdHMpO1xuICAgICAgICBpZiAob3B0cy5fY2FjaGVhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRBbmltYXRpb25zID0gT2JqZWN0LmZyZWV6ZShhbmltYXRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW5pbWF0aW9ucztcbiAgICB9XG4gZ2V0Q29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGNvbnRleHQgfHwgKHRoaXMuJGNvbnRleHQgPSBjcmVhdGVUb29sdGlwQ29udGV4dCh0aGlzLmNoYXJ0LmdldENvbnRleHQoKSwgdGhpcywgdGhpcy5fdG9vbHRpcEl0ZW1zKSk7XG4gICAgfVxuICAgIGdldFRpdGxlKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBjYWxsYmFja3MgIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBiZWZvcmVUaXRsZSA9IGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKGNhbGxiYWNrcywgJ2JlZm9yZVRpdGxlJywgdGhpcywgY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soY2FsbGJhY2tzLCAndGl0bGUnLCB0aGlzLCBjb250ZXh0KTtcbiAgICAgICAgY29uc3QgYWZ0ZXJUaXRsZSA9IGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKGNhbGxiYWNrcywgJ2FmdGVyVGl0bGUnLCB0aGlzLCBjb250ZXh0KTtcbiAgICAgICAgbGV0IGxpbmVzID0gW107XG4gICAgICAgIGxpbmVzID0gcHVzaE9yQ29uY2F0KGxpbmVzLCBzcGxpdE5ld2xpbmVzKGJlZm9yZVRpdGxlKSk7XG4gICAgICAgIGxpbmVzID0gcHVzaE9yQ29uY2F0KGxpbmVzLCBzcGxpdE5ld2xpbmVzKHRpdGxlKSk7XG4gICAgICAgIGxpbmVzID0gcHVzaE9yQ29uY2F0KGxpbmVzLCBzcGxpdE5ld2xpbmVzKGFmdGVyVGl0bGUpKTtcbiAgICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH1cbiAgICBnZXRCZWZvcmVCb2R5KHRvb2x0aXBJdGVtcywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZ2V0QmVmb3JlQWZ0ZXJCb2R5TGluZXMoaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2sob3B0aW9ucy5jYWxsYmFja3MsICdiZWZvcmVCb2R5JywgdGhpcywgdG9vbHRpcEl0ZW1zKSk7XG4gICAgfVxuICAgIGdldEJvZHkodG9vbHRpcEl0ZW1zLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgY2FsbGJhY2tzICB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgYm9keUl0ZW1zID0gW107XG4gICAgICAgIGVhY2godG9vbHRpcEl0ZW1zLCAoY29udGV4dCk9PntcbiAgICAgICAgICAgIGNvbnN0IGJvZHlJdGVtID0ge1xuICAgICAgICAgICAgICAgIGJlZm9yZTogW10sXG4gICAgICAgICAgICAgICAgbGluZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFmdGVyOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHNjb3BlZCA9IG92ZXJyaWRlQ2FsbGJhY2tzKGNhbGxiYWNrcywgY29udGV4dCk7XG4gICAgICAgICAgICBwdXNoT3JDb25jYXQoYm9keUl0ZW0uYmVmb3JlLCBzcGxpdE5ld2xpbmVzKGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKHNjb3BlZCwgJ2JlZm9yZUxhYmVsJywgdGhpcywgY29udGV4dCkpKTtcbiAgICAgICAgICAgIHB1c2hPckNvbmNhdChib2R5SXRlbS5saW5lcywgaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soc2NvcGVkLCAnbGFiZWwnLCB0aGlzLCBjb250ZXh0KSk7XG4gICAgICAgICAgICBwdXNoT3JDb25jYXQoYm9keUl0ZW0uYWZ0ZXIsIHNwbGl0TmV3bGluZXMoaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soc2NvcGVkLCAnYWZ0ZXJMYWJlbCcsIHRoaXMsIGNvbnRleHQpKSk7XG4gICAgICAgICAgICBib2R5SXRlbXMucHVzaChib2R5SXRlbSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYm9keUl0ZW1zO1xuICAgIH1cbiAgICBnZXRBZnRlckJvZHkodG9vbHRpcEl0ZW1zLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBnZXRCZWZvcmVBZnRlckJvZHlMaW5lcyhpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhvcHRpb25zLmNhbGxiYWNrcywgJ2FmdGVyQm9keScsIHRoaXMsIHRvb2x0aXBJdGVtcykpO1xuICAgIH1cbiAgICBnZXRGb290ZXIodG9vbHRpcEl0ZW1zLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgY2FsbGJhY2tzICB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgYmVmb3JlRm9vdGVyID0gaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soY2FsbGJhY2tzLCAnYmVmb3JlRm9vdGVyJywgdGhpcywgdG9vbHRpcEl0ZW1zKTtcbiAgICAgICAgY29uc3QgZm9vdGVyID0gaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soY2FsbGJhY2tzLCAnZm9vdGVyJywgdGhpcywgdG9vbHRpcEl0ZW1zKTtcbiAgICAgICAgY29uc3QgYWZ0ZXJGb290ZXIgPSBpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhjYWxsYmFja3MsICdhZnRlckZvb3RlcicsIHRoaXMsIHRvb2x0aXBJdGVtcyk7XG4gICAgICAgIGxldCBsaW5lcyA9IFtdO1xuICAgICAgICBsaW5lcyA9IHB1c2hPckNvbmNhdChsaW5lcywgc3BsaXROZXdsaW5lcyhiZWZvcmVGb290ZXIpKTtcbiAgICAgICAgbGluZXMgPSBwdXNoT3JDb25jYXQobGluZXMsIHNwbGl0TmV3bGluZXMoZm9vdGVyKSk7XG4gICAgICAgIGxpbmVzID0gcHVzaE9yQ29uY2F0KGxpbmVzLCBzcGxpdE5ld2xpbmVzKGFmdGVyRm9vdGVyKSk7XG4gICAgICAgIHJldHVybiBsaW5lcztcbiAgICB9XG4gX2NyZWF0ZUl0ZW1zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5fYWN0aXZlO1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5jaGFydC5kYXRhO1xuICAgICAgICBjb25zdCBsYWJlbENvbG9ycyA9IFtdO1xuICAgICAgICBjb25zdCBsYWJlbFBvaW50U3R5bGVzID0gW107XG4gICAgICAgIGNvbnN0IGxhYmVsVGV4dENvbG9ycyA9IFtdO1xuICAgICAgICBsZXQgdG9vbHRpcEl0ZW1zID0gW107XG4gICAgICAgIGxldCBpLCBsZW47XG4gICAgICAgIGZvcihpID0gMCwgbGVuID0gYWN0aXZlLmxlbmd0aDsgaSA8IGxlbjsgKytpKXtcbiAgICAgICAgICAgIHRvb2x0aXBJdGVtcy5wdXNoKGNyZWF0ZVRvb2x0aXBJdGVtKHRoaXMuY2hhcnQsIGFjdGl2ZVtpXSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmZpbHRlcikge1xuICAgICAgICAgICAgdG9vbHRpcEl0ZW1zID0gdG9vbHRpcEl0ZW1zLmZpbHRlcigoZWxlbWVudCwgaW5kZXgsIGFycmF5KT0+b3B0aW9ucy5maWx0ZXIoZWxlbWVudCwgaW5kZXgsIGFycmF5LCBkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaXRlbVNvcnQpIHtcbiAgICAgICAgICAgIHRvb2x0aXBJdGVtcyA9IHRvb2x0aXBJdGVtcy5zb3J0KChhLCBiKT0+b3B0aW9ucy5pdGVtU29ydChhLCBiLCBkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWFjaCh0b29sdGlwSXRlbXMsIChjb250ZXh0KT0+e1xuICAgICAgICAgICAgY29uc3Qgc2NvcGVkID0gb3ZlcnJpZGVDYWxsYmFja3Mob3B0aW9ucy5jYWxsYmFja3MsIGNvbnRleHQpO1xuICAgICAgICAgICAgbGFiZWxDb2xvcnMucHVzaChpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhzY29wZWQsICdsYWJlbENvbG9yJywgdGhpcywgY29udGV4dCkpO1xuICAgICAgICAgICAgbGFiZWxQb2ludFN0eWxlcy5wdXNoKGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKHNjb3BlZCwgJ2xhYmVsUG9pbnRTdHlsZScsIHRoaXMsIGNvbnRleHQpKTtcbiAgICAgICAgICAgIGxhYmVsVGV4dENvbG9ycy5wdXNoKGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKHNjb3BlZCwgJ2xhYmVsVGV4dENvbG9yJywgdGhpcywgY29udGV4dCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sYWJlbENvbG9ycyA9IGxhYmVsQ29sb3JzO1xuICAgICAgICB0aGlzLmxhYmVsUG9pbnRTdHlsZXMgPSBsYWJlbFBvaW50U3R5bGVzO1xuICAgICAgICB0aGlzLmxhYmVsVGV4dENvbG9ycyA9IGxhYmVsVGV4dENvbG9ycztcbiAgICAgICAgdGhpcy5kYXRhUG9pbnRzID0gdG9vbHRpcEl0ZW1zO1xuICAgICAgICByZXR1cm4gdG9vbHRpcEl0ZW1zO1xuICAgIH1cbiAgICB1cGRhdGUoY2hhbmdlZCwgcmVwbGF5KSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoKSk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuX2FjdGl2ZTtcbiAgICAgICAgbGV0IHByb3BlcnRpZXM7XG4gICAgICAgIGxldCB0b29sdGlwSXRlbXMgPSBbXTtcbiAgICAgICAgaWYgKCFhY3RpdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcGFjaXR5ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHBvc2l0aW9uZXJzW29wdGlvbnMucG9zaXRpb25dLmNhbGwodGhpcywgYWN0aXZlLCB0aGlzLl9ldmVudFBvc2l0aW9uKTtcbiAgICAgICAgICAgIHRvb2x0aXBJdGVtcyA9IHRoaXMuX2NyZWF0ZUl0ZW1zKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuZ2V0VGl0bGUodG9vbHRpcEl0ZW1zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlQm9keSA9IHRoaXMuZ2V0QmVmb3JlQm9keSh0b29sdGlwSXRlbXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5ib2R5ID0gdGhpcy5nZXRCb2R5KHRvb2x0aXBJdGVtcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmFmdGVyQm9keSA9IHRoaXMuZ2V0QWZ0ZXJCb2R5KHRvb2x0aXBJdGVtcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlciA9IHRoaXMuZ2V0Rm9vdGVyKHRvb2x0aXBJdGVtcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gdGhpcy5fc2l6ZSA9IGdldFRvb2x0aXBTaXplKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25BbmRTaXplID0gT2JqZWN0LmFzc2lnbih7fSwgcG9zaXRpb24sIHNpemUpO1xuICAgICAgICAgICAgY29uc3QgYWxpZ25tZW50ID0gZGV0ZXJtaW5lQWxpZ25tZW50KHRoaXMuY2hhcnQsIG9wdGlvbnMsIHBvc2l0aW9uQW5kU2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBiYWNrZ3JvdW5kUG9pbnQgPSBnZXRCYWNrZ3JvdW5kUG9pbnQob3B0aW9ucywgcG9zaXRpb25BbmRTaXplLCBhbGlnbm1lbnQsIHRoaXMuY2hhcnQpO1xuICAgICAgICAgICAgdGhpcy54QWxpZ24gPSBhbGlnbm1lbnQueEFsaWduO1xuICAgICAgICAgICAgdGhpcy55QWxpZ24gPSBhbGlnbm1lbnQueUFsaWduO1xuICAgICAgICAgICAgcHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHg6IGJhY2tncm91bmRQb2ludC54LFxuICAgICAgICAgICAgICAgIHk6IGJhY2tncm91bmRQb2ludC55LFxuICAgICAgICAgICAgICAgIHdpZHRoOiBzaXplLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogc2l6ZS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgY2FyZXRYOiBwb3NpdGlvbi54LFxuICAgICAgICAgICAgICAgIGNhcmV0WTogcG9zaXRpb24ueVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90b29sdGlwSXRlbXMgPSB0b29sdGlwSXRlbXM7XG4gICAgICAgIHRoaXMuJGNvbnRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlQW5pbWF0aW9ucygpLnVwZGF0ZSh0aGlzLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlZCAmJiBvcHRpb25zLmV4dGVybmFsKSB7XG4gICAgICAgICAgICBvcHRpb25zLmV4dGVybmFsLmNhbGwodGhpcywge1xuICAgICAgICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICAgICAgICAgIHRvb2x0aXA6IHRoaXMsXG4gICAgICAgICAgICAgICAgcmVwbGF5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3Q2FyZXQodG9vbHRpcFBvaW50LCBjdHgsIHNpemUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2FyZXRQb3NpdGlvbiA9IHRoaXMuZ2V0Q2FyZXRQb3NpdGlvbih0b29sdGlwUG9pbnQsIHNpemUsIG9wdGlvbnMpO1xuICAgICAgICBjdHgubGluZVRvKGNhcmV0UG9zaXRpb24ueDEsIGNhcmV0UG9zaXRpb24ueTEpO1xuICAgICAgICBjdHgubGluZVRvKGNhcmV0UG9zaXRpb24ueDIsIGNhcmV0UG9zaXRpb24ueTIpO1xuICAgICAgICBjdHgubGluZVRvKGNhcmV0UG9zaXRpb24ueDMsIGNhcmV0UG9zaXRpb24ueTMpO1xuICAgIH1cbiAgICBnZXRDYXJldFBvc2l0aW9uKHRvb2x0aXBQb2ludCwgc2l6ZSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHhBbGlnbiAsIHlBbGlnbiAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHsgY2FyZXRTaXplICwgY29ybmVyUmFkaXVzICB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgeyB0b3BMZWZ0ICwgdG9wUmlnaHQgLCBib3R0b21MZWZ0ICwgYm90dG9tUmlnaHQgIH0gPSB0b1RSQkxDb3JuZXJzKGNvcm5lclJhZGl1cyk7XG4gICAgICAgIGNvbnN0IHsgeDogcHRYICwgeTogcHRZICB9ID0gdG9vbHRpcFBvaW50O1xuICAgICAgICBjb25zdCB7IHdpZHRoICwgaGVpZ2h0ICB9ID0gc2l6ZTtcbiAgICAgICAgbGV0IHgxLCB4MiwgeDMsIHkxLCB5MiwgeTM7XG4gICAgICAgIGlmICh5QWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICB5MiA9IHB0WSArIGhlaWdodCAvIDI7XG4gICAgICAgICAgICBpZiAoeEFsaWduID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICB4MSA9IHB0WDtcbiAgICAgICAgICAgICAgICB4MiA9IHgxIC0gY2FyZXRTaXplO1xuICAgICAgICAgICAgICAgIHkxID0geTIgKyBjYXJldFNpemU7XG4gICAgICAgICAgICAgICAgeTMgPSB5MiAtIGNhcmV0U2l6ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgeDEgPSBwdFggKyB3aWR0aDtcbiAgICAgICAgICAgICAgICB4MiA9IHgxICsgY2FyZXRTaXplO1xuICAgICAgICAgICAgICAgIHkxID0geTIgLSBjYXJldFNpemU7XG4gICAgICAgICAgICAgICAgeTMgPSB5MiArIGNhcmV0U2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHgzID0geDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoeEFsaWduID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICB4MiA9IHB0WCArIE1hdGgubWF4KHRvcExlZnQsIGJvdHRvbUxlZnQpICsgY2FyZXRTaXplO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh4QWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICB4MiA9IHB0WCArIHdpZHRoIC0gTWF0aC5tYXgodG9wUmlnaHQsIGJvdHRvbVJpZ2h0KSAtIGNhcmV0U2l6ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgeDIgPSB0aGlzLmNhcmV0WDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh5QWxpZ24gPT09ICd0b3AnKSB7XG4gICAgICAgICAgICAgICAgeTEgPSBwdFk7XG4gICAgICAgICAgICAgICAgeTIgPSB5MSAtIGNhcmV0U2l6ZTtcbiAgICAgICAgICAgICAgICB4MSA9IHgyIC0gY2FyZXRTaXplO1xuICAgICAgICAgICAgICAgIHgzID0geDIgKyBjYXJldFNpemU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHkxID0gcHRZICsgaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHkyID0geTEgKyBjYXJldFNpemU7XG4gICAgICAgICAgICAgICAgeDEgPSB4MiArIGNhcmV0U2l6ZTtcbiAgICAgICAgICAgICAgICB4MyA9IHgyIC0gY2FyZXRTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeTMgPSB5MTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDEsXG4gICAgICAgICAgICB4MixcbiAgICAgICAgICAgIHgzLFxuICAgICAgICAgICAgeTEsXG4gICAgICAgICAgICB5MixcbiAgICAgICAgICAgIHkzXG4gICAgICAgIH07XG4gICAgfVxuICAgIGRyYXdUaXRsZShwdCwgY3R4LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy50aXRsZTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGl0bGUubGVuZ3RoO1xuICAgICAgICBsZXQgdGl0bGVGb250LCB0aXRsZVNwYWNpbmcsIGk7XG4gICAgICAgIGlmIChsZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJ0bEhlbHBlciA9IGdldFJ0bEFkYXB0ZXIob3B0aW9ucy5ydGwsIHRoaXMueCwgdGhpcy53aWR0aCk7XG4gICAgICAgICAgICBwdC54ID0gZ2V0QWxpZ25lZFgodGhpcywgb3B0aW9ucy50aXRsZUFsaWduLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSBydGxIZWxwZXIudGV4dEFsaWduKG9wdGlvbnMudGl0bGVBbGlnbik7XG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4gICAgICAgICAgICB0aXRsZUZvbnQgPSB0b0ZvbnQob3B0aW9ucy50aXRsZUZvbnQpO1xuICAgICAgICAgICAgdGl0bGVTcGFjaW5nID0gb3B0aW9ucy50aXRsZVNwYWNpbmc7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gb3B0aW9ucy50aXRsZUNvbG9yO1xuICAgICAgICAgICAgY3R4LmZvbnQgPSB0aXRsZUZvbnQuc3RyaW5nO1xuICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCh0aXRsZVtpXSwgcnRsSGVscGVyLngocHQueCksIHB0LnkgKyB0aXRsZUZvbnQubGluZUhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgIHB0LnkgKz0gdGl0bGVGb250LmxpbmVIZWlnaHQgKyB0aXRsZVNwYWNpbmc7XG4gICAgICAgICAgICAgICAgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcHQueSArPSBvcHRpb25zLnRpdGxlTWFyZ2luQm90dG9tIC0gdGl0bGVTcGFjaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiBfZHJhd0NvbG9yQm94KGN0eCwgcHQsIGksIHJ0bEhlbHBlciwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBsYWJlbENvbG9ycyA9IHRoaXMubGFiZWxDb2xvcnNbaV07XG4gICAgICAgIGNvbnN0IGxhYmVsUG9pbnRTdHlsZSA9IHRoaXMubGFiZWxQb2ludFN0eWxlc1tpXTtcbiAgICAgICAgY29uc3QgeyBib3hIZWlnaHQgLCBib3hXaWR0aCAsIGJveFBhZGRpbmcgIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBib2R5Rm9udCA9IHRvRm9udChvcHRpb25zLmJvZHlGb250KTtcbiAgICAgICAgY29uc3QgY29sb3JYID0gZ2V0QWxpZ25lZFgodGhpcywgJ2xlZnQnLCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcnRsQ29sb3JYID0gcnRsSGVscGVyLngoY29sb3JYKTtcbiAgICAgICAgY29uc3QgeU9mZlNldCA9IGJveEhlaWdodCA8IGJvZHlGb250LmxpbmVIZWlnaHQgPyAoYm9keUZvbnQubGluZUhlaWdodCAtIGJveEhlaWdodCkgLyAyIDogMDtcbiAgICAgICAgY29uc3QgY29sb3JZID0gcHQueSArIHlPZmZTZXQ7XG4gICAgICAgIGlmIChvcHRpb25zLnVzZVBvaW50U3R5bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRyYXdPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHJhZGl1czogTWF0aC5taW4oYm94V2lkdGgsIGJveEhlaWdodCkgLyAyLFxuICAgICAgICAgICAgICAgIHBvaW50U3R5bGU6IGxhYmVsUG9pbnRTdHlsZS5wb2ludFN0eWxlLFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBsYWJlbFBvaW50U3R5bGUucm90YXRpb24sXG4gICAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDFcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjZW50ZXJYID0gcnRsSGVscGVyLmxlZnRGb3JMdHIocnRsQ29sb3JYLCBib3hXaWR0aCkgKyBib3hXaWR0aCAvIDI7XG4gICAgICAgICAgICBjb25zdCBjZW50ZXJZID0gY29sb3JZICsgYm94SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IG9wdGlvbnMubXVsdGlLZXlCYWNrZ3JvdW5kO1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMubXVsdGlLZXlCYWNrZ3JvdW5kO1xuICAgICAgICAgICAgZHJhd1BvaW50KGN0eCwgZHJhd09wdGlvbnMsIGNlbnRlclgsIGNlbnRlclkpO1xuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gbGFiZWxDb2xvcnMuYm9yZGVyQ29sb3I7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gbGFiZWxDb2xvcnMuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgZHJhd1BvaW50KGN0eCwgZHJhd09wdGlvbnMsIGNlbnRlclgsIGNlbnRlclkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGlzT2JqZWN0KGxhYmVsQ29sb3JzLmJvcmRlcldpZHRoKSA/IE1hdGgubWF4KC4uLk9iamVjdC52YWx1ZXMobGFiZWxDb2xvcnMuYm9yZGVyV2lkdGgpKSA6IGxhYmVsQ29sb3JzLmJvcmRlcldpZHRoIHx8IDE7XG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBsYWJlbENvbG9ycy5ib3JkZXJDb2xvcjtcbiAgICAgICAgICAgIGN0eC5zZXRMaW5lRGFzaChsYWJlbENvbG9ycy5ib3JkZXJEYXNoIHx8IFtdKTtcbiAgICAgICAgICAgIGN0eC5saW5lRGFzaE9mZnNldCA9IGxhYmVsQ29sb3JzLmJvcmRlckRhc2hPZmZzZXQgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IG91dGVyWCA9IHJ0bEhlbHBlci5sZWZ0Rm9yTHRyKHJ0bENvbG9yWCwgYm94V2lkdGggLSBib3hQYWRkaW5nKTtcbiAgICAgICAgICAgIGNvbnN0IGlubmVyWCA9IHJ0bEhlbHBlci5sZWZ0Rm9yTHRyKHJ0bEhlbHBlci54UGx1cyhydGxDb2xvclgsIDEpLCBib3hXaWR0aCAtIGJveFBhZGRpbmcgLSAyKTtcbiAgICAgICAgICAgIGNvbnN0IGJvcmRlclJhZGl1cyA9IHRvVFJCTENvcm5lcnMobGFiZWxDb2xvcnMuYm9yZGVyUmFkaXVzKTtcbiAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGJvcmRlclJhZGl1cykuc29tZSgodik9PnYgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBvcHRpb25zLm11bHRpS2V5QmFja2dyb3VuZDtcbiAgICAgICAgICAgICAgICBhZGRSb3VuZGVkUmVjdFBhdGgoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIHg6IG91dGVyWCxcbiAgICAgICAgICAgICAgICAgICAgeTogY29sb3JZLFxuICAgICAgICAgICAgICAgICAgICB3OiBib3hXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaDogYm94SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IGJvcmRlclJhZGl1c1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBsYWJlbENvbG9ycy5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGFkZFJvdW5kZWRSZWN0UGF0aChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgeDogaW5uZXJYLFxuICAgICAgICAgICAgICAgICAgICB5OiBjb2xvclkgKyAxLFxuICAgICAgICAgICAgICAgICAgICB3OiBib3hXaWR0aCAtIDIsXG4gICAgICAgICAgICAgICAgICAgIGg6IGJveEhlaWdodCAtIDIsXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogYm9yZGVyUmFkaXVzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMubXVsdGlLZXlCYWNrZ3JvdW5kO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChvdXRlclgsIGNvbG9yWSwgYm94V2lkdGgsIGJveEhlaWdodCk7XG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZVJlY3Qob3V0ZXJYLCBjb2xvclksIGJveFdpZHRoLCBib3hIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBsYWJlbENvbG9ycy5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGlubmVyWCwgY29sb3JZICsgMSwgYm94V2lkdGggLSAyLCBib3hIZWlnaHQgLSAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5sYWJlbFRleHRDb2xvcnNbaV07XG4gICAgfVxuICAgIGRyYXdCb2R5KHB0LCBjdHgsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBib2R5ICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgeyBib2R5U3BhY2luZyAsIGJvZHlBbGlnbiAsIGRpc3BsYXlDb2xvcnMgLCBib3hIZWlnaHQgLCBib3hXaWR0aCAsIGJveFBhZGRpbmcgIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBib2R5Rm9udCA9IHRvRm9udChvcHRpb25zLmJvZHlGb250KTtcbiAgICAgICAgbGV0IGJvZHlMaW5lSGVpZ2h0ID0gYm9keUZvbnQubGluZUhlaWdodDtcbiAgICAgICAgbGV0IHhMaW5lUGFkZGluZyA9IDA7XG4gICAgICAgIGNvbnN0IHJ0bEhlbHBlciA9IGdldFJ0bEFkYXB0ZXIob3B0aW9ucy5ydGwsIHRoaXMueCwgdGhpcy53aWR0aCk7XG4gICAgICAgIGNvbnN0IGZpbGxMaW5lT2ZUZXh0ID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGxpbmUsIHJ0bEhlbHBlci54KHB0LnggKyB4TGluZVBhZGRpbmcpLCBwdC55ICsgYm9keUxpbmVIZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIHB0LnkgKz0gYm9keUxpbmVIZWlnaHQgKyBib2R5U3BhY2luZztcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYm9keUFsaWduRm9yQ2FsY3VsYXRpb24gPSBydGxIZWxwZXIudGV4dEFsaWduKGJvZHlBbGlnbik7XG4gICAgICAgIGxldCBib2R5SXRlbSwgdGV4dENvbG9yLCBsaW5lcywgaSwgaiwgaWxlbiwgamxlbjtcbiAgICAgICAgY3R4LnRleHRBbGlnbiA9IGJvZHlBbGlnbjtcbiAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgICAgICBjdHguZm9udCA9IGJvZHlGb250LnN0cmluZztcbiAgICAgICAgcHQueCA9IGdldEFsaWduZWRYKHRoaXMsIGJvZHlBbGlnbkZvckNhbGN1bGF0aW9uLCBvcHRpb25zKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuYm9keUNvbG9yO1xuICAgICAgICBlYWNoKHRoaXMuYmVmb3JlQm9keSwgZmlsbExpbmVPZlRleHQpO1xuICAgICAgICB4TGluZVBhZGRpbmcgPSBkaXNwbGF5Q29sb3JzICYmIGJvZHlBbGlnbkZvckNhbGN1bGF0aW9uICE9PSAncmlnaHQnID8gYm9keUFsaWduID09PSAnY2VudGVyJyA/IGJveFdpZHRoIC8gMiArIGJveFBhZGRpbmcgOiBib3hXaWR0aCArIDIgKyBib3hQYWRkaW5nIDogMDtcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gYm9keS5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICAgICAgYm9keUl0ZW0gPSBib2R5W2ldO1xuICAgICAgICAgICAgdGV4dENvbG9yID0gdGhpcy5sYWJlbFRleHRDb2xvcnNbaV07XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGV4dENvbG9yO1xuICAgICAgICAgICAgZWFjaChib2R5SXRlbS5iZWZvcmUsIGZpbGxMaW5lT2ZUZXh0KTtcbiAgICAgICAgICAgIGxpbmVzID0gYm9keUl0ZW0ubGluZXM7XG4gICAgICAgICAgICBpZiAoZGlzcGxheUNvbG9ycyAmJiBsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kcmF3Q29sb3JCb3goY3R4LCBwdCwgaSwgcnRsSGVscGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBib2R5TGluZUhlaWdodCA9IE1hdGgubWF4KGJvZHlGb250LmxpbmVIZWlnaHQsIGJveEhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IoaiA9IDAsIGpsZW4gPSBsaW5lcy5sZW5ndGg7IGogPCBqbGVuOyArK2ope1xuICAgICAgICAgICAgICAgIGZpbGxMaW5lT2ZUZXh0KGxpbmVzW2pdKTtcbiAgICAgICAgICAgICAgICBib2R5TGluZUhlaWdodCA9IGJvZHlGb250LmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlYWNoKGJvZHlJdGVtLmFmdGVyLCBmaWxsTGluZU9mVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgeExpbmVQYWRkaW5nID0gMDtcbiAgICAgICAgYm9keUxpbmVIZWlnaHQgPSBib2R5Rm9udC5saW5lSGVpZ2h0O1xuICAgICAgICBlYWNoKHRoaXMuYWZ0ZXJCb2R5LCBmaWxsTGluZU9mVGV4dCk7XG4gICAgICAgIHB0LnkgLT0gYm9keVNwYWNpbmc7XG4gICAgfVxuICAgIGRyYXdGb290ZXIocHQsIGN0eCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBmb290ZXIgPSB0aGlzLmZvb3RlcjtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gZm9vdGVyLmxlbmd0aDtcbiAgICAgICAgbGV0IGZvb3RlckZvbnQsIGk7XG4gICAgICAgIGlmIChsZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJ0bEhlbHBlciA9IGdldFJ0bEFkYXB0ZXIob3B0aW9ucy5ydGwsIHRoaXMueCwgdGhpcy53aWR0aCk7XG4gICAgICAgICAgICBwdC54ID0gZ2V0QWxpZ25lZFgodGhpcywgb3B0aW9ucy5mb290ZXJBbGlnbiwgb3B0aW9ucyk7XG4gICAgICAgICAgICBwdC55ICs9IG9wdGlvbnMuZm9vdGVyTWFyZ2luVG9wO1xuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9IHJ0bEhlbHBlci50ZXh0QWxpZ24ob3B0aW9ucy5mb290ZXJBbGlnbik7XG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4gICAgICAgICAgICBmb290ZXJGb250ID0gdG9Gb250KG9wdGlvbnMuZm9vdGVyRm9udCk7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gb3B0aW9ucy5mb290ZXJDb2xvcjtcbiAgICAgICAgICAgIGN0eC5mb250ID0gZm9vdGVyRm9udC5zdHJpbmc7XG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSl7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGZvb3RlcltpXSwgcnRsSGVscGVyLngocHQueCksIHB0LnkgKyBmb290ZXJGb250LmxpbmVIZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICBwdC55ICs9IGZvb3RlckZvbnQubGluZUhlaWdodCArIG9wdGlvbnMuZm9vdGVyU3BhY2luZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3QmFja2dyb3VuZChwdCwgY3R4LCB0b29sdGlwU2l6ZSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHhBbGlnbiAsIHlBbGlnbiAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHsgeCAsIHkgIH0gPSBwdDtcbiAgICAgICAgY29uc3QgeyB3aWR0aCAsIGhlaWdodCAgfSA9IHRvb2x0aXBTaXplO1xuICAgICAgICBjb25zdCB7IHRvcExlZnQgLCB0b3BSaWdodCAsIGJvdHRvbUxlZnQgLCBib3R0b21SaWdodCAgfSA9IHRvVFJCTENvcm5lcnMob3B0aW9ucy5jb3JuZXJSYWRpdXMpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IG9wdGlvbnMuYm9yZGVyQ29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBvcHRpb25zLmJvcmRlcldpZHRoO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oeCArIHRvcExlZnQsIHkpO1xuICAgICAgICBpZiAoeUFsaWduID09PSAndG9wJykge1xuICAgICAgICAgICAgdGhpcy5kcmF3Q2FyZXQocHQsIGN0eCwgdG9vbHRpcFNpemUsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5saW5lVG8oeCArIHdpZHRoIC0gdG9wUmlnaHQsIHkpO1xuICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGgsIHksIHggKyB3aWR0aCwgeSArIHRvcFJpZ2h0KTtcbiAgICAgICAgaWYgKHlBbGlnbiA9PT0gJ2NlbnRlcicgJiYgeEFsaWduID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdDYXJldChwdCwgY3R4LCB0b29sdGlwU2l6ZSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmxpbmVUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQgLSBib3R0b21SaWdodCk7XG4gICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCwgeCArIHdpZHRoIC0gYm90dG9tUmlnaHQsIHkgKyBoZWlnaHQpO1xuICAgICAgICBpZiAoeUFsaWduID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgdGhpcy5kcmF3Q2FyZXQocHQsIGN0eCwgdG9vbHRpcFNpemUsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5saW5lVG8oeCArIGJvdHRvbUxlZnQsIHkgKyBoZWlnaHQpO1xuICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4LCB5ICsgaGVpZ2h0LCB4LCB5ICsgaGVpZ2h0IC0gYm90dG9tTGVmdCk7XG4gICAgICAgIGlmICh5QWxpZ24gPT09ICdjZW50ZXInICYmIHhBbGlnbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdDYXJldChwdCwgY3R4LCB0b29sdGlwU2l6ZSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmxpbmVUbyh4LCB5ICsgdG9wTGVmdCk7XG4gICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyB0b3BMZWZ0LCB5KTtcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBpZiAob3B0aW9ucy5ib3JkZXJXaWR0aCA+IDApIHtcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiBfdXBkYXRlQW5pbWF0aW9uVGFyZ2V0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICBjb25zdCBhbmltcyA9IHRoaXMuJGFuaW1hdGlvbnM7XG4gICAgICAgIGNvbnN0IGFuaW1YID0gYW5pbXMgJiYgYW5pbXMueDtcbiAgICAgICAgY29uc3QgYW5pbVkgPSBhbmltcyAmJiBhbmltcy55O1xuICAgICAgICBpZiAoYW5pbVggfHwgYW5pbVkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcG9zaXRpb25lcnNbb3B0aW9ucy5wb3NpdGlvbl0uY2FsbCh0aGlzLCB0aGlzLl9hY3RpdmUsIHRoaXMuX2V2ZW50UG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLl9zaXplID0gZ2V0VG9vbHRpcFNpemUodGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbkFuZFNpemUgPSBPYmplY3QuYXNzaWduKHt9LCBwb3NpdGlvbiwgdGhpcy5fc2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBhbGlnbm1lbnQgPSBkZXRlcm1pbmVBbGlnbm1lbnQoY2hhcnQsIG9wdGlvbnMsIHBvc2l0aW9uQW5kU2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBwb2ludCA9IGdldEJhY2tncm91bmRQb2ludChvcHRpb25zLCBwb3NpdGlvbkFuZFNpemUsIGFsaWdubWVudCwgY2hhcnQpO1xuICAgICAgICAgICAgaWYgKGFuaW1YLl90byAhPT0gcG9pbnQueCB8fCBhbmltWS5fdG8gIT09IHBvaW50LnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnhBbGlnbiA9IGFsaWdubWVudC54QWxpZ247XG4gICAgICAgICAgICAgICAgdGhpcy55QWxpZ24gPSBhbGlnbm1lbnQueUFsaWduO1xuICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSBzaXplLndpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJldFggPSBwb3NpdGlvbi54O1xuICAgICAgICAgICAgICAgIHRoaXMuY2FyZXRZID0gcG9zaXRpb24ueTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNvbHZlQW5pbWF0aW9ucygpLnVwZGF0ZSh0aGlzLCBwb2ludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gX3dpbGxSZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMub3BhY2l0eTtcbiAgICB9XG4gICAgZHJhdyhjdHgpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucy5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICAgICAgbGV0IG9wYWNpdHkgPSB0aGlzLm9wYWNpdHk7XG4gICAgICAgIGlmICghb3BhY2l0eSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VwZGF0ZUFuaW1hdGlvblRhcmdldChvcHRpb25zKTtcbiAgICAgICAgY29uc3QgdG9vbHRpcFNpemUgPSB7XG4gICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcHQgPSB7XG4gICAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgICB5OiB0aGlzLnlcbiAgICAgICAgfTtcbiAgICAgICAgb3BhY2l0eSA9IE1hdGguYWJzKG9wYWNpdHkpIDwgMWUtMyA/IDAgOiBvcGFjaXR5O1xuICAgICAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKG9wdGlvbnMucGFkZGluZyk7XG4gICAgICAgIGNvbnN0IGhhc1Rvb2x0aXBDb250ZW50ID0gdGhpcy50aXRsZS5sZW5ndGggfHwgdGhpcy5iZWZvcmVCb2R5Lmxlbmd0aCB8fCB0aGlzLmJvZHkubGVuZ3RoIHx8IHRoaXMuYWZ0ZXJCb2R5Lmxlbmd0aCB8fCB0aGlzLmZvb3Rlci5sZW5ndGg7XG4gICAgICAgIGlmIChvcHRpb25zLmVuYWJsZWQgJiYgaGFzVG9vbHRpcENvbnRlbnQpIHtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBvcGFjaXR5O1xuICAgICAgICAgICAgdGhpcy5kcmF3QmFja2dyb3VuZChwdCwgY3R4LCB0b29sdGlwU2l6ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBvdmVycmlkZVRleHREaXJlY3Rpb24oY3R4LCBvcHRpb25zLnRleHREaXJlY3Rpb24pO1xuICAgICAgICAgICAgcHQueSArPSBwYWRkaW5nLnRvcDtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RpdGxlKHB0LCBjdHgsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5kcmF3Qm9keShwdCwgY3R4LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd0Zvb3RlcihwdCwgY3R4LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJlc3RvcmVUZXh0RGlyZWN0aW9uKGN0eCwgb3B0aW9ucy50ZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gZ2V0QWN0aXZlRWxlbWVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY3RpdmUgfHwgW107XG4gICAgfVxuIHNldEFjdGl2ZUVsZW1lbnRzKGFjdGl2ZUVsZW1lbnRzLCBldmVudFBvc2l0aW9uKSB7XG4gICAgICAgIGNvbnN0IGxhc3RBY3RpdmUgPSB0aGlzLl9hY3RpdmU7XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IGFjdGl2ZUVsZW1lbnRzLm1hcCgoeyBkYXRhc2V0SW5kZXggLCBpbmRleCAgfSk9PntcbiAgICAgICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLmNoYXJ0LmdldERhdGFzZXRNZXRhKGRhdGFzZXRJbmRleCk7XG4gICAgICAgICAgICBpZiAoIW1ldGEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIGEgZGF0YXNldCBhdCBpbmRleCAnICsgZGF0YXNldEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YXNldEluZGV4LFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IG1ldGEuZGF0YVtpbmRleF0sXG4gICAgICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gIV9lbGVtZW50c0VxdWFsKGxhc3RBY3RpdmUsIGFjdGl2ZSk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uQ2hhbmdlZCA9IHRoaXMuX3Bvc2l0aW9uQ2hhbmdlZChhY3RpdmUsIGV2ZW50UG9zaXRpb24pO1xuICAgICAgICBpZiAoY2hhbmdlZCB8fCBwb3NpdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50UG9zaXRpb24gPSBldmVudFBvc2l0aW9uO1xuICAgICAgICAgICAgdGhpcy5faWdub3JlUmVwbGF5RXZlbnRzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuIGhhbmRsZUV2ZW50KGUsIHJlcGxheSwgaW5DaGFydEFyZWEgPSB0cnVlKSB7XG4gICAgICAgIGlmIChyZXBsYXkgJiYgdGhpcy5faWdub3JlUmVwbGF5RXZlbnRzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faWdub3JlUmVwbGF5RXZlbnRzID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGxhc3RBY3RpdmUgPSB0aGlzLl9hY3RpdmUgfHwgW107XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuX2dldEFjdGl2ZUVsZW1lbnRzKGUsIGxhc3RBY3RpdmUsIHJlcGxheSwgaW5DaGFydEFyZWEpO1xuICAgICAgICBjb25zdCBwb3NpdGlvbkNoYW5nZWQgPSB0aGlzLl9wb3NpdGlvbkNoYW5nZWQoYWN0aXZlLCBlKTtcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IHJlcGxheSB8fCAhX2VsZW1lbnRzRXF1YWwoYWN0aXZlLCBsYXN0QWN0aXZlKSB8fCBwb3NpdGlvbkNoYW5nZWQ7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5lbmFibGVkIHx8IG9wdGlvbnMuZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudFBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICB4OiBlLngsXG4gICAgICAgICAgICAgICAgICAgIHk6IGUueVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUodHJ1ZSwgcmVwbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9XG4gX2dldEFjdGl2ZUVsZW1lbnRzKGUsIGxhc3RBY3RpdmUsIHJlcGxheSwgaW5DaGFydEFyZWEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlb3V0Jykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW5DaGFydEFyZWEpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXN0QWN0aXZlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuY2hhcnQuZ2V0RWxlbWVudHNBdEV2ZW50Rm9yTW9kZShlLCBvcHRpb25zLm1vZGUsIG9wdGlvbnMsIHJlcGxheSk7XG4gICAgICAgIGlmIChvcHRpb25zLnJldmVyc2UpIHtcbiAgICAgICAgICAgIGFjdGl2ZS5yZXZlcnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGl2ZTtcbiAgICB9XG4gX3Bvc2l0aW9uQ2hhbmdlZChhY3RpdmUsIGUpIHtcbiAgICAgICAgY29uc3QgeyBjYXJldFggLCBjYXJldFkgLCBvcHRpb25zICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBwb3NpdGlvbmVyc1tvcHRpb25zLnBvc2l0aW9uXS5jYWxsKHRoaXMsIGFjdGl2ZSwgZSk7XG4gICAgICAgIHJldHVybiBwb3NpdGlvbiAhPT0gZmFsc2UgJiYgKGNhcmV0WCAhPT0gcG9zaXRpb24ueCB8fCBjYXJldFkgIT09IHBvc2l0aW9uLnkpO1xuICAgIH1cbn1cbnZhciBwbHVnaW5fdG9vbHRpcCA9IHtcbiAgICBpZDogJ3Rvb2x0aXAnLFxuICAgIF9lbGVtZW50OiBUb29sdGlwLFxuICAgIHBvc2l0aW9uZXJzLFxuICAgIGFmdGVySW5pdCAoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICBjaGFydC50b29sdGlwID0gbmV3IFRvb2x0aXAoe1xuICAgICAgICAgICAgICAgIGNoYXJ0LFxuICAgICAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBiZWZvcmVVcGRhdGUgKGNoYXJ0LCBfYXJncywgb3B0aW9ucykge1xuICAgICAgICBpZiAoY2hhcnQudG9vbHRpcCkge1xuICAgICAgICAgICAgY2hhcnQudG9vbHRpcC5pbml0aWFsaXplKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZXNldCAoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChjaGFydC50b29sdGlwKSB7XG4gICAgICAgICAgICBjaGFydC50b29sdGlwLmluaXRpYWxpemUob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFmdGVyRHJhdyAoY2hhcnQpIHtcbiAgICAgICAgY29uc3QgdG9vbHRpcCA9IGNoYXJ0LnRvb2x0aXA7XG4gICAgICAgIGlmICh0b29sdGlwICYmIHRvb2x0aXAuX3dpbGxSZW5kZXIoKSkge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IHtcbiAgICAgICAgICAgICAgICB0b29sdGlwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGNoYXJ0Lm5vdGlmeVBsdWdpbnMoJ2JlZm9yZVRvb2x0aXBEcmF3Jywge1xuICAgICAgICAgICAgICAgIC4uLmFyZ3MsXG4gICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9vbHRpcC5kcmF3KGNoYXJ0LmN0eCk7XG4gICAgICAgICAgICBjaGFydC5ub3RpZnlQbHVnaW5zKCdhZnRlclRvb2x0aXBEcmF3JywgYXJncyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFmdGVyRXZlbnQgKGNoYXJ0LCBhcmdzKSB7XG4gICAgICAgIGlmIChjaGFydC50b29sdGlwKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VGaW5hbFBvc2l0aW9uID0gYXJncy5yZXBsYXk7XG4gICAgICAgICAgICBpZiAoY2hhcnQudG9vbHRpcC5oYW5kbGVFdmVudChhcmdzLmV2ZW50LCB1c2VGaW5hbFBvc2l0aW9uLCBhcmdzLmluQ2hhcnRBcmVhKSkge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGV4dGVybmFsOiBudWxsLFxuICAgICAgICBwb3NpdGlvbjogJ2F2ZXJhZ2UnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsMCwwLDAuOCknLFxuICAgICAgICB0aXRsZUNvbG9yOiAnI2ZmZicsXG4gICAgICAgIHRpdGxlRm9udDoge1xuICAgICAgICAgICAgd2VpZ2h0OiAnYm9sZCdcbiAgICAgICAgfSxcbiAgICAgICAgdGl0bGVTcGFjaW5nOiAyLFxuICAgICAgICB0aXRsZU1hcmdpbkJvdHRvbTogNixcbiAgICAgICAgdGl0bGVBbGlnbjogJ2xlZnQnLFxuICAgICAgICBib2R5Q29sb3I6ICcjZmZmJyxcbiAgICAgICAgYm9keVNwYWNpbmc6IDIsXG4gICAgICAgIGJvZHlGb250OiB7fSxcbiAgICAgICAgYm9keUFsaWduOiAnbGVmdCcsXG4gICAgICAgIGZvb3RlckNvbG9yOiAnI2ZmZicsXG4gICAgICAgIGZvb3RlclNwYWNpbmc6IDIsXG4gICAgICAgIGZvb3Rlck1hcmdpblRvcDogNixcbiAgICAgICAgZm9vdGVyRm9udDoge1xuICAgICAgICAgICAgd2VpZ2h0OiAnYm9sZCdcbiAgICAgICAgfSxcbiAgICAgICAgZm9vdGVyQWxpZ246ICdsZWZ0JyxcbiAgICAgICAgcGFkZGluZzogNixcbiAgICAgICAgY2FyZXRQYWRkaW5nOiAyLFxuICAgICAgICBjYXJldFNpemU6IDUsXG4gICAgICAgIGNvcm5lclJhZGl1czogNixcbiAgICAgICAgYm94SGVpZ2h0OiAoY3R4LCBvcHRzKT0+b3B0cy5ib2R5Rm9udC5zaXplLFxuICAgICAgICBib3hXaWR0aDogKGN0eCwgb3B0cyk9Pm9wdHMuYm9keUZvbnQuc2l6ZSxcbiAgICAgICAgbXVsdGlLZXlCYWNrZ3JvdW5kOiAnI2ZmZicsXG4gICAgICAgIGRpc3BsYXlDb2xvcnM6IHRydWUsXG4gICAgICAgIGJveFBhZGRpbmc6IDAsXG4gICAgICAgIGJvcmRlckNvbG9yOiAncmdiYSgwLDAsMCwwKScsXG4gICAgICAgIGJvcmRlcldpZHRoOiAwLFxuICAgICAgICBhbmltYXRpb246IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhcnQnXG4gICAgICAgIH0sXG4gICAgICAgIGFuaW1hdGlvbnM6IHtcbiAgICAgICAgICAgIG51bWJlcnM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBbXG4gICAgICAgICAgICAgICAgICAgICd4JyxcbiAgICAgICAgICAgICAgICAgICAgJ3knLFxuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnLFxuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgJ2NhcmV0WCcsXG4gICAgICAgICAgICAgICAgICAgICdjYXJldFknXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wYWNpdHk6IHtcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdsaW5lYXInLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2tzOiBkZWZhdWx0Q2FsbGJhY2tzXG4gICAgfSxcbiAgICBkZWZhdWx0Um91dGVzOiB7XG4gICAgICAgIGJvZHlGb250OiAnZm9udCcsXG4gICAgICAgIGZvb3RlckZvbnQ6ICdmb250JyxcbiAgICAgICAgdGl0bGVGb250OiAnZm9udCdcbiAgICB9LFxuICAgIGRlc2NyaXB0b3JzOiB7XG4gICAgICAgIF9zY3JpcHRhYmxlOiAobmFtZSk9Pm5hbWUgIT09ICdmaWx0ZXInICYmIG5hbWUgIT09ICdpdGVtU29ydCcgJiYgbmFtZSAhPT0gJ2V4dGVybmFsJyxcbiAgICAgICAgX2luZGV4YWJsZTogZmFsc2UsXG4gICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgX3NjcmlwdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgX2luZGV4YWJsZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgYW5pbWF0aW9uOiB7XG4gICAgICAgICAgICBfZmFsbGJhY2s6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGFuaW1hdGlvbnM6IHtcbiAgICAgICAgICAgIF9mYWxsYmFjazogJ2FuaW1hdGlvbidcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYWRkaXRpb25hbE9wdGlvblNjb3BlczogW1xuICAgICAgICAnaW50ZXJhY3Rpb24nXG4gICAgXVxufTtcblxudmFyIHBsdWdpbnMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG5fX3Byb3RvX186IG51bGwsXG5Db2xvcnM6IHBsdWdpbl9jb2xvcnMsXG5EZWNpbWF0aW9uOiBwbHVnaW5fZGVjaW1hdGlvbixcbkZpbGxlcjogaW5kZXgsXG5MZWdlbmQ6IHBsdWdpbl9sZWdlbmQsXG5TdWJUaXRsZTogcGx1Z2luX3N1YnRpdGxlLFxuVGl0bGU6IHBsdWdpbl90aXRsZSxcblRvb2x0aXA6IHBsdWdpbl90b29sdGlwXG59KTtcblxuY29uc3QgYWRkSWZTdHJpbmcgPSAobGFiZWxzLCByYXcsIGluZGV4LCBhZGRlZExhYmVscyk9PntcbiAgICBpZiAodHlwZW9mIHJhdyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaW5kZXggPSBsYWJlbHMucHVzaChyYXcpIC0gMTtcbiAgICAgICAgYWRkZWRMYWJlbHMudW5zaGlmdCh7XG4gICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgIGxhYmVsOiByYXdcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpc05hTihyYXcpKSB7XG4gICAgICAgIGluZGV4ID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xufTtcbmZ1bmN0aW9uIGZpbmRPckFkZExhYmVsKGxhYmVscywgcmF3LCBpbmRleCwgYWRkZWRMYWJlbHMpIHtcbiAgICBjb25zdCBmaXJzdCA9IGxhYmVscy5pbmRleE9mKHJhdyk7XG4gICAgaWYgKGZpcnN0ID09PSAtMSkge1xuICAgICAgICByZXR1cm4gYWRkSWZTdHJpbmcobGFiZWxzLCByYXcsIGluZGV4LCBhZGRlZExhYmVscyk7XG4gICAgfVxuICAgIGNvbnN0IGxhc3QgPSBsYWJlbHMubGFzdEluZGV4T2YocmF3KTtcbiAgICByZXR1cm4gZmlyc3QgIT09IGxhc3QgPyBpbmRleCA6IGZpcnN0O1xufVxuY29uc3QgdmFsaWRJbmRleCA9IChpbmRleCwgbWF4KT0+aW5kZXggPT09IG51bGwgPyBudWxsIDogX2xpbWl0VmFsdWUoTWF0aC5yb3VuZChpbmRleCksIDAsIG1heCk7XG5mdW5jdGlvbiBfZ2V0TGFiZWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IGxhYmVscyA9IHRoaXMuZ2V0TGFiZWxzKCk7XG4gICAgaWYgKHZhbHVlID49IDAgJiYgdmFsdWUgPCBsYWJlbHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBsYWJlbHNbdmFsdWVdO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5jbGFzcyBDYXRlZ29yeVNjYWxlIGV4dGVuZHMgU2NhbGUge1xuICAgIHN0YXRpYyBpZCA9ICdjYXRlZ29yeSc7XG4gc3RhdGljIGRlZmF1bHRzID0ge1xuICAgICAgICB0aWNrczoge1xuICAgICAgICAgICAgY2FsbGJhY2s6IF9nZXRMYWJlbEZvclZhbHVlXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0cnVjdG9yKGNmZyl7XG4gICAgICAgIHN1cGVyKGNmZyk7XG4gICAgICAgICB0aGlzLl9zdGFydFZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl92YWx1ZVJhbmdlID0gMDtcbiAgICAgICAgdGhpcy5fYWRkZWRMYWJlbHMgPSBbXTtcbiAgICB9XG4gICAgaW5pdChzY2FsZU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYWRkZWQgPSB0aGlzLl9hZGRlZExhYmVscztcbiAgICAgICAgaWYgKGFkZGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gdGhpcy5nZXRMYWJlbHMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgeyBpbmRleCAsIGxhYmVsICB9IG9mIGFkZGVkKXtcbiAgICAgICAgICAgICAgICBpZiAobGFiZWxzW2luZGV4XSA9PT0gbGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fYWRkZWRMYWJlbHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5pbml0KHNjYWxlT3B0aW9ucyk7XG4gICAgfVxuICAgIHBhcnNlKHJhdywgaW5kZXgpIHtcbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWYocmF3KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGFiZWxzID0gdGhpcy5nZXRMYWJlbHMoKTtcbiAgICAgICAgaW5kZXggPSBpc0Zpbml0ZShpbmRleCkgJiYgbGFiZWxzW2luZGV4XSA9PT0gcmF3ID8gaW5kZXggOiBmaW5kT3JBZGRMYWJlbChsYWJlbHMsIHJhdywgdmFsdWVPckRlZmF1bHQoaW5kZXgsIHJhdyksIHRoaXMuX2FkZGVkTGFiZWxzKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkSW5kZXgoaW5kZXgsIGxhYmVscy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZGV0ZXJtaW5lRGF0YUxpbWl0cygpIHtcbiAgICAgICAgY29uc3QgeyBtaW5EZWZpbmVkICwgbWF4RGVmaW5lZCAgfSA9IHRoaXMuZ2V0VXNlckJvdW5kcygpO1xuICAgICAgICBsZXQgeyBtaW4gLCBtYXggIH0gPSB0aGlzLmdldE1pbk1heCh0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ib3VuZHMgPT09ICd0aWNrcycpIHtcbiAgICAgICAgICAgIGlmICghbWluRGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1pbiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1heERlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtYXggPSB0aGlzLmdldExhYmVscygpLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5taW4gPSBtaW47XG4gICAgICAgIHRoaXMubWF4ID0gbWF4O1xuICAgIH1cbiAgICBidWlsZFRpY2tzKCkge1xuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm1pbjtcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5tYXg7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMub3B0aW9ucy5vZmZzZXQ7XG4gICAgICAgIGNvbnN0IHRpY2tzID0gW107XG4gICAgICAgIGxldCBsYWJlbHMgPSB0aGlzLmdldExhYmVscygpO1xuICAgICAgICBsYWJlbHMgPSBtaW4gPT09IDAgJiYgbWF4ID09PSBsYWJlbHMubGVuZ3RoIC0gMSA/IGxhYmVscyA6IGxhYmVscy5zbGljZShtaW4sIG1heCArIDEpO1xuICAgICAgICB0aGlzLl92YWx1ZVJhbmdlID0gTWF0aC5tYXgobGFiZWxzLmxlbmd0aCAtIChvZmZzZXQgPyAwIDogMSksIDEpO1xuICAgICAgICB0aGlzLl9zdGFydFZhbHVlID0gdGhpcy5taW4gLSAob2Zmc2V0ID8gMC41IDogMCk7XG4gICAgICAgIGZvcihsZXQgdmFsdWUgPSBtaW47IHZhbHVlIDw9IG1heDsgdmFsdWUrKyl7XG4gICAgICAgICAgICB0aWNrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRpY2tzO1xuICAgIH1cbiAgICBnZXRMYWJlbEZvclZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBfZ2V0TGFiZWxGb3JWYWx1ZS5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICB9XG4gY29uZmlndXJlKCkge1xuICAgICAgICBzdXBlci5jb25maWd1cmUoKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXZlcnNlUGl4ZWxzID0gIXRoaXMuX3JldmVyc2VQaXhlbHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgPyBOYU4gOiB0aGlzLmdldFBpeGVsRm9yRGVjaW1hbCgodmFsdWUgLSB0aGlzLl9zdGFydFZhbHVlKSAvIHRoaXMuX3ZhbHVlUmFuZ2UpO1xuICAgIH1cbiAgICBnZXRQaXhlbEZvclRpY2soaW5kZXgpIHtcbiAgICAgICAgY29uc3QgdGlja3MgPSB0aGlzLnRpY2tzO1xuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gdGlja3MubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGl4ZWxGb3JWYWx1ZSh0aWNrc1tpbmRleF0udmFsdWUpO1xuICAgIH1cbiAgICBnZXRWYWx1ZUZvclBpeGVsKHBpeGVsKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRoaXMuX3N0YXJ0VmFsdWUgKyB0aGlzLmdldERlY2ltYWxGb3JQaXhlbChwaXhlbCkgKiB0aGlzLl92YWx1ZVJhbmdlKTtcbiAgICB9XG4gICAgZ2V0QmFzZVBpeGVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3R0b207XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVRpY2tzJDEoZ2VuZXJhdGlvbk9wdGlvbnMsIGRhdGFSYW5nZSkge1xuICAgIGNvbnN0IHRpY2tzID0gW107XG4gICAgY29uc3QgTUlOX1NQQUNJTkcgPSAxZS0xNDtcbiAgICBjb25zdCB7IGJvdW5kcyAsIHN0ZXAgLCBtaW4gLCBtYXggLCBwcmVjaXNpb24gLCBjb3VudCAsIG1heFRpY2tzICwgbWF4RGlnaXRzICwgaW5jbHVkZUJvdW5kcyAgfSA9IGdlbmVyYXRpb25PcHRpb25zO1xuICAgIGNvbnN0IHVuaXQgPSBzdGVwIHx8IDE7XG4gICAgY29uc3QgbWF4U3BhY2VzID0gbWF4VGlja3MgLSAxO1xuICAgIGNvbnN0IHsgbWluOiBybWluICwgbWF4OiBybWF4ICB9ID0gZGF0YVJhbmdlO1xuICAgIGNvbnN0IG1pbkRlZmluZWQgPSAhaXNOdWxsT3JVbmRlZihtaW4pO1xuICAgIGNvbnN0IG1heERlZmluZWQgPSAhaXNOdWxsT3JVbmRlZihtYXgpO1xuICAgIGNvbnN0IGNvdW50RGVmaW5lZCA9ICFpc051bGxPclVuZGVmKGNvdW50KTtcbiAgICBjb25zdCBtaW5TcGFjaW5nID0gKHJtYXggLSBybWluKSAvIChtYXhEaWdpdHMgKyAxKTtcbiAgICBsZXQgc3BhY2luZyA9IG5pY2VOdW0oKHJtYXggLSBybWluKSAvIG1heFNwYWNlcyAvIHVuaXQpICogdW5pdDtcbiAgICBsZXQgZmFjdG9yLCBuaWNlTWluLCBuaWNlTWF4LCBudW1TcGFjZXM7XG4gICAgaWYgKHNwYWNpbmcgPCBNSU5fU1BBQ0lORyAmJiAhbWluRGVmaW5lZCAmJiAhbWF4RGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBybWluXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBybWF4XG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgfVxuICAgIG51bVNwYWNlcyA9IE1hdGguY2VpbChybWF4IC8gc3BhY2luZykgLSBNYXRoLmZsb29yKHJtaW4gLyBzcGFjaW5nKTtcbiAgICBpZiAobnVtU3BhY2VzID4gbWF4U3BhY2VzKSB7XG4gICAgICAgIHNwYWNpbmcgPSBuaWNlTnVtKG51bVNwYWNlcyAqIHNwYWNpbmcgLyBtYXhTcGFjZXMgLyB1bml0KSAqIHVuaXQ7XG4gICAgfVxuICAgIGlmICghaXNOdWxsT3JVbmRlZihwcmVjaXNpb24pKSB7XG4gICAgICAgIGZhY3RvciA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xuICAgICAgICBzcGFjaW5nID0gTWF0aC5jZWlsKHNwYWNpbmcgKiBmYWN0b3IpIC8gZmFjdG9yO1xuICAgIH1cbiAgICBpZiAoYm91bmRzID09PSAndGlja3MnKSB7XG4gICAgICAgIG5pY2VNaW4gPSBNYXRoLmZsb29yKHJtaW4gLyBzcGFjaW5nKSAqIHNwYWNpbmc7XG4gICAgICAgIG5pY2VNYXggPSBNYXRoLmNlaWwocm1heCAvIHNwYWNpbmcpICogc3BhY2luZztcbiAgICB9IGVsc2Uge1xuICAgICAgICBuaWNlTWluID0gcm1pbjtcbiAgICAgICAgbmljZU1heCA9IHJtYXg7XG4gICAgfVxuICAgIGlmIChtaW5EZWZpbmVkICYmIG1heERlZmluZWQgJiYgc3RlcCAmJiBhbG1vc3RXaG9sZSgobWF4IC0gbWluKSAvIHN0ZXAsIHNwYWNpbmcgLyAxMDAwKSkge1xuICAgICAgICBudW1TcGFjZXMgPSBNYXRoLnJvdW5kKE1hdGgubWluKChtYXggLSBtaW4pIC8gc3BhY2luZywgbWF4VGlja3MpKTtcbiAgICAgICAgc3BhY2luZyA9IChtYXggLSBtaW4pIC8gbnVtU3BhY2VzO1xuICAgICAgICBuaWNlTWluID0gbWluO1xuICAgICAgICBuaWNlTWF4ID0gbWF4O1xuICAgIH0gZWxzZSBpZiAoY291bnREZWZpbmVkKSB7XG4gICAgICAgIG5pY2VNaW4gPSBtaW5EZWZpbmVkID8gbWluIDogbmljZU1pbjtcbiAgICAgICAgbmljZU1heCA9IG1heERlZmluZWQgPyBtYXggOiBuaWNlTWF4O1xuICAgICAgICBudW1TcGFjZXMgPSBjb3VudCAtIDE7XG4gICAgICAgIHNwYWNpbmcgPSAobmljZU1heCAtIG5pY2VNaW4pIC8gbnVtU3BhY2VzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG51bVNwYWNlcyA9IChuaWNlTWF4IC0gbmljZU1pbikgLyBzcGFjaW5nO1xuICAgICAgICBpZiAoYWxtb3N0RXF1YWxzKG51bVNwYWNlcywgTWF0aC5yb3VuZChudW1TcGFjZXMpLCBzcGFjaW5nIC8gMTAwMCkpIHtcbiAgICAgICAgICAgIG51bVNwYWNlcyA9IE1hdGgucm91bmQobnVtU3BhY2VzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG51bVNwYWNlcyA9IE1hdGguY2VpbChudW1TcGFjZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGRlY2ltYWxQbGFjZXMgPSBNYXRoLm1heChfZGVjaW1hbFBsYWNlcyhzcGFjaW5nKSwgX2RlY2ltYWxQbGFjZXMobmljZU1pbikpO1xuICAgIGZhY3RvciA9IE1hdGgucG93KDEwLCBpc051bGxPclVuZGVmKHByZWNpc2lvbikgPyBkZWNpbWFsUGxhY2VzIDogcHJlY2lzaW9uKTtcbiAgICBuaWNlTWluID0gTWF0aC5yb3VuZChuaWNlTWluICogZmFjdG9yKSAvIGZhY3RvcjtcbiAgICBuaWNlTWF4ID0gTWF0aC5yb3VuZChuaWNlTWF4ICogZmFjdG9yKSAvIGZhY3RvcjtcbiAgICBsZXQgaiA9IDA7XG4gICAgaWYgKG1pbkRlZmluZWQpIHtcbiAgICAgICAgaWYgKGluY2x1ZGVCb3VuZHMgJiYgbmljZU1pbiAhPT0gbWluKSB7XG4gICAgICAgICAgICB0aWNrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogbWluXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChuaWNlTWluIDwgbWluKSB7XG4gICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFsbW9zdEVxdWFscyhNYXRoLnJvdW5kKChuaWNlTWluICsgaiAqIHNwYWNpbmcpICogZmFjdG9yKSAvIGZhY3RvciwgbWluLCByZWxhdGl2ZUxhYmVsU2l6ZShtaW4sIG1pblNwYWNpbmcsIGdlbmVyYXRpb25PcHRpb25zKSkpIHtcbiAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmljZU1pbiA8IG1pbikge1xuICAgICAgICAgICAgaisrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcig7IGogPCBudW1TcGFjZXM7ICsrail7XG4gICAgICAgIHRpY2tzLnB1c2goe1xuICAgICAgICAgICAgdmFsdWU6IE1hdGgucm91bmQoKG5pY2VNaW4gKyBqICogc3BhY2luZykgKiBmYWN0b3IpIC8gZmFjdG9yXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAobWF4RGVmaW5lZCAmJiBpbmNsdWRlQm91bmRzICYmIG5pY2VNYXggIT09IG1heCkge1xuICAgICAgICBpZiAodGlja3MubGVuZ3RoICYmIGFsbW9zdEVxdWFscyh0aWNrc1t0aWNrcy5sZW5ndGggLSAxXS52YWx1ZSwgbWF4LCByZWxhdGl2ZUxhYmVsU2l6ZShtYXgsIG1pblNwYWNpbmcsIGdlbmVyYXRpb25PcHRpb25zKSkpIHtcbiAgICAgICAgICAgIHRpY2tzW3RpY2tzLmxlbmd0aCAtIDFdLnZhbHVlID0gbWF4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGlja3MucHVzaCh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG1heFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFtYXhEZWZpbmVkIHx8IG5pY2VNYXggPT09IG1heCkge1xuICAgICAgICB0aWNrcy5wdXNoKHtcbiAgICAgICAgICAgIHZhbHVlOiBuaWNlTWF4XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGlja3M7XG59XG5mdW5jdGlvbiByZWxhdGl2ZUxhYmVsU2l6ZSh2YWx1ZSwgbWluU3BhY2luZywgeyBob3Jpem9udGFsICwgbWluUm90YXRpb24gIH0pIHtcbiAgICBjb25zdCByYWQgPSB0b1JhZGlhbnMobWluUm90YXRpb24pO1xuICAgIGNvbnN0IHJhdGlvID0gKGhvcml6b250YWwgPyBNYXRoLnNpbihyYWQpIDogTWF0aC5jb3MocmFkKSkgfHwgMC4wMDE7XG4gICAgY29uc3QgbGVuZ3RoID0gMC43NSAqIG1pblNwYWNpbmcgKiAoJycgKyB2YWx1ZSkubGVuZ3RoO1xuICAgIHJldHVybiBNYXRoLm1pbihtaW5TcGFjaW5nIC8gcmF0aW8sIGxlbmd0aCk7XG59XG5jbGFzcyBMaW5lYXJTY2FsZUJhc2UgZXh0ZW5kcyBTY2FsZSB7XG4gICAgY29uc3RydWN0b3IoY2ZnKXtcbiAgICAgICAgc3VwZXIoY2ZnKTtcbiAgICAgICAgIHRoaXMuc3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLmVuZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgIHRoaXMuX3N0YXJ0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLl9lbmRWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fdmFsdWVSYW5nZSA9IDA7XG4gICAgfVxuICAgIHBhcnNlKHJhdywgaW5kZXgpIHtcbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWYocmF3KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0eXBlb2YgcmF3ID09PSAnbnVtYmVyJyB8fCByYXcgaW5zdGFuY2VvZiBOdW1iZXIpICYmICFpc0Zpbml0ZSgrcmF3KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICtyYXc7XG4gICAgfVxuICAgIGhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IHsgYmVnaW5BdFplcm8gIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgbWluRGVmaW5lZCAsIG1heERlZmluZWQgIH0gPSB0aGlzLmdldFVzZXJCb3VuZHMoKTtcbiAgICAgICAgbGV0IHsgbWluICwgbWF4ICB9ID0gdGhpcztcbiAgICAgICAgY29uc3Qgc2V0TWluID0gKHYpPT5taW4gPSBtaW5EZWZpbmVkID8gbWluIDogdjtcbiAgICAgICAgY29uc3Qgc2V0TWF4ID0gKHYpPT5tYXggPSBtYXhEZWZpbmVkID8gbWF4IDogdjtcbiAgICAgICAgaWYgKGJlZ2luQXRaZXJvKSB7XG4gICAgICAgICAgICBjb25zdCBtaW5TaWduID0gc2lnbihtaW4pO1xuICAgICAgICAgICAgY29uc3QgbWF4U2lnbiA9IHNpZ24obWF4KTtcbiAgICAgICAgICAgIGlmIChtaW5TaWduIDwgMCAmJiBtYXhTaWduIDwgMCkge1xuICAgICAgICAgICAgICAgIHNldE1heCgwKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWluU2lnbiA+IDAgJiYgbWF4U2lnbiA+IDApIHtcbiAgICAgICAgICAgICAgICBzZXRNaW4oMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1pbiA9PT0gbWF4KSB7XG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gbWF4ID09PSAwID8gMSA6IE1hdGguYWJzKG1heCAqIDAuMDUpO1xuICAgICAgICAgICAgc2V0TWF4KG1heCArIG9mZnNldCk7XG4gICAgICAgICAgICBpZiAoIWJlZ2luQXRaZXJvKSB7XG4gICAgICAgICAgICAgICAgc2V0TWluKG1pbiAtIG9mZnNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5taW4gPSBtaW47XG4gICAgICAgIHRoaXMubWF4ID0gbWF4O1xuICAgIH1cbiAgICBnZXRUaWNrTGltaXQoKSB7XG4gICAgICAgIGNvbnN0IHRpY2tPcHRzID0gdGhpcy5vcHRpb25zLnRpY2tzO1xuICAgICAgICBsZXQgeyBtYXhUaWNrc0xpbWl0ICwgc3RlcFNpemUgIH0gPSB0aWNrT3B0cztcbiAgICAgICAgbGV0IG1heFRpY2tzO1xuICAgICAgICBpZiAoc3RlcFNpemUpIHtcbiAgICAgICAgICAgIG1heFRpY2tzID0gTWF0aC5jZWlsKHRoaXMubWF4IC8gc3RlcFNpemUpIC0gTWF0aC5mbG9vcih0aGlzLm1pbiAvIHN0ZXBTaXplKSArIDE7XG4gICAgICAgICAgICBpZiAobWF4VGlja3MgPiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBzY2FsZXMuJHt0aGlzLmlkfS50aWNrcy5zdGVwU2l6ZTogJHtzdGVwU2l6ZX0gd291bGQgcmVzdWx0IGdlbmVyYXRpbmcgdXAgdG8gJHttYXhUaWNrc30gdGlja3MuIExpbWl0aW5nIHRvIDEwMDAuYCk7XG4gICAgICAgICAgICAgICAgbWF4VGlja3MgPSAxMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF4VGlja3MgPSB0aGlzLmNvbXB1dGVUaWNrTGltaXQoKTtcbiAgICAgICAgICAgIG1heFRpY2tzTGltaXQgPSBtYXhUaWNrc0xpbWl0IHx8IDExO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhUaWNrc0xpbWl0KSB7XG4gICAgICAgICAgICBtYXhUaWNrcyA9IE1hdGgubWluKG1heFRpY2tzTGltaXQsIG1heFRpY2tzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4VGlja3M7XG4gICAgfVxuIGNvbXB1dGVUaWNrTGltaXQoKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgfVxuICAgIGJ1aWxkVGlja3MoKSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHRpY2tPcHRzID0gb3B0cy50aWNrcztcbiAgICAgICAgbGV0IG1heFRpY2tzID0gdGhpcy5nZXRUaWNrTGltaXQoKTtcbiAgICAgICAgbWF4VGlja3MgPSBNYXRoLm1heCgyLCBtYXhUaWNrcyk7XG4gICAgICAgIGNvbnN0IG51bWVyaWNHZW5lcmF0b3JPcHRpb25zID0ge1xuICAgICAgICAgICAgbWF4VGlja3MsXG4gICAgICAgICAgICBib3VuZHM6IG9wdHMuYm91bmRzLFxuICAgICAgICAgICAgbWluOiBvcHRzLm1pbixcbiAgICAgICAgICAgIG1heDogb3B0cy5tYXgsXG4gICAgICAgICAgICBwcmVjaXNpb246IHRpY2tPcHRzLnByZWNpc2lvbixcbiAgICAgICAgICAgIHN0ZXA6IHRpY2tPcHRzLnN0ZXBTaXplLFxuICAgICAgICAgICAgY291bnQ6IHRpY2tPcHRzLmNvdW50LFxuICAgICAgICAgICAgbWF4RGlnaXRzOiB0aGlzLl9tYXhEaWdpdHMoKSxcbiAgICAgICAgICAgIGhvcml6b250YWw6IHRoaXMuaXNIb3Jpem9udGFsKCksXG4gICAgICAgICAgICBtaW5Sb3RhdGlvbjogdGlja09wdHMubWluUm90YXRpb24gfHwgMCxcbiAgICAgICAgICAgIGluY2x1ZGVCb3VuZHM6IHRpY2tPcHRzLmluY2x1ZGVCb3VuZHMgIT09IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRhdGFSYW5nZSA9IHRoaXMuX3JhbmdlIHx8IHRoaXM7XG4gICAgICAgIGNvbnN0IHRpY2tzID0gZ2VuZXJhdGVUaWNrcyQxKG51bWVyaWNHZW5lcmF0b3JPcHRpb25zLCBkYXRhUmFuZ2UpO1xuICAgICAgICBpZiAob3B0cy5ib3VuZHMgPT09ICd0aWNrcycpIHtcbiAgICAgICAgICAgIF9zZXRNaW5BbmRNYXhCeUtleSh0aWNrcywgdGhpcywgJ3ZhbHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMucmV2ZXJzZSkge1xuICAgICAgICAgICAgdGlja3MucmV2ZXJzZSgpO1xuICAgICAgICAgICAgdGhpcy5zdGFydCA9IHRoaXMubWF4O1xuICAgICAgICAgICAgdGhpcy5lbmQgPSB0aGlzLm1pbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB0aGlzLm1pbjtcbiAgICAgICAgICAgIHRoaXMuZW5kID0gdGhpcy5tYXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRpY2tzO1xuICAgIH1cbiBjb25maWd1cmUoKSB7XG4gICAgICAgIGNvbnN0IHRpY2tzID0gdGhpcy50aWNrcztcbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5taW47XG4gICAgICAgIGxldCBlbmQgPSB0aGlzLm1heDtcbiAgICAgICAgc3VwZXIuY29uZmlndXJlKCk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMub2Zmc2V0ICYmIHRpY2tzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gKGVuZCAtIHN0YXJ0KSAvIE1hdGgubWF4KHRpY2tzLmxlbmd0aCAtIDEsIDEpIC8gMjtcbiAgICAgICAgICAgIHN0YXJ0IC09IG9mZnNldDtcbiAgICAgICAgICAgIGVuZCArPSBvZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RhcnRWYWx1ZSA9IHN0YXJ0O1xuICAgICAgICB0aGlzLl9lbmRWYWx1ZSA9IGVuZDtcbiAgICAgICAgdGhpcy5fdmFsdWVSYW5nZSA9IGVuZCAtIHN0YXJ0O1xuICAgIH1cbiAgICBnZXRMYWJlbEZvclZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXROdW1iZXIodmFsdWUsIHRoaXMuY2hhcnQub3B0aW9ucy5sb2NhbGUsIHRoaXMub3B0aW9ucy50aWNrcy5mb3JtYXQpO1xuICAgIH1cbn1cblxuY2xhc3MgTGluZWFyU2NhbGUgZXh0ZW5kcyBMaW5lYXJTY2FsZUJhc2Uge1xuICAgIHN0YXRpYyBpZCA9ICdsaW5lYXInO1xuIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgIGNhbGxiYWNrOiBUaWNrcy5mb3JtYXR0ZXJzLm51bWVyaWNcbiAgICAgICAgfVxuICAgIH07XG4gICAgZGV0ZXJtaW5lRGF0YUxpbWl0cygpIHtcbiAgICAgICAgY29uc3QgeyBtaW4gLCBtYXggIH0gPSB0aGlzLmdldE1pbk1heCh0cnVlKTtcbiAgICAgICAgdGhpcy5taW4gPSBpc051bWJlckZpbml0ZShtaW4pID8gbWluIDogMDtcbiAgICAgICAgdGhpcy5tYXggPSBpc051bWJlckZpbml0ZShtYXgpID8gbWF4IDogMTtcbiAgICAgICAgdGhpcy5oYW5kbGVUaWNrUmFuZ2VPcHRpb25zKCk7XG4gICAgfVxuIGNvbXB1dGVUaWNrTGltaXQoKSB7XG4gICAgICAgIGNvbnN0IGhvcml6b250YWwgPSB0aGlzLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgICBjb25zdCBsZW5ndGggPSBob3Jpem9udGFsID8gdGhpcy53aWR0aCA6IHRoaXMuaGVpZ2h0O1xuICAgICAgICBjb25zdCBtaW5Sb3RhdGlvbiA9IHRvUmFkaWFucyh0aGlzLm9wdGlvbnMudGlja3MubWluUm90YXRpb24pO1xuICAgICAgICBjb25zdCByYXRpbyA9IChob3Jpem9udGFsID8gTWF0aC5zaW4obWluUm90YXRpb24pIDogTWF0aC5jb3MobWluUm90YXRpb24pKSB8fCAwLjAwMTtcbiAgICAgICAgY29uc3QgdGlja0ZvbnQgPSB0aGlzLl9yZXNvbHZlVGlja0ZvbnRPcHRpb25zKDApO1xuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGxlbmd0aCAvIE1hdGgubWluKDQwLCB0aWNrRm9udC5saW5lSGVpZ2h0IC8gcmF0aW8pKTtcbiAgICB9XG4gICAgZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgPyBOYU4gOiB0aGlzLmdldFBpeGVsRm9yRGVjaW1hbCgodmFsdWUgLSB0aGlzLl9zdGFydFZhbHVlKSAvIHRoaXMuX3ZhbHVlUmFuZ2UpO1xuICAgIH1cbiAgICBnZXRWYWx1ZUZvclBpeGVsKHBpeGVsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGFydFZhbHVlICsgdGhpcy5nZXREZWNpbWFsRm9yUGl4ZWwocGl4ZWwpICogdGhpcy5fdmFsdWVSYW5nZTtcbiAgICB9XG59XG5cbmNvbnN0IGxvZzEwRmxvb3IgPSAodik9Pk1hdGguZmxvb3IobG9nMTAodikpO1xuY29uc3QgY2hhbmdlRXhwb25lbnQgPSAodiwgbSk9Pk1hdGgucG93KDEwLCBsb2cxMEZsb29yKHYpICsgbSk7XG5mdW5jdGlvbiBpc01ham9yKHRpY2tWYWwpIHtcbiAgICBjb25zdCByZW1haW4gPSB0aWNrVmFsIC8gTWF0aC5wb3coMTAsIGxvZzEwRmxvb3IodGlja1ZhbCkpO1xuICAgIHJldHVybiByZW1haW4gPT09IDE7XG59XG5mdW5jdGlvbiBzdGVwcyhtaW4sIG1heCwgcmFuZ2VFeHApIHtcbiAgICBjb25zdCByYW5nZVN0ZXAgPSBNYXRoLnBvdygxMCwgcmFuZ2VFeHApO1xuICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5mbG9vcihtaW4gLyByYW5nZVN0ZXApO1xuICAgIGNvbnN0IGVuZCA9IE1hdGguY2VpbChtYXggLyByYW5nZVN0ZXApO1xuICAgIHJldHVybiBlbmQgLSBzdGFydDtcbn1cbmZ1bmN0aW9uIHN0YXJ0RXhwKG1pbiwgbWF4KSB7XG4gICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW47XG4gICAgbGV0IHJhbmdlRXhwID0gbG9nMTBGbG9vcihyYW5nZSk7XG4gICAgd2hpbGUoc3RlcHMobWluLCBtYXgsIHJhbmdlRXhwKSA+IDEwKXtcbiAgICAgICAgcmFuZ2VFeHArKztcbiAgICB9XG4gICAgd2hpbGUoc3RlcHMobWluLCBtYXgsIHJhbmdlRXhwKSA8IDEwKXtcbiAgICAgICAgcmFuZ2VFeHAtLTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWluKHJhbmdlRXhwLCBsb2cxMEZsb29yKG1pbikpO1xufVxuIGZ1bmN0aW9uIGdlbmVyYXRlVGlja3MoZ2VuZXJhdGlvbk9wdGlvbnMsIHsgbWluICwgbWF4ICB9KSB7XG4gICAgbWluID0gZmluaXRlT3JEZWZhdWx0KGdlbmVyYXRpb25PcHRpb25zLm1pbiwgbWluKTtcbiAgICBjb25zdCB0aWNrcyA9IFtdO1xuICAgIGNvbnN0IG1pbkV4cCA9IGxvZzEwRmxvb3IobWluKTtcbiAgICBsZXQgZXhwID0gc3RhcnRFeHAobWluLCBtYXgpO1xuICAgIGxldCBwcmVjaXNpb24gPSBleHAgPCAwID8gTWF0aC5wb3coMTAsIE1hdGguYWJzKGV4cCkpIDogMTtcbiAgICBjb25zdCBzdGVwU2l6ZSA9IE1hdGgucG93KDEwLCBleHApO1xuICAgIGNvbnN0IGJhc2UgPSBtaW5FeHAgPiBleHAgPyBNYXRoLnBvdygxMCwgbWluRXhwKSA6IDA7XG4gICAgY29uc3Qgc3RhcnQgPSBNYXRoLnJvdW5kKChtaW4gLSBiYXNlKSAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gICAgY29uc3Qgb2Zmc2V0ID0gTWF0aC5mbG9vcigobWluIC0gYmFzZSkgLyBzdGVwU2l6ZSAvIDEwKSAqIHN0ZXBTaXplICogMTA7XG4gICAgbGV0IHNpZ25pZmljYW5kID0gTWF0aC5mbG9vcigoc3RhcnQgLSBvZmZzZXQpIC8gTWF0aC5wb3coMTAsIGV4cCkpO1xuICAgIGxldCB2YWx1ZSA9IGZpbml0ZU9yRGVmYXVsdChnZW5lcmF0aW9uT3B0aW9ucy5taW4sIE1hdGgucm91bmQoKGJhc2UgKyBvZmZzZXQgKyBzaWduaWZpY2FuZCAqIE1hdGgucG93KDEwLCBleHApKSAqIHByZWNpc2lvbikgLyBwcmVjaXNpb24pO1xuICAgIHdoaWxlKHZhbHVlIDwgbWF4KXtcbiAgICAgICAgdGlja3MucHVzaCh7XG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIG1ham9yOiBpc01ham9yKHZhbHVlKSxcbiAgICAgICAgICAgIHNpZ25pZmljYW5kXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2lnbmlmaWNhbmQgPj0gMTApIHtcbiAgICAgICAgICAgIHNpZ25pZmljYW5kID0gc2lnbmlmaWNhbmQgPCAxNSA/IDE1IDogMjA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaWduaWZpY2FuZCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaWduaWZpY2FuZCA+PSAyMCkge1xuICAgICAgICAgICAgZXhwKys7XG4gICAgICAgICAgICBzaWduaWZpY2FuZCA9IDI7XG4gICAgICAgICAgICBwcmVjaXNpb24gPSBleHAgPj0gMCA/IDEgOiBwcmVjaXNpb247XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSBNYXRoLnJvdW5kKChiYXNlICsgb2Zmc2V0ICsgc2lnbmlmaWNhbmQgKiBNYXRoLnBvdygxMCwgZXhwKSkgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgIH1cbiAgICBjb25zdCBsYXN0VGljayA9IGZpbml0ZU9yRGVmYXVsdChnZW5lcmF0aW9uT3B0aW9ucy5tYXgsIHZhbHVlKTtcbiAgICB0aWNrcy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IGxhc3RUaWNrLFxuICAgICAgICBtYWpvcjogaXNNYWpvcihsYXN0VGljayksXG4gICAgICAgIHNpZ25pZmljYW5kXG4gICAgfSk7XG4gICAgcmV0dXJuIHRpY2tzO1xufVxuY2xhc3MgTG9nYXJpdGhtaWNTY2FsZSBleHRlbmRzIFNjYWxlIHtcbiAgICBzdGF0aWMgaWQgPSAnbG9nYXJpdGhtaWMnO1xuIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgIGNhbGxiYWNrOiBUaWNrcy5mb3JtYXR0ZXJzLmxvZ2FyaXRobWljLFxuICAgICAgICAgICAgbWFqb3I6IHtcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0cnVjdG9yKGNmZyl7XG4gICAgICAgIHN1cGVyKGNmZyk7XG4gICAgICAgICB0aGlzLnN0YXJ0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy5lbmQgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLl9zdGFydFZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl92YWx1ZVJhbmdlID0gMDtcbiAgICB9XG4gICAgcGFyc2UocmF3LCBpbmRleCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IExpbmVhclNjYWxlQmFzZS5wcm90b3R5cGUucGFyc2UuYXBwbHkodGhpcywgW1xuICAgICAgICAgICAgcmF3LFxuICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgXSk7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5femVybyA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc051bWJlckZpbml0ZSh2YWx1ZSkgJiYgdmFsdWUgPiAwID8gdmFsdWUgOiBudWxsO1xuICAgIH1cbiAgICBkZXRlcm1pbmVEYXRhTGltaXRzKCkge1xuICAgICAgICBjb25zdCB7IG1pbiAsIG1heCAgfSA9IHRoaXMuZ2V0TWluTWF4KHRydWUpO1xuICAgICAgICB0aGlzLm1pbiA9IGlzTnVtYmVyRmluaXRlKG1pbikgPyBNYXRoLm1heCgwLCBtaW4pIDogbnVsbDtcbiAgICAgICAgdGhpcy5tYXggPSBpc051bWJlckZpbml0ZShtYXgpID8gTWF0aC5tYXgoMCwgbWF4KSA6IG51bGw7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYmVnaW5BdFplcm8pIHtcbiAgICAgICAgICAgIHRoaXMuX3plcm8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl96ZXJvICYmIHRoaXMubWluICE9PSB0aGlzLl9zdWdnZXN0ZWRNaW4gJiYgIWlzTnVtYmVyRmluaXRlKHRoaXMuX3VzZXJNaW4pKSB7XG4gICAgICAgICAgICB0aGlzLm1pbiA9IG1pbiA9PT0gY2hhbmdlRXhwb25lbnQodGhpcy5taW4sIDApID8gY2hhbmdlRXhwb25lbnQodGhpcy5taW4sIC0xKSA6IGNoYW5nZUV4cG9uZW50KHRoaXMubWluLCAwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKTtcbiAgICB9XG4gICAgaGFuZGxlVGlja1JhbmdlT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3QgeyBtaW5EZWZpbmVkICwgbWF4RGVmaW5lZCAgfSA9IHRoaXMuZ2V0VXNlckJvdW5kcygpO1xuICAgICAgICBsZXQgbWluID0gdGhpcy5taW47XG4gICAgICAgIGxldCBtYXggPSB0aGlzLm1heDtcbiAgICAgICAgY29uc3Qgc2V0TWluID0gKHYpPT5taW4gPSBtaW5EZWZpbmVkID8gbWluIDogdjtcbiAgICAgICAgY29uc3Qgc2V0TWF4ID0gKHYpPT5tYXggPSBtYXhEZWZpbmVkID8gbWF4IDogdjtcbiAgICAgICAgaWYgKG1pbiA9PT0gbWF4KSB7XG4gICAgICAgICAgICBpZiAobWluIDw9IDApIHtcbiAgICAgICAgICAgICAgICBzZXRNaW4oMSk7XG4gICAgICAgICAgICAgICAgc2V0TWF4KDEwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0TWluKGNoYW5nZUV4cG9uZW50KG1pbiwgLTEpKTtcbiAgICAgICAgICAgICAgICBzZXRNYXgoY2hhbmdlRXhwb25lbnQobWF4LCArMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtaW4gPD0gMCkge1xuICAgICAgICAgICAgc2V0TWluKGNoYW5nZUV4cG9uZW50KG1heCwgLTEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4IDw9IDApIHtcbiAgICAgICAgICAgIHNldE1heChjaGFuZ2VFeHBvbmVudChtaW4sICsxKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5taW4gPSBtaW47XG4gICAgICAgIHRoaXMubWF4ID0gbWF4O1xuICAgIH1cbiAgICBidWlsZFRpY2tzKCkge1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9uT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1pbjogdGhpcy5fdXNlck1pbixcbiAgICAgICAgICAgIG1heDogdGhpcy5fdXNlck1heFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCB0aWNrcyA9IGdlbmVyYXRlVGlja3MoZ2VuZXJhdGlvbk9wdGlvbnMsIHRoaXMpO1xuICAgICAgICBpZiAob3B0cy5ib3VuZHMgPT09ICd0aWNrcycpIHtcbiAgICAgICAgICAgIF9zZXRNaW5BbmRNYXhCeUtleSh0aWNrcywgdGhpcywgJ3ZhbHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMucmV2ZXJzZSkge1xuICAgICAgICAgICAgdGlja3MucmV2ZXJzZSgpO1xuICAgICAgICAgICAgdGhpcy5zdGFydCA9IHRoaXMubWF4O1xuICAgICAgICAgICAgdGhpcy5lbmQgPSB0aGlzLm1pbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB0aGlzLm1pbjtcbiAgICAgICAgICAgIHRoaXMuZW5kID0gdGhpcy5tYXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRpY2tzO1xuICAgIH1cbiBnZXRMYWJlbEZvclZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gJzAnIDogZm9ybWF0TnVtYmVyKHZhbHVlLCB0aGlzLmNoYXJ0Lm9wdGlvbnMubG9jYWxlLCB0aGlzLm9wdGlvbnMudGlja3MuZm9ybWF0KTtcbiAgICB9XG4gY29uZmlndXJlKCkge1xuICAgICAgICBjb25zdCBzdGFydCA9IHRoaXMubWluO1xuICAgICAgICBzdXBlci5jb25maWd1cmUoKTtcbiAgICAgICAgdGhpcy5fc3RhcnRWYWx1ZSA9IGxvZzEwKHN0YXJ0KTtcbiAgICAgICAgdGhpcy5fdmFsdWVSYW5nZSA9IGxvZzEwKHRoaXMubWF4KSAtIGxvZzEwKHN0YXJ0KTtcbiAgICB9XG4gICAgZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLm1pbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBpeGVsRm9yRGVjaW1hbCh2YWx1ZSA9PT0gdGhpcy5taW4gPyAwIDogKGxvZzEwKHZhbHVlKSAtIHRoaXMuX3N0YXJ0VmFsdWUpIC8gdGhpcy5fdmFsdWVSYW5nZSk7XG4gICAgfVxuICAgIGdldFZhbHVlRm9yUGl4ZWwocGl4ZWwpIHtcbiAgICAgICAgY29uc3QgZGVjaW1hbCA9IHRoaXMuZ2V0RGVjaW1hbEZvclBpeGVsKHBpeGVsKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDEwLCB0aGlzLl9zdGFydFZhbHVlICsgZGVjaW1hbCAqIHRoaXMuX3ZhbHVlUmFuZ2UpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0VGlja0JhY2tkcm9wSGVpZ2h0KG9wdHMpIHtcbiAgICBjb25zdCB0aWNrT3B0cyA9IG9wdHMudGlja3M7XG4gICAgaWYgKHRpY2tPcHRzLmRpc3BsYXkgJiYgb3B0cy5kaXNwbGF5KSB7XG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSB0b1BhZGRpbmcodGlja09wdHMuYmFja2Ryb3BQYWRkaW5nKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlT3JEZWZhdWx0KHRpY2tPcHRzLmZvbnQgJiYgdGlja09wdHMuZm9udC5zaXplLCBkZWZhdWx0cy5mb250LnNpemUpICsgcGFkZGluZy5oZWlnaHQ7XG4gICAgfVxuICAgIHJldHVybiAwO1xufVxuZnVuY3Rpb24gbWVhc3VyZUxhYmVsU2l6ZShjdHgsIGZvbnQsIGxhYmVsKSB7XG4gICAgbGFiZWwgPSBpc0FycmF5KGxhYmVsKSA/IGxhYmVsIDogW1xuICAgICAgICBsYWJlbFxuICAgIF07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdzogX2xvbmdlc3RUZXh0KGN0eCwgZm9udC5zdHJpbmcsIGxhYmVsKSxcbiAgICAgICAgaDogbGFiZWwubGVuZ3RoICogZm9udC5saW5lSGVpZ2h0XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRldGVybWluZUxpbWl0cyhhbmdsZSwgcG9zLCBzaXplLCBtaW4sIG1heCkge1xuICAgIGlmIChhbmdsZSA9PT0gbWluIHx8IGFuZ2xlID09PSBtYXgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXJ0OiBwb3MgLSBzaXplIC8gMixcbiAgICAgICAgICAgIGVuZDogcG9zICsgc2l6ZSAvIDJcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGFuZ2xlIDwgbWluIHx8IGFuZ2xlID4gbWF4KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydDogcG9zIC0gc2l6ZSxcbiAgICAgICAgICAgIGVuZDogcG9zXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiBwb3MsXG4gICAgICAgIGVuZDogcG9zICsgc2l6ZVxuICAgIH07XG59XG4gZnVuY3Rpb24gZml0V2l0aFBvaW50TGFiZWxzKHNjYWxlKSB7XG4gICAgY29uc3Qgb3JpZyA9IHtcbiAgICAgICAgbDogc2NhbGUubGVmdCArIHNjYWxlLl9wYWRkaW5nLmxlZnQsXG4gICAgICAgIHI6IHNjYWxlLnJpZ2h0IC0gc2NhbGUuX3BhZGRpbmcucmlnaHQsXG4gICAgICAgIHQ6IHNjYWxlLnRvcCArIHNjYWxlLl9wYWRkaW5nLnRvcCxcbiAgICAgICAgYjogc2NhbGUuYm90dG9tIC0gc2NhbGUuX3BhZGRpbmcuYm90dG9tXG4gICAgfTtcbiAgICBjb25zdCBsaW1pdHMgPSBPYmplY3QuYXNzaWduKHt9LCBvcmlnKTtcbiAgICBjb25zdCBsYWJlbFNpemVzID0gW107XG4gICAgY29uc3QgcGFkZGluZyA9IFtdO1xuICAgIGNvbnN0IHZhbHVlQ291bnQgPSBzY2FsZS5fcG9pbnRMYWJlbHMubGVuZ3RoO1xuICAgIGNvbnN0IHBvaW50TGFiZWxPcHRzID0gc2NhbGUub3B0aW9ucy5wb2ludExhYmVscztcbiAgICBjb25zdCBhZGRpdGlvbmFsQW5nbGUgPSBwb2ludExhYmVsT3B0cy5jZW50ZXJQb2ludExhYmVscyA/IFBJIC8gdmFsdWVDb3VudCA6IDA7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHZhbHVlQ291bnQ7IGkrKyl7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBwb2ludExhYmVsT3B0cy5zZXRDb250ZXh0KHNjYWxlLmdldFBvaW50TGFiZWxDb250ZXh0KGkpKTtcbiAgICAgICAgcGFkZGluZ1tpXSA9IG9wdHMucGFkZGluZztcbiAgICAgICAgY29uc3QgcG9pbnRQb3NpdGlvbiA9IHNjYWxlLmdldFBvaW50UG9zaXRpb24oaSwgc2NhbGUuZHJhd2luZ0FyZWEgKyBwYWRkaW5nW2ldLCBhZGRpdGlvbmFsQW5nbGUpO1xuICAgICAgICBjb25zdCBwbEZvbnQgPSB0b0ZvbnQob3B0cy5mb250KTtcbiAgICAgICAgY29uc3QgdGV4dFNpemUgPSBtZWFzdXJlTGFiZWxTaXplKHNjYWxlLmN0eCwgcGxGb250LCBzY2FsZS5fcG9pbnRMYWJlbHNbaV0pO1xuICAgICAgICBsYWJlbFNpemVzW2ldID0gdGV4dFNpemU7XG4gICAgICAgIGNvbnN0IGFuZ2xlUmFkaWFucyA9IF9ub3JtYWxpemVBbmdsZShzY2FsZS5nZXRJbmRleEFuZ2xlKGkpICsgYWRkaXRpb25hbEFuZ2xlKTtcbiAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLnJvdW5kKHRvRGVncmVlcyhhbmdsZVJhZGlhbnMpKTtcbiAgICAgICAgY29uc3QgaExpbWl0cyA9IGRldGVybWluZUxpbWl0cyhhbmdsZSwgcG9pbnRQb3NpdGlvbi54LCB0ZXh0U2l6ZS53LCAwLCAxODApO1xuICAgICAgICBjb25zdCB2TGltaXRzID0gZGV0ZXJtaW5lTGltaXRzKGFuZ2xlLCBwb2ludFBvc2l0aW9uLnksIHRleHRTaXplLmgsIDkwLCAyNzApO1xuICAgICAgICB1cGRhdGVMaW1pdHMobGltaXRzLCBvcmlnLCBhbmdsZVJhZGlhbnMsIGhMaW1pdHMsIHZMaW1pdHMpO1xuICAgIH1cbiAgICBzY2FsZS5zZXRDZW50ZXJQb2ludChvcmlnLmwgLSBsaW1pdHMubCwgbGltaXRzLnIgLSBvcmlnLnIsIG9yaWcudCAtIGxpbWl0cy50LCBsaW1pdHMuYiAtIG9yaWcuYik7XG4gICAgc2NhbGUuX3BvaW50TGFiZWxJdGVtcyA9IGJ1aWxkUG9pbnRMYWJlbEl0ZW1zKHNjYWxlLCBsYWJlbFNpemVzLCBwYWRkaW5nKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUxpbWl0cyhsaW1pdHMsIG9yaWcsIGFuZ2xlLCBoTGltaXRzLCB2TGltaXRzKSB7XG4gICAgY29uc3Qgc2luID0gTWF0aC5hYnMoTWF0aC5zaW4oYW5nbGUpKTtcbiAgICBjb25zdCBjb3MgPSBNYXRoLmFicyhNYXRoLmNvcyhhbmdsZSkpO1xuICAgIGxldCB4ID0gMDtcbiAgICBsZXQgeSA9IDA7XG4gICAgaWYgKGhMaW1pdHMuc3RhcnQgPCBvcmlnLmwpIHtcbiAgICAgICAgeCA9IChvcmlnLmwgLSBoTGltaXRzLnN0YXJ0KSAvIHNpbjtcbiAgICAgICAgbGltaXRzLmwgPSBNYXRoLm1pbihsaW1pdHMubCwgb3JpZy5sIC0geCk7XG4gICAgfSBlbHNlIGlmIChoTGltaXRzLmVuZCA+IG9yaWcucikge1xuICAgICAgICB4ID0gKGhMaW1pdHMuZW5kIC0gb3JpZy5yKSAvIHNpbjtcbiAgICAgICAgbGltaXRzLnIgPSBNYXRoLm1heChsaW1pdHMuciwgb3JpZy5yICsgeCk7XG4gICAgfVxuICAgIGlmICh2TGltaXRzLnN0YXJ0IDwgb3JpZy50KSB7XG4gICAgICAgIHkgPSAob3JpZy50IC0gdkxpbWl0cy5zdGFydCkgLyBjb3M7XG4gICAgICAgIGxpbWl0cy50ID0gTWF0aC5taW4obGltaXRzLnQsIG9yaWcudCAtIHkpO1xuICAgIH0gZWxzZSBpZiAodkxpbWl0cy5lbmQgPiBvcmlnLmIpIHtcbiAgICAgICAgeSA9ICh2TGltaXRzLmVuZCAtIG9yaWcuYikgLyBjb3M7XG4gICAgICAgIGxpbWl0cy5iID0gTWF0aC5tYXgobGltaXRzLmIsIG9yaWcuYiArIHkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJ1aWxkUG9pbnRMYWJlbEl0ZW1zKHNjYWxlLCBsYWJlbFNpemVzLCBwYWRkaW5nKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICBjb25zdCB2YWx1ZUNvdW50ID0gc2NhbGUuX3BvaW50TGFiZWxzLmxlbmd0aDtcbiAgICBjb25zdCBvcHRzID0gc2NhbGUub3B0aW9ucztcbiAgICBjb25zdCBleHRyYSA9IGdldFRpY2tCYWNrZHJvcEhlaWdodChvcHRzKSAvIDI7XG4gICAgY29uc3Qgb3V0ZXJEaXN0YW5jZSA9IHNjYWxlLmRyYXdpbmdBcmVhO1xuICAgIGNvbnN0IGFkZGl0aW9uYWxBbmdsZSA9IG9wdHMucG9pbnRMYWJlbHMuY2VudGVyUG9pbnRMYWJlbHMgPyBQSSAvIHZhbHVlQ291bnQgOiAwO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2YWx1ZUNvdW50OyBpKyspe1xuICAgICAgICBjb25zdCBwb2ludExhYmVsUG9zaXRpb24gPSBzY2FsZS5nZXRQb2ludFBvc2l0aW9uKGksIG91dGVyRGlzdGFuY2UgKyBleHRyYSArIHBhZGRpbmdbaV0sIGFkZGl0aW9uYWxBbmdsZSk7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5yb3VuZCh0b0RlZ3JlZXMoX25vcm1hbGl6ZUFuZ2xlKHBvaW50TGFiZWxQb3NpdGlvbi5hbmdsZSArIEhBTEZfUEkpKSk7XG4gICAgICAgIGNvbnN0IHNpemUgPSBsYWJlbFNpemVzW2ldO1xuICAgICAgICBjb25zdCB5ID0geUZvckFuZ2xlKHBvaW50TGFiZWxQb3NpdGlvbi55LCBzaXplLmgsIGFuZ2xlKTtcbiAgICAgICAgY29uc3QgdGV4dEFsaWduID0gZ2V0VGV4dEFsaWduRm9yQW5nbGUoYW5nbGUpO1xuICAgICAgICBjb25zdCBsZWZ0ID0gbGVmdEZvclRleHRBbGlnbihwb2ludExhYmVsUG9zaXRpb24ueCwgc2l6ZS53LCB0ZXh0QWxpZ24pO1xuICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICAgIHg6IHBvaW50TGFiZWxQb3NpdGlvbi54LFxuICAgICAgICAgICAgeSxcbiAgICAgICAgICAgIHRleHRBbGlnbixcbiAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICB0b3A6IHksXG4gICAgICAgICAgICByaWdodDogbGVmdCArIHNpemUudyxcbiAgICAgICAgICAgIGJvdHRvbTogeSArIHNpemUuaFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zO1xufVxuZnVuY3Rpb24gZ2V0VGV4dEFsaWduRm9yQW5nbGUoYW5nbGUpIHtcbiAgICBpZiAoYW5nbGUgPT09IDAgfHwgYW5nbGUgPT09IDE4MCkge1xuICAgICAgICByZXR1cm4gJ2NlbnRlcic7XG4gICAgfSBlbHNlIGlmIChhbmdsZSA8IDE4MCkge1xuICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgIH1cbiAgICByZXR1cm4gJ3JpZ2h0Jztcbn1cbmZ1bmN0aW9uIGxlZnRGb3JUZXh0QWxpZ24oeCwgdywgYWxpZ24pIHtcbiAgICBpZiAoYWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgeCAtPSB3O1xuICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgIHggLT0gdyAvIDI7XG4gICAgfVxuICAgIHJldHVybiB4O1xufVxuZnVuY3Rpb24geUZvckFuZ2xlKHksIGgsIGFuZ2xlKSB7XG4gICAgaWYgKGFuZ2xlID09PSA5MCB8fCBhbmdsZSA9PT0gMjcwKSB7XG4gICAgICAgIHkgLT0gaCAvIDI7XG4gICAgfSBlbHNlIGlmIChhbmdsZSA+IDI3MCB8fCBhbmdsZSA8IDkwKSB7XG4gICAgICAgIHkgLT0gaDtcbiAgICB9XG4gICAgcmV0dXJuIHk7XG59XG5mdW5jdGlvbiBkcmF3UG9pbnRMYWJlbHMoc2NhbGUsIGxhYmVsQ291bnQpIHtcbiAgICBjb25zdCB7IGN0eCAsIG9wdGlvbnM6IHsgcG9pbnRMYWJlbHMgIH0gIH0gPSBzY2FsZTtcbiAgICBmb3IobGV0IGkgPSBsYWJlbENvdW50IC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgICBjb25zdCBvcHRzQXRJbmRleCA9IHBvaW50TGFiZWxzLnNldENvbnRleHQoc2NhbGUuZ2V0UG9pbnRMYWJlbENvbnRleHQoaSkpO1xuICAgICAgICBjb25zdCBwbEZvbnQgPSB0b0ZvbnQob3B0c0F0SW5kZXguZm9udCk7XG4gICAgICAgIGNvbnN0IHsgeCAsIHkgLCB0ZXh0QWxpZ24gLCBsZWZ0ICwgdG9wICwgcmlnaHQgLCBib3R0b20gIH0gPSBzY2FsZS5fcG9pbnRMYWJlbEl0ZW1zW2ldO1xuICAgICAgICBjb25zdCB7IGJhY2tkcm9wQ29sb3IgIH0gPSBvcHRzQXRJbmRleDtcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmKGJhY2tkcm9wQ29sb3IpKSB7XG4gICAgICAgICAgICBjb25zdCBib3JkZXJSYWRpdXMgPSB0b1RSQkxDb3JuZXJzKG9wdHNBdEluZGV4LmJvcmRlclJhZGl1cyk7XG4gICAgICAgICAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKG9wdHNBdEluZGV4LmJhY2tkcm9wUGFkZGluZyk7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYmFja2Ryb3BDb2xvcjtcbiAgICAgICAgICAgIGNvbnN0IGJhY2tkcm9wTGVmdCA9IGxlZnQgLSBwYWRkaW5nLmxlZnQ7XG4gICAgICAgICAgICBjb25zdCBiYWNrZHJvcFRvcCA9IHRvcCAtIHBhZGRpbmcudG9wO1xuICAgICAgICAgICAgY29uc3QgYmFja2Ryb3BXaWR0aCA9IHJpZ2h0IC0gbGVmdCArIHBhZGRpbmcud2lkdGg7XG4gICAgICAgICAgICBjb25zdCBiYWNrZHJvcEhlaWdodCA9IGJvdHRvbSAtIHRvcCArIHBhZGRpbmcuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoYm9yZGVyUmFkaXVzKS5zb21lKCh2KT0+diAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgYWRkUm91bmRlZFJlY3RQYXRoKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICB4OiBiYWNrZHJvcExlZnQsXG4gICAgICAgICAgICAgICAgICAgIHk6IGJhY2tkcm9wVG9wLFxuICAgICAgICAgICAgICAgICAgICB3OiBiYWNrZHJvcFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoOiBiYWNrZHJvcEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiBib3JkZXJSYWRpdXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoYmFja2Ryb3BMZWZ0LCBiYWNrZHJvcFRvcCwgYmFja2Ryb3BXaWR0aCwgYmFja2Ryb3BIZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbmRlclRleHQoY3R4LCBzY2FsZS5fcG9pbnRMYWJlbHNbaV0sIHgsIHkgKyBwbEZvbnQubGluZUhlaWdodCAvIDIsIHBsRm9udCwge1xuICAgICAgICAgICAgY29sb3I6IG9wdHNBdEluZGV4LmNvbG9yLFxuICAgICAgICAgICAgdGV4dEFsaWduOiB0ZXh0QWxpZ24sXG4gICAgICAgICAgICB0ZXh0QmFzZWxpbmU6ICdtaWRkbGUnXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBhdGhSYWRpdXNMaW5lKHNjYWxlLCByYWRpdXMsIGNpcmN1bGFyLCBsYWJlbENvdW50KSB7XG4gICAgY29uc3QgeyBjdHggIH0gPSBzY2FsZTtcbiAgICBpZiAoY2lyY3VsYXIpIHtcbiAgICAgICAgY3R4LmFyYyhzY2FsZS54Q2VudGVyLCBzY2FsZS55Q2VudGVyLCByYWRpdXMsIDAsIFRBVSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHBvaW50UG9zaXRpb24gPSBzY2FsZS5nZXRQb2ludFBvc2l0aW9uKDAsIHJhZGl1cyk7XG4gICAgICAgIGN0eC5tb3ZlVG8ocG9pbnRQb3NpdGlvbi54LCBwb2ludFBvc2l0aW9uLnkpO1xuICAgICAgICBmb3IobGV0IGkgPSAxOyBpIDwgbGFiZWxDb3VudDsgaSsrKXtcbiAgICAgICAgICAgIHBvaW50UG9zaXRpb24gPSBzY2FsZS5nZXRQb2ludFBvc2l0aW9uKGksIHJhZGl1cyk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHBvaW50UG9zaXRpb24ueCwgcG9pbnRQb3NpdGlvbi55KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGRyYXdSYWRpdXNMaW5lKHNjYWxlLCBncmlkTGluZU9wdHMsIHJhZGl1cywgbGFiZWxDb3VudCwgYm9yZGVyT3B0cykge1xuICAgIGNvbnN0IGN0eCA9IHNjYWxlLmN0eDtcbiAgICBjb25zdCBjaXJjdWxhciA9IGdyaWRMaW5lT3B0cy5jaXJjdWxhcjtcbiAgICBjb25zdCB7IGNvbG9yICwgbGluZVdpZHRoICB9ID0gZ3JpZExpbmVPcHRzO1xuICAgIGlmICghY2lyY3VsYXIgJiYgIWxhYmVsQ291bnQgfHwgIWNvbG9yIHx8ICFsaW5lV2lkdGggfHwgcmFkaXVzIDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgY3R4LmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcbiAgICBjdHguc2V0TGluZURhc2goYm9yZGVyT3B0cy5kYXNoKTtcbiAgICBjdHgubGluZURhc2hPZmZzZXQgPSBib3JkZXJPcHRzLmRhc2hPZmZzZXQ7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIHBhdGhSYWRpdXNMaW5lKHNjYWxlLCByYWRpdXMsIGNpcmN1bGFyLCBsYWJlbENvdW50KTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LnN0cm9rZSgpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG59XG5mdW5jdGlvbiBjcmVhdGVQb2ludExhYmVsQ29udGV4dChwYXJlbnQsIGluZGV4LCBsYWJlbCkge1xuICAgIHJldHVybiBjcmVhdGVDb250ZXh0KHBhcmVudCwge1xuICAgICAgICBsYWJlbCxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHR5cGU6ICdwb2ludExhYmVsJ1xuICAgIH0pO1xufVxuY2xhc3MgUmFkaWFsTGluZWFyU2NhbGUgZXh0ZW5kcyBMaW5lYXJTY2FsZUJhc2Uge1xuICAgIHN0YXRpYyBpZCA9ICdyYWRpYWxMaW5lYXInO1xuIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgcG9zaXRpb246ICdjaGFydEFyZWEnLFxuICAgICAgICBhbmdsZUxpbmVzOiB7XG4gICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgICAgICAgbGluZVdpZHRoOiAxLFxuICAgICAgICAgICAgYm9yZGVyRGFzaDogW10sXG4gICAgICAgICAgICBib3JkZXJEYXNoT2Zmc2V0OiAwLjBcbiAgICAgICAgfSxcbiAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgY2lyY3VsYXI6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0QW5nbGU6IDAsXG4gICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICBzaG93TGFiZWxCYWNrZHJvcDogdHJ1ZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBUaWNrcy5mb3JtYXR0ZXJzLm51bWVyaWNcbiAgICAgICAgfSxcbiAgICAgICAgcG9pbnRMYWJlbHM6IHtcbiAgICAgICAgICAgIGJhY2tkcm9wQ29sb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGJhY2tkcm9wUGFkZGluZzogMixcbiAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXG4gICAgICAgICAgICBmb250OiB7XG4gICAgICAgICAgICAgICAgc2l6ZTogMTBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWxsYmFjayAobGFiZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFiZWw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFkZGluZzogNSxcbiAgICAgICAgICAgIGNlbnRlclBvaW50TGFiZWxzOiBmYWxzZVxuICAgICAgICB9XG4gICAgfTtcbiAgICBzdGF0aWMgZGVmYXVsdFJvdXRlcyA9IHtcbiAgICAgICAgJ2FuZ2xlTGluZXMuY29sb3InOiAnYm9yZGVyQ29sb3InLFxuICAgICAgICAncG9pbnRMYWJlbHMuY29sb3InOiAnY29sb3InLFxuICAgICAgICAndGlja3MuY29sb3InOiAnY29sb3InXG4gICAgfTtcbiAgICBzdGF0aWMgZGVzY3JpcHRvcnMgPSB7XG4gICAgICAgIGFuZ2xlTGluZXM6IHtcbiAgICAgICAgICAgIF9mYWxsYmFjazogJ2dyaWQnXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0cnVjdG9yKGNmZyl7XG4gICAgICAgIHN1cGVyKGNmZyk7XG4gICAgICAgICB0aGlzLnhDZW50ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLnlDZW50ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aGlzLmRyYXdpbmdBcmVhID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy5fcG9pbnRMYWJlbHMgPSBbXTtcbiAgICAgICAgdGhpcy5fcG9pbnRMYWJlbEl0ZW1zID0gW107XG4gICAgfVxuICAgIHNldERpbWVuc2lvbnMoKSB7XG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLl9wYWRkaW5nID0gdG9QYWRkaW5nKGdldFRpY2tCYWNrZHJvcEhlaWdodCh0aGlzLm9wdGlvbnMpIC8gMik7XG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLndpZHRoID0gdGhpcy5tYXhXaWR0aCAtIHBhZGRpbmcud2lkdGg7XG4gICAgICAgIGNvbnN0IGggPSB0aGlzLmhlaWdodCA9IHRoaXMubWF4SGVpZ2h0IC0gcGFkZGluZy5oZWlnaHQ7XG4gICAgICAgIHRoaXMueENlbnRlciA9IE1hdGguZmxvb3IodGhpcy5sZWZ0ICsgdyAvIDIgKyBwYWRkaW5nLmxlZnQpO1xuICAgICAgICB0aGlzLnlDZW50ZXIgPSBNYXRoLmZsb29yKHRoaXMudG9wICsgaCAvIDIgKyBwYWRkaW5nLnRvcCk7XG4gICAgICAgIHRoaXMuZHJhd2luZ0FyZWEgPSBNYXRoLmZsb29yKE1hdGgubWluKHcsIGgpIC8gMik7XG4gICAgfVxuICAgIGRldGVybWluZURhdGFMaW1pdHMoKSB7XG4gICAgICAgIGNvbnN0IHsgbWluICwgbWF4ICB9ID0gdGhpcy5nZXRNaW5NYXgoZmFsc2UpO1xuICAgICAgICB0aGlzLm1pbiA9IGlzTnVtYmVyRmluaXRlKG1pbikgJiYgIWlzTmFOKG1pbikgPyBtaW4gOiAwO1xuICAgICAgICB0aGlzLm1heCA9IGlzTnVtYmVyRmluaXRlKG1heCkgJiYgIWlzTmFOKG1heCkgPyBtYXggOiAwO1xuICAgICAgICB0aGlzLmhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKTtcbiAgICB9XG4gY29tcHV0ZVRpY2tMaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmRyYXdpbmdBcmVhIC8gZ2V0VGlja0JhY2tkcm9wSGVpZ2h0KHRoaXMub3B0aW9ucykpO1xuICAgIH1cbiAgICBnZW5lcmF0ZVRpY2tMYWJlbHModGlja3MpIHtcbiAgICAgICAgTGluZWFyU2NhbGVCYXNlLnByb3RvdHlwZS5nZW5lcmF0ZVRpY2tMYWJlbHMuY2FsbCh0aGlzLCB0aWNrcyk7XG4gICAgICAgIHRoaXMuX3BvaW50TGFiZWxzID0gdGhpcy5nZXRMYWJlbHMoKS5tYXAoKHZhbHVlLCBpbmRleCk9PntcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gY2FsbGJhY2sodGhpcy5vcHRpb25zLnBvaW50TGFiZWxzLmNhbGxiYWNrLCBbXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICAgIF0sIHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIGxhYmVsIHx8IGxhYmVsID09PSAwID8gbGFiZWwgOiAnJztcbiAgICAgICAgfSkuZmlsdGVyKCh2LCBpKT0+dGhpcy5jaGFydC5nZXREYXRhVmlzaWJpbGl0eShpKSk7XG4gICAgfVxuICAgIGZpdCgpIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgaWYgKG9wdHMuZGlzcGxheSAmJiBvcHRzLnBvaW50TGFiZWxzLmRpc3BsYXkpIHtcbiAgICAgICAgICAgIGZpdFdpdGhQb2ludExhYmVscyh0aGlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVyUG9pbnQoMCwgMCwgMCwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0Q2VudGVyUG9pbnQobGVmdE1vdmVtZW50LCByaWdodE1vdmVtZW50LCB0b3BNb3ZlbWVudCwgYm90dG9tTW92ZW1lbnQpIHtcbiAgICAgICAgdGhpcy54Q2VudGVyICs9IE1hdGguZmxvb3IoKGxlZnRNb3ZlbWVudCAtIHJpZ2h0TW92ZW1lbnQpIC8gMik7XG4gICAgICAgIHRoaXMueUNlbnRlciArPSBNYXRoLmZsb29yKCh0b3BNb3ZlbWVudCAtIGJvdHRvbU1vdmVtZW50KSAvIDIpO1xuICAgICAgICB0aGlzLmRyYXdpbmdBcmVhIC09IE1hdGgubWluKHRoaXMuZHJhd2luZ0FyZWEgLyAyLCBNYXRoLm1heChsZWZ0TW92ZW1lbnQsIHJpZ2h0TW92ZW1lbnQsIHRvcE1vdmVtZW50LCBib3R0b21Nb3ZlbWVudCkpO1xuICAgIH1cbiAgICBnZXRJbmRleEFuZ2xlKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGFuZ2xlTXVsdGlwbGllciA9IFRBVSAvICh0aGlzLl9wb2ludExhYmVscy5sZW5ndGggfHwgMSk7XG4gICAgICAgIGNvbnN0IHN0YXJ0QW5nbGUgPSB0aGlzLm9wdGlvbnMuc3RhcnRBbmdsZSB8fCAwO1xuICAgICAgICByZXR1cm4gX25vcm1hbGl6ZUFuZ2xlKGluZGV4ICogYW5nbGVNdWx0aXBsaWVyICsgdG9SYWRpYW5zKHN0YXJ0QW5nbGUpKTtcbiAgICB9XG4gICAgZ2V0RGlzdGFuY2VGcm9tQ2VudGVyRm9yVmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWYodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjYWxpbmdGYWN0b3IgPSB0aGlzLmRyYXdpbmdBcmVhIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJldmVyc2UpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5tYXggLSB2YWx1ZSkgKiBzY2FsaW5nRmFjdG9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAodmFsdWUgLSB0aGlzLm1pbikgKiBzY2FsaW5nRmFjdG9yO1xuICAgIH1cbiAgICBnZXRWYWx1ZUZvckRpc3RhbmNlRnJvbUNlbnRlcihkaXN0YW5jZSkge1xuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZihkaXN0YW5jZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NhbGVkRGlzdGFuY2UgPSBkaXN0YW5jZSAvICh0aGlzLmRyYXdpbmdBcmVhIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pKTtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yZXZlcnNlID8gdGhpcy5tYXggLSBzY2FsZWREaXN0YW5jZSA6IHRoaXMubWluICsgc2NhbGVkRGlzdGFuY2U7XG4gICAgfVxuICAgIGdldFBvaW50TGFiZWxDb250ZXh0KGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHBvaW50TGFiZWxzID0gdGhpcy5fcG9pbnRMYWJlbHMgfHwgW107XG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgcG9pbnRMYWJlbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBwb2ludExhYmVsID0gcG9pbnRMYWJlbHNbaW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVBvaW50TGFiZWxDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpLCBpbmRleCwgcG9pbnRMYWJlbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UG9pbnRQb3NpdGlvbihpbmRleCwgZGlzdGFuY2VGcm9tQ2VudGVyLCBhZGRpdGlvbmFsQW5nbGUgPSAwKSB7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gdGhpcy5nZXRJbmRleEFuZ2xlKGluZGV4KSAtIEhBTEZfUEkgKyBhZGRpdGlvbmFsQW5nbGU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBNYXRoLmNvcyhhbmdsZSkgKiBkaXN0YW5jZUZyb21DZW50ZXIgKyB0aGlzLnhDZW50ZXIsXG4gICAgICAgICAgICB5OiBNYXRoLnNpbihhbmdsZSkgKiBkaXN0YW5jZUZyb21DZW50ZXIgKyB0aGlzLnlDZW50ZXIsXG4gICAgICAgICAgICBhbmdsZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvaW50UG9zaXRpb24oaW5kZXgsIHRoaXMuZ2V0RGlzdGFuY2VGcm9tQ2VudGVyRm9yVmFsdWUodmFsdWUpKTtcbiAgICB9XG4gICAgZ2V0QmFzZVBvc2l0aW9uKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZShpbmRleCB8fCAwLCB0aGlzLmdldEJhc2VWYWx1ZSgpKTtcbiAgICB9XG4gICAgZ2V0UG9pbnRMYWJlbFBvc2l0aW9uKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHsgbGVmdCAsIHRvcCAsIHJpZ2h0ICwgYm90dG9tICB9ID0gdGhpcy5fcG9pbnRMYWJlbEl0ZW1zW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICB0b3AsXG4gICAgICAgICAgICByaWdodCxcbiAgICAgICAgICAgIGJvdHRvbVxuICAgICAgICB9O1xuICAgIH1cbiBkcmF3QmFja2dyb3VuZCgpIHtcbiAgICAgICAgY29uc3QgeyBiYWNrZ3JvdW5kQ29sb3IgLCBncmlkOiB7IGNpcmN1bGFyICB9ICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBpZiAoYmFja2dyb3VuZENvbG9yKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBwYXRoUmFkaXVzTGluZSh0aGlzLCB0aGlzLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHRoaXMuX2VuZFZhbHVlKSwgY2lyY3VsYXIsIHRoaXMuX3BvaW50TGFiZWxzLmxlbmd0aCk7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gZHJhd0dyaWQoKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCB7IGFuZ2xlTGluZXMgLCBncmlkICwgYm9yZGVyICB9ID0gb3B0cztcbiAgICAgICAgY29uc3QgbGFiZWxDb3VudCA9IHRoaXMuX3BvaW50TGFiZWxzLmxlbmd0aDtcbiAgICAgICAgbGV0IGksIG9mZnNldCwgcG9zaXRpb247XG4gICAgICAgIGlmIChvcHRzLnBvaW50TGFiZWxzLmRpc3BsYXkpIHtcbiAgICAgICAgICAgIGRyYXdQb2ludExhYmVscyh0aGlzLCBsYWJlbENvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3JpZC5kaXNwbGF5KSB7XG4gICAgICAgICAgICB0aGlzLnRpY2tzLmZvckVhY2goKHRpY2ssIGluZGV4KT0+e1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHRpY2sudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0KGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0c0F0SW5kZXggPSBncmlkLnNldENvbnRleHQoY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdHNBdEluZGV4Qm9yZGVyID0gYm9yZGVyLnNldENvbnRleHQoY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGRyYXdSYWRpdXNMaW5lKHRoaXMsIG9wdHNBdEluZGV4LCBvZmZzZXQsIGxhYmVsQ291bnQsIG9wdHNBdEluZGV4Qm9yZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5nbGVMaW5lcy5kaXNwbGF5KSB7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgZm9yKGkgPSBsYWJlbENvdW50IC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdHNBdEluZGV4ID0gYW5nbGVMaW5lcy5zZXRDb250ZXh0KHRoaXMuZ2V0UG9pbnRMYWJlbENvbnRleHQoaSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY29sb3IgLCBsaW5lV2lkdGggIH0gPSBvcHRzQXRJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAoIWxpbmVXaWR0aCB8fCAhY29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKG9wdHNBdEluZGV4LmJvcmRlckRhc2gpO1xuICAgICAgICAgICAgICAgIGN0eC5saW5lRGFzaE9mZnNldCA9IG9wdHNBdEluZGV4LmJvcmRlckRhc2hPZmZzZXQ7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZShvcHRzLnRpY2tzLnJldmVyc2UgPyB0aGlzLm1pbiA6IHRoaXMubWF4KTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHRoaXMuZ2V0UG9pbnRQb3NpdGlvbihpLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHRoaXMueENlbnRlciwgdGhpcy55Q2VudGVyKTtcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gZHJhd0JvcmRlcigpIHt9XG4gZHJhd0xhYmVscygpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHRpY2tPcHRzID0gb3B0cy50aWNrcztcbiAgICAgICAgaWYgKCF0aWNrT3B0cy5kaXNwbGF5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhcnRBbmdsZSA9IHRoaXMuZ2V0SW5kZXhBbmdsZSgwKTtcbiAgICAgICAgbGV0IG9mZnNldCwgd2lkdGg7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy54Q2VudGVyLCB0aGlzLnlDZW50ZXIpO1xuICAgICAgICBjdHgucm90YXRlKHN0YXJ0QW5nbGUpO1xuICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgdGhpcy50aWNrcy5mb3JFYWNoKCh0aWNrLCBpbmRleCk9PntcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCAmJiAhb3B0cy5yZXZlcnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3B0c0F0SW5kZXggPSB0aWNrT3B0cy5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dChpbmRleCkpO1xuICAgICAgICAgICAgY29uc3QgdGlja0ZvbnQgPSB0b0ZvbnQob3B0c0F0SW5kZXguZm9udCk7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHRoaXMudGlja3NbaW5kZXhdLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChvcHRzQXRJbmRleC5zaG93TGFiZWxCYWNrZHJvcCkge1xuICAgICAgICAgICAgICAgIGN0eC5mb250ID0gdGlja0ZvbnQuc3RyaW5nO1xuICAgICAgICAgICAgICAgIHdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KHRpY2subGFiZWwpLndpZHRoO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBvcHRzQXRJbmRleC5iYWNrZHJvcENvbG9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRpbmcgPSB0b1BhZGRpbmcob3B0c0F0SW5kZXguYmFja2Ryb3BQYWRkaW5nKTtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoLXdpZHRoIC8gMiAtIHBhZGRpbmcubGVmdCwgLW9mZnNldCAtIHRpY2tGb250LnNpemUgLyAyIC0gcGFkZGluZy50b3AsIHdpZHRoICsgcGFkZGluZy53aWR0aCwgdGlja0ZvbnQuc2l6ZSArIHBhZGRpbmcuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbmRlclRleHQoY3R4LCB0aWNrLmxhYmVsLCAwLCAtb2Zmc2V0LCB0aWNrRm9udCwge1xuICAgICAgICAgICAgICAgIGNvbG9yOiBvcHRzQXRJbmRleC5jb2xvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiBkcmF3VGl0bGUoKSB7fVxufVxuXG5jb25zdCBJTlRFUlZBTFMgPSB7XG4gICAgbWlsbGlzZWNvbmQ6IHtcbiAgICAgICAgY29tbW9uOiB0cnVlLFxuICAgICAgICBzaXplOiAxLFxuICAgICAgICBzdGVwczogMTAwMFxuICAgIH0sXG4gICAgc2Vjb25kOiB7XG4gICAgICAgIGNvbW1vbjogdHJ1ZSxcbiAgICAgICAgc2l6ZTogMTAwMCxcbiAgICAgICAgc3RlcHM6IDYwXG4gICAgfSxcbiAgICBtaW51dGU6IHtcbiAgICAgICAgY29tbW9uOiB0cnVlLFxuICAgICAgICBzaXplOiA2MDAwMCxcbiAgICAgICAgc3RlcHM6IDYwXG4gICAgfSxcbiAgICBob3VyOiB7XG4gICAgICAgIGNvbW1vbjogdHJ1ZSxcbiAgICAgICAgc2l6ZTogMzYwMDAwMCxcbiAgICAgICAgc3RlcHM6IDI0XG4gICAgfSxcbiAgICBkYXk6IHtcbiAgICAgICAgY29tbW9uOiB0cnVlLFxuICAgICAgICBzaXplOiA4NjQwMDAwMCxcbiAgICAgICAgc3RlcHM6IDMwXG4gICAgfSxcbiAgICB3ZWVrOiB7XG4gICAgICAgIGNvbW1vbjogZmFsc2UsXG4gICAgICAgIHNpemU6IDYwNDgwMDAwMCxcbiAgICAgICAgc3RlcHM6IDRcbiAgICB9LFxuICAgIG1vbnRoOiB7XG4gICAgICAgIGNvbW1vbjogdHJ1ZSxcbiAgICAgICAgc2l6ZTogMi42MjhlOSxcbiAgICAgICAgc3RlcHM6IDEyXG4gICAgfSxcbiAgICBxdWFydGVyOiB7XG4gICAgICAgIGNvbW1vbjogZmFsc2UsXG4gICAgICAgIHNpemU6IDcuODg0ZTksXG4gICAgICAgIHN0ZXBzOiA0XG4gICAgfSxcbiAgICB5ZWFyOiB7XG4gICAgICAgIGNvbW1vbjogdHJ1ZSxcbiAgICAgICAgc2l6ZTogMy4xNTRlMTBcbiAgICB9XG59O1xuIGNvbnN0IFVOSVRTID0gIC8qICNfX1BVUkVfXyAqLyBPYmplY3Qua2V5cyhJTlRFUlZBTFMpO1xuIGZ1bmN0aW9uIHNvcnRlcihhLCBiKSB7XG4gICAgcmV0dXJuIGEgLSBiO1xufVxuIGZ1bmN0aW9uIHBhcnNlKHNjYWxlLCBpbnB1dCkge1xuICAgIGlmIChpc051bGxPclVuZGVmKGlucHV0KSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgYWRhcHRlciA9IHNjYWxlLl9hZGFwdGVyO1xuICAgIGNvbnN0IHsgcGFyc2VyICwgcm91bmQgLCBpc29XZWVrZGF5ICB9ID0gc2NhbGUuX3BhcnNlT3B0cztcbiAgICBsZXQgdmFsdWUgPSBpbnB1dDtcbiAgICBpZiAodHlwZW9mIHBhcnNlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YWx1ZSA9IHBhcnNlcih2YWx1ZSk7XG4gICAgfVxuICAgIGlmICghaXNOdW1iZXJGaW5pdGUodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gdHlwZW9mIHBhcnNlciA9PT0gJ3N0cmluZycgPyBhZGFwdGVyLnBhcnNlKHZhbHVlLCAgcGFyc2VyKSA6IGFkYXB0ZXIucGFyc2UodmFsdWUpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChyb3VuZCkge1xuICAgICAgICB2YWx1ZSA9IHJvdW5kID09PSAnd2VlaycgJiYgKGlzTnVtYmVyKGlzb1dlZWtkYXkpIHx8IGlzb1dlZWtkYXkgPT09IHRydWUpID8gYWRhcHRlci5zdGFydE9mKHZhbHVlLCAnaXNvV2VlaycsIGlzb1dlZWtkYXkpIDogYWRhcHRlci5zdGFydE9mKHZhbHVlLCByb3VuZCk7XG4gICAgfVxuICAgIHJldHVybiArdmFsdWU7XG59XG4gZnVuY3Rpb24gZGV0ZXJtaW5lVW5pdEZvckF1dG9UaWNrcyhtaW5Vbml0LCBtaW4sIG1heCwgY2FwYWNpdHkpIHtcbiAgICBjb25zdCBpbGVuID0gVU5JVFMubGVuZ3RoO1xuICAgIGZvcihsZXQgaSA9IFVOSVRTLmluZGV4T2YobWluVW5pdCk7IGkgPCBpbGVuIC0gMTsgKytpKXtcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBJTlRFUlZBTFNbVU5JVFNbaV1dO1xuICAgICAgICBjb25zdCBmYWN0b3IgPSBpbnRlcnZhbC5zdGVwcyA/IGludGVydmFsLnN0ZXBzIDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gICAgICAgIGlmIChpbnRlcnZhbC5jb21tb24gJiYgTWF0aC5jZWlsKChtYXggLSBtaW4pIC8gKGZhY3RvciAqIGludGVydmFsLnNpemUpKSA8PSBjYXBhY2l0eSkge1xuICAgICAgICAgICAgcmV0dXJuIFVOSVRTW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBVTklUU1tpbGVuIC0gMV07XG59XG4gZnVuY3Rpb24gZGV0ZXJtaW5lVW5pdEZvckZvcm1hdHRpbmcoc2NhbGUsIG51bVRpY2tzLCBtaW5Vbml0LCBtaW4sIG1heCkge1xuICAgIGZvcihsZXQgaSA9IFVOSVRTLmxlbmd0aCAtIDE7IGkgPj0gVU5JVFMuaW5kZXhPZihtaW5Vbml0KTsgaS0tKXtcbiAgICAgICAgY29uc3QgdW5pdCA9IFVOSVRTW2ldO1xuICAgICAgICBpZiAoSU5URVJWQUxTW3VuaXRdLmNvbW1vbiAmJiBzY2FsZS5fYWRhcHRlci5kaWZmKG1heCwgbWluLCB1bml0KSA+PSBudW1UaWNrcyAtIDEpIHtcbiAgICAgICAgICAgIHJldHVybiB1bml0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBVTklUU1ttaW5Vbml0ID8gVU5JVFMuaW5kZXhPZihtaW5Vbml0KSA6IDBdO1xufVxuIGZ1bmN0aW9uIGRldGVybWluZU1ham9yVW5pdCh1bml0KSB7XG4gICAgZm9yKGxldCBpID0gVU5JVFMuaW5kZXhPZih1bml0KSArIDEsIGlsZW4gPSBVTklUUy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICBpZiAoSU5URVJWQUxTW1VOSVRTW2ldXS5jb21tb24pIHtcbiAgICAgICAgICAgIHJldHVybiBVTklUU1tpXTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiBmdW5jdGlvbiBhZGRUaWNrKHRpY2tzLCB0aW1lLCB0aW1lc3RhbXBzKSB7XG4gICAgaWYgKCF0aW1lc3RhbXBzKSB7XG4gICAgICAgIHRpY2tzW3RpbWVdID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHsgbG8gLCBoaSAgfSA9IF9sb29rdXAodGltZXN0YW1wcywgdGltZSk7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRpbWVzdGFtcHNbbG9dID49IHRpbWUgPyB0aW1lc3RhbXBzW2xvXSA6IHRpbWVzdGFtcHNbaGldO1xuICAgICAgICB0aWNrc1t0aW1lc3RhbXBdID0gdHJ1ZTtcbiAgICB9XG59XG4gZnVuY3Rpb24gc2V0TWFqb3JUaWNrcyhzY2FsZSwgdGlja3MsIG1hcCwgbWFqb3JVbml0KSB7XG4gICAgY29uc3QgYWRhcHRlciA9IHNjYWxlLl9hZGFwdGVyO1xuICAgIGNvbnN0IGZpcnN0ID0gK2FkYXB0ZXIuc3RhcnRPZih0aWNrc1swXS52YWx1ZSwgbWFqb3JVbml0KTtcbiAgICBjb25zdCBsYXN0ID0gdGlja3NbdGlja3MubGVuZ3RoIC0gMV0udmFsdWU7XG4gICAgbGV0IG1ham9yLCBpbmRleDtcbiAgICBmb3IobWFqb3IgPSBmaXJzdDsgbWFqb3IgPD0gbGFzdDsgbWFqb3IgPSArYWRhcHRlci5hZGQobWFqb3IsIDEsIG1ham9yVW5pdCkpe1xuICAgICAgICBpbmRleCA9IG1hcFttYWpvcl07XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aWNrc1tpbmRleF0ubWFqb3IgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aWNrcztcbn1cbiBmdW5jdGlvbiB0aWNrc0Zyb21UaW1lc3RhbXBzKHNjYWxlLCB2YWx1ZXMsIG1ham9yVW5pdCkge1xuICAgIGNvbnN0IHRpY2tzID0gW107XG4gICAgIGNvbnN0IG1hcCA9IHt9O1xuICAgIGNvbnN0IGlsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgIGxldCBpLCB2YWx1ZTtcbiAgICBmb3IoaSA9IDA7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgbWFwW3ZhbHVlXSA9IGk7XG4gICAgICAgIHRpY2tzLnB1c2goe1xuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtYWpvcjogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBpbGVuID09PSAwIHx8ICFtYWpvclVuaXQgPyB0aWNrcyA6IHNldE1ham9yVGlja3Moc2NhbGUsIHRpY2tzLCBtYXAsIG1ham9yVW5pdCk7XG59XG5jbGFzcyBUaW1lU2NhbGUgZXh0ZW5kcyBTY2FsZSB7XG4gICAgc3RhdGljIGlkID0gJ3RpbWUnO1xuIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiBib3VuZHM6ICdkYXRhJyxcbiAgICAgICAgYWRhcHRlcnM6IHt9LFxuICAgICAgICB0aW1lOiB7XG4gICAgICAgICAgICBwYXJzZXI6IGZhbHNlLFxuICAgICAgICAgICAgdW5pdDogZmFsc2UsXG4gICAgICAgICAgICByb3VuZDogZmFsc2UsXG4gICAgICAgICAgICBpc29XZWVrZGF5OiBmYWxzZSxcbiAgICAgICAgICAgIG1pblVuaXQ6ICdtaWxsaXNlY29uZCcsXG4gICAgICAgICAgICBkaXNwbGF5Rm9ybWF0czoge31cbiAgICAgICAgfSxcbiAgICAgICAgdGlja3M6IHtcbiBzb3VyY2U6ICdhdXRvJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgIG1ham9yOiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gY29uc3RydWN0b3IocHJvcHMpe1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgICB0aGlzLl9jYWNoZSA9IHtcbiAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgbGFiZWxzOiBbXSxcbiAgICAgICAgICAgIGFsbDogW11cbiAgICAgICAgfTtcbiAgICAgICAgIHRoaXMuX3VuaXQgPSAnZGF5JztcbiAgICAgICAgIHRoaXMuX21ham9yVW5pdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fb2Zmc2V0cyA9IHt9O1xuICAgICAgICB0aGlzLl9ub3JtYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhcnNlT3B0cyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaW5pdChzY2FsZU9wdHMsIG9wdHMgPSB7fSkge1xuICAgICAgICBjb25zdCB0aW1lID0gc2NhbGVPcHRzLnRpbWUgfHwgKHNjYWxlT3B0cy50aW1lID0ge30pO1xuICAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuX2FkYXB0ZXIgPSBuZXcgYWRhcHRlcnMuX2RhdGUoc2NhbGVPcHRzLmFkYXB0ZXJzLmRhdGUpO1xuICAgICAgICBhZGFwdGVyLmluaXQob3B0cyk7XG4gICAgICAgIG1lcmdlSWYodGltZS5kaXNwbGF5Rm9ybWF0cywgYWRhcHRlci5mb3JtYXRzKCkpO1xuICAgICAgICB0aGlzLl9wYXJzZU9wdHMgPSB7XG4gICAgICAgICAgICBwYXJzZXI6IHRpbWUucGFyc2VyLFxuICAgICAgICAgICAgcm91bmQ6IHRpbWUucm91bmQsXG4gICAgICAgICAgICBpc29XZWVrZGF5OiB0aW1lLmlzb1dlZWtkYXlcbiAgICAgICAgfTtcbiAgICAgICAgc3VwZXIuaW5pdChzY2FsZU9wdHMpO1xuICAgICAgICB0aGlzLl9ub3JtYWxpemVkID0gb3B0cy5ub3JtYWxpemVkO1xuICAgIH1cbiBwYXJzZShyYXcsIGluZGV4KSB7XG4gICAgICAgIGlmIChyYXcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlKHRoaXMsIHJhdyk7XG4gICAgfVxuICAgIGJlZm9yZUxheW91dCgpIHtcbiAgICAgICAgc3VwZXIuYmVmb3JlTGF5b3V0KCk7XG4gICAgICAgIHRoaXMuX2NhY2hlID0ge1xuICAgICAgICAgICAgZGF0YTogW10sXG4gICAgICAgICAgICBsYWJlbHM6IFtdLFxuICAgICAgICAgICAgYWxsOiBbXVxuICAgICAgICB9O1xuICAgIH1cbiAgICBkZXRlcm1pbmVEYXRhTGltaXRzKCkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5fYWRhcHRlcjtcbiAgICAgICAgY29uc3QgdW5pdCA9IG9wdGlvbnMudGltZS51bml0IHx8ICdkYXknO1xuICAgICAgICBsZXQgeyBtaW4gLCBtYXggLCBtaW5EZWZpbmVkICwgbWF4RGVmaW5lZCAgfSA9IHRoaXMuZ2V0VXNlckJvdW5kcygpO1xuIGZ1bmN0aW9uIF9hcHBseUJvdW5kcyhib3VuZHMpIHtcbiAgICAgICAgICAgIGlmICghbWluRGVmaW5lZCAmJiAhaXNOYU4oYm91bmRzLm1pbikpIHtcbiAgICAgICAgICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGJvdW5kcy5taW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtYXhEZWZpbmVkICYmICFpc05hTihib3VuZHMubWF4KSkge1xuICAgICAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgYm91bmRzLm1heCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtaW5EZWZpbmVkIHx8ICFtYXhEZWZpbmVkKSB7XG4gICAgICAgICAgICBfYXBwbHlCb3VuZHModGhpcy5fZ2V0TGFiZWxCb3VuZHMoKSk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ib3VuZHMgIT09ICd0aWNrcycgfHwgb3B0aW9ucy50aWNrcy5zb3VyY2UgIT09ICdsYWJlbHMnKSB7XG4gICAgICAgICAgICAgICAgX2FwcGx5Qm91bmRzKHRoaXMuZ2V0TWluTWF4KGZhbHNlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWluID0gaXNOdW1iZXJGaW5pdGUobWluKSAmJiAhaXNOYU4obWluKSA/IG1pbiA6ICthZGFwdGVyLnN0YXJ0T2YoRGF0ZS5ub3coKSwgdW5pdCk7XG4gICAgICAgIG1heCA9IGlzTnVtYmVyRmluaXRlKG1heCkgJiYgIWlzTmFOKG1heCkgPyBtYXggOiArYWRhcHRlci5lbmRPZihEYXRlLm5vdygpLCB1bml0KSArIDE7XG4gICAgICAgIHRoaXMubWluID0gTWF0aC5taW4obWluLCBtYXggLSAxKTtcbiAgICAgICAgdGhpcy5tYXggPSBNYXRoLm1heChtaW4gKyAxLCBtYXgpO1xuICAgIH1cbiBfZ2V0TGFiZWxCb3VuZHMoKSB7XG4gICAgICAgIGNvbnN0IGFyciA9IHRoaXMuZ2V0TGFiZWxUaW1lc3RhbXBzKCk7XG4gICAgICAgIGxldCBtaW4gPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIGxldCBtYXggPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIGlmIChhcnIubGVuZ3RoKSB7XG4gICAgICAgICAgICBtaW4gPSBhcnJbMF07XG4gICAgICAgICAgICBtYXggPSBhcnJbYXJyLmxlbmd0aCAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtaW4sXG4gICAgICAgICAgICBtYXhcbiAgICAgICAgfTtcbiAgICB9XG4gYnVpbGRUaWNrcygpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgdGltZU9wdHMgPSBvcHRpb25zLnRpbWU7XG4gICAgICAgIGNvbnN0IHRpY2tPcHRzID0gb3B0aW9ucy50aWNrcztcbiAgICAgICAgY29uc3QgdGltZXN0YW1wcyA9IHRpY2tPcHRzLnNvdXJjZSA9PT0gJ2xhYmVscycgPyB0aGlzLmdldExhYmVsVGltZXN0YW1wcygpIDogdGhpcy5fZ2VuZXJhdGUoKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYm91bmRzID09PSAndGlja3MnICYmIHRpbWVzdGFtcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLm1pbiA9IHRoaXMuX3VzZXJNaW4gfHwgdGltZXN0YW1wc1swXTtcbiAgICAgICAgICAgIHRoaXMubWF4ID0gdGhpcy5fdXNlck1heCB8fCB0aW1lc3RhbXBzW3RpbWVzdGFtcHMubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWluID0gdGhpcy5taW47XG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMubWF4O1xuICAgICAgICBjb25zdCB0aWNrcyA9IF9maWx0ZXJCZXR3ZWVuKHRpbWVzdGFtcHMsIG1pbiwgbWF4KTtcbiAgICAgICAgdGhpcy5fdW5pdCA9IHRpbWVPcHRzLnVuaXQgfHwgKHRpY2tPcHRzLmF1dG9Ta2lwID8gZGV0ZXJtaW5lVW5pdEZvckF1dG9UaWNrcyh0aW1lT3B0cy5taW5Vbml0LCB0aGlzLm1pbiwgdGhpcy5tYXgsIHRoaXMuX2dldExhYmVsQ2FwYWNpdHkobWluKSkgOiBkZXRlcm1pbmVVbml0Rm9yRm9ybWF0dGluZyh0aGlzLCB0aWNrcy5sZW5ndGgsIHRpbWVPcHRzLm1pblVuaXQsIHRoaXMubWluLCB0aGlzLm1heCkpO1xuICAgICAgICB0aGlzLl9tYWpvclVuaXQgPSAhdGlja09wdHMubWFqb3IuZW5hYmxlZCB8fCB0aGlzLl91bml0ID09PSAneWVhcicgPyB1bmRlZmluZWQgOiBkZXRlcm1pbmVNYWpvclVuaXQodGhpcy5fdW5pdCk7XG4gICAgICAgIHRoaXMuaW5pdE9mZnNldHModGltZXN0YW1wcyk7XG4gICAgICAgIGlmIChvcHRpb25zLnJldmVyc2UpIHtcbiAgICAgICAgICAgIHRpY2tzLnJldmVyc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGlja3NGcm9tVGltZXN0YW1wcyh0aGlzLCB0aWNrcywgdGhpcy5fbWFqb3JVbml0KTtcbiAgICB9XG4gICAgYWZ0ZXJBdXRvU2tpcCgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5vZmZzZXRBZnRlckF1dG9za2lwKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRPZmZzZXRzKHRoaXMudGlja3MubWFwKCh0aWNrKT0+K3RpY2sudmFsdWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiBpbml0T2Zmc2V0cyh0aW1lc3RhbXBzID0gW10pIHtcbiAgICAgICAgbGV0IHN0YXJ0ID0gMDtcbiAgICAgICAgbGV0IGVuZCA9IDA7XG4gICAgICAgIGxldCBmaXJzdCwgbGFzdDtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5vZmZzZXQgJiYgdGltZXN0YW1wcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZpcnN0ID0gdGhpcy5nZXREZWNpbWFsRm9yVmFsdWUodGltZXN0YW1wc1swXSk7XG4gICAgICAgICAgICBpZiAodGltZXN0YW1wcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IDEgLSBmaXJzdDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSAodGhpcy5nZXREZWNpbWFsRm9yVmFsdWUodGltZXN0YW1wc1sxXSkgLSBmaXJzdCkgLyAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdCA9IHRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHRpbWVzdGFtcHNbdGltZXN0YW1wcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICBpZiAodGltZXN0YW1wcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBlbmQgPSBsYXN0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbmQgPSAobGFzdCAtIHRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHRpbWVzdGFtcHNbdGltZXN0YW1wcy5sZW5ndGggLSAyXSkpIC8gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaW1pdCA9IHRpbWVzdGFtcHMubGVuZ3RoIDwgMyA/IDAuNSA6IDAuMjU7XG4gICAgICAgIHN0YXJ0ID0gX2xpbWl0VmFsdWUoc3RhcnQsIDAsIGxpbWl0KTtcbiAgICAgICAgZW5kID0gX2xpbWl0VmFsdWUoZW5kLCAwLCBsaW1pdCk7XG4gICAgICAgIHRoaXMuX29mZnNldHMgPSB7XG4gICAgICAgICAgICBzdGFydCxcbiAgICAgICAgICAgIGVuZCxcbiAgICAgICAgICAgIGZhY3RvcjogMSAvIChzdGFydCArIDEgKyBlbmQpXG4gICAgICAgIH07XG4gICAgfVxuIF9nZW5lcmF0ZSgpIHtcbiAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuX2FkYXB0ZXI7XG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMubWluO1xuICAgICAgICBjb25zdCBtYXggPSB0aGlzLm1heDtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgdGltZU9wdHMgPSBvcHRpb25zLnRpbWU7XG4gICAgICAgIGNvbnN0IG1pbm9yID0gdGltZU9wdHMudW5pdCB8fCBkZXRlcm1pbmVVbml0Rm9yQXV0b1RpY2tzKHRpbWVPcHRzLm1pblVuaXQsIG1pbiwgbWF4LCB0aGlzLl9nZXRMYWJlbENhcGFjaXR5KG1pbikpO1xuICAgICAgICBjb25zdCBzdGVwU2l6ZSA9IHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMudGlja3Muc3RlcFNpemUsIDEpO1xuICAgICAgICBjb25zdCB3ZWVrZGF5ID0gbWlub3IgPT09ICd3ZWVrJyA/IHRpbWVPcHRzLmlzb1dlZWtkYXkgOiBmYWxzZTtcbiAgICAgICAgY29uc3QgaGFzV2Vla2RheSA9IGlzTnVtYmVyKHdlZWtkYXkpIHx8IHdlZWtkYXkgPT09IHRydWU7XG4gICAgICAgIGNvbnN0IHRpY2tzID0ge307XG4gICAgICAgIGxldCBmaXJzdCA9IG1pbjtcbiAgICAgICAgbGV0IHRpbWUsIGNvdW50O1xuICAgICAgICBpZiAoaGFzV2Vla2RheSkge1xuICAgICAgICAgICAgZmlyc3QgPSArYWRhcHRlci5zdGFydE9mKGZpcnN0LCAnaXNvV2VlaycsIHdlZWtkYXkpO1xuICAgICAgICB9XG4gICAgICAgIGZpcnN0ID0gK2FkYXB0ZXIuc3RhcnRPZihmaXJzdCwgaGFzV2Vla2RheSA/ICdkYXknIDogbWlub3IpO1xuICAgICAgICBpZiAoYWRhcHRlci5kaWZmKG1heCwgbWluLCBtaW5vcikgPiAxMDAwMDAgKiBzdGVwU2l6ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1pbiArICcgYW5kICcgKyBtYXggKyAnIGFyZSB0b28gZmFyIGFwYXJ0IHdpdGggc3RlcFNpemUgb2YgJyArIHN0ZXBTaXplICsgJyAnICsgbWlub3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcHMgPSBvcHRpb25zLnRpY2tzLnNvdXJjZSA9PT0gJ2RhdGEnICYmIHRoaXMuZ2V0RGF0YVRpbWVzdGFtcHMoKTtcbiAgICAgICAgZm9yKHRpbWUgPSBmaXJzdCwgY291bnQgPSAwOyB0aW1lIDwgbWF4OyB0aW1lID0gK2FkYXB0ZXIuYWRkKHRpbWUsIHN0ZXBTaXplLCBtaW5vciksIGNvdW50Kyspe1xuICAgICAgICAgICAgYWRkVGljayh0aWNrcywgdGltZSwgdGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbWUgPT09IG1heCB8fCBvcHRpb25zLmJvdW5kcyA9PT0gJ3RpY2tzJyB8fCBjb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgYWRkVGljayh0aWNrcywgdGltZSwgdGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRpY2tzKS5zb3J0KChhLCBiKT0+YSAtIGIpLm1hcCgoeCk9Pit4KTtcbiAgICB9XG4gZ2V0TGFiZWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5fYWRhcHRlcjtcbiAgICAgICAgY29uc3QgdGltZU9wdHMgPSB0aGlzLm9wdGlvbnMudGltZTtcbiAgICAgICAgaWYgKHRpbWVPcHRzLnRvb2x0aXBGb3JtYXQpIHtcbiAgICAgICAgICAgIHJldHVybiBhZGFwdGVyLmZvcm1hdCh2YWx1ZSwgdGltZU9wdHMudG9vbHRpcEZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFkYXB0ZXIuZm9ybWF0KHZhbHVlLCB0aW1lT3B0cy5kaXNwbGF5Rm9ybWF0cy5kYXRldGltZSk7XG4gICAgfVxuIF90aWNrRm9ybWF0RnVuY3Rpb24odGltZSwgaW5kZXgsIHRpY2tzLCBmb3JtYXQpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gb3B0aW9ucy50aWNrcy5jYWxsYmFjaztcbiAgICAgICAgaWYgKGZvcm1hdHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZvcm1hdHRlciwgW1xuICAgICAgICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgdGlja3NcbiAgICAgICAgICAgIF0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvcm1hdHMgPSBvcHRpb25zLnRpbWUuZGlzcGxheUZvcm1hdHM7XG4gICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLl91bml0O1xuICAgICAgICBjb25zdCBtYWpvclVuaXQgPSB0aGlzLl9tYWpvclVuaXQ7XG4gICAgICAgIGNvbnN0IG1pbm9yRm9ybWF0ID0gdW5pdCAmJiBmb3JtYXRzW3VuaXRdO1xuICAgICAgICBjb25zdCBtYWpvckZvcm1hdCA9IG1ham9yVW5pdCAmJiBmb3JtYXRzW21ham9yVW5pdF07XG4gICAgICAgIGNvbnN0IHRpY2sgPSB0aWNrc1tpbmRleF07XG4gICAgICAgIGNvbnN0IG1ham9yID0gbWFqb3JVbml0ICYmIG1ham9yRm9ybWF0ICYmIHRpY2sgJiYgdGljay5tYWpvcjtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkYXB0ZXIuZm9ybWF0KHRpbWUsIGZvcm1hdCB8fCAobWFqb3IgPyBtYWpvckZvcm1hdCA6IG1pbm9yRm9ybWF0KSk7XG4gICAgfVxuIGdlbmVyYXRlVGlja0xhYmVscyh0aWNrcykge1xuICAgICAgICBsZXQgaSwgaWxlbiwgdGljaztcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gdGlja3MubGVuZ3RoOyBpIDwgaWxlbjsgKytpKXtcbiAgICAgICAgICAgIHRpY2sgPSB0aWNrc1tpXTtcbiAgICAgICAgICAgIHRpY2subGFiZWwgPSB0aGlzLl90aWNrRm9ybWF0RnVuY3Rpb24odGljay52YWx1ZSwgaSwgdGlja3MpO1xuICAgICAgICB9XG4gICAgfVxuIGdldERlY2ltYWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgPyBOYU4gOiAodmFsdWUgLSB0aGlzLm1pbikgLyAodGhpcy5tYXggLSB0aGlzLm1pbik7XG4gICAgfVxuIGdldFBpeGVsRm9yVmFsdWUodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0cyA9IHRoaXMuX29mZnNldHM7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGl4ZWxGb3JEZWNpbWFsKChvZmZzZXRzLnN0YXJ0ICsgcG9zKSAqIG9mZnNldHMuZmFjdG9yKTtcbiAgICB9XG4gZ2V0VmFsdWVGb3JQaXhlbChwaXhlbCkge1xuICAgICAgICBjb25zdCBvZmZzZXRzID0gdGhpcy5fb2Zmc2V0cztcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXREZWNpbWFsRm9yUGl4ZWwocGl4ZWwpIC8gb2Zmc2V0cy5mYWN0b3IgLSBvZmZzZXRzLmVuZDtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluICsgcG9zICogKHRoaXMubWF4IC0gdGhpcy5taW4pO1xuICAgIH1cbiBfZ2V0TGFiZWxTaXplKGxhYmVsKSB7XG4gICAgICAgIGNvbnN0IHRpY2tzT3B0cyA9IHRoaXMub3B0aW9ucy50aWNrcztcbiAgICAgICAgY29uc3QgdGlja0xhYmVsV2lkdGggPSB0aGlzLmN0eC5tZWFzdXJlVGV4dChsYWJlbCkud2lkdGg7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gdG9SYWRpYW5zKHRoaXMuaXNIb3Jpem9udGFsKCkgPyB0aWNrc09wdHMubWF4Um90YXRpb24gOiB0aWNrc09wdHMubWluUm90YXRpb24pO1xuICAgICAgICBjb25zdCBjb3NSb3RhdGlvbiA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICAgICAgY29uc3Qgc2luUm90YXRpb24gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgICAgIGNvbnN0IHRpY2tGb250U2l6ZSA9IHRoaXMuX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoMCkuc2l6ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHc6IHRpY2tMYWJlbFdpZHRoICogY29zUm90YXRpb24gKyB0aWNrRm9udFNpemUgKiBzaW5Sb3RhdGlvbixcbiAgICAgICAgICAgIGg6IHRpY2tMYWJlbFdpZHRoICogc2luUm90YXRpb24gKyB0aWNrRm9udFNpemUgKiBjb3NSb3RhdGlvblxuICAgICAgICB9O1xuICAgIH1cbiBfZ2V0TGFiZWxDYXBhY2l0eShleGFtcGxlVGltZSkge1xuICAgICAgICBjb25zdCB0aW1lT3B0cyA9IHRoaXMub3B0aW9ucy50aW1lO1xuICAgICAgICBjb25zdCBkaXNwbGF5Rm9ybWF0cyA9IHRpbWVPcHRzLmRpc3BsYXlGb3JtYXRzO1xuICAgICAgICBjb25zdCBmb3JtYXQgPSBkaXNwbGF5Rm9ybWF0c1t0aW1lT3B0cy51bml0XSB8fCBkaXNwbGF5Rm9ybWF0cy5taWxsaXNlY29uZDtcbiAgICAgICAgY29uc3QgZXhhbXBsZUxhYmVsID0gdGhpcy5fdGlja0Zvcm1hdEZ1bmN0aW9uKGV4YW1wbGVUaW1lLCAwLCB0aWNrc0Zyb21UaW1lc3RhbXBzKHRoaXMsIFtcbiAgICAgICAgICAgIGV4YW1wbGVUaW1lXG4gICAgICAgIF0sIHRoaXMuX21ham9yVW5pdCksIGZvcm1hdCk7XG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLl9nZXRMYWJlbFNpemUoZXhhbXBsZUxhYmVsKTtcbiAgICAgICAgY29uc3QgY2FwYWNpdHkgPSBNYXRoLmZsb29yKHRoaXMuaXNIb3Jpem9udGFsKCkgPyB0aGlzLndpZHRoIC8gc2l6ZS53IDogdGhpcy5oZWlnaHQgLyBzaXplLmgpIC0gMTtcbiAgICAgICAgcmV0dXJuIGNhcGFjaXR5ID4gMCA/IGNhcGFjaXR5IDogMTtcbiAgICB9XG4gZ2V0RGF0YVRpbWVzdGFtcHMoKSB7XG4gICAgICAgIGxldCB0aW1lc3RhbXBzID0gdGhpcy5fY2FjaGUuZGF0YSB8fCBbXTtcbiAgICAgICAgbGV0IGksIGlsZW47XG4gICAgICAgIGlmICh0aW1lc3RhbXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpbWVzdGFtcHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWV0YXMgPSB0aGlzLmdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKCk7XG4gICAgICAgIGlmICh0aGlzLl9ub3JtYWxpemVkICYmIG1ldGFzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLmRhdGEgPSBtZXRhc1swXS5jb250cm9sbGVyLmdldEFsbFBhcnNlZFZhbHVlcyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IoaSA9IDAsIGlsZW4gPSBtZXRhcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICAgICAgdGltZXN0YW1wcyA9IHRpbWVzdGFtcHMuY29uY2F0KG1ldGFzW2ldLmNvbnRyb2xsZXIuZ2V0QWxsUGFyc2VkVmFsdWVzKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGUuZGF0YSA9IHRoaXMubm9ybWFsaXplKHRpbWVzdGFtcHMpO1xuICAgIH1cbiBnZXRMYWJlbFRpbWVzdGFtcHMoKSB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcHMgPSB0aGlzLl9jYWNoZS5sYWJlbHMgfHwgW107XG4gICAgICAgIGxldCBpLCBpbGVuO1xuICAgICAgICBpZiAodGltZXN0YW1wcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aW1lc3RhbXBzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxhYmVscyA9IHRoaXMuZ2V0TGFiZWxzKCk7XG4gICAgICAgIGZvcihpID0gMCwgaWxlbiA9IGxhYmVscy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICAgICAgdGltZXN0YW1wcy5wdXNoKHBhcnNlKHRoaXMsIGxhYmVsc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5sYWJlbHMgPSB0aGlzLl9ub3JtYWxpemVkID8gdGltZXN0YW1wcyA6IHRoaXMubm9ybWFsaXplKHRpbWVzdGFtcHMpO1xuICAgIH1cbiBub3JtYWxpemUodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBfYXJyYXlVbmlxdWUodmFsdWVzLnNvcnQoc29ydGVyKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZSh0YWJsZSwgdmFsLCByZXZlcnNlKSB7XG4gICAgbGV0IGxvID0gMDtcbiAgICBsZXQgaGkgPSB0YWJsZS5sZW5ndGggLSAxO1xuICAgIGxldCBwcmV2U291cmNlLCBuZXh0U291cmNlLCBwcmV2VGFyZ2V0LCBuZXh0VGFyZ2V0O1xuICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgIGlmICh2YWwgPj0gdGFibGVbbG9dLnBvcyAmJiB2YWwgPD0gdGFibGVbaGldLnBvcykge1xuICAgICAgICAgICAgKHsgbG8gLCBoaSAgfSA9IF9sb29rdXBCeUtleSh0YWJsZSwgJ3BvcycsIHZhbCkpO1xuICAgICAgICB9XG4gICAgICAgICh7IHBvczogcHJldlNvdXJjZSAsIHRpbWU6IHByZXZUYXJnZXQgIH0gPSB0YWJsZVtsb10pO1xuICAgICAgICAoeyBwb3M6IG5leHRTb3VyY2UgLCB0aW1lOiBuZXh0VGFyZ2V0ICB9ID0gdGFibGVbaGldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodmFsID49IHRhYmxlW2xvXS50aW1lICYmIHZhbCA8PSB0YWJsZVtoaV0udGltZSkge1xuICAgICAgICAgICAgKHsgbG8gLCBoaSAgfSA9IF9sb29rdXBCeUtleSh0YWJsZSwgJ3RpbWUnLCB2YWwpKTtcbiAgICAgICAgfVxuICAgICAgICAoeyB0aW1lOiBwcmV2U291cmNlICwgcG9zOiBwcmV2VGFyZ2V0ICB9ID0gdGFibGVbbG9dKTtcbiAgICAgICAgKHsgdGltZTogbmV4dFNvdXJjZSAsIHBvczogbmV4dFRhcmdldCAgfSA9IHRhYmxlW2hpXSk7XG4gICAgfVxuICAgIGNvbnN0IHNwYW4gPSBuZXh0U291cmNlIC0gcHJldlNvdXJjZTtcbiAgICByZXR1cm4gc3BhbiA/IHByZXZUYXJnZXQgKyAobmV4dFRhcmdldCAtIHByZXZUYXJnZXQpICogKHZhbCAtIHByZXZTb3VyY2UpIC8gc3BhbiA6IHByZXZUYXJnZXQ7XG59XG5jbGFzcyBUaW1lU2VyaWVzU2NhbGUgZXh0ZW5kcyBUaW1lU2NhbGUge1xuICAgIHN0YXRpYyBpZCA9ICd0aW1lc2VyaWVzJztcbiBzdGF0aWMgZGVmYXVsdHMgPSBUaW1lU2NhbGUuZGVmYXVsdHM7XG4gY29uc3RydWN0b3IocHJvcHMpe1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgICB0aGlzLl90YWJsZSA9IFtdO1xuICAgICAgICAgdGhpcy5fbWluUG9zID0gdW5kZWZpbmVkO1xuICAgICAgICAgdGhpcy5fdGFibGVSYW5nZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gaW5pdE9mZnNldHMoKSB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcHMgPSB0aGlzLl9nZXRUaW1lc3RhbXBzRm9yVGFibGUoKTtcbiAgICAgICAgY29uc3QgdGFibGUgPSB0aGlzLl90YWJsZSA9IHRoaXMuYnVpbGRMb29rdXBUYWJsZSh0aW1lc3RhbXBzKTtcbiAgICAgICAgdGhpcy5fbWluUG9zID0gaW50ZXJwb2xhdGUodGFibGUsIHRoaXMubWluKTtcbiAgICAgICAgdGhpcy5fdGFibGVSYW5nZSA9IGludGVycG9sYXRlKHRhYmxlLCB0aGlzLm1heCkgLSB0aGlzLl9taW5Qb3M7XG4gICAgICAgIHN1cGVyLmluaXRPZmZzZXRzKHRpbWVzdGFtcHMpO1xuICAgIH1cbiBidWlsZExvb2t1cFRhYmxlKHRpbWVzdGFtcHMpIHtcbiAgICAgICAgY29uc3QgeyBtaW4gLCBtYXggIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBpdGVtcyA9IFtdO1xuICAgICAgICBjb25zdCB0YWJsZSA9IFtdO1xuICAgICAgICBsZXQgaSwgaWxlbiwgcHJldiwgY3VyciwgbmV4dDtcbiAgICAgICAgZm9yKGkgPSAwLCBpbGVuID0gdGltZXN0YW1wcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpe1xuICAgICAgICAgICAgY3VyciA9IHRpbWVzdGFtcHNbaV07XG4gICAgICAgICAgICBpZiAoY3VyciA+PSBtaW4gJiYgY3VyciA8PSBtYXgpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGN1cnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbWluLFxuICAgICAgICAgICAgICAgICAgICBwb3M6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbWF4LFxuICAgICAgICAgICAgICAgICAgICBwb3M6IDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGZvcihpID0gMCwgaWxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGlsZW47ICsraSl7XG4gICAgICAgICAgICBuZXh0ID0gaXRlbXNbaSArIDFdO1xuICAgICAgICAgICAgcHJldiA9IGl0ZW1zW2kgLSAxXTtcbiAgICAgICAgICAgIGN1cnIgPSBpdGVtc1tpXTtcbiAgICAgICAgICAgIGlmIChNYXRoLnJvdW5kKChuZXh0ICsgcHJldikgLyAyKSAhPT0gY3Vycikge1xuICAgICAgICAgICAgICAgIHRhYmxlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0aW1lOiBjdXJyLFxuICAgICAgICAgICAgICAgICAgICBwb3M6IGkgLyAoaWxlbiAtIDEpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhYmxlO1xuICAgIH1cbiBfZ2V0VGltZXN0YW1wc0ZvclRhYmxlKCkge1xuICAgICAgICBsZXQgdGltZXN0YW1wcyA9IHRoaXMuX2NhY2hlLmFsbCB8fCBbXTtcbiAgICAgICAgaWYgKHRpbWVzdGFtcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGltZXN0YW1wcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXREYXRhVGltZXN0YW1wcygpO1xuICAgICAgICBjb25zdCBsYWJlbCA9IHRoaXMuZ2V0TGFiZWxUaW1lc3RhbXBzKCk7XG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCAmJiBsYWJlbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcHMgPSB0aGlzLm5vcm1hbGl6ZShkYXRhLmNvbmNhdChsYWJlbCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGltZXN0YW1wcyA9IGRhdGEubGVuZ3RoID8gZGF0YSA6IGxhYmVsO1xuICAgICAgICB9XG4gICAgICAgIHRpbWVzdGFtcHMgPSB0aGlzLl9jYWNoZS5hbGwgPSB0aW1lc3RhbXBzO1xuICAgICAgICByZXR1cm4gdGltZXN0YW1wcztcbiAgICB9XG4gZ2V0RGVjaW1hbEZvclZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAoaW50ZXJwb2xhdGUodGhpcy5fdGFibGUsIHZhbHVlKSAtIHRoaXMuX21pblBvcykgLyB0aGlzLl90YWJsZVJhbmdlO1xuICAgIH1cbiBnZXRWYWx1ZUZvclBpeGVsKHBpeGVsKSB7XG4gICAgICAgIGNvbnN0IG9mZnNldHMgPSB0aGlzLl9vZmZzZXRzO1xuICAgICAgICBjb25zdCBkZWNpbWFsID0gdGhpcy5nZXREZWNpbWFsRm9yUGl4ZWwocGl4ZWwpIC8gb2Zmc2V0cy5mYWN0b3IgLSBvZmZzZXRzLmVuZDtcbiAgICAgICAgcmV0dXJuIGludGVycG9sYXRlKHRoaXMuX3RhYmxlLCBkZWNpbWFsICogdGhpcy5fdGFibGVSYW5nZSArIHRoaXMuX21pblBvcywgdHJ1ZSk7XG4gICAgfVxufVxuXG52YXIgc2NhbGVzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuX19wcm90b19fOiBudWxsLFxuQ2F0ZWdvcnlTY2FsZTogQ2F0ZWdvcnlTY2FsZSxcbkxpbmVhclNjYWxlOiBMaW5lYXJTY2FsZSxcbkxvZ2FyaXRobWljU2NhbGU6IExvZ2FyaXRobWljU2NhbGUsXG5SYWRpYWxMaW5lYXJTY2FsZTogUmFkaWFsTGluZWFyU2NhbGUsXG5UaW1lU2NhbGU6IFRpbWVTY2FsZSxcblRpbWVTZXJpZXNTY2FsZTogVGltZVNlcmllc1NjYWxlXG59KTtcblxuY29uc3QgcmVnaXN0ZXJhYmxlcyA9IFtcbiAgICBjb250cm9sbGVycyxcbiAgICBlbGVtZW50cyxcbiAgICBwbHVnaW5zLFxuICAgIHNjYWxlc1xuXTtcblxuZXhwb3J0IHsgQW5pbWF0aW9uLCBBbmltYXRpb25zLCBBcmNFbGVtZW50LCBCYXJDb250cm9sbGVyLCBCYXJFbGVtZW50LCBCYXNlUGxhdGZvcm0sIEJhc2ljUGxhdGZvcm0sIEJ1YmJsZUNvbnRyb2xsZXIsIENhdGVnb3J5U2NhbGUsIENoYXJ0LCBwbHVnaW5fY29sb3JzIGFzIENvbG9ycywgRGF0YXNldENvbnRyb2xsZXIsIHBsdWdpbl9kZWNpbWF0aW9uIGFzIERlY2ltYXRpb24sIERvbVBsYXRmb3JtLCBEb3VnaG51dENvbnRyb2xsZXIsIEVsZW1lbnQsIGluZGV4IGFzIEZpbGxlciwgSW50ZXJhY3Rpb24sIHBsdWdpbl9sZWdlbmQgYXMgTGVnZW5kLCBMaW5lQ29udHJvbGxlciwgTGluZUVsZW1lbnQsIExpbmVhclNjYWxlLCBMb2dhcml0aG1pY1NjYWxlLCBQaWVDb250cm9sbGVyLCBQb2ludEVsZW1lbnQsIFBvbGFyQXJlYUNvbnRyb2xsZXIsIFJhZGFyQ29udHJvbGxlciwgUmFkaWFsTGluZWFyU2NhbGUsIFNjYWxlLCBTY2F0dGVyQ29udHJvbGxlciwgcGx1Z2luX3N1YnRpdGxlIGFzIFN1YlRpdGxlLCBUaW1lU2NhbGUsIFRpbWVTZXJpZXNTY2FsZSwgcGx1Z2luX3RpdGxlIGFzIFRpdGxlLCBwbHVnaW5fdG9vbHRpcCBhcyBUb29sdGlwLCBhZGFwdGVycyBhcyBfYWRhcHRlcnMsIF9kZXRlY3RQbGF0Zm9ybSwgYW5pbWF0b3IsIGNvbnRyb2xsZXJzLCBlbGVtZW50cywgbGF5b3V0cywgcGx1Z2lucywgcmVnaXN0ZXJhYmxlcywgcmVnaXN0cnksIHNjYWxlcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hhcnQuanMubWFwXG4iLCJpbXBvcnQgeyB2ZXJzaW9uLCBpc1Byb3h5LCB0b1JhdywgZGVmaW5lQ29tcG9uZW50LCByZWYsIHNoYWxsb3dSZWYsIG9uTW91bnRlZCwgb25CZWZvcmVVbm1vdW50LCB3YXRjaCwgaCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBDaGFydCBhcyBDaGFydCQxLCBCYXJDb250cm9sbGVyLCBEb3VnaG51dENvbnRyb2xsZXIsIExpbmVDb250cm9sbGVyLCBQaWVDb250cm9sbGVyLCBQb2xhckFyZWFDb250cm9sbGVyLCBSYWRhckNvbnRyb2xsZXIsIEJ1YmJsZUNvbnRyb2xsZXIsIFNjYXR0ZXJDb250cm9sbGVyIH0gZnJvbSAnY2hhcnQuanMnO1xuXG5jb25zdCBDb21tb25Qcm9wcyA9IHtcbiAgICBkYXRhOiB7XG4gICAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgICBkZWZhdWx0OiAoKT0+KHt9KVxuICAgIH0sXG4gICAgcGx1Z2luczoge1xuICAgICAgICB0eXBlOiBBcnJheSxcbiAgICAgICAgZGVmYXVsdDogKCk9PltdXG4gICAgfSxcbiAgICBkYXRhc2V0SWRLZXk6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiBcImxhYmVsXCJcbiAgICB9LFxuICAgIHVwZGF0ZU1vZGU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWRcbiAgICB9XG59O1xuY29uc3QgUHJvcHMgPSB7XG4gICAgdHlwZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICAuLi5Db21tb25Qcm9wc1xufTtcblxuY29uc3QgY29tcGF0UHJvcHMgPSB2ZXJzaW9uWzBdID09PSBcIjJcIiA/IChpbnRlcm5hbHMsIHByb3BzKT0+T2JqZWN0LmFzc2lnbihpbnRlcm5hbHMsIHtcbiAgICAgICAgYXR0cnM6IHByb3BzXG4gICAgfSkgOiAoaW50ZXJuYWxzLCBwcm9wcyk9Pk9iamVjdC5hc3NpZ24oaW50ZXJuYWxzLCBwcm9wcyk7XG5mdW5jdGlvbiB0b1Jhd0lmUHJveHkob2JqKSB7XG4gICAgcmV0dXJuIGlzUHJveHkob2JqKSA/IHRvUmF3KG9iaikgOiBvYmo7XG59XG5mdW5jdGlvbiBjbG9uZVByb3h5KG9iaikge1xuICAgIGxldCBzcmMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1sxXSA6IG9iajtcbiAgICByZXR1cm4gaXNQcm94eShzcmMpID8gbmV3IFByb3h5KG9iaiwge30pIDogb2JqO1xufVxuZnVuY3Rpb24gc2V0T3B0aW9ucyhjaGFydCwgbmV4dE9wdGlvbnMpIHtcbiAgICBjb25zdCBvcHRpb25zID0gY2hhcnQub3B0aW9ucztcbiAgICBpZiAob3B0aW9ucyAmJiBuZXh0T3B0aW9ucykge1xuICAgICAgICBPYmplY3QuYXNzaWduKG9wdGlvbnMsIG5leHRPcHRpb25zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRMYWJlbHMoY3VycmVudERhdGEsIG5leHRMYWJlbHMpIHtcbiAgICBjdXJyZW50RGF0YS5sYWJlbHMgPSBuZXh0TGFiZWxzO1xufVxuZnVuY3Rpb24gc2V0RGF0YXNldHMoY3VycmVudERhdGEsIG5leHREYXRhc2V0cywgZGF0YXNldElkS2V5KSB7XG4gICAgY29uc3QgYWRkZWREYXRhc2V0cyA9IFtdO1xuICAgIGN1cnJlbnREYXRhLmRhdGFzZXRzID0gbmV4dERhdGFzZXRzLm1hcCgobmV4dERhdGFzZXQpPT57XG4gICAgICAgIC8vIGdpdmVuIHRoZSBuZXcgc2V0LCBmaW5kIGl0J3MgY3VycmVudCBtYXRjaFxuICAgICAgICBjb25zdCBjdXJyZW50RGF0YXNldCA9IGN1cnJlbnREYXRhLmRhdGFzZXRzLmZpbmQoKGRhdGFzZXQpPT5kYXRhc2V0W2RhdGFzZXRJZEtleV0gPT09IG5leHREYXRhc2V0W2RhdGFzZXRJZEtleV0pO1xuICAgICAgICAvLyBUaGVyZSBpcyBubyBvcmlnaW5hbCB0byB1cGRhdGUsIHNvIHNpbXBseSBhZGQgbmV3IG9uZVxuICAgICAgICBpZiAoIWN1cnJlbnREYXRhc2V0IHx8ICFuZXh0RGF0YXNldC5kYXRhIHx8IGFkZGVkRGF0YXNldHMuaW5jbHVkZXMoY3VycmVudERhdGFzZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLm5leHREYXRhc2V0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGFkZGVkRGF0YXNldHMucHVzaChjdXJyZW50RGF0YXNldCk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oY3VycmVudERhdGFzZXQsIG5leHREYXRhc2V0KTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRhc2V0O1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY2xvbmVEYXRhKGRhdGEsIGRhdGFzZXRJZEtleSkge1xuICAgIGNvbnN0IG5leHREYXRhID0ge1xuICAgICAgICBsYWJlbHM6IFtdLFxuICAgICAgICBkYXRhc2V0czogW11cbiAgICB9O1xuICAgIHNldExhYmVscyhuZXh0RGF0YSwgZGF0YS5sYWJlbHMpO1xuICAgIHNldERhdGFzZXRzKG5leHREYXRhLCBkYXRhLmRhdGFzZXRzLCBkYXRhc2V0SWRLZXkpO1xuICAgIHJldHVybiBuZXh0RGF0YTtcbn1cbi8qKlxuICogR2V0IGRhdGFzZXQgZnJvbSBtb3VzZSBjbGljayBldmVudFxuICogQHBhcmFtIGNoYXJ0IC0gQ2hhcnQuanMgaW5zdGFuY2VcbiAqIEBwYXJhbSBldmVudCAtIE1vdXNlIGNsaWNrIGV2ZW50XG4gKiBAcmV0dXJucyBEYXRhc2V0XG4gKi8gZnVuY3Rpb24gZ2V0RGF0YXNldEF0RXZlbnQoY2hhcnQsIGV2ZW50KSB7XG4gICAgcmV0dXJuIGNoYXJ0LmdldEVsZW1lbnRzQXRFdmVudEZvck1vZGUoZXZlbnQsIFwiZGF0YXNldFwiLCB7XG4gICAgICAgIGludGVyc2VjdDogdHJ1ZVxuICAgIH0sIGZhbHNlKTtcbn1cbi8qKlxuICogR2V0IHNpbmdsZSBkYXRhc2V0IGVsZW1lbnQgZnJvbSBtb3VzZSBjbGljayBldmVudFxuICogQHBhcmFtIGNoYXJ0IC0gQ2hhcnQuanMgaW5zdGFuY2VcbiAqIEBwYXJhbSBldmVudCAtIE1vdXNlIGNsaWNrIGV2ZW50XG4gKiBAcmV0dXJucyBEYXRhc2V0XG4gKi8gZnVuY3Rpb24gZ2V0RWxlbWVudEF0RXZlbnQoY2hhcnQsIGV2ZW50KSB7XG4gICAgcmV0dXJuIGNoYXJ0LmdldEVsZW1lbnRzQXRFdmVudEZvck1vZGUoZXZlbnQsIFwibmVhcmVzdFwiLCB7XG4gICAgICAgIGludGVyc2VjdDogdHJ1ZVxuICAgIH0sIGZhbHNlKTtcbn1cbi8qKlxuICogR2V0IGFsbCBkYXRhc2V0IGVsZW1lbnRzIGZyb20gbW91c2UgY2xpY2sgZXZlbnRcbiAqIEBwYXJhbSBjaGFydCAtIENoYXJ0LmpzIGluc3RhbmNlXG4gKiBAcGFyYW0gZXZlbnQgLSBNb3VzZSBjbGljayBldmVudFxuICogQHJldHVybnMgRGF0YXNldFxuICovIGZ1bmN0aW9uIGdldEVsZW1lbnRzQXRFdmVudChjaGFydCwgZXZlbnQpIHtcbiAgICByZXR1cm4gY2hhcnQuZ2V0RWxlbWVudHNBdEV2ZW50Rm9yTW9kZShldmVudCwgXCJpbmRleFwiLCB7XG4gICAgICAgIGludGVyc2VjdDogdHJ1ZVxuICAgIH0sIGZhbHNlKTtcbn1cblxuY29uc3QgQ2hhcnQgPSBkZWZpbmVDb21wb25lbnQoe1xuICAgIHByb3BzOiBQcm9wcyxcbiAgICBzZXR1cCAocHJvcHMsIHBhcmFtKSB7XG4gICAgICAgIGxldCB7IGV4cG9zZSAgfSA9IHBhcmFtO1xuICAgICAgICBjb25zdCBjYW52YXNSZWYgPSByZWYobnVsbCk7XG4gICAgICAgIGNvbnN0IGNoYXJ0UmVmID0gc2hhbGxvd1JlZihudWxsKTtcbiAgICAgICAgZXhwb3NlKHtcbiAgICAgICAgICAgIGNoYXJ0OiBjaGFydFJlZlxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVuZGVyQ2hhcnQgPSAoKT0+e1xuICAgICAgICAgICAgaWYgKCFjYW52YXNSZWYudmFsdWUpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZSAsIGRhdGEgLCBvcHRpb25zICwgcGx1Z2lucyAsIGRhdGFzZXRJZEtleSAgfSA9IHByb3BzO1xuICAgICAgICAgICAgY29uc3QgY2xvbmVkRGF0YSA9IGNsb25lRGF0YShkYXRhLCBkYXRhc2V0SWRLZXkpO1xuICAgICAgICAgICAgY29uc3QgcHJveGllZERhdGEgPSBjbG9uZVByb3h5KGNsb25lZERhdGEsIGRhdGEpO1xuICAgICAgICAgICAgY2hhcnRSZWYudmFsdWUgPSBuZXcgQ2hhcnQkMShjYW52YXNSZWYudmFsdWUsIHtcbiAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgIGRhdGE6IHByb3hpZWREYXRhLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGx1Z2luc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRlc3Ryb3lDaGFydCA9ICgpPT57XG4gICAgICAgICAgICBjb25zdCBjaGFydCA9IHRvUmF3KGNoYXJ0UmVmLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChjaGFydCkge1xuICAgICAgICAgICAgICAgIGNoYXJ0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBjaGFydFJlZi52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9IChjaGFydCk9PntcbiAgICAgICAgICAgIGNoYXJ0LnVwZGF0ZShwcm9wcy51cGRhdGVNb2RlKTtcbiAgICAgICAgfTtcbiAgICAgICAgb25Nb3VudGVkKHJlbmRlckNoYXJ0KTtcbiAgICAgICAgb25CZWZvcmVVbm1vdW50KGRlc3Ryb3lDaGFydCk7XG4gICAgICAgIHdhdGNoKFtcbiAgICAgICAgICAgICgpPT5wcm9wcy5vcHRpb25zLFxuICAgICAgICAgICAgKCk9PnByb3BzLmRhdGFcbiAgICAgICAgXSwgKHBhcmFtLCBwYXJhbTEpPT57XG4gICAgICAgICAgICBsZXQgW25leHRPcHRpb25zUHJveHksIG5leHREYXRhUHJveHldID0gcGFyYW0sIFtwcmV2T3B0aW9uc1Byb3h5LCBwcmV2RGF0YVByb3h5XSA9IHBhcmFtMTtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJ0ID0gdG9SYXcoY2hhcnRSZWYudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFjaGFydCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChuZXh0T3B0aW9uc1Byb3h5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dE9wdGlvbnMgPSB0b1Jhd0lmUHJveHkobmV4dE9wdGlvbnNQcm94eSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldk9wdGlvbnMgPSB0b1Jhd0lmUHJveHkocHJldk9wdGlvbnNQcm94eSk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRPcHRpb25zICYmIG5leHRPcHRpb25zICE9PSBwcmV2T3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBzZXRPcHRpb25zKGNoYXJ0LCBuZXh0T3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHREYXRhUHJveHkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0TGFiZWxzID0gdG9SYXdJZlByb3h5KG5leHREYXRhUHJveHkubGFiZWxzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2TGFiZWxzID0gdG9SYXdJZlByb3h5KHByZXZEYXRhUHJveHkubGFiZWxzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0RGF0YXNldHMgPSB0b1Jhd0lmUHJveHkobmV4dERhdGFQcm94eS5kYXRhc2V0cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldkRhdGFzZXRzID0gdG9SYXdJZlByb3h5KHByZXZEYXRhUHJveHkuZGF0YXNldHMpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0TGFiZWxzICE9PSBwcmV2TGFiZWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExhYmVscyhjaGFydC5jb25maWcuZGF0YSwgbmV4dExhYmVscyk7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZXh0RGF0YXNldHMgJiYgbmV4dERhdGFzZXRzICE9PSBwcmV2RGF0YXNldHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0RGF0YXNldHMoY2hhcnQuY29uZmlnLmRhdGEsIG5leHREYXRhc2V0cywgcHJvcHMuZGF0YXNldElkS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlKGNoYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVlcDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICgpPT57XG4gICAgICAgICAgICByZXR1cm4gaChcImNhbnZhc1wiLCB7XG4gICAgICAgICAgICAgICAgcmVmOiBjYW52YXNSZWZcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVUeXBlZENoYXJ0KHR5cGUsIHJlZ2lzdGVyYWJsZXMpIHtcbiAgICBDaGFydCQxLnJlZ2lzdGVyKHJlZ2lzdGVyYWJsZXMpO1xuICAgIHJldHVybiBkZWZpbmVDb21wb25lbnQoe1xuICAgICAgICBwcm9wczogQ29tbW9uUHJvcHMsXG4gICAgICAgIHNldHVwIChwcm9wcywgcGFyYW0pIHtcbiAgICAgICAgICAgIGxldCB7IGV4cG9zZSAgfSA9IHBhcmFtO1xuICAgICAgICAgICAgY29uc3QgcmVmID0gc2hhbGxvd1JlZihudWxsKTtcbiAgICAgICAgICAgIGNvbnN0IHJlZm9yd2FyZFJlZiA9IChjaGFydFJlZik9PntcbiAgICAgICAgICAgICAgICByZWYudmFsdWUgPSBjaGFydFJlZj8uY2hhcnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXhwb3NlKHtcbiAgICAgICAgICAgICAgICBjaGFydDogcmVmXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAoKT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiBoKENoYXJ0LCBjb21wYXRQcm9wcyh7XG4gICAgICAgICAgICAgICAgICAgIHJlZjogcmVmb3J3YXJkUmVmXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgICAgICAuLi5wcm9wc1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmNvbnN0IEJhciA9IC8qICNfX1BVUkVfXyAqLyBjcmVhdGVUeXBlZENoYXJ0KFwiYmFyXCIsIEJhckNvbnRyb2xsZXIpO1xuY29uc3QgRG91Z2hudXQgPSAvKiAjX19QVVJFX18gKi8gY3JlYXRlVHlwZWRDaGFydChcImRvdWdobnV0XCIsIERvdWdobnV0Q29udHJvbGxlcik7XG5jb25zdCBMaW5lID0gLyogI19fUFVSRV9fICovIGNyZWF0ZVR5cGVkQ2hhcnQoXCJsaW5lXCIsIExpbmVDb250cm9sbGVyKTtcbmNvbnN0IFBpZSA9IC8qICNfX1BVUkVfXyAqLyBjcmVhdGVUeXBlZENoYXJ0KFwicGllXCIsIFBpZUNvbnRyb2xsZXIpO1xuY29uc3QgUG9sYXJBcmVhID0gLyogI19fUFVSRV9fICovIGNyZWF0ZVR5cGVkQ2hhcnQoXCJwb2xhckFyZWFcIiwgUG9sYXJBcmVhQ29udHJvbGxlcik7XG5jb25zdCBSYWRhciA9IC8qICNfX1BVUkVfXyAqLyBjcmVhdGVUeXBlZENoYXJ0KFwicmFkYXJcIiwgUmFkYXJDb250cm9sbGVyKTtcbmNvbnN0IEJ1YmJsZSA9IC8qICNfX1BVUkVfXyAqLyBjcmVhdGVUeXBlZENoYXJ0KFwiYnViYmxlXCIsIEJ1YmJsZUNvbnRyb2xsZXIpO1xuY29uc3QgU2NhdHRlciA9IC8qICNfX1BVUkVfXyAqLyBjcmVhdGVUeXBlZENoYXJ0KFwic2NhdHRlclwiLCBTY2F0dGVyQ29udHJvbGxlcik7XG5cbmV4cG9ydCB7IEJhciwgQnViYmxlLCBDaGFydCwgRG91Z2hudXQsIExpbmUsIFBpZSwgUG9sYXJBcmVhLCBSYWRhciwgU2NhdHRlciwgY3JlYXRlVHlwZWRDaGFydCwgZ2V0RGF0YXNldEF0RXZlbnQsIGdldEVsZW1lbnRBdEV2ZW50LCBnZXRFbGVtZW50c0F0RXZlbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiPHRlbXBsYXRlPlxuICA8ZGl2XG4gICAgOmNsYXNzPVwiY3NzQ2xhc3Nlc1wiXG4gID5cbiAgICA8ZGl2IGNsYXNzPVwiU2VuRXh0cmFib2xkLWZvbnRcIj57eyB0KFwiaG9tZUNvbXBvbmVudC5iYXJDaGFydC5oZWFkaW5nXCIpIH19PC9kaXY+XG4gICAgPGJhciA6ZGF0YT1cImNoYXJ0RGF0YVwiXG4gICAgICA6c3R5bGU9XCJjaGFydFN0eWxlXCJcbiAgICAgIHYtaWY9XCJsb2FkZWRcIiAvPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG4vKmVzbGludCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55OiAnb2ZmJyovXG5pbXBvcnQge1xuICBDaGFydCBhcyBDaGFydEpTLFxuICBUaXRsZSxcbiAgVG9vbHRpcCxcbiAgTGVnZW5kLFxuICBCYXJFbGVtZW50LFxuICBDYXRlZ29yeVNjYWxlLFxuICBMaW5lYXJTY2FsZVxufSBmcm9tICdjaGFydC5qcydcbmltcG9ydCB7IEJhciB9IGZyb20gJ3Z1ZS1jaGFydGpzJztcbkNoYXJ0SlMucmVnaXN0ZXIoQ2F0ZWdvcnlTY2FsZSwgTGluZWFyU2NhbGUsIEJhckVsZW1lbnQsIFRpdGxlLCBUb29sdGlwLCBMZWdlbmQpO1xuLy8gaW1wb3J0IENoYXJ0IGZyb20gJ2NoYXJ0LmpzL2F1dG8nO1xuaW1wb3J0IHsgdXNlQ291bnRlclN0b3JlIH0gZnJvbSAnc3RvcmVzL2NvdW50ZXInO1xuaW1wb3J0IHsgdXNlVXNlclN0b3JlIH0gZnJvbSAnc3RvcmVzL3VzZXInO1xuLy8gaW1wb3J0IHsgQ2FwYWNpdG9yIH0gZnJvbSAnQGNhcGFjaXRvci9jb3JlJztcbmltcG9ydCB7IHVzZUkxOG4gfSBmcm9tICd2dWUtaTE4bic7XG5pbXBvcnQgeyByZWYsIGNvbXB1dGVkIH0gZnJvbSAndnVlJztcbmltcG9ydCB7IHVzZVF1YXNhciB9IGZyb20gJ3F1YXNhcic7XG5pbXBvcnQgeyBvcGVuRGJDb25uZWN0aW9uLCBpc0RiQ29ubmVjdGlvbk9wZW4sIG5ld1F1ZXJ5IH0gZnJvbSAnY2FwL3N0b3JhZ2UnO1xuaW1wb3J0IHsgU1FMaXRlREJDb25uZWN0aW9uIH0gZnJvbSAnQGNhcGFjaXRvci1jb21tdW5pdHkvc3FsaXRlJztcbmltcG9ydCB7IHNldERlY3J5cHRBcGksIF9fVFJBTlNGT1JNT0JKX18gfSBmcm9tICdzcmMvZ2xvYmFscyc7XG5cbi8vIFZBUklBQkxFU1xuaW50ZXJmYWNlIEJhckNoYXJ0UHJvcHMge1xuICBjaGFydElkPzogc3RyaW5nO1xuICBkYXRhc2V0SWRLZXk/OiBzdHJpbmc7XG4gIHdpZHRoPzogbnVtYmVyO1xuICBoZWlnaHQ/OiBudW1iZXI7XG4gIGNzc0NsYXNzZXM/OiBzdHJpbmc7XG4gIHN0eWxlcz86IHVua25vdztcbiAgcGx1Z2lucz86IFtdO1xuICBpbnZvaWNlc0ZZPzogW10gfCBudWxsO1xuICBkYkNvbm46IFNRTGl0ZURCQ29ubmVjdGlvbiB8IG51bGw7XG59O1xuY29uc3QgJHEgPSB1c2VRdWFzYXIoKTtcbmNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuY29uc3QgcHJvcHMgPSB3aXRoRGVmYXVsdHMoZGVmaW5lUHJvcHM8QmFyQ2hhcnRQcm9wcz4oKSwge1xuICBjaGFydElkOiAnYmFyLWNoYXJ0JyxcbiAgZGF0YXNldElkS2V5OiAnbGFiZWwnLFxuICB3aWR0aDogNDAwLFxuICBoZWlnaHQ6IDQwMCxcbiAgY3NzQ2xhc3NlczogJycsXG4gIHN0eWxlczogKCkgPT4gKHt9KSxcbiAgcGx1Z2luczogKCkgPT4gKFtdKSxcbiAgaW52b2ljZXNGWTogbnVsbCxcbiAgZGJDb25uOiBudWxsLFxufSk7XG5jb25zdCBwbGF0Zm9ybSA9ICRxLnBsYXRmb3JtO1xuY29uc3Qgbm93ID0gcmVmKG5ldyBEYXRlKCkpO1xuLy8gY29uc3QgY291bnRlciA9IHJlZihudWxsKTtcbi8vIGNvbnN0IHllYXJMYWJlbCA9IGNvbXB1dGVkKCgpID0+IHtcbi8vICAgaWYgKG5vdy52YWx1ZS5nZXRNb250aCgpID4gNSkge1xuLy8gICAgIHJldHVybiAobm93LnZhbHVlLmdldEZ1bGxZZWFyKCkpO1xuLy8gICB9IGVsc2Uge1xuLy8gICAgIHJldHVybiAobm93LnZhbHVlLmdldEZ1bGxZZWFyKCkgLSAxKTtcbi8vICAgfVxuLy8gfSk7XG5jb25zdCB5ZWFyTGFiZWwgPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgPiA1XG4gID8gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpXG4gIDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC0gMTtcbi8vIGNvbnNvbGUubG9nKCdZZWFyTGFiZWwgIScpO1xuLy8gY29uc29sZS5sb2coeWVhckxhYmVsKTtcbmNvbnN0IGNoYXJ0TGFiZWxzID0gW1xuICAvLyB0KCdob21lQ29tcG9uZW50LmJhckNoYXJ0Lmp1bmVMYWJlbCcsIHsgeWVhcjogYCR7eWVhckxhYmVsfWAgfSksXG4gIC8vIHQoJ2hvbWVDb21wb25lbnQuYmFyQ2hhcnQuanVseUxhYmVsJywgeyB5ZWFyOiBgJHt5ZWFyTGFiZWx9YCB9KSxcbiAgLy8gdCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5hdWd1c3RMYWJlbCcsIHsgeWVhcjogYCR7eWVhckxhYmVsfWAgfSksXG4gIC8vIHQoJ2hvbWVDb21wb25lbnQuYmFyQ2hhcnQuc2VwdGVtYmVyTGFiZWwnLCB7IHllYXI6IGAke3llYXJMYWJlbH1gIH0pLFxuICAvLyB0KCdob21lQ29tcG9uZW50LmJhckNoYXJ0Lm9jdG9iZXJMYWJlbCcsIHsgeWVhcjogYCR7eWVhckxhYmVsfWAgfSksXG4gIC8vIHQoJ2hvbWVDb21wb25lbnQuYmFyQ2hhcnQubm92ZW1iZXJMYWJlbCcsIHsgeWVhcjogYCR7eWVhckxhYmVsfWAgfSksXG4gIC8vIHQoJ2hvbWVDb21wb25lbnQuYmFyQ2hhcnQuZGVjZW1iZXJMYWJlbCcsIHsgeWVhcjogYCR7eWVhckxhYmVsfWAgfSksXG4gIC8vIHQoJ2hvbWVDb21wb25lbnQuYmFyQ2hhcnQuamFudWFyeUxhYmVsJywgeyB5ZWFyOiBgJHsoeWVhckxhYmVsICsgMSl9YCB9KSxcbiAgLy8gdCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5mZWJydWFyeUxhYmVsJywgeyB5ZWFyOiBgJHsoeWVhckxhYmVsICsgMSl9YCB9KSxcbiAgLy8gdCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5tYXJjaExhYmVsJywgeyB5ZWFyOiBgJHsoeWVhckxhYmVsICsgMSl9YCB9KSxcbiAgLy8gdCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5hcHJpbExhYmVsJywgeyB5ZWFyOiBgJHsoeWVhckxhYmVsICsgMSl9YCB9KSxcbiAgLy8gdCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5tYXlMYWJlbCcsIHsgeWVhcjogYCR7KHllYXJMYWJlbCArIDEpfWAgfSksXG5dO1xuY2hhcnRMYWJlbHMucHVzaChcbiAgYCR7dCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5qdW5lTGFiZWwnKX0gJHt5ZWFyTGFiZWx9YCxcbiAgYCR7dCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5qdWx5TGFiZWwnKX0gJHt5ZWFyTGFiZWx9YCxcbiAgYCR7dCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5hdWd1c3RMYWJlbCcpfSAke3llYXJMYWJlbH1gLFxuICBgJHt0KCdob21lQ29tcG9uZW50LmJhckNoYXJ0LnNlcHRlbWJlckxhYmVsJyl9ICR7eWVhckxhYmVsfWAsXG4gIGAke3QoJ2hvbWVDb21wb25lbnQuYmFyQ2hhcnQub2N0b2JlckxhYmVsJyl9ICR7eWVhckxhYmVsfWAsXG4gIGAke3QoJ2hvbWVDb21wb25lbnQuYmFyQ2hhcnQubm92ZW1iZXJMYWJlbCcpfSAke3llYXJMYWJlbH1gLFxuICBgJHt0KCdob21lQ29tcG9uZW50LmJhckNoYXJ0LmRlY2VtYmVyTGFiZWwnKX0gJHt5ZWFyTGFiZWx9YCxcbiAgYCR7dCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5qYW51YXJ5TGFiZWwnKX0gJHsoeWVhckxhYmVsICsgMSl9YCxcbiAgYCR7dCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5mZWJydWFyeUxhYmVsJyl9ICR7KHllYXJMYWJlbCArIDEpfWAsXG4gIGAke3QoJ2hvbWVDb21wb25lbnQuYmFyQ2hhcnQubWFyY2hMYWJlbCcpfSAkeyh5ZWFyTGFiZWwgKyAxKX1gLFxuICBgJHt0KCdob21lQ29tcG9uZW50LmJhckNoYXJ0LmFwcmlsTGFiZWwnKX0gJHsoeWVhckxhYmVsICsgMSl9YCxcbiAgYCR7dCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5tYXlMYWJlbCcpfSAkeyh5ZWFyTGFiZWwgKyAxKX1gXG4pO1xuLy8gY29uc3QgY2hhcnRPcHRpb25zID0ge1xuLy8gICByZXNwb25zaXZlOiB0cnVlLFxuLy8gICBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSxcbi8vIH07XG5jb25zdCBkYXRhcyA9IHJlZihbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pO1xuY29uc3QgY2hhcnREYXRhID0gcmVmKHtcbiAgbGFiZWxzOiBjaGFydExhYmVscyxcbiAgZGF0YXNldHM6IFtcbiAgICB7XG4gICAgICBsYWJlbDogdCgnaG9tZUNvbXBvbmVudC5iYXJDaGFydC5kYXRhc2V0TGFiZWwnKSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmODc5NzknLFxuICAgICAgZGF0YTogZGF0YXMudmFsdWUsXG4gICAgfSxcbiAgXSxcbn0pO1xuY29uc3Qgb3JpZW50YXRpb24gPSByZWYobnVsbCk7XG5jb25zdCBjb21wYWN0ID0gY29tcHV0ZWQoKCkgPT4ge1xuICBsZXQgcmV0ID0gZmFsc2U7XG4gIGlmICghIW9yaWVudGF0aW9uLnZhbHVlKXtcbiAgICBpZiAob3JpZW50YXRpb24udmFsdWUgPT09ICdwb3J0cmFpdC1wcmltYXJ5JyB8fCBvcmllbnRhdGlvbi52YWx1ZSA9PT0gJ3BvcnRyYWl0LXNlY29uZGFyeScpe1xuICAgICAgcmV0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn0pO1xuY29uc3QgY2hhcnRTdHlsZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgY29uc3QgcmV0ID0ge1xuICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgIHJlc3BvbnNpdmU6IHRydWVcbiAgfTtcbiAgaWYgKCFjb21wYWN0LnZhbHVlKSB7XG4gICAgcmV0LnJlc3BvbnNpdmUgPSBmYWxzZTtcbiAgICByZXQuaGVpZ2h0ID0gcHJvcHMuaGVpZ2h0O1xuICAgIHJldC53aWR0aCA9IHByb3BzLndpZHRoO1xuICB9XG4gIHJldHVybiByZXQ7XG59KTtcbmNvbnN0IGxvYWRlZCA9IHJlZihmYWxzZSk7XG5cbmxldCBjb3VudGVyU3RvcmUgPSBudWxsLCB1c2VyU3RvcmUgPSBudWxsLCBwcmVmcyA9IG51bGw7XG5cbi8vIERFQ0xBUkFUSU9OXG5pZiAocGxhdGZvcm0uaXMuZGVza3RvcCl7XG4gIGNvdW50ZXJTdG9yZSA9IHVzZUNvdW50ZXJTdG9yZSgpO1xuICB1c2VyU3RvcmUgPSB1c2VVc2VyU3RvcmUoKTtcbiAgLy8gY29uc29sZS5sb2coY2hhcnREYXRhLnZhbHVlKTtcbn1cbmVsc2Uge1xuICBvcmllbnRhdGlvbi52YWx1ZSA9IHdpbmRvdy5zY3JlZW4ub3JpZW50YXRpb24udHlwZTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgaGFuZGxlT3JpZW50YXRpb24pO1xufVxuKGFzeW5jKCkgPT4ge1xuICBpZiAocGxhdGZvcm0uaXMuZGVza3RvcCl7XG4gICAgaWYgKCFpbXBvcnQubWV0YS5lbnYuU1NSKXtcbiAgICAgIC8vYXdhaXQgdXNlclN0b3JlLnJldHJpZXZlVXNlcigxKTtcbiAgICAgIGlmICghIXByb3BzLmludm9pY2VzRlkgPT09IGZhbHNlKVxuICAgICAgICBhd2FpdCBjb3VudGVyU3RvcmUuZ2V0RmluYW5jaWFsWWVhckludm9pY2VzKHVzZXJTdG9yZS5nZXRVc2VyLnVzZXJJZCk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIC8vIGNvbnNvbGUubG9nKCdCYXJDaGFydCBpbml0ICEnKTtcbiAgICBwcmVmcyA9IGF3YWl0IGltcG9ydCgnY2FwL3N0b3JhZ2UvcHJlZmVyZW5jZXMnKTtcbiAgICBjb25zdCB1c3IgPSBhd2FpdCBwcmVmcy5nZXRQcmVmKCd1c2VyJyk7XG4gICAgLy8gY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHByZWZzLmdldFByZWYoJ3Nlc3Npb24nKTtcbiAgICAvLyBkZXZpc2UgPSB1c3IudXNlci5kZXZpc2U7XG4gICAgLy8gbG9jYWxlID0gISFzZXNzaW9uID8gc2Vzc2lvbi5sYW5nRGlzcGxheWVkLm5vbSA6ICdlbi1VUycgO1xuICAgIGxldCBkYXRlU3RhcnQgPSBudWxsOztcbiAgICBpZiAobm93LnZhbHVlLmdldE1vbnRoKCkgPCA1KSB7XG4gICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShgJHtub3cudmFsdWUuZ2V0RnVsbFllYXIoKSAtIDF9LTA2LTAxYCk7XG4gICAgfSBcbiAgICBlbHNlIHtcbiAgICAgIGRhdGVTdGFydCA9IG5ldyBEYXRlKGAke25vdy52YWx1ZS5nZXRGdWxsWWVhcigpfS0wNi0wMWApO1xuICAgIH1cblxuICAgIGlmICghIXByb3BzLmludm9pY2VzRlkgPT09IGZhbHNlKXtcbiAgICAgIGxldCBpc09wZW4gPSBhd2FpdCBpc0RiQ29ubmVjdGlvbk9wZW4ocHJvcHMuZGJDb25uKTtcbiAgICAgIGlzT3BlbiA9ICFpc09wZW4gfHwgISFpc09wZW4gPyBhd2FpdCBvcGVuRGJDb25uZWN0aW9uKHByb3BzLmRiQ29ubikgOiBpc09wZW47XG4gICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgIGNvbnN0IHNxbCA9IGBTRUxFQ1QgXFxgZmFjdHVyZVxcYC5cXGBmYWN0dXJlSWRcXGAsIFxcYGZhY3R1cmVcXGAuXFxgZGF0ZVxcYCwgXFxgZmFjdHVyZVxcYC5cXGBpbnZvaWNlSFRQcmljZVxcYCwgXFxgZmFjdHVyZVxcYC5cXGBpbnZvaWNlVFRQcmljZVxcYCwgXFxgZmFjdHVyZVxcYC5cXGB0dmFWYWx1ZVxcYCwgXFxgbGFuZ3VlXFxgLlxcYGxhbmd1ZUlkXFxgIEFTIFxcYGxhbmd1ZS5sYW5ndWVJZFxcYCwgXFxgbGFuZ3VlXFxgLlxcYGxpYmVsbGVcXGAgQVMgXFxgbGFuZ3VlLmxpYmVsbGVcXGAsIFxcYGxhbmd1ZVxcYC5cXGBub21cXGAgQVMgXFxgbGFuZ3VlLm5vbVxcYCwgXFxgZGV2aXNlXFxgLlxcYGRldmlzZUlkXFxgIEFTIFxcYGRldmlzZS5kZXZpc2VJZFxcYCwgXFxgZGV2aXNlXFxgLlxcYHN5bWJvbGVcXGAgQVMgXFxgZGV2aXNlLnN5bWJvbGVcXGAsIFxcYGRldmlzZVxcYC5cXGBsaWJlbGxlXFxgIEFTIFxcYGRldmlzZS5saWJlbGxlXFxgLCBcXGBidXllclxcYC5cXGBhY3RvcklkXFxgIEFTIFxcYGJ1eWVyLmFjdG9ySWRcXGAsIFxcYGJ1eWVyXFxgLlxcYGNwXFxgIEFTIFxcYGJ1eWVyLmNwXFxgLCBcXGBidXllclxcYC5cXGBlbWFpbFxcYCBBUyBcXGBidXllci5lbWFpbFxcYCwgXFxgYnV5ZXJcXGAuXFxgbm9tXFxgIEFTIFxcYGJ1eWVyLm5vbVxcYCwgXFxgYnV5ZXJcXGAuXFxgbm9tUnVlXFxgIEFTIFxcYGJ1eWVyLm5vbVJ1ZVxcYCwgXFxgYnV5ZXJcXGAuXFxgbnVtQ29tbWVyY2FudFxcYCBBUyBcXGBidXllci5udW1Db21tZXJjYW50XFxgLCBcXGBidXllclxcYC5cXGBudW1SdWVcXGAgQVMgXFxgYnV5ZXIubnVtUnVlXFxgLCBcXGBidXllclxcYC5cXGBwcmVub21cXGAgQVMgXFxgYnV5ZXIucHJlbm9tXFxgLCBcXGBidXllclxcYC5cXGB0ZWxcXGAgQVMgXFxgYnV5ZXIudGVsXFxgLCBcXGBidXllclxcYC5cXGBhY3RvclR5cGVJZFxcYCBBUyBcXGBidXllci5hY3RvclR5cGVJZFxcYCwgXFxgYnV5ZXJcXGAuXFxgdmlsbGVcXGAgQVMgXFxgYnV5ZXIudmlsbGVcXGAsIFxcYHNlbGxlclxcYC5cXGBhY3RvcklkXFxgIEFTIFxcYHNlbGxlci5hY3RvcklkXFxgLCBcXGBzZWxsZXJcXGAuXFxgY3BcXGAgQVMgXFxgc2VsbGVyLmNwXFxgLCBcXGBzZWxsZXJcXGAuXFxgZW1haWxcXGAgQVMgXFxgc2VsbGVyLmVtYWlsXFxgLCBcXGBzZWxsZXJcXGAuXFxgbm9tXFxgIEFTIFxcYHNlbGxlci5ub21cXGAsIFxcYHNlbGxlclxcYC5cXGBub21SdWVcXGAgQVMgXFxgc2VsbGVyLm5vbVJ1ZVxcYCwgXFxgc2VsbGVyXFxgLlxcYG51bUNvbW1lcmNhbnRcXGAgQVMgXFxgc2VsbGVyLm51bUNvbW1lcmNhbnRcXGAsIFxcYHNlbGxlclxcYC5cXGBudW1SdWVcXGAgQVMgXFxgc2VsbGVyLm51bVJ1ZVxcYCwgXFxgc2VsbGVyXFxgLlxcYHByZW5vbVxcYCBBUyBcXGBzZWxsZXIucHJlbm9tXFxgLCBcXGBzZWxsZXJcXGAuXFxgdGVsXFxgIEFTIFxcYHNlbGxlci50ZWxcXGAsIFxcYHNlbGxlclxcYC5cXGBhY3RvclR5cGVJZFxcYCBBUyBcXGBzZWxsZXIuYWN0b3JUeXBlSWRcXGAsIFxcYHNlbGxlclxcYC5cXGB2aWxsZVxcYCBBUyBcXGBzZWxsZXIudmlsbGVcXGAsIFxcYHBheW1lbnRzXFxgLlxcYHBheW1lbnRJZFxcYCBBUyBcXGBwYXltZW50cy5wYXltZW50SWRcXGAsIFxcYHBheW1lbnRzXFxgLlxcYGV0YXRcXGAgQVMgXFxgcGF5bWVudHMuZXRhdFxcYCwgXFxgcGF5bWVudHNcXGAuXFxgcGF5bWVudFZhbHVlXFxgIEFTIFxcYHBheW1lbnRzLnBheW1lbnRWYWx1ZVxcYCwgXFxgcGF5bWVudHNcXGAuXFxgcGF5bWVudFR5cGVcXGAgQVMgXFxgcGF5bWVudHMucGF5bWVudFR5cGVcXGAsIFxcYHBheW1lbnRzXFxgLlxcYGZhY3R1cmVJZFxcYCBBUyBcXGBwYXltZW50cy5mYWN0dXJlSWRcXGAsIHN0cmZ0aW1lKCclcycsIFxcYGZhY3R1cmVcXGAuXFxgZGF0ZVxcYCkgQVMgXFxgZGF0ZV9mb3JtYXRcXGAgRlJPTSBcXGBmYWN0dXJlXFxgIEFTIFxcYGZhY3R1cmVcXGAgTEVGVCBPVVRFUiBKT0lOIFxcYGxhbmd1ZVxcYCBBUyBcXGBsYW5ndWVcXGAgT04gXFxgZmFjdHVyZVxcYC5cXGBsYW5ndWFnZUlkXFxgID0gXFxgbGFuZ3VlXFxgLlxcYGxhbmd1ZUlkXFxgIExFRlQgT1VURVIgSk9JTiBcXGBkZXZpc2VcXGAgQVMgXFxgZGV2aXNlXFxgIE9OIFxcYGZhY3R1cmVcXGAuXFxgZGV2aXNlSWRcXGAgPSBcXGBkZXZpc2VcXGAuXFxgZGV2aXNlSWRcXGAgTEVGVCBPVVRFUiBKT0lOIFxcYHBlcnNvbm5lXFxgIEFTIFxcYGJ1eWVyXFxgIE9OIFxcYGZhY3R1cmVcXGAuXFxgYnV5ZXJJZFxcYCA9IFxcYGJ1eWVyXFxgLlxcYGFjdG9ySWRcXGAgTEVGVCBPVVRFUiBKT0lOIFxcYHBlcnNvbm5lXFxgIEFTIFxcYHNlbGxlclxcYCBPTiBcXGBmYWN0dXJlXFxgLlxcYHNlbGxlcklkXFxgID0gXFxgc2VsbGVyXFxgLlxcYGFjdG9ySWRcXGAgTEVGVCBPVVRFUiBKT0lOIFxcYHBheW1lbnRcXGAgQVMgXFxgcGF5bWVudHNcXGAgT04gXFxgZmFjdHVyZVxcYC5cXGBmYWN0dXJlSWRcXGAgPSBcXGBwYXltZW50c1xcYC5cXGBmYWN0dXJlSWRcXGAgV0hFUkUgXFxgZmFjdHVyZVxcYC5cXGBhZG1pbmlzdHJhdG9ySWRcXGAgPSAnJHt1c3IudXNlci51c2VySWR9JyBBTkQgXFxgZGF0ZV9mb3JtYXRcXGAgPiBzdHJmdGltZSgnJXMnLCAnJHtkYXRlU3RhcnQudG9JU09TdHJpbmcoKX0nKWA7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNxbCk7XG4gICAgICAgICAgbGV0IGNvdW50ZXJTZXNzID0gYXdhaXQgcHJlZnMuZ2V0UHJlZignY291bnRlcicpO1xuICAgICAgICAvLyBpZiAoISFjb3VudGVyU2VzcyA9PT0gZmFsc2UgfHwgISFjb3VudGVyU2Vzcy5pbnZvaWNlc0ZZID09PSBmYWxzZSB8fCAhY291bnRlclNlc3MuaW52b2ljZXNGWS5sZW5ndGgpe1xuICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IG5ld1F1ZXJ5KHByb3BzLmRiQ29ubiwgc3FsKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQmFyQ2hhcnQgIScpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlcyk7XG4gICAgICAgICAgaWYgKCEhdmFsdWVzICYmIHZhbHVlcy52YWx1ZXMubGVuZ3RoKXtcbiAgICAgICAgICAgIGNvbnN0IGludFJlcyA9IHNhbml0aXplUXVlcnlSZXN1bHQodmFsdWVzLnZhbHVlcyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbnRSZXMpO1xuICAgICAgICAgICAgYXdhaXQgc2V0RGVjcnlwdEFwaSgpO1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgX19UUkFOU0ZPUk1PQkpfXyhpbnRSZXMpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICAgIC8vIGxldCBjb3VudGVyU2VzcyA9IGF3YWl0IHByZWZzLmdldFByZWYoJ2NvdW50ZXInKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNvdW50ZXJTZXNzKTtcbiAgICAgICAgICAgIGNvdW50ZXJTZXNzID0gISFjb3VudGVyU2VzcyA/IGNvdW50ZXJTZXNzIDoge307XG4gICAgICAgICAgICBjb3VudGVyU2Vzcy5pbnZvaWNlc0ZZID0gcmVzO1xuICAgICAgICAgICAgYXdhaXQgcHJlZnMuc2V0UHJlZignY291bnRlcicsIGNvdW50ZXJTZXNzLCBmYWxzZSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb3VudGVyU2Vzcyk7XG4gICAgICAgICAgICAvLyBjb3VudGVyLnZhbHVlID0gY291bnRlclNlc3M7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGVsc2Uge1xuICAgICAgICAgIC8vICAgYXdhaXQgcHJlZnMuc2V0UHJlZignbWVzc2FnZScsIHtcbiAgICAgICAgICAvLyAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAvLyAgICAgICB7XG4gICAgICAgICAgLy8gICAgICAgICBzZXZlcml0eTogdHJ1ZSxcbiAgICAgICAgICAvLyAgICAgICAgIGNvbnRlbnQ6IHQoJ2hvbWVDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9zdGF0cycsIHsgZXJyOiAnU2VsZWN0IGludm9pY2VzIGZyb20gU1FMaXRlIERCICEnIH0pXG4gICAgICAgICAgLy8gICAgICAgfVxuICAgICAgICAgIC8vICAgICBdLFxuICAgICAgICAgIC8vICAgICBtZXNzYWdlc1Zpc2liaWxpdHk6IHRydWUsXG4gICAgICAgICAgLy8gICB9KTtcbiAgICAgICAgICAvLyB9XG4gICAgICAgICAgLy8gY291bnRlci52YWx1ZSA9IGF3YWl0IHByZWZzLmdldFByZWYoJ2NvdW50ZXInKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBlbHNlIHtcbiAgICAgICAgLy8gICBjb3VudGVyLnZhbHVlID0gY291bnRlclNlc3M7XG4gICAgICAgIC8vIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBhd2FpdCBwcmVmcy5zZXRQcmVmKCdtZXNzYWdlJywge1xuICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNldmVyaXR5OiB0cnVlLFxuICAgICAgICAgICAgICBjb250ZW50OiB0KCdob21lQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfc3RhdHMnLCB7IGVycjogJ1VuYWJsZSB0byBvcGVuIFNRTGl0ZSBEQiAhJyB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgbWVzc2FnZXNWaXNpYmlsaXR5OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gbWVzc2FnZVZpc2liaWxpdHkudmFsdWUgPSB0cnVlO1xuICAgICAgICAvLyBjb3VudGVyLnZhbHVlID0gYXdhaXQgcHJlZnMuZ2V0UHJlZignY291bnRlcicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGxhc3REYXlOdW0gPSBjaGVja0xlYXBZZWFyKHllYXJMYWJlbCArIDEpXG4gICAgPyAnMjknXG4gICAgOiAnMjgnO1xuICAvLyBjb25zb2xlLmxvZyhsYXN0RGF5TnVtKTtcbiAgLy8gY29uc29sZS5sb2coY291bnRlci52YWx1ZSk7XG5cbiAgZGF0YXMudmFsdWUgPSBbXTtcbiAgbGV0IGluZCA9IDAsIG1vbnRoID0gNjtcbiAgd2hpbGUgKGluZCA8IDEyKXtcbiAgICBsZXQgcGFyYW0gPSBbXSwgbGFzdCA9IDMwO1xuICAgIGNvbnN0IGFycmF5MSA9IFs3LCA4LCAxMCwgMTIsIDEsIDMsIDVdO1xuICAgIGlmIChtb250aCA9PT0gMTMpe1xuICAgICAgbW9udGggPSAxO1xuICAgIH1cbiAgICBpZiAoYXJyYXkxLmZpbmRJbmRleCgoZWxlbSkgPT4gZWxlbSA9PT0gbW9udGgpICE9PSAtMSl7XG4gICAgICBsYXN0ID0gMzE7XG4gICAgfVxuICAgIGlmIChtb250aCA8IDEwKXtcbiAgICAgIGlmIChtb250aCA9PT0gMil7XG4gICAgICAgIHBhcmFtLnB1c2goYCR7eWVhckxhYmVsICsgMX0tMCR7bW9udGh9LTAxYCk7XG4gICAgICAgIHBhcmFtLnB1c2goYCR7eWVhckxhYmVsICsgMX0tMCR7bW9udGh9LSR7bGFzdERheU51bX1gKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG1vbnRoID4gNSl7XG4gICAgICAgIHBhcmFtLnB1c2goYCR7eWVhckxhYmVsfS0wJHttb250aH0tMDFgKTtcbiAgICAgICAgcGFyYW0ucHVzaChgJHt5ZWFyTGFiZWx9LTAke21vbnRofS0ke2xhc3R9YCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcGFyYW0ucHVzaChgJHt5ZWFyTGFiZWwgKyAxfS0wJHttb250aH0tMDFgKTtcbiAgICAgICAgcGFyYW0ucHVzaChgJHt5ZWFyTGFiZWwgKyAxfS0wJHttb250aH0tJHtsYXN0fWApO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHBhcmFtLnB1c2goYCR7eWVhckxhYmVsfS0ke21vbnRofS0wMWApO1xuICAgICAgcGFyYW0ucHVzaChgJHt5ZWFyTGFiZWx9LSR7bW9udGh9LSR7bGFzdH1gKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2cocGFyYW0pO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldE5iSW52b2ljZXMoXG4gICAgICBuZXcgRGF0ZShwYXJhbVswXSksXG4gICAgICBuZXcgRGF0ZShwYXJhbVsxXSlcbiAgICApO1xuICAgIGRhdGFzLnZhbHVlLnB1c2gocmVzKTtcbiAgICBpbmQrKztcbiAgICBtb250aCsrO1xuICB9XG5cbiAgLy8gY29uc29sZS5sb2coZGF0YXMudmFsdWUpO1xuXG4gIGNoYXJ0RGF0YS52YWx1ZSA9IHtcbiAgICBsYWJlbHM6IGNoYXJ0TGFiZWxzLFxuICAgIGRhdGFzZXRzOiBbXG4gICAgICB7XG4gICAgICAgIGxhYmVsOiB0KCdob21lQ29tcG9uZW50LmJhckNoYXJ0LmRhdGFzZXRMYWJlbCcpLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZjg3OTc5JyxcbiAgICAgICAgZGF0YTogZGF0YXMudmFsdWUsXG4gICAgICB9LFxuICAgIF0sXG4gIH07XG4gIC8vIGNvbnNvbGUubG9nKGNoYXJ0RGF0YS52YWx1ZSk7XG4gIGxvYWRlZC52YWx1ZSA9IHRydWU7XG59KSgpO1xuLy8gY29uc29sZS5sb2cocHJvcHMpO1xuXG4vLyBGVU5DVElPTlNcbmFzeW5jIGZ1bmN0aW9uIGdldE5iSW52b2ljZXMoZGF0ZVN0YXJ0OiBEYXRlLCBkYXRlRW5kOiBEYXRlKSB7XG4gIGxldCByZXQgPSAwO1xuICBpZiAocGxhdGZvcm0uaXMuZGVza3RvcCl7XG4gICAgY29uc3QgaW52b2ljZXMgPSAhIXByb3BzLmludm9pY2VzRllcbiAgICAgID8gcHJvcHMuaW52b2ljZXNGWVxuICAgICAgOiBjb3VudGVyU3RvcmUuZ2V0SW52b2ljZXNGWTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gaW52b2ljZXMpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZShpbnZvaWNlc1trXS5kYXRlKTtcbiAgICAgIGlmIChkID49IGRhdGVTdGFydCAmJiBkIDw9IGRhdGVFbmQpIHJldCArPSAxO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBjb25zdCBjb3VudCA9IGF3YWl0IHByZWZzLmdldFByZWYoJ2NvdW50ZXInKTtcbiAgICBjb25zdCBpbnZvaWNlcyA9ICEhcHJvcHMuaW52b2ljZXNGWSBcbiAgICAgID8gcHJvcHMuaW52b2ljZXNGWVxuICAgICAgOiAoISFjb3VudCAmJiAhIWNvdW50Lmludm9pY2VzRlkgPyBjb3VudC5pbnZvaWNlc0ZZIDogW10pO1xuICAgIGZvciAoY29uc3QgayBpbiBpbnZvaWNlcykge1xuICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKGludm9pY2VzW2tdLmRhdGUpO1xuICAgICAgaWYgKGQgPj0gZGF0ZVN0YXJ0ICYmIGQgPD0gZGF0ZUVuZClcbiAgICAgICAgcmV0ICs9IDE7XG4gICAgfVxuICB9XG4gIC8vIGNvbnNvbGUubG9nKHJldCk7XG4gIHJldHVybiByZXQ7XG59O1xuZnVuY3Rpb24gc2FuaXRpemVRdWVyeVJlc3VsdChvYmo6IGFueSkge1xuICBsZXQgcmV0ID0gW10sIGluZCA9IDA7XG4gIC8vIGNvbnNvbGUubG9nKCdzYW5pdGl6ZVF1ZXJ5UmVzdWx0ICEnKTtcbiAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgIGNvbnN0IHByZXZJZCA9IGsgPiAwID8gb2JqW2sgLSAxXS5mYWN0dXJlSWQgOiAwO1xuICAgIGlmIChwcmV2SWQgJiYgcHJldklkICE9PSBvYmpba10uZmFjdHVyZUlkKXtcbiAgICAgIGluZCsrO1xuICAgIH1cbiAgICBpZiAoIXByZXZJZCB8fCAocHJldklkICYmIHByZXZJZCAhPT0gb2JqW2tdLmZhY3R1cmVJZCkpIHtcbiAgICAgIHJldFtpbmRdID0ge307XG4gICAgfVxuICAgIGZvciAoY29uc3QgbCBpbiBvYmpba10pIHtcbiAgICAgIGlmIChwcmV2SWQgPT09IG9ialtrXS5mYWN0dXJlSWQpIHtcbiAgICAgICAgaWYgKGwgPT09ICdjb21tYW5kZXMub3JkZXJJZCcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe29yZGVySWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsnY29tbWFuZGVzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5vcmRlcklkID09PSBvYmpba11bbF0pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7b3JkZXJJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bZm91bmRJbmRleF0ub3JkZXJJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLmNvbnRlbnVBZGRpdGlvbm5lbCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIC8vIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe2NvbnRlbnVBZGRpdGlvbm5lbDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ub3JkZXJJZCA9PT0gb2JqW2tdWydvcmRlcklkJ10pO1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5jb250ZW51QWRkaXRpb25uZWwgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bZm91bmRJbmRleF0uY29udGVudUFkZGl0aW9ubmVsID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMucHJpY2VIdCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtwcmljZUh0OiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsnY29tbWFuZGVzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5vcmRlcklkID09PSBvYmpba11bJ29yZGVySWQnXSk7XG4gICAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICAgIGlmKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5wcmljZUh0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtmb3VuZEluZGV4XS5wcmljZUh0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ2NvbW1hbmRlcy5mYWN0dXJlSWQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtmYWN0dXJlSWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydjb21tYW5kZXMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLm9yZGVySWQgPT09IG9ialtrXVsnb3JkZXJJZCddKTtcbiAgICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5mYWN0dXJlSWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW2ZvdW5kSW5kZXhdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMucGF5bWVudElkJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe3BheW1lbnRJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydwYXltZW50cyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ucGF5bWVudElkID09PSBvYmpba11bbF0pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50SWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0ucGF5bWVudElkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMuZXRhdCcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtldGF0OiBvYmpba11bbF19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ3BheW1lbnRzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5wYXltZW50SWQgPT09IG9ialtrXVsncGF5bWVudHMucGF5bWVudElkJ10pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5ldGF0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0uZXRhdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRWYWx1ZScpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50VmFsdWU6IG9ialtrXVtsXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsncGF5bWVudHMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLnBheW1lbnRJZCA9PT0gb2JqW2tdWydwYXltZW50cy5wYXltZW50SWQnXSk7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRUeXBlJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe3BheW1lbnRUeXBlOiBvYmpba11bbF19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ3BheW1lbnRzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5wYXltZW50SWQgPT09IG9ialtrXVsncGF5bWVudHMucGF5bWVudElkJ10pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50VHlwZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLnBheW1lbnRUeXBlID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMuZmFjdHVyZUlkJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe2ZhY3R1cmVJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydwYXltZW50cyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ucGF5bWVudElkID09PSBvYmpba11bJ3BheW1lbnRzLnBheW1lbnRJZCddKTtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0uZmFjdHVyZUlkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0uZmFjdHVyZUlkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChsID09PSAnbGFuZ3VlLmxhbmd1ZUlkJykge1xuICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IHJldFtpbmRdWydsYW5ndWUnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnbGFuZ3VlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddWydsYW5ndWVJZCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdsYW5ndWUubGliZWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IHJldFtpbmRdWydsYW5ndWUnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnbGFuZ3VlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddWydsaWJlbGxlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdsYW5ndWUubm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gcmV0W2luZF1bJ2xhbmd1ZSddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydsYW5ndWUnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnbGFuZ3VlJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnbGFuZ3VlJ11bJ25vbSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnZGV2aXNlLmRldmlzZUlkJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gcmV0W2luZF1bJ2RldmlzZSddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydkZXZpc2UnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnZGV2aXNlJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnZGV2aXNlJ11bJ2RldmlzZUlkJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdkZXZpc2Uuc3ltYm9sZScpe1xuICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IHJldFtpbmRdWydkZXZpc2UnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnZGV2aXNlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddWydzeW1ib2xlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdkZXZpc2UubGliZWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IHJldFtpbmRdWydkZXZpc2UnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnZGV2aXNlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddWydsaWJlbGxlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5hY3RvcklkJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydhY3RvcklkJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5jcCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnY3AnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLmVtYWlsJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydlbWFpbCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIubm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLm5vbVJ1ZScpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnbm9tUnVlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5udW1Db21tZXJjYW50Jyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnbnVtQ29tbWVyY2FudCddID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5udW1SdWUnKXtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IHJldFtpbmRdWydidXllciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydidXllciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ11bJ251bVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIucHJlbm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydwcmVub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLnRlbCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsndGVsJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5hY3RvclR5cGVJZCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnYWN0b3JUeXBlSWQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLnZpbGxlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWyd2aWxsZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLmFjdG9ySWQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnYWN0b3JJZCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLmNwJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ2NwJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIuZW1haWwnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnZW1haWwnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci5ub20nKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnbm9tJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIubm9tUnVlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ25vbVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLm51bUNvbW1lcmNhbnQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnbnVtQ29tbWVyY2FudCddID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIubnVtUnVlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ251bVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLnByZW5vbScpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWydwcmVub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci50ZWwnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsndGVsJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIuYWN0b3JUeXBlSWQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnYWN0b3JUeXBlSWQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci52aWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWyd2aWxsZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMub3JkZXJJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtvcmRlcklkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0ub3JkZXJJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ2NvbW1hbmRlcy5jb250ZW51QWRkaXRpb25uZWwnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7Y29udGVudUFkZGl0aW9ubmVsOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0uY29udGVudUFkZGl0aW9ubmVsID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXRbaW5kXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLnByaWNlSHQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7cHJpY2VIdDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCAtIDFdLnByaWNlSHQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMuZmFjdHVyZUlkJykge1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe2ZhY3R1cmVJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCAtIDFdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudElkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLmV0YXQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe2V0YXQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0uZXRhdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRWYWx1ZScpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudFZhbHVlOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRUeXBlJykge1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50VHlwZTogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50VHlwZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLmZhY3R1cmVJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7ZmFjdHVyZUlkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldFtpbmRdW2xdID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQ7XG59O1xuZnVuY3Rpb24gY2hlY2tMZWFwWWVhcih5ZWFyOiBudW1iZXIpe1xuICBsZXQgcmV0ID0gZmFsc2U7XG4gIGlmICh5ZWFyID49IDQwMCl7XG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHllYXIgLyA0KSBcbiAgICAgICYmICFOdW1iZXIuaXNJbnRlZ2VyKHllYXIgLyAxMDApXG4gICAgICAmJiAhTnVtYmVyLmlzSW50ZWdlcih5ZWFyIC8gNDAwKSl7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBlbHNlIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHllYXIgLyA0KSl7XG4gICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih5ZWFyIC8gMTAwKVxuICAgICAgICAmJiAhTnVtYmVyLmlzSW50ZWdlcih5ZWFyIC8gNDAwKSl7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoTnVtYmVyLmlzSW50ZWdlcih5ZWFyIC8gNDAwKSkge1xuICAgICAgcmV0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5mdW5jdGlvbiBoYW5kbGVPcmllbnRhdGlvbigpe1xuICAvLyBjb25zb2xlLmxvZyhzY3JlZW4ub3JpZW50YXRpb24pO1xuICBvcmllbnRhdGlvbi52YWx1ZSA9IHNjcmVlbi5vcmllbnRhdGlvbi50eXBlO1xufTtcblxuLy8gV0FUQ0hFUlNcblxuLy8gTElGRUNZQ0xFIEVWRU5UU1xuXG4vLyBPVEhFUlNcbjwvc2NyaXB0PlxuIiwiPHRlbXBsYXRlPlxuICA8ZGl2XG4gICAgOmNsYXNzPVwiY3NzQ2xhc3Nlc1wiXG4gID5cbiAgICA8ZGl2IGNsYXNzPVwiU2VuRXh0cmFib2xkLWZvbnRcIj57eyB0KFwiaG9tZUNvbXBvbmVudC5waWVDaGFydC5oZWFkaW5nXCIpIH19PC9kaXY+XG4gICAgPFBpZVxuICAgICAgdi1pZj1cImxvYWRlZFwiXG4gICAgICA6ZGF0YT1cImNoYXJ0RGF0YVwiXG4gICAgICA6c3R5bGU9XCJjaGFydFN0eWxlXCJcbiAgICAvPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG4vKmVzbGludCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55OiAnb2ZmJyovXG5pbXBvcnQgeyBQaWUgfSBmcm9tICd2dWUtY2hhcnRqcyc7XG5pbXBvcnQge1xuICBDaGFydCBhcyBDaGFydEpTLFxuICAvLyBUaXRsZSxcbiAgVG9vbHRpcCxcbiAgTGVnZW5kLFxuICBBcmNFbGVtZW50LFxuICAvLyBDYXRlZ29yeVNjYWxlLFxufSBmcm9tICdjaGFydC5qcyc7XG5DaGFydEpTLnJlZ2lzdGVyKEFyY0VsZW1lbnQsIFRvb2x0aXAsIExlZ2VuZClcbmltcG9ydCB7IHVzZUNvdW50ZXJTdG9yZSB9IGZyb20gJ3N0b3Jlcy9jb3VudGVyJztcbmltcG9ydCB7IHVzZVVzZXJTdG9yZSB9IGZyb20gJ3N0b3Jlcy91c2VyJztcbi8vIGltcG9ydCB7IENhcGFjaXRvciB9IGZyb20gJ0BjYXBhY2l0b3IvY29yZSc7XG5pbXBvcnQgeyB1c2VJMThuIH0gZnJvbSAndnVlLWkxOG4nO1xuaW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyB1c2VRdWFzYXIgfSBmcm9tICdxdWFzYXInO1xuaW1wb3J0IHsgb3BlbkRiQ29ubmVjdGlvbiwgaXNEYkNvbm5lY3Rpb25PcGVuLCBuZXdRdWVyeSB9IGZyb20gJ2NhcC9zdG9yYWdlJztcbmltcG9ydCB7IFNRTGl0ZURCQ29ubmVjdGlvbiB9IGZyb20gJ0BjYXBhY2l0b3ItY29tbXVuaXR5L3NxbGl0ZSc7XG5pbXBvcnQgeyBzZXREZWNyeXB0QXBpLCBfX1RSQU5TRk9STU9CSl9fIH0gZnJvbSAnc3JjL2dsb2JhbHMnO1xuXG4vLyBWQVJJQUJMRVNcbmludGVyZmFjZSBQaWVDaGFydFByb3BzIHtcbiAgLy8gY2hhcnRJZD86IHN0cmluZztcbiAgLy8gZGF0YXNldElkS2V5Pzogc3RyaW5nO1xuICB3aWR0aD86IG51bWJlcjtcbiAgaGVpZ2h0PzogbnVtYmVyO1xuICBjc3NDbGFzc2VzPzogc3RyaW5nO1xuICAvLyBzdHlsZXM/OiB1bmtub3c7XG4gIHBsdWdpbnM/OiBbXTtcbiAgaW52b2ljZXNGWT86IFtdIHwgbnVsbDtcbiAgZGJDb25uOiBTUUxpdGVEQkNvbm5lY3Rpb24gfCBudWxsO1xufTtcbmNvbnN0ICRxID0gdXNlUXVhc2FyKCk7XG5jb25zdCBwbGF0Zm9ybSA9ICRxLnBsYXRmb3JtO1xuY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG5jb25zdCBwcm9wcyA9IHdpdGhEZWZhdWx0cyhkZWZpbmVQcm9wczxQaWVDaGFydFByb3BzPigpLCB7XG4gIC8vIGNoYXJ0SWQ6ICdwaWUtY2hhcnQnLFxuICAvLyBkYXRhc2V0SWRLZXk6ICdsYWJlbCcsXG4gIHdpZHRoOiAyMDAsXG4gIGhlaWdodDogMjAwLFxuICBjc3NDbGFzc2VzOiAnJyxcbiAgLy8gc3R5bGVzOiAoKSA9PiAoe30pLFxuICBwbHVnaW5zOiAoKSA9PiAoW10pLFxuICBpbnZvaWNlc0ZZOiBudWxsLFxuICBkYkNvbm46IG51bGwsXG59KTtcbi8vIGNvbnN0IGNvdW50ZXIgPSByZWYobnVsbCk7XG5sZXQgcGF5U3RhdHMgPSBudWxsLCBcbiAgY2JWYWwgPSBudWxsLCBcbiAgY2FzaFZhbCA9IG51bGwsIFxuICBjaHFWYWwgPSBudWxsLCBcbiAgY2hhcnREYXRhID0gcmVmKHtcbiAgICBsYWJlbHM6IFtcbiAgICAgIHQoJ2hvbWVDb21wb25lbnQucGllQ2hhcnQuY2JMYWJlbCcpLFxuICAgICAgdCgnaG9tZUNvbXBvbmVudC5waWVDaGFydC5jYXNoTGFiZWwnKSxcbiAgICAgIHQoJ2hvbWVDb21wb25lbnQucGllQ2hhcnQuY2hxTGFiZWwnKSxcbiAgICBdLFxuICAgIGRhdGFzZXRzOiBbXG4gICAgICB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogWycjNDFCODgzJywgJyNFNDY2NTEnLCAnIzAwRDhGRiddLFxuICAgICAgICBkYXRhOiBbMCwgMCwgMF0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuY29uc3Qgb3JpZW50YXRpb24gPSByZWYobnVsbCk7XG5jb25zdCBjb21wYWN0ID0gY29tcHV0ZWQoKCkgPT4ge1xuICBsZXQgcmV0ID0gZmFsc2U7XG4gIGlmICghIW9yaWVudGF0aW9uLnZhbHVlKXtcbiAgICBpZiAob3JpZW50YXRpb24udmFsdWUgPT09ICdwb3J0cmFpdC1wcmltYXJ5JyB8fCBvcmllbnRhdGlvbi52YWx1ZSA9PT0gJ3BvcnRyYWl0LXNlY29uZGFyeScpe1xuICAgICAgcmV0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn0pO1xuY29uc3QgY2hhcnRTdHlsZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgY29uc3QgcmV0ID0ge1xuICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgIHJlc3BvbnNpdmU6IHRydWVcbiAgfTtcbiAgLy8gY29uc29sZS5sb2cocHJvcHMuaGVpZ2h0KTtcbiAgaWYgKCFjb21wYWN0LnZhbHVlKSB7XG4gICAgcmV0LnJlc3BvbnNpdmUgPSBmYWxzZTtcbiAgICByZXQuaGVpZ2h0ID0gYCR7cHJvcHMuaGVpZ2h0fXB4YDtcbiAgICByZXQud2lkdGggPSBgJHtwcm9wcy53aWR0aH1weGA7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn0pO1xuY29uc3QgbG9hZGVkID0gcmVmKGZhbHNlKTtcbi8vIGNvbnN0IG9wdGlvbnMgPSBjb21wdXRlZCgoKSA9PiB7XG4vLyAgIGNvbnN0IHJldCA9IHtcbi8vICAgICByZXNwb25zaXZlOiB0cnVlLFxuLy8gICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4vLyAgIH07XG4vLyAgIHJldHVybiByZXQ7XG4vLyB9KTtcblxubGV0IGNvdW50ZXJTdG9yZSA9IG51bGwsIHVzZXJTdG9yZSA9IG51bGwsIHByZWZzID0gbnVsbDtcblxuLy8gREVDTEFSQVRJT05TXG5pZiAocGxhdGZvcm0uaXMuZGVza3RvcCkge1xuICBjb3VudGVyU3RvcmUgPSB1c2VDb3VudGVyU3RvcmUoKTtcbiAgdXNlclN0b3JlID0gdXNlVXNlclN0b3JlKCk7IFxufVxuZWxzZSB7XG4gIG9yaWVudGF0aW9uLnZhbHVlID0gd2luZG93LnNjcmVlbi5vcmllbnRhdGlvbi50eXBlO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBoYW5kbGVPcmllbnRhdGlvbik7XG59XG5cbihhc3luYyAoKSA9PiB7XG4gIGlmIChwbGF0Zm9ybS5pcy5kZXNrdG9wKXtcbiAgICBpZighaW1wb3J0Lm1ldGEuZW52LlNTUikge1xuICAgICAgLy9hd2FpdCB1c2VyU3RvcmUucmV0cmlldmVVc2VyKDEpO1xuICAgICAgaWYgKCEhcHJvcHMuaW52b2ljZXNGWSA9PT0gZmFsc2UpXG4gICAgICAgIGF3YWl0IGNvdW50ZXJTdG9yZS5nZXRGaW5hbmNpYWxZZWFySW52b2ljZXModXNlclN0b3JlLmdldFVzZXIudXNlcklkKTtcbiAgICB9XG4gIH1cbiAgZWxzZXtcbiAgICBwcmVmcyA9IGF3YWl0IGltcG9ydCgnY2FwL3N0b3JhZ2UvcHJlZmVyZW5jZXMnKTtcbiAgICBjb25zdCB1c3IgPSBhd2FpdCBwcmVmcy5nZXRQcmVmKCd1c2VyJyk7XG4gICAgbGV0IGRhdGVTdGFydCA9IG51bGw7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBpZiAobm93LmdldE1vbnRoKCkgPCA1KSB7XG4gICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShgJHtub3cuZ2V0RnVsbFllYXIoKSAtIDF9LTA2LTAxYCk7XG4gICAgfSBcbiAgICBlbHNlIHtcbiAgICAgIGRhdGVTdGFydCA9IG5ldyBEYXRlKGAke25vdy5nZXRGdWxsWWVhcigpfS0wNi0wMWApO1xuICAgIH1cbiAgICBpZiAoISFwcm9wcy5pbnZvaWNlc0ZZID09PSBmYWxzZSl7XG4gICAgICBsZXQgaXNPcGVuID0gYXdhaXQgaXNEYkNvbm5lY3Rpb25PcGVuKHByb3BzLmRiQ29ubik7XG4gICAgICBpc09wZW4gPSAhaXNPcGVuIHx8ICEhaXNPcGVuID8gYXdhaXQgb3BlbkRiQ29ubmVjdGlvbihwcm9wcy5kYkNvbm4pIDogaXNPcGVuO1xuICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICBjb25zdCBzcWwgPSBgU0VMRUNUIFxcYGZhY3R1cmVcXGAuXFxgZmFjdHVyZUlkXFxgLCBcXGBmYWN0dXJlXFxgLlxcYGRhdGVcXGAsIFxcYGZhY3R1cmVcXGAuXFxgaW52b2ljZUhUUHJpY2VcXGAsIFxcYGZhY3R1cmVcXGAuXFxgaW52b2ljZVRUUHJpY2VcXGAsIFxcYGZhY3R1cmVcXGAuXFxgdHZhVmFsdWVcXGAsIFxcYGxhbmd1ZVxcYC5cXGBsYW5ndWVJZFxcYCBBUyBcXGBsYW5ndWUubGFuZ3VlSWRcXGAsIFxcYGxhbmd1ZVxcYC5cXGBsaWJlbGxlXFxgIEFTIFxcYGxhbmd1ZS5saWJlbGxlXFxgLCBcXGBsYW5ndWVcXGAuXFxgbm9tXFxgIEFTIFxcYGxhbmd1ZS5ub21cXGAsIFxcYGRldmlzZVxcYC5cXGBkZXZpc2VJZFxcYCBBUyBcXGBkZXZpc2UuZGV2aXNlSWRcXGAsIFxcYGRldmlzZVxcYC5cXGBzeW1ib2xlXFxgIEFTIFxcYGRldmlzZS5zeW1ib2xlXFxgLCBcXGBkZXZpc2VcXGAuXFxgbGliZWxsZVxcYCBBUyBcXGBkZXZpc2UubGliZWxsZVxcYCwgXFxgYnV5ZXJcXGAuXFxgYWN0b3JJZFxcYCBBUyBcXGBidXllci5hY3RvcklkXFxgLCBcXGBidXllclxcYC5cXGBjcFxcYCBBUyBcXGBidXllci5jcFxcYCwgXFxgYnV5ZXJcXGAuXFxgZW1haWxcXGAgQVMgXFxgYnV5ZXIuZW1haWxcXGAsIFxcYGJ1eWVyXFxgLlxcYG5vbVxcYCBBUyBcXGBidXllci5ub21cXGAsIFxcYGJ1eWVyXFxgLlxcYG5vbVJ1ZVxcYCBBUyBcXGBidXllci5ub21SdWVcXGAsIFxcYGJ1eWVyXFxgLlxcYG51bUNvbW1lcmNhbnRcXGAgQVMgXFxgYnV5ZXIubnVtQ29tbWVyY2FudFxcYCwgXFxgYnV5ZXJcXGAuXFxgbnVtUnVlXFxgIEFTIFxcYGJ1eWVyLm51bVJ1ZVxcYCwgXFxgYnV5ZXJcXGAuXFxgcHJlbm9tXFxgIEFTIFxcYGJ1eWVyLnByZW5vbVxcYCwgXFxgYnV5ZXJcXGAuXFxgdGVsXFxgIEFTIFxcYGJ1eWVyLnRlbFxcYCwgXFxgYnV5ZXJcXGAuXFxgYWN0b3JUeXBlSWRcXGAgQVMgXFxgYnV5ZXIuYWN0b3JUeXBlSWRcXGAsIFxcYGJ1eWVyXFxgLlxcYHZpbGxlXFxgIEFTIFxcYGJ1eWVyLnZpbGxlXFxgLCBcXGBzZWxsZXJcXGAuXFxgYWN0b3JJZFxcYCBBUyBcXGBzZWxsZXIuYWN0b3JJZFxcYCwgXFxgc2VsbGVyXFxgLlxcYGNwXFxgIEFTIFxcYHNlbGxlci5jcFxcYCwgXFxgc2VsbGVyXFxgLlxcYGVtYWlsXFxgIEFTIFxcYHNlbGxlci5lbWFpbFxcYCwgXFxgc2VsbGVyXFxgLlxcYG5vbVxcYCBBUyBcXGBzZWxsZXIubm9tXFxgLCBcXGBzZWxsZXJcXGAuXFxgbm9tUnVlXFxgIEFTIFxcYHNlbGxlci5ub21SdWVcXGAsIFxcYHNlbGxlclxcYC5cXGBudW1Db21tZXJjYW50XFxgIEFTIFxcYHNlbGxlci5udW1Db21tZXJjYW50XFxgLCBcXGBzZWxsZXJcXGAuXFxgbnVtUnVlXFxgIEFTIFxcYHNlbGxlci5udW1SdWVcXGAsIFxcYHNlbGxlclxcYC5cXGBwcmVub21cXGAgQVMgXFxgc2VsbGVyLnByZW5vbVxcYCwgXFxgc2VsbGVyXFxgLlxcYHRlbFxcYCBBUyBcXGBzZWxsZXIudGVsXFxgLCBcXGBzZWxsZXJcXGAuXFxgYWN0b3JUeXBlSWRcXGAgQVMgXFxgc2VsbGVyLmFjdG9yVHlwZUlkXFxgLCBcXGBzZWxsZXJcXGAuXFxgdmlsbGVcXGAgQVMgXFxgc2VsbGVyLnZpbGxlXFxgLCBcXGBwYXltZW50c1xcYC5cXGBwYXltZW50SWRcXGAgQVMgXFxgcGF5bWVudHMucGF5bWVudElkXFxgLCBcXGBwYXltZW50c1xcYC5cXGBldGF0XFxgIEFTIFxcYHBheW1lbnRzLmV0YXRcXGAsIFxcYHBheW1lbnRzXFxgLlxcYHBheW1lbnRWYWx1ZVxcYCBBUyBcXGBwYXltZW50cy5wYXltZW50VmFsdWVcXGAsIFxcYHBheW1lbnRzXFxgLlxcYHBheW1lbnRUeXBlXFxgIEFTIFxcYHBheW1lbnRzLnBheW1lbnRUeXBlXFxgLCBcXGBwYXltZW50c1xcYC5cXGBmYWN0dXJlSWRcXGAgQVMgXFxgcGF5bWVudHMuZmFjdHVyZUlkXFxgLCBzdHJmdGltZSgnJXMnLCBcXGBmYWN0dXJlXFxgLlxcYGRhdGVcXGApIEFTIFxcYGRhdGVfZm9ybWF0XFxgIEZST00gXFxgZmFjdHVyZVxcYCBBUyBcXGBmYWN0dXJlXFxgIExFRlQgT1VURVIgSk9JTiBcXGBsYW5ndWVcXGAgQVMgXFxgbGFuZ3VlXFxgIE9OIFxcYGZhY3R1cmVcXGAuXFxgbGFuZ3VhZ2VJZFxcYCA9IFxcYGxhbmd1ZVxcYC5cXGBsYW5ndWVJZFxcYCBMRUZUIE9VVEVSIEpPSU4gXFxgZGV2aXNlXFxgIEFTIFxcYGRldmlzZVxcYCBPTiBcXGBmYWN0dXJlXFxgLlxcYGRldmlzZUlkXFxgID0gXFxgZGV2aXNlXFxgLlxcYGRldmlzZUlkXFxgIExFRlQgT1VURVIgSk9JTiBcXGBwZXJzb25uZVxcYCBBUyBcXGBidXllclxcYCBPTiBcXGBmYWN0dXJlXFxgLlxcYGJ1eWVySWRcXGAgPSBcXGBidXllclxcYC5cXGBhY3RvcklkXFxgIExFRlQgT1VURVIgSk9JTiBcXGBwZXJzb25uZVxcYCBBUyBcXGBzZWxsZXJcXGAgT04gXFxgZmFjdHVyZVxcYC5cXGBzZWxsZXJJZFxcYCA9IFxcYHNlbGxlclxcYC5cXGBhY3RvcklkXFxgIExFRlQgT1VURVIgSk9JTiBcXGBwYXltZW50XFxgIEFTIFxcYHBheW1lbnRzXFxgIE9OIFxcYGZhY3R1cmVcXGAuXFxgZmFjdHVyZUlkXFxgID0gXFxgcGF5bWVudHNcXGAuXFxgZmFjdHVyZUlkXFxgIFdIRVJFIFxcYGZhY3R1cmVcXGAuXFxgYWRtaW5pc3RyYXRvcklkXFxgID0gJyR7dXNyLnVzZXIudXNlcklkfScgQU5EIFxcYGRhdGVfZm9ybWF0XFxgID4gc3RyZnRpbWUoJyVzJywgJyR7ZGF0ZVN0YXJ0LnRvSVNPU3RyaW5nKCl9JylgO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhzcWwpO1xuICAgICAgICAgIGxldCBjb3VudGVyU2VzcyA9IGF3YWl0IHByZWZzLmdldFByZWYoJ2NvdW50ZXInKTtcbiAgICAgICAgLy8gaWYgKCEhY291bnRlclNlc3MgPT09IGZhbHNlIHx8ICEhY291bnRlclNlc3MuaW52b2ljZXNGWSA9PT0gZmFsc2UgfHwgIWNvdW50ZXJTZXNzLmludm9pY2VzRlkubGVuZ3RoKXtcbiAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBhd2FpdCBuZXdRdWVyeShwcm9wcy5kYkNvbm4sIHNxbCk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2codmFsdWVzKTtcbiAgICAgICAgICBpZiAodmFsdWVzLnZhbHVlcy5sZW5ndGgpe1xuICAgICAgICAgICAgY29uc3QgaW50UmVzID0gc2FuaXRpemVRdWVyeVJlc3VsdCh2YWx1ZXMudmFsdWVzKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGludFJlcyk7XG4gICAgICAgICAgICBhd2FpdCBzZXREZWNyeXB0QXBpKCk7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBfX1RSQU5TRk9STU9CSl9fKGludFJlcyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgICAgY291bnRlclNlc3MgPSAhIWNvdW50ZXJTZXNzID8gY291bnRlclNlc3MgOiB7fTtcbiAgICAgICAgICAgIGNvdW50ZXJTZXNzLmludm9pY2VzRlkgPSByZXM7XG4gICAgICAgICAgICBhd2FpdCBwcmVmcy5zZXRQcmVmKCdjb3VudGVyJywgY291bnRlclNlc3MsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgYXdhaXQgcHJlZnMuc2V0UHJlZignbWVzc2FnZScsIHtcbiAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZXZlcml0eTogdHJ1ZSxcbiAgICAgICAgICAgICAgY29udGVudDogdCgnaG9tZUNvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX3N0YXRzJywgeyBlcnI6ICdVbmFibGUgdG8gb3BlbiBTUUxpdGUgREIgIScgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG1lc3NhZ2VzVmlzaWJpbGl0eTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHBheVN0YXRzID0gYXdhaXQgZ2V0UGF5bWVudHNTdGF0cygpO1xuICAvLyBjb25zb2xlLmxvZyhwYXlTdGF0cyk7XG4gIGlmIChwYXlTdGF0cy5hbGwgJiYgcGF5U3RhdHMuY2IpXG4gICAgY2JWYWwgPSBwYXJzZUZsb2F0KCgocGF5U3RhdHMuY2IgKiAxMDApIC8gcGF5U3RhdHMuYWxsKS50b0ZpeGVkKDApKTtcbiAgZWxzZSBjYlZhbCA9IDA7XG4gIGlmIChwYXlTdGF0cy5hbGwgJiYgcGF5U3RhdHMuY2FzaClcbiAgICBjYXNoVmFsID0gcGFyc2VGbG9hdCgoKHBheVN0YXRzLmNhc2ggKiAxMDApIC8gcGF5U3RhdHMuYWxsKS50b0ZpeGVkKDApKTtcbiAgZWxzZSBjYXNoVmFsID0gMDtcbiAgaWYgKHBheVN0YXRzLmFsbCAmJiBwYXlTdGF0cy5jaHFWYWwpXG4gICAgY2hxVmFsID0gcGFyc2VGbG9hdCgoKHBheVN0YXRzLmNocSAqIDEwMCkgLyBwYXlTdGF0cy5hbGwpLnRvRml4ZWQoMCkpO1xuICBlbHNlIGNocVZhbCA9IDA7XG5cbiAgY2hhcnREYXRhLnZhbHVlID0ge1xuICAgIGxhYmVsczogW1xuICAgICAgdCgnaG9tZUNvbXBvbmVudC5waWVDaGFydC5jYkxhYmVsJyksXG4gICAgICB0KCdob21lQ29tcG9uZW50LnBpZUNoYXJ0LmNhc2hMYWJlbCcpLFxuICAgICAgdCgnaG9tZUNvbXBvbmVudC5waWVDaGFydC5jaHFMYWJlbCcpLFxuICAgIF0sXG4gICAgZGF0YXNldHM6IFtcbiAgICAgIHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBbJyM0MUI4ODMnLCAnI0U0NjY1MScsICcjMDBEOEZGJ10sXG4gICAgICAgIGRhdGE6IFtjYlZhbCwgY2FzaFZhbCwgY2hxVmFsXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfTtcbiAgbG9hZGVkLnZhbHVlID0gdHJ1ZTtcbiAgLy8gY29uc29sZS5sb2coY2hhcnREYXRhLnZhbHVlKTtcbn0pKCk7XG5cbi8vIGNvbnN0IGRhdGEgPSB7XG4vLyBsYWJlbHM6IFsnVnVlSnMnLCAnRW1iZXJKcycsICdSZWFjdEpzJywgJ0FuZ3VsYXJKcyddLFxuLy8gICBkYXRhc2V0czogW1xuLy8gICAgIHtcbi8vICAgICAgIGJhY2tncm91bmRDb2xvcjogWycjNDFCODgzJywgJyNFNDY2NTEnLCAnIzAwRDhGRicsICcjREQxQjE2J10sXG4vLyAgICAgICBkYXRhOiBbNDAsIDIwLCA4MCwgMTBdXG4vLyAgICAgfVxuLy8gICBdXG4vLyB9O1xuXG4vLyBjb25zdCBjaGFydE9wdGlvbnMgPSB7XG4vLyAgIHJlc3BvbnNpdmU6IHRydWUsXG4vLyAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLFxuLy8gfTtcblxuLy8gRlVOQ1RJT05TXG5hc3luYyBmdW5jdGlvbiBnZXRQYXltZW50c1N0YXRzKCkge1xuICBsZXQgcmV0ID0geyBjYjogMCwgY2FzaDogMCwgY2hxOiAwLCBhbGw6IDAgfTtcbiAgaWYgKHBsYXRmb3JtLmlzLmRlc2t0b3Ape1xuICAgIGNvbnN0IGludm9pY2VzID0gISFwcm9wcy5pbnZvaWNlc0ZZXG4gICAgICA/IHByb3BzLmludm9pY2VzRllcbiAgICAgIDogY291bnRlclN0b3JlLmdldEludm9pY2VzRlk7XG4gICAgZm9yIChjb25zdCBrIGluIGludm9pY2VzKSB7XG4gICAgICBmb3IgKGNvbnN0IGwgaW4gaW52b2ljZXNba11bJ3BheW1lbnRzJ10pIHtcbiAgICAgICAgaWYgKGludm9pY2VzW2tdWydwYXltZW50cyddW2xdLmV0YXQpIHtcbiAgICAgICAgICBzd2l0Y2ggKFxuICAgICAgICAgICAgaW52b2ljZXNba11bJ3BheW1lbnRzJ11bbF0ucGF5bWVudFR5cGVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgcmV0LmNiICs9IDE7XG4gICAgICAgICAgICAgIHJldC5hbGwgKz0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJldC5jYXNoICs9IDE7XG4gICAgICAgICAgICAgIHJldC5hbGwgKz0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgIHJldC5jaHEgKz0gMTtcbiAgICAgICAgICAgICAgcmV0LmFsbCArPSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBjb25zdCBjb3VudCA9IGF3YWl0IHByZWZzLmdldFByZWYoJ2NvdW50ZXInKTtcbiAgICBjb25zdCBpbnZvaWNlcyA9ICEhcHJvcHMuaW52b2ljZXNGWVxuICAgID8gcHJvcHMuaW52b2ljZXNGWVxuICAgIDogKCEhY291bnQgJiYgISFjb3VudC5pbnZvaWNlc0ZZID8gY291bnQuaW52b2ljZXNGWSA6IFtdKTtcbiAgICAvLyBjb25zb2xlLmxvZyhwcm9wcyk7XG4gICAgLy8gY29uc29sZS5sb2cocHJvcHMuaW52b2ljZXNGWSk7XG4gICAgLy8gY29uc29sZS5sb2coaW52b2ljZXMpO1xuICAgIGZvciAoY29uc3QgayBpbiBpbnZvaWNlcykge1xuICAgICAgZm9yIChjb25zdCBsIGluIGludm9pY2VzW2tdWydwYXltZW50cyddKSB7XG4gICAgICAgIGlmIChpbnZvaWNlc1trXVsncGF5bWVudHMnXVtsXS5ldGF0KSB7XG4gICAgICAgICAgc3dpdGNoIChcbiAgICAgICAgICAgIGludm9pY2VzW2tdWydwYXltZW50cyddW2xdLnBheW1lbnRUeXBlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgIHJldC5jYiArPSAxO1xuICAgICAgICAgICAgICByZXQuYWxsICs9IDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICByZXQuY2FzaCArPSAxO1xuICAgICAgICAgICAgICByZXQuYWxsICs9IDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICByZXQuY2hxICs9IDE7XG4gICAgICAgICAgICAgIHJldC5hbGwgKz0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5mdW5jdGlvbiBzYW5pdGl6ZVF1ZXJ5UmVzdWx0KG9iajogYW55KSB7XG4gIGxldCByZXQgPSBbXSwgaW5kID0gMDtcbiAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgIGNvbnN0IHByZXZJZCA9IGsgPiAwID8gb2JqW2sgLSAxXS5mYWN0dXJlSWQgOiAwO1xuICAgIGlmIChwcmV2SWQgJiYgcHJldklkICE9PSBvYmpba10uZmFjdHVyZUlkKXtcbiAgICAgIGluZCsrO1xuICAgIH1cbiAgICBpZiAoIXByZXZJZCB8fCAocHJldklkICYmIHByZXZJZCAhPT0gb2JqW2tdLmZhY3R1cmVJZCkpIHtcbiAgICAgIHJldFtpbmRdID0ge307XG4gICAgfVxuICAgIGZvciAoY29uc3QgbCBpbiBvYmpba10pIHtcbiAgICAgIGlmIChwcmV2SWQgPT09IG9ialtrXS5mYWN0dXJlSWQpIHtcbiAgICAgICAgaWYgKGwgPT09ICdjb21tYW5kZXMub3JkZXJJZCcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe29yZGVySWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsnY29tbWFuZGVzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5vcmRlcklkID09PSBvYmpba11bbF0pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7b3JkZXJJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bZm91bmRJbmRleF0ub3JkZXJJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLmNvbnRlbnVBZGRpdGlvbm5lbCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIC8vIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe2NvbnRlbnVBZGRpdGlvbm5lbDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ub3JkZXJJZCA9PT0gb2JqW2tdWydvcmRlcklkJ10pO1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5jb250ZW51QWRkaXRpb25uZWwgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bZm91bmRJbmRleF0uY29udGVudUFkZGl0aW9ubmVsID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMucHJpY2VIdCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtwcmljZUh0OiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsnY29tbWFuZGVzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5vcmRlcklkID09PSBvYmpba11bJ29yZGVySWQnXSk7XG4gICAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICAgIGlmKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5wcmljZUh0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtmb3VuZEluZGV4XS5wcmljZUh0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ2NvbW1hbmRlcy5mYWN0dXJlSWQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtmYWN0dXJlSWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydjb21tYW5kZXMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLm9yZGVySWQgPT09IG9ialtrXVsnb3JkZXJJZCddKTtcbiAgICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5mYWN0dXJlSWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW2ZvdW5kSW5kZXhdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMucGF5bWVudElkJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe3BheW1lbnRJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydwYXltZW50cyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ucGF5bWVudElkID09PSBvYmpba11bbF0pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50SWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0ucGF5bWVudElkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMuZXRhdCcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtldGF0OiBvYmpba11bbF19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ3BheW1lbnRzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5wYXltZW50SWQgPT09IG9ialtrXVsncGF5bWVudHMucGF5bWVudElkJ10pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5ldGF0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0uZXRhdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRWYWx1ZScpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50VmFsdWU6IG9ialtrXVtsXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsncGF5bWVudHMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLnBheW1lbnRJZCA9PT0gb2JqW2tdWydwYXltZW50cy5wYXltZW50SWQnXSk7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRUeXBlJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe3BheW1lbnRUeXBlOiBvYmpba11bbF19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ3BheW1lbnRzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5wYXltZW50SWQgPT09IG9ialtrXVsncGF5bWVudHMucGF5bWVudElkJ10pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50VHlwZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLnBheW1lbnRUeXBlID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMuZmFjdHVyZUlkJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe2ZhY3R1cmVJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydwYXltZW50cyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ucGF5bWVudElkID09PSBvYmpba11bJ3BheW1lbnRzLnBheW1lbnRJZCddKTtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0uZmFjdHVyZUlkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0uZmFjdHVyZUlkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChsID09PSAnbGFuZ3VlLmxhbmd1ZUlkJykge1xuICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IHJldFtpbmRdWydsYW5ndWUnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnbGFuZ3VlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddWydsYW5ndWVJZCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdsYW5ndWUubGliZWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IHJldFtpbmRdWydsYW5ndWUnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnbGFuZ3VlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddWydsaWJlbGxlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdsYW5ndWUubm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gcmV0W2luZF1bJ2xhbmd1ZSddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydsYW5ndWUnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnbGFuZ3VlJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnbGFuZ3VlJ11bJ25vbSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnZGV2aXNlLmRldmlzZUlkJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gcmV0W2luZF1bJ2RldmlzZSddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydkZXZpc2UnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnZGV2aXNlJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnZGV2aXNlJ11bJ2RldmlzZUlkJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdkZXZpc2Uuc3ltYm9sZScpe1xuICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IHJldFtpbmRdWydkZXZpc2UnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnZGV2aXNlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddWydzeW1ib2xlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdkZXZpc2UubGliZWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IHJldFtpbmRdWydkZXZpc2UnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnZGV2aXNlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddWydsaWJlbGxlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5hY3RvcklkJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydhY3RvcklkJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5jcCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnY3AnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLmVtYWlsJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydlbWFpbCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIubm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLm5vbVJ1ZScpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnbm9tUnVlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5udW1Db21tZXJjYW50Jyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnbnVtQ29tbWVyY2FudCddID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5udW1SdWUnKXtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IHJldFtpbmRdWydidXllciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydidXllciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ11bJ251bVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIucHJlbm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydwcmVub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLnRlbCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsndGVsJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5hY3RvclR5cGVJZCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnYWN0b3JUeXBlSWQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLnZpbGxlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWyd2aWxsZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLmFjdG9ySWQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnYWN0b3JJZCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLmNwJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ2NwJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIuZW1haWwnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnZW1haWwnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci5ub20nKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnbm9tJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIubm9tUnVlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ25vbVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLm51bUNvbW1lcmNhbnQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnbnVtQ29tbWVyY2FudCddID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIubnVtUnVlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ251bVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLnByZW5vbScpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWydwcmVub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci50ZWwnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsndGVsJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIuYWN0b3JUeXBlSWQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnYWN0b3JUeXBlSWQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci52aWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWyd2aWxsZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMub3JkZXJJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtvcmRlcklkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0ub3JkZXJJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ2NvbW1hbmRlcy5jb250ZW51QWRkaXRpb25uZWwnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7Y29udGVudUFkZGl0aW9ubmVsOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0uY29udGVudUFkZGl0aW9ubmVsID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXRbaW5kXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLnByaWNlSHQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7cHJpY2VIdDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCAtIDFdLnByaWNlSHQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMuZmFjdHVyZUlkJykge1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe2ZhY3R1cmVJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCAtIDFdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudElkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLmV0YXQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe2V0YXQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0uZXRhdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRWYWx1ZScpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudFZhbHVlOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRUeXBlJykge1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50VHlwZTogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50VHlwZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLmZhY3R1cmVJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7ZmFjdHVyZUlkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldFtpbmRdW2xdID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQ7XG59O1xuZnVuY3Rpb24gaGFuZGxlT3JpZW50YXRpb24oKXtcbiAgLy8gY29uc29sZS5sb2coc2NyZWVuLm9yaWVudGF0aW9uKTtcbiAgb3JpZW50YXRpb24udmFsdWUgPSBzY3JlZW4ub3JpZW50YXRpb24udHlwZTtcbn07XG48L3NjcmlwdD5cbiIsIjx0ZW1wbGF0ZT5cbiAgPGRpdiA6Y2xhc3M9XCJjc3NDbGFzc2VzXCI+XG4gICAgPHEtdGFibGVcbiAgICAgIGZsYXRcbiAgICAgIDp0aXRsZT1cInQoJ2hvbWVDb21wb25lbnQuaG9tZVRhYmxlLmhlYWRpbmcnKVwiXG4gICAgICA6Y29sdW1ucz1cImhlYWRUYWJsZVwiXG4gICAgICA6cm93cz1cImNvbnRlbnRUYWJsZVwiXG4gICAgICA6Z3JpZD1cImNvbXBhY3RcIlxuICAgICAgOmRlbnNlPVwiIWNvbXBhY3RcIlxuICAgICAgOmhpZGUtYm90dG9tPVwidHJ1ZVwiXG4gICAgICB0aXRsZS1jbGFzcz1cIlNlbkV4dHJhYm9sZC1mb250XCJcbiAgICAgIHRhYmxlLWhlYWRlci1zdHlsZT1cInt0ZXh0LWFsaWduOiBjZW50ZXJ9XCJcbiAgICAgIHNlcGFyYXRvcj1cImhvcml6b250YWxcIj5cbiAgICAgICAgPHRlbXBsYXRlIHYtc2xvdDpib2R5PVwicHJvcG9zXCI+XG4gICAgICAgICAgPHEtdHIgOnByb3BzPVwicHJvcG9zXCI+XG4gICAgICAgICAgICA8cS10ZCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjtcIiBrZXk9XCJ0b3RhbEZpc2NhbFllYXJIVEluY29tZXNcIlxuICAgICAgICAgICAgICA6cHJvcHM9XCJwcm9wb3NcIj5cbiAgICAgICAgICAgICAge3sgcHJvcG9zLnJvdy50b3RhbEZpc2NhbFllYXJIVEluY29tZXMgfX1cbiAgICAgICAgICAgIDwvcS10ZD5cbiAgICAgICAgICAgIDxxLXRkIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyO1wiIGtleT1cInRvdGFsRmlzY2FsWWVhclRUSW5jb21lc1wiXG4gICAgICAgICAgICAgIDpwcm9wcz1cInByb3Bvc1wiPlxuICAgICAgICAgICAgICB7eyBwcm9wb3Mucm93LnRvdGFsRmlzY2FsWWVhclRUSW5jb21lcyB9fVxuICAgICAgICAgICAgPC9xLXRkPlxuICAgICAgICAgICAgPHEtdGQgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCIga2V5PVwidG90YWxGaXNjYWxZZWFyUGF5bWVudHNJbmNvbWVzXCJcbiAgICAgICAgICAgICAgOnByb3BzPVwicHJvcG9zXCI+XG4gICAgICAgICAgICAgIHt7IHByb3Bvcy5yb3cudG90YWxGaXNjYWxZZWFyUGF5bWVudHNJbmNvbWVzIH19XG4gICAgICAgICAgICA8L3EtdGQ+XG4gICAgICAgICAgICA8cS10ZCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjtcIiBrZXk9XCJ0b3RhbEZpc2NhbFllYXJQYXltZW50c092ZXJkdWVcIlxuICAgICAgICAgICAgICA6cHJvcHM9XCJwcm9wb3NcIj5cbiAgICAgICAgICAgICAge3sgcHJvcG9zLnJvdy50b3RhbEZpc2NhbFllYXJQYXltZW50c092ZXJkdWUgfX1cbiAgICAgICAgICAgIDwvcS10ZD5cbiAgICAgICAgICA8L3EtdHI+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgIDwvcS10YWJsZT5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuLyplc2xpbnQgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueTogJ29mZicqL1xuaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gJ3Z1ZS1pMThuJztcbmltcG9ydCB7IHJlZiwgd2F0Y2ggfSBmcm9tICd2dWUnO1xuLy8gaW1wb3J0IHsgQ2FwYWNpdG9yIH0gZnJvbSAnQGNhcGFjaXRvci9jb3JlJztcbmltcG9ydCB7IHVzZVVzZXJTdG9yZSB9IGZyb20gJ3N0b3Jlcy91c2VyJztcbmltcG9ydCB7IHVzZUNvdW50ZXJTdG9yZSB9IGZyb20gJ3N0b3Jlcy9jb3VudGVyJztcbmltcG9ydCB7IHVzZVNlc3Npb25TdG9yZSB9IGZyb20gJ3N0b3Jlcy9zZXNzaW9uJztcbmltcG9ydCB7IHVzZVF1YXNhciB9IGZyb20gJ3F1YXNhcic7XG5pbXBvcnQgeyBvcGVuRGJDb25uZWN0aW9uLCBpc0RiQ29ubmVjdGlvbk9wZW4sIG5ld1F1ZXJ5IH0gZnJvbSAnY2FwL3N0b3JhZ2UnO1xuaW1wb3J0IHsgU1FMaXRlREJDb25uZWN0aW9uIH0gZnJvbSAnQGNhcGFjaXRvci1jb21tdW5pdHkvc3FsaXRlJztcbmltcG9ydCB7IHNldERlY3J5cHRBcGksIF9fVFJBTlNGT1JNT0JKX18gfSBmcm9tICdzcmMvZ2xvYmFscyc7XG5cbi8vIFZBUklBQkxFU1xuaW50ZXJmYWNlIEhvbWVUYWJsZVByb3BzIHtcbiAgaGVhZFRhYmxlT2JqPzogW107XG4gIGNvbnRlbnRUYWJsZU9iaj86IFtdO1xuICBjc3NDbGFzc2VzOiBzdHJpbmc7XG4gIGludm9pY2VzRlk/OiBbXSB8IG51bGw7XG4gIGRiQ29ubjogU1FMaXRlREJDb25uZWN0aW9uIHwgbnVsbDtcbn07XG5jb25zdCAkcSA9IHVzZVF1YXNhcigpO1xuY29uc3QgcGxhdGZvcm0gPSAkcS5wbGF0Zm9ybTtcbmNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuY29uc3QgcHJvcHMgPSB3aXRoRGVmYXVsdHMoZGVmaW5lUHJvcHM8SG9tZVRhYmxlUHJvcHM+KCksIHtcbiAgY3NzQ2xhc3NlczogJycsXG4gIGludm9pY2VzRlk6IG51bGwsXG4gIGhlYWRUYWJsZU9iajogKCkgPT4gW1xuICBdLFxuICBjb250ZW50VGFibGVPYmo6ICgpID0+IChbXSksXG4gIGRiQ29ubjogbnVsbCxcbn0pO1xuY29uc3QgZGVmYXVsdEhlYWRUYWJsZU9iaiA9IFt7XG4gIG5hbWU6ICd0b3RhbEZpc2NhbFllYXJIVEluY29tZXMnLFxuICBsYWJlbDogdCgnaG9tZUNvbXBvbmVudC5oZWFkVGFibGUudG90YWxGaXNjYWxZZWFySFRJbmNvbWVzJyksXG4gIGZpZWxkOiAndG90YWxGaXNjYWxZZWFySFRJbmNvbWVzJyxcbiAgYWxpZ246ICdjZW50ZXInLFxuICBzb3J0YWJsZTogZmFsc2UsXG4gIGhlYWRlclN0eWxlOiAndGV4dC1hbGlnbjogY2VudGVyJyxcbn0sXG57XG4gIG5hbWU6ICd0b3RhbEZpc2NhbFllYXJUVEluY29tZXMnLFxuICBsYWJlbDogdCgnaG9tZUNvbXBvbmVudC5oZWFkVGFibGUudG90YWxGaXNjYWxZZWFyVFRJbmNvbWVzJyksXG4gIGZpZWxkOiAndG90YWxGaXNjYWxZZWFyVFRJbmNvbWVzJyxcbiAgYWxpZ246ICdjZW50ZXInLFxuICBzb3J0YWJsZTogZmFsc2UsXG4gIGhlYWRlclN0eWxlOiAndGV4dC1hbGlnbjogY2VudGVyJyxcbn0sXG57XG4gIG5hbWU6ICd0b3RhbEZpc2NhbFllYXJQYXltZW50c0luY29tZXMnLFxuICBsYWJlbDogdCgnaG9tZUNvbXBvbmVudC5oZWFkVGFibGUudG90YWxGaXNjYWxZZWFyUGF5bWVudHNJbmNvbWVzJyksXG4gIGZpZWxkOiAndG90YWxGaXNjYWxZZWFyUGF5bWVudHNJbmNvbWVzJyxcbiAgYWxpZ246ICdjZW50ZXInLFxuICBzb3J0YWJsZTogZmFsc2UsXG4gIGhlYWRlclN0eWxlOiAndGV4dC1hbGlnbjogY2VudGVyJyxcbn0sXG57XG4gIG5hbWU6ICd0b3RhbEZpc2NhbFllYXJQYXltZW50c092ZXJkdWUnLFxuICBsYWJlbDogdCgnaG9tZUNvbXBvbmVudC5oZWFkVGFibGUudG90YWxGaXNjYWxZZWFyUGF5bWVudHNPdmVyZHVlJyksXG4gIGZpZWxkOiAndG90YWxGaXNjYWxZZWFyUGF5bWVudHNPdmVyZHVlJyxcbiAgYWxpZ246ICdjZW50ZXInLFxuICBzb3J0YWJsZTogZmFsc2UsXG4gIGhlYWRlclN0eWxlOiAndGV4dC1hbGlnbjogY2VudGVyJyxcbn1dO1xuXG5jb25zdCBoZWFkVGFibGUgPSByZWYocHJvcHMuaGVhZFRhYmxlT2JqLmxlbmd0aCA/IHByb3BzLmhlYWRUYWJsZU9iaiA6IGRlZmF1bHRIZWFkVGFibGVPYmopO1xuY29uc3QgY29udGVudFRhYmxlID0gcmVmKHByb3BzLmNvbnRlbnRUYWJsZU9iai5sZW5ndGggPyBwcm9wcy5jb250ZW50VGFibGUgOiBbXSk7XG5jb25zdCBvcmllbnRhdGlvbiA9IHJlZihudWxsKTtcbmNvbnN0IGNvbXBhY3QgPSByZWYoZmFsc2UpO1xuXG5sZXQgdXNlclN0b3JlID0gbnVsbCwgZGV2aXNlID0gbnVsbCwgY291bnRlclN0b3JlID0gbnVsbCwgbG9jYWxlID0gbnVsbCwgc2Vzc2lvblN0b3JlID0gbnVsbCwgcHJlZnMgPSBudWxsLCBjb3VudGVyID0gbnVsbDtcblxuLy8gREVDTEFSQVRJT05TXG5pZiAocGxhdGZvcm0uaXMuZGVza3RvcCkge1xuICB1c2VyU3RvcmUgPSB1c2VVc2VyU3RvcmUoKTtcbiAgY291bnRlclN0b3JlID0gdXNlQ291bnRlclN0b3JlKCk7XG4gIHNlc3Npb25TdG9yZSA9IHVzZVNlc3Npb25TdG9yZSgpO1xuICBsb2NhbGUgPSBzZXNzaW9uU3RvcmUuZ2V0TGFuZ0Rpc3BsYXllZCAhPT0gbnVsbCA/IHNlc3Npb25TdG9yZS5nZXRMYW5nRGlzcGxheWVkLm5vbSA6ICdlbi1VUyc7XG4gIGlmICghaW1wb3J0Lm1ldGEuZW52LlNTUil7XG4gICAgKGFzeW5jKCkgPT4ge1xuICAgICAgZGV2aXNlID0gdXNlclN0b3JlLmdldFVzZXIuZGV2aXNlO1xuICAgICAgYXdhaXQgY291bnRlclN0b3JlLmdldEFsbFByaWNlcygpO1xuICAgICAgaWYgKCEhcHJvcHMuaW52b2ljZXNGWSA9PT0gZmFsc2UpXG4gICAgICAgIGF3YWl0IGNvdW50ZXJTdG9yZS5nZXRGaW5hbmNpYWxZZWFySW52b2ljZXModXNlclN0b3JlLmdldFVzZXIudXNlcklkKTtcbiAgICAgIGF3YWl0IGNvdW50ZXJTdG9yZS5nZXRGaW5hbmNpYWxZZWFyTmJJbnZvaWNlcyh1c2VyU3RvcmUuZ2V0VXNlci51c2VySWQpO1xuICAgICAgaWYgKGRldmlzZS5kZXZpc2VJZCA9PSAzKSB7XG4gICAgICAgIGNvbnRlbnRUYWJsZS52YWx1ZS5wdXNoKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICd0b3RhbEZpc2NhbFllYXJIVEluY29tZXMnOiBgJHthd2FpdCBnZXRIdEZZSSgpfSAke2RldmlzZS5zeW1ib2xlfWAsXG4gICAgICAgICAgICAndG90YWxGaXNjYWxZZWFyVFRJbmNvbWVzJzogYCR7YXdhaXQgZ2V0VHRGWUkoKX0gJHtkZXZpc2Uuc3ltYm9sZX1gLFxuICAgICAgICAgICAgJ3RvdGFsRmlzY2FsWWVhclBheW1lbnRzSW5jb21lcyc6IGAke2F3YWl0IGdldFBheUZZSSgpfSAke2RldmlzZS5zeW1ib2xlfWAsXG4gICAgICAgICAgICAndG90YWxGaXNjYWxZZWFyUGF5bWVudHNPdmVyZHVlJzogYCR7YXdhaXQgZ2V0Tm90UGF5RllJKCl9ICR7ZGV2aXNlLnN5bWJvbGV9YCxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50VGFibGUudmFsdWUucHVzaChcbiAgICAgICAgICB7XG4gICAgICAgICAgICAndG90YWxGaXNjYWxZZWFySFRJbmNvbWVzJzogYCR7ZGV2aXNlLnN5bWJvbGV9ICR7YXdhaXQgZ2V0SHRGWUkoKX1gLFxuICAgICAgICAgICAgJ3RvdGFsRmlzY2FsWWVhclRUSW5jb21lcyc6IGAke2RldmlzZS5zeW1ib2xlfSAke2F3YWl0IGdldFR0RllJKCl9YCxcbiAgICAgICAgICAgICd0b3RhbEZpc2NhbFllYXJQYXltZW50c0luY29tZXMnOiBgJHtkZXZpc2Uuc3ltYm9sZX0gJHthd2FpdCBnZXRQYXlGWUkoKX1gLFxuICAgICAgICAgICAgJ3RvdGFsRmlzY2FsWWVhclBheW1lbnRzT3ZlcmR1ZSc6IGAke2RldmlzZS5zeW1ib2xlfSAke2F3YWl0IGdldE5vdFBheUZZSSgpfWAsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pKCk7XG4gIH1cbn1cbmVsc2Uge1xuICBvcmllbnRhdGlvbi52YWx1ZSA9IHdpbmRvdy5zY3JlZW4ub3JpZW50YXRpb24udHlwZTtcbiAgaWYgKG9yaWVudGF0aW9uLnZhbHVlID09PSAncG9ydHJhaXQtcHJpbWFyeScgfHwgb3JpZW50YXRpb24udmFsdWUgPT09ICdwb3J0cmFpdC1zZWNvbmRhcnknKXtcbiAgICBjb21wYWN0LnZhbHVlID0gdHJ1ZTtcbiAgfVxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBoYW5kbGVPcmllbnRhdGlvbik7XG4gIChhc3luYygpID0+IHtcbiAgICBwcmVmcyA9IGF3YWl0IGltcG9ydCgnY2FwL3N0b3JhZ2UvcHJlZmVyZW5jZXMnKTtcbiAgICAvLyBjb25zb2xlLmxvZygnSG9tZVRhYmxlIGluaXRhbGlzYXRpb24gIScpO1xuICAgIGNvbnN0IHVzciA9IGF3YWl0IHByZWZzLmdldFByZWYoJ3VzZXInKTtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgcHJlZnMuZ2V0UHJlZignc2Vzc2lvbicpO1xuICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgcHJlZnMuZ2V0UHJlZignY291bnRlcicpO1xuICAgIGNvdW50ZXIgPSAhIWNvdW50ID8gY291bnQgOiBjb3VudGVyO1xuICAgIC8vIGNvbnNvbGUubG9nKHVzcik7XG4gICAgLy8gY29uc29sZS5sb2coc2Vzc2lvbik7XG4gICAgZGV2aXNlID0gdXNyLnVzZXIuZGV2aXNlO1xuICAgIGxvY2FsZSA9ICEhc2Vzc2lvbiAmJiAhIXNlc3Npb24ubGFuZ0Rpc3BsYXllZCA/IHNlc3Npb24ubGFuZ0Rpc3BsYXllZC5ub20gOiAnZW4tVVMnIDtcbiAgICBsZXQgZGF0ZVN0YXJ0ID0gbnVsbCwgZGF0ZVN0YXJ0TGliZWxsZSA9IG51bGw7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBpZiAobm93LmdldE1vbnRoKCkgPCA1KSB7XG4gICAgICBkYXRlU3RhcnQgPSBuZXcgRGF0ZShgJHtub3cuZ2V0RnVsbFllYXIoKSAtIDF9LTA2LTAxYCk7XG4gICAgfSBcbiAgICBlbHNlIHtcbiAgICAgIGRhdGVTdGFydCA9IG5ldyBEYXRlKGAke25vdy5nZXRGdWxsWWVhcigpfS0wNi0wMWApO1xuICAgIH1cbiAgICBkYXRlU3RhcnRMaWJlbGxlID0gZGF0ZVN0YXJ0LnRvSVNPU3RyaW5nKCk7XG4gICAgLy8gY29uc29sZS5sb2coZGF0ZVN0YXJ0TGliZWxsZSk7XG5cbiAgICBsZXQgaXNPcGVuID0gYXdhaXQgaXNEYkNvbm5lY3Rpb25PcGVuKHByb3BzLmRiQ29ubik7XG4gICAgaXNPcGVuID0gIWlzT3BlbiB8fCAhIWlzT3BlbiA/IGF3YWl0IG9wZW5EYkNvbm5lY3Rpb24ocHJvcHMuZGJDb25uKSA6IGlzT3BlbjtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBsZXQgbmV3Q291bnRlciA9IG51bGw7XG4gICAgICBsZXQgc3FsID0gJ1NFTEVDVCBcXGBzdG9ja1ByaWNlc0lkXFxgLCBcXGBldXJvXFxgLCBcXGBkb2xsYXJcXGAsIFxcYGxpdnJlXFxgIEZST00gXFxgc3RvY2tfcHJpY2VzXFxgIEFTIFxcYHN0b2NrX3ByaWNlc1xcYDsnO1xuICAgICAgbGV0IHZhbHVlcyA9IG51bGw7XG4gICAgICAvLyBjb25zb2xlLmxvZyhzcWwpO1xuICAgICAgaWYgKCEhY291bnRlciA9PT0gZmFsc2UgfHwgISFjb3VudGVyLnByaWNlcyA9PT0gZmFsc2UgfHwgIWNvdW50ZXIucHJpY2VzLmxlbmd0aCl7XG4gICAgICAgIHZhbHVlcyA9IGF3YWl0IG5ld1F1ZXJ5KHByb3BzLmRiQ29ubiwgc3FsKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2codmFsdWVzKTtcbiAgICAgICAgaWYgKCEhdmFsdWVzICYmIHZhbHVlcy52YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgbmV3Q291bnRlciA9ICEhY291bnRlciA/IGNvdW50ZXIgOiB7fTtcbiAgICAgICAgICBuZXdDb3VudGVyLnByaWNlcyA9IHZhbHVlcy52YWx1ZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbmV3Q291bnRlciA9ICEhY291bnRlciA/IGNvdW50ZXIgOiB7fTtcbiAgICAgICAgICBuZXdDb3VudGVyLnByaWNlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHByZWZzLnNldFByZWYoJ2NvdW50ZXInLCBuZXdDb3VudGVyLCBmYWxzZSk7XG4gICAgICAgIGNvdW50ZXIgPSBuZXdDb3VudGVyO1xuICAgICAgfVxuICAgICAgc3FsID0gYFNFTEVDVCBDT1VOVChcXGBmYWN0dXJlSWRcXGApIEFTIFxcYG5faW52XFxgLCBzdHJmdGltZSgnJXMnLCBcXGBmYWN0dXJlXFxgLlxcYGRhdGVcXGApIEFTIFxcYGRhdGVfZm9ybWF0XFxgIEZST00gXFxgZmFjdHVyZVxcYCBBUyBcXGBmYWN0dXJlXFxgIFdIRVJFIFxcYGZhY3R1cmVcXGAuXFxgYWRtaW5pc3RyYXRvcklkXFxgID0gJyR7dXNyLnVzZXIudXNlcklkfScgQU5EIFxcYGRhdGVfZm9ybWF0XFxgID4gc3RyZnRpbWUoJyVzJywgJyR7ZGF0ZVN0YXJ0LnRvSVNPU3RyaW5nKCl9Jyk7YDtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHNxbCk7XG4gICAgICB2YWx1ZXMgPSBhd2FpdCBuZXdRdWVyeShwcm9wcy5kYkNvbm4sIHNxbCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyh2YWx1ZXMpO1xuICAgICAgaWYgKHZhbHVlcy52YWx1ZXMubGVuZ3RoKXtcbiAgICAgICAgY29uc3QgcmVzID0gdmFsdWVzLnZhbHVlc1swXTtcbiAgICAgICAgYXdhaXQgcHJlZnMuc2V0UHJlZignY291bnRlcicsIHtcbiAgICAgICAgICAgIG5iSW52b2ljZXM6IHJlcy5uX2ludixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdQcmVmcyBzZXR0ZWQgIScpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGF3YWl0IHByZWZzLnNldFByZWYoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6IHRydWUsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHQoJ2hvbWVDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9zdGF0cycsIHsgZXJyOiAnU2VsZWN0IGNvdW50IGludm9pY2VzIGZyb20gU1FMaXRlIERCICEnIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBtZXNzYWdlc1Zpc2liaWxpdHk6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBtZXNzYWdlVmlzaWJpbGl0eS52YWx1ZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghIXByb3BzLmludm9pY2VzRlkgPT09IGZhbHNlKXtcbiAgICAgICAgc3FsID0gYFNFTEVDVCBcXGBmYWN0dXJlXFxgLlxcYGZhY3R1cmVJZFxcYCwgXFxgZmFjdHVyZVxcYC5cXGBkYXRlXFxgLCBcXGBmYWN0dXJlXFxgLlxcYGludm9pY2VIVFByaWNlXFxgLCBcXGBmYWN0dXJlXFxgLlxcYGludm9pY2VUVFByaWNlXFxgLCBcXGBmYWN0dXJlXFxgLlxcYHR2YVZhbHVlXFxgLCBcXGBsYW5ndWVcXGAuXFxgbGFuZ3VlSWRcXGAgQVMgXFxgbGFuZ3VlLmxhbmd1ZUlkXFxgLCBcXGBsYW5ndWVcXGAuXFxgbGliZWxsZVxcYCBBUyBcXGBsYW5ndWUubGliZWxsZVxcYCwgXFxgbGFuZ3VlXFxgLlxcYG5vbVxcYCBBUyBcXGBsYW5ndWUubm9tXFxgLCBcXGBkZXZpc2VcXGAuXFxgZGV2aXNlSWRcXGAgQVMgXFxgZGV2aXNlLmRldmlzZUlkXFxgLCBcXGBkZXZpc2VcXGAuXFxgc3ltYm9sZVxcYCBBUyBcXGBkZXZpc2Uuc3ltYm9sZVxcYCwgXFxgZGV2aXNlXFxgLlxcYGxpYmVsbGVcXGAgQVMgXFxgZGV2aXNlLmxpYmVsbGVcXGAsIFxcYGJ1eWVyXFxgLlxcYGFjdG9ySWRcXGAgQVMgXFxgYnV5ZXIuYWN0b3JJZFxcYCwgXFxgYnV5ZXJcXGAuXFxgY3BcXGAgQVMgXFxgYnV5ZXIuY3BcXGAsIFxcYGJ1eWVyXFxgLlxcYGVtYWlsXFxgIEFTIFxcYGJ1eWVyLmVtYWlsXFxgLCBcXGBidXllclxcYC5cXGBub21cXGAgQVMgXFxgYnV5ZXIubm9tXFxgLCBcXGBidXllclxcYC5cXGBub21SdWVcXGAgQVMgXFxgYnV5ZXIubm9tUnVlXFxgLCBcXGBidXllclxcYC5cXGBudW1Db21tZXJjYW50XFxgIEFTIFxcYGJ1eWVyLm51bUNvbW1lcmNhbnRcXGAsIFxcYGJ1eWVyXFxgLlxcYG51bVJ1ZVxcYCBBUyBcXGBidXllci5udW1SdWVcXGAsIFxcYGJ1eWVyXFxgLlxcYHByZW5vbVxcYCBBUyBcXGBidXllci5wcmVub21cXGAsIFxcYGJ1eWVyXFxgLlxcYHRlbFxcYCBBUyBcXGBidXllci50ZWxcXGAsIFxcYGJ1eWVyXFxgLlxcYGFjdG9yVHlwZUlkXFxgIEFTIFxcYGJ1eWVyLmFjdG9yVHlwZUlkXFxgLCBcXGBidXllclxcYC5cXGB2aWxsZVxcYCBBUyBcXGBidXllci52aWxsZVxcYCwgXFxgc2VsbGVyXFxgLlxcYGFjdG9ySWRcXGAgQVMgXFxgc2VsbGVyLmFjdG9ySWRcXGAsIFxcYHNlbGxlclxcYC5cXGBjcFxcYCBBUyBcXGBzZWxsZXIuY3BcXGAsIFxcYHNlbGxlclxcYC5cXGBlbWFpbFxcYCBBUyBcXGBzZWxsZXIuZW1haWxcXGAsIFxcYHNlbGxlclxcYC5cXGBub21cXGAgQVMgXFxgc2VsbGVyLm5vbVxcYCwgXFxgc2VsbGVyXFxgLlxcYG5vbVJ1ZVxcYCBBUyBcXGBzZWxsZXIubm9tUnVlXFxgLCBcXGBzZWxsZXJcXGAuXFxgbnVtQ29tbWVyY2FudFxcYCBBUyBcXGBzZWxsZXIubnVtQ29tbWVyY2FudFxcYCwgXFxgc2VsbGVyXFxgLlxcYG51bVJ1ZVxcYCBBUyBcXGBzZWxsZXIubnVtUnVlXFxgLCBcXGBzZWxsZXJcXGAuXFxgcHJlbm9tXFxgIEFTIFxcYHNlbGxlci5wcmVub21cXGAsIFxcYHNlbGxlclxcYC5cXGB0ZWxcXGAgQVMgXFxgc2VsbGVyLnRlbFxcYCwgXFxgc2VsbGVyXFxgLlxcYGFjdG9yVHlwZUlkXFxgIEFTIFxcYHNlbGxlci5hY3RvclR5cGVJZFxcYCwgXFxgc2VsbGVyXFxgLlxcYHZpbGxlXFxgIEFTIFxcYHNlbGxlci52aWxsZVxcYCwgXFxgcGF5bWVudHNcXGAuXFxgcGF5bWVudElkXFxgIEFTIFxcYHBheW1lbnRzLnBheW1lbnRJZFxcYCwgXFxgcGF5bWVudHNcXGAuXFxgZXRhdFxcYCBBUyBcXGBwYXltZW50cy5ldGF0XFxgLCBcXGBwYXltZW50c1xcYC5cXGBwYXltZW50VmFsdWVcXGAgQVMgXFxgcGF5bWVudHMucGF5bWVudFZhbHVlXFxgLCBcXGBwYXltZW50c1xcYC5cXGBwYXltZW50VHlwZVxcYCBBUyBcXGBwYXltZW50cy5wYXltZW50VHlwZVxcYCwgXFxgcGF5bWVudHNcXGAuXFxgZmFjdHVyZUlkXFxgIEFTIFxcYHBheW1lbnRzLmZhY3R1cmVJZFxcYCwgc3RyZnRpbWUoJyVzJywgXFxgZmFjdHVyZVxcYC5cXGBkYXRlXFxgKSBBUyBcXGBkYXRlX2Zvcm1hdFxcYCwgXFxgY29tbWFuZGVzXFxgLlxcYG9yZGVySWRcXGAgQVMgXFxgY29tbWFuZGVzLm9yZGVySWRcXGAsIFxcYGNvbW1hbmRlc1xcYC5cXGBjb250ZW51QWRkaXRpb25uZWxcXGAgQVMgXFxgY29tbWFuZGVzLmNvbnRlbnVBZGRpdGlvbm5lbFxcYCwgXFxgY29tbWFuZGVzXFxgLlxcYHByaWNlSHRcXGAgQVMgXFxgY29tbWFuZGVzLnByaWNlSHRcXGAsIFxcYGNvbW1hbmRlc1xcYC5cXGBmYWN0dXJlSWRcXGAgQVMgXFxgY29tbWFuZGVzLmZhY3R1cmVJZFxcYCBGUk9NIFxcYGZhY3R1cmVcXGAgQVMgXFxgZmFjdHVyZVxcYCBMRUZUIE9VVEVSIEpPSU4gXFxgbGFuZ3VlXFxgIEFTIFxcYGxhbmd1ZVxcYCBPTiBcXGBmYWN0dXJlXFxgLlxcYGxhbmd1YWdlSWRcXGAgPSBcXGBsYW5ndWVcXGAuXFxgbGFuZ3VlSWRcXGAgTEVGVCBPVVRFUiBKT0lOIFxcYGRldmlzZVxcYCBBUyBcXGBkZXZpc2VcXGAgT04gXFxgZmFjdHVyZVxcYC5cXGBkZXZpc2VJZFxcYCA9IFxcYGRldmlzZVxcYC5cXGBkZXZpc2VJZFxcYCBMRUZUIE9VVEVSIEpPSU4gXFxgcGVyc29ubmVcXGAgQVMgXFxgYnV5ZXJcXGAgT04gXFxgZmFjdHVyZVxcYC5cXGBidXllcklkXFxgID0gXFxgYnV5ZXJcXGAuXFxgYWN0b3JJZFxcYCBMRUZUIE9VVEVSIEpPSU4gXFxgcGVyc29ubmVcXGAgQVMgXFxgc2VsbGVyXFxgIE9OIFxcYGZhY3R1cmVcXGAuXFxgc2VsbGVySWRcXGAgPSBcXGBzZWxsZXJcXGAuXFxgYWN0b3JJZFxcYCBMRUZUIE9VVEVSIEpPSU4gXFxgcGF5bWVudFxcYCBBUyBcXGBwYXltZW50c1xcYCBPTiBcXGBmYWN0dXJlXFxgLlxcYGZhY3R1cmVJZFxcYCA9IFxcYHBheW1lbnRzXFxgLlxcYGZhY3R1cmVJZFxcYCBMRUZUIE9VVEVSIEpPSU4gXFxgY29tbWFuZGVcXGAgQVMgXFxgY29tbWFuZGVzXFxgIE9OIFxcYGZhY3R1cmVcXGAuXFxgZmFjdHVyZUlkXFxgID0gXFxgY29tbWFuZGVzXFxgLlxcYGZhY3R1cmVJZFxcYCBXSEVSRSBcXGBmYWN0dXJlXFxgLlxcYGFkbWluaXN0cmF0b3JJZFxcYCA9ICcke3Vzci51c2VyLnVzZXJJZH0nICBBTkQgXFxgZGF0ZV9mb3JtYXRcXGAgPiBzdHJmdGltZSgnJXMnLCAnJHtkYXRlU3RhcnRMaWJlbGxlfScpYDtcbiAgICAgICAgLy8gY29uc29sZS5sb2coc3FsKTtcbiAgICAgICAgbGV0IGNvdW50ZXJTZXNzID0gYXdhaXQgcHJlZnMuZ2V0UHJlZignY291bnRlcicpO1xuICAgICAgICB2YWx1ZXMgPSBhd2FpdCBuZXdRdWVyeShwcm9wcy5kYkNvbm4sIHNxbCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlcyk7XG4gICAgICAgIGlmICh2YWx1ZXMudmFsdWVzLmxlbmd0aCl7XG4gICAgICAgICAgY29uc3QgaW50UmVzID0gc2FuaXRpemVRdWVyeVJlc3VsdCh2YWx1ZXMudmFsdWVzKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbnRSZXMpO1xuICAgICAgICAgIGF3YWl0IHNldERlY3J5cHRBcGkoKTtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBfX1RSQU5TRk9STU9CSl9fKGludFJlcyk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICAvLyBsZXQgY291bnRlclNlc3MgPSBhd2FpdCBwcmVmcy5nZXRQcmVmKCdjb3VudGVyJyk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coY291bnRlclNlc3MpO1xuICAgICAgICAgIGNvdW50ZXJTZXNzID0gISFjb3VudGVyU2VzcyA/IGNvdW50ZXJTZXNzIDoge307XG4gICAgICAgICAgY291bnRlclNlc3MuaW52b2ljZXNGWSA9IHJlcztcbiAgICAgICAgICBhd2FpdCBwcmVmcy5zZXRQcmVmKCdjb3VudGVyJywgY291bnRlclNlc3MsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGF3YWl0IHByZWZzLnNldFByZWYoJ21lc3NhZ2UnLCB7XG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgc2V2ZXJpdHk6IHRydWUsXG4gICAgICAgICAgICBjb250ZW50OiB0KCdob21lQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfc3RhdHMnLCB7IGVycjogJ1VuYWJsZSB0byBvcGVuIFNRTGl0ZSBEQiAhJyB9KVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbWVzc2FnZXNWaXNpYmlsaXR5OiB0cnVlLFxuICAgICAgfSk7XG4gICAgICAvLyBtZXNzYWdlVmlzaWJpbGl0eS52YWx1ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGRldmlzZS5kZXZpc2VJZCA9PSAzKSB7XG4gICAgICBjb250ZW50VGFibGUudmFsdWUucHVzaChcbiAgICAgICAge1xuICAgICAgICAgICd0b3RhbEZpc2NhbFllYXJIVEluY29tZXMnOiBgJHthd2FpdCBnZXRIdEZZSSgpfSAke2RldmlzZS5zeW1ib2xlfWAsXG4gICAgICAgICAgJ3RvdGFsRmlzY2FsWWVhclRUSW5jb21lcyc6IGAke2F3YWl0IGdldFR0RllJKCl9ICR7ZGV2aXNlLnN5bWJvbGV9YCxcbiAgICAgICAgICAndG90YWxGaXNjYWxZZWFyUGF5bWVudHNJbmNvbWVzJzogYCR7YXdhaXQgZ2V0UGF5RllJKCl9ICR7ZGV2aXNlLnN5bWJvbGV9YCxcbiAgICAgICAgICAndG90YWxGaXNjYWxZZWFyUGF5bWVudHNPdmVyZHVlJzogYCR7YXdhaXQgZ2V0Tm90UGF5RllJKCl9ICR7ZGV2aXNlLnN5bWJvbGV9YCxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudFRhYmxlLnZhbHVlLnB1c2goXG4gICAgICAgIHtcbiAgICAgICAgICAndG90YWxGaXNjYWxZZWFySFRJbmNvbWVzJzogYCR7ZGV2aXNlLnN5bWJvbGV9ICR7YXdhaXQgZ2V0SHRGWUkoKX1gLFxuICAgICAgICAgICd0b3RhbEZpc2NhbFllYXJUVEluY29tZXMnOiBgJHtkZXZpc2Uuc3ltYm9sZX0gJHthd2FpdCBnZXRUdEZZSSgpfWAsXG4gICAgICAgICAgJ3RvdGFsRmlzY2FsWWVhclBheW1lbnRzSW5jb21lcyc6IGAke2RldmlzZS5zeW1ib2xlfSAke2F3YWl0IGdldFBheUZZSSgpfWAsXG4gICAgICAgICAgJ3RvdGFsRmlzY2FsWWVhclBheW1lbnRzT3ZlcmR1ZSc6IGAke2RldmlzZS5zeW1ib2xlfSAke2F3YWl0IGdldE5vdFBheUZZSSgpfWAsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdIb21ldGFibGUgdmFsdWVzICEnKTtcbiAgICAvLyBjb25zb2xlLmxvZyhjb250ZW50VGFibGUudmFsdWUpO1xuICB9KSgpO1xufVxuXG4vLyBGVU5DVElPTlNcbmFzeW5jIGZ1bmN0aW9uIGdldEh0RllJKCkge1xuICBsZXQgcmV0ID0gMC4wO1xuICBpZiAocGxhdGZvcm0uaXMuZGVza3RvcCl7XG4gICAgY29uc3QgaW52b2ljZXMgPSAhIXByb3BzLmludm9pY2VzRllcbiAgICAgID8gcHJvcHMuaW52b2ljZXNGWVxuICAgICAgOiBjb3VudGVyU3RvcmUuZ2V0SW52b2ljZXNGWTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGludm9pY2VzKTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gaW52b2ljZXMpIHtcbiAgICAgIC8vIHJldCArPSBpbnZvaWNlc1trXS5pbnZvaWNlSFRQcmljZTtcbiAgICAgIC8vIHJldCArPSBpbnZvaWNlc1trXS5pbnZvaWNlSFRQcmljZVxuICAgICAgLy8gICA/IGNvbnZlcnRBbW91bnQoaW52b2ljZXNba10uaW52b2ljZUhUUHJpY2UsIGRldmlzZS5saWJlbGxlLCBnZXRDb252ZXJ0RnVuYyhpbnZvaWNlc1trXS5kZXZpc2UubGliZWxsZSkpXG4gICAgICAvLyAgIDogMCA7XG4gICAgICBmb3IgKGNvbnN0IGwgaW4gaW52b2ljZXNba10uY29tbWFuZGVzKXtcbiAgICAgICAgLy8gY29uc29sZS5sb2coaW52b2ljZXNba10uY29tbWFuZGVzW2xdLnByaWNlSHQpO1xuICAgICAgICByZXQgKz0gaW52b2ljZXNba10uY29tbWFuZGVzW2xdLnByaWNlSHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlLCB7XG4gICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIsXG4gICAgfSkuZm9ybWF0KHJldC50b0ZpeGVkKDIpKTtcbiAgfVxuICBlbHNlIHtcbiAgICBjb25zdCBjb3VudGVyID0gYXdhaXQgcHJlZnMuZ2V0UHJlZignY291bnRlcicpO1xuICAgIGNvbnN0IGludm9pY2VzID0gISFwcm9wcy5pbnZvaWNlc0ZZIFxuICAgICAgPyBwcm9wcy5pbnZvaWNlc0ZZXG4gICAgICA6ICghIWNvdW50ZXIgJiYgISFjb3VudGVyLmludm9pY2VzRlkgPyBjb3VudGVyLmludm9pY2VzRlkgOiBbXSk7XG4gICAgZm9yIChjb25zdCBrIGluIGludm9pY2VzKSB7XG4gICAgICBmb3IgKGNvbnN0IGwgaW4gaW52b2ljZXNba10uY29tbWFuZGVzKXtcbiAgICAgICAgLy8gY29uc29sZS5sb2coaW52b2ljZXNba10uY29tbWFuZGVzW2xdKTtcbiAgICAgICAgcmV0ICs9IGludm9pY2VzW2tdLmNvbW1hbmRlc1tsXS5wcmljZUh0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSwge1xuICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLFxuICAgIH0pLmZvcm1hdChyZXQudG9GaXhlZCgyKSk7ICBcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcbmFzeW5jIGZ1bmN0aW9uIGdldFR0RllJKCkge1xuICBsZXQgcmV0ID0gMC4wO1xuICBpZiAocGxhdGZvcm0uaXMuZGVza3RvcCl7XG4gICAgY29uc3QgaW52b2ljZXMgPSAhIXByb3BzLmludm9pY2VzRllcbiAgICAgID8gcHJvcHMuaW52b2ljZXNGWVxuICAgICAgOiBjb3VudGVyU3RvcmUuZ2V0SW52b2ljZXNGWTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gaW52b2ljZXMpIHtcbiAgICAgIGZvciAoY29uc3QgbCBpbiBpbnZvaWNlc1trXS5jb21tYW5kZXMpe1xuICAgICAgICByZXQgKz0gaW52b2ljZXNba10uY29tbWFuZGVzW2xdLnByaWNlSHQgKiAoMSArIGludm9pY2VzW2tdLnR2YVZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMixcbiAgICB9KS5mb3JtYXQocmV0LnRvRml4ZWQoMikpO1xuICB9XG4gIGVsc2Uge1xuICAgIGNvbnN0IGNvdW50ZXIgPSBhd2FpdCBwcmVmcy5nZXRQcmVmKCdjb3VudGVyJyk7XG4gICAgY29uc3QgaW52b2ljZXMgPSAhIXByb3BzLmludm9pY2VzRlkgXG4gICAgICA/IHByb3BzLmludm9pY2VzRllcbiAgICAgIDogKCEhY291bnRlciAmJiAhIWNvdW50ZXIuaW52b2ljZXNGWSA/IGNvdW50ZXIuaW52b2ljZXNGWSA6IFtdKTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gaW52b2ljZXMpIHtcbiAgICAgIGZvciAoY29uc3QgbCBpbiBpbnZvaWNlc1trXS5jb21tYW5kZXMpe1xuICAgICAgICByZXQgKz0gaW52b2ljZXNba10uY29tbWFuZGVzW2xdLnByaWNlSHQgKiAoMSArIGludm9pY2VzW2tdLnR2YVZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMixcbiAgICB9KS5mb3JtYXQocmV0LnRvRml4ZWQoMikpO1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuYXN5bmMgZnVuY3Rpb24gZ2V0UGF5RllJKCkge1xuICBsZXQgcmV0ID0gMC4wO1xuICBpZiAocGxhdGZvcm0uaXMuZGVza3RvcCl7XG4gICAgY29uc3QgaW52b2ljZXMgPSAhIXByb3BzLmludm9pY2VzRllcbiAgICAgID8gcHJvcHMuaW52b2ljZXNGWVxuICAgICAgOiBjb3VudGVyU3RvcmUuZ2V0SW52b2ljZXNGWTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gaW52b2ljZXMpIHtcbiAgICAgIGZvciAoY29uc3QgbCBpbiBpbnZvaWNlc1trXVsncGF5bWVudHMnXSkge1xuICAgICAgICBpZiAoaW52b2ljZXNba11bJ3BheW1lbnRzJ11bbF0uZXRhdCA9PT0gMSkge1xuICAgICAgICAgIHJldCArPSBpbnZvaWNlc1trXVsncGF5bWVudHMnXVtsXS5wYXltZW50VmFsdWVcbiAgICAgICAgICAgID8gY29udmVydEFtb3VudChpbnZvaWNlc1trXVsncGF5bWVudHMnXVtsXS5wYXltZW50VmFsdWUsIGRldmlzZS5saWJlbGxlLCBnZXRDb252ZXJ0RnVuYyhpbnZvaWNlc1trXS5kZXZpc2UubGliZWxsZSkpXG4gICAgICAgICAgICA6IDAgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlLCB7XG4gICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIsXG4gICAgfSkuZm9ybWF0KHJldC50b0ZpeGVkKDIpKTtcbiAgfVxuICBlbHNlIHtcbiAgICBjb25zdCBjb3VudGVyID0gYXdhaXQgcHJlZnMuZ2V0UHJlZignY291bnRlcicpO1xuICAgIGNvbnN0IGludm9pY2VzID0gISFwcm9wcy5pbnZvaWNlc0ZZIFxuICAgICAgPyBwcm9wcy5pbnZvaWNlc0ZZXG4gICAgICA6ICghIWNvdW50ZXIgJiYgISFjb3VudGVyLmludm9pY2VzRlkgPyBjb3VudGVyLmludm9pY2VzRlkgOiBbXSk7XG4gICAgZm9yIChjb25zdCBrIGluIGludm9pY2VzKSB7XG4gICAgICBmb3IgKGNvbnN0IGwgaW4gaW52b2ljZXNba11bJ3BheW1lbnRzJ10pe1xuICAgICAgICBpZiAoaW52b2ljZXNba11bJ3BheW1lbnRzJ11bbF0uZXRhdCA9PT0gMSl7XG4gICAgICAgICAgcmV0ICs9IGludm9pY2VzW2tdWydwYXltZW50cyddW2xdLnBheW1lbnRWYWx1ZVxuICAgICAgICAgICAgPyBjb252ZXJ0QW1vdW50KGludm9pY2VzW2tdWydwYXltZW50cyddW2xdLnBheW1lbnRWYWx1ZSwgZGV2aXNlLmxpYmVsbGUsIGdldENvbnZlcnRGdW5jKGludm9pY2VzW2tdLmRldmlzZS5saWJlbGxlKSlcbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSwge1xuICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLFxuICAgIH0pLmZvcm1hdChyZXQudG9GaXhlZCgyKSk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5hc3luYyBmdW5jdGlvbiBnZXROb3RQYXlGWUkoKSB7XG4gIGxldCByZXQgPSAwLjA7XG4gIGlmIChwbGF0Zm9ybS5pcy5kZXNrdG9wKXtcbiAgICBjb25zdCBpbnZvaWNlcyA9ICEhcHJvcHMuaW52b2ljZXNGWVxuICAgICAgPyBwcm9wcy5pbnZvaWNlc0ZZXG4gICAgICA6IGNvdW50ZXJTdG9yZS5nZXRJbnZvaWNlc0ZZO1xuICAgIGZvciAoY29uc3QgayBpbiBpbnZvaWNlcykge1xuICAgICAgZm9yIChjb25zdCBsIGluIGludm9pY2VzW2tdWydwYXltZW50cyddKSB7XG4gICAgICAgIGlmIChpbnZvaWNlc1trXVsncGF5bWVudHMnXVtsXS5ldGF0ID09PSAwKSB7XG4gICAgICAgICAgcmV0ICs9IGludm9pY2VzW2tdWydwYXltZW50cyddW2xdLnBheW1lbnRWYWx1ZSBcbiAgICAgICAgICAgID8gY29udmVydEFtb3VudChpbnZvaWNlc1trXVsncGF5bWVudHMnXVtsXS5wYXltZW50VmFsdWUsIGRldmlzZS5saWJlbGxlLCBnZXRDb252ZXJ0RnVuYyhpbnZvaWNlc1trXS5kZXZpc2UubGliZWxsZSkpXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMixcbiAgICB9KS5mb3JtYXQocmV0LnRvRml4ZWQoMikpO1xuICB9XG4gIGVsc2Uge1xuICAgIGNvbnN0IGNvdW50ZXIgPSBhd2FpdCBwcmVmcy5nZXRQcmVmKCdjb3VudGVyJyk7XG4gICAgY29uc3QgaW52b2ljZXMgPSAhIXByb3BzLmludm9pY2VzRlkgXG4gICAgICA/IHByb3BzLmludm9pY2VzRllcbiAgICAgIDogKCEhY291bnRlciAmJiAhIWNvdW50ZXIuaW52b2ljZXNGWSA/IGNvdW50ZXIuaW52b2ljZXNGWSA6IFtdKTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gaW52b2ljZXMpIHtcbiAgICAgIGZvciAoY29uc3QgbCBpbiBpbnZvaWNlc1trXVsncGF5bWVudHMnXSl7XG4gICAgICAgIGlmIChpbnZvaWNlc1trXVsncGF5bWVudHMnXVtsXS5ldGF0ID09PSAwKXtcbiAgICAgICAgICByZXQgKz0gaW52b2ljZXNba11bJ3BheW1lbnRzJ11bbF0ucGF5bWVudFZhbHVlIFxuICAgICAgICAgICAgPyBjb252ZXJ0QW1vdW50KGludm9pY2VzW2tdWydwYXltZW50cyddW2xdLnBheW1lbnRWYWx1ZSwgZGV2aXNlLmxpYmVsbGUsIGdldENvbnZlcnRGdW5jKGludm9pY2VzW2tdLmRldmlzZS5saWJlbGxlKSlcbiAgICAgICAgICAgIDogMCA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMixcbiAgICB9KS5mb3JtYXQocmV0LnRvRml4ZWQoMikpO1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuZnVuY3Rpb24gc2FuaXRpemVRdWVyeVJlc3VsdChvYmo6IGFueSkge1xuICBsZXQgcmV0ID0gW10sIGluZCA9IDA7XG4gIC8vIGNvbnNvbGUubG9nKCdzYW5pdGl6ZVF1ZXJ5UmVzdWx0ICEnKTtcbiAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgIGNvbnN0IHByZXZJZCA9IGsgPiAwID8gb2JqW2sgLSAxXS5mYWN0dXJlSWQgOiAwO1xuICAgIGlmIChwcmV2SWQgJiYgcHJldklkICE9PSBvYmpba10uZmFjdHVyZUlkKXtcbiAgICAgIGluZCsrO1xuICAgIH1cbiAgICBpZiAoIXByZXZJZCB8fCAocHJldklkICYmIHByZXZJZCAhPT0gb2JqW2tdLmZhY3R1cmVJZCkpIHtcbiAgICAgIHJldFtpbmRdID0ge307XG4gICAgfVxuICAgIGZvciAoY29uc3QgbCBpbiBvYmpba10pIHtcbiAgICAgIGlmIChwcmV2SWQgPT09IG9ialtrXS5mYWN0dXJlSWQpIHtcbiAgICAgICAgaWYgKGwgPT09ICdjb21tYW5kZXMub3JkZXJJZCcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe29yZGVySWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsnY29tbWFuZGVzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5vcmRlcklkID09PSBvYmpba11bbF0pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7b3JkZXJJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bZm91bmRJbmRleF0ub3JkZXJJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLmNvbnRlbnVBZGRpdGlvbm5lbCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIC8vIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe2NvbnRlbnVBZGRpdGlvbm5lbDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ub3JkZXJJZCA9PT0gb2JqW2tdWydvcmRlcklkJ10pO1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5jb250ZW51QWRkaXRpb25uZWwgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bZm91bmRJbmRleF0uY29udGVudUFkZGl0aW9ubmVsID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMucHJpY2VIdCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtwcmljZUh0OiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsnY29tbWFuZGVzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5vcmRlcklkID09PSBvYmpba11bJ29yZGVySWQnXSk7XG4gICAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICAgIGlmKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5wcmljZUh0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtmb3VuZEluZGV4XS5wcmljZUh0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ2NvbW1hbmRlcy5mYWN0dXJlSWQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtmYWN0dXJlSWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydjb21tYW5kZXMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLm9yZGVySWQgPT09IG9ialtrXVsnb3JkZXJJZCddKTtcbiAgICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5mYWN0dXJlSWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW2ZvdW5kSW5kZXhdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMucGF5bWVudElkJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe3BheW1lbnRJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydwYXltZW50cyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ucGF5bWVudElkID09PSBvYmpba11bbF0pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50SWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0ucGF5bWVudElkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMuZXRhdCcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtldGF0OiBvYmpba11bbF19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ3BheW1lbnRzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5wYXltZW50SWQgPT09IG9ialtrXVsncGF5bWVudHMucGF5bWVudElkJ10pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5ldGF0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0uZXRhdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRWYWx1ZScpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50VmFsdWU6IG9ialtrXVtsXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsncGF5bWVudHMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLnBheW1lbnRJZCA9PT0gb2JqW2tdWydwYXltZW50cy5wYXltZW50SWQnXSk7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRUeXBlJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe3BheW1lbnRUeXBlOiBvYmpba11bbF19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ3BheW1lbnRzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5wYXltZW50SWQgPT09IG9ialtrXVsncGF5bWVudHMucGF5bWVudElkJ10pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50VHlwZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLnBheW1lbnRUeXBlID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAncGF5bWVudHMuZmFjdHVyZUlkJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9ialtrXVtsXSk7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZighcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe2ZhY3R1cmVJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydwYXltZW50cyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ucGF5bWVudElkID09PSBvYmpba11bJ3BheW1lbnRzLnBheW1lbnRJZCddKTtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0uZmFjdHVyZUlkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bZm91bmRJbmRleF0uZmFjdHVyZUlkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChsID09PSAnbGFuZ3VlLmxhbmd1ZUlkJykge1xuICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IHJldFtpbmRdWydsYW5ndWUnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnbGFuZ3VlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddWydsYW5ndWVJZCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdsYW5ndWUubGliZWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IHJldFtpbmRdWydsYW5ndWUnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnbGFuZ3VlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddWydsaWJlbGxlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdsYW5ndWUubm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gcmV0W2luZF1bJ2xhbmd1ZSddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydsYW5ndWUnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnbGFuZ3VlJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnbGFuZ3VlJ11bJ25vbSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnZGV2aXNlLmRldmlzZUlkJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gcmV0W2luZF1bJ2RldmlzZSddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydkZXZpc2UnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnZGV2aXNlJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnZGV2aXNlJ11bJ2RldmlzZUlkJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdkZXZpc2Uuc3ltYm9sZScpe1xuICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IHJldFtpbmRdWydkZXZpc2UnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnZGV2aXNlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddWydzeW1ib2xlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdkZXZpc2UubGliZWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IHJldFtpbmRdWydkZXZpc2UnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnZGV2aXNlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddWydsaWJlbGxlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5hY3RvcklkJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydhY3RvcklkJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5jcCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnY3AnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLmVtYWlsJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydlbWFpbCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIubm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLm5vbVJ1ZScpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnbm9tUnVlJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5udW1Db21tZXJjYW50Jyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnbnVtQ29tbWVyY2FudCddID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5udW1SdWUnKXtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IHJldFtpbmRdWydidXllciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydidXllciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ11bJ251bVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIucHJlbm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydwcmVub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLnRlbCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsndGVsJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5hY3RvclR5cGVJZCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnYWN0b3JUeXBlSWQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLnZpbGxlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWyd2aWxsZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLmFjdG9ySWQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnYWN0b3JJZCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLmNwJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ2NwJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIuZW1haWwnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnZW1haWwnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci5ub20nKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnbm9tJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIubm9tUnVlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ25vbVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLm51bUNvbW1lcmNhbnQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnbnVtQ29tbWVyY2FudCddID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIubnVtUnVlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ251bVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLnByZW5vbScpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWydwcmVub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci50ZWwnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsndGVsJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIuYWN0b3JUeXBlSWQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsnYWN0b3JUeXBlSWQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci52aWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWyd2aWxsZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMub3JkZXJJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtvcmRlcklkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0ub3JkZXJJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ2NvbW1hbmRlcy5jb250ZW51QWRkaXRpb25uZWwnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7Y29udGVudUFkZGl0aW9ubmVsOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0uY29udGVudUFkZGl0aW9ubmVsID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXRbaW5kXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLnByaWNlSHQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7cHJpY2VIdDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCAtIDFdLnByaWNlSHQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMuZmFjdHVyZUlkJykge1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe2ZhY3R1cmVJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCAtIDFdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudElkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLmV0YXQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe2V0YXQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0uZXRhdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRWYWx1ZScpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudFZhbHVlOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLnBheW1lbnRWYWx1ZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRUeXBlJykge1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50VHlwZTogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50VHlwZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ3BheW1lbnRzLmZhY3R1cmVJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7ZmFjdHVyZUlkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldFtpbmRdW2xdID0gb2JqW2tdW2xdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQ7XG59O1xuZnVuY3Rpb24gaGFuZGxlT3JpZW50YXRpb24oKXtcbiAgLy8gY29uc29sZS5sb2coc2NyZWVuLm9yaWVudGF0aW9uKTtcbiAgb3JpZW50YXRpb24udmFsdWUgPSBzY3JlZW4ub3JpZW50YXRpb24udHlwZTtcbiAgLy8gY29uc29sZS5sb2cob3JpZW50YXRpb24udmFsdWUpO1xuICBpZiAob3JpZW50YXRpb24udmFsdWUgPT09ICdwb3J0cmFpdC1wcmltYXJ5JyB8fCBvcmllbnRhdGlvbi52YWx1ZSA9PT0gJ3BvcnRyYWl0LXNlY29uZGFyeScpe1xuICAgIGNvbXBhY3QudmFsdWUgPSB0cnVlO1xuICB9XG4gIGVsc2Uge1xuICAgIGNvbXBhY3QudmFsdWUgPSBmYWxzZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGdldENvbnZlcnRGdW5jKHNyYzogc3RyaW5nKSB7XG4gIGxldCByZXQgPSB1bmRlZmluZWQ7XG4gIHN3aXRjaCAoc3JjKSB7XG4gICAgY2FzZSAnZXVybyc6XG4gICAgICByZXQgPSBmcm9tRXVyb1RvT3RoZXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdkb2xsYXInOlxuICAgICAgcmV0ID0gZnJvbURvbGxhclRvT3RoZXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdsaXZyZSc6XG4gICAgICByZXQgPSBmcm9tTGl2cmVUb090aGVyO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldCA9IGZyb21FdXJvVG9PdGhlcjtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuZnVuY3Rpb24gY29udmVydEFtb3VudCh2YWw6IG51bWJlciwgZGVzdDogc3RyaW5nLCBmdW5jOiBhbnkpIHtcbiAgcmV0dXJuIGZ1bmModmFsLCBkZXN0KTtcbn07XG5mdW5jdGlvbiBmcm9tRXVyb1RvT3RoZXIodmFsOiBudW1iZXIsIGRlc3Q6IHN0cmluZyk6IG51bWJlciB7XG4gIGxldCByZXQgPSB2YWw7XG4gIGxldCBzdG9ja19wcmljZSA9IG51bGw7XG4gIGlmIChwbGF0Zm9ybS5pcy5kZXNrdG9wKXtcbiAgICBzdG9ja19wcmljZSA9IGNvdW50ZXJTdG9yZS5nZXRFdXJvUHJpY2U7XG4gIH1cbiAgZWxzZSB7XG4gICAgc3RvY2tfcHJpY2UgPSBjb3VudGVyLnByaWNlcy5maW5kKChwOiBhbnkpID0+IHtcbiAgICAgIHJldHVybiBwLmV1cm8gPT09IDE7XG4gICAgfSk7XG4gIH1cbiAgY29uc3QgcHJvZHVpdCA9IHN0b2NrX3ByaWNlICE9PSBudWxsID8gc3RvY2tfcHJpY2UgOiBudWxsO1xuICBzd2l0Y2ggKGRlc3QpIHtcbiAgICBjYXNlICdkb2xsYXInOlxuICAgICAgcmV0ICo9IHByb2R1aXQgIT09IG51bGwgPyBwcm9kdWl0LmRvbGxhciA6IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdsaXZyZSc6XG4gICAgICByZXQgKj0gcHJvZHVpdCAhPT0gbnVsbCA/IHByb2R1aXQubGl2cmUgOiAxO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuZnVuY3Rpb24gZnJvbURvbGxhclRvT3RoZXIodmFsOiBudW1iZXIsIGRlc3Q6IHN0cmluZyk6IG51bWJlciB7XG4gIGxldCByZXQgPSB2YWwsIHN0b2NrX3ByaWNlID0gbnVsbDtcbiAgaWYgKHBsYXRmb3JtLmlzLmRlc2t0b3Ape1xuICAgIHN0b2NrX3ByaWNlID0gY291bnRlclN0b3JlLmdldERvbGxhclByaWNlO1xuICB9XG4gIGVsc2Uge1xuICAgIHN0b2NrX3ByaWNlID0gY291bnRlci5wcmljZXMuZmluZCgocDogYW55KSA9PiB7XG4gICAgICByZXR1cm4gcC5kb2xsYXIgPT09IDE7XG4gICAgfSk7XG4gIH1cbiAgY29uc3QgcHJvZHVpdCA9IHN0b2NrX3ByaWNlICE9PSBudWxsID8gc3RvY2tfcHJpY2UgOiBudWxsO1xuICBzd2l0Y2ggKGRlc3QpIHtcbiAgICBjYXNlICdldXJvJzpcbiAgICAgIHJldCAqPSBwcm9kdWl0ICE9PSBudWxsID8gcHJvZHVpdC5ldXJvIDogMTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2xpdnJlJzpcbiAgICAgIHJldCAqPSBwcm9kdWl0ICE9PSBudWxsID8gcHJvZHVpdC5saXZyZSA6IDE7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5mdW5jdGlvbiBmcm9tTGl2cmVUb090aGVyKHZhbDogbnVtYmVyLCBkZXN0OiBzdHJpbmcpOiBudW1iZXIge1xuICBsZXQgcmV0ID0gdmFsO1xuICBsZXQgc3RvY2tfcHJpY2UgPSBudWxsO1xuICBpZiAocGxhdGZvcm0uaXMuZGVza3RvcCl7XG4gICAgc3RvY2tfcHJpY2UgPSBjb3VudGVyU3RvcmUuZ2V0TGl2cmVQcmljZTtcbiAgfVxuICBlbHNlIHtcbiAgICBzdG9ja19wcmljZSA9IGNvdW50ZXIucHJpY2VzLmZpbmQoKHA6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIHAubGl2cmUgPT09IDE7XG4gICAgfSk7XG4gIH1cbiAgY29uc3QgcHJvZHVpdCA9IHN0b2NrX3ByaWNlICE9PSBudWxsID8gc3RvY2tfcHJpY2UgOiBudWxsO1xuICBzd2l0Y2ggKGRlc3QpIHtcbiAgICBjYXNlICdkb2xsYXInOlxuICAgICAgcmV0ICo9IHByb2R1aXQgIT09IG51bGwgPyBwcm9kdWl0LmRvbGxhciA6IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdldXJvJzpcbiAgICAgIHJldCAqPSBwcm9kdWl0ICE9PSBudWxsID8gcHJvZHVpdC5ldXJvIDogMTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuLy8gV0FUQ0hFUlNcbndhdGNoKFxuICAoKSA9PiBbcHJvcHMuY29udGVudFRhYmxlT2JqLCBwcm9wcy5oZWFkVGFibGVPYmpdLFxuICAoW2NvbnRlbnQsIGhlYWRdKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJ2NoYW5nZXMgIScpO1xuICAgIC8vIGNvbnNvbGUubG9nKGhlYWQpO1xuICAgIC8vIGNvbnNvbGUubG9nKGNvbnRlbnQpO1xuICAgIGhlYWRUYWJsZS52YWx1ZSA9IGhlYWQ7XG4gICAgY29udGVudFRhYmxlLnZhbHVlID0gY29udGVudDtcbiAgfVxuKTtcblxuLy8gTElGRUNZTExFIEVWRU5UU1xuPC9zY3JpcHQ+XG4iLCI8dGVtcGxhdGU+XG4gIDxxLXBhZ2UgY2xhc3M9XCJjb2x1bW4gcS1wYS1sZ1wiPlxuICAgIDxxLW5vLXNzcj5cbiAgICAgIDxtZXNzYWdlcy1pdGVtIHYtaWY9XCJtZXNzYWdlVmlzaWJpbGl0eSAmJiByZW5kZXJDb21wb25lbnRcIj48L21lc3NhZ2VzLWl0ZW0+XG4gICAgPC9xLW5vLXNzcj5cbiAgICA8ZGl2IGNsYXNzPVwicm93IGZ1bGwtd2lkdGggdGV4dC1jZW50ZXIgcS1wdC14bFwiIHYtaWY9XCIhY29tcGFjdFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbFwiPlxuICAgICAgICA8cS1pY29uIHNpemU9XCJsZ1wiIGFyaWEtaGlkZGVuPVwiZmFsc2VcIiBuYW1lPVwibWRpLXJlY2VpcHQtdGV4dFwiIGNvbG9yPVwicHJpbWFyeVwiPlxuICAgICAgICA8L3EtaWNvbj5cbiAgICAgICAgPGg1IGNsYXNzPVwidGV4dC1wcmltYXJ5XCI+XG4gICAgICAgICAge3sgbmJJbnZvaWNlcyB9fVxuICAgICAgICA8L2g1PlxuICAgICAgICA8aDYgY2xhc3M9XCJTZW5FeHRyYWJvbGQtZm9udFwiPnt7IHQoXCJob21lQ29tcG9uZW50LmxhYmVscy5pbnZvaWNlc0xhYmVsXCIpIH19PC9oNj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzPVwidnIgdnItYmx1cnJ5IHBvc2l0aW9uLWFic29sdXRlIG15LTAgaC0xMDAgZC1ub25lIGQtbWQtYmxvY2sgdG9wLTAgZW5kLTBcIlxuICAgICAgICA+PC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cImNvbFwiPlxuICAgICAgICA8cS1pY29uIHNpemU9XCJsZ1wiIGFyaWEtaGlkZGVuPVwiZmFsc2VcIiBjb2xvcj1cImRhcmtcIiBuYW1lPVwibWRpLW9yZGVyLWJvb2wtZGVzY2VuZGluZ1wiPlxuICAgICAgICA8L3EtaWNvbj5cbiAgICAgICAgPGg1IGNsYXNzPVwidGV4dC1kYXJrXCI+XG4gICAgICAgICAge3sgbmJPcmRlcnMgfX1cbiAgICAgICAgPC9oNT5cbiAgICAgICAgPGg2IGNsYXNzPVwiU2VuRXh0cmFib2xkLWZvbnRcIj57eyB0KFwiaG9tZUNvbXBvbmVudC5sYWJlbHMub3JkZXJzTGFiZWxcIikgfX08L2g2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJ2ciB2ci1ibHVycnkgcG9zaXRpb24tYWJzb2x1dGUgbXktMCBoLTEwMCBkLW5vbmUgZC1tZC1ibG9jayB0b3AtMCBlbmQtMFwiXG4gICAgICAgID48L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiY29sXCI+XG4gICAgICAgIDxxLWljb24gc2l6ZT1cImxnXCIgYXJpYS1oaWRkZW49XCJmYWxzZVwiIG5hbWU9XCJtZGktY2xpcGJvYXJkLWFjY291bnRcIiBjb2xvcj1cImFjY2VudFwiPlxuICAgICAgICA8L3EtaWNvbj5cbiAgICAgICAgPGg1IGNsYXNzPVwidGV4dC1hY2NlbnRcIj5cbiAgICAgICAgICB7eyBuYkFjdG9ycyB9fVxuICAgICAgICA8L2g1PlxuICAgICAgICA8aDYgY2xhc3M9XCJTZW5FeHRyYWJvbGQtZm9udFwiPnt7IHQoXCJob21lQ29tcG9uZW50LmxhYmVscy5hY3RvcnNMYWJlbFwiKSB9fTwvaDY+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cInZyIHZyLWJsdXJyeSBwb3NpdGlvbi1hYnNvbHV0ZSBteS0wIGgtMTAwIGQtbm9uZSBkLW1kLWJsb2NrIHRvcC0wIGVuZC0wXCJcbiAgICAgICAgPjwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2xcIj5cbiAgICAgICAgPHEtaWNvbiBzaXplPVwibGdcIiBhcmlhLWhpZGRlbj1cImZhbHNlXCIgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeVwiIG5hbWU9XCJtZGktcm9vbS1zZXJ2aWNlXCIgY29sb3I9XCJzZWNvbmRhcnlcIj5cbiAgICAgICAgPC9xLWljb24+XG4gICAgICAgIDxoNSBjbGFzcz1cInRleHQtc2Vjb25kYXJ5XCI+XG4gICAgICAgICAge3sgbmJTZXJ2aWNlcyB9fVxuICAgICAgICA8L2g1PlxuICAgICAgICA8aDYgY2xhc3M9XCJTZW5FeHRyYWJvbGQtZm9udFwiPnt7IHQoXCJob21lQ29tcG9uZW50LmxhYmVscy5zZXJ2aWNlc0xhYmVsXCIpIH19PC9oNj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImNvbHVtbiBmdWxsLXdpZHRoIHRleHQtY2VudGVyIHEtcHQteGxcIiB2LWlmPVwiY29tcGFjdFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInJvdyBxLXBiLWxnXCI+ICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbFwiPlxuICAgICAgICAgIDxxLWljb24gc2l6ZT1cImxnXCIgYXJpYS1oaWRkZW49XCJmYWxzZVwiIG5hbWU9XCJtZGktcmVjZWlwdC10ZXh0XCIgY29sb3I9XCJwcmltYXJ5XCI+XG4gICAgICAgICAgPC9xLWljb24+XG4gICAgICAgICAgPGg1IGNsYXNzPVwidGV4dC1wcmltYXJ5IHEtbXktc21cIj5cbiAgICAgICAgICAgIHt7IG5iSW52b2ljZXMgfX1cbiAgICAgICAgICA8L2g1PlxuICAgICAgICAgIDxoNiBjbGFzcz1cIlNlbkV4dHJhYm9sZC1mb250IHEtbXktbWRcIj57eyB0KFwiaG9tZUNvbXBvbmVudC5sYWJlbHMuaW52b2ljZXNMYWJlbFwiKSB9fTwvaDY+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJ2ciB2ci1ibHVycnkgcG9zaXRpb24tYWJzb2x1dGUgbXktMCBoLTEwMCBkLW5vbmUgZC1tZC1ibG9jayB0b3AtMCBlbmQtMFwiXG4gICAgICAgICAgPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sXCI+XG4gICAgICAgICAgPHEtaWNvbiBzaXplPVwibGdcIiBhcmlhLWhpZGRlbj1cImZhbHNlXCIgY29sb3I9XCJkYXJrXCIgbmFtZT1cIm1kaS1vcmRlci1ib29sLWRlc2NlbmRpbmdcIj5cbiAgICAgICAgICA8L3EtaWNvbj5cbiAgICAgICAgICA8aDUgY2xhc3M9XCJ0ZXh0LWRhcmsgcS1teS1zbVwiPlxuICAgICAgICAgICAge3sgbmJPcmRlcnMgfX1cbiAgICAgICAgICA8L2g1PlxuICAgICAgICAgIDxoNiBjbGFzcz1cIlNlbkV4dHJhYm9sZC1mb250IHEtbXktbWRcIj57eyB0KFwiaG9tZUNvbXBvbmVudC5sYWJlbHMub3JkZXJzTGFiZWxcIikgfX08L2g2PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwidnIgdnItYmx1cnJ5IHBvc2l0aW9uLWFic29sdXRlIG15LTAgaC0xMDAgZC1ub25lIGQtbWQtYmxvY2sgdG9wLTAgZW5kLTBcIlxuICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj4gXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2xcIj5cbiAgICAgICAgICA8cS1pY29uIHNpemU9XCJsZ1wiIGFyaWEtaGlkZGVuPVwiZmFsc2VcIiBuYW1lPVwibWRpLWNsaXBib2FyZC1hY2NvdW50XCIgY29sb3I9XCJhY2NlbnRcIj5cbiAgICAgICAgICA8L3EtaWNvbj5cbiAgICAgICAgICA8aDUgY2xhc3M9XCJ0ZXh0LWFjY2VudCBxLW15LXNtXCI+XG4gICAgICAgICAgICB7eyBuYkFjdG9ycyB9fVxuICAgICAgICAgIDwvaDU+XG4gICAgICAgICAgPGg2IGNsYXNzPVwiU2VuRXh0cmFib2xkLWZvbnQgcS1teS1tZFwiPnt7IHQoXCJob21lQ29tcG9uZW50LmxhYmVscy5hY3RvcnNMYWJlbFwiKSB9fTwvaDY+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJ2ciB2ci1ibHVycnkgcG9zaXRpb24tYWJzb2x1dGUgbXktMCBoLTEwMCBkLW5vbmUgZC1tZC1ibG9jayB0b3AtMCBlbmQtMFwiXG4gICAgICAgICAgPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sXCI+XG4gICAgICAgICAgPHEtaWNvbiBzaXplPVwibGdcIiBhcmlhLWhpZGRlbj1cImZhbHNlXCIgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeVwiIG5hbWU9XCJtZGktcm9vbS1zZXJ2aWNlXCIgY29sb3I9XCJzZWNvbmRhcnlcIj5cbiAgICAgICAgICA8L3EtaWNvbj5cbiAgICAgICAgICA8aDUgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeSBxLW15LXNtXCI+XG4gICAgICAgICAgICB7eyBuYlNlcnZpY2VzIH19XG4gICAgICAgICAgPC9oNT5cbiAgICAgICAgICA8aDYgY2xhc3M9XCJTZW5FeHRyYWJvbGQtZm9udCBxLW15LW1kXCI+e3sgdChcImhvbWVDb21wb25lbnQubGFiZWxzLnNlcnZpY2VzTGFiZWxcIikgfX08L2g2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGhvbWUtdGFibGVcbiAgICAgIGNzc0NsYXNzZXM9XCJxLXBhLW1kIGZ1bGwtd2lkdGhcIlxuICAgICAgOmRiQ29ubj1cImRiQ29ublwiXG4gICAgICA6aW52b2ljZXNGWT1cImludm9pY2VzXCJcbiAgICAgIHYtaWY9XCJyZW5kZXJTdGF0c1wiXG4gICAgLz5cbiAgICA8YmFyLWNoYXJ0IGNzc0NsYXNzZXM9XCJxLXBhLW1kIGZ1bGwtd2lkdGhcIiA6ZGJDb25uPVwiZGJDb25uXCIgOmludm9pY2VzRlk9XCJpbnZvaWNlc1wiXG4gICAgdi1pZj1cInJlbmRlclN0YXRzXCIvPlxuICAgIDxwaWUtY2hhcnQgY3NzQ2xhc3Nlcz1cInEtcGEtbWQgZnVsbC13aWR0aCBjb2x1bW4gZmxleCBpdGVtcy1jZW50ZXJcIiA6ZGJDb25uPVwiZGJDb25uXCIgOmludm9pY2VzRlk9XCJpbnZvaWNlc1wiXG4gICAgdi1pZj1cInJlbmRlclN0YXRzXCIvPlxuICA8L3EtcGFnZT5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG4vKmVzbGludCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55OiAnb2ZmJyovXG5pbXBvcnQgeyB1c2VNZXNzYWdlU3RvcmUgfSBmcm9tICdzdG9yZXMvbWVzc2FnZSc7XG5pbXBvcnQgeyB1c2VDb3VudGVyU3RvcmUgfSBmcm9tICdzdG9yZXMvY291bnRlcic7XG5pbXBvcnQgeyB1c2VVc2VyU3RvcmUgfSBmcm9tICdzdG9yZXMvdXNlcic7XG4vLyBpbXBvcnQgeyB1c2VTZXNzaW9uU3RvcmUgfSBmcm9tICdzdG9yZXMvc2Vzc2lvbic7XG5pbXBvcnQgTWVzc2FnZXNJdGVtIGZyb20gJ2NvbXBvbmVudHMvTWVzc2FnZXNJdGVtLnZ1ZSc7XG5pbXBvcnQgQmFyQ2hhcnQgZnJvbSAnY29tcG9uZW50cy9CYXJDaGFydC52dWUnO1xuaW1wb3J0IFBpZUNoYXJ0IGZyb20gJ2NvbXBvbmVudHMvUGllQ2hhcnQudnVlJztcbmltcG9ydCBIb21lVGFibGUgZnJvbSAnY29tcG9uZW50cy9Ib21lVGFibGUudnVlJztcbmltcG9ydCB7IHJlZiwgb25Nb3VudGVkLCB3YXRjaCwgb25CZWZvcmVNb3VudCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyB1c2VJMThuIH0gZnJvbSAndnVlLWkxOG4nO1xuaW1wb3J0IHsgdXNlUXVhc2FyIH0gZnJvbSAncXVhc2FyJztcbmltcG9ydCB7IG9wZW5EYkNvbm5lY3Rpb24sIGlzRGJDb25uZWN0aW9uT3BlbiwgbmV3UXVlcnkgfSBmcm9tICdjYXAvc3RvcmFnZSc7XG5pbXBvcnQgeyBTUUxpdGVEQkNvbm5lY3Rpb24gfSBmcm9tICdAY2FwYWNpdG9yLWNvbW11bml0eS9zcWxpdGUnO1xuaW1wb3J0IHsgc2V0RGVjcnlwdEFwaSwgX19UUkFOU0ZPUk1PQkpfXyB9IGZyb20gJ3NyYy9nbG9iYWxzJztcbi8vIGltcG9ydCB7IENhcGFjaXRvciB9IGZyb20gJ0BjYXBhY2l0b3IvY29yZSc7XG5cbi8vIFZBUklBQkxFU1xuaW50ZXJmYWNlIEluZGV4UGFnZVByb3BzIHtcbiAgZGJDb25uPzogU1FMaXRlREJDb25uZWN0aW9uIHwgbnVsbDtcbn07XG5jb25zdCBwcm9wcyA9IHdpdGhEZWZhdWx0cyhkZWZpbmVQcm9wczxJbmRleFBhZ2VQcm9wcz4oKSwge1xuICBkYkNvbm46IG51bGwsXG59KTtcbi8vIGNvbnN0IGFwcCA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuLy8gY29uc3QgcGluaWEgPSBhcHAuYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcGluaWE7XG5jb25zdCAkcSA9IHVzZVF1YXNhcigpO1xuY29uc3QgZW1pdCA9IGRlZmluZUVtaXRzKFsnY2hhbmdlLXRhYiddKTtcbmNvbnN0IHJlbmRlckNvbXBvbmVudCA9IHJlZih0cnVlKTtcbmNvbnN0IHBsYXRmb3JtID0gJHEucGxhdGZvcm07XG5jb25zdCB7IHQgfSA9IHVzZUkxOG4oeyB1c2VTY29wZTogJ2dsb2JhbCcgfSk7XG5jb25zdCBuYkludm9pY2VzID0gcmVmKDApO1xuY29uc3QgbmJPcmRlcnMgPSByZWYoMCk7XG5jb25zdCBuYkFjdG9ycyA9IHJlZigwKTtcbmNvbnN0IG5iU2VydmljZXMgPSByZWYoMCk7XG5jb25zdCBpbnZvaWNlcyA9IHJlZihudWxsKTtcbmNvbnN0IG1lc3NhZ2VWaXNpYmlsaXR5ID0gcmVmKGZhbHNlKTtcbmNvbnN0IG9yaWVudGF0aW9uID0gcmVmKG51bGwpO1xuY29uc3QgY29tcGFjdCA9IHJlZihmYWxzZSk7XG5jb25zdCByZW5kZXJTdGF0cyA9IHJlZihmYWxzZSk7XG5cbmxldCBjb3VudGVyU3RvcmUgPSBudWxsLFxuICBtZXNzYWdlU3RvcmUgPSBudWxsLCBwcmVmcyA9IG51bGwsIHVzZXJTdG9yZSA9IG51bGwsIGRhdGVTdGFydExpYmVsbGUgPSBudWxsO1xuXG4vLyBERUNMQVJBVElPTlNcbmlmIChwbGF0Zm9ybS5pcy5tb2JpbGUpIHtcbiAgb3JpZW50YXRpb24udmFsdWUgPSB3aW5kb3cuc2NyZWVuLm9yaWVudGF0aW9uLnR5cGU7XG4gIGlmIChvcmllbnRhdGlvbi52YWx1ZSA9PT0gJ3BvcnRyYWl0LXByaW1hcnknIHx8IG9yaWVudGF0aW9uLnZhbHVlID09PSAncG9ydHJhaXQtc2Vjb25kYXJ5Jyl7XG4gICAgY29tcGFjdC52YWx1ZSA9IHRydWU7XG4gIH1cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgaGFuZGxlT3JpZW50YXRpb24pO1xufVxuXG4vLyBGVU5DVElPTlNcbmZ1bmN0aW9uIHNhbml0aXplUXVlcnlSZXN1bHQob2JqOiBhbnkpIHtcbiAgbGV0IHJldCA9IFtdLCBpbmQgPSAwO1xuICAvLyBjb25zb2xlLmxvZygnc2FuaXRpemVRdWVyeVJlc3VsdCAhJyk7XG4gIGZvciAoY29uc3QgayBpbiBvYmopIHtcbiAgICBjb25zdCBwcmV2SWQgPSBrID4gMCA/IG9ialtrIC0gMV0uZmFjdHVyZUlkIDogMDtcbiAgICBpZiAocHJldklkICYmIHByZXZJZCAhPT0gb2JqW2tdLmZhY3R1cmVJZCl7XG4gICAgICBpbmQrKztcbiAgICB9XG4gICAgaWYgKCFwcmV2SWQgfHwgKHByZXZJZCAmJiBwcmV2SWQgIT09IG9ialtrXS5mYWN0dXJlSWQpKSB7XG4gICAgICByZXRbaW5kXSA9IHt9O1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGwgaW4gb2JqW2tdKSB7XG4gICAgICBpZiAocHJldklkID09PSBvYmpba10uZmFjdHVyZUlkKSB7XG4gICAgICAgIGlmIChsID09PSAnY29tbWFuZGVzLm9yZGVySWQnKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cob2JqW2tdW2xdKTtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIGlmKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpXG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtvcmRlcklkOiBvYmpba11bbF19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ub3JkZXJJZCA9PT0gb2JqW2tdW2xdKTtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe29yZGVySWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW2ZvdW5kSW5kZXhdLm9yZGVySWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ2NvbW1hbmRlcy5jb250ZW51QWRkaXRpb25uZWwnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICAvLyBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtjb250ZW51QWRkaXRpb25uZWw6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydjb21tYW5kZXMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLm9yZGVySWQgPT09IG9ialtrXVsnb3JkZXJJZCddKTtcbiAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0uY29udGVudUFkZGl0aW9ubmVsID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW2ZvdW5kSW5kZXhdLmNvbnRlbnVBZGRpdGlvbm5lbCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLnByaWNlSHQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7cHJpY2VIdDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ub3JkZXJJZCA9PT0gb2JqW2tdWydvcmRlcklkJ10pO1xuICAgICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgICAgICBpZihmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0ucHJpY2VIdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bZm91bmRJbmRleF0ucHJpY2VIdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMuZmFjdHVyZUlkJykge1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7ZmFjdHVyZUlkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsnY29tbWFuZGVzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5vcmRlcklkID09PSBvYmpba11bJ29yZGVySWQnXSk7XG4gICAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoIC0gMV0uZmFjdHVyZUlkID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXVtmb3VuZEluZGV4XS5mYWN0dXJlSWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLnBheW1lbnRJZCcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50SWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsncGF5bWVudHMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLnBheW1lbnRJZCA9PT0gb2JqW2tdW2xdKTtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudElkOiBvYmpba11bbF19KTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLnBheW1lbnRJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLmV0YXQnKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cob2JqW2tdW2xdKTtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmKCFyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7ZXRhdDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydwYXltZW50cyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ucGF5bWVudElkID09PSBvYmpba11bJ3BheW1lbnRzLnBheW1lbnRJZCddKTtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0uZXRhdCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLmV0YXQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdwYXltZW50cy5wYXltZW50VmFsdWUnKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cob2JqW2tdW2xdKTtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmKCFyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudFZhbHVlOiBvYmpba11bbF19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEluZGV4ID0gcmV0W2luZF1bJ3BheW1lbnRzJ10uZmluZEluZGV4KGVsZW0gPT4gZWxlbS5wYXltZW50SWQgPT09IG9ialtrXVsncGF5bWVudHMucGF5bWVudElkJ10pO1xuICAgICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSlcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50VmFsdWUgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtmb3VuZEluZGV4XS5wYXltZW50VmFsdWUgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdwYXltZW50cy5wYXltZW50VHlwZScpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtwYXltZW50VHlwZTogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IHJldFtpbmRdWydwYXltZW50cyddLmZpbmRJbmRleChlbGVtID0+IGVsZW0ucGF5bWVudElkID09PSBvYmpba11bJ3BheW1lbnRzLnBheW1lbnRJZCddKTtcbiAgICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpe1xuICAgICAgICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0ucGF5bWVudFR5cGUgPSBvYmpba11bbF07XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtmb3VuZEluZGV4XS5wYXltZW50VHlwZSA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3BheW1lbnRzLmZhY3R1cmVJZCcpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmpba11bbF0pO1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKVxuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtmYWN0dXJlSWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSByZXRbaW5kXVsncGF5bWVudHMnXS5maW5kSW5kZXgoZWxlbSA9PiBlbGVtLnBheW1lbnRJZCA9PT0gb2JqW2tdWydwYXltZW50cy5wYXltZW50SWQnXSk7XG4gICAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKXtcbiAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW2ZvdW5kSW5kZXhdLmZhY3R1cmVJZCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAobCA9PT0gJ2xhbmd1ZS5sYW5ndWVJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnbGFuZ3VlJ10gPSByZXRbaW5kXVsnbGFuZ3VlJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2xhbmd1ZSddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXVsnbGFuZ3VlSWQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnbGFuZ3VlLmxpYmVsbGUnKXtcbiAgICAgICAgICByZXRbaW5kXVsnbGFuZ3VlJ10gPSByZXRbaW5kXVsnbGFuZ3VlJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2xhbmd1ZSddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXVsnbGliZWxsZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnbGFuZ3VlLm5vbScpe1xuICAgICAgICAgIHJldFtpbmRdWydsYW5ndWUnXSA9IHJldFtpbmRdWydsYW5ndWUnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnbGFuZ3VlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2xhbmd1ZSddWydub20nXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2RldmlzZS5kZXZpc2VJZCcpe1xuICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IHJldFtpbmRdWydkZXZpc2UnXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnZGV2aXNlJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2RldmlzZSddWydkZXZpc2VJZCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnZGV2aXNlLnN5bWJvbGUnKXtcbiAgICAgICAgICByZXRbaW5kXVsnZGV2aXNlJ10gPSByZXRbaW5kXVsnZGV2aXNlJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2RldmlzZSddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXVsnc3ltYm9sZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnZGV2aXNlLmxpYmVsbGUnKXtcbiAgICAgICAgICByZXRbaW5kXVsnZGV2aXNlJ10gPSByZXRbaW5kXVsnZGV2aXNlJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2RldmlzZSddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydkZXZpc2UnXVsnbGliZWxsZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIuYWN0b3JJZCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnYWN0b3JJZCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIuY3AnKXtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IHJldFtpbmRdWydidXllciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydidXllciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ11bJ2NwJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5lbWFpbCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnZW1haWwnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLm5vbScpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsnbm9tJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci5ub21SdWUnKXtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IHJldFtpbmRdWydidXllciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydidXllciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ11bJ25vbVJ1ZSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIubnVtQ29tbWVyY2FudCcpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ11bJ251bUNvbW1lcmNhbnQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIubnVtUnVlJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSByZXRbaW5kXVsnYnV5ZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnYnV5ZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddWydudW1SdWUnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ2J1eWVyLnByZW5vbScpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsncHJlbm9tJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci50ZWwnKXtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IHJldFtpbmRdWydidXllciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydidXllciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ11bJ3RlbCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnYnV5ZXIuYWN0b3JUeXBlSWQnKXtcbiAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXSA9IHJldFtpbmRdWydidXllciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydidXllciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ11bJ2FjdG9yVHlwZUlkJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdidXllci52aWxsZScpe1xuICAgICAgICAgIHJldFtpbmRdWydidXllciddID0gcmV0W2luZF1bJ2J1eWVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ2J1eWVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ2J1eWVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnYnV5ZXInXVsndmlsbGUnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci5hY3RvcklkJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ2FjdG9ySWQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci5jcCcpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWydjcCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLmVtYWlsJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ2VtYWlsJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIubm9tJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ25vbSddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLm5vbVJ1ZScpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWydub21SdWUnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci5udW1Db21tZXJjYW50Jyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ251bUNvbW1lcmNhbnQnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLm51bVJ1ZScpe1xuICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IHJldFtpbmRdWydzZWxsZXInXSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXRbaW5kXVsnc2VsbGVyJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddWydudW1SdWUnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobCA9PT0gJ3NlbGxlci5wcmVub20nKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsncHJlbm9tJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIudGVsJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ3RlbCddID0gb2JqW2tdW2xdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAnc2VsbGVyLmFjdG9yVHlwZUlkJyl7XG4gICAgICAgICAgcmV0W2luZF1bJ3NlbGxlciddID0gcmV0W2luZF1bJ3NlbGxlciddID09PSB1bmRlZmluZWQgPyB7fSA6IHJldFtpbmRdWydzZWxsZXInXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ11bJ2FjdG9yVHlwZUlkJ10gPSBvYmpba11bbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGwgPT09ICdzZWxsZXIudmlsbGUnKXtcbiAgICAgICAgICByZXRbaW5kXVsnc2VsbGVyJ10gPSByZXRbaW5kXVsnc2VsbGVyJ10gPT09IHVuZGVmaW5lZCA/IHt9IDogcmV0W2luZF1bJ3NlbGxlciddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldFtpbmRdWydzZWxsZXInXVsndmlsbGUnXSA9IG9ialtrXVtsXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLm9yZGVySWQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddID0gcmV0W2luZF1bJ2NvbW1hbmRlcyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydjb21tYW5kZXMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10ucHVzaCh7b3JkZXJJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCAtIDFdLm9yZGVySWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdjb21tYW5kZXMuY29udGVudUFkZGl0aW9ubmVsJykge1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe2NvbnRlbnVBZGRpdGlvbm5lbDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ11bcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCAtIDFdLmNvbnRlbnVBZGRpdGlvbm5lbCA9IG9ialtrXVtsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0W2luZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYobCA9PT0gJ2NvbW1hbmRlcy5wcmljZUh0Jykge1xuICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXSA9IHJldFtpbmRdWydjb21tYW5kZXMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsnY29tbWFuZGVzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsnY29tbWFuZGVzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddLnB1c2goe3ByaWNlSHQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5wcmljZUh0ID0gb2JqW2tdW2xdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXRbaW5kXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihsID09PSAnY29tbWFuZGVzLmZhY3R1cmVJZCcpIHtcbiAgICAgICAgICByZXRbaW5kXVsnY29tbWFuZGVzJ10gPSByZXRbaW5kXVsnY29tbWFuZGVzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ2NvbW1hbmRlcyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ2NvbW1hbmRlcyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydjb21tYW5kZXMnXS5wdXNoKHtmYWN0dXJlSWQ6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ2NvbW1hbmRlcyddW3JldFtpbmRdWydjb21tYW5kZXMnXS5sZW5ndGggLSAxXS5mYWN0dXJlSWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdwYXltZW50cy5wYXltZW50SWQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe3BheW1lbnRJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50SWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdwYXltZW50cy5ldGF0Jykge1xuICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddID0gcmV0W2luZF1bJ3BheW1lbnRzJ10gPT09IHVuZGVmaW5lZCA/IFtdIDogcmV0W2luZF1bJ3BheW1lbnRzJ107XG4gICAgICAgICAgaWYgKG9ialtrXVtsXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGgpe1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXS5wdXNoKHtldGF0OiBvYmpba11bbF19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddW3JldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCAtIDFdLmV0YXQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdwYXltZW50cy5wYXltZW50VmFsdWUnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe3BheW1lbnRWYWx1ZTogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5wYXltZW50VmFsdWUgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdwYXltZW50cy5wYXltZW50VHlwZScpIHtcbiAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXSA9IHJldFtpbmRdWydwYXltZW50cyddID09PSB1bmRlZmluZWQgPyBbXSA6IHJldFtpbmRdWydwYXltZW50cyddO1xuICAgICAgICAgIGlmIChvYmpba11bbF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10ucHVzaCh7cGF5bWVudFR5cGU6IG9ialtrXVtsXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ11bcmV0W2luZF1bJ3BheW1lbnRzJ10ubGVuZ3RoIC0gMV0ucGF5bWVudFR5cGUgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGwgPT09ICdwYXltZW50cy5mYWN0dXJlSWQnKSB7XG4gICAgICAgICAgcmV0W2luZF1bJ3BheW1lbnRzJ10gPSByZXRbaW5kXVsncGF5bWVudHMnXSA9PT0gdW5kZWZpbmVkID8gW10gOiByZXRbaW5kXVsncGF5bWVudHMnXTtcbiAgICAgICAgICBpZiAob2JqW2tdW2xdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXJldFtpbmRdWydwYXltZW50cyddLmxlbmd0aCl7XG4gICAgICAgICAgICAgIHJldFtpbmRdWydwYXltZW50cyddLnB1c2goe2ZhY3R1cmVJZDogb2JqW2tdW2xdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXRbaW5kXVsncGF5bWVudHMnXVtyZXRbaW5kXVsncGF5bWVudHMnXS5sZW5ndGggLSAxXS5mYWN0dXJlSWQgPSBvYmpba11bbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldFtpbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXRbaW5kXVtsXSA9IG9ialtrXVtsXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufTtcbmZ1bmN0aW9uIGhhbmRsZU9yaWVudGF0aW9uKCl7XG4gIC8vIGNvbnNvbGUubG9nKHNjcmVlbi5vcmllbnRhdGlvbik7XG4gIG9yaWVudGF0aW9uLnZhbHVlID0gc2NyZWVuLm9yaWVudGF0aW9uLnR5cGU7XG59O1xuLy8gYXN5bmMgZnVuY3Rpb24gZm9yY2VNZXNzYWdlSXRlbXNSZXJlbmRlcigpIHtcbi8vICAgcmVuZGVyQ29tcG9uZW50LnZhbHVlID0gZmFsc2U7XG4vLyAgIGF3YWl0IG5leHRUaWNrKCk7XG4vLyAgIHJlbmRlckNvbXBvbmVudC52YWx1ZSA9IHRydWU7XG4vLyB9O1xuXG4vLyBXQVRDSEVSU1xud2F0Y2goXG4gIG9yaWVudGF0aW9uLFxuICAobmV3T3JpZW50YXRpb24pID0+IHtcbiAgICBpZiAoISFuZXdPcmllbnRhdGlvbikge1xuICAgICAgaWYgKG5ld09yaWVudGF0aW9uID09PSAncG9ydHJhaXQtcHJpbWFyeScgfHwgbmV3T3JpZW50YXRpb24gPT09ICdwb3J0cmFpdC1zZWNvbmRhcnknKXtcbiAgICAgICAgY29tcGFjdC52YWx1ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29tcGFjdC52YWx1ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuKVxuXG4vLyBMSUZFQ1lDTEUgRVZFTlRTXG5vbk1vdW50ZWQoKCkgPT4ge1xuICBlbWl0KCdjaGFuZ2UtdGFiJywgJ2hvbWUnKVxufSk7XG5vbkJlZm9yZU1vdW50KGFzeW5jKCkgPT4ge1xuICBpZiAocGxhdGZvcm0uaXMuZGVza3RvcCkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiU2V0dXAgIVwiKTtcbiAgICBjb3VudGVyU3RvcmUgPSB1c2VDb3VudGVyU3RvcmUoKTtcbiAgICBtZXNzYWdlU3RvcmUgPSB1c2VNZXNzYWdlU3RvcmUoKTtcbiAgICB1c2VyU3RvcmUgPSB1c2VVc2VyU3RvcmUoKTtcbiAgICBpZiAobWVzc2FnZVN0b3JlLmdldE1lc3NhZ2VzLmxlbmd0aClcbiAgICAgIG1lc3NhZ2VTdG9yZS5zZXRNZXNzYWdlc1Zpc2liaWxpdHkodHJ1ZSk7XG4gICAgbWVzc2FnZVZpc2liaWxpdHkudmFsdWUgPSBtZXNzYWdlU3RvcmUuZ2V0TWVzc2FnZXNWaXNpYmlsaXR5O1xuICAgIGlmICghaW1wb3J0Lm1ldGEuZW52LlNTUil7XG4gICAgICBhd2FpdCBjb3VudGVyU3RvcmUuZ2V0RmluYW5jaWFsWWVhckludm9pY2VzKHVzZXJTdG9yZS5nZXRVc2VyLnVzZXJJZCk7XG4gICAgICBhd2FpdCBjb3VudGVyU3RvcmUuZ2V0TmJPcmRlcnNGcm9tRGIoKTtcbiAgICAgIGF3YWl0IGNvdW50ZXJTdG9yZS5nZXROYkFjdG9yc0Zyb21EYigpO1xuICAgICAgYXdhaXQgY291bnRlclN0b3JlLmdldE5iU2VydmljZXNGcm9tRGIoKTtcbiAgICAgIGF3YWl0IGNvdW50ZXJTdG9yZS5nZXRGaW5hbmNpYWxZZWFyTmJJbnZvaWNlcyh1c2VyU3RvcmUuZ2V0VXNlci51c2VySWQpO1xuICAgICAgbmJJbnZvaWNlcy52YWx1ZSA9IGNvdW50ZXJTdG9yZS5nZXROYkludm9pY2VzO1xuICAgICAgbmJPcmRlcnMudmFsdWUgPSBjb3VudGVyU3RvcmUuZ2V0TmJPcmRlcnM7XG4gICAgICBuYkFjdG9ycy52YWx1ZSA9IGNvdW50ZXJTdG9yZS5nZXROYkFjdG9ycztcbiAgICAgIG5iU2VydmljZXMudmFsdWUgPSBjb3VudGVyU3RvcmUuZ2V0TmJTZXJ2aWNlcztcbiAgICAgIGludm9pY2VzLnZhbHVlID0gY291bnRlclN0b3JlLmdldEludm9pY2VzRlk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHByZWZzID0gYXdhaXQgaW1wb3J0KCdjYXAvc3RvcmFnZS9wcmVmZXJlbmNlcycpO1xuICAgIC8vIGNvbnNvbGUubG9nKCdHZXQgbWVzc2FnZXMgcHJlZmVyZW5jZXMgIScpO1xuICAgIGNvbnN0IG1lc3MgPSBhd2FpdCBwcmVmcy5nZXRQcmVmKCdtZXNzYWdlJyk7XG4gICAgY29uc3QgdXNyID0gYXdhaXQgcHJlZnMuZ2V0UHJlZigndXNlcicpO1xuICAgIC8vIGNvbnNvbGUubG9nKG1lc3MpO1xuICAgIC8vIGNvbnNvbGUubG9nKHVzcik7XG4gICAgLy8gY29uc29sZS5sb2coYFNldHRpbmcgbWVzc2FnZXMgIWApO1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gISFtZXNzID8gbWVzcy5tZXNzYWdlcyA6IFtdO1xuICAgIGNvbnN0IHZpcyA9ICEhbWVzcyA/IG1lc3MubWVzc2FnZXNWaXNpYmlsaXR5IDogbWVzcztcbiAgICBpZiAobWVzc2FnZXMubGVuZ3RoICYmIHZpcyA9PT0gbnVsbCkge1xuICAgICAgbWVzc2FnZVZpc2liaWxpdHkudmFsdWUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlVmlzaWJpbGl0eS52YWx1ZSA9IHZpcyAhPT0gbnVsbCA/IHZpcyA6IGZhbHNlO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhgU2V0dGluZyBkYXRlICFgKTtcbiAgICBsZXQgZGF0ZVN0YXJ0ID0gbnVsbDtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGlmIChub3cuZ2V0TW9udGgoKSA8IDUpIHtcbiAgICAgIGRhdGVTdGFydCA9IG5ldyBEYXRlKGAke25vdy5nZXRGdWxsWWVhcigpIC0gMX0tMDYtMDFgKTtcbiAgICB9IFxuICAgIGVsc2Uge1xuICAgICAgZGF0ZVN0YXJ0ID0gbmV3IERhdGUoYCR7bm93LmdldEZ1bGxZZWFyKCl9LTA2LTAxYCk7XG4gICAgfVxuICAgIGRhdGVTdGFydExpYmVsbGUgPSBkYXRlU3RhcnQudG9JU09TdHJpbmcoKTtcbiAgICAvLyBjb25zb2xlLmxvZyhgT3BlbiBEQiBDb25uZWN0aW9uICFgKTtcbiAgICBsZXQgaXNPcGVuID0gYXdhaXQgaXNEYkNvbm5lY3Rpb25PcGVuKHByb3BzLmRiQ29ubik7XG4gICAgaXNPcGVuID0gIWlzT3BlbiB8fCAhIWlzT3BlbiA/IGF3YWl0IG9wZW5EYkNvbm5lY3Rpb24ocHJvcHMuZGJDb25uKSA6IGlzT3BlbjtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBsZXQgc3FsID0gYFNFTEVDVCBDT1VOVChcXGBmYWN0dXJlSWRcXGApIEFTIFxcYG5faW52XFxgLCBzdHJmdGltZSgnJXMnLCBcXGBmYWN0dXJlXFxgLlxcYGRhdGVcXGApIEFTIFxcYGRhdGVfZm9ybWF0XFxgIEZST00gXFxgZmFjdHVyZVxcYCBBUyBcXGBmYWN0dXJlXFxgIFdIRVJFIFxcYGZhY3R1cmVcXGAuXFxgYWRtaW5pc3RyYXRvcklkXFxgID0gJyR7dXNyLnVzZXIudXNlcklkfScgQU5EIFxcYGRhdGVfZm9ybWF0XFxgID4gc3RyZnRpbWUoJyVzJywgJyR7ZGF0ZVN0YXJ0LnRvSVNPU3RyaW5nKCl9Jyk7YDtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHNxbCk7XG4gICAgICBsZXQgdmFsdWVzID0gYXdhaXQgbmV3UXVlcnkocHJvcHMuZGJDb25uLCBzcWwpO1xuICAgICAgLy8gY29uc29sZS5sb2codmFsdWVzKTtcbiAgICAgIGlmICh2YWx1ZXMudmFsdWVzLmxlbmd0aCl7XG4gICAgICAgIG5iSW52b2ljZXMudmFsdWUgPSB2YWx1ZXMudmFsdWVzWzBdLm5faW52O1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGF3YWl0IHByZWZzLnNldFByZWYoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6IHRydWUsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHQoJ2hvbWVDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9zdGF0cycsIHsgZXJyOiAnU2VsZWN0IGNvdW50IGludm9pY2VzIGZyb20gU1FMaXRlIERCICEnIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBtZXNzYWdlc1Zpc2liaWxpdHk6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBtZXNzYWdlVmlzaWJpbGl0eS52YWx1ZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHNxbCA9ICdTRUxFQ1QgQ09VTlQoXFxgb3JkZXJJZFxcYCkgQVMgXFxgbl9vcmRcXGAgRlJPTSBcXGBjb21tYW5kZVxcYCBBUyBcXGBjb21tYW5kZVxcYDsnO1xuICAgICAgdmFsdWVzID0gYXdhaXQgbmV3UXVlcnkocHJvcHMuZGJDb25uLCBzcWwpO1xuICAgICAgLy8gY29uc29sZS5sb2codmFsdWVzKTtcbiAgICAgIGlmICh2YWx1ZXMudmFsdWVzLmxlbmd0aCl7XG4gICAgICAgIG5iT3JkZXJzLnZhbHVlID0gdmFsdWVzLnZhbHVlc1swXS5uX29yZDtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBhd2FpdCBwcmVmcy5zZXRQcmVmKCdtZXNzYWdlJywge1xuICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNldmVyaXR5OiB0cnVlLFxuICAgICAgICAgICAgICBjb250ZW50OiB0KCdob21lQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfc3RhdHMnLCB7IGVycjogJ1NlbGVjdCBjb3VudCBvcmRlcnMgZnJvbSBTUUxpdGUgREIgIScgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG1lc3NhZ2VzVmlzaWJpbGl0eTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIG1lc3NhZ2VWaXNpYmlsaXR5LnZhbHVlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgc3FsID0gJ1NFTEVDVCBDT1VOVChcXGBhY3RvcklkXFxgKSBBUyBcXGBuX2FjdFxcYCBGUk9NIFxcYHBlcnNvbm5lXFxgIEFTIFxcYHBlcnNvbm5lXFxgOyc7XG4gICAgICB2YWx1ZXMgPSBhd2FpdCBuZXdRdWVyeShwcm9wcy5kYkNvbm4sIHNxbCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyh2YWx1ZXMpO1xuICAgICAgaWYgKHZhbHVlcy52YWx1ZXMubGVuZ3RoKXtcbiAgICAgICAgbmJBY3RvcnMudmFsdWUgPSB2YWx1ZXMudmFsdWVzWzBdLm5fYWN0O1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGF3YWl0IHByZWZzLnNldFByZWYoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6IHRydWUsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHQoJ2hvbWVDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9zdGF0cycsIHsgZXJyOiAnU2VsZWN0IGNvdW50IGFjdG9ycyBmcm9tIFNRTGl0ZSBEQiAhJyB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgbWVzc2FnZXNWaXNpYmlsaXR5OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgbWVzc2FnZVZpc2liaWxpdHkudmFsdWUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBzcWwgPSAnU0VMRUNUIENPVU5UKFxcYHNlcnZpY2VJZFxcYCkgQVMgXFxgbl9zcnZcXGAgRlJPTSBcXGBwcm9kdWl0c2VydmljZVxcYCBBUyBcXGBwcm9kdWl0c2VydmljZVxcYDsnO1xuICAgICAgLy8gY29uc29sZS5sb2coc3FsKTtcbiAgICAgIHZhbHVlcyA9IGF3YWl0IG5ld1F1ZXJ5KHByb3BzLmRiQ29ubiwgc3FsKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlcyk7XG4gICAgICBpZiAodmFsdWVzLnZhbHVlcy5sZW5ndGgpe1xuICAgICAgICBuYlNlcnZpY2VzLnZhbHVlID0gdmFsdWVzLnZhbHVlc1swXS5uX3NydjtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBhd2FpdCBwcmVmcy5zZXRQcmVmKCdtZXNzYWdlJywge1xuICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNldmVyaXR5OiB0cnVlLFxuICAgICAgICAgICAgICBjb250ZW50OiB0KCdob21lQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfc3RhdHMnLCB7IGVycjogJ1NlbGVjdCBjb3VudCBzZXJ2aWNlcyBmcm9tIFNRTGl0ZSBEQiAhJyB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgbWVzc2FnZXNWaXNpYmlsaXR5OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgbWVzc2FnZVZpc2liaWxpdHkudmFsdWUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBzcWwgPSBgU0VMRUNUIFxcYGZhY3R1cmVcXGAuXFxgZmFjdHVyZUlkXFxgLCBcXGBmYWN0dXJlXFxgLlxcYGRhdGVcXGAsIFxcYGZhY3R1cmVcXGAuXFxgaW52b2ljZUhUUHJpY2VcXGAsIFxcYGZhY3R1cmVcXGAuXFxgaW52b2ljZVRUUHJpY2VcXGAsIFxcYGZhY3R1cmVcXGAuXFxgdHZhVmFsdWVcXGAsIFxcYGxhbmd1ZVxcYC5cXGBsYW5ndWVJZFxcYCBBUyBcXGBsYW5ndWUubGFuZ3VlSWRcXGAsIFxcYGxhbmd1ZVxcYC5cXGBsaWJlbGxlXFxgIEFTIFxcYGxhbmd1ZS5saWJlbGxlXFxgLCBcXGBsYW5ndWVcXGAuXFxgbm9tXFxgIEFTIFxcYGxhbmd1ZS5ub21cXGAsIFxcYGRldmlzZVxcYC5cXGBkZXZpc2VJZFxcYCBBUyBcXGBkZXZpc2UuZGV2aXNlSWRcXGAsIFxcYGRldmlzZVxcYC5cXGBzeW1ib2xlXFxgIEFTIFxcYGRldmlzZS5zeW1ib2xlXFxgLCBcXGBkZXZpc2VcXGAuXFxgbGliZWxsZVxcYCBBUyBcXGBkZXZpc2UubGliZWxsZVxcYCwgXFxgYnV5ZXJcXGAuXFxgYWN0b3JJZFxcYCBBUyBcXGBidXllci5hY3RvcklkXFxgLCBcXGBidXllclxcYC5cXGBjcFxcYCBBUyBcXGBidXllci5jcFxcYCwgXFxgYnV5ZXJcXGAuXFxgZW1haWxcXGAgQVMgXFxgYnV5ZXIuZW1haWxcXGAsIFxcYGJ1eWVyXFxgLlxcYG5vbVxcYCBBUyBcXGBidXllci5ub21cXGAsIFxcYGJ1eWVyXFxgLlxcYG5vbVJ1ZVxcYCBBUyBcXGBidXllci5ub21SdWVcXGAsIFxcYGJ1eWVyXFxgLlxcYG51bUNvbW1lcmNhbnRcXGAgQVMgXFxgYnV5ZXIubnVtQ29tbWVyY2FudFxcYCwgXFxgYnV5ZXJcXGAuXFxgbnVtUnVlXFxgIEFTIFxcYGJ1eWVyLm51bVJ1ZVxcYCwgXFxgYnV5ZXJcXGAuXFxgcHJlbm9tXFxgIEFTIFxcYGJ1eWVyLnByZW5vbVxcYCwgXFxgYnV5ZXJcXGAuXFxgdGVsXFxgIEFTIFxcYGJ1eWVyLnRlbFxcYCwgXFxgYnV5ZXJcXGAuXFxgYWN0b3JUeXBlSWRcXGAgQVMgXFxgYnV5ZXIuYWN0b3JUeXBlSWRcXGAsIFxcYGJ1eWVyXFxgLlxcYHZpbGxlXFxgIEFTIFxcYGJ1eWVyLnZpbGxlXFxgLCBcXGBzZWxsZXJcXGAuXFxgYWN0b3JJZFxcYCBBUyBcXGBzZWxsZXIuYWN0b3JJZFxcYCwgXFxgc2VsbGVyXFxgLlxcYGNwXFxgIEFTIFxcYHNlbGxlci5jcFxcYCwgXFxgc2VsbGVyXFxgLlxcYGVtYWlsXFxgIEFTIFxcYHNlbGxlci5lbWFpbFxcYCwgXFxgc2VsbGVyXFxgLlxcYG5vbVxcYCBBUyBcXGBzZWxsZXIubm9tXFxgLCBcXGBzZWxsZXJcXGAuXFxgbm9tUnVlXFxgIEFTIFxcYHNlbGxlci5ub21SdWVcXGAsIFxcYHNlbGxlclxcYC5cXGBudW1Db21tZXJjYW50XFxgIEFTIFxcYHNlbGxlci5udW1Db21tZXJjYW50XFxgLCBcXGBzZWxsZXJcXGAuXFxgbnVtUnVlXFxgIEFTIFxcYHNlbGxlci5udW1SdWVcXGAsIFxcYHNlbGxlclxcYC5cXGBwcmVub21cXGAgQVMgXFxgc2VsbGVyLnByZW5vbVxcYCwgXFxgc2VsbGVyXFxgLlxcYHRlbFxcYCBBUyBcXGBzZWxsZXIudGVsXFxgLCBcXGBzZWxsZXJcXGAuXFxgYWN0b3JUeXBlSWRcXGAgQVMgXFxgc2VsbGVyLmFjdG9yVHlwZUlkXFxgLCBcXGBzZWxsZXJcXGAuXFxgdmlsbGVcXGAgQVMgXFxgc2VsbGVyLnZpbGxlXFxgLCBcXGBwYXltZW50c1xcYC5cXGBwYXltZW50SWRcXGAgQVMgXFxgcGF5bWVudHMucGF5bWVudElkXFxgLCBcXGBwYXltZW50c1xcYC5cXGBldGF0XFxgIEFTIFxcYHBheW1lbnRzLmV0YXRcXGAsIFxcYHBheW1lbnRzXFxgLlxcYHBheW1lbnRWYWx1ZVxcYCBBUyBcXGBwYXltZW50cy5wYXltZW50VmFsdWVcXGAsIFxcYHBheW1lbnRzXFxgLlxcYHBheW1lbnRUeXBlXFxgIEFTIFxcYHBheW1lbnRzLnBheW1lbnRUeXBlXFxgLCBcXGBwYXltZW50c1xcYC5cXGBmYWN0dXJlSWRcXGAgQVMgXFxgcGF5bWVudHMuZmFjdHVyZUlkXFxgLCBzdHJmdGltZSgnJXMnLCBcXGBmYWN0dXJlXFxgLlxcYGRhdGVcXGApIEFTIFxcYGRhdGVfZm9ybWF0XFxgLCBcXGBjb21tYW5kZXNcXGAuXFxgb3JkZXJJZFxcYCBBUyBcXGBjb21tYW5kZXMub3JkZXJJZFxcYCwgXFxgY29tbWFuZGVzXFxgLlxcYGNvbnRlbnVBZGRpdGlvbm5lbFxcYCBBUyBcXGBjb21tYW5kZXMuY29udGVudUFkZGl0aW9ubmVsXFxgLCBcXGBjb21tYW5kZXNcXGAuXFxgcHJpY2VIdFxcYCBBUyBcXGBjb21tYW5kZXMucHJpY2VIdFxcYCwgXFxgY29tbWFuZGVzXFxgLlxcYGZhY3R1cmVJZFxcYCBBUyBcXGBjb21tYW5kZXMuZmFjdHVyZUlkXFxgIEZST00gXFxgZmFjdHVyZVxcYCBBUyBcXGBmYWN0dXJlXFxgIExFRlQgT1VURVIgSk9JTiBcXGBsYW5ndWVcXGAgQVMgXFxgbGFuZ3VlXFxgIE9OIFxcYGZhY3R1cmVcXGAuXFxgbGFuZ3VhZ2VJZFxcYCA9IFxcYGxhbmd1ZVxcYC5cXGBsYW5ndWVJZFxcYCBMRUZUIE9VVEVSIEpPSU4gXFxgZGV2aXNlXFxgIEFTIFxcYGRldmlzZVxcYCBPTiBcXGBmYWN0dXJlXFxgLlxcYGRldmlzZUlkXFxgID0gXFxgZGV2aXNlXFxgLlxcYGRldmlzZUlkXFxgIExFRlQgT1VURVIgSk9JTiBcXGBwZXJzb25uZVxcYCBBUyBcXGBidXllclxcYCBPTiBcXGBmYWN0dXJlXFxgLlxcYGJ1eWVySWRcXGAgPSBcXGBidXllclxcYC5cXGBhY3RvcklkXFxgIExFRlQgT1VURVIgSk9JTiBcXGBwZXJzb25uZVxcYCBBUyBcXGBzZWxsZXJcXGAgT04gXFxgZmFjdHVyZVxcYC5cXGBzZWxsZXJJZFxcYCA9IFxcYHNlbGxlclxcYC5cXGBhY3RvcklkXFxgIExFRlQgT1VURVIgSk9JTiBcXGBwYXltZW50XFxgIEFTIFxcYHBheW1lbnRzXFxgIE9OIFxcYGZhY3R1cmVcXGAuXFxgZmFjdHVyZUlkXFxgID0gXFxgcGF5bWVudHNcXGAuXFxgZmFjdHVyZUlkXFxgIExFRlQgT1VURVIgSk9JTiBcXGBjb21tYW5kZVxcYCBBUyBcXGBjb21tYW5kZXNcXGAgT04gXFxgZmFjdHVyZVxcYC5cXGBmYWN0dXJlSWRcXGAgPSBcXGBjb21tYW5kZXNcXGAuXFxgZmFjdHVyZUlkXFxgIFdIRVJFIFxcYGZhY3R1cmVcXGAuXFxgYWRtaW5pc3RyYXRvcklkXFxgID0gJyR7dXNyLnVzZXIudXNlcklkfScgIEFORCBcXGBkYXRlX2Zvcm1hdFxcYCA+IHN0cmZ0aW1lKCclcycsICcke2RhdGVTdGFydExpYmVsbGV9JylgO1xuXG4gICAgICAvLyBjb25zb2xlLmxvZyhzcWwpO1xuICAgICAgbGV0IGNvdW50ZXJTZXNzID0gYXdhaXQgcHJlZnMuZ2V0UHJlZignY291bnRlcicpO1xuICAgICAgdmFsdWVzID0gYXdhaXQgbmV3UXVlcnkocHJvcHMuZGJDb25uLCBzcWwpO1xuICAgICAgLy8gY29uc29sZS5sb2codmFsdWVzKTtcbiAgICAgIGlmICghIXZhbHVlcyAmJiB2YWx1ZXMudmFsdWVzLmxlbmd0aCl7XG4gICAgICAgIGNvbnN0IGludFJlcyA9IHNhbml0aXplUXVlcnlSZXN1bHQodmFsdWVzLnZhbHVlcyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGludFJlcyk7XG4gICAgICAgIGF3YWl0IHNldERlY3J5cHRBcGkoKTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgX19UUkFOU0ZPUk1PQkpfXyhpbnRSZXMpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAvLyBsZXQgY291bnRlclNlc3MgPSBhd2FpdCBwcmVmcy5nZXRQcmVmKCdjb3VudGVyJyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNvdW50ZXJTZXNzKTtcbiAgICAgICAgY291bnRlclNlc3MgPSAhIWNvdW50ZXJTZXNzID8gY291bnRlclNlc3MgOiB7fTtcbiAgICAgICAgY291bnRlclNlc3MuaW52b2ljZXNGWSA9IHJlcztcbiAgICAgICAgaW52b2ljZXMudmFsdWUgPSByZXM7XG4gICAgICAgIGF3YWl0IHByZWZzLnNldFByZWYoJ2NvdW50ZXInLCBjb3VudGVyU2VzcywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGludm9pY2VzLnZhbHVlID0gW107XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgYXdhaXQgcHJlZnMuc2V0UHJlZignbWVzc2FnZScsIHtcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzZXZlcml0eTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHQoJ2hvbWVDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9zdGF0cycsIHsgZXJyOiAnVW5hYmxlIHRvIG9wZW4gU1FMaXRlIERCICEnIH0pXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBtZXNzYWdlc1Zpc2liaWxpdHk6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIG1lc3NhZ2VWaXNpYmlsaXR5LnZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmVuZGVyU3RhdHMudmFsdWUgPSB0cnVlO1xufSk7XG5cbi8vIE9USEVSU1xuXG5cbjwvc2NyaXB0PlxuIl0sImZpbGUiOiJhc3NldHMvSW5kZXhQYWdlLmpzIn0=
