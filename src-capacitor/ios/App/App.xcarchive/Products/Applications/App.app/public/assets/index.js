const scriptRel = function detectScriptRel() {
  const relList = document.createElement("link").relList;
  return relList && relList.supports && relList.supports("modulepreload") ? "modulepreload" : "preload";
}();
const seen = {};
const base = "";
const __vitePreload = function preload(baseModule, deps) {
  if (!deps || deps.length === 0) {
    return baseModule();
  }
  return Promise.all(deps.map((dep) => {
    dep = `${base}${dep}`;
    if (dep in seen)
      return;
    seen[dep] = true;
    const isCss = dep.endsWith(".css");
    const cssSelector = isCss ? '[rel="stylesheet"]' : "";
    if (document.querySelector(`link[href="${dep}"]${cssSelector}`)) {
      return;
    }
    const link = document.createElement("link");
    link.rel = isCss ? "stylesheet" : scriptRel;
    if (!isCss) {
      link.as = "script";
      link.crossOrigin = "";
    }
    link.href = dep;
    document.head.appendChild(link);
    if (isCss) {
      return new Promise((res, rej) => {
        link.addEventListener("load", res);
        link.addEventListener("error", () => rej(new Error(`Unable to preload CSS for ${dep}`)));
      });
    }
  })).then(() => baseModule());
};
function makeMap(str, expectsLowerCase) {
  const map = /* @__PURE__ */ Object.create(null);
  const list = str.split(",");
  for (let i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }
  return expectsLowerCase ? (val) => !!map[val.toLowerCase()] : (val) => !!map[val];
}
function normalizeStyle(value) {
  if (isArray$2(value)) {
    const res = {};
    for (let i = 0; i < value.length; i++) {
      const item = value[i];
      const normalized = isString$1(item) ? parseStringStyle(item) : normalizeStyle(item);
      if (normalized) {
        for (const key in normalized) {
          res[key] = normalized[key];
        }
      }
    }
    return res;
  } else if (isString$1(value)) {
    return value;
  } else if (isObject$3(value)) {
    return value;
  }
}
const listDelimiterRE = /;(?![^(]*\))/g;
const propertyDelimiterRE = /:([^]+)/;
const styleCommentRE = /\/\*.*?\*\//gs;
function parseStringStyle(cssText) {
  const ret = {};
  cssText.replace(styleCommentRE, "").split(listDelimiterRE).forEach((item) => {
    if (item) {
      const tmp = item.split(propertyDelimiterRE);
      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());
    }
  });
  return ret;
}
function normalizeClass(value) {
  let res = "";
  if (isString$1(value)) {
    res = value;
  } else if (isArray$2(value)) {
    for (let i = 0; i < value.length; i++) {
      const normalized = normalizeClass(value[i]);
      if (normalized) {
        res += normalized + " ";
      }
    }
  } else if (isObject$3(value)) {
    for (const name in value) {
      if (value[name]) {
        res += name + " ";
      }
    }
  }
  return res.trim();
}
const specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;
const isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);
function includeBooleanAttr(value) {
  return !!value || value === "";
}
const toDisplayString$1 = (val) => {
  return isString$1(val) ? val : val == null ? "" : isArray$2(val) || isObject$3(val) && (val.toString === objectToString$1 || !isFunction$1(val.toString)) ? JSON.stringify(val, replacer, 2) : String(val);
};
const replacer = (_key, val) => {
  if (val && val.__v_isRef) {
    return replacer(_key, val.value);
  } else if (isMap(val)) {
    return {
      [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val2]) => {
        entries[`${key} =>`] = val2;
        return entries;
      }, {})
    };
  } else if (isSet(val)) {
    return {
      [`Set(${val.size})`]: [...val.values()]
    };
  } else if (isObject$3(val) && !isArray$2(val) && !isPlainObject$3(val)) {
    return String(val);
  }
  return val;
};
const EMPTY_OBJ = {};
const EMPTY_ARR = [];
const NOOP = () => {
};
const NO = () => false;
const onRE = /^on[^a-z]/;
const isOn = (key) => onRE.test(key);
const isModelListener = (key) => key.startsWith("onUpdate:");
const extend$1 = Object.assign;
const remove$1 = (arr, el) => {
  const i = arr.indexOf(el);
  if (i > -1) {
    arr.splice(i, 1);
  }
};
const hasOwnProperty$1 = Object.prototype.hasOwnProperty;
const hasOwn$2 = (val, key) => hasOwnProperty$1.call(val, key);
const isArray$2 = Array.isArray;
const isMap = (val) => toTypeString$1(val) === "[object Map]";
const isSet = (val) => toTypeString$1(val) === "[object Set]";
const isFunction$1 = (val) => typeof val === "function";
const isString$1 = (val) => typeof val === "string";
const isSymbol = (val) => typeof val === "symbol";
const isObject$3 = (val) => val !== null && typeof val === "object";
const isPromise = (val) => {
  return isObject$3(val) && isFunction$1(val.then) && isFunction$1(val.catch);
};
const objectToString$1 = Object.prototype.toString;
const toTypeString$1 = (value) => objectToString$1.call(value);
const toRawType = (value) => {
  return toTypeString$1(value).slice(8, -1);
};
const isPlainObject$3 = (val) => toTypeString$1(val) === "[object Object]";
const isIntegerKey = (key) => isString$1(key) && key !== "NaN" && key[0] !== "-" && "" + parseInt(key, 10) === key;
const isReservedProp = /* @__PURE__ */ makeMap(
  ",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"
);
const cacheStringFunction = (fn) => {
  const cache2 = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache2[str];
    return hit || (cache2[str] = fn(str));
  };
};
const camelizeRE = /-(\w)/g;
const camelize = cacheStringFunction((str) => {
  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : "");
});
const hyphenateRE = /\B([A-Z])/g;
const hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, "-$1").toLowerCase());
const capitalize$1 = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));
const toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize$1(str)}` : ``);
const hasChanged = (value, oldValue) => !Object.is(value, oldValue);
const invokeArrayFns = (fns, arg) => {
  for (let i = 0; i < fns.length; i++) {
    fns[i](arg);
  }
};
const def = (obj, key, value) => {
  Object.defineProperty(obj, key, {
    configurable: true,
    enumerable: false,
    value
  });
};
const toNumber = (val) => {
  const n = parseFloat(val);
  return isNaN(n) ? val : n;
};
let _globalThis$1;
const getGlobalThis$1 = () => {
  return _globalThis$1 || (_globalThis$1 = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
};
let activeEffectScope;
class EffectScope {
  constructor(detached = false) {
    this.detached = detached;
    this.active = true;
    this.effects = [];
    this.cleanups = [];
    this.parent = activeEffectScope;
    if (!detached && activeEffectScope) {
      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this) - 1;
    }
  }
  run(fn) {
    if (this.active) {
      const currentEffectScope = activeEffectScope;
      try {
        activeEffectScope = this;
        return fn();
      } finally {
        activeEffectScope = currentEffectScope;
      }
    }
  }
  on() {
    activeEffectScope = this;
  }
  off() {
    activeEffectScope = this.parent;
  }
  stop(fromParent) {
    if (this.active) {
      let i, l;
      for (i = 0, l = this.effects.length; i < l; i++) {
        this.effects[i].stop();
      }
      for (i = 0, l = this.cleanups.length; i < l; i++) {
        this.cleanups[i]();
      }
      if (this.scopes) {
        for (i = 0, l = this.scopes.length; i < l; i++) {
          this.scopes[i].stop(true);
        }
      }
      if (!this.detached && this.parent && !fromParent) {
        const last = this.parent.scopes.pop();
        if (last && last !== this) {
          this.parent.scopes[this.index] = last;
          last.index = this.index;
        }
      }
      this.parent = void 0;
      this.active = false;
    }
  }
}
function effectScope(detached) {
  return new EffectScope(detached);
}
function recordEffectScope(effect, scope = activeEffectScope) {
  if (scope && scope.active) {
    scope.effects.push(effect);
  }
}
function getCurrentScope() {
  return activeEffectScope;
}
function onScopeDispose(fn) {
  if (activeEffectScope) {
    activeEffectScope.cleanups.push(fn);
  }
}
const createDep = (effects) => {
  const dep = new Set(effects);
  dep.w = 0;
  dep.n = 0;
  return dep;
};
const wasTracked = (dep) => (dep.w & trackOpBit) > 0;
const newTracked = (dep) => (dep.n & trackOpBit) > 0;
const initDepMarkers = ({ deps }) => {
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].w |= trackOpBit;
    }
  }
};
const finalizeDepMarkers = (effect) => {
  const { deps } = effect;
  if (deps.length) {
    let ptr = 0;
    for (let i = 0; i < deps.length; i++) {
      const dep = deps[i];
      if (wasTracked(dep) && !newTracked(dep)) {
        dep.delete(effect);
      } else {
        deps[ptr++] = dep;
      }
      dep.w &= ~trackOpBit;
      dep.n &= ~trackOpBit;
    }
    deps.length = ptr;
  }
};
const targetMap = /* @__PURE__ */ new WeakMap();
let effectTrackDepth = 0;
let trackOpBit = 1;
const maxMarkerBits = 30;
let activeEffect;
const ITERATE_KEY = Symbol("");
const MAP_KEY_ITERATE_KEY = Symbol("");
class ReactiveEffect {
  constructor(fn, scheduler = null, scope) {
    this.fn = fn;
    this.scheduler = scheduler;
    this.active = true;
    this.deps = [];
    this.parent = void 0;
    recordEffectScope(this, scope);
  }
  run() {
    if (!this.active) {
      return this.fn();
    }
    let parent = activeEffect;
    let lastShouldTrack = shouldTrack;
    while (parent) {
      if (parent === this) {
        return;
      }
      parent = parent.parent;
    }
    try {
      this.parent = activeEffect;
      activeEffect = this;
      shouldTrack = true;
      trackOpBit = 1 << ++effectTrackDepth;
      if (effectTrackDepth <= maxMarkerBits) {
        initDepMarkers(this);
      } else {
        cleanupEffect(this);
      }
      return this.fn();
    } finally {
      if (effectTrackDepth <= maxMarkerBits) {
        finalizeDepMarkers(this);
      }
      trackOpBit = 1 << --effectTrackDepth;
      activeEffect = this.parent;
      shouldTrack = lastShouldTrack;
      this.parent = void 0;
      if (this.deferStop) {
        this.stop();
      }
    }
  }
  stop() {
    if (activeEffect === this) {
      this.deferStop = true;
    } else if (this.active) {
      cleanupEffect(this);
      if (this.onStop) {
        this.onStop();
      }
      this.active = false;
    }
  }
}
function cleanupEffect(effect) {
  const { deps } = effect;
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].delete(effect);
    }
    deps.length = 0;
  }
}
let shouldTrack = true;
const trackStack = [];
function pauseTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = false;
}
function resetTracking() {
  const last = trackStack.pop();
  shouldTrack = last === void 0 ? true : last;
}
function track(target2, type, key) {
  if (shouldTrack && activeEffect) {
    let depsMap = targetMap.get(target2);
    if (!depsMap) {
      targetMap.set(target2, depsMap = /* @__PURE__ */ new Map());
    }
    let dep = depsMap.get(key);
    if (!dep) {
      depsMap.set(key, dep = createDep());
    }
    trackEffects(dep);
  }
}
function trackEffects(dep, debuggerEventExtraInfo) {
  let shouldTrack2 = false;
  if (effectTrackDepth <= maxMarkerBits) {
    if (!newTracked(dep)) {
      dep.n |= trackOpBit;
      shouldTrack2 = !wasTracked(dep);
    }
  } else {
    shouldTrack2 = !dep.has(activeEffect);
  }
  if (shouldTrack2) {
    dep.add(activeEffect);
    activeEffect.deps.push(dep);
  }
}
function trigger(target2, type, key, newValue, oldValue, oldTarget) {
  const depsMap = targetMap.get(target2);
  if (!depsMap) {
    return;
  }
  let deps = [];
  if (type === "clear") {
    deps = [...depsMap.values()];
  } else if (key === "length" && isArray$2(target2)) {
    const newLength = toNumber(newValue);
    depsMap.forEach((dep, key2) => {
      if (key2 === "length" || key2 >= newLength) {
        deps.push(dep);
      }
    });
  } else {
    if (key !== void 0) {
      deps.push(depsMap.get(key));
    }
    switch (type) {
      case "add":
        if (!isArray$2(target2)) {
          deps.push(depsMap.get(ITERATE_KEY));
          if (isMap(target2)) {
            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        } else if (isIntegerKey(key)) {
          deps.push(depsMap.get("length"));
        }
        break;
      case "delete":
        if (!isArray$2(target2)) {
          deps.push(depsMap.get(ITERATE_KEY));
          if (isMap(target2)) {
            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        }
        break;
      case "set":
        if (isMap(target2)) {
          deps.push(depsMap.get(ITERATE_KEY));
        }
        break;
    }
  }
  if (deps.length === 1) {
    if (deps[0]) {
      {
        triggerEffects(deps[0]);
      }
    }
  } else {
    const effects = [];
    for (const dep of deps) {
      if (dep) {
        effects.push(...dep);
      }
    }
    {
      triggerEffects(createDep(effects));
    }
  }
}
function triggerEffects(dep, debuggerEventExtraInfo) {
  const effects = isArray$2(dep) ? dep : [...dep];
  for (const effect of effects) {
    if (effect.computed) {
      triggerEffect(effect);
    }
  }
  for (const effect of effects) {
    if (!effect.computed) {
      triggerEffect(effect);
    }
  }
}
function triggerEffect(effect, debuggerEventExtraInfo) {
  if (effect !== activeEffect || effect.allowRecurse) {
    if (effect.scheduler) {
      effect.scheduler();
    } else {
      effect.run();
    }
  }
}
const isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);
const builtInSymbols = new Set(
  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== "arguments" && key !== "caller").map((key) => Symbol[key]).filter(isSymbol)
);
const get$2 = /* @__PURE__ */ createGetter();
const shallowGet = /* @__PURE__ */ createGetter(false, true);
const readonlyGet = /* @__PURE__ */ createGetter(true);
const arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();
function createArrayInstrumentations() {
  const instrumentations = {};
  ["includes", "indexOf", "lastIndexOf"].forEach((key) => {
    instrumentations[key] = function(...args) {
      const arr = toRaw(this);
      for (let i = 0, l = this.length; i < l; i++) {
        track(arr, "get", i + "");
      }
      const res = arr[key](...args);
      if (res === -1 || res === false) {
        return arr[key](...args.map(toRaw));
      } else {
        return res;
      }
    };
  });
  ["push", "pop", "shift", "unshift", "splice"].forEach((key) => {
    instrumentations[key] = function(...args) {
      pauseTracking();
      const res = toRaw(this)[key].apply(this, args);
      resetTracking();
      return res;
    };
  });
  return instrumentations;
}
function createGetter(isReadonly2 = false, shallow = false) {
  return function get2(target2, key, receiver) {
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_isShallow") {
      return shallow;
    } else if (key === "__v_raw" && receiver === (isReadonly2 ? shallow ? shallowReadonlyMap : readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target2)) {
      return target2;
    }
    const targetIsArray = isArray$2(target2);
    if (!isReadonly2 && targetIsArray && hasOwn$2(arrayInstrumentations, key)) {
      return Reflect.get(arrayInstrumentations, key, receiver);
    }
    const res = Reflect.get(target2, key, receiver);
    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
      return res;
    }
    if (!isReadonly2) {
      track(target2, "get", key);
    }
    if (shallow) {
      return res;
    }
    if (isRef(res)) {
      return targetIsArray && isIntegerKey(key) ? res : res.value;
    }
    if (isObject$3(res)) {
      return isReadonly2 ? readonly(res) : reactive(res);
    }
    return res;
  };
}
const set$2 = /* @__PURE__ */ createSetter();
const shallowSet = /* @__PURE__ */ createSetter(true);
function createSetter(shallow = false) {
  return function set2(target2, key, value, receiver) {
    let oldValue = target2[key];
    if (isReadonly(oldValue) && isRef(oldValue) && !isRef(value)) {
      return false;
    }
    if (!shallow) {
      if (!isShallow(value) && !isReadonly(value)) {
        oldValue = toRaw(oldValue);
        value = toRaw(value);
      }
      if (!isArray$2(target2) && isRef(oldValue) && !isRef(value)) {
        oldValue.value = value;
        return true;
      }
    }
    const hadKey = isArray$2(target2) && isIntegerKey(key) ? Number(key) < target2.length : hasOwn$2(target2, key);
    const result = Reflect.set(target2, key, value, receiver);
    if (target2 === toRaw(receiver)) {
      if (!hadKey) {
        trigger(target2, "add", key, value);
      } else if (hasChanged(value, oldValue)) {
        trigger(target2, "set", key, value);
      }
    }
    return result;
  };
}
function deleteProperty(target2, key) {
  const hadKey = hasOwn$2(target2, key);
  target2[key];
  const result = Reflect.deleteProperty(target2, key);
  if (result && hadKey) {
    trigger(target2, "delete", key, void 0);
  }
  return result;
}
function has$1(target2, key) {
  const result = Reflect.has(target2, key);
  if (!isSymbol(key) || !builtInSymbols.has(key)) {
    track(target2, "has", key);
  }
  return result;
}
function ownKeys(target2) {
  track(target2, "iterate", isArray$2(target2) ? "length" : ITERATE_KEY);
  return Reflect.ownKeys(target2);
}
const mutableHandlers = {
  get: get$2,
  set: set$2,
  deleteProperty,
  has: has$1,
  ownKeys
};
const readonlyHandlers = {
  get: readonlyGet,
  set(target2, key) {
    return true;
  },
  deleteProperty(target2, key) {
    return true;
  }
};
const shallowReactiveHandlers = /* @__PURE__ */ extend$1({}, mutableHandlers, {
  get: shallowGet,
  set: shallowSet
});
const toShallow = (value) => value;
const getProto = (v) => Reflect.getPrototypeOf(v);
function get$1$1(target2, key, isReadonly2 = false, isShallow2 = false) {
  target2 = target2["__v_raw"];
  const rawTarget = toRaw(target2);
  const rawKey = toRaw(key);
  if (!isReadonly2) {
    if (key !== rawKey) {
      track(rawTarget, "get", key);
    }
    track(rawTarget, "get", rawKey);
  }
  const { has: has2 } = getProto(rawTarget);
  const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
  if (has2.call(rawTarget, key)) {
    return wrap(target2.get(key));
  } else if (has2.call(rawTarget, rawKey)) {
    return wrap(target2.get(rawKey));
  } else if (target2 !== rawTarget) {
    target2.get(key);
  }
}
function has$1$1(key, isReadonly2 = false) {
  const target2 = this["__v_raw"];
  const rawTarget = toRaw(target2);
  const rawKey = toRaw(key);
  if (!isReadonly2) {
    if (key !== rawKey) {
      track(rawTarget, "has", key);
    }
    track(rawTarget, "has", rawKey);
  }
  return key === rawKey ? target2.has(key) : target2.has(key) || target2.has(rawKey);
}
function size(target2, isReadonly2 = false) {
  target2 = target2["__v_raw"];
  !isReadonly2 && track(toRaw(target2), "iterate", ITERATE_KEY);
  return Reflect.get(target2, "size", target2);
}
function add(value) {
  value = toRaw(value);
  const target2 = toRaw(this);
  const proto = getProto(target2);
  const hadKey = proto.has.call(target2, value);
  if (!hadKey) {
    target2.add(value);
    trigger(target2, "add", value, value);
  }
  return this;
}
function set$1$1(key, value) {
  value = toRaw(value);
  const target2 = toRaw(this);
  const { has: has2, get: get2 } = getProto(target2);
  let hadKey = has2.call(target2, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target2, key);
  }
  const oldValue = get2.call(target2, key);
  target2.set(key, value);
  if (!hadKey) {
    trigger(target2, "add", key, value);
  } else if (hasChanged(value, oldValue)) {
    trigger(target2, "set", key, value);
  }
  return this;
}
function deleteEntry(key) {
  const target2 = toRaw(this);
  const { has: has2, get: get2 } = getProto(target2);
  let hadKey = has2.call(target2, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target2, key);
  }
  get2 ? get2.call(target2, key) : void 0;
  const result = target2.delete(key);
  if (hadKey) {
    trigger(target2, "delete", key, void 0);
  }
  return result;
}
function clear() {
  const target2 = toRaw(this);
  const hadItems = target2.size !== 0;
  const result = target2.clear();
  if (hadItems) {
    trigger(target2, "clear", void 0, void 0);
  }
  return result;
}
function createForEach(isReadonly2, isShallow2) {
  return function forEach(callback, thisArg) {
    const observed = this;
    const target2 = observed["__v_raw"];
    const rawTarget = toRaw(target2);
    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
    !isReadonly2 && track(rawTarget, "iterate", ITERATE_KEY);
    return target2.forEach((value, key) => {
      return callback.call(thisArg, wrap(value), wrap(key), observed);
    });
  };
}
function createIterableMethod(method, isReadonly2, isShallow2) {
  return function(...args) {
    const target2 = this["__v_raw"];
    const rawTarget = toRaw(target2);
    const targetIsMap = isMap(rawTarget);
    const isPair = method === "entries" || method === Symbol.iterator && targetIsMap;
    const isKeyOnly = method === "keys" && targetIsMap;
    const innerIterator = target2[method](...args);
    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
    !isReadonly2 && track(rawTarget, "iterate", isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);
    return {
      next() {
        const { value, done } = innerIterator.next();
        return done ? { value, done } : {
          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
          done
        };
      },
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function createReadonlyMethod(type) {
  return function(...args) {
    return type === "delete" ? false : this;
  };
}
function createInstrumentations() {
  const mutableInstrumentations2 = {
    get(key) {
      return get$1$1(this, key);
    },
    get size() {
      return size(this);
    },
    has: has$1$1,
    add,
    set: set$1$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, false)
  };
  const shallowInstrumentations2 = {
    get(key) {
      return get$1$1(this, key, false, true);
    },
    get size() {
      return size(this);
    },
    has: has$1$1,
    add,
    set: set$1$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, true)
  };
  const readonlyInstrumentations2 = {
    get(key) {
      return get$1$1(this, key, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1$1.call(this, key, true);
    },
    add: createReadonlyMethod("add"),
    set: createReadonlyMethod("set"),
    delete: createReadonlyMethod("delete"),
    clear: createReadonlyMethod("clear"),
    forEach: createForEach(true, false)
  };
  const shallowReadonlyInstrumentations2 = {
    get(key) {
      return get$1$1(this, key, true, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1$1.call(this, key, true);
    },
    add: createReadonlyMethod("add"),
    set: createReadonlyMethod("set"),
    delete: createReadonlyMethod("delete"),
    clear: createReadonlyMethod("clear"),
    forEach: createForEach(true, true)
  };
  const iteratorMethods = ["keys", "values", "entries", Symbol.iterator];
  iteratorMethods.forEach((method) => {
    mutableInstrumentations2[method] = createIterableMethod(method, false, false);
    readonlyInstrumentations2[method] = createIterableMethod(method, true, false);
    shallowInstrumentations2[method] = createIterableMethod(method, false, true);
    shallowReadonlyInstrumentations2[method] = createIterableMethod(method, true, true);
  });
  return [
    mutableInstrumentations2,
    readonlyInstrumentations2,
    shallowInstrumentations2,
    shallowReadonlyInstrumentations2
  ];
}
const [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* @__PURE__ */ createInstrumentations();
function createInstrumentationGetter(isReadonly2, shallow) {
  const instrumentations = shallow ? isReadonly2 ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly2 ? readonlyInstrumentations : mutableInstrumentations;
  return (target2, key, receiver) => {
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_raw") {
      return target2;
    }
    return Reflect.get(hasOwn$2(instrumentations, key) && key in target2 ? instrumentations : target2, key, receiver);
  };
}
const mutableCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, false)
};
const shallowCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, true)
};
const readonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, false)
};
const reactiveMap = /* @__PURE__ */ new WeakMap();
const shallowReactiveMap = /* @__PURE__ */ new WeakMap();
const readonlyMap = /* @__PURE__ */ new WeakMap();
const shallowReadonlyMap = /* @__PURE__ */ new WeakMap();
function targetTypeMap(rawType) {
  switch (rawType) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function getTargetType(value) {
  return value["__v_skip"] || !Object.isExtensible(value) ? 0 : targetTypeMap(toRawType(value));
}
function reactive(target2) {
  if (isReadonly(target2)) {
    return target2;
  }
  return createReactiveObject(target2, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);
}
function shallowReactive(target2) {
  return createReactiveObject(target2, false, shallowReactiveHandlers, shallowCollectionHandlers, shallowReactiveMap);
}
function readonly(target2) {
  return createReactiveObject(target2, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);
}
function createReactiveObject(target2, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {
  if (!isObject$3(target2)) {
    return target2;
  }
  if (target2["__v_raw"] && !(isReadonly2 && target2["__v_isReactive"])) {
    return target2;
  }
  const existingProxy = proxyMap.get(target2);
  if (existingProxy) {
    return existingProxy;
  }
  const targetType = getTargetType(target2);
  if (targetType === 0) {
    return target2;
  }
  const proxy = new Proxy(target2, targetType === 2 ? collectionHandlers : baseHandlers);
  proxyMap.set(target2, proxy);
  return proxy;
}
function isReactive(value) {
  if (isReadonly(value)) {
    return isReactive(value["__v_raw"]);
  }
  return !!(value && value["__v_isReactive"]);
}
function isReadonly(value) {
  return !!(value && value["__v_isReadonly"]);
}
function isShallow(value) {
  return !!(value && value["__v_isShallow"]);
}
function isProxy(value) {
  return isReactive(value) || isReadonly(value);
}
function toRaw(observed) {
  const raw = observed && observed["__v_raw"];
  return raw ? toRaw(raw) : observed;
}
function markRaw(value) {
  def(value, "__v_skip", true);
  return value;
}
const toReactive = (value) => isObject$3(value) ? reactive(value) : value;
const toReadonly = (value) => isObject$3(value) ? readonly(value) : value;
function trackRefValue(ref2) {
  if (shouldTrack && activeEffect) {
    ref2 = toRaw(ref2);
    {
      trackEffects(ref2.dep || (ref2.dep = createDep()));
    }
  }
}
function triggerRefValue(ref2, newVal) {
  ref2 = toRaw(ref2);
  if (ref2.dep) {
    {
      triggerEffects(ref2.dep);
    }
  }
}
function isRef(r) {
  return !!(r && r.__v_isRef === true);
}
function ref(value) {
  return createRef(value, false);
}
function shallowRef(value) {
  return createRef(value, true);
}
function createRef(rawValue, shallow) {
  if (isRef(rawValue)) {
    return rawValue;
  }
  return new RefImpl(rawValue, shallow);
}
class RefImpl {
  constructor(value, __v_isShallow) {
    this.__v_isShallow = __v_isShallow;
    this.dep = void 0;
    this.__v_isRef = true;
    this._rawValue = __v_isShallow ? value : toRaw(value);
    this._value = __v_isShallow ? value : toReactive(value);
  }
  get value() {
    trackRefValue(this);
    return this._value;
  }
  set value(newVal) {
    const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal);
    newVal = useDirectValue ? newVal : toRaw(newVal);
    if (hasChanged(newVal, this._rawValue)) {
      this._rawValue = newVal;
      this._value = useDirectValue ? newVal : toReactive(newVal);
      triggerRefValue(this);
    }
  }
}
function unref(ref2) {
  return isRef(ref2) ? ref2.value : ref2;
}
const shallowUnwrapHandlers = {
  get: (target2, key, receiver) => unref(Reflect.get(target2, key, receiver)),
  set: (target2, key, value, receiver) => {
    const oldValue = target2[key];
    if (isRef(oldValue) && !isRef(value)) {
      oldValue.value = value;
      return true;
    } else {
      return Reflect.set(target2, key, value, receiver);
    }
  }
};
function proxyRefs(objectWithRefs) {
  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);
}
function toRefs(object) {
  const ret = isArray$2(object) ? new Array(object.length) : {};
  for (const key in object) {
    ret[key] = toRef(object, key);
  }
  return ret;
}
class ObjectRefImpl {
  constructor(_object, _key, _defaultValue) {
    this._object = _object;
    this._key = _key;
    this._defaultValue = _defaultValue;
    this.__v_isRef = true;
  }
  get value() {
    const val = this._object[this._key];
    return val === void 0 ? this._defaultValue : val;
  }
  set value(newVal) {
    this._object[this._key] = newVal;
  }
}
function toRef(object, key, defaultValue) {
  const val = object[key];
  return isRef(val) ? val : new ObjectRefImpl(object, key, defaultValue);
}
var _a;
class ComputedRefImpl {
  constructor(getter, _setter, isReadonly2, isSSR) {
    this._setter = _setter;
    this.dep = void 0;
    this.__v_isRef = true;
    this[_a] = false;
    this._dirty = true;
    this.effect = new ReactiveEffect(getter, () => {
      if (!this._dirty) {
        this._dirty = true;
        triggerRefValue(this);
      }
    });
    this.effect.computed = this;
    this.effect.active = this._cacheable = !isSSR;
    this["__v_isReadonly"] = isReadonly2;
  }
  get value() {
    const self2 = toRaw(this);
    trackRefValue(self2);
    if (self2._dirty || !self2._cacheable) {
      self2._dirty = false;
      self2._value = self2.effect.run();
    }
    return self2._value;
  }
  set value(newValue) {
    this._setter(newValue);
  }
}
_a = "__v_isReadonly";
function computed$1(getterOrOptions, debugOptions, isSSR = false) {
  let getter;
  let setter;
  const onlyGetter = isFunction$1(getterOrOptions);
  if (onlyGetter) {
    getter = getterOrOptions;
    setter = NOOP;
  } else {
    getter = getterOrOptions.get;
    setter = getterOrOptions.set;
  }
  const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);
  return cRef;
}
function warn$1(msg, ...args) {
  return;
}
function callWithErrorHandling(fn, instance, type, args) {
  let res;
  try {
    res = args ? fn(...args) : fn();
  } catch (err) {
    handleError(err, instance, type);
  }
  return res;
}
function callWithAsyncErrorHandling(fn, instance, type, args) {
  if (isFunction$1(fn)) {
    const res = callWithErrorHandling(fn, instance, type, args);
    if (res && isPromise(res)) {
      res.catch((err) => {
        handleError(err, instance, type);
      });
    }
    return res;
  }
  const values = [];
  for (let i = 0; i < fn.length; i++) {
    values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));
  }
  return values;
}
function handleError(err, instance, type, throwInDev = true) {
  const contextVNode = instance ? instance.vnode : null;
  if (instance) {
    let cur = instance.parent;
    const exposedInstance = instance.proxy;
    const errorInfo = type;
    while (cur) {
      const errorCapturedHooks = cur.ec;
      if (errorCapturedHooks) {
        for (let i = 0; i < errorCapturedHooks.length; i++) {
          if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {
            return;
          }
        }
      }
      cur = cur.parent;
    }
    const appErrorHandler = instance.appContext.config.errorHandler;
    if (appErrorHandler) {
      callWithErrorHandling(appErrorHandler, null, 10, [err, exposedInstance, errorInfo]);
      return;
    }
  }
  logError$1(err, type, contextVNode, throwInDev);
}
function logError$1(err, type, contextVNode, throwInDev = true) {
  {
    console.error(err);
  }
}
let isFlushing = false;
let isFlushPending = false;
const queue = [];
let flushIndex = 0;
const pendingPostFlushCbs = [];
let activePostFlushCbs = null;
let postFlushIndex = 0;
const resolvedPromise = /* @__PURE__ */ Promise.resolve();
let currentFlushPromise = null;
function nextTick(fn) {
  const p2 = currentFlushPromise || resolvedPromise;
  return fn ? p2.then(this ? fn.bind(this) : fn) : p2;
}
function findInsertionIndex(id) {
  let start2 = flushIndex + 1;
  let end = queue.length;
  while (start2 < end) {
    const middle = start2 + end >>> 1;
    const middleJobId = getId(queue[middle]);
    middleJobId < id ? start2 = middle + 1 : end = middle;
  }
  return start2;
}
function queueJob(job) {
  if (!queue.length || !queue.includes(job, isFlushing && job.allowRecurse ? flushIndex + 1 : flushIndex)) {
    if (job.id == null) {
      queue.push(job);
    } else {
      queue.splice(findInsertionIndex(job.id), 0, job);
    }
    queueFlush();
  }
}
function queueFlush() {
  if (!isFlushing && !isFlushPending) {
    isFlushPending = true;
    currentFlushPromise = resolvedPromise.then(flushJobs);
  }
}
function invalidateJob(job) {
  const i = queue.indexOf(job);
  if (i > flushIndex) {
    queue.splice(i, 1);
  }
}
function queuePostFlushCb(cb) {
  if (!isArray$2(cb)) {
    if (!activePostFlushCbs || !activePostFlushCbs.includes(cb, cb.allowRecurse ? postFlushIndex + 1 : postFlushIndex)) {
      pendingPostFlushCbs.push(cb);
    }
  } else {
    pendingPostFlushCbs.push(...cb);
  }
  queueFlush();
}
function flushPreFlushCbs(seen2, i = isFlushing ? flushIndex + 1 : 0) {
  for (; i < queue.length; i++) {
    const cb = queue[i];
    if (cb && cb.pre) {
      queue.splice(i, 1);
      i--;
      cb();
    }
  }
}
function flushPostFlushCbs(seen2) {
  if (pendingPostFlushCbs.length) {
    const deduped = [...new Set(pendingPostFlushCbs)];
    pendingPostFlushCbs.length = 0;
    if (activePostFlushCbs) {
      activePostFlushCbs.push(...deduped);
      return;
    }
    activePostFlushCbs = deduped;
    activePostFlushCbs.sort((a, b) => getId(a) - getId(b));
    for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {
      activePostFlushCbs[postFlushIndex]();
    }
    activePostFlushCbs = null;
    postFlushIndex = 0;
  }
}
const getId = (job) => job.id == null ? Infinity : job.id;
const comparator = (a, b) => {
  const diff2 = getId(a) - getId(b);
  if (diff2 === 0) {
    if (a.pre && !b.pre)
      return -1;
    if (b.pre && !a.pre)
      return 1;
  }
  return diff2;
};
function flushJobs(seen2) {
  isFlushPending = false;
  isFlushing = true;
  queue.sort(comparator);
  const check = NOOP;
  try {
    for (flushIndex = 0; flushIndex < queue.length; flushIndex++) {
      const job = queue[flushIndex];
      if (job && job.active !== false) {
        if (false)
          ;
        callWithErrorHandling(job, null, 14);
      }
    }
  } finally {
    flushIndex = 0;
    queue.length = 0;
    flushPostFlushCbs();
    isFlushing = false;
    currentFlushPromise = null;
    if (queue.length || pendingPostFlushCbs.length) {
      flushJobs();
    }
  }
}
let devtools$1;
let buffer = [];
let devtoolsNotInstalled = false;
function emit(event, ...args) {
  if (devtools$1) {
    devtools$1.emit(event, ...args);
  } else if (!devtoolsNotInstalled) {
    buffer.push({ event, args });
  }
}
function setDevtoolsHook(hook, target2) {
  var _a2, _b;
  devtools$1 = hook;
  if (devtools$1) {
    devtools$1.enabled = true;
    buffer.forEach(({ event, args }) => devtools$1.emit(event, ...args));
    buffer = [];
  } else if (typeof window !== "undefined" && window.HTMLElement && !((_b = (_a2 = window.navigator) === null || _a2 === void 0 ? void 0 : _a2.userAgent) === null || _b === void 0 ? void 0 : _b.includes("jsdom"))) {
    const replay = target2.__VUE_DEVTOOLS_HOOK_REPLAY__ = target2.__VUE_DEVTOOLS_HOOK_REPLAY__ || [];
    replay.push((newHook) => {
      setDevtoolsHook(newHook, target2);
    });
    setTimeout(() => {
      if (!devtools$1) {
        target2.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;
        devtoolsNotInstalled = true;
        buffer = [];
      }
    }, 3e3);
  } else {
    devtoolsNotInstalled = true;
    buffer = [];
  }
}
function devtoolsInitApp(app2, version2) {
  emit("app:init", app2, version2, {
    Fragment,
    Text,
    Comment,
    Static
  });
}
function devtoolsUnmountApp(app2) {
  emit("app:unmount", app2);
}
const devtoolsComponentAdded = /* @__PURE__ */ createDevtoolsComponentHook("component:added");
const devtoolsComponentUpdated = /* @__PURE__ */ createDevtoolsComponentHook("component:updated");
const _devtoolsComponentRemoved = /* @__PURE__ */ createDevtoolsComponentHook("component:removed");
const devtoolsComponentRemoved = (component) => {
  if (devtools$1 && typeof devtools$1.cleanupBuffer === "function" && !devtools$1.cleanupBuffer(component)) {
    _devtoolsComponentRemoved(component);
  }
};
function createDevtoolsComponentHook(hook) {
  return (component) => {
    emit(hook, component.appContext.app, component.uid, component.parent ? component.parent.uid : void 0, component);
  };
}
function devtoolsComponentEmit(component, event, params) {
  emit("component:emit", component.appContext.app, component, event, params);
}
function emit$1(instance, event, ...rawArgs) {
  if (instance.isUnmounted)
    return;
  const props = instance.vnode.props || EMPTY_OBJ;
  let args = rawArgs;
  const isModelListener2 = event.startsWith("update:");
  const modelArg = isModelListener2 && event.slice(7);
  if (modelArg && modelArg in props) {
    const modifiersKey = `${modelArg === "modelValue" ? "model" : modelArg}Modifiers`;
    const { number: number2, trim } = props[modifiersKey] || EMPTY_OBJ;
    if (trim) {
      args = rawArgs.map((a) => isString$1(a) ? a.trim() : a);
    }
    if (number2) {
      args = rawArgs.map(toNumber);
    }
  }
  {
    devtoolsComponentEmit(instance, event, args);
  }
  let handlerName;
  let handler = props[handlerName = toHandlerKey(event)] || props[handlerName = toHandlerKey(camelize(event))];
  if (!handler && isModelListener2) {
    handler = props[handlerName = toHandlerKey(hyphenate(event))];
  }
  if (handler) {
    callWithAsyncErrorHandling(handler, instance, 6, args);
  }
  const onceHandler = props[handlerName + `Once`];
  if (onceHandler) {
    if (!instance.emitted) {
      instance.emitted = {};
    } else if (instance.emitted[handlerName]) {
      return;
    }
    instance.emitted[handlerName] = true;
    callWithAsyncErrorHandling(onceHandler, instance, 6, args);
  }
}
function normalizeEmitsOptions(comp, appContext, asMixin = false) {
  const cache2 = appContext.emitsCache;
  const cached = cache2.get(comp);
  if (cached !== void 0) {
    return cached;
  }
  const raw = comp.emits;
  let normalized = {};
  let hasExtends = false;
  if (!raw && !hasExtends) {
    if (isObject$3(comp)) {
      cache2.set(comp, null);
    }
    return null;
  }
  if (isArray$2(raw)) {
    raw.forEach((key) => normalized[key] = null);
  } else {
    extend$1(normalized, raw);
  }
  if (isObject$3(comp)) {
    cache2.set(comp, normalized);
  }
  return normalized;
}
function isEmitListener(options, key) {
  if (!options || !isOn(key)) {
    return false;
  }
  key = key.slice(2).replace(/Once$/, "");
  return hasOwn$2(options, key[0].toLowerCase() + key.slice(1)) || hasOwn$2(options, hyphenate(key)) || hasOwn$2(options, key);
}
let currentRenderingInstance = null;
let currentScopeId = null;
function setCurrentRenderingInstance(instance) {
  const prev = currentRenderingInstance;
  currentRenderingInstance = instance;
  currentScopeId = instance && instance.type.__scopeId || null;
  return prev;
}
function withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot) {
  if (!ctx)
    return fn;
  if (fn._n) {
    return fn;
  }
  const renderFnWithContext = (...args) => {
    if (renderFnWithContext._d) {
      setBlockTracking(-1);
    }
    const prevInstance = setCurrentRenderingInstance(ctx);
    let res;
    try {
      res = fn(...args);
    } finally {
      setCurrentRenderingInstance(prevInstance);
      if (renderFnWithContext._d) {
        setBlockTracking(1);
      }
    }
    {
      devtoolsComponentUpdated(ctx);
    }
    return res;
  };
  renderFnWithContext._n = true;
  renderFnWithContext._c = true;
  renderFnWithContext._d = true;
  return renderFnWithContext;
}
function markAttrsAccessed() {
}
function renderComponentRoot(instance) {
  const { type: Component, vnode, proxy, withProxy, props, propsOptions: [propsOptions], slots, attrs, emit: emit2, render, renderCache, data, setupState, ctx, inheritAttrs } = instance;
  let result;
  let fallthroughAttrs;
  const prev = setCurrentRenderingInstance(instance);
  try {
    if (vnode.shapeFlag & 4) {
      const proxyToUse = withProxy || proxy;
      result = normalizeVNode(render.call(proxyToUse, proxyToUse, renderCache, props, setupState, data, ctx));
      fallthroughAttrs = attrs;
    } else {
      const render2 = Component;
      if (false)
        ;
      result = normalizeVNode(render2.length > 1 ? render2(props, false ? {
        get attrs() {
          markAttrsAccessed();
          return attrs;
        },
        slots,
        emit: emit2
      } : { attrs, slots, emit: emit2 }) : render2(props, null));
      fallthroughAttrs = Component.props ? attrs : getFunctionalFallthrough(attrs);
    }
  } catch (err) {
    blockStack.length = 0;
    handleError(err, instance, 1);
    result = createVNode(Comment);
  }
  let root = result;
  if (fallthroughAttrs && inheritAttrs !== false) {
    const keys = Object.keys(fallthroughAttrs);
    const { shapeFlag } = root;
    if (keys.length) {
      if (shapeFlag & (1 | 6)) {
        if (propsOptions && keys.some(isModelListener)) {
          fallthroughAttrs = filterModelListeners(fallthroughAttrs, propsOptions);
        }
        root = cloneVNode(root, fallthroughAttrs);
      }
    }
  }
  if (vnode.dirs) {
    root = cloneVNode(root);
    root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;
  }
  if (vnode.transition) {
    root.transition = vnode.transition;
  }
  {
    result = root;
  }
  setCurrentRenderingInstance(prev);
  return result;
}
const getFunctionalFallthrough = (attrs) => {
  let res;
  for (const key in attrs) {
    if (key === "class" || key === "style" || isOn(key)) {
      (res || (res = {}))[key] = attrs[key];
    }
  }
  return res;
};
const filterModelListeners = (attrs, props) => {
  const res = {};
  for (const key in attrs) {
    if (!isModelListener(key) || !(key.slice(9) in props)) {
      res[key] = attrs[key];
    }
  }
  return res;
};
function shouldUpdateComponent(prevVNode, nextVNode, optimized) {
  const { props: prevProps, children: prevChildren, component } = prevVNode;
  const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;
  const emits = component.emitsOptions;
  if (nextVNode.dirs || nextVNode.transition) {
    return true;
  }
  if (optimized && patchFlag >= 0) {
    if (patchFlag & 1024) {
      return true;
    }
    if (patchFlag & 16) {
      if (!prevProps) {
        return !!nextProps;
      }
      return hasPropsChanged(prevProps, nextProps, emits);
    } else if (patchFlag & 8) {
      const dynamicProps = nextVNode.dynamicProps;
      for (let i = 0; i < dynamicProps.length; i++) {
        const key = dynamicProps[i];
        if (nextProps[key] !== prevProps[key] && !isEmitListener(emits, key)) {
          return true;
        }
      }
    }
  } else {
    if (prevChildren || nextChildren) {
      if (!nextChildren || !nextChildren.$stable) {
        return true;
      }
    }
    if (prevProps === nextProps) {
      return false;
    }
    if (!prevProps) {
      return !!nextProps;
    }
    if (!nextProps) {
      return true;
    }
    return hasPropsChanged(prevProps, nextProps, emits);
  }
  return false;
}
function hasPropsChanged(prevProps, nextProps, emitsOptions) {
  const nextKeys = Object.keys(nextProps);
  if (nextKeys.length !== Object.keys(prevProps).length) {
    return true;
  }
  for (let i = 0; i < nextKeys.length; i++) {
    const key = nextKeys[i];
    if (nextProps[key] !== prevProps[key] && !isEmitListener(emitsOptions, key)) {
      return true;
    }
  }
  return false;
}
function updateHOCHostEl({ vnode, parent }, el) {
  while (parent && parent.subTree === vnode) {
    (vnode = parent.vnode).el = el;
    parent = parent.parent;
  }
}
const isSuspense = (type) => type.__isSuspense;
function queueEffectWithSuspense(fn, suspense) {
  if (suspense && suspense.pendingBranch) {
    if (isArray$2(fn)) {
      suspense.effects.push(...fn);
    } else {
      suspense.effects.push(fn);
    }
  } else {
    queuePostFlushCb(fn);
  }
}
function provide(key, value) {
  if (!currentInstance)
    ;
  else {
    let provides = currentInstance.provides;
    const parentProvides = currentInstance.parent && currentInstance.parent.provides;
    if (parentProvides === provides) {
      provides = currentInstance.provides = Object.create(parentProvides);
    }
    provides[key] = value;
  }
}
function inject(key, defaultValue, treatDefaultAsFactory = false) {
  const instance = currentInstance || currentRenderingInstance;
  if (instance) {
    const provides = instance.parent == null ? instance.vnode.appContext && instance.vnode.appContext.provides : instance.parent.provides;
    if (provides && key in provides) {
      return provides[key];
    } else if (arguments.length > 1) {
      return treatDefaultAsFactory && isFunction$1(defaultValue) ? defaultValue.call(instance.proxy) : defaultValue;
    } else
      ;
  }
}
function watchEffect(effect, options) {
  return doWatch(effect, null, options);
}
const INITIAL_WATCHER_VALUE = {};
function watch(source, cb, options) {
  return doWatch(source, cb, options);
}
function doWatch(source, cb, { immediate, deep, flush, onTrack, onTrigger } = EMPTY_OBJ) {
  const instance = currentInstance;
  let getter;
  let forceTrigger = false;
  let isMultiSource = false;
  if (isRef(source)) {
    getter = () => source.value;
    forceTrigger = isShallow(source);
  } else if (isReactive(source)) {
    getter = () => source;
    deep = true;
  } else if (isArray$2(source)) {
    isMultiSource = true;
    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));
    getter = () => source.map((s) => {
      if (isRef(s)) {
        return s.value;
      } else if (isReactive(s)) {
        return traverse(s);
      } else if (isFunction$1(s)) {
        return callWithErrorHandling(s, instance, 2);
      } else
        ;
    });
  } else if (isFunction$1(source)) {
    if (cb) {
      getter = () => callWithErrorHandling(source, instance, 2);
    } else {
      getter = () => {
        if (instance && instance.isUnmounted) {
          return;
        }
        if (cleanup) {
          cleanup();
        }
        return callWithAsyncErrorHandling(source, instance, 3, [onCleanup]);
      };
    }
  } else {
    getter = NOOP;
  }
  if (cb && deep) {
    const baseGetter = getter;
    getter = () => traverse(baseGetter());
  }
  let cleanup;
  let onCleanup = (fn) => {
    cleanup = effect.onStop = () => {
      callWithErrorHandling(fn, instance, 4);
    };
  };
  let ssrCleanup;
  if (isInSSRComponentSetup) {
    onCleanup = NOOP;
    if (!cb) {
      getter();
    } else if (immediate) {
      callWithAsyncErrorHandling(cb, instance, 3, [
        getter(),
        isMultiSource ? [] : void 0,
        onCleanup
      ]);
    }
    if (flush === "sync") {
      const ctx = useSSRContext();
      ssrCleanup = ctx.__watcherHandles || (ctx.__watcherHandles = []);
    } else {
      return NOOP;
    }
  }
  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;
  const job = () => {
    if (!effect.active) {
      return;
    }
    if (cb) {
      const newValue = effect.run();
      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue)) || false) {
        if (cleanup) {
          cleanup();
        }
        callWithAsyncErrorHandling(cb, instance, 3, [
          newValue,
          oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,
          onCleanup
        ]);
        oldValue = newValue;
      }
    } else {
      effect.run();
    }
  };
  job.allowRecurse = !!cb;
  let scheduler;
  if (flush === "sync") {
    scheduler = job;
  } else if (flush === "post") {
    scheduler = () => queuePostRenderEffect(job, instance && instance.suspense);
  } else {
    job.pre = true;
    if (instance)
      job.id = instance.uid;
    scheduler = () => queueJob(job);
  }
  const effect = new ReactiveEffect(getter, scheduler);
  if (cb) {
    if (immediate) {
      job();
    } else {
      oldValue = effect.run();
    }
  } else if (flush === "post") {
    queuePostRenderEffect(effect.run.bind(effect), instance && instance.suspense);
  } else {
    effect.run();
  }
  const unwatch = () => {
    effect.stop();
    if (instance && instance.scope) {
      remove$1(instance.scope.effects, effect);
    }
  };
  if (ssrCleanup)
    ssrCleanup.push(unwatch);
  return unwatch;
}
function traverse(value, seen2) {
  if (!isObject$3(value) || value["__v_skip"]) {
    return value;
  }
  seen2 = seen2 || /* @__PURE__ */ new Set();
  if (seen2.has(value)) {
    return value;
  }
  seen2.add(value);
  if (isRef(value)) {
    traverse(value.value, seen2);
  } else if (isArray$2(value)) {
    for (let i = 0; i < value.length; i++) {
      traverse(value[i], seen2);
    }
  } else if (isSet(value) || isMap(value)) {
    value.forEach((v) => {
      traverse(v, seen2);
    });
  } else if (isPlainObject$3(value)) {
    for (const key in value) {
      traverse(value[key], seen2);
    }
  }
  return value;
}
function useTransitionState() {
  const state = {
    isMounted: false,
    isLeaving: false,
    isUnmounting: false,
    leavingVNodes: /* @__PURE__ */ new Map()
  };
  onMounted(() => {
    state.isMounted = true;
  });
  onBeforeUnmount(() => {
    state.isUnmounting = true;
  });
  return state;
}
const TransitionHookValidator = [Function, Array];
const BaseTransitionImpl = {
  name: `BaseTransition`,
  props: {
    mode: String,
    appear: Boolean,
    persisted: Boolean,
    onBeforeEnter: TransitionHookValidator,
    onEnter: TransitionHookValidator,
    onAfterEnter: TransitionHookValidator,
    onEnterCancelled: TransitionHookValidator,
    onBeforeLeave: TransitionHookValidator,
    onLeave: TransitionHookValidator,
    onAfterLeave: TransitionHookValidator,
    onLeaveCancelled: TransitionHookValidator,
    onBeforeAppear: TransitionHookValidator,
    onAppear: TransitionHookValidator,
    onAfterAppear: TransitionHookValidator,
    onAppearCancelled: TransitionHookValidator
  },
  setup(props, { slots }) {
    const instance = getCurrentInstance();
    const state = useTransitionState();
    let prevTransitionKey;
    return () => {
      const children = slots.default && getTransitionRawChildren(slots.default(), true);
      if (!children || !children.length) {
        return;
      }
      let child = children[0];
      if (children.length > 1) {
        for (const c of children) {
          if (c.type !== Comment) {
            child = c;
            break;
          }
        }
      }
      const rawProps = toRaw(props);
      const { mode } = rawProps;
      if (state.isLeaving) {
        return emptyPlaceholder(child);
      }
      const innerChild = getKeepAliveChild(child);
      if (!innerChild) {
        return emptyPlaceholder(child);
      }
      const enterHooks = resolveTransitionHooks(innerChild, rawProps, state, instance);
      setTransitionHooks(innerChild, enterHooks);
      const oldChild = instance.subTree;
      const oldInnerChild = oldChild && getKeepAliveChild(oldChild);
      let transitionKeyChanged = false;
      const { getTransitionKey } = innerChild.type;
      if (getTransitionKey) {
        const key = getTransitionKey();
        if (prevTransitionKey === void 0) {
          prevTransitionKey = key;
        } else if (key !== prevTransitionKey) {
          prevTransitionKey = key;
          transitionKeyChanged = true;
        }
      }
      if (oldInnerChild && oldInnerChild.type !== Comment && (!isSameVNodeType(innerChild, oldInnerChild) || transitionKeyChanged)) {
        const leavingHooks = resolveTransitionHooks(oldInnerChild, rawProps, state, instance);
        setTransitionHooks(oldInnerChild, leavingHooks);
        if (mode === "out-in") {
          state.isLeaving = true;
          leavingHooks.afterLeave = () => {
            state.isLeaving = false;
            if (instance.update.active !== false) {
              instance.update();
            }
          };
          return emptyPlaceholder(child);
        } else if (mode === "in-out" && innerChild.type !== Comment) {
          leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {
            const leavingVNodesCache = getLeavingNodesForType(state, oldInnerChild);
            leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;
            el._leaveCb = () => {
              earlyRemove();
              el._leaveCb = void 0;
              delete enterHooks.delayedLeave;
            };
            enterHooks.delayedLeave = delayedLeave;
          };
        }
      }
      return child;
    };
  }
};
const BaseTransition = BaseTransitionImpl;
function getLeavingNodesForType(state, vnode) {
  const { leavingVNodes } = state;
  let leavingVNodesCache = leavingVNodes.get(vnode.type);
  if (!leavingVNodesCache) {
    leavingVNodesCache = /* @__PURE__ */ Object.create(null);
    leavingVNodes.set(vnode.type, leavingVNodesCache);
  }
  return leavingVNodesCache;
}
function resolveTransitionHooks(vnode, props, state, instance) {
  const { appear, mode, persisted = false, onBeforeEnter, onEnter, onAfterEnter, onEnterCancelled, onBeforeLeave, onLeave, onAfterLeave, onLeaveCancelled, onBeforeAppear, onAppear, onAfterAppear, onAppearCancelled } = props;
  const key = String(vnode.key);
  const leavingVNodesCache = getLeavingNodesForType(state, vnode);
  const callHook2 = (hook, args) => {
    hook && callWithAsyncErrorHandling(hook, instance, 9, args);
  };
  const callAsyncHook = (hook, args) => {
    const done = args[1];
    callHook2(hook, args);
    if (isArray$2(hook)) {
      if (hook.every((hook2) => hook2.length <= 1))
        done();
    } else if (hook.length <= 1) {
      done();
    }
  };
  const hooks = {
    mode,
    persisted,
    beforeEnter(el) {
      let hook = onBeforeEnter;
      if (!state.isMounted) {
        if (appear) {
          hook = onBeforeAppear || onBeforeEnter;
        } else {
          return;
        }
      }
      if (el._leaveCb) {
        el._leaveCb(true);
      }
      const leavingVNode = leavingVNodesCache[key];
      if (leavingVNode && isSameVNodeType(vnode, leavingVNode) && leavingVNode.el._leaveCb) {
        leavingVNode.el._leaveCb();
      }
      callHook2(hook, [el]);
    },
    enter(el) {
      let hook = onEnter;
      let afterHook = onAfterEnter;
      let cancelHook = onEnterCancelled;
      if (!state.isMounted) {
        if (appear) {
          hook = onAppear || onEnter;
          afterHook = onAfterAppear || onAfterEnter;
          cancelHook = onAppearCancelled || onEnterCancelled;
        } else {
          return;
        }
      }
      let called = false;
      const done = el._enterCb = (cancelled) => {
        if (called)
          return;
        called = true;
        if (cancelled) {
          callHook2(cancelHook, [el]);
        } else {
          callHook2(afterHook, [el]);
        }
        if (hooks.delayedLeave) {
          hooks.delayedLeave();
        }
        el._enterCb = void 0;
      };
      if (hook) {
        callAsyncHook(hook, [el, done]);
      } else {
        done();
      }
    },
    leave(el, remove2) {
      const key2 = String(vnode.key);
      if (el._enterCb) {
        el._enterCb(true);
      }
      if (state.isUnmounting) {
        return remove2();
      }
      callHook2(onBeforeLeave, [el]);
      let called = false;
      const done = el._leaveCb = (cancelled) => {
        if (called)
          return;
        called = true;
        remove2();
        if (cancelled) {
          callHook2(onLeaveCancelled, [el]);
        } else {
          callHook2(onAfterLeave, [el]);
        }
        el._leaveCb = void 0;
        if (leavingVNodesCache[key2] === vnode) {
          delete leavingVNodesCache[key2];
        }
      };
      leavingVNodesCache[key2] = vnode;
      if (onLeave) {
        callAsyncHook(onLeave, [el, done]);
      } else {
        done();
      }
    },
    clone(vnode2) {
      return resolveTransitionHooks(vnode2, props, state, instance);
    }
  };
  return hooks;
}
function emptyPlaceholder(vnode) {
  if (isKeepAlive(vnode)) {
    vnode = cloneVNode(vnode);
    vnode.children = null;
    return vnode;
  }
}
function getKeepAliveChild(vnode) {
  return isKeepAlive(vnode) ? vnode.children ? vnode.children[0] : void 0 : vnode;
}
function setTransitionHooks(vnode, hooks) {
  if (vnode.shapeFlag & 6 && vnode.component) {
    setTransitionHooks(vnode.component.subTree, hooks);
  } else if (vnode.shapeFlag & 128) {
    vnode.ssContent.transition = hooks.clone(vnode.ssContent);
    vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);
  } else {
    vnode.transition = hooks;
  }
}
function getTransitionRawChildren(children, keepComment = false, parentKey) {
  let ret = [];
  let keyedFragmentCount = 0;
  for (let i = 0; i < children.length; i++) {
    let child = children[i];
    const key = parentKey == null ? child.key : String(parentKey) + String(child.key != null ? child.key : i);
    if (child.type === Fragment) {
      if (child.patchFlag & 128)
        keyedFragmentCount++;
      ret = ret.concat(getTransitionRawChildren(child.children, keepComment, key));
    } else if (keepComment || child.type !== Comment) {
      ret.push(key != null ? cloneVNode(child, { key }) : child);
    }
  }
  if (keyedFragmentCount > 1) {
    for (let i = 0; i < ret.length; i++) {
      ret[i].patchFlag = -2;
    }
  }
  return ret;
}
function defineComponent(options) {
  return isFunction$1(options) ? { setup: options, name: options.name } : options;
}
const isAsyncWrapper = (i) => !!i.type.__asyncLoader;
const isKeepAlive = (vnode) => vnode.type.__isKeepAlive;
function onActivated(hook, target2) {
  registerKeepAliveHook(hook, "a", target2);
}
function onDeactivated(hook, target2) {
  registerKeepAliveHook(hook, "da", target2);
}
function registerKeepAliveHook(hook, type, target2 = currentInstance) {
  const wrappedHook = hook.__wdc || (hook.__wdc = () => {
    let current = target2;
    while (current) {
      if (current.isDeactivated) {
        return;
      }
      current = current.parent;
    }
    return hook();
  });
  injectHook(type, wrappedHook, target2);
  if (target2) {
    let current = target2.parent;
    while (current && current.parent) {
      if (isKeepAlive(current.parent.vnode)) {
        injectToKeepAliveRoot(wrappedHook, type, target2, current);
      }
      current = current.parent;
    }
  }
}
function injectToKeepAliveRoot(hook, type, target2, keepAliveRoot) {
  const injected = injectHook(type, hook, keepAliveRoot, true);
  onUnmounted(() => {
    remove$1(keepAliveRoot[type], injected);
  }, target2);
}
function injectHook(type, hook, target2 = currentInstance, prepend = false) {
  if (target2) {
    const hooks = target2[type] || (target2[type] = []);
    const wrappedHook = hook.__weh || (hook.__weh = (...args) => {
      if (target2.isUnmounted) {
        return;
      }
      pauseTracking();
      setCurrentInstance(target2);
      const res = callWithAsyncErrorHandling(hook, target2, type, args);
      unsetCurrentInstance();
      resetTracking();
      return res;
    });
    if (prepend) {
      hooks.unshift(wrappedHook);
    } else {
      hooks.push(wrappedHook);
    }
    return wrappedHook;
  }
}
const createHook = (lifecycle) => (hook, target2 = currentInstance) => (!isInSSRComponentSetup || lifecycle === "sp") && injectHook(lifecycle, (...args) => hook(...args), target2);
const onBeforeMount = createHook("bm");
const onMounted = createHook("m");
const onBeforeUpdate = createHook("bu");
const onUpdated = createHook("u");
const onBeforeUnmount = createHook("bum");
const onUnmounted = createHook("um");
function withDirectives(vnode, directives) {
  const internalInstance = currentRenderingInstance;
  if (internalInstance === null) {
    return vnode;
  }
  const instance = getExposeProxy(internalInstance) || internalInstance.proxy;
  const bindings = vnode.dirs || (vnode.dirs = []);
  for (let i = 0; i < directives.length; i++) {
    let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];
    if (dir) {
      if (isFunction$1(dir)) {
        dir = {
          mounted: dir,
          updated: dir
        };
      }
      if (dir.deep) {
        traverse(value);
      }
      bindings.push({
        dir,
        instance,
        value,
        oldValue: void 0,
        arg,
        modifiers
      });
    }
  }
  return vnode;
}
function invokeDirectiveHook(vnode, prevVNode, instance, name) {
  const bindings = vnode.dirs;
  const oldBindings = prevVNode && prevVNode.dirs;
  for (let i = 0; i < bindings.length; i++) {
    const binding = bindings[i];
    if (oldBindings) {
      binding.oldValue = oldBindings[i].value;
    }
    let hook = binding.dir[name];
    if (hook) {
      pauseTracking();
      callWithAsyncErrorHandling(hook, instance, 8, [
        vnode.el,
        binding,
        vnode,
        prevVNode
      ]);
      resetTracking();
    }
  }
}
const COMPONENTS = "components";
function resolveComponent(name, maybeSelfReference) {
  return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;
}
const NULL_DYNAMIC_COMPONENT = Symbol();
function resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {
  const instance = currentRenderingInstance || currentInstance;
  if (instance) {
    const Component = instance.type;
    if (type === COMPONENTS) {
      const selfName = getComponentName(Component, false);
      if (selfName && (selfName === name || selfName === camelize(name) || selfName === capitalize$1(camelize(name)))) {
        return Component;
      }
    }
    const res = resolve(instance[type] || Component[type], name) || resolve(instance.appContext[type], name);
    if (!res && maybeSelfReference) {
      return Component;
    }
    return res;
  }
}
function resolve(registry, name) {
  return registry && (registry[name] || registry[camelize(name)] || registry[capitalize$1(camelize(name))]);
}
function renderList(source, renderItem, cache2, index) {
  let ret;
  const cached = cache2 && cache2[index];
  if (isArray$2(source) || isString$1(source)) {
    ret = new Array(source.length);
    for (let i = 0, l = source.length; i < l; i++) {
      ret[i] = renderItem(source[i], i, void 0, cached && cached[i]);
    }
  } else if (typeof source === "number") {
    ret = new Array(source);
    for (let i = 0; i < source; i++) {
      ret[i] = renderItem(i + 1, i, void 0, cached && cached[i]);
    }
  } else if (isObject$3(source)) {
    if (source[Symbol.iterator]) {
      ret = Array.from(source, (item, i) => renderItem(item, i, void 0, cached && cached[i]));
    } else {
      const keys = Object.keys(source);
      ret = new Array(keys.length);
      for (let i = 0, l = keys.length; i < l; i++) {
        const key = keys[i];
        ret[i] = renderItem(source[key], key, i, cached && cached[i]);
      }
    }
  } else {
    ret = [];
  }
  if (cache2) {
    cache2[index] = ret;
  }
  return ret;
}
function createSlots(slots, dynamicSlots) {
  for (let i = 0; i < dynamicSlots.length; i++) {
    const slot = dynamicSlots[i];
    if (isArray$2(slot)) {
      for (let j = 0; j < slot.length; j++) {
        slots[slot[j].name] = slot[j].fn;
      }
    } else if (slot) {
      slots[slot.name] = slot.key ? (...args) => {
        const res = slot.fn(...args);
        if (res)
          res.key = slot.key;
        return res;
      } : slot.fn;
    }
  }
  return slots;
}
function renderSlot(slots, name, props = {}, fallback, noSlotted) {
  if (currentRenderingInstance.isCE || currentRenderingInstance.parent && isAsyncWrapper(currentRenderingInstance.parent) && currentRenderingInstance.parent.isCE) {
    if (name !== "default")
      props.name = name;
    return createVNode("slot", props, fallback && fallback());
  }
  let slot = slots[name];
  if (slot && slot._c) {
    slot._d = false;
  }
  openBlock();
  const validSlotContent = slot && ensureValidVNode(slot(props));
  const rendered = createBlock(Fragment, {
    key: props.key || validSlotContent && validSlotContent.key || `_${name}`
  }, validSlotContent || (fallback ? fallback() : []), validSlotContent && slots._ === 1 ? 64 : -2);
  if (!noSlotted && rendered.scopeId) {
    rendered.slotScopeIds = [rendered.scopeId + "-s"];
  }
  if (slot && slot._c) {
    slot._d = true;
  }
  return rendered;
}
function ensureValidVNode(vnodes) {
  return vnodes.some((child) => {
    if (!isVNode$1(child))
      return true;
    if (child.type === Comment)
      return false;
    if (child.type === Fragment && !ensureValidVNode(child.children))
      return false;
    return true;
  }) ? vnodes : null;
}
const getPublicInstance = (i) => {
  if (!i)
    return null;
  if (isStatefulComponent(i))
    return getExposeProxy(i) || i.proxy;
  return getPublicInstance(i.parent);
};
const publicPropertiesMap = /* @__PURE__ */ extend$1(/* @__PURE__ */ Object.create(null), {
  $: (i) => i,
  $el: (i) => i.vnode.el,
  $data: (i) => i.data,
  $props: (i) => i.props,
  $attrs: (i) => i.attrs,
  $slots: (i) => i.slots,
  $refs: (i) => i.refs,
  $parent: (i) => getPublicInstance(i.parent),
  $root: (i) => getPublicInstance(i.root),
  $emit: (i) => i.emit,
  $options: (i) => i.type,
  $forceUpdate: (i) => i.f || (i.f = () => queueJob(i.update)),
  $nextTick: (i) => i.n || (i.n = nextTick.bind(i.proxy)),
  $watch: (i) => NOOP
});
const hasSetupBinding = (state, key) => state !== EMPTY_OBJ && !state.__isScriptSetup && hasOwn$2(state, key);
const PublicInstanceProxyHandlers = {
  get({ _: instance }, key) {
    const { ctx, setupState, data, props, accessCache, type, appContext } = instance;
    let normalizedProps;
    if (key[0] !== "$") {
      const n = accessCache[key];
      if (n !== void 0) {
        switch (n) {
          case 1:
            return setupState[key];
          case 2:
            return data[key];
          case 4:
            return ctx[key];
          case 3:
            return props[key];
        }
      } else if (hasSetupBinding(setupState, key)) {
        accessCache[key] = 1;
        return setupState[key];
      } else if (data !== EMPTY_OBJ && hasOwn$2(data, key)) {
        accessCache[key] = 2;
        return data[key];
      } else if ((normalizedProps = instance.propsOptions[0]) && hasOwn$2(normalizedProps, key)) {
        accessCache[key] = 3;
        return props[key];
      } else if (ctx !== EMPTY_OBJ && hasOwn$2(ctx, key)) {
        accessCache[key] = 4;
        return ctx[key];
      } else {
        accessCache[key] = 0;
      }
    }
    const publicGetter = publicPropertiesMap[key];
    let cssModule, globalProperties;
    if (publicGetter) {
      if (key === "$attrs") {
        track(instance, "get", key);
      }
      return publicGetter(instance);
    } else if ((cssModule = type.__cssModules) && (cssModule = cssModule[key])) {
      return cssModule;
    } else if (ctx !== EMPTY_OBJ && hasOwn$2(ctx, key)) {
      accessCache[key] = 4;
      return ctx[key];
    } else if (globalProperties = appContext.config.globalProperties, hasOwn$2(globalProperties, key)) {
      {
        return globalProperties[key];
      }
    } else
      ;
  },
  set({ _: instance }, key, value) {
    const { data, setupState, ctx } = instance;
    if (hasSetupBinding(setupState, key)) {
      setupState[key] = value;
      return true;
    } else if (data !== EMPTY_OBJ && hasOwn$2(data, key)) {
      data[key] = value;
      return true;
    } else if (hasOwn$2(instance.props, key)) {
      return false;
    }
    if (key[0] === "$" && key.slice(1) in instance) {
      return false;
    } else {
      {
        ctx[key] = value;
      }
    }
    return true;
  },
  has({ _: { data, setupState, accessCache, ctx, appContext, propsOptions } }, key) {
    let normalizedProps;
    return !!accessCache[key] || data !== EMPTY_OBJ && hasOwn$2(data, key) || hasSetupBinding(setupState, key) || (normalizedProps = propsOptions[0]) && hasOwn$2(normalizedProps, key) || hasOwn$2(ctx, key) || hasOwn$2(publicPropertiesMap, key) || hasOwn$2(appContext.config.globalProperties, key);
  },
  defineProperty(target2, key, descriptor) {
    if (descriptor.get != null) {
      target2._.accessCache[key] = 0;
    } else if (hasOwn$2(descriptor, "value")) {
      this.set(target2, key, descriptor.value, null);
    }
    return Reflect.defineProperty(target2, key, descriptor);
  }
};
function resolveMergedOptions(instance) {
  const base2 = instance.type;
  const { mixins, extends: extendsOptions } = base2;
  const { mixins: globalMixins, optionsCache: cache2, config: { optionMergeStrategies } } = instance.appContext;
  const cached = cache2.get(base2);
  let resolved;
  if (cached) {
    resolved = cached;
  } else if (!globalMixins.length && !mixins && !extendsOptions) {
    {
      resolved = base2;
    }
  } else {
    resolved = {};
    if (globalMixins.length) {
      globalMixins.forEach((m) => mergeOptions$1(resolved, m, optionMergeStrategies, true));
    }
    mergeOptions$1(resolved, base2, optionMergeStrategies);
  }
  if (isObject$3(base2)) {
    cache2.set(base2, resolved);
  }
  return resolved;
}
function mergeOptions$1(to, from, strats, asMixin = false) {
  const { mixins, extends: extendsOptions } = from;
  if (extendsOptions) {
    mergeOptions$1(to, extendsOptions, strats, true);
  }
  if (mixins) {
    mixins.forEach((m) => mergeOptions$1(to, m, strats, true));
  }
  for (const key in from) {
    if (asMixin && key === "expose")
      ;
    else {
      const strat = internalOptionMergeStrats[key] || strats && strats[key];
      to[key] = strat ? strat(to[key], from[key]) : from[key];
    }
  }
  return to;
}
const internalOptionMergeStrats = {
  data: mergeDataFn,
  props: mergeObjectOptions,
  emits: mergeObjectOptions,
  methods: mergeObjectOptions,
  computed: mergeObjectOptions,
  beforeCreate: mergeAsArray,
  created: mergeAsArray,
  beforeMount: mergeAsArray,
  mounted: mergeAsArray,
  beforeUpdate: mergeAsArray,
  updated: mergeAsArray,
  beforeDestroy: mergeAsArray,
  beforeUnmount: mergeAsArray,
  destroyed: mergeAsArray,
  unmounted: mergeAsArray,
  activated: mergeAsArray,
  deactivated: mergeAsArray,
  errorCaptured: mergeAsArray,
  serverPrefetch: mergeAsArray,
  components: mergeObjectOptions,
  directives: mergeObjectOptions,
  watch: mergeWatchOptions,
  provide: mergeDataFn,
  inject: mergeInject
};
function mergeDataFn(to, from) {
  if (!from) {
    return to;
  }
  if (!to) {
    return from;
  }
  return function mergedDataFn() {
    return extend$1(isFunction$1(to) ? to.call(this, this) : to, isFunction$1(from) ? from.call(this, this) : from);
  };
}
function mergeInject(to, from) {
  return mergeObjectOptions(normalizeInject(to), normalizeInject(from));
}
function normalizeInject(raw) {
  if (isArray$2(raw)) {
    const res = {};
    for (let i = 0; i < raw.length; i++) {
      res[raw[i]] = raw[i];
    }
    return res;
  }
  return raw;
}
function mergeAsArray(to, from) {
  return to ? [...new Set([].concat(to, from))] : from;
}
function mergeObjectOptions(to, from) {
  return to ? extend$1(extend$1(/* @__PURE__ */ Object.create(null), to), from) : from;
}
function mergeWatchOptions(to, from) {
  if (!to)
    return from;
  if (!from)
    return to;
  const merged = extend$1(/* @__PURE__ */ Object.create(null), to);
  for (const key in from) {
    merged[key] = mergeAsArray(to[key], from[key]);
  }
  return merged;
}
function initProps(instance, rawProps, isStateful, isSSR = false) {
  const props = {};
  const attrs = {};
  def(attrs, InternalObjectKey, 1);
  instance.propsDefaults = /* @__PURE__ */ Object.create(null);
  setFullProps(instance, rawProps, props, attrs);
  for (const key in instance.propsOptions[0]) {
    if (!(key in props)) {
      props[key] = void 0;
    }
  }
  if (isStateful) {
    instance.props = isSSR ? props : shallowReactive(props);
  } else {
    if (!instance.type.props) {
      instance.props = attrs;
    } else {
      instance.props = props;
    }
  }
  instance.attrs = attrs;
}
function updateProps(instance, rawProps, rawPrevProps, optimized) {
  const { props, attrs, vnode: { patchFlag } } = instance;
  const rawCurrentProps = toRaw(props);
  const [options] = instance.propsOptions;
  let hasAttrsChanged = false;
  if ((optimized || patchFlag > 0) && !(patchFlag & 16)) {
    if (patchFlag & 8) {
      const propsToUpdate = instance.vnode.dynamicProps;
      for (let i = 0; i < propsToUpdate.length; i++) {
        let key = propsToUpdate[i];
        if (isEmitListener(instance.emitsOptions, key)) {
          continue;
        }
        const value = rawProps[key];
        if (options) {
          if (hasOwn$2(attrs, key)) {
            if (value !== attrs[key]) {
              attrs[key] = value;
              hasAttrsChanged = true;
            }
          } else {
            const camelizedKey = camelize(key);
            props[camelizedKey] = resolvePropValue(options, rawCurrentProps, camelizedKey, value, instance, false);
          }
        } else {
          if (value !== attrs[key]) {
            attrs[key] = value;
            hasAttrsChanged = true;
          }
        }
      }
    }
  } else {
    if (setFullProps(instance, rawProps, props, attrs)) {
      hasAttrsChanged = true;
    }
    let kebabKey;
    for (const key in rawCurrentProps) {
      if (!rawProps || !hasOwn$2(rawProps, key) && ((kebabKey = hyphenate(key)) === key || !hasOwn$2(rawProps, kebabKey))) {
        if (options) {
          if (rawPrevProps && (rawPrevProps[key] !== void 0 || rawPrevProps[kebabKey] !== void 0)) {
            props[key] = resolvePropValue(options, rawCurrentProps, key, void 0, instance, true);
          }
        } else {
          delete props[key];
        }
      }
    }
    if (attrs !== rawCurrentProps) {
      for (const key in attrs) {
        if (!rawProps || !hasOwn$2(rawProps, key) && true) {
          delete attrs[key];
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (hasAttrsChanged) {
    trigger(instance, "set", "$attrs");
  }
}
function setFullProps(instance, rawProps, props, attrs) {
  const [options, needCastKeys] = instance.propsOptions;
  let hasAttrsChanged = false;
  let rawCastValues;
  if (rawProps) {
    for (let key in rawProps) {
      if (isReservedProp(key)) {
        continue;
      }
      const value = rawProps[key];
      let camelKey;
      if (options && hasOwn$2(options, camelKey = camelize(key))) {
        if (!needCastKeys || !needCastKeys.includes(camelKey)) {
          props[camelKey] = value;
        } else {
          (rawCastValues || (rawCastValues = {}))[camelKey] = value;
        }
      } else if (!isEmitListener(instance.emitsOptions, key)) {
        if (!(key in attrs) || value !== attrs[key]) {
          attrs[key] = value;
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (needCastKeys) {
    const rawCurrentProps = toRaw(props);
    const castValues = rawCastValues || EMPTY_OBJ;
    for (let i = 0; i < needCastKeys.length; i++) {
      const key = needCastKeys[i];
      props[key] = resolvePropValue(options, rawCurrentProps, key, castValues[key], instance, !hasOwn$2(castValues, key));
    }
  }
  return hasAttrsChanged;
}
function resolvePropValue(options, props, key, value, instance, isAbsent) {
  const opt = options[key];
  if (opt != null) {
    const hasDefault = hasOwn$2(opt, "default");
    if (hasDefault && value === void 0) {
      const defaultValue = opt.default;
      if (opt.type !== Function && isFunction$1(defaultValue)) {
        const { propsDefaults } = instance;
        if (key in propsDefaults) {
          value = propsDefaults[key];
        } else {
          setCurrentInstance(instance);
          value = propsDefaults[key] = defaultValue.call(null, props);
          unsetCurrentInstance();
        }
      } else {
        value = defaultValue;
      }
    }
    if (opt[0]) {
      if (isAbsent && !hasDefault) {
        value = false;
      } else if (opt[1] && (value === "" || value === hyphenate(key))) {
        value = true;
      }
    }
  }
  return value;
}
function normalizePropsOptions(comp, appContext, asMixin = false) {
  const cache2 = appContext.propsCache;
  const cached = cache2.get(comp);
  if (cached) {
    return cached;
  }
  const raw = comp.props;
  const normalized = {};
  const needCastKeys = [];
  let hasExtends = false;
  if (!raw && !hasExtends) {
    if (isObject$3(comp)) {
      cache2.set(comp, EMPTY_ARR);
    }
    return EMPTY_ARR;
  }
  if (isArray$2(raw)) {
    for (let i = 0; i < raw.length; i++) {
      const normalizedKey = camelize(raw[i]);
      if (validatePropName(normalizedKey)) {
        normalized[normalizedKey] = EMPTY_OBJ;
      }
    }
  } else if (raw) {
    for (const key in raw) {
      const normalizedKey = camelize(key);
      if (validatePropName(normalizedKey)) {
        const opt = raw[key];
        const prop = normalized[normalizedKey] = isArray$2(opt) || isFunction$1(opt) ? { type: opt } : Object.assign({}, opt);
        if (prop) {
          const booleanIndex = getTypeIndex(Boolean, prop.type);
          const stringIndex = getTypeIndex(String, prop.type);
          prop[0] = booleanIndex > -1;
          prop[1] = stringIndex < 0 || booleanIndex < stringIndex;
          if (booleanIndex > -1 || hasOwn$2(prop, "default")) {
            needCastKeys.push(normalizedKey);
          }
        }
      }
    }
  }
  const res = [normalized, needCastKeys];
  if (isObject$3(comp)) {
    cache2.set(comp, res);
  }
  return res;
}
function validatePropName(key) {
  if (key[0] !== "$") {
    return true;
  }
  return false;
}
function getType(ctor) {
  const match = ctor && ctor.toString().match(/^\s*function (\w+)/);
  return match ? match[1] : ctor === null ? "null" : "";
}
function isSameType(a, b) {
  return getType(a) === getType(b);
}
function getTypeIndex(type, expectedTypes) {
  if (isArray$2(expectedTypes)) {
    return expectedTypes.findIndex((t2) => isSameType(t2, type));
  } else if (isFunction$1(expectedTypes)) {
    return isSameType(expectedTypes, type) ? 0 : -1;
  }
  return -1;
}
const isInternalKey = (key) => key[0] === "_" || key === "$stable";
const normalizeSlotValue = (value) => isArray$2(value) ? value.map(normalizeVNode) : [normalizeVNode(value)];
const normalizeSlot$1 = (key, rawSlot, ctx) => {
  if (rawSlot._n) {
    return rawSlot;
  }
  const normalized = withCtx((...args) => {
    if (false)
      ;
    return normalizeSlotValue(rawSlot(...args));
  }, ctx);
  normalized._c = false;
  return normalized;
};
const normalizeObjectSlots = (rawSlots, slots, instance) => {
  const ctx = rawSlots._ctx;
  for (const key in rawSlots) {
    if (isInternalKey(key))
      continue;
    const value = rawSlots[key];
    if (isFunction$1(value)) {
      slots[key] = normalizeSlot$1(key, value, ctx);
    } else if (value != null) {
      const normalized = normalizeSlotValue(value);
      slots[key] = () => normalized;
    }
  }
};
const normalizeVNodeSlots = (instance, children) => {
  const normalized = normalizeSlotValue(children);
  instance.slots.default = () => normalized;
};
const initSlots = (instance, children) => {
  if (instance.vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      instance.slots = toRaw(children);
      def(children, "_", type);
    } else {
      normalizeObjectSlots(children, instance.slots = {});
    }
  } else {
    instance.slots = {};
    if (children) {
      normalizeVNodeSlots(instance, children);
    }
  }
  def(instance.slots, InternalObjectKey, 1);
};
const updateSlots = (instance, children, optimized) => {
  const { vnode, slots } = instance;
  let needDeletionCheck = true;
  let deletionComparisonTarget = EMPTY_OBJ;
  if (vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      if (optimized && type === 1) {
        needDeletionCheck = false;
      } else {
        extend$1(slots, children);
        if (!optimized && type === 1) {
          delete slots._;
        }
      }
    } else {
      needDeletionCheck = !children.$stable;
      normalizeObjectSlots(children, slots);
    }
    deletionComparisonTarget = children;
  } else if (children) {
    normalizeVNodeSlots(instance, children);
    deletionComparisonTarget = { default: 1 };
  }
  if (needDeletionCheck) {
    for (const key in slots) {
      if (!isInternalKey(key) && !(key in deletionComparisonTarget)) {
        delete slots[key];
      }
    }
  }
};
function createAppContext() {
  return {
    app: null,
    config: {
      isNativeTag: NO,
      performance: false,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: /* @__PURE__ */ Object.create(null),
    optionsCache: /* @__PURE__ */ new WeakMap(),
    propsCache: /* @__PURE__ */ new WeakMap(),
    emitsCache: /* @__PURE__ */ new WeakMap()
  };
}
let uid$1 = 0;
function createAppAPI(render, hydrate) {
  return function createApp2(rootComponent, rootProps = null) {
    if (!isFunction$1(rootComponent)) {
      rootComponent = Object.assign({}, rootComponent);
    }
    if (rootProps != null && !isObject$3(rootProps)) {
      rootProps = null;
    }
    const context = createAppContext();
    const installedPlugins = /* @__PURE__ */ new Set();
    let isMounted = false;
    const app2 = context.app = {
      _uid: uid$1++,
      _component: rootComponent,
      _props: rootProps,
      _container: null,
      _context: context,
      _instance: null,
      version,
      get config() {
        return context.config;
      },
      set config(v) {
      },
      use(plugin, ...options) {
        if (installedPlugins.has(plugin))
          ;
        else if (plugin && isFunction$1(plugin.install)) {
          installedPlugins.add(plugin);
          plugin.install(app2, ...options);
        } else if (isFunction$1(plugin)) {
          installedPlugins.add(plugin);
          plugin(app2, ...options);
        } else
          ;
        return app2;
      },
      mixin(mixin) {
        return app2;
      },
      component(name, component) {
        if (!component) {
          return context.components[name];
        }
        context.components[name] = component;
        return app2;
      },
      directive(name, directive) {
        if (!directive) {
          return context.directives[name];
        }
        context.directives[name] = directive;
        return app2;
      },
      mount(rootContainer, isHydrate, isSVG) {
        if (!isMounted) {
          const vnode = createVNode(rootComponent, rootProps);
          vnode.appContext = context;
          if (isHydrate && hydrate) {
            hydrate(vnode, rootContainer);
          } else {
            render(vnode, rootContainer, isSVG);
          }
          isMounted = true;
          app2._container = rootContainer;
          rootContainer.__vue_app__ = app2;
          {
            app2._instance = vnode.component;
            devtoolsInitApp(app2, version);
          }
          return getExposeProxy(vnode.component) || vnode.component.proxy;
        }
      },
      unmount() {
        if (isMounted) {
          render(null, app2._container);
          {
            app2._instance = null;
            devtoolsUnmountApp(app2);
          }
          delete app2._container.__vue_app__;
        }
      },
      provide(key, value) {
        context.provides[key] = value;
        return app2;
      }
    };
    return app2;
  };
}
function setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {
  if (isArray$2(rawRef)) {
    rawRef.forEach((r, i) => setRef(r, oldRawRef && (isArray$2(oldRawRef) ? oldRawRef[i] : oldRawRef), parentSuspense, vnode, isUnmount));
    return;
  }
  if (isAsyncWrapper(vnode) && !isUnmount) {
    return;
  }
  const refValue = vnode.shapeFlag & 4 ? getExposeProxy(vnode.component) || vnode.component.proxy : vnode.el;
  const value = isUnmount ? null : refValue;
  const { i: owner, r: ref2 } = rawRef;
  const oldRef = oldRawRef && oldRawRef.r;
  const refs = owner.refs === EMPTY_OBJ ? owner.refs = {} : owner.refs;
  const setupState = owner.setupState;
  if (oldRef != null && oldRef !== ref2) {
    if (isString$1(oldRef)) {
      refs[oldRef] = null;
      if (hasOwn$2(setupState, oldRef)) {
        setupState[oldRef] = null;
      }
    } else if (isRef(oldRef)) {
      oldRef.value = null;
    }
  }
  if (isFunction$1(ref2)) {
    callWithErrorHandling(ref2, owner, 12, [value, refs]);
  } else {
    const _isString = isString$1(ref2);
    const _isRef = isRef(ref2);
    if (_isString || _isRef) {
      const doSet = () => {
        if (rawRef.f) {
          const existing = _isString ? hasOwn$2(setupState, ref2) ? setupState[ref2] : refs[ref2] : ref2.value;
          if (isUnmount) {
            isArray$2(existing) && remove$1(existing, refValue);
          } else {
            if (!isArray$2(existing)) {
              if (_isString) {
                refs[ref2] = [refValue];
                if (hasOwn$2(setupState, ref2)) {
                  setupState[ref2] = refs[ref2];
                }
              } else {
                ref2.value = [refValue];
                if (rawRef.k)
                  refs[rawRef.k] = ref2.value;
              }
            } else if (!existing.includes(refValue)) {
              existing.push(refValue);
            }
          }
        } else if (_isString) {
          refs[ref2] = value;
          if (hasOwn$2(setupState, ref2)) {
            setupState[ref2] = value;
          }
        } else if (_isRef) {
          ref2.value = value;
          if (rawRef.k)
            refs[rawRef.k] = value;
        } else
          ;
      };
      if (value) {
        doSet.id = -1;
        queuePostRenderEffect(doSet, parentSuspense);
      } else {
        doSet();
      }
    }
  }
}
const queuePostRenderEffect = queueEffectWithSuspense;
function createRenderer(options) {
  return baseCreateRenderer(options);
}
function baseCreateRenderer(options, createHydrationFns) {
  const target2 = getGlobalThis$1();
  target2.__VUE__ = true;
  {
    setDevtoolsHook(target2.__VUE_DEVTOOLS_GLOBAL_HOOK__, target2);
  }
  const { insert: hostInsert, remove: hostRemove, patchProp: hostPatchProp, createElement: hostCreateElement, createText: hostCreateText, createComment: hostCreateComment, setText: hostSetText, setElementText: hostSetElementText, parentNode: hostParentNode, nextSibling: hostNextSibling, setScopeId: hostSetScopeId = NOOP, insertStaticContent: hostInsertStaticContent } = options;
  const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, isSVG = false, slotScopeIds = null, optimized = !!n2.dynamicChildren) => {
    if (n1 === n2) {
      return;
    }
    if (n1 && !isSameVNodeType(n1, n2)) {
      anchor = getNextHostNode(n1);
      unmount(n1, parentComponent, parentSuspense, true);
      n1 = null;
    }
    if (n2.patchFlag === -2) {
      optimized = false;
      n2.dynamicChildren = null;
    }
    const { type, ref: ref2, shapeFlag } = n2;
    switch (type) {
      case Text:
        processText(n1, n2, container, anchor);
        break;
      case Comment:
        processCommentNode(n1, n2, container, anchor);
        break;
      case Static:
        if (n1 == null) {
          mountStaticNode(n2, container, anchor, isSVG);
        }
        break;
      case Fragment:
        processFragment(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        break;
      default:
        if (shapeFlag & 1) {
          processElement(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (shapeFlag & 6) {
          processComponent(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (shapeFlag & 64) {
          type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);
        } else if (shapeFlag & 128) {
          type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);
        } else
          ;
    }
    if (ref2 != null && parentComponent) {
      setRef(ref2, n1 && n1.ref, parentSuspense, n2 || n1, !n2);
    }
  };
  const processText = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(n2.el = hostCreateText(n2.children), container, anchor);
    } else {
      const el = n2.el = n1.el;
      if (n2.children !== n1.children) {
        hostSetText(el, n2.children);
      }
    }
  };
  const processCommentNode = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(n2.el = hostCreateComment(n2.children || ""), container, anchor);
    } else {
      n2.el = n1.el;
    }
  };
  const mountStaticNode = (n2, container, anchor, isSVG) => {
    [n2.el, n2.anchor] = hostInsertStaticContent(n2.children, container, anchor, isSVG, n2.el, n2.anchor);
  };
  const moveStaticNode = ({ el, anchor }, container, nextSibling) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostInsert(el, container, nextSibling);
      el = next;
    }
    hostInsert(anchor, container, nextSibling);
  };
  const removeStaticNode = ({ el, anchor }) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostRemove(el);
      el = next;
    }
    hostRemove(anchor);
  };
  const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    isSVG = isSVG || n2.type === "svg";
    if (n1 == null) {
      mountElement(n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    } else {
      patchElement(n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
  };
  const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    let el;
    let vnodeHook;
    const { type, props, shapeFlag, transition, dirs } = vnode;
    el = vnode.el = hostCreateElement(vnode.type, isSVG, props && props.is, props);
    if (shapeFlag & 8) {
      hostSetElementText(el, vnode.children);
    } else if (shapeFlag & 16) {
      mountChildren(vnode.children, el, null, parentComponent, parentSuspense, isSVG && type !== "foreignObject", slotScopeIds, optimized);
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "created");
    }
    if (props) {
      for (const key in props) {
        if (key !== "value" && !isReservedProp(key)) {
          hostPatchProp(el, key, null, props[key], isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
        }
      }
      if ("value" in props) {
        hostPatchProp(el, "value", null, props.value);
      }
      if (vnodeHook = props.onVnodeBeforeMount) {
        invokeVNodeHook(vnodeHook, parentComponent, vnode);
      }
    }
    setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);
    {
      Object.defineProperty(el, "__vnode", {
        value: vnode,
        enumerable: false
      });
      Object.defineProperty(el, "__vueParentComponent", {
        value: parentComponent,
        enumerable: false
      });
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "beforeMount");
    }
    const needCallTransitionHooks = (!parentSuspense || parentSuspense && !parentSuspense.pendingBranch) && transition && !transition.persisted;
    if (needCallTransitionHooks) {
      transition.beforeEnter(el);
    }
    hostInsert(el, container, anchor);
    if ((vnodeHook = props && props.onVnodeMounted) || needCallTransitionHooks || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        needCallTransitionHooks && transition.enter(el);
        dirs && invokeDirectiveHook(vnode, null, parentComponent, "mounted");
      }, parentSuspense);
    }
  };
  const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {
    if (scopeId) {
      hostSetScopeId(el, scopeId);
    }
    if (slotScopeIds) {
      for (let i = 0; i < slotScopeIds.length; i++) {
        hostSetScopeId(el, slotScopeIds[i]);
      }
    }
    if (parentComponent) {
      let subTree = parentComponent.subTree;
      if (vnode === subTree) {
        const parentVNode = parentComponent.vnode;
        setScopeId(el, parentVNode, parentVNode.scopeId, parentVNode.slotScopeIds, parentComponent.parent);
      }
    }
  };
  const mountChildren = (children, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, start2 = 0) => {
    for (let i = start2; i < children.length; i++) {
      const child = children[i] = optimized ? cloneIfMounted(children[i]) : normalizeVNode(children[i]);
      patch(null, child, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
  };
  const patchElement = (n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    const el = n2.el = n1.el;
    let { patchFlag, dynamicChildren, dirs } = n2;
    patchFlag |= n1.patchFlag & 16;
    const oldProps = n1.props || EMPTY_OBJ;
    const newProps = n2.props || EMPTY_OBJ;
    let vnodeHook;
    parentComponent && toggleRecurse(parentComponent, false);
    if (vnodeHook = newProps.onVnodeBeforeUpdate) {
      invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
    }
    if (dirs) {
      invokeDirectiveHook(n2, n1, parentComponent, "beforeUpdate");
    }
    parentComponent && toggleRecurse(parentComponent, true);
    const areChildrenSVG = isSVG && n2.type !== "foreignObject";
    if (dynamicChildren) {
      patchBlockChildren(n1.dynamicChildren, dynamicChildren, el, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds);
    } else if (!optimized) {
      patchChildren(n1, n2, el, null, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds, false);
    }
    if (patchFlag > 0) {
      if (patchFlag & 16) {
        patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);
      } else {
        if (patchFlag & 2) {
          if (oldProps.class !== newProps.class) {
            hostPatchProp(el, "class", null, newProps.class, isSVG);
          }
        }
        if (patchFlag & 4) {
          hostPatchProp(el, "style", oldProps.style, newProps.style, isSVG);
        }
        if (patchFlag & 8) {
          const propsToUpdate = n2.dynamicProps;
          for (let i = 0; i < propsToUpdate.length; i++) {
            const key = propsToUpdate[i];
            const prev = oldProps[key];
            const next = newProps[key];
            if (next !== prev || key === "value") {
              hostPatchProp(el, key, prev, next, isSVG, n1.children, parentComponent, parentSuspense, unmountChildren);
            }
          }
        }
      }
      if (patchFlag & 1) {
        if (n1.children !== n2.children) {
          hostSetElementText(el, n2.children);
        }
      }
    } else if (!optimized && dynamicChildren == null) {
      patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);
    }
    if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
        dirs && invokeDirectiveHook(n2, n1, parentComponent, "updated");
      }, parentSuspense);
    }
  };
  const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, isSVG, slotScopeIds) => {
    for (let i = 0; i < newChildren.length; i++) {
      const oldVNode = oldChildren[i];
      const newVNode = newChildren[i];
      const container = oldVNode.el && (oldVNode.type === Fragment || !isSameVNodeType(oldVNode, newVNode) || oldVNode.shapeFlag & (6 | 64)) ? hostParentNode(oldVNode.el) : fallbackContainer;
      patch(oldVNode, newVNode, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, true);
    }
  };
  const patchProps = (el, vnode, oldProps, newProps, parentComponent, parentSuspense, isSVG) => {
    if (oldProps !== newProps) {
      if (oldProps !== EMPTY_OBJ) {
        for (const key in oldProps) {
          if (!isReservedProp(key) && !(key in newProps)) {
            hostPatchProp(el, key, oldProps[key], null, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
          }
        }
      }
      for (const key in newProps) {
        if (isReservedProp(key))
          continue;
        const next = newProps[key];
        const prev = oldProps[key];
        if (next !== prev && key !== "value") {
          hostPatchProp(el, key, prev, next, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
        }
      }
      if ("value" in newProps) {
        hostPatchProp(el, "value", oldProps.value, newProps.value);
      }
    }
  };
  const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    const fragmentStartAnchor = n2.el = n1 ? n1.el : hostCreateText("");
    const fragmentEndAnchor = n2.anchor = n1 ? n1.anchor : hostCreateText("");
    let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;
    if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;
    }
    if (n1 == null) {
      hostInsert(fragmentStartAnchor, container, anchor);
      hostInsert(fragmentEndAnchor, container, anchor);
      mountChildren(n2.children, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    } else {
      if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && n1.dynamicChildren) {
        patchBlockChildren(n1.dynamicChildren, dynamicChildren, container, parentComponent, parentSuspense, isSVG, slotScopeIds);
        if (n2.key != null || parentComponent && n2 === parentComponent.subTree) {
          traverseStaticChildren(n1, n2, true);
        }
      } else {
        patchChildren(n1, n2, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      }
    }
  };
  const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    n2.slotScopeIds = slotScopeIds;
    if (n1 == null) {
      if (n2.shapeFlag & 512) {
        parentComponent.ctx.activate(n2, container, anchor, isSVG, optimized);
      } else {
        mountComponent(n2, container, anchor, parentComponent, parentSuspense, isSVG, optimized);
      }
    } else {
      updateComponent(n1, n2, optimized);
    }
  };
  const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, isSVG, optimized) => {
    const instance = initialVNode.component = createComponentInstance(initialVNode, parentComponent, parentSuspense);
    if (isKeepAlive(initialVNode)) {
      instance.ctx.renderer = internals;
    }
    {
      setupComponent(instance);
    }
    if (instance.asyncDep) {
      parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect);
      if (!initialVNode.el) {
        const placeholder = instance.subTree = createVNode(Comment);
        processCommentNode(null, placeholder, container, anchor);
      }
      return;
    }
    setupRenderEffect(instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized);
  };
  const updateComponent = (n1, n2, optimized) => {
    const instance = n2.component = n1.component;
    if (shouldUpdateComponent(n1, n2, optimized)) {
      if (instance.asyncDep && !instance.asyncResolved) {
        updateComponentPreRender(instance, n2, optimized);
        return;
      } else {
        instance.next = n2;
        invalidateJob(instance.update);
        instance.update();
      }
    } else {
      n2.el = n1.el;
      instance.vnode = n2;
    }
  };
  const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized) => {
    const componentUpdateFn = () => {
      if (!instance.isMounted) {
        let vnodeHook;
        const { el, props } = initialVNode;
        const { bm, m, parent } = instance;
        const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);
        toggleRecurse(instance, false);
        if (bm) {
          invokeArrayFns(bm);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeBeforeMount)) {
          invokeVNodeHook(vnodeHook, parent, initialVNode);
        }
        toggleRecurse(instance, true);
        if (el && hydrateNode) {
          const hydrateSubTree = () => {
            instance.subTree = renderComponentRoot(instance);
            hydrateNode(el, instance.subTree, instance, parentSuspense, null);
          };
          if (isAsyncWrapperVNode) {
            initialVNode.type.__asyncLoader().then(
              () => !instance.isUnmounted && hydrateSubTree()
            );
          } else {
            hydrateSubTree();
          }
        } else {
          const subTree = instance.subTree = renderComponentRoot(instance);
          patch(null, subTree, container, anchor, instance, parentSuspense, isSVG);
          initialVNode.el = subTree.el;
        }
        if (m) {
          queuePostRenderEffect(m, parentSuspense);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeMounted)) {
          const scopedInitialVNode = initialVNode;
          queuePostRenderEffect(() => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode), parentSuspense);
        }
        if (initialVNode.shapeFlag & 256 || parent && isAsyncWrapper(parent.vnode) && parent.vnode.shapeFlag & 256) {
          instance.a && queuePostRenderEffect(instance.a, parentSuspense);
        }
        instance.isMounted = true;
        {
          devtoolsComponentAdded(instance);
        }
        initialVNode = container = anchor = null;
      } else {
        let { next, bu, u, parent, vnode } = instance;
        let originNext = next;
        let vnodeHook;
        toggleRecurse(instance, false);
        if (next) {
          next.el = vnode.el;
          updateComponentPreRender(instance, next, optimized);
        } else {
          next = vnode;
        }
        if (bu) {
          invokeArrayFns(bu);
        }
        if (vnodeHook = next.props && next.props.onVnodeBeforeUpdate) {
          invokeVNodeHook(vnodeHook, parent, next, vnode);
        }
        toggleRecurse(instance, true);
        const nextTree = renderComponentRoot(instance);
        const prevTree = instance.subTree;
        instance.subTree = nextTree;
        patch(
          prevTree,
          nextTree,
          hostParentNode(prevTree.el),
          getNextHostNode(prevTree),
          instance,
          parentSuspense,
          isSVG
        );
        next.el = nextTree.el;
        if (originNext === null) {
          updateHOCHostEl(instance, nextTree.el);
        }
        if (u) {
          queuePostRenderEffect(u, parentSuspense);
        }
        if (vnodeHook = next.props && next.props.onVnodeUpdated) {
          queuePostRenderEffect(() => invokeVNodeHook(vnodeHook, parent, next, vnode), parentSuspense);
        }
        {
          devtoolsComponentUpdated(instance);
        }
      }
    };
    const effect = instance.effect = new ReactiveEffect(
      componentUpdateFn,
      () => queueJob(update),
      instance.scope
    );
    const update = instance.update = () => effect.run();
    update.id = instance.uid;
    toggleRecurse(instance, true);
    update();
  };
  const updateComponentPreRender = (instance, nextVNode, optimized) => {
    nextVNode.component = instance;
    const prevProps = instance.vnode.props;
    instance.vnode = nextVNode;
    instance.next = null;
    updateProps(instance, nextVNode.props, prevProps, optimized);
    updateSlots(instance, nextVNode.children, optimized);
    pauseTracking();
    flushPreFlushCbs();
    resetTracking();
  };
  const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized = false) => {
    const c1 = n1 && n1.children;
    const prevShapeFlag = n1 ? n1.shapeFlag : 0;
    const c2 = n2.children;
    const { patchFlag, shapeFlag } = n2;
    if (patchFlag > 0) {
      if (patchFlag & 128) {
        patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        return;
      } else if (patchFlag & 256) {
        patchUnkeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        return;
      }
    }
    if (shapeFlag & 8) {
      if (prevShapeFlag & 16) {
        unmountChildren(c1, parentComponent, parentSuspense);
      }
      if (c2 !== c1) {
        hostSetElementText(container, c2);
      }
    } else {
      if (prevShapeFlag & 16) {
        if (shapeFlag & 16) {
          patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else {
          unmountChildren(c1, parentComponent, parentSuspense, true);
        }
      } else {
        if (prevShapeFlag & 8) {
          hostSetElementText(container, "");
        }
        if (shapeFlag & 16) {
          mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        }
      }
    }
  };
  const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    c1 = c1 || EMPTY_ARR;
    c2 = c2 || EMPTY_ARR;
    const oldLength = c1.length;
    const newLength = c2.length;
    const commonLength = Math.min(oldLength, newLength);
    let i;
    for (i = 0; i < commonLength; i++) {
      const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
      patch(c1[i], nextChild, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
    if (oldLength > newLength) {
      unmountChildren(c1, parentComponent, parentSuspense, true, false, commonLength);
    } else {
      mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, commonLength);
    }
  };
  const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    let i = 0;
    const l2 = c2.length;
    let e1 = c1.length - 1;
    let e2 = l2 - 1;
    while (i <= e1 && i <= e2) {
      const n1 = c1[i];
      const n2 = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
      if (isSameVNodeType(n1, n2)) {
        patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      } else {
        break;
      }
      i++;
    }
    while (i <= e1 && i <= e2) {
      const n1 = c1[e1];
      const n2 = c2[e2] = optimized ? cloneIfMounted(c2[e2]) : normalizeVNode(c2[e2]);
      if (isSameVNodeType(n1, n2)) {
        patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      } else {
        break;
      }
      e1--;
      e2--;
    }
    if (i > e1) {
      if (i <= e2) {
        const nextPos = e2 + 1;
        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;
        while (i <= e2) {
          patch(null, c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]), container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
          i++;
        }
      }
    } else if (i > e2) {
      while (i <= e1) {
        unmount(c1[i], parentComponent, parentSuspense, true);
        i++;
      }
    } else {
      const s1 = i;
      const s2 = i;
      const keyToNewIndexMap = /* @__PURE__ */ new Map();
      for (i = s2; i <= e2; i++) {
        const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
        if (nextChild.key != null) {
          keyToNewIndexMap.set(nextChild.key, i);
        }
      }
      let j;
      let patched = 0;
      const toBePatched = e2 - s2 + 1;
      let moved = false;
      let maxNewIndexSoFar = 0;
      const newIndexToOldIndexMap = new Array(toBePatched);
      for (i = 0; i < toBePatched; i++)
        newIndexToOldIndexMap[i] = 0;
      for (i = s1; i <= e1; i++) {
        const prevChild = c1[i];
        if (patched >= toBePatched) {
          unmount(prevChild, parentComponent, parentSuspense, true);
          continue;
        }
        let newIndex;
        if (prevChild.key != null) {
          newIndex = keyToNewIndexMap.get(prevChild.key);
        } else {
          for (j = s2; j <= e2; j++) {
            if (newIndexToOldIndexMap[j - s2] === 0 && isSameVNodeType(prevChild, c2[j])) {
              newIndex = j;
              break;
            }
          }
        }
        if (newIndex === void 0) {
          unmount(prevChild, parentComponent, parentSuspense, true);
        } else {
          newIndexToOldIndexMap[newIndex - s2] = i + 1;
          if (newIndex >= maxNewIndexSoFar) {
            maxNewIndexSoFar = newIndex;
          } else {
            moved = true;
          }
          patch(prevChild, c2[newIndex], container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
          patched++;
        }
      }
      const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : EMPTY_ARR;
      j = increasingNewIndexSequence.length - 1;
      for (i = toBePatched - 1; i >= 0; i--) {
        const nextIndex = s2 + i;
        const nextChild = c2[nextIndex];
        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;
        if (newIndexToOldIndexMap[i] === 0) {
          patch(null, nextChild, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (moved) {
          if (j < 0 || i !== increasingNewIndexSequence[j]) {
            move(nextChild, container, anchor, 2);
          } else {
            j--;
          }
        }
      }
    }
  };
  const move = (vnode, container, anchor, moveType, parentSuspense = null) => {
    const { el, type, transition, children, shapeFlag } = vnode;
    if (shapeFlag & 6) {
      move(vnode.component.subTree, container, anchor, moveType);
      return;
    }
    if (shapeFlag & 128) {
      vnode.suspense.move(container, anchor, moveType);
      return;
    }
    if (shapeFlag & 64) {
      type.move(vnode, container, anchor, internals);
      return;
    }
    if (type === Fragment) {
      hostInsert(el, container, anchor);
      for (let i = 0; i < children.length; i++) {
        move(children[i], container, anchor, moveType);
      }
      hostInsert(vnode.anchor, container, anchor);
      return;
    }
    if (type === Static) {
      moveStaticNode(vnode, container, anchor);
      return;
    }
    const needTransition = moveType !== 2 && shapeFlag & 1 && transition;
    if (needTransition) {
      if (moveType === 0) {
        transition.beforeEnter(el);
        hostInsert(el, container, anchor);
        queuePostRenderEffect(() => transition.enter(el), parentSuspense);
      } else {
        const { leave, delayLeave, afterLeave } = transition;
        const remove3 = () => hostInsert(el, container, anchor);
        const performLeave = () => {
          leave(el, () => {
            remove3();
            afterLeave && afterLeave();
          });
        };
        if (delayLeave) {
          delayLeave(el, remove3, performLeave);
        } else {
          performLeave();
        }
      }
    } else {
      hostInsert(el, container, anchor);
    }
  };
  const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {
    const { type, props, ref: ref2, children, dynamicChildren, shapeFlag, patchFlag, dirs } = vnode;
    if (ref2 != null) {
      setRef(ref2, null, parentSuspense, vnode, true);
    }
    if (shapeFlag & 256) {
      parentComponent.ctx.deactivate(vnode);
      return;
    }
    const shouldInvokeDirs = shapeFlag & 1 && dirs;
    const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);
    let vnodeHook;
    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeBeforeUnmount)) {
      invokeVNodeHook(vnodeHook, parentComponent, vnode);
    }
    if (shapeFlag & 6) {
      unmountComponent(vnode.component, parentSuspense, doRemove);
    } else {
      if (shapeFlag & 128) {
        vnode.suspense.unmount(parentSuspense, doRemove);
        return;
      }
      if (shouldInvokeDirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "beforeUnmount");
      }
      if (shapeFlag & 64) {
        vnode.type.remove(vnode, parentComponent, parentSuspense, optimized, internals, doRemove);
      } else if (dynamicChildren && (type !== Fragment || patchFlag > 0 && patchFlag & 64)) {
        unmountChildren(dynamicChildren, parentComponent, parentSuspense, false, true);
      } else if (type === Fragment && patchFlag & (128 | 256) || !optimized && shapeFlag & 16) {
        unmountChildren(children, parentComponent, parentSuspense);
      }
      if (doRemove) {
        remove2(vnode);
      }
    }
    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeUnmounted) || shouldInvokeDirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        shouldInvokeDirs && invokeDirectiveHook(vnode, null, parentComponent, "unmounted");
      }, parentSuspense);
    }
  };
  const remove2 = (vnode) => {
    const { type, el, anchor, transition } = vnode;
    if (type === Fragment) {
      {
        removeFragment(el, anchor);
      }
      return;
    }
    if (type === Static) {
      removeStaticNode(vnode);
      return;
    }
    const performRemove = () => {
      hostRemove(el);
      if (transition && !transition.persisted && transition.afterLeave) {
        transition.afterLeave();
      }
    };
    if (vnode.shapeFlag & 1 && transition && !transition.persisted) {
      const { leave, delayLeave } = transition;
      const performLeave = () => leave(el, performRemove);
      if (delayLeave) {
        delayLeave(vnode.el, performRemove, performLeave);
      } else {
        performLeave();
      }
    } else {
      performRemove();
    }
  };
  const removeFragment = (cur, end) => {
    let next;
    while (cur !== end) {
      next = hostNextSibling(cur);
      hostRemove(cur);
      cur = next;
    }
    hostRemove(end);
  };
  const unmountComponent = (instance, parentSuspense, doRemove) => {
    const { bum, scope, update, subTree, um } = instance;
    if (bum) {
      invokeArrayFns(bum);
    }
    scope.stop();
    if (update) {
      update.active = false;
      unmount(subTree, instance, parentSuspense, doRemove);
    }
    if (um) {
      queuePostRenderEffect(um, parentSuspense);
    }
    queuePostRenderEffect(() => {
      instance.isUnmounted = true;
    }, parentSuspense);
    if (parentSuspense && parentSuspense.pendingBranch && !parentSuspense.isUnmounted && instance.asyncDep && !instance.asyncResolved && instance.suspenseId === parentSuspense.pendingId) {
      parentSuspense.deps--;
      if (parentSuspense.deps === 0) {
        parentSuspense.resolve();
      }
    }
    {
      devtoolsComponentRemoved(instance);
    }
  };
  const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start2 = 0) => {
    for (let i = start2; i < children.length; i++) {
      unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);
    }
  };
  const getNextHostNode = (vnode) => {
    if (vnode.shapeFlag & 6) {
      return getNextHostNode(vnode.component.subTree);
    }
    if (vnode.shapeFlag & 128) {
      return vnode.suspense.next();
    }
    return hostNextSibling(vnode.anchor || vnode.el);
  };
  const render = (vnode, container, isSVG) => {
    if (vnode == null) {
      if (container._vnode) {
        unmount(container._vnode, null, null, true);
      }
    } else {
      patch(container._vnode || null, vnode, container, null, null, null, isSVG);
    }
    flushPreFlushCbs();
    flushPostFlushCbs();
    container._vnode = vnode;
  };
  const internals = {
    p: patch,
    um: unmount,
    m: move,
    r: remove2,
    mt: mountComponent,
    mc: mountChildren,
    pc: patchChildren,
    pbc: patchBlockChildren,
    n: getNextHostNode,
    o: options
  };
  let hydrate;
  let hydrateNode;
  if (createHydrationFns) {
    [hydrate, hydrateNode] = createHydrationFns(internals);
  }
  return {
    render,
    hydrate,
    createApp: createAppAPI(render, hydrate)
  };
}
function toggleRecurse({ effect, update }, allowed) {
  effect.allowRecurse = update.allowRecurse = allowed;
}
function traverseStaticChildren(n1, n2, shallow = false) {
  const ch1 = n1.children;
  const ch2 = n2.children;
  if (isArray$2(ch1) && isArray$2(ch2)) {
    for (let i = 0; i < ch1.length; i++) {
      const c1 = ch1[i];
      let c2 = ch2[i];
      if (c2.shapeFlag & 1 && !c2.dynamicChildren) {
        if (c2.patchFlag <= 0 || c2.patchFlag === 32) {
          c2 = ch2[i] = cloneIfMounted(ch2[i]);
          c2.el = c1.el;
        }
        if (!shallow)
          traverseStaticChildren(c1, c2);
      }
      if (c2.type === Text) {
        c2.el = c1.el;
      }
    }
  }
}
function getSequence(arr) {
  const p2 = arr.slice();
  const result = [0];
  let i, j, u, v, c;
  const len = arr.length;
  for (i = 0; i < len; i++) {
    const arrI = arr[i];
    if (arrI !== 0) {
      j = result[result.length - 1];
      if (arr[j] < arrI) {
        p2[i] = j;
        result.push(i);
        continue;
      }
      u = 0;
      v = result.length - 1;
      while (u < v) {
        c = u + v >> 1;
        if (arr[result[c]] < arrI) {
          u = c + 1;
        } else {
          v = c;
        }
      }
      if (arrI < arr[result[u]]) {
        if (u > 0) {
          p2[i] = result[u - 1];
        }
        result[u] = i;
      }
    }
  }
  u = result.length;
  v = result[u - 1];
  while (u-- > 0) {
    result[u] = v;
    v = p2[v];
  }
  return result;
}
const isTeleport = (type) => type.__isTeleport;
const isTeleportDisabled = (props) => props && (props.disabled || props.disabled === "");
const isTargetSVG = (target2) => typeof SVGElement !== "undefined" && target2 instanceof SVGElement;
const resolveTarget = (props, select) => {
  const targetSelector = props && props.to;
  if (isString$1(targetSelector)) {
    if (!select) {
      return null;
    } else {
      const target2 = select(targetSelector);
      return target2;
    }
  } else {
    return targetSelector;
  }
};
const TeleportImpl = {
  __isTeleport: true,
  process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals) {
    const { mc: mountChildren, pc: patchChildren, pbc: patchBlockChildren, o: { insert, querySelector, createText, createComment } } = internals;
    const disabled = isTeleportDisabled(n2.props);
    let { shapeFlag, children, dynamicChildren } = n2;
    if (n1 == null) {
      const placeholder = n2.el = createText("");
      const mainAnchor = n2.anchor = createText("");
      insert(placeholder, container, anchor);
      insert(mainAnchor, container, anchor);
      const target2 = n2.target = resolveTarget(n2.props, querySelector);
      const targetAnchor = n2.targetAnchor = createText("");
      if (target2) {
        insert(targetAnchor, target2);
        isSVG = isSVG || isTargetSVG(target2);
      }
      const mount = (container2, anchor2) => {
        if (shapeFlag & 16) {
          mountChildren(children, container2, anchor2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        }
      };
      if (disabled) {
        mount(container, mainAnchor);
      } else if (target2) {
        mount(target2, targetAnchor);
      }
    } else {
      n2.el = n1.el;
      const mainAnchor = n2.anchor = n1.anchor;
      const target2 = n2.target = n1.target;
      const targetAnchor = n2.targetAnchor = n1.targetAnchor;
      const wasDisabled = isTeleportDisabled(n1.props);
      const currentContainer = wasDisabled ? container : target2;
      const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;
      isSVG = isSVG || isTargetSVG(target2);
      if (dynamicChildren) {
        patchBlockChildren(n1.dynamicChildren, dynamicChildren, currentContainer, parentComponent, parentSuspense, isSVG, slotScopeIds);
        traverseStaticChildren(n1, n2, true);
      } else if (!optimized) {
        patchChildren(n1, n2, currentContainer, currentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, false);
      }
      if (disabled) {
        if (!wasDisabled) {
          moveTeleport(n2, container, mainAnchor, internals, 1);
        }
      } else {
        if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {
          const nextTarget = n2.target = resolveTarget(n2.props, querySelector);
          if (nextTarget) {
            moveTeleport(n2, nextTarget, null, internals, 0);
          }
        } else if (wasDisabled) {
          moveTeleport(n2, target2, targetAnchor, internals, 1);
        }
      }
    }
    updateCssVars(n2);
  },
  remove(vnode, parentComponent, parentSuspense, optimized, { um: unmount, o: { remove: hostRemove } }, doRemove) {
    const { shapeFlag, children, anchor, targetAnchor, target: target2, props } = vnode;
    if (target2) {
      hostRemove(targetAnchor);
    }
    if (doRemove || !isTeleportDisabled(props)) {
      hostRemove(anchor);
      if (shapeFlag & 16) {
        for (let i = 0; i < children.length; i++) {
          const child = children[i];
          unmount(child, parentComponent, parentSuspense, true, !!child.dynamicChildren);
        }
      }
    }
  },
  move: moveTeleport,
  hydrate: hydrateTeleport
};
function moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2) {
  if (moveType === 0) {
    insert(vnode.targetAnchor, container, parentAnchor);
  }
  const { el, anchor, shapeFlag, children, props } = vnode;
  const isReorder = moveType === 2;
  if (isReorder) {
    insert(el, container, parentAnchor);
  }
  if (!isReorder || isTeleportDisabled(props)) {
    if (shapeFlag & 16) {
      for (let i = 0; i < children.length; i++) {
        move(children[i], container, parentAnchor, 2);
      }
    }
  }
  if (isReorder) {
    insert(anchor, container, parentAnchor);
  }
}
function hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, { o: { nextSibling, parentNode, querySelector } }, hydrateChildren) {
  const target2 = vnode.target = resolveTarget(vnode.props, querySelector);
  if (target2) {
    const targetNode = target2._lpa || target2.firstChild;
    if (vnode.shapeFlag & 16) {
      if (isTeleportDisabled(vnode.props)) {
        vnode.anchor = hydrateChildren(nextSibling(node), vnode, parentNode(node), parentComponent, parentSuspense, slotScopeIds, optimized);
        vnode.targetAnchor = targetNode;
      } else {
        vnode.anchor = nextSibling(node);
        let targetAnchor = targetNode;
        while (targetAnchor) {
          targetAnchor = nextSibling(targetAnchor);
          if (targetAnchor && targetAnchor.nodeType === 8 && targetAnchor.data === "teleport anchor") {
            vnode.targetAnchor = targetAnchor;
            target2._lpa = vnode.targetAnchor && nextSibling(vnode.targetAnchor);
            break;
          }
        }
        hydrateChildren(targetNode, vnode, target2, parentComponent, parentSuspense, slotScopeIds, optimized);
      }
    }
    updateCssVars(vnode);
  }
  return vnode.anchor && nextSibling(vnode.anchor);
}
const Teleport = TeleportImpl;
function updateCssVars(vnode) {
  const ctx = vnode.ctx;
  if (ctx && ctx.ut) {
    let node = vnode.children[0].el;
    while (node !== vnode.targetAnchor) {
      if (node.nodeType === 1)
        node.setAttribute("data-v-owner", ctx.uid);
      node = node.nextSibling;
    }
    ctx.ut();
  }
}
const Fragment = Symbol(void 0);
const Text = Symbol(void 0);
const Comment = Symbol(void 0);
const Static = Symbol(void 0);
const blockStack = [];
let currentBlock = null;
function openBlock(disableTracking = false) {
  blockStack.push(currentBlock = disableTracking ? null : []);
}
function closeBlock() {
  blockStack.pop();
  currentBlock = blockStack[blockStack.length - 1] || null;
}
let isBlockTreeEnabled = 1;
function setBlockTracking(value) {
  isBlockTreeEnabled += value;
}
function setupBlock(vnode) {
  vnode.dynamicChildren = isBlockTreeEnabled > 0 ? currentBlock || EMPTY_ARR : null;
  closeBlock();
  if (isBlockTreeEnabled > 0 && currentBlock) {
    currentBlock.push(vnode);
  }
  return vnode;
}
function createElementBlock(type, props, children, patchFlag, dynamicProps, shapeFlag) {
  return setupBlock(createBaseVNode(type, props, children, patchFlag, dynamicProps, shapeFlag, true));
}
function createBlock(type, props, children, patchFlag, dynamicProps) {
  return setupBlock(createVNode(type, props, children, patchFlag, dynamicProps, true));
}
function isVNode$1(value) {
  return value ? value.__v_isVNode === true : false;
}
function isSameVNodeType(n1, n2) {
  return n1.type === n2.type && n1.key === n2.key;
}
const InternalObjectKey = `__vInternal`;
const normalizeKey = ({ key }) => key != null ? key : null;
const normalizeRef = ({ ref: ref2, ref_key, ref_for }) => {
  return ref2 != null ? isString$1(ref2) || isRef(ref2) || isFunction$1(ref2) ? { i: currentRenderingInstance, r: ref2, k: ref_key, f: !!ref_for } : ref2 : null;
};
function createBaseVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1, isBlockNode = false, needFullChildrenNormalization = false) {
  const vnode = {
    __v_isVNode: true,
    __v_skip: true,
    type,
    props,
    key: props && normalizeKey(props),
    ref: props && normalizeRef(props),
    scopeId: currentScopeId,
    slotScopeIds: null,
    children,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag,
    patchFlag,
    dynamicProps,
    dynamicChildren: null,
    appContext: null,
    ctx: currentRenderingInstance
  };
  if (needFullChildrenNormalization) {
    normalizeChildren(vnode, children);
    if (shapeFlag & 128) {
      type.normalize(vnode);
    }
  } else if (children) {
    vnode.shapeFlag |= isString$1(children) ? 8 : 16;
  }
  if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock && (vnode.patchFlag > 0 || shapeFlag & 6) && vnode.patchFlag !== 32) {
    currentBlock.push(vnode);
  }
  return vnode;
}
const createVNode = _createVNode;
function _createVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {
  if (!type || type === NULL_DYNAMIC_COMPONENT) {
    type = Comment;
  }
  if (isVNode$1(type)) {
    const cloned = cloneVNode(type, props, true);
    if (children) {
      normalizeChildren(cloned, children);
    }
    if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {
      if (cloned.shapeFlag & 6) {
        currentBlock[currentBlock.indexOf(type)] = cloned;
      } else {
        currentBlock.push(cloned);
      }
    }
    cloned.patchFlag |= -2;
    return cloned;
  }
  if (isClassComponent(type)) {
    type = type.__vccOpts;
  }
  if (props) {
    props = guardReactiveProps(props);
    let { class: klass, style } = props;
    if (klass && !isString$1(klass)) {
      props.class = normalizeClass(klass);
    }
    if (isObject$3(style)) {
      if (isProxy(style) && !isArray$2(style)) {
        style = extend$1({}, style);
      }
      props.style = normalizeStyle(style);
    }
  }
  const shapeFlag = isString$1(type) ? 1 : isSuspense(type) ? 128 : isTeleport(type) ? 64 : isObject$3(type) ? 4 : isFunction$1(type) ? 2 : 0;
  return createBaseVNode(type, props, children, patchFlag, dynamicProps, shapeFlag, isBlockNode, true);
}
function guardReactiveProps(props) {
  if (!props)
    return null;
  return isProxy(props) || InternalObjectKey in props ? extend$1({}, props) : props;
}
function cloneVNode(vnode, extraProps, mergeRef = false) {
  const { props, ref: ref2, patchFlag, children } = vnode;
  const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props;
  const cloned = {
    __v_isVNode: true,
    __v_skip: true,
    type: vnode.type,
    props: mergedProps,
    key: mergedProps && normalizeKey(mergedProps),
    ref: extraProps && extraProps.ref ? mergeRef && ref2 ? isArray$2(ref2) ? ref2.concat(normalizeRef(extraProps)) : [ref2, normalizeRef(extraProps)] : normalizeRef(extraProps) : ref2,
    scopeId: vnode.scopeId,
    slotScopeIds: vnode.slotScopeIds,
    children,
    target: vnode.target,
    targetAnchor: vnode.targetAnchor,
    staticCount: vnode.staticCount,
    shapeFlag: vnode.shapeFlag,
    patchFlag: extraProps && vnode.type !== Fragment ? patchFlag === -1 ? 16 : patchFlag | 16 : patchFlag,
    dynamicProps: vnode.dynamicProps,
    dynamicChildren: vnode.dynamicChildren,
    appContext: vnode.appContext,
    dirs: vnode.dirs,
    transition: vnode.transition,
    component: vnode.component,
    suspense: vnode.suspense,
    ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),
    ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),
    el: vnode.el,
    anchor: vnode.anchor,
    ctx: vnode.ctx
  };
  return cloned;
}
function createTextVNode(text = " ", flag = 0) {
  return createVNode(Text, null, text, flag);
}
function createCommentVNode(text = "", asBlock = false) {
  return asBlock ? (openBlock(), createBlock(Comment, null, text)) : createVNode(Comment, null, text);
}
function normalizeVNode(child) {
  if (child == null || typeof child === "boolean") {
    return createVNode(Comment);
  } else if (isArray$2(child)) {
    return createVNode(
      Fragment,
      null,
      child.slice()
    );
  } else if (typeof child === "object") {
    return cloneIfMounted(child);
  } else {
    return createVNode(Text, null, String(child));
  }
}
function cloneIfMounted(child) {
  return child.el === null && child.patchFlag !== -1 || child.memo ? child : cloneVNode(child);
}
function normalizeChildren(vnode, children) {
  let type = 0;
  const { shapeFlag } = vnode;
  if (children == null) {
    children = null;
  } else if (isArray$2(children)) {
    type = 16;
  } else if (typeof children === "object") {
    if (shapeFlag & (1 | 64)) {
      const slot = children.default;
      if (slot) {
        slot._c && (slot._d = false);
        normalizeChildren(vnode, slot());
        slot._c && (slot._d = true);
      }
      return;
    } else {
      type = 32;
      const slotFlag = children._;
      if (!slotFlag && !(InternalObjectKey in children)) {
        children._ctx = currentRenderingInstance;
      } else if (slotFlag === 3 && currentRenderingInstance) {
        if (currentRenderingInstance.slots._ === 1) {
          children._ = 1;
        } else {
          children._ = 2;
          vnode.patchFlag |= 1024;
        }
      }
    }
  } else if (isFunction$1(children)) {
    children = { default: children, _ctx: currentRenderingInstance };
    type = 32;
  } else {
    children = String(children);
    if (shapeFlag & 64) {
      type = 16;
      children = [createTextVNode(children)];
    } else {
      type = 8;
    }
  }
  vnode.children = children;
  vnode.shapeFlag |= type;
}
function mergeProps(...args) {
  const ret = {};
  for (let i = 0; i < args.length; i++) {
    const toMerge = args[i];
    for (const key in toMerge) {
      if (key === "class") {
        if (ret.class !== toMerge.class) {
          ret.class = normalizeClass([ret.class, toMerge.class]);
        }
      } else if (key === "style") {
        ret.style = normalizeStyle([ret.style, toMerge.style]);
      } else if (isOn(key)) {
        const existing = ret[key];
        const incoming = toMerge[key];
        if (incoming && existing !== incoming && !(isArray$2(existing) && existing.includes(incoming))) {
          ret[key] = existing ? [].concat(existing, incoming) : incoming;
        }
      } else if (key !== "") {
        ret[key] = toMerge[key];
      }
    }
  }
  return ret;
}
function invokeVNodeHook(hook, instance, vnode, prevVNode = null) {
  callWithAsyncErrorHandling(hook, instance, 7, [
    vnode,
    prevVNode
  ]);
}
const emptyAppContext = createAppContext();
let uid$1$1 = 0;
function createComponentInstance(vnode, parent, suspense) {
  const type = vnode.type;
  const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;
  const instance = {
    uid: uid$1$1++,
    vnode,
    type,
    parent,
    appContext,
    root: null,
    next: null,
    subTree: null,
    effect: null,
    update: null,
    scope: new EffectScope(true),
    render: null,
    proxy: null,
    exposed: null,
    exposeProxy: null,
    withProxy: null,
    provides: parent ? parent.provides : Object.create(appContext.provides),
    accessCache: null,
    renderCache: [],
    components: null,
    directives: null,
    propsOptions: normalizePropsOptions(type, appContext),
    emitsOptions: normalizeEmitsOptions(type, appContext),
    emit: null,
    emitted: null,
    propsDefaults: EMPTY_OBJ,
    inheritAttrs: type.inheritAttrs,
    ctx: EMPTY_OBJ,
    data: EMPTY_OBJ,
    props: EMPTY_OBJ,
    attrs: EMPTY_OBJ,
    slots: EMPTY_OBJ,
    refs: EMPTY_OBJ,
    setupState: EMPTY_OBJ,
    setupContext: null,
    suspense,
    suspenseId: suspense ? suspense.pendingId : 0,
    asyncDep: null,
    asyncResolved: false,
    isMounted: false,
    isUnmounted: false,
    isDeactivated: false,
    bc: null,
    c: null,
    bm: null,
    m: null,
    bu: null,
    u: null,
    um: null,
    bum: null,
    da: null,
    a: null,
    rtg: null,
    rtc: null,
    ec: null,
    sp: null
  };
  {
    instance.ctx = { _: instance };
  }
  instance.root = parent ? parent.root : instance;
  instance.emit = emit$1.bind(null, instance);
  if (vnode.ce) {
    vnode.ce(instance);
  }
  return instance;
}
let currentInstance = null;
const getCurrentInstance = () => currentInstance || currentRenderingInstance;
const setCurrentInstance = (instance) => {
  currentInstance = instance;
  instance.scope.on();
};
const unsetCurrentInstance = () => {
  currentInstance && currentInstance.scope.off();
  currentInstance = null;
};
function isStatefulComponent(instance) {
  return instance.vnode.shapeFlag & 4;
}
let isInSSRComponentSetup = false;
function setupComponent(instance, isSSR = false) {
  isInSSRComponentSetup = isSSR;
  const { props, children } = instance.vnode;
  const isStateful = isStatefulComponent(instance);
  initProps(instance, props, isStateful, isSSR);
  initSlots(instance, children);
  const setupResult = isStateful ? setupStatefulComponent(instance, isSSR) : void 0;
  isInSSRComponentSetup = false;
  return setupResult;
}
function setupStatefulComponent(instance, isSSR) {
  const Component = instance.type;
  instance.accessCache = /* @__PURE__ */ Object.create(null);
  instance.proxy = markRaw(new Proxy(instance.ctx, PublicInstanceProxyHandlers));
  const { setup } = Component;
  if (setup) {
    const setupContext = instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null;
    setCurrentInstance(instance);
    pauseTracking();
    const setupResult = callWithErrorHandling(setup, instance, 0, [instance.props, setupContext]);
    resetTracking();
    unsetCurrentInstance();
    if (isPromise(setupResult)) {
      setupResult.then(unsetCurrentInstance, unsetCurrentInstance);
      if (isSSR) {
        return setupResult.then((resolvedResult) => {
          handleSetupResult(instance, resolvedResult, isSSR);
        }).catch((e) => {
          handleError(e, instance, 0);
        });
      } else {
        instance.asyncDep = setupResult;
      }
    } else {
      handleSetupResult(instance, setupResult, isSSR);
    }
  } else {
    finishComponentSetup(instance, isSSR);
  }
}
function handleSetupResult(instance, setupResult, isSSR) {
  if (isFunction$1(setupResult)) {
    if (instance.type.__ssrInlineRender) {
      instance.ssrRender = setupResult;
    } else {
      instance.render = setupResult;
    }
  } else if (isObject$3(setupResult)) {
    {
      instance.devtoolsRawSetupState = setupResult;
    }
    instance.setupState = proxyRefs(setupResult);
  } else
    ;
  finishComponentSetup(instance, isSSR);
}
let compile;
function finishComponentSetup(instance, isSSR, skipOptions) {
  const Component = instance.type;
  if (!instance.render) {
    if (!isSSR && compile && !Component.render) {
      const template = Component.template || resolveMergedOptions(instance).template;
      if (template) {
        const { isCustomElement, compilerOptions } = instance.appContext.config;
        const { delimiters, compilerOptions: componentCompilerOptions } = Component;
        const finalCompilerOptions = extend$1(extend$1({
          isCustomElement,
          delimiters
        }, compilerOptions), componentCompilerOptions);
        Component.render = compile(template, finalCompilerOptions);
      }
    }
    instance.render = Component.render || NOOP;
  }
}
function createAttrsProxy(instance) {
  return new Proxy(instance.attrs, {
    get(target2, key) {
      track(instance, "get", "$attrs");
      return target2[key];
    }
  });
}
function createSetupContext(instance) {
  const expose = (exposed) => {
    instance.exposed = exposed || {};
  };
  let attrs;
  {
    return {
      get attrs() {
        return attrs || (attrs = createAttrsProxy(instance));
      },
      slots: instance.slots,
      emit: instance.emit,
      expose
    };
  }
}
function getExposeProxy(instance) {
  if (instance.exposed) {
    return instance.exposeProxy || (instance.exposeProxy = new Proxy(proxyRefs(markRaw(instance.exposed)), {
      get(target2, key) {
        if (key in target2) {
          return target2[key];
        } else if (key in publicPropertiesMap) {
          return publicPropertiesMap[key](instance);
        }
      },
      has(target2, key) {
        return key in target2 || key in publicPropertiesMap;
      }
    }));
  }
}
function getComponentName(Component, includeInferred = true) {
  return isFunction$1(Component) ? Component.displayName || Component.name : Component.name || includeInferred && Component.__name;
}
function isClassComponent(value) {
  return isFunction$1(value) && "__vccOpts" in value;
}
const computed = (getterOrOptions, debugOptions) => {
  return computed$1(getterOrOptions, debugOptions, isInSSRComponentSetup);
};
function h(type, propsOrChildren, children) {
  const l = arguments.length;
  if (l === 2) {
    if (isObject$3(propsOrChildren) && !isArray$2(propsOrChildren)) {
      if (isVNode$1(propsOrChildren)) {
        return createVNode(type, null, [propsOrChildren]);
      }
      return createVNode(type, propsOrChildren);
    } else {
      return createVNode(type, null, propsOrChildren);
    }
  } else {
    if (l > 3) {
      children = Array.prototype.slice.call(arguments, 2);
    } else if (l === 3 && isVNode$1(children)) {
      children = [children];
    }
    return createVNode(type, propsOrChildren, children);
  }
}
const ssrContextKey = Symbol(``);
const useSSRContext = () => {
  {
    const ctx = inject(ssrContextKey);
    return ctx;
  }
};
const version = "3.2.45";
const svgNS = "http://www.w3.org/2000/svg";
const doc = typeof document !== "undefined" ? document : null;
const templateContainer = doc && /* @__PURE__ */ doc.createElement("template");
const nodeOps = {
  insert: (child, parent, anchor) => {
    parent.insertBefore(child, anchor || null);
  },
  remove: (child) => {
    const parent = child.parentNode;
    if (parent) {
      parent.removeChild(child);
    }
  },
  createElement: (tag, isSVG, is, props) => {
    const el = isSVG ? doc.createElementNS(svgNS, tag) : doc.createElement(tag, is ? { is } : void 0);
    if (tag === "select" && props && props.multiple != null) {
      el.setAttribute("multiple", props.multiple);
    }
    return el;
  },
  createText: (text) => doc.createTextNode(text),
  createComment: (text) => doc.createComment(text),
  setText: (node, text) => {
    node.nodeValue = text;
  },
  setElementText: (el, text) => {
    el.textContent = text;
  },
  parentNode: (node) => node.parentNode,
  nextSibling: (node) => node.nextSibling,
  querySelector: (selector) => doc.querySelector(selector),
  setScopeId(el, id) {
    el.setAttribute(id, "");
  },
  insertStaticContent(content, parent, anchor, isSVG, start2, end) {
    const before = anchor ? anchor.previousSibling : parent.lastChild;
    if (start2 && (start2 === end || start2.nextSibling)) {
      while (true) {
        parent.insertBefore(start2.cloneNode(true), anchor);
        if (start2 === end || !(start2 = start2.nextSibling))
          break;
      }
    } else {
      templateContainer.innerHTML = isSVG ? `<svg>${content}</svg>` : content;
      const template = templateContainer.content;
      if (isSVG) {
        const wrapper = template.firstChild;
        while (wrapper.firstChild) {
          template.appendChild(wrapper.firstChild);
        }
        template.removeChild(wrapper);
      }
      parent.insertBefore(template, anchor);
    }
    return [
      before ? before.nextSibling : parent.firstChild,
      anchor ? anchor.previousSibling : parent.lastChild
    ];
  }
};
function patchClass(el, value, isSVG) {
  const transitionClasses = el._vtc;
  if (transitionClasses) {
    value = (value ? [value, ...transitionClasses] : [...transitionClasses]).join(" ");
  }
  if (value == null) {
    el.removeAttribute("class");
  } else if (isSVG) {
    el.setAttribute("class", value);
  } else {
    el.className = value;
  }
}
function patchStyle(el, prev, next) {
  const style = el.style;
  const isCssString = isString$1(next);
  if (next && !isCssString) {
    for (const key in next) {
      setStyle(style, key, next[key]);
    }
    if (prev && !isString$1(prev)) {
      for (const key in prev) {
        if (next[key] == null) {
          setStyle(style, key, "");
        }
      }
    }
  } else {
    const currentDisplay = style.display;
    if (isCssString) {
      if (prev !== next) {
        style.cssText = next;
      }
    } else if (prev) {
      el.removeAttribute("style");
    }
    if ("_vod" in el) {
      style.display = currentDisplay;
    }
  }
}
const importantRE = /\s*!important$/;
function setStyle(style, name, val) {
  if (isArray$2(val)) {
    val.forEach((v) => setStyle(style, name, v));
  } else {
    if (val == null)
      val = "";
    if (name.startsWith("--")) {
      style.setProperty(name, val);
    } else {
      const prefixed = autoPrefix(style, name);
      if (importantRE.test(val)) {
        style.setProperty(hyphenate(prefixed), val.replace(importantRE, ""), "important");
      } else {
        style[prefixed] = val;
      }
    }
  }
}
const prefixes = ["Webkit", "Moz", "ms"];
const prefixCache = {};
function autoPrefix(style, rawName) {
  const cached = prefixCache[rawName];
  if (cached) {
    return cached;
  }
  let name = camelize(rawName);
  if (name !== "filter" && name in style) {
    return prefixCache[rawName] = name;
  }
  name = capitalize$1(name);
  for (let i = 0; i < prefixes.length; i++) {
    const prefixed = prefixes[i] + name;
    if (prefixed in style) {
      return prefixCache[rawName] = prefixed;
    }
  }
  return rawName;
}
const xlinkNS = "http://www.w3.org/1999/xlink";
function patchAttr(el, key, value, isSVG, instance) {
  if (isSVG && key.startsWith("xlink:")) {
    if (value == null) {
      el.removeAttributeNS(xlinkNS, key.slice(6, key.length));
    } else {
      el.setAttributeNS(xlinkNS, key, value);
    }
  } else {
    const isBoolean2 = isSpecialBooleanAttr(key);
    if (value == null || isBoolean2 && !includeBooleanAttr(value)) {
      el.removeAttribute(key);
    } else {
      el.setAttribute(key, isBoolean2 ? "" : value);
    }
  }
}
function patchDOMProp(el, key, value, prevChildren, parentComponent, parentSuspense, unmountChildren) {
  if (key === "innerHTML" || key === "textContent") {
    if (prevChildren) {
      unmountChildren(prevChildren, parentComponent, parentSuspense);
    }
    el[key] = value == null ? "" : value;
    return;
  }
  if (key === "value" && el.tagName !== "PROGRESS" && !el.tagName.includes("-")) {
    el._value = value;
    const newValue = value == null ? "" : value;
    if (el.value !== newValue || el.tagName === "OPTION") {
      el.value = newValue;
    }
    if (value == null) {
      el.removeAttribute(key);
    }
    return;
  }
  let needRemove = false;
  if (value === "" || value == null) {
    const type = typeof el[key];
    if (type === "boolean") {
      value = includeBooleanAttr(value);
    } else if (value == null && type === "string") {
      value = "";
      needRemove = true;
    } else if (type === "number") {
      value = 0;
      needRemove = true;
    }
  }
  try {
    el[key] = value;
  } catch (e) {
  }
  needRemove && el.removeAttribute(key);
}
function addEventListener(el, event, handler, options) {
  el.addEventListener(event, handler, options);
}
function removeEventListener(el, event, handler, options) {
  el.removeEventListener(event, handler, options);
}
function patchEvent(el, rawName, prevValue, nextValue, instance = null) {
  const invokers = el._vei || (el._vei = {});
  const existingInvoker = invokers[rawName];
  if (nextValue && existingInvoker) {
    existingInvoker.value = nextValue;
  } else {
    const [name, options] = parseName(rawName);
    if (nextValue) {
      const invoker = invokers[rawName] = createInvoker(nextValue, instance);
      addEventListener(el, name, invoker, options);
    } else if (existingInvoker) {
      removeEventListener(el, name, existingInvoker, options);
      invokers[rawName] = void 0;
    }
  }
}
const optionsModifierRE = /(?:Once|Passive|Capture)$/;
function parseName(name) {
  let options;
  if (optionsModifierRE.test(name)) {
    options = {};
    let m;
    while (m = name.match(optionsModifierRE)) {
      name = name.slice(0, name.length - m[0].length);
      options[m[0].toLowerCase()] = true;
    }
  }
  const event = name[2] === ":" ? name.slice(3) : hyphenate(name.slice(2));
  return [event, options];
}
let cachedNow = 0;
const p = /* @__PURE__ */ Promise.resolve();
const getNow = () => cachedNow || (p.then(() => cachedNow = 0), cachedNow = Date.now());
function createInvoker(initialValue, instance) {
  const invoker = (e) => {
    if (!e._vts) {
      e._vts = Date.now();
    } else if (e._vts <= invoker.attached) {
      return;
    }
    callWithAsyncErrorHandling(patchStopImmediatePropagation(e, invoker.value), instance, 5, [e]);
  };
  invoker.value = initialValue;
  invoker.attached = getNow();
  return invoker;
}
function patchStopImmediatePropagation(e, value) {
  if (isArray$2(value)) {
    const originalStop = e.stopImmediatePropagation;
    e.stopImmediatePropagation = () => {
      originalStop.call(e);
      e._stopped = true;
    };
    return value.map((fn) => (e2) => !e2._stopped && fn && fn(e2));
  } else {
    return value;
  }
}
const nativeOnRE = /^on[a-z]/;
const patchProp = (el, key, prevValue, nextValue, isSVG = false, prevChildren, parentComponent, parentSuspense, unmountChildren) => {
  if (key === "class") {
    patchClass(el, nextValue, isSVG);
  } else if (key === "style") {
    patchStyle(el, prevValue, nextValue);
  } else if (isOn(key)) {
    if (!isModelListener(key)) {
      patchEvent(el, key, prevValue, nextValue, parentComponent);
    }
  } else if (key[0] === "." ? (key = key.slice(1), true) : key[0] === "^" ? (key = key.slice(1), false) : shouldSetAsProp(el, key, nextValue, isSVG)) {
    patchDOMProp(el, key, nextValue, prevChildren, parentComponent, parentSuspense, unmountChildren);
  } else {
    if (key === "true-value") {
      el._trueValue = nextValue;
    } else if (key === "false-value") {
      el._falseValue = nextValue;
    }
    patchAttr(el, key, nextValue, isSVG);
  }
};
function shouldSetAsProp(el, key, value, isSVG) {
  if (isSVG) {
    if (key === "innerHTML" || key === "textContent") {
      return true;
    }
    if (key in el && nativeOnRE.test(key) && isFunction$1(value)) {
      return true;
    }
    return false;
  }
  if (key === "spellcheck" || key === "draggable" || key === "translate") {
    return false;
  }
  if (key === "form") {
    return false;
  }
  if (key === "list" && el.tagName === "INPUT") {
    return false;
  }
  if (key === "type" && el.tagName === "TEXTAREA") {
    return false;
  }
  if (nativeOnRE.test(key) && isString$1(value)) {
    return false;
  }
  return key in el;
}
const TRANSITION = "transition";
const ANIMATION = "animation";
const Transition = (props, { slots }) => h(BaseTransition, resolveTransitionProps(props), slots);
Transition.displayName = "Transition";
const DOMTransitionPropsValidators = {
  name: String,
  type: String,
  css: {
    type: Boolean,
    default: true
  },
  duration: [String, Number, Object],
  enterFromClass: String,
  enterActiveClass: String,
  enterToClass: String,
  appearFromClass: String,
  appearActiveClass: String,
  appearToClass: String,
  leaveFromClass: String,
  leaveActiveClass: String,
  leaveToClass: String
};
const TransitionPropsValidators = Transition.props = /* @__PURE__ */ extend$1({}, BaseTransition.props, DOMTransitionPropsValidators);
const callHook = (hook, args = []) => {
  if (isArray$2(hook)) {
    hook.forEach((h2) => h2(...args));
  } else if (hook) {
    hook(...args);
  }
};
const hasExplicitCallback = (hook) => {
  return hook ? isArray$2(hook) ? hook.some((h2) => h2.length > 1) : hook.length > 1 : false;
};
function resolveTransitionProps(rawProps) {
  const baseProps = {};
  for (const key in rawProps) {
    if (!(key in DOMTransitionPropsValidators)) {
      baseProps[key] = rawProps[key];
    }
  }
  if (rawProps.css === false) {
    return baseProps;
  }
  const { name = "v", type, duration, enterFromClass = `${name}-enter-from`, enterActiveClass = `${name}-enter-active`, enterToClass = `${name}-enter-to`, appearFromClass = enterFromClass, appearActiveClass = enterActiveClass, appearToClass = enterToClass, leaveFromClass = `${name}-leave-from`, leaveActiveClass = `${name}-leave-active`, leaveToClass = `${name}-leave-to` } = rawProps;
  const durations = normalizeDuration(duration);
  const enterDuration = durations && durations[0];
  const leaveDuration = durations && durations[1];
  const { onBeforeEnter, onEnter, onEnterCancelled, onLeave, onLeaveCancelled, onBeforeAppear = onBeforeEnter, onAppear = onEnter, onAppearCancelled = onEnterCancelled } = baseProps;
  const finishEnter = (el, isAppear, done) => {
    removeTransitionClass(el, isAppear ? appearToClass : enterToClass);
    removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);
    done && done();
  };
  const finishLeave = (el, done) => {
    el._isLeaving = false;
    removeTransitionClass(el, leaveFromClass);
    removeTransitionClass(el, leaveToClass);
    removeTransitionClass(el, leaveActiveClass);
    done && done();
  };
  const makeEnterHook = (isAppear) => {
    return (el, done) => {
      const hook = isAppear ? onAppear : onEnter;
      const resolve2 = () => finishEnter(el, isAppear, done);
      callHook(hook, [el, resolve2]);
      nextFrame(() => {
        removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);
        addTransitionClass(el, isAppear ? appearToClass : enterToClass);
        if (!hasExplicitCallback(hook)) {
          whenTransitionEnds(el, type, enterDuration, resolve2);
        }
      });
    };
  };
  return extend$1(baseProps, {
    onBeforeEnter(el) {
      callHook(onBeforeEnter, [el]);
      addTransitionClass(el, enterFromClass);
      addTransitionClass(el, enterActiveClass);
    },
    onBeforeAppear(el) {
      callHook(onBeforeAppear, [el]);
      addTransitionClass(el, appearFromClass);
      addTransitionClass(el, appearActiveClass);
    },
    onEnter: makeEnterHook(false),
    onAppear: makeEnterHook(true),
    onLeave(el, done) {
      el._isLeaving = true;
      const resolve2 = () => finishLeave(el, done);
      addTransitionClass(el, leaveFromClass);
      forceReflow();
      addTransitionClass(el, leaveActiveClass);
      nextFrame(() => {
        if (!el._isLeaving) {
          return;
        }
        removeTransitionClass(el, leaveFromClass);
        addTransitionClass(el, leaveToClass);
        if (!hasExplicitCallback(onLeave)) {
          whenTransitionEnds(el, type, leaveDuration, resolve2);
        }
      });
      callHook(onLeave, [el, resolve2]);
    },
    onEnterCancelled(el) {
      finishEnter(el, false);
      callHook(onEnterCancelled, [el]);
    },
    onAppearCancelled(el) {
      finishEnter(el, true);
      callHook(onAppearCancelled, [el]);
    },
    onLeaveCancelled(el) {
      finishLeave(el);
      callHook(onLeaveCancelled, [el]);
    }
  });
}
function normalizeDuration(duration) {
  if (duration == null) {
    return null;
  } else if (isObject$3(duration)) {
    return [NumberOf(duration.enter), NumberOf(duration.leave)];
  } else {
    const n = NumberOf(duration);
    return [n, n];
  }
}
function NumberOf(val) {
  const res = toNumber(val);
  return res;
}
function addTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c) => c && el.classList.add(c));
  (el._vtc || (el._vtc = /* @__PURE__ */ new Set())).add(cls);
}
function removeTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c) => c && el.classList.remove(c));
  const { _vtc } = el;
  if (_vtc) {
    _vtc.delete(cls);
    if (!_vtc.size) {
      el._vtc = void 0;
    }
  }
}
function nextFrame(cb) {
  requestAnimationFrame(() => {
    requestAnimationFrame(cb);
  });
}
let endId = 0;
function whenTransitionEnds(el, expectedType, explicitTimeout, resolve2) {
  const id = el._endId = ++endId;
  const resolveIfNotStale = () => {
    if (id === el._endId) {
      resolve2();
    }
  };
  if (explicitTimeout) {
    return setTimeout(resolveIfNotStale, explicitTimeout);
  }
  const { type, timeout, propCount } = getTransitionInfo(el, expectedType);
  if (!type) {
    return resolve2();
  }
  const endEvent = type + "end";
  let ended = 0;
  const end = () => {
    el.removeEventListener(endEvent, onEnd);
    resolveIfNotStale();
  };
  const onEnd = (e) => {
    if (e.target === el && ++ended >= propCount) {
      end();
    }
  };
  setTimeout(() => {
    if (ended < propCount) {
      end();
    }
  }, timeout + 1);
  el.addEventListener(endEvent, onEnd);
}
function getTransitionInfo(el, expectedType) {
  const styles = window.getComputedStyle(el);
  const getStyleProperties = (key) => (styles[key] || "").split(", ");
  const transitionDelays = getStyleProperties(`${TRANSITION}Delay`);
  const transitionDurations = getStyleProperties(`${TRANSITION}Duration`);
  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);
  const animationDelays = getStyleProperties(`${ANIMATION}Delay`);
  const animationDurations = getStyleProperties(`${ANIMATION}Duration`);
  const animationTimeout = getTimeout(animationDelays, animationDurations);
  let type = null;
  let timeout = 0;
  let propCount = 0;
  if (expectedType === TRANSITION) {
    if (transitionTimeout > 0) {
      type = TRANSITION;
      timeout = transitionTimeout;
      propCount = transitionDurations.length;
    }
  } else if (expectedType === ANIMATION) {
    if (animationTimeout > 0) {
      type = ANIMATION;
      timeout = animationTimeout;
      propCount = animationDurations.length;
    }
  } else {
    timeout = Math.max(transitionTimeout, animationTimeout);
    type = timeout > 0 ? transitionTimeout > animationTimeout ? TRANSITION : ANIMATION : null;
    propCount = type ? type === TRANSITION ? transitionDurations.length : animationDurations.length : 0;
  }
  const hasTransform = type === TRANSITION && /\b(transform|all)(,|$)/.test(getStyleProperties(`${TRANSITION}Property`).toString());
  return {
    type,
    timeout,
    propCount,
    hasTransform
  };
}
function getTimeout(delays, durations) {
  while (delays.length < durations.length) {
    delays = delays.concat(delays);
  }
  return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));
}
function toMs(s) {
  return Number(s.slice(0, -1).replace(",", ".")) * 1e3;
}
function forceReflow() {
  return document.body.offsetHeight;
}
const positionMap = /* @__PURE__ */ new WeakMap();
const newPositionMap = /* @__PURE__ */ new WeakMap();
const TransitionGroupImpl = {
  name: "TransitionGroup",
  props: /* @__PURE__ */ extend$1({}, TransitionPropsValidators, {
    tag: String,
    moveClass: String
  }),
  setup(props, { slots }) {
    const instance = getCurrentInstance();
    const state = useTransitionState();
    let prevChildren;
    let children;
    onUpdated(() => {
      if (!prevChildren.length) {
        return;
      }
      const moveClass = props.moveClass || `${props.name || "v"}-move`;
      if (!hasCSSTransform(prevChildren[0].el, instance.vnode.el, moveClass)) {
        return;
      }
      prevChildren.forEach(callPendingCbs);
      prevChildren.forEach(recordPosition);
      const movedChildren = prevChildren.filter(applyTranslation);
      forceReflow();
      movedChildren.forEach((c) => {
        const el = c.el;
        const style = el.style;
        addTransitionClass(el, moveClass);
        style.transform = style.webkitTransform = style.transitionDuration = "";
        const cb = el._moveCb = (e) => {
          if (e && e.target !== el) {
            return;
          }
          if (!e || /transform$/.test(e.propertyName)) {
            el.removeEventListener("transitionend", cb);
            el._moveCb = null;
            removeTransitionClass(el, moveClass);
          }
        };
        el.addEventListener("transitionend", cb);
      });
    });
    return () => {
      const rawProps = toRaw(props);
      const cssTransitionProps = resolveTransitionProps(rawProps);
      let tag = rawProps.tag || Fragment;
      prevChildren = children;
      children = slots.default ? getTransitionRawChildren(slots.default()) : [];
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        if (child.key != null) {
          setTransitionHooks(child, resolveTransitionHooks(child, cssTransitionProps, state, instance));
        }
      }
      if (prevChildren) {
        for (let i = 0; i < prevChildren.length; i++) {
          const child = prevChildren[i];
          setTransitionHooks(child, resolveTransitionHooks(child, cssTransitionProps, state, instance));
          positionMap.set(child, child.el.getBoundingClientRect());
        }
      }
      return createVNode(tag, null, children);
    };
  }
};
const TransitionGroup = TransitionGroupImpl;
function callPendingCbs(c) {
  const el = c.el;
  if (el._moveCb) {
    el._moveCb();
  }
  if (el._enterCb) {
    el._enterCb();
  }
}
function recordPosition(c) {
  newPositionMap.set(c, c.el.getBoundingClientRect());
}
function applyTranslation(c) {
  const oldPos = positionMap.get(c);
  const newPos = newPositionMap.get(c);
  const dx = oldPos.left - newPos.left;
  const dy = oldPos.top - newPos.top;
  if (dx || dy) {
    const s = c.el.style;
    s.transform = s.webkitTransform = `translate(${dx}px,${dy}px)`;
    s.transitionDuration = "0s";
    return c;
  }
}
function hasCSSTransform(el, root, moveClass) {
  const clone = el.cloneNode();
  if (el._vtc) {
    el._vtc.forEach((cls) => {
      cls.split(/\s+/).forEach((c) => c && clone.classList.remove(c));
    });
  }
  moveClass.split(/\s+/).forEach((c) => c && clone.classList.add(c));
  clone.style.display = "none";
  const container = root.nodeType === 1 ? root : root.parentNode;
  container.appendChild(clone);
  const { hasTransform } = getTransitionInfo(clone);
  container.removeChild(clone);
  return hasTransform;
}
const rendererOptions = /* @__PURE__ */ extend$1({ patchProp }, nodeOps);
let renderer;
function ensureRenderer() {
  return renderer || (renderer = createRenderer(rendererOptions));
}
const createApp = (...args) => {
  const app2 = ensureRenderer().createApp(...args);
  const { mount } = app2;
  app2.mount = (containerOrSelector) => {
    const container = normalizeContainer(containerOrSelector);
    if (!container)
      return;
    const component = app2._component;
    if (!isFunction$1(component) && !component.render && !component.template) {
      component.template = container.innerHTML;
    }
    container.innerHTML = "";
    const proxy = mount(container, false, container instanceof SVGElement);
    if (container instanceof Element) {
      container.removeAttribute("v-cloak");
      container.setAttribute("data-v-app", "");
    }
    return proxy;
  };
  return app2;
};
function normalizeContainer(container) {
  if (isString$1(container)) {
    const res = document.querySelector(container);
    return res;
  }
  return container;
}
var mdiV7 = "";
var fontawesomeV6 = "";
var robotoFont = "";
var materialIcons$1 = "";
var quasar = "";
var app = "";
function injectProp(target2, propName, get2, set2) {
  Object.defineProperty(target2, propName, {
    get: get2,
    set: set2,
    enumerable: true
  });
  return target2;
}
function injectMultipleProps(target2, props) {
  for (const key in props) {
    injectProp(target2, key, props[key]);
  }
  return target2;
}
const isRuntimeSsrPreHydration = ref(
  false
);
let iosCorrection;
function getMatch(userAgent2, platformMatch) {
  const match = /(edg|edge|edga|edgios)\/([\w.]+)/.exec(userAgent2) || /(opr)[\/]([\w.]+)/.exec(userAgent2) || /(vivaldi)[\/]([\w.]+)/.exec(userAgent2) || /(chrome|crios)[\/]([\w.]+)/.exec(userAgent2) || /(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(userAgent2) || /(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(userAgent2) || /(firefox|fxios)[\/]([\w.]+)/.exec(userAgent2) || /(webkit)[\/]([\w.]+)/.exec(userAgent2) || /(opera)(?:.*version|)[\/]([\w.]+)/.exec(userAgent2) || [];
  return {
    browser: match[5] || match[3] || match[1] || "",
    version: match[2] || match[4] || "0",
    versionNumber: match[4] || match[2] || "0",
    platform: platformMatch[0] || ""
  };
}
function getPlatformMatch(userAgent2) {
  return /(ipad)/.exec(userAgent2) || /(ipod)/.exec(userAgent2) || /(windows phone)/.exec(userAgent2) || /(iphone)/.exec(userAgent2) || /(kindle)/.exec(userAgent2) || /(silk)/.exec(userAgent2) || /(android)/.exec(userAgent2) || /(win)/.exec(userAgent2) || /(mac)/.exec(userAgent2) || /(linux)/.exec(userAgent2) || /(cros)/.exec(userAgent2) || /(playbook)/.exec(userAgent2) || /(bb)/.exec(userAgent2) || /(blackberry)/.exec(userAgent2) || [];
}
const hasTouch = "ontouchstart" in window || window.navigator.maxTouchPoints > 0;
function applyIosCorrection(is) {
  iosCorrection = { is: { ...is } };
  delete is.mac;
  delete is.desktop;
  const platform = Math.min(window.innerHeight, window.innerWidth) > 414 ? "ipad" : "iphone";
  Object.assign(is, {
    mobile: true,
    ios: true,
    platform,
    [platform]: true
  });
}
function getPlatform(UA) {
  const userAgent2 = UA.toLowerCase(), platformMatch = getPlatformMatch(userAgent2), matched = getMatch(userAgent2, platformMatch), browser = {};
  if (matched.browser) {
    browser[matched.browser] = true;
    browser.version = matched.version;
    browser.versionNumber = parseInt(matched.versionNumber, 10);
  }
  if (matched.platform) {
    browser[matched.platform] = true;
  }
  const knownMobiles = browser.android || browser.ios || browser.bb || browser.blackberry || browser.ipad || browser.iphone || browser.ipod || browser.kindle || browser.playbook || browser.silk || browser["windows phone"];
  if (knownMobiles === true || userAgent2.indexOf("mobile") > -1) {
    browser.mobile = true;
    if (browser.edga || browser.edgios) {
      browser.edge = true;
      matched.browser = "edge";
    } else if (browser.crios) {
      browser.chrome = true;
      matched.browser = "chrome";
    } else if (browser.fxios) {
      browser.firefox = true;
      matched.browser = "firefox";
    }
  } else {
    browser.desktop = true;
  }
  if (browser.ipod || browser.ipad || browser.iphone) {
    browser.ios = true;
  }
  if (browser["windows phone"]) {
    browser.winphone = true;
    delete browser["windows phone"];
  }
  if (browser.chrome || browser.opr || browser.safari || browser.vivaldi || browser.mobile === true && browser.ios !== true && knownMobiles !== true) {
    browser.webkit = true;
  }
  if (browser.edg) {
    matched.browser = "edgechromium";
    browser.edgeChromium = true;
  }
  if (browser.safari && browser.blackberry || browser.bb) {
    matched.browser = "blackberry";
    browser.blackberry = true;
  }
  if (browser.safari && browser.playbook) {
    matched.browser = "playbook";
    browser.playbook = true;
  }
  if (browser.opr) {
    matched.browser = "opera";
    browser.opera = true;
  }
  if (browser.safari && browser.android) {
    matched.browser = "android";
    browser.android = true;
  }
  if (browser.safari && browser.kindle) {
    matched.browser = "kindle";
    browser.kindle = true;
  }
  if (browser.safari && browser.silk) {
    matched.browser = "silk";
    browser.silk = true;
  }
  if (browser.vivaldi) {
    matched.browser = "vivaldi";
    browser.vivaldi = true;
  }
  browser.name = matched.browser;
  browser.platform = matched.platform;
  {
    if (userAgent2.indexOf("electron") > -1) {
      browser.electron = true;
    } else if (document.location.href.indexOf("-extension://") > -1) {
      browser.bex = true;
    } else {
      if (window.Capacitor !== void 0) {
        browser.capacitor = true;
        browser.nativeMobile = true;
        browser.nativeMobileWrapper = "capacitor";
      } else if (window._cordovaNative !== void 0 || window.cordova !== void 0) {
        browser.cordova = true;
        browser.nativeMobile = true;
        browser.nativeMobileWrapper = "cordova";
      }
      if (hasTouch === true && browser.mac === true && (browser.desktop === true && browser.safari === true || browser.nativeMobile === true && browser.android !== true && browser.ios !== true && browser.ipad !== true)) {
        applyIosCorrection(browser);
      }
    }
  }
  return browser;
}
const userAgent = navigator.userAgent || navigator.vendor || window.opera;
const ssrClient = {
  has: {
    touch: false,
    webStorage: false
  },
  within: { iframe: false }
};
const client = {
  userAgent,
  is: getPlatform(userAgent),
  has: {
    touch: hasTouch
  },
  within: {
    iframe: window.self !== window.top
  }
};
const Platform = {
  install(opts) {
    const { $q } = opts;
    if (isRuntimeSsrPreHydration.value === true) {
      opts.onSSRHydrated.push(() => {
        Object.assign($q.platform, client);
        isRuntimeSsrPreHydration.value = false;
        iosCorrection = void 0;
      });
      $q.platform = reactive(this);
    } else {
      $q.platform = this;
    }
  }
};
{
  let hasWebStorage;
  injectProp(client.has, "webStorage", () => {
    if (hasWebStorage !== void 0) {
      return hasWebStorage;
    }
    try {
      if (window.localStorage) {
        hasWebStorage = true;
        return true;
      }
    } catch (e) {
    }
    hasWebStorage = false;
    return false;
  });
  client.is.ios === true && window.navigator.vendor.toLowerCase().indexOf("apple") === -1;
  if (isRuntimeSsrPreHydration.value === true) {
    Object.assign(Platform, client, iosCorrection, ssrClient);
  } else {
    Object.assign(Platform, client);
  }
}
var defineReactivePlugin = (state, plugin) => {
  const reactiveState = reactive(state);
  for (const name in state) {
    injectProp(
      plugin,
      name,
      () => reactiveState[name],
      (val) => {
        reactiveState[name] = val;
      }
    );
  }
  return plugin;
};
const listenOpts = {
  hasPassive: false,
  passiveCapture: true,
  notPassiveCapture: true
};
try {
  const opts = Object.defineProperty({}, "passive", {
    get() {
      Object.assign(listenOpts, {
        hasPassive: true,
        passive: { passive: true },
        notPassive: { passive: false },
        passiveCapture: { passive: true, capture: true },
        notPassiveCapture: { passive: false, capture: true }
      });
    }
  });
  window.addEventListener("qtest", null, opts);
  window.removeEventListener("qtest", null, opts);
} catch (e) {
}
function noop$2() {
}
function leftClick(e) {
  return e.button === 0;
}
function position(e) {
  if (e.touches && e.touches[0]) {
    e = e.touches[0];
  } else if (e.changedTouches && e.changedTouches[0]) {
    e = e.changedTouches[0];
  } else if (e.targetTouches && e.targetTouches[0]) {
    e = e.targetTouches[0];
  }
  return {
    top: e.clientY,
    left: e.clientX
  };
}
function getEventPath(e) {
  if (e.path) {
    return e.path;
  }
  if (e.composedPath) {
    return e.composedPath();
  }
  const path = [];
  let el = e.target;
  while (el) {
    path.push(el);
    if (el.tagName === "HTML") {
      path.push(document);
      path.push(window);
      return path;
    }
    el = el.parentElement;
  }
}
function stop(e) {
  e.stopPropagation();
}
function prevent(e) {
  e.cancelable !== false && e.preventDefault();
}
function stopAndPrevent(e) {
  e.cancelable !== false && e.preventDefault();
  e.stopPropagation();
}
function preventDraggable(el, status) {
  if (el === void 0 || status === true && el.__dragPrevented === true) {
    return;
  }
  const fn = status === true ? (el2) => {
    el2.__dragPrevented = true;
    el2.addEventListener("dragstart", prevent, listenOpts.notPassiveCapture);
  } : (el2) => {
    delete el2.__dragPrevented;
    el2.removeEventListener("dragstart", prevent, listenOpts.notPassiveCapture);
  };
  el.querySelectorAll("a, img").forEach(fn);
}
function addEvt(ctx, targetName, events) {
  const name = `__q_${targetName}_evt`;
  ctx[name] = ctx[name] !== void 0 ? ctx[name].concat(events) : events;
  events.forEach((evt) => {
    evt[0].addEventListener(evt[1], ctx[evt[2]], listenOpts[evt[3]]);
  });
}
function cleanEvt(ctx, targetName) {
  const name = `__q_${targetName}_evt`;
  if (ctx[name] !== void 0) {
    ctx[name].forEach((evt) => {
      evt[0].removeEventListener(evt[1], ctx[evt[2]], listenOpts[evt[3]]);
    });
    ctx[name] = void 0;
  }
}
function debounce(fn, wait = 250, immediate) {
  let timeout;
  function debounced() {
    const args = arguments;
    const later = () => {
      timeout = void 0;
      if (immediate !== true) {
        fn.apply(this, args);
      }
    };
    clearTimeout(timeout);
    if (immediate === true && timeout === void 0) {
      fn.apply(this, args);
    }
    timeout = setTimeout(later, wait);
  }
  debounced.cancel = () => {
    clearTimeout(timeout);
  };
  return debounced;
}
const SIZE_LIST = ["sm", "md", "lg", "xl"];
const { passive } = listenOpts;
var Screen = defineReactivePlugin({
  width: 0,
  height: 0,
  name: "xs",
  sizes: {
    sm: 600,
    md: 1024,
    lg: 1440,
    xl: 1920
  },
  lt: {
    sm: true,
    md: true,
    lg: true,
    xl: true
  },
  gt: {
    xs: false,
    sm: false,
    md: false,
    lg: false
  },
  xs: true,
  sm: false,
  md: false,
  lg: false,
  xl: false
}, {
  setSizes: noop$2,
  setDebounce: noop$2,
  install({ $q, onSSRHydrated }) {
    $q.screen = this;
    if (this.__installed === true) {
      if ($q.config.screen !== void 0) {
        if ($q.config.screen.bodyClasses === false) {
          document.body.classList.remove(`screen--${this.name}`);
        } else {
          this.__update(true);
        }
      }
      return;
    }
    const { visualViewport } = window;
    const target2 = visualViewport || window;
    const scrollingElement = document.scrollingElement || document.documentElement;
    const getSize = visualViewport === void 0 || client.is.mobile === true ? () => [
      Math.max(window.innerWidth, scrollingElement.clientWidth),
      Math.max(window.innerHeight, scrollingElement.clientHeight)
    ] : () => [
      visualViewport.width * visualViewport.scale + window.innerWidth - scrollingElement.clientWidth,
      visualViewport.height * visualViewport.scale + window.innerHeight - scrollingElement.clientHeight
    ];
    const classes = $q.config.screen !== void 0 && $q.config.screen.bodyClasses === true;
    this.__update = (force) => {
      const [w, h2] = getSize();
      if (h2 !== this.height) {
        this.height = h2;
      }
      if (w !== this.width) {
        this.width = w;
      } else if (force !== true) {
        return;
      }
      let s = this.sizes;
      this.gt.xs = w >= s.sm;
      this.gt.sm = w >= s.md;
      this.gt.md = w >= s.lg;
      this.gt.lg = w >= s.xl;
      this.lt.sm = w < s.sm;
      this.lt.md = w < s.md;
      this.lt.lg = w < s.lg;
      this.lt.xl = w < s.xl;
      this.xs = this.lt.sm;
      this.sm = this.gt.xs === true && this.lt.md === true;
      this.md = this.gt.sm === true && this.lt.lg === true;
      this.lg = this.gt.md === true && this.lt.xl === true;
      this.xl = this.gt.lg;
      s = this.xs === true && "xs" || this.sm === true && "sm" || this.md === true && "md" || this.lg === true && "lg" || "xl";
      if (s !== this.name) {
        if (classes === true) {
          document.body.classList.remove(`screen--${this.name}`);
          document.body.classList.add(`screen--${s}`);
        }
        this.name = s;
      }
    };
    let updateEvt, updateSizes = {}, updateDebounce = 16;
    this.setSizes = (sizes) => {
      SIZE_LIST.forEach((name) => {
        if (sizes[name] !== void 0) {
          updateSizes[name] = sizes[name];
        }
      });
    };
    this.setDebounce = (deb) => {
      updateDebounce = deb;
    };
    const start2 = () => {
      const style = getComputedStyle(document.body);
      if (style.getPropertyValue("--q-size-sm")) {
        SIZE_LIST.forEach((name) => {
          this.sizes[name] = parseInt(style.getPropertyValue(`--q-size-${name}`), 10);
        });
      }
      this.setSizes = (sizes) => {
        SIZE_LIST.forEach((name) => {
          if (sizes[name]) {
            this.sizes[name] = sizes[name];
          }
        });
        this.__update(true);
      };
      this.setDebounce = (delay) => {
        updateEvt !== void 0 && target2.removeEventListener("resize", updateEvt, passive);
        updateEvt = delay > 0 ? debounce(this.__update, delay) : this.__update;
        target2.addEventListener("resize", updateEvt, passive);
      };
      this.setDebounce(updateDebounce);
      if (Object.keys(updateSizes).length > 0) {
        this.setSizes(updateSizes);
        updateSizes = void 0;
      } else {
        this.__update();
      }
      classes === true && this.name === "xs" && document.body.classList.add("screen--xs");
    };
    if (isRuntimeSsrPreHydration.value === true) {
      onSSRHydrated.push(start2);
    } else {
      start2();
    }
  }
});
const Plugin$6 = defineReactivePlugin({
  isActive: false,
  mode: false
}, {
  __media: void 0,
  set(val) {
    Plugin$6.mode = val;
    if (val === "auto") {
      if (Plugin$6.__media === void 0) {
        Plugin$6.__media = window.matchMedia("(prefers-color-scheme: dark)");
        Plugin$6.__updateMedia = () => {
          Plugin$6.set("auto");
        };
        Plugin$6.__media.addListener(Plugin$6.__updateMedia);
      }
      val = Plugin$6.__media.matches;
    } else if (Plugin$6.__media !== void 0) {
      Plugin$6.__media.removeListener(Plugin$6.__updateMedia);
      Plugin$6.__media = void 0;
    }
    Plugin$6.isActive = val === true;
    document.body.classList.remove(`body--${val === true ? "light" : "dark"}`);
    document.body.classList.add(`body--${val === true ? "dark" : "light"}`);
  },
  toggle() {
    {
      Plugin$6.set(Plugin$6.isActive === false);
    }
  },
  install({ $q, onSSRHydrated, ssrContext }) {
    const { dark } = $q.config;
    $q.dark = this;
    if (this.__installed === true && dark === void 0) {
      return;
    }
    this.isActive = dark === true;
    const initialVal = dark !== void 0 ? dark : false;
    if (isRuntimeSsrPreHydration.value === true) {
      const ssrSet = (val) => {
        this.__fromSSR = val;
      };
      const originalSet = this.set;
      this.set = ssrSet;
      ssrSet(initialVal);
      onSSRHydrated.push(() => {
        this.set = originalSet;
        this.set(this.__fromSSR);
      });
    } else {
      this.set(initialVal);
    }
  }
});
const getTrue = () => true;
function filterInvalidPath(path) {
  return typeof path === "string" && path !== "" && path !== "/" && path !== "#/";
}
function normalizeExitPath(path) {
  path.startsWith("#") === true && (path = path.substring(1));
  path.startsWith("/") === false && (path = "/" + path);
  path.endsWith("/") === true && (path = path.substring(0, path.length - 1));
  return "#" + path;
}
function getShouldExitFn(cfg) {
  if (cfg.backButtonExit === false) {
    return () => false;
  }
  if (cfg.backButtonExit === "*") {
    return getTrue;
  }
  const exitPaths = ["#/"];
  Array.isArray(cfg.backButtonExit) === true && exitPaths.push(
    ...cfg.backButtonExit.filter(filterInvalidPath).map(normalizeExitPath)
  );
  return () => exitPaths.includes(window.location.hash);
}
var History = {
  __history: [],
  add: noop$2,
  remove: noop$2,
  install({ $q }) {
    if (this.__installed === true) {
      return;
    }
    const { cordova, capacitor } = client.is;
    if (cordova !== true && capacitor !== true) {
      return;
    }
    const qConf = $q.config[cordova === true ? "cordova" : "capacitor"];
    if (qConf !== void 0 && qConf.backButton === false) {
      return;
    }
    if (capacitor === true && (window.Capacitor === void 0 || window.Capacitor.Plugins.App === void 0)) {
      return;
    }
    this.add = (entry) => {
      if (entry.condition === void 0) {
        entry.condition = getTrue;
      }
      this.__history.push(entry);
    };
    this.remove = (entry) => {
      const index = this.__history.indexOf(entry);
      if (index >= 0) {
        this.__history.splice(index, 1);
      }
    };
    const shouldExit = getShouldExitFn(
      Object.assign(
        { backButtonExit: true },
        qConf
      )
    );
    const backHandler = () => {
      if (this.__history.length) {
        const entry = this.__history[this.__history.length - 1];
        if (entry.condition() === true) {
          this.__history.pop();
          entry.handler();
        }
      } else if (shouldExit() === true) {
        navigator.app.exitApp();
      } else {
        window.history.back();
      }
    };
    if (cordova === true) {
      document.addEventListener("deviceready", () => {
        document.addEventListener("backbutton", backHandler, false);
      });
    } else {
      window.Capacitor.Plugins.App.addListener("backButton", backHandler);
    }
  }
};
var defaultLang = {
  isoName: "en-US",
  nativeName: "English (US)",
  label: {
    clear: "Clear",
    ok: "OK",
    cancel: "Cancel",
    close: "Close",
    set: "Set",
    select: "Select",
    reset: "Reset",
    remove: "Remove",
    update: "Update",
    create: "Create",
    search: "Search",
    filter: "Filter",
    refresh: "Refresh",
    expand: (label) => label ? `Expand "${label}"` : "Expand",
    collapse: (label) => label ? `Collapse "${label}"` : "Collapse"
  },
  date: {
    days: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    daysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    firstDayOfWeek: 0,
    format24h: false,
    pluralDay: "days"
  },
  table: {
    noData: "No data available",
    noResults: "No matching records found",
    loading: "Loading...",
    selectedRecords: (rows) => rows === 1 ? "1 record selected." : (rows === 0 ? "No" : rows) + " records selected.",
    recordsPerPage: "Records per page:",
    allRows: "All",
    pagination: (start2, end, total) => start2 + "-" + end + " of " + total,
    columns: "Columns"
  },
  editor: {
    url: "URL",
    bold: "Bold",
    italic: "Italic",
    strikethrough: "Strikethrough",
    underline: "Underline",
    unorderedList: "Unordered List",
    orderedList: "Ordered List",
    subscript: "Subscript",
    superscript: "Superscript",
    hyperlink: "Hyperlink",
    toggleFullscreen: "Toggle Fullscreen",
    quote: "Quote",
    left: "Left align",
    center: "Center align",
    right: "Right align",
    justify: "Justify align",
    print: "Print",
    outdent: "Decrease indentation",
    indent: "Increase indentation",
    removeFormat: "Remove formatting",
    formatting: "Formatting",
    fontSize: "Font Size",
    align: "Align",
    hr: "Insert Horizontal Rule",
    undo: "Undo",
    redo: "Redo",
    heading1: "Heading 1",
    heading2: "Heading 2",
    heading3: "Heading 3",
    heading4: "Heading 4",
    heading5: "Heading 5",
    heading6: "Heading 6",
    paragraph: "Paragraph",
    code: "Code",
    size1: "Very small",
    size2: "A bit small",
    size3: "Normal",
    size4: "Medium-large",
    size5: "Big",
    size6: "Very big",
    size7: "Maximum",
    defaultFont: "Default Font",
    viewSource: "View Source"
  },
  tree: {
    noNodes: "No nodes available",
    noResults: "No matching nodes found"
  }
};
function getLocale() {
  const val = Array.isArray(navigator.languages) === true && navigator.languages.length > 0 ? navigator.languages[0] : navigator.language;
  if (typeof val === "string") {
    return val.split(/[-_]/).map((v, i) => i === 0 ? v.toLowerCase() : i > 1 || v.length < 4 ? v.toUpperCase() : v[0].toUpperCase() + v.slice(1).toLowerCase()).join("-");
  }
}
const Plugin$5 = defineReactivePlugin({
  __langPack: {}
}, {
  getLocale,
  set(langObject = defaultLang, ssrContext) {
    const lang = {
      ...langObject,
      rtl: langObject.rtl === true,
      getLocale
    };
    {
      lang.set = Plugin$5.set;
      if (Plugin$5.__langConfig === void 0 || Plugin$5.__langConfig.noHtmlAttrs !== true) {
        const el = document.documentElement;
        el.setAttribute("dir", lang.rtl === true ? "rtl" : "ltr");
        el.setAttribute("lang", lang.isoName);
      }
      Object.assign(Plugin$5.__langPack, lang);
      Plugin$5.props = lang;
      Plugin$5.isoName = lang.isoName;
      Plugin$5.nativeName = lang.nativeName;
    }
  },
  install({ $q, lang, ssrContext }) {
    {
      $q.lang = Plugin$5.__langPack;
      Plugin$5.__langConfig = $q.config.lang;
      if (this.__installed === true) {
        lang !== void 0 && this.set(lang);
      } else {
        this.set(lang || defaultLang);
      }
    }
  }
});
function setCssVar(propName, value, element = document.body) {
  if (typeof propName !== "string") {
    throw new TypeError("Expected a string as propName");
  }
  if (typeof value !== "string") {
    throw new TypeError("Expected a string as value");
  }
  if (!(element instanceof Element)) {
    throw new TypeError("Expected a DOM element");
  }
  element.style.setProperty(`--q-${propName}`, value);
}
let lastKeyCompositionStatus = false;
function onKeyDownComposition(evt) {
  lastKeyCompositionStatus = evt.isComposing === true;
}
function shouldIgnoreKey(evt) {
  return lastKeyCompositionStatus === true || evt !== Object(evt) || evt.isComposing === true || evt.qKeyEvent === true;
}
function isKeyCode(evt, keyCodes) {
  return shouldIgnoreKey(evt) === true ? false : [].concat(keyCodes).includes(evt.keyCode);
}
function getMobilePlatform(is) {
  if (is.ios === true)
    return "ios";
  if (is.android === true)
    return "android";
}
function getBodyClasses({ is, has: has2, within }, cfg) {
  const cls = [
    is.desktop === true ? "desktop" : "mobile",
    `${has2.touch === false ? "no-" : ""}touch`
  ];
  if (is.mobile === true) {
    const mobile = getMobilePlatform(is);
    mobile !== void 0 && cls.push("platform-" + mobile);
  }
  if (is.nativeMobile === true) {
    const type = is.nativeMobileWrapper;
    cls.push(type);
    cls.push("native-mobile");
    if (is.ios === true && (cfg[type] === void 0 || cfg[type].iosStatusBarPadding !== false)) {
      cls.push("q-ios-padding");
    }
  } else if (is.electron === true) {
    cls.push("electron");
  } else if (is.bex === true) {
    cls.push("bex");
  }
  within.iframe === true && cls.push("within-iframe");
  return cls;
}
function applyClientSsrCorrections() {
  const { is } = client;
  const classes = document.body.className;
  const classList = new Set(classes.replace(/ {2}/g, " ").split(" "));
  if (iosCorrection !== void 0) {
    classList.delete("desktop");
    classList.add("platform-ios");
    classList.add("mobile");
  } else if (is.nativeMobile !== true && is.electron !== true && is.bex !== true) {
    if (is.desktop === true) {
      classList.delete("mobile");
      classList.delete("platform-ios");
      classList.delete("platform-android");
      classList.add("desktop");
    } else if (is.mobile === true) {
      classList.delete("desktop");
      classList.add("mobile");
      const mobile = getMobilePlatform(is);
      if (mobile !== void 0) {
        classList.add(`platform-${mobile}`);
        classList.delete(`platform-${mobile === "ios" ? "android" : "ios"}`);
      } else {
        classList.delete("platform-ios");
        classList.delete("platform-android");
      }
    }
  }
  if (client.has.touch === true) {
    classList.delete("no-touch");
    classList.add("touch");
  }
  if (client.within.iframe === true) {
    classList.add("within-iframe");
  }
  const newCls = Array.from(classList).join(" ");
  if (classes !== newCls) {
    document.body.className = newCls;
  }
}
function setColors(brand) {
  for (const color in brand) {
    setCssVar(color, brand[color]);
  }
}
var Body = {
  install(opts) {
    if (this.__installed === true) {
      return;
    }
    if (isRuntimeSsrPreHydration.value === true) {
      applyClientSsrCorrections();
    } else {
      const { $q } = opts;
      $q.config.brand !== void 0 && setColors($q.config.brand);
      const cls = getBodyClasses(client, $q.config);
      document.body.classList.add.apply(document.body.classList, cls);
    }
    if (client.is.ios === true) {
      document.body.addEventListener("touchstart", noop$2);
    }
    window.addEventListener("keydown", onKeyDownComposition, true);
  }
};
var materialIcons = {
  name: "material-icons",
  type: {
    positive: "check_circle",
    negative: "warning",
    info: "info",
    warning: "priority_high"
  },
  arrow: {
    up: "arrow_upward",
    right: "arrow_forward",
    down: "arrow_downward",
    left: "arrow_back",
    dropdown: "arrow_drop_down"
  },
  chevron: {
    left: "chevron_left",
    right: "chevron_right"
  },
  colorPicker: {
    spectrum: "gradient",
    tune: "tune",
    palette: "style"
  },
  pullToRefresh: {
    icon: "refresh"
  },
  carousel: {
    left: "chevron_left",
    right: "chevron_right",
    up: "keyboard_arrow_up",
    down: "keyboard_arrow_down",
    navigationIcon: "lens"
  },
  chip: {
    remove: "cancel",
    selected: "check"
  },
  datetime: {
    arrowLeft: "chevron_left",
    arrowRight: "chevron_right",
    now: "access_time",
    today: "today"
  },
  editor: {
    bold: "format_bold",
    italic: "format_italic",
    strikethrough: "strikethrough_s",
    underline: "format_underlined",
    unorderedList: "format_list_bulleted",
    orderedList: "format_list_numbered",
    subscript: "vertical_align_bottom",
    superscript: "vertical_align_top",
    hyperlink: "link",
    toggleFullscreen: "fullscreen",
    quote: "format_quote",
    left: "format_align_left",
    center: "format_align_center",
    right: "format_align_right",
    justify: "format_align_justify",
    print: "print",
    outdent: "format_indent_decrease",
    indent: "format_indent_increase",
    removeFormat: "format_clear",
    formatting: "text_format",
    fontSize: "format_size",
    align: "format_align_left",
    hr: "remove",
    undo: "undo",
    redo: "redo",
    heading: "format_size",
    code: "code",
    size: "format_size",
    font: "font_download",
    viewSource: "code"
  },
  expansionItem: {
    icon: "keyboard_arrow_down",
    denseIcon: "arrow_drop_down"
  },
  fab: {
    icon: "add",
    activeIcon: "close"
  },
  field: {
    clear: "cancel",
    error: "error"
  },
  pagination: {
    first: "first_page",
    prev: "keyboard_arrow_left",
    next: "keyboard_arrow_right",
    last: "last_page"
  },
  rating: {
    icon: "grade"
  },
  stepper: {
    done: "check",
    active: "edit",
    error: "warning"
  },
  tabs: {
    left: "chevron_left",
    right: "chevron_right",
    up: "keyboard_arrow_up",
    down: "keyboard_arrow_down"
  },
  table: {
    arrowUp: "arrow_upward",
    warning: "warning",
    firstPage: "first_page",
    prevPage: "chevron_left",
    nextPage: "chevron_right",
    lastPage: "last_page"
  },
  tree: {
    icon: "play_arrow"
  },
  uploader: {
    done: "done",
    clear: "clear",
    add: "add_box",
    upload: "cloud_upload",
    removeQueue: "clear_all",
    removeUploaded: "done_all"
  }
};
const Plugin$4 = defineReactivePlugin({
  iconMapFn: null,
  __icons: {}
}, {
  set(setObject, ssrContext) {
    const def2 = { ...setObject, rtl: setObject.rtl === true };
    {
      def2.set = Plugin$4.set;
      Object.assign(Plugin$4.__icons, def2);
    }
  },
  install({ $q, iconSet, ssrContext }) {
    {
      if ($q.config.iconMapFn !== void 0) {
        this.iconMapFn = $q.config.iconMapFn;
      }
      $q.iconSet = this.__icons;
      injectProp($q, "iconMapFn", () => this.iconMapFn, (val) => {
        this.iconMapFn = val;
      });
      if (this.__installed === true) {
        iconSet !== void 0 && this.set(iconSet);
      } else {
        this.set(iconSet || materialIcons);
      }
    }
  }
});
const quasarKey = "_q_";
const layoutKey = "_q_l_";
const pageContainerKey = "_q_pc_";
const formKey = "_q_fo_";
const tabsKey = "_q_tabs_";
const uploaderKey = "_q_u_";
const emptyRenderFn = () => {
};
const globalConfig = {};
let globalConfigIsFrozen = false;
function freezeGlobalConfig() {
  globalConfigIsFrozen = true;
}
function isDeepEqual(a, b) {
  if (a === b) {
    return true;
  }
  if (a !== null && b !== null && typeof a === "object" && typeof b === "object") {
    if (a.constructor !== b.constructor) {
      return false;
    }
    let length, i;
    if (a.constructor === Array) {
      length = a.length;
      if (length !== b.length) {
        return false;
      }
      for (i = length; i-- !== 0; ) {
        if (isDeepEqual(a[i], b[i]) !== true) {
          return false;
        }
      }
      return true;
    }
    if (a.constructor === Map) {
      if (a.size !== b.size) {
        return false;
      }
      i = a.entries().next();
      while (i.done !== true) {
        if (b.has(i.value[0]) !== true) {
          return false;
        }
        i = i.next();
      }
      i = a.entries().next();
      while (i.done !== true) {
        if (isDeepEqual(i.value[1], b.get(i.value[0])) !== true) {
          return false;
        }
        i = i.next();
      }
      return true;
    }
    if (a.constructor === Set) {
      if (a.size !== b.size) {
        return false;
      }
      i = a.entries().next();
      while (i.done !== true) {
        if (b.has(i.value[0]) !== true) {
          return false;
        }
        i = i.next();
      }
      return true;
    }
    if (a.buffer != null && a.buffer.constructor === ArrayBuffer) {
      length = a.length;
      if (length !== b.length) {
        return false;
      }
      for (i = length; i-- !== 0; ) {
        if (a[i] !== b[i]) {
          return false;
        }
      }
      return true;
    }
    if (a.constructor === RegExp) {
      return a.source === b.source && a.flags === b.flags;
    }
    if (a.valueOf !== Object.prototype.valueOf) {
      return a.valueOf() === b.valueOf();
    }
    if (a.toString !== Object.prototype.toString) {
      return a.toString() === b.toString();
    }
    const keys = Object.keys(a).filter((key) => a[key] !== void 0);
    length = keys.length;
    if (length !== Object.keys(b).filter((key) => b[key] !== void 0).length) {
      return false;
    }
    for (i = length; i-- !== 0; ) {
      const key = keys[i];
      if (isDeepEqual(a[key], b[key]) !== true) {
        return false;
      }
    }
    return true;
  }
  return a !== a && b !== b;
}
function isObject$2(v) {
  return v !== null && typeof v === "object" && Array.isArray(v) !== true;
}
function isDate$1(v) {
  return Object.prototype.toString.call(v) === "[object Date]";
}
function isRegexp(v) {
  return Object.prototype.toString.call(v) === "[object RegExp]";
}
function isNumber$1(v) {
  return typeof v === "number" && isFinite(v);
}
const autoInstalledPlugins = [
  Platform,
  Body,
  Plugin$6,
  Screen,
  History,
  Plugin$5,
  Plugin$4
];
function createChildApp(appCfg, parentApp) {
  const app2 = createApp(appCfg);
  app2.config.globalProperties = parentApp.config.globalProperties;
  const { reload, ...appContext } = parentApp._context;
  Object.assign(app2._context, appContext);
  return app2;
}
function installPlugins(pluginOpts, pluginList) {
  pluginList.forEach((Plugin2) => {
    Plugin2.install(pluginOpts);
    Plugin2.__installed = true;
  });
}
function prepareApp(app2, uiOpts, pluginOpts) {
  app2.config.globalProperties.$q = pluginOpts.$q;
  app2.provide(quasarKey, pluginOpts.$q);
  installPlugins(pluginOpts, autoInstalledPlugins);
  uiOpts.components !== void 0 && Object.values(uiOpts.components).forEach((c) => {
    if (isObject$2(c) === true && c.name !== void 0) {
      app2.component(c.name, c);
    }
  });
  uiOpts.directives !== void 0 && Object.values(uiOpts.directives).forEach((d) => {
    if (isObject$2(d) === true && d.name !== void 0) {
      app2.directive(d.name, d);
    }
  });
  uiOpts.plugins !== void 0 && installPlugins(
    pluginOpts,
    Object.values(uiOpts.plugins).filter(
      (p2) => typeof p2.install === "function" && autoInstalledPlugins.includes(p2) === false
    )
  );
  if (isRuntimeSsrPreHydration.value === true) {
    pluginOpts.$q.onSSRHydrated = () => {
      pluginOpts.onSSRHydrated.forEach((fn) => {
        fn();
      });
      pluginOpts.$q.onSSRHydrated = () => {
      };
    };
  }
}
var installQuasar = function(parentApp, opts = {}) {
  const $q = { version: "2.11.3" };
  if (globalConfigIsFrozen === false) {
    if (opts.config !== void 0) {
      Object.assign(globalConfig, opts.config);
    }
    $q.config = { ...globalConfig };
    freezeGlobalConfig();
  } else {
    $q.config = opts.config || {};
  }
  prepareApp(parentApp, opts, {
    parentApp,
    $q,
    lang: opts.lang,
    iconSet: opts.iconSet,
    onSSRHydrated: []
  });
};
var Quasar = {
  version: "2.11.3",
  install: installQuasar,
  lang: Plugin$5,
  iconSet: Plugin$4
};
var _export_sfc = (sfc, props) => {
  const target2 = sfc.__vccOpts || sfc;
  for (const [key, val] of props) {
    target2[key] = val;
  }
  return target2;
};
const _sfc_main = {};
function _sfc_render(_ctx, _cache) {
  const _component_router_view = resolveComponent("router-view");
  return openBlock(), createBlock(_component_router_view);
}
var App = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render], ["__file", "App.vue"]]);
function boot(callback) {
  return callback;
}
function route(callback) {
  return callback;
}
function store(callback) {
  return callback;
}
var isVue2 = false;
function getDevtoolsGlobalHook() {
  return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;
}
function getTarget() {
  return typeof navigator !== "undefined" && typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {};
}
const isProxyAvailable = typeof Proxy === "function";
const HOOK_SETUP = "devtools-plugin:setup";
const HOOK_PLUGIN_SETTINGS_SET = "plugin:settings:set";
let supported;
let perf;
function isPerformanceSupported() {
  var _a2;
  if (supported !== void 0) {
    return supported;
  }
  if (typeof window !== "undefined" && window.performance) {
    supported = true;
    perf = window.performance;
  } else if (typeof global !== "undefined" && ((_a2 = global.perf_hooks) === null || _a2 === void 0 ? void 0 : _a2.performance)) {
    supported = true;
    perf = global.perf_hooks.performance;
  } else {
    supported = false;
  }
  return supported;
}
function now() {
  return isPerformanceSupported() ? perf.now() : Date.now();
}
class ApiProxy {
  constructor(plugin, hook) {
    this.target = null;
    this.targetQueue = [];
    this.onQueue = [];
    this.plugin = plugin;
    this.hook = hook;
    const defaultSettings = {};
    if (plugin.settings) {
      for (const id in plugin.settings) {
        const item = plugin.settings[id];
        defaultSettings[id] = item.defaultValue;
      }
    }
    const localSettingsSaveId = `__vue-devtools-plugin-settings__${plugin.id}`;
    let currentSettings = Object.assign({}, defaultSettings);
    try {
      const raw = localStorage.getItem(localSettingsSaveId);
      const data = JSON.parse(raw);
      Object.assign(currentSettings, data);
    } catch (e) {
    }
    this.fallbacks = {
      getSettings() {
        return currentSettings;
      },
      setSettings(value) {
        try {
          localStorage.setItem(localSettingsSaveId, JSON.stringify(value));
        } catch (e) {
        }
        currentSettings = value;
      },
      now() {
        return now();
      }
    };
    if (hook) {
      hook.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) => {
        if (pluginId === this.plugin.id) {
          this.fallbacks.setSettings(value);
        }
      });
    }
    this.proxiedOn = new Proxy({}, {
      get: (_target, prop) => {
        if (this.target) {
          return this.target.on[prop];
        } else {
          return (...args) => {
            this.onQueue.push({
              method: prop,
              args
            });
          };
        }
      }
    });
    this.proxiedTarget = new Proxy({}, {
      get: (_target, prop) => {
        if (this.target) {
          return this.target[prop];
        } else if (prop === "on") {
          return this.proxiedOn;
        } else if (Object.keys(this.fallbacks).includes(prop)) {
          return (...args) => {
            this.targetQueue.push({
              method: prop,
              args,
              resolve: () => {
              }
            });
            return this.fallbacks[prop](...args);
          };
        } else {
          return (...args) => {
            return new Promise((resolve2) => {
              this.targetQueue.push({
                method: prop,
                args,
                resolve: resolve2
              });
            });
          };
        }
      }
    });
  }
  async setRealTarget(target2) {
    this.target = target2;
    for (const item of this.onQueue) {
      this.target.on[item.method](...item.args);
    }
    for (const item of this.targetQueue) {
      item.resolve(await this.target[item.method](...item.args));
    }
  }
}
function setupDevtoolsPlugin(pluginDescriptor, setupFn) {
  const descriptor = pluginDescriptor;
  const target2 = getTarget();
  const hook = getDevtoolsGlobalHook();
  const enableProxy = isProxyAvailable && descriptor.enableEarlyProxy;
  if (hook && (target2.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {
    hook.emit(HOOK_SETUP, pluginDescriptor, setupFn);
  } else {
    const proxy = enableProxy ? new ApiProxy(descriptor, hook) : null;
    const list = target2.__VUE_DEVTOOLS_PLUGINS__ = target2.__VUE_DEVTOOLS_PLUGINS__ || [];
    list.push({
      pluginDescriptor: descriptor,
      setupFn,
      proxy
    });
    if (proxy)
      setupFn(proxy.proxiedTarget);
  }
}
/*!
  * pinia v2.0.27
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
let activePinia;
const setActivePinia = (pinia) => activePinia = pinia;
const piniaSymbol = Symbol();
function isPlainObject$2(o) {
  return o && typeof o === "object" && Object.prototype.toString.call(o) === "[object Object]" && typeof o.toJSON !== "function";
}
var MutationType;
(function(MutationType2) {
  MutationType2["direct"] = "direct";
  MutationType2["patchObject"] = "patch object";
  MutationType2["patchFunction"] = "patch function";
})(MutationType || (MutationType = {}));
const IS_CLIENT = typeof window !== "undefined";
const USE_DEVTOOLS = IS_CLIENT;
const _global = /* @__PURE__ */ (() => typeof window === "object" && window.window === window ? window : typeof self === "object" && self.self === self ? self : typeof global === "object" && global.global === global ? global : typeof globalThis === "object" ? globalThis : { HTMLElement: null })();
function bom(blob, { autoBom = false } = {}) {
  if (autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
    return new Blob([String.fromCharCode(65279), blob], { type: blob.type });
  }
  return blob;
}
function download(url, name, opts) {
  const xhr2 = new XMLHttpRequest();
  xhr2.open("GET", url);
  xhr2.responseType = "blob";
  xhr2.onload = function() {
    saveAs(xhr2.response, name, opts);
  };
  xhr2.onerror = function() {
    console.error("could not download file");
  };
  xhr2.send();
}
function corsEnabled(url) {
  const xhr2 = new XMLHttpRequest();
  xhr2.open("HEAD", url, false);
  try {
    xhr2.send();
  } catch (e) {
  }
  return xhr2.status >= 200 && xhr2.status <= 299;
}
function click(node) {
  try {
    node.dispatchEvent(new MouseEvent("click"));
  } catch (e) {
    const evt = document.createEvent("MouseEvents");
    evt.initMouseEvent("click", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);
    node.dispatchEvent(evt);
  }
}
const _navigator = typeof navigator === "object" ? navigator : { userAgent: "" };
const isMacOSWebView = /* @__PURE__ */ (() => /Macintosh/.test(_navigator.userAgent) && /AppleWebKit/.test(_navigator.userAgent) && !/Safari/.test(_navigator.userAgent))();
const saveAs = !IS_CLIENT ? () => {
} : typeof HTMLAnchorElement !== "undefined" && "download" in HTMLAnchorElement.prototype && !isMacOSWebView ? downloadSaveAs : "msSaveOrOpenBlob" in _navigator ? msSaveAs : fileSaverSaveAs;
function downloadSaveAs(blob, name = "download", opts) {
  const a = document.createElement("a");
  a.download = name;
  a.rel = "noopener";
  if (typeof blob === "string") {
    a.href = blob;
    if (a.origin !== location.origin) {
      if (corsEnabled(a.href)) {
        download(blob, name, opts);
      } else {
        a.target = "_blank";
        click(a);
      }
    } else {
      click(a);
    }
  } else {
    a.href = URL.createObjectURL(blob);
    setTimeout(function() {
      URL.revokeObjectURL(a.href);
    }, 4e4);
    setTimeout(function() {
      click(a);
    }, 0);
  }
}
function msSaveAs(blob, name = "download", opts) {
  if (typeof blob === "string") {
    if (corsEnabled(blob)) {
      download(blob, name, opts);
    } else {
      const a = document.createElement("a");
      a.href = blob;
      a.target = "_blank";
      setTimeout(function() {
        click(a);
      });
    }
  } else {
    navigator.msSaveOrOpenBlob(bom(blob, opts), name);
  }
}
function fileSaverSaveAs(blob, name, opts, popup) {
  popup = popup || open("", "_blank");
  if (popup) {
    popup.document.title = popup.document.body.innerText = "downloading...";
  }
  if (typeof blob === "string")
    return download(blob, name, opts);
  const force = blob.type === "application/octet-stream";
  const isSafari = /constructor/i.test(String(_global.HTMLElement)) || "safari" in _global;
  const isChromeIOS = /CriOS\/[\d]+/.test(navigator.userAgent);
  if ((isChromeIOS || force && isSafari || isMacOSWebView) && typeof FileReader !== "undefined") {
    const reader = new FileReader();
    reader.onloadend = function() {
      let url = reader.result;
      if (typeof url !== "string") {
        popup = null;
        throw new Error("Wrong reader.result type");
      }
      url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, "data:attachment/file;");
      if (popup) {
        popup.location.href = url;
      } else {
        location.assign(url);
      }
      popup = null;
    };
    reader.readAsDataURL(blob);
  } else {
    const url = URL.createObjectURL(blob);
    if (popup)
      popup.location.assign(url);
    else
      location.href = url;
    popup = null;
    setTimeout(function() {
      URL.revokeObjectURL(url);
    }, 4e4);
  }
}
function toastMessage(message, type) {
  const piniaMessage = "\u{1F34D} " + message;
  if (typeof __VUE_DEVTOOLS_TOAST__ === "function") {
    __VUE_DEVTOOLS_TOAST__(piniaMessage, type);
  } else if (type === "error") {
    console.error(piniaMessage);
  } else if (type === "warn") {
    console.warn(piniaMessage);
  } else {
    console.log(piniaMessage);
  }
}
function isPinia(o) {
  return "_a" in o && "install" in o;
}
function checkClipboardAccess() {
  if (!("clipboard" in navigator)) {
    toastMessage(`Your browser doesn't support the Clipboard API`, "error");
    return true;
  }
}
function checkNotFocusedError(error) {
  if (error instanceof Error && error.message.toLowerCase().includes("document is not focused")) {
    toastMessage('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.', "warn");
    return true;
  }
  return false;
}
async function actionGlobalCopyState(pinia) {
  if (checkClipboardAccess())
    return;
  try {
    await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));
    toastMessage("Global state copied to clipboard.");
  } catch (error) {
    if (checkNotFocusedError(error))
      return;
    toastMessage(`Failed to serialize the state. Check the console for more details.`, "error");
    console.error(error);
  }
}
async function actionGlobalPasteState(pinia) {
  if (checkClipboardAccess())
    return;
  try {
    pinia.state.value = JSON.parse(await navigator.clipboard.readText());
    toastMessage("Global state pasted from clipboard.");
  } catch (error) {
    if (checkNotFocusedError(error))
      return;
    toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, "error");
    console.error(error);
  }
}
async function actionGlobalSaveState(pinia) {
  try {
    saveAs(new Blob([JSON.stringify(pinia.state.value)], {
      type: "text/plain;charset=utf-8"
    }), "pinia-state.json");
  } catch (error) {
    toastMessage(`Failed to export the state as JSON. Check the console for more details.`, "error");
    console.error(error);
  }
}
let fileInput;
function getFileOpener() {
  if (!fileInput) {
    fileInput = document.createElement("input");
    fileInput.type = "file";
    fileInput.accept = ".json";
  }
  function openFile() {
    return new Promise((resolve2, reject) => {
      fileInput.onchange = async () => {
        const files = fileInput.files;
        if (!files)
          return resolve2(null);
        const file = files.item(0);
        if (!file)
          return resolve2(null);
        return resolve2({ text: await file.text(), file });
      };
      fileInput.oncancel = () => resolve2(null);
      fileInput.onerror = reject;
      fileInput.click();
    });
  }
  return openFile;
}
async function actionGlobalOpenStateFile(pinia) {
  try {
    const open2 = await getFileOpener();
    const result = await open2();
    if (!result)
      return;
    const { text, file } = result;
    pinia.state.value = JSON.parse(text);
    toastMessage(`Global state imported from "${file.name}".`);
  } catch (error) {
    toastMessage(`Failed to export the state as JSON. Check the console for more details.`, "error");
    console.error(error);
  }
}
function formatDisplay$1(display) {
  return {
    _custom: {
      display
    }
  };
}
const PINIA_ROOT_LABEL = "\u{1F34D} Pinia (root)";
const PINIA_ROOT_ID = "_root";
function formatStoreForInspectorTree(store2) {
  return isPinia(store2) ? {
    id: PINIA_ROOT_ID,
    label: PINIA_ROOT_LABEL
  } : {
    id: store2.$id,
    label: store2.$id
  };
}
function formatStoreForInspectorState(store2) {
  if (isPinia(store2)) {
    const storeNames = Array.from(store2._s.keys());
    const storeMap = store2._s;
    const state2 = {
      state: storeNames.map((storeId) => ({
        editable: true,
        key: storeId,
        value: store2.state.value[storeId]
      })),
      getters: storeNames.filter((id) => storeMap.get(id)._getters).map((id) => {
        const store3 = storeMap.get(id);
        return {
          editable: false,
          key: id,
          value: store3._getters.reduce((getters, key) => {
            getters[key] = store3[key];
            return getters;
          }, {})
        };
      })
    };
    return state2;
  }
  const state = {
    state: Object.keys(store2.$state).map((key) => ({
      editable: true,
      key,
      value: store2.$state[key]
    }))
  };
  if (store2._getters && store2._getters.length) {
    state.getters = store2._getters.map((getterName) => ({
      editable: false,
      key: getterName,
      value: store2[getterName]
    }));
  }
  if (store2._customProperties.size) {
    state.customProperties = Array.from(store2._customProperties).map((key) => ({
      editable: true,
      key,
      value: store2[key]
    }));
  }
  return state;
}
function formatEventData(events) {
  if (!events)
    return {};
  if (Array.isArray(events)) {
    return events.reduce((data, event) => {
      data.keys.push(event.key);
      data.operations.push(event.type);
      data.oldValue[event.key] = event.oldValue;
      data.newValue[event.key] = event.newValue;
      return data;
    }, {
      oldValue: {},
      keys: [],
      operations: [],
      newValue: {}
    });
  } else {
    return {
      operation: formatDisplay$1(events.type),
      key: formatDisplay$1(events.key),
      oldValue: events.oldValue,
      newValue: events.newValue
    };
  }
}
function formatMutationType(type) {
  switch (type) {
    case MutationType.direct:
      return "mutation";
    case MutationType.patchFunction:
      return "$patch";
    case MutationType.patchObject:
      return "$patch";
    default:
      return "unknown";
  }
}
let isTimelineActive = true;
const componentStateTypes = [];
const MUTATIONS_LAYER_ID = "pinia:mutations";
const INSPECTOR_ID = "pinia";
const getStoreType = (id) => "\u{1F34D} " + id;
function registerPiniaDevtools(app2, pinia) {
  setupDevtoolsPlugin({
    id: "dev.esm.pinia",
    label: "Pinia \u{1F34D}",
    logo: "https://pinia.vuejs.org/logo.svg",
    packageName: "pinia",
    homepage: "https://pinia.vuejs.org",
    componentStateTypes,
    app: app2
  }, (api) => {
    if (typeof api.now !== "function") {
      toastMessage("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.");
    }
    api.addTimelineLayer({
      id: MUTATIONS_LAYER_ID,
      label: `Pinia \u{1F34D}`,
      color: 15064968
    });
    api.addInspector({
      id: INSPECTOR_ID,
      label: "Pinia \u{1F34D}",
      icon: "storage",
      treeFilterPlaceholder: "Search stores",
      actions: [
        {
          icon: "content_copy",
          action: () => {
            actionGlobalCopyState(pinia);
          },
          tooltip: "Serialize and copy the state"
        },
        {
          icon: "content_paste",
          action: async () => {
            await actionGlobalPasteState(pinia);
            api.sendInspectorTree(INSPECTOR_ID);
            api.sendInspectorState(INSPECTOR_ID);
          },
          tooltip: "Replace the state with the content of your clipboard"
        },
        {
          icon: "save",
          action: () => {
            actionGlobalSaveState(pinia);
          },
          tooltip: "Save the state as a JSON file"
        },
        {
          icon: "folder_open",
          action: async () => {
            await actionGlobalOpenStateFile(pinia);
            api.sendInspectorTree(INSPECTOR_ID);
            api.sendInspectorState(INSPECTOR_ID);
          },
          tooltip: "Import the state from a JSON file"
        }
      ],
      nodeActions: [
        {
          icon: "restore",
          tooltip: "Reset the state (option store only)",
          action: (nodeId) => {
            const store2 = pinia._s.get(nodeId);
            if (!store2) {
              toastMessage(`Cannot reset "${nodeId}" store because it wasn't found.`, "warn");
            } else if (!store2._isOptionsAPI) {
              toastMessage(`Cannot reset "${nodeId}" store because it's a setup store.`, "warn");
            } else {
              store2.$reset();
              toastMessage(`Store "${nodeId}" reset.`);
            }
          }
        }
      ]
    });
    api.on.inspectComponent((payload, ctx) => {
      const proxy = payload.componentInstance && payload.componentInstance.proxy;
      if (proxy && proxy._pStores) {
        const piniaStores = payload.componentInstance.proxy._pStores;
        Object.values(piniaStores).forEach((store2) => {
          payload.instanceData.state.push({
            type: getStoreType(store2.$id),
            key: "state",
            editable: true,
            value: store2._isOptionsAPI ? {
              _custom: {
                value: toRaw(store2.$state),
                actions: [
                  {
                    icon: "restore",
                    tooltip: "Reset the state of this store",
                    action: () => store2.$reset()
                  }
                ]
              }
            } : Object.keys(store2.$state).reduce((state, key) => {
              state[key] = store2.$state[key];
              return state;
            }, {})
          });
          if (store2._getters && store2._getters.length) {
            payload.instanceData.state.push({
              type: getStoreType(store2.$id),
              key: "getters",
              editable: false,
              value: store2._getters.reduce((getters, key) => {
                try {
                  getters[key] = store2[key];
                } catch (error) {
                  getters[key] = error;
                }
                return getters;
              }, {})
            });
          }
        });
      }
    });
    api.on.getInspectorTree((payload) => {
      if (payload.app === app2 && payload.inspectorId === INSPECTOR_ID) {
        let stores = [pinia];
        stores = stores.concat(Array.from(pinia._s.values()));
        payload.rootNodes = (payload.filter ? stores.filter((store2) => "$id" in store2 ? store2.$id.toLowerCase().includes(payload.filter.toLowerCase()) : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase())) : stores).map(formatStoreForInspectorTree);
      }
    });
    api.on.getInspectorState((payload) => {
      if (payload.app === app2 && payload.inspectorId === INSPECTOR_ID) {
        const inspectedStore = payload.nodeId === PINIA_ROOT_ID ? pinia : pinia._s.get(payload.nodeId);
        if (!inspectedStore) {
          return;
        }
        if (inspectedStore) {
          payload.state = formatStoreForInspectorState(inspectedStore);
        }
      }
    });
    api.on.editInspectorState((payload, ctx) => {
      if (payload.app === app2 && payload.inspectorId === INSPECTOR_ID) {
        const inspectedStore = payload.nodeId === PINIA_ROOT_ID ? pinia : pinia._s.get(payload.nodeId);
        if (!inspectedStore) {
          return toastMessage(`store "${payload.nodeId}" not found`, "error");
        }
        const { path } = payload;
        if (!isPinia(inspectedStore)) {
          if (path.length !== 1 || !inspectedStore._customProperties.has(path[0]) || path[0] in inspectedStore.$state) {
            path.unshift("$state");
          }
        } else {
          path.unshift("state");
        }
        isTimelineActive = false;
        payload.set(inspectedStore, path, payload.state.value);
        isTimelineActive = true;
      }
    });
    api.on.editComponentState((payload) => {
      if (payload.type.startsWith("\u{1F34D}")) {
        const storeId = payload.type.replace(/^🍍\s*/, "");
        const store2 = pinia._s.get(storeId);
        if (!store2) {
          return toastMessage(`store "${storeId}" not found`, "error");
        }
        const { path } = payload;
        if (path[0] !== "state") {
          return toastMessage(`Invalid path for store "${storeId}":
${path}
Only state can be modified.`);
        }
        path[0] = "$state";
        isTimelineActive = false;
        payload.set(store2, path, payload.state.value);
        isTimelineActive = true;
      }
    });
  });
}
function addStoreToDevtools(app2, store2) {
  if (!componentStateTypes.includes(getStoreType(store2.$id))) {
    componentStateTypes.push(getStoreType(store2.$id));
  }
  setupDevtoolsPlugin({
    id: "dev.esm.pinia",
    label: "Pinia \u{1F34D}",
    logo: "https://pinia.vuejs.org/logo.svg",
    packageName: "pinia",
    homepage: "https://pinia.vuejs.org",
    componentStateTypes,
    app: app2,
    settings: {
      logStoreChanges: {
        label: "Notify about new/deleted stores",
        type: "boolean",
        defaultValue: true
      }
    }
  }, (api) => {
    const now2 = typeof api.now === "function" ? api.now.bind(api) : Date.now;
    store2.$onAction(({ after, onError, name, args }) => {
      const groupId = runningActionId++;
      api.addTimelineEvent({
        layerId: MUTATIONS_LAYER_ID,
        event: {
          time: now2(),
          title: "\u{1F6EB} " + name,
          subtitle: "start",
          data: {
            store: formatDisplay$1(store2.$id),
            action: formatDisplay$1(name),
            args
          },
          groupId
        }
      });
      after((result) => {
        activeAction = void 0;
        api.addTimelineEvent({
          layerId: MUTATIONS_LAYER_ID,
          event: {
            time: now2(),
            title: "\u{1F6EC} " + name,
            subtitle: "end",
            data: {
              store: formatDisplay$1(store2.$id),
              action: formatDisplay$1(name),
              args,
              result
            },
            groupId
          }
        });
      });
      onError((error) => {
        activeAction = void 0;
        api.addTimelineEvent({
          layerId: MUTATIONS_LAYER_ID,
          event: {
            time: now2(),
            logType: "error",
            title: "\u{1F4A5} " + name,
            subtitle: "end",
            data: {
              store: formatDisplay$1(store2.$id),
              action: formatDisplay$1(name),
              args,
              error
            },
            groupId
          }
        });
      });
    }, true);
    store2._customProperties.forEach((name) => {
      watch(() => unref(store2[name]), (newValue, oldValue) => {
        api.notifyComponentUpdate();
        api.sendInspectorState(INSPECTOR_ID);
        if (isTimelineActive) {
          api.addTimelineEvent({
            layerId: MUTATIONS_LAYER_ID,
            event: {
              time: now2(),
              title: "Change",
              subtitle: name,
              data: {
                newValue,
                oldValue
              },
              groupId: activeAction
            }
          });
        }
      }, { deep: true });
    });
    store2.$subscribe(({ events, type }, state) => {
      api.notifyComponentUpdate();
      api.sendInspectorState(INSPECTOR_ID);
      if (!isTimelineActive)
        return;
      const eventData = {
        time: now2(),
        title: formatMutationType(type),
        data: {
          store: formatDisplay$1(store2.$id),
          ...formatEventData(events)
        },
        groupId: activeAction
      };
      activeAction = void 0;
      if (type === MutationType.patchFunction) {
        eventData.subtitle = "\u2935\uFE0F";
      } else if (type === MutationType.patchObject) {
        eventData.subtitle = "\u{1F9E9}";
      } else if (events && !Array.isArray(events)) {
        eventData.subtitle = events.type;
      }
      if (events) {
        eventData.data["rawEvent(s)"] = {
          _custom: {
            display: "DebuggerEvent",
            type: "object",
            tooltip: "raw DebuggerEvent[]",
            value: events
          }
        };
      }
      api.addTimelineEvent({
        layerId: MUTATIONS_LAYER_ID,
        event: eventData
      });
    }, { detached: true, flush: "sync" });
    const hotUpdate = store2._hotUpdate;
    store2._hotUpdate = markRaw((newStore) => {
      hotUpdate(newStore);
      api.addTimelineEvent({
        layerId: MUTATIONS_LAYER_ID,
        event: {
          time: now2(),
          title: "\u{1F525} " + store2.$id,
          subtitle: "HMR update",
          data: {
            store: formatDisplay$1(store2.$id),
            info: formatDisplay$1(`HMR update`)
          }
        }
      });
      api.notifyComponentUpdate();
      api.sendInspectorTree(INSPECTOR_ID);
      api.sendInspectorState(INSPECTOR_ID);
    });
    const { $dispose } = store2;
    store2.$dispose = () => {
      $dispose();
      api.notifyComponentUpdate();
      api.sendInspectorTree(INSPECTOR_ID);
      api.sendInspectorState(INSPECTOR_ID);
      api.getSettings().logStoreChanges && toastMessage(`Disposed "${store2.$id}" store \u{1F5D1}`);
    };
    api.notifyComponentUpdate();
    api.sendInspectorTree(INSPECTOR_ID);
    api.sendInspectorState(INSPECTOR_ID);
    api.getSettings().logStoreChanges && toastMessage(`"${store2.$id}" store installed \u{1F195}`);
  });
}
let runningActionId = 0;
let activeAction;
function patchActionForGrouping(store2, actionNames) {
  const actions = actionNames.reduce((storeActions, actionName) => {
    storeActions[actionName] = toRaw(store2)[actionName];
    return storeActions;
  }, {});
  for (const actionName in actions) {
    store2[actionName] = function() {
      const _actionId = runningActionId;
      const trackedStore = new Proxy(store2, {
        get(...args) {
          activeAction = _actionId;
          return Reflect.get(...args);
        },
        set(...args) {
          activeAction = _actionId;
          return Reflect.set(...args);
        }
      });
      return actions[actionName].apply(trackedStore, arguments);
    };
  }
}
function devtoolsPlugin({ app: app2, store: store2, options }) {
  if (store2.$id.startsWith("__hot:")) {
    return;
  }
  if (options.state) {
    store2._isOptionsAPI = true;
  }
  if (typeof options.state === "function") {
    patchActionForGrouping(
      store2,
      Object.keys(options.actions)
    );
    const originalHotUpdate = store2._hotUpdate;
    toRaw(store2)._hotUpdate = function(newStore) {
      originalHotUpdate.apply(this, arguments);
      patchActionForGrouping(store2, Object.keys(newStore._hmrPayload.actions));
    };
  }
  addStoreToDevtools(
    app2,
    store2
  );
}
function createPinia() {
  const scope = effectScope(true);
  const state = scope.run(() => ref({}));
  let _p = [];
  let toBeInstalled = [];
  const pinia = markRaw({
    install(app2) {
      setActivePinia(pinia);
      {
        pinia._a = app2;
        app2.provide(piniaSymbol, pinia);
        app2.config.globalProperties.$pinia = pinia;
        if (USE_DEVTOOLS) {
          registerPiniaDevtools(app2, pinia);
        }
        toBeInstalled.forEach((plugin) => _p.push(plugin));
        toBeInstalled = [];
      }
    },
    use(plugin) {
      if (!this._a && !isVue2) {
        toBeInstalled.push(plugin);
      } else {
        _p.push(plugin);
      }
      return this;
    },
    _p,
    _a: null,
    _e: scope,
    _s: /* @__PURE__ */ new Map(),
    state
  });
  if (USE_DEVTOOLS && typeof Proxy !== "undefined") {
    pinia.use(devtoolsPlugin);
  }
  return pinia;
}
const noop$1 = () => {
};
function addSubscription(subscriptions, callback, detached, onCleanup = noop$1) {
  subscriptions.push(callback);
  const removeSubscription = () => {
    const idx = subscriptions.indexOf(callback);
    if (idx > -1) {
      subscriptions.splice(idx, 1);
      onCleanup();
    }
  };
  if (!detached && getCurrentScope()) {
    onScopeDispose(removeSubscription);
  }
  return removeSubscription;
}
function triggerSubscriptions(subscriptions, ...args) {
  subscriptions.slice().forEach((callback) => {
    callback(...args);
  });
}
function mergeReactiveObjects(target2, patchToApply) {
  if (target2 instanceof Map && patchToApply instanceof Map) {
    patchToApply.forEach((value, key) => target2.set(key, value));
  }
  if (target2 instanceof Set && patchToApply instanceof Set) {
    patchToApply.forEach(target2.add, target2);
  }
  for (const key in patchToApply) {
    if (!patchToApply.hasOwnProperty(key))
      continue;
    const subPatch = patchToApply[key];
    const targetValue = target2[key];
    if (isPlainObject$2(targetValue) && isPlainObject$2(subPatch) && target2.hasOwnProperty(key) && !isRef(subPatch) && !isReactive(subPatch)) {
      target2[key] = mergeReactiveObjects(targetValue, subPatch);
    } else {
      target2[key] = subPatch;
    }
  }
  return target2;
}
const skipHydrateSymbol = Symbol();
function shouldHydrate(obj) {
  return !isPlainObject$2(obj) || !obj.hasOwnProperty(skipHydrateSymbol);
}
const { assign: assign$2 } = Object;
function isComputed(o) {
  return !!(isRef(o) && o.effect);
}
function createOptionsStore(id, options, pinia, hot) {
  const { state, actions, getters } = options;
  const initialState = pinia.state.value[id];
  let store2;
  function setup() {
    if (!initialState && true) {
      {
        pinia.state.value[id] = state ? state() : {};
      }
    }
    const localState = toRefs(pinia.state.value[id]);
    return assign$2(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {
      computedGetters[name] = markRaw(computed(() => {
        setActivePinia(pinia);
        const store3 = pinia._s.get(id);
        return getters[name].call(store3, store3);
      }));
      return computedGetters;
    }, {}));
  }
  store2 = createSetupStore(id, setup, options, pinia, hot, true);
  store2.$reset = function $reset() {
    const newState = state ? state() : {};
    this.$patch(($state) => {
      assign$2($state, newState);
    });
  };
  return store2;
}
function createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {
  let scope;
  const optionsForPlugin = assign$2({ actions: {} }, options);
  const $subscribeOptions = {
    deep: true
  };
  let isListening;
  let isSyncListening;
  let subscriptions = markRaw([]);
  let actionSubscriptions = markRaw([]);
  let debuggerEvents;
  const initialState = pinia.state.value[$id];
  if (!isOptionsStore && !initialState && true) {
    {
      pinia.state.value[$id] = {};
    }
  }
  const hotState = ref({});
  let activeListener;
  function $patch(partialStateOrMutator) {
    let subscriptionMutation;
    isListening = isSyncListening = false;
    if (typeof partialStateOrMutator === "function") {
      partialStateOrMutator(pinia.state.value[$id]);
      subscriptionMutation = {
        type: MutationType.patchFunction,
        storeId: $id,
        events: debuggerEvents
      };
    } else {
      mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);
      subscriptionMutation = {
        type: MutationType.patchObject,
        payload: partialStateOrMutator,
        storeId: $id,
        events: debuggerEvents
      };
    }
    const myListenerId = activeListener = Symbol();
    nextTick().then(() => {
      if (activeListener === myListenerId) {
        isListening = true;
      }
    });
    isSyncListening = true;
    triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);
  }
  const $reset = noop$1;
  function $dispose() {
    scope.stop();
    subscriptions = [];
    actionSubscriptions = [];
    pinia._s.delete($id);
  }
  function wrapAction(name, action) {
    return function() {
      setActivePinia(pinia);
      const args = Array.from(arguments);
      const afterCallbackList = [];
      const onErrorCallbackList = [];
      function after(callback) {
        afterCallbackList.push(callback);
      }
      function onError(callback) {
        onErrorCallbackList.push(callback);
      }
      triggerSubscriptions(actionSubscriptions, {
        args,
        name,
        store: store2,
        after,
        onError
      });
      let ret;
      try {
        ret = action.apply(this && this.$id === $id ? this : store2, args);
      } catch (error) {
        triggerSubscriptions(onErrorCallbackList, error);
        throw error;
      }
      if (ret instanceof Promise) {
        return ret.then((value) => {
          triggerSubscriptions(afterCallbackList, value);
          return value;
        }).catch((error) => {
          triggerSubscriptions(onErrorCallbackList, error);
          return Promise.reject(error);
        });
      }
      triggerSubscriptions(afterCallbackList, ret);
      return ret;
    };
  }
  const _hmrPayload = /* @__PURE__ */ markRaw({
    actions: {},
    getters: {},
    state: [],
    hotState
  });
  const partialStore = {
    _p: pinia,
    $id,
    $onAction: addSubscription.bind(null, actionSubscriptions),
    $patch,
    $reset,
    $subscribe(callback, options2 = {}) {
      const removeSubscription = addSubscription(subscriptions, callback, options2.detached, () => stopWatcher());
      const stopWatcher = scope.run(() => watch(() => pinia.state.value[$id], (state) => {
        if (options2.flush === "sync" ? isSyncListening : isListening) {
          callback({
            storeId: $id,
            type: MutationType.direct,
            events: debuggerEvents
          }, state);
        }
      }, assign$2({}, $subscribeOptions, options2)));
      return removeSubscription;
    },
    $dispose
  };
  const store2 = reactive(USE_DEVTOOLS ? assign$2(
    {
      _hmrPayload,
      _customProperties: markRaw(/* @__PURE__ */ new Set())
    },
    partialStore
  ) : partialStore);
  pinia._s.set($id, store2);
  const setupStore = pinia._e.run(() => {
    scope = effectScope();
    return scope.run(() => setup());
  });
  for (const key in setupStore) {
    const prop = setupStore[key];
    if (isRef(prop) && !isComputed(prop) || isReactive(prop)) {
      if (!isOptionsStore) {
        if (initialState && shouldHydrate(prop)) {
          if (isRef(prop)) {
            prop.value = initialState[key];
          } else {
            mergeReactiveObjects(prop, initialState[key]);
          }
        }
        {
          pinia.state.value[$id][key] = prop;
        }
      }
    } else if (typeof prop === "function") {
      const actionValue = wrapAction(key, prop);
      {
        setupStore[key] = actionValue;
      }
      optionsForPlugin.actions[key] = prop;
    } else
      ;
  }
  {
    assign$2(store2, setupStore);
    assign$2(toRaw(store2), setupStore);
  }
  Object.defineProperty(store2, "$state", {
    get: () => pinia.state.value[$id],
    set: (state) => {
      $patch(($state) => {
        assign$2($state, state);
      });
    }
  });
  if (USE_DEVTOOLS) {
    const nonEnumerable = {
      writable: true,
      configurable: true,
      enumerable: false
    };
    ["_p", "_hmrPayload", "_getters", "_customProperties"].forEach((p2) => {
      Object.defineProperty(store2, p2, {
        value: store2[p2],
        ...nonEnumerable
      });
    });
  }
  pinia._p.forEach((extender) => {
    if (USE_DEVTOOLS) {
      const extensions = scope.run(() => extender({
        store: store2,
        app: pinia._a,
        pinia,
        options: optionsForPlugin
      }));
      Object.keys(extensions || {}).forEach((key) => store2._customProperties.add(key));
      assign$2(store2, extensions);
    } else {
      assign$2(store2, scope.run(() => extender({
        store: store2,
        app: pinia._a,
        pinia,
        options: optionsForPlugin
      })));
    }
  });
  if (initialState && isOptionsStore && options.hydrate) {
    options.hydrate(store2.$state, initialState);
  }
  isListening = true;
  isSyncListening = true;
  return store2;
}
function defineStore(idOrOptions, setup, setupOptions) {
  let id;
  let options;
  const isSetupStore = typeof setup === "function";
  if (typeof idOrOptions === "string") {
    id = idOrOptions;
    options = isSetupStore ? setupOptions : setup;
  } else {
    options = idOrOptions;
    id = idOrOptions.id;
  }
  function useStore(pinia, hot) {
    const currentInstance2 = getCurrentInstance();
    pinia = pinia || currentInstance2 && inject(piniaSymbol);
    if (pinia)
      setActivePinia(pinia);
    pinia = activePinia;
    if (!pinia._s.has(id)) {
      if (isSetupStore) {
        createSetupStore(id, setup, options, pinia);
      } else {
        createOptionsStore(id, options, pinia);
      }
    }
    const store2 = pinia._s.get(id);
    return store2;
  }
  useStore.$id = id;
  return useStore;
}
function isObject$1(v) {
  return typeof v === "object" && v !== null;
}
function normalizeOptions(options, factoryOptions) {
  options = isObject$1(options) ? options : /* @__PURE__ */ Object.create(null);
  return new Proxy(options, {
    get(target2, key, receiver) {
      if (key === "key")
        return Reflect.get(target2, key, receiver);
      return Reflect.get(target2, key, receiver) || Reflect.get(factoryOptions, key, receiver);
    }
  });
}
function get$1(state, path) {
  return path.reduce((obj, p2) => {
    return obj == null ? void 0 : obj[p2];
  }, state);
}
function set$1(state, path, val) {
  return path.slice(0, -1).reduce((obj, p2) => {
    if (/^(__proto__)$/.test(p2))
      return {};
    else
      return obj[p2] = obj[p2] || {};
  }, state)[path[path.length - 1]] = val, state;
}
function pick(baseState, paths) {
  return paths.reduce((substate, path) => {
    const pathArray = path.split(".");
    return set$1(substate, pathArray, get$1(baseState, pathArray));
  }, {});
}
function hydrateStore(store2, { storage: storage2, serializer, key, debug }) {
  try {
    const fromStorage = storage2 == null ? void 0 : storage2.getItem(key);
    if (fromStorage)
      store2.$patch(serializer == null ? void 0 : serializer.deserialize(fromStorage));
  } catch (error) {
    if (debug)
      console.error(error);
  }
}
function persistState(state, { storage: storage2, serializer, key, paths, debug }) {
  try {
    const toStore = Array.isArray(paths) ? pick(state, paths) : state;
    storage2.setItem(key, serializer.serialize(toStore));
  } catch (error) {
    if (debug)
      console.error(error);
  }
}
function createPersistedState(factoryOptions = {}) {
  return (context) => {
    const {
      options: { persist },
      store: store2
    } = context;
    if (!persist)
      return;
    const persistences = (Array.isArray(persist) ? persist.map((p2) => normalizeOptions(p2, factoryOptions)) : [normalizeOptions(persist, factoryOptions)]).map(
      ({
        storage: storage2 = localStorage,
        beforeRestore = null,
        afterRestore = null,
        serializer = {
          serialize: JSON.stringify,
          deserialize: JSON.parse
        },
        key = store2.$id,
        paths = null,
        debug = false
      }) => {
        var _a2;
        return {
          storage: storage2,
          beforeRestore,
          afterRestore,
          serializer,
          key: ((_a2 = factoryOptions.key) != null ? _a2 : (k) => k)(key),
          paths,
          debug
        };
      }
    );
    store2.$persist = () => {
      persistences.forEach((persistence) => {
        persistState(store2.$state, persistence);
      });
    };
    store2.$hydrate = ({ runHooks = true } = {}) => {
      persistences.forEach((persistence) => {
        const { beforeRestore, afterRestore } = persistence;
        if (runHooks)
          beforeRestore == null ? void 0 : beforeRestore(context);
        hydrateStore(store2, persistence);
        if (runHooks)
          afterRestore == null ? void 0 : afterRestore(context);
      });
    };
    persistences.forEach((persistence) => {
      const { beforeRestore, afterRestore } = persistence;
      beforeRestore == null ? void 0 : beforeRestore(context);
      hydrateStore(store2, persistence);
      afterRestore == null ? void 0 : afterRestore(context);
      store2.$subscribe(
        (_mutation, state) => {
          persistState(state, persistence);
        },
        {
          detached: true
        }
      );
    });
  };
}
var src_default = createPersistedState();
function encode$2(string) {
  return encodeURIComponent(string);
}
function decode$3(string) {
  return decodeURIComponent(string);
}
function stringifyCookieValue(value) {
  return encode$2(value === Object(value) ? JSON.stringify(value) : "" + value);
}
function read(string) {
  if (string === "") {
    return string;
  }
  if (string.indexOf('"') === 0) {
    string = string.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\");
  }
  string = decode$3(string.replace(/\+/g, " "));
  try {
    const parsed = JSON.parse(string);
    if (parsed === Object(parsed) || Array.isArray(parsed) === true) {
      string = parsed;
    }
  } catch (e) {
  }
  return string;
}
function getString(msOffset) {
  const time = new Date();
  time.setMilliseconds(time.getMilliseconds() + msOffset);
  return time.toUTCString();
}
function parseExpireString(str) {
  let timestamp = 0;
  const days = str.match(/(\d+)d/);
  const hours = str.match(/(\d+)h/);
  const minutes = str.match(/(\d+)m/);
  const seconds = str.match(/(\d+)s/);
  if (days) {
    timestamp += days[1] * 864e5;
  }
  if (hours) {
    timestamp += hours[1] * 36e5;
  }
  if (minutes) {
    timestamp += minutes[1] * 6e4;
  }
  if (seconds) {
    timestamp += seconds[1] * 1e3;
  }
  return timestamp === 0 ? str : getString(timestamp);
}
function set(key, val, opts = {}, ssr) {
  let expire, expireValue;
  if (opts.expires !== void 0) {
    if (Object.prototype.toString.call(opts.expires) === "[object Date]") {
      expire = opts.expires.toUTCString();
    } else if (typeof opts.expires === "string") {
      expire = parseExpireString(opts.expires);
    } else {
      expireValue = parseFloat(opts.expires);
      expire = isNaN(expireValue) === false ? getString(expireValue * 864e5) : opts.expires;
    }
  }
  const keyValue = `${encode$2(key)}=${stringifyCookieValue(val)}`;
  const cookie = [
    keyValue,
    expire !== void 0 ? "; Expires=" + expire : "",
    opts.path ? "; Path=" + opts.path : "",
    opts.domain ? "; Domain=" + opts.domain : "",
    opts.sameSite ? "; SameSite=" + opts.sameSite : "",
    opts.httpOnly ? "; HttpOnly" : "",
    opts.secure ? "; Secure" : "",
    opts.other ? "; " + opts.other : ""
  ].join("");
  if (ssr) {
    if (ssr.req.qCookies) {
      ssr.req.qCookies.push(cookie);
    } else {
      ssr.req.qCookies = [cookie];
    }
    ssr.res.setHeader("Set-Cookie", ssr.req.qCookies);
    let all = ssr.req.headers.cookie || "";
    if (expire !== void 0 && expireValue < 0) {
      const val2 = get(key, ssr);
      if (val2 !== void 0) {
        all = all.replace(`${key}=${val2}; `, "").replace(`; ${key}=${val2}`, "").replace(`${key}=${val2}`, "");
      }
    } else {
      all = all ? `${keyValue}; ${all}` : cookie;
    }
    ssr.req.headers.cookie = all;
  } else {
    document.cookie = cookie;
  }
}
function get(key, ssr) {
  const cookieSource = ssr ? ssr.req.headers : document, cookies = cookieSource.cookie ? cookieSource.cookie.split("; ") : [], l = cookies.length;
  let result = key ? null : {}, i = 0, parts, name, cookie;
  for (; i < l; i++) {
    parts = cookies[i].split("=");
    name = decode$3(parts.shift());
    cookie = parts.join("=");
    if (!key) {
      result[name] = cookie;
    } else if (key === name) {
      result = read(cookie);
      break;
    }
  }
  return result;
}
function remove(key, options, ssr) {
  set(
    key,
    "",
    { expires: -1, ...options },
    ssr
  );
}
function has(key, ssr) {
  return get(key, ssr) !== null;
}
function getObject(ssr) {
  return {
    get: (key) => get(key, ssr),
    set: (key, val, opts) => set(key, val, opts, ssr),
    has: (key) => has(key, ssr),
    remove: (key, options) => remove(key, options, ssr),
    getAll: () => get(null, ssr)
  };
}
const Plugin$3 = {
  install({ $q, ssrContext }) {
    $q.cookies = this;
  }
};
{
  Object.assign(Plugin$3, getObject());
}
const cookieStorage = {
  getItem(key) {
    return;
  },
  setItem(key, val) {
    return;
  },
  removeItem(key) {
    return;
  }
};
var createStore = store(({ ssrContext }) => {
  const cookies = Plugin$3;
  const pinia = createPinia();
  pinia.use(({ options }) => {
    if (options.persist === void 0)
      return;
    if (!options.persist.storage || typeof options.persist.storage === "boolean")
      return;
    if (options.persist.storage === cookieStorage) {
      options.persist.storage = {
        getItem(key) {
          return JSON.stringify(cookies.get(key));
        },
        setItem(key, val) {
          const obj = val;
          cookies.set(key, obj, { path: "/", sameSite: "Lax", secure: false });
        },
        removeItem(key) {
          cookies.remove(key, { path: "/", sameSite: "Lax", secure: false });
        }
      };
    }
  });
  pinia.use(src_default);
  return pinia;
});
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const isBrowser = typeof window !== "undefined";
function isESModule(obj) {
  return obj.__esModule || obj[Symbol.toStringTag] === "Module";
}
const assign$1 = Object.assign;
function applyToParams(fn, params) {
  const newParams = {};
  for (const key in params) {
    const value = params[key];
    newParams[key] = isArray$1(value) ? value.map(fn) : fn(value);
  }
  return newParams;
}
const noop = () => {
};
const isArray$1 = Array.isArray;
const TRAILING_SLASH_RE = /\/$/;
const removeTrailingSlash = (path) => path.replace(TRAILING_SLASH_RE, "");
function parseURL(parseQuery2, location2, currentLocation = "/") {
  let path, query = {}, searchString = "", hash = "";
  const hashPos = location2.indexOf("#");
  let searchPos = location2.indexOf("?");
  if (hashPos < searchPos && hashPos >= 0) {
    searchPos = -1;
  }
  if (searchPos > -1) {
    path = location2.slice(0, searchPos);
    searchString = location2.slice(searchPos + 1, hashPos > -1 ? hashPos : location2.length);
    query = parseQuery2(searchString);
  }
  if (hashPos > -1) {
    path = path || location2.slice(0, hashPos);
    hash = location2.slice(hashPos, location2.length);
  }
  path = resolveRelativePath(path != null ? path : location2, currentLocation);
  return {
    fullPath: path + (searchString && "?") + searchString + hash,
    path,
    query,
    hash
  };
}
function stringifyURL(stringifyQuery2, location2) {
  const query = location2.query ? stringifyQuery2(location2.query) : "";
  return location2.path + (query && "?") + query + (location2.hash || "");
}
function stripBase(pathname, base2) {
  if (!base2 || !pathname.toLowerCase().startsWith(base2.toLowerCase()))
    return pathname;
  return pathname.slice(base2.length) || "/";
}
function isSameRouteLocation(stringifyQuery2, a, b) {
  const aLastIndex = a.matched.length - 1;
  const bLastIndex = b.matched.length - 1;
  return aLastIndex > -1 && aLastIndex === bLastIndex && isSameRouteRecord$1(a.matched[aLastIndex], b.matched[bLastIndex]) && isSameRouteLocationParams$1(a.params, b.params) && stringifyQuery2(a.query) === stringifyQuery2(b.query) && a.hash === b.hash;
}
function isSameRouteRecord$1(a, b) {
  return (a.aliasOf || a) === (b.aliasOf || b);
}
function isSameRouteLocationParams$1(a, b) {
  if (Object.keys(a).length !== Object.keys(b).length)
    return false;
  for (const key in a) {
    if (!isSameRouteLocationParamsValue$1(a[key], b[key]))
      return false;
  }
  return true;
}
function isSameRouteLocationParamsValue$1(a, b) {
  return isArray$1(a) ? isEquivalentArray$1(a, b) : isArray$1(b) ? isEquivalentArray$1(b, a) : a === b;
}
function isEquivalentArray$1(a, b) {
  return isArray$1(b) ? a.length === b.length && a.every((value, i) => value === b[i]) : a.length === 1 && a[0] === b;
}
function resolveRelativePath(to, from) {
  if (to.startsWith("/"))
    return to;
  if (!to)
    return from;
  const fromSegments = from.split("/");
  const toSegments = to.split("/");
  let position2 = fromSegments.length - 1;
  let toPosition;
  let segment;
  for (toPosition = 0; toPosition < toSegments.length; toPosition++) {
    segment = toSegments[toPosition];
    if (segment === ".")
      continue;
    if (segment === "..") {
      if (position2 > 1)
        position2--;
    } else
      break;
  }
  return fromSegments.slice(0, position2).join("/") + "/" + toSegments.slice(toPosition - (toPosition === toSegments.length ? 1 : 0)).join("/");
}
var NavigationType;
(function(NavigationType2) {
  NavigationType2["pop"] = "pop";
  NavigationType2["push"] = "push";
})(NavigationType || (NavigationType = {}));
var NavigationDirection;
(function(NavigationDirection2) {
  NavigationDirection2["back"] = "back";
  NavigationDirection2["forward"] = "forward";
  NavigationDirection2["unknown"] = "";
})(NavigationDirection || (NavigationDirection = {}));
function normalizeBase(base2) {
  if (!base2) {
    if (isBrowser) {
      const baseEl = document.querySelector("base");
      base2 = baseEl && baseEl.getAttribute("href") || "/";
      base2 = base2.replace(/^\w+:\/\/[^\/]+/, "");
    } else {
      base2 = "/";
    }
  }
  if (base2[0] !== "/" && base2[0] !== "#")
    base2 = "/" + base2;
  return removeTrailingSlash(base2);
}
const BEFORE_HASH_RE = /^[^#]+#/;
function createHref(base2, location2) {
  return base2.replace(BEFORE_HASH_RE, "#") + location2;
}
function getElementPosition(el, offset) {
  const docRect = document.documentElement.getBoundingClientRect();
  const elRect = el.getBoundingClientRect();
  return {
    behavior: offset.behavior,
    left: elRect.left - docRect.left - (offset.left || 0),
    top: elRect.top - docRect.top - (offset.top || 0)
  };
}
const computeScrollPosition = () => ({
  left: window.pageXOffset,
  top: window.pageYOffset
});
function scrollToPosition(position2) {
  let scrollToOptions;
  if ("el" in position2) {
    const positionEl = position2.el;
    const isIdSelector = typeof positionEl === "string" && positionEl.startsWith("#");
    const el = typeof positionEl === "string" ? isIdSelector ? document.getElementById(positionEl.slice(1)) : document.querySelector(positionEl) : positionEl;
    if (!el) {
      return;
    }
    scrollToOptions = getElementPosition(el, position2);
  } else {
    scrollToOptions = position2;
  }
  if ("scrollBehavior" in document.documentElement.style)
    window.scrollTo(scrollToOptions);
  else {
    window.scrollTo(scrollToOptions.left != null ? scrollToOptions.left : window.pageXOffset, scrollToOptions.top != null ? scrollToOptions.top : window.pageYOffset);
  }
}
function getScrollKey(path, delta) {
  const position2 = history.state ? history.state.position - delta : -1;
  return position2 + path;
}
const scrollPositions = /* @__PURE__ */ new Map();
function saveScrollPosition(key, scrollPosition) {
  scrollPositions.set(key, scrollPosition);
}
function getSavedScrollPosition(key) {
  const scroll = scrollPositions.get(key);
  scrollPositions.delete(key);
  return scroll;
}
let createBaseLocation = () => location.protocol + "//" + location.host;
function createCurrentLocation(base2, location2) {
  const { pathname, search, hash } = location2;
  const hashPos = base2.indexOf("#");
  if (hashPos > -1) {
    let slicePos = hash.includes(base2.slice(hashPos)) ? base2.slice(hashPos).length : 1;
    let pathFromHash = hash.slice(slicePos);
    if (pathFromHash[0] !== "/")
      pathFromHash = "/" + pathFromHash;
    return stripBase(pathFromHash, "");
  }
  const path = stripBase(pathname, base2);
  return path + search + hash;
}
function useHistoryListeners(base2, historyState, currentLocation, replace) {
  let listeners = [];
  let teardowns = [];
  let pauseState = null;
  const popStateHandler = ({ state }) => {
    const to = createCurrentLocation(base2, location);
    const from = currentLocation.value;
    const fromState = historyState.value;
    let delta = 0;
    if (state) {
      currentLocation.value = to;
      historyState.value = state;
      if (pauseState && pauseState === from) {
        pauseState = null;
        return;
      }
      delta = fromState ? state.position - fromState.position : 0;
    } else {
      replace(to);
    }
    listeners.forEach((listener) => {
      listener(currentLocation.value, from, {
        delta,
        type: NavigationType.pop,
        direction: delta ? delta > 0 ? NavigationDirection.forward : NavigationDirection.back : NavigationDirection.unknown
      });
    });
  };
  function pauseListeners() {
    pauseState = currentLocation.value;
  }
  function listen(callback) {
    listeners.push(callback);
    const teardown = () => {
      const index = listeners.indexOf(callback);
      if (index > -1)
        listeners.splice(index, 1);
    };
    teardowns.push(teardown);
    return teardown;
  }
  function beforeUnloadListener() {
    const { history: history2 } = window;
    if (!history2.state)
      return;
    history2.replaceState(assign$1({}, history2.state, { scroll: computeScrollPosition() }), "");
  }
  function destroy() {
    for (const teardown of teardowns)
      teardown();
    teardowns = [];
    window.removeEventListener("popstate", popStateHandler);
    window.removeEventListener("beforeunload", beforeUnloadListener);
  }
  window.addEventListener("popstate", popStateHandler);
  window.addEventListener("beforeunload", beforeUnloadListener);
  return {
    pauseListeners,
    listen,
    destroy
  };
}
function buildState(back, current, forward, replaced = false, computeScroll = false) {
  return {
    back,
    current,
    forward,
    replaced,
    position: window.history.length,
    scroll: computeScroll ? computeScrollPosition() : null
  };
}
function useHistoryStateNavigation(base2) {
  const { history: history2, location: location2 } = window;
  const currentLocation = {
    value: createCurrentLocation(base2, location2)
  };
  const historyState = { value: history2.state };
  if (!historyState.value) {
    changeLocation(currentLocation.value, {
      back: null,
      current: currentLocation.value,
      forward: null,
      position: history2.length - 1,
      replaced: true,
      scroll: null
    }, true);
  }
  function changeLocation(to, state, replace2) {
    const hashIndex = base2.indexOf("#");
    const url = hashIndex > -1 ? (location2.host && document.querySelector("base") ? base2 : base2.slice(hashIndex)) + to : createBaseLocation() + base2 + to;
    try {
      history2[replace2 ? "replaceState" : "pushState"](state, "", url);
      historyState.value = state;
    } catch (err) {
      {
        console.error(err);
      }
      location2[replace2 ? "replace" : "assign"](url);
    }
  }
  function replace(to, data) {
    const state = assign$1({}, history2.state, buildState(
      historyState.value.back,
      to,
      historyState.value.forward,
      true
    ), data, { position: historyState.value.position });
    changeLocation(to, state, true);
    currentLocation.value = to;
  }
  function push(to, data) {
    const currentState = assign$1(
      {},
      historyState.value,
      history2.state,
      {
        forward: to,
        scroll: computeScrollPosition()
      }
    );
    changeLocation(currentState.current, currentState, true);
    const state = assign$1({}, buildState(currentLocation.value, to, null), { position: currentState.position + 1 }, data);
    changeLocation(to, state, false);
    currentLocation.value = to;
  }
  return {
    location: currentLocation,
    state: historyState,
    push,
    replace
  };
}
function createWebHistory(base2) {
  base2 = normalizeBase(base2);
  const historyNavigation = useHistoryStateNavigation(base2);
  const historyListeners = useHistoryListeners(base2, historyNavigation.state, historyNavigation.location, historyNavigation.replace);
  function go(delta, triggerListeners = true) {
    if (!triggerListeners)
      historyListeners.pauseListeners();
    history.go(delta);
  }
  const routerHistory = assign$1({
    location: "",
    base: base2,
    go,
    createHref: createHref.bind(null, base2)
  }, historyNavigation, historyListeners);
  Object.defineProperty(routerHistory, "location", {
    enumerable: true,
    get: () => historyNavigation.location.value
  });
  Object.defineProperty(routerHistory, "state", {
    enumerable: true,
    get: () => historyNavigation.state.value
  });
  return routerHistory;
}
function createWebHashHistory(base2) {
  base2 = location.host ? base2 || location.pathname + location.search : "";
  if (!base2.includes("#"))
    base2 += "#";
  return createWebHistory(base2);
}
function isRouteLocation(route2) {
  return typeof route2 === "string" || route2 && typeof route2 === "object";
}
function isRouteName(name) {
  return typeof name === "string" || typeof name === "symbol";
}
const START_LOCATION_NORMALIZED = {
  path: "/",
  name: void 0,
  params: {},
  query: {},
  hash: "",
  fullPath: "/",
  matched: [],
  meta: {},
  redirectedFrom: void 0
};
const NavigationFailureSymbol = Symbol("");
var NavigationFailureType;
(function(NavigationFailureType2) {
  NavigationFailureType2[NavigationFailureType2["aborted"] = 4] = "aborted";
  NavigationFailureType2[NavigationFailureType2["cancelled"] = 8] = "cancelled";
  NavigationFailureType2[NavigationFailureType2["duplicated"] = 16] = "duplicated";
})(NavigationFailureType || (NavigationFailureType = {}));
function createRouterError(type, params) {
  {
    return assign$1(new Error(), {
      type,
      [NavigationFailureSymbol]: true
    }, params);
  }
}
function isNavigationFailure(error, type) {
  return error instanceof Error && NavigationFailureSymbol in error && (type == null || !!(error.type & type));
}
const BASE_PARAM_PATTERN = "[^/]+?";
const BASE_PATH_PARSER_OPTIONS = {
  sensitive: false,
  strict: false,
  start: true,
  end: true
};
const REGEX_CHARS_RE = /[.+*?^${}()[\]/\\]/g;
function tokensToParser(segments, extraOptions) {
  const options = assign$1({}, BASE_PATH_PARSER_OPTIONS, extraOptions);
  const score = [];
  let pattern = options.start ? "^" : "";
  const keys = [];
  for (const segment of segments) {
    const segmentScores = segment.length ? [] : [90];
    if (options.strict && !segment.length)
      pattern += "/";
    for (let tokenIndex = 0; tokenIndex < segment.length; tokenIndex++) {
      const token = segment[tokenIndex];
      let subSegmentScore = 40 + (options.sensitive ? 0.25 : 0);
      if (token.type === 0) {
        if (!tokenIndex)
          pattern += "/";
        pattern += token.value.replace(REGEX_CHARS_RE, "\\$&");
        subSegmentScore += 40;
      } else if (token.type === 1) {
        const { value, repeatable, optional, regexp } = token;
        keys.push({
          name: value,
          repeatable,
          optional
        });
        const re2 = regexp ? regexp : BASE_PARAM_PATTERN;
        if (re2 !== BASE_PARAM_PATTERN) {
          subSegmentScore += 10;
          try {
            new RegExp(`(${re2})`);
          } catch (err) {
            throw new Error(`Invalid custom RegExp for param "${value}" (${re2}): ` + err.message);
          }
        }
        let subPattern = repeatable ? `((?:${re2})(?:/(?:${re2}))*)` : `(${re2})`;
        if (!tokenIndex)
          subPattern = optional && segment.length < 2 ? `(?:/${subPattern})` : "/" + subPattern;
        if (optional)
          subPattern += "?";
        pattern += subPattern;
        subSegmentScore += 20;
        if (optional)
          subSegmentScore += -8;
        if (repeatable)
          subSegmentScore += -20;
        if (re2 === ".*")
          subSegmentScore += -50;
      }
      segmentScores.push(subSegmentScore);
    }
    score.push(segmentScores);
  }
  if (options.strict && options.end) {
    const i = score.length - 1;
    score[i][score[i].length - 1] += 0.7000000000000001;
  }
  if (!options.strict)
    pattern += "/?";
  if (options.end)
    pattern += "$";
  else if (options.strict)
    pattern += "(?:/|$)";
  const re = new RegExp(pattern, options.sensitive ? "" : "i");
  function parse2(path) {
    const match = path.match(re);
    const params = {};
    if (!match)
      return null;
    for (let i = 1; i < match.length; i++) {
      const value = match[i] || "";
      const key = keys[i - 1];
      params[key.name] = value && key.repeatable ? value.split("/") : value;
    }
    return params;
  }
  function stringify(params) {
    let path = "";
    let avoidDuplicatedSlash = false;
    for (const segment of segments) {
      if (!avoidDuplicatedSlash || !path.endsWith("/"))
        path += "/";
      avoidDuplicatedSlash = false;
      for (const token of segment) {
        if (token.type === 0) {
          path += token.value;
        } else if (token.type === 1) {
          const { value, repeatable, optional } = token;
          const param = value in params ? params[value] : "";
          if (isArray$1(param) && !repeatable) {
            throw new Error(`Provided param "${value}" is an array but it is not repeatable (* or + modifiers)`);
          }
          const text = isArray$1(param) ? param.join("/") : param;
          if (!text) {
            if (optional) {
              if (segment.length < 2) {
                if (path.endsWith("/"))
                  path = path.slice(0, -1);
                else
                  avoidDuplicatedSlash = true;
              }
            } else
              throw new Error(`Missing required param "${value}"`);
          }
          path += text;
        }
      }
    }
    return path || "/";
  }
  return {
    re,
    score,
    keys,
    parse: parse2,
    stringify
  };
}
function compareScoreArray(a, b) {
  let i = 0;
  while (i < a.length && i < b.length) {
    const diff2 = b[i] - a[i];
    if (diff2)
      return diff2;
    i++;
  }
  if (a.length < b.length) {
    return a.length === 1 && a[0] === 40 + 40 ? -1 : 1;
  } else if (a.length > b.length) {
    return b.length === 1 && b[0] === 40 + 40 ? 1 : -1;
  }
  return 0;
}
function comparePathParserScore(a, b) {
  let i = 0;
  const aScore = a.score;
  const bScore = b.score;
  while (i < aScore.length && i < bScore.length) {
    const comp = compareScoreArray(aScore[i], bScore[i]);
    if (comp)
      return comp;
    i++;
  }
  if (Math.abs(bScore.length - aScore.length) === 1) {
    if (isLastScoreNegative(aScore))
      return 1;
    if (isLastScoreNegative(bScore))
      return -1;
  }
  return bScore.length - aScore.length;
}
function isLastScoreNegative(score) {
  const last = score[score.length - 1];
  return score.length > 0 && last[last.length - 1] < 0;
}
const ROOT_TOKEN = {
  type: 0,
  value: ""
};
const VALID_PARAM_RE = /[a-zA-Z0-9_]/;
function tokenizePath(path) {
  if (!path)
    return [[]];
  if (path === "/")
    return [[ROOT_TOKEN]];
  if (!path.startsWith("/")) {
    throw new Error(`Invalid path "${path}"`);
  }
  function crash(message) {
    throw new Error(`ERR (${state})/"${buffer2}": ${message}`);
  }
  let state = 0;
  let previousState = state;
  const tokens = [];
  let segment;
  function finalizeSegment() {
    if (segment)
      tokens.push(segment);
    segment = [];
  }
  let i = 0;
  let char;
  let buffer2 = "";
  let customRe = "";
  function consumeBuffer() {
    if (!buffer2)
      return;
    if (state === 0) {
      segment.push({
        type: 0,
        value: buffer2
      });
    } else if (state === 1 || state === 2 || state === 3) {
      if (segment.length > 1 && (char === "*" || char === "+"))
        crash(`A repeatable param (${buffer2}) must be alone in its segment. eg: '/:ids+.`);
      segment.push({
        type: 1,
        value: buffer2,
        regexp: customRe,
        repeatable: char === "*" || char === "+",
        optional: char === "*" || char === "?"
      });
    } else {
      crash("Invalid state to consume buffer");
    }
    buffer2 = "";
  }
  function addCharToBuffer() {
    buffer2 += char;
  }
  while (i < path.length) {
    char = path[i++];
    if (char === "\\" && state !== 2) {
      previousState = state;
      state = 4;
      continue;
    }
    switch (state) {
      case 0:
        if (char === "/") {
          if (buffer2) {
            consumeBuffer();
          }
          finalizeSegment();
        } else if (char === ":") {
          consumeBuffer();
          state = 1;
        } else {
          addCharToBuffer();
        }
        break;
      case 4:
        addCharToBuffer();
        state = previousState;
        break;
      case 1:
        if (char === "(") {
          state = 2;
        } else if (VALID_PARAM_RE.test(char)) {
          addCharToBuffer();
        } else {
          consumeBuffer();
          state = 0;
          if (char !== "*" && char !== "?" && char !== "+")
            i--;
        }
        break;
      case 2:
        if (char === ")") {
          if (customRe[customRe.length - 1] == "\\")
            customRe = customRe.slice(0, -1) + char;
          else
            state = 3;
        } else {
          customRe += char;
        }
        break;
      case 3:
        consumeBuffer();
        state = 0;
        if (char !== "*" && char !== "?" && char !== "+")
          i--;
        customRe = "";
        break;
      default:
        crash("Unknown state");
        break;
    }
  }
  if (state === 2)
    crash(`Unfinished custom RegExp for param "${buffer2}"`);
  consumeBuffer();
  finalizeSegment();
  return tokens;
}
function createRouteRecordMatcher(record, parent, options) {
  const parser = tokensToParser(tokenizePath(record.path), options);
  const matcher = assign$1(parser, {
    record,
    parent,
    children: [],
    alias: []
  });
  if (parent) {
    if (!matcher.record.aliasOf === !parent.record.aliasOf)
      parent.children.push(matcher);
  }
  return matcher;
}
function createRouterMatcher(routes2, globalOptions) {
  const matchers = [];
  const matcherMap = /* @__PURE__ */ new Map();
  globalOptions = mergeOptions({ strict: false, end: true, sensitive: false }, globalOptions);
  function getRecordMatcher(name) {
    return matcherMap.get(name);
  }
  function addRoute(record, parent, originalRecord) {
    const isRootAdd = !originalRecord;
    const mainNormalizedRecord = normalizeRouteRecord(record);
    mainNormalizedRecord.aliasOf = originalRecord && originalRecord.record;
    const options = mergeOptions(globalOptions, record);
    const normalizedRecords = [
      mainNormalizedRecord
    ];
    if ("alias" in record) {
      const aliases = typeof record.alias === "string" ? [record.alias] : record.alias;
      for (const alias of aliases) {
        normalizedRecords.push(assign$1({}, mainNormalizedRecord, {
          components: originalRecord ? originalRecord.record.components : mainNormalizedRecord.components,
          path: alias,
          aliasOf: originalRecord ? originalRecord.record : mainNormalizedRecord
        }));
      }
    }
    let matcher;
    let originalMatcher;
    for (const normalizedRecord of normalizedRecords) {
      const { path } = normalizedRecord;
      if (parent && path[0] !== "/") {
        const parentPath = parent.record.path;
        const connectingSlash = parentPath[parentPath.length - 1] === "/" ? "" : "/";
        normalizedRecord.path = parent.record.path + (path && connectingSlash + path);
      }
      matcher = createRouteRecordMatcher(normalizedRecord, parent, options);
      if (originalRecord) {
        originalRecord.alias.push(matcher);
      } else {
        originalMatcher = originalMatcher || matcher;
        if (originalMatcher !== matcher)
          originalMatcher.alias.push(matcher);
        if (isRootAdd && record.name && !isAliasRecord(matcher))
          removeRoute(record.name);
      }
      if (mainNormalizedRecord.children) {
        const children = mainNormalizedRecord.children;
        for (let i = 0; i < children.length; i++) {
          addRoute(children[i], matcher, originalRecord && originalRecord.children[i]);
        }
      }
      originalRecord = originalRecord || matcher;
      if (matcher.record.components && Object.keys(matcher.record.components).length || matcher.record.name || matcher.record.redirect) {
        insertMatcher(matcher);
      }
    }
    return originalMatcher ? () => {
      removeRoute(originalMatcher);
    } : noop;
  }
  function removeRoute(matcherRef) {
    if (isRouteName(matcherRef)) {
      const matcher = matcherMap.get(matcherRef);
      if (matcher) {
        matcherMap.delete(matcherRef);
        matchers.splice(matchers.indexOf(matcher), 1);
        matcher.children.forEach(removeRoute);
        matcher.alias.forEach(removeRoute);
      }
    } else {
      const index = matchers.indexOf(matcherRef);
      if (index > -1) {
        matchers.splice(index, 1);
        if (matcherRef.record.name)
          matcherMap.delete(matcherRef.record.name);
        matcherRef.children.forEach(removeRoute);
        matcherRef.alias.forEach(removeRoute);
      }
    }
  }
  function getRoutes() {
    return matchers;
  }
  function insertMatcher(matcher) {
    let i = 0;
    while (i < matchers.length && comparePathParserScore(matcher, matchers[i]) >= 0 && (matcher.record.path !== matchers[i].record.path || !isRecordChildOf(matcher, matchers[i])))
      i++;
    matchers.splice(i, 0, matcher);
    if (matcher.record.name && !isAliasRecord(matcher))
      matcherMap.set(matcher.record.name, matcher);
  }
  function resolve2(location2, currentLocation) {
    let matcher;
    let params = {};
    let path;
    let name;
    if ("name" in location2 && location2.name) {
      matcher = matcherMap.get(location2.name);
      if (!matcher)
        throw createRouterError(1, {
          location: location2
        });
      name = matcher.record.name;
      params = assign$1(
        paramsFromLocation(
          currentLocation.params,
          matcher.keys.filter((k) => !k.optional).map((k) => k.name)
        ),
        location2.params && paramsFromLocation(location2.params, matcher.keys.map((k) => k.name))
      );
      path = matcher.stringify(params);
    } else if ("path" in location2) {
      path = location2.path;
      matcher = matchers.find((m) => m.re.test(path));
      if (matcher) {
        params = matcher.parse(path);
        name = matcher.record.name;
      }
    } else {
      matcher = currentLocation.name ? matcherMap.get(currentLocation.name) : matchers.find((m) => m.re.test(currentLocation.path));
      if (!matcher)
        throw createRouterError(1, {
          location: location2,
          currentLocation
        });
      name = matcher.record.name;
      params = assign$1({}, currentLocation.params, location2.params);
      path = matcher.stringify(params);
    }
    const matched = [];
    let parentMatcher = matcher;
    while (parentMatcher) {
      matched.unshift(parentMatcher.record);
      parentMatcher = parentMatcher.parent;
    }
    return {
      name,
      path,
      params,
      matched,
      meta: mergeMetaFields(matched)
    };
  }
  routes2.forEach((route2) => addRoute(route2));
  return { addRoute, resolve: resolve2, removeRoute, getRoutes, getRecordMatcher };
}
function paramsFromLocation(params, keys) {
  const newParams = {};
  for (const key of keys) {
    if (key in params)
      newParams[key] = params[key];
  }
  return newParams;
}
function normalizeRouteRecord(record) {
  return {
    path: record.path,
    redirect: record.redirect,
    name: record.name,
    meta: record.meta || {},
    aliasOf: void 0,
    beforeEnter: record.beforeEnter,
    props: normalizeRecordProps(record),
    children: record.children || [],
    instances: {},
    leaveGuards: /* @__PURE__ */ new Set(),
    updateGuards: /* @__PURE__ */ new Set(),
    enterCallbacks: {},
    components: "components" in record ? record.components || null : record.component && { default: record.component }
  };
}
function normalizeRecordProps(record) {
  const propsObject = {};
  const props = record.props || false;
  if ("component" in record) {
    propsObject.default = props;
  } else {
    for (const name in record.components)
      propsObject[name] = typeof props === "boolean" ? props : props[name];
  }
  return propsObject;
}
function isAliasRecord(record) {
  while (record) {
    if (record.record.aliasOf)
      return true;
    record = record.parent;
  }
  return false;
}
function mergeMetaFields(matched) {
  return matched.reduce((meta, record) => assign$1(meta, record.meta), {});
}
function mergeOptions(defaults2, partialOptions) {
  const options = {};
  for (const key in defaults2) {
    options[key] = key in partialOptions ? partialOptions[key] : defaults2[key];
  }
  return options;
}
function isRecordChildOf(record, parent) {
  return parent.children.some((child) => child === record || isRecordChildOf(record, child));
}
const HASH_RE = /#/g;
const AMPERSAND_RE = /&/g;
const SLASH_RE = /\//g;
const EQUAL_RE = /=/g;
const IM_RE = /\?/g;
const PLUS_RE = /\+/g;
const ENC_BRACKET_OPEN_RE = /%5B/g;
const ENC_BRACKET_CLOSE_RE = /%5D/g;
const ENC_CARET_RE = /%5E/g;
const ENC_BACKTICK_RE = /%60/g;
const ENC_CURLY_OPEN_RE = /%7B/g;
const ENC_PIPE_RE = /%7C/g;
const ENC_CURLY_CLOSE_RE = /%7D/g;
const ENC_SPACE_RE = /%20/g;
function commonEncode(text) {
  return encodeURI("" + text).replace(ENC_PIPE_RE, "|").replace(ENC_BRACKET_OPEN_RE, "[").replace(ENC_BRACKET_CLOSE_RE, "]");
}
function encodeHash(text) {
  return commonEncode(text).replace(ENC_CURLY_OPEN_RE, "{").replace(ENC_CURLY_CLOSE_RE, "}").replace(ENC_CARET_RE, "^");
}
function encodeQueryValue(text) {
  return commonEncode(text).replace(PLUS_RE, "%2B").replace(ENC_SPACE_RE, "+").replace(HASH_RE, "%23").replace(AMPERSAND_RE, "%26").replace(ENC_BACKTICK_RE, "`").replace(ENC_CURLY_OPEN_RE, "{").replace(ENC_CURLY_CLOSE_RE, "}").replace(ENC_CARET_RE, "^");
}
function encodeQueryKey(text) {
  return encodeQueryValue(text).replace(EQUAL_RE, "%3D");
}
function encodePath(text) {
  return commonEncode(text).replace(HASH_RE, "%23").replace(IM_RE, "%3F");
}
function encodeParam(text) {
  return text == null ? "" : encodePath(text).replace(SLASH_RE, "%2F");
}
function decode$2(text) {
  try {
    return decodeURIComponent("" + text);
  } catch (err) {
  }
  return "" + text;
}
function parseQuery(search) {
  const query = {};
  if (search === "" || search === "?")
    return query;
  const hasLeadingIM = search[0] === "?";
  const searchParams = (hasLeadingIM ? search.slice(1) : search).split("&");
  for (let i = 0; i < searchParams.length; ++i) {
    const searchParam = searchParams[i].replace(PLUS_RE, " ");
    const eqPos = searchParam.indexOf("=");
    const key = decode$2(eqPos < 0 ? searchParam : searchParam.slice(0, eqPos));
    const value = eqPos < 0 ? null : decode$2(searchParam.slice(eqPos + 1));
    if (key in query) {
      let currentValue = query[key];
      if (!isArray$1(currentValue)) {
        currentValue = query[key] = [currentValue];
      }
      currentValue.push(value);
    } else {
      query[key] = value;
    }
  }
  return query;
}
function stringifyQuery(query) {
  let search = "";
  for (let key in query) {
    const value = query[key];
    key = encodeQueryKey(key);
    if (value == null) {
      if (value !== void 0) {
        search += (search.length ? "&" : "") + key;
      }
      continue;
    }
    const values = isArray$1(value) ? value.map((v) => v && encodeQueryValue(v)) : [value && encodeQueryValue(value)];
    values.forEach((value2) => {
      if (value2 !== void 0) {
        search += (search.length ? "&" : "") + key;
        if (value2 != null)
          search += "=" + value2;
      }
    });
  }
  return search;
}
function normalizeQuery(query) {
  const normalizedQuery = {};
  for (const key in query) {
    const value = query[key];
    if (value !== void 0) {
      normalizedQuery[key] = isArray$1(value) ? value.map((v) => v == null ? null : "" + v) : value == null ? value : "" + value;
    }
  }
  return normalizedQuery;
}
const matchedRouteKey = Symbol("");
const viewDepthKey = Symbol("");
const routerKey = Symbol("");
const routeLocationKey = Symbol("");
const routerViewLocationKey = Symbol("");
function useCallbacks() {
  let handlers = [];
  function add2(handler) {
    handlers.push(handler);
    return () => {
      const i = handlers.indexOf(handler);
      if (i > -1)
        handlers.splice(i, 1);
    };
  }
  function reset() {
    handlers = [];
  }
  return {
    add: add2,
    list: () => handlers,
    reset
  };
}
function guardToPromiseFn(guard, to, from, record, name) {
  const enterCallbackArray = record && (record.enterCallbacks[name] = record.enterCallbacks[name] || []);
  return () => new Promise((resolve2, reject) => {
    const next = (valid) => {
      if (valid === false) {
        reject(createRouterError(4, {
          from,
          to
        }));
      } else if (valid instanceof Error) {
        reject(valid);
      } else if (isRouteLocation(valid)) {
        reject(createRouterError(2, {
          from: to,
          to: valid
        }));
      } else {
        if (enterCallbackArray && record.enterCallbacks[name] === enterCallbackArray && typeof valid === "function") {
          enterCallbackArray.push(valid);
        }
        resolve2();
      }
    };
    const guardReturn = guard.call(record && record.instances[name], to, from, next);
    let guardCall = Promise.resolve(guardReturn);
    if (guard.length < 3)
      guardCall = guardCall.then(next);
    guardCall.catch((err) => reject(err));
  });
}
function extractComponentsGuards(matched, guardType, to, from) {
  const guards = [];
  for (const record of matched) {
    for (const name in record.components) {
      let rawComponent = record.components[name];
      if (guardType !== "beforeRouteEnter" && !record.instances[name])
        continue;
      if (isRouteComponent(rawComponent)) {
        const options = rawComponent.__vccOpts || rawComponent;
        const guard = options[guardType];
        guard && guards.push(guardToPromiseFn(guard, to, from, record, name));
      } else {
        let componentPromise = rawComponent();
        guards.push(() => componentPromise.then((resolved) => {
          if (!resolved)
            return Promise.reject(new Error(`Couldn't resolve component "${name}" at "${record.path}"`));
          const resolvedComponent = isESModule(resolved) ? resolved.default : resolved;
          record.components[name] = resolvedComponent;
          const options = resolvedComponent.__vccOpts || resolvedComponent;
          const guard = options[guardType];
          return guard && guardToPromiseFn(guard, to, from, record, name)();
        }));
      }
    }
  }
  return guards;
}
function isRouteComponent(component) {
  return typeof component === "object" || "displayName" in component || "props" in component || "__vccOpts" in component;
}
function useLink(props) {
  const router2 = inject(routerKey);
  const currentRoute = inject(routeLocationKey);
  const route2 = computed(() => router2.resolve(unref(props.to)));
  const activeRecordIndex = computed(() => {
    const { matched } = route2.value;
    const { length } = matched;
    const routeMatched = matched[length - 1];
    const currentMatched = currentRoute.matched;
    if (!routeMatched || !currentMatched.length)
      return -1;
    const index = currentMatched.findIndex(isSameRouteRecord$1.bind(null, routeMatched));
    if (index > -1)
      return index;
    const parentRecordPath = getOriginalPath$1(matched[length - 2]);
    return length > 1 && getOriginalPath$1(routeMatched) === parentRecordPath && currentMatched[currentMatched.length - 1].path !== parentRecordPath ? currentMatched.findIndex(isSameRouteRecord$1.bind(null, matched[length - 2])) : index;
  });
  const isActive = computed(() => activeRecordIndex.value > -1 && includesParams$1(currentRoute.params, route2.value.params));
  const isExactActive = computed(() => activeRecordIndex.value > -1 && activeRecordIndex.value === currentRoute.matched.length - 1 && isSameRouteLocationParams$1(currentRoute.params, route2.value.params));
  function navigate(e = {}) {
    if (guardEvent(e)) {
      return router2[unref(props.replace) ? "replace" : "push"](
        unref(props.to)
      ).catch(noop);
    }
    return Promise.resolve();
  }
  if (isBrowser) {
    const instance = getCurrentInstance();
    if (instance) {
      const linkContextDevtools = {
        route: route2.value,
        isActive: isActive.value,
        isExactActive: isExactActive.value
      };
      instance.__vrl_devtools = instance.__vrl_devtools || [];
      instance.__vrl_devtools.push(linkContextDevtools);
      watchEffect(() => {
        linkContextDevtools.route = route2.value;
        linkContextDevtools.isActive = isActive.value;
        linkContextDevtools.isExactActive = isExactActive.value;
      }, { flush: "post" });
    }
  }
  return {
    route: route2,
    href: computed(() => route2.value.href),
    isActive,
    isExactActive,
    navigate
  };
}
const RouterLinkImpl = /* @__PURE__ */ defineComponent({
  name: "RouterLink",
  compatConfig: { MODE: 3 },
  props: {
    to: {
      type: [String, Object],
      required: true
    },
    replace: Boolean,
    activeClass: String,
    exactActiveClass: String,
    custom: Boolean,
    ariaCurrentValue: {
      type: String,
      default: "page"
    }
  },
  useLink,
  setup(props, { slots }) {
    const link = reactive(useLink(props));
    const { options } = inject(routerKey);
    const elClass = computed(() => ({
      [getLinkClass(props.activeClass, options.linkActiveClass, "router-link-active")]: link.isActive,
      [getLinkClass(props.exactActiveClass, options.linkExactActiveClass, "router-link-exact-active")]: link.isExactActive
    }));
    return () => {
      const children = slots.default && slots.default(link);
      return props.custom ? children : h("a", {
        "aria-current": link.isExactActive ? props.ariaCurrentValue : null,
        href: link.href,
        onClick: link.navigate,
        class: elClass.value
      }, children);
    };
  }
});
const RouterLink = RouterLinkImpl;
function guardEvent(e) {
  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)
    return;
  if (e.defaultPrevented)
    return;
  if (e.button !== void 0 && e.button !== 0)
    return;
  if (e.currentTarget && e.currentTarget.getAttribute) {
    const target2 = e.currentTarget.getAttribute("target");
    if (/\b_blank\b/i.test(target2))
      return;
  }
  if (e.preventDefault)
    e.preventDefault();
  return true;
}
function includesParams$1(outer, inner) {
  for (const key in inner) {
    const innerValue = inner[key];
    const outerValue = outer[key];
    if (typeof innerValue === "string") {
      if (innerValue !== outerValue)
        return false;
    } else {
      if (!isArray$1(outerValue) || outerValue.length !== innerValue.length || innerValue.some((value, i) => value !== outerValue[i]))
        return false;
    }
  }
  return true;
}
function getOriginalPath$1(record) {
  return record ? record.aliasOf ? record.aliasOf.path : record.path : "";
}
const getLinkClass = (propClass, globalClass, defaultClass) => propClass != null ? propClass : globalClass != null ? globalClass : defaultClass;
const RouterViewImpl = /* @__PURE__ */ defineComponent({
  name: "RouterView",
  inheritAttrs: false,
  props: {
    name: {
      type: String,
      default: "default"
    },
    route: Object
  },
  compatConfig: { MODE: 3 },
  setup(props, { attrs, slots }) {
    const injectedRoute = inject(routerViewLocationKey);
    const routeToDisplay = computed(() => props.route || injectedRoute.value);
    const injectedDepth = inject(viewDepthKey, 0);
    const depth = computed(() => {
      let initialDepth = unref(injectedDepth);
      const { matched } = routeToDisplay.value;
      let matchedRoute;
      while ((matchedRoute = matched[initialDepth]) && !matchedRoute.components) {
        initialDepth++;
      }
      return initialDepth;
    });
    const matchedRouteRef = computed(() => routeToDisplay.value.matched[depth.value]);
    provide(viewDepthKey, computed(() => depth.value + 1));
    provide(matchedRouteKey, matchedRouteRef);
    provide(routerViewLocationKey, routeToDisplay);
    const viewRef = ref();
    watch(() => [viewRef.value, matchedRouteRef.value, props.name], ([instance, to, name], [oldInstance, from, oldName]) => {
      if (to) {
        to.instances[name] = instance;
        if (from && from !== to && instance && instance === oldInstance) {
          if (!to.leaveGuards.size) {
            to.leaveGuards = from.leaveGuards;
          }
          if (!to.updateGuards.size) {
            to.updateGuards = from.updateGuards;
          }
        }
      }
      if (instance && to && (!from || !isSameRouteRecord$1(to, from) || !oldInstance)) {
        (to.enterCallbacks[name] || []).forEach((callback) => callback(instance));
      }
    }, { flush: "post" });
    return () => {
      const route2 = routeToDisplay.value;
      const currentName = props.name;
      const matchedRoute = matchedRouteRef.value;
      const ViewComponent = matchedRoute && matchedRoute.components[currentName];
      if (!ViewComponent) {
        return normalizeSlot(slots.default, { Component: ViewComponent, route: route2 });
      }
      const routePropsOption = matchedRoute.props[currentName];
      const routeProps = routePropsOption ? routePropsOption === true ? route2.params : typeof routePropsOption === "function" ? routePropsOption(route2) : routePropsOption : null;
      const onVnodeUnmounted = (vnode) => {
        if (vnode.component.isUnmounted) {
          matchedRoute.instances[currentName] = null;
        }
      };
      const component = h(ViewComponent, assign$1({}, routeProps, attrs, {
        onVnodeUnmounted,
        ref: viewRef
      }));
      if (isBrowser && component.ref) {
        const info = {
          depth: depth.value,
          name: matchedRoute.name,
          path: matchedRoute.path,
          meta: matchedRoute.meta
        };
        const internalInstances = isArray$1(component.ref) ? component.ref.map((r) => r.i) : [component.ref.i];
        internalInstances.forEach((instance) => {
          instance.__vrv_devtools = info;
        });
      }
      return normalizeSlot(slots.default, { Component: component, route: route2 }) || component;
    };
  }
});
function normalizeSlot(slot, data) {
  if (!slot)
    return null;
  const slotContent = slot(data);
  return slotContent.length === 1 ? slotContent[0] : slotContent;
}
const RouterView = RouterViewImpl;
function formatRouteLocation(routeLocation, tooltip) {
  const copy = assign$1({}, routeLocation, {
    matched: routeLocation.matched.map((matched) => omit(matched, ["instances", "children", "aliasOf"]))
  });
  return {
    _custom: {
      type: null,
      readOnly: true,
      display: routeLocation.fullPath,
      tooltip,
      value: copy
    }
  };
}
function formatDisplay(display) {
  return {
    _custom: {
      display
    }
  };
}
let routerId = 0;
function addDevtools(app2, router2, matcher) {
  if (router2.__hasDevtools)
    return;
  router2.__hasDevtools = true;
  const id = routerId++;
  setupDevtoolsPlugin({
    id: "org.vuejs.router" + (id ? "." + id : ""),
    label: "Vue Router",
    packageName: "vue-router",
    homepage: "https://router.vuejs.org",
    logo: "https://router.vuejs.org/logo.png",
    componentStateTypes: ["Routing"],
    app: app2
  }, (api) => {
    if (typeof api.now !== "function") {
      console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.");
    }
    api.on.inspectComponent((payload, ctx) => {
      if (payload.instanceData) {
        payload.instanceData.state.push({
          type: "Routing",
          key: "$route",
          editable: false,
          value: formatRouteLocation(router2.currentRoute.value, "Current Route")
        });
      }
    });
    api.on.visitComponentTree(({ treeNode: node, componentInstance }) => {
      if (componentInstance.__vrv_devtools) {
        const info = componentInstance.__vrv_devtools;
        node.tags.push({
          label: (info.name ? `${info.name.toString()}: ` : "") + info.path,
          textColor: 0,
          tooltip: "This component is rendered by &lt;router-view&gt;",
          backgroundColor: PINK_500
        });
      }
      if (isArray$1(componentInstance.__vrl_devtools)) {
        componentInstance.__devtoolsApi = api;
        componentInstance.__vrl_devtools.forEach((devtoolsData) => {
          let backgroundColor = ORANGE_400;
          let tooltip = "";
          if (devtoolsData.isExactActive) {
            backgroundColor = LIME_500;
            tooltip = "This is exactly active";
          } else if (devtoolsData.isActive) {
            backgroundColor = BLUE_600;
            tooltip = "This link is active";
          }
          node.tags.push({
            label: devtoolsData.route.path,
            textColor: 0,
            tooltip,
            backgroundColor
          });
        });
      }
    });
    watch(router2.currentRoute, () => {
      refreshRoutesView();
      api.notifyComponentUpdate();
      api.sendInspectorTree(routerInspectorId);
      api.sendInspectorState(routerInspectorId);
    });
    const navigationsLayerId = "router:navigations:" + id;
    api.addTimelineLayer({
      id: navigationsLayerId,
      label: `Router${id ? " " + id : ""} Navigations`,
      color: 4237508
    });
    router2.onError((error, to) => {
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          title: "Error during Navigation",
          subtitle: to.fullPath,
          logType: "error",
          time: api.now(),
          data: { error },
          groupId: to.meta.__navigationId
        }
      });
    });
    let navigationId = 0;
    router2.beforeEach((to, from) => {
      const data = {
        guard: formatDisplay("beforeEach"),
        from: formatRouteLocation(from, "Current Location during this navigation"),
        to: formatRouteLocation(to, "Target location")
      };
      Object.defineProperty(to.meta, "__navigationId", {
        value: navigationId++
      });
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          time: api.now(),
          title: "Start of navigation",
          subtitle: to.fullPath,
          data,
          groupId: to.meta.__navigationId
        }
      });
    });
    router2.afterEach((to, from, failure) => {
      const data = {
        guard: formatDisplay("afterEach")
      };
      if (failure) {
        data.failure = {
          _custom: {
            type: Error,
            readOnly: true,
            display: failure ? failure.message : "",
            tooltip: "Navigation Failure",
            value: failure
          }
        };
        data.status = formatDisplay("\u274C");
      } else {
        data.status = formatDisplay("\u2705");
      }
      data.from = formatRouteLocation(from, "Current Location during this navigation");
      data.to = formatRouteLocation(to, "Target location");
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          title: "End of navigation",
          subtitle: to.fullPath,
          time: api.now(),
          data,
          logType: failure ? "warning" : "default",
          groupId: to.meta.__navigationId
        }
      });
    });
    const routerInspectorId = "router-inspector:" + id;
    api.addInspector({
      id: routerInspectorId,
      label: "Routes" + (id ? " " + id : ""),
      icon: "book",
      treeFilterPlaceholder: "Search routes"
    });
    function refreshRoutesView() {
      if (!activeRoutesPayload)
        return;
      const payload = activeRoutesPayload;
      let routes2 = matcher.getRoutes().filter((route2) => !route2.parent);
      routes2.forEach(resetMatchStateOnRouteRecord);
      if (payload.filter) {
        routes2 = routes2.filter((route2) => isRouteMatching(route2, payload.filter.toLowerCase()));
      }
      routes2.forEach((route2) => markRouteRecordActive(route2, router2.currentRoute.value));
      payload.rootNodes = routes2.map(formatRouteRecordForInspector);
    }
    let activeRoutesPayload;
    api.on.getInspectorTree((payload) => {
      activeRoutesPayload = payload;
      if (payload.app === app2 && payload.inspectorId === routerInspectorId) {
        refreshRoutesView();
      }
    });
    api.on.getInspectorState((payload) => {
      if (payload.app === app2 && payload.inspectorId === routerInspectorId) {
        const routes2 = matcher.getRoutes();
        const route2 = routes2.find((route3) => route3.record.__vd_id === payload.nodeId);
        if (route2) {
          payload.state = {
            options: formatRouteRecordMatcherForStateInspector(route2)
          };
        }
      }
    });
    api.sendInspectorTree(routerInspectorId);
    api.sendInspectorState(routerInspectorId);
  });
}
function modifierForKey(key) {
  if (key.optional) {
    return key.repeatable ? "*" : "?";
  } else {
    return key.repeatable ? "+" : "";
  }
}
function formatRouteRecordMatcherForStateInspector(route2) {
  const { record } = route2;
  const fields = [
    { editable: false, key: "path", value: record.path }
  ];
  if (record.name != null) {
    fields.push({
      editable: false,
      key: "name",
      value: record.name
    });
  }
  fields.push({ editable: false, key: "regexp", value: route2.re });
  if (route2.keys.length) {
    fields.push({
      editable: false,
      key: "keys",
      value: {
        _custom: {
          type: null,
          readOnly: true,
          display: route2.keys.map((key) => `${key.name}${modifierForKey(key)}`).join(" "),
          tooltip: "Param keys",
          value: route2.keys
        }
      }
    });
  }
  if (record.redirect != null) {
    fields.push({
      editable: false,
      key: "redirect",
      value: record.redirect
    });
  }
  if (route2.alias.length) {
    fields.push({
      editable: false,
      key: "aliases",
      value: route2.alias.map((alias) => alias.record.path)
    });
  }
  if (Object.keys(route2.record.meta).length) {
    fields.push({
      editable: false,
      key: "meta",
      value: route2.record.meta
    });
  }
  fields.push({
    key: "score",
    editable: false,
    value: {
      _custom: {
        type: null,
        readOnly: true,
        display: route2.score.map((score) => score.join(", ")).join(" | "),
        tooltip: "Score used to sort routes",
        value: route2.score
      }
    }
  });
  return fields;
}
const PINK_500 = 15485081;
const BLUE_600 = 2450411;
const LIME_500 = 8702998;
const CYAN_400 = 2282478;
const ORANGE_400 = 16486972;
const DARK = 6710886;
function formatRouteRecordForInspector(route2) {
  const tags = [];
  const { record } = route2;
  if (record.name != null) {
    tags.push({
      label: String(record.name),
      textColor: 0,
      backgroundColor: CYAN_400
    });
  }
  if (record.aliasOf) {
    tags.push({
      label: "alias",
      textColor: 0,
      backgroundColor: ORANGE_400
    });
  }
  if (route2.__vd_match) {
    tags.push({
      label: "matches",
      textColor: 0,
      backgroundColor: PINK_500
    });
  }
  if (route2.__vd_exactActive) {
    tags.push({
      label: "exact",
      textColor: 0,
      backgroundColor: LIME_500
    });
  }
  if (route2.__vd_active) {
    tags.push({
      label: "active",
      textColor: 0,
      backgroundColor: BLUE_600
    });
  }
  if (record.redirect) {
    tags.push({
      label: typeof record.redirect === "string" ? `redirect: ${record.redirect}` : "redirects",
      textColor: 16777215,
      backgroundColor: DARK
    });
  }
  let id = record.__vd_id;
  if (id == null) {
    id = String(routeRecordId++);
    record.__vd_id = id;
  }
  return {
    id,
    label: record.path,
    tags,
    children: route2.children.map(formatRouteRecordForInspector)
  };
}
let routeRecordId = 0;
const EXTRACT_REGEXP_RE = /^\/(.*)\/([a-z]*)$/;
function markRouteRecordActive(route2, currentRoute) {
  const isExactActive = currentRoute.matched.length && isSameRouteRecord$1(currentRoute.matched[currentRoute.matched.length - 1], route2.record);
  route2.__vd_exactActive = route2.__vd_active = isExactActive;
  if (!isExactActive) {
    route2.__vd_active = currentRoute.matched.some((match) => isSameRouteRecord$1(match, route2.record));
  }
  route2.children.forEach((childRoute) => markRouteRecordActive(childRoute, currentRoute));
}
function resetMatchStateOnRouteRecord(route2) {
  route2.__vd_match = false;
  route2.children.forEach(resetMatchStateOnRouteRecord);
}
function isRouteMatching(route2, filter) {
  const found = String(route2.re).match(EXTRACT_REGEXP_RE);
  route2.__vd_match = false;
  if (!found || found.length < 3) {
    return false;
  }
  const nonEndingRE = new RegExp(found[1].replace(/\$$/, ""), found[2]);
  if (nonEndingRE.test(filter)) {
    route2.children.forEach((child) => isRouteMatching(child, filter));
    if (route2.record.path !== "/" || filter === "/") {
      route2.__vd_match = route2.re.test(filter);
      return true;
    }
    return false;
  }
  const path = route2.record.path.toLowerCase();
  const decodedPath = decode$2(path);
  if (!filter.startsWith("/") && (decodedPath.includes(filter) || path.includes(filter)))
    return true;
  if (decodedPath.startsWith(filter) || path.startsWith(filter))
    return true;
  if (route2.record.name && String(route2.record.name).includes(filter))
    return true;
  return route2.children.some((child) => isRouteMatching(child, filter));
}
function omit(obj, keys) {
  const ret = {};
  for (const key in obj) {
    if (!keys.includes(key)) {
      ret[key] = obj[key];
    }
  }
  return ret;
}
function createRouter$1(options) {
  const matcher = createRouterMatcher(options.routes, options);
  const parseQuery$1 = options.parseQuery || parseQuery;
  const stringifyQuery$1 = options.stringifyQuery || stringifyQuery;
  const routerHistory = options.history;
  const beforeGuards = useCallbacks();
  const beforeResolveGuards = useCallbacks();
  const afterGuards = useCallbacks();
  const currentRoute = shallowRef(START_LOCATION_NORMALIZED);
  let pendingLocation = START_LOCATION_NORMALIZED;
  if (isBrowser && options.scrollBehavior && "scrollRestoration" in history) {
    history.scrollRestoration = "manual";
  }
  const normalizeParams = applyToParams.bind(null, (paramValue) => "" + paramValue);
  const encodeParams = applyToParams.bind(null, encodeParam);
  const decodeParams = applyToParams.bind(null, decode$2);
  function addRoute(parentOrRoute, route2) {
    let parent;
    let record;
    if (isRouteName(parentOrRoute)) {
      parent = matcher.getRecordMatcher(parentOrRoute);
      record = route2;
    } else {
      record = parentOrRoute;
    }
    return matcher.addRoute(record, parent);
  }
  function removeRoute(name) {
    const recordMatcher = matcher.getRecordMatcher(name);
    if (recordMatcher) {
      matcher.removeRoute(recordMatcher);
    }
  }
  function getRoutes() {
    return matcher.getRoutes().map((routeMatcher) => routeMatcher.record);
  }
  function hasRoute(name) {
    return !!matcher.getRecordMatcher(name);
  }
  function resolve2(rawLocation, currentLocation) {
    currentLocation = assign$1({}, currentLocation || currentRoute.value);
    if (typeof rawLocation === "string") {
      const locationNormalized = parseURL(parseQuery$1, rawLocation, currentLocation.path);
      const matchedRoute2 = matcher.resolve({ path: locationNormalized.path }, currentLocation);
      const href2 = routerHistory.createHref(locationNormalized.fullPath);
      return assign$1(locationNormalized, matchedRoute2, {
        params: decodeParams(matchedRoute2.params),
        hash: decode$2(locationNormalized.hash),
        redirectedFrom: void 0,
        href: href2
      });
    }
    let matcherLocation;
    if ("path" in rawLocation) {
      matcherLocation = assign$1({}, rawLocation, {
        path: parseURL(parseQuery$1, rawLocation.path, currentLocation.path).path
      });
    } else {
      const targetParams = assign$1({}, rawLocation.params);
      for (const key in targetParams) {
        if (targetParams[key] == null) {
          delete targetParams[key];
        }
      }
      matcherLocation = assign$1({}, rawLocation, {
        params: encodeParams(rawLocation.params)
      });
      currentLocation.params = encodeParams(currentLocation.params);
    }
    const matchedRoute = matcher.resolve(matcherLocation, currentLocation);
    const hash = rawLocation.hash || "";
    matchedRoute.params = normalizeParams(decodeParams(matchedRoute.params));
    const fullPath = stringifyURL(stringifyQuery$1, assign$1({}, rawLocation, {
      hash: encodeHash(hash),
      path: matchedRoute.path
    }));
    const href = routerHistory.createHref(fullPath);
    return assign$1({
      fullPath,
      hash,
      query: stringifyQuery$1 === stringifyQuery ? normalizeQuery(rawLocation.query) : rawLocation.query || {}
    }, matchedRoute, {
      redirectedFrom: void 0,
      href
    });
  }
  function locationAsObject(to) {
    return typeof to === "string" ? parseURL(parseQuery$1, to, currentRoute.value.path) : assign$1({}, to);
  }
  function checkCanceledNavigation(to, from) {
    if (pendingLocation !== to) {
      return createRouterError(8, {
        from,
        to
      });
    }
  }
  function push(to) {
    return pushWithRedirect(to);
  }
  function replace(to) {
    return push(assign$1(locationAsObject(to), { replace: true }));
  }
  function handleRedirectRecord(to) {
    const lastMatched = to.matched[to.matched.length - 1];
    if (lastMatched && lastMatched.redirect) {
      const { redirect } = lastMatched;
      let newTargetLocation = typeof redirect === "function" ? redirect(to) : redirect;
      if (typeof newTargetLocation === "string") {
        newTargetLocation = newTargetLocation.includes("?") || newTargetLocation.includes("#") ? newTargetLocation = locationAsObject(newTargetLocation) : { path: newTargetLocation };
        newTargetLocation.params = {};
      }
      return assign$1({
        query: to.query,
        hash: to.hash,
        params: "path" in newTargetLocation ? {} : to.params
      }, newTargetLocation);
    }
  }
  function pushWithRedirect(to, redirectedFrom) {
    const targetLocation = pendingLocation = resolve2(to);
    const from = currentRoute.value;
    const data = to.state;
    const force = to.force;
    const replace2 = to.replace === true;
    const shouldRedirect = handleRedirectRecord(targetLocation);
    if (shouldRedirect)
      return pushWithRedirect(
        assign$1(locationAsObject(shouldRedirect), {
          state: typeof shouldRedirect === "object" ? assign$1({}, data, shouldRedirect.state) : data,
          force,
          replace: replace2
        }),
        redirectedFrom || targetLocation
      );
    const toLocation = targetLocation;
    toLocation.redirectedFrom = redirectedFrom;
    let failure;
    if (!force && isSameRouteLocation(stringifyQuery$1, from, targetLocation)) {
      failure = createRouterError(16, { to: toLocation, from });
      handleScroll(
        from,
        from,
        true,
        false
      );
    }
    return (failure ? Promise.resolve(failure) : navigate(toLocation, from)).catch((error) => isNavigationFailure(error) ? isNavigationFailure(error, 2) ? error : markAsReady(error) : triggerError(error, toLocation, from)).then((failure2) => {
      if (failure2) {
        if (isNavigationFailure(failure2, 2)) {
          return pushWithRedirect(
            assign$1({
              replace: replace2
            }, locationAsObject(failure2.to), {
              state: typeof failure2.to === "object" ? assign$1({}, data, failure2.to.state) : data,
              force
            }),
            redirectedFrom || toLocation
          );
        }
      } else {
        failure2 = finalizeNavigation(toLocation, from, true, replace2, data);
      }
      triggerAfterEach(toLocation, from, failure2);
      return failure2;
    });
  }
  function checkCanceledNavigationAndReject(to, from) {
    const error = checkCanceledNavigation(to, from);
    return error ? Promise.reject(error) : Promise.resolve();
  }
  function navigate(to, from) {
    let guards;
    const [leavingRecords, updatingRecords, enteringRecords] = extractChangingRecords(to, from);
    guards = extractComponentsGuards(leavingRecords.reverse(), "beforeRouteLeave", to, from);
    for (const record of leavingRecords) {
      record.leaveGuards.forEach((guard) => {
        guards.push(guardToPromiseFn(guard, to, from));
      });
    }
    const canceledNavigationCheck = checkCanceledNavigationAndReject.bind(null, to, from);
    guards.push(canceledNavigationCheck);
    return runGuardQueue(guards).then(() => {
      guards = [];
      for (const guard of beforeGuards.list()) {
        guards.push(guardToPromiseFn(guard, to, from));
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = extractComponentsGuards(updatingRecords, "beforeRouteUpdate", to, from);
      for (const record of updatingRecords) {
        record.updateGuards.forEach((guard) => {
          guards.push(guardToPromiseFn(guard, to, from));
        });
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = [];
      for (const record of to.matched) {
        if (record.beforeEnter && !from.matched.includes(record)) {
          if (isArray$1(record.beforeEnter)) {
            for (const beforeEnter of record.beforeEnter)
              guards.push(guardToPromiseFn(beforeEnter, to, from));
          } else {
            guards.push(guardToPromiseFn(record.beforeEnter, to, from));
          }
        }
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      to.matched.forEach((record) => record.enterCallbacks = {});
      guards = extractComponentsGuards(enteringRecords, "beforeRouteEnter", to, from);
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = [];
      for (const guard of beforeResolveGuards.list()) {
        guards.push(guardToPromiseFn(guard, to, from));
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).catch((err) => isNavigationFailure(err, 8) ? err : Promise.reject(err));
  }
  function triggerAfterEach(to, from, failure) {
    for (const guard of afterGuards.list())
      guard(to, from, failure);
  }
  function finalizeNavigation(toLocation, from, isPush, replace2, data) {
    const error = checkCanceledNavigation(toLocation, from);
    if (error)
      return error;
    const isFirstNavigation = from === START_LOCATION_NORMALIZED;
    const state = !isBrowser ? {} : history.state;
    if (isPush) {
      if (replace2 || isFirstNavigation)
        routerHistory.replace(toLocation.fullPath, assign$1({
          scroll: isFirstNavigation && state && state.scroll
        }, data));
      else
        routerHistory.push(toLocation.fullPath, data);
    }
    currentRoute.value = toLocation;
    handleScroll(toLocation, from, isPush, isFirstNavigation);
    markAsReady();
  }
  let removeHistoryListener;
  function setupListeners() {
    if (removeHistoryListener)
      return;
    removeHistoryListener = routerHistory.listen((to, _from, info) => {
      if (!router2.listening)
        return;
      const toLocation = resolve2(to);
      const shouldRedirect = handleRedirectRecord(toLocation);
      if (shouldRedirect) {
        pushWithRedirect(assign$1(shouldRedirect, { replace: true }), toLocation).catch(noop);
        return;
      }
      pendingLocation = toLocation;
      const from = currentRoute.value;
      if (isBrowser) {
        saveScrollPosition(getScrollKey(from.fullPath, info.delta), computeScrollPosition());
      }
      navigate(toLocation, from).catch((error) => {
        if (isNavigationFailure(error, 4 | 8)) {
          return error;
        }
        if (isNavigationFailure(error, 2)) {
          pushWithRedirect(
            error.to,
            toLocation
          ).then((failure) => {
            if (isNavigationFailure(failure, 4 | 16) && !info.delta && info.type === NavigationType.pop) {
              routerHistory.go(-1, false);
            }
          }).catch(noop);
          return Promise.reject();
        }
        if (info.delta) {
          routerHistory.go(-info.delta, false);
        }
        return triggerError(error, toLocation, from);
      }).then((failure) => {
        failure = failure || finalizeNavigation(
          toLocation,
          from,
          false
        );
        if (failure) {
          if (info.delta && !isNavigationFailure(failure, 8)) {
            routerHistory.go(-info.delta, false);
          } else if (info.type === NavigationType.pop && isNavigationFailure(failure, 4 | 16)) {
            routerHistory.go(-1, false);
          }
        }
        triggerAfterEach(toLocation, from, failure);
      }).catch(noop);
    });
  }
  let readyHandlers = useCallbacks();
  let errorHandlers = useCallbacks();
  let ready;
  function triggerError(error, to, from) {
    markAsReady(error);
    const list = errorHandlers.list();
    if (list.length) {
      list.forEach((handler) => handler(error, to, from));
    } else {
      console.error(error);
    }
    return Promise.reject(error);
  }
  function isReady() {
    if (ready && currentRoute.value !== START_LOCATION_NORMALIZED)
      return Promise.resolve();
    return new Promise((resolve3, reject) => {
      readyHandlers.add([resolve3, reject]);
    });
  }
  function markAsReady(err) {
    if (!ready) {
      ready = !err;
      setupListeners();
      readyHandlers.list().forEach(([resolve3, reject]) => err ? reject(err) : resolve3());
      readyHandlers.reset();
    }
    return err;
  }
  function handleScroll(to, from, isPush, isFirstNavigation) {
    const { scrollBehavior } = options;
    if (!isBrowser || !scrollBehavior)
      return Promise.resolve();
    const scrollPosition = !isPush && getSavedScrollPosition(getScrollKey(to.fullPath, 0)) || (isFirstNavigation || !isPush) && history.state && history.state.scroll || null;
    return nextTick().then(() => scrollBehavior(to, from, scrollPosition)).then((position2) => position2 && scrollToPosition(position2)).catch((err) => triggerError(err, to, from));
  }
  const go = (delta) => routerHistory.go(delta);
  let started;
  const installedApps = /* @__PURE__ */ new Set();
  const router2 = {
    currentRoute,
    listening: true,
    addRoute,
    removeRoute,
    hasRoute,
    getRoutes,
    resolve: resolve2,
    options,
    push,
    replace,
    go,
    back: () => go(-1),
    forward: () => go(1),
    beforeEach: beforeGuards.add,
    beforeResolve: beforeResolveGuards.add,
    afterEach: afterGuards.add,
    onError: errorHandlers.add,
    isReady,
    install(app2) {
      const router3 = this;
      app2.component("RouterLink", RouterLink);
      app2.component("RouterView", RouterView);
      app2.config.globalProperties.$router = router3;
      Object.defineProperty(app2.config.globalProperties, "$route", {
        enumerable: true,
        get: () => unref(currentRoute)
      });
      if (isBrowser && !started && currentRoute.value === START_LOCATION_NORMALIZED) {
        started = true;
        push(routerHistory.location).catch((err) => {
        });
      }
      const reactiveRoute = {};
      for (const key in START_LOCATION_NORMALIZED) {
        reactiveRoute[key] = computed(() => currentRoute.value[key]);
      }
      app2.provide(routerKey, router3);
      app2.provide(routeLocationKey, reactive(reactiveRoute));
      app2.provide(routerViewLocationKey, currentRoute);
      const unmountApp = app2.unmount;
      installedApps.add(app2);
      app2.unmount = function() {
        installedApps.delete(app2);
        if (installedApps.size < 1) {
          pendingLocation = START_LOCATION_NORMALIZED;
          removeHistoryListener && removeHistoryListener();
          removeHistoryListener = null;
          currentRoute.value = START_LOCATION_NORMALIZED;
          started = false;
          ready = false;
        }
        unmountApp();
      };
      if (isBrowser) {
        addDevtools(app2, router3, matcher);
      }
    }
  };
  return router2;
}
function runGuardQueue(guards) {
  return guards.reduce((promise, guard) => promise.then(() => guard()), Promise.resolve());
}
function extractChangingRecords(to, from) {
  const leavingRecords = [];
  const updatingRecords = [];
  const enteringRecords = [];
  const len = Math.max(from.matched.length, to.matched.length);
  for (let i = 0; i < len; i++) {
    const recordFrom = from.matched[i];
    if (recordFrom) {
      if (to.matched.find((record) => isSameRouteRecord$1(record, recordFrom)))
        updatingRecords.push(recordFrom);
      else
        leavingRecords.push(recordFrom);
    }
    const recordTo = to.matched[i];
    if (recordTo) {
      if (!from.matched.find((record) => isSameRouteRecord$1(record, recordTo))) {
        enteringRecords.push(recordTo);
      }
    }
  }
  return [leavingRecords, updatingRecords, enteringRecords];
}
function useRouter() {
  return inject(routerKey);
}
function useRoute() {
  return inject(routeLocationKey);
}
/*!
  * shared v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
const inBrowser = typeof window !== "undefined";
const hasSymbol = typeof Symbol === "function" && typeof Symbol.toStringTag === "symbol";
const makeSymbol = (name) => hasSymbol ? Symbol(name) : name;
const generateFormatCacheKey = (locale, key, source) => friendlyJSONstringify({ l: locale, k: key, s: source });
const friendlyJSONstringify = (json) => JSON.stringify(json).replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029").replace(/\u0027/g, "\\u0027");
const isNumber = (val) => typeof val === "number" && isFinite(val);
const isDate = (val) => toTypeString(val) === "[object Date]";
const isRegExp = (val) => toTypeString(val) === "[object RegExp]";
const isEmptyObject = (val) => isPlainObject$1(val) && Object.keys(val).length === 0;
function warn(msg, err) {
  if (typeof console !== "undefined") {
    console.warn(`[intlify] ` + msg);
    if (err) {
      console.warn(err.stack);
    }
  }
}
const assign = Object.assign;
let _globalThis;
const getGlobalThis = () => {
  return _globalThis || (_globalThis = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
};
function escapeHtml(rawText) {
  return rawText.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&apos;");
}
const hasOwnProperty = Object.prototype.hasOwnProperty;
function hasOwn$1(obj, key) {
  return hasOwnProperty.call(obj, key);
}
const isArray = Array.isArray;
const isFunction = (val) => typeof val === "function";
const isString = (val) => typeof val === "string";
const isBoolean = (val) => typeof val === "boolean";
const isObject = (val) => val !== null && typeof val === "object";
const objectToString = Object.prototype.toString;
const toTypeString = (value) => objectToString.call(value);
const isPlainObject$1 = (val) => toTypeString(val) === "[object Object]";
const toDisplayString = (val) => {
  return val == null ? "" : isArray(val) || isPlainObject$1(val) && val.toString === objectToString ? JSON.stringify(val, null, 2) : String(val);
};
function createEmitter() {
  const events = /* @__PURE__ */ new Map();
  const emitter = {
    events,
    on(event, handler) {
      const handlers = events.get(event);
      const added = handlers && handlers.push(handler);
      if (!added) {
        events.set(event, [handler]);
      }
    },
    off(event, handler) {
      const handlers = events.get(event);
      if (handlers) {
        handlers.splice(handlers.indexOf(handler) >>> 0, 1);
      }
    },
    emit(event, payload) {
      (events.get(event) || []).slice().map((handler) => handler(payload));
      (events.get("*") || []).slice().map((handler) => handler(event, payload));
    }
  };
  return emitter;
}
/*!
  * message-compiler v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
const CompileErrorCodes = {
  EXPECTED_TOKEN: 1,
  INVALID_TOKEN_IN_PLACEHOLDER: 2,
  UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER: 3,
  UNKNOWN_ESCAPE_SEQUENCE: 4,
  INVALID_UNICODE_ESCAPE_SEQUENCE: 5,
  UNBALANCED_CLOSING_BRACE: 6,
  UNTERMINATED_CLOSING_BRACE: 7,
  EMPTY_PLACEHOLDER: 8,
  NOT_ALLOW_NEST_PLACEHOLDER: 9,
  INVALID_LINKED_FORMAT: 10,
  MUST_HAVE_MESSAGES_IN_PLURAL: 11,
  UNEXPECTED_EMPTY_LINKED_MODIFIER: 12,
  UNEXPECTED_EMPTY_LINKED_KEY: 13,
  UNEXPECTED_LEXICAL_ANALYSIS: 14,
  __EXTEND_POINT__: 15
};
function createCompileError(code2, loc, options = {}) {
  const { domain, messages: messages2, args } = options;
  const msg = code2;
  const error = new SyntaxError(String(msg));
  error.code = code2;
  if (loc) {
    error.location = loc;
  }
  error.domain = domain;
  return error;
}
/*!
  * devtools-if v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
const IntlifyDevToolsHooks = {
  I18nInit: "i18n:init",
  FunctionTranslate: "function:translate"
};
/*!
  * core-base v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
const pathStateMachine = [];
pathStateMachine[0] = {
  ["w"]: [0],
  ["i"]: [3, 0],
  ["["]: [4],
  ["o"]: [7]
};
pathStateMachine[1] = {
  ["w"]: [1],
  ["."]: [2],
  ["["]: [4],
  ["o"]: [7]
};
pathStateMachine[2] = {
  ["w"]: [2],
  ["i"]: [3, 0],
  ["0"]: [3, 0]
};
pathStateMachine[3] = {
  ["i"]: [3, 0],
  ["0"]: [3, 0],
  ["w"]: [1, 1],
  ["."]: [2, 1],
  ["["]: [4, 1],
  ["o"]: [7, 1]
};
pathStateMachine[4] = {
  ["'"]: [5, 0],
  ['"']: [6, 0],
  ["["]: [
    4,
    2
  ],
  ["]"]: [1, 3],
  ["o"]: 8,
  ["l"]: [4, 0]
};
pathStateMachine[5] = {
  ["'"]: [4, 0],
  ["o"]: 8,
  ["l"]: [5, 0]
};
pathStateMachine[6] = {
  ['"']: [4, 0],
  ["o"]: 8,
  ["l"]: [6, 0]
};
const literalValueRE = /^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;
function isLiteral(exp) {
  return literalValueRE.test(exp);
}
function stripQuotes(str) {
  const a = str.charCodeAt(0);
  const b = str.charCodeAt(str.length - 1);
  return a === b && (a === 34 || a === 39) ? str.slice(1, -1) : str;
}
function getPathCharType(ch) {
  if (ch === void 0 || ch === null) {
    return "o";
  }
  const code2 = ch.charCodeAt(0);
  switch (code2) {
    case 91:
    case 93:
    case 46:
    case 34:
    case 39:
      return ch;
    case 95:
    case 36:
    case 45:
      return "i";
    case 9:
    case 10:
    case 13:
    case 160:
    case 65279:
    case 8232:
    case 8233:
      return "w";
  }
  return "i";
}
function formatSubPath(path) {
  const trimmed = path.trim();
  if (path.charAt(0) === "0" && isNaN(parseInt(path))) {
    return false;
  }
  return isLiteral(trimmed) ? stripQuotes(trimmed) : "*" + trimmed;
}
function parse(path) {
  const keys = [];
  let index = -1;
  let mode = 0;
  let subPathDepth = 0;
  let c;
  let key;
  let newChar;
  let type;
  let transition;
  let action;
  let typeMap;
  const actions = [];
  actions[0] = () => {
    if (key === void 0) {
      key = newChar;
    } else {
      key += newChar;
    }
  };
  actions[1] = () => {
    if (key !== void 0) {
      keys.push(key);
      key = void 0;
    }
  };
  actions[2] = () => {
    actions[0]();
    subPathDepth++;
  };
  actions[3] = () => {
    if (subPathDepth > 0) {
      subPathDepth--;
      mode = 4;
      actions[0]();
    } else {
      subPathDepth = 0;
      if (key === void 0) {
        return false;
      }
      key = formatSubPath(key);
      if (key === false) {
        return false;
      } else {
        actions[1]();
      }
    }
  };
  function maybeUnescapeQuote() {
    const nextChar = path[index + 1];
    if (mode === 5 && nextChar === "'" || mode === 6 && nextChar === '"') {
      index++;
      newChar = "\\" + nextChar;
      actions[0]();
      return true;
    }
  }
  while (mode !== null) {
    index++;
    c = path[index];
    if (c === "\\" && maybeUnescapeQuote()) {
      continue;
    }
    type = getPathCharType(c);
    typeMap = pathStateMachine[mode];
    transition = typeMap[type] || typeMap["l"] || 8;
    if (transition === 8) {
      return;
    }
    mode = transition[0];
    if (transition[1] !== void 0) {
      action = actions[transition[1]];
      if (action) {
        newChar = c;
        if (action() === false) {
          return;
        }
      }
    }
    if (mode === 7) {
      return keys;
    }
  }
}
const cache = /* @__PURE__ */ new Map();
function resolveWithKeyValue(obj, path) {
  return isObject(obj) ? obj[path] : null;
}
function resolveValue(obj, path) {
  if (!isObject(obj)) {
    return null;
  }
  let hit = cache.get(path);
  if (!hit) {
    hit = parse(path);
    if (hit) {
      cache.set(path, hit);
    }
  }
  if (!hit) {
    return null;
  }
  const len = hit.length;
  let last = obj;
  let i = 0;
  while (i < len) {
    const val = last[hit[i]];
    if (val === void 0) {
      return null;
    }
    last = val;
    i++;
  }
  return last;
}
const DEFAULT_MODIFIER = (str) => str;
const DEFAULT_MESSAGE = (ctx) => "";
const DEFAULT_MESSAGE_DATA_TYPE = "text";
const DEFAULT_NORMALIZE = (values) => values.length === 0 ? "" : values.join("");
const DEFAULT_INTERPOLATE = toDisplayString;
function pluralDefault(choice, choicesLength) {
  choice = Math.abs(choice);
  if (choicesLength === 2) {
    return choice ? choice > 1 ? 1 : 0 : 1;
  }
  return choice ? Math.min(choice, 2) : 0;
}
function getPluralIndex(options) {
  const index = isNumber(options.pluralIndex) ? options.pluralIndex : -1;
  return options.named && (isNumber(options.named.count) || isNumber(options.named.n)) ? isNumber(options.named.count) ? options.named.count : isNumber(options.named.n) ? options.named.n : index : index;
}
function normalizeNamed(pluralIndex, props) {
  if (!props.count) {
    props.count = pluralIndex;
  }
  if (!props.n) {
    props.n = pluralIndex;
  }
}
function createMessageContext(options = {}) {
  const locale = options.locale;
  const pluralIndex = getPluralIndex(options);
  const pluralRule = isObject(options.pluralRules) && isString(locale) && isFunction(options.pluralRules[locale]) ? options.pluralRules[locale] : pluralDefault;
  const orgPluralRule = isObject(options.pluralRules) && isString(locale) && isFunction(options.pluralRules[locale]) ? pluralDefault : void 0;
  const plural = (messages2) => {
    return messages2[pluralRule(pluralIndex, messages2.length, orgPluralRule)];
  };
  const _list = options.list || [];
  const list = (index) => _list[index];
  const _named = options.named || {};
  isNumber(options.pluralIndex) && normalizeNamed(pluralIndex, _named);
  const named = (key) => _named[key];
  function message(key) {
    const msg = isFunction(options.messages) ? options.messages(key) : isObject(options.messages) ? options.messages[key] : false;
    return !msg ? options.parent ? options.parent.message(key) : DEFAULT_MESSAGE : msg;
  }
  const _modifier = (name) => options.modifiers ? options.modifiers[name] : DEFAULT_MODIFIER;
  const normalize2 = isPlainObject$1(options.processor) && isFunction(options.processor.normalize) ? options.processor.normalize : DEFAULT_NORMALIZE;
  const interpolate = isPlainObject$1(options.processor) && isFunction(options.processor.interpolate) ? options.processor.interpolate : DEFAULT_INTERPOLATE;
  const type = isPlainObject$1(options.processor) && isString(options.processor.type) ? options.processor.type : DEFAULT_MESSAGE_DATA_TYPE;
  const linked = (key, ...args) => {
    const [arg1, arg2] = args;
    let type2 = "text";
    let modifier = "";
    if (args.length === 1) {
      if (isObject(arg1)) {
        modifier = arg1.modifier || modifier;
        type2 = arg1.type || type2;
      } else if (isString(arg1)) {
        modifier = arg1 || modifier;
      }
    } else if (args.length === 2) {
      if (isString(arg1)) {
        modifier = arg1 || modifier;
      }
      if (isString(arg2)) {
        type2 = arg2 || type2;
      }
    }
    let msg = message(key)(ctx);
    if (type2 === "vnode" && isArray(msg) && modifier) {
      msg = msg[0];
    }
    return modifier ? _modifier(modifier)(msg, type2) : msg;
  };
  const ctx = {
    ["list"]: list,
    ["named"]: named,
    ["plural"]: plural,
    ["linked"]: linked,
    ["message"]: message,
    ["type"]: type,
    ["interpolate"]: interpolate,
    ["normalize"]: normalize2
  };
  return ctx;
}
let devtools = null;
function setDevToolsHook(hook) {
  devtools = hook;
}
function initI18nDevTools(i18n2, version2, meta) {
  devtools && devtools.emit(IntlifyDevToolsHooks.I18nInit, {
    timestamp: Date.now(),
    i18n: i18n2,
    version: version2,
    meta
  });
}
const translateDevTools = /* @__PURE__ */ createDevToolsHook(IntlifyDevToolsHooks.FunctionTranslate);
function createDevToolsHook(hook) {
  return (payloads) => devtools && devtools.emit(hook, payloads);
}
const CoreWarnCodes = {
  NOT_FOUND_KEY: 1,
  FALLBACK_TO_TRANSLATE: 2,
  CANNOT_FORMAT_NUMBER: 3,
  FALLBACK_TO_NUMBER_FORMAT: 4,
  CANNOT_FORMAT_DATE: 5,
  FALLBACK_TO_DATE_FORMAT: 6,
  __EXTEND_POINT__: 7
};
function fallbackWithSimple(ctx, fallback, start2) {
  return [.../* @__PURE__ */ new Set([
    start2,
    ...isArray(fallback) ? fallback : isObject(fallback) ? Object.keys(fallback) : isString(fallback) ? [fallback] : [start2]
  ])];
}
function fallbackWithLocaleChain(ctx, fallback, start2) {
  const startLocale = isString(start2) ? start2 : DEFAULT_LOCALE;
  const context = ctx;
  if (!context.__localeChainCache) {
    context.__localeChainCache = /* @__PURE__ */ new Map();
  }
  let chain = context.__localeChainCache.get(startLocale);
  if (!chain) {
    chain = [];
    let block = [start2];
    while (isArray(block)) {
      block = appendBlockToChain(chain, block, fallback);
    }
    const defaults2 = isArray(fallback) || !isPlainObject$1(fallback) ? fallback : fallback["default"] ? fallback["default"] : null;
    block = isString(defaults2) ? [defaults2] : defaults2;
    if (isArray(block)) {
      appendBlockToChain(chain, block, false);
    }
    context.__localeChainCache.set(startLocale, chain);
  }
  return chain;
}
function appendBlockToChain(chain, block, blocks) {
  let follow = true;
  for (let i = 0; i < block.length && isBoolean(follow); i++) {
    const locale = block[i];
    if (isString(locale)) {
      follow = appendLocaleToChain(chain, block[i], blocks);
    }
  }
  return follow;
}
function appendLocaleToChain(chain, locale, blocks) {
  let follow;
  const tokens = locale.split("-");
  do {
    const target2 = tokens.join("-");
    follow = appendItemToChain(chain, target2, blocks);
    tokens.splice(-1, 1);
  } while (tokens.length && follow === true);
  return follow;
}
function appendItemToChain(chain, target2, blocks) {
  let follow = false;
  if (!chain.includes(target2)) {
    follow = true;
    if (target2) {
      follow = target2[target2.length - 1] !== "!";
      const locale = target2.replace(/!/g, "");
      chain.push(locale);
      if ((isArray(blocks) || isPlainObject$1(blocks)) && blocks[locale]) {
        follow = blocks[locale];
      }
    }
  }
  return follow;
}
const VERSION$1 = "9.2.2";
const NOT_REOSLVED = -1;
const DEFAULT_LOCALE = "en-US";
const MISSING_RESOLVE_VALUE = "";
const capitalize = (str) => `${str.charAt(0).toLocaleUpperCase()}${str.substr(1)}`;
function getDefaultLinkedModifiers() {
  return {
    upper: (val, type) => {
      return type === "text" && isString(val) ? val.toUpperCase() : type === "vnode" && isObject(val) && "__v_isVNode" in val ? val.children.toUpperCase() : val;
    },
    lower: (val, type) => {
      return type === "text" && isString(val) ? val.toLowerCase() : type === "vnode" && isObject(val) && "__v_isVNode" in val ? val.children.toLowerCase() : val;
    },
    capitalize: (val, type) => {
      return type === "text" && isString(val) ? capitalize(val) : type === "vnode" && isObject(val) && "__v_isVNode" in val ? capitalize(val.children) : val;
    }
  };
}
let _compiler;
let _resolver;
function registerMessageResolver(resolver) {
  _resolver = resolver;
}
let _fallbacker;
function registerLocaleFallbacker(fallbacker) {
  _fallbacker = fallbacker;
}
let _additionalMeta = null;
const setAdditionalMeta = (meta) => {
  _additionalMeta = meta;
};
const getAdditionalMeta = () => _additionalMeta;
let _fallbackContext = null;
const setFallbackContext = (context) => {
  _fallbackContext = context;
};
const getFallbackContext = () => _fallbackContext;
let _cid = 0;
function createCoreContext(options = {}) {
  const version2 = isString(options.version) ? options.version : VERSION$1;
  const locale = isString(options.locale) ? options.locale : DEFAULT_LOCALE;
  const fallbackLocale = isArray(options.fallbackLocale) || isPlainObject$1(options.fallbackLocale) || isString(options.fallbackLocale) || options.fallbackLocale === false ? options.fallbackLocale : locale;
  const messages2 = isPlainObject$1(options.messages) ? options.messages : { [locale]: {} };
  const datetimeFormats = isPlainObject$1(options.datetimeFormats) ? options.datetimeFormats : { [locale]: {} };
  const numberFormats = isPlainObject$1(options.numberFormats) ? options.numberFormats : { [locale]: {} };
  const modifiers = assign({}, options.modifiers || {}, getDefaultLinkedModifiers());
  const pluralRules = options.pluralRules || {};
  const missing = isFunction(options.missing) ? options.missing : null;
  const missingWarn = isBoolean(options.missingWarn) || isRegExp(options.missingWarn) ? options.missingWarn : true;
  const fallbackWarn = isBoolean(options.fallbackWarn) || isRegExp(options.fallbackWarn) ? options.fallbackWarn : true;
  const fallbackFormat = !!options.fallbackFormat;
  const unresolving = !!options.unresolving;
  const postTranslation = isFunction(options.postTranslation) ? options.postTranslation : null;
  const processor = isPlainObject$1(options.processor) ? options.processor : null;
  const warnHtmlMessage = isBoolean(options.warnHtmlMessage) ? options.warnHtmlMessage : true;
  const escapeParameter = !!options.escapeParameter;
  const messageCompiler = isFunction(options.messageCompiler) ? options.messageCompiler : _compiler;
  const messageResolver = isFunction(options.messageResolver) ? options.messageResolver : _resolver || resolveWithKeyValue;
  const localeFallbacker = isFunction(options.localeFallbacker) ? options.localeFallbacker : _fallbacker || fallbackWithSimple;
  const fallbackContext = isObject(options.fallbackContext) ? options.fallbackContext : void 0;
  const onWarn = isFunction(options.onWarn) ? options.onWarn : warn;
  const internalOptions = options;
  const __datetimeFormatters = isObject(internalOptions.__datetimeFormatters) ? internalOptions.__datetimeFormatters : /* @__PURE__ */ new Map();
  const __numberFormatters = isObject(internalOptions.__numberFormatters) ? internalOptions.__numberFormatters : /* @__PURE__ */ new Map();
  const __meta = isObject(internalOptions.__meta) ? internalOptions.__meta : {};
  _cid++;
  const context = {
    version: version2,
    cid: _cid,
    locale,
    fallbackLocale,
    messages: messages2,
    modifiers,
    pluralRules,
    missing,
    missingWarn,
    fallbackWarn,
    fallbackFormat,
    unresolving,
    postTranslation,
    processor,
    warnHtmlMessage,
    escapeParameter,
    messageCompiler,
    messageResolver,
    localeFallbacker,
    fallbackContext,
    onWarn,
    __meta
  };
  {
    context.datetimeFormats = datetimeFormats;
    context.numberFormats = numberFormats;
    context.__datetimeFormatters = __datetimeFormatters;
    context.__numberFormatters = __numberFormatters;
  }
  {
    initI18nDevTools(context, version2, __meta);
  }
  return context;
}
function handleMissing(context, key, locale, missingWarn, type) {
  const { missing, onWarn } = context;
  if (missing !== null) {
    const ret = missing(context, locale, key, type);
    return isString(ret) ? ret : key;
  } else {
    return key;
  }
}
function updateFallbackLocale(ctx, locale, fallback) {
  const context = ctx;
  context.__localeChainCache = /* @__PURE__ */ new Map();
  ctx.localeFallbacker(ctx, fallback, locale);
}
let code$1 = CompileErrorCodes.__EXTEND_POINT__;
const inc$2 = () => ++code$1;
const CoreErrorCodes = {
  INVALID_ARGUMENT: code$1,
  INVALID_DATE_ARGUMENT: inc$2(),
  INVALID_ISO_DATE_ARGUMENT: inc$2(),
  __EXTEND_POINT__: inc$2()
};
function createCoreError(code2) {
  return createCompileError(code2, null, void 0);
}
const NOOP_MESSAGE_FUNCTION = () => "";
const isMessageFunction = (val) => isFunction(val);
function translate$1(context, ...args) {
  const { fallbackFormat, postTranslation, unresolving, messageCompiler, fallbackLocale, messages: messages2 } = context;
  const [key, options] = parseTranslateArgs(...args);
  const missingWarn = isBoolean(options.missingWarn) ? options.missingWarn : context.missingWarn;
  const fallbackWarn = isBoolean(options.fallbackWarn) ? options.fallbackWarn : context.fallbackWarn;
  const escapeParameter = isBoolean(options.escapeParameter) ? options.escapeParameter : context.escapeParameter;
  const resolvedMessage = !!options.resolvedMessage;
  const defaultMsgOrKey = isString(options.default) || isBoolean(options.default) ? !isBoolean(options.default) ? options.default : !messageCompiler ? () => key : key : fallbackFormat ? !messageCompiler ? () => key : key : "";
  const enableDefaultMsg = fallbackFormat || defaultMsgOrKey !== "";
  const locale = isString(options.locale) ? options.locale : context.locale;
  escapeParameter && escapeParams(options);
  let [formatScope, targetLocale, message] = !resolvedMessage ? resolveMessageFormat(context, key, locale, fallbackLocale, fallbackWarn, missingWarn) : [
    key,
    locale,
    messages2[locale] || {}
  ];
  let format = formatScope;
  let cacheBaseKey = key;
  if (!resolvedMessage && !(isString(format) || isMessageFunction(format))) {
    if (enableDefaultMsg) {
      format = defaultMsgOrKey;
      cacheBaseKey = format;
    }
  }
  if (!resolvedMessage && (!(isString(format) || isMessageFunction(format)) || !isString(targetLocale))) {
    return unresolving ? NOT_REOSLVED : key;
  }
  let occurred = false;
  const errorDetector = () => {
    occurred = true;
  };
  const msg = !isMessageFunction(format) ? compileMessageFormat(context, key, targetLocale, format, cacheBaseKey, errorDetector) : format;
  if (occurred) {
    return format;
  }
  const ctxOptions = getMessageContextOptions(context, targetLocale, message, options);
  const msgContext = createMessageContext(ctxOptions);
  const messaged = evaluateMessage(context, msg, msgContext);
  const ret = postTranslation ? postTranslation(messaged, key) : messaged;
  {
    const payloads = {
      timestamp: Date.now(),
      key: isString(key) ? key : isMessageFunction(format) ? format.key : "",
      locale: targetLocale || (isMessageFunction(format) ? format.locale : ""),
      format: isString(format) ? format : isMessageFunction(format) ? format.source : "",
      message: ret
    };
    payloads.meta = assign({}, context.__meta, getAdditionalMeta() || {});
    translateDevTools(payloads);
  }
  return ret;
}
function escapeParams(options) {
  if (isArray(options.list)) {
    options.list = options.list.map((item) => isString(item) ? escapeHtml(item) : item);
  } else if (isObject(options.named)) {
    Object.keys(options.named).forEach((key) => {
      if (isString(options.named[key])) {
        options.named[key] = escapeHtml(options.named[key]);
      }
    });
  }
}
function resolveMessageFormat(context, key, locale, fallbackLocale, fallbackWarn, missingWarn) {
  const { messages: messages2, onWarn, messageResolver: resolveValue2, localeFallbacker } = context;
  const locales = localeFallbacker(context, fallbackLocale, locale);
  let message = {};
  let targetLocale;
  let format = null;
  const type = "translate";
  for (let i = 0; i < locales.length; i++) {
    targetLocale = locales[i];
    message = messages2[targetLocale] || {};
    if ((format = resolveValue2(message, key)) === null) {
      format = message[key];
    }
    if (isString(format) || isFunction(format))
      break;
    const missingRet = handleMissing(
      context,
      key,
      targetLocale,
      missingWarn,
      type
    );
    if (missingRet !== key) {
      format = missingRet;
    }
  }
  return [format, targetLocale, message];
}
function compileMessageFormat(context, key, targetLocale, format, cacheBaseKey, errorDetector) {
  const { messageCompiler, warnHtmlMessage } = context;
  if (isMessageFunction(format)) {
    const msg2 = format;
    msg2.locale = msg2.locale || targetLocale;
    msg2.key = msg2.key || key;
    return msg2;
  }
  if (messageCompiler == null) {
    const msg2 = () => format;
    msg2.locale = targetLocale;
    msg2.key = key;
    return msg2;
  }
  const msg = messageCompiler(format, getCompileOptions(context, targetLocale, cacheBaseKey, format, warnHtmlMessage, errorDetector));
  msg.locale = targetLocale;
  msg.key = key;
  msg.source = format;
  return msg;
}
function evaluateMessage(context, msg, msgCtx) {
  const messaged = msg(msgCtx);
  return messaged;
}
function parseTranslateArgs(...args) {
  const [arg1, arg2, arg3] = args;
  const options = {};
  if (!isString(arg1) && !isNumber(arg1) && !isMessageFunction(arg1)) {
    throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);
  }
  const key = isNumber(arg1) ? String(arg1) : isMessageFunction(arg1) ? arg1 : arg1;
  if (isNumber(arg2)) {
    options.plural = arg2;
  } else if (isString(arg2)) {
    options.default = arg2;
  } else if (isPlainObject$1(arg2) && !isEmptyObject(arg2)) {
    options.named = arg2;
  } else if (isArray(arg2)) {
    options.list = arg2;
  }
  if (isNumber(arg3)) {
    options.plural = arg3;
  } else if (isString(arg3)) {
    options.default = arg3;
  } else if (isPlainObject$1(arg3)) {
    assign(options, arg3);
  }
  return [key, options];
}
function getCompileOptions(context, locale, key, source, warnHtmlMessage, errorDetector) {
  return {
    warnHtmlMessage,
    onError: (err) => {
      errorDetector && errorDetector(err);
      {
        throw err;
      }
    },
    onCacheKey: (source2) => generateFormatCacheKey(locale, key, source2)
  };
}
function getMessageContextOptions(context, locale, message, options) {
  const { modifiers, pluralRules, messageResolver: resolveValue2, fallbackLocale, fallbackWarn, missingWarn, fallbackContext } = context;
  const resolveMessage = (key) => {
    let val = resolveValue2(message, key);
    if (val == null && fallbackContext) {
      const [, , message2] = resolveMessageFormat(fallbackContext, key, locale, fallbackLocale, fallbackWarn, missingWarn);
      val = resolveValue2(message2, key);
    }
    if (isString(val)) {
      let occurred = false;
      const errorDetector = () => {
        occurred = true;
      };
      const msg = compileMessageFormat(context, key, locale, val, key, errorDetector);
      return !occurred ? msg : NOOP_MESSAGE_FUNCTION;
    } else if (isMessageFunction(val)) {
      return val;
    } else {
      return NOOP_MESSAGE_FUNCTION;
    }
  };
  const ctxOptions = {
    locale,
    modifiers,
    pluralRules,
    messages: resolveMessage
  };
  if (context.processor) {
    ctxOptions.processor = context.processor;
  }
  if (options.list) {
    ctxOptions.list = options.list;
  }
  if (options.named) {
    ctxOptions.named = options.named;
  }
  if (isNumber(options.plural)) {
    ctxOptions.pluralIndex = options.plural;
  }
  return ctxOptions;
}
function datetime(context, ...args) {
  const { datetimeFormats, unresolving, fallbackLocale, onWarn, localeFallbacker } = context;
  const { __datetimeFormatters } = context;
  const [key, value, options, overrides] = parseDateTimeArgs(...args);
  const missingWarn = isBoolean(options.missingWarn) ? options.missingWarn : context.missingWarn;
  isBoolean(options.fallbackWarn) ? options.fallbackWarn : context.fallbackWarn;
  const part = !!options.part;
  const locale = isString(options.locale) ? options.locale : context.locale;
  const locales = localeFallbacker(
    context,
    fallbackLocale,
    locale
  );
  if (!isString(key) || key === "") {
    return new Intl.DateTimeFormat(locale, overrides).format(value);
  }
  let datetimeFormat = {};
  let targetLocale;
  let format = null;
  const type = "datetime format";
  for (let i = 0; i < locales.length; i++) {
    targetLocale = locales[i];
    datetimeFormat = datetimeFormats[targetLocale] || {};
    format = datetimeFormat[key];
    if (isPlainObject$1(format))
      break;
    handleMissing(context, key, targetLocale, missingWarn, type);
  }
  if (!isPlainObject$1(format) || !isString(targetLocale)) {
    return unresolving ? NOT_REOSLVED : key;
  }
  let id = `${targetLocale}__${key}`;
  if (!isEmptyObject(overrides)) {
    id = `${id}__${JSON.stringify(overrides)}`;
  }
  let formatter = __datetimeFormatters.get(id);
  if (!formatter) {
    formatter = new Intl.DateTimeFormat(targetLocale, assign({}, format, overrides));
    __datetimeFormatters.set(id, formatter);
  }
  return !part ? formatter.format(value) : formatter.formatToParts(value);
}
const DATETIME_FORMAT_OPTIONS_KEYS = [
  "localeMatcher",
  "weekday",
  "era",
  "year",
  "month",
  "day",
  "hour",
  "minute",
  "second",
  "timeZoneName",
  "formatMatcher",
  "hour12",
  "timeZone",
  "dateStyle",
  "timeStyle",
  "calendar",
  "dayPeriod",
  "numberingSystem",
  "hourCycle",
  "fractionalSecondDigits"
];
function parseDateTimeArgs(...args) {
  const [arg1, arg2, arg3, arg4] = args;
  const options = {};
  let overrides = {};
  let value;
  if (isString(arg1)) {
    const matches = arg1.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);
    if (!matches) {
      throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);
    }
    const dateTime = matches[3] ? matches[3].trim().startsWith("T") ? `${matches[1].trim()}${matches[3].trim()}` : `${matches[1].trim()}T${matches[3].trim()}` : matches[1].trim();
    value = new Date(dateTime);
    try {
      value.toISOString();
    } catch (e) {
      throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);
    }
  } else if (isDate(arg1)) {
    if (isNaN(arg1.getTime())) {
      throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);
    }
    value = arg1;
  } else if (isNumber(arg1)) {
    value = arg1;
  } else {
    throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);
  }
  if (isString(arg2)) {
    options.key = arg2;
  } else if (isPlainObject$1(arg2)) {
    Object.keys(arg2).forEach((key) => {
      if (DATETIME_FORMAT_OPTIONS_KEYS.includes(key)) {
        overrides[key] = arg2[key];
      } else {
        options[key] = arg2[key];
      }
    });
  }
  if (isString(arg3)) {
    options.locale = arg3;
  } else if (isPlainObject$1(arg3)) {
    overrides = arg3;
  }
  if (isPlainObject$1(arg4)) {
    overrides = arg4;
  }
  return [options.key || "", value, options, overrides];
}
function clearDateTimeFormat(ctx, locale, format) {
  const context = ctx;
  for (const key in format) {
    const id = `${locale}__${key}`;
    if (!context.__datetimeFormatters.has(id)) {
      continue;
    }
    context.__datetimeFormatters.delete(id);
  }
}
function number(context, ...args) {
  const { numberFormats, unresolving, fallbackLocale, onWarn, localeFallbacker } = context;
  const { __numberFormatters } = context;
  const [key, value, options, overrides] = parseNumberArgs(...args);
  const missingWarn = isBoolean(options.missingWarn) ? options.missingWarn : context.missingWarn;
  isBoolean(options.fallbackWarn) ? options.fallbackWarn : context.fallbackWarn;
  const part = !!options.part;
  const locale = isString(options.locale) ? options.locale : context.locale;
  const locales = localeFallbacker(
    context,
    fallbackLocale,
    locale
  );
  if (!isString(key) || key === "") {
    return new Intl.NumberFormat(locale, overrides).format(value);
  }
  let numberFormat = {};
  let targetLocale;
  let format = null;
  const type = "number format";
  for (let i = 0; i < locales.length; i++) {
    targetLocale = locales[i];
    numberFormat = numberFormats[targetLocale] || {};
    format = numberFormat[key];
    if (isPlainObject$1(format))
      break;
    handleMissing(context, key, targetLocale, missingWarn, type);
  }
  if (!isPlainObject$1(format) || !isString(targetLocale)) {
    return unresolving ? NOT_REOSLVED : key;
  }
  let id = `${targetLocale}__${key}`;
  if (!isEmptyObject(overrides)) {
    id = `${id}__${JSON.stringify(overrides)}`;
  }
  let formatter = __numberFormatters.get(id);
  if (!formatter) {
    formatter = new Intl.NumberFormat(targetLocale, assign({}, format, overrides));
    __numberFormatters.set(id, formatter);
  }
  return !part ? formatter.format(value) : formatter.formatToParts(value);
}
const NUMBER_FORMAT_OPTIONS_KEYS = [
  "localeMatcher",
  "style",
  "currency",
  "currencyDisplay",
  "currencySign",
  "useGrouping",
  "minimumIntegerDigits",
  "minimumFractionDigits",
  "maximumFractionDigits",
  "minimumSignificantDigits",
  "maximumSignificantDigits",
  "compactDisplay",
  "notation",
  "signDisplay",
  "unit",
  "unitDisplay",
  "roundingMode",
  "roundingPriority",
  "roundingIncrement",
  "trailingZeroDisplay"
];
function parseNumberArgs(...args) {
  const [arg1, arg2, arg3, arg4] = args;
  const options = {};
  let overrides = {};
  if (!isNumber(arg1)) {
    throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);
  }
  const value = arg1;
  if (isString(arg2)) {
    options.key = arg2;
  } else if (isPlainObject$1(arg2)) {
    Object.keys(arg2).forEach((key) => {
      if (NUMBER_FORMAT_OPTIONS_KEYS.includes(key)) {
        overrides[key] = arg2[key];
      } else {
        options[key] = arg2[key];
      }
    });
  }
  if (isString(arg3)) {
    options.locale = arg3;
  } else if (isPlainObject$1(arg3)) {
    overrides = arg3;
  }
  if (isPlainObject$1(arg4)) {
    overrides = arg4;
  }
  return [options.key || "", value, options, overrides];
}
function clearNumberFormat(ctx, locale, format) {
  const context = ctx;
  for (const key in format) {
    const id = `${locale}__${key}`;
    if (!context.__numberFormatters.has(id)) {
      continue;
    }
    context.__numberFormatters.delete(id);
  }
}
/*!
  * vue-devtools v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
const VueDevToolsLabels = {
  ["vue-devtools-plugin-vue-i18n"]: "Vue I18n devtools",
  ["vue-i18n-resource-inspector"]: "I18n Resources",
  ["vue-i18n-timeline"]: "Vue I18n"
};
const VueDevToolsPlaceholders = {
  ["vue-i18n-resource-inspector"]: "Search for scopes ..."
};
const VueDevToolsTimelineColors = {
  ["vue-i18n-timeline"]: 16764185
};
/*!
  * vue-i18n v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
const VERSION = "9.2.2";
CoreWarnCodes.__EXTEND_POINT__;
let code = CompileErrorCodes.__EXTEND_POINT__;
const inc$1 = () => ++code;
const I18nErrorCodes = {
  UNEXPECTED_RETURN_TYPE: code,
  INVALID_ARGUMENT: inc$1(),
  MUST_BE_CALL_SETUP_TOP: inc$1(),
  NOT_INSLALLED: inc$1(),
  NOT_AVAILABLE_IN_LEGACY_MODE: inc$1(),
  REQUIRED_VALUE: inc$1(),
  INVALID_VALUE: inc$1(),
  CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN: inc$1(),
  NOT_INSLALLED_WITH_PROVIDE: inc$1(),
  UNEXPECTED_ERROR: inc$1(),
  NOT_COMPATIBLE_LEGACY_VUE_I18N: inc$1(),
  BRIDGE_SUPPORT_VUE_2_ONLY: inc$1(),
  MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION: inc$1(),
  NOT_AVAILABLE_COMPOSITION_IN_LEGACY: inc$1(),
  __EXTEND_POINT__: inc$1()
};
function createI18nError(code2, ...args) {
  return createCompileError(code2, null, void 0);
}
const TransrateVNodeSymbol = /* @__PURE__ */ makeSymbol("__transrateVNode");
const DatetimePartsSymbol = /* @__PURE__ */ makeSymbol("__datetimeParts");
const NumberPartsSymbol = /* @__PURE__ */ makeSymbol("__numberParts");
const EnableEmitter = /* @__PURE__ */ makeSymbol("__enableEmitter");
const DisableEmitter = /* @__PURE__ */ makeSymbol("__disableEmitter");
const SetPluralRulesSymbol = makeSymbol("__setPluralRules");
makeSymbol("__intlifyMeta");
const InejctWithOption = /* @__PURE__ */ makeSymbol("__injectWithOption");
function handleFlatJson(obj) {
  if (!isObject(obj)) {
    return obj;
  }
  for (const key in obj) {
    if (!hasOwn$1(obj, key)) {
      continue;
    }
    if (!key.includes(".")) {
      if (isObject(obj[key])) {
        handleFlatJson(obj[key]);
      }
    } else {
      const subKeys = key.split(".");
      const lastIndex = subKeys.length - 1;
      let currentObj = obj;
      for (let i = 0; i < lastIndex; i++) {
        if (!(subKeys[i] in currentObj)) {
          currentObj[subKeys[i]] = {};
        }
        currentObj = currentObj[subKeys[i]];
      }
      currentObj[subKeys[lastIndex]] = obj[key];
      delete obj[key];
      if (isObject(currentObj[subKeys[lastIndex]])) {
        handleFlatJson(currentObj[subKeys[lastIndex]]);
      }
    }
  }
  return obj;
}
function getLocaleMessages(locale, options) {
  const { messages: messages2, __i18n, messageResolver, flatJson } = options;
  const ret = isPlainObject$1(messages2) ? messages2 : isArray(__i18n) ? {} : { [locale]: {} };
  if (isArray(__i18n)) {
    __i18n.forEach((custom) => {
      if ("locale" in custom && "resource" in custom) {
        const { locale: locale2, resource } = custom;
        if (locale2) {
          ret[locale2] = ret[locale2] || {};
          deepCopy(resource, ret[locale2]);
        } else {
          deepCopy(resource, ret);
        }
      } else {
        isString(custom) && deepCopy(JSON.parse(custom), ret);
      }
    });
  }
  if (messageResolver == null && flatJson) {
    for (const key in ret) {
      if (hasOwn$1(ret, key)) {
        handleFlatJson(ret[key]);
      }
    }
  }
  return ret;
}
const isNotObjectOrIsArray = (val) => !isObject(val) || isArray(val);
function deepCopy(src, des) {
  if (isNotObjectOrIsArray(src) || isNotObjectOrIsArray(des)) {
    throw createI18nError(I18nErrorCodes.INVALID_VALUE);
  }
  for (const key in src) {
    if (hasOwn$1(src, key)) {
      if (isNotObjectOrIsArray(src[key]) || isNotObjectOrIsArray(des[key])) {
        des[key] = src[key];
      } else {
        deepCopy(src[key], des[key]);
      }
    }
  }
}
function getComponentOptions(instance) {
  return instance.type;
}
function adjustI18nResources(global2, options, componentOptions) {
  let messages2 = isObject(options.messages) ? options.messages : {};
  if ("__i18nGlobal" in componentOptions) {
    messages2 = getLocaleMessages(global2.locale.value, {
      messages: messages2,
      __i18n: componentOptions.__i18nGlobal
    });
  }
  const locales = Object.keys(messages2);
  if (locales.length) {
    locales.forEach((locale) => {
      global2.mergeLocaleMessage(locale, messages2[locale]);
    });
  }
  {
    if (isObject(options.datetimeFormats)) {
      const locales2 = Object.keys(options.datetimeFormats);
      if (locales2.length) {
        locales2.forEach((locale) => {
          global2.mergeDateTimeFormat(locale, options.datetimeFormats[locale]);
        });
      }
    }
    if (isObject(options.numberFormats)) {
      const locales2 = Object.keys(options.numberFormats);
      if (locales2.length) {
        locales2.forEach((locale) => {
          global2.mergeNumberFormat(locale, options.numberFormats[locale]);
        });
      }
    }
  }
}
function createTextNode(key) {
  return createVNode(Text, null, key, 0);
}
const DEVTOOLS_META = "__INTLIFY_META__";
let composerID = 0;
function defineCoreMissingHandler(missing) {
  return (ctx, locale, key, type) => {
    return missing(locale, key, getCurrentInstance() || void 0, type);
  };
}
const getMetaInfo = () => {
  const instance = getCurrentInstance();
  let meta = null;
  return instance && (meta = getComponentOptions(instance)[DEVTOOLS_META]) ? { [DEVTOOLS_META]: meta } : null;
};
function createComposer(options = {}, VueI18nLegacy) {
  const { __root } = options;
  const _isGlobal = __root === void 0;
  let _inheritLocale = isBoolean(options.inheritLocale) ? options.inheritLocale : true;
  const _locale = ref(
    __root && _inheritLocale ? __root.locale.value : isString(options.locale) ? options.locale : DEFAULT_LOCALE
  );
  const _fallbackLocale = ref(
    __root && _inheritLocale ? __root.fallbackLocale.value : isString(options.fallbackLocale) || isArray(options.fallbackLocale) || isPlainObject$1(options.fallbackLocale) || options.fallbackLocale === false ? options.fallbackLocale : _locale.value
  );
  const _messages = ref(getLocaleMessages(_locale.value, options));
  const _datetimeFormats = ref(isPlainObject$1(options.datetimeFormats) ? options.datetimeFormats : { [_locale.value]: {} });
  const _numberFormats = ref(isPlainObject$1(options.numberFormats) ? options.numberFormats : { [_locale.value]: {} });
  let _missingWarn = __root ? __root.missingWarn : isBoolean(options.missingWarn) || isRegExp(options.missingWarn) ? options.missingWarn : true;
  let _fallbackWarn = __root ? __root.fallbackWarn : isBoolean(options.fallbackWarn) || isRegExp(options.fallbackWarn) ? options.fallbackWarn : true;
  let _fallbackRoot = __root ? __root.fallbackRoot : isBoolean(options.fallbackRoot) ? options.fallbackRoot : true;
  let _fallbackFormat = !!options.fallbackFormat;
  let _missing = isFunction(options.missing) ? options.missing : null;
  let _runtimeMissing = isFunction(options.missing) ? defineCoreMissingHandler(options.missing) : null;
  let _postTranslation = isFunction(options.postTranslation) ? options.postTranslation : null;
  let _warnHtmlMessage = __root ? __root.warnHtmlMessage : isBoolean(options.warnHtmlMessage) ? options.warnHtmlMessage : true;
  let _escapeParameter = !!options.escapeParameter;
  const _modifiers = __root ? __root.modifiers : isPlainObject$1(options.modifiers) ? options.modifiers : {};
  let _pluralRules = options.pluralRules || __root && __root.pluralRules;
  let _context;
  const getCoreContext = () => {
    _isGlobal && setFallbackContext(null);
    const ctxOptions = {
      version: VERSION,
      locale: _locale.value,
      fallbackLocale: _fallbackLocale.value,
      messages: _messages.value,
      modifiers: _modifiers,
      pluralRules: _pluralRules,
      missing: _runtimeMissing === null ? void 0 : _runtimeMissing,
      missingWarn: _missingWarn,
      fallbackWarn: _fallbackWarn,
      fallbackFormat: _fallbackFormat,
      unresolving: true,
      postTranslation: _postTranslation === null ? void 0 : _postTranslation,
      warnHtmlMessage: _warnHtmlMessage,
      escapeParameter: _escapeParameter,
      messageResolver: options.messageResolver,
      __meta: { framework: "vue" }
    };
    {
      ctxOptions.datetimeFormats = _datetimeFormats.value;
      ctxOptions.numberFormats = _numberFormats.value;
      ctxOptions.__datetimeFormatters = isPlainObject$1(_context) ? _context.__datetimeFormatters : void 0;
      ctxOptions.__numberFormatters = isPlainObject$1(_context) ? _context.__numberFormatters : void 0;
    }
    const ctx = createCoreContext(ctxOptions);
    _isGlobal && setFallbackContext(ctx);
    return ctx;
  };
  _context = getCoreContext();
  updateFallbackLocale(_context, _locale.value, _fallbackLocale.value);
  function trackReactivityValues() {
    return [
      _locale.value,
      _fallbackLocale.value,
      _messages.value,
      _datetimeFormats.value,
      _numberFormats.value
    ];
  }
  const locale = computed({
    get: () => _locale.value,
    set: (val) => {
      _locale.value = val;
      _context.locale = _locale.value;
    }
  });
  const fallbackLocale = computed({
    get: () => _fallbackLocale.value,
    set: (val) => {
      _fallbackLocale.value = val;
      _context.fallbackLocale = _fallbackLocale.value;
      updateFallbackLocale(_context, _locale.value, val);
    }
  });
  const messages2 = computed(() => _messages.value);
  const datetimeFormats = /* @__PURE__ */ computed(() => _datetimeFormats.value);
  const numberFormats = /* @__PURE__ */ computed(() => _numberFormats.value);
  function getPostTranslationHandler() {
    return isFunction(_postTranslation) ? _postTranslation : null;
  }
  function setPostTranslationHandler(handler) {
    _postTranslation = handler;
    _context.postTranslation = handler;
  }
  function getMissingHandler() {
    return _missing;
  }
  function setMissingHandler(handler) {
    if (handler !== null) {
      _runtimeMissing = defineCoreMissingHandler(handler);
    }
    _missing = handler;
    _context.missing = _runtimeMissing;
  }
  const wrapWithDeps = (fn, argumentParser, warnType, fallbackSuccess, fallbackFail, successCondition) => {
    trackReactivityValues();
    let ret;
    {
      try {
        setAdditionalMeta(getMetaInfo());
        if (!_isGlobal) {
          _context.fallbackContext = __root ? getFallbackContext() : void 0;
        }
        ret = fn(_context);
      } finally {
        setAdditionalMeta(null);
        if (!_isGlobal) {
          _context.fallbackContext = void 0;
        }
      }
    }
    if (isNumber(ret) && ret === NOT_REOSLVED) {
      const [key, arg2] = argumentParser();
      return __root && _fallbackRoot ? fallbackSuccess(__root) : fallbackFail(key);
    } else if (successCondition(ret)) {
      return ret;
    } else {
      throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE);
    }
  };
  function t2(...args) {
    return wrapWithDeps((context) => Reflect.apply(translate$1, null, [context, ...args]), () => parseTranslateArgs(...args), "translate", (root) => Reflect.apply(root.t, root, [...args]), (key) => key, (val) => isString(val));
  }
  function rt(...args) {
    const [arg1, arg2, arg3] = args;
    if (arg3 && !isObject(arg3)) {
      throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);
    }
    return t2(...[arg1, arg2, assign({ resolvedMessage: true }, arg3 || {})]);
  }
  function d(...args) {
    return wrapWithDeps((context) => Reflect.apply(datetime, null, [context, ...args]), () => parseDateTimeArgs(...args), "datetime format", (root) => Reflect.apply(root.d, root, [...args]), () => MISSING_RESOLVE_VALUE, (val) => isString(val));
  }
  function n(...args) {
    return wrapWithDeps((context) => Reflect.apply(number, null, [context, ...args]), () => parseNumberArgs(...args), "number format", (root) => Reflect.apply(root.n, root, [...args]), () => MISSING_RESOLVE_VALUE, (val) => isString(val));
  }
  function normalize2(values) {
    return values.map((val) => isString(val) || isNumber(val) || isBoolean(val) ? createTextNode(String(val)) : val);
  }
  const interpolate = (val) => val;
  const processor = {
    normalize: normalize2,
    interpolate,
    type: "vnode"
  };
  function transrateVNode(...args) {
    return wrapWithDeps(
      (context) => {
        let ret;
        const _context2 = context;
        try {
          _context2.processor = processor;
          ret = Reflect.apply(translate$1, null, [_context2, ...args]);
        } finally {
          _context2.processor = null;
        }
        return ret;
      },
      () => parseTranslateArgs(...args),
      "translate",
      (root) => root[TransrateVNodeSymbol](...args),
      (key) => [createTextNode(key)],
      (val) => isArray(val)
    );
  }
  function numberParts(...args) {
    return wrapWithDeps(
      (context) => Reflect.apply(number, null, [context, ...args]),
      () => parseNumberArgs(...args),
      "number format",
      (root) => root[NumberPartsSymbol](...args),
      () => [],
      (val) => isString(val) || isArray(val)
    );
  }
  function datetimeParts(...args) {
    return wrapWithDeps(
      (context) => Reflect.apply(datetime, null, [context, ...args]),
      () => parseDateTimeArgs(...args),
      "datetime format",
      (root) => root[DatetimePartsSymbol](...args),
      () => [],
      (val) => isString(val) || isArray(val)
    );
  }
  function setPluralRules(rules) {
    _pluralRules = rules;
    _context.pluralRules = _pluralRules;
  }
  function te(key, locale2) {
    const targetLocale = isString(locale2) ? locale2 : _locale.value;
    const message = getLocaleMessage(targetLocale);
    return _context.messageResolver(message, key) !== null;
  }
  function resolveMessages(key) {
    let messages3 = null;
    const locales = fallbackWithLocaleChain(_context, _fallbackLocale.value, _locale.value);
    for (let i = 0; i < locales.length; i++) {
      const targetLocaleMessages = _messages.value[locales[i]] || {};
      const messageValue = _context.messageResolver(targetLocaleMessages, key);
      if (messageValue != null) {
        messages3 = messageValue;
        break;
      }
    }
    return messages3;
  }
  function tm(key) {
    const messages3 = resolveMessages(key);
    return messages3 != null ? messages3 : __root ? __root.tm(key) || {} : {};
  }
  function getLocaleMessage(locale2) {
    return _messages.value[locale2] || {};
  }
  function setLocaleMessage(locale2, message) {
    _messages.value[locale2] = message;
    _context.messages = _messages.value;
  }
  function mergeLocaleMessage(locale2, message) {
    _messages.value[locale2] = _messages.value[locale2] || {};
    deepCopy(message, _messages.value[locale2]);
    _context.messages = _messages.value;
  }
  function getDateTimeFormat(locale2) {
    return _datetimeFormats.value[locale2] || {};
  }
  function setDateTimeFormat(locale2, format) {
    _datetimeFormats.value[locale2] = format;
    _context.datetimeFormats = _datetimeFormats.value;
    clearDateTimeFormat(_context, locale2, format);
  }
  function mergeDateTimeFormat(locale2, format) {
    _datetimeFormats.value[locale2] = assign(_datetimeFormats.value[locale2] || {}, format);
    _context.datetimeFormats = _datetimeFormats.value;
    clearDateTimeFormat(_context, locale2, format);
  }
  function getNumberFormat(locale2) {
    return _numberFormats.value[locale2] || {};
  }
  function setNumberFormat(locale2, format) {
    _numberFormats.value[locale2] = format;
    _context.numberFormats = _numberFormats.value;
    clearNumberFormat(_context, locale2, format);
  }
  function mergeNumberFormat(locale2, format) {
    _numberFormats.value[locale2] = assign(_numberFormats.value[locale2] || {}, format);
    _context.numberFormats = _numberFormats.value;
    clearNumberFormat(_context, locale2, format);
  }
  composerID++;
  if (__root && inBrowser) {
    watch(__root.locale, (val) => {
      if (_inheritLocale) {
        _locale.value = val;
        _context.locale = val;
        updateFallbackLocale(_context, _locale.value, _fallbackLocale.value);
      }
    });
    watch(__root.fallbackLocale, (val) => {
      if (_inheritLocale) {
        _fallbackLocale.value = val;
        _context.fallbackLocale = val;
        updateFallbackLocale(_context, _locale.value, _fallbackLocale.value);
      }
    });
  }
  const composer = {
    id: composerID,
    locale,
    fallbackLocale,
    get inheritLocale() {
      return _inheritLocale;
    },
    set inheritLocale(val) {
      _inheritLocale = val;
      if (val && __root) {
        _locale.value = __root.locale.value;
        _fallbackLocale.value = __root.fallbackLocale.value;
        updateFallbackLocale(_context, _locale.value, _fallbackLocale.value);
      }
    },
    get availableLocales() {
      return Object.keys(_messages.value).sort();
    },
    messages: messages2,
    get modifiers() {
      return _modifiers;
    },
    get pluralRules() {
      return _pluralRules || {};
    },
    get isGlobal() {
      return _isGlobal;
    },
    get missingWarn() {
      return _missingWarn;
    },
    set missingWarn(val) {
      _missingWarn = val;
      _context.missingWarn = _missingWarn;
    },
    get fallbackWarn() {
      return _fallbackWarn;
    },
    set fallbackWarn(val) {
      _fallbackWarn = val;
      _context.fallbackWarn = _fallbackWarn;
    },
    get fallbackRoot() {
      return _fallbackRoot;
    },
    set fallbackRoot(val) {
      _fallbackRoot = val;
    },
    get fallbackFormat() {
      return _fallbackFormat;
    },
    set fallbackFormat(val) {
      _fallbackFormat = val;
      _context.fallbackFormat = _fallbackFormat;
    },
    get warnHtmlMessage() {
      return _warnHtmlMessage;
    },
    set warnHtmlMessage(val) {
      _warnHtmlMessage = val;
      _context.warnHtmlMessage = val;
    },
    get escapeParameter() {
      return _escapeParameter;
    },
    set escapeParameter(val) {
      _escapeParameter = val;
      _context.escapeParameter = val;
    },
    t: t2,
    getLocaleMessage,
    setLocaleMessage,
    mergeLocaleMessage,
    getPostTranslationHandler,
    setPostTranslationHandler,
    getMissingHandler,
    setMissingHandler,
    [SetPluralRulesSymbol]: setPluralRules
  };
  {
    composer.datetimeFormats = datetimeFormats;
    composer.numberFormats = numberFormats;
    composer.rt = rt;
    composer.te = te;
    composer.tm = tm;
    composer.d = d;
    composer.n = n;
    composer.getDateTimeFormat = getDateTimeFormat;
    composer.setDateTimeFormat = setDateTimeFormat;
    composer.mergeDateTimeFormat = mergeDateTimeFormat;
    composer.getNumberFormat = getNumberFormat;
    composer.setNumberFormat = setNumberFormat;
    composer.mergeNumberFormat = mergeNumberFormat;
    composer[InejctWithOption] = options.__injectWithOption;
    composer[TransrateVNodeSymbol] = transrateVNode;
    composer[DatetimePartsSymbol] = datetimeParts;
    composer[NumberPartsSymbol] = numberParts;
  }
  return composer;
}
const baseFormatProps = {
  tag: {
    type: [String, Object]
  },
  locale: {
    type: String
  },
  scope: {
    type: String,
    validator: (val) => val === "parent" || val === "global",
    default: "parent"
  },
  i18n: {
    type: Object
  }
};
function getInterpolateArg({ slots }, keys) {
  if (keys.length === 1 && keys[0] === "default") {
    const ret = slots.default ? slots.default() : [];
    return ret.reduce((slot, current) => {
      return slot = [
        ...slot,
        ...isArray(current.children) ? current.children : [current]
      ];
    }, []);
  } else {
    return keys.reduce((arg, key) => {
      const slot = slots[key];
      if (slot) {
        arg[key] = slot();
      }
      return arg;
    }, {});
  }
}
function getFragmentableTag(tag) {
  return Fragment;
}
const Translation = {
  name: "i18n-t",
  props: assign({
    keypath: {
      type: String,
      required: true
    },
    plural: {
      type: [Number, String],
      validator: (val) => isNumber(val) || !isNaN(val)
    }
  }, baseFormatProps),
  setup(props, context) {
    const { slots, attrs } = context;
    const i18n2 = props.i18n || useI18n({
      useScope: props.scope,
      __useComponent: true
    });
    return () => {
      const keys = Object.keys(slots).filter((key) => key !== "_");
      const options = {};
      if (props.locale) {
        options.locale = props.locale;
      }
      if (props.plural !== void 0) {
        options.plural = isString(props.plural) ? +props.plural : props.plural;
      }
      const arg = getInterpolateArg(context, keys);
      const children = i18n2[TransrateVNodeSymbol](props.keypath, arg, options);
      const assignedAttrs = assign({}, attrs);
      const tag = isString(props.tag) || isObject(props.tag) ? props.tag : getFragmentableTag();
      return h(tag, assignedAttrs, children);
    };
  }
};
function isVNode(target2) {
  return isArray(target2) && !isString(target2[0]);
}
function renderFormatter(props, context, slotKeys, partFormatter) {
  const { slots, attrs } = context;
  return () => {
    const options = { part: true };
    let overrides = {};
    if (props.locale) {
      options.locale = props.locale;
    }
    if (isString(props.format)) {
      options.key = props.format;
    } else if (isObject(props.format)) {
      if (isString(props.format.key)) {
        options.key = props.format.key;
      }
      overrides = Object.keys(props.format).reduce((options2, prop) => {
        return slotKeys.includes(prop) ? assign({}, options2, { [prop]: props.format[prop] }) : options2;
      }, {});
    }
    const parts = partFormatter(...[props.value, options, overrides]);
    let children = [options.key];
    if (isArray(parts)) {
      children = parts.map((part, index) => {
        const slot = slots[part.type];
        const node = slot ? slot({ [part.type]: part.value, index, parts }) : [part.value];
        if (isVNode(node)) {
          node[0].key = `${part.type}-${index}`;
        }
        return node;
      });
    } else if (isString(parts)) {
      children = [parts];
    }
    const assignedAttrs = assign({}, attrs);
    const tag = isString(props.tag) || isObject(props.tag) ? props.tag : getFragmentableTag();
    return h(tag, assignedAttrs, children);
  };
}
const NumberFormat = {
  name: "i18n-n",
  props: assign({
    value: {
      type: Number,
      required: true
    },
    format: {
      type: [String, Object]
    }
  }, baseFormatProps),
  setup(props, context) {
    const i18n2 = props.i18n || useI18n({ useScope: "parent", __useComponent: true });
    return renderFormatter(props, context, NUMBER_FORMAT_OPTIONS_KEYS, (...args) => i18n2[NumberPartsSymbol](...args));
  }
};
const DatetimeFormat = {
  name: "i18n-d",
  props: assign({
    value: {
      type: [Number, Date],
      required: true
    },
    format: {
      type: [String, Object]
    }
  }, baseFormatProps),
  setup(props, context) {
    const i18n2 = props.i18n || useI18n({ useScope: "parent", __useComponent: true });
    return renderFormatter(props, context, DATETIME_FORMAT_OPTIONS_KEYS, (...args) => i18n2[DatetimePartsSymbol](...args));
  }
};
function getComposer$2(i18n2, instance) {
  const i18nInternal = i18n2;
  if (i18n2.mode === "composition") {
    return i18nInternal.__getInstance(instance) || i18n2.global;
  } else {
    const vueI18n = i18nInternal.__getInstance(instance);
    return vueI18n != null ? vueI18n.__composer : i18n2.global.__composer;
  }
}
function vTDirective(i18n2) {
  const _process = (binding) => {
    const { instance, modifiers, value } = binding;
    if (!instance || !instance.$) {
      throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);
    }
    const composer = getComposer$2(i18n2, instance.$);
    const parsedValue = parseValue(value);
    return [
      Reflect.apply(composer.t, composer, [...makeParams(parsedValue)]),
      composer
    ];
  };
  const register = (el, binding) => {
    const [textContent, composer] = _process(binding);
    if (inBrowser && i18n2.global === composer) {
      el.__i18nWatcher = watch(composer.locale, () => {
        binding.instance && binding.instance.$forceUpdate();
      });
    }
    el.__composer = composer;
    el.textContent = textContent;
  };
  const unregister = (el) => {
    if (inBrowser && el.__i18nWatcher) {
      el.__i18nWatcher();
      el.__i18nWatcher = void 0;
      delete el.__i18nWatcher;
    }
    if (el.__composer) {
      el.__composer = void 0;
      delete el.__composer;
    }
  };
  const update = (el, { value }) => {
    if (el.__composer) {
      const composer = el.__composer;
      const parsedValue = parseValue(value);
      el.textContent = Reflect.apply(composer.t, composer, [
        ...makeParams(parsedValue)
      ]);
    }
  };
  const getSSRProps = (binding) => {
    const [textContent] = _process(binding);
    return { textContent };
  };
  return {
    created: register,
    unmounted: unregister,
    beforeUpdate: update,
    getSSRProps
  };
}
function parseValue(value) {
  if (isString(value)) {
    return { path: value };
  } else if (isPlainObject$1(value)) {
    if (!("path" in value)) {
      throw createI18nError(I18nErrorCodes.REQUIRED_VALUE, "path");
    }
    return value;
  } else {
    throw createI18nError(I18nErrorCodes.INVALID_VALUE);
  }
}
function makeParams(value) {
  const { path, locale, args, choice, plural } = value;
  const options = {};
  const named = args || {};
  if (isString(locale)) {
    options.locale = locale;
  }
  if (isNumber(choice)) {
    options.plural = choice;
  }
  if (isNumber(plural)) {
    options.plural = plural;
  }
  return [path, named, options];
}
function apply$1(app2, i18n2, ...options) {
  const pluginOptions = isPlainObject$1(options[0]) ? options[0] : {};
  const useI18nComponentName = !!pluginOptions.useI18nComponentName;
  const globalInstall = isBoolean(pluginOptions.globalInstall) ? pluginOptions.globalInstall : true;
  if (globalInstall) {
    app2.component(!useI18nComponentName ? Translation.name : "i18n", Translation);
    app2.component(NumberFormat.name, NumberFormat);
    app2.component(DatetimeFormat.name, DatetimeFormat);
  }
  {
    app2.directive("t", vTDirective(i18n2));
  }
}
const VUE_I18N_COMPONENT_TYPES = "vue-i18n: composer properties";
let devtoolsApi;
async function enableDevTools(app2, i18n2) {
  return new Promise((resolve2, reject) => {
    try {
      setupDevtoolsPlugin({
        id: "vue-devtools-plugin-vue-i18n",
        label: VueDevToolsLabels["vue-devtools-plugin-vue-i18n"],
        packageName: "vue-i18n",
        homepage: "https://vue-i18n.intlify.dev",
        logo: "https://vue-i18n.intlify.dev/vue-i18n-devtools-logo.png",
        componentStateTypes: [VUE_I18N_COMPONENT_TYPES],
        app: app2
      }, (api) => {
        devtoolsApi = api;
        api.on.visitComponentTree(({ componentInstance, treeNode }) => {
          updateComponentTreeTags(componentInstance, treeNode, i18n2);
        });
        api.on.inspectComponent(({ componentInstance, instanceData }) => {
          if (componentInstance.vnode.el && componentInstance.vnode.el.__VUE_I18N__ && instanceData) {
            if (i18n2.mode === "legacy") {
              if (componentInstance.vnode.el.__VUE_I18N__ !== i18n2.global.__composer) {
                inspectComposer(instanceData, componentInstance.vnode.el.__VUE_I18N__);
              }
            } else {
              inspectComposer(instanceData, componentInstance.vnode.el.__VUE_I18N__);
            }
          }
        });
        api.addInspector({
          id: "vue-i18n-resource-inspector",
          label: VueDevToolsLabels["vue-i18n-resource-inspector"],
          icon: "language",
          treeFilterPlaceholder: VueDevToolsPlaceholders["vue-i18n-resource-inspector"]
        });
        api.on.getInspectorTree((payload) => {
          if (payload.app === app2 && payload.inspectorId === "vue-i18n-resource-inspector") {
            registerScope(payload, i18n2);
          }
        });
        const roots = /* @__PURE__ */ new Map();
        api.on.getInspectorState(async (payload) => {
          if (payload.app === app2 && payload.inspectorId === "vue-i18n-resource-inspector") {
            api.unhighlightElement();
            inspectScope(payload, i18n2);
            if (payload.nodeId === "global") {
              if (!roots.has(payload.app)) {
                const [root] = await api.getComponentInstances(payload.app);
                roots.set(payload.app, root);
              }
              api.highlightElement(roots.get(payload.app));
            } else {
              const instance = getComponentInstance(payload.nodeId, i18n2);
              instance && api.highlightElement(instance);
            }
          }
        });
        api.on.editInspectorState((payload) => {
          if (payload.app === app2 && payload.inspectorId === "vue-i18n-resource-inspector") {
            editScope(payload, i18n2);
          }
        });
        api.addTimelineLayer({
          id: "vue-i18n-timeline",
          label: VueDevToolsLabels["vue-i18n-timeline"],
          color: VueDevToolsTimelineColors["vue-i18n-timeline"]
        });
        resolve2(true);
      });
    } catch (e) {
      console.error(e);
      reject(false);
    }
  });
}
function getI18nScopeLable(instance) {
  return instance.type.name || instance.type.displayName || instance.type.__file || "Anonymous";
}
function updateComponentTreeTags(instance, treeNode, i18n2) {
  const global2 = i18n2.mode === "composition" ? i18n2.global : i18n2.global.__composer;
  if (instance && instance.vnode.el && instance.vnode.el.__VUE_I18N__) {
    if (instance.vnode.el.__VUE_I18N__ !== global2) {
      const tag = {
        label: `i18n (${getI18nScopeLable(instance)} Scope)`,
        textColor: 0,
        backgroundColor: 16764185
      };
      treeNode.tags.push(tag);
    }
  }
}
function inspectComposer(instanceData, composer) {
  const type = VUE_I18N_COMPONENT_TYPES;
  instanceData.state.push({
    type,
    key: "locale",
    editable: true,
    value: composer.locale.value
  });
  instanceData.state.push({
    type,
    key: "availableLocales",
    editable: false,
    value: composer.availableLocales
  });
  instanceData.state.push({
    type,
    key: "fallbackLocale",
    editable: true,
    value: composer.fallbackLocale.value
  });
  instanceData.state.push({
    type,
    key: "inheritLocale",
    editable: true,
    value: composer.inheritLocale
  });
  instanceData.state.push({
    type,
    key: "messages",
    editable: false,
    value: getLocaleMessageValue(composer.messages.value)
  });
  {
    instanceData.state.push({
      type,
      key: "datetimeFormats",
      editable: false,
      value: composer.datetimeFormats.value
    });
    instanceData.state.push({
      type,
      key: "numberFormats",
      editable: false,
      value: composer.numberFormats.value
    });
  }
}
function getLocaleMessageValue(messages2) {
  const value = {};
  Object.keys(messages2).forEach((key) => {
    const v = messages2[key];
    if (isFunction(v) && "source" in v) {
      value[key] = getMessageFunctionDetails(v);
    } else if (isObject(v)) {
      value[key] = getLocaleMessageValue(v);
    } else {
      value[key] = v;
    }
  });
  return value;
}
const ESC = {
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "&": "&amp;"
};
function escape$1(s) {
  return s.replace(/[<>"&]/g, escapeChar);
}
function escapeChar(a) {
  return ESC[a] || a;
}
function getMessageFunctionDetails(func) {
  const argString = func.source ? `("${escape$1(func.source)}")` : `(?)`;
  return {
    _custom: {
      type: "function",
      display: `<span>\u0192</span> ${argString}`
    }
  };
}
function registerScope(payload, i18n2) {
  payload.rootNodes.push({
    id: "global",
    label: "Global Scope"
  });
  const global2 = i18n2.mode === "composition" ? i18n2.global : i18n2.global.__composer;
  for (const [keyInstance, instance] of i18n2.__instances) {
    const composer = i18n2.mode === "composition" ? instance : instance.__composer;
    if (global2 === composer) {
      continue;
    }
    payload.rootNodes.push({
      id: composer.id.toString(),
      label: `${getI18nScopeLable(keyInstance)} Scope`
    });
  }
}
function getComponentInstance(nodeId, i18n2) {
  let instance = null;
  if (nodeId !== "global") {
    for (const [component, composer] of i18n2.__instances.entries()) {
      if (composer.id.toString() === nodeId) {
        instance = component;
        break;
      }
    }
  }
  return instance;
}
function getComposer$1(nodeId, i18n2) {
  if (nodeId === "global") {
    return i18n2.mode === "composition" ? i18n2.global : i18n2.global.__composer;
  } else {
    const instance = Array.from(i18n2.__instances.values()).find((item) => item.id.toString() === nodeId);
    if (instance) {
      return i18n2.mode === "composition" ? instance : instance.__composer;
    } else {
      return null;
    }
  }
}
function inspectScope(payload, i18n2) {
  const composer = getComposer$1(payload.nodeId, i18n2);
  if (composer) {
    payload.state = makeScopeInspectState(composer);
  }
  return null;
}
function makeScopeInspectState(composer) {
  const state = {};
  const localeType = "Locale related info";
  const localeStates = [
    {
      type: localeType,
      key: "locale",
      editable: true,
      value: composer.locale.value
    },
    {
      type: localeType,
      key: "fallbackLocale",
      editable: true,
      value: composer.fallbackLocale.value
    },
    {
      type: localeType,
      key: "availableLocales",
      editable: false,
      value: composer.availableLocales
    },
    {
      type: localeType,
      key: "inheritLocale",
      editable: true,
      value: composer.inheritLocale
    }
  ];
  state[localeType] = localeStates;
  const localeMessagesType = "Locale messages info";
  const localeMessagesStates = [
    {
      type: localeMessagesType,
      key: "messages",
      editable: false,
      value: getLocaleMessageValue(composer.messages.value)
    }
  ];
  state[localeMessagesType] = localeMessagesStates;
  {
    const datetimeFormatsType = "Datetime formats info";
    const datetimeFormatsStates = [
      {
        type: datetimeFormatsType,
        key: "datetimeFormats",
        editable: false,
        value: composer.datetimeFormats.value
      }
    ];
    state[datetimeFormatsType] = datetimeFormatsStates;
    const numberFormatsType = "Datetime formats info";
    const numberFormatsStates = [
      {
        type: numberFormatsType,
        key: "numberFormats",
        editable: false,
        value: composer.numberFormats.value
      }
    ];
    state[numberFormatsType] = numberFormatsStates;
  }
  return state;
}
function addTimelineEvent(event, payload) {
  if (devtoolsApi) {
    let groupId;
    if (payload && "groupId" in payload) {
      groupId = payload.groupId;
      delete payload.groupId;
    }
    devtoolsApi.addTimelineEvent({
      layerId: "vue-i18n-timeline",
      event: {
        title: event,
        groupId,
        time: Date.now(),
        meta: {},
        data: payload || {},
        logType: event === "compile-error" ? "error" : event === "fallback" || event === "missing" ? "warning" : "default"
      }
    });
  }
}
function editScope(payload, i18n2) {
  const composer = getComposer$1(payload.nodeId, i18n2);
  if (composer) {
    const [field] = payload.path;
    if (field === "locale" && isString(payload.state.value)) {
      composer.locale.value = payload.state.value;
    } else if (field === "fallbackLocale" && (isString(payload.state.value) || isArray(payload.state.value) || isObject(payload.state.value))) {
      composer.fallbackLocale.value = payload.state.value;
    } else if (field === "inheritLocale" && isBoolean(payload.state.value)) {
      composer.inheritLocale = payload.state.value;
    }
  }
}
const I18nInjectionKey = /* @__PURE__ */ makeSymbol("global-vue-i18n");
function createI18n(options = {}, VueI18nLegacy) {
  const __globalInjection = isBoolean(options.globalInjection) ? options.globalInjection : true;
  const __allowComposition = true;
  const __instances = /* @__PURE__ */ new Map();
  const [globalScope, __global] = createGlobal(options);
  const symbol = makeSymbol("");
  function __getInstance(component) {
    return __instances.get(component) || null;
  }
  function __setInstance(component, instance) {
    __instances.set(component, instance);
  }
  function __deleteInstance(component) {
    __instances.delete(component);
  }
  {
    const i18n2 = {
      get mode() {
        return "composition";
      },
      get allowComposition() {
        return __allowComposition;
      },
      async install(app2, ...options2) {
        {
          app2.__VUE_I18N__ = i18n2;
        }
        app2.__VUE_I18N_SYMBOL__ = symbol;
        app2.provide(app2.__VUE_I18N_SYMBOL__, i18n2);
        if (__globalInjection) {
          injectGlobalFields(app2, i18n2.global);
        }
        {
          apply$1(app2, i18n2, ...options2);
        }
        const unmountApp = app2.unmount;
        app2.unmount = () => {
          i18n2.dispose();
          unmountApp();
        };
        {
          const ret = await enableDevTools(app2, i18n2);
          if (!ret) {
            throw createI18nError(I18nErrorCodes.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN);
          }
          const emitter = createEmitter();
          {
            const _composer = __global;
            _composer[EnableEmitter] && _composer[EnableEmitter](emitter);
          }
          emitter.on("*", addTimelineEvent);
        }
      },
      get global() {
        return __global;
      },
      dispose() {
        globalScope.stop();
      },
      __instances,
      __getInstance,
      __setInstance,
      __deleteInstance
    };
    return i18n2;
  }
}
function useI18n(options = {}) {
  const instance = getCurrentInstance();
  if (instance == null) {
    throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);
  }
  if (!instance.isCE && instance.appContext.app != null && !instance.appContext.app.__VUE_I18N_SYMBOL__) {
    throw createI18nError(I18nErrorCodes.NOT_INSLALLED);
  }
  const i18n2 = getI18nInstance(instance);
  const global2 = getGlobalComposer(i18n2);
  const componentOptions = getComponentOptions(instance);
  const scope = getScope(options, componentOptions);
  if (scope === "global") {
    adjustI18nResources(global2, options, componentOptions);
    return global2;
  }
  if (scope === "parent") {
    let composer2 = getComposer(i18n2, instance, options.__useComponent);
    if (composer2 == null) {
      composer2 = global2;
    }
    return composer2;
  }
  const i18nInternal = i18n2;
  let composer = i18nInternal.__getInstance(instance);
  if (composer == null) {
    const composerOptions = assign({}, options);
    if ("__i18n" in componentOptions) {
      composerOptions.__i18n = componentOptions.__i18n;
    }
    if (global2) {
      composerOptions.__root = global2;
    }
    composer = createComposer(composerOptions);
    setupLifeCycle(i18nInternal, instance, composer);
    i18nInternal.__setInstance(instance, composer);
  }
  return composer;
}
function createGlobal(options, legacyMode, VueI18nLegacy) {
  const scope = effectScope();
  {
    const obj = scope.run(() => createComposer(options));
    if (obj == null) {
      throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);
    }
    return [scope, obj];
  }
}
function getI18nInstance(instance) {
  {
    const i18n2 = inject(!instance.isCE ? instance.appContext.app.__VUE_I18N_SYMBOL__ : I18nInjectionKey);
    if (!i18n2) {
      throw createI18nError(!instance.isCE ? I18nErrorCodes.UNEXPECTED_ERROR : I18nErrorCodes.NOT_INSLALLED_WITH_PROVIDE);
    }
    return i18n2;
  }
}
function getScope(options, componentOptions) {
  return isEmptyObject(options) ? "__i18n" in componentOptions ? "local" : "global" : !options.useScope ? "local" : options.useScope;
}
function getGlobalComposer(i18n2) {
  return i18n2.mode === "composition" ? i18n2.global : i18n2.global.__composer;
}
function getComposer(i18n2, target2, useComponent = false) {
  let composer = null;
  const root = target2.root;
  let current = target2.parent;
  while (current != null) {
    const i18nInternal = i18n2;
    if (i18n2.mode === "composition") {
      composer = i18nInternal.__getInstance(current);
    }
    if (composer != null) {
      break;
    }
    if (root === current) {
      break;
    }
    current = current.parent;
  }
  return composer;
}
function setupLifeCycle(i18n2, target2, composer) {
  let emitter = null;
  {
    onMounted(() => {
      if (target2.vnode.el) {
        target2.vnode.el.__VUE_I18N__ = composer;
        emitter = createEmitter();
        const _composer = composer;
        _composer[EnableEmitter] && _composer[EnableEmitter](emitter);
        emitter.on("*", addTimelineEvent);
      }
    }, target2);
    onUnmounted(() => {
      if (target2.vnode.el && target2.vnode.el.__VUE_I18N__) {
        emitter && emitter.off("*", addTimelineEvent);
        const _composer = composer;
        _composer[DisableEmitter] && _composer[DisableEmitter]();
        delete target2.vnode.el.__VUE_I18N__;
      }
      i18n2.__deleteInstance(target2);
    }, target2);
  }
}
const globalExportProps = [
  "locale",
  "fallbackLocale",
  "availableLocales"
];
const globalExportMethods = ["t", "rt", "d", "n", "tm"];
function injectGlobalFields(app2, composer) {
  const i18n2 = /* @__PURE__ */ Object.create(null);
  globalExportProps.forEach((prop) => {
    const desc = Object.getOwnPropertyDescriptor(composer, prop);
    if (!desc) {
      throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);
    }
    const wrap = isRef(desc.value) ? {
      get() {
        return desc.value.value;
      },
      set(val) {
        desc.value.value = val;
      }
    } : {
      get() {
        return desc.get && desc.get();
      }
    };
    Object.defineProperty(i18n2, prop, wrap);
  });
  app2.config.globalProperties.$i18n = i18n2;
  globalExportMethods.forEach((method) => {
    const desc = Object.getOwnPropertyDescriptor(composer, method);
    if (!desc || !desc.value) {
      throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);
    }
    Object.defineProperty(app2.config.globalProperties, `$${method}`, desc);
  });
}
registerMessageResolver(resolveValue);
registerLocaleFallbacker(fallbackWithLocaleChain);
{
  const target2 = getGlobalThis();
  target2.__INTLIFY__ = true;
  setDevToolsHook(target2.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__);
}
var enUS = {
  failed: "Action failed",
  success: "Action was successful",
  startTitle: "Sign In",
  startLinkName: "Start",
  startLinkTarget: "/start",
  registerTitle: "Sign up",
  registerLinkName: "SignUp",
  registerLinkTarget: "/register",
  homeTitle: "Home",
  homeLinkName: "Home",
  homeLinkTarget: "/home/:homeParams?",
  homeBisLinkName: "HomeBis",
  homeBisLinkTarget: "",
  homeTerLinkName: "HomeTer",
  homeTerLinkTarget: "/home",
  profileTitle: "Profile",
  profileLinkName: "Profile",
  profileLinkTarget: "/profile",
  aboutTitle: "About",
  aboutLinkName: "About",
  aboutLinkTarget: "/about",
  serviceTitle: "Service",
  serviceLinkName: "Service",
  serviceLinkTarget: "/service/:type?",
  actorTitle: "Actor",
  actorLinkName: "Actor",
  actorLinkTarget: "/actor/:type?",
  orderTitle: "Order",
  orderLinkName: "Order",
  orderLinkTarget: "/order/:type?",
  paymentTitle: "Payment",
  paymentLinkName: "Payment",
  paymentLinkTarget: "/payment/:type?",
  invoiceTitle: "Invoice",
  invoiceLinkName: "Invoice",
  invoiceLinkTarget: "/invoice/:type?",
  exportTitle: "Export",
  exportLinkName: "Export",
  exportLinkTarget: "/export",
  pdfTitle: "Export to pdf",
  pdfLinkName: "PdfExport",
  pdfLinkTarget: "/pdf/:invoiceIds(\\d+)*",
  pdfPreLinkTarget: "/pdf/",
  notFoundTitle: "Page Not Found",
  drawer: {
    title: "Links"
  },
  toolbar: {
    languageLabel: "Languages",
    dropdownHeader: "Languages selection",
    dropdownDefault: "Default ({lang})"
  },
  comptaLinks: {
    services: {
      title: "Services",
      admin: "Manage",
      adminLabel: "Services managment",
      adminLink: "/service/admin",
      display: "Display",
      displayLabel: "Services display",
      displayLink: "/service/display"
    },
    actors: {
      title: "Actors",
      admin: "Manage",
      adminLabel: "Actors managment",
      adminLink: "/actor/admin",
      display: "Display",
      displayLabel: "Actors display",
      displayLink: "/actor/display"
    },
    orders: {
      title: "Orders",
      admin: "Manage",
      adminLabel: "Orders managment",
      adminLink: "/order/admin",
      display: "Display",
      displayLabel: "Orders display",
      displayLink: "/order/display"
    },
    payments: {
      title: "Payments",
      admin: "Manage",
      adminLabel: "Payments managment",
      adminLink: "/payment/admin",
      display: "Display",
      displayLabel: "Payments display",
      displayLink: "/payment/display"
    },
    invoices: {
      title: "Invoices",
      admin: "Manage",
      adminLabel: "Invoices managment",
      adminLink: "/invoice/admin",
      display: "Display",
      displayLabel: "Invoices display",
      displayLink: "/invoice/display"
    },
    export: {
      title: "Export",
      link: "/export"
    }
  },
  servicesComponent: {
    tableTitle: "Services",
    headTable: {
      name: "Name",
      amount: "Unit amount excl. taxes",
      quantity: "Quantity"
    },
    inputLabels: {
      name: "Name",
      amount: "Amount",
      quantity: "Quantity"
    },
    placeholders: {
      name: "Name",
      amount: "Amount",
      quantity: "Quantity"
    },
    hints: {
      name: "Service name must contain less than 30 characters and not contain numbers !",
      amount: "Amount must be lower than 1,000,000 !",
      quantity: "Quantity must be lower than 50 !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Sorry... No service.",
        name: "Service name can't be empty !",
        amount: "Amount can't be empty !",
        quantity: "Quantity can't be empty !",
        buttonAdding: "Add a new service",
        buttonUpdating: "Update service"
      },
      error: {
        name: "Bad service name supplied !",
        amount: "Bad amount supplied !",
        quantity: "Bad quantity supplied !"
      }
    },
    results: {
      ok: {
        add: "Service added successfully !",
        update: "Service updated successfully !",
        delete: "Service deleted successfully !"
      },
      ko: {
        add: "An error occured while adding service: {err}",
        update: "An error occured while updating service: {err}",
        delete: "An error occured while deleting service : {err}"
      }
    }
  },
  actorsComponent: {
    tableTitle: "Actors",
    headTable: {
      firstName: "Firstname",
      lastName: "Lastname",
      email: "Email",
      streetNum: "Street N#",
      streetName: "Street name",
      cp: "Postal code",
      city: "City",
      tel: "Phone N#",
      sellerNum: "Seller N#",
      type: "Type"
    },
    inputLabels: {
      firstName: "Firstname",
      lastName: "Lastname",
      email: "Email",
      streetNum: "Street N#",
      streetName: "Street name",
      cp: "Postal code",
      city: "City",
      tel: "Phone number",
      sellerNum: "Seller N#",
      type: "Type",
      sellerType: "Seller",
      buyerType: "Buyer"
    },
    placeholders: {
      firstName: "Firstname",
      lastName: "Lastname",
      email: "Email",
      streetNum: "Street N#",
      streetName: "Street name",
      cp: "Postal code",
      city: "City",
      tel: "Phone number",
      sellerNum: "Seller N#",
      type: "Type"
    },
    hints: {
      firstName: "Firstname must contain at least 2 and less than 15 alphabetical characters !",
      lastName: "Lastname must contain at least 2 and less than 15 alphabetical characters !",
      email: "Email must be valid !",
      streetNum: "Street N# must have numerical characters with optional BIS/TER !",
      streetName: "Street Name must contain at least 2 and less than 15 alphabetical characters !",
      cp: "Postal code must contain 5 numerical characters !",
      city: "City must contain at least 2 and less than 15 characters !",
      tel: "Phone N# must contain 10 numerical characters !",
      sellerNum: "Seller N# must be valid !",
      type: "Actor type must be of type seller, buyer or both !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Sorry... No actor.",
        firstName: "Firstname can't be empty !",
        lastName: "Lastname can't be empty !",
        email: "Email can't be empty !",
        streetNum: "Street N# can't be empty !",
        streetName: "Street Name can't be empty !",
        cp: "Postal code can't be empty !",
        city: "City can't be empty !",
        tel: "Phone N# can't be empty !",
        sellerNum: "Seller N# can't be empty !",
        type: "Actor type can't be empty !",
        buttonAdding: "Add a new actor",
        buttonUpdating: "Update actor"
      },
      error: {
        firstName: "Bad firstname supplied !",
        lastName: "Bad lastname supplied !",
        email: "Bad email supplied !",
        streetNum: "Bad street N# supplied !",
        streetName: "Bad street Name supplied !",
        cp: "Bad postal code supplied !",
        city: "Bad city supplied !",
        tel: "Bad phone N# supplied !",
        sellerNum: "Bad seller N# supplied !",
        type: "Bad actor type supplied !"
      }
    },
    results: {
      ok: {
        add: "Actor added successfully !",
        update: "Actor updated successfully !",
        delete: "Actor deleted successfully !"
      },
      ko: {
        add: "An error occured while adding actor: {err}",
        update: "An error occured while updating actor: {err}",
        delete: "An error occured while deleting actor: {err}"
      }
    },
    libelles: {
      actorTypes: {
        both: "Buyer, Seller",
        buyer: "Buyer",
        seller: "Seller"
      },
      no_sellerNum: "No seller N#."
    }
  },
  ordersComponent: {
    tableTitle: "Orders",
    headTable: {
      contenuAdditionnel: "Additional content",
      services: "Services",
      priceHt: "Price Excl. Taxes",
      facture: "Invoice"
    },
    inputLabels: {
      contenuAdditionnel: "Additional content",
      services: "Services",
      priceHt: "Price",
      facture: "Invoices"
    },
    placeholders: {
      contenuAdditionnel: "Additional content",
      services: "Services",
      priceHt: "Price",
      facture: "Invoices"
    },
    hints: {
      contenuAdditionnel: "Additional content must contain at least 2 and less than 30 alphanumeric characters and is not mandatory !",
      services: "At least 1 service must be selected !",
      priceHt: "Price must be greater than 0 !",
      facture: "An invoice is not required !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Sorry... No order.",
        contenuAdditionnel: "Additionnal content can't be empty !",
        services: "Services can't be empty !",
        priceHt: "Price can't be empty !",
        facture: "Invoice can't be empty !",
        buttonAdding: "Add a new order",
        buttonUpdating: "Update order"
      },
      error: {
        contenuAdditionnel: "Bad additionnal content supplied !",
        services: "Bad services supplied !",
        priceHt: "Bad prices supplied !",
        facture: "Bad invoice supplied !"
      }
    },
    results: {
      ok: {
        add: "Order added successfully !",
        update: "Order updated successfully !",
        delete: "Order deleted successfully !"
      },
      ko: {
        add: "An error occured while adding order: {err}",
        update: "An error occured while updating order: {err}",
        delete: "An error occured while deleting order: {err}",
        fetch_services: "An error occured while fetching services: {err}",
        fetch_invoices: "An error occured while fetching invoices: {err}"
      }
    },
    libelles: {
      no_additional_content: "No additionnal content.",
      no_option_services: "No service.",
      no_invoice: "No invoice affected."
    }
  },
  paymentsComponent: {
    tableTitle: "Payments",
    headTable: {
      etat: "Payment state",
      paymentValue: "Payment value",
      paymentType: "Payment type",
      facture: "Invoice"
    },
    inputLabels: {
      etat: "State",
      paymentValue: "Value",
      paymentType: "Type",
      facture: "Invoice"
    },
    placeholders: {
      etat: "States",
      paymentValue: "Value",
      paymentType: "Types",
      facture: "Invoices"
    },
    hints: {
      etat: "State field is mandatory !",
      paymentValue: "Value can't be greater than the invoice price !",
      paymentType: "Type field is mandatory !",
      facture: "Invoice field is mandatory !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Sorry... No payment.",
        etat: "Payment state can't be empty !",
        paymentValue: "Payment value can't be empty !",
        paymentType: "Payment type can't be empty !",
        facture: "Invoice can't be empty !",
        buttonUpdating: "Update payment",
        buttonAdding: "Add a new payment"
      },
      error: {
        etat: "Bad state supplied !",
        paymentValue: "Bad value supplied, must be equals or lower than {val} !",
        paymentType: "Bad type supplied !",
        facture: "Bad invoice supplied !"
      }
    },
    results: {
      ok: {
        add: "Payment added successfully !",
        update: "Payment updated successfully !",
        delete: "Payment deleted successfully !"
      },
      ko: {
        add: "An error occured while adding payment: {err}",
        update: "An error occured while updating payment: {err}",
        delete: "An error occured while deleting payment: {err}",
        fetch_invoices: "An error occured while fetching invoices: {err}",
        fetch_etats: "An error occured while fetching states: {err}",
        fetch_types: "An error occured while fetching types: {err}"
      }
    },
    libelles: {
      no_invoice: "No invoice affected !",
      no_option_invoice: "No invoice.",
      no_etat: "No payment state affected !",
      no_option_etat: "No state.",
      no_type: "No payment type affected !",
      no_option_type: "No type.",
      types: {
        cb: "Credit card",
        esp: "Cash",
        chq: "Check"
      },
      etats: {
        paid: "Paid",
        not_paid: "Not paid"
      }
    }
  },
  invoicesComponent: {
    tableTitle: "Invoices",
    headTable: {
      date: "Invoice date",
      invoiceHTPrice: "Invoice price Excl. Taxes",
      invoiceTTPrice: "Invoice price Incl. Taxes",
      language: "Invoice language",
      devise: "Invoice devise",
      tva: "Invoice VAT",
      buyer: "Invoice buyer",
      seller: "Invoice seller",
      commande: "Invoice orders",
      payment: "Invoice payments"
    },
    inputLabels: {
      date: "Date",
      invoiceHTPrice: "Price",
      invoiceTTPrice: "Price + Taxes",
      language: "Language",
      devise: "Devise",
      tva: "VAT",
      buyer: "Buyer",
      seller: "Seller",
      commande: "Orders",
      payment: "Payments"
    },
    placeholders: {
      date: "Date",
      invoiceHTPrice: "Price",
      invoiceTTPrice: "Price + Taxes",
      language: "Languages",
      devise: "Devises",
      tva: "VAT",
      buyer: "Buyers",
      seller: "Sellers",
      commande: "Orders",
      payment: "Payments"
    },
    hints: {
      date: "Date must be greater than the current date !",
      invoiceHTPrice: "Price must be lower than orders total price !",
      invoiceTTPrice: "Price + Taxes must be lower than orders price !",
      language: "Language field is mandatory",
      devise: "Devise field is mandatory !",
      tva: "VAT must be greater than 0 and lower than 1 !",
      buyer: "Buyer field is mandatory !",
      seller: "Seller field is mandatory !",
      commande: "Orders field is mandatory !",
      payment: "Payment field is not mandatory, but if supplied it must not be greater than invoice price !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Sorry... No invoice.",
        date: "Date can't be empty !",
        invoiceHTPrice: "Price can't be empty !",
        invoiceTTPrice: "Price + Taxes can't be empty !",
        language: "Language can't be empty !",
        devise: "Devise can't be empty !",
        tva: "VAT can't be empty !",
        buyer: "Buyer can't be empty !",
        seller: "Seller can't be empty !",
        commande: "Orders can't be empty !",
        payment: "Payments can't be empty !",
        buttonUpdating: "Update invoice",
        buttonAdding: "Add a new invoice"
      },
      error: {
        date: "Bad date supplied !",
        invoiceHTPrice: "Bad price supplied !",
        invoiceTTPrice: "Bad price + Taxes supplied !",
        language: "Bad language supplied !",
        devise: "Bad devise supplied !",
        tva: "Bad VAT supplied !",
        buyer: "Bad buyer supplied !",
        seller: "Bad seller supplied !",
        commande: "Bad orders supplied !",
        payment: "Bad payments supplied !"
      }
    },
    results: {
      ok: {
        add: "Invoice added successfully !",
        update: "Invoice updated successfully !",
        delete: "Invoice deleted successfully !"
      },
      ko: {
        add: "An error occured while adding invoice: {err}",
        update: "An error occured while updating invoice: {err}",
        delete: "An error occured while deleting invoice: {err}",
        fetch_languages: {
          empty: "No payment found !",
          error: "Select from payment table of SQLite !",
          linked_empty: "An error occured wihle fetching languages: @:invoicesComponent.results.ko.fetch_languages.empty",
          linked_error: "An error occured wihle fetching languages: @:invoicesComponent.results.ko.fetch_languages.error {err}"
        },
        fetch_devises: {
          empty: "No devise found !",
          error: "Select from devise table of SQLite !",
          linked_empty: "An error occured while fetching devises: @:invoicesComponent.results.ko.fetch_devises.empty",
          linked_error: "An error occured while fetching devises: @:invoicesComponent.results.ko.fetch_devises.error {err}"
        },
        fetch_buyers: {
          empty: "No buyer found !",
          error: "Select from actor table of SQLite !",
          linked_empty: "An error occured while fetching buyers: @:invoicesComponent.results.ko.fetch_buyers.empty",
          linked_error: "An error occured while fetching buyers: @:invoicesComponent.results.ko.fetch_buyers.error {err}"
        },
        fetch_sellers: {
          empty: "No seller found !",
          error: "Select from actor table of SQLite !",
          linked_empty: "An error occured while fetching sellers: @:invoicesComponent.results.ko.fetch_sellers.empty",
          linked_error: "An error occured while fetching sellers: @:invoicesComponent.results.ko.fetch_sellers.error {err}"
        },
        fetch_orders: {
          empty: "No order found !",
          error: "Select from order table of SQLite DB !",
          linked_empty: "An error occured while fetching orders: @:invoicesComponent.results.ko.fetch_orders.empty",
          linked_error: "An error occured while fetching orders: @:invoicesComponent.results.ko.fetch_orders.error {err}"
        },
        fetch_payments: {
          empty: "No payment found !",
          error: "Select from payment table of SQLite !",
          linked_empty: "An error occured while fetching payments: @:invoicesComponent.results.ko.fetch_payments.empty",
          linked_error: "An error occured while fetching payments: @:invoicesComponent.results.ko.fetch_payments.error {err}"
        }
      }
    },
    libelles: {
      no_order: "No order affected !",
      no_option_order: "No order.",
      no_payment: "No payment affected !",
      no_option_payment: "No payment.",
      no_language: "No language affected !",
      no_option_language: "No language.",
      no_devise: "No devise affected !",
      no_option_devise: "No devise.",
      no_buyer: "No buyer affected !",
      no_option_buyer: "No buyer.",
      no_seller: "No seller affected !",
      no_option_seller: "No seller.",
      no_date: "No date supplied !"
    }
  },
  profileComponent: {
    titles: {
      update: "Update my profile",
      register: "Register form"
    },
    inputLabels: {
      firstName: "Firstname",
      lastName: "Lastname",
      login: "Login",
      email: "Email",
      confirmEmail: "Email confirmation",
      pass: "Password",
      confirmPass: "Password confirmation",
      companyName: "Company name",
      companyLogo: "Company logo restricted to SVG images",
      devise: "Devise",
      userType: "Type"
    },
    placeholders: {
      firstName: "Firstname",
      lastName: "Lastname",
      login: "Login",
      email: "Email",
      confirmEmail: "Email confirmation",
      pass: "Password",
      confirmPass: "Password confirmation",
      companyName: "Company name",
      companyLogo: "Company logo",
      devise: "Devises",
      userType: "Types"
    },
    hints: {
      firstName: "Firstname is mandatory !",
      lastName: "Lastname is mandatory !",
      login: "Login is mandatory !",
      email: "Email is mandatory !",
      confirmEmail: "Email confirmation is mandatory !",
      pass: "Password is mandatory and must contain minimum 8 characters, at least one uppercase letter, one lowercase letter, one number and one special character !",
      confirmPass: "Password confirmation is mandatory !",
      companyName: "Company name is mandatory !",
      companyLogo: "Company logo is optionnal, if supplied, file must be an svg type of maximum {size} bytes !",
      devise: "Devise is mandatory !",
      userType: "Type is mandatory !"
    },
    errors: {
      empty: {
        firstName: "Firstname can't be empty !",
        lastName: "Lastname can't be empty !",
        login: "Login can't be empty !",
        email: "Email can't be empty !",
        confirmEmail: "Email confirmation can't be empty !",
        pass: "Password can't be empty !",
        confirmPass: "Password confirmation can't be empty !",
        companyName: "Company name can't be empty !",
        companyLogo: "Company logo can't be empty !",
        devise: "Devise can't be empty !",
        userType: "Type can't be empty !"
      },
      error: {
        firstName: "Bad firstname supplied !",
        lastName: "Bad lastname supplied !",
        login: "Bad login supplied !",
        email: "Bad email supplied !",
        confirmEmail: "Bad email confirmation supplied !",
        emailBusy: "Email already exists !",
        emailMissmatch: "Email and confirmation missmatch !",
        pass: "Bad password supplied !",
        confirmPass: "Bad password confirmation supplied !",
        passMissmatch: "Password and confirmation missmatch",
        companyName: "Bad company name supplied !",
        companyLogo: {
          accept: "Bad image supplied, waiting for (.svg) having ({ext}) !",
          maxFileSize: "File size exceeded the maximum size, waiting (<{max}) having ({size}) !"
        },
        devise: "Bad devise supplied !",
        userType: "Bad type supplied !"
      }
    },
    libelles: {
      no_devise: "No devise affected !",
      no_option_devise: "No devise.",
      no_type: "No type affected !",
      no_option_type: "No type.",
      updateButton: "Submit",
      resetButton: "Reset",
      types: {
        regular: "Manager",
        admin: "Administrator"
      }
    },
    results: {
      ok: {
        add: "Profile created successfully !",
        update: "Profile updated successfully !",
        delete: "Profile deleted successfully !"
      },
      ko: {
        add: "An error occured while adding user: {err}",
        update: "An error occured while updating user: {err}",
        delete: "An error occured while deleting user: {err}",
        fetch_user: "An error occured while fetching user informations: {err}",
        fetch_userTypes: {
          empty: "No user type found !",
          error: "Select from userType table of SQLite !",
          linked_empty: "An error occured while fetching user types: @:profileComponent.results.ko.fetch_userTypes.empty",
          linked_error: "An error occured while fetching user types: @:profileComponent.results.ko.fetch_userTypes.error {err}"
        },
        upload: "An error occured while uploading company logo file: {err}",
        checkEmail: "An error occured while checking the email availability: {err}"
      }
    }
  },
  exportsComponent: {
    tableTitle: "Export",
    results: {
      ko: {
        fetch_invoices: {
          error: "Select from invoice table of SQLite !",
          linked_error: "An error occured while fetching invoices: @:exportComponent.results.ko.fetch_invoices.error {err}"
        }
      }
    },
    libelles: {
      invoice: "Invoice",
      billingAddressLibelle: "Billing address :",
      addContentLibelle: "Additional content :",
      buyerLibelle: "Buyer :",
      sellerLibelle: "Seller :",
      dateLibelle: "Date :",
      orderNumberLibelle: "Order N#",
      descriptionLibelle: "Description",
      serviceNumberLibelle: "Service ID",
      ttUnitPriceLibelle: "Unit. Amount Incl. Taxes",
      quantityLibelle: "Quantity",
      ttNetPriceLibelle: "Net price Incl. Taxes",
      ttOverallAmountLibelle: "Amount Incl. Taxes",
      totalLibelle: "Total",
      vatLibelle: "VAT",
      vatBaseLibelle: "VAT Base",
      vatAmountLibelle: "VAT Amount",
      ttTotalLibelle: "Total Incl. Taxes"
    }
  },
  homeComponent: {
    headTable: {
      totalFiscalYearHTIncomes: "Total fiscal year incomes excl. taxes",
      totalFiscalYearTTIncomes: "Total fiscal year incomes incl. taxes",
      totalFiscalYearPaymentsIncomes: "Withdrawal in the fiscal year",
      totalFiscalYearPaymentsOverdue: "Overdue in the fiscal year"
    },
    labels: {
      servicesLabel: "Service(s)",
      invoicesLabel: "Invoice(s)",
      ordersLabel: "Order(s)",
      actorsLabel: "Actor(s)"
    },
    barChart: {
      juneLabel: "June",
      julyLabel: "July",
      augustLabel: "August",
      septemberLabel: "September",
      octoberLabel: "October",
      novemberLabel: "November",
      decemberLabel: "December",
      januaryLabel: "January",
      februaryLabel: "February",
      marchLabel: "March",
      aprilLabel: "April",
      mayLabel: "May",
      datasetLabel: "Invoice(s) number",
      heading: "Number of invoices dispatch"
    },
    pieChart: {
      cbLabel: "Credit card",
      cashLabel: "Cash",
      chqLabel: "Check",
      heading: "Received payment type dispatch"
    },
    homeTable: {
      heading: "Fiscal year stats"
    },
    results: {
      ko: {
        fetch_stats: "An error occured while fetching stats : {err}"
      }
    }
  },
  startComponent: {
    title: "Sign in form",
    inputLabels: {
      login: "Login or email",
      pass: "Password"
    },
    placeholders: {
      login: "Login/email",
      pass: "Password"
    },
    hints: {
      login: "Login or email used in register form is mandatory !",
      pass: "password used in register form is mandatory!"
    },
    errors: {
      empty: {
        login: "Login can't be empty !",
        pass: "Password can't be empty !"
      },
      error: {
        signIn: "Bad login/email or password supplied !"
      }
    },
    results: {
      ko: {
        signIn: "Error while signing in: {err}",
        session: "An error occured while getting session: {err}"
      }
    },
    libelles: {
      signInButton: "Sign In",
      resetButton: "Reset",
      signUp: "Register",
      logout: "Logout"
    }
  },
  errorNotFoundComponent: {
    text: "Oops. Nothing here...",
    buttonText: "Go Home"
  },
  forms: {
    headTable: {
      action: "Actions",
      export: "Export to csv"
    },
    errors: {
      empty: {
        filterBodyContentText: "Sorry... The filter didn't uncover any results"
      },
      error: {
        inputs: "Something wrong happened, please check the form fields !",
        export: "Browser denied file download...",
        sqliteDb: "Unbale to open SQLite DB !"
      }
    },
    addButtonText: "Add",
    updateButtonText: "Update",
    deleteButtonText: "Delete",
    exportButtonText: "Export",
    valid: "Ok !"
  },
  session: {
    results: {
      ko: "Your session has expired, please login again !"
    }
  },
  footer: {
    paragraph: "\xA92023 Powered by CryptoLogique - Digital services company"
  },
  noScript: "This app use Javascript which is currently disabled or not supported !"
};
var frFR = {
  failed: "Action \xE9chou\xE9e",
  success: "Action termin\xE9e avec succ\xE8s !",
  startTitle: "Connexion",
  startLinkName: "Start",
  startLinkTarget: "/start",
  registerTitle: "S'enregistrer",
  registerLinkName: "SignUp",
  registerLinkTarget: "/register",
  homeTitle: "Accueil",
  homeLinkName: "Home",
  homeLinkTarget: "/home",
  homeBisLinkName: "HomeBis",
  homeBisLinkTarget: "",
  homeTerLinkName: "HomeTer",
  homeTerLinkTarget: "/home",
  profileTitle: "Profil",
  profileLinkName: "Profile",
  profileLinkTarget: "/profile",
  aboutTitle: "\xC0 Propos",
  aboutLinkName: "About",
  aboutLinkTarget: "/about",
  serviceTitle: "Service",
  serviceLinkName: "Service",
  serviceLinkTarget: "/service/:type?",
  actorTitle: "Acteur",
  actorLinkName: "Actor",
  actorLinkTarget: "/actor/:type?",
  orderTitle: "Commande",
  orderLinkName: "Order",
  orderLinkTarget: "/order/:type?",
  paymentTitle: "Paiement",
  paymentLinkName: "Payment",
  paymentLinkTarget: "/payment/:type?",
  invoiceTitle: "Facture",
  invoiceLinkName: "Invoice",
  invoiceLinkTarget: "/invoice/:type?",
  exportTitle: "Exportation",
  exportLinkName: "Export",
  exportLinkTarget: "/export",
  pdfTitle: "Exportation PDF",
  pdfLinkName: "PdfExport",
  pdfLinkTarget: "/pdf/:invoiceIds(\\d+)*",
  pdfPreLinkTarget: "/pdf/",
  notFoundTitle: "Page introuvable",
  drawer: {
    title: "Liens"
  },
  toolbar: {
    languageLabel: "Langages",
    dropdownHeader: "S\xE9l\xE9ction de langage",
    dropdownDefault: "D\xE9faut ({lang})"
  },
  comptaLinks: {
    services: {
      title: "Services",
      admin: "Administration",
      adminLabel: "Admin. services",
      adminLink: "/service/admin",
      display: "Affichage",
      displayLabel: "Affich. services",
      displayLink: "/service/display"
    },
    actors: {
      title: "Acteurs",
      admin: "Administration",
      adminLabel: "Admin. acteurs",
      adminLink: "/actor/admin",
      display: "Affichage",
      displayLabel: "Affich. acteurs",
      displayLink: "/actor/display"
    },
    orders: {
      title: "Commandes",
      admin: "Administration",
      adminLabel: "Admin. commandes",
      adminLink: "/order/admin",
      display: "Affichage",
      displayLabel: "Affich. commandes",
      displayLink: "/order/display"
    },
    payments: {
      title: "Paiements",
      admin: "Administration",
      adminLabel: "Admin. paiements",
      adminLink: "/payment/admin",
      display: "Affichage",
      displayLabel: "Affich. paiements",
      displayLink: "/payment/display"
    },
    invoices: {
      title: "Factures",
      admin: "Administration",
      adminLabel: "Admin. factures",
      adminLink: "/invoice/admin",
      display: "Affichage",
      displayLabel: "Affich. factures",
      displayLink: "/invoice/display"
    },
    export: {
      title: "Exportation",
      link: "/export"
    }
  },
  servicesComponent: {
    tableTitle: "Services",
    headTable: {
      name: "Nom",
      amount: "Montant unitaire hors taxes",
      quantity: "Quantit\xE9"
    },
    inputLabels: {
      name: "Nom",
      amount: "Montant",
      quantity: "Quantit\xE9"
    },
    placeholders: {
      name: "Nom",
      amount: "Montant",
      quantity: "Quantit\xE9"
    },
    hints: {
      name: "Le service doit contenir moins de 30 caract\xE8res sans chiffres !",
      amount: "Le montant doit \xEAtre inf\xE9rieur \xE0 1,000,000 !",
      quantity: "La quantit\xE9 doit \xEAtre inf\xE9rieure \xE0 50 !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Oups... Aucun service.",
        name: "Le nom du service ne peut \xEAtre vide !",
        amount: "Le montant ne peut \xEAtre vide !",
        quantity: "La quantit\xE9 ne peut \xEAtre vide !",
        buttonAdding: "Ajout d'un service",
        buttonUpdating: "Mise \xE0 jour d'un service"
      },
      error: {
        name: "Nom de service incorrect !",
        amount: "Montant incorrect !",
        quantity: "Quantit\xE9 incorrect !"
      }
    },
    results: {
      ok: {
        add: "Service ajout\xE9 avec succ\xE8s !",
        update: "Service mis \xE0 jour avec succ\xE8s !",
        delete: "Service supprim\xE9 avec succ\xE8s !"
      },
      ko: {
        add: "Une erreur est survenue lors de l'ajout du service: {err}",
        update: "Une erreur est survenue lors de la mise \xE0 jour du service: {err}",
        delete: "Une erreur est survenue lors de la suppression du service : {err}"
      }
    }
  },
  actorsComponent: {
    tableTitle: "Acteurs",
    headTable: {
      firstName: "Pr\xE9nom",
      lastName: "Nom",
      email: "Email",
      streetNum: "N# de rue",
      streetName: "Nom de rue",
      cp: "Code postal",
      city: "Ville",
      tel: "N# de t\xE9l\xE9phone",
      sellerNum: "N# de commer\xE7ant",
      type: "Type"
    },
    inputLabels: {
      firstName: "Pr\xE9nom",
      lastName: "Nom",
      email: "Email",
      streetNum: "N# de rue",
      streetName: "Nom de rue",
      cp: "Code postal",
      city: "Ville",
      tel: "N# de t\xE9l\xE9phone",
      sellerNum: "N# de commer\xE7ant",
      type: "Type",
      sellerType: "Vendeur",
      buyerType: "Acheteur"
    },
    placeholders: {
      firstName: "Pr\xE9nom",
      lastName: "Nom",
      email: "Email",
      streetNum: "N# de rue",
      streetName: "Nom de rue",
      cp: "Code postal",
      city: "Ville",
      tel: "N# de t\xE9l\xE9phone",
      sellerNum: "N# commer\xE7ant",
      type: "Type"
    },
    hints: {
      firstName: "Le pr\xE9nom doit contenir au moins 2 caract\xE8res et moins de 15 caract\xE8res alphab\xE9tiques incluant (-) !",
      lastName: "Le nom doit contenir au moins 2 caract\xE8res et moins de 15 caract\xE8res alphab\xE9tiques !",
      email: "Email doit \xEAtre valide !",
      streetNum: "Le num\xE9ro de rue doit \xEAtre num\xE9rique suivi de BIS/TER si besoin !",
      streetName: "Le nom de rue doit contenir au moins 2 caract\xE8res et moins de 50 caract\xE8res alphab\xE9tiques !",
      cp: "Le code postal doit contenir 5 caract\xE8res num\xE9riques (ex: 01000) !",
      city: "La ville doit contenir au moins 2 caract\xE8res et moins de 50 caract\xE8res alphab\xE9tiques !",
      tel: "Le num\xE9ro de t\xE9l\xE9phone doit contenir 10 cartact\xE8res num\xE9riques !",
      sellerNum: "Le num\xE9ro de commer\xE7ant doit \xEAtre valide !",
      type: "Le type d'acteur doit \xEAtre Vendeur, Acheteur ou les deux !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Oups... Aucun acteur.",
        firstName: "Le pr\xE9nom ne peut \xEAtre vide !",
        lastName: "Le nom ne peut \xEAtre vide !",
        email: "L'email ne peut \xEAtre vide !",
        streetNum: "Le num\xE9ro de rue ne peut \xEAtre vide !",
        streetName: "Le nom de rue ne peut \xEAtre vide !",
        cp: "Le code postal ne peut \xEAtre vide !",
        city: "La ville ne peut \xEAtre vide !",
        tel: "Le num\xE9ro de t\xE9l\xE9phone ne peut \xEAtre vide !",
        sellerNum: "Le num\xE9ro de commer\xE7ant doit \xEAtre renseign\xE9 !",
        type: "Le type d'acteur ne peut \xEAtre vide !",
        buttonAdding: "Ajouter un acteur",
        buttonUpdating: "Mettre \xE0 jour un acteur"
      },
      error: {
        firstName: "Pr\xE9nom incorrect !",
        lastName: "Nom incorrect !",
        email: "Email incorrect !",
        streetNum: "N# de rue incorrect !",
        streetName: "Nom de rue incorrect !",
        cp: "Code postal incorrect !",
        city: "Ville incorrecte !",
        tel: "N# de t\xE9l\xE9phone incorrect !",
        sellerNum: "N# de commer\xE7ant incorrect !",
        type: "Type d'acteur incorrect !"
      }
    },
    results: {
      ok: {
        add: "Acteur ajout\xE9 avec succ\xE8s !",
        update: "Acteur mis \xE0 jour avec succ\xE8s !",
        delete: "Acteur supprim\xE9 avec succ\xE8s !"
      },
      ko: {
        add: "Une erreur est survenue lors de l'ajout de l'acteur: {err}",
        update: "Une erreur est survenue lors de la mise \xE0 jour de l'acteur: {err}",
        delete: "Une erreur est survenu lors de la suppression de l'acteur: {err}"
      }
    },
    libelles: {
      actorTypes: {
        both: "Acheteur, Vendeur",
        buyer: "Acheteur",
        seller: "Vendeur"
      },
      no_sellerNum: "Aucun N# de commer\xE7ant"
    }
  },
  ordersComponent: {
    tableTitle: "Commandes",
    headTable: {
      contenuAdditionnel: "Contenu additionnel",
      services: "Services",
      priceHt: "Prix Hors Taxes",
      facture: "Facture"
    },
    inputLabels: {
      contenuAdditionnel: "Contenu additionnel",
      services: "Services",
      priceHt: "Prix",
      facture: "Factures"
    },
    placeholders: {
      contenuAdditionnel: "Contenu additionnel",
      services: "Services",
      priceHt: "Prix",
      facture: "Factures"
    },
    hints: {
      contenuAdditionnel: "Le contenu additionnel doit contenir au moins 2 caract\xE8res et moins de 30 caract\xE8res alphanum\xE9riques, ce champs est obligatoire !",
      services: "Au moins 1 service doit \xEAtre s\xE9lectionn\xE9 !",
      priceHt: "Le prix doit \xEAtre sup\xE9rieur \xE0 0 !",
      facture: "Une facture doit \xEAtre s\xE9lectionn\xE9e !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Oups... Aucune commande.",
        contenuAdditionnel: "Le contenu additionnel ne peut \xEAtre vide !",
        services: "Au moins 1 service doit \xEAtre s\xE9lectionn\xE9 !",
        priceHt: "Le prix ne peut \xEAtre vide !",
        facture: "Une facture doit \xEAtre renseign\xE9e !",
        buttonAdding: "Ajouter une commande",
        buttonUpdating: "Mettre \xE0 jour une commande"
      },
      error: {
        contenuAdditionnel: "Contenu additionnel incorrect !",
        services: "Service(s) incorrect(s) !",
        priceHt: "Prix incorrect !",
        facture: "Facture incorrect !"
      }
    },
    results: {
      ok: {
        add: "Commande ajout\xE9e avec succ\xE8s !",
        update: "Commande mise \xE0 jour avec succ\xE8s !",
        delete: "Commande supprim\xE9e avec succ\xE8s !"
      },
      ko: {
        add: "Une erreur est survenue lors de l'ajout de la commande: {err}",
        update: "Une erreur est survenue lors de la mise \xE0 jour de la commande: {err}",
        delete: "Une erreur est survenue lors de la suppression de la commande: {err}",
        fetch_services: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) service(s): {err}",
        fetch_invoices: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) facture(s): {err}"
      }
    },
    libelles: {
      no_additional_content: "Aucun contenu additionnel.",
      no_option_services: "Aucun service.",
      no_invoice: "Aucune facture affect\xE9e."
    }
  },
  paymentsComponent: {
    tableTitle: "Paiements",
    headTable: {
      etat: "\xC9tat du paiement",
      paymentValue: "Valeur du paiement",
      paymentType: "Type du paiement",
      facture: "Facture"
    },
    inputLabels: {
      etat: "\xC9tat",
      paymentValue: "Valeur",
      paymentType: "Type",
      facture: "Facture"
    },
    placeholders: {
      etat: "\xC9tats",
      paymentValue: "Valeur",
      paymentType: "Types",
      facture: "Factures"
    },
    hints: {
      etat: "Champ \xE9tat est obligatoire !",
      paymentValue: "Valeur du paiement ne peut \xEAtre sup\xE9rieure au prix TTC de la facture affect\xE9e !",
      paymentType: "Champ type est obligatoire !",
      facture: "Champ facture est obligatoire !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Oups... Aucun paiement.",
        etat: "L'\xE9tat du paiement ne peut \xEAtre vide !",
        paymentValue: "La valeur du paiement ne peut \xEAtre vide !",
        paymentType: "Le type du paiement ne peut \xEAtre vide !",
        facture: "La facture ne peut \xEAtre vide !",
        buttonUpdating: "Mettre \xE0 jour le paiement",
        buttonAdding: "Ajouter un nouveau paiement"
      },
      error: {
        etat: "\xC9tat incorrect !",
        paymentValue: "Valeur incorrecte, doit \xEAtre \xE9gale ou inf\xE9rieure \xE0 {val} !",
        paymentType: "Type incorrect !",
        facture: "Facture incorrect !"
      }
    },
    results: {
      ok: {
        add: "Paiement ajout\xE9 avec succ\xE8s !",
        update: "Paiement mis \xE0 jour avec succ\xE8s !",
        delete: "Paiement supprim\xE9 avec succ\xE8s !"
      },
      ko: {
        add: "Une erreur est survenue lors de l'ajout du paiement: {err}",
        update: "Une erreur est survenue lors de la mise \xE0 jour du paiement: {err}",
        delete: "Une erreur est survenue lors de la suppression du paiement: {err}",
        fetch_invoices: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) facture(s): {err}",
        fetch_etats: "Une erreur est survenue lors de la r\xE9cup\xE9ration des \xE9tats de paiement: {err}",
        fetch_types: "Une erreur est survenue lors de la r\xE9cup\xE9ration des types de paiement: {err}"
      }
    },
    libelles: {
      no_invoice: "Aucune facture affect\xE9e !",
      no_option_invoice: "Aucune facture.",
      no_etat: "Aucun \xE9tat de paiement affect\xE9 !",
      no_option_etat: "Aucun \xE9tat.",
      no_type: "Aucun type de paiement affect\xE9 !",
      no_option_type: "Aucun type.",
      types: {
        cb: "Carte bleue",
        esp: "Esp\xE8ce",
        chq: "Ch\xE8que"
      },
      etats: {
        paid: "Pay\xE9",
        not_paid: "Non pay\xE9"
      }
    }
  },
  invoicesComponent: {
    tableTitle: "Factures",
    headTable: {
      date: "Date de la facture",
      invoiceHTPrice: "Prix Hors Taxes",
      invoiceTTPrice: "Prix Toutes Taxes Comprises",
      language: "Langue de la facture",
      devise: "Devise de la facture",
      tva: "TVA de la facture",
      buyer: "Acheteur",
      seller: "Vendeur",
      commande: "Commande(s)",
      payment: "Paiement(s)"
    },
    inputLabels: {
      date: "Date",
      invoiceHTPrice: "Prix",
      invoiceTTPrice: "Prix + Taxes",
      language: "Langue",
      devise: "Devise",
      tva: "TVA",
      buyer: "Acheteur",
      seller: "Vendeur",
      commande: "Commandes",
      payment: "Paiements"
    },
    placeholders: {
      date: "Date",
      invoiceHTPrice: "Prix",
      invoiceTTPrice: "Prix + Taxes",
      language: "Langues",
      devise: "Devises",
      tva: "TVA",
      buyer: "Acheteurs",
      seller: "Vendeurs",
      commande: "Commandes",
      payment: "Paiements"
    },
    hints: {
      date: "La date doit \xEAtre sup\xE9rieure ou \xE9gale \xE0 la date courtante !",
      invoiceHTPrice: "Le prix doit \xEAtre inf\xE9rieur ou \xE9gale au prix total hors taxes des commandes !",
      invoiceTTPrice: "Prix + Taxes doit \xEAtre inf\xE9rieur ou \xE9gale au prix total incluant les taxes des commandes !",
      language: "Champ langue de la facture obligatoire !",
      devise: "Champ devise de la facture est obligatoire !",
      tva: "La TVA doit \xEAtre comprise entre 0 et 1 !",
      buyer: "Champ acheteur obligatoire !",
      seller: "Champ vendeur obligatoire !",
      commande: "Champ commande obligatoire !",
      payment: "Champ paiement optionnel, cependant si renseign\xE9 sa valeur ne peut \xEAtre sup\xE9rieure au prix de la facture !"
    },
    errors: {
      empty: {
        tableBodyContentText: "Oups... Aucune facture.",
        date: "Date ne peut \xEAtre vide !",
        invoiceHTPrice: "Prix ne peut \xEAtre vide !",
        invoiceTTPrice: "Prix + Taxes ne peut \xEAtre vide !",
        language: "Langue ne peut \xEAtre vide !",
        devise: "Devise ne peut \xEAtre vide !",
        tva: "TVA ne peut \xEAtre vide !",
        buyer: "Acheteur ne peut \xEAtre vide !",
        seller: "Vendeur ne peut \xEAtre vide !",
        commande: "Commandes ne peut \xEAtre vide !",
        payment: "Paiements ne peut \xEAtre vide !",
        buttonUpdating: "Mettre \xE0 jour la facture",
        buttonAdding: "Ajouter une nouvelle facture"
      },
      error: {
        date: "Date incorrecte !",
        invoiceHTPrice: "Prix HT incorrect !",
        invoiceTTPrice: "Prix TTC incorrect !",
        language: "Langue incorrecte !",
        devise: "Devise incorrecte !",
        tva: "TVA incorrecte !",
        buyer: "Acheteur incorrect !",
        seller: "Vendeur incorrect !",
        commande: "Commandes incorrectes !",
        payment: "Paiements incorrects !"
      }
    },
    results: {
      ok: {
        add: "Facture ajout\xE9e avec succ\xE8s !",
        update: "Facture mis \xE0 jour avec succ\xE8s !",
        delete: "Facture supprim\xE9e avec succ\xE8s !"
      },
      ko: {
        add: "Une erreur est survenue lors de l'ajout de la facture: {err}",
        update: "Une erreur est survenue lors de la mise \xE0 jour de la facture: {err}",
        delete: "Une erreur est survenue lors de la suppression de la facture: {err}",
        fetch_languages: {
          empty: "Aucun langage trouv\xE9 !",
          error: "R\xE9cup\xE9ration depuis la table 'Langage' SQLite !",
          linked_empty: "Une erreur est survenue lors de la r\xE9cup\xE9ration des langues: @:invoicesComponent.results.ko.fetch_languages.empty",
          linked_error: "Une erreur est survenue lors de la r\xE9cup\xE9ration des langues: @:invoicesComponent.results.ko.fetch_languages.error {err}"
        },
        fetch_devises: {
          empty: "Aucune devise trouv\xE9e !",
          error: "R\xE9cup\xE9ration depuis la table 'Devise' SQLite !",
          linked_empty: "Une erreur est survenue lors de la r\xE9cup\xE9ration des devises: @:invoicesComponent.results.ko.fetch_devises.empty",
          linked_error: "Une erreur est survenue lors de la r\xE9cup\xE9ration des devises: @:invoicesComponent.results.ko.fetch_devises.error {err}"
        },
        fetch_buyers: {
          empty: "Aucun acheteur trouv\xE9 !",
          error: "R\xE9cup\xE9ration depuis la table 'Personne' SQLite !",
          linked_empty: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) acheteur(s): @:invoicesComponent.results.ko.fetch_buyers.empty",
          linked_error: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) acheteur(s): @:invoicesComponent.results.ko.fetch_buyers.error {err}"
        },
        fetch_sellers: {
          empty: "Aucun vendeur trouv\xE9 !",
          error: "R\xE9cup\xE9ration depuis la table 'Personne' SQLite !",
          linked_empty: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) vendeur(s): @:invoicesComponent.results.ko.fetch_sellers.empty",
          linked_error: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) vendeur(s): @:invoicesComponent.results.ko.fetch_sellers.error {err}"
        },
        fetch_orders: {
          empty: "Aucune commande trouv\xE9e !",
          error: "R\xE9cup\xE9ration depuis la table 'Commande' SQLite !",
          linked_empty: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) commande(s): @:invoicesComponent.results.ko.fetch_orders.empty",
          linked_error: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) commande(s): @:invoicesComponent.results.ko.fetch_orders.error {err}"
        },
        fetch_payments: {
          empty: "Aucun paiement trouv\xE9 !",
          error: "R\xE9cup\xE9ration depuis la table 'Paiement' SQLite !",
          linked_empty: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) paiement(s): @:invoicesComponent.results.ko.fetch_payments.empty",
          linked_error: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) paiement(s): @:invoicesComponent.results.ko.fetch_payments.error {err}"
        }
      }
    },
    libelles: {
      no_order: "Aucune commande affect\xE9e !",
      no_option_order: "Aucun commande.",
      no_payment: "Aucun paiement affect\xE9 !",
      no_option_payment: "Aucun paiement.",
      no_language: "Aucune langue affect\xE9e !",
      no_option_language: "Aucune langue.",
      no_devise: "Aucune devise affect\xE9e !",
      no_option_devise: "Aucun devise.",
      no_buyer: "Aucun acheteur affect\xE9 !",
      no_option_buyer: "Aucun acheteur.",
      no_seller: "Aucun vendeur affect\xE9 !",
      no_option_seller: "Aucun vendeur.",
      no_date: "Aucune date affect\xE9e !"
    }
  },
  profileComponent: {
    titles: {
      update: "Mise \xE0 jour du profil",
      register: "Formulaire d'inscription"
    },
    inputLabels: {
      firstName: "Pr\xE9nom",
      lastName: "Nom",
      login: "Login",
      email: "Email",
      confirmEmail: "Confirmation de l'email",
      pass: "Mot de passe",
      confirmPass: "Confirmation du mot de passe",
      companyName: "Nom de l'entreprise",
      companyLogo: "Logo de l'entreprise (uniquement au format SVG)",
      devise: "Devise",
      userType: "Type"
    },
    placeholders: {
      firstName: "Pr\xE9nom",
      lastName: "Nom",
      login: "Login",
      email: "Email",
      confirmEmail: "Confirmation de l'email",
      pass: "Mot de passe",
      confirmPass: "Confirmation du mot de passe",
      companyName: "Nom de l'entreprise",
      companyLogo: "Logo de l'entreprise",
      devise: "Devises",
      userType: "Types"
    },
    hints: {
      firstName: "Pr\xE9nom requis !",
      lastName: "Nom requis !",
      login: "Login requis !",
      email: "Email requis !",
      confirmEmail: "Confirmation de l'email requis !",
      pass: "Mot de passe requis et doit contenir minimum 8 caract\xE8res, aumoins une lettre majuscule, une minuscule, un chiffre et un caract\xE8re sp\xE9cial !",
      confirmPass: "Confirmation du mot de passe requis !",
      companyName: "Nom de l'entreprise requis !",
      companyLogo: "Logo de l'entreprise optionnel, si renseign\xE9, le fichier fourni doit \xEAtre de type SVG de taille max. {size} bits !",
      devise: "Devise requis !",
      userType: "Type requis !"
    },
    errors: {
      empty: {
        firstName: "Le pr\xE9nom ne peut \xEAtre vide !",
        lastName: "Le nom ne peut \xEAtre vide !",
        login: "Le login ne peut \xEAtre vide !",
        email: "L'email ne peut \xEAtre vide !",
        confirmEmail: "La confirmation de l'email ne peut \xEAtre vide !",
        pass: "Le mot de passe ne peut \xEAtre vide !",
        confirmPass: "La confirmation du mot de passe ne peut \xEAtre vide !",
        companyName: "Le nom de l'entreprise ne peut \xEAtre vide !",
        companyLogo: "Le logo de l'entreprise ne peut \xEAtre vide !",
        devise: "La devise de r\xE9f\xE9rence ne peut \xEAtre vide !",
        userType: "Le type de l'utilisateur ne peut \xEAtre vide !"
      },
      error: {
        firstName: "Pr\xE9nom incorrect !",
        lastName: "Nom incorrect !",
        login: "Login incorrect !",
        email: "Email incorrect !",
        confirmEmail: "Confirmation de l'email incorrecte !",
        emailBusy: "Email d\xE9ja pris !",
        emailMissmatch: "L'email et la confirmation ne correspondent pas !",
        pass: "Mot de passe incorrect !",
        confirmPass: "Confirmation du mot de passe incorrecte !",
        passMissmatch: "Le mot de passe et la confirmation ne correspondent pas !",
        companyName: "Nom de l'entreprise incorrect !",
        companyLogo: {
          accept: "Mauvaise image fournie, attendu (.svg) re\xE7u ({ext}) !",
          maxFileSize: "Fichier de taille sup\xE9rieure \xE0 la taille max., attendu (<{max}) re\xE7u ({size}) !"
        },
        devise: "Devise incorrecte !",
        userType: "Type incorrect !"
      }
    },
    libelles: {
      no_devise: "Aucune devise affect\xE9e !",
      no_option_devise: "Aucune devise.",
      no_type: "Aucun paiement affect\xE9 !",
      no_option_type: "Aucun paiement.",
      updateButton: "Soumettre",
      resetButton: "Remise \xE0 z\xE9ro",
      types: {
        regular: "Manageur",
        admin: "Administrateur"
      }
    },
    results: {
      ok: {
        add: "Profil cr\xE9\xE9 avec succ\xE8s !",
        update: "Profil mis \xE0 jour avec succ\xE8s !",
        delete: "Profil supprim\xE9 avec succ\xE8s !"
      },
      ko: {
        add: "Une erreur est survenue lors de l'ajout de l'utilisateur: {err}",
        update: "Une erreur est survenue lors de la mise \xE0 jour de l'utilisateur: {err}",
        delete: "Une erreur est survenue lors de la suppression de l'utilisateur: {err}",
        fetch_user: "Une erreur est survenue lors de lar\xE9cup\xE9ration des informations de l'utilisateur: {err}",
        fetch_userTypes: {
          empty: "Aucun type d'utilisateur trouv\xE9 !",
          error: "R\xE9cup\xE9ration depuis la table 'user_type' SQlite !",
          linked_empty: "Une erreur est survenue lors de la r\xE9cup\xE9ration des types d'utilisateur: @:profileComponent.results.ko.fetch_userTypes.empty",
          linked_error: "Une erreur est survenue lors de la r\xE9cup\xE9ration des types d'utilisateur: @:profileComponent.results.ko.fetch_userTypes.error {err}"
        },
        upload: "Une erreur est survenue lors de l'upoad du fichier de logo de l'entreprise: {err}",
        checkEmail: "Une erreur est survenue lors de la v\xE9rification de la disponibilit\xE9 de l'email: {err}"
      }
    }
  },
  exportsComponent: {
    tableTitle: "Export",
    results: {
      ko: {
        fetch_invoices: {
          error: "R\xE9cup\xE9ration depuis la table 'Facture' SQLite !",
          linked_error: "Une erreur est survenue lors de la r\xE9cup\xE9ration de(s) facture(s): @:exportComponent.results.ko.fetch_invoices.error {err}"
        }
      }
    },
    libelles: {
      invoice: "Facture",
      billingAddressLibelle: "Adresse de facturation:",
      addContentLibelle: "Contenu additionnel :",
      buyerLibelle: "Acheteur :",
      sellerLibelle: "Vendeur :",
      dateLibelle: "Date :",
      orderNumberLibelle: "Commande N#",
      descriptionLibelle: "Description",
      serviceNumberLibelle: "Code Service",
      ttUnitPriceLibelle: "Montant unitaire TTC",
      quantityLibelle: "Quantit\xE9",
      ttNetPriceLibelle: "Prix net TTC",
      ttOverallAmountLibelle: "Montant TTC",
      totalLibelle: "Total",
      vatLibelle: "TVA",
      vatBaseLibelle: "Base TVA",
      vatAmountLibelle: "Montant TVA",
      ttTotalLibelle: "Total TTC"
    }
  },
  homeComponent: {
    headTable: {
      totalFiscalYearHTIncomes: "Total de revenus HT sur l'ann\xE9e fiscale",
      totalFiscalYearTTIncomes: "Total de revenus TTC sur l'ann\xE9e fiscale",
      totalFiscalYearPaymentsIncomes: "Encaissements sur l'ann\xE9e fiscale",
      totalFiscalYearPaymentsOverdue: "Impay\xE9s sur l'ann\xE9e fiscale"
    },
    labels: {
      servicesLabel: "Service(s)",
      invoicesLabel: "Facture(s)",
      ordersLabel: "Commande(s)",
      actorsLabel: "Acteur(s)"
    },
    barChart: {
      juneLabel: "Juin",
      julyLabel: "Juillet",
      augustLabel: "Ao\xFBt",
      septemberLabel: "Septembre",
      octoberLabel: "Octobre",
      novemberLabel: "Novembre",
      decemberLabel: "Decembre",
      januaryLabel: "Janvier",
      februaryLabel: "F\xE9vrier",
      marchLabel: "Mars",
      aprilLabel: "Avril",
      mayLabel: "Mai",
      datasetLabel: "Nombre de facture(s)",
      heading: "R\xE9partition de factures sur l'ann\xE9e fiscale"
    },
    pieChart: {
      cbLabel: "Carte bleue",
      cashLabel: "Esp\xE8ce",
      chqLabel: "Ch\xE8que",
      heading: "R\xE9partition du type de paiement re\xE7u sur l'ann\xE9e fiscale"
    },
    homeTable: {
      heading: "Statistiques de l'ann\xE9e fiscale"
    },
    results: {
      ko: {
        fetch_stats: "Une erreur est survenue lors de la r\xE9cup\xE9ration des statistiques: {err}"
      }
    }
  },
  startComponent: {
    title: "Se connecter",
    inputLabels: {
      login: "Login ou email",
      pass: "Mot de passe"
    },
    placeholders: {
      login: "Login/email",
      pass: "Mot de passe"
    },
    hints: {
      login: "Login ou email utilis\xE9 lors de l'inscription est obligatoire !",
      pass: "Mot de passe utilis\xE9 lors de l'inscription est obligatoire !"
    },
    errors: {
      empty: {
        login: "Login ne peut \xEAtre vide !",
        pass: "Le mot de passe ne peut \xEAtre vide !"
      },
      error: {
        signIn: "Mauvaise combinaison login/email, mot de passe fournie !"
      }
    },
    results: {
      ko: {
        signIn: "Erreur lors de la connexion: {err}",
        session: "Une erreur est survenue lors de la r\xE9cup\xE9ration de la session: {err}"
      }
    },
    libelles: {
      signInButton: "Se connecter",
      resetButton: "Remise \xE0 z\xE9ro",
      signUp: "S'inscrire",
      logout: "Se d\xE9connecter"
    }
  },
  errorNotFoundComponent: {
    text: "Oups. Vous vous \xEAtes perdu ?...",
    buttonText: "Retour \xE0 l'accueil"
  },
  forms: {
    headTable: {
      action: "Actions",
      export: "Exporter en csv"
    },
    errors: {
      empty: {
        filterBodyContentText: "Oups... Le filtre appliqu\xE9 ne retourne aucun r\xE9sultat"
      },
      error: {
        inputs: "Une erreur est survenue lors de la validation du formulaire, veillez \xE0 v\xE9rifier que tous les champs soient valides !",
        export: "Votre navigateur a refus\xE9 le t\xE9l\xE9chargement du fichier...",
        sqliteDb: "Impossible d'ouvrir la base de donn\xE9es SQLite !"
      }
    },
    addButtonText: "Ajouter",
    updateButtonText: "Mettre \xE0 jour",
    deleteButtonText: "Supprimer",
    exportButtonText: "Exporter",
    valid: "Ok !"
  },
  session: {
    results: {
      ko: "Votre session a expir\xE9e, veuillez vous reconnecter !"
    }
  },
  footer: {
    paragraph: "\xA92023 Administr\xE9 par CryptoLogique - Entreprise de services du num\xE9rique (ESN)"
  },
  noScript: "Cette application est bas\xE9e sur le javascript. Javascript actuellement d\xE9sactiv\xE9 ou non support\xE9 !"
};
var messages = {
  "en-US": enUS,
  "fr-FR": frFR
};
const i18n = createI18n({
  locale: "en-US",
  legacy: false,
  globalInjection: true,
  messages
});
var i18n$1 = boot(({ app: app2 }) => {
  app2.use(i18n);
});
var i18n$2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": i18n$1,
  i18n
}, Symbol.toStringTag, { value: "Module" }));
const t = i18n.global.t;
const routes = [
  {
    path: "",
    name: "Main",
    component: () => __vitePreload(() => import("./MainLayout.js"), true ? ["assets/MainLayout.js","assets/MainLayout.css","assets/QList.js","assets/QNoSsr.js","assets/use-prevent-scroll.js","assets/session.js","assets/session.service.js","assets/index4.js","assets/index2.js","assets/use-quasar.js","assets/WasmModules.js"] : void 0),
    children: [
      {
        path: t("homeLinkTarget"),
        name: t("homeLinkName"),
        component: () => __vitePreload(() => import("./IndexPage.js"), true ? ["assets/IndexPage.js","assets/QNoSsr.js","assets/QPage.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/counter.js","assets/invoice.service.js","assets/service.service.js","assets/QTable.js","assets/QList.js","assets/QSelect.js","assets/use-prevent-scroll.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "homeTitle"
        }
      },
      {
        path: t("homeBisLinkTarget"),
        name: t("homeBisLinkName"),
        component: () => __vitePreload(() => import("./IndexPage.js"), true ? ["assets/IndexPage.js","assets/QNoSsr.js","assets/QPage.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/counter.js","assets/invoice.service.js","assets/service.service.js","assets/QTable.js","assets/QList.js","assets/QSelect.js","assets/use-prevent-scroll.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "homeTitle"
        }
      },
      {
        path: t("profileLinkTarget"),
        name: t("profileLinkName"),
        component: () => __vitePreload(() => import("./ProfilePage.js"), true ? ["assets/ProfilePage.js","assets/QPage.js","assets/QNoSsr.js","assets/QInput.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/QUploader.js","assets/QSelect.js","assets/use-prevent-scroll.js","assets/QForm.js","assets/invoice.js","assets/invoice.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "profileTitle"
        }
      },
      {
        path: t("aboutLinkTarget"),
        name: t("aboutLinkName"),
        component: () => __vitePreload(() => import("./AboutPage.js"), true ? ["assets/AboutPage.js","assets/QPage.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "aboutTitle"
        }
      },
      {
        path: t("startLinkTarget"),
        name: t("startLinkName"),
        component: () => __vitePreload(() => import("./StartPage.js"), true ? ["assets/StartPage.js","assets/QNoSsr.js","assets/QInput.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/QForm.js","assets/QPage.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: false,
          titleKey: "startTitle"
        }
      },
      {
        path: t("serviceLinkTarget"),
        name: t("serviceLinkName"),
        component: () => __vitePreload(() => import("./ServicePage.js"), true ? ["assets/ServicePage.js","assets/QPage.js","assets/QNoSsr.js","assets/QTable.js","assets/QList.js","assets/QSelect.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/use-prevent-scroll.js","assets/QInput.js","assets/TableItem.js","assets/service.service.js","assets/invoice.js","assets/invoice.service.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "serviceTitle"
        },
        props: {
          admin: true,
          display: false
        }
      },
      {
        path: t("actorLinkTarget"),
        name: t("actorLinkName"),
        component: () => __vitePreload(() => import("./ActorPage.js"), true ? ["assets/ActorPage.js","assets/QPage.js","assets/QNoSsr.js","assets/QTable.js","assets/QList.js","assets/QSelect.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/use-prevent-scroll.js","assets/QInput.js","assets/TableItem.js","assets/service.service.js","assets/invoice.js","assets/invoice.service.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "actorTitle"
        },
        props: {
          admin: true,
          display: false
        }
      },
      {
        path: t("orderLinkTarget"),
        name: t("orderLinkName"),
        component: () => __vitePreload(() => import("./OrderPage.js"), true ? ["assets/OrderPage.js","assets/QPage.js","assets/QNoSsr.js","assets/QTable.js","assets/QList.js","assets/QSelect.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/use-prevent-scroll.js","assets/QInput.js","assets/TableItem.js","assets/service.service.js","assets/invoice.js","assets/invoice.service.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "orderTitle"
        },
        props: {
          admin: true,
          display: false
        }
      },
      {
        path: t("paymentLinkTarget"),
        name: t("paymentLinkName"),
        component: () => __vitePreload(() => import("./PaymentPage.js"), true ? ["assets/PaymentPage.js","assets/QPage.js","assets/QNoSsr.js","assets/QTable.js","assets/QList.js","assets/QSelect.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/use-prevent-scroll.js","assets/QInput.js","assets/TableItem.js","assets/service.service.js","assets/invoice.js","assets/invoice.service.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "paymentTitle"
        },
        props: {
          admin: true,
          display: false
        }
      },
      {
        path: t("invoiceLinkTarget"),
        name: t("invoiceLinkName"),
        component: () => __vitePreload(() => import("./InvoicePage.js"), true ? ["assets/InvoicePage.js","assets/QPage.js","assets/QNoSsr.js","assets/QTable.js","assets/QList.js","assets/QSelect.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/use-prevent-scroll.js","assets/QInput.js","assets/invoice.js","assets/invoice.service.js","assets/counter.js","assets/service.service.js","assets/TableItem.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "invoiceTitle"
        },
        props: {
          admin: true,
          display: false
        }
      },
      {
        path: t("exportLinkTarget"),
        name: t("exportLinkName"),
        component: () => __vitePreload(() => import("./ExportPage.js"), true ? ["assets/ExportPage.js","assets/QPage.js","assets/QNoSsr.js","assets/QTable.js","assets/QList.js","assets/QSelect.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/use-prevent-scroll.js","assets/invoice.js","assets/invoice.service.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: true,
          titleKey: "exportTitle"
        },
        children: [
          {
            path: t("pdfLinkTarget"),
            name: t("pdfLinkName"),
            component: () => __vitePreload(() => import("./PdfComponent.js").then(function(n) {
              return n.P;
            }), true ? ["assets/PdfComponent.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/invoice.js","assets/invoice.service.js","assets/counter.js","assets/service.service.js","assets/session.js","assets/session.service.js","assets/_commonjsHelpers.js"] : void 0),
            meta: {
              requiresAuth: true,
              titleKey: "pdfTitle"
            }
          }
        ]
      },
      {
        path: t("startLinkTarget"),
        name: t("startLinkName"),
        component: () => __vitePreload(() => import("./StartPage.js"), true ? ["assets/StartPage.js","assets/QNoSsr.js","assets/QInput.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/QForm.js","assets/QPage.js","assets/session.js","assets/session.service.js"] : void 0),
        meta: {
          requiresAuth: false,
          titleKey: "startTitle"
        }
      },
      {
        path: t("registerLinkTarget"),
        name: t("registerLinkName"),
        component: () => __vitePreload(() => import("./RegisterPage.js"), true ? ["assets/RegisterPage.js","assets/QPage.js","assets/QNoSsr.js","assets/QInput.js","assets/use-key-composition.js","assets/use-quasar.js","assets/index4.js","assets/index2.js","assets/WasmModules.js","assets/QUploader.js","assets/QSelect.js","assets/use-prevent-scroll.js","assets/QForm.js","assets/invoice.js","assets/invoice.service.js"] : void 0),
        meta: {
          requiresAuth: false,
          titleKey: "registerTitle"
        }
      }
    ]
  },
  {
    path: "/:catchAll(.*)*",
    component: () => __vitePreload(() => import("./ErrorNotFound.js"), true ? [] : void 0),
    meta: {
      requiresAuth: false,
      titleKey: "notFoundTitle"
    }
  }
];
let router = null;
var createRouter = route(async function() {
  const createHistory = createWebHashHistory;
  router = await createRouter$1({
    scrollBehavior: () => ({ left: 0, top: 0 }),
    routes,
    history: createHistory("")
  });
  return router;
});
/*! Capacitor: https://capacitorjs.com/ - MIT License */
const createCapacitorPlatforms = (win) => {
  const defaultPlatformMap = /* @__PURE__ */ new Map();
  defaultPlatformMap.set("web", { name: "web" });
  const capPlatforms = win.CapacitorPlatforms || {
    currentPlatform: { name: "web" },
    platforms: defaultPlatformMap
  };
  const addPlatform = (name, platform) => {
    capPlatforms.platforms.set(name, platform);
  };
  const setPlatform = (name) => {
    if (capPlatforms.platforms.has(name)) {
      capPlatforms.currentPlatform = capPlatforms.platforms.get(name);
    }
  };
  capPlatforms.addPlatform = addPlatform;
  capPlatforms.setPlatform = setPlatform;
  return capPlatforms;
};
const initPlatforms = (win) => win.CapacitorPlatforms = createCapacitorPlatforms(win);
const CapacitorPlatforms = /* @__PURE__ */ initPlatforms(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
CapacitorPlatforms.addPlatform;
CapacitorPlatforms.setPlatform;
var ExceptionCode;
(function(ExceptionCode2) {
  ExceptionCode2["Unimplemented"] = "UNIMPLEMENTED";
  ExceptionCode2["Unavailable"] = "UNAVAILABLE";
})(ExceptionCode || (ExceptionCode = {}));
class CapacitorException extends Error {
  constructor(message, code2, data) {
    super(message);
    this.message = message;
    this.code = code2;
    this.data = data;
  }
}
const getPlatformId = (win) => {
  var _a2, _b;
  if (win === null || win === void 0 ? void 0 : win.androidBridge) {
    return "android";
  } else if ((_b = (_a2 = win === null || win === void 0 ? void 0 : win.webkit) === null || _a2 === void 0 ? void 0 : _a2.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {
    return "ios";
  } else {
    return "web";
  }
};
const createCapacitor = (win) => {
  var _a2, _b, _c, _d, _e;
  const capCustomPlatform = win.CapacitorCustomPlatform || null;
  const cap = win.Capacitor || {};
  const Plugins = cap.Plugins = cap.Plugins || {};
  const capPlatforms = win.CapacitorPlatforms;
  const defaultGetPlatform = () => {
    return capCustomPlatform !== null ? capCustomPlatform.name : getPlatformId(win);
  };
  const getPlatform2 = ((_a2 = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a2 === void 0 ? void 0 : _a2.getPlatform) || defaultGetPlatform;
  const defaultIsNativePlatform = () => getPlatform2() !== "web";
  const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;
  const defaultIsPluginAvailable = (pluginName) => {
    const plugin = registeredPlugins.get(pluginName);
    if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform2())) {
      return true;
    }
    if (getPluginHeader(pluginName)) {
      return true;
    }
    return false;
  };
  const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) || defaultIsPluginAvailable;
  const defaultGetPluginHeader = (pluginName) => {
    var _a3;
    return (_a3 = cap.PluginHeaders) === null || _a3 === void 0 ? void 0 : _a3.find((h2) => h2.name === pluginName);
  };
  const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;
  const handleError2 = (err) => win.console.error(err);
  const pluginMethodNoop = (_target, prop, pluginName) => {
    return Promise.reject(`${pluginName} does not have an implementation of "${prop}".`);
  };
  const registeredPlugins = /* @__PURE__ */ new Map();
  const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {
    const registeredPlugin = registeredPlugins.get(pluginName);
    if (registeredPlugin) {
      console.warn(`Capacitor plugin "${pluginName}" already registered. Cannot register plugins twice.`);
      return registeredPlugin.proxy;
    }
    const platform = getPlatform2();
    const pluginHeader = getPluginHeader(pluginName);
    let jsImplementation;
    const loadPluginImplementation = async () => {
      if (!jsImplementation && platform in jsImplementations) {
        jsImplementation = typeof jsImplementations[platform] === "function" ? jsImplementation = await jsImplementations[platform]() : jsImplementation = jsImplementations[platform];
      } else if (capCustomPlatform !== null && !jsImplementation && "web" in jsImplementations) {
        jsImplementation = typeof jsImplementations["web"] === "function" ? jsImplementation = await jsImplementations["web"]() : jsImplementation = jsImplementations["web"];
      }
      return jsImplementation;
    };
    const createPluginMethod = (impl, prop) => {
      var _a3, _b2;
      if (pluginHeader) {
        const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find((m) => prop === m.name);
        if (methodHeader) {
          if (methodHeader.rtype === "promise") {
            return (options) => cap.nativePromise(pluginName, prop.toString(), options);
          } else {
            return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);
          }
        } else if (impl) {
          return (_a3 = impl[prop]) === null || _a3 === void 0 ? void 0 : _a3.bind(impl);
        }
      } else if (impl) {
        return (_b2 = impl[prop]) === null || _b2 === void 0 ? void 0 : _b2.bind(impl);
      } else {
        throw new CapacitorException(`"${pluginName}" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);
      }
    };
    const createPluginMethodWrapper = (prop) => {
      let remove2;
      const wrapper = (...args) => {
        const p2 = loadPluginImplementation().then((impl) => {
          const fn = createPluginMethod(impl, prop);
          if (fn) {
            const p3 = fn(...args);
            remove2 = p3 === null || p3 === void 0 ? void 0 : p3.remove;
            return p3;
          } else {
            throw new CapacitorException(`"${pluginName}.${prop}()" is not implemented on ${platform}`, ExceptionCode.Unimplemented);
          }
        });
        if (prop === "addListener") {
          p2.remove = async () => remove2();
        }
        return p2;
      };
      wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;
      Object.defineProperty(wrapper, "name", {
        value: prop,
        writable: false,
        configurable: false
      });
      return wrapper;
    };
    const addListener = createPluginMethodWrapper("addListener");
    const removeListener = createPluginMethodWrapper("removeListener");
    const addListenerNative = (eventName, callback) => {
      const call = addListener({ eventName }, callback);
      const remove2 = async () => {
        const callbackId = await call;
        removeListener({
          eventName,
          callbackId
        }, callback);
      };
      const p2 = new Promise((resolve2) => call.then(() => resolve2({ remove: remove2 })));
      p2.remove = async () => {
        console.warn(`Using addListener() without 'await' is deprecated.`);
        await remove2();
      };
      return p2;
    };
    const proxy = new Proxy({}, {
      get(_, prop) {
        switch (prop) {
          case "$$typeof":
            return void 0;
          case "toJSON":
            return () => ({});
          case "addListener":
            return pluginHeader ? addListenerNative : addListener;
          case "removeListener":
            return removeListener;
          default:
            return createPluginMethodWrapper(prop);
        }
      }
    });
    Plugins[pluginName] = proxy;
    registeredPlugins.set(pluginName, {
      name: pluginName,
      proxy,
      platforms: /* @__PURE__ */ new Set([
        ...Object.keys(jsImplementations),
        ...pluginHeader ? [platform] : []
      ])
    });
    return proxy;
  };
  const registerPlugin2 = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;
  if (!cap.convertFileSrc) {
    cap.convertFileSrc = (filePath) => filePath;
  }
  cap.getPlatform = getPlatform2;
  cap.handleError = handleError2;
  cap.isNativePlatform = isNativePlatform;
  cap.isPluginAvailable = isPluginAvailable;
  cap.pluginMethodNoop = pluginMethodNoop;
  cap.registerPlugin = registerPlugin2;
  cap.Exception = CapacitorException;
  cap.DEBUG = !!cap.DEBUG;
  cap.isLoggingEnabled = !!cap.isLoggingEnabled;
  cap.platform = cap.getPlatform();
  cap.isNative = cap.isNativePlatform();
  return cap;
};
const initCapacitorGlobal = (win) => win.Capacitor = createCapacitor(win);
const Capacitor = /* @__PURE__ */ initCapacitorGlobal(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
const registerPlugin = Capacitor.registerPlugin;
Capacitor.Plugins;
class WebPlugin {
  constructor(config) {
    this.listeners = {};
    this.windowListeners = {};
    if (config) {
      console.warn(`Capacitor WebPlugin "${config.name}" config object was deprecated in v3 and will be removed in v4.`);
      this.config = config;
    }
  }
  addListener(eventName, listenerFunc) {
    const listeners = this.listeners[eventName];
    if (!listeners) {
      this.listeners[eventName] = [];
    }
    this.listeners[eventName].push(listenerFunc);
    const windowListener = this.windowListeners[eventName];
    if (windowListener && !windowListener.registered) {
      this.addWindowListener(windowListener);
    }
    const remove2 = async () => this.removeListener(eventName, listenerFunc);
    const p2 = Promise.resolve({ remove: remove2 });
    Object.defineProperty(p2, "remove", {
      value: async () => {
        console.warn(`Using addListener() without 'await' is deprecated.`);
        await remove2();
      }
    });
    return p2;
  }
  async removeAllListeners() {
    this.listeners = {};
    for (const listener in this.windowListeners) {
      this.removeWindowListener(this.windowListeners[listener]);
    }
    this.windowListeners = {};
  }
  notifyListeners(eventName, data) {
    const listeners = this.listeners[eventName];
    if (listeners) {
      listeners.forEach((listener) => listener(data));
    }
  }
  hasListeners(eventName) {
    return !!this.listeners[eventName].length;
  }
  registerWindowListener(windowEventName, pluginEventName) {
    this.windowListeners[pluginEventName] = {
      registered: false,
      windowEventName,
      pluginEventName,
      handler: (event) => {
        this.notifyListeners(pluginEventName, event);
      }
    };
  }
  unimplemented(msg = "not implemented") {
    return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);
  }
  unavailable(msg = "not available") {
    return new Capacitor.Exception(msg, ExceptionCode.Unavailable);
  }
  async removeListener(eventName, listenerFunc) {
    const listeners = this.listeners[eventName];
    if (!listeners) {
      return;
    }
    const index = listeners.indexOf(listenerFunc);
    this.listeners[eventName].splice(index, 1);
    if (!this.listeners[eventName].length) {
      this.removeWindowListener(this.windowListeners[eventName]);
    }
  }
  addWindowListener(handle) {
    window.addEventListener(handle.windowEventName, handle.handler);
    handle.registered = true;
  }
  removeWindowListener(handle) {
    if (!handle) {
      return;
    }
    window.removeEventListener(handle.windowEventName, handle.handler);
    handle.registered = false;
  }
}
const encode$1 = (str) => encodeURIComponent(str).replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent).replace(/[()]/g, escape);
const decode$1 = (str) => str.replace(/(%[\dA-F]{2})+/gi, decodeURIComponent);
class CapacitorCookiesPluginWeb extends WebPlugin {
  async getCookies() {
    const cookies = document.cookie;
    const cookieMap = {};
    cookies.split(";").forEach((cookie) => {
      if (cookie.length <= 0)
        return;
      let [key, value] = cookie.replace(/=/, "CAP_COOKIE").split("CAP_COOKIE");
      key = decode$1(key).trim();
      value = decode$1(value).trim();
      cookieMap[key] = value;
    });
    return cookieMap;
  }
  async setCookie(options) {
    try {
      const encodedKey = encode$1(options.key);
      const encodedValue = encode$1(options.value);
      const expires = `; expires=${(options.expires || "").replace("expires=", "")}`;
      const path = (options.path || "/").replace("path=", "");
      const domain = options.url != null && options.url.length > 0 ? `domain=${options.url}` : "";
      document.cookie = `${encodedKey}=${encodedValue || ""}${expires}; path=${path}; ${domain};`;
    } catch (error) {
      return Promise.reject(error);
    }
  }
  async deleteCookie(options) {
    try {
      document.cookie = `${options.key}=; Max-Age=0`;
    } catch (error) {
      return Promise.reject(error);
    }
  }
  async clearCookies() {
    try {
      const cookies = document.cookie.split(";") || [];
      for (const cookie of cookies) {
        document.cookie = cookie.replace(/^ +/, "").replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);
      }
    } catch (error) {
      return Promise.reject(error);
    }
  }
  async clearAllCookies() {
    try {
      await this.clearCookies();
    } catch (error) {
      return Promise.reject(error);
    }
  }
}
registerPlugin("CapacitorCookies", {
  web: () => new CapacitorCookiesPluginWeb()
});
const readBlobAsBase64 = async (blob) => new Promise((resolve2, reject) => {
  const reader = new FileReader();
  reader.onload = () => {
    const base64String = reader.result;
    resolve2(base64String.indexOf(",") >= 0 ? base64String.split(",")[1] : base64String);
  };
  reader.onerror = (error) => reject(error);
  reader.readAsDataURL(blob);
});
const normalizeHttpHeaders = (headers = {}) => {
  const originalKeys = Object.keys(headers);
  const loweredKeys = Object.keys(headers).map((k) => k.toLocaleLowerCase());
  const normalized = loweredKeys.reduce((acc, key, index) => {
    acc[key] = headers[originalKeys[index]];
    return acc;
  }, {});
  return normalized;
};
const buildUrlParams = (params, shouldEncode = true) => {
  if (!params)
    return null;
  const output = Object.entries(params).reduce((accumulator, entry) => {
    const [key, value] = entry;
    let encodedValue;
    let item;
    if (Array.isArray(value)) {
      item = "";
      value.forEach((str) => {
        encodedValue = shouldEncode ? encodeURIComponent(str) : str;
        item += `${key}=${encodedValue}&`;
      });
      item.slice(0, -1);
    } else {
      encodedValue = shouldEncode ? encodeURIComponent(value) : value;
      item = `${key}=${encodedValue}`;
    }
    return `${accumulator}&${item}`;
  }, "");
  return output.substr(1);
};
const buildRequestInit = (options, extra = {}) => {
  const output = Object.assign({ method: options.method || "GET", headers: options.headers }, extra);
  const headers = normalizeHttpHeaders(options.headers);
  const type = headers["content-type"] || "";
  if (typeof options.data === "string") {
    output.body = options.data;
  } else if (type.includes("application/x-www-form-urlencoded")) {
    const params = new URLSearchParams();
    for (const [key, value] of Object.entries(options.data || {})) {
      params.set(key, value);
    }
    output.body = params.toString();
  } else if (type.includes("multipart/form-data")) {
    const form = new FormData();
    if (options.data instanceof FormData) {
      options.data.forEach((value, key) => {
        form.append(key, value);
      });
    } else {
      for (const key of Object.keys(options.data)) {
        form.append(key, options.data[key]);
      }
    }
    output.body = form;
    const headers2 = new Headers(output.headers);
    headers2.delete("content-type");
    output.headers = headers2;
  } else if (type.includes("application/json") || typeof options.data === "object") {
    output.body = JSON.stringify(options.data);
  }
  return output;
};
class CapacitorHttpPluginWeb extends WebPlugin {
  async request(options) {
    const requestInit = buildRequestInit(options, options.webFetchExtra);
    const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);
    const url = urlParams ? `${options.url}?${urlParams}` : options.url;
    const response = await fetch(url, requestInit);
    const contentType = response.headers.get("content-type") || "";
    let { responseType = "text" } = response.ok ? options : {};
    if (contentType.includes("application/json")) {
      responseType = "json";
    }
    let data;
    let blob;
    switch (responseType) {
      case "arraybuffer":
      case "blob":
        blob = await response.blob();
        data = await readBlobAsBase64(blob);
        break;
      case "json":
        data = await response.json();
        break;
      case "document":
      case "text":
      default:
        data = await response.text();
    }
    const headers = {};
    response.headers.forEach((value, key) => {
      headers[key] = value;
    });
    return {
      data,
      headers,
      status: response.status,
      url: response.url
    };
  }
  async get(options) {
    return this.request(Object.assign(Object.assign({}, options), { method: "GET" }));
  }
  async post(options) {
    return this.request(Object.assign(Object.assign({}, options), { method: "POST" }));
  }
  async put(options) {
    return this.request(Object.assign(Object.assign({}, options), { method: "PUT" }));
  }
  async patch(options) {
    return this.request(Object.assign(Object.assign({}, options), { method: "PATCH" }));
  }
  async delete(options) {
    return this.request(Object.assign(Object.assign({}, options), { method: "DELETE" }));
  }
}
registerPlugin("CapacitorHttp", {
  web: () => new CapacitorHttpPluginWeb()
});
const SplashScreen = registerPlugin("SplashScreen", {
  web: () => __vitePreload(() => import("./web.js"), true ? [] : void 0).then((m) => new m.SplashScreenWeb())
});
const RootComponent = defineComponent({
  name: "AppWrapper",
  setup(props) {
    onMounted(() => {
      SplashScreen.hide();
    });
    return () => h(App, props);
  }
});
async function createQuasarApp(createAppFn, quasarUserOptions2) {
  const app2 = createAppFn(RootComponent);
  app2.config.performance = true;
  app2.use(Quasar, quasarUserOptions2);
  app2.config.globalProperties.$q.capacitor = window.Capacitor;
  const store2 = typeof createStore === "function" ? await createStore({}) : createStore;
  app2.use(store2);
  const router2 = markRaw(
    typeof createRouter === "function" ? await createRouter({ store: store2 }) : createRouter
  );
  store2.use(({ store: store3 }) => {
    store3.router = router2;
  });
  return {
    app: app2,
    store: store2,
    router: router2
  };
}
let target = document.body;
function createGlobalNode(id) {
  const el = document.createElement("div");
  if (id !== void 0) {
    el.id = id;
  }
  if (globalConfig.globalNodes !== void 0) {
    const cls = globalConfig.globalNodes.class;
    if (cls !== void 0) {
      el.className = cls;
    }
  }
  target.appendChild(el);
  return el;
}
function removeGlobalNode(el) {
  el.remove();
}
const createComponent = (raw) => markRaw(defineComponent(raw));
const createDirective = (raw) => markRaw(raw);
const units = ["B", "KB", "MB", "GB", "TB", "PB"];
function humanStorageSize(bytes) {
  let u = 0;
  while (parseInt(bytes, 10) >= 1024 && u < units.length - 1) {
    bytes /= 1024;
    ++u;
  }
  return `${bytes.toFixed(1)}${units[u]}`;
}
function between(v, min, max) {
  return max <= min ? min : Math.min(max, Math.max(min, v));
}
function normalizeToInterval(v, min, max) {
  if (max <= min) {
    return min;
  }
  const size2 = max - min + 1;
  let index = min + (v - min) % size2;
  if (index < min) {
    index = size2 + index;
  }
  return index === 0 ? 0 : index;
}
const xhr = XMLHttpRequest, open$1 = xhr.prototype.open, positionValues = ["top", "right", "bottom", "left"];
let stack = [];
let highjackCount = 0;
function translate({ p: p2, pos, active, horiz, reverse, dir }) {
  let x = 1, y = 1;
  if (horiz === true) {
    if (reverse === true) {
      x = -1;
    }
    if (pos === "bottom") {
      y = -1;
    }
    return { transform: `translate3d(${x * (p2 - 100)}%,${active ? 0 : y * -200}%,0)` };
  }
  if (reverse === true) {
    y = -1;
  }
  if (pos === "right") {
    x = -1;
  }
  return { transform: `translate3d(${active ? 0 : dir * x * -200}%,${y * (p2 - 100)}%,0)` };
}
function inc(p2, amount) {
  if (typeof amount !== "number") {
    if (p2 < 25) {
      amount = Math.random() * 3 + 3;
    } else if (p2 < 65) {
      amount = Math.random() * 3;
    } else if (p2 < 85) {
      amount = Math.random() * 2;
    } else if (p2 < 99) {
      amount = 0.6;
    } else {
      amount = 0;
    }
  }
  return between(p2 + amount, 0, 100);
}
function highjackAjax(stackEntry) {
  highjackCount++;
  stack.push(stackEntry);
  if (highjackCount > 1) {
    return;
  }
  xhr.prototype.open = function(_, url) {
    const stopStack = [];
    const loadStart = () => {
      stack.forEach((entry) => {
        if (entry.hijackFilter.value === null || entry.hijackFilter.value(url) === true) {
          entry.start();
          stopStack.push(entry.stop);
        }
      });
    };
    const loadEnd = () => {
      stopStack.forEach((stop2) => {
        stop2();
      });
    };
    this.addEventListener("loadstart", loadStart, { once: true });
    this.addEventListener("loadend", loadEnd, { once: true });
    open$1.apply(this, arguments);
  };
}
function restoreAjax(start2) {
  stack = stack.filter((entry) => entry.start !== start2);
  highjackCount = Math.max(0, highjackCount - 1);
  if (highjackCount === 0) {
    xhr.prototype.open = open$1;
  }
}
var QAjaxBar = createComponent({
  name: "QAjaxBar",
  props: {
    position: {
      type: String,
      default: "top",
      validator: (val) => positionValues.includes(val)
    },
    size: {
      type: String,
      default: "2px"
    },
    color: String,
    skipHijack: Boolean,
    reverse: Boolean,
    hijackFilter: Function
  },
  emits: ["start", "stop"],
  setup(props, { emit: emit2 }) {
    const { proxy } = getCurrentInstance();
    const progress = ref(0);
    const onScreen = ref(false);
    const animate = ref(true);
    let sessions = 0, timer, speed;
    const classes = computed(
      () => `q-loading-bar q-loading-bar--${props.position}` + (props.color !== void 0 ? ` bg-${props.color}` : "") + (animate.value === true ? "" : " no-transition")
    );
    const horizontal = computed(() => props.position === "top" || props.position === "bottom");
    const sizeProp = computed(() => horizontal.value === true ? "height" : "width");
    const style = computed(() => {
      const active = onScreen.value;
      const obj = translate({
        p: progress.value,
        pos: props.position,
        active,
        horiz: horizontal.value,
        reverse: proxy.$q.lang.rtl === true && ["top", "bottom"].includes(props.position) ? props.reverse === false : props.reverse,
        dir: proxy.$q.lang.rtl === true ? -1 : 1
      });
      obj[sizeProp.value] = props.size;
      obj.opacity = active ? 1 : 0;
      return obj;
    });
    const attributes = computed(() => onScreen.value === true ? {
      role: "progressbar",
      "aria-valuemin": 0,
      "aria-valuemax": 100,
      "aria-valuenow": progress.value
    } : { "aria-hidden": "true" });
    function start2(newSpeed = 300) {
      const oldSpeed = speed;
      speed = Math.max(0, newSpeed) || 0;
      sessions++;
      if (sessions > 1) {
        if (oldSpeed === 0 && newSpeed > 0) {
          planNextStep();
        } else if (oldSpeed > 0 && newSpeed <= 0) {
          clearTimeout(timer);
        }
        return sessions;
      }
      clearTimeout(timer);
      emit2("start");
      progress.value = 0;
      timer = setTimeout(() => {
        animate.value = true;
        newSpeed > 0 && planNextStep();
      }, onScreen.value === true ? 500 : 1);
      if (onScreen.value !== true) {
        onScreen.value = true;
        animate.value = false;
      }
      return sessions;
    }
    function increment(amount) {
      if (sessions > 0) {
        progress.value = inc(progress.value, amount);
      }
      return sessions;
    }
    function stop2() {
      sessions = Math.max(0, sessions - 1);
      if (sessions > 0) {
        return sessions;
      }
      clearTimeout(timer);
      emit2("stop");
      const end = () => {
        animate.value = true;
        progress.value = 100;
        timer = setTimeout(() => {
          onScreen.value = false;
        }, 1e3);
      };
      if (progress.value === 0) {
        timer = setTimeout(end, 1);
      } else {
        end();
      }
      return sessions;
    }
    function planNextStep() {
      if (progress.value < 100) {
        timer = setTimeout(() => {
          increment();
          planNextStep();
        }, speed);
      }
    }
    let hijacked;
    onMounted(() => {
      if (props.skipHijack !== true) {
        hijacked = true;
        highjackAjax({
          start: start2,
          stop: stop2,
          hijackFilter: computed(() => props.hijackFilter || null)
        });
      }
    });
    onBeforeUnmount(() => {
      clearTimeout(timer);
      hijacked === true && restoreAjax(start2);
    });
    Object.assign(proxy, { start: start2, stop: stop2, increment });
    return () => h("div", {
      class: classes.value,
      style: style.value,
      ...attributes.value
    });
  }
});
const barRef = ref(null);
const Plugin$2 = defineReactivePlugin({
  isActive: false
}, {
  start: noop$2,
  stop: noop$2,
  increment: noop$2,
  setDefaults: noop$2,
  install({ $q, parentApp }) {
    $q.loadingBar = this;
    if (this.__installed === true) {
      if ($q.config.loadingBar !== void 0) {
        this.setDefaults($q.config.loadingBar);
      }
      return;
    }
    const props = ref(
      $q.config.loadingBar !== void 0 ? { ...$q.config.loadingBar } : {}
    );
    function onStart() {
      Plugin$2.isActive = true;
    }
    function onStop() {
      Plugin$2.isActive = false;
    }
    const el = createGlobalNode("q-loading-bar");
    createChildApp({
      name: "LoadingBar",
      devtools: { hide: true },
      setup: () => () => h(QAjaxBar, { ...props.value, onStart, onStop, ref: barRef })
    }, parentApp).mount(el);
    Object.assign(this, {
      start(speed) {
        barRef.value.start(speed);
      },
      stop() {
        barRef.value.stop();
      },
      increment() {
        barRef.value.increment.apply(null, arguments);
      },
      setDefaults(opts) {
        if (isObject$2(opts) === true) {
          Object.assign(props.value, opts);
        }
      }
    });
  }
});
const useSizeDefaults = {
  xs: 18,
  sm: 24,
  md: 32,
  lg: 38,
  xl: 46
};
const useSizeProps = {
  size: String
};
function useSize(props, sizes = useSizeDefaults) {
  return computed(() => props.size !== void 0 ? { fontSize: props.size in sizes ? `${sizes[props.size]}px` : props.size } : null);
}
function hSlot(slot, otherwise) {
  return slot !== void 0 ? slot() || otherwise : otherwise;
}
function hUniqueSlot(slot, otherwise) {
  if (slot !== void 0) {
    const vnode = slot();
    if (vnode !== void 0 && vnode !== null) {
      return vnode.slice();
    }
  }
  return otherwise;
}
function hMergeSlot(slot, source) {
  return slot !== void 0 ? source.concat(slot()) : source;
}
function hMergeSlotSafely(slot, source) {
  if (slot === void 0) {
    return source;
  }
  return source !== void 0 ? source.concat(slot()) : slot();
}
function hDir(tag, data, children, key, condition, getDirsFn) {
  data.key = key + condition;
  const vnode = h(tag, data, children);
  return condition === true ? withDirectives(vnode, getDirsFn()) : vnode;
}
const defaultViewBox = "0 0 24 24";
const sameFn = (i) => i;
const ionFn = (i) => `ionicons ${i}`;
const libMap = {
  "mdi-": (i) => `mdi ${i}`,
  "icon-": sameFn,
  "bt-": (i) => `bt ${i}`,
  "eva-": (i) => `eva ${i}`,
  "ion-md": ionFn,
  "ion-ios": ionFn,
  "ion-logo": ionFn,
  "iconfont ": sameFn,
  "ti-": (i) => `themify-icon ${i}`,
  "bi-": (i) => `bootstrap-icons ${i}`
};
const matMap = {
  o_: "-outlined",
  r_: "-round",
  s_: "-sharp"
};
const symMap = {
  sym_o_: "-outlined",
  sym_r_: "-rounded",
  sym_s_: "-sharp"
};
const libRE = new RegExp("^(" + Object.keys(libMap).join("|") + ")");
const matRE = new RegExp("^(" + Object.keys(matMap).join("|") + ")");
const symRE = new RegExp("^(" + Object.keys(symMap).join("|") + ")");
const mRE = /^[Mm]\s?[-+]?\.?\d/;
const imgRE = /^img:/;
const svgUseRE = /^svguse:/;
const ionRE = /^ion-/;
const faRE = /^(fa-(solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;
var QIcon = createComponent({
  name: "QIcon",
  props: {
    ...useSizeProps,
    tag: {
      type: String,
      default: "i"
    },
    name: String,
    color: String,
    left: Boolean,
    right: Boolean
  },
  setup(props, { slots }) {
    const { proxy: { $q } } = getCurrentInstance();
    const sizeStyle = useSize(props);
    const classes = computed(
      () => "q-icon" + (props.left === true ? " on-left" : "") + (props.right === true ? " on-right" : "") + (props.color !== void 0 ? ` text-${props.color}` : "")
    );
    const type = computed(() => {
      let cls;
      let icon = props.name;
      if (icon === "none" || !icon) {
        return { none: true };
      }
      if ($q.iconMapFn !== null) {
        const res = $q.iconMapFn(icon);
        if (res !== void 0) {
          if (res.icon !== void 0) {
            icon = res.icon;
            if (icon === "none" || !icon) {
              return { none: true };
            }
          } else {
            return {
              cls: res.cls,
              content: res.content !== void 0 ? res.content : " "
            };
          }
        }
      }
      if (mRE.test(icon) === true) {
        const [def2, viewBox = defaultViewBox] = icon.split("|");
        return {
          svg: true,
          viewBox,
          nodes: def2.split("&&").map((path) => {
            const [d, style, transform] = path.split("@@");
            return h("path", { style, d, transform });
          })
        };
      }
      if (imgRE.test(icon) === true) {
        return {
          img: true,
          src: icon.substring(4)
        };
      }
      if (svgUseRE.test(icon) === true) {
        const [def2, viewBox = defaultViewBox] = icon.split("|");
        return {
          svguse: true,
          src: def2.substring(7),
          viewBox
        };
      }
      let content = " ";
      const matches = icon.match(libRE);
      if (matches !== null) {
        cls = libMap[matches[1]](icon);
      } else if (faRE.test(icon) === true) {
        cls = icon;
      } else if (ionRE.test(icon) === true) {
        cls = `ionicons ion-${$q.platform.is.ios === true ? "ios" : "md"}${icon.substring(3)}`;
      } else if (symRE.test(icon) === true) {
        cls = "notranslate material-symbols";
        const matches2 = icon.match(symRE);
        if (matches2 !== null) {
          icon = icon.substring(6);
          cls += symMap[matches2[1]];
        }
        content = icon;
      } else {
        cls = "notranslate material-icons";
        const matches2 = icon.match(matRE);
        if (matches2 !== null) {
          icon = icon.substring(2);
          cls += matMap[matches2[1]];
        }
        content = icon;
      }
      return {
        cls,
        content
      };
    });
    return () => {
      const data = {
        class: classes.value,
        style: sizeStyle.value,
        "aria-hidden": "true",
        role: "presentation"
      };
      if (type.value.none === true) {
        return h(props.tag, data, hSlot(slots.default));
      }
      if (type.value.img === true) {
        return h("span", data, hMergeSlot(slots.default, [
          h("img", { src: type.value.src })
        ]));
      }
      if (type.value.svg === true) {
        return h("span", data, hMergeSlot(slots.default, [
          h("svg", {
            viewBox: type.value.viewBox || "0 0 24 24"
          }, type.value.nodes)
        ]));
      }
      if (type.value.svguse === true) {
        return h("span", data, hMergeSlot(slots.default, [
          h("svg", {
            viewBox: type.value.viewBox
          }, [
            h("use", { "xlink:href": type.value.src })
          ])
        ]));
      }
      if (type.value.cls !== void 0) {
        data.class += " " + type.value.cls;
      }
      return h(props.tag, data, hMergeSlot(slots.default, [
        type.value.content
      ]));
    };
  }
});
var QAvatar = createComponent({
  name: "QAvatar",
  props: {
    ...useSizeProps,
    fontSize: String,
    color: String,
    textColor: String,
    icon: String,
    square: Boolean,
    rounded: Boolean
  },
  setup(props, { slots }) {
    const sizeStyle = useSize(props);
    const classes = computed(
      () => "q-avatar" + (props.color ? ` bg-${props.color}` : "") + (props.textColor ? ` text-${props.textColor} q-chip--colored` : "") + (props.square === true ? " q-avatar--square" : props.rounded === true ? " rounded-borders" : "")
    );
    const contentStyle = computed(() => props.fontSize ? { fontSize: props.fontSize } : null);
    return () => {
      const icon = props.icon !== void 0 ? [h(QIcon, { name: props.icon })] : void 0;
      return h("div", {
        class: classes.value,
        style: sizeStyle.value
      }, [
        h("div", {
          class: "q-avatar__content row flex-center overflow-hidden",
          style: contentStyle.value
        }, hMergeSlotSafely(slots.default, icon))
      ]);
    };
  }
});
const useSpinnerProps = {
  size: {
    type: [Number, String],
    default: "1em"
  },
  color: String
};
function useSpinner(props) {
  return {
    cSize: computed(() => props.size in useSizeDefaults ? `${useSizeDefaults[props.size]}px` : props.size),
    classes: computed(
      () => "q-spinner" + (props.color ? ` text-${props.color}` : "")
    )
  };
}
var QSpinner = createComponent({
  name: "QSpinner",
  props: {
    ...useSpinnerProps,
    thickness: {
      type: Number,
      default: 5
    }
  },
  setup(props) {
    const { cSize, classes } = useSpinner(props);
    return () => h("svg", {
      class: classes.value + " q-spinner-mat",
      width: cSize.value,
      height: cSize.value,
      viewBox: "25 25 50 50"
    }, [
      h("circle", {
        class: "path",
        cx: "50",
        cy: "50",
        r: "20",
        fill: "none",
        stroke: "currentColor",
        "stroke-width": props.thickness,
        "stroke-miterlimit": "10"
      })
    ]);
  }
});
function css(element, css2) {
  const style = element.style;
  for (const prop in css2) {
    style[prop] = css2[prop];
  }
}
function getElement(el) {
  if (el === void 0 || el === null) {
    return void 0;
  }
  if (typeof el === "string") {
    try {
      return document.querySelector(el) || void 0;
    } catch (err) {
      return void 0;
    }
  }
  const target2 = unref(el);
  if (target2) {
    return target2.$el || target2;
  }
}
function childHasFocus(el, focusedEl) {
  if (el === void 0 || el === null || el.contains(focusedEl) === true) {
    return true;
  }
  for (let next = el.nextElementSibling; next !== null; next = next.nextElementSibling) {
    if (next.contains(focusedEl)) {
      return true;
    }
  }
  return false;
}
function throttle(fn, limit = 250) {
  let wait = false, result;
  return function() {
    if (wait === false) {
      wait = true;
      setTimeout(() => {
        wait = false;
      }, limit);
      result = fn.apply(this, arguments);
    }
    return result;
  };
}
function showRipple(evt, el, ctx, forceCenter) {
  ctx.modifiers.stop === true && stop(evt);
  const color = ctx.modifiers.color;
  let center = ctx.modifiers.center;
  center = center === true || forceCenter === true;
  const node = document.createElement("span"), innerNode = document.createElement("span"), pos = position(evt), { left, top, width, height } = el.getBoundingClientRect(), diameter = Math.sqrt(width * width + height * height), radius = diameter / 2, centerX = `${(width - diameter) / 2}px`, x = center ? centerX : `${pos.left - left - radius}px`, centerY = `${(height - diameter) / 2}px`, y = center ? centerY : `${pos.top - top - radius}px`;
  innerNode.className = "q-ripple__inner";
  css(innerNode, {
    height: `${diameter}px`,
    width: `${diameter}px`,
    transform: `translate3d(${x},${y},0) scale3d(.2,.2,1)`,
    opacity: 0
  });
  node.className = `q-ripple${color ? " text-" + color : ""}`;
  node.setAttribute("dir", "ltr");
  node.appendChild(innerNode);
  el.appendChild(node);
  const abort = () => {
    node.remove();
    clearTimeout(timer);
  };
  ctx.abort.push(abort);
  let timer = setTimeout(() => {
    innerNode.classList.add("q-ripple__inner--enter");
    innerNode.style.transform = `translate3d(${centerX},${centerY},0) scale3d(1,1,1)`;
    innerNode.style.opacity = 0.2;
    timer = setTimeout(() => {
      innerNode.classList.remove("q-ripple__inner--enter");
      innerNode.classList.add("q-ripple__inner--leave");
      innerNode.style.opacity = 0;
      timer = setTimeout(() => {
        node.remove();
        ctx.abort.splice(ctx.abort.indexOf(abort), 1);
      }, 275);
    }, 250);
  }, 50);
}
function updateModifiers(ctx, { modifiers, value, arg }) {
  const cfg = Object.assign({}, ctx.cfg.ripple, modifiers, value);
  ctx.modifiers = {
    early: cfg.early === true,
    stop: cfg.stop === true,
    center: cfg.center === true,
    color: cfg.color || arg,
    keyCodes: [].concat(cfg.keyCodes || 13)
  };
}
var Ripple = createDirective(
  {
    name: "ripple",
    beforeMount(el, binding) {
      const cfg = binding.instance.$.appContext.config.globalProperties.$q.config || {};
      if (cfg.ripple === false) {
        return;
      }
      const ctx = {
        cfg,
        enabled: binding.value !== false,
        modifiers: {},
        abort: [],
        start(evt) {
          if (ctx.enabled === true && evt.qSkipRipple !== true && evt.type === (ctx.modifiers.early === true ? "pointerdown" : "click")) {
            showRipple(evt, el, ctx, evt.qKeyEvent === true);
          }
        },
        keystart: throttle((evt) => {
          if (ctx.enabled === true && evt.qSkipRipple !== true && isKeyCode(evt, ctx.modifiers.keyCodes) === true && evt.type === `key${ctx.modifiers.early === true ? "down" : "up"}`) {
            showRipple(evt, el, ctx, true);
          }
        }, 300)
      };
      updateModifiers(ctx, binding);
      el.__qripple = ctx;
      addEvt(ctx, "main", [
        [el, "pointerdown", "start", "passive"],
        [el, "click", "start", "passive"],
        [el, "keydown", "keystart", "passive"],
        [el, "keyup", "keystart", "passive"]
      ]);
    },
    updated(el, binding) {
      if (binding.oldValue !== binding.value) {
        const ctx = el.__qripple;
        if (ctx !== void 0) {
          ctx.enabled = binding.value !== false;
          if (ctx.enabled === true && Object(binding.value) === binding.value) {
            updateModifiers(ctx, binding);
          }
        }
      }
    },
    beforeUnmount(el) {
      const ctx = el.__qripple;
      if (ctx !== void 0) {
        ctx.abort.forEach((fn) => {
          fn();
        });
        cleanEvt(ctx, "main");
        delete el._qripple;
      }
    }
  }
);
const alignMap = {
  left: "start",
  center: "center",
  right: "end",
  between: "between",
  around: "around",
  evenly: "evenly",
  stretch: "stretch"
};
const alignValues = Object.keys(alignMap);
const useAlignProps = {
  align: {
    type: String,
    validator: (v) => alignValues.includes(v)
  }
};
function useAlign(props) {
  return computed(() => {
    const align = props.align === void 0 ? props.vertical === true ? "stretch" : "left" : props.align;
    return `${props.vertical === true ? "items" : "justify"}-${alignMap[align]}`;
  });
}
function getParentProxy(proxy) {
  if (Object(proxy.$parent) === proxy.$parent) {
    return proxy.$parent;
  }
  let { parent } = proxy.$;
  while (Object(parent) === parent) {
    if (Object(parent.proxy) === parent.proxy) {
      return parent.proxy;
    }
    parent = parent.parent;
  }
}
function vmHasRouter(vm) {
  return vm.appContext.config.globalProperties.$router !== void 0;
}
function vmIsDestroyed(vm) {
  return vm.isUnmounted === true || vm.isDeactivated === true;
}
function getOriginalPath(record) {
  return record ? record.aliasOf ? record.aliasOf.path : record.path : "";
}
function isSameRouteRecord(a, b) {
  return (a.aliasOf || a) === (b.aliasOf || b);
}
function includesParams(outer, inner) {
  for (const key in inner) {
    const innerValue = inner[key], outerValue = outer[key];
    if (typeof innerValue === "string") {
      if (innerValue !== outerValue) {
        return false;
      }
    } else if (Array.isArray(outerValue) === false || outerValue.length !== innerValue.length || innerValue.some((value, i) => value !== outerValue[i])) {
      return false;
    }
  }
  return true;
}
function isEquivalentArray(a, b) {
  return Array.isArray(b) === true ? a.length === b.length && a.every((value, i) => value === b[i]) : a.length === 1 && a[0] === b;
}
function isSameRouteLocationParamsValue(a, b) {
  return Array.isArray(a) === true ? isEquivalentArray(a, b) : Array.isArray(b) === true ? isEquivalentArray(b, a) : a === b;
}
function isSameRouteLocationParams(a, b) {
  if (Object.keys(a).length !== Object.keys(b).length) {
    return false;
  }
  for (const key in a) {
    if (isSameRouteLocationParamsValue(a[key], b[key]) === false) {
      return false;
    }
  }
  return true;
}
const useRouterLinkProps = {
  to: [String, Object],
  replace: Boolean,
  exact: Boolean,
  activeClass: {
    type: String,
    default: "q-router-link--active"
  },
  exactActiveClass: {
    type: String,
    default: "q-router-link--exact-active"
  },
  href: String,
  target: String,
  disable: Boolean
};
function useRouterLink({ fallbackTag, useDisableForRouterLinkProps = true } = {}) {
  const vm = getCurrentInstance();
  const { props, proxy, emit: emit2 } = vm;
  const hasRouter = vmHasRouter(vm);
  const hasHrefLink = computed(() => props.disable !== true && props.href !== void 0);
  const hasRouterLinkProps = useDisableForRouterLinkProps === true ? computed(
    () => hasRouter === true && props.disable !== true && hasHrefLink.value !== true && props.to !== void 0 && props.to !== null && props.to !== ""
  ) : computed(
    () => hasRouter === true && hasHrefLink.value !== true && props.to !== void 0 && props.to !== null && props.to !== ""
  );
  const resolvedLink = computed(() => hasRouterLinkProps.value === true ? getLink(props.to) : null);
  const hasRouterLink = computed(() => resolvedLink.value !== null);
  const hasLink = computed(() => hasHrefLink.value === true || hasRouterLink.value === true);
  const linkTag = computed(() => props.type === "a" || hasLink.value === true ? "a" : props.tag || fallbackTag || "div");
  const linkAttrs = computed(() => hasHrefLink.value === true ? {
    href: props.href,
    target: props.target
  } : hasRouterLink.value === true ? {
    href: resolvedLink.value.href,
    target: props.target
  } : {});
  const linkActiveIndex = computed(() => {
    if (hasRouterLink.value === false) {
      return -1;
    }
    const { matched } = resolvedLink.value, { length } = matched, routeMatched = matched[length - 1];
    if (routeMatched === void 0) {
      return -1;
    }
    const currentMatched = proxy.$route.matched;
    if (currentMatched.length === 0) {
      return -1;
    }
    const index = currentMatched.findIndex(
      isSameRouteRecord.bind(null, routeMatched)
    );
    if (index > -1) {
      return index;
    }
    const parentRecordPath = getOriginalPath(matched[length - 2]);
    return length > 1 && getOriginalPath(routeMatched) === parentRecordPath && currentMatched[currentMatched.length - 1].path !== parentRecordPath ? currentMatched.findIndex(
      isSameRouteRecord.bind(null, matched[length - 2])
    ) : index;
  });
  const linkIsActive = computed(
    () => hasRouterLink.value === true && linkActiveIndex.value !== -1 && includesParams(proxy.$route.params, resolvedLink.value.params)
  );
  const linkIsExactActive = computed(
    () => linkIsActive.value === true && linkActiveIndex.value === proxy.$route.matched.length - 1 && isSameRouteLocationParams(proxy.$route.params, resolvedLink.value.params)
  );
  const linkClass = computed(() => hasRouterLink.value === true ? linkIsExactActive.value === true ? ` ${props.exactActiveClass} ${props.activeClass}` : props.exact === true ? "" : linkIsActive.value === true ? ` ${props.activeClass}` : "" : "");
  function getLink(to) {
    try {
      return proxy.$router.resolve(to);
    } catch (_) {
    }
    return null;
  }
  function navigateToRouterLink(e, { returnRouterError, to = props.to, replace = props.replace } = {}) {
    if (props.disable === true) {
      e.preventDefault();
      return Promise.resolve(false);
    }
    if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey || e.button !== void 0 && e.button !== 0 || props.target === "_blank") {
      return Promise.resolve(false);
    }
    e.preventDefault();
    const promise = proxy.$router[replace === true ? "replace" : "push"](to);
    return returnRouterError === true ? promise : promise.then(() => {
    }).catch(() => {
    });
  }
  function navigateOnClick(e) {
    if (hasRouterLink.value === true) {
      const go = (opts) => navigateToRouterLink(e, opts);
      emit2("click", e, go);
      e.defaultPrevented !== true && go();
    } else {
      emit2("click", e);
    }
  }
  return {
    hasRouterLink,
    hasHrefLink,
    hasLink,
    linkTag,
    resolvedLink,
    linkIsActive,
    linkIsExactActive,
    linkClass,
    linkAttrs,
    getLink,
    navigateToRouterLink,
    navigateOnClick
  };
}
const btnPadding = {
  none: 0,
  xs: 4,
  sm: 8,
  md: 16,
  lg: 24,
  xl: 32
};
const defaultSizes = {
  xs: 8,
  sm: 10,
  md: 14,
  lg: 20,
  xl: 24
};
const formTypes = ["button", "submit", "reset"];
const mediaTypeRE = /[^\s]\/[^\s]/;
const btnDesignOptions = ["flat", "outline", "push", "unelevated"];
const getBtnDesign = (props, defaultValue) => {
  if (props.flat === true)
    return "flat";
  if (props.outline === true)
    return "outline";
  if (props.push === true)
    return "push";
  if (props.unelevated === true)
    return "unelevated";
  return defaultValue;
};
const getBtnDesignAttr = (props) => {
  const design = getBtnDesign(props);
  return design !== void 0 ? { [design]: true } : {};
};
const useBtnProps = {
  ...useSizeProps,
  ...useRouterLinkProps,
  type: {
    type: String,
    default: "button"
  },
  label: [Number, String],
  icon: String,
  iconRight: String,
  ...btnDesignOptions.reduce(
    (acc, val) => (acc[val] = Boolean) && acc,
    {}
  ),
  square: Boolean,
  round: Boolean,
  rounded: Boolean,
  glossy: Boolean,
  size: String,
  fab: Boolean,
  fabMini: Boolean,
  padding: String,
  color: String,
  textColor: String,
  noCaps: Boolean,
  noWrap: Boolean,
  dense: Boolean,
  tabindex: [Number, String],
  ripple: {
    type: [Boolean, Object],
    default: true
  },
  align: {
    ...useAlignProps.align,
    default: "center"
  },
  stack: Boolean,
  stretch: Boolean,
  loading: {
    type: Boolean,
    default: null
  },
  disable: Boolean
};
function useBtn(props) {
  const sizeStyle = useSize(props, defaultSizes);
  const alignClass = useAlign(props);
  const { hasRouterLink, hasLink, linkTag, linkAttrs, navigateOnClick } = useRouterLink({
    fallbackTag: "button"
  });
  const style = computed(() => {
    const obj = props.fab === false && props.fabMini === false ? sizeStyle.value : {};
    return props.padding !== void 0 ? Object.assign({}, obj, {
      padding: props.padding.split(/\s+/).map((v) => v in btnPadding ? btnPadding[v] + "px" : v).join(" "),
      minWidth: "0",
      minHeight: "0"
    }) : obj;
  });
  const isRounded = computed(
    () => props.rounded === true || props.fab === true || props.fabMini === true
  );
  const isActionable = computed(
    () => props.disable !== true && props.loading !== true
  );
  const tabIndex = computed(() => isActionable.value === true ? props.tabindex || 0 : -1);
  const design = computed(() => getBtnDesign(props, "standard"));
  const attributes = computed(() => {
    const acc = { tabindex: tabIndex.value };
    if (hasLink.value === true) {
      Object.assign(acc, linkAttrs.value);
    } else if (formTypes.includes(props.type) === true) {
      acc.type = props.type;
    }
    if (linkTag.value === "a") {
      if (props.disable === true) {
        acc["aria-disabled"] = "true";
      } else if (acc.href === void 0) {
        acc.role = "button";
      }
      if (hasRouterLink.value !== true && mediaTypeRE.test(props.type) === true) {
        acc.type = props.type;
      }
    } else if (props.disable === true) {
      acc.disabled = "";
      acc["aria-disabled"] = "true";
    }
    if (props.loading === true && props.percentage !== void 0) {
      Object.assign(acc, {
        role: "progressbar",
        "aria-valuemin": 0,
        "aria-valuemax": 100,
        "aria-valuenow": props.percentage
      });
    }
    return acc;
  });
  const classes = computed(() => {
    let colors;
    if (props.color !== void 0) {
      if (props.flat === true || props.outline === true) {
        colors = `text-${props.textColor || props.color}`;
      } else {
        colors = `bg-${props.color} text-${props.textColor || "white"}`;
      }
    } else if (props.textColor) {
      colors = `text-${props.textColor}`;
    }
    const shape = props.round === true ? "round" : `rectangle${isRounded.value === true ? " q-btn--rounded" : props.square === true ? " q-btn--square" : ""}`;
    return `q-btn--${design.value} q-btn--${shape}` + (colors !== void 0 ? " " + colors : "") + (isActionable.value === true ? " q-btn--actionable q-focusable q-hoverable" : props.disable === true ? " disabled" : "") + (props.fab === true ? " q-btn--fab" : props.fabMini === true ? " q-btn--fab-mini" : "") + (props.noCaps === true ? " q-btn--no-uppercase" : "") + (props.dense === true ? " q-btn--dense" : "") + (props.stretch === true ? " no-border-radius self-stretch" : "") + (props.glossy === true ? " glossy" : "") + (props.square ? " q-btn--square" : "");
  });
  const innerClasses = computed(
    () => alignClass.value + (props.stack === true ? " column" : " row") + (props.noWrap === true ? " no-wrap text-no-wrap" : "") + (props.loading === true ? " q-btn__content--hidden" : "")
  );
  return {
    classes,
    style,
    innerClasses,
    attributes,
    hasLink,
    linkTag,
    navigateOnClick,
    isActionable
  };
}
const { passiveCapture } = listenOpts;
let touchTarget = null, keyboardTarget = null, mouseTarget = null;
var QBtn = createComponent({
  name: "QBtn",
  props: {
    ...useBtnProps,
    percentage: Number,
    darkPercentage: Boolean,
    onTouchstart: [Function, Array]
  },
  emits: ["click", "keydown", "mousedown", "keyup"],
  setup(props, { slots, emit: emit2 }) {
    const { proxy } = getCurrentInstance();
    const {
      classes,
      style,
      innerClasses,
      attributes,
      hasLink,
      linkTag,
      navigateOnClick,
      isActionable
    } = useBtn(props);
    const rootRef = ref(null);
    const blurTargetRef = ref(null);
    let localTouchTargetEl = null, avoidMouseRipple, mouseTimer;
    const hasLabel = computed(
      () => props.label !== void 0 && props.label !== null && props.label !== ""
    );
    const ripple = computed(() => props.disable === true || props.ripple === false ? false : {
      keyCodes: hasLink.value === true ? [13, 32] : [13],
      ...props.ripple === true ? {} : props.ripple
    });
    const rippleProps = computed(() => ({ center: props.round }));
    const percentageStyle = computed(() => {
      const val = Math.max(0, Math.min(100, props.percentage));
      return val > 0 ? { transition: "transform 0.6s", transform: `translateX(${val - 100}%)` } : {};
    });
    const onEvents = computed(() => {
      if (props.loading === true) {
        return {
          onMousedown: onLoadingEvt,
          onTouchstart: onLoadingEvt,
          onClick: onLoadingEvt,
          onKeydown: onLoadingEvt,
          onKeyup: onLoadingEvt
        };
      }
      if (isActionable.value === true) {
        const acc = {
          onClick,
          onKeydown,
          onMousedown
        };
        if (proxy.$q.platform.has.touch === true) {
          const suffix = props.onTouchstart !== void 0 ? "" : "Passive";
          acc[`onTouchstart${suffix}`] = onTouchstart;
        }
        return acc;
      }
      return {
        onClick: stopAndPrevent
      };
    });
    const nodeProps = computed(() => ({
      ref: rootRef,
      class: "q-btn q-btn-item non-selectable no-outline " + classes.value,
      style: style.value,
      ...attributes.value,
      ...onEvents.value
    }));
    function onClick(e) {
      if (rootRef.value === null) {
        return;
      }
      if (e !== void 0) {
        if (e.defaultPrevented === true) {
          return;
        }
        const el = document.activeElement;
        if (props.type === "submit" && el !== document.body && rootRef.value.contains(el) === false && el.contains(rootRef.value) === false) {
          rootRef.value.focus();
          const onClickCleanup = () => {
            document.removeEventListener("keydown", stopAndPrevent, true);
            document.removeEventListener("keyup", onClickCleanup, passiveCapture);
            rootRef.value !== null && rootRef.value.removeEventListener("blur", onClickCleanup, passiveCapture);
          };
          document.addEventListener("keydown", stopAndPrevent, true);
          document.addEventListener("keyup", onClickCleanup, passiveCapture);
          rootRef.value.addEventListener("blur", onClickCleanup, passiveCapture);
        }
      }
      navigateOnClick(e);
    }
    function onKeydown(e) {
      if (rootRef.value === null) {
        return;
      }
      emit2("keydown", e);
      if (isKeyCode(e, [13, 32]) === true && keyboardTarget !== rootRef.value) {
        keyboardTarget !== null && cleanup();
        if (e.defaultPrevented !== true) {
          rootRef.value.focus();
          keyboardTarget = rootRef.value;
          rootRef.value.classList.add("q-btn--active");
          document.addEventListener("keyup", onPressEnd, true);
          rootRef.value.addEventListener("blur", onPressEnd, passiveCapture);
        }
        stopAndPrevent(e);
      }
    }
    function onTouchstart(e) {
      if (rootRef.value === null) {
        return;
      }
      emit2("touchstart", e);
      if (e.defaultPrevented === true) {
        return;
      }
      if (touchTarget !== rootRef.value) {
        touchTarget !== null && cleanup();
        touchTarget = rootRef.value;
        localTouchTargetEl = e.target;
        localTouchTargetEl.addEventListener("touchcancel", onPressEnd, passiveCapture);
        localTouchTargetEl.addEventListener("touchend", onPressEnd, passiveCapture);
      }
      avoidMouseRipple = true;
      clearTimeout(mouseTimer);
      mouseTimer = setTimeout(() => {
        avoidMouseRipple = false;
      }, 200);
    }
    function onMousedown(e) {
      if (rootRef.value === null) {
        return;
      }
      e.qSkipRipple = avoidMouseRipple === true;
      emit2("mousedown", e);
      if (e.defaultPrevented !== true && mouseTarget !== rootRef.value) {
        mouseTarget !== null && cleanup();
        mouseTarget = rootRef.value;
        rootRef.value.classList.add("q-btn--active");
        document.addEventListener("mouseup", onPressEnd, passiveCapture);
      }
    }
    function onPressEnd(e) {
      if (rootRef.value === null) {
        return;
      }
      if (e !== void 0 && e.type === "blur" && document.activeElement === rootRef.value) {
        return;
      }
      if (e !== void 0 && e.type === "keyup") {
        if (keyboardTarget === rootRef.value && isKeyCode(e, [13, 32]) === true) {
          const evt = new MouseEvent("click", e);
          evt.qKeyEvent = true;
          e.defaultPrevented === true && prevent(evt);
          e.cancelBubble === true && stop(evt);
          rootRef.value.dispatchEvent(evt);
          stopAndPrevent(e);
          e.qKeyEvent = true;
        }
        emit2("keyup", e);
      }
      cleanup();
    }
    function cleanup(destroying) {
      const blurTarget = blurTargetRef.value;
      if (destroying !== true && (touchTarget === rootRef.value || mouseTarget === rootRef.value) && blurTarget !== null && blurTarget !== document.activeElement) {
        blurTarget.setAttribute("tabindex", -1);
        blurTarget.focus();
      }
      if (touchTarget === rootRef.value) {
        if (localTouchTargetEl !== null) {
          localTouchTargetEl.removeEventListener("touchcancel", onPressEnd, passiveCapture);
          localTouchTargetEl.removeEventListener("touchend", onPressEnd, passiveCapture);
        }
        touchTarget = localTouchTargetEl = null;
      }
      if (mouseTarget === rootRef.value) {
        document.removeEventListener("mouseup", onPressEnd, passiveCapture);
        mouseTarget = null;
      }
      if (keyboardTarget === rootRef.value) {
        document.removeEventListener("keyup", onPressEnd, true);
        rootRef.value !== null && rootRef.value.removeEventListener("blur", onPressEnd, passiveCapture);
        keyboardTarget = null;
      }
      rootRef.value !== null && rootRef.value.classList.remove("q-btn--active");
    }
    function onLoadingEvt(evt) {
      stopAndPrevent(evt);
      evt.qSkipRipple = true;
    }
    onBeforeUnmount(() => {
      cleanup(true);
    });
    Object.assign(proxy, { click: onClick });
    return () => {
      let inner = [];
      props.icon !== void 0 && inner.push(
        h(QIcon, {
          name: props.icon,
          left: props.stack === false && hasLabel.value === true,
          role: "img",
          "aria-hidden": "true"
        })
      );
      hasLabel.value === true && inner.push(
        h("span", { class: "block" }, [props.label])
      );
      inner = hMergeSlot(slots.default, inner);
      if (props.iconRight !== void 0 && props.round === false) {
        inner.push(
          h(QIcon, {
            name: props.iconRight,
            right: props.stack === false && hasLabel.value === true,
            role: "img",
            "aria-hidden": "true"
          })
        );
      }
      const child = [
        h("span", {
          class: "q-focus-helper",
          ref: blurTargetRef
        })
      ];
      if (props.loading === true && props.percentage !== void 0) {
        child.push(
          h("span", {
            class: "q-btn__progress absolute-full overflow-hidden" + (props.darkPercentage === true ? " q-btn__progress--dark" : "")
          }, [
            h("span", {
              class: "q-btn__progress-indicator fit block",
              style: percentageStyle.value
            })
          ])
        );
      }
      child.push(
        h("span", {
          class: "q-btn__content text-center col items-center q-anchor--skip " + innerClasses.value
        }, inner)
      );
      props.loading !== null && child.push(
        h(Transition, {
          name: "q-transition--fade"
        }, () => props.loading === true ? [
          h("span", {
            key: "loading",
            class: "absolute-full flex flex-center"
          }, slots.loading !== void 0 ? slots.loading() : [h(QSpinner)])
        ] : null)
      );
      return withDirectives(
        h(
          linkTag.value,
          nodeProps.value,
          child
        ),
        [[
          Ripple,
          ripple.value,
          void 0,
          rippleProps.value
        ]]
      );
    };
  }
});
let uid = 0;
const defaults = {};
const groups = {};
const notificationsList = {};
const positionClass = {};
const emptyRE = /^\s*$/;
const notifRefs = [];
const positionList = [
  "top-left",
  "top-right",
  "bottom-left",
  "bottom-right",
  "top",
  "bottom",
  "left",
  "right",
  "center"
];
const badgePositions = [
  "top-left",
  "top-right",
  "bottom-left",
  "bottom-right"
];
const notifTypes = {
  positive: {
    icon: ($q) => $q.iconSet.type.positive,
    color: "positive"
  },
  negative: {
    icon: ($q) => $q.iconSet.type.negative,
    color: "negative"
  },
  warning: {
    icon: ($q) => $q.iconSet.type.warning,
    color: "warning",
    textColor: "dark"
  },
  info: {
    icon: ($q) => $q.iconSet.type.info,
    color: "info"
  },
  ongoing: {
    group: false,
    timeout: 0,
    spinner: true,
    color: "grey-8"
  }
};
function addNotification(config, $q, originalApi) {
  if (!config) {
    return logError("parameter required");
  }
  let Api;
  const notif = { textColor: "white" };
  if (config.ignoreDefaults !== true) {
    Object.assign(notif, defaults);
  }
  if (isObject$2(config) === false) {
    if (notif.type) {
      Object.assign(notif, notifTypes[notif.type]);
    }
    config = { message: config };
  }
  Object.assign(notif, notifTypes[config.type || notif.type], config);
  if (typeof notif.icon === "function") {
    notif.icon = notif.icon($q);
  }
  if (!notif.spinner) {
    notif.spinner = false;
  } else {
    if (notif.spinner === true) {
      notif.spinner = QSpinner;
    }
    notif.spinner = markRaw(notif.spinner);
  }
  notif.meta = {
    hasMedia: Boolean(notif.spinner !== false || notif.icon || notif.avatar),
    hasText: hasContent(notif.message) || hasContent(notif.caption)
  };
  if (notif.position) {
    if (positionList.includes(notif.position) === false) {
      return logError("wrong position", config);
    }
  } else {
    notif.position = "bottom";
  }
  if (notif.timeout === void 0) {
    notif.timeout = 5e3;
  } else {
    const t2 = parseInt(notif.timeout, 10);
    if (isNaN(t2) || t2 < 0) {
      return logError("wrong timeout", config);
    }
    notif.timeout = t2;
  }
  if (notif.timeout === 0) {
    notif.progress = false;
  } else if (notif.progress === true) {
    notif.meta.progressClass = "q-notification__progress" + (notif.progressClass ? ` ${notif.progressClass}` : "");
    notif.meta.progressStyle = {
      animationDuration: `${notif.timeout + 1e3}ms`
    };
  }
  const actions = (Array.isArray(config.actions) === true ? config.actions : []).concat(
    config.ignoreDefaults !== true && Array.isArray(defaults.actions) === true ? defaults.actions : []
  ).concat(
    notifTypes[config.type] !== void 0 && Array.isArray(notifTypes[config.type].actions) === true ? notifTypes[config.type].actions : []
  );
  const { closeBtn } = notif;
  closeBtn && actions.push({
    label: typeof closeBtn === "string" ? closeBtn : $q.lang.label.close
  });
  notif.actions = actions.map(({ handler, noDismiss, ...item }) => ({
    flat: true,
    ...item,
    onClick: typeof handler === "function" ? () => {
      handler();
      noDismiss !== true && dismiss();
    } : () => {
      dismiss();
    }
  }));
  if (notif.multiLine === void 0) {
    notif.multiLine = notif.actions.length > 1;
  }
  Object.assign(notif.meta, {
    class: `q-notification row items-stretch q-notification--${notif.multiLine === true ? "multi-line" : "standard"}` + (notif.color !== void 0 ? ` bg-${notif.color}` : "") + (notif.textColor !== void 0 ? ` text-${notif.textColor}` : "") + (notif.classes !== void 0 ? ` ${notif.classes}` : ""),
    wrapperClass: "q-notification__wrapper col relative-position border-radius-inherit " + (notif.multiLine === true ? "column no-wrap justify-center" : "row items-center"),
    contentClass: "q-notification__content row items-center" + (notif.multiLine === true ? "" : " col"),
    leftClass: notif.meta.hasText === true ? "additional" : "single",
    attrs: {
      role: "alert",
      ...notif.attrs
    }
  });
  if (notif.group === false) {
    notif.group = void 0;
    notif.meta.group = void 0;
  } else {
    if (notif.group === void 0 || notif.group === true) {
      notif.group = [
        notif.message,
        notif.caption,
        notif.multiline
      ].concat(
        notif.actions.map((props) => `${props.label}*${props.icon}`)
      ).join("|");
    }
    notif.meta.group = notif.group + "|" + notif.position;
  }
  if (notif.actions.length === 0) {
    notif.actions = void 0;
  } else {
    notif.meta.actionsClass = "q-notification__actions row items-center " + (notif.multiLine === true ? "justify-end" : "col-auto") + (notif.meta.hasMedia === true ? " q-notification__actions--with-media" : "");
  }
  if (originalApi !== void 0) {
    clearTimeout(originalApi.notif.meta.timer);
    notif.meta.uid = originalApi.notif.meta.uid;
    const index = notificationsList[notif.position].value.indexOf(originalApi.notif);
    notificationsList[notif.position].value[index] = notif;
  } else {
    const original = groups[notif.meta.group];
    if (original === void 0) {
      notif.meta.uid = uid++;
      notif.meta.badge = 1;
      if (["left", "right", "center"].indexOf(notif.position) !== -1) {
        notificationsList[notif.position].value.splice(
          Math.floor(notificationsList[notif.position].value.length / 2),
          0,
          notif
        );
      } else {
        const action = notif.position.indexOf("top") > -1 ? "unshift" : "push";
        notificationsList[notif.position].value[action](notif);
      }
      if (notif.group !== void 0) {
        groups[notif.meta.group] = notif;
      }
    } else {
      clearTimeout(original.meta.timer);
      if (notif.badgePosition !== void 0) {
        if (badgePositions.includes(notif.badgePosition) === false) {
          return logError("wrong badgePosition", config);
        }
      } else {
        notif.badgePosition = `top-${notif.position.indexOf("left") > -1 ? "right" : "left"}`;
      }
      notif.meta.uid = original.meta.uid;
      notif.meta.badge = original.meta.badge + 1;
      notif.meta.badgeClass = `q-notification__badge q-notification__badge--${notif.badgePosition}` + (notif.badgeColor !== void 0 ? ` bg-${notif.badgeColor}` : "") + (notif.badgeTextColor !== void 0 ? ` text-${notif.badgeTextColor}` : "") + (notif.badgeClass ? ` ${notif.badgeClass}` : "");
      const index = notificationsList[notif.position].value.indexOf(original);
      notificationsList[notif.position].value[index] = groups[notif.meta.group] = notif;
    }
  }
  const dismiss = () => {
    removeNotification(notif);
    Api = void 0;
  };
  if (notif.timeout > 0) {
    notif.meta.timer = setTimeout(() => {
      dismiss();
    }, notif.timeout + 1e3);
  }
  if (notif.group !== void 0) {
    return (props) => {
      if (props !== void 0) {
        logError("trying to update a grouped one which is forbidden", config);
      } else {
        dismiss();
      }
    };
  }
  Api = {
    dismiss,
    config,
    notif
  };
  if (originalApi !== void 0) {
    Object.assign(originalApi, Api);
    return;
  }
  return (props) => {
    if (Api !== void 0) {
      if (props === void 0) {
        Api.dismiss();
      } else {
        const newNotif = Object.assign({}, Api.config, props, {
          group: false,
          position: notif.position
        });
        addNotification(newNotif, $q, Api);
      }
    }
  };
}
function removeNotification(notif) {
  clearTimeout(notif.meta.timer);
  const index = notificationsList[notif.position].value.indexOf(notif);
  if (index !== -1) {
    if (notif.group !== void 0) {
      delete groups[notif.meta.group];
    }
    const el = notifRefs["" + notif.meta.uid];
    if (el) {
      const { width, height } = getComputedStyle(el);
      el.style.left = `${el.offsetLeft}px`;
      el.style.width = width;
      el.style.height = height;
    }
    notificationsList[notif.position].value.splice(index, 1);
    if (typeof notif.onDismiss === "function") {
      notif.onDismiss();
    }
  }
}
function hasContent(str) {
  return str !== void 0 && str !== null && emptyRE.test(str) !== true;
}
function logError(error, config) {
  console.error(`Notify: ${error}`, config);
  return false;
}
function getComponent() {
  return createComponent({
    name: "QNotifications",
    devtools: { hide: true },
    setup() {
      return () => h("div", { class: "q-notifications" }, positionList.map((pos) => {
        return h(TransitionGroup, {
          key: pos,
          class: positionClass[pos],
          tag: "div",
          name: `q-notification--${pos}`
        }, () => notificationsList[pos].value.map((notif) => {
          const meta = notif.meta;
          const mainChild = [];
          if (meta.hasMedia === true) {
            if (notif.spinner !== false) {
              mainChild.push(
                h(notif.spinner, {
                  class: "q-notification__spinner q-notification__spinner--" + meta.leftClass,
                  color: notif.spinnerColor,
                  size: notif.spinnerSize
                })
              );
            } else if (notif.icon) {
              mainChild.push(
                h(QIcon, {
                  class: "q-notification__icon q-notification__icon--" + meta.leftClass,
                  name: notif.icon,
                  color: notif.iconColor,
                  size: notif.iconSize,
                  role: "img"
                })
              );
            } else if (notif.avatar) {
              mainChild.push(
                h(QAvatar, {
                  class: "q-notification__avatar q-notification__avatar--" + meta.leftClass
                }, () => h("img", { src: notif.avatar, "aria-hidden": "true" }))
              );
            }
          }
          if (meta.hasText === true) {
            let msgChild;
            const msgData = { class: "q-notification__message col" };
            if (notif.html === true) {
              msgData.innerHTML = notif.caption ? `<div>${notif.message}</div><div class="q-notification__caption">${notif.caption}</div>` : notif.message;
            } else {
              const msgNode = [notif.message];
              msgChild = notif.caption ? [
                h("div", msgNode),
                h("div", { class: "q-notification__caption" }, [notif.caption])
              ] : msgNode;
            }
            mainChild.push(
              h("div", msgData, msgChild)
            );
          }
          const child = [
            h("div", { class: meta.contentClass }, mainChild)
          ];
          notif.progress === true && child.push(
            h("div", {
              key: `${meta.uid}|p|${meta.badge}`,
              class: meta.progressClass,
              style: meta.progressStyle
            })
          );
          notif.actions !== void 0 && child.push(
            h("div", {
              class: meta.actionsClass
            }, notif.actions.map((props) => h(QBtn, props)))
          );
          meta.badge > 1 && child.push(
            h("div", {
              key: `${meta.uid}|${meta.badge}`,
              class: notif.meta.badgeClass,
              style: notif.badgeStyle
            }, [meta.badge])
          );
          return h("div", {
            ref: (el) => {
              notifRefs["" + meta.uid] = el;
            },
            key: meta.uid,
            class: meta.class,
            ...meta.attrs
          }, [
            h("div", { class: meta.wrapperClass }, child)
          ]);
        }));
      }));
    }
  });
}
var Notify = {
  setDefaults(opts) {
    {
      isObject$2(opts) === true && Object.assign(defaults, opts);
    }
  },
  registerType(typeName, typeOpts) {
    if (isObject$2(typeOpts) === true) {
      notifTypes[typeName] = typeOpts;
    }
  },
  install({ $q, parentApp }) {
    $q.notify = this.create = (opts) => addNotification(opts, $q);
    $q.notify.setDefaults = this.setDefaults;
    $q.notify.registerType = this.registerType;
    if ($q.config.notify !== void 0) {
      this.setDefaults($q.config.notify);
    }
    if (this.__installed !== true) {
      positionList.forEach((pos) => {
        notificationsList[pos] = ref([]);
        const vert = ["left", "center", "right"].includes(pos) === true ? "center" : pos.indexOf("top") > -1 ? "top" : "bottom", align = pos.indexOf("left") > -1 ? "start" : pos.indexOf("right") > -1 ? "end" : "center", classes = ["left", "right"].includes(pos) ? `items-${pos === "left" ? "start" : "end"} justify-center` : pos === "center" ? "flex-center" : `items-${align}`;
        positionClass[pos] = `q-notifications__list q-notifications__list--${vert} fixed column no-wrap ${classes}`;
      });
      const el = createGlobalNode("q-notify");
      createChildApp(getComponent(), parentApp).mount(el);
    }
  }
};
function encode(value) {
  if (isDate$1(value) === true) {
    return "__q_date|" + value.toUTCString();
  }
  if (isRegexp(value) === true) {
    return "__q_expr|" + value.source;
  }
  if (typeof value === "number") {
    return "__q_numb|" + value;
  }
  if (typeof value === "boolean") {
    return "__q_bool|" + (value ? "1" : "0");
  }
  if (typeof value === "string") {
    return "__q_strn|" + value;
  }
  if (typeof value === "function") {
    return "__q_strn|" + value.toString();
  }
  if (value === Object(value)) {
    return "__q_objt|" + JSON.stringify(value);
  }
  return value;
}
function decode(value) {
  const length = value.length;
  if (length < 9) {
    return value;
  }
  const type = value.substring(0, 8);
  const source = value.substring(9);
  switch (type) {
    case "__q_date":
      return new Date(source);
    case "__q_expr":
      return new RegExp(source);
    case "__q_numb":
      return Number(source);
    case "__q_bool":
      return Boolean(source === "1");
    case "__q_strn":
      return "" + source;
    case "__q_objt":
      return JSON.parse(source);
    default:
      return value;
  }
}
function getEmptyStorage() {
  const getVal = () => null;
  return {
    has: () => false,
    getLength: () => 0,
    getItem: getVal,
    getIndex: getVal,
    getKey: getVal,
    getAll: () => {
    },
    getAllKeys: () => [],
    set: noop$2,
    remove: noop$2,
    clear: noop$2,
    isEmpty: () => true
  };
}
function getStorage(type) {
  const webStorage = window[type + "Storage"], get2 = (key) => {
    const item = webStorage.getItem(key);
    return item ? decode(item) : null;
  };
  return {
    has: (key) => webStorage.getItem(key) !== null,
    getLength: () => webStorage.length,
    getItem: get2,
    getIndex: (index) => {
      return index < webStorage.length ? get2(webStorage.key(index)) : null;
    },
    getKey: (index) => {
      return index < webStorage.length ? webStorage.key(index) : null;
    },
    getAll: () => {
      let key;
      const result = {}, len = webStorage.length;
      for (let i = 0; i < len; i++) {
        key = webStorage.key(i);
        result[key] = get2(key);
      }
      return result;
    },
    getAllKeys: () => {
      const result = [], len = webStorage.length;
      for (let i = 0; i < len; i++) {
        result.push(webStorage.key(i));
      }
      return result;
    },
    set: (key, value) => {
      webStorage.setItem(key, encode(value));
    },
    remove: (key) => {
      webStorage.removeItem(key);
    },
    clear: () => {
      webStorage.clear();
    },
    isEmpty: () => webStorage.length === 0
  };
}
const storage$1 = client.has.webStorage === false ? getEmptyStorage() : getStorage("local");
const Plugin$1 = {
  install({ $q }) {
    $q.localStorage = storage$1;
  }
};
Object.assign(Plugin$1, storage$1);
const storage = client.has.webStorage === false ? getEmptyStorage() : getStorage("session");
const Plugin = {
  install({ $q }) {
    $q.sessionStorage = storage;
  }
};
Object.assign(Plugin, storage);
const toString = Object.prototype.toString, hasOwn = Object.prototype.hasOwnProperty, notPlainObject = new Set(
  ["Boolean", "Number", "String", "Function", "Array", "Date", "RegExp"].map((name) => "[object " + name + "]")
);
function isPlainObject(obj) {
  if (obj !== Object(obj) || notPlainObject.has(toString.call(obj)) === true) {
    return false;
  }
  if (obj.constructor && hasOwn.call(obj, "constructor") === false && hasOwn.call(obj.constructor.prototype, "isPrototypeOf") === false) {
    return false;
  }
  let key;
  for (key in obj) {
  }
  return key === void 0 || hasOwn.call(obj, key);
}
function extend() {
  let options, name, src, copy, copyIsArray, clone, target2 = arguments[0] || {}, i = 1, deep = false;
  const length = arguments.length;
  if (typeof target2 === "boolean") {
    deep = target2;
    target2 = arguments[1] || {};
    i = 2;
  }
  if (Object(target2) !== target2 && typeof target2 !== "function") {
    target2 = {};
  }
  if (length === i) {
    target2 = this;
    i--;
  }
  for (; i < length; i++) {
    if ((options = arguments[i]) !== null) {
      for (name in options) {
        src = target2[name];
        copy = options[name];
        if (target2 === copy) {
          continue;
        }
        if (deep === true && copy && ((copyIsArray = Array.isArray(copy)) || isPlainObject(copy) === true)) {
          if (copyIsArray === true) {
            clone = Array.isArray(src) === true ? src : [];
          } else {
            clone = isPlainObject(src) === true ? src : {};
          }
          target2[name] = extend(deep, clone, copy);
        } else if (copy !== void 0) {
          target2[name] = copy;
        }
      }
    }
  }
  return target2;
}
let updateId, currentClientMeta;
const clientList = [];
function normalize(meta) {
  if (meta.title) {
    meta.title = meta.titleTemplate ? meta.titleTemplate(meta.title) : meta.title;
    delete meta.titleTemplate;
  }
  [["meta", "content"], ["link", "href"]].forEach((type) => {
    const metaType = meta[type[0]], metaProp = type[1];
    for (const name in metaType) {
      const metaLink = metaType[name];
      if (metaLink.template) {
        if (Object.keys(metaLink).length === 1) {
          delete metaType[name];
        } else {
          metaLink[metaProp] = metaLink.template(metaLink[metaProp] || "");
          delete metaLink.template;
        }
      }
    }
  });
}
function changed(old, def2) {
  if (Object.keys(old).length !== Object.keys(def2).length) {
    return true;
  }
  for (const key in old) {
    if (old[key] !== def2[key]) {
      return true;
    }
  }
}
function bodyFilter(name) {
  return ["class", "style"].includes(name) === false;
}
function htmlFilter(name) {
  return ["lang", "dir"].includes(name) === false;
}
function diff(meta, other) {
  const add2 = {}, remove2 = {};
  if (meta === void 0) {
    return { add: other, remove: remove2 };
  }
  if (meta.title !== other.title) {
    add2.title = other.title;
  }
  ["meta", "link", "script", "htmlAttr", "bodyAttr"].forEach((type) => {
    const old = meta[type], cur = other[type];
    remove2[type] = [];
    if (old === void 0 || old === null) {
      add2[type] = cur;
      return;
    }
    add2[type] = {};
    for (const key in old) {
      if (cur.hasOwnProperty(key) === false) {
        remove2[type].push(key);
      }
    }
    for (const key in cur) {
      if (old.hasOwnProperty(key) === false) {
        add2[type][key] = cur[key];
      } else if (changed(old[key], cur[key]) === true) {
        remove2[type].push(key);
        add2[type][key] = cur[key];
      }
    }
  });
  return { add: add2, remove: remove2 };
}
function apply({ add: add2, remove: remove2 }) {
  if (add2.title) {
    document.title = add2.title;
  }
  if (Object.keys(remove2).length > 0) {
    ["meta", "link", "script"].forEach((type) => {
      remove2[type].forEach((name) => {
        document.head.querySelector(`${type}[data-qmeta="${name}"]`).remove();
      });
    });
    remove2.htmlAttr.filter(htmlFilter).forEach((name) => {
      document.documentElement.removeAttribute(name);
    });
    remove2.bodyAttr.filter(bodyFilter).forEach((name) => {
      document.body.removeAttribute(name);
    });
  }
  ["meta", "link", "script"].forEach((type) => {
    const metaType = add2[type];
    for (const name in metaType) {
      const tag = document.createElement(type);
      for (const att in metaType[name]) {
        if (att !== "innerHTML") {
          tag.setAttribute(att, metaType[name][att]);
        }
      }
      tag.setAttribute("data-qmeta", name);
      if (type === "script") {
        tag.innerHTML = metaType[name].innerHTML || "";
      }
      document.head.appendChild(tag);
    }
  });
  Object.keys(add2.htmlAttr).filter(htmlFilter).forEach((name) => {
    document.documentElement.setAttribute(name, add2.htmlAttr[name] || "");
  });
  Object.keys(add2.bodyAttr).filter(bodyFilter).forEach((name) => {
    document.body.setAttribute(name, add2.bodyAttr[name] || "");
  });
}
function updateClientMeta() {
  const data = {
    title: "",
    titleTemplate: null,
    meta: {},
    link: {},
    script: {},
    htmlAttr: {},
    bodyAttr: {}
  };
  for (let i = 0; i < clientList.length; i++) {
    const { active, val } = clientList[i];
    if (active === true) {
      extend(true, data, val);
    }
  }
  normalize(data);
  apply(diff(currentClientMeta, data));
  currentClientMeta = data;
}
function planClientUpdate() {
  clearTimeout(updateId);
  updateId = setTimeout(updateClientMeta, 50);
}
var Meta = {
  install(opts) {
    if (this.__installed !== true && isRuntimeSsrPreHydration.value === true) {
      currentClientMeta = window.__Q_META__;
      document.getElementById("qmeta-init").remove();
    }
  }
};
var quasarUserOptions = { config: { "loadingBar": { "isActive": true }, "notify": { "timeout": 5e3 } }, plugins: { LoadingBar: Plugin$2, Notify, LocalStorage: Plugin$1, SessionStorage: Plugin, Cookies: Plugin$3, Meta } };
let appPrefetch = typeof App.preFetch === "function" ? App.preFetch : App.__c !== void 0 && typeof App.__c.preFetch === "function" ? App.__c.preFetch : false;
function getMatchedComponents(to, router2) {
  const route2 = to ? to.matched ? to : router2.resolve(to).route : router2.currentRoute.value;
  if (!route2) {
    return [];
  }
  const matched = route2.matched.filter((m) => m.components !== void 0);
  if (matched.length === 0) {
    return [];
  }
  return Array.prototype.concat.apply([], matched.map((m) => {
    return Object.keys(m.components).map((key) => {
      const comp = m.components[key];
      return {
        path: m.path,
        c: comp
      };
    });
  }));
}
function addPreFetchHooks({ router: router2, store: store2, publicPath: publicPath2 }) {
  router2.beforeResolve((to, from, next) => {
    const urlPath = window.location.href.replace(window.location.origin, ""), matched = getMatchedComponents(to, router2), prevMatched = getMatchedComponents(from, router2);
    let diffed = false;
    const preFetchList = matched.filter((m, i) => {
      return diffed || (diffed = !prevMatched[i] || prevMatched[i].c !== m.c || m.path.indexOf("/:") > -1);
    }).filter((m) => m.c !== void 0 && (typeof m.c.preFetch === "function" || m.c.__c !== void 0 && typeof m.c.__c.preFetch === "function")).map((m) => m.c.__c !== void 0 ? m.c.__c.preFetch : m.c.preFetch);
    if (appPrefetch !== false) {
      preFetchList.unshift(appPrefetch);
      appPrefetch = false;
    }
    if (preFetchList.length === 0) {
      return next();
    }
    let hasRedirected = false;
    const redirect = (url) => {
      hasRedirected = true;
      next(url);
    };
    const proceed = () => {
      Plugin$2.stop();
      if (hasRedirected === false) {
        next();
      }
    };
    Plugin$2.start();
    preFetchList.reduce(
      (promise, preFetch) => promise.then(() => hasRedirected === false && preFetch({
        store: store2,
        currentRoute: to,
        previousRoute: from,
        redirect,
        urlPath,
        publicPath: publicPath2
      })),
      Promise.resolve()
    ).then(proceed).catch((e) => {
      console.error(e);
      proceed();
    });
  });
}
const publicPath = ``;
async function start({
  app: app2,
  router: router2,
  store: store2
}, bootFiles) {
  let hasRedirected = false;
  const getRedirectUrl = (url) => {
    try {
      return router2.resolve(url).href;
    } catch (err) {
    }
    return Object(url) === url ? null : url;
  };
  const redirect = (url) => {
    hasRedirected = true;
    if (typeof url === "string" && /^https?:\/\//.test(url)) {
      window.location.href = url;
      return;
    }
    const href = getRedirectUrl(url);
    if (href !== null) {
      window.location.href = href;
      window.location.reload();
    }
  };
  const urlPath = window.location.href.replace(window.location.origin, "");
  for (let i = 0; hasRedirected === false && i < bootFiles.length; i++) {
    try {
      await bootFiles[i]({
        app: app2,
        router: router2,
        store: store2,
        ssrContext: null,
        redirect,
        urlPath,
        publicPath
      });
    } catch (err) {
      if (err && err.url) {
        redirect(err.url);
        return;
      }
      console.error("[Quasar] boot error:", err);
      return;
    }
  }
  if (hasRedirected === true) {
    return;
  }
  app2.use(router2);
  addPreFetchHooks({ router: router2, store: store2 });
  app2.mount("#q-app");
}
createQuasarApp(createApp, quasarUserOptions).then((app2) => {
  const [method, mapFn] = Promise.allSettled !== void 0 ? [
    "allSettled",
    (bootFiles) => bootFiles.map((result) => {
      if (result.status === "rejected") {
        console.error("[Quasar] boot error:", result.reason);
        return;
      }
      return result.value.default;
    })
  ] : [
    "all",
    (bootFiles) => bootFiles.map((entry) => entry.default)
  ];
  return Promise[method]([
    __vitePreload(() => Promise.resolve().then(function() {
      return i18n$2;
    }), true ? void 0 : void 0),
    __vitePreload(() => import("./axios.js"), true ? ["assets/axios.js","assets/index2.js"] : void 0),
    __vitePreload(() => import("./secret.js"), true ? ["assets/secret.js","assets/WasmModules.js"] : void 0),
    __vitePreload(() => import("./hydrate_store.js"), true ? [] : void 0),
    __vitePreload(() => import("./capacitor_http.js").then(function(n) {
      return n.h;
    }), true ? [] : void 0),
    __vitePreload(() => import("./auth.js"), true ? ["assets/auth.js","assets/session.service.js","assets/index4.js","assets/index2.js","assets/index3.js"] : void 0)
  ]).then((bootFiles) => {
    const boot2 = mapFn(bootFiles).filter((entry) => typeof entry === "function");
    start(app2, boot2);
  });
});
export { defineComponent as $, noop$2 as A, nextTick as B, listenOpts as C, provide as D, onDeactivated as E, onActivated as F, layoutKey as G, hUniqueSlot as H, createDirective as I, client as J, leftClick as K, addEvt as L, preventDraggable as M, prevent as N, position as O, Platform as P, QIcon as Q, Ripple as R, cleanEvt as S, hDir as T, between as U, pageContainerKey as V, WebPlugin as W, isRuntimeSsrPreHydration as X, reactive as Y, onUnmounted as Z, __vitePreload as _, Plugin$3 as a, humanStorageSize as a$, resolveComponent as a0, createBlock as a1, withCtx as a2, openBlock as a3, createVNode as a4, createCommentVNode as a5, createElementBlock as a6, renderList as a7, Fragment as a8, createTextVNode as a9, Teleport as aA, vmIsDestroyed as aB, getElement as aC, css as aD, childHasFocus as aE, History as aF, getEventPath as aG, defineStore as aH, cookieStorage as aI, extend as aJ, quasarKey as aK, shallowRef as aL, toRaw as aM, isProxy as aN, version as aO, formKey as aP, debounce as aQ, onBeforeUpdate as aR, useSizeProps as aS, useSize as aT, isNumber$1 as aU, isDate$1 as aV, injectMultipleProps as aW, hMergeSlotSafely as aX, onUpdated as aY, normalizeToInterval as aZ, isRef as a_, toDisplayString$1 as aa, QAvatar as ab, _export_sfc as ac, defineReactivePlugin as ad, createGlobalNode as ae, createApp as af, isObject$2 as ag, Transition as ah, QSpinner as ai, removeGlobalNode as aj, planClientUpdate as ak, clientList as al, useRoute as am, useRouter as an, useI18n as ao, onBeforeMount as ap, unref as aq, createBaseVNode as ar, normalizeStyle as as, normalizeClass as at, mergeProps as au, useRouterLinkProps as av, useRouterLink as aw, vmHasRouter as ax, getParentProxy as ay, injectProp as az, boot as b, uploaderKey as b0, createSlots as b1, renderSlot as b2, Capacitor as b3, createComponent as c, computed as d, hSlot as e, ref as f, getCurrentInstance as g, h, i18n as i, QBtn as j, getBtnDesignAttr as k, inject as l, emptyRenderFn as m, onBeforeUnmount as n, onMounted as o, withDirectives as p, stopAndPrevent as q, registerPlugin as r, stop as s, tabsKey as t, useBtnProps as u, isKeyCode as v, watch as w, shouldIgnoreKey as x, hMergeSlot as y, isDeepEqual as z };
//# sourceMappingURL=data:application/json;base64,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QU8sVUFBVSxVQUFVO0FBQ3pFLFVBQU1oSCxNQUFLZ0gsS0FBSTtBQUFBLEVBQ3JCLENBQUs7QUFDRiIsIm5hbWVzIjpbImlzQXJyYXkiLCJpc1N0cmluZyIsImlzT2JqZWN0IiwidG9EaXNwbGF5U3RyaW5nIiwib2JqZWN0VG9TdHJpbmciLCJpc0Z1bmN0aW9uIiwidmFsIiwiaXNQbGFpbk9iamVjdCIsImV4dGVuZCIsInJlbW92ZSIsImhhc093blByb3BlcnR5IiwiaGFzT3duIiwidG9UeXBlU3RyaW5nIiwiY2FjaGUiLCJjYXBpdGFsaXplIiwiX2dsb2JhbFRoaXMiLCJnZXRHbG9iYWxUaGlzIiwidGFyZ2V0Iiwic2hvdWxkVHJhY2siLCJrZXkiLCJnZXQiLCJpc1JlYWRvbmx5Iiwic2V0IiwiaGFzIiwiZ2V0JDEiLCJpc1NoYWxsb3ciLCJoYXMkMSIsInNldCQxIiwibXV0YWJsZUluc3RydW1lbnRhdGlvbnMiLCJzaGFsbG93SW5zdHJ1bWVudGF0aW9ucyIsInJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyIsInNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMiLCJyZWYiLCJzZWxmIiwiY29tcHV0ZWQiLCJ3YXJuIiwibG9nRXJyb3IiLCJwIiwic3RhcnQiLCJzZWVuIiwiZGlmZiIsImRldnRvb2xzIiwiX2EiLCJhcHAiLCJ2ZXJzaW9uIiwiaXNNb2RlbExpc3RlbmVyIiwibnVtYmVyIiwicmVuZGVyIiwiaXNTaGFsbG93JDEiLCJjYWxsSG9vayIsImhvb2siLCJ2bm9kZSIsImlzVk5vZGUiLCJiYXNlIiwibWVyZ2VPcHRpb25zIiwidCIsIm5vcm1hbGl6ZVNsb3QiLCJ1aWQiLCJjcmVhdGVBcHAiLCJjb250YWluZXIiLCJhbmNob3IiLCJ1aWQkMSIsImlzQm9vbGVhbiIsImUiLCJoIiwicmVzb2x2ZSIsInVzZXJBZ2VudCIsIm5vb3AiLCJlbCIsIlBsdWdpbiIsImRlZiIsImlzRGF0ZSIsImlzTnVtYmVyIiwiRGFyayIsIkxhbmciLCJJY29uU2V0IiwibGFuZyIsImljb25TZXQiLCJNdXRhdGlvblR5cGUiLCJ4aHIiLCJvcGVuIiwiZm9ybWF0RGlzcGxheSIsInN0b3JlIiwic3RhdGUiLCJub3ciLCJhc3NpZ24iLCJvcHRpb25zIiwiY3VycmVudEluc3RhbmNlIiwic3RvcmFnZSIsImVuY29kZSIsImRlY29kZSIsIkNvb2tpZXMiLCJwaW5pYVBsdWdpblBlcnNpc3RlZHN0YXRlIiwicGFyc2VRdWVyeSIsImxvY2F0aW9uIiwic3RyaW5naWZ5UXVlcnkiLCJpc1NhbWVSb3V0ZVJlY29yZCIsImlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMiLCJpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zVmFsdWUiLCJpc0VxdWl2YWxlbnRBcnJheSIsInBvc2l0aW9uIiwiTmF2aWdhdGlvblR5cGUiLCJOYXZpZ2F0aW9uRGlyZWN0aW9uIiwiaGlzdG9yeSIsInJlcGxhY2UiLCJyb3V0ZSIsIk5hdmlnYXRpb25GYWlsdXJlVHlwZSIsInJlIiwicGFyc2UiLCJidWZmZXIiLCJyb3V0ZXMiLCJkZWZhdWx0cyIsInZhbHVlIiwiYWRkIiwicm91dGVyIiwiZ2V0T3JpZ2luYWxQYXRoIiwiaW5jbHVkZXNQYXJhbXMiLCJjcmVhdGVSb3V0ZXIiLCJtYXRjaGVkUm91dGUiLCJocmVmIiwiZmFpbHVyZSIsImNvZGUiLCJtZXNzYWdlcyIsIm5vcm1hbGl6ZSIsInR5cGUiLCJpMThuIiwiVkVSU0lPTiIsImluYyIsInRyYW5zbGF0ZSIsInJlc29sdmVWYWx1ZSIsIm1zZyIsInNvdXJjZSIsIm1lc3NhZ2UiLCJsb2NhbGUiLCJnbG9iYWwiLCJsb2NhbGVzIiwiX2NvbnRleHQiLCJhcHBseSIsImVzY2FwZSIsImNvbXBvc2VyIiwiRXhjZXB0aW9uQ29kZSIsImdldFBsYXRmb3JtIiwiaGFuZGxlRXJyb3IiLCJfYiIsInJlZ2lzdGVyUGx1Z2luIiwiaGVhZGVycyIsIkFwcENvbXBvbmVudCIsInF1YXNhclVzZXJPcHRpb25zIiwic2l6ZSIsInN0b3AiLCJtYXRjaGVzIiwiY3NzIiwiTG9hZGluZ0JhciIsIkxvY2FsU3RvcmFnZSIsIlNlc3Npb25TdG9yYWdlIiwiYm9vdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3ZpdGUvcHJlbG9hZC1oZWxwZXIiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9zaGFyZWQvZGlzdC9zaGFyZWQuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9yZWFjdGl2aXR5L2Rpc3QvcmVhY3Rpdml0eS5lc20tYnVuZGxlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3J1bnRpbWUtY29yZS9kaXN0L3J1bnRpbWUtY29yZS5lc20tYnVuZGxlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3J1bnRpbWUtZG9tL2Rpc3QvcnVudGltZS1kb20uZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2luamVjdC1vYmotcHJvcC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvUGxhdGZvcm0uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2RlZmluZS1yZWFjdGl2ZS1wbHVnaW4uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9ldmVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL2RlYm91bmNlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9TY3JlZW4uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL0RhcmsuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9oaXN0b3J5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9sYW5nL2VuLVVTLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2xhbmcuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9zZXQtY3NzLXZhci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUva2V5LWNvbXBvc2l0aW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvYm9keS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvaWNvbi1zZXQvbWF0ZXJpYWwtaWNvbnMubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvaWNvbi1zZXQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL3N5bWJvbHMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2dsb2JhbC1jb25maWcuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9pcy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2luc3RhbGwtcXVhc2FyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdnVlLXBsdWdpbi5qcyIsIi4uLy4uLy4uL3BsdWdpbi12dWU6ZXhwb3J0LWhlbHBlciIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvd3JhcHBlcnMvaW5kZXgubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3BpbmlhL25vZGVfbW9kdWxlcy92dWUtZGVtaS9saWIvaW5kZXgubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvZGV2dG9vbHMtYXBpL2xpYi9lc20vZW52LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvZGV2dG9vbHMtYXBpL2xpYi9lc20vY29uc3QuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1hcGkvbGliL2VzbS90aW1lLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvZGV2dG9vbHMtYXBpL2xpYi9lc20vcHJveHkuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1hcGkvbGliL2VzbS9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9waW5pYS9kaXN0L3BpbmlhLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9waW5pYS1wbHVnaW4tcGVyc2lzdGVkc3RhdGUvZGlzdC9pbmRleC5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL0Nvb2tpZXMuanMiLCIuLi8uLi8uLi9zcmMvc3RvcmVzL3N0b3JhZ2UudHMiLCIuLi8uLi8uLi9zcmMvc3RvcmVzL2luZGV4LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaW50bGlmeS9zaGFyZWQvZGlzdC9zaGFyZWQuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGludGxpZnkvbWVzc2FnZS1jb21waWxlci9kaXN0L21lc3NhZ2UtY29tcGlsZXIuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGludGxpZnkvZGV2dG9vbHMtaWYvZGlzdC9kZXZ0b29scy1pZi5lc20tYnVuZGxlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaW50bGlmeS9jb3JlLWJhc2UvZGlzdC9jb3JlLWJhc2UuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGludGxpZnkvdnVlLWRldnRvb2xzL2Rpc3QvdnVlLWRldnRvb2xzLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1pMThuL2Rpc3QvdnVlLWkxOG4ucnVudGltZS5lc20tYnVuZGxlci5qcyIsIi4uLy4uLy4uL3NyYy9pMThuL2VuLVVTL2luZGV4LnRzIiwiLi4vLi4vLi4vc3JjL2kxOG4vZnItRlIvaW5kZXgudHMiLCIuLi8uLi8uLi9zcmMvaTE4bi9pbmRleC50cyIsIi4uLy4uLy4uL3NyYy9ib290L2kxOG4udHMiLCIuLi8uLi8uLi9zcmMvcm91dGVyL3JvdXRlcy50cyIsIi4uLy4uLy4uL3NyYy9yb3V0ZXIvaW5kZXgudHMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQGNhcGFjaXRvci9jb3JlL2Rpc3QvaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQGNhcGFjaXRvci9zcGxhc2gtc2NyZWVuL2Rpc3QvZXNtL2luZGV4LmpzIiwiLi4vLi4vLi4vLnF1YXNhci9hcHAuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2dsb2JhbC1ub2Rlcy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvZm9ybWF0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9hamF4LWJhci9RQWpheEJhci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvTG9hZGluZ0Jhci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXNpemUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL3JlbmRlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvaWNvbi9RSWNvbi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvYXZhdGFyL1FBdmF0YXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvdXNlLXNwaW5uZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvUVNwaW5uZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9kb20uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy90aHJvdHRsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2RpcmVjdGl2ZXMvUmlwcGxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtYWxpZ24uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL3ZtLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utcm91dGVyLWxpbmsuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2J0bi91c2UtYnRuLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9idG4vUUJ0bi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvTm90aWZ5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS93ZWItc3RvcmFnZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvTG9jYWxTdG9yYWdlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9TZXNzaW9uU3RvcmFnZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL2V4dGVuZC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvTWV0YS5qcyIsIi4uLy4uLy4uLy5xdWFzYXIvcXVhc2FyLXVzZXItb3B0aW9ucy5qcyIsIi4uLy4uLy4uLy5xdWFzYXIvY2xpZW50LXByZWZldGNoLmpzIiwiLi4vLi4vLi4vLnF1YXNhci9jbGllbnQtZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2NyaXB0UmVsID0gKGZ1bmN0aW9uIGRldGVjdFNjcmlwdFJlbCgpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgcmVsTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKS5yZWxMaXN0O1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gcmVsTGlzdCAmJiByZWxMaXN0LnN1cHBvcnRzICYmIHJlbExpc3Quc3VwcG9ydHMoJ21vZHVsZXByZWxvYWQnKVxuICAgICAgICA/ICdtb2R1bGVwcmVsb2FkJ1xuICAgICAgICA6ICdwcmVsb2FkJztcbn0pKCk7Y29uc3Qgc2VlbiA9IHt9O2NvbnN0IGJhc2UgPSAnJztleHBvcnQgY29uc3QgX192aXRlUHJlbG9hZCA9IGZ1bmN0aW9uIHByZWxvYWQoYmFzZU1vZHVsZSwgZGVwcykge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoIV9fVklURV9JU19NT0RFUk5fXyB8fCAhZGVwcyB8fCBkZXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gYmFzZU1vZHVsZSgpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoZGVwcy5tYXAoKGRlcCkgPT4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRlcCA9IGAke2Jhc2V9JHtkZXB9YDtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZGVwIGluIHNlZW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgc2VlbltkZXBdID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgaXNDc3MgPSBkZXAuZW5kc1dpdGgoJy5jc3MnKTtcbiAgICAgICAgY29uc3QgY3NzU2VsZWN0b3IgPSBpc0NzcyA/ICdbcmVsPVwic3R5bGVzaGVldFwiXScgOiAnJztcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBjaGVjayBpZiB0aGUgZmlsZSBpcyBhbHJlYWR5IHByZWxvYWRlZCBieSBTU1IgbWFya3VwXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBsaW5rW2hyZWY9XCIke2RlcH1cIl0ke2Nzc1NlbGVjdG9yfWApKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGxpbmsucmVsID0gaXNDc3MgPyAnc3R5bGVzaGVldCcgOiBzY3JpcHRSZWw7XG4gICAgICAgIGlmICghaXNDc3MpIHtcbiAgICAgICAgICAgIGxpbmsuYXMgPSAnc2NyaXB0JztcbiAgICAgICAgICAgIGxpbmsuY3Jvc3NPcmlnaW4gPSAnJztcbiAgICAgICAgfVxuICAgICAgICBsaW5rLmhyZWYgPSBkZXA7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgaWYgKGlzQ3NzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzKTtcbiAgICAgICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4gcmVqKG5ldyBFcnJvcihgVW5hYmxlIHRvIHByZWxvYWQgQ1NTIGZvciAke2RlcH1gKSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KSkudGhlbigoKSA9PiBiYXNlTW9kdWxlKCkpO1xufSIsIi8qKlxuICogTWFrZSBhIG1hcCBhbmQgcmV0dXJuIGEgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGEga2V5XG4gKiBpcyBpbiB0aGF0IG1hcC5cbiAqIElNUE9SVEFOVDogYWxsIGNhbGxzIG9mIHRoaXMgZnVuY3Rpb24gbXVzdCBiZSBwcmVmaXhlZCB3aXRoXG4gKiBcXC9cXCojXFxfXFxfUFVSRVxcX1xcX1xcKlxcL1xuICogU28gdGhhdCByb2xsdXAgY2FuIHRyZWUtc2hha2UgdGhlbSBpZiBuZWNlc3NhcnkuXG4gKi9cbmZ1bmN0aW9uIG1ha2VNYXAoc3RyLCBleHBlY3RzTG93ZXJDYXNlKSB7XG4gICAgY29uc3QgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBjb25zdCBsaXN0ID0gc3RyLnNwbGl0KCcsJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1hcFtsaXN0W2ldXSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBleHBlY3RzTG93ZXJDYXNlID8gdmFsID0+ICEhbWFwW3ZhbC50b0xvd2VyQ2FzZSgpXSA6IHZhbCA9PiAhIW1hcFt2YWxdO1xufVxuXG4vKipcbiAqIGRldiBvbmx5IGZsYWcgLT4gbmFtZSBtYXBwaW5nXG4gKi9cbmNvbnN0IFBhdGNoRmxhZ05hbWVzID0ge1xuICAgIFsxIC8qIFBhdGNoRmxhZ3MuVEVYVCAqL106IGBURVhUYCxcbiAgICBbMiAvKiBQYXRjaEZsYWdzLkNMQVNTICovXTogYENMQVNTYCxcbiAgICBbNCAvKiBQYXRjaEZsYWdzLlNUWUxFICovXTogYFNUWUxFYCxcbiAgICBbOCAvKiBQYXRjaEZsYWdzLlBST1BTICovXTogYFBST1BTYCxcbiAgICBbMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovXTogYEZVTExfUFJPUFNgLFxuICAgIFszMiAvKiBQYXRjaEZsYWdzLkhZRFJBVEVfRVZFTlRTICovXTogYEhZRFJBVEVfRVZFTlRTYCxcbiAgICBbNjQgLyogUGF0Y2hGbGFncy5TVEFCTEVfRlJBR01FTlQgKi9dOiBgU1RBQkxFX0ZSQUdNRU5UYCxcbiAgICBbMTI4IC8qIFBhdGNoRmxhZ3MuS0VZRURfRlJBR01FTlQgKi9dOiBgS0VZRURfRlJBR01FTlRgLFxuICAgIFsyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovXTogYFVOS0VZRURfRlJBR01FTlRgLFxuICAgIFs1MTIgLyogUGF0Y2hGbGFncy5ORUVEX1BBVENIICovXTogYE5FRURfUEFUQ0hgLFxuICAgIFsxMDI0IC8qIFBhdGNoRmxhZ3MuRFlOQU1JQ19TTE9UUyAqL106IGBEWU5BTUlDX1NMT1RTYCxcbiAgICBbMjA0OCAvKiBQYXRjaEZsYWdzLkRFVl9ST09UX0ZSQUdNRU5UICovXTogYERFVl9ST09UX0ZSQUdNRU5UYCxcbiAgICBbLTEgLyogUGF0Y2hGbGFncy5IT0lTVEVEICovXTogYEhPSVNURURgLFxuICAgIFstMiAvKiBQYXRjaEZsYWdzLkJBSUwgKi9dOiBgQkFJTGBcbn07XG5cbi8qKlxuICogRGV2IG9ubHlcbiAqL1xuY29uc3Qgc2xvdEZsYWdzVGV4dCA9IHtcbiAgICBbMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovXTogJ1NUQUJMRScsXG4gICAgWzIgLyogU2xvdEZsYWdzLkRZTkFNSUMgKi9dOiAnRFlOQU1JQycsXG4gICAgWzMgLyogU2xvdEZsYWdzLkZPUldBUkRFRCAqL106ICdGT1JXQVJERUQnXG59O1xuXG5jb25zdCBHTE9CQUxTX1dISVRFX0xJU1RFRCA9ICdJbmZpbml0eSx1bmRlZmluZWQsTmFOLGlzRmluaXRlLGlzTmFOLHBhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLCcgK1xuICAgICdkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLGVuY29kZVVSSUNvbXBvbmVudCxNYXRoLE51bWJlcixEYXRlLEFycmF5LCcgK1xuICAgICdPYmplY3QsQm9vbGVhbixTdHJpbmcsUmVnRXhwLE1hcCxTZXQsSlNPTixJbnRsLEJpZ0ludCc7XG5jb25zdCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoR0xPQkFMU19XSElURV9MSVNURUQpO1xuXG5jb25zdCByYW5nZSA9IDI7XG5mdW5jdGlvbiBnZW5lcmF0ZUNvZGVGcmFtZShzb3VyY2UsIHN0YXJ0ID0gMCwgZW5kID0gc291cmNlLmxlbmd0aCkge1xuICAgIC8vIFNwbGl0IHRoZSBjb250ZW50IGludG8gaW5kaXZpZHVhbCBsaW5lcyBidXQgY2FwdHVyZSB0aGUgbmV3bGluZSBzZXF1ZW5jZVxuICAgIC8vIHRoYXQgc2VwYXJhdGVkIGVhY2ggbGluZS4gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB0aGUgYWN0dWFsIHNlcXVlbmNlIGlzXG4gICAgLy8gbmVlZGVkIHRvIHByb3Blcmx5IHRha2UgaW50byBhY2NvdW50IHRoZSBmdWxsIGxpbmUgbGVuZ3RoIGZvciBvZmZzZXRcbiAgICAvLyBjb21wYXJpc29uXG4gICAgbGV0IGxpbmVzID0gc291cmNlLnNwbGl0KC8oXFxyP1xcbikvKTtcbiAgICAvLyBTZXBhcmF0ZSB0aGUgbGluZXMgYW5kIG5ld2xpbmUgc2VxdWVuY2VzIGludG8gc2VwYXJhdGUgYXJyYXlzIGZvciBlYXNpZXIgcmVmZXJlbmNpbmdcbiAgICBjb25zdCBuZXdsaW5lU2VxdWVuY2VzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDEpO1xuICAgIGxpbmVzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDApO1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgY29uc3QgcmVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb3VudCArPVxuICAgICAgICAgICAgbGluZXNbaV0ubGVuZ3RoICtcbiAgICAgICAgICAgICAgICAoKG5ld2xpbmVTZXF1ZW5jZXNbaV0gJiYgbmV3bGluZVNlcXVlbmNlc1tpXS5sZW5ndGgpIHx8IDApO1xuICAgICAgICBpZiAoY291bnQgPj0gc3RhcnQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpIC0gcmFuZ2U7IGogPD0gaSArIHJhbmdlIHx8IGVuZCA+IGNvdW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaiA8IDAgfHwgaiA+PSBsaW5lcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBqICsgMTtcbiAgICAgICAgICAgICAgICByZXMucHVzaChgJHtsaW5lfSR7JyAnLnJlcGVhdChNYXRoLm1heCgzIC0gU3RyaW5nKGxpbmUpLmxlbmd0aCwgMCkpfXwgICR7bGluZXNbal19YCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVzW2pdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMaW5lU2VxTGVuZ3RoID0gKG5ld2xpbmVTZXF1ZW5jZXNbal0gJiYgbmV3bGluZVNlcXVlbmNlc1tqXS5sZW5ndGgpIHx8IDA7XG4gICAgICAgICAgICAgICAgaWYgKGogPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHVzaCB1bmRlcmxpbmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFkID0gc3RhcnQgLSAoY291bnQgLSAobGluZUxlbmd0aCArIG5ld0xpbmVTZXFMZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoMSwgZW5kID4gY291bnQgPyBsaW5lTGVuZ3RoIC0gcGFkIDogZW5kIC0gc3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArICcgJy5yZXBlYXQocGFkKSArICdeJy5yZXBlYXQobGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGogPiBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPiBjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoTWF0aC5taW4oZW5kIC0gY291bnQsIGxpbmVMZW5ndGgpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKGAgICB8ICBgICsgJ14nLnJlcGVhdChsZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSBsaW5lTGVuZ3RoICsgbmV3TGluZVNlcUxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzLmpvaW4oJ1xcbicpO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTdHlsZSh2YWx1ZSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBjb25zdCByZXMgPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IGlzU3RyaW5nKGl0ZW0pXG4gICAgICAgICAgICAgICAgPyBwYXJzZVN0cmluZ1N0eWxlKGl0ZW0pXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVTdHlsZShpdGVtKTtcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICByZXNba2V5XSA9IG5vcm1hbGl6ZWRba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5jb25zdCBsaXN0RGVsaW1pdGVyUkUgPSAvOyg/IVteKF0qXFwpKS9nO1xuY29uc3QgcHJvcGVydHlEZWxpbWl0ZXJSRSA9IC86KFteXSspLztcbmNvbnN0IHN0eWxlQ29tbWVudFJFID0gL1xcL1xcKi4qP1xcKlxcLy9ncztcbmZ1bmN0aW9uIHBhcnNlU3RyaW5nU3R5bGUoY3NzVGV4dCkge1xuICAgIGNvbnN0IHJldCA9IHt9O1xuICAgIGNzc1RleHRcbiAgICAgICAgLnJlcGxhY2Uoc3R5bGVDb21tZW50UkUsICcnKVxuICAgICAgICAuc3BsaXQobGlzdERlbGltaXRlclJFKVxuICAgICAgICAuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IGl0ZW0uc3BsaXQocHJvcGVydHlEZWxpbWl0ZXJSRSk7XG4gICAgICAgICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmV0W3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5U3R5bGUoc3R5bGVzKSB7XG4gICAgbGV0IHJldCA9ICcnO1xuICAgIGlmICghc3R5bGVzIHx8IGlzU3RyaW5nKHN0eWxlcykpIHtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gc3R5bGVzW2tleV07XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkuc3RhcnRzV2l0aChgLS1gKSA/IGtleSA6IGh5cGhlbmF0ZShrZXkpO1xuICAgICAgICBpZiAoaXNTdHJpbmcodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgcmVuZGVyIHZhbGlkIHZhbHVlc1xuICAgICAgICAgICAgcmV0ICs9IGAke25vcm1hbGl6ZWRLZXl9OiR7dmFsdWV9O2A7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzKHZhbHVlKSB7XG4gICAgbGV0IHJlcyA9ICcnO1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmVzID0gdmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVDbGFzcyh2YWx1ZVtpXSk7XG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHJlcyArPSBub3JtYWxpemVkICsgJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZVtuYW1lXSkge1xuICAgICAgICAgICAgICAgIHJlcyArPSBuYW1lICsgJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXMudHJpbSgpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplUHJvcHMocHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcbiAgICBpZiAoa2xhc3MgJiYgIWlzU3RyaW5nKGtsYXNzKSkge1xuICAgICAgICBwcm9wcy5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKGtsYXNzKTtcbiAgICB9XG4gICAgaWYgKHN0eWxlKSB7XG4gICAgICAgIHByb3BzLnN0eWxlID0gbm9ybWFsaXplU3R5bGUoc3R5bGUpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHM7XG59XG5cbi8vIFRoZXNlIHRhZyBjb25maWdzIGFyZSBzaGFyZWQgYmV0d2VlbiBjb21waWxlci1kb20gYW5kIHJ1bnRpbWUtZG9tLCBzbyB0aGV5XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnRcbmNvbnN0IEhUTUxfVEFHUyA9ICdodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSxhZGRyZXNzLGFydGljbGUsYXNpZGUsZm9vdGVyLCcgK1xuICAgICdoZWFkZXIsaDEsaDIsaDMsaDQsaDUsaDYsbmF2LHNlY3Rpb24sZGl2LGRkLGRsLGR0LGZpZ2NhcHRpb24sJyArXG4gICAgJ2ZpZ3VyZSxwaWN0dXJlLGhyLGltZyxsaSxtYWluLG9sLHAscHJlLHVsLGEsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLCcgK1xuICAgICdkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnVieSxzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCwnICtcbiAgICAndGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSwnICtcbiAgICAnY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLGNhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLCcgK1xuICAgICd0aCx0cixidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsJyArXG4gICAgJ29wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsJyArXG4gICAgJ3N1bW1hcnksdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3QnO1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvU1ZHL0VsZW1lbnRcbmNvbnN0IFNWR19UQUdTID0gJ3N2ZyxhbmltYXRlLGFuaW1hdGVNb3Rpb24sYW5pbWF0ZVRyYW5zZm9ybSxjaXJjbGUsY2xpcFBhdGgsY29sb3ItcHJvZmlsZSwnICtcbiAgICAnZGVmcyxkZXNjLGRpc2NhcmQsZWxsaXBzZSxmZUJsZW5kLGZlQ29sb3JNYXRyaXgsZmVDb21wb25lbnRUcmFuc2ZlciwnICtcbiAgICAnZmVDb21wb3NpdGUsZmVDb252b2x2ZU1hdHJpeCxmZURpZmZ1c2VMaWdodGluZyxmZURpc3BsYWNlbWVudE1hcCwnICtcbiAgICAnZmVEaXN0YW5jZUxpZ2h0LGZlRHJvcFNoYWRvdyxmZUZsb29kLGZlRnVuY0EsZmVGdW5jQixmZUZ1bmNHLGZlRnVuY1IsJyArXG4gICAgJ2ZlR2F1c3NpYW5CbHVyLGZlSW1hZ2UsZmVNZXJnZSxmZU1lcmdlTm9kZSxmZU1vcnBob2xvZ3ksZmVPZmZzZXQsJyArXG4gICAgJ2ZlUG9pbnRMaWdodCxmZVNwZWN1bGFyTGlnaHRpbmcsZmVTcG90TGlnaHQsZmVUaWxlLGZlVHVyYnVsZW5jZSxmaWx0ZXIsJyArXG4gICAgJ2ZvcmVpZ25PYmplY3QsZyxoYXRjaCxoYXRjaHBhdGgsaW1hZ2UsbGluZSxsaW5lYXJHcmFkaWVudCxtYXJrZXIsbWFzaywnICtcbiAgICAnbWVzaCxtZXNoZ3JhZGllbnQsbWVzaHBhdGNoLG1lc2hyb3csbWV0YWRhdGEsbXBhdGgscGF0aCxwYXR0ZXJuLCcgK1xuICAgICdwb2x5Z29uLHBvbHlsaW5lLHJhZGlhbEdyYWRpZW50LHJlY3Qsc2V0LHNvbGlkY29sb3Isc3RvcCxzd2l0Y2gsc3ltYm9sLCcgK1xuICAgICd0ZXh0LHRleHRQYXRoLHRpdGxlLHRzcGFuLHVua25vd24sdXNlLHZpZXcnO1xuY29uc3QgVk9JRF9UQUdTID0gJ2FyZWEsYmFzZSxicixjb2wsZW1iZWQsaHIsaW1nLGlucHV0LGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyJztcbi8qKlxuICogQ29tcGlsZXIgb25seS5cbiAqIERvIE5PVCB1c2UgaW4gcnVudGltZSBjb2RlIHBhdGhzIHVubGVzcyBiZWhpbmQgYChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKWAgZmxhZy5cbiAqL1xuY29uc3QgaXNIVE1MVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKEhUTUxfVEFHUyk7XG4vKipcbiAqIENvbXBpbGVyIG9ubHkuXG4gKiBEbyBOT1QgdXNlIGluIHJ1bnRpbWUgY29kZSBwYXRocyB1bmxlc3MgYmVoaW5kIGAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylgIGZsYWcuXG4gKi9cbmNvbnN0IGlzU1ZHVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFNWR19UQUdTKTtcbi8qKlxuICogQ29tcGlsZXIgb25seS5cbiAqIERvIE5PVCB1c2UgaW4gcnVudGltZSBjb2RlIHBhdGhzIHVubGVzcyBiZWhpbmQgYChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKWAgZmxhZy5cbiAqL1xuY29uc3QgaXNWb2lkVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFZPSURfVEFHUyk7XG5cbi8qKlxuICogT24gdGhlIGNsaWVudCB3ZSBvbmx5IG5lZWQgdG8gb2ZmZXIgc3BlY2lhbCBjYXNlcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzIHRoYXRcbiAqIGhhdmUgZGlmZmVyZW50IG5hbWVzIGZyb20gdGhlaXIgY29ycmVzcG9uZGluZyBkb20gcHJvcGVydGllczpcbiAqIC0gaXRlbXNjb3BlIC0+IE4vQVxuICogLSBhbGxvd2Z1bGxzY3JlZW4gLT4gYWxsb3dGdWxsc2NyZWVuXG4gKiAtIGZvcm1ub3ZhbGlkYXRlIC0+IGZvcm1Ob1ZhbGlkYXRlXG4gKiAtIGlzbWFwIC0+IGlzTWFwXG4gKiAtIG5vbW9kdWxlIC0+IG5vTW9kdWxlXG4gKiAtIG5vdmFsaWRhdGUgLT4gbm9WYWxpZGF0ZVxuICogLSByZWFkb25seSAtPiByZWFkT25seVxuICovXG5jb25zdCBzcGVjaWFsQm9vbGVhbkF0dHJzID0gYGl0ZW1zY29wZSxhbGxvd2Z1bGxzY3JlZW4sZm9ybW5vdmFsaWRhdGUsaXNtYXAsbm9tb2R1bGUsbm92YWxpZGF0ZSxyZWFkb25seWA7XG5jb25zdCBpc1NwZWNpYWxCb29sZWFuQXR0ciA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChzcGVjaWFsQm9vbGVhbkF0dHJzKTtcbi8qKlxuICogVGhlIGZ1bGwgbGlzdCBpcyBuZWVkZWQgZHVyaW5nIFNTUiB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGluaXRpYWwgbWFya3VwLlxuICovXG5jb25zdCBpc0Jvb2xlYW5BdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMgK1xuICAgIGAsYXN5bmMsYXV0b2ZvY3VzLGF1dG9wbGF5LGNvbnRyb2xzLGRlZmF1bHQsZGVmZXIsZGlzYWJsZWQsaGlkZGVuLGAgK1xuICAgIGBsb29wLG9wZW4scmVxdWlyZWQscmV2ZXJzZWQsc2NvcGVkLHNlYW1sZXNzLGAgK1xuICAgIGBjaGVja2VkLG11dGVkLG11bHRpcGxlLHNlbGVjdGVkYCk7XG4vKipcbiAqIEJvb2xlYW4gYXR0cmlidXRlcyBzaG91bGQgYmUgaW5jbHVkZWQgaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBvciAnJy5cbiAqIGUuZy4gYDxzZWxlY3QgbXVsdGlwbGU+YCBjb21waWxlcyB0byBgeyBtdWx0aXBsZTogJycgfWBcbiAqL1xuZnVuY3Rpb24gaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUgfHwgdmFsdWUgPT09ICcnO1xufVxuY29uc3QgdW5zYWZlQXR0ckNoYXJSRSA9IC9bPi89XCInXFx1MDAwOVxcdTAwMGFcXHUwMDBjXFx1MDAyMF0vO1xuY29uc3QgYXR0clZhbGlkYXRpb25DYWNoZSA9IHt9O1xuZnVuY3Rpb24gaXNTU1JTYWZlQXR0ck5hbWUobmFtZSkge1xuICAgIGlmIChhdHRyVmFsaWRhdGlvbkNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBhdHRyVmFsaWRhdGlvbkNhY2hlW25hbWVdO1xuICAgIH1cbiAgICBjb25zdCBpc1Vuc2FmZSA9IHVuc2FmZUF0dHJDaGFyUkUudGVzdChuYW1lKTtcbiAgICBpZiAoaXNVbnNhZmUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgdW5zYWZlIGF0dHJpYnV0ZSBuYW1lOiAke25hbWV9YCk7XG4gICAgfVxuICAgIHJldHVybiAoYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXSA9ICFpc1Vuc2FmZSk7XG59XG5jb25zdCBwcm9wc1RvQXR0ck1hcCA9IHtcbiAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxuICAgIGNsYXNzTmFtZTogJ2NsYXNzJyxcbiAgICBodG1sRm9yOiAnZm9yJyxcbiAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xufTtcbi8qKlxuICogS25vd24gYXR0cmlidXRlcywgdGhpcyBpcyB1c2VkIGZvciBzdHJpbmdpZmljYXRpb24gb2YgcnVudGltZSBzdGF0aWMgbm9kZXNcbiAqIHNvIHRoYXQgd2UgZG9uJ3Qgc3RyaW5naWZ5IGJpbmRpbmdzIHRoYXQgY2Fubm90IGJlIHNldCBmcm9tIEhUTUwuXG4gKiBEb24ndCBhbHNvIGZvcmdldCB0byBhbGxvdyBgZGF0YS0qYCBhbmQgYGFyaWEtKmAhXG4gKiBHZW5lcmF0ZWQgZnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0F0dHJpYnV0ZXNcbiAqL1xuY29uc3QgaXNLbm93bkh0bWxBdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKGBhY2NlcHQsYWNjZXB0LWNoYXJzZXQsYWNjZXNza2V5LGFjdGlvbixhbGlnbixhbGxvdyxhbHQsYXN5bmMsYCArXG4gICAgYGF1dG9jYXBpdGFsaXplLGF1dG9jb21wbGV0ZSxhdXRvZm9jdXMsYXV0b3BsYXksYmFja2dyb3VuZCxiZ2NvbG9yLGAgK1xuICAgIGBib3JkZXIsYnVmZmVyZWQsY2FwdHVyZSxjaGFsbGVuZ2UsY2hhcnNldCxjaGVja2VkLGNpdGUsY2xhc3MsY29kZSxgICtcbiAgICBgY29kZWJhc2UsY29sb3IsY29scyxjb2xzcGFuLGNvbnRlbnQsY29udGVudGVkaXRhYmxlLGNvbnRleHRtZW51LGNvbnRyb2xzLGAgK1xuICAgIGBjb29yZHMsY3Jvc3NvcmlnaW4sY3NwLGRhdGEsZGF0ZXRpbWUsZGVjb2RpbmcsZGVmYXVsdCxkZWZlcixkaXIsZGlybmFtZSxgICtcbiAgICBgZGlzYWJsZWQsZG93bmxvYWQsZHJhZ2dhYmxlLGRyb3B6b25lLGVuY3R5cGUsZW50ZXJrZXloaW50LGZvcixmb3JtLGAgK1xuICAgIGBmb3JtYWN0aW9uLGZvcm1lbmN0eXBlLGZvcm1tZXRob2QsZm9ybW5vdmFsaWRhdGUsZm9ybXRhcmdldCxoZWFkZXJzLGAgK1xuICAgIGBoZWlnaHQsaGlkZGVuLGhpZ2gsaHJlZixocmVmbGFuZyxodHRwLWVxdWl2LGljb24saWQsaW1wb3J0YW5jZSxpbnRlZ3JpdHksYCArXG4gICAgYGlzbWFwLGl0ZW1wcm9wLGtleXR5cGUsa2luZCxsYWJlbCxsYW5nLGxhbmd1YWdlLGxvYWRpbmcsbGlzdCxsb29wLGxvdyxgICtcbiAgICBgbWFuaWZlc3QsbWF4LG1heGxlbmd0aCxtaW5sZW5ndGgsbWVkaWEsbWluLG11bHRpcGxlLG11dGVkLG5hbWUsbm92YWxpZGF0ZSxgICtcbiAgICBgb3BlbixvcHRpbXVtLHBhdHRlcm4scGluZyxwbGFjZWhvbGRlcixwb3N0ZXIscHJlbG9hZCxyYWRpb2dyb3VwLHJlYWRvbmx5LGAgK1xuICAgIGByZWZlcnJlcnBvbGljeSxyZWwscmVxdWlyZWQscmV2ZXJzZWQscm93cyxyb3dzcGFuLHNhbmRib3gsc2NvcGUsc2NvcGVkLGAgK1xuICAgIGBzZWxlY3RlZCxzaGFwZSxzaXplLHNpemVzLHNsb3Qsc3BhbixzcGVsbGNoZWNrLHNyYyxzcmNkb2Msc3JjbGFuZyxzcmNzZXQsYCArXG4gICAgYHN0YXJ0LHN0ZXAsc3R5bGUsc3VtbWFyeSx0YWJpbmRleCx0YXJnZXQsdGl0bGUsdHJhbnNsYXRlLHR5cGUsdXNlbWFwLGAgK1xuICAgIGB2YWx1ZSx3aWR0aCx3cmFwYCk7XG4vKipcbiAqIEdlbmVyYXRlZCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL1NWRy9BdHRyaWJ1dGVcbiAqL1xuY29uc3QgaXNLbm93blN2Z0F0dHIgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoYHhtbG5zLGFjY2VudC1oZWlnaHQsYWNjdW11bGF0ZSxhZGRpdGl2ZSxhbGlnbm1lbnQtYmFzZWxpbmUsYWxwaGFiZXRpYyxhbXBsaXR1ZGUsYCArXG4gICAgYGFyYWJpYy1mb3JtLGFzY2VudCxhdHRyaWJ1dGVOYW1lLGF0dHJpYnV0ZVR5cGUsYXppbXV0aCxiYXNlRnJlcXVlbmN5LGAgK1xuICAgIGBiYXNlbGluZS1zaGlmdCxiYXNlUHJvZmlsZSxiYm94LGJlZ2luLGJpYXMsYnksY2FsY01vZGUsY2FwLWhlaWdodCxjbGFzcyxgICtcbiAgICBgY2xpcCxjbGlwUGF0aFVuaXRzLGNsaXAtcGF0aCxjbGlwLXJ1bGUsY29sb3IsY29sb3ItaW50ZXJwb2xhdGlvbixgICtcbiAgICBgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzLGNvbG9yLXByb2ZpbGUsY29sb3ItcmVuZGVyaW5nLGAgK1xuICAgIGBjb250ZW50U2NyaXB0VHlwZSxjb250ZW50U3R5bGVUeXBlLGNyb3Nzb3JpZ2luLGN1cnNvcixjeCxjeSxkLGRlY2VsZXJhdGUsYCArXG4gICAgYGRlc2NlbnQsZGlmZnVzZUNvbnN0YW50LGRpcmVjdGlvbixkaXNwbGF5LGRpdmlzb3IsZG9taW5hbnQtYmFzZWxpbmUsZHVyLGR4LGAgK1xuICAgIGBkeSxlZGdlTW9kZSxlbGV2YXRpb24sZW5hYmxlLWJhY2tncm91bmQsZW5kLGV4cG9uZW50LGZpbGwsZmlsbC1vcGFjaXR5LGAgK1xuICAgIGBmaWxsLXJ1bGUsZmlsdGVyLGZpbHRlclJlcyxmaWx0ZXJVbml0cyxmbG9vZC1jb2xvcixmbG9vZC1vcGFjaXR5LGAgK1xuICAgIGBmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zaXplLWFkanVzdCxmb250LXN0cmV0Y2gsZm9udC1zdHlsZSxgICtcbiAgICBgZm9udC12YXJpYW50LGZvbnQtd2VpZ2h0LGZvcm1hdCxmcm9tLGZyLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsYCArXG4gICAgYGdseXBoLW9yaWVudGF0aW9uLWhvcml6b250YWwsZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwsZ2x5cGhSZWYsYCArXG4gICAgYGdyYWRpZW50VHJhbnNmb3JtLGdyYWRpZW50VW5pdHMsaGFuZ2luZyxoZWlnaHQsaHJlZixocmVmbGFuZyxob3Jpei1hZHYteCxgICtcbiAgICBgaG9yaXotb3JpZ2luLXgsaWQsaWRlb2dyYXBoaWMsaW1hZ2UtcmVuZGVyaW5nLGluLGluMixpbnRlcmNlcHQsayxrMSxrMixrMyxgICtcbiAgICBgazQsa2VybmVsTWF0cml4LGtlcm5lbFVuaXRMZW5ndGgsa2VybmluZyxrZXlQb2ludHMsa2V5U3BsaW5lcyxrZXlUaW1lcyxgICtcbiAgICBgbGFuZyxsZW5ndGhBZGp1c3QsbGV0dGVyLXNwYWNpbmcsbGlnaHRpbmctY29sb3IsbGltaXRpbmdDb25lQW5nbGUsbG9jYWwsYCArXG4gICAgYG1hcmtlci1lbmQsbWFya2VyLW1pZCxtYXJrZXItc3RhcnQsbWFya2VySGVpZ2h0LG1hcmtlclVuaXRzLG1hcmtlcldpZHRoLGAgK1xuICAgIGBtYXNrLG1hc2tDb250ZW50VW5pdHMsbWFza1VuaXRzLG1hdGhlbWF0aWNhbCxtYXgsbWVkaWEsbWV0aG9kLG1pbixtb2RlLGAgK1xuICAgIGBuYW1lLG51bU9jdGF2ZXMsb2Zmc2V0LG9wYWNpdHksb3BlcmF0b3Isb3JkZXIsb3JpZW50LG9yaWVudGF0aW9uLG9yaWdpbixgICtcbiAgICBgb3ZlcmZsb3csb3ZlcmxpbmUtcG9zaXRpb24sb3ZlcmxpbmUtdGhpY2tuZXNzLHBhbm9zZS0xLHBhaW50LW9yZGVyLHBhdGgsYCArXG4gICAgYHBhdGhMZW5ndGgscGF0dGVybkNvbnRlbnRVbml0cyxwYXR0ZXJuVHJhbnNmb3JtLHBhdHRlcm5Vbml0cyxwaW5nLGAgK1xuICAgIGBwb2ludGVyLWV2ZW50cyxwb2ludHMscG9pbnRzQXRYLHBvaW50c0F0WSxwb2ludHNBdFoscHJlc2VydmVBbHBoYSxgICtcbiAgICBgcHJlc2VydmVBc3BlY3RSYXRpbyxwcmltaXRpdmVVbml0cyxyLHJhZGl1cyxyZWZlcnJlclBvbGljeSxyZWZYLHJlZlkscmVsLGAgK1xuICAgIGByZW5kZXJpbmctaW50ZW50LHJlcGVhdENvdW50LHJlcGVhdER1cixyZXF1aXJlZEV4dGVuc2lvbnMscmVxdWlyZWRGZWF0dXJlcyxgICtcbiAgICBgcmVzdGFydCxyZXN1bHQscm90YXRlLHJ4LHJ5LHNjYWxlLHNlZWQsc2hhcGUtcmVuZGVyaW5nLHNsb3BlLHNwYWNpbmcsYCArXG4gICAgYHNwZWN1bGFyQ29uc3RhbnQsc3BlY3VsYXJFeHBvbmVudCxzcGVlZCxzcHJlYWRNZXRob2Qsc3RhcnRPZmZzZXQsYCArXG4gICAgYHN0ZERldmlhdGlvbixzdGVtaCxzdGVtdixzdGl0Y2hUaWxlcyxzdG9wLWNvbG9yLHN0b3Atb3BhY2l0eSxgICtcbiAgICBgc3RyaWtldGhyb3VnaC1wb3NpdGlvbixzdHJpa2V0aHJvdWdoLXRoaWNrbmVzcyxzdHJpbmcsc3Ryb2tlLGAgK1xuICAgIGBzdHJva2UtZGFzaGFycmF5LHN0cm9rZS1kYXNob2Zmc2V0LHN0cm9rZS1saW5lY2FwLHN0cm9rZS1saW5lam9pbixgICtcbiAgICBgc3Ryb2tlLW1pdGVybGltaXQsc3Ryb2tlLW9wYWNpdHksc3Ryb2tlLXdpZHRoLHN0eWxlLHN1cmZhY2VTY2FsZSxgICtcbiAgICBgc3lzdGVtTGFuZ3VhZ2UsdGFiaW5kZXgsdGFibGVWYWx1ZXMsdGFyZ2V0LHRhcmdldFgsdGFyZ2V0WSx0ZXh0LWFuY2hvcixgICtcbiAgICBgdGV4dC1kZWNvcmF0aW9uLHRleHQtcmVuZGVyaW5nLHRleHRMZW5ndGgsdG8sdHJhbnNmb3JtLHRyYW5zZm9ybS1vcmlnaW4sYCArXG4gICAgYHR5cGUsdTEsdTIsdW5kZXJsaW5lLXBvc2l0aW9uLHVuZGVybGluZS10aGlja25lc3MsdW5pY29kZSx1bmljb2RlLWJpZGksYCArXG4gICAgYHVuaWNvZGUtcmFuZ2UsdW5pdHMtcGVyLWVtLHYtYWxwaGFiZXRpYyx2LWhhbmdpbmcsdi1pZGVvZ3JhcGhpYyxgICtcbiAgICBgdi1tYXRoZW1hdGljYWwsdmFsdWVzLHZlY3Rvci1lZmZlY3QsdmVyc2lvbix2ZXJ0LWFkdi15LHZlcnQtb3JpZ2luLXgsYCArXG4gICAgYHZlcnQtb3JpZ2luLXksdmlld0JveCx2aWV3VGFyZ2V0LHZpc2liaWxpdHksd2lkdGgsd2lkdGhzLHdvcmQtc3BhY2luZyxgICtcbiAgICBgd3JpdGluZy1tb2RlLHgseC1oZWlnaHQseDEseDIseENoYW5uZWxTZWxlY3Rvcix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUsYCArXG4gICAgYHhsaW5rOmhyZWYseGxpbms6cm9sZSx4bGluazpzaG93LHhsaW5rOnRpdGxlLHhsaW5rOnR5cGUseG1sOmJhc2UseG1sOmxhbmcsYCArXG4gICAgYHhtbDpzcGFjZSx5LHkxLHkyLHlDaGFubmVsU2VsZWN0b3Iseix6b29tQW5kUGFuYCk7XG5cbmNvbnN0IGVzY2FwZVJFID0gL1tcIicmPD5dLztcbmZ1bmN0aW9uIGVzY2FwZUh0bWwoc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RyID0gJycgKyBzdHJpbmc7XG4gICAgY29uc3QgbWF0Y2ggPSBlc2NhcGVSRS5leGVjKHN0cik7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBsZXQgaHRtbCA9ICcnO1xuICAgIGxldCBlc2NhcGVkO1xuICAgIGxldCBpbmRleDtcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBmb3IgKGluZGV4ID0gbWF0Y2guaW5kZXg7IGluZGV4IDwgc3RyLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBzd2l0Y2ggKHN0ci5jaGFyQ29kZUF0KGluZGV4KSkge1xuICAgICAgICAgICAgY2FzZSAzNDogLy8gXCJcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZxdW90Oyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM4OiAvLyAmXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmYW1wOyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM5OiAvLyAnXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmIzM5Oyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDYwOiAvLyA8XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmbHQ7JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjI6IC8vID5cbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZndDsnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdEluZGV4ICE9PSBpbmRleCkge1xuICAgICAgICAgICAgaHRtbCArPSBzdHIuc2xpY2UobGFzdEluZGV4LCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBodG1sICs9IGVzY2FwZWQ7XG4gICAgfVxuICAgIHJldHVybiBsYXN0SW5kZXggIT09IGluZGV4ID8gaHRtbCArIHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KSA6IGh0bWw7XG59XG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUyL3N5bnRheC5odG1sI2NvbW1lbnRzXG5jb25zdCBjb21tZW50U3RyaXBSRSA9IC9eLT8+fDwhLS18LS0+fC0tIT58PCEtJC9nO1xuZnVuY3Rpb24gZXNjYXBlSHRtbENvbW1lbnQoc3JjKSB7XG4gICAgcmV0dXJuIHNyYy5yZXBsYWNlKGNvbW1lbnRTdHJpcFJFLCAnJyk7XG59XG5cbmZ1bmN0aW9uIGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBlcXVhbCA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGVxdWFsICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVxdWFsID0gbG9vc2VFcXVhbChhW2ldLCBiW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGVxdWFsO1xufVxuZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCBhVmFsaWRUeXBlID0gaXNEYXRlKGEpO1xuICAgIGxldCBiVmFsaWRUeXBlID0gaXNEYXRlKGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKSA6IGZhbHNlO1xuICAgIH1cbiAgICBhVmFsaWRUeXBlID0gaXNTeW1ib2woYSk7XG4gICAgYlZhbGlkVHlwZSA9IGlzU3ltYm9sKGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGEgPT09IGI7XG4gICAgfVxuICAgIGFWYWxpZFR5cGUgPSBpc0FycmF5KGEpO1xuICAgIGJWYWxpZFR5cGUgPSBpc0FycmF5KGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSA6IGZhbHNlO1xuICAgIH1cbiAgICBhVmFsaWRUeXBlID0gaXNPYmplY3QoYSk7XG4gICAgYlZhbGlkVHlwZSA9IGlzT2JqZWN0KGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmOiB0aGlzIGlmIHdpbGwgcHJvYmFibHkgbmV2ZXIgYmUgY2FsbGVkICovXG4gICAgICAgIGlmICghYVZhbGlkVHlwZSB8fCAhYlZhbGlkVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhhKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGJLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhiKS5sZW5ndGg7XG4gICAgICAgIGlmIChhS2V5c0NvdW50ICE9PSBiS2V5c0NvdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xuICAgICAgICAgICAgY29uc3QgYUhhc0tleSA9IGEuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgIGNvbnN0IGJIYXNLZXkgPSBiLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICAgICAgICBpZiAoKGFIYXNLZXkgJiYgIWJIYXNLZXkpIHx8XG4gICAgICAgICAgICAgICAgKCFhSGFzS2V5ICYmIGJIYXNLZXkpIHx8XG4gICAgICAgICAgICAgICAgIWxvb3NlRXF1YWwoYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKTtcbn1cbmZ1bmN0aW9uIGxvb3NlSW5kZXhPZihhcnIsIHZhbCkge1xuICAgIHJldHVybiBhcnIuZmluZEluZGV4KGl0ZW0gPT4gbG9vc2VFcXVhbChpdGVtLCB2YWwpKTtcbn1cblxuLyoqXG4gKiBGb3IgY29udmVydGluZyB7eyBpbnRlcnBvbGF0aW9uIH19IHZhbHVlcyB0byBkaXNwbGF5ZWQgc3RyaW5ncy5cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHRvRGlzcGxheVN0cmluZyA9ICh2YWwpID0+IHtcbiAgICByZXR1cm4gaXNTdHJpbmcodmFsKVxuICAgICAgICA/IHZhbFxuICAgICAgICA6IHZhbCA9PSBudWxsXG4gICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICA6IGlzQXJyYXkodmFsKSB8fFxuICAgICAgICAgICAgICAgIChpc09iamVjdCh2YWwpICYmXG4gICAgICAgICAgICAgICAgICAgICh2YWwudG9TdHJpbmcgPT09IG9iamVjdFRvU3RyaW5nIHx8ICFpc0Z1bmN0aW9uKHZhbC50b1N0cmluZykpKVxuICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCByZXBsYWNlciwgMilcbiAgICAgICAgICAgICAgICA6IFN0cmluZyh2YWwpO1xufTtcbmNvbnN0IHJlcGxhY2VyID0gKF9rZXksIHZhbCkgPT4ge1xuICAgIC8vIGNhbid0IHVzZSBpc1JlZiBoZXJlIHNpbmNlIEB2dWUvc2hhcmVkIGhhcyBubyBkZXBzXG4gICAgaWYgKHZhbCAmJiB2YWwuX192X2lzUmVmKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlcihfa2V5LCB2YWwudmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc01hcCh2YWwpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBbYE1hcCgke3ZhbC5zaXplfSlgXTogWy4uLnZhbC5lbnRyaWVzKCldLnJlZHVjZSgoZW50cmllcywgW2tleSwgdmFsXSkgPT4ge1xuICAgICAgICAgICAgICAgIGVudHJpZXNbYCR7a2V5fSA9PmBdID0gdmFsO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyaWVzO1xuICAgICAgICAgICAgfSwge30pXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU2V0KHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFtgU2V0KCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLnZhbHVlcygpXVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc09iamVjdCh2YWwpICYmICFpc0FycmF5KHZhbCkgJiYgIWlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHZhbCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59O1xuXG5jb25zdCBFTVBUWV9PQkogPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICA/IE9iamVjdC5mcmVlemUoe30pXG4gICAgOiB7fTtcbmNvbnN0IEVNUFRZX0FSUiA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IE9iamVjdC5mcmVlemUoW10pIDogW107XG5jb25zdCBOT09QID0gKCkgPT4geyB9O1xuLyoqXG4gKiBBbHdheXMgcmV0dXJuIGZhbHNlLlxuICovXG5jb25zdCBOTyA9ICgpID0+IGZhbHNlO1xuY29uc3Qgb25SRSA9IC9eb25bXmEtel0vO1xuY29uc3QgaXNPbiA9IChrZXkpID0+IG9uUkUudGVzdChrZXkpO1xuY29uc3QgaXNNb2RlbExpc3RlbmVyID0gKGtleSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ29uVXBkYXRlOicpO1xuY29uc3QgZXh0ZW5kID0gT2JqZWN0LmFzc2lnbjtcbmNvbnN0IHJlbW92ZSA9IChhcnIsIGVsKSA9PiB7XG4gICAgY29uc3QgaSA9IGFyci5pbmRleE9mKGVsKTtcbiAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gICAgfVxufTtcbmNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmNvbnN0IGhhc093biA9ICh2YWwsIGtleSkgPT4gaGFzT3duUHJvcGVydHkuY2FsbCh2YWwsIGtleSk7XG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmNvbnN0IGlzTWFwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IE1hcF0nO1xuY29uc3QgaXNTZXQgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgU2V0XSc7XG5jb25zdCBpc0RhdGUgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuY29uc3QgaXNGdW5jdGlvbiA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbic7XG5jb25zdCBpc1N0cmluZyA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xuY29uc3QgaXNTeW1ib2wgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSAnc3ltYm9sJztcbmNvbnN0IGlzT2JqZWN0ID0gKHZhbCkgPT4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xuY29uc3QgaXNQcm9taXNlID0gKHZhbCkgPT4ge1xuICAgIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnRoZW4pICYmIGlzRnVuY3Rpb24odmFsLmNhdGNoKTtcbn07XG5jb25zdCBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5jb25zdCB0b1R5cGVTdHJpbmcgPSAodmFsdWUpID0+IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xuY29uc3QgdG9SYXdUeXBlID0gKHZhbHVlKSA9PiB7XG4gICAgLy8gZXh0cmFjdCBcIlJhd1R5cGVcIiBmcm9tIHN0cmluZ3MgbGlrZSBcIltvYmplY3QgUmF3VHlwZV1cIlxuICAgIHJldHVybiB0b1R5cGVTdHJpbmcodmFsdWUpLnNsaWNlKDgsIC0xKTtcbn07XG5jb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuY29uc3QgaXNJbnRlZ2VyS2V5ID0gKGtleSkgPT4gaXNTdHJpbmcoa2V5KSAmJlxuICAgIGtleSAhPT0gJ05hTicgJiZcbiAgICBrZXlbMF0gIT09ICctJyAmJlxuICAgICcnICsgcGFyc2VJbnQoa2V5LCAxMCkgPT09IGtleTtcbmNvbnN0IGlzUmVzZXJ2ZWRQcm9wID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFxuLy8gdGhlIGxlYWRpbmcgY29tbWEgaXMgaW50ZW50aW9uYWwgc28gZW1wdHkgc3RyaW5nIFwiXCIgaXMgYWxzbyBpbmNsdWRlZFxuJyxrZXkscmVmLHJlZl9mb3IscmVmX2tleSwnICtcbiAgICAnb25Wbm9kZUJlZm9yZU1vdW50LG9uVm5vZGVNb3VudGVkLCcgK1xuICAgICdvblZub2RlQmVmb3JlVXBkYXRlLG9uVm5vZGVVcGRhdGVkLCcgK1xuICAgICdvblZub2RlQmVmb3JlVW5tb3VudCxvblZub2RlVW5tb3VudGVkJyk7XG5jb25zdCBpc0J1aWx0SW5EaXJlY3RpdmUgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoJ2JpbmQsY2xvYWssZWxzZS1pZixlbHNlLGZvcixodG1sLGlmLG1vZGVsLG9uLG9uY2UscHJlLHNob3csc2xvdCx0ZXh0LG1lbW8nKTtcbmNvbnN0IGNhY2hlU3RyaW5nRnVuY3Rpb24gPSAoZm4pID0+IHtcbiAgICBjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV0dXJuICgoc3RyKSA9PiB7XG4gICAgICAgIGNvbnN0IGhpdCA9IGNhY2hlW3N0cl07XG4gICAgICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKTtcbiAgICB9KTtcbn07XG5jb25zdCBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBjYW1lbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4ge1xuICAgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCAoXywgYykgPT4gKGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJykpO1xufSk7XG5jb25zdCBoeXBoZW5hdGVSRSA9IC9cXEIoW0EtWl0pL2c7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IGh5cGhlbmF0ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICctJDEnKS50b0xvd2VyQ2FzZSgpKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgY2FwaXRhbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgdG9IYW5kbGVyS2V5ID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIgPyBgb24ke2NhcGl0YWxpemUoc3RyKX1gIDogYGApO1xuLy8gY29tcGFyZSB3aGV0aGVyIGEgdmFsdWUgaGFzIGNoYW5nZWQsIGFjY291bnRpbmcgZm9yIE5hTi5cbmNvbnN0IGhhc0NoYW5nZWQgPSAodmFsdWUsIG9sZFZhbHVlKSA9PiAhT2JqZWN0LmlzKHZhbHVlLCBvbGRWYWx1ZSk7XG5jb25zdCBpbnZva2VBcnJheUZucyA9IChmbnMsIGFyZykgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZuc1tpXShhcmcpO1xuICAgIH1cbn07XG5jb25zdCBkZWYgPSAob2JqLCBrZXksIHZhbHVlKSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlXG4gICAgfSk7XG59O1xuY29uc3QgdG9OdW1iZXIgPSAodmFsKSA9PiB7XG4gICAgY29uc3QgbiA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuO1xufTtcbmxldCBfZ2xvYmFsVGhpcztcbmNvbnN0IGdldEdsb2JhbFRoaXMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChfZ2xvYmFsVGhpcyB8fFxuICAgICAgICAoX2dsb2JhbFRoaXMgPVxuICAgICAgICAgICAgdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyBnbG9iYWxUaGlzXG4gICAgICAgICAgICAgICAgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmXG4gICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gd2luZG93XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnbG9iYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSk7XG59O1xuY29uc3QgaWRlbnRSRSA9IC9eW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSokLztcbmZ1bmN0aW9uIGdlblByb3BzQWNjZXNzRXhwKG5hbWUpIHtcbiAgICByZXR1cm4gaWRlbnRSRS50ZXN0KG5hbWUpXG4gICAgICAgID8gYF9fcHJvcHMuJHtuYW1lfWBcbiAgICAgICAgOiBgX19wcm9wc1ske0pTT04uc3RyaW5naWZ5KG5hbWUpfV1gO1xufVxuXG5leHBvcnQgeyBFTVBUWV9BUlIsIEVNUFRZX09CSiwgTk8sIE5PT1AsIFBhdGNoRmxhZ05hbWVzLCBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgZGVmLCBlc2NhcGVIdG1sLCBlc2NhcGVIdG1sQ29tbWVudCwgZXh0ZW5kLCBnZW5Qcm9wc0FjY2Vzc0V4cCwgZ2VuZXJhdGVDb2RlRnJhbWUsIGdldEdsb2JhbFRoaXMsIGhhc0NoYW5nZWQsIGhhc093biwgaHlwaGVuYXRlLCBpbmNsdWRlQm9vbGVhbkF0dHIsIGludm9rZUFycmF5Rm5zLCBpc0FycmF5LCBpc0Jvb2xlYW5BdHRyLCBpc0J1aWx0SW5EaXJlY3RpdmUsIGlzRGF0ZSwgaXNGdW5jdGlvbiwgaXNHbG9iYWxseVdoaXRlbGlzdGVkLCBpc0hUTUxUYWcsIGlzSW50ZWdlcktleSwgaXNLbm93bkh0bWxBdHRyLCBpc0tub3duU3ZnQXR0ciwgaXNNYXAsIGlzTW9kZWxMaXN0ZW5lciwgaXNPYmplY3QsIGlzT24sIGlzUGxhaW5PYmplY3QsIGlzUHJvbWlzZSwgaXNSZXNlcnZlZFByb3AsIGlzU1NSU2FmZUF0dHJOYW1lLCBpc1NWR1RhZywgaXNTZXQsIGlzU3BlY2lhbEJvb2xlYW5BdHRyLCBpc1N0cmluZywgaXNTeW1ib2wsIGlzVm9pZFRhZywgbG9vc2VFcXVhbCwgbG9vc2VJbmRleE9mLCBtYWtlTWFwLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplUHJvcHMsIG5vcm1hbGl6ZVN0eWxlLCBvYmplY3RUb1N0cmluZywgcGFyc2VTdHJpbmdTdHlsZSwgcHJvcHNUb0F0dHJNYXAsIHJlbW92ZSwgc2xvdEZsYWdzVGV4dCwgc3RyaW5naWZ5U3R5bGUsIHRvRGlzcGxheVN0cmluZywgdG9IYW5kbGVyS2V5LCB0b051bWJlciwgdG9SYXdUeXBlLCB0b1R5cGVTdHJpbmcgfTtcbiIsImltcG9ydCB7IGV4dGVuZCwgaXNBcnJheSwgdG9OdW1iZXIsIGlzTWFwLCBpc0ludGVnZXJLZXksIGhhc093biwgaXNTeW1ib2wsIGlzT2JqZWN0LCBoYXNDaGFuZ2VkLCBtYWtlTWFwLCBjYXBpdGFsaXplLCB0b1Jhd1R5cGUsIGRlZiwgaXNGdW5jdGlvbiwgTk9PUCB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxuZnVuY3Rpb24gd2Fybihtc2csIC4uLmFyZ3MpIHtcbiAgICBjb25zb2xlLndhcm4oYFtWdWUgd2Fybl0gJHttc2d9YCwgLi4uYXJncyk7XG59XG5cbmxldCBhY3RpdmVFZmZlY3RTY29wZTtcbmNsYXNzIEVmZmVjdFNjb3BlIHtcbiAgICBjb25zdHJ1Y3RvcihkZXRhY2hlZCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZGV0YWNoZWQgPSBkZXRhY2hlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVmZmVjdHMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhbnVwcyA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xuICAgICAgICBpZiAoIWRldGFjaGVkICYmIGFjdGl2ZUVmZmVjdFNjb3BlKSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID1cbiAgICAgICAgICAgICAgICAoYWN0aXZlRWZmZWN0U2NvcGUuc2NvcGVzIHx8IChhY3RpdmVFZmZlY3RTY29wZS5zY29wZXMgPSBbXSkpLnB1c2godGhpcykgLSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJ1bihmbikge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFZmZlY3RTY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IGN1cnJlbnRFZmZlY3RTY29wZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYGNhbm5vdCBydW4gYW4gaW5hY3RpdmUgZWZmZWN0IHNjb3BlLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIG5vbi1kZXRhY2hlZCBzY29wZXNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbigpIHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb2ZmKCkge1xuICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXMucGFyZW50O1xuICAgIH1cbiAgICBzdG9wKGZyb21QYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICAgICAgICBsZXQgaSwgbDtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmVmZmVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZmZlY3RzW2ldLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNsZWFudXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYW51cHNbaV0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3Blcykge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLnNjb3Blcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29wZXNbaV0uc3RvcCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBuZXN0ZWQgc2NvcGUsIGRlcmVmZXJlbmNlIGZyb20gcGFyZW50IHRvIGF2b2lkIG1lbW9yeSBsZWFrc1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRldGFjaGVkICYmIHRoaXMucGFyZW50ICYmICFmcm9tUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gb3B0aW1pemVkIE8oMSkgcmVtb3ZhbFxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3QgPSB0aGlzLnBhcmVudC5zY29wZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgJiYgbGFzdCAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zY29wZXNbdGhpcy5pbmRleF0gPSBsYXN0O1xuICAgICAgICAgICAgICAgICAgICBsYXN0LmluZGV4ID0gdGhpcy5pbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBlZmZlY3RTY29wZShkZXRhY2hlZCkge1xuICAgIHJldHVybiBuZXcgRWZmZWN0U2NvcGUoZGV0YWNoZWQpO1xufVxuZnVuY3Rpb24gcmVjb3JkRWZmZWN0U2NvcGUoZWZmZWN0LCBzY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlKSB7XG4gICAgaWYgKHNjb3BlICYmIHNjb3BlLmFjdGl2ZSkge1xuICAgICAgICBzY29wZS5lZmZlY3RzLnB1c2goZWZmZWN0KTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRDdXJyZW50U2NvcGUoKSB7XG4gICAgcmV0dXJuIGFjdGl2ZUVmZmVjdFNjb3BlO1xufVxuZnVuY3Rpb24gb25TY29wZURpc3Bvc2UoZm4pIHtcbiAgICBpZiAoYWN0aXZlRWZmZWN0U2NvcGUpIHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUuY2xlYW51cHMucHVzaChmbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuKGBvblNjb3BlRGlzcG9zZSgpIGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIG5vIGFjdGl2ZSBlZmZlY3Qgc2NvcGVgICtcbiAgICAgICAgICAgIGAgdG8gYmUgYXNzb2NpYXRlZCB3aXRoLmApO1xuICAgIH1cbn1cblxuY29uc3QgY3JlYXRlRGVwID0gKGVmZmVjdHMpID0+IHtcbiAgICBjb25zdCBkZXAgPSBuZXcgU2V0KGVmZmVjdHMpO1xuICAgIGRlcC53ID0gMDtcbiAgICBkZXAubiA9IDA7XG4gICAgcmV0dXJuIGRlcDtcbn07XG5jb25zdCB3YXNUcmFja2VkID0gKGRlcCkgPT4gKGRlcC53ICYgdHJhY2tPcEJpdCkgPiAwO1xuY29uc3QgbmV3VHJhY2tlZCA9IChkZXApID0+IChkZXAubiAmIHRyYWNrT3BCaXQpID4gMDtcbmNvbnN0IGluaXREZXBNYXJrZXJzID0gKHsgZGVwcyB9KSA9PiB7XG4gICAgaWYgKGRlcHMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGVwc1tpXS53IHw9IHRyYWNrT3BCaXQ7IC8vIHNldCB3YXMgdHJhY2tlZFxuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGZpbmFsaXplRGVwTWFya2VycyA9IChlZmZlY3QpID0+IHtcbiAgICBjb25zdCB7IGRlcHMgfSA9IGVmZmVjdDtcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHB0ciA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZGVwID0gZGVwc1tpXTtcbiAgICAgICAgICAgIGlmICh3YXNUcmFja2VkKGRlcCkgJiYgIW5ld1RyYWNrZWQoZGVwKSkge1xuICAgICAgICAgICAgICAgIGRlcC5kZWxldGUoZWZmZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlcHNbcHRyKytdID0gZGVwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2xlYXIgYml0c1xuICAgICAgICAgICAgZGVwLncgJj0gfnRyYWNrT3BCaXQ7XG4gICAgICAgICAgICBkZXAubiAmPSB+dHJhY2tPcEJpdDtcbiAgICAgICAgfVxuICAgICAgICBkZXBzLmxlbmd0aCA9IHB0cjtcbiAgICB9XG59O1xuXG5jb25zdCB0YXJnZXRNYXAgPSBuZXcgV2Vha01hcCgpO1xuLy8gVGhlIG51bWJlciBvZiBlZmZlY3RzIGN1cnJlbnRseSBiZWluZyB0cmFja2VkIHJlY3Vyc2l2ZWx5LlxubGV0IGVmZmVjdFRyYWNrRGVwdGggPSAwO1xubGV0IHRyYWNrT3BCaXQgPSAxO1xuLyoqXG4gKiBUaGUgYml0d2lzZSB0cmFjayBtYXJrZXJzIHN1cHBvcnQgYXQgbW9zdCAzMCBsZXZlbHMgb2YgcmVjdXJzaW9uLlxuICogVGhpcyB2YWx1ZSBpcyBjaG9zZW4gdG8gZW5hYmxlIG1vZGVybiBKUyBlbmdpbmVzIHRvIHVzZSBhIFNNSSBvbiBhbGwgcGxhdGZvcm1zLlxuICogV2hlbiByZWN1cnNpb24gZGVwdGggaXMgZ3JlYXRlciwgZmFsbCBiYWNrIHRvIHVzaW5nIGEgZnVsbCBjbGVhbnVwLlxuICovXG5jb25zdCBtYXhNYXJrZXJCaXRzID0gMzA7XG5sZXQgYWN0aXZlRWZmZWN0O1xuY29uc3QgSVRFUkFURV9LRVkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ2l0ZXJhdGUnIDogJycpO1xuY29uc3QgTUFQX0tFWV9JVEVSQVRFX0tFWSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnTWFwIGtleSBpdGVyYXRlJyA6ICcnKTtcbmNsYXNzIFJlYWN0aXZlRWZmZWN0IHtcbiAgICBjb25zdHJ1Y3Rvcihmbiwgc2NoZWR1bGVyID0gbnVsbCwgc2NvcGUpIHtcbiAgICAgICAgdGhpcy5mbiA9IGZuO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmRlcHMgPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJlY29yZEVmZmVjdFNjb3BlKHRoaXMsIHNjb3BlKTtcbiAgICB9XG4gICAgcnVuKCkge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbigpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYXJlbnQgPSBhY3RpdmVFZmZlY3Q7XG4gICAgICAgIGxldCBsYXN0U2hvdWxkVHJhY2sgPSBzaG91bGRUcmFjaztcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gYWN0aXZlRWZmZWN0O1xuICAgICAgICAgICAgYWN0aXZlRWZmZWN0ID0gdGhpcztcbiAgICAgICAgICAgIHNob3VsZFRyYWNrID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyYWNrT3BCaXQgPSAxIDw8ICsrZWZmZWN0VHJhY2tEZXB0aDtcbiAgICAgICAgICAgIGlmIChlZmZlY3RUcmFja0RlcHRoIDw9IG1heE1hcmtlckJpdHMpIHtcbiAgICAgICAgICAgICAgICBpbml0RGVwTWFya2Vycyh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsZWFudXBFZmZlY3QodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbigpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKGVmZmVjdFRyYWNrRGVwdGggPD0gbWF4TWFya2VyQml0cykge1xuICAgICAgICAgICAgICAgIGZpbmFsaXplRGVwTWFya2Vycyh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNrT3BCaXQgPSAxIDw8IC0tZWZmZWN0VHJhY2tEZXB0aDtcbiAgICAgICAgICAgIGFjdGl2ZUVmZmVjdCA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgc2hvdWxkVHJhY2sgPSBsYXN0U2hvdWxkVHJhY2s7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmVyU3RvcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIC8vIHN0b3BwZWQgd2hpbGUgcnVubmluZyBpdHNlbGYgLSBkZWZlciB0aGUgY2xlYW51cFxuICAgICAgICBpZiAoYWN0aXZlRWZmZWN0ID09PSB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmVyU3RvcCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGNsZWFudXBFZmZlY3QodGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vblN0b3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNsZWFudXBFZmZlY3QoZWZmZWN0KSB7XG4gICAgY29uc3QgeyBkZXBzIH0gPSBlZmZlY3Q7XG4gICAgaWYgKGRlcHMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGVwc1tpXS5kZWxldGUoZWZmZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBkZXBzLmxlbmd0aCA9IDA7XG4gICAgfVxufVxuZnVuY3Rpb24gZWZmZWN0KGZuLCBvcHRpb25zKSB7XG4gICAgaWYgKGZuLmVmZmVjdCkge1xuICAgICAgICBmbiA9IGZuLmVmZmVjdC5mbjtcbiAgICB9XG4gICAgY29uc3QgX2VmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChmbik7XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgZXh0ZW5kKF9lZmZlY3QsIG9wdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucy5zY29wZSlcbiAgICAgICAgICAgIHJlY29yZEVmZmVjdFNjb3BlKF9lZmZlY3QsIG9wdGlvbnMuc2NvcGUpO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMubGF6eSkge1xuICAgICAgICBfZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgICBjb25zdCBydW5uZXIgPSBfZWZmZWN0LnJ1bi5iaW5kKF9lZmZlY3QpO1xuICAgIHJ1bm5lci5lZmZlY3QgPSBfZWZmZWN0O1xuICAgIHJldHVybiBydW5uZXI7XG59XG5mdW5jdGlvbiBzdG9wKHJ1bm5lcikge1xuICAgIHJ1bm5lci5lZmZlY3Quc3RvcCgpO1xufVxubGV0IHNob3VsZFRyYWNrID0gdHJ1ZTtcbmNvbnN0IHRyYWNrU3RhY2sgPSBbXTtcbmZ1bmN0aW9uIHBhdXNlVHJhY2tpbmcoKSB7XG4gICAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgICBzaG91bGRUcmFjayA9IGZhbHNlO1xufVxuZnVuY3Rpb24gZW5hYmxlVHJhY2tpbmcoKSB7XG4gICAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgICBzaG91bGRUcmFjayA9IHRydWU7XG59XG5mdW5jdGlvbiByZXNldFRyYWNraW5nKCkge1xuICAgIGNvbnN0IGxhc3QgPSB0cmFja1N0YWNrLnBvcCgpO1xuICAgIHNob3VsZFRyYWNrID0gbGFzdCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGxhc3Q7XG59XG5mdW5jdGlvbiB0cmFjayh0YXJnZXQsIHR5cGUsIGtleSkge1xuICAgIGlmIChzaG91bGRUcmFjayAmJiBhY3RpdmVFZmZlY3QpIHtcbiAgICAgICAgbGV0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgIGlmICghZGVwc01hcCkge1xuICAgICAgICAgICAgdGFyZ2V0TWFwLnNldCh0YXJnZXQsIChkZXBzTWFwID0gbmV3IE1hcCgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRlcCA9IGRlcHNNYXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICghZGVwKSB7XG4gICAgICAgICAgICBkZXBzTWFwLnNldChrZXksIChkZXAgPSBjcmVhdGVEZXAoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50SW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgPyB7IGVmZmVjdDogYWN0aXZlRWZmZWN0LCB0YXJnZXQsIHR5cGUsIGtleSB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdHJhY2tFZmZlY3RzKGRlcCwgZXZlbnRJbmZvKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0cmFja0VmZmVjdHMoZGVwLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XG4gICAgbGV0IHNob3VsZFRyYWNrID0gZmFsc2U7XG4gICAgaWYgKGVmZmVjdFRyYWNrRGVwdGggPD0gbWF4TWFya2VyQml0cykge1xuICAgICAgICBpZiAoIW5ld1RyYWNrZWQoZGVwKSkge1xuICAgICAgICAgICAgZGVwLm4gfD0gdHJhY2tPcEJpdDsgLy8gc2V0IG5ld2x5IHRyYWNrZWRcbiAgICAgICAgICAgIHNob3VsZFRyYWNrID0gIXdhc1RyYWNrZWQoZGVwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gRnVsbCBjbGVhbnVwIG1vZGUuXG4gICAgICAgIHNob3VsZFRyYWNrID0gIWRlcC5oYXMoYWN0aXZlRWZmZWN0KTtcbiAgICB9XG4gICAgaWYgKHNob3VsZFRyYWNrKSB7XG4gICAgICAgIGRlcC5hZGQoYWN0aXZlRWZmZWN0KTtcbiAgICAgICAgYWN0aXZlRWZmZWN0LmRlcHMucHVzaChkZXApO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGFjdGl2ZUVmZmVjdC5vblRyYWNrKSB7XG4gICAgICAgICAgICBhY3RpdmVFZmZlY3Qub25UcmFjayhPYmplY3QuYXNzaWduKHsgZWZmZWN0OiBhY3RpdmVFZmZlY3QgfSwgZGVidWdnZXJFdmVudEV4dHJhSW5mbykpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlcih0YXJnZXQsIHR5cGUsIGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBvbGRUYXJnZXQpIHtcbiAgICBjb25zdCBkZXBzTWFwID0gdGFyZ2V0TWFwLmdldCh0YXJnZXQpO1xuICAgIGlmICghZGVwc01hcCkge1xuICAgICAgICAvLyBuZXZlciBiZWVuIHRyYWNrZWRcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgZGVwcyA9IFtdO1xuICAgIGlmICh0eXBlID09PSBcImNsZWFyXCIgLyogVHJpZ2dlck9wVHlwZXMuQ0xFQVIgKi8pIHtcbiAgICAgICAgLy8gY29sbGVjdGlvbiBiZWluZyBjbGVhcmVkXG4gICAgICAgIC8vIHRyaWdnZXIgYWxsIGVmZmVjdHMgZm9yIHRhcmdldFxuICAgICAgICBkZXBzID0gWy4uLmRlcHNNYXAudmFsdWVzKCldO1xuICAgIH1cbiAgICBlbHNlIGlmIChrZXkgPT09ICdsZW5ndGgnICYmIGlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICBjb25zdCBuZXdMZW5ndGggPSB0b051bWJlcihuZXdWYWx1ZSk7XG4gICAgICAgIGRlcHNNYXAuZm9yRWFjaCgoZGVwLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdsZW5ndGgnIHx8IGtleSA+PSBuZXdMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzY2hlZHVsZSBydW5zIGZvciBTRVQgfCBBREQgfCBERUxFVEVcbiAgICAgICAgaWYgKGtleSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoa2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWxzbyBydW4gZm9yIGl0ZXJhdGlvbiBrZXkgb24gQUREIHwgREVMRVRFIHwgTWFwLlNFVFxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJhZGRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5BREQgKi86XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSW50ZWdlcktleShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5ldyBpbmRleCBhZGRlZCB0byBhcnJheSAtPiBsZW5ndGggY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoJ2xlbmd0aCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovOlxuICAgICAgICAgICAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KE1BUF9LRVlfSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi86XG4gICAgICAgICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50SW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IHsgdGFyZ2V0LCB0eXBlLCBrZXksIG5ld1ZhbHVlLCBvbGRWYWx1ZSwgb2xkVGFyZ2V0IH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGRlcHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmIChkZXBzWzBdKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMoZGVwc1swXSwgZXZlbnRJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGRlcHNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBlZmZlY3RzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZGVwIG9mIGRlcHMpIHtcbiAgICAgICAgICAgIGlmIChkZXApIHtcbiAgICAgICAgICAgICAgICBlZmZlY3RzLnB1c2goLi4uZGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhjcmVhdGVEZXAoZWZmZWN0cyksIGV2ZW50SW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhjcmVhdGVEZXAoZWZmZWN0cykpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlckVmZmVjdHMoZGVwLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XG4gICAgLy8gc3ByZWFkIGludG8gYXJyYXkgZm9yIHN0YWJpbGl6YXRpb25cbiAgICBjb25zdCBlZmZlY3RzID0gaXNBcnJheShkZXApID8gZGVwIDogWy4uLmRlcF07XG4gICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgZWZmZWN0cykge1xuICAgICAgICBpZiAoZWZmZWN0LmNvbXB1dGVkKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0KGVmZmVjdCwgZGVidWdnZXJFdmVudEV4dHJhSW5mbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgZWZmZWN0cykge1xuICAgICAgICBpZiAoIWVmZmVjdC5jb21wdXRlZCkge1xuICAgICAgICAgICAgdHJpZ2dlckVmZmVjdChlZmZlY3QsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlckVmZmVjdChlZmZlY3QsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pIHtcbiAgICBpZiAoZWZmZWN0ICE9PSBhY3RpdmVFZmZlY3QgfHwgZWZmZWN0LmFsbG93UmVjdXJzZSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGVmZmVjdC5vblRyaWdnZXIpIHtcbiAgICAgICAgICAgIGVmZmVjdC5vblRyaWdnZXIoZXh0ZW5kKHsgZWZmZWN0IH0sIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnNjaGVkdWxlcikge1xuICAgICAgICAgICAgZWZmZWN0LnNjaGVkdWxlcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWZmZWN0LnJ1bigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBpc05vblRyYWNrYWJsZUtleXMgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoYF9fcHJvdG9fXyxfX3ZfaXNSZWYsX19pc1Z1ZWApO1xuY29uc3QgYnVpbHRJblN5bWJvbHMgPSBuZXcgU2V0KFxuLyojX19QVVJFX18qL1xuT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoU3ltYm9sKVxuICAgIC8vIGlvczEwLnggT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoU3ltYm9sKSBjYW4gZW51bWVyYXRlICdhcmd1bWVudHMnIGFuZCAnY2FsbGVyJ1xuICAgIC8vIGJ1dCBhY2Nlc3NpbmcgdGhlbSBvbiBTeW1ib2wgbGVhZHMgdG8gVHlwZUVycm9yIGJlY2F1c2UgU3ltYm9sIGlzIGEgc3RyaWN0IG1vZGVcbiAgICAvLyBmdW5jdGlvblxuICAgIC5maWx0ZXIoa2V5ID0+IGtleSAhPT0gJ2FyZ3VtZW50cycgJiYga2V5ICE9PSAnY2FsbGVyJylcbiAgICAubWFwKGtleSA9PiBTeW1ib2xba2V5XSlcbiAgICAuZmlsdGVyKGlzU3ltYm9sKSk7XG5jb25zdCBnZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcigpO1xuY29uc3Qgc2hhbGxvd0dldCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlR2V0dGVyKGZhbHNlLCB0cnVlKTtcbmNvbnN0IHJlYWRvbmx5R2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVHZXR0ZXIodHJ1ZSk7XG5jb25zdCBzaGFsbG93UmVhZG9ubHlHZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcih0cnVlLCB0cnVlKTtcbmNvbnN0IGFycmF5SW5zdHJ1bWVudGF0aW9ucyA9IC8qI19fUFVSRV9fKi8gY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zKCk7XG5mdW5jdGlvbiBjcmVhdGVBcnJheUluc3RydW1lbnRhdGlvbnMoKSB7XG4gICAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHt9O1xuICAgIFsnaW5jbHVkZXMnLCAnaW5kZXhPZicsICdsYXN0SW5kZXhPZiddLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaW5zdHJ1bWVudGF0aW9uc1trZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IHRvUmF3KHRoaXMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRyYWNrKGFyciwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBpICsgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gd2UgcnVuIHRoZSBtZXRob2QgdXNpbmcgdGhlIG9yaWdpbmFsIGFyZ3MgZmlyc3QgKHdoaWNoIG1heSBiZSByZWFjdGl2ZSlcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGFycltrZXldKC4uLmFyZ3MpO1xuICAgICAgICAgICAgaWYgKHJlcyA9PT0gLTEgfHwgcmVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoYXQgZGlkbid0IHdvcmssIHJ1biBpdCBhZ2FpbiB1c2luZyByYXcgdmFsdWVzLlxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJba2V5XSguLi5hcmdzLm1hcCh0b1JhdykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJ10uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpbnN0cnVtZW50YXRpb25zW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgICAgY29uc3QgcmVzID0gdG9SYXcodGhpcylba2V5XS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGluc3RydW1lbnRhdGlvbnM7XG59XG5mdW5jdGlvbiBjcmVhdGVHZXR0ZXIoaXNSZWFkb25seSA9IGZhbHNlLCBzaGFsbG93ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgICAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFDVElWRSAqLykge1xuICAgICAgICAgICAgcmV0dXJuICFpc1JlYWRvbmx5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBRE9OTFkgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRvbmx5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNTaGFsbG93XCIgLyogUmVhY3RpdmVGbGFncy5JU19TSEFMTE9XICovKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhbGxvdztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovICYmXG4gICAgICAgICAgICByZWNlaXZlciA9PT1cbiAgICAgICAgICAgICAgICAoaXNSZWFkb25seVxuICAgICAgICAgICAgICAgICAgICA/IHNoYWxsb3dcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2hhbGxvd1JlYWRvbmx5TWFwXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlYWRvbmx5TWFwXG4gICAgICAgICAgICAgICAgICAgIDogc2hhbGxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBzaGFsbG93UmVhY3RpdmVNYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVhY3RpdmVNYXApLmdldCh0YXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldElzQXJyYXkgPSBpc0FycmF5KHRhcmdldCk7XG4gICAgICAgIGlmICghaXNSZWFkb25seSAmJiB0YXJnZXRJc0FycmF5ICYmIGhhc093bihhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldChhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSwgcmVjZWl2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcik7XG4gICAgICAgIGlmIChpc1N5bWJvbChrZXkpID8gYnVpbHRJblN5bWJvbHMuaGFzKGtleSkgOiBpc05vblRyYWNrYWJsZUtleXMoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzUmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHRyYWNrKHRhcmdldCwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaGFsbG93KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZihyZXMpKSB7XG4gICAgICAgICAgICAvLyByZWYgdW53cmFwcGluZyAtIHNraXAgdW53cmFwIGZvciBBcnJheSArIGludGVnZXIga2V5LlxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldElzQXJyYXkgJiYgaXNJbnRlZ2VyS2V5KGtleSkgPyByZXMgOiByZXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JqZWN0KHJlcykpIHtcbiAgICAgICAgICAgIC8vIENvbnZlcnQgcmV0dXJuZWQgdmFsdWUgaW50byBhIHByb3h5IGFzIHdlbGwuIHdlIGRvIHRoZSBpc09iamVjdCBjaGVja1xuICAgICAgICAgICAgLy8gaGVyZSB0byBhdm9pZCBpbnZhbGlkIHZhbHVlIHdhcm5pbmcuIEFsc28gbmVlZCB0byBsYXp5IGFjY2VzcyByZWFkb25seVxuICAgICAgICAgICAgLy8gYW5kIHJlYWN0aXZlIGhlcmUgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jeS5cbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRvbmx5ID8gcmVhZG9ubHkocmVzKSA6IHJlYWN0aXZlKHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xufVxuY29uc3Qgc2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVTZXR0ZXIoKTtcbmNvbnN0IHNoYWxsb3dTZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZVNldHRlcih0cnVlKTtcbmZ1bmN0aW9uIGNyZWF0ZVNldHRlcihzaGFsbG93ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgbGV0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgICAgIGlmIChpc1JlYWRvbmx5KG9sZFZhbHVlKSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2hhbGxvdykge1xuICAgICAgICAgICAgaWYgKCFpc1NoYWxsb3codmFsdWUpICYmICFpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gdG9SYXcob2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkgJiYgaXNSZWYob2xkVmFsdWUpICYmICFpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhZEtleSA9IGlzQXJyYXkodGFyZ2V0KSAmJiBpc0ludGVnZXJLZXkoa2V5KVxuICAgICAgICAgICAgPyBOdW1iZXIoa2V5KSA8IHRhcmdldC5sZW5ndGhcbiAgICAgICAgICAgIDogaGFzT3duKHRhcmdldCwga2V5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5zZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcik7XG4gICAgICAgIC8vIGRvbid0IHRyaWdnZXIgaWYgdGFyZ2V0IGlzIHNvbWV0aGluZyB1cCBpbiB0aGUgcHJvdG90eXBlIGNoYWluIG9mIG9yaWdpbmFsXG4gICAgICAgIGlmICh0YXJnZXQgPT09IHRvUmF3KHJlY2VpdmVyKSkge1xuICAgICAgICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5BREQgKi8sIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIgLyogVHJpZ2dlck9wVHlwZXMuU0VUICovLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICBjb25zdCBoYWRLZXkgPSBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSk7XG4gICAgaWYgKHJlc3VsdCAmJiBoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovLCBrZXksIHVuZGVmaW5lZCwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaGFzKHRhcmdldCwga2V5KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5oYXModGFyZ2V0LCBrZXkpO1xuICAgIGlmICghaXNTeW1ib2woa2V5KSB8fCAhYnVpbHRJblN5bWJvbHMuaGFzKGtleSkpIHtcbiAgICAgICAgdHJhY2sodGFyZ2V0LCBcImhhc1wiIC8qIFRyYWNrT3BUeXBlcy5IQVMgKi8sIGtleSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBvd25LZXlzKHRhcmdldCkge1xuICAgIHRyYWNrKHRhcmdldCwgXCJpdGVyYXRlXCIgLyogVHJhY2tPcFR5cGVzLklURVJBVEUgKi8sIGlzQXJyYXkodGFyZ2V0KSA/ICdsZW5ndGgnIDogSVRFUkFURV9LRVkpO1xuICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbn1cbmNvbnN0IG11dGFibGVIYW5kbGVycyA9IHtcbiAgICBnZXQsXG4gICAgc2V0LFxuICAgIGRlbGV0ZVByb3BlcnR5LFxuICAgIGhhcyxcbiAgICBvd25LZXlzXG59O1xuY29uc3QgcmVhZG9ubHlIYW5kbGVycyA9IHtcbiAgICBnZXQ6IHJlYWRvbmx5R2V0LFxuICAgIHNldCh0YXJnZXQsIGtleSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBTZXQgb3BlcmF0aW9uIG9uIGtleSBcIiR7U3RyaW5nKGtleSl9XCIgZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYERlbGV0ZSBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5jb25zdCBzaGFsbG93UmVhY3RpdmVIYW5kbGVycyA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCBtdXRhYmxlSGFuZGxlcnMsIHtcbiAgICBnZXQ6IHNoYWxsb3dHZXQsXG4gICAgc2V0OiBzaGFsbG93U2V0XG59KTtcbi8vIFByb3BzIGhhbmRsZXJzIGFyZSBzcGVjaWFsIGluIHRoZSBzZW5zZSB0aGF0IGl0IHNob3VsZCBub3QgdW53cmFwIHRvcC1sZXZlbFxuLy8gcmVmcyAoaW4gb3JkZXIgdG8gYWxsb3cgcmVmcyB0byBiZSBleHBsaWNpdGx5IHBhc3NlZCBkb3duKSwgYnV0IHNob3VsZFxuLy8gcmV0YWluIHRoZSByZWFjdGl2aXR5IG9mIHRoZSBub3JtYWwgcmVhZG9ubHkgb2JqZWN0LlxuY29uc3Qgc2hhbGxvd1JlYWRvbmx5SGFuZGxlcnMgPSAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgcmVhZG9ubHlIYW5kbGVycywge1xuICAgIGdldDogc2hhbGxvd1JlYWRvbmx5R2V0XG59KTtcblxuY29uc3QgdG9TaGFsbG93ID0gKHZhbHVlKSA9PiB2YWx1ZTtcbmNvbnN0IGdldFByb3RvID0gKHYpID0+IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2Yodik7XG5mdW5jdGlvbiBnZXQkMSh0YXJnZXQsIGtleSwgaXNSZWFkb25seSA9IGZhbHNlLCBpc1NoYWxsb3cgPSBmYWxzZSkge1xuICAgIC8vICMxNzcyOiByZWFkb25seShyZWFjdGl2ZShNYXApKSBzaG91bGQgcmV0dXJuIHJlYWRvbmx5ICsgcmVhY3RpdmUgdmVyc2lvblxuICAgIC8vIG9mIHRoZSB2YWx1ZVxuICAgIHRhcmdldCA9IHRhcmdldFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgICBpZiAoa2V5ICE9PSByYXdLZXkpIHtcbiAgICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCByYXdLZXkpO1xuICAgIH1cbiAgICBjb25zdCB7IGhhcyB9ID0gZ2V0UHJvdG8ocmF3VGFyZ2V0KTtcbiAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgIGlmIChoYXMuY2FsbChyYXdUYXJnZXQsIGtleSkpIHtcbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChrZXkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaGFzLmNhbGwocmF3VGFyZ2V0LCByYXdLZXkpKSB7XG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQocmF3S2V5KSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhcmdldCAhPT0gcmF3VGFyZ2V0KSB7XG4gICAgICAgIC8vICMzNjAyIHJlYWRvbmx5KHJlYWN0aXZlKE1hcCkpXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBuZXN0ZWQgcmVhY3RpdmUgYE1hcGAgY2FuIGRvIHRyYWNraW5nIGZvciBpdHNlbGZcbiAgICAgICAgdGFyZ2V0LmdldChrZXkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhcyQxKGtleSwgaXNSZWFkb25seSA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgICBpZiAoa2V5ICE9PSByYXdLZXkpIHtcbiAgICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiAvKiBUcmFja09wVHlwZXMuSEFTICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiAvKiBUcmFja09wVHlwZXMuSEFTICovLCByYXdLZXkpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5ID09PSByYXdLZXlcbiAgICAgICAgPyB0YXJnZXQuaGFzKGtleSlcbiAgICAgICAgOiB0YXJnZXQuaGFzKGtleSkgfHwgdGFyZ2V0LmhhcyhyYXdLZXkpO1xufVxuZnVuY3Rpb24gc2l6ZSh0YXJnZXQsIGlzUmVhZG9ubHkgPSBmYWxzZSkge1xuICAgIHRhcmdldCA9IHRhcmdldFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgIWlzUmVhZG9ubHkgJiYgdHJhY2sodG9SYXcodGFyZ2V0KSwgXCJpdGVyYXRlXCIgLyogVHJhY2tPcFR5cGVzLklURVJBVEUgKi8sIElURVJBVEVfS0VZKTtcbiAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCAnc2l6ZScsIHRhcmdldCk7XG59XG5mdW5jdGlvbiBhZGQodmFsdWUpIHtcbiAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICBjb25zdCBwcm90byA9IGdldFByb3RvKHRhcmdldCk7XG4gICAgY29uc3QgaGFkS2V5ID0gcHJvdG8uaGFzLmNhbGwodGFyZ2V0LCB2YWx1ZSk7XG4gICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgdGFyZ2V0LmFkZCh2YWx1ZSk7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLywgdmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XG5mdW5jdGlvbiBzZXQkMShrZXksIHZhbHVlKSB7XG4gICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgY29uc3QgeyBoYXMsIGdldCB9ID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgICBsZXQgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgIGtleSA9IHRvUmF3KGtleSk7XG4gICAgICAgIGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpO1xuICAgIH1cbiAgICBjb25zdCBvbGRWYWx1ZSA9IGdldC5jYWxsKHRhcmdldCwga2V5KTtcbiAgICB0YXJnZXQuc2V0KGtleSwgdmFsdWUpO1xuICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLywga2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGhhc0NoYW5nZWQodmFsdWUsIG9sZFZhbHVlKSkge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8sIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XG5mdW5jdGlvbiBkZWxldGVFbnRyeShrZXkpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICBjb25zdCB7IGhhcywgZ2V0IH0gPSBnZXRQcm90byh0YXJnZXQpO1xuICAgIGxldCBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgICAgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSk7XG4gICAgfVxuICAgIGNvbnN0IG9sZFZhbHVlID0gZ2V0ID8gZ2V0LmNhbGwodGFyZ2V0LCBrZXkpIDogdW5kZWZpbmVkO1xuICAgIC8vIGZvcndhcmQgdGhlIG9wZXJhdGlvbiBiZWZvcmUgcXVldWVpbmcgcmVhY3Rpb25zXG4gICAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmRlbGV0ZShrZXkpO1xuICAgIGlmIChoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovLCBrZXksIHVuZGVmaW5lZCwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgY29uc3QgaGFkSXRlbXMgPSB0YXJnZXQuc2l6ZSAhPT0gMDtcbiAgICBjb25zdCBvbGRUYXJnZXQgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgPyBpc01hcCh0YXJnZXQpXG4gICAgICAgICAgICA/IG5ldyBNYXAodGFyZ2V0KVxuICAgICAgICAgICAgOiBuZXcgU2V0KHRhcmdldClcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gZm9yd2FyZCB0aGUgb3BlcmF0aW9uIGJlZm9yZSBxdWV1ZWluZyByZWFjdGlvbnNcbiAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuY2xlYXIoKTtcbiAgICBpZiAoaGFkSXRlbXMpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiY2xlYXJcIiAvKiBUcmlnZ2VyT3BUeXBlcy5DTEVBUiAqLywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9sZFRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjcmVhdGVGb3JFYWNoKGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xuICAgIHJldHVybiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVkID0gdGhpcztcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gb2JzZXJ2ZWRbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dO1xuICAgICAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgICAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaXRlcmF0ZVwiIC8qIFRyYWNrT3BUeXBlcy5JVEVSQVRFICovLCBJVEVSQVRFX0tFWSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgLy8gaW1wb3J0YW50OiBtYWtlIHN1cmUgdGhlIGNhbGxiYWNrIGlzXG4gICAgICAgICAgICAvLyAxLiBpbnZva2VkIHdpdGggdGhlIHJlYWN0aXZlIG1hcCBhcyBgdGhpc2AgYW5kIDNyZCBhcmdcbiAgICAgICAgICAgIC8vIDIuIHRoZSB2YWx1ZSByZWNlaXZlZCBzaG91bGQgYmUgYSBjb3JyZXNwb25kaW5nIHJlYWN0aXZlL3JlYWRvbmx5LlxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgd3JhcCh2YWx1ZSksIHdyYXAoa2V5KSwgb2JzZXJ2ZWQpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBpc1JlYWRvbmx5LCBpc1NoYWxsb3cpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgICAgIGNvbnN0IHRhcmdldElzTWFwID0gaXNNYXAocmF3VGFyZ2V0KTtcbiAgICAgICAgY29uc3QgaXNQYWlyID0gbWV0aG9kID09PSAnZW50cmllcycgfHwgKG1ldGhvZCA9PT0gU3ltYm9sLml0ZXJhdG9yICYmIHRhcmdldElzTWFwKTtcbiAgICAgICAgY29uc3QgaXNLZXlPbmx5ID0gbWV0aG9kID09PSAna2V5cycgJiYgdGFyZ2V0SXNNYXA7XG4gICAgICAgIGNvbnN0IGlubmVySXRlcmF0b3IgPSB0YXJnZXRbbWV0aG9kXSguLi5hcmdzKTtcbiAgICAgICAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgICAgICAgIWlzUmVhZG9ubHkgJiZcbiAgICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJpdGVyYXRlXCIgLyogVHJhY2tPcFR5cGVzLklURVJBVEUgKi8sIGlzS2V5T25seSA/IE1BUF9LRVlfSVRFUkFURV9LRVkgOiBJVEVSQVRFX0tFWSk7XG4gICAgICAgIC8vIHJldHVybiBhIHdyYXBwZWQgaXRlcmF0b3Igd2hpY2ggcmV0dXJucyBvYnNlcnZlZCB2ZXJzaW9ucyBvZiB0aGVcbiAgICAgICAgLy8gdmFsdWVzIGVtaXR0ZWQgZnJvbSB0aGUgcmVhbCBpdGVyYXRvclxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gaXRlcmF0b3IgcHJvdG9jb2xcbiAgICAgICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gaW5uZXJJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgPyB7IHZhbHVlLCBkb25lIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXNQYWlyID8gW3dyYXAodmFsdWVbMF0pLCB3cmFwKHZhbHVlWzFdKV0gOiB3cmFwKHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBpdGVyYWJsZSBwcm90b2NvbFxuICAgICAgICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlYWRvbmx5TWV0aG9kKHR5cGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXJnc1swXSA/IGBvbiBrZXkgXCIke2FyZ3NbMF19XCIgYCA6IGBgO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGAke2NhcGl0YWxpemUodHlwZSl9IG9wZXJhdGlvbiAke2tleX1mYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0b1Jhdyh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGUgPT09IFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovID8gZmFsc2UgOiB0aGlzO1xuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25zKCkge1xuICAgIGNvbnN0IG11dGFibGVJbnN0cnVtZW50YXRpb25zID0ge1xuICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzOiBoYXMkMSxcbiAgICAgICAgYWRkLFxuICAgICAgICBzZXQ6IHNldCQxLFxuICAgICAgICBkZWxldGU6IGRlbGV0ZUVudHJ5LFxuICAgICAgICBjbGVhcixcbiAgICAgICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaChmYWxzZSwgZmFsc2UpXG4gICAgfTtcbiAgICBjb25zdCBzaGFsbG93SW5zdHJ1bWVudGF0aW9ucyA9IHtcbiAgICAgICAgZ2V0KGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICBoYXM6IGhhcyQxLFxuICAgICAgICBhZGQsXG4gICAgICAgIHNldDogc2V0JDEsXG4gICAgICAgIGRlbGV0ZTogZGVsZXRlRW50cnksXG4gICAgICAgIGNsZWFyLFxuICAgICAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKGZhbHNlLCB0cnVlKVxuICAgIH07XG4gICAgY29uc3QgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zID0ge1xuICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhcyQxLmNhbGwodGhpcywga2V5LCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLyksXG4gICAgICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8pLFxuICAgICAgICBkZWxldGU6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovKSxcbiAgICAgICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiY2xlYXJcIiAvKiBUcmlnZ2VyT3BUeXBlcy5DTEVBUiAqLyksXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2godHJ1ZSwgZmFsc2UpXG4gICAgfTtcbiAgICBjb25zdCBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zID0ge1xuICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhcyQxLmNhbGwodGhpcywga2V5LCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImFkZFwiIC8qIFRyaWdnZXJPcFR5cGVzLkFERCAqLyksXG4gICAgICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8pLFxuICAgICAgICBkZWxldGU6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovKSxcbiAgICAgICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiY2xlYXJcIiAvKiBUcmlnZ2VyT3BUeXBlcy5DTEVBUiAqLyksXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2godHJ1ZSwgdHJ1ZSlcbiAgICB9O1xuICAgIGNvbnN0IGl0ZXJhdG9yTWV0aG9kcyA9IFsna2V5cycsICd2YWx1ZXMnLCAnZW50cmllcycsIFN5bWJvbC5pdGVyYXRvcl07XG4gICAgaXRlcmF0b3JNZXRob2RzLmZvckVhY2gobWV0aG9kID0+IHtcbiAgICAgICAgbXV0YWJsZUluc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgc2hhbGxvd0luc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgZmFsc2UsIHRydWUpO1xuICAgICAgICBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIHRydWUsIHRydWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBbXG4gICAgICAgIG11dGFibGVJbnN0cnVtZW50YXRpb25zLFxuICAgICAgICByZWFkb25seUluc3RydW1lbnRhdGlvbnMsXG4gICAgICAgIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zLFxuICAgICAgICBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXG4gICAgXTtcbn1cbmNvbnN0IFttdXRhYmxlSW5zdHJ1bWVudGF0aW9ucywgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zLCBzaGFsbG93SW5zdHJ1bWVudGF0aW9ucywgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc10gPSAvKiAjX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25zKCk7XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoaXNSZWFkb25seSwgc2hhbGxvdykge1xuICAgIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSBzaGFsbG93XG4gICAgICAgID8gaXNSZWFkb25seVxuICAgICAgICAgICAgPyBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXG4gICAgICAgICAgICA6IHNoYWxsb3dJbnN0cnVtZW50YXRpb25zXG4gICAgICAgIDogaXNSZWFkb25seVxuICAgICAgICAgICAgPyByZWFkb25seUluc3RydW1lbnRhdGlvbnNcbiAgICAgICAgICAgIDogbXV0YWJsZUluc3RydW1lbnRhdGlvbnM7XG4gICAgcmV0dXJuICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpID0+IHtcbiAgICAgICAgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFjdGl2ZVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBQ1RJVkUgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiAhaXNSZWFkb25seTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNSZWFkb25seTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldChoYXNPd24oaW5zdHJ1bWVudGF0aW9ucywga2V5KSAmJiBrZXkgaW4gdGFyZ2V0XG4gICAgICAgICAgICA/IGluc3RydW1lbnRhdGlvbnNcbiAgICAgICAgICAgIDogdGFyZ2V0LCBrZXksIHJlY2VpdmVyKTtcbiAgICB9O1xufVxuY29uc3QgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgICBnZXQ6IC8qI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCBmYWxzZSlcbn07XG5jb25zdCBzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICAgIGdldDogLyojX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoZmFsc2UsIHRydWUpXG59O1xuY29uc3QgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCBmYWxzZSlcbn07XG5jb25zdCBzaGFsbG93UmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCB0cnVlKVxufTtcbmZ1bmN0aW9uIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpIHtcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgIGlmIChyYXdLZXkgIT09IGtleSAmJiBoYXMuY2FsbCh0YXJnZXQsIHJhd0tleSkpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRvUmF3VHlwZSh0YXJnZXQpO1xuICAgICAgICBjb25zb2xlLndhcm4oYFJlYWN0aXZlICR7dHlwZX0gY29udGFpbnMgYm90aCB0aGUgcmF3IGFuZCByZWFjdGl2ZSBgICtcbiAgICAgICAgICAgIGB2ZXJzaW9ucyBvZiB0aGUgc2FtZSBvYmplY3Qke3R5cGUgPT09IGBNYXBgID8gYCBhcyBrZXlzYCA6IGBgfSwgYCArXG4gICAgICAgICAgICBgd2hpY2ggY2FuIGxlYWQgdG8gaW5jb25zaXN0ZW5jaWVzLiBgICtcbiAgICAgICAgICAgIGBBdm9pZCBkaWZmZXJlbnRpYXRpbmcgYmV0d2VlbiB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBgICtcbiAgICAgICAgICAgIGBvZiBhbiBvYmplY3QgYW5kIG9ubHkgdXNlIHRoZSByZWFjdGl2ZSB2ZXJzaW9uIGlmIHBvc3NpYmxlLmApO1xuICAgIH1cbn1cblxuY29uc3QgcmVhY3RpdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3Qgc2hhbGxvd1JlYWN0aXZlTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlYWRvbmx5TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHNoYWxsb3dSZWFkb25seU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0YXJnZXRUeXBlTWFwKHJhd1R5cGUpIHtcbiAgICBzd2l0Y2ggKHJhd1R5cGUpIHtcbiAgICAgICAgY2FzZSAnT2JqZWN0JzpcbiAgICAgICAgY2FzZSAnQXJyYXknOlxuICAgICAgICAgICAgcmV0dXJuIDEgLyogVGFyZ2V0VHlwZS5DT01NT04gKi87XG4gICAgICAgIGNhc2UgJ01hcCc6XG4gICAgICAgIGNhc2UgJ1NldCc6XG4gICAgICAgIGNhc2UgJ1dlYWtNYXAnOlxuICAgICAgICBjYXNlICdXZWFrU2V0JzpcbiAgICAgICAgICAgIHJldHVybiAyIC8qIFRhcmdldFR5cGUuQ09MTEVDVElPTiAqLztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAwIC8qIFRhcmdldFR5cGUuSU5WQUxJRCAqLztcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRUYXJnZXRUeXBlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlW1wiX192X3NraXBcIiAvKiBSZWFjdGl2ZUZsYWdzLlNLSVAgKi9dIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKVxuICAgICAgICA/IDAgLyogVGFyZ2V0VHlwZS5JTlZBTElEICovXG4gICAgICAgIDogdGFyZ2V0VHlwZU1hcCh0b1Jhd1R5cGUodmFsdWUpKTtcbn1cbmZ1bmN0aW9uIHJlYWN0aXZlKHRhcmdldCkge1xuICAgIC8vIGlmIHRyeWluZyB0byBvYnNlcnZlIGEgcmVhZG9ubHkgcHJveHksIHJldHVybiB0aGUgcmVhZG9ubHkgdmVyc2lvbi5cbiAgICBpZiAoaXNSZWFkb25seSh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGZhbHNlLCBtdXRhYmxlSGFuZGxlcnMsIG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMsIHJlYWN0aXZlTWFwKTtcbn1cbi8qKlxuICogUmV0dXJuIGEgc2hhbGxvd2x5LXJlYWN0aXZlIGNvcHkgb2YgdGhlIG9yaWdpbmFsIG9iamVjdCwgd2hlcmUgb25seSB0aGUgcm9vdFxuICogbGV2ZWwgcHJvcGVydGllcyBhcmUgcmVhY3RpdmUuIEl0IGFsc28gZG9lcyBub3QgYXV0by11bndyYXAgcmVmcyAoZXZlbiBhdCB0aGVcbiAqIHJvb3QgbGV2ZWwpLlxuICovXG5mdW5jdGlvbiBzaGFsbG93UmVhY3RpdmUodGFyZ2V0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgZmFsc2UsIHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzLCBzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzLCBzaGFsbG93UmVhY3RpdmVNYXApO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcmVhZG9ubHkgY29weSBvZiB0aGUgb3JpZ2luYWwgb2JqZWN0LiBOb3RlIHRoZSByZXR1cm5lZCBjb3B5IGlzIG5vdFxuICogbWFkZSByZWFjdGl2ZSwgYnV0IGByZWFkb25seWAgY2FuIGJlIGNhbGxlZCBvbiBhbiBhbHJlYWR5IHJlYWN0aXZlIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gcmVhZG9ubHkodGFyZ2V0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgdHJ1ZSwgcmVhZG9ubHlIYW5kbGVycywgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMsIHJlYWRvbmx5TWFwKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIHJlYWN0aXZlLWNvcHkgb2YgdGhlIG9yaWdpbmFsIG9iamVjdCwgd2hlcmUgb25seSB0aGUgcm9vdCBsZXZlbFxuICogcHJvcGVydGllcyBhcmUgcmVhZG9ubHksIGFuZCBkb2VzIE5PVCB1bndyYXAgcmVmcyBub3IgcmVjdXJzaXZlbHkgY29udmVydFxuICogcmV0dXJuZWQgcHJvcGVydGllcy5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgY3JlYXRpbmcgdGhlIHByb3BzIHByb3h5IG9iamVjdCBmb3Igc3RhdGVmdWwgY29tcG9uZW50cy5cbiAqL1xuZnVuY3Rpb24gc2hhbGxvd1JlYWRvbmx5KHRhcmdldCkge1xuICAgIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIHRydWUsIHNoYWxsb3dSZWFkb25seUhhbmRsZXJzLCBzaGFsbG93UmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMsIHNoYWxsb3dSZWFkb25seU1hcCk7XG59XG5mdW5jdGlvbiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGlzUmVhZG9ubHksIGJhc2VIYW5kbGVycywgY29sbGVjdGlvbkhhbmRsZXJzLCBwcm94eU1hcCkge1xuICAgIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYHZhbHVlIGNhbm5vdCBiZSBtYWRlIHJlYWN0aXZlOiAke1N0cmluZyh0YXJnZXQpfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIC8vIHRhcmdldCBpcyBhbHJlYWR5IGEgUHJveHksIHJldHVybiBpdC5cbiAgICAvLyBleGNlcHRpb246IGNhbGxpbmcgcmVhZG9ubHkoKSBvbiBhIHJlYWN0aXZlIG9iamVjdFxuICAgIGlmICh0YXJnZXRbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dICYmXG4gICAgICAgICEoaXNSZWFkb25seSAmJiB0YXJnZXRbXCJfX3ZfaXNSZWFjdGl2ZVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBQ1RJVkUgKi9dKSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICAvLyB0YXJnZXQgYWxyZWFkeSBoYXMgY29ycmVzcG9uZGluZyBQcm94eVxuICAgIGNvbnN0IGV4aXN0aW5nUHJveHkgPSBwcm94eU1hcC5nZXQodGFyZ2V0KTtcbiAgICBpZiAoZXhpc3RpbmdQcm94eSkge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdQcm94eTtcbiAgICB9XG4gICAgLy8gb25seSBzcGVjaWZpYyB2YWx1ZSB0eXBlcyBjYW4gYmUgb2JzZXJ2ZWQuXG4gICAgY29uc3QgdGFyZ2V0VHlwZSA9IGdldFRhcmdldFR5cGUodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0VHlwZSA9PT0gMCAvKiBUYXJnZXRUeXBlLklOVkFMSUQgKi8pIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCB0YXJnZXRUeXBlID09PSAyIC8qIFRhcmdldFR5cGUuQ09MTEVDVElPTiAqLyA/IGNvbGxlY3Rpb25IYW5kbGVycyA6IGJhc2VIYW5kbGVycyk7XG4gICAgcHJveHlNYXAuc2V0KHRhcmdldCwgcHJveHkpO1xuICAgIHJldHVybiBwcm94eTtcbn1cbmZ1bmN0aW9uIGlzUmVhY3RpdmUodmFsdWUpIHtcbiAgICBpZiAoaXNSZWFkb25seSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGlzUmVhY3RpdmUodmFsdWVbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dKTtcbiAgICB9XG4gICAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhY3RpdmVcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQUNUSVZFICovXSk7XG59XG5mdW5jdGlvbiBpc1JlYWRvbmx5KHZhbHVlKSB7XG4gICAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovXSk7XG59XG5mdW5jdGlvbiBpc1NoYWxsb3codmFsdWUpIHtcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNTaGFsbG93XCIgLyogUmVhY3RpdmVGbGFncy5JU19TSEFMTE9XICovXSk7XG59XG5mdW5jdGlvbiBpc1Byb3h5KHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzUmVhY3RpdmUodmFsdWUpIHx8IGlzUmVhZG9ubHkodmFsdWUpO1xufVxuZnVuY3Rpb24gdG9SYXcob2JzZXJ2ZWQpIHtcbiAgICBjb25zdCByYXcgPSBvYnNlcnZlZCAmJiBvYnNlcnZlZFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgcmV0dXJuIHJhdyA/IHRvUmF3KHJhdykgOiBvYnNlcnZlZDtcbn1cbmZ1bmN0aW9uIG1hcmtSYXcodmFsdWUpIHtcbiAgICBkZWYodmFsdWUsIFwiX192X3NraXBcIiAvKiBSZWFjdGl2ZUZsYWdzLlNLSVAgKi8sIHRydWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmNvbnN0IHRvUmVhY3RpdmUgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWN0aXZlKHZhbHVlKSA6IHZhbHVlO1xuY29uc3QgdG9SZWFkb25seSA9ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpID8gcmVhZG9ubHkodmFsdWUpIDogdmFsdWU7XG5cbmZ1bmN0aW9uIHRyYWNrUmVmVmFsdWUocmVmKSB7XG4gICAgaWYgKHNob3VsZFRyYWNrICYmIGFjdGl2ZUVmZmVjdCkge1xuICAgICAgICByZWYgPSB0b1JhdyhyZWYpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB0cmFja0VmZmVjdHMocmVmLmRlcCB8fCAocmVmLmRlcCA9IGNyZWF0ZURlcCgpKSwge1xuICAgICAgICAgICAgICAgIHRhcmdldDogcmVmLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIgLyogVHJhY2tPcFR5cGVzLkdFVCAqLyxcbiAgICAgICAgICAgICAgICBrZXk6ICd2YWx1ZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJhY2tFZmZlY3RzKHJlZi5kZXAgfHwgKHJlZi5kZXAgPSBjcmVhdGVEZXAoKSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlclJlZlZhbHVlKHJlZiwgbmV3VmFsKSB7XG4gICAgcmVmID0gdG9SYXcocmVmKTtcbiAgICBpZiAocmVmLmRlcCkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhyZWYuZGVwLCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiByZWYsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi8sXG4gICAgICAgICAgICAgICAga2V5OiAndmFsdWUnLFxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBuZXdWYWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMocmVmLmRlcCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc1JlZihyKSB7XG4gICAgcmV0dXJuICEhKHIgJiYgci5fX3ZfaXNSZWYgPT09IHRydWUpO1xufVxuZnVuY3Rpb24gcmVmKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlZih2YWx1ZSwgZmFsc2UpO1xufVxuZnVuY3Rpb24gc2hhbGxvd1JlZih2YWx1ZSkge1xuICAgIHJldHVybiBjcmVhdGVSZWYodmFsdWUsIHRydWUpO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVmKHJhd1ZhbHVlLCBzaGFsbG93KSB7XG4gICAgaWYgKGlzUmVmKHJhd1ZhbHVlKSkge1xuICAgICAgICByZXR1cm4gcmF3VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVmSW1wbChyYXdWYWx1ZSwgc2hhbGxvdyk7XG59XG5jbGFzcyBSZWZJbXBsIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgX192X2lzU2hhbGxvdykge1xuICAgICAgICB0aGlzLl9fdl9pc1NoYWxsb3cgPSBfX3ZfaXNTaGFsbG93O1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgICAgICB0aGlzLl9yYXdWYWx1ZSA9IF9fdl9pc1NoYWxsb3cgPyB2YWx1ZSA6IHRvUmF3KHZhbHVlKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfX3ZfaXNTaGFsbG93ID8gdmFsdWUgOiB0b1JlYWN0aXZlKHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0cmFja1JlZlZhbHVlKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgY29uc3QgdXNlRGlyZWN0VmFsdWUgPSB0aGlzLl9fdl9pc1NoYWxsb3cgfHwgaXNTaGFsbG93KG5ld1ZhbCkgfHwgaXNSZWFkb25seShuZXdWYWwpO1xuICAgICAgICBuZXdWYWwgPSB1c2VEaXJlY3RWYWx1ZSA/IG5ld1ZhbCA6IHRvUmF3KG5ld1ZhbCk7XG4gICAgICAgIGlmIChoYXNDaGFuZ2VkKG5ld1ZhbCwgdGhpcy5fcmF3VmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9yYXdWYWx1ZSA9IG5ld1ZhbDtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdXNlRGlyZWN0VmFsdWUgPyBuZXdWYWwgOiB0b1JlYWN0aXZlKG5ld1ZhbCk7XG4gICAgICAgICAgICB0cmlnZ2VyUmVmVmFsdWUodGhpcywgbmV3VmFsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXJSZWYocmVmKSB7XG4gICAgdHJpZ2dlclJlZlZhbHVlKHJlZiwgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gcmVmLnZhbHVlIDogdm9pZCAwKTtcbn1cbmZ1bmN0aW9uIHVucmVmKHJlZikge1xuICAgIHJldHVybiBpc1JlZihyZWYpID8gcmVmLnZhbHVlIDogcmVmO1xufVxuY29uc3Qgc2hhbGxvd1Vud3JhcEhhbmRsZXJzID0ge1xuICAgIGdldDogKHRhcmdldCwga2V5LCByZWNlaXZlcikgPT4gdW5yZWYoUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSksXG4gICAgc2V0OiAodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikgPT4ge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICAgICAgICBpZiAoaXNSZWYob2xkVmFsdWUpICYmICFpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5mdW5jdGlvbiBwcm94eVJlZnMob2JqZWN0V2l0aFJlZnMpIHtcbiAgICByZXR1cm4gaXNSZWFjdGl2ZShvYmplY3RXaXRoUmVmcylcbiAgICAgICAgPyBvYmplY3RXaXRoUmVmc1xuICAgICAgICA6IG5ldyBQcm94eShvYmplY3RXaXRoUmVmcywgc2hhbGxvd1Vud3JhcEhhbmRsZXJzKTtcbn1cbmNsYXNzIEN1c3RvbVJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKGZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5kZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgeyBnZXQsIHNldCB9ID0gZmFjdG9yeSgoKSA9PiB0cmFja1JlZlZhbHVlKHRoaXMpLCAoKSA9PiB0cmlnZ2VyUmVmVmFsdWUodGhpcykpO1xuICAgICAgICB0aGlzLl9nZXQgPSBnZXQ7XG4gICAgICAgIHRoaXMuX3NldCA9IHNldDtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0KCk7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5fc2V0KG5ld1ZhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3VzdG9tUmVmKGZhY3RvcnkpIHtcbiAgICByZXR1cm4gbmV3IEN1c3RvbVJlZkltcGwoZmFjdG9yeSk7XG59XG5mdW5jdGlvbiB0b1JlZnMob2JqZWN0KSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNQcm94eShvYmplY3QpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgdG9SZWZzKCkgZXhwZWN0cyBhIHJlYWN0aXZlIG9iamVjdCBidXQgcmVjZWl2ZWQgYSBwbGFpbiBvbmUuYCk7XG4gICAgfVxuICAgIGNvbnN0IHJldCA9IGlzQXJyYXkob2JqZWN0KSA/IG5ldyBBcnJheShvYmplY3QubGVuZ3RoKSA6IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICByZXRba2V5XSA9IHRvUmVmKG9iamVjdCwga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmNsYXNzIE9iamVjdFJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKF9vYmplY3QsIF9rZXksIF9kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb2JqZWN0ID0gX29iamVjdDtcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZhbHVlID0gX2RlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuX29iamVjdFt0aGlzLl9rZXldO1xuICAgICAgICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyB0aGlzLl9kZWZhdWx0VmFsdWUgOiB2YWw7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5fb2JqZWN0W3RoaXMuX2tleV0gPSBuZXdWYWw7XG4gICAgfVxufVxuZnVuY3Rpb24gdG9SZWYob2JqZWN0LCBrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgIGNvbnN0IHZhbCA9IG9iamVjdFtrZXldO1xuICAgIHJldHVybiBpc1JlZih2YWwpXG4gICAgICAgID8gdmFsXG4gICAgICAgIDogbmV3IE9iamVjdFJlZkltcGwob2JqZWN0LCBrZXksIGRlZmF1bHRWYWx1ZSk7XG59XG5cbnZhciBfYTtcbmNsYXNzIENvbXB1dGVkUmVmSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZ2V0dGVyLCBfc2V0dGVyLCBpc1JlYWRvbmx5LCBpc1NTUikge1xuICAgICAgICB0aGlzLl9zZXR0ZXIgPSBfc2V0dGVyO1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgICAgICB0aGlzW19hXSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlciwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9kaXJ0eSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyUmVmVmFsdWUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVmZmVjdC5jb21wdXRlZCA9IHRoaXM7XG4gICAgICAgIHRoaXMuZWZmZWN0LmFjdGl2ZSA9IHRoaXMuX2NhY2hlYWJsZSA9ICFpc1NTUjtcbiAgICAgICAgdGhpc1tcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqL10gPSBpc1JlYWRvbmx5O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIC8vIHRoZSBjb21wdXRlZCByZWYgbWF5IGdldCB3cmFwcGVkIGJ5IG90aGVyIHByb3hpZXMgZS5nLiByZWFkb25seSgpICMzMzc2XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0b1Jhdyh0aGlzKTtcbiAgICAgICAgdHJhY2tSZWZWYWx1ZShzZWxmKTtcbiAgICAgICAgaWYgKHNlbGYuX2RpcnR5IHx8ICFzZWxmLl9jYWNoZWFibGUpIHtcbiAgICAgICAgICAgIHNlbGYuX2RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICBzZWxmLl92YWx1ZSA9IHNlbGYuZWZmZWN0LnJ1bigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZTtcbiAgICB9XG4gICAgc2V0IHZhbHVlKG5ld1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NldHRlcihuZXdWYWx1ZSk7XG4gICAgfVxufVxuX2EgPSBcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqLztcbmZ1bmN0aW9uIGNvbXB1dGVkKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zLCBpc1NTUiA9IGZhbHNlKSB7XG4gICAgbGV0IGdldHRlcjtcbiAgICBsZXQgc2V0dGVyO1xuICAgIGNvbnN0IG9ubHlHZXR0ZXIgPSBpc0Z1bmN0aW9uKGdldHRlck9yT3B0aW9ucyk7XG4gICAgaWYgKG9ubHlHZXR0ZXIpIHtcbiAgICAgICAgZ2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zO1xuICAgICAgICBzZXR0ZXIgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgID8gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignV3JpdGUgb3BlcmF0aW9uIGZhaWxlZDogY29tcHV0ZWQgdmFsdWUgaXMgcmVhZG9ubHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogTk9PUDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGdldHRlciA9IGdldHRlck9yT3B0aW9ucy5nZXQ7XG4gICAgICAgIHNldHRlciA9IGdldHRlck9yT3B0aW9ucy5zZXQ7XG4gICAgfVxuICAgIGNvbnN0IGNSZWYgPSBuZXcgQ29tcHV0ZWRSZWZJbXBsKGdldHRlciwgc2V0dGVyLCBvbmx5R2V0dGVyIHx8ICFzZXR0ZXIsIGlzU1NSKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGRlYnVnT3B0aW9ucyAmJiAhaXNTU1IpIHtcbiAgICAgICAgY1JlZi5lZmZlY3Qub25UcmFjayA9IGRlYnVnT3B0aW9ucy5vblRyYWNrO1xuICAgICAgICBjUmVmLmVmZmVjdC5vblRyaWdnZXIgPSBkZWJ1Z09wdGlvbnMub25UcmlnZ2VyO1xuICAgIH1cbiAgICByZXR1cm4gY1JlZjtcbn1cblxudmFyIF9hJDE7XG5jb25zdCB0aWNrID0gLyojX19QVVJFX18qLyBQcm9taXNlLnJlc29sdmUoKTtcbmNvbnN0IHF1ZXVlID0gW107XG5sZXQgcXVldWVkID0gZmFsc2U7XG5jb25zdCBzY2hlZHVsZXIgPSAoZm4pID0+IHtcbiAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICBpZiAoIXF1ZXVlZCkge1xuICAgICAgICBxdWV1ZWQgPSB0cnVlO1xuICAgICAgICB0aWNrLnRoZW4oZmx1c2gpO1xuICAgIH1cbn07XG5jb25zdCBmbHVzaCA9ICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHF1ZXVlW2ldKCk7XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgcXVldWVkID0gZmFsc2U7XG59O1xuY2xhc3MgRGVmZXJyZWRDb21wdXRlZFJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKGdldHRlcikge1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XG4gICAgICAgIHRoaXNbX2EkMV0gPSB0cnVlO1xuICAgICAgICBsZXQgY29tcGFyZVRhcmdldDtcbiAgICAgICAgbGV0IGhhc0NvbXBhcmVUYXJnZXQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChnZXR0ZXIsIChjb21wdXRlZFRyaWdnZXIpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlcCkge1xuICAgICAgICAgICAgICAgIGlmIChjb21wdXRlZFRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyZVRhcmdldCA9IHRoaXMuX3ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBoYXNDb21wYXJlVGFyZ2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVRvQ29tcGFyZSA9IGhhc0NvbXBhcmVUYXJnZXQgPyBjb21wYXJlVGFyZ2V0IDogdGhpcy5fdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGhhc0NvbXBhcmVUYXJnZXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVmZmVjdC5hY3RpdmUgJiYgdGhpcy5fZ2V0KCkgIT09IHZhbHVlVG9Db21wYXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclJlZlZhbHVlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjaGFpbmVkIHVwc3RyZWFtIGNvbXB1dGVkcyBhcmUgbm90aWZpZWQgc3luY2hyb25vdXNseSB0byBlbnN1cmVcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZSBpbnZhbGlkYXRpb24gaW4gY2FzZSBvZiBzeW5jIGFjY2Vzczsgbm9ybWFsIGVmZmVjdHMgYXJlXG4gICAgICAgICAgICAgICAgLy8gZGVmZXJyZWQgdG8gYmUgdHJpZ2dlcmVkIGluIHNjaGVkdWxlci5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5kZXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuY29tcHV0ZWQgaW5zdGFuY2VvZiBEZWZlcnJlZENvbXB1dGVkUmVmSW1wbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zY2hlZHVsZXIodHJ1ZSAvKiBjb21wdXRlZFRyaWdnZXIgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lZmZlY3QuY29tcHV0ZWQgPSB0aGlzO1xuICAgIH1cbiAgICBfZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy5fZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX3ZhbHVlID0gdGhpcy5lZmZlY3QucnVuKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0cmFja1JlZlZhbHVlKHRoaXMpO1xuICAgICAgICAvLyB0aGUgY29tcHV0ZWQgcmVmIG1heSBnZXQgd3JhcHBlZCBieSBvdGhlciBwcm94aWVzIGUuZy4gcmVhZG9ubHkoKSAjMzM3NlxuICAgICAgICByZXR1cm4gdG9SYXcodGhpcykuX2dldCgpO1xuICAgIH1cbn1cbl9hJDEgPSBcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqLztcbmZ1bmN0aW9uIGRlZmVycmVkQ29tcHV0ZWQoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIG5ldyBEZWZlcnJlZENvbXB1dGVkUmVmSW1wbChnZXR0ZXIpO1xufVxuXG5leHBvcnQgeyBFZmZlY3RTY29wZSwgSVRFUkFURV9LRVksIFJlYWN0aXZlRWZmZWN0LCBjb21wdXRlZCwgY3VzdG9tUmVmLCBkZWZlcnJlZENvbXB1dGVkLCBlZmZlY3QsIGVmZmVjdFNjb3BlLCBlbmFibGVUcmFja2luZywgZ2V0Q3VycmVudFNjb3BlLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgaXNTaGFsbG93LCBtYXJrUmF3LCBvblNjb3BlRGlzcG9zZSwgcGF1c2VUcmFja2luZywgcHJveHlSZWZzLCByZWFjdGl2ZSwgcmVhZG9ubHksIHJlZiwgcmVzZXRUcmFja2luZywgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVhZG9ubHksIHNoYWxsb3dSZWYsIHN0b3AsIHRvUmF3LCB0b1JlZiwgdG9SZWZzLCB0cmFjaywgdHJpZ2dlciwgdHJpZ2dlclJlZiwgdW5yZWYgfTtcbiIsImltcG9ydCB7IHBhdXNlVHJhY2tpbmcsIHJlc2V0VHJhY2tpbmcsIGlzUmVmLCB0b1JhdywgaXNTaGFsbG93IGFzIGlzU2hhbGxvdyQxLCBpc1JlYWN0aXZlLCBSZWFjdGl2ZUVmZmVjdCwgcmVmLCBzaGFsbG93UmVhZG9ubHksIHRyYWNrLCByZWFjdGl2ZSwgc2hhbGxvd1JlYWN0aXZlLCB0cmlnZ2VyLCBpc1Byb3h5LCBFZmZlY3RTY29wZSwgbWFya1JhdywgcHJveHlSZWZzLCBjb21wdXRlZCBhcyBjb21wdXRlZCQxLCBpc1JlYWRvbmx5IH0gZnJvbSAnQHZ1ZS9yZWFjdGl2aXR5JztcbmV4cG9ydCB7IEVmZmVjdFNjb3BlLCBSZWFjdGl2ZUVmZmVjdCwgY3VzdG9tUmVmLCBlZmZlY3QsIGVmZmVjdFNjb3BlLCBnZXRDdXJyZW50U2NvcGUsIGlzUHJveHksIGlzUmVhY3RpdmUsIGlzUmVhZG9ubHksIGlzUmVmLCBpc1NoYWxsb3csIG1hcmtSYXcsIG9uU2NvcGVEaXNwb3NlLCBwcm94eVJlZnMsIHJlYWN0aXZlLCByZWFkb25seSwgcmVmLCBzaGFsbG93UmVhY3RpdmUsIHNoYWxsb3dSZWFkb25seSwgc2hhbGxvd1JlZiwgc3RvcCwgdG9SYXcsIHRvUmVmLCB0b1JlZnMsIHRyaWdnZXJSZWYsIHVucmVmIH0gZnJvbSAnQHZ1ZS9yZWFjdGl2aXR5JztcbmltcG9ydCB7IGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCBpc1Byb21pc2UsIGlzQXJyYXksIE5PT1AsIGdldEdsb2JhbFRoaXMsIGV4dGVuZCwgRU1QVFlfT0JKLCB0b0hhbmRsZXJLZXksIHRvTnVtYmVyLCBoeXBoZW5hdGUsIGNhbWVsaXplLCBpc09iamVjdCwgaXNPbiwgaGFzT3duLCBpc01vZGVsTGlzdGVuZXIsIGhhc0NoYW5nZWQsIHJlbW92ZSwgaXNTZXQsIGlzTWFwLCBpc1BsYWluT2JqZWN0LCBpbnZva2VBcnJheUZucywgaXNCdWlsdEluRGlyZWN0aXZlLCBjYXBpdGFsaXplLCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQsIGRlZiwgaXNSZXNlcnZlZFByb3AsIEVNUFRZX0FSUiwgdG9SYXdUeXBlLCBtYWtlTWFwLCBOTywgbm9ybWFsaXplQ2xhc3MsIG5vcm1hbGl6ZVN0eWxlIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuZXhwb3J0IHsgY2FtZWxpemUsIGNhcGl0YWxpemUsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIHRvRGlzcGxheVN0cmluZywgdG9IYW5kbGVyS2V5IH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5jb25zdCBzdGFjayA9IFtdO1xuZnVuY3Rpb24gcHVzaFdhcm5pbmdDb250ZXh0KHZub2RlKSB7XG4gICAgc3RhY2sucHVzaCh2bm9kZSk7XG59XG5mdW5jdGlvbiBwb3BXYXJuaW5nQ29udGV4dCgpIHtcbiAgICBzdGFjay5wb3AoKTtcbn1cbmZ1bmN0aW9uIHdhcm4obXNnLCAuLi5hcmdzKSB7XG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBhdm9pZCBwcm9wcyBmb3JtYXR0aW5nIG9yIHdhcm4gaGFuZGxlciB0cmFja2luZyBkZXBzIHRoYXQgbWlnaHQgYmUgbXV0YXRlZFxuICAgIC8vIGR1cmluZyBwYXRjaCwgbGVhZGluZyB0byBpbmZpbml0ZSByZWN1cnNpb24uXG4gICAgcGF1c2VUcmFja2luZygpO1xuICAgIGNvbnN0IGluc3RhbmNlID0gc3RhY2subGVuZ3RoID8gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0uY29tcG9uZW50IDogbnVsbDtcbiAgICBjb25zdCBhcHBXYXJuSGFuZGxlciA9IGluc3RhbmNlICYmIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLndhcm5IYW5kbGVyO1xuICAgIGNvbnN0IHRyYWNlID0gZ2V0Q29tcG9uZW50VHJhY2UoKTtcbiAgICBpZiAoYXBwV2FybkhhbmRsZXIpIHtcbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGFwcFdhcm5IYW5kbGVyLCBpbnN0YW5jZSwgMTEgLyogRXJyb3JDb2Rlcy5BUFBfV0FSTl9IQU5ETEVSICovLCBbXG4gICAgICAgICAgICBtc2cgKyBhcmdzLmpvaW4oJycpLFxuICAgICAgICAgICAgaW5zdGFuY2UgJiYgaW5zdGFuY2UucHJveHksXG4gICAgICAgICAgICB0cmFjZVxuICAgICAgICAgICAgICAgIC5tYXAoKHsgdm5vZGUgfSkgPT4gYGF0IDwke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIHZub2RlLnR5cGUpfT5gKVxuICAgICAgICAgICAgICAgIC5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgIHRyYWNlXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgd2FybkFyZ3MgPSBbYFtWdWUgd2Fybl06ICR7bXNnfWAsIC4uLmFyZ3NdO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRyYWNlLmxlbmd0aCAmJlxuICAgICAgICAgICAgLy8gYXZvaWQgc3BhbW1pbmcgY29uc29sZSBkdXJpbmcgdGVzdHNcbiAgICAgICAgICAgICFmYWxzZSkge1xuICAgICAgICAgICAgd2FybkFyZ3MucHVzaChgXFxuYCwgLi4uZm9ybWF0VHJhY2UodHJhY2UpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLndhcm4oLi4ud2FybkFyZ3MpO1xuICAgIH1cbiAgICByZXNldFRyYWNraW5nKCk7XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRUcmFjZSgpIHtcbiAgICBsZXQgY3VycmVudFZOb2RlID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgaWYgKCFjdXJyZW50Vk5vZGUpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvLyB3ZSBjYW4ndCBqdXN0IHVzZSB0aGUgc3RhY2sgYmVjYXVzZSBpdCB3aWxsIGJlIGluY29tcGxldGUgZHVyaW5nIHVwZGF0ZXNcbiAgICAvLyB0aGF0IGRpZCBub3Qgc3RhcnQgZnJvbSB0aGUgcm9vdC4gUmUtY29uc3RydWN0IHRoZSBwYXJlbnQgY2hhaW4gdXNpbmdcbiAgICAvLyBpbnN0YW5jZSBwYXJlbnQgcG9pbnRlcnMuXG4gICAgY29uc3Qgbm9ybWFsaXplZFN0YWNrID0gW107XG4gICAgd2hpbGUgKGN1cnJlbnRWTm9kZSkge1xuICAgICAgICBjb25zdCBsYXN0ID0gbm9ybWFsaXplZFN0YWNrWzBdO1xuICAgICAgICBpZiAobGFzdCAmJiBsYXN0LnZub2RlID09PSBjdXJyZW50Vk5vZGUpIHtcbiAgICAgICAgICAgIGxhc3QucmVjdXJzZUNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub3JtYWxpemVkU3RhY2sucHVzaCh7XG4gICAgICAgICAgICAgICAgdm5vZGU6IGN1cnJlbnRWTm9kZSxcbiAgICAgICAgICAgICAgICByZWN1cnNlQ291bnQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudEluc3RhbmNlID0gY3VycmVudFZOb2RlLmNvbXBvbmVudCAmJiBjdXJyZW50Vk5vZGUuY29tcG9uZW50LnBhcmVudDtcbiAgICAgICAgY3VycmVudFZOb2RlID0gcGFyZW50SW5zdGFuY2UgJiYgcGFyZW50SW5zdGFuY2Uudm5vZGU7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVkU3RhY2s7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZm9ybWF0VHJhY2UodHJhY2UpIHtcbiAgICBjb25zdCBsb2dzID0gW107XG4gICAgdHJhY2UuZm9yRWFjaCgoZW50cnksIGkpID0+IHtcbiAgICAgICAgbG9ncy5wdXNoKC4uLihpID09PSAwID8gW10gOiBbYFxcbmBdKSwgLi4uZm9ybWF0VHJhY2VFbnRyeShlbnRyeSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBsb2dzO1xufVxuZnVuY3Rpb24gZm9ybWF0VHJhY2VFbnRyeSh7IHZub2RlLCByZWN1cnNlQ291bnQgfSkge1xuICAgIGNvbnN0IHBvc3RmaXggPSByZWN1cnNlQ291bnQgPiAwID8gYC4uLiAoJHtyZWN1cnNlQ291bnR9IHJlY3Vyc2l2ZSBjYWxscylgIDogYGA7XG4gICAgY29uc3QgaXNSb290ID0gdm5vZGUuY29tcG9uZW50ID8gdm5vZGUuY29tcG9uZW50LnBhcmVudCA9PSBudWxsIDogZmFsc2U7XG4gICAgY29uc3Qgb3BlbiA9IGAgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZSh2bm9kZS5jb21wb25lbnQsIHZub2RlLnR5cGUsIGlzUm9vdCl9YDtcbiAgICBjb25zdCBjbG9zZSA9IGA+YCArIHBvc3RmaXg7XG4gICAgcmV0dXJuIHZub2RlLnByb3BzXG4gICAgICAgID8gW29wZW4sIC4uLmZvcm1hdFByb3BzKHZub2RlLnByb3BzKSwgY2xvc2VdXG4gICAgICAgIDogW29wZW4gKyBjbG9zZV07XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZm9ybWF0UHJvcHMocHJvcHMpIHtcbiAgICBjb25zdCByZXMgPSBbXTtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuICAgIGtleXMuc2xpY2UoMCwgMykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICByZXMucHVzaCguLi5mb3JtYXRQcm9wKGtleSwgcHJvcHNba2V5XSkpO1xuICAgIH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCA+IDMpIHtcbiAgICAgICAgcmVzLnB1c2goYCAuLi5gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBmb3JtYXRQcm9wKGtleSwgdmFsdWUsIHJhdykge1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PSR7dmFsdWV9YF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgdmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT0ke3ZhbHVlfWBdO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBmb3JtYXRQcm9wKGtleSwgdG9SYXcodmFsdWUudmFsdWUpLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09UmVmPGAsIHZhbHVlLCBgPmBdO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gW2Ake2tleX09Zm4ke3ZhbHVlLm5hbWUgPyBgPCR7dmFsdWUubmFtZX0+YCA6IGBgfWBdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PWAsIHZhbHVlXTtcbiAgICB9XG59XG5cbmNvbnN0IEVycm9yVHlwZVN0cmluZ3MgPSB7XG4gICAgW1wic3BcIiAvKiBMaWZlY3ljbGVIb29rcy5TRVJWRVJfUFJFRkVUQ0ggKi9dOiAnc2VydmVyUHJlZmV0Y2ggaG9vaycsXG4gICAgW1wiYmNcIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfQ1JFQVRFICovXTogJ2JlZm9yZUNyZWF0ZSBob29rJyxcbiAgICBbXCJjXCIgLyogTGlmZWN5Y2xlSG9va3MuQ1JFQVRFRCAqL106ICdjcmVhdGVkIGhvb2snLFxuICAgIFtcImJtXCIgLyogTGlmZWN5Y2xlSG9va3MuQkVGT1JFX01PVU5UICovXTogJ2JlZm9yZU1vdW50IGhvb2snLFxuICAgIFtcIm1cIiAvKiBMaWZlY3ljbGVIb29rcy5NT1VOVEVEICovXTogJ21vdW50ZWQgaG9vaycsXG4gICAgW1wiYnVcIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfVVBEQVRFICovXTogJ2JlZm9yZVVwZGF0ZSBob29rJyxcbiAgICBbXCJ1XCIgLyogTGlmZWN5Y2xlSG9va3MuVVBEQVRFRCAqL106ICd1cGRhdGVkJyxcbiAgICBbXCJidW1cIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfVU5NT1VOVCAqL106ICdiZWZvcmVVbm1vdW50IGhvb2snLFxuICAgIFtcInVtXCIgLyogTGlmZWN5Y2xlSG9va3MuVU5NT1VOVEVEICovXTogJ3VubW91bnRlZCBob29rJyxcbiAgICBbXCJhXCIgLyogTGlmZWN5Y2xlSG9va3MuQUNUSVZBVEVEICovXTogJ2FjdGl2YXRlZCBob29rJyxcbiAgICBbXCJkYVwiIC8qIExpZmVjeWNsZUhvb2tzLkRFQUNUSVZBVEVEICovXTogJ2RlYWN0aXZhdGVkIGhvb2snLFxuICAgIFtcImVjXCIgLyogTGlmZWN5Y2xlSG9va3MuRVJST1JfQ0FQVFVSRUQgKi9dOiAnZXJyb3JDYXB0dXJlZCBob29rJyxcbiAgICBbXCJydGNcIiAvKiBMaWZlY3ljbGVIb29rcy5SRU5ERVJfVFJBQ0tFRCAqL106ICdyZW5kZXJUcmFja2VkIGhvb2snLFxuICAgIFtcInJ0Z1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUklHR0VSRUQgKi9dOiAncmVuZGVyVHJpZ2dlcmVkIGhvb2snLFxuICAgIFswIC8qIEVycm9yQ29kZXMuU0VUVVBfRlVOQ1RJT04gKi9dOiAnc2V0dXAgZnVuY3Rpb24nLFxuICAgIFsxIC8qIEVycm9yQ29kZXMuUkVOREVSX0ZVTkNUSU9OICovXTogJ3JlbmRlciBmdW5jdGlvbicsXG4gICAgWzIgLyogRXJyb3JDb2Rlcy5XQVRDSF9HRVRURVIgKi9dOiAnd2F0Y2hlciBnZXR0ZXInLFxuICAgIFszIC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0FMTEJBQ0sgKi9dOiAnd2F0Y2hlciBjYWxsYmFjaycsXG4gICAgWzQgLyogRXJyb3JDb2Rlcy5XQVRDSF9DTEVBTlVQICovXTogJ3dhdGNoZXIgY2xlYW51cCBmdW5jdGlvbicsXG4gICAgWzUgLyogRXJyb3JDb2Rlcy5OQVRJVkVfRVZFTlRfSEFORExFUiAqL106ICduYXRpdmUgZXZlbnQgaGFuZGxlcicsXG4gICAgWzYgLyogRXJyb3JDb2Rlcy5DT01QT05FTlRfRVZFTlRfSEFORExFUiAqL106ICdjb21wb25lbnQgZXZlbnQgaGFuZGxlcicsXG4gICAgWzcgLyogRXJyb3JDb2Rlcy5WTk9ERV9IT09LICovXTogJ3Zub2RlIGhvb2snLFxuICAgIFs4IC8qIEVycm9yQ29kZXMuRElSRUNUSVZFX0hPT0sgKi9dOiAnZGlyZWN0aXZlIGhvb2snLFxuICAgIFs5IC8qIEVycm9yQ29kZXMuVFJBTlNJVElPTl9IT09LICovXTogJ3RyYW5zaXRpb24gaG9vaycsXG4gICAgWzEwIC8qIEVycm9yQ29kZXMuQVBQX0VSUk9SX0hBTkRMRVIgKi9dOiAnYXBwIGVycm9ySGFuZGxlcicsXG4gICAgWzExIC8qIEVycm9yQ29kZXMuQVBQX1dBUk5fSEFORExFUiAqL106ICdhcHAgd2FybkhhbmRsZXInLFxuICAgIFsxMiAvKiBFcnJvckNvZGVzLkZVTkNUSU9OX1JFRiAqL106ICdyZWYgZnVuY3Rpb24nLFxuICAgIFsxMyAvKiBFcnJvckNvZGVzLkFTWU5DX0NPTVBPTkVOVF9MT0FERVIgKi9dOiAnYXN5bmMgY29tcG9uZW50IGxvYWRlcicsXG4gICAgWzE0IC8qIEVycm9yQ29kZXMuU0NIRURVTEVSICovXTogJ3NjaGVkdWxlciBmbHVzaC4gVGhpcyBpcyBsaWtlbHkgYSBWdWUgaW50ZXJuYWxzIGJ1Zy4gJyArXG4gICAgICAgICdQbGVhc2Ugb3BlbiBhbiBpc3N1ZSBhdCBodHRwczovL25ldy1pc3N1ZS52dWVqcy5vcmcvP3JlcG89dnVlanMvY29yZSdcbn07XG5mdW5jdGlvbiBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSB7XG4gICAgbGV0IHJlcztcbiAgICB0cnkge1xuICAgICAgICByZXMgPSBhcmdzID8gZm4oLi4uYXJncykgOiBmbigpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzICYmIGlzUHJvbWlzZShyZXMpKSB7XG4gICAgICAgICAgICByZXMuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWVzLnB1c2goY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm5baV0sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG59XG5mdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlLCB0aHJvd0luRGV2ID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNvbnRleHRWTm9kZSA9IGluc3RhbmNlID8gaW5zdGFuY2Uudm5vZGUgOiBudWxsO1xuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICBsZXQgY3VyID0gaW5zdGFuY2UucGFyZW50O1xuICAgICAgICAvLyB0aGUgZXhwb3NlZCBpbnN0YW5jZSBpcyB0aGUgcmVuZGVyIHByb3h5IHRvIGtlZXAgaXQgY29uc2lzdGVudCB3aXRoIDIueFxuICAgICAgICBjb25zdCBleHBvc2VkSW5zdGFuY2UgPSBpbnN0YW5jZS5wcm94eTtcbiAgICAgICAgLy8gaW4gcHJvZHVjdGlvbiB0aGUgaG9vayByZWNlaXZlcyBvbmx5IHRoZSBlcnJvciBjb2RlXG4gICAgICAgIGNvbnN0IGVycm9ySW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IEVycm9yVHlwZVN0cmluZ3NbdHlwZV0gOiB0eXBlO1xuICAgICAgICB3aGlsZSAoY3VyKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckNhcHR1cmVkSG9va3MgPSBjdXIuZWM7XG4gICAgICAgICAgICBpZiAoZXJyb3JDYXB0dXJlZEhvb2tzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcnJvckNhcHR1cmVkSG9va3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yQ2FwdHVyZWRIb29rc1tpXShlcnIsIGV4cG9zZWRJbnN0YW5jZSwgZXJyb3JJbmZvKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1ciA9IGN1ci5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXBwLWxldmVsIGhhbmRsaW5nXG4gICAgICAgIGNvbnN0IGFwcEVycm9ySGFuZGxlciA9IGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLmVycm9ySGFuZGxlcjtcbiAgICAgICAgaWYgKGFwcEVycm9ySGFuZGxlcikge1xuICAgICAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGFwcEVycm9ySGFuZGxlciwgbnVsbCwgMTAgLyogRXJyb3JDb2Rlcy5BUFBfRVJST1JfSEFORExFUiAqLywgW2VyciwgZXhwb3NlZEluc3RhbmNlLCBlcnJvckluZm9dKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2dFcnJvcihlcnIsIHR5cGUsIGNvbnRleHRWTm9kZSwgdGhyb3dJbkRldik7XG59XG5mdW5jdGlvbiBsb2dFcnJvcihlcnIsIHR5cGUsIGNvbnRleHRWTm9kZSwgdGhyb3dJbkRldiA9IHRydWUpIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBFcnJvclR5cGVTdHJpbmdzW3R5cGVdO1xuICAgICAgICBpZiAoY29udGV4dFZOb2RlKSB7XG4gICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQoY29udGV4dFZOb2RlKTtcbiAgICAgICAgfVxuICAgICAgICB3YXJuKGBVbmhhbmRsZWQgZXJyb3Ike2luZm8gPyBgIGR1cmluZyBleGVjdXRpb24gb2YgJHtpbmZvfWAgOiBgYH1gKTtcbiAgICAgICAgaWYgKGNvbnRleHRWTm9kZSkge1xuICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjcmFzaCBpbiBkZXYgYnkgZGVmYXVsdCBzbyBpdCdzIG1vcmUgbm90aWNlYWJsZVxuICAgICAgICBpZiAodGhyb3dJbkRldikge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyByZWNvdmVyIGluIHByb2QgdG8gcmVkdWNlIHRoZSBpbXBhY3Qgb24gZW5kLXVzZXJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH1cbn1cblxubGV0IGlzRmx1c2hpbmcgPSBmYWxzZTtcbmxldCBpc0ZsdXNoUGVuZGluZyA9IGZhbHNlO1xuY29uc3QgcXVldWUgPSBbXTtcbmxldCBmbHVzaEluZGV4ID0gMDtcbmNvbnN0IHBlbmRpbmdQb3N0Rmx1c2hDYnMgPSBbXTtcbmxldCBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xubGV0IHBvc3RGbHVzaEluZGV4ID0gMDtcbmNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IC8qI19fUFVSRV9fKi8gUHJvbWlzZS5yZXNvbHZlKCk7XG5sZXQgY3VycmVudEZsdXNoUHJvbWlzZSA9IG51bGw7XG5jb25zdCBSRUNVUlNJT05fTElNSVQgPSAxMDA7XG5mdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgIGNvbnN0IHAgPSBjdXJyZW50Rmx1c2hQcm9taXNlIHx8IHJlc29sdmVkUHJvbWlzZTtcbiAgICByZXR1cm4gZm4gPyBwLnRoZW4odGhpcyA/IGZuLmJpbmQodGhpcykgOiBmbikgOiBwO1xufVxuLy8gIzI3Njhcbi8vIFVzZSBiaW5hcnktc2VhcmNoIHRvIGZpbmQgYSBzdWl0YWJsZSBwb3NpdGlvbiBpbiB0aGUgcXVldWUsXG4vLyBzbyB0aGF0IHRoZSBxdWV1ZSBtYWludGFpbnMgdGhlIGluY3JlYXNpbmcgb3JkZXIgb2Ygam9iJ3MgaWQsXG4vLyB3aGljaCBjYW4gcHJldmVudCB0aGUgam9iIGZyb20gYmVpbmcgc2tpcHBlZCBhbmQgYWxzbyBjYW4gYXZvaWQgcmVwZWF0ZWQgcGF0Y2hpbmcuXG5mdW5jdGlvbiBmaW5kSW5zZXJ0aW9uSW5kZXgoaWQpIHtcbiAgICAvLyB0aGUgc3RhcnQgaW5kZXggc2hvdWxkIGJlIGBmbHVzaEluZGV4ICsgMWBcbiAgICBsZXQgc3RhcnQgPSBmbHVzaEluZGV4ICsgMTtcbiAgICBsZXQgZW5kID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlIChzdGFydCA8IGVuZCkge1xuICAgICAgICBjb25zdCBtaWRkbGUgPSAoc3RhcnQgKyBlbmQpID4+PiAxO1xuICAgICAgICBjb25zdCBtaWRkbGVKb2JJZCA9IGdldElkKHF1ZXVlW21pZGRsZV0pO1xuICAgICAgICBtaWRkbGVKb2JJZCA8IGlkID8gKHN0YXJ0ID0gbWlkZGxlICsgMSkgOiAoZW5kID0gbWlkZGxlKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0O1xufVxuZnVuY3Rpb24gcXVldWVKb2Ioam9iKSB7XG4gICAgLy8gdGhlIGRlZHVwZSBzZWFyY2ggdXNlcyB0aGUgc3RhcnRJbmRleCBhcmd1bWVudCBvZiBBcnJheS5pbmNsdWRlcygpXG4gICAgLy8gYnkgZGVmYXVsdCB0aGUgc2VhcmNoIGluZGV4IGluY2x1ZGVzIHRoZSBjdXJyZW50IGpvYiB0aGF0IGlzIGJlaW5nIHJ1blxuICAgIC8vIHNvIGl0IGNhbm5vdCByZWN1cnNpdmVseSB0cmlnZ2VyIGl0c2VsZiBhZ2Fpbi5cbiAgICAvLyBpZiB0aGUgam9iIGlzIGEgd2F0Y2goKSBjYWxsYmFjaywgdGhlIHNlYXJjaCB3aWxsIHN0YXJ0IHdpdGggYSArMSBpbmRleCB0b1xuICAgIC8vIGFsbG93IGl0IHJlY3Vyc2l2ZWx5IHRyaWdnZXIgaXRzZWxmIC0gaXQgaXMgdGhlIHVzZXIncyByZXNwb25zaWJpbGl0eSB0b1xuICAgIC8vIGVuc3VyZSBpdCBkb2Vzbid0IGVuZCB1cCBpbiBhbiBpbmZpbml0ZSBsb29wLlxuICAgIGlmICghcXVldWUubGVuZ3RoIHx8XG4gICAgICAgICFxdWV1ZS5pbmNsdWRlcyhqb2IsIGlzRmx1c2hpbmcgJiYgam9iLmFsbG93UmVjdXJzZSA/IGZsdXNoSW5kZXggKyAxIDogZmx1c2hJbmRleCkpIHtcbiAgICAgICAgaWYgKGpvYi5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGpvYik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdWV1ZS5zcGxpY2UoZmluZEluc2VydGlvbkluZGV4KGpvYi5pZCksIDAsIGpvYik7XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVGbHVzaCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHF1ZXVlRmx1c2goKSB7XG4gICAgaWYgKCFpc0ZsdXNoaW5nICYmICFpc0ZsdXNoUGVuZGluZykge1xuICAgICAgICBpc0ZsdXNoUGVuZGluZyA9IHRydWU7XG4gICAgICAgIGN1cnJlbnRGbHVzaFByb21pc2UgPSByZXNvbHZlZFByb21pc2UudGhlbihmbHVzaEpvYnMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGludmFsaWRhdGVKb2Ioam9iKSB7XG4gICAgY29uc3QgaSA9IHF1ZXVlLmluZGV4T2Yoam9iKTtcbiAgICBpZiAoaSA+IGZsdXNoSW5kZXgpIHtcbiAgICAgICAgcXVldWUuc3BsaWNlKGksIDEpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHF1ZXVlUG9zdEZsdXNoQ2IoY2IpIHtcbiAgICBpZiAoIWlzQXJyYXkoY2IpKSB7XG4gICAgICAgIGlmICghYWN0aXZlUG9zdEZsdXNoQ2JzIHx8XG4gICAgICAgICAgICAhYWN0aXZlUG9zdEZsdXNoQ2JzLmluY2x1ZGVzKGNiLCBjYi5hbGxvd1JlY3Vyc2UgPyBwb3N0Rmx1c2hJbmRleCArIDEgOiBwb3N0Rmx1c2hJbmRleCkpIHtcbiAgICAgICAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaChjYik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGlmIGNiIGlzIGFuIGFycmF5LCBpdCBpcyBhIGNvbXBvbmVudCBsaWZlY3ljbGUgaG9vayB3aGljaCBjYW4gb25seSBiZVxuICAgICAgICAvLyB0cmlnZ2VyZWQgYnkgYSBqb2IsIHdoaWNoIGlzIGFscmVhZHkgZGVkdXBlZCBpbiB0aGUgbWFpbiBxdWV1ZSwgc29cbiAgICAgICAgLy8gd2UgY2FuIHNraXAgZHVwbGljYXRlIGNoZWNrIGhlcmUgdG8gaW1wcm92ZSBwZXJmXG4gICAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaCguLi5jYik7XG4gICAgfVxuICAgIHF1ZXVlRmx1c2goKTtcbn1cbmZ1bmN0aW9uIGZsdXNoUHJlRmx1c2hDYnMoc2VlbiwgXG4vLyBpZiBjdXJyZW50bHkgZmx1c2hpbmcsIHNraXAgdGhlIGN1cnJlbnQgam9iIGl0c2VsZlxuaSA9IGlzRmx1c2hpbmcgPyBmbHVzaEluZGV4ICsgMSA6IDApIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgZm9yICg7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjYiA9IHF1ZXVlW2ldO1xuICAgICAgICBpZiAoY2IgJiYgY2IucHJlKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBjYikpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBmbHVzaFBvc3RGbHVzaENicyhzZWVuKSB7XG4gICAgaWYgKHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRlZHVwZWQgPSBbLi4ubmV3IFNldChwZW5kaW5nUG9zdEZsdXNoQ2JzKV07XG4gICAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoID0gMDtcbiAgICAgICAgLy8gIzE5NDcgYWxyZWFkeSBoYXMgYWN0aXZlIHF1ZXVlLCBuZXN0ZWQgZmx1c2hQb3N0Rmx1c2hDYnMgY2FsbFxuICAgICAgICBpZiAoYWN0aXZlUG9zdEZsdXNoQ2JzKSB7XG4gICAgICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMucHVzaCguLi5kZWR1cGVkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBkZWR1cGVkO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzLnNvcnQoKGEsIGIpID0+IGdldElkKGEpIC0gZ2V0SWQoYikpO1xuICAgICAgICBmb3IgKHBvc3RGbHVzaEluZGV4ID0gMDsgcG9zdEZsdXNoSW5kZXggPCBhY3RpdmVQb3N0Rmx1c2hDYnMubGVuZ3RoOyBwb3N0Rmx1c2hJbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGFjdGl2ZVBvc3RGbHVzaENic1twb3N0Rmx1c2hJbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnNbcG9zdEZsdXNoSW5kZXhdKCk7XG4gICAgICAgIH1cbiAgICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzID0gbnVsbDtcbiAgICAgICAgcG9zdEZsdXNoSW5kZXggPSAwO1xuICAgIH1cbn1cbmNvbnN0IGdldElkID0gKGpvYikgPT4gam9iLmlkID09IG51bGwgPyBJbmZpbml0eSA6IGpvYi5pZDtcbmNvbnN0IGNvbXBhcmF0b3IgPSAoYSwgYikgPT4ge1xuICAgIGNvbnN0IGRpZmYgPSBnZXRJZChhKSAtIGdldElkKGIpO1xuICAgIGlmIChkaWZmID09PSAwKSB7XG4gICAgICAgIGlmIChhLnByZSAmJiAhYi5wcmUpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGlmIChiLnByZSAmJiAhYS5wcmUpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZmY7XG59O1xuZnVuY3Rpb24gZmx1c2hKb2JzKHNlZW4pIHtcbiAgICBpc0ZsdXNoUGVuZGluZyA9IGZhbHNlO1xuICAgIGlzRmx1c2hpbmcgPSB0cnVlO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgc2VlbiA9IHNlZW4gfHwgbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvLyBTb3J0IHF1ZXVlIGJlZm9yZSBmbHVzaC5cbiAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdDpcbiAgICAvLyAxLiBDb21wb25lbnRzIGFyZSB1cGRhdGVkIGZyb20gcGFyZW50IHRvIGNoaWxkLiAoYmVjYXVzZSBwYXJlbnQgaXMgYWx3YXlzXG4gICAgLy8gICAgY3JlYXRlZCBiZWZvcmUgdGhlIGNoaWxkIHNvIGl0cyByZW5kZXIgZWZmZWN0IHdpbGwgaGF2ZSBzbWFsbGVyXG4gICAgLy8gICAgcHJpb3JpdHkgbnVtYmVyKVxuICAgIC8vIDIuIElmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBkdXJpbmcgYSBwYXJlbnQgY29tcG9uZW50J3MgdXBkYXRlLFxuICAgIC8vICAgIGl0cyB1cGRhdGUgY2FuIGJlIHNraXBwZWQuXG4gICAgcXVldWUuc29ydChjb21wYXJhdG9yKTtcbiAgICAvLyBjb25kaXRpb25hbCB1c2FnZSBvZiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZSBtdXN0IGJlIGRldGVybWluZWQgb3V0IG9mXG4gICAgLy8gdHJ5IC4uLiBjYXRjaCBibG9jayBzaW5jZSBSb2xsdXAgYnkgZGVmYXVsdCBkZS1vcHRpbWl6ZXMgdHJlZXNoYWtpbmdcbiAgICAvLyBpbnNpZGUgdHJ5LWNhdGNoLiBUaGlzIGNhbiBsZWF2ZSBhbGwgd2FybmluZyBjb2RlIHVuc2hha2VkLiBBbHRob3VnaFxuICAgIC8vIHRoZXkgd291bGQgZ2V0IGV2ZW50dWFsbHkgc2hha2VuIGJ5IGEgbWluaWZpZXIgbGlrZSB0ZXJzZXIsIHNvbWUgbWluaWZpZXJzXG4gICAgLy8gd291bGQgZmFpbCB0byBkbyB0aGF0IChlLmcuIGh0dHBzOi8vZ2l0aHViLmNvbS9ldmFudy9lc2J1aWxkL2lzc3Vlcy8xNjEwKVxuICAgIGNvbnN0IGNoZWNrID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgID8gKGpvYikgPT4gY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGpvYilcbiAgICAgICAgOiBOT09QO1xuICAgIHRyeSB7XG4gICAgICAgIGZvciAoZmx1c2hJbmRleCA9IDA7IGZsdXNoSW5kZXggPCBxdWV1ZS5sZW5ndGg7IGZsdXNoSW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3Qgam9iID0gcXVldWVbZmx1c2hJbmRleF07XG4gICAgICAgICAgICBpZiAoam9iICYmIGpvYi5hY3RpdmUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjaGVjayhqb2IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgcnVubmluZzpgLCBqb2IuaWQpXG4gICAgICAgICAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGpvYiwgbnVsbCwgMTQgLyogRXJyb3JDb2Rlcy5TQ0hFRFVMRVIgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBmbHVzaEluZGV4ID0gMDtcbiAgICAgICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoc2Vlbik7XG4gICAgICAgIGlzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgY3VycmVudEZsdXNoUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIC8vIHNvbWUgcG9zdEZsdXNoQ2IgcXVldWVkIGpvYnMhXG4gICAgICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZHJhaW5zLlxuICAgICAgICBpZiAocXVldWUubGVuZ3RoIHx8IHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmbHVzaEpvYnMoc2Vlbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgZm4pIHtcbiAgICBpZiAoIXNlZW4uaGFzKGZuKSkge1xuICAgICAgICBzZWVuLnNldChmbiwgMSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjb3VudCA9IHNlZW4uZ2V0KGZuKTtcbiAgICAgICAgaWYgKGNvdW50ID4gUkVDVVJTSU9OX0xJTUlUKSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGZuLm93bmVySW5zdGFuY2U7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnROYW1lID0gaW5zdGFuY2UgJiYgZ2V0Q29tcG9uZW50TmFtZShpbnN0YW5jZS50eXBlKTtcbiAgICAgICAgICAgIHdhcm4oYE1heGltdW0gcmVjdXJzaXZlIHVwZGF0ZXMgZXhjZWVkZWQke2NvbXBvbmVudE5hbWUgPyBgIGluIGNvbXBvbmVudCA8JHtjb21wb25lbnROYW1lfT5gIDogYGB9LiBgICtcbiAgICAgICAgICAgICAgICBgVGhpcyBtZWFucyB5b3UgaGF2ZSBhIHJlYWN0aXZlIGVmZmVjdCB0aGF0IGlzIG11dGF0aW5nIGl0cyBvd24gYCArXG4gICAgICAgICAgICAgICAgYGRlcGVuZGVuY2llcyBhbmQgdGh1cyByZWN1cnNpdmVseSB0cmlnZ2VyaW5nIGl0c2VsZi4gUG9zc2libGUgc291cmNlcyBgICtcbiAgICAgICAgICAgICAgICBgaW5jbHVkZSBjb21wb25lbnQgdGVtcGxhdGUsIHJlbmRlciBmdW5jdGlvbiwgdXBkYXRlZCBob29rIG9yIGAgK1xuICAgICAgICAgICAgICAgIGB3YXRjaGVyIHNvdXJjZSBmdW5jdGlvbi5gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2Vlbi5zZXQoZm4sIGNvdW50ICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xubGV0IGlzSG1yVXBkYXRpbmcgPSBmYWxzZTtcbmNvbnN0IGhtckRpcnR5Q29tcG9uZW50cyA9IG5ldyBTZXQoKTtcbi8vIEV4cG9zZSB0aGUgSE1SIHJ1bnRpbWUgb24gdGhlIGdsb2JhbCBvYmplY3Rcbi8vIFRoaXMgbWFrZXMgaXQgZW50aXJlbHkgdHJlZS1zaGFrYWJsZSB3aXRob3V0IHBvbGx1dGluZyB0aGUgZXhwb3J0cyBhbmQgbWFrZXNcbi8vIGl0IGVhc2llciB0byBiZSB1c2VkIGluIHRvb2xpbmdzIGxpa2UgdnVlLWxvYWRlclxuLy8gTm90ZTogZm9yIGEgY29tcG9uZW50IHRvIGJlIGVsaWdpYmxlIGZvciBITVIgaXQgYWxzbyBuZWVkcyB0aGUgX19obXJJZCBvcHRpb25cbi8vIHRvIGJlIHNldCBzbyB0aGF0IGl0cyBpbnN0YW5jZXMgY2FuIGJlIHJlZ2lzdGVyZWQgLyByZW1vdmVkLlxuaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9ITVJfUlVOVElNRV9fID0ge1xuICAgICAgICBjcmVhdGVSZWNvcmQ6IHRyeVdyYXAoY3JlYXRlUmVjb3JkKSxcbiAgICAgICAgcmVyZW5kZXI6IHRyeVdyYXAocmVyZW5kZXIpLFxuICAgICAgICByZWxvYWQ6IHRyeVdyYXAocmVsb2FkKVxuICAgIH07XG59XG5jb25zdCBtYXAgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiByZWdpc3RlckhNUihpbnN0YW5jZSkge1xuICAgIGNvbnN0IGlkID0gaW5zdGFuY2UudHlwZS5fX2htcklkO1xuICAgIGxldCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgICBpZiAoIXJlY29yZCkge1xuICAgICAgICBjcmVhdGVSZWNvcmQoaWQsIGluc3RhbmNlLnR5cGUpO1xuICAgICAgICByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgICB9XG4gICAgcmVjb3JkLmluc3RhbmNlcy5hZGQoaW5zdGFuY2UpO1xufVxuZnVuY3Rpb24gdW5yZWdpc3RlckhNUihpbnN0YW5jZSkge1xuICAgIG1hcC5nZXQoaW5zdGFuY2UudHlwZS5fX2htcklkKS5pbnN0YW5jZXMuZGVsZXRlKGluc3RhbmNlKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlY29yZChpZCwgaW5pdGlhbERlZikge1xuICAgIGlmIChtYXAuaGFzKGlkKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG1hcC5zZXQoaWQsIHtcbiAgICAgICAgaW5pdGlhbERlZjogbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5pdGlhbERlZiksXG4gICAgICAgIGluc3RhbmNlczogbmV3IFNldCgpXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDbGFzc0NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICByZXR1cm4gaXNDbGFzc0NvbXBvbmVudChjb21wb25lbnQpID8gY29tcG9uZW50Ll9fdmNjT3B0cyA6IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIHJlcmVuZGVyKGlkLCBuZXdSZW5kZXIpIHtcbiAgICBjb25zdCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgICBpZiAoIXJlY29yZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBpbml0aWFsIHJlY29yZCAoZm9yIG5vdC15ZXQtcmVuZGVyZWQgY29tcG9uZW50KVxuICAgIHJlY29yZC5pbml0aWFsRGVmLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICBbLi4ucmVjb3JkLmluc3RhbmNlc10uZm9yRWFjaChpbnN0YW5jZSA9PiB7XG4gICAgICAgIGlmIChuZXdSZW5kZXIpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICAgICAgICAgIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluc3RhbmNlLnR5cGUpLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5yZW5kZXJDYWNoZSA9IFtdO1xuICAgICAgICAvLyB0aGlzIGZsYWcgZm9yY2VzIGNoaWxkIGNvbXBvbmVudHMgd2l0aCBzbG90IGNvbnRlbnQgdG8gdXBkYXRlXG4gICAgICAgIGlzSG1yVXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgaXNIbXJVcGRhdGluZyA9IGZhbHNlO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcmVsb2FkKGlkLCBuZXdDb21wKSB7XG4gICAgY29uc3QgcmVjb3JkID0gbWFwLmdldChpZCk7XG4gICAgaWYgKCFyZWNvcmQpXG4gICAgICAgIHJldHVybjtcbiAgICBuZXdDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQobmV3Q29tcCk7XG4gICAgLy8gdXBkYXRlIGluaXRpYWwgZGVmIChmb3Igbm90LXlldC1yZW5kZXJlZCBjb21wb25lbnRzKVxuICAgIHVwZGF0ZUNvbXBvbmVudERlZihyZWNvcmQuaW5pdGlhbERlZiwgbmV3Q29tcCk7XG4gICAgLy8gY3JlYXRlIGEgc25hcHNob3Qgd2hpY2ggYXZvaWRzIHRoZSBzZXQgYmVpbmcgbXV0YXRlZCBkdXJpbmcgdXBkYXRlc1xuICAgIGNvbnN0IGluc3RhbmNlcyA9IFsuLi5yZWNvcmQuaW5zdGFuY2VzXTtcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xuICAgICAgICBjb25zdCBvbGRDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSk7XG4gICAgICAgIGlmICghaG1yRGlydHlDb21wb25lbnRzLmhhcyhvbGRDb21wKSkge1xuICAgICAgICAgICAgLy8gMS4gVXBkYXRlIGV4aXN0aW5nIGNvbXAgZGVmaW5pdGlvbiB0byBtYXRjaCBuZXcgb25lXG4gICAgICAgICAgICBpZiAob2xkQ29tcCAhPT0gcmVjb3JkLmluaXRpYWxEZWYpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnREZWYob2xkQ29tcCwgbmV3Q29tcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAyLiBtYXJrIGRlZmluaXRpb24gZGlydHkuIFRoaXMgZm9yY2VzIHRoZSByZW5kZXJlciB0byByZXBsYWNlIHRoZVxuICAgICAgICAgICAgLy8gY29tcG9uZW50IG9uIHBhdGNoLlxuICAgICAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmFkZChvbGRDb21wKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzLiBpbnZhbGlkYXRlIG9wdGlvbnMgcmVzb2x1dGlvbiBjYWNoZVxuICAgICAgICBpbnN0YW5jZS5hcHBDb250ZXh0Lm9wdGlvbnNDYWNoZS5kZWxldGUoaW5zdGFuY2UudHlwZSk7XG4gICAgICAgIC8vIDQuIGFjdHVhbGx5IHVwZGF0ZVxuICAgICAgICBpZiAoaW5zdGFuY2UuY2VSZWxvYWQpIHtcbiAgICAgICAgICAgIC8vIGN1c3RvbSBlbGVtZW50XG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuYWRkKG9sZENvbXApO1xuICAgICAgICAgICAgaW5zdGFuY2UuY2VSZWxvYWQobmV3Q29tcC5zdHlsZXMpO1xuICAgICAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmRlbGV0ZShvbGRDb21wKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnN0YW5jZS5wYXJlbnQpIHtcbiAgICAgICAgICAgIC8vIDQuIEZvcmNlIHRoZSBwYXJlbnQgaW5zdGFuY2UgdG8gcmUtcmVuZGVyLiBUaGlzIHdpbGwgY2F1c2UgYWxsIHVwZGF0ZWRcbiAgICAgICAgICAgIC8vIGNvbXBvbmVudHMgdG8gYmUgdW5tb3VudGVkIGFuZCByZS1tb3VudGVkLiBRdWV1ZSB0aGUgdXBkYXRlIHNvIHRoYXQgd2VcbiAgICAgICAgICAgIC8vIGRvbid0IGVuZCB1cCBmb3JjaW5nIHRoZSBzYW1lIHBhcmVudCB0byByZS1yZW5kZXIgbXVsdGlwbGUgdGltZXMuXG4gICAgICAgICAgICBxdWV1ZUpvYihpbnN0YW5jZS5wYXJlbnQudXBkYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LnJlbG9hZCkge1xuICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZSBtb3VudGVkIHZpYSBjcmVhdGVBcHAoKSBoYXMgYSByZWxvYWQgbWV0aG9kXG4gICAgICAgICAgICBpbnN0YW5jZS5hcHBDb250ZXh0LnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyByb290IGluc3RhbmNlIGluc2lkZSB0cmVlIGNyZWF0ZWQgdmlhIHJhdyByZW5kZXIoKS4gRm9yY2UgcmVsb2FkLlxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbSE1SXSBSb290IG9yIG1hbnVhbGx5IG1vdW50ZWQgaW5zdGFuY2UgbW9kaWZpZWQuIEZ1bGwgcmVsb2FkIHJlcXVpcmVkLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIDUuIG1ha2Ugc3VyZSB0byBjbGVhbnVwIGRpcnR5IGhtciBjb21wb25lbnRzIGFmdGVyIHVwZGF0ZVxuICAgIHF1ZXVlUG9zdEZsdXNoQ2IoKCkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xuICAgICAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmRlbGV0ZShub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbnN0YW5jZS50eXBlKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudERlZihvbGRDb21wLCBuZXdDb21wKSB7XG4gICAgZXh0ZW5kKG9sZENvbXAsIG5ld0NvbXApO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9sZENvbXApIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJ19fZmlsZScgJiYgIShrZXkgaW4gbmV3Q29tcCkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBvbGRDb21wW2tleV07XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0cnlXcmFwKGZuKSB7XG4gICAgcmV0dXJuIChpZCwgYXJnKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gZm4oaWQsIGFyZyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtITVJdIFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBWdWUgY29tcG9uZW50IGhvdC1yZWxvYWQuIGAgK1xuICAgICAgICAgICAgICAgIGBGdWxsIHJlbG9hZCByZXF1aXJlZC5gKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmxldCBkZXZ0b29scztcbmxldCBidWZmZXIgPSBbXTtcbmxldCBkZXZ0b29sc05vdEluc3RhbGxlZCA9IGZhbHNlO1xuZnVuY3Rpb24gZW1pdChldmVudCwgLi4uYXJncykge1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgICBkZXZ0b29scy5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWRldnRvb2xzTm90SW5zdGFsbGVkKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKHsgZXZlbnQsIGFyZ3MgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0RGV2dG9vbHNIb29rKGhvb2ssIHRhcmdldCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgZGV2dG9vbHMgPSBob29rO1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgICBkZXZ0b29scy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgYnVmZmVyLmZvckVhY2goKHsgZXZlbnQsIGFyZ3MgfSkgPT4gZGV2dG9vbHMuZW1pdChldmVudCwgLi4uYXJncykpO1xuICAgICAgICBidWZmZXIgPSBbXTtcbiAgICB9XG4gICAgZWxzZSBpZiAoXG4gICAgLy8gaGFuZGxlIGxhdGUgZGV2dG9vbHMgaW5qZWN0aW9uIC0gb25seSBkbyB0aGlzIGlmIHdlIGFyZSBpbiBhbiBhY3R1YWxcbiAgICAvLyBicm93c2VyIGVudmlyb25tZW50IHRvIGF2b2lkIHRoZSB0aW1lciBoYW5kbGUgc3RhbGxpbmcgdGVzdCBydW5uZXIgZXhpdFxuICAgIC8vICgjNDgxNSlcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvLyBzb21lIGVudnMgbW9jayB3aW5kb3cgYnV0IG5vdCBmdWxseVxuICAgICAgICB3aW5kb3cuSFRNTEVsZW1lbnQgJiZcbiAgICAgICAgLy8gYWxzbyBleGNsdWRlIGpzZG9tXG4gICAgICAgICEoKF9iID0gKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVzZXJBZ2VudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmluY2x1ZGVzKCdqc2RvbScpKSkge1xuICAgICAgICBjb25zdCByZXBsYXkgPSAodGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPVxuICAgICAgICAgICAgdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gfHwgW10pO1xuICAgICAgICByZXBsYXkucHVzaCgobmV3SG9vaykgPT4ge1xuICAgICAgICAgICAgc2V0RGV2dG9vbHNIb29rKG5ld0hvb2ssIHRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjbGVhciBidWZmZXIgYWZ0ZXIgM3MgLSB0aGUgdXNlciBwcm9iYWJseSBkb2Vzbid0IGhhdmUgZGV2dG9vbHMgaW5zdGFsbGVkXG4gICAgICAgIC8vIGF0IGFsbCwgYW5kIGtlZXBpbmcgdGhlIGJ1ZmZlciB3aWxsIGNhdXNlIG1lbW9yeSBsZWFrcyAoIzQ3MzgpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkZXZ0b29scykge1xuICAgICAgICAgICAgICAgIHRhcmdldC5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fID0gbnVsbDtcbiAgICAgICAgICAgICAgICBkZXZ0b29sc05vdEluc3RhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gbm9uLWJyb3dzZXIgZW52LCBhc3N1bWUgbm90IGluc3RhbGxlZFxuICAgICAgICBkZXZ0b29sc05vdEluc3RhbGxlZCA9IHRydWU7XG4gICAgICAgIGJ1ZmZlciA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldnRvb2xzSW5pdEFwcChhcHAsIHZlcnNpb24pIHtcbiAgICBlbWl0KFwiYXBwOmluaXRcIiAvKiBEZXZ0b29sc0hvb2tzLkFQUF9JTklUICovLCBhcHAsIHZlcnNpb24sIHtcbiAgICAgICAgRnJhZ21lbnQsXG4gICAgICAgIFRleHQsXG4gICAgICAgIENvbW1lbnQsXG4gICAgICAgIFN0YXRpY1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZGV2dG9vbHNVbm1vdW50QXBwKGFwcCkge1xuICAgIGVtaXQoXCJhcHA6dW5tb3VudFwiIC8qIERldnRvb2xzSG9va3MuQVBQX1VOTU9VTlQgKi8sIGFwcCk7XG59XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudEFkZGVkID0gLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6YWRkZWRcIiAvKiBEZXZ0b29sc0hvb2tzLkNPTVBPTkVOVF9BRERFRCAqLyk7XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQgPSBcbi8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFwiY29tcG9uZW50OnVwZGF0ZWRcIiAvKiBEZXZ0b29sc0hvb2tzLkNPTVBPTkVOVF9VUERBVEVEICovKTtcbmNvbnN0IF9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhcImNvbXBvbmVudDpyZW1vdmVkXCIgLyogRGV2dG9vbHNIb29rcy5DT01QT05FTlRfUkVNT1ZFRCAqLyk7XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAoY29tcG9uZW50KSA9PiB7XG4gICAgaWYgKGRldnRvb2xzICYmXG4gICAgICAgIHR5cGVvZiBkZXZ0b29scy5jbGVhbnVwQnVmZmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgY29tcG9uZW50IGlmIGl0IHdhc24ndCBidWZmZXJlZFxuICAgICAgICAhZGV2dG9vbHMuY2xlYW51cEJ1ZmZlcihjb21wb25lbnQpKSB7XG4gICAgICAgIF9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQoY29tcG9uZW50KTtcbiAgICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKGhvb2spIHtcbiAgICByZXR1cm4gKGNvbXBvbmVudCkgPT4ge1xuICAgICAgICBlbWl0KGhvb2ssIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LnVpZCwgY29tcG9uZW50LnBhcmVudCA/IGNvbXBvbmVudC5wYXJlbnQudWlkIDogdW5kZWZpbmVkLCBjb21wb25lbnQpO1xuICAgIH07XG59XG5jb25zdCBkZXZ0b29sc1BlcmZTdGFydCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soXCJwZXJmOnN0YXJ0XCIgLyogRGV2dG9vbHNIb29rcy5QRVJGT1JNQU5DRV9TVEFSVCAqLyk7XG5jb25zdCBkZXZ0b29sc1BlcmZFbmQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKFwicGVyZjplbmRcIiAvKiBEZXZ0b29sc0hvb2tzLlBFUkZPUk1BTkNFX0VORCAqLyk7XG5mdW5jdGlvbiBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhob29rKSB7XG4gICAgcmV0dXJuIChjb21wb25lbnQsIHR5cGUsIHRpbWUpID0+IHtcbiAgICAgICAgZW1pdChob29rLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudC51aWQsIGNvbXBvbmVudCwgdHlwZSwgdGltZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRldnRvb2xzQ29tcG9uZW50RW1pdChjb21wb25lbnQsIGV2ZW50LCBwYXJhbXMpIHtcbiAgICBlbWl0KFwiY29tcG9uZW50OmVtaXRcIiAvKiBEZXZ0b29sc0hvb2tzLkNPTVBPTkVOVF9FTUlUICovLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudCwgZXZlbnQsIHBhcmFtcyk7XG59XG5cbmZ1bmN0aW9uIGVtaXQkMShpbnN0YW5jZSwgZXZlbnQsIC4uLnJhd0FyZ3MpIHtcbiAgICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBwcm9wcyA9IGluc3RhbmNlLnZub2RlLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IHsgZW1pdHNPcHRpb25zLCBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgaWYgKGVtaXRzT3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCEoZXZlbnQgaW4gZW1pdHNPcHRpb25zKSAmJlxuICAgICAgICAgICAgICAgICEoZmFsc2UgKSkge1xuICAgICAgICAgICAgICAgIGlmICghcHJvcHNPcHRpb25zIHx8ICEodG9IYW5kbGVyS2V5KGV2ZW50KSBpbiBwcm9wc09wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBlbWl0dGVkIGV2ZW50IFwiJHtldmVudH1cIiBidXQgaXQgaXMgbmVpdGhlciBkZWNsYXJlZCBpbiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB0aGUgZW1pdHMgb3B0aW9uIG5vciBhcyBhbiBcIiR7dG9IYW5kbGVyS2V5KGV2ZW50KX1cIiBwcm9wLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IGVtaXRzT3B0aW9uc1tldmVudF07XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdG9yKC4uLnJhd0FyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEludmFsaWQgZXZlbnQgYXJndW1lbnRzOiBldmVudCB2YWxpZGF0aW9uIGZhaWxlZCBmb3IgZXZlbnQgXCIke2V2ZW50fVwiLmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBhcmdzID0gcmF3QXJncztcbiAgICBjb25zdCBpc01vZGVsTGlzdGVuZXIgPSBldmVudC5zdGFydHNXaXRoKCd1cGRhdGU6Jyk7XG4gICAgLy8gZm9yIHYtbW9kZWwgdXBkYXRlOnh4eCBldmVudHMsIGFwcGx5IG1vZGlmaWVycyBvbiBhcmdzXG4gICAgY29uc3QgbW9kZWxBcmcgPSBpc01vZGVsTGlzdGVuZXIgJiYgZXZlbnQuc2xpY2UoNyk7XG4gICAgaWYgKG1vZGVsQXJnICYmIG1vZGVsQXJnIGluIHByb3BzKSB7XG4gICAgICAgIGNvbnN0IG1vZGlmaWVyc0tleSA9IGAke21vZGVsQXJnID09PSAnbW9kZWxWYWx1ZScgPyAnbW9kZWwnIDogbW9kZWxBcmd9TW9kaWZpZXJzYDtcbiAgICAgICAgY29uc3QgeyBudW1iZXIsIHRyaW0gfSA9IHByb3BzW21vZGlmaWVyc0tleV0gfHwgRU1QVFlfT0JKO1xuICAgICAgICBpZiAodHJpbSkge1xuICAgICAgICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKGEgPT4gKGlzU3RyaW5nKGEpID8gYS50cmltKCkgOiBhKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bWJlcikge1xuICAgICAgICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKHRvTnVtYmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEVtaXQoaW5zdGFuY2UsIGV2ZW50LCBhcmdzKTtcbiAgICB9XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBjb25zdCBsb3dlckNhc2VFdmVudCA9IGV2ZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChsb3dlckNhc2VFdmVudCAhPT0gZXZlbnQgJiYgcHJvcHNbdG9IYW5kbGVyS2V5KGxvd2VyQ2FzZUV2ZW50KV0pIHtcbiAgICAgICAgICAgIHdhcm4oYEV2ZW50IFwiJHtsb3dlckNhc2VFdmVudH1cIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCBgICtcbiAgICAgICAgICAgICAgICBgJHtmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCBpbnN0YW5jZS50eXBlKX0gYnV0IHRoZSBoYW5kbGVyIGlzIHJlZ2lzdGVyZWQgZm9yIFwiJHtldmVudH1cIi4gYCArXG4gICAgICAgICAgICAgICAgYE5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIHlvdSBjYW5ub3QgdXNlIGAgK1xuICAgICAgICAgICAgICAgIGB2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gYCArXG4gICAgICAgICAgICAgICAgYFlvdSBzaG91bGQgcHJvYmFibHkgdXNlIFwiJHtoeXBoZW5hdGUoZXZlbnQpfVwiIGluc3RlYWQgb2YgXCIke2V2ZW50fVwiLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBoYW5kbGVyTmFtZTtcbiAgICBsZXQgaGFuZGxlciA9IHByb3BzWyhoYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShldmVudCkpXSB8fFxuICAgICAgICAvLyBhbHNvIHRyeSBjYW1lbENhc2UgZXZlbnQgaGFuZGxlciAoIzIyNDkpXG4gICAgICAgIHByb3BzWyhoYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShjYW1lbGl6ZShldmVudCkpKV07XG4gICAgLy8gZm9yIHYtbW9kZWwgdXBkYXRlOnh4eCBldmVudHMsIGFsc28gdHJpZ2dlciBrZWJhYi1jYXNlIGVxdWl2YWxlbnRcbiAgICAvLyBmb3IgcHJvcHMgcGFzc2VkIHZpYSBrZWJhYi1jYXNlXG4gICAgaWYgKCFoYW5kbGVyICYmIGlzTW9kZWxMaXN0ZW5lcikge1xuICAgICAgICBoYW5kbGVyID0gcHJvcHNbKGhhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGh5cGhlbmF0ZShldmVudCkpKV07XG4gICAgfVxuICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhhbmRsZXIsIGluc3RhbmNlLCA2IC8qIEVycm9yQ29kZXMuQ09NUE9ORU5UX0VWRU5UX0hBTkRMRVIgKi8sIGFyZ3MpO1xuICAgIH1cbiAgICBjb25zdCBvbmNlSGFuZGxlciA9IHByb3BzW2hhbmRsZXJOYW1lICsgYE9uY2VgXTtcbiAgICBpZiAob25jZUhhbmRsZXIpIHtcbiAgICAgICAgaWYgKCFpbnN0YW5jZS5lbWl0dGVkKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5lbWl0dGVkID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5lbWl0dGVkW2hhbmRsZXJOYW1lXSA9IHRydWU7XG4gICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKG9uY2VIYW5kbGVyLCBpbnN0YW5jZSwgNiAvKiBFcnJvckNvZGVzLkNPTVBPTkVOVF9FVkVOVF9IQU5ETEVSICovLCBhcmdzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBub3JtYWxpemVFbWl0c09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LmVtaXRzQ2FjaGU7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xuICAgIGlmIChjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgICBjb25zdCByYXcgPSBjb21wLmVtaXRzO1xuICAgIGxldCBub3JtYWxpemVkID0ge307XG4gICAgLy8gYXBwbHkgbWl4aW4vZXh0ZW5kcyBwcm9wc1xuICAgIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5kRW1pdHMgPSAocmF3KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRnJvbUV4dGVuZCA9IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyhyYXcsIGFwcENvbnRleHQsIHRydWUpO1xuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRGcm9tRXh0ZW5kKSB7XG4gICAgICAgICAgICAgICAgaGFzRXh0ZW5kcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIG5vcm1hbGl6ZWRGcm9tRXh0ZW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRFbWl0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXAuZXh0ZW5kcykge1xuICAgICAgICAgICAgZXh0ZW5kRW1pdHMoY29tcC5leHRlbmRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5taXhpbnMpIHtcbiAgICAgICAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kRW1pdHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XG4gICAgICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgICAgICAgY2FjaGUuc2V0KGNvbXAsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgICAgIHJhdy5mb3JFYWNoKGtleSA9PiAobm9ybWFsaXplZFtrZXldID0gbnVsbCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIHJhdyk7XG4gICAgfVxuICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgICBjYWNoZS5zZXQoY29tcCwgbm9ybWFsaXplZCk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVkO1xufVxuLy8gQ2hlY2sgaWYgYW4gaW5jb21pbmcgcHJvcCBrZXkgaXMgYSBkZWNsYXJlZCBlbWl0IGV2ZW50IGxpc3RlbmVyLlxuLy8gZS5nLiBXaXRoIGBlbWl0czogeyBjbGljazogbnVsbCB9YCwgcHJvcHMgbmFtZWQgYG9uQ2xpY2tgIGFuZCBgb25jbGlja2AgYXJlXG4vLyBib3RoIGNvbnNpZGVyZWQgbWF0Y2hlZCBsaXN0ZW5lcnMuXG5mdW5jdGlvbiBpc0VtaXRMaXN0ZW5lcihvcHRpb25zLCBrZXkpIHtcbiAgICBpZiAoIW9wdGlvbnMgfHwgIWlzT24oa2V5KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGtleSA9IGtleS5zbGljZSgyKS5yZXBsYWNlKC9PbmNlJC8sICcnKTtcbiAgICByZXR1cm4gKGhhc093bihvcHRpb25zLCBrZXlbMF0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgxKSkgfHxcbiAgICAgICAgaGFzT3duKG9wdGlvbnMsIGh5cGhlbmF0ZShrZXkpKSB8fFxuICAgICAgICBoYXNPd24ob3B0aW9ucywga2V5KSk7XG59XG5cbi8qKlxuICogbWFyayB0aGUgY3VycmVudCByZW5kZXJpbmcgaW5zdGFuY2UgZm9yIGFzc2V0IHJlc29sdXRpb24gKGUuZy5cbiAqIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUpIGR1cmluZyByZW5kZXJcbiAqL1xubGV0IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IG51bGw7XG5sZXQgY3VycmVudFNjb3BlSWQgPSBudWxsO1xuLyoqXG4gKiBOb3RlOiByZW5kZXJpbmcgY2FsbHMgbWF5YmUgbmVzdGVkLiBUaGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgcGFyZW50IHJlbmRlcmluZ1xuICogaW5zdGFuY2UgaWYgcHJlc2VudCwgd2hpY2ggc2hvdWxkIGJlIHJlc3RvcmVkIGFmdGVyIHRoZSByZW5kZXIgaXMgZG9uZTpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgcHJldiA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpKVxuICogLy8gLi4ucmVuZGVyXG4gKiBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UocHJldilcbiAqIGBgYFxuICovXG5mdW5jdGlvbiBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBwcmV2ID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuICAgIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgIGN1cnJlbnRTY29wZUlkID0gKGluc3RhbmNlICYmIGluc3RhbmNlLnR5cGUuX19zY29wZUlkKSB8fCBudWxsO1xuICAgIHJldHVybiBwcmV2O1xufVxuLyoqXG4gKiBTZXQgc2NvcGUgaWQgd2hlbiBjcmVhdGluZyBob2lzdGVkIHZub2Rlcy5cbiAqIEBwcml2YXRlIGNvbXBpbGVyIGhlbHBlclxuICovXG5mdW5jdGlvbiBwdXNoU2NvcGVJZChpZCkge1xuICAgIGN1cnJlbnRTY29wZUlkID0gaWQ7XG59XG4vKipcbiAqIFRlY2huaWNhbGx5IHdlIG5vIGxvbmdlciBuZWVkIHRoaXMgYWZ0ZXIgMy4wLjggYnV0IHdlIG5lZWQgdG8ga2VlcCB0aGUgc2FtZVxuICogQVBJIGZvciBiYWNrd2FyZHMgY29tcGF0IHcvIGNvZGUgZ2VuZXJhdGVkIGJ5IGNvbXBpbGVycy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBvcFNjb3BlSWQoKSB7XG4gICAgY3VycmVudFNjb3BlSWQgPSBudWxsO1xufVxuLyoqXG4gKiBPbmx5IGZvciBiYWNrd2FyZHMgY29tcGF0XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCB3aXRoU2NvcGVJZCA9IChfaWQpID0+IHdpdGhDdHg7XG4vKipcbiAqIFdyYXAgYSBzbG90IGZ1bmN0aW9uIHRvIG1lbW9pemUgY3VycmVudCByZW5kZXJpbmcgaW5zdGFuY2VcbiAqIEBwcml2YXRlIGNvbXBpbGVyIGhlbHBlclxuICovXG5mdW5jdGlvbiB3aXRoQ3R4KGZuLCBjdHggPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIGlzTm9uU2NvcGVkU2xvdCAvLyBmYWxzZSBvbmx5XG4pIHtcbiAgICBpZiAoIWN0eClcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIC8vIGFscmVhZHkgbm9ybWFsaXplZFxuICAgIGlmIChmbi5fbikge1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlckZuV2l0aENvbnRleHQgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAvLyBJZiBhIHVzZXIgY2FsbHMgYSBjb21waWxlZCBzbG90IGluc2lkZSBhIHRlbXBsYXRlIGV4cHJlc3Npb24gKCMxNzQ1KSwgaXRcbiAgICAgICAgLy8gY2FuIG1lc3MgdXAgYmxvY2sgdHJhY2tpbmcsIHNvIGJ5IGRlZmF1bHQgd2UgZGlzYWJsZSBibG9jayB0cmFja2luZyBhbmRcbiAgICAgICAgLy8gZm9yY2UgYmFpbCBvdXQgd2hlbiBpbnZva2luZyBhIGNvbXBpbGVkIHNsb3QgKGluZGljYXRlZCBieSB0aGUgLl9kIGZsYWcpLlxuICAgICAgICAvLyBUaGlzIGlzbid0IG5lY2Vzc2FyeSBpZiByZW5kZXJpbmcgYSBjb21waWxlZCBgPHNsb3Q+YCwgc28gd2UgZmxpcCB0aGVcbiAgICAgICAgLy8gLl9kIGZsYWcgb2ZmIHdoZW4gaW52b2tpbmcgdGhlIHdyYXBwZWQgZm4gaW5zaWRlIGByZW5kZXJTbG90YC5cbiAgICAgICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcbiAgICAgICAgICAgIHNldEJsb2NrVHJhY2tpbmcoLTEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZJbnN0YW5jZSA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShjdHgpO1xuICAgICAgICBsZXQgcmVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzID0gZm4oLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UocHJldkluc3RhbmNlKTtcbiAgICAgICAgICAgIGlmIChyZW5kZXJGbldpdGhDb250ZXh0Ll9kKSB7XG4gICAgICAgICAgICAgICAgc2V0QmxvY2tUcmFja2luZygxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRVcGRhdGVkKGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIC8vIG1hcmsgbm9ybWFsaXplZCB0byBhdm9pZCBkdXBsaWNhdGVkIHdyYXBwaW5nXG4gICAgcmVuZGVyRm5XaXRoQ29udGV4dC5fbiA9IHRydWU7XG4gICAgLy8gbWFyayB0aGlzIGFzIGNvbXBpbGVkIGJ5IGRlZmF1bHRcbiAgICAvLyB0aGlzIGlzIHVzZWQgaW4gdm5vZGUudHMgLT4gbm9ybWFsaXplQ2hpbGRyZW4oKSB0byBzZXQgdGhlIHNsb3RcbiAgICAvLyByZW5kZXJpbmcgZmxhZy5cbiAgICByZW5kZXJGbldpdGhDb250ZXh0Ll9jID0gdHJ1ZTtcbiAgICAvLyBkaXNhYmxlIGJsb2NrIHRyYWNraW5nIGJ5IGRlZmF1bHRcbiAgICByZW5kZXJGbldpdGhDb250ZXh0Ll9kID0gdHJ1ZTtcbiAgICByZXR1cm4gcmVuZGVyRm5XaXRoQ29udGV4dDtcbn1cblxuLyoqXG4gKiBkZXYgb25seSBmbGFnIHRvIHRyYWNrIHdoZXRoZXIgJGF0dHJzIHdhcyB1c2VkIGR1cmluZyByZW5kZXIuXG4gKiBJZiAkYXR0cnMgd2FzIHVzZWQgZHVyaW5nIHJlbmRlciB0aGVuIHRoZSB3YXJuaW5nIGZvciBmYWlsZWQgYXR0cnNcbiAqIGZhbGx0aHJvdWdoIGNhbiBiZSBzdXBwcmVzc2VkLlxuICovXG5sZXQgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xuZnVuY3Rpb24gbWFya0F0dHJzQWNjZXNzZWQoKSB7XG4gICAgYWNjZXNzZWRBdHRycyA9IHRydWU7XG59XG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSB7XG4gICAgY29uc3QgeyB0eXBlOiBDb21wb25lbnQsIHZub2RlLCBwcm94eSwgd2l0aFByb3h5LCBwcm9wcywgcHJvcHNPcHRpb25zOiBbcHJvcHNPcHRpb25zXSwgc2xvdHMsIGF0dHJzLCBlbWl0LCByZW5kZXIsIHJlbmRlckNhY2hlLCBkYXRhLCBzZXR1cFN0YXRlLCBjdHgsIGluaGVyaXRBdHRycyB9ID0gaW5zdGFuY2U7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBsZXQgZmFsbHRocm91Z2hBdHRycztcbiAgICBjb25zdCBwcmV2ID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGluc3RhbmNlKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGFjY2Vzc2VkQXR0cnMgPSBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDQgLyogU2hhcGVGbGFncy5TVEFURUZVTF9DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgIC8vIHdpdGhQcm94eSBpcyBhIHByb3h5IHdpdGggYSBkaWZmZXJlbnQgYGhhc2AgdHJhcCBvbmx5IGZvclxuICAgICAgICAgICAgLy8gcnVudGltZS1jb21waWxlZCByZW5kZXIgZnVuY3Rpb25zIHVzaW5nIGB3aXRoYCBibG9jay5cbiAgICAgICAgICAgIGNvbnN0IHByb3h5VG9Vc2UgPSB3aXRoUHJveHkgfHwgcHJveHk7XG4gICAgICAgICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShyZW5kZXIuY2FsbChwcm94eVRvVXNlLCBwcm94eVRvVXNlLCByZW5kZXJDYWNoZSwgcHJvcHMsIHNldHVwU3RhdGUsIGRhdGEsIGN0eCkpO1xuICAgICAgICAgICAgZmFsbHRocm91Z2hBdHRycyA9IGF0dHJzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb25hbFxuICAgICAgICAgICAgY29uc3QgcmVuZGVyID0gQ29tcG9uZW50O1xuICAgICAgICAgICAgLy8gaW4gZGV2LCBtYXJrIGF0dHJzIGFjY2Vzc2VkIGlmIG9wdGlvbmFsIHByb3BzIChhdHRycyA9PT0gcHJvcHMpXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGF0dHJzID09PSBwcm9wcykge1xuICAgICAgICAgICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShyZW5kZXIubGVuZ3RoID4gMVxuICAgICAgICAgICAgICAgID8gcmVuZGVyKHByb3BzLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgYXR0cnMoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya0F0dHJzQWNjZXNzZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cnM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xvdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7IGF0dHJzLCBzbG90cywgZW1pdCB9KVxuICAgICAgICAgICAgICAgIDogcmVuZGVyKHByb3BzLCBudWxsIC8qIHdlIGtub3cgaXQgZG9lc24ndCBuZWVkIGl0ICovKSk7XG4gICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gQ29tcG9uZW50LnByb3BzXG4gICAgICAgICAgICAgICAgPyBhdHRyc1xuICAgICAgICAgICAgICAgIDogZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoKGF0dHJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGJsb2NrU3RhY2subGVuZ3RoID0gMDtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMSAvKiBFcnJvckNvZGVzLlJFTkRFUl9GVU5DVElPTiAqLyk7XG4gICAgICAgIHJlc3VsdCA9IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xuICAgIH1cbiAgICAvLyBhdHRyIG1lcmdpbmdcbiAgICAvLyBpbiBkZXYgbW9kZSwgY29tbWVudHMgYXJlIHByZXNlcnZlZCwgYW5kIGl0J3MgcG9zc2libGUgZm9yIGEgdGVtcGxhdGVcbiAgICAvLyB0byBoYXZlIGNvbW1lbnRzIGFsb25nIHNpZGUgdGhlIHJvb3QgZWxlbWVudCB3aGljaCBtYWtlcyBpdCBhIGZyYWdtZW50XG4gICAgbGV0IHJvb3QgPSByZXN1bHQ7XG4gICAgbGV0IHNldFJvb3QgPSB1bmRlZmluZWQ7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICByZXN1bHQucGF0Y2hGbGFnID4gMCAmJlxuICAgICAgICByZXN1bHQucGF0Y2hGbGFnICYgMjA0OCAvKiBQYXRjaEZsYWdzLkRFVl9ST09UX0ZSQUdNRU5UICovKSB7XG4gICAgICAgIFtyb290LCBzZXRSb290XSA9IGdldENoaWxkUm9vdChyZXN1bHQpO1xuICAgIH1cbiAgICBpZiAoZmFsbHRocm91Z2hBdHRycyAmJiBpbmhlcml0QXR0cnMgIT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmYWxsdGhyb3VnaEF0dHJzKTtcbiAgICAgICAgY29uc3QgeyBzaGFwZUZsYWcgfSA9IHJvb3Q7XG4gICAgICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmICgxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyB8IDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzT3B0aW9ucyAmJiBrZXlzLnNvbWUoaXNNb2RlbExpc3RlbmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIHYtbW9kZWwgbGlzdGVuZXIgKG9uVXBkYXRlOnh4eCkgaGFzIGEgY29ycmVzcG9uZGluZyBkZWNsYXJlZFxuICAgICAgICAgICAgICAgICAgICAvLyBwcm9wLCBpdCBpbmRpY2F0ZXMgdGhpcyBjb21wb25lbnQgZXhwZWN0cyB0byBoYW5kbGUgdi1tb2RlbCBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgc2hvdWxkIG5vdCBmYWxsdGhyb3VnaC5cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsYXRlZDogIzE1NDMsICMxNjQzLCAjMTk4OVxuICAgICAgICAgICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gZmlsdGVyTW9kZWxMaXN0ZW5lcnMoZmFsbHRocm91Z2hBdHRycywgcHJvcHNPcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm9vdCA9IGNsb25lVk5vZGUocm9vdCwgZmFsbHRocm91Z2hBdHRycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWFjY2Vzc2VkQXR0cnMgJiYgcm9vdC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsQXR0cnMgPSBPYmplY3Qua2V5cyhhdHRycyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRBdHRycyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJhQXR0cnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFsbEF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhbGxBdHRyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzT24oa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIHYtbW9kZWwgaGFuZGxlcnMgd2hlbiB0aGV5IGZhaWwgdG8gZmFsbHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgYG9uYCwgbG93ZXJjYXNlIGZpcnN0IGxldHRlciB0byByZWZsZWN0IGV2ZW50IGNhc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY3VyYXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudEF0dHJzLnB1c2goa2V5WzJdLnRvTG93ZXJDYXNlKCkgKyBrZXkuc2xpY2UoMykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRycy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhQXR0cnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEV4dHJhbmVvdXMgbm9uLXByb3BzIGF0dHJpYnV0ZXMgKGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZXh0cmFBdHRycy5qb2luKCcsICcpfSkgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgd2VyZSBwYXNzZWQgdG8gY29tcG9uZW50IGJ1dCBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBpbmhlcml0ZWQgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IHJvb3Qgbm9kZXMuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudEF0dHJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBFeHRyYW5lb3VzIG5vbi1lbWl0cyBldmVudCBsaXN0ZW5lcnMgKGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZXZlbnRBdHRycy5qb2luKCcsICcpfSkgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgd2VyZSBwYXNzZWQgdG8gY29tcG9uZW50IGJ1dCBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBpbmhlcml0ZWQgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IHJvb3Qgbm9kZXMuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYElmIHRoZSBsaXN0ZW5lciBpcyBpbnRlbmRlZCB0byBiZSBhIGNvbXBvbmVudCBjdXN0b20gZXZlbnQgbGlzdGVuZXIgb25seSwgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgZGVjbGFyZSBpdCB1c2luZyB0aGUgXCJlbWl0c1wiIG9wdGlvbi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gaW5oZXJpdCBkaXJlY3RpdmVzXG4gICAgaWYgKHZub2RlLmRpcnMpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xuICAgICAgICAgICAgd2FybihgUnVudGltZSBkaXJlY3RpdmUgdXNlZCBvbiBjb21wb25lbnQgd2l0aCBub24tZWxlbWVudCByb290IG5vZGUuIGAgK1xuICAgICAgICAgICAgICAgIGBUaGUgZGlyZWN0aXZlcyB3aWxsIG5vdCBmdW5jdGlvbiBhcyBpbnRlbmRlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbG9uZSBiZWZvcmUgbXV0YXRpbmcgc2luY2UgdGhlIHJvb3QgbWF5IGJlIGEgaG9pc3RlZCB2bm9kZVxuICAgICAgICByb290ID0gY2xvbmVWTm9kZShyb290KTtcbiAgICAgICAgcm9vdC5kaXJzID0gcm9vdC5kaXJzID8gcm9vdC5kaXJzLmNvbmNhdCh2bm9kZS5kaXJzKSA6IHZub2RlLmRpcnM7XG4gICAgfVxuICAgIC8vIGluaGVyaXQgdHJhbnNpdGlvbiBkYXRhXG4gICAgaWYgKHZub2RlLnRyYW5zaXRpb24pIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xuICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IGluc2lkZSA8VHJhbnNpdGlvbj4gcmVuZGVycyBub24tZWxlbWVudCByb290IG5vZGUgYCArXG4gICAgICAgICAgICAgICAgYHRoYXQgY2Fubm90IGJlIGFuaW1hdGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIHJvb3QudHJhbnNpdGlvbiA9IHZub2RlLnRyYW5zaXRpb247XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgc2V0Um9vdCkge1xuICAgICAgICBzZXRSb290KHJvb3QpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gcm9vdDtcbiAgICB9XG4gICAgc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKHByZXYpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIGRldiBvbmx5XG4gKiBJbiBkZXYgbW9kZSwgdGVtcGxhdGUgcm9vdCBsZXZlbCBjb21tZW50cyBhcmUgcmVuZGVyZWQsIHdoaWNoIHR1cm5zIHRoZVxuICogdGVtcGxhdGUgaW50byBhIGZyYWdtZW50IHJvb3QsIGJ1dCB3ZSBuZWVkIHRvIGxvY2F0ZSB0aGUgc2luZ2xlIGVsZW1lbnRcbiAqIHJvb3QgZm9yIGF0dHJzIGFuZCBzY29wZSBpZCBwcm9jZXNzaW5nLlxuICovXG5jb25zdCBnZXRDaGlsZFJvb3QgPSAodm5vZGUpID0+IHtcbiAgICBjb25zdCByYXdDaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICAgIGNvbnN0IGR5bmFtaWNDaGlsZHJlbiA9IHZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICBjb25zdCBjaGlsZFJvb3QgPSBmaWx0ZXJTaW5nbGVSb290KHJhd0NoaWxkcmVuKTtcbiAgICBpZiAoIWNoaWxkUm9vdCkge1xuICAgICAgICByZXR1cm4gW3Zub2RlLCB1bmRlZmluZWRdO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHJhd0NoaWxkcmVuLmluZGV4T2YoY2hpbGRSb290KTtcbiAgICBjb25zdCBkeW5hbWljSW5kZXggPSBkeW5hbWljQ2hpbGRyZW4gPyBkeW5hbWljQ2hpbGRyZW4uaW5kZXhPZihjaGlsZFJvb3QpIDogLTE7XG4gICAgY29uc3Qgc2V0Um9vdCA9ICh1cGRhdGVkUm9vdCkgPT4ge1xuICAgICAgICByYXdDaGlsZHJlbltpbmRleF0gPSB1cGRhdGVkUm9vdDtcbiAgICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICAgICAgaWYgKGR5bmFtaWNJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuW2R5bmFtaWNJbmRleF0gPSB1cGRhdGVkUm9vdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVwZGF0ZWRSb290LnBhdGNoRmxhZyA+IDApIHtcbiAgICAgICAgICAgICAgICB2bm9kZS5keW5hbWljQ2hpbGRyZW4gPSBbLi4uZHluYW1pY0NoaWxkcmVuLCB1cGRhdGVkUm9vdF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBbbm9ybWFsaXplVk5vZGUoY2hpbGRSb290KSwgc2V0Um9vdF07XG59O1xuZnVuY3Rpb24gZmlsdGVyU2luZ2xlUm9vdChjaGlsZHJlbikge1xuICAgIGxldCBzaW5nbGVSb290O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgaWYgKGlzVk5vZGUoY2hpbGQpKSB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgdXNlciBjb21tZW50XG4gICAgICAgICAgICBpZiAoY2hpbGQudHlwZSAhPT0gQ29tbWVudCB8fCBjaGlsZC5jaGlsZHJlbiA9PT0gJ3YtaWYnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNpbmdsZVJvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFzIG1vcmUgdGhhbiAxIG5vbi1jb21tZW50IGNoaWxkLCByZXR1cm4gbm93XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZVJvb3QgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNpbmdsZVJvb3Q7XG59XG5jb25zdCBnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2ggPSAoYXR0cnMpID0+IHtcbiAgICBsZXQgcmVzO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdjbGFzcycgfHwga2V5ID09PSAnc3R5bGUnIHx8IGlzT24oa2V5KSkge1xuICAgICAgICAgICAgKHJlcyB8fCAocmVzID0ge30pKVtrZXldID0gYXR0cnNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbmNvbnN0IGZpbHRlck1vZGVsTGlzdGVuZXJzID0gKGF0dHJzLCBwcm9wcykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkgfHwgIShrZXkuc2xpY2UoOSkgaW4gcHJvcHMpKSB7XG4gICAgICAgICAgICByZXNba2V5XSA9IGF0dHJzW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn07XG5jb25zdCBpc0VsZW1lbnRSb290ID0gKHZub2RlKSA9PiB7XG4gICAgcmV0dXJuICh2bm9kZS5zaGFwZUZsYWcgJiAoNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLyB8IDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovKSB8fFxuICAgICAgICB2bm9kZS50eXBlID09PSBDb21tZW50IC8vIHBvdGVudGlhbCB2LWlmIGJyYW5jaCBzd2l0Y2hcbiAgICApO1xufTtcbmZ1bmN0aW9uIHNob3VsZFVwZGF0ZUNvbXBvbmVudChwcmV2Vk5vZGUsIG5leHRWTm9kZSwgb3B0aW1pemVkKSB7XG4gICAgY29uc3QgeyBwcm9wczogcHJldlByb3BzLCBjaGlsZHJlbjogcHJldkNoaWxkcmVuLCBjb21wb25lbnQgfSA9IHByZXZWTm9kZTtcbiAgICBjb25zdCB7IHByb3BzOiBuZXh0UHJvcHMsIGNoaWxkcmVuOiBuZXh0Q2hpbGRyZW4sIHBhdGNoRmxhZyB9ID0gbmV4dFZOb2RlO1xuICAgIGNvbnN0IGVtaXRzID0gY29tcG9uZW50LmVtaXRzT3B0aW9ucztcbiAgICAvLyBQYXJlbnQgY29tcG9uZW50J3MgcmVuZGVyIGZ1bmN0aW9uIHdhcyBob3QtdXBkYXRlZC4gU2luY2UgdGhpcyBtYXkgaGF2ZVxuICAgIC8vIGNhdXNlZCB0aGUgY2hpbGQgY29tcG9uZW50J3Mgc2xvdHMgY29udGVudCB0byBoYXZlIGNoYW5nZWQsIHdlIG5lZWQgdG9cbiAgICAvLyBmb3JjZSB0aGUgY2hpbGQgdG8gdXBkYXRlIGFzIHdlbGwuXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAocHJldkNoaWxkcmVuIHx8IG5leHRDaGlsZHJlbikgJiYgaXNIbXJVcGRhdGluZykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZm9yY2UgY2hpbGQgdXBkYXRlIGZvciBydW50aW1lIGRpcmVjdGl2ZSBvciB0cmFuc2l0aW9uIG9uIGNvbXBvbmVudCB2bm9kZS5cbiAgICBpZiAobmV4dFZOb2RlLmRpcnMgfHwgbmV4dFZOb2RlLnRyYW5zaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChvcHRpbWl6ZWQgJiYgcGF0Y2hGbGFnID49IDApIHtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDEwMjQgLyogUGF0Y2hGbGFncy5EWU5BTUlDX1NMT1RTICovKSB7XG4gICAgICAgICAgICAvLyBzbG90IGNvbnRlbnQgdGhhdCByZWZlcmVuY2VzIHZhbHVlcyB0aGF0IG1pZ2h0IGhhdmUgY2hhbmdlZCxcbiAgICAgICAgICAgIC8vIGUuZy4gaW4gYSB2LWZvclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqLykge1xuICAgICAgICAgICAgaWYgKCFwcmV2UHJvcHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFuZXh0UHJvcHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcmVzZW5jZSBvZiB0aGlzIGZsYWcgaW5kaWNhdGVzIHByb3BzIGFyZSBhbHdheXMgbm9uLW51bGxcbiAgICAgICAgICAgIHJldHVybiBoYXNQcm9wc0NoYW5nZWQocHJldlByb3BzLCBuZXh0UHJvcHMsIGVtaXRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXRjaEZsYWcgJiA4IC8qIFBhdGNoRmxhZ3MuUFJPUFMgKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IGR5bmFtaWNQcm9wcyA9IG5leHRWTm9kZS5keW5hbWljUHJvcHM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNQcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGR5bmFtaWNQcm9wc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFByb3BzW2tleV0gIT09IHByZXZQcm9wc1trZXldICYmXG4gICAgICAgICAgICAgICAgICAgICFpc0VtaXRMaXN0ZW5lcihlbWl0cywga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHRoaXMgcGF0aCBpcyBvbmx5IHRha2VuIGJ5IG1hbnVhbGx5IHdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9uc1xuICAgICAgICAvLyBzbyBwcmVzZW5jZSBvZiBhbnkgY2hpbGRyZW4gbGVhZHMgdG8gYSBmb3JjZWQgdXBkYXRlXG4gICAgICAgIGlmIChwcmV2Q2hpbGRyZW4gfHwgbmV4dENoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoIW5leHRDaGlsZHJlbiB8fCAhbmV4dENoaWxkcmVuLiRzdGFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldlByb3BzID09PSBuZXh0UHJvcHMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByZXZQcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuICEhbmV4dFByb3BzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbmV4dFByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0cyk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHNPcHRpb25zKSB7XG4gICAgY29uc3QgbmV4dEtleXMgPSBPYmplY3Qua2V5cyhuZXh0UHJvcHMpO1xuICAgIGlmIChuZXh0S2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKHByZXZQcm9wcykubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5leHRLZXlzW2ldO1xuICAgICAgICBpZiAobmV4dFByb3BzW2tleV0gIT09IHByZXZQcm9wc1trZXldICYmXG4gICAgICAgICAgICAhaXNFbWl0TGlzdGVuZXIoZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiB1cGRhdGVIT0NIb3N0RWwoeyB2bm9kZSwgcGFyZW50IH0sIGVsIC8vIEhvc3ROb2RlXG4pIHtcbiAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5zdWJUcmVlID09PSB2bm9kZSkge1xuICAgICAgICAodm5vZGUgPSBwYXJlbnQudm5vZGUpLmVsID0gZWw7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgfVxufVxuXG5jb25zdCBpc1N1c3BlbnNlID0gKHR5cGUpID0+IHR5cGUuX19pc1N1c3BlbnNlO1xuLy8gU3VzcGVuc2UgZXhwb3NlcyBhIGNvbXBvbmVudC1saWtlIEFQSSwgYW5kIGlzIHRyZWF0ZWQgbGlrZSBhIGNvbXBvbmVudFxuLy8gaW4gdGhlIGNvbXBpbGVyLCBidXQgaW50ZXJuYWxseSBpdCdzIGEgc3BlY2lhbCBidWlsdC1pbiB0eXBlIHRoYXQgaG9va3Ncbi8vIGRpcmVjdGx5IGludG8gdGhlIHJlbmRlcmVyLlxuY29uc3QgU3VzcGVuc2VJbXBsID0ge1xuICAgIG5hbWU6ICdTdXNwZW5zZScsXG4gICAgLy8gSW4gb3JkZXIgdG8gbWFrZSBTdXNwZW5zZSB0cmVlLXNoYWthYmxlLCB3ZSBuZWVkIHRvIGF2b2lkIGltcG9ydGluZyBpdFxuICAgIC8vIGRpcmVjdGx5IGluIHRoZSByZW5kZXJlci4gVGhlIHJlbmRlcmVyIGNoZWNrcyBmb3IgdGhlIF9faXNTdXNwZW5zZSBmbGFnXG4gICAgLy8gb24gYSB2bm9kZSdzIHR5cGUgYW5kIGNhbGxzIHRoZSBgcHJvY2Vzc2AgbWV0aG9kLCBwYXNzaW5nIGluIHJlbmRlcmVyXG4gICAgLy8gaW50ZXJuYWxzLlxuICAgIF9faXNTdXNwZW5zZTogdHJ1ZSxcbiAgICBwcm9jZXNzKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgXG4gICAgLy8gcGxhdGZvcm0tc3BlY2lmaWMgaW1wbCBwYXNzZWQgZnJvbSByZW5kZXJlclxuICAgIHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBtb3VudFN1c3BlbnNlKG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXRjaFN1c3BlbnNlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGh5ZHJhdGU6IGh5ZHJhdGVTdXNwZW5zZSxcbiAgICBjcmVhdGU6IGNyZWF0ZVN1c3BlbnNlQm91bmRhcnksXG4gICAgbm9ybWFsaXplOiBub3JtYWxpemVTdXNwZW5zZUNoaWxkcmVuXG59O1xuLy8gRm9yY2UtY2FzdGVkIHB1YmxpYyB0eXBpbmcgZm9yIGggYW5kIFRTWCBwcm9wcyBpbmZlcmVuY2VcbmNvbnN0IFN1c3BlbnNlID0gKFN1c3BlbnNlSW1wbFxuICAgICk7XG5mdW5jdGlvbiB0cmlnZ2VyRXZlbnQodm5vZGUsIG5hbWUpIHtcbiAgICBjb25zdCBldmVudExpc3RlbmVyID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHNbbmFtZV07XG4gICAgaWYgKGlzRnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikpIHtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcigpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1vdW50U3VzcGVuc2Uodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gICAgY29uc3QgeyBwOiBwYXRjaCwgbzogeyBjcmVhdGVFbGVtZW50IH0gfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xuICAgIGNvbnN0IGhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHN1c3BlbnNlID0gKHZub2RlLnN1c3BlbnNlID0gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSh2bm9kZSwgcGFyZW50U3VzcGVuc2UsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyLCBoaWRkZW5Db250YWluZXIsIGFuY2hvciwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscykpO1xuICAgIC8vIHN0YXJ0IG1vdW50aW5nIHRoZSBjb250ZW50IHN1YnRyZWUgaW4gYW4gb2ZmLWRvbSBjb250YWluZXJcbiAgICBwYXRjaChudWxsLCAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCksIGhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcyk7XG4gICAgLy8gbm93IGNoZWNrIGlmIHdlIGhhdmUgZW5jb3VudGVyZWQgYW55IGFzeW5jIGRlcHNcbiAgICBpZiAoc3VzcGVuc2UuZGVwcyA+IDApIHtcbiAgICAgICAgLy8gaGFzIGFzeW5jXG4gICAgICAgIC8vIGludm9rZSBAZmFsbGJhY2sgZXZlbnRcbiAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25QZW5kaW5nJyk7XG4gICAgICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgJ29uRmFsbGJhY2snKTtcbiAgICAgICAgLy8gbW91bnQgdGhlIGZhbGxiYWNrIHRyZWVcbiAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUuc3NGYWxsYmFjaywgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgaXNTVkcsIHNsb3RTY29wZUlkcyk7XG4gICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgdm5vZGUuc3NGYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBTdXNwZW5zZSBoYXMgbm8gYXN5bmMgZGVwcy4gSnVzdCByZXNvbHZlLlxuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGF0Y2hTdXNwZW5zZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgeyBwOiBwYXRjaCwgdW06IHVubW91bnQsIG86IHsgY3JlYXRlRWxlbWVudCB9IH0pIHtcbiAgICBjb25zdCBzdXNwZW5zZSA9IChuMi5zdXNwZW5zZSA9IG4xLnN1c3BlbnNlKTtcbiAgICBzdXNwZW5zZS52bm9kZSA9IG4yO1xuICAgIG4yLmVsID0gbjEuZWw7XG4gICAgY29uc3QgbmV3QnJhbmNoID0gbjIuc3NDb250ZW50O1xuICAgIGNvbnN0IG5ld0ZhbGxiYWNrID0gbjIuc3NGYWxsYmFjaztcbiAgICBjb25zdCB7IGFjdGl2ZUJyYW5jaCwgcGVuZGluZ0JyYW5jaCwgaXNJbkZhbGxiYWNrLCBpc0h5ZHJhdGluZyB9ID0gc3VzcGVuc2U7XG4gICAgaWYgKHBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG5ld0JyYW5jaDtcbiAgICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIHBlbmRpbmdCcmFuY2gpKSB7XG4gICAgICAgICAgICAvLyBzYW1lIHJvb3QgdHlwZSBidXQgY29udGVudCBtYXkgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgICAgcGF0Y2gocGVuZGluZ0JyYW5jaCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcGF0Y2goYWN0aXZlQnJhbmNoLCBuZXdGYWxsYmFjaywgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3RmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdG9nZ2xlZCBiZWZvcmUgcGVuZGluZyB0cmVlIGlzIHJlc29sdmVkXG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nSWQrKztcbiAgICAgICAgICAgIGlmIChpc0h5ZHJhdGluZykge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRvZ2dsZWQgYmVmb3JlIGh5ZHJhdGlvbiBpcyBmaW5pc2hlZCwgdGhlIGN1cnJlbnQgRE9NIHRyZWUgaXNcbiAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgdmFsaWQuIHNldCBpdCBhcyB0aGUgYWN0aXZlIGJyYW5jaCBzbyBpdCB3aWxsIGJlIHVubW91bnRlZFxuICAgICAgICAgICAgICAgIC8vIHdoZW4gcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5pc0h5ZHJhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCA9IHBlbmRpbmdCcmFuY2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KHBlbmRpbmdCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaW5jcmVtZW50IHBlbmRpbmcgSUQuIHRoaXMgaXMgdXNlZCB0byBpbnZhbGlkYXRlIGFzeW5jIGNhbGxiYWNrc1xuICAgICAgICAgICAgLy8gcmVzZXQgc3VzcGVuc2Ugc3RhdGVcbiAgICAgICAgICAgIHN1c3BlbnNlLmRlcHMgPSAwO1xuICAgICAgICAgICAgLy8gZGlzY2FyZCBlZmZlY3RzIGZyb20gcGVuZGluZyBicmFuY2hcbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIC8vIGRpc2NhcmQgcHJldmlvdXMgY29udGFpbmVyXG4gICAgICAgICAgICBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGlmIChpc0luRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGluIGZhbGxiYWNrIHN0YXRlXG4gICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0ZhbGxiYWNrLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgICAgICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhY3RpdmVCcmFuY2ggJiYgaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgYWN0aXZlQnJhbmNoKSkge1xuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZWQgXCJiYWNrXCIgdG8gY3VycmVudCBhY3RpdmUgYnJhbmNoXG4gICAgICAgICAgICAgICAgcGF0Y2goYWN0aXZlQnJhbmNoLCBuZXdCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHJlc29sdmVcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gc3dpdGNoZWQgdG8gYSAzcmQgYnJhbmNoXG4gICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoYWN0aXZlQnJhbmNoICYmIGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIGFjdGl2ZUJyYW5jaCkpIHtcbiAgICAgICAgICAgIC8vIHJvb3QgZGlkIG5vdCBjaGFuZ2UsIGp1c3Qgbm9ybWFsIHBhdGNoXG4gICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0JyYW5jaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyByb290IG5vZGUgdG9nZ2xlZFxuICAgICAgICAgICAgLy8gaW52b2tlIEBwZW5kaW5nIGV2ZW50XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQobjIsICdvblBlbmRpbmcnKTtcbiAgICAgICAgICAgIC8vIG1vdW50IHBlbmRpbmcgYnJhbmNoIGluIG9mZi1kb20gY29udGFpbmVyXG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xuICAgICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0lkKys7XG4gICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgICAgICAgICAvLyBpbmNvbWluZyBicmFuY2ggaGFzIG5vIGFzeW5jIGRlcHMsIHJlc29sdmUgbm93LlxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdGltZW91dCwgcGVuZGluZ0lkIH0gPSBzdXNwZW5zZTtcbiAgICAgICAgICAgICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UucGVuZGluZ0lkID09PSBwZW5kaW5nSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5mYWxsYmFjayhuZXdGYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aW1lb3V0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgaGFzV2FybmVkID0gZmFsc2U7XG5mdW5jdGlvbiBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnQsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyLCBoaWRkZW5Db250YWluZXIsIGFuY2hvciwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgaXNIeWRyYXRpbmcgPSBmYWxzZSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWZhbHNlICYmICFoYXNXYXJuZWQpIHtcbiAgICAgICAgaGFzV2FybmVkID0gdHJ1ZTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBgY29uc29sZS5pbmZvYCBjYW5ub3QgYmUgbnVsbCBlcnJvclxuICAgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXShgPFN1c3BlbnNlPiBpcyBhbiBleHBlcmltZW50YWwgZmVhdHVyZSBhbmQgaXRzIEFQSSB3aWxsIGxpa2VseSBjaGFuZ2UuYCk7XG4gICAgfVxuICAgIGNvbnN0IHsgcDogcGF0Y2gsIG06IG1vdmUsIHVtOiB1bm1vdW50LCBuOiBuZXh0LCBvOiB7IHBhcmVudE5vZGUsIHJlbW92ZSB9IH0gPSByZW5kZXJlckludGVybmFscztcbiAgICBjb25zdCB0aW1lb3V0ID0gdG9OdW1iZXIodm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudGltZW91dCk7XG4gICAgY29uc3Qgc3VzcGVuc2UgPSB7XG4gICAgICAgIHZub2RlLFxuICAgICAgICBwYXJlbnQsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgaXNTVkcsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgaGlkZGVuQ29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIGRlcHM6IDAsXG4gICAgICAgIHBlbmRpbmdJZDogMCxcbiAgICAgICAgdGltZW91dDogdHlwZW9mIHRpbWVvdXQgPT09ICdudW1iZXInID8gdGltZW91dCA6IC0xLFxuICAgICAgICBhY3RpdmVCcmFuY2g6IG51bGwsXG4gICAgICAgIHBlbmRpbmdCcmFuY2g6IG51bGwsXG4gICAgICAgIGlzSW5GYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgaXNIeWRyYXRpbmcsXG4gICAgICAgIGlzVW5tb3VudGVkOiBmYWxzZSxcbiAgICAgICAgZWZmZWN0czogW10sXG4gICAgICAgIHJlc29sdmUocmVzdW1lID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VtZSAmJiAhc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHN1c3BlbnNlLnJlc29sdmUoKSBpcyBjYWxsZWQgd2l0aG91dCBhIHBlbmRpbmcgYnJhbmNoLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UuaXNVbm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzdXNwZW5zZS5yZXNvbHZlKCkgaXMgY2FsbGVkIG9uIGFuIGFscmVhZHkgdW5tb3VudGVkIHN1c3BlbnNlIGJvdW5kYXJ5LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgdm5vZGUsIGFjdGl2ZUJyYW5jaCwgcGVuZGluZ0JyYW5jaCwgcGVuZGluZ0lkLCBlZmZlY3RzLCBwYXJlbnRDb21wb25lbnQsIGNvbnRhaW5lciB9ID0gc3VzcGVuc2U7XG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UuaXNIeWRyYXRpbmcpIHtcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5pc0h5ZHJhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXJlc3VtZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGF5RW50ZXIgPSBhY3RpdmVCcmFuY2ggJiZcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdCcmFuY2gudHJhbnNpdGlvbi5tb2RlID09PSAnb3V0LWluJztcbiAgICAgICAgICAgICAgICBpZiAoZGVsYXlFbnRlcikge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVCcmFuY2gudHJhbnNpdGlvbi5hZnRlckxlYXZlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdJZCA9PT0gc3VzcGVuc2UucGVuZGluZ0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZShwZW5kaW5nQnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgMCAvKiBNb3ZlVHlwZS5FTlRFUiAqLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgaW5pdGlhbCBhbmNob3Igb24gbW91bnRcbiAgICAgICAgICAgICAgICBsZXQgeyBhbmNob3IgfSA9IHN1c3BlbnNlO1xuICAgICAgICAgICAgICAgIC8vIHVubW91bnQgY3VycmVudCBhY3RpdmUgdHJlZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGZhbGxiYWNrIHRyZWUgd2FzIG1vdW50ZWQsIGl0IG1heSBoYXZlIGJlZW4gbW92ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgcGFydCBvZiBhIHBhcmVudCBzdXNwZW5zZS4gZ2V0IHRoZSBsYXRlc3QgYW5jaG9yIGZvciBpbnNlcnRpb25cbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gbmV4dChhY3RpdmVCcmFuY2gpO1xuICAgICAgICAgICAgICAgICAgICB1bm1vdW50KGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZGVsYXlFbnRlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGNvbnRlbnQgZnJvbSBvZmYtZG9tIGNvbnRhaW5lciB0byBhY3R1YWwgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgIG1vdmUocGVuZGluZ0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIDAgLyogTW92ZVR5cGUuRU5URVIgKi8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgcGVuZGluZ0JyYW5jaCk7XG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbnVsbDtcbiAgICAgICAgICAgIHN1c3BlbnNlLmlzSW5GYWxsYmFjayA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gZmx1c2ggYnVmZmVyZWQgZWZmZWN0c1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgYSBwZW5kaW5nIHBhcmVudCBzdXNwZW5zZVxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHN1c3BlbnNlLnBhcmVudDtcbiAgICAgICAgICAgIGxldCBoYXNVbnJlc29sdmVkQW5jZXN0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYSBwZW5kaW5nIHBhcmVudCBzdXNwZW5zZSwgbWVyZ2UgYnVmZmVyZWQgcG9zdCBqb2JzXG4gICAgICAgICAgICAgICAgICAgIC8vIGludG8gdGhhdCBwYXJlbnRcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmVmZmVjdHMucHVzaCguLi5lZmZlY3RzKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzVW5yZXNvbHZlZEFuY2VzdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBubyBwZW5kaW5nIHBhcmVudCBzdXNwZW5zZSwgZmx1c2ggYWxsIGpvYnNcbiAgICAgICAgICAgIGlmICghaGFzVW5yZXNvbHZlZEFuY2VzdG9yKSB7XG4gICAgICAgICAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihlZmZlY3RzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMgPSBbXTtcbiAgICAgICAgICAgIC8vIGludm9rZSBAcmVzb2x2ZSBldmVudFxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25SZXNvbHZlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGZhbGxiYWNrKGZhbGxiYWNrVk5vZGUpIHtcbiAgICAgICAgICAgIGlmICghc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgdm5vZGUsIGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGlzU1ZHIH0gPSBzdXNwZW5zZTtcbiAgICAgICAgICAgIC8vIGludm9rZSBAZmFsbGJhY2sgZXZlbnRcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgJ29uRmFsbGJhY2snKTtcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IG5leHQoYWN0aXZlQnJhbmNoKTtcbiAgICAgICAgICAgIGNvbnN0IG1vdW50RmFsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdXNwZW5zZS5pc0luRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBtb3VudCB0aGUgZmFsbGJhY2sgdHJlZVxuICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIGZhbGxiYWNrVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIG51bGwsIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICAgICAgICAgICAgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIGZhbGxiYWNrVk5vZGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5RW50ZXIgPSBmYWxsYmFja1ZOb2RlLnRyYW5zaXRpb24gJiYgZmFsbGJhY2tWTm9kZS50cmFuc2l0aW9uLm1vZGUgPT09ICdvdXQtaW4nO1xuICAgICAgICAgICAgaWYgKGRlbGF5RW50ZXIpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVCcmFuY2gudHJhbnNpdGlvbi5hZnRlckxlYXZlID0gbW91bnRGYWxsYmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1c3BlbnNlLmlzSW5GYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICAvLyB1bm1vdW50IGN1cnJlbnQgYWN0aXZlIGJyYW5jaFxuICAgICAgICAgICAgdW5tb3VudChhY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gbm8gc3VzcGVuc2Ugc28gdW5tb3VudCBob29rcyBmaXJlIG5vd1xuICAgICAgICAgICAgdHJ1ZSAvLyBzaG91bGRSZW1vdmVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoIWRlbGF5RW50ZXIpIHtcbiAgICAgICAgICAgICAgICBtb3VudEZhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG1vdmUoY29udGFpbmVyLCBhbmNob3IsIHR5cGUpIHtcbiAgICAgICAgICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCAmJlxuICAgICAgICAgICAgICAgIG1vdmUoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgdHlwZSk7XG4gICAgICAgICAgICBzdXNwZW5zZS5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIH0sXG4gICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VzcGVuc2UuYWN0aXZlQnJhbmNoICYmIG5leHQoc3VzcGVuc2UuYWN0aXZlQnJhbmNoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBpc0luUGVuZGluZ1N1c3BlbnNlID0gISFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoO1xuICAgICAgICAgICAgaWYgKGlzSW5QZW5kaW5nU3VzcGVuc2UpIHtcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5kZXBzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoeWRyYXRlZEVsID0gaW5zdGFuY2Uudm5vZGUuZWw7XG4gICAgICAgICAgICBpbnN0YW5jZVxuICAgICAgICAgICAgICAgIC5hc3luY0RlcC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDAgLyogRXJyb3JDb2Rlcy5TRVRVUF9GVU5DVElPTiAqLyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jU2V0dXBSZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHJldHJ5IHdoZW4gdGhlIHNldHVwKCkgcHJvbWlzZSByZXNvbHZlcy5cbiAgICAgICAgICAgICAgICAvLyBjb21wb25lbnQgbWF5IGhhdmUgYmVlbiB1bm1vdW50ZWQgYmVmb3JlIHJlc29sdmUuXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmlzVW5tb3VudGVkIHx8XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmlzVW5tb3VudGVkIHx8XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCAhPT0gaW5zdGFuY2Uuc3VzcGVuc2VJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJldHJ5IGZyb20gdGhpcyBjb21wb25lbnRcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5hc3luY1Jlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZub2RlIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dCh2bm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCBhc3luY1NldHVwUmVzdWx0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGh5ZHJhdGVkRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdm5vZGUgbWF5IGhhdmUgYmVlbiByZXBsYWNlZCBpZiBhbiB1cGRhdGUgaGFwcGVuZWQgYmVmb3JlIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBhc3luYyBkZXAgaXMgcmVzb2x2ZWQuXG4gICAgICAgICAgICAgICAgICAgIHZub2RlLmVsID0gaHlkcmF0ZWRFbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAhaHlkcmF0ZWRFbCAmJiBpbnN0YW5jZS5zdWJUcmVlLmVsO1xuICAgICAgICAgICAgICAgIHNldHVwUmVuZGVyRWZmZWN0KGluc3RhbmNlLCB2bm9kZSwgXG4gICAgICAgICAgICAgICAgLy8gY29tcG9uZW50IG1heSBoYXZlIGJlZW4gbW92ZWQgYmVmb3JlIHJlc29sdmUuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBub3QgYSBoeWRyYXRpb24sIGluc3RhbmNlLnN1YlRyZWUgd2lsbCBiZSB0aGUgY29tbWVudFxuICAgICAgICAgICAgICAgIC8vIHBsYWNlaG9sZGVyLlxuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUoaHlkcmF0ZWRFbCB8fCBpbnN0YW5jZS5zdWJUcmVlLmVsKSwgXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yIHdpbGwgbm90IGJlIHVzZWQgaWYgdGhpcyBpcyBoeWRyYXRpb24sIHNvIG9ubHkgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNvbnNpZGVyIHRoZSBjb21tZW50IHBsYWNlaG9sZGVyIGNhc2UuXG4gICAgICAgICAgICAgICAgaHlkcmF0ZWRFbCA/IG51bGwgOiBuZXh0KGluc3RhbmNlLnN1YlRyZWUpLCBzdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZShwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChpbnN0YW5jZSwgdm5vZGUuZWwpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25seSBkZWNyZWFzZSBkZXBzIGNvdW50IGlmIHN1c3BlbnNlIGlzIG5vdCBhbHJlYWR5IHJlc29sdmVkXG4gICAgICAgICAgICAgICAgaWYgKGlzSW5QZW5kaW5nU3VzcGVuc2UgJiYgLS1zdXNwZW5zZS5kZXBzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5tb3VudChwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpIHtcbiAgICAgICAgICAgIHN1c3BlbnNlLmlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5hY3RpdmVCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHN1c3BlbnNlO1xufVxuZnVuY3Rpb24gaHlkcmF0ZVN1c3BlbnNlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlTm9kZSkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuICAgIGNvbnN0IHN1c3BlbnNlID0gKHZub2RlLnN1c3BlbnNlID0gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSh2bm9kZSwgcGFyZW50U3VzcGVuc2UsIHBhcmVudENvbXBvbmVudCwgbm9kZS5wYXJlbnROb2RlLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgbnVsbCwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgdHJ1ZSAvKiBoeWRyYXRpbmcgKi8pKTtcbiAgICAvLyB0aGVyZSBhcmUgdHdvIHBvc3NpYmxlIHNjZW5hcmlvcyBmb3Igc2VydmVyLXJlbmRlcmVkIHN1c3BlbnNlOlxuICAgIC8vIC0gc3VjY2Vzczogc3NyIGNvbnRlbnQgc2hvdWxkIGJlIGZ1bGx5IHJlc29sdmVkXG4gICAgLy8gLSBmYWlsdXJlOiBzc3IgY29udGVudCBzaG91bGQgYmUgdGhlIGZhbGxiYWNrIGJyYW5jaC5cbiAgICAvLyBob3dldmVyLCBvbiB0aGUgY2xpZW50IHdlIGRvbid0IHJlYWxseSBrbm93IGlmIGl0IGhhcyBmYWlsZWQgb3Igbm90XG4gICAgLy8gYXR0ZW1wdCB0byBoeWRyYXRlIHRoZSBET00gYXNzdW1pbmcgaXQgaGFzIHN1Y2NlZWRlZCwgYnV0IHdlIHN0aWxsXG4gICAgLy8gbmVlZCB0byBjb25zdHJ1Y3QgYSBzdXNwZW5zZSBib3VuZGFyeSBmaXJzdFxuICAgIGNvbnN0IHJlc3VsdCA9IGh5ZHJhdGVOb2RlKG5vZGUsIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gdm5vZGUuc3NDb250ZW50KSwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgIGlmIChzdXNwZW5zZS5kZXBzID09PSAwKSB7XG4gICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VDaGlsZHJlbih2bm9kZSkge1xuICAgIGNvbnN0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiB9ID0gdm5vZGU7XG4gICAgY29uc3QgaXNTbG90Q2hpbGRyZW4gPSBzaGFwZUZsYWcgJiAzMiAvKiBTaGFwZUZsYWdzLlNMT1RTX0NISUxEUkVOICovO1xuICAgIHZub2RlLnNzQ29udGVudCA9IG5vcm1hbGl6ZVN1c3BlbnNlU2xvdChpc1Nsb3RDaGlsZHJlbiA/IGNoaWxkcmVuLmRlZmF1bHQgOiBjaGlsZHJlbik7XG4gICAgdm5vZGUuc3NGYWxsYmFjayA9IGlzU2xvdENoaWxkcmVuXG4gICAgICAgID8gbm9ybWFsaXplU3VzcGVuc2VTbG90KGNoaWxkcmVuLmZhbGxiYWNrKVxuICAgICAgICA6IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VTbG90KHMpIHtcbiAgICBsZXQgYmxvY2s7XG4gICAgaWYgKGlzRnVuY3Rpb24ocykpIHtcbiAgICAgICAgY29uc3QgdHJhY2tCbG9jayA9IGlzQmxvY2tUcmVlRW5hYmxlZCAmJiBzLl9jO1xuICAgICAgICBpZiAodHJhY2tCbG9jaykge1xuICAgICAgICAgICAgLy8gZGlzYWJsZVRyYWNraW5nOiBmYWxzZVxuICAgICAgICAgICAgLy8gYWxsb3cgYmxvY2sgdHJhY2tpbmcgZm9yIGNvbXBpbGVkIHNsb3RzXG4gICAgICAgICAgICAvLyAoc2VlIC4vY29tcG9uZW50UmVuZGVyQ29udGV4dC50cylcbiAgICAgICAgICAgIHMuX2QgPSBmYWxzZTtcbiAgICAgICAgICAgIG9wZW5CbG9jaygpO1xuICAgICAgICB9XG4gICAgICAgIHMgPSBzKCk7XG4gICAgICAgIGlmICh0cmFja0Jsb2NrKSB7XG4gICAgICAgICAgICBzLl9kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJsb2NrID0gY3VycmVudEJsb2NrO1xuICAgICAgICAgICAgY2xvc2VCbG9jaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0FycmF5KHMpKSB7XG4gICAgICAgIGNvbnN0IHNpbmdsZUNoaWxkID0gZmlsdGVyU2luZ2xlUm9vdChzKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhc2luZ2xlQ2hpbGQpIHtcbiAgICAgICAgICAgIHdhcm4oYDxTdXNwZW5zZT4gc2xvdHMgZXhwZWN0IGEgc2luZ2xlIHJvb3Qgbm9kZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBzID0gc2luZ2xlQ2hpbGQ7XG4gICAgfVxuICAgIHMgPSBub3JtYWxpemVWTm9kZShzKTtcbiAgICBpZiAoYmxvY2sgJiYgIXMuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgIHMuZHluYW1pY0NoaWxkcmVuID0gYmxvY2suZmlsdGVyKGMgPT4gYyAhPT0gcyk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuZnVuY3Rpb24gcXVldWVFZmZlY3RXaXRoU3VzcGVuc2UoZm4sIHN1c3BlbnNlKSB7XG4gICAgaWYgKHN1c3BlbnNlICYmIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkoZm4pKSB7XG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goLi4uZm4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKGZuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihmbik7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBicmFuY2gpIHtcbiAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggPSBicmFuY2g7XG4gICAgY29uc3QgeyB2bm9kZSwgcGFyZW50Q29tcG9uZW50IH0gPSBzdXNwZW5zZTtcbiAgICBjb25zdCBlbCA9ICh2bm9kZS5lbCA9IGJyYW5jaC5lbCk7XG4gICAgLy8gaW4gY2FzZSBzdXNwZW5zZSBpcyB0aGUgcm9vdCBub2RlIG9mIGEgY29tcG9uZW50LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IHVwZGF0ZSB0aGUgSE9DIGVsXG4gICAgaWYgKHBhcmVudENvbXBvbmVudCAmJiBwYXJlbnRDb21wb25lbnQuc3ViVHJlZSA9PT0gdm5vZGUpIHtcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LnZub2RlLmVsID0gZWw7XG4gICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChwYXJlbnRDb21wb25lbnQsIGVsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHByb3ZpZGUoa2V5LCB2YWx1ZSkge1xuICAgIGlmICghY3VycmVudEluc3RhbmNlKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYHByb3ZpZGUoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBzZXR1cCgpLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgcHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucHJvdmlkZXM7XG4gICAgICAgIC8vIGJ5IGRlZmF1bHQgYW4gaW5zdGFuY2UgaW5oZXJpdHMgaXRzIHBhcmVudCdzIHByb3ZpZGVzIG9iamVjdFxuICAgICAgICAvLyBidXQgd2hlbiBpdCBuZWVkcyB0byBwcm92aWRlIHZhbHVlcyBvZiBpdHMgb3duLCBpdCBjcmVhdGVzIGl0c1xuICAgICAgICAvLyBvd24gcHJvdmlkZXMgb2JqZWN0IHVzaW5nIHBhcmVudCBwcm92aWRlcyBvYmplY3QgYXMgcHJvdG90eXBlLlxuICAgICAgICAvLyB0aGlzIHdheSBpbiBgaW5qZWN0YCB3ZSBjYW4gc2ltcGx5IGxvb2sgdXAgaW5qZWN0aW9ucyBmcm9tIGRpcmVjdFxuICAgICAgICAvLyBwYXJlbnQgYW5kIGxldCB0aGUgcHJvdG90eXBlIGNoYWluIGRvIHRoZSB3b3JrLlxuICAgICAgICBjb25zdCBwYXJlbnRQcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wYXJlbnQgJiYgY3VycmVudEluc3RhbmNlLnBhcmVudC5wcm92aWRlcztcbiAgICAgICAgaWYgKHBhcmVudFByb3ZpZGVzID09PSBwcm92aWRlcykge1xuICAgICAgICAgICAgcHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucHJvdmlkZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFByb3ZpZGVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUUyBkb2Vzbid0IGFsbG93IHN5bWJvbCBhcyBpbmRleCB0eXBlXG4gICAgICAgIHByb3ZpZGVzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbmplY3Qoa2V5LCBkZWZhdWx0VmFsdWUsIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSA9IGZhbHNlKSB7XG4gICAgLy8gZmFsbGJhY2sgdG8gYGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZWAgc28gdGhhdCB0aGlzIGNhbiBiZSBjYWxsZWQgaW5cbiAgICAvLyBhIGZ1bmN0aW9uYWwgY29tcG9uZW50XG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICAvLyAjMjQwMFxuICAgICAgICAvLyB0byBzdXBwb3J0IGBhcHAudXNlYCBwbHVnaW5zLFxuICAgICAgICAvLyBmYWxsYmFjayB0byBhcHBDb250ZXh0J3MgYHByb3ZpZGVzYCBpZiB0aGUgaW5zdGFuY2UgaXMgYXQgcm9vdFxuICAgICAgICBjb25zdCBwcm92aWRlcyA9IGluc3RhbmNlLnBhcmVudCA9PSBudWxsXG4gICAgICAgICAgICA/IGluc3RhbmNlLnZub2RlLmFwcENvbnRleHQgJiYgaW5zdGFuY2Uudm5vZGUuYXBwQ29udGV4dC5wcm92aWRlc1xuICAgICAgICAgICAgOiBpbnN0YW5jZS5wYXJlbnQucHJvdmlkZXM7XG4gICAgICAgIGlmIChwcm92aWRlcyAmJiBrZXkgaW4gcHJvdmlkZXMpIHtcbiAgICAgICAgICAgIC8vIFRTIGRvZXNuJ3QgYWxsb3cgc3ltYm9sIGFzIGluZGV4IHR5cGVcbiAgICAgICAgICAgIHJldHVybiBwcm92aWRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJlYXREZWZhdWx0QXNGYWN0b3J5ICYmIGlzRnVuY3Rpb24oZGVmYXVsdFZhbHVlKVxuICAgICAgICAgICAgICAgID8gZGVmYXVsdFZhbHVlLmNhbGwoaW5zdGFuY2UucHJveHkpXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBpbmplY3Rpb24gXCIke1N0cmluZyhrZXkpfVwiIG5vdCBmb3VuZC5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FybihgaW5qZWN0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgc2V0dXAoKSBvciBmdW5jdGlvbmFsIGNvbXBvbmVudHMuYCk7XG4gICAgfVxufVxuXG4vLyBTaW1wbGUgZWZmZWN0LlxuZnVuY3Rpb24gd2F0Y2hFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHdhdGNoUG9zdEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZG9XYXRjaChlZmZlY3QsIG51bGwsICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgPyBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZsdXNoOiAncG9zdCcgfSkgOiB7IGZsdXNoOiAncG9zdCcgfSkpO1xufVxuZnVuY3Rpb24gd2F0Y2hTeW5jRWZmZWN0KGVmZmVjdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBkb1dhdGNoKGVmZmVjdCwgbnVsbCwgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgZmx1c2g6ICdzeW5jJyB9KSA6IHsgZmx1c2g6ICdzeW5jJyB9KSk7XG59XG4vLyBpbml0aWFsIHZhbHVlIGZvciB3YXRjaGVycyB0byB0cmlnZ2VyIG9uIHVuZGVmaW5lZCBpbml0aWFsIHZhbHVlc1xuY29uc3QgSU5JVElBTF9XQVRDSEVSX1ZBTFVFID0ge307XG4vLyBpbXBsZW1lbnRhdGlvblxuZnVuY3Rpb24gd2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucykge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICAgIHdhcm4oYFxcYHdhdGNoKGZuLCBvcHRpb25zPylcXGAgc2lnbmF0dXJlIGhhcyBiZWVuIG1vdmVkIHRvIGEgc2VwYXJhdGUgQVBJLiBgICtcbiAgICAgICAgICAgIGBVc2UgXFxgd2F0Y2hFZmZlY3QoZm4sIG9wdGlvbnM/KVxcYCBpbnN0ZWFkLiBcXGB3YXRjaFxcYCBub3cgb25seSBgICtcbiAgICAgICAgICAgIGBzdXBwb3J0cyBcXGB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zPykgc2lnbmF0dXJlLmApO1xuICAgIH1cbiAgICByZXR1cm4gZG9XYXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGRvV2F0Y2goc291cmNlLCBjYiwgeyBpbW1lZGlhdGUsIGRlZXAsIGZsdXNoLCBvblRyYWNrLCBvblRyaWdnZXIgfSA9IEVNUFRZX09CSikge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWNiKSB7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2Fybihgd2F0Y2goKSBcImltbWVkaWF0ZVwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSBgICtcbiAgICAgICAgICAgICAgICBgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVlcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3YXJuKGB3YXRjaCgpIFwiZGVlcFwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSBgICtcbiAgICAgICAgICAgICAgICBgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB3YXJuSW52YWxpZFNvdXJjZSA9IChzKSA9PiB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggc291cmNlOiBgLCBzLCBgQSB3YXRjaCBzb3VyY2UgY2FuIG9ubHkgYmUgYSBnZXR0ZXIvZWZmZWN0IGZ1bmN0aW9uLCBhIHJlZiwgYCArXG4gICAgICAgICAgICBgYSByZWFjdGl2ZSBvYmplY3QsIG9yIGFuIGFycmF5IG9mIHRoZXNlIHR5cGVzLmApO1xuICAgIH07XG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XG4gICAgbGV0IGdldHRlcjtcbiAgICBsZXQgZm9yY2VUcmlnZ2VyID0gZmFsc2U7XG4gICAgbGV0IGlzTXVsdGlTb3VyY2UgPSBmYWxzZTtcbiAgICBpZiAoaXNSZWYoc291cmNlKSkge1xuICAgICAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2UudmFsdWU7XG4gICAgICAgIGZvcmNlVHJpZ2dlciA9IGlzU2hhbGxvdyQxKHNvdXJjZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUoc291cmNlKSkge1xuICAgICAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2U7XG4gICAgICAgIGRlZXAgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgaXNNdWx0aVNvdXJjZSA9IHRydWU7XG4gICAgICAgIGZvcmNlVHJpZ2dlciA9IHNvdXJjZS5zb21lKHMgPT4gaXNSZWFjdGl2ZShzKSB8fCBpc1NoYWxsb3ckMShzKSk7XG4gICAgICAgIGdldHRlciA9ICgpID0+IHNvdXJjZS5tYXAocyA9PiB7XG4gICAgICAgICAgICBpZiAoaXNSZWYocykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcy52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUocykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhdmVyc2Uocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhzLCBpbnN0YW5jZSwgMiAvKiBFcnJvckNvZGVzLldBVENIX0dFVFRFUiAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybkludmFsaWRTb3VyY2Uocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAvLyBnZXR0ZXIgd2l0aCBjYlxuICAgICAgICAgICAgZ2V0dGVyID0gKCkgPT4gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHNvdXJjZSwgaW5zdGFuY2UsIDIgLyogRXJyb3JDb2Rlcy5XQVRDSF9HRVRURVIgKi8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbm8gY2IgLT4gc2ltcGxlIGVmZmVjdFxuICAgICAgICAgICAgZ2V0dGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSAmJiBpbnN0YW5jZS5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjbGVhbnVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKHNvdXJjZSwgaW5zdGFuY2UsIDMgLyogRXJyb3JDb2Rlcy5XQVRDSF9DQUxMQkFDSyAqLywgW29uQ2xlYW51cF0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ2V0dGVyID0gTk9PUDtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm5JbnZhbGlkU291cmNlKHNvdXJjZSk7XG4gICAgfVxuICAgIGlmIChjYiAmJiBkZWVwKSB7XG4gICAgICAgIGNvbnN0IGJhc2VHZXR0ZXIgPSBnZXR0ZXI7XG4gICAgICAgIGdldHRlciA9ICgpID0+IHRyYXZlcnNlKGJhc2VHZXR0ZXIoKSk7XG4gICAgfVxuICAgIGxldCBjbGVhbnVwO1xuICAgIGxldCBvbkNsZWFudXAgPSAoZm4pID0+IHtcbiAgICAgICAgY2xlYW51cCA9IGVmZmVjdC5vblN0b3AgPSAoKSA9PiB7XG4gICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCA0IC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0xFQU5VUCAqLyk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvLyBpbiBTU1IgdGhlcmUgaXMgbm8gbmVlZCB0byBzZXR1cCBhbiBhY3R1YWwgZWZmZWN0LCBhbmQgaXQgc2hvdWxkIGJlIG5vb3BcbiAgICAvLyB1bmxlc3MgaXQncyBlYWdlciBvciBzeW5jIGZsdXNoXG4gICAgbGV0IHNzckNsZWFudXA7XG4gICAgaWYgKGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xuICAgICAgICAvLyB3ZSB3aWxsIGFsc28gbm90IGNhbGwgdGhlIGludmFsaWRhdGUgY2FsbGJhY2sgKCsgcnVubmVyIGlzIG5vdCBzZXQgdXApXG4gICAgICAgIG9uQ2xlYW51cCA9IE5PT1A7XG4gICAgICAgIGlmICghY2IpIHtcbiAgICAgICAgICAgIGdldHRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoY2IsIGluc3RhbmNlLCAzIC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0FMTEJBQ0sgKi8sIFtcbiAgICAgICAgICAgICAgICBnZXR0ZXIoKSxcbiAgICAgICAgICAgICAgICBpc011bHRpU291cmNlID8gW10gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgb25DbGVhbnVwXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmx1c2ggPT09ICdzeW5jJykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdXNlU1NSQ29udGV4dCgpO1xuICAgICAgICAgICAgc3NyQ2xlYW51cCA9IGN0eC5fX3dhdGNoZXJIYW5kbGVzIHx8IChjdHguX193YXRjaGVySGFuZGxlcyA9IFtdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBOT09QO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBvbGRWYWx1ZSA9IGlzTXVsdGlTb3VyY2VcbiAgICAgICAgPyBuZXcgQXJyYXkoc291cmNlLmxlbmd0aCkuZmlsbChJTklUSUFMX1dBVENIRVJfVkFMVUUpXG4gICAgICAgIDogSU5JVElBTF9XQVRDSEVSX1ZBTFVFO1xuICAgIGNvbnN0IGpvYiA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFlZmZlY3QuYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAvLyB3YXRjaChzb3VyY2UsIGNiKVxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBlZmZlY3QucnVuKCk7XG4gICAgICAgICAgICBpZiAoZGVlcCB8fFxuICAgICAgICAgICAgICAgIGZvcmNlVHJpZ2dlciB8fFxuICAgICAgICAgICAgICAgIChpc011bHRpU291cmNlXG4gICAgICAgICAgICAgICAgICAgID8gbmV3VmFsdWUuc29tZSgodiwgaSkgPT4gaGFzQ2hhbmdlZCh2LCBvbGRWYWx1ZVtpXSkpXG4gICAgICAgICAgICAgICAgICAgIDogaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSB8fFxuICAgICAgICAgICAgICAgIChmYWxzZSAgKSkge1xuICAgICAgICAgICAgICAgIC8vIGNsZWFudXAgYmVmb3JlIHJ1bm5pbmcgY2IgYWdhaW5cbiAgICAgICAgICAgICAgICBpZiAoY2xlYW51cCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGNiLCBpbnN0YW5jZSwgMyAvKiBFcnJvckNvZGVzLldBVENIX0NBTExCQUNLICovLCBbXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIHVuZGVmaW5lZCBhcyB0aGUgb2xkIHZhbHVlIHdoZW4gaXQncyBjaGFuZ2VkIGZvciB0aGUgZmlyc3QgdGltZVxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9PT0gSU5JVElBTF9XQVRDSEVSX1ZBTFVFXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoaXNNdWx0aVNvdXJjZSAmJiBvbGRWYWx1ZVswXSA9PT0gSU5JVElBTF9XQVRDSEVSX1ZBTFVFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBvbkNsZWFudXBcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gd2F0Y2hFZmZlY3RcbiAgICAgICAgICAgIGVmZmVjdC5ydW4oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gaW1wb3J0YW50OiBtYXJrIHRoZSBqb2IgYXMgYSB3YXRjaGVyIGNhbGxiYWNrIHNvIHRoYXQgc2NoZWR1bGVyIGtub3dzXG4gICAgLy8gaXQgaXMgYWxsb3dlZCB0byBzZWxmLXRyaWdnZXIgKCMxNzI3KVxuICAgIGpvYi5hbGxvd1JlY3Vyc2UgPSAhIWNiO1xuICAgIGxldCBzY2hlZHVsZXI7XG4gICAgaWYgKGZsdXNoID09PSAnc3luYycpIHtcbiAgICAgICAgc2NoZWR1bGVyID0gam9iOyAvLyB0aGUgc2NoZWR1bGVyIGZ1bmN0aW9uIGdldHMgY2FsbGVkIGRpcmVjdGx5XG4gICAgfVxuICAgIGVsc2UgaWYgKGZsdXNoID09PSAncG9zdCcpIHtcbiAgICAgICAgc2NoZWR1bGVyID0gKCkgPT4gcXVldWVQb3N0UmVuZGVyRWZmZWN0KGpvYiwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gZGVmYXVsdDogJ3ByZSdcbiAgICAgICAgam9iLnByZSA9IHRydWU7XG4gICAgICAgIGlmIChpbnN0YW5jZSlcbiAgICAgICAgICAgIGpvYi5pZCA9IGluc3RhbmNlLnVpZDtcbiAgICAgICAgc2NoZWR1bGVyID0gKCkgPT4gcXVldWVKb2Ioam9iKTtcbiAgICB9XG4gICAgY29uc3QgZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlciwgc2NoZWR1bGVyKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGVmZmVjdC5vblRyYWNrID0gb25UcmFjaztcbiAgICAgICAgZWZmZWN0Lm9uVHJpZ2dlciA9IG9uVHJpZ2dlcjtcbiAgICB9XG4gICAgLy8gaW5pdGlhbCBydW5cbiAgICBpZiAoY2IpIHtcbiAgICAgICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgam9iKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvbGRWYWx1ZSA9IGVmZmVjdC5ydW4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChmbHVzaCA9PT0gJ3Bvc3QnKSB7XG4gICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChlZmZlY3QucnVuLmJpbmQoZWZmZWN0KSwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgICBjb25zdCB1bndhdGNoID0gKCkgPT4ge1xuICAgICAgICBlZmZlY3Quc3RvcCgpO1xuICAgICAgICBpZiAoaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc2NvcGUpIHtcbiAgICAgICAgICAgIHJlbW92ZShpbnN0YW5jZS5zY29wZS5lZmZlY3RzLCBlZmZlY3QpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoc3NyQ2xlYW51cClcbiAgICAgICAgc3NyQ2xlYW51cC5wdXNoKHVud2F0Y2gpO1xuICAgIHJldHVybiB1bndhdGNoO1xufVxuLy8gdGhpcy4kd2F0Y2hcbmZ1bmN0aW9uIGluc3RhbmNlV2F0Y2goc291cmNlLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHB1YmxpY1RoaXMgPSB0aGlzLnByb3h5O1xuICAgIGNvbnN0IGdldHRlciA9IGlzU3RyaW5nKHNvdXJjZSlcbiAgICAgICAgPyBzb3VyY2UuaW5jbHVkZXMoJy4nKVxuICAgICAgICAgICAgPyBjcmVhdGVQYXRoR2V0dGVyKHB1YmxpY1RoaXMsIHNvdXJjZSlcbiAgICAgICAgICAgIDogKCkgPT4gcHVibGljVGhpc1tzb3VyY2VdXG4gICAgICAgIDogc291cmNlLmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcyk7XG4gICAgbGV0IGNiO1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICBjYiA9IHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2IgPSB2YWx1ZS5oYW5kbGVyO1xuICAgICAgICBvcHRpb25zID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IGN1ciA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgICBzZXRDdXJyZW50SW5zdGFuY2UodGhpcyk7XG4gICAgY29uc3QgcmVzID0gZG9XYXRjaChnZXR0ZXIsIGNiLmJpbmQocHVibGljVGhpcyksIG9wdGlvbnMpO1xuICAgIGlmIChjdXIpIHtcbiAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGN1cik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gY3JlYXRlUGF0aEdldHRlcihjdHgsIHBhdGgpIHtcbiAgICBjb25zdCBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBsZXQgY3VyID0gY3R4O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aCAmJiBjdXI7IGkrKykge1xuICAgICAgICAgICAgY3VyID0gY3VyW3NlZ21lbnRzW2ldXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VyO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmF2ZXJzZSh2YWx1ZSwgc2Vlbikge1xuICAgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlW1wiX192X3NraXBcIiAvKiBSZWFjdGl2ZUZsYWdzLlNLSVAgKi9dKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgc2VlbiA9IHNlZW4gfHwgbmV3IFNldCgpO1xuICAgIGlmIChzZWVuLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBzZWVuLmFkZCh2YWx1ZSk7XG4gICAgaWYgKGlzUmVmKHZhbHVlKSkge1xuICAgICAgICB0cmF2ZXJzZSh2YWx1ZS52YWx1ZSwgc2Vlbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRyYXZlcnNlKHZhbHVlW2ldLCBzZWVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkgfHwgaXNNYXAodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlLmZvckVhY2goKHYpID0+IHtcbiAgICAgICAgICAgIHRyYXZlcnNlKHYsIHNlZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIHRyYXZlcnNlKHZhbHVlW2tleV0sIHNlZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gdXNlVHJhbnNpdGlvblN0YXRlKCkge1xuICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xlYXZpbmc6IGZhbHNlLFxuICAgICAgICBpc1VubW91bnRpbmc6IGZhbHNlLFxuICAgICAgICBsZWF2aW5nVk5vZGVzOiBuZXcgTWFwKClcbiAgICB9O1xuICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICAgIHN0YXRlLmlzTW91bnRlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgICAgc3RhdGUuaXNVbm1vdW50aW5nID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gc3RhdGU7XG59XG5jb25zdCBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvciA9IFtGdW5jdGlvbiwgQXJyYXldO1xuY29uc3QgQmFzZVRyYW5zaXRpb25JbXBsID0ge1xuICAgIG5hbWU6IGBCYXNlVHJhbnNpdGlvbmAsXG4gICAgcHJvcHM6IHtcbiAgICAgICAgbW9kZTogU3RyaW5nLFxuICAgICAgICBhcHBlYXI6IEJvb2xlYW4sXG4gICAgICAgIHBlcnNpc3RlZDogQm9vbGVhbixcbiAgICAgICAgLy8gZW50ZXJcbiAgICAgICAgb25CZWZvcmVFbnRlcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkFmdGVyRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkVudGVyQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgLy8gbGVhdmVcbiAgICAgICAgb25CZWZvcmVMZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkFmdGVyTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkxlYXZlQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgLy8gYXBwZWFyXG4gICAgICAgIG9uQmVmb3JlQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25BcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkFmdGVyQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25BcHBlYXJDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yXG4gICAgfSxcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdXNlVHJhbnNpdGlvblN0YXRlKCk7XG4gICAgICAgIGxldCBwcmV2VHJhbnNpdGlvbktleTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCAmJiBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oc2xvdHMuZGVmYXVsdCgpLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICghY2hpbGRyZW4gfHwgIWNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBsZXQgaGFzRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvLyBsb2NhdGUgZmlyc3Qgbm9uLWNvbW1lbnQgY2hpbGRcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGMgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBoYXNGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdhcm4gbW9yZSB0aGFuIG9uZSBub24tY29tbWVudCBjaGlsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJzx0cmFuc2l0aW9uPiBjYW4gb25seSBiZSB1c2VkIG9uIGEgc2luZ2xlIGVsZW1lbnQgb3IgY29tcG9uZW50LiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1VzZSA8dHJhbnNpdGlvbi1ncm91cD4gZm9yIGxpc3RzLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aGVyZSdzIG5vIG5lZWQgdG8gdHJhY2sgcmVhY3Rpdml0eSBmb3IgdGhlc2UgcHJvcHMgc28gdXNlIHRoZSByYXdcbiAgICAgICAgICAgIC8vIHByb3BzIGZvciBhIGJpdCBiZXR0ZXIgcGVyZlxuICAgICAgICAgICAgY29uc3QgcmF3UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgICAgICAgICBjb25zdCB7IG1vZGUgfSA9IHJhd1Byb3BzO1xuICAgICAgICAgICAgLy8gY2hlY2sgbW9kZVxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIG1vZGUgJiZcbiAgICAgICAgICAgICAgICBtb2RlICE9PSAnaW4tb3V0JyAmJlxuICAgICAgICAgICAgICAgIG1vZGUgIT09ICdvdXQtaW4nICYmXG4gICAgICAgICAgICAgICAgbW9kZSAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICAgICAgd2FybihgaW52YWxpZCA8dHJhbnNpdGlvbj4gbW9kZTogJHttb2RlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLmlzTGVhdmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGluIHRoZSBjYXNlIG9mIDx0cmFuc2l0aW9uPjxrZWVwLWFsaXZlLz48L3RyYW5zaXRpb24+LCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBjb21wYXJlIHRoZSB0eXBlIG9mIHRoZSBrZXB0LWFsaXZlIGNoaWxkcmVuLlxuICAgICAgICAgICAgY29uc3QgaW5uZXJDaGlsZCA9IGdldEtlZXBBbGl2ZUNoaWxkKGNoaWxkKTtcbiAgICAgICAgICAgIGlmICghaW5uZXJDaGlsZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVudGVySG9va3MgPSByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKGlubmVyQ2hpbGQsIHJhd1Byb3BzLCBzdGF0ZSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKGlubmVyQ2hpbGQsIGVudGVySG9va3MpO1xuICAgICAgICAgICAgY29uc3Qgb2xkQ2hpbGQgPSBpbnN0YW5jZS5zdWJUcmVlO1xuICAgICAgICAgICAgY29uc3Qgb2xkSW5uZXJDaGlsZCA9IG9sZENoaWxkICYmIGdldEtlZXBBbGl2ZUNoaWxkKG9sZENoaWxkKTtcbiAgICAgICAgICAgIGxldCB0cmFuc2l0aW9uS2V5Q2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgeyBnZXRUcmFuc2l0aW9uS2V5IH0gPSBpbm5lckNoaWxkLnR5cGU7XG4gICAgICAgICAgICBpZiAoZ2V0VHJhbnNpdGlvbktleSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldFRyYW5zaXRpb25LZXkoKTtcbiAgICAgICAgICAgICAgICBpZiAocHJldlRyYW5zaXRpb25LZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2VHJhbnNpdGlvbktleSA9IGtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5ICE9PSBwcmV2VHJhbnNpdGlvbktleSkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2VHJhbnNpdGlvbktleSA9IGtleTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbktleUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGhhbmRsZSBtb2RlXG4gICAgICAgICAgICBpZiAob2xkSW5uZXJDaGlsZCAmJlxuICAgICAgICAgICAgICAgIG9sZElubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCAmJlxuICAgICAgICAgICAgICAgICghaXNTYW1lVk5vZGVUeXBlKGlubmVyQ2hpbGQsIG9sZElubmVyQ2hpbGQpIHx8IHRyYW5zaXRpb25LZXlDaGFuZ2VkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdIb29rcyA9IHJlc29sdmVUcmFuc2l0aW9uSG9va3Mob2xkSW5uZXJDaGlsZCwgcmF3UHJvcHMsIHN0YXRlLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG9sZCB0cmVlJ3MgaG9va3MgaW4gY2FzZSBvZiBkeW5hbWljIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3Mob2xkSW5uZXJDaGlsZCwgbGVhdmluZ0hvb2tzKTtcbiAgICAgICAgICAgICAgICAvLyBzd2l0Y2hpbmcgYmV0d2VlbiBkaWZmZXJlbnQgdmlld3NcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ291dC1pbicpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNMZWF2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHBsYWNlaG9sZGVyIG5vZGUgYW5kIHF1ZXVlIHVwZGF0ZSB3aGVuIGxlYXZlIGZpbmlzaGVzXG4gICAgICAgICAgICAgICAgICAgIGxlYXZpbmdIb29rcy5hZnRlckxlYXZlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNMZWF2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAjNjgzNVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQgYWxzbyBuZWVkcyB0byBiZSB1cGRhdGVkIHdoZW4gYWN0aXZlIGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLnVwZGF0ZS5hY3RpdmUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ2luLW91dCcgJiYgaW5uZXJDaGlsZC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGxlYXZpbmdIb29rcy5kZWxheUxlYXZlID0gKGVsLCBlYXJseVJlbW92ZSwgZGVsYXllZExlYXZlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCBvbGRJbm5lckNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtTdHJpbmcob2xkSW5uZXJDaGlsZC5rZXkpXSA9IG9sZElubmVyQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlYXJseSByZW1vdmFsIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5fbGVhdmVDYiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXJseVJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLl9sZWF2ZUNiID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZSA9IGRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH07XG4gICAgfVxufTtcbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxuLy8gYWxzbyB0byBhdm9pZCBpbmxpbmUgaW1wb3J0KCkgaW4gZ2VuZXJhdGVkIGQudHMgZmlsZXNcbmNvbnN0IEJhc2VUcmFuc2l0aW9uID0gQmFzZVRyYW5zaXRpb25JbXBsO1xuZnVuY3Rpb24gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgdm5vZGUpIHtcbiAgICBjb25zdCB7IGxlYXZpbmdWTm9kZXMgfSA9IHN0YXRlO1xuICAgIGxldCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBsZWF2aW5nVk5vZGVzLmdldCh2bm9kZS50eXBlKTtcbiAgICBpZiAoIWxlYXZpbmdWTm9kZXNDYWNoZSkge1xuICAgICAgICBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBsZWF2aW5nVk5vZGVzLnNldCh2bm9kZS50eXBlLCBsZWF2aW5nVk5vZGVzQ2FjaGUpO1xuICAgIH1cbiAgICByZXR1cm4gbGVhdmluZ1ZOb2Rlc0NhY2hlO1xufVxuLy8gVGhlIHRyYW5zaXRpb24gaG9va3MgYXJlIGF0dGFjaGVkIHRvIHRoZSB2bm9kZSBhcyB2bm9kZS50cmFuc2l0aW9uXG4vLyBhbmQgd2lsbCBiZSBjYWxsZWQgYXQgYXBwcm9wcmlhdGUgdGltaW5nIGluIHRoZSByZW5kZXJlci5cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uSG9va3Modm5vZGUsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7IGFwcGVhciwgbW9kZSwgcGVyc2lzdGVkID0gZmFsc2UsIG9uQmVmb3JlRW50ZXIsIG9uRW50ZXIsIG9uQWZ0ZXJFbnRlciwgb25FbnRlckNhbmNlbGxlZCwgb25CZWZvcmVMZWF2ZSwgb25MZWF2ZSwgb25BZnRlckxlYXZlLCBvbkxlYXZlQ2FuY2VsbGVkLCBvbkJlZm9yZUFwcGVhciwgb25BcHBlYXIsIG9uQWZ0ZXJBcHBlYXIsIG9uQXBwZWFyQ2FuY2VsbGVkIH0gPSBwcm9wcztcbiAgICBjb25zdCBrZXkgPSBTdHJpbmcodm5vZGUua2V5KTtcbiAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCB2bm9kZSk7XG4gICAgY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncykgPT4ge1xuICAgICAgICBob29rICYmXG4gICAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgOSAvKiBFcnJvckNvZGVzLlRSQU5TSVRJT05fSE9PSyAqLywgYXJncyk7XG4gICAgfTtcbiAgICBjb25zdCBjYWxsQXN5bmNIb29rID0gKGhvb2ssIGFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgZG9uZSA9IGFyZ3NbMV07XG4gICAgICAgIGNhbGxIb29rKGhvb2ssIGFyZ3MpO1xuICAgICAgICBpZiAoaXNBcnJheShob29rKSkge1xuICAgICAgICAgICAgaWYgKGhvb2suZXZlcnkoaG9vayA9PiBob29rLmxlbmd0aCA8PSAxKSlcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaG9vay5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBob29rcyA9IHtcbiAgICAgICAgbW9kZSxcbiAgICAgICAgcGVyc2lzdGVkLFxuICAgICAgICBiZWZvcmVFbnRlcihlbCkge1xuICAgICAgICAgICAgbGV0IGhvb2sgPSBvbkJlZm9yZUVudGVyO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvb2sgPSBvbkJlZm9yZUFwcGVhciB8fCBvbkJlZm9yZUVudGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZvciBzYW1lIGVsZW1lbnQgKHYtc2hvdylcbiAgICAgICAgICAgIGlmIChlbC5fbGVhdmVDYikge1xuICAgICAgICAgICAgICAgIGVsLl9sZWF2ZUNiKHRydWUgLyogY2FuY2VsbGVkICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZvciB0b2dnbGVkIGVsZW1lbnQgd2l0aCBzYW1lIGtleSAodi1pZilcbiAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdWTm9kZSA9IGxlYXZpbmdWTm9kZXNDYWNoZVtrZXldO1xuICAgICAgICAgICAgaWYgKGxlYXZpbmdWTm9kZSAmJlxuICAgICAgICAgICAgICAgIGlzU2FtZVZOb2RlVHlwZSh2bm9kZSwgbGVhdmluZ1ZOb2RlKSAmJlxuICAgICAgICAgICAgICAgIGxlYXZpbmdWTm9kZS5lbC5fbGVhdmVDYikge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIGVhcmx5IHJlbW92YWwgKG5vdCBjYW5jZWxsZWQpXG4gICAgICAgICAgICAgICAgbGVhdmluZ1ZOb2RlLmVsLl9sZWF2ZUNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsSG9vayhob29rLCBbZWxdKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW50ZXIoZWwpIHtcbiAgICAgICAgICAgIGxldCBob29rID0gb25FbnRlcjtcbiAgICAgICAgICAgIGxldCBhZnRlckhvb2sgPSBvbkFmdGVyRW50ZXI7XG4gICAgICAgICAgICBsZXQgY2FuY2VsSG9vayA9IG9uRW50ZXJDYW5jZWxsZWQ7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChhcHBlYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9vayA9IG9uQXBwZWFyIHx8IG9uRW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVySG9vayA9IG9uQWZ0ZXJBcHBlYXIgfHwgb25BZnRlckVudGVyO1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWxIb29rID0gb25BcHBlYXJDYW5jZWxsZWQgfHwgb25FbnRlckNhbmNlbGxlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBkb25lID0gKGVsLl9lbnRlckNiID0gKGNhbmNlbGxlZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChjYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEhvb2soY2FuY2VsSG9vaywgW2VsXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhhZnRlckhvb2ssIFtlbF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaG9va3MuZGVsYXllZExlYXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvb2tzLmRlbGF5ZWRMZWF2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbC5fZW50ZXJDYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGhvb2spIHtcbiAgICAgICAgICAgICAgICBjYWxsQXN5bmNIb29rKGhvb2ssIFtlbCwgZG9uZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsZWF2ZShlbCwgcmVtb3ZlKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBTdHJpbmcodm5vZGUua2V5KTtcbiAgICAgICAgICAgIGlmIChlbC5fZW50ZXJDYikge1xuICAgICAgICAgICAgICAgIGVsLl9lbnRlckNiKHRydWUgLyogY2FuY2VsbGVkICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc1VubW91bnRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsSG9vayhvbkJlZm9yZUxlYXZlLCBbZWxdKTtcbiAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGRvbmUgPSAoZWwuX2xlYXZlQ2IgPSAoY2FuY2VsbGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxIb29rKG9uQWZ0ZXJMZWF2ZSwgW2VsXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsLl9sZWF2ZUNiID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XSA9PT0gdm5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGxlYXZpbmdWTm9kZXNDYWNoZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV0gPSB2bm9kZTtcbiAgICAgICAgICAgIGlmIChvbkxlYXZlKSB7XG4gICAgICAgICAgICAgICAgY2FsbEFzeW5jSG9vayhvbkxlYXZlLCBbZWwsIGRvbmVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xvbmUodm5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKHZub2RlLCBwcm9wcywgc3RhdGUsIGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGhvb2tzO1xufVxuLy8gdGhlIHBsYWNlaG9sZGVyIHJlYWxseSBvbmx5IGhhbmRsZXMgb25lIHNwZWNpYWwgY2FzZTogS2VlcEFsaXZlXG4vLyBpbiB0aGUgY2FzZSBvZiBhIEtlZXBBbGl2ZSBpbiBhIGxlYXZlIHBoYXNlIHdlIG5lZWQgdG8gcmV0dXJuIGEgS2VlcEFsaXZlXG4vLyBwbGFjZWhvbGRlciB3aXRoIGVtcHR5IGNvbnRlbnQgdG8gYXZvaWQgdGhlIEtlZXBBbGl2ZSBpbnN0YW5jZSBmcm9tIGJlaW5nXG4vLyB1bm1vdW50ZWQuXG5mdW5jdGlvbiBlbXB0eVBsYWNlaG9sZGVyKHZub2RlKSB7XG4gICAgaWYgKGlzS2VlcEFsaXZlKHZub2RlKSkge1xuICAgICAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgICAgICB2bm9kZS5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIHJldHVybiB2bm9kZTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRLZWVwQWxpdmVDaGlsZCh2bm9kZSkge1xuICAgIHJldHVybiBpc0tlZXBBbGl2ZSh2bm9kZSlcbiAgICAgICAgPyB2bm9kZS5jaGlsZHJlblxuICAgICAgICAgICAgPyB2bm9kZS5jaGlsZHJlblswXVxuICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgOiB2bm9kZTtcbn1cbmZ1bmN0aW9uIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgaG9va3MpIHtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLyAmJiB2bm9kZS5jb21wb25lbnQpIHtcbiAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlLCBob29rcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgIHZub2RlLnNzQ29udGVudC50cmFuc2l0aW9uID0gaG9va3MuY2xvbmUodm5vZGUuc3NDb250ZW50KTtcbiAgICAgICAgdm5vZGUuc3NGYWxsYmFjay50cmFuc2l0aW9uID0gaG9va3MuY2xvbmUodm5vZGUuc3NGYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2bm9kZS50cmFuc2l0aW9uID0gaG9va3M7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkcmVuLCBrZWVwQ29tbWVudCA9IGZhbHNlLCBwYXJlbnRLZXkpIHtcbiAgICBsZXQgcmV0ID0gW107XG4gICAgbGV0IGtleWVkRnJhZ21lbnRDb3VudCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgLy8gIzUzNjAgaW5oZXJpdCBwYXJlbnQga2V5IGluIGNhc2Ugb2YgPHRlbXBsYXRlIHYtZm9yPlxuICAgICAgICBjb25zdCBrZXkgPSBwYXJlbnRLZXkgPT0gbnVsbFxuICAgICAgICAgICAgPyBjaGlsZC5rZXlcbiAgICAgICAgICAgIDogU3RyaW5nKHBhcmVudEtleSkgKyBTdHJpbmcoY2hpbGQua2V5ICE9IG51bGwgPyBjaGlsZC5rZXkgOiBpKTtcbiAgICAgICAgLy8gaGFuZGxlIGZyYWdtZW50IGNoaWxkcmVuIGNhc2UsIGUuZy4gdi1mb3JcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQucGF0Y2hGbGFnICYgMTI4IC8qIFBhdGNoRmxhZ3MuS0VZRURfRlJBR01FTlQgKi8pXG4gICAgICAgICAgICAgICAga2V5ZWRGcmFnbWVudENvdW50Kys7XG4gICAgICAgICAgICByZXQgPSByZXQuY29uY2F0KGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihjaGlsZC5jaGlsZHJlbiwga2VlcENvbW1lbnQsIGtleSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvbW1lbnQgcGxhY2Vob2xkZXJzIHNob3VsZCBiZSBza2lwcGVkLCBlLmcuIHYtaWZcbiAgICAgICAgZWxzZSBpZiAoa2VlcENvbW1lbnQgfHwgY2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgICAgcmV0LnB1c2goa2V5ICE9IG51bGwgPyBjbG9uZVZOb2RlKGNoaWxkLCB7IGtleSB9KSA6IGNoaWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyAjMTEyNiBpZiBhIHRyYW5zaXRpb24gY2hpbGRyZW4gbGlzdCBjb250YWlucyBtdWx0aXBsZSBzdWIgZnJhZ21lbnRzLCB0aGVzZVxuICAgIC8vIGZyYWdtZW50cyB3aWxsIGJlIG1lcmdlZCBpbnRvIGEgZmxhdCBjaGlsZHJlbiBhcnJheS4gU2luY2UgZWFjaCB2LWZvclxuICAgIC8vIGZyYWdtZW50IG1heSBjb250YWluIGRpZmZlcmVudCBzdGF0aWMgYmluZGluZ3MgaW5zaWRlLCB3ZSBuZWVkIHRvIGRlLW9wXG4gICAgLy8gdGhlc2UgY2hpbGRyZW4gdG8gZm9yY2UgZnVsbCBkaWZmcyB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci5cbiAgICBpZiAoa2V5ZWRGcmFnbWVudENvdW50ID4gMSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJldC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmV0W2ldLnBhdGNoRmxhZyA9IC0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqLztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG4vLyBpbXBsZW1lbnRhdGlvbiwgY2xvc2UgdG8gbm8tb3BcbmZ1bmN0aW9uIGRlZmluZUNvbXBvbmVudChvcHRpb25zKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24ob3B0aW9ucykgPyB7IHNldHVwOiBvcHRpb25zLCBuYW1lOiBvcHRpb25zLm5hbWUgfSA6IG9wdGlvbnM7XG59XG5cbmNvbnN0IGlzQXN5bmNXcmFwcGVyID0gKGkpID0+ICEhaS50eXBlLl9fYXN5bmNMb2FkZXI7XG5mdW5jdGlvbiBkZWZpbmVBc3luY0NvbXBvbmVudChzb3VyY2UpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7XG4gICAgICAgIHNvdXJjZSA9IHsgbG9hZGVyOiBzb3VyY2UgfTtcbiAgICB9XG4gICAgY29uc3QgeyBsb2FkZXIsIGxvYWRpbmdDb21wb25lbnQsIGVycm9yQ29tcG9uZW50LCBkZWxheSA9IDIwMCwgdGltZW91dCwgLy8gdW5kZWZpbmVkID0gbmV2ZXIgdGltZXMgb3V0XG4gICAgc3VzcGVuc2libGUgPSB0cnVlLCBvbkVycm9yOiB1c2VyT25FcnJvciB9ID0gc291cmNlO1xuICAgIGxldCBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gICAgbGV0IHJlc29sdmVkQ29tcDtcbiAgICBsZXQgcmV0cmllcyA9IDA7XG4gICAgY29uc3QgcmV0cnkgPSAoKSA9PiB7XG4gICAgICAgIHJldHJpZXMrKztcbiAgICAgICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICAgICAgICByZXR1cm4gbG9hZCgpO1xuICAgIH07XG4gICAgY29uc3QgbG9hZCA9ICgpID0+IHtcbiAgICAgICAgbGV0IHRoaXNSZXF1ZXN0O1xuICAgICAgICByZXR1cm4gKHBlbmRpbmdSZXF1ZXN0IHx8XG4gICAgICAgICAgICAodGhpc1JlcXVlc3QgPSBwZW5kaW5nUmVxdWVzdCA9XG4gICAgICAgICAgICAgICAgbG9hZGVyKClcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVyciA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKFN0cmluZyhlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJPbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJSZXRyeSA9ICgpID0+IHJlc29sdmUocmV0cnkoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlckZhaWwgPSAoKSA9PiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyT25FcnJvcihlcnIsIHVzZXJSZXRyeSwgdXNlckZhaWwsIHJldHJpZXMgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGNvbXApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNSZXF1ZXN0ICE9PSBwZW5kaW5nUmVxdWVzdCAmJiBwZW5kaW5nUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBlbmRpbmdSZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWNvbXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEFzeW5jIGNvbXBvbmVudCBsb2FkZXIgcmVzb2x2ZWQgdG8gdW5kZWZpbmVkLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgSWYgeW91IGFyZSB1c2luZyByZXRyeSgpLCBtYWtlIHN1cmUgdG8gcmV0dXJuIGl0cyByZXR1cm4gdmFsdWUuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJvcCBtb2R1bGUgZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvbXAuX19lc01vZHVsZSB8fCBjb21wW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcCA9IGNvbXAuZGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbXAgJiYgIWlzT2JqZWN0KGNvbXApICYmICFpc0Z1bmN0aW9uKGNvbXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXN5bmMgY29tcG9uZW50IGxvYWQgcmVzdWx0OiAke2NvbXB9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRDb21wID0gY29tcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXA7XG4gICAgICAgICAgICAgICAgfSkpKTtcbiAgICB9O1xuICAgIHJldHVybiBkZWZpbmVDb21wb25lbnQoe1xuICAgICAgICBuYW1lOiAnQXN5bmNDb21wb25lbnRXcmFwcGVyJyxcbiAgICAgICAgX19hc3luY0xvYWRlcjogbG9hZCxcbiAgICAgICAgZ2V0IF9fYXN5bmNSZXNvbHZlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlZENvbXA7XG4gICAgICAgIH0sXG4gICAgICAgIHNldHVwKCkge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XG4gICAgICAgICAgICAvLyBhbHJlYWR5IHJlc29sdmVkXG4gICAgICAgICAgICBpZiAocmVzb2x2ZWRDb21wKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IGNyZWF0ZUlubmVyQ29tcChyZXNvbHZlZENvbXAsIGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9uRXJyb3IgPSAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDEzIC8qIEVycm9yQ29kZXMuQVNZTkNfQ09NUE9ORU5UX0xPQURFUiAqLywgIWVycm9yQ29tcG9uZW50IC8qIGRvIG5vdCB0aHJvdyBpbiBkZXYgaWYgdXNlciBwcm92aWRlZCBlcnJvciBjb21wb25lbnQgKi8pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIHN1c3BlbnNlLWNvbnRyb2xsZWQgb3IgU1NSLlxuICAgICAgICAgICAgaWYgKChzdXNwZW5zaWJsZSAmJiBpbnN0YW5jZS5zdXNwZW5zZSkgfHxcbiAgICAgICAgICAgICAgICAoaXNJblNTUkNvbXBvbmVudFNldHVwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY29tcCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiBjcmVhdGVJbm5lckNvbXAoY29tcCwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiBlcnJvckNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjcmVhdGVWTm9kZShlcnJvckNvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2FkZWQgPSByZWYoZmFsc2UpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSByZWYoKTtcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5ZWQgPSByZWYoISFkZWxheSk7XG4gICAgICAgICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXllZC52YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aW1lb3V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQudmFsdWUgJiYgIWVycm9yLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoYEFzeW5jIGNvbXBvbmVudCB0aW1lZCBvdXQgYWZ0ZXIgJHt0aW1lb3V0fW1zLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvYWQoKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBsb2FkZWQudmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5wYXJlbnQgJiYgaXNLZWVwQWxpdmUoaW5zdGFuY2UucGFyZW50LnZub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwYXJlbnQgaXMga2VlcC1hbGl2ZSwgZm9yY2UgdXBkYXRlIHNvIHRoZSBsb2FkZWQgY29tcG9uZW50J3NcbiAgICAgICAgICAgICAgICAgICAgLy8gbmFtZSBpcyB0YWtlbiBpbnRvIGFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgcXVldWVKb2IoaW5zdGFuY2UucGFyZW50LnVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBlcnI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGxvYWRlZC52YWx1ZSAmJiByZXNvbHZlZENvbXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUlubmVyQ29tcChyZXNvbHZlZENvbXAsIGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IudmFsdWUgJiYgZXJyb3JDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKGVycm9yQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxvYWRpbmdDb21wb25lbnQgJiYgIWRlbGF5ZWQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKGxvYWRpbmdDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUlubmVyQ29tcChjb21wLCBwYXJlbnQpIHtcbiAgICBjb25zdCB7IHJlZiwgcHJvcHMsIGNoaWxkcmVuLCBjZSB9ID0gcGFyZW50LnZub2RlO1xuICAgIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUoY29tcCwgcHJvcHMsIGNoaWxkcmVuKTtcbiAgICAvLyBlbnN1cmUgaW5uZXIgY29tcG9uZW50IGluaGVyaXRzIHRoZSBhc3luYyB3cmFwcGVyJ3MgcmVmIG93bmVyXG4gICAgdm5vZGUucmVmID0gcmVmO1xuICAgIC8vIHBhc3MgdGhlIGN1c3RvbSBlbGVtZW50IGNhbGxiYWNrIG9uIHRvIHRoZSBpbm5lciBjb21wXG4gICAgLy8gYW5kIHJlbW92ZSBpdCBmcm9tIHRoZSBhc3luYyB3cmFwcGVyXG4gICAgdm5vZGUuY2UgPSBjZTtcbiAgICBkZWxldGUgcGFyZW50LnZub2RlLmNlO1xuICAgIHJldHVybiB2bm9kZTtcbn1cblxuY29uc3QgaXNLZWVwQWxpdmUgPSAodm5vZGUpID0+IHZub2RlLnR5cGUuX19pc0tlZXBBbGl2ZTtcbmNvbnN0IEtlZXBBbGl2ZUltcGwgPSB7XG4gICAgbmFtZTogYEtlZXBBbGl2ZWAsXG4gICAgLy8gTWFya2VyIGZvciBzcGVjaWFsIGhhbmRsaW5nIGluc2lkZSB0aGUgcmVuZGVyZXIuIFdlIGFyZSBub3QgdXNpbmcgYSA9PT1cbiAgICAvLyBjaGVjayBkaXJlY3RseSBvbiBLZWVwQWxpdmUgaW4gdGhlIHJlbmRlcmVyLCBiZWNhdXNlIGltcG9ydGluZyBpdCBkaXJlY3RseVxuICAgIC8vIHdvdWxkIHByZXZlbnQgaXQgZnJvbSBiZWluZyB0cmVlLXNoYWtlbi5cbiAgICBfX2lzS2VlcEFsaXZlOiB0cnVlLFxuICAgIHByb3BzOiB7XG4gICAgICAgIGluY2x1ZGU6IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldLFxuICAgICAgICBleGNsdWRlOiBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XSxcbiAgICAgICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdXG4gICAgfSxcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIC8vIEtlZXBBbGl2ZSBjb21tdW5pY2F0ZXMgd2l0aCB0aGUgaW5zdGFudGlhdGVkIHJlbmRlcmVyIHZpYSB0aGVcbiAgICAgICAgLy8gY3R4IHdoZXJlIHRoZSByZW5kZXJlciBwYXNzZXMgaW4gaXRzIGludGVybmFscyxcbiAgICAgICAgLy8gYW5kIHRoZSBLZWVwQWxpdmUgaW5zdGFuY2UgZXhwb3NlcyBhY3RpdmF0ZS9kZWFjdGl2YXRlIGltcGxlbWVudGF0aW9ucy5cbiAgICAgICAgLy8gVGhlIHdob2xlIHBvaW50IG9mIHRoaXMgaXMgdG8gYXZvaWQgaW1wb3J0aW5nIEtlZXBBbGl2ZSBkaXJlY3RseSBpbiB0aGVcbiAgICAgICAgLy8gcmVuZGVyZXIgdG8gZmFjaWxpdGF0ZSB0cmVlLXNoYWtpbmcuXG4gICAgICAgIGNvbnN0IHNoYXJlZENvbnRleHQgPSBpbnN0YW5jZS5jdHg7XG4gICAgICAgIC8vIGlmIHRoZSBpbnRlcm5hbCByZW5kZXJlciBpcyBub3QgcmVnaXN0ZXJlZCwgaXQgaW5kaWNhdGVzIHRoYXQgdGhpcyBpcyBzZXJ2ZXItc2lkZSByZW5kZXJpbmcsXG4gICAgICAgIC8vIGZvciBLZWVwQWxpdmUsIHdlIGp1c3QgbmVlZCB0byByZW5kZXIgaXRzIGNoaWxkcmVuXG4gICAgICAgIGlmICghc2hhcmVkQ29udGV4dC5yZW5kZXJlcikge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGggPT09IDEgPyBjaGlsZHJlblswXSA6IGNoaWxkcmVuO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBudWxsO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgaW5zdGFuY2UuX192X2NhY2hlID0gY2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50U3VzcGVuc2UgPSBpbnN0YW5jZS5zdXNwZW5zZTtcbiAgICAgICAgY29uc3QgeyByZW5kZXJlcjogeyBwOiBwYXRjaCwgbTogbW92ZSwgdW06IF91bm1vdW50LCBvOiB7IGNyZWF0ZUVsZW1lbnQgfSB9IH0gPSBzaGFyZWRDb250ZXh0O1xuICAgICAgICBjb25zdCBzdG9yYWdlQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHNoYXJlZENvbnRleHQuYWN0aXZhdGUgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudDtcbiAgICAgICAgICAgIG1vdmUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCAwIC8qIE1vdmVUeXBlLkVOVEVSICovLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICAvLyBpbiBjYXNlIHByb3BzIGhhdmUgY2hhbmdlZFxuICAgICAgICAgICAgcGF0Y2goaW5zdGFuY2Uudm5vZGUsIHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgdm5vZGUuc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc0RlYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UuYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlSG9vayA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLm9uVm5vZGVNb3VudGVkO1xuICAgICAgICAgICAgICAgIGlmICh2bm9kZUhvb2spIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgaW5zdGFuY2UucGFyZW50LCB2bm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY29tcG9uZW50cyB0cmVlXG4gICAgICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRBZGRlZChpbnN0YW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNoYXJlZENvbnRleHQuZGVhY3RpdmF0ZSA9ICh2bm9kZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnQ7XG4gICAgICAgICAgICBtb3ZlKHZub2RlLCBzdG9yYWdlQ29udGFpbmVyLCBudWxsLCAxIC8qIE1vdmVUeXBlLkxFQVZFICovLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5kYSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5kYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlSG9vayA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLm9uVm5vZGVVbm1vdW50ZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZub2RlSG9vaykge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBpbnN0YW5jZS5wYXJlbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuaXNEZWFjdGl2YXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjb21wb25lbnRzIHRyZWVcbiAgICAgICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gdW5tb3VudCh2bm9kZSkge1xuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIHNoYXBlRmxhZyBzbyBpdCBjYW4gYmUgcHJvcGVybHkgdW5tb3VudGVkXG4gICAgICAgICAgICByZXNldFNoYXBlRmxhZyh2bm9kZSk7XG4gICAgICAgICAgICBfdW5tb3VudCh2bm9kZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcnVuZUNhY2hlKGZpbHRlcikge1xuICAgICAgICAgICAgY2FjaGUuZm9yRWFjaCgodm5vZGUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKHZub2RlLnR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lICYmICghZmlsdGVyIHx8ICFmaWx0ZXIobmFtZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeShrZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50IHx8IGNhY2hlZC50eXBlICE9PSBjdXJyZW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgaW5zdGFuY2Ugc2hvdWxkIG5vIGxvbmdlciBiZSBrZXB0LWFsaXZlLlxuICAgICAgICAgICAgICAgIC8vIHdlIGNhbid0IHVubW91bnQgaXQgbm93IGJ1dCBpdCBtaWdodCBiZSBsYXRlciwgc28gcmVzZXQgaXRzIGZsYWcgbm93LlxuICAgICAgICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHBydW5lIGNhY2hlIG9uIGluY2x1ZGUvZXhjbHVkZSBwcm9wIGNoYW5nZVxuICAgICAgICB3YXRjaCgoKSA9PiBbcHJvcHMuaW5jbHVkZSwgcHJvcHMuZXhjbHVkZV0sIChbaW5jbHVkZSwgZXhjbHVkZV0pID0+IHtcbiAgICAgICAgICAgIGluY2x1ZGUgJiYgcHJ1bmVDYWNoZShuYW1lID0+IG1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpO1xuICAgICAgICAgICAgZXhjbHVkZSAmJiBwcnVuZUNhY2hlKG5hbWUgPT4gIW1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpO1xuICAgICAgICB9LCBcbiAgICAgICAgLy8gcHJ1bmUgcG9zdC1yZW5kZXIgYWZ0ZXIgYGN1cnJlbnRgIGhhcyBiZWVuIHVwZGF0ZWRcbiAgICAgICAgeyBmbHVzaDogJ3Bvc3QnLCBkZWVwOiB0cnVlIH0pO1xuICAgICAgICAvLyBjYWNoZSBzdWIgdHJlZSBhZnRlciByZW5kZXJcbiAgICAgICAgbGV0IHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XG4gICAgICAgIGNvbnN0IGNhY2hlU3VidHJlZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIGZpeCAjMTYyMSwgdGhlIHBlbmRpbmdDYWNoZUtleSBjb3VsZCBiZSAwXG4gICAgICAgICAgICBpZiAocGVuZGluZ0NhY2hlS2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjYWNoZS5zZXQocGVuZGluZ0NhY2hlS2V5LCBnZXRJbm5lckNoaWxkKGluc3RhbmNlLnN1YlRyZWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgb25Nb3VudGVkKGNhY2hlU3VidHJlZSk7XG4gICAgICAgIG9uVXBkYXRlZChjYWNoZVN1YnRyZWUpO1xuICAgICAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgICAgICAgICAgY2FjaGUuZm9yRWFjaChjYWNoZWQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc3ViVHJlZSwgc3VzcGVuc2UgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChzdWJUcmVlKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkLnR5cGUgPT09IHZub2RlLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBpbnN0YW5jZSB3aWxsIGJlIHVubW91bnRlZCBhcyBwYXJ0IG9mIGtlZXAtYWxpdmUncyB1bm1vdW50XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKHZub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGludm9rZSBpdHMgZGVhY3RpdmF0ZWQgaG9vayBoZXJlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhID0gdm5vZGUuY29tcG9uZW50LmRhO1xuICAgICAgICAgICAgICAgICAgICBkYSAmJiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoZGEsIHN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBwZW5kaW5nQ2FjaGVLZXkgPSBudWxsO1xuICAgICAgICAgICAgaWYgKCFzbG90cy5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJhd1ZOb2RlID0gY2hpbGRyZW5bMF07XG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgS2VlcEFsaXZlIHNob3VsZCBjb250YWluIGV4YWN0bHkgb25lIGNvbXBvbmVudCBjaGlsZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzVk5vZGUocmF3Vk5vZGUpIHx8XG4gICAgICAgICAgICAgICAgKCEocmF3Vk5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqLykgJiZcbiAgICAgICAgICAgICAgICAgICAgIShyYXdWTm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChyYXdWTm9kZSk7XG4gICAgICAgICAgICBjb25zdCBjb21wID0gdm5vZGUudHlwZTtcbiAgICAgICAgICAgIC8vIGZvciBhc3luYyBjb21wb25lbnRzLCBuYW1lIGNoZWNrIHNob3VsZCBiZSBiYXNlZCBpbiBpdHMgbG9hZGVkXG4gICAgICAgICAgICAvLyBpbm5lciBjb21wb25lbnQgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShpc0FzeW5jV3JhcHBlcih2bm9kZSlcbiAgICAgICAgICAgICAgICA/IHZub2RlLnR5cGUuX19hc3luY1Jlc29sdmVkIHx8IHt9XG4gICAgICAgICAgICAgICAgOiBjb21wKTtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5jbHVkZSwgZXhjbHVkZSwgbWF4IH0gPSBwcm9wcztcbiAgICAgICAgICAgIGlmICgoaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpKSB8fFxuICAgICAgICAgICAgICAgIChleGNsdWRlICYmIG5hbWUgJiYgbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gdm5vZGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qga2V5ID0gdm5vZGUua2V5ID09IG51bGwgPyBjb21wIDogdm5vZGUua2V5O1xuICAgICAgICAgICAgY29uc3QgY2FjaGVkVk5vZGUgPSBjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgICAgIC8vIGNsb25lIHZub2RlIGlmIGl0J3MgcmV1c2VkIGJlY2F1c2Ugd2UgYXJlIGdvaW5nIHRvIG11dGF0ZSBpdFxuICAgICAgICAgICAgaWYgKHZub2RlLmVsKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmF3Vk5vZGUuc3NDb250ZW50ID0gdm5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gIzE1MTMgaXQncyBwb3NzaWJsZSBmb3IgdGhlIHJldHVybmVkIHZub2RlIHRvIGJlIGNsb25lZCBkdWUgdG8gYXR0clxuICAgICAgICAgICAgLy8gZmFsbHRocm91Z2ggb3Igc2NvcGVJZCwgc28gdGhlIHZub2RlIGhlcmUgbWF5IG5vdCBiZSB0aGUgZmluYWwgdm5vZGVcbiAgICAgICAgICAgIC8vIHRoYXQgaXMgbW91bnRlZC4gSW5zdGVhZCBvZiBjYWNoaW5nIGl0IGRpcmVjdGx5LCB3ZSBzdG9yZSB0aGUgcGVuZGluZ1xuICAgICAgICAgICAgLy8ga2V5IGFuZCBjYWNoZSBgaW5zdGFuY2Uuc3ViVHJlZWAgKHRoZSBub3JtYWxpemVkIHZub2RlKSBpblxuICAgICAgICAgICAgLy8gYmVmb3JlTW91bnQvYmVmb3JlVXBkYXRlIGhvb2tzLlxuICAgICAgICAgICAgcGVuZGluZ0NhY2hlS2V5ID0ga2V5O1xuICAgICAgICAgICAgaWYgKGNhY2hlZFZOb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29weSBvdmVyIG1vdW50ZWQgc3RhdGVcbiAgICAgICAgICAgICAgICB2bm9kZS5lbCA9IGNhY2hlZFZOb2RlLmVsO1xuICAgICAgICAgICAgICAgIHZub2RlLmNvbXBvbmVudCA9IGNhY2hlZFZOb2RlLmNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICBpZiAodm5vZGUudHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmVseSB1cGRhdGUgdHJhbnNpdGlvbiBob29rcyBvbiBzdWJUcmVlXG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgdm5vZGUudHJhbnNpdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGF2b2lkIHZub2RlIGJlaW5nIG1vdW50ZWQgYXMgZnJlc2hcbiAgICAgICAgICAgICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gNTEyIC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX0tFUFRfQUxJVkUgKi87XG4gICAgICAgICAgICAgICAgLy8gbWFrZSB0aGlzIGtleSB0aGUgZnJlc2hlc3RcbiAgICAgICAgICAgICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgICAgICAgICAgICAgIC8vIHBydW5lIG9sZGVzdCBlbnRyeVxuICAgICAgICAgICAgICAgIGlmIChtYXggJiYga2V5cy5zaXplID4gcGFyc2VJbnQobWF4LCAxMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGtleXMudmFsdWVzKCkubmV4dCgpLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhdm9pZCB2bm9kZSBiZWluZyB1bm1vdW50ZWRcbiAgICAgICAgICAgIHZub2RlLnNoYXBlRmxhZyB8PSAyNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi87XG4gICAgICAgICAgICBjdXJyZW50ID0gdm5vZGU7XG4gICAgICAgICAgICByZXR1cm4gaXNTdXNwZW5zZShyYXdWTm9kZS50eXBlKSA/IHJhd1ZOb2RlIDogdm5vZGU7XG4gICAgICAgIH07XG4gICAgfVxufTtcbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxuLy8gYWxzbyB0byBhdm9pZCBpbmxpbmUgaW1wb3J0KCkgaW4gZ2VuZXJhdGVkIGQudHMgZmlsZXNcbmNvbnN0IEtlZXBBbGl2ZSA9IEtlZXBBbGl2ZUltcGw7XG5mdW5jdGlvbiBtYXRjaGVzKHBhdHRlcm4sIG5hbWUpIHtcbiAgICBpZiAoaXNBcnJheShwYXR0ZXJuKSkge1xuICAgICAgICByZXR1cm4gcGF0dGVybi5zb21lKChwKSA9PiBtYXRjaGVzKHAsIG5hbWUpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTdHJpbmcocGF0dGVybikpIHtcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4uc3BsaXQoJywnKS5pbmNsdWRlcyhuYW1lKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocGF0dGVybi50ZXN0KSB7XG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gb25BY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiYVwiIC8qIExpZmVjeWNsZUhvb2tzLkFDVElWQVRFRCAqLywgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIG9uRGVhY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiZGFcIiAvKiBMaWZlY3ljbGVIb29rcy5ERUFDVElWQVRFRCAqLywgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHJlZ2lzdGVyS2VlcEFsaXZlSG9vayhob29rLCB0eXBlLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpIHtcbiAgICAvLyBjYWNoZSB0aGUgZGVhY3RpdmF0ZSBicmFuY2ggY2hlY2sgd3JhcHBlciBmb3IgaW5qZWN0ZWQgaG9va3Mgc28gdGhlIHNhbWVcbiAgICAvLyBob29rIGNhbiBiZSBwcm9wZXJseSBkZWR1cGVkIGJ5IHRoZSBzY2hlZHVsZXIuIFwiX193ZGNcIiBzdGFuZHMgZm9yIFwid2l0aFxuICAgIC8vIGRlYWN0aXZhdGlvbiBjaGVja1wiLlxuICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dkYyB8fFxuICAgICAgICAoaG9vay5fX3dkYyA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIG9ubHkgZmlyZSB0aGUgaG9vayBpZiB0aGUgdGFyZ2V0IGluc3RhbmNlIGlzIE5PVCBpbiBhIGRlYWN0aXZhdGVkIGJyYW5jaC5cbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5pc0RlYWN0aXZhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhvb2soKTtcbiAgICAgICAgfSk7XG4gICAgaW5qZWN0SG9vayh0eXBlLCB3cmFwcGVkSG9vaywgdGFyZ2V0KTtcbiAgICAvLyBJbiBhZGRpdGlvbiB0byByZWdpc3RlcmluZyBpdCBvbiB0aGUgdGFyZ2V0IGluc3RhbmNlLCB3ZSB3YWxrIHVwIHRoZSBwYXJlbnRcbiAgICAvLyBjaGFpbiBhbmQgcmVnaXN0ZXIgaXQgb24gYWxsIGFuY2VzdG9yIGluc3RhbmNlcyB0aGF0IGFyZSBrZWVwLWFsaXZlIHJvb3RzLlxuICAgIC8vIFRoaXMgYXZvaWRzIHRoZSBuZWVkIHRvIHdhbGsgdGhlIGVudGlyZSBjb21wb25lbnQgdHJlZSB3aGVuIGludm9raW5nIHRoZXNlXG4gICAgLy8gaG9va3MsIGFuZCBtb3JlIGltcG9ydGFudGx5LCBhdm9pZHMgdGhlIG5lZWQgdG8gdHJhY2sgY2hpbGQgY29tcG9uZW50cyBpblxuICAgIC8vIGFycmF5cy5cbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0LnBhcmVudDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudC5wYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChpc0tlZXBBbGl2ZShjdXJyZW50LnBhcmVudC52bm9kZSkpIHtcbiAgICAgICAgICAgICAgICBpbmplY3RUb0tlZXBBbGl2ZVJvb3Qod3JhcHBlZEhvb2ssIHR5cGUsIHRhcmdldCwgY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpbmplY3RUb0tlZXBBbGl2ZVJvb3QoaG9vaywgdHlwZSwgdGFyZ2V0LCBrZWVwQWxpdmVSb290KSB7XG4gICAgLy8gaW5qZWN0SG9vayB3cmFwcyB0aGUgb3JpZ2luYWwgZm9yIGVycm9yIGhhbmRsaW5nLCBzbyBtYWtlIHN1cmUgdG8gcmVtb3ZlXG4gICAgLy8gdGhlIHdyYXBwZWQgdmVyc2lvbi5cbiAgICBjb25zdCBpbmplY3RlZCA9IGluamVjdEhvb2sodHlwZSwgaG9vaywga2VlcEFsaXZlUm9vdCwgdHJ1ZSAvKiBwcmVwZW5kICovKTtcbiAgICBvblVubW91bnRlZCgoKSA9PiB7XG4gICAgICAgIHJlbW92ZShrZWVwQWxpdmVSb290W3R5cGVdLCBpbmplY3RlZCk7XG4gICAgfSwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHJlc2V0U2hhcGVGbGFnKHZub2RlKSB7XG4gICAgLy8gYml0d2lzZSBvcGVyYXRpb25zIHRvIHJlbW92ZSBrZWVwIGFsaXZlIGZsYWdzXG4gICAgdm5vZGUuc2hhcGVGbGFnICY9IH4yNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi87XG4gICAgdm5vZGUuc2hhcGVGbGFnICY9IH41MTIgLyogU2hhcGVGbGFncy5DT01QT05FTlRfS0VQVF9BTElWRSAqLztcbn1cbmZ1bmN0aW9uIGdldElubmVyQ2hpbGQodm5vZGUpIHtcbiAgICByZXR1cm4gdm5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8gPyB2bm9kZS5zc0NvbnRlbnQgOiB2bm9kZTtcbn1cblxuZnVuY3Rpb24gaW5qZWN0SG9vayh0eXBlLCBob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UsIHByZXBlbmQgPSBmYWxzZSkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgY29uc3QgaG9va3MgPSB0YXJnZXRbdHlwZV0gfHwgKHRhcmdldFt0eXBlXSA9IFtdKTtcbiAgICAgICAgLy8gY2FjaGUgdGhlIGVycm9yIGhhbmRsaW5nIHdyYXBwZXIgZm9yIGluamVjdGVkIGhvb2tzIHNvIHRoZSBzYW1lIGhvb2tcbiAgICAgICAgLy8gY2FuIGJlIHByb3Blcmx5IGRlZHVwZWQgYnkgdGhlIHNjaGVkdWxlci4gXCJfX3dlaFwiIHN0YW5kcyBmb3IgXCJ3aXRoIGVycm9yXG4gICAgICAgIC8vIGhhbmRsaW5nXCIuXG4gICAgICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dlaCB8fFxuICAgICAgICAgICAgKGhvb2suX193ZWggPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuaXNVbm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHRyYWNraW5nIGluc2lkZSBhbGwgbGlmZWN5Y2xlIGhvb2tzXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgdGhleSBjYW4gcG90ZW50aWFsbHkgYmUgY2FsbGVkIGluc2lkZSBlZmZlY3RzLlxuICAgICAgICAgICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgICAgICAgICAvLyBTZXQgY3VycmVudEluc3RhbmNlIGR1cmluZyBob29rIGludm9jYXRpb24uXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBhc3N1bWVzIHRoZSBob29rIGRvZXMgbm90IHN5bmNocm9ub3VzbHkgdHJpZ2dlciBvdGhlciBob29rcywgd2hpY2hcbiAgICAgICAgICAgICAgICAvLyBjYW4gb25seSBiZSBmYWxzZSB3aGVuIHRoZSB1c2VyIGRvZXMgc29tZXRoaW5nIHJlYWxseSBmdW5reS5cbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCB0YXJnZXQsIHR5cGUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKHByZXBlbmQpIHtcbiAgICAgICAgICAgIGhvb2tzLnVuc2hpZnQod3JhcHBlZEhvb2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9va3MucHVzaCh3cmFwcGVkSG9vayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyYXBwZWRIb29rO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgYXBpTmFtZSA9IHRvSGFuZGxlcktleShFcnJvclR5cGVTdHJpbmdzW3R5cGVdLnJlcGxhY2UoLyBob29rJC8sICcnKSk7XG4gICAgICAgIHdhcm4oYCR7YXBpTmFtZX0gaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZSB0byBiZSBgICtcbiAgICAgICAgICAgIGBhc3NvY2lhdGVkIHdpdGguIGAgK1xuICAgICAgICAgICAgYExpZmVjeWNsZSBpbmplY3Rpb24gQVBJcyBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBleGVjdXRpb24gb2Ygc2V0dXAoKS5gICtcbiAgICAgICAgICAgIChgIElmIHlvdSBhcmUgdXNpbmcgYXN5bmMgc2V0dXAoKSwgbWFrZSBzdXJlIHRvIHJlZ2lzdGVyIGxpZmVjeWNsZSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGhvb2tzIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQgc3RhdGVtZW50LmBcbiAgICAgICAgICAgICAgICApKTtcbiAgICB9XG59XG5jb25zdCBjcmVhdGVIb29rID0gKGxpZmVjeWNsZSkgPT4gKGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkgPT4gXG4vLyBwb3N0LWNyZWF0ZSBsaWZlY3ljbGUgcmVnaXN0cmF0aW9ucyBhcmUgbm9vcHMgZHVyaW5nIFNTUiAoZXhjZXB0IGZvciBzZXJ2ZXJQcmVmZXRjaClcbighaXNJblNTUkNvbXBvbmVudFNldHVwIHx8IGxpZmVjeWNsZSA9PT0gXCJzcFwiIC8qIExpZmVjeWNsZUhvb2tzLlNFUlZFUl9QUkVGRVRDSCAqLykgJiZcbiAgICBpbmplY3RIb29rKGxpZmVjeWNsZSwgKC4uLmFyZ3MpID0+IGhvb2soLi4uYXJncyksIHRhcmdldCk7XG5jb25zdCBvbkJlZm9yZU1vdW50ID0gY3JlYXRlSG9vayhcImJtXCIgLyogTGlmZWN5Y2xlSG9va3MuQkVGT1JFX01PVU5UICovKTtcbmNvbnN0IG9uTW91bnRlZCA9IGNyZWF0ZUhvb2soXCJtXCIgLyogTGlmZWN5Y2xlSG9va3MuTU9VTlRFRCAqLyk7XG5jb25zdCBvbkJlZm9yZVVwZGF0ZSA9IGNyZWF0ZUhvb2soXCJidVwiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9VUERBVEUgKi8pO1xuY29uc3Qgb25VcGRhdGVkID0gY3JlYXRlSG9vayhcInVcIiAvKiBMaWZlY3ljbGVIb29rcy5VUERBVEVEICovKTtcbmNvbnN0IG9uQmVmb3JlVW5tb3VudCA9IGNyZWF0ZUhvb2soXCJidW1cIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfVU5NT1VOVCAqLyk7XG5jb25zdCBvblVubW91bnRlZCA9IGNyZWF0ZUhvb2soXCJ1bVwiIC8qIExpZmVjeWNsZUhvb2tzLlVOTU9VTlRFRCAqLyk7XG5jb25zdCBvblNlcnZlclByZWZldGNoID0gY3JlYXRlSG9vayhcInNwXCIgLyogTGlmZWN5Y2xlSG9va3MuU0VSVkVSX1BSRUZFVENIICovKTtcbmNvbnN0IG9uUmVuZGVyVHJpZ2dlcmVkID0gY3JlYXRlSG9vayhcInJ0Z1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUklHR0VSRUQgKi8pO1xuY29uc3Qgb25SZW5kZXJUcmFja2VkID0gY3JlYXRlSG9vayhcInJ0Y1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUkFDS0VEICovKTtcbmZ1bmN0aW9uIG9uRXJyb3JDYXB0dXJlZChob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpIHtcbiAgICBpbmplY3RIb29rKFwiZWNcIiAvKiBMaWZlY3ljbGVIb29rcy5FUlJPUl9DQVBUVVJFRCAqLywgaG9vaywgdGFyZ2V0KTtcbn1cblxuLyoqXG5SdW50aW1lIGhlbHBlciBmb3IgYXBwbHlpbmcgZGlyZWN0aXZlcyB0byBhIHZub2RlLiBFeGFtcGxlIHVzYWdlOlxuXG5jb25zdCBjb21wID0gcmVzb2x2ZUNvbXBvbmVudCgnY29tcCcpXG5jb25zdCBmb28gPSByZXNvbHZlRGlyZWN0aXZlKCdmb28nKVxuY29uc3QgYmFyID0gcmVzb2x2ZURpcmVjdGl2ZSgnYmFyJylcblxucmV0dXJuIHdpdGhEaXJlY3RpdmVzKGgoY29tcCksIFtcbiAgW2ZvbywgdGhpcy54XSxcbiAgW2JhciwgdGhpcy55XVxuXSlcbiovXG5mdW5jdGlvbiB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSkge1xuICAgIGlmIChpc0J1aWx0SW5EaXJlY3RpdmUobmFtZSkpIHtcbiAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBkaXJlY3RpdmUgaWRzIGFzIGN1c3RvbSBkaXJlY3RpdmUgaWQ6ICcgKyBuYW1lKTtcbiAgICB9XG59XG4vKipcbiAqIEFkZHMgZGlyZWN0aXZlcyB0byBhIFZOb2RlLlxuICovXG5mdW5jdGlvbiB3aXRoRGlyZWN0aXZlcyh2bm9kZSwgZGlyZWN0aXZlcykge1xuICAgIGNvbnN0IGludGVybmFsSW5zdGFuY2UgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYHdpdGhEaXJlY3RpdmVzIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHJlbmRlciBmdW5jdGlvbnMuYCk7XG4gICAgICAgIHJldHVybiB2bm9kZTtcbiAgICB9XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRFeHBvc2VQcm94eShpbnRlcm5hbEluc3RhbmNlKSB8fFxuICAgICAgICBpbnRlcm5hbEluc3RhbmNlLnByb3h5O1xuICAgIGNvbnN0IGJpbmRpbmdzID0gdm5vZGUuZGlycyB8fCAodm5vZGUuZGlycyA9IFtdKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcmVjdGl2ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IFtkaXIsIHZhbHVlLCBhcmcsIG1vZGlmaWVycyA9IEVNUFRZX09CSl0gPSBkaXJlY3RpdmVzW2ldO1xuICAgICAgICBpZiAoZGlyKSB7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihkaXIpKSB7XG4gICAgICAgICAgICAgICAgZGlyID0ge1xuICAgICAgICAgICAgICAgICAgICBtb3VudGVkOiBkaXIsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQ6IGRpclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlyLmRlZXApIHtcbiAgICAgICAgICAgICAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiaW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkaXIsXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgb2xkVmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBhcmcsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG59XG5mdW5jdGlvbiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBwcmV2Vk5vZGUsIGluc3RhbmNlLCBuYW1lKSB7XG4gICAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzO1xuICAgIGNvbnN0IG9sZEJpbmRpbmdzID0gcHJldlZOb2RlICYmIHByZXZWTm9kZS5kaXJzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IGJpbmRpbmdzW2ldO1xuICAgICAgICBpZiAob2xkQmluZGluZ3MpIHtcbiAgICAgICAgICAgIGJpbmRpbmcub2xkVmFsdWUgPSBvbGRCaW5kaW5nc1tpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaG9vayA9IGJpbmRpbmcuZGlyW25hbWVdO1xuICAgICAgICBpZiAoaG9vaykge1xuICAgICAgICAgICAgLy8gZGlzYWJsZSB0cmFja2luZyBpbnNpZGUgYWxsIGxpZmVjeWNsZSBob29rc1xuICAgICAgICAgICAgLy8gc2luY2UgdGhleSBjYW4gcG90ZW50aWFsbHkgYmUgY2FsbGVkIGluc2lkZSBlZmZlY3RzLlxuICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDggLyogRXJyb3JDb2Rlcy5ESVJFQ1RJVkVfSE9PSyAqLywgW1xuICAgICAgICAgICAgICAgIHZub2RlLmVsLFxuICAgICAgICAgICAgICAgIGJpbmRpbmcsXG4gICAgICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICAgICAgcHJldlZOb2RlXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgQ09NUE9ORU5UUyA9ICdjb21wb25lbnRzJztcbmNvbnN0IERJUkVDVElWRVMgPSAnZGlyZWN0aXZlcyc7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQobmFtZSwgbWF5YmVTZWxmUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChDT01QT05FTlRTLCBuYW1lLCB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UpIHx8IG5hbWU7XG59XG5jb25zdCBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UID0gU3ltYm9sKCk7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVEeW5hbWljQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGlmIChpc1N0cmluZyhjb21wb25lbnQpKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlQXNzZXQoQ09NUE9ORU5UUywgY29tcG9uZW50LCBmYWxzZSkgfHwgY29tcG9uZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaW52YWxpZCB0eXBlcyB3aWxsIGZhbGx0aHJvdWdoIHRvIGNyZWF0ZVZOb2RlIGFuZCByYWlzZSB3YXJuaW5nXG4gICAgICAgIHJldHVybiAoY29tcG9uZW50IHx8IE5VTExfRFlOQU1JQ19DT01QT05FTlQpO1xuICAgIH1cbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZURpcmVjdGl2ZShuYW1lKSB7XG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChESVJFQ1RJVkVTLCBuYW1lKTtcbn1cbi8vIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQodHlwZSwgbmFtZSwgd2Fybk1pc3NpbmcgPSB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UgPSBmYWxzZSkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIHx8IGN1cnJlbnRJbnN0YW5jZTtcbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgICAgICAgLy8gZXhwbGljaXQgc2VsZiBuYW1lIGhhcyBoaWdoZXN0IHByaW9yaXR5XG4gICAgICAgIGlmICh0eXBlID09PSBDT01QT05FTlRTKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmTmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50LCBmYWxzZSAvKiBkbyBub3QgaW5jbHVkZSBpbmZlcnJlZCBuYW1lIHRvIGF2b2lkIGJyZWFraW5nIGV4aXN0aW5nIGNvZGUgKi8pO1xuICAgICAgICAgICAgaWYgKHNlbGZOYW1lICYmXG4gICAgICAgICAgICAgICAgKHNlbGZOYW1lID09PSBuYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlbGZOYW1lID09PSBjYW1lbGl6ZShuYW1lKSB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmTmFtZSA9PT0gY2FwaXRhbGl6ZShjYW1lbGl6ZShuYW1lKSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbXBvbmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXMgPSBcbiAgICAgICAgLy8gbG9jYWwgcmVnaXN0cmF0aW9uXG4gICAgICAgIC8vIGNoZWNrIGluc3RhbmNlW3R5cGVdIGZpcnN0IHdoaWNoIGlzIHJlc29sdmVkIGZvciBvcHRpb25zIEFQSVxuICAgICAgICByZXNvbHZlKGluc3RhbmNlW3R5cGVdIHx8IENvbXBvbmVudFt0eXBlXSwgbmFtZSkgfHxcbiAgICAgICAgICAgIC8vIGdsb2JhbCByZWdpc3RyYXRpb25cbiAgICAgICAgICAgIHJlc29sdmUoaW5zdGFuY2UuYXBwQ29udGV4dFt0eXBlXSwgbmFtZSk7XG4gICAgICAgIGlmICghcmVzICYmIG1heWJlU2VsZlJlZmVyZW5jZSkge1xuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8gaW1wbGljaXQgc2VsZi1yZWZlcmVuY2VcbiAgICAgICAgICAgIHJldHVybiBDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG4gICAgICAgICAgICBjb25zdCBleHRyYSA9IHR5cGUgPT09IENPTVBPTkVOVFNcbiAgICAgICAgICAgICAgICA/IGBcXG5JZiB0aGlzIGlzIGEgbmF0aXZlIGN1c3RvbSBlbGVtZW50LCBtYWtlIHN1cmUgdG8gZXhjbHVkZSBpdCBmcm9tIGAgK1xuICAgICAgICAgICAgICAgICAgICBgY29tcG9uZW50IHJlc29sdXRpb24gdmlhIGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnQuYFxuICAgICAgICAgICAgICAgIDogYGA7XG4gICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gcmVzb2x2ZSAke3R5cGUuc2xpY2UoMCwgLTEpfTogJHtuYW1lfSR7ZXh0cmF9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYHJlc29sdmUke2NhcGl0YWxpemUodHlwZS5zbGljZSgwLCAtMSkpfSBgICtcbiAgICAgICAgICAgIGBjYW4gb25seSBiZSB1c2VkIGluIHJlbmRlcigpIG9yIHNldHVwKCkuYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZShyZWdpc3RyeSwgbmFtZSkge1xuICAgIHJldHVybiAocmVnaXN0cnkgJiZcbiAgICAgICAgKHJlZ2lzdHJ5W25hbWVdIHx8XG4gICAgICAgICAgICByZWdpc3RyeVtjYW1lbGl6ZShuYW1lKV0gfHxcbiAgICAgICAgICAgIHJlZ2lzdHJ5W2NhcGl0YWxpemUoY2FtZWxpemUobmFtZSkpXSkpO1xufVxuXG4vKipcbiAqIEFjdHVhbCBpbXBsZW1lbnRhdGlvblxuICovXG5mdW5jdGlvbiByZW5kZXJMaXN0KHNvdXJjZSwgcmVuZGVySXRlbSwgY2FjaGUsIGluZGV4KSB7XG4gICAgbGV0IHJldDtcbiAgICBjb25zdCBjYWNoZWQgPSAoY2FjaGUgJiYgY2FjaGVbaW5kZXhdKTtcbiAgICBpZiAoaXNBcnJheShzb3VyY2UpIHx8IGlzU3RyaW5nKHNvdXJjZSkpIHtcbiAgICAgICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHNvdXJjZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oc291cmNlW2ldLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIU51bWJlci5pc0ludGVnZXIoc291cmNlKSkge1xuICAgICAgICAgICAgd2FybihgVGhlIHYtZm9yIHJhbmdlIGV4cGVjdCBhbiBpbnRlZ2VyIHZhbHVlIGJ1dCBnb3QgJHtzb3VyY2V9LmApO1xuICAgICAgICB9XG4gICAgICAgIHJldCA9IG5ldyBBcnJheShzb3VyY2UpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZTsgaSsrKSB7XG4gICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKGkgKyAxLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgICAgaWYgKHNvdXJjZVtTeW1ib2wuaXRlcmF0b3JdKSB7XG4gICAgICAgICAgICByZXQgPSBBcnJheS5mcm9tKHNvdXJjZSwgKGl0ZW0sIGkpID0+IHJlbmRlckl0ZW0oaXRlbSwgaSwgdW5kZWZpbmVkLCBjYWNoZWQgJiYgY2FjaGVkW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICAgICAgICAgIHJldCA9IG5ldyBBcnJheShrZXlzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtrZXldLCBrZXksIGksIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXQgPSBbXTtcbiAgICB9XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNhY2hlW2luZGV4XSA9IHJldDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgY3JlYXRpbmcgZHluYW1pYyBzbG90cyBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVNsb3RzKHNsb3RzLCBkeW5hbWljU2xvdHMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNTbG90cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzbG90ID0gZHluYW1pY1Nsb3RzW2ldO1xuICAgICAgICAvLyBhcnJheSBvZiBkeW5hbWljIHNsb3QgZ2VuZXJhdGVkIGJ5IDx0ZW1wbGF0ZSB2LWZvcj1cIi4uLlwiICNbLi4uXT5cbiAgICAgICAgaWYgKGlzQXJyYXkoc2xvdCkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2xvdC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3Rbal0ubmFtZV0gPSBzbG90W2pdLmZuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNsb3QpIHtcbiAgICAgICAgICAgIC8vIGNvbmRpdGlvbmFsIHNpbmdsZSBzbG90IGdlbmVyYXRlZCBieSA8dGVtcGxhdGUgdi1pZj1cIi4uLlwiICNmb28+XG4gICAgICAgICAgICBzbG90c1tzbG90Lm5hbWVdID0gc2xvdC5rZXlcbiAgICAgICAgICAgICAgICA/ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHNsb3QuZm4oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBicmFuY2gga2V5IHNvIGVhY2ggY29uZGl0aW9uYWwgYnJhbmNoIGlzIGNvbnNpZGVyZWQgYVxuICAgICAgICAgICAgICAgICAgICAvLyBkaWZmZXJlbnQgZnJhZ21lbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5rZXkgPSBzbG90LmtleTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBzbG90LmZuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzbG90cztcbn1cblxuLyoqXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIGA8c2xvdC8+YFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVuZGVyU2xvdChzbG90cywgbmFtZSwgcHJvcHMgPSB7fSwgXG4vLyB0aGlzIGlzIG5vdCBhIHVzZXItZmFjaW5nIGZ1bmN0aW9uLCBzbyB0aGUgZmFsbGJhY2sgaXMgYWx3YXlzIGdlbmVyYXRlZCBieVxuLy8gdGhlIGNvbXBpbGVyIGFuZCBndWFyYW50ZWVkIHRvIGJlIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGFuIGFycmF5XG5mYWxsYmFjaywgbm9TbG90dGVkKSB7XG4gICAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5pc0NFIHx8XG4gICAgICAgIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50ICYmXG4gICAgICAgICAgICBpc0FzeW5jV3JhcHBlcihjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50KSAmJlxuICAgICAgICAgICAgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnBhcmVudC5pc0NFKSkge1xuICAgICAgICBpZiAobmFtZSAhPT0gJ2RlZmF1bHQnKVxuICAgICAgICAgICAgcHJvcHMubmFtZSA9IG5hbWU7XG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSgnc2xvdCcsIHByb3BzLCBmYWxsYmFjayAmJiBmYWxsYmFjaygpKTtcbiAgICB9XG4gICAgbGV0IHNsb3QgPSBzbG90c1tuYW1lXTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNsb3QgJiYgc2xvdC5sZW5ndGggPiAxKSB7XG4gICAgICAgIHdhcm4oYFNTUi1vcHRpbWl6ZWQgc2xvdCBmdW5jdGlvbiBkZXRlY3RlZCBpbiBhIG5vbi1TU1Itb3B0aW1pemVkIHJlbmRlciBgICtcbiAgICAgICAgICAgIGBmdW5jdGlvbi4gWW91IG5lZWQgdG8gbWFyayB0aGlzIGNvbXBvbmVudCB3aXRoICRkeW5hbWljLXNsb3RzIGluIHRoZSBgICtcbiAgICAgICAgICAgIGBwYXJlbnQgdGVtcGxhdGUuYCk7XG4gICAgICAgIHNsb3QgPSAoKSA9PiBbXTtcbiAgICB9XG4gICAgLy8gYSBjb21waWxlZCBzbG90IGRpc2FibGVzIGJsb2NrIHRyYWNraW5nIGJ5IGRlZmF1bHQgdG8gYXZvaWQgbWFudWFsXG4gICAgLy8gaW52b2NhdGlvbiBpbnRlcmZlcmluZyB3aXRoIHRlbXBsYXRlLWJhc2VkIGJsb2NrIHRyYWNraW5nLCBidXQgaW5cbiAgICAvLyBgcmVuZGVyU2xvdGAgd2UgY2FuIGJlIHN1cmUgdGhhdCBpdCdzIHRlbXBsYXRlLWJhc2VkIHNvIHdlIGNhbiBmb3JjZVxuICAgIC8vIGVuYWJsZSBpdC5cbiAgICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgICAgIHNsb3QuX2QgPSBmYWxzZTtcbiAgICB9XG4gICAgb3BlbkJsb2NrKCk7XG4gICAgY29uc3QgdmFsaWRTbG90Q29udGVudCA9IHNsb3QgJiYgZW5zdXJlVmFsaWRWTm9kZShzbG90KHByb3BzKSk7XG4gICAgY29uc3QgcmVuZGVyZWQgPSBjcmVhdGVCbG9jayhGcmFnbWVudCwge1xuICAgICAgICBrZXk6IHByb3BzLmtleSB8fFxuICAgICAgICAgICAgLy8gc2xvdCBjb250ZW50IGFycmF5IG9mIGEgZHluYW1pYyBjb25kaXRpb25hbCBzbG90IG1heSBoYXZlIGEgYnJhbmNoXG4gICAgICAgICAgICAvLyBrZXkgYXR0YWNoZWQgaW4gdGhlIGBjcmVhdGVTbG90c2AgaGVscGVyLCByZXNwZWN0IHRoYXRcbiAgICAgICAgICAgICh2YWxpZFNsb3RDb250ZW50ICYmIHZhbGlkU2xvdENvbnRlbnQua2V5KSB8fFxuICAgICAgICAgICAgYF8ke25hbWV9YFxuICAgIH0sIHZhbGlkU2xvdENvbnRlbnQgfHwgKGZhbGxiYWNrID8gZmFsbGJhY2soKSA6IFtdKSwgdmFsaWRTbG90Q29udGVudCAmJiBzbG90cy5fID09PSAxIC8qIFNsb3RGbGFncy5TVEFCTEUgKi9cbiAgICAgICAgPyA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqL1xuICAgICAgICA6IC0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqLyk7XG4gICAgaWYgKCFub1Nsb3R0ZWQgJiYgcmVuZGVyZWQuc2NvcGVJZCkge1xuICAgICAgICByZW5kZXJlZC5zbG90U2NvcGVJZHMgPSBbcmVuZGVyZWQuc2NvcGVJZCArICctcyddO1xuICAgIH1cbiAgICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgICAgIHNsb3QuX2QgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVuZGVyZWQ7XG59XG5mdW5jdGlvbiBlbnN1cmVWYWxpZFZOb2RlKHZub2Rlcykge1xuICAgIHJldHVybiB2bm9kZXMuc29tZShjaGlsZCA9PiB7XG4gICAgICAgIGlmICghaXNWTm9kZShjaGlsZCkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSBGcmFnbWVudCAmJlxuICAgICAgICAgICAgIWVuc3VyZVZhbGlkVk5vZGUoY2hpbGQuY2hpbGRyZW4pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KVxuICAgICAgICA/IHZub2Rlc1xuICAgICAgICA6IG51bGw7XG59XG5cbi8qKlxuICogRm9yIHByZWZpeGluZyBrZXlzIGluIHYtb249XCJvYmpcIiB3aXRoIFwib25cIlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdG9IYW5kbGVycyhvYmosIHByZXNlcnZlQ2FzZUlmTmVjZXNzYXJ5KSB7XG4gICAgY29uc3QgcmV0ID0ge307XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNPYmplY3Qob2JqKSkge1xuICAgICAgICB3YXJuKGB2LW9uIHdpdGggbm8gYXJndW1lbnQgZXhwZWN0cyBhbiBvYmplY3QgdmFsdWUuYCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICByZXRbcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkgJiYgL1tBLVpdLy50ZXN0KGtleSlcbiAgICAgICAgICAgID8gYG9uOiR7a2V5fWBcbiAgICAgICAgICAgIDogdG9IYW5kbGVyS2V5KGtleSldID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogIzI0MzcgSW4gVnVlIDMsIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBkbyBub3QgaGF2ZSBhIHB1YmxpYyBpbnN0YW5jZSBwcm94eSBidXRcbiAqIHRoZXkgZXhpc3QgaW4gdGhlIGludGVybmFsIHBhcmVudCBjaGFpbi4gRm9yIGNvZGUgdGhhdCByZWxpZXMgb24gdHJhdmVyc2luZ1xuICogcHVibGljICRwYXJlbnQgY2hhaW5zLCBza2lwIGZ1bmN0aW9uYWwgb25lcyBhbmQgZ28gdG8gdGhlIHBhcmVudCBpbnN0ZWFkLlxuICovXG5jb25zdCBnZXRQdWJsaWNJbnN0YW5jZSA9IChpKSA9PiB7XG4gICAgaWYgKCFpKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoaXNTdGF0ZWZ1bENvbXBvbmVudChpKSlcbiAgICAgICAgcmV0dXJuIGdldEV4cG9zZVByb3h5KGkpIHx8IGkucHJveHk7XG4gICAgcmV0dXJuIGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KTtcbn07XG5jb25zdCBwdWJsaWNQcm9wZXJ0aWVzTWFwID0gXG4vLyBNb3ZlIFBVUkUgbWFya2VyIHRvIG5ldyBsaW5lIHRvIHdvcmthcm91bmQgY29tcGlsZXIgZGlzY2FyZGluZyBpdFxuLy8gZHVlIHRvIHR5cGUgYW5ub3RhdGlvblxuLyojX19QVVJFX18qLyBleHRlbmQoT2JqZWN0LmNyZWF0ZShudWxsKSwge1xuICAgICQ6IGkgPT4gaSxcbiAgICAkZWw6IGkgPT4gaS52bm9kZS5lbCxcbiAgICAkZGF0YTogaSA9PiBpLmRhdGEsXG4gICAgJHByb3BzOiBpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBzaGFsbG93UmVhZG9ubHkoaS5wcm9wcykgOiBpLnByb3BzKSxcbiAgICAkYXR0cnM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLmF0dHJzKSA6IGkuYXR0cnMpLFxuICAgICRzbG90czogaSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGkuc2xvdHMpIDogaS5zbG90cyksXG4gICAgJHJlZnM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLnJlZnMpIDogaS5yZWZzKSxcbiAgICAkcGFyZW50OiBpID0+IGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KSxcbiAgICAkcm9vdDogaSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnJvb3QpLFxuICAgICRlbWl0OiBpID0+IGkuZW1pdCxcbiAgICAkb3B0aW9uczogaSA9PiAoX19WVUVfT1BUSU9OU19BUElfXyA/IHJlc29sdmVNZXJnZWRPcHRpb25zKGkpIDogaS50eXBlKSxcbiAgICAkZm9yY2VVcGRhdGU6IGkgPT4gaS5mIHx8IChpLmYgPSAoKSA9PiBxdWV1ZUpvYihpLnVwZGF0ZSkpLFxuICAgICRuZXh0VGljazogaSA9PiBpLm4gfHwgKGkubiA9IG5leHRUaWNrLmJpbmQoaS5wcm94eSkpLFxuICAgICR3YXRjaDogaSA9PiAoX19WVUVfT1BUSU9OU19BUElfXyA/IGluc3RhbmNlV2F0Y2guYmluZChpKSA6IE5PT1ApXG59KTtcbmNvbnN0IGlzUmVzZXJ2ZWRQcmVmaXggPSAoa2V5KSA9PiBrZXkgPT09ICdfJyB8fCBrZXkgPT09ICckJztcbmNvbnN0IGhhc1NldHVwQmluZGluZyA9IChzdGF0ZSwga2V5KSA9PiBzdGF0ZSAhPT0gRU1QVFlfT0JKICYmICFzdGF0ZS5fX2lzU2NyaXB0U2V0dXAgJiYgaGFzT3duKHN0YXRlLCBrZXkpO1xuY29uc3QgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0ge1xuICAgIGdldCh7IF86IGluc3RhbmNlIH0sIGtleSkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc2V0dXBTdGF0ZSwgZGF0YSwgcHJvcHMsIGFjY2Vzc0NhY2hlLCB0eXBlLCBhcHBDb250ZXh0IH0gPSBpbnN0YW5jZTtcbiAgICAgICAgLy8gZm9yIGludGVybmFsIGZvcm1hdHRlcnMgdG8ga25vdyB0aGF0IHRoaXMgaXMgYSBWdWUgaW5zdGFuY2VcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBrZXkgPT09ICdfX2lzVnVlJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGF0YSAvIHByb3BzIC8gY3R4XG4gICAgICAgIC8vIFRoaXMgZ2V0dGVyIGdldHMgY2FsbGVkIGZvciBldmVyeSBwcm9wZXJ0eSBhY2Nlc3Mgb24gdGhlIHJlbmRlciBjb250ZXh0XG4gICAgICAgIC8vIGR1cmluZyByZW5kZXIgYW5kIGlzIGEgbWFqb3IgaG90c3BvdC4gVGhlIG1vc3QgZXhwZW5zaXZlIHBhcnQgb2YgdGhpc1xuICAgICAgICAvLyBpcyB0aGUgbXVsdGlwbGUgaGFzT3duKCkgY2FsbHMuIEl0J3MgbXVjaCBmYXN0ZXIgdG8gZG8gYSBzaW1wbGUgcHJvcGVydHlcbiAgICAgICAgLy8gYWNjZXNzIG9uIGEgcGxhaW4gb2JqZWN0LCBzbyB3ZSB1c2UgYW4gYWNjZXNzQ2FjaGUgb2JqZWN0ICh3aXRoIG51bGxcbiAgICAgICAgLy8gcHJvdG90eXBlKSB0byBtZW1vaXplIHdoYXQgYWNjZXNzIHR5cGUgYSBrZXkgY29ycmVzcG9uZHMgdG8uXG4gICAgICAgIGxldCBub3JtYWxpemVkUHJvcHM7XG4gICAgICAgIGlmIChrZXlbMF0gIT09ICckJykge1xuICAgICAgICAgICAgY29uc3QgbiA9IGFjY2Vzc0NhY2hlW2tleV07XG4gICAgICAgICAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBBY2Nlc3NUeXBlcy5TRVRVUCAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBBY2Nlc3NUeXBlcy5EQVRBICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0IC8qIEFjY2Vzc1R5cGVzLkNPTlRFWFQgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBBY2Nlc3NUeXBlcy5QUk9QUyAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0OiBqdXN0IGZhbGx0aHJvdWdoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkpIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMSAvKiBBY2Nlc3NUeXBlcy5TRVRVUCAqLztcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dXBTdGF0ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDIgLyogQWNjZXNzVHlwZXMuREFUQSAqLztcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAvLyBvbmx5IGNhY2hlIG90aGVyIHByb3BlcnRpZXMgd2hlbiBpbnN0YW5jZSBoYXMgZGVjbGFyZWQgKHRodXMgc3RhYmxlKVxuICAgICAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgICAgIChub3JtYWxpemVkUHJvcHMgPSBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF0pICYmXG4gICAgICAgICAgICAgICAgaGFzT3duKG5vcm1hbGl6ZWRQcm9wcywga2V5KSkge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAzIC8qIEFjY2Vzc1R5cGVzLlBST1BTICovO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3R4ICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGN0eCwga2V5KSkge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIEFjY2Vzc1R5cGVzLkNPTlRFWFQgKi87XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9fVlVFX09QVElPTlNfQVBJX18gfHwgc2hvdWxkQ2FjaGVBY2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMCAvKiBBY2Nlc3NUeXBlcy5PVEhFUiAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwdWJsaWNHZXR0ZXIgPSBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV07XG4gICAgICAgIGxldCBjc3NNb2R1bGUsIGdsb2JhbFByb3BlcnRpZXM7XG4gICAgICAgIC8vIHB1YmxpYyAkeHh4IHByb3BlcnRpZXNcbiAgICAgICAgaWYgKHB1YmxpY0dldHRlcikge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJyRhdHRycycpIHtcbiAgICAgICAgICAgICAgICB0cmFjayhpbnN0YW5jZSwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBrZXkpO1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHB1YmxpY0dldHRlcihpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgIC8vIGNzcyBtb2R1bGUgKGluamVjdGVkIGJ5IHZ1ZS1sb2FkZXIpXG4gICAgICAgIChjc3NNb2R1bGUgPSB0eXBlLl9fY3NzTW9kdWxlcykgJiZcbiAgICAgICAgICAgIChjc3NNb2R1bGUgPSBjc3NNb2R1bGVba2V5XSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjc3NNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3R4ICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGN0eCwga2V5KSkge1xuICAgICAgICAgICAgLy8gdXNlciBtYXkgc2V0IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGB0aGlzYCB0aGF0IHN0YXJ0IHdpdGggYCRgXG4gICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gNCAvKiBBY2Nlc3NUeXBlcy5DT05URVhUICovO1xuICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAvLyBnbG9iYWwgcHJvcGVydGllc1xuICAgICAgICAoKGdsb2JhbFByb3BlcnRpZXMgPSBhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSxcbiAgICAgICAgICAgIGhhc093bihnbG9iYWxQcm9wZXJ0aWVzLCBrZXkpKSkge1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWxQcm9wZXJ0aWVzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgJiZcbiAgICAgICAgICAgICghaXNTdHJpbmcoa2V5KSB8fFxuICAgICAgICAgICAgICAgIC8vICMxMDkxIGF2b2lkIGludGVybmFsIGlzUmVmL2lzVk5vZGUgY2hlY2tzIG9uIGNvbXBvbmVudCBpbnN0YW5jZSBsZWFkaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gaW5maW5pdGUgd2FybmluZyBsb29wXG4gICAgICAgICAgICAgICAga2V5LmluZGV4T2YoJ19fdicpICE9PSAwKSkge1xuICAgICAgICAgICAgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJiBpc1Jlc2VydmVkUHJlZml4KGtleVswXSkgJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBQcm9wZXJ0eSAke0pTT04uc3RyaW5naWZ5KGtleSl9IG11c3QgYmUgYWNjZXNzZWQgdmlhICRkYXRhIGJlY2F1c2UgaXQgc3RhcnRzIHdpdGggYSByZXNlcnZlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgYGNoYXJhY3RlciAoXCIkXCIgb3IgXCJfXCIpIGFuZCBpcyBub3QgcHJveGllZCBvbiB0aGUgcmVuZGVyIGNvbnRleHQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnN0YW5jZSA9PT0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgd2FybihgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSB3YXMgYWNjZXNzZWQgZHVyaW5nIHJlbmRlciBgICtcbiAgICAgICAgICAgICAgICAgICAgYGJ1dCBpcyBub3QgZGVmaW5lZCBvbiBpbnN0YW5jZS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0KHsgXzogaW5zdGFuY2UgfSwga2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCB7IGRhdGEsIHNldHVwU3RhdGUsIGN0eCB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGlmIChoYXNTZXR1cEJpbmRpbmcoc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgICAgICAgc2V0dXBTdGF0ZVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIHNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwICYmXG4gICAgICAgICAgICBoYXNPd24oc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgICAgICAgd2FybihgQ2Fubm90IG11dGF0ZSA8c2NyaXB0IHNldHVwPiBiaW5kaW5nIFwiJHtrZXl9XCIgZnJvbSBPcHRpb25zIEFQSS5gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGFzT3duKGluc3RhbmNlLnByb3BzLCBrZXkpKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgQXR0ZW1wdGluZyB0byBtdXRhdGUgcHJvcCBcIiR7a2V5fVwiLiBQcm9wcyBhcmUgcmVhZG9ubHkuYCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleVswXSA9PT0gJyQnICYmIGtleS5zbGljZSgxKSBpbiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgQXR0ZW1wdGluZyB0byBtdXRhdGUgcHVibGljIHByb3BlcnR5IFwiJHtrZXl9XCIuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgUHJvcGVydGllcyBzdGFydGluZyB3aXRoICQgYXJlIHJlc2VydmVkIGFuZCByZWFkb25seS5gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYga2V5IGluIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh7IF86IHsgZGF0YSwgc2V0dXBTdGF0ZSwgYWNjZXNzQ2FjaGUsIGN0eCwgYXBwQ29udGV4dCwgcHJvcHNPcHRpb25zIH0gfSwga2V5KSB7XG4gICAgICAgIGxldCBub3JtYWxpemVkUHJvcHM7XG4gICAgICAgIHJldHVybiAoISFhY2Nlc3NDYWNoZVtrZXldIHx8XG4gICAgICAgICAgICAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpKSB8fFxuICAgICAgICAgICAgaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkgfHxcbiAgICAgICAgICAgICgobm9ybWFsaXplZFByb3BzID0gcHJvcHNPcHRpb25zWzBdKSAmJiBoYXNPd24obm9ybWFsaXplZFByb3BzLCBrZXkpKSB8fFxuICAgICAgICAgICAgaGFzT3duKGN0eCwga2V5KSB8fFxuICAgICAgICAgICAgaGFzT3duKHB1YmxpY1Byb3BlcnRpZXNNYXAsIGtleSkgfHxcbiAgICAgICAgICAgIGhhc093bihhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLCBrZXkpKTtcbiAgICB9LFxuICAgIGRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yLmdldCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkYXRlIGtleSBjYWNoZSBvZiBhIGdldHRlciBiYXNlZCBwcm9wZXJ0eSAjNTQxN1xuICAgICAgICAgICAgdGFyZ2V0Ll8uYWNjZXNzQ2FjaGVba2V5XSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGFzT3duKGRlc2NyaXB0b3IsICd2YWx1ZScpKSB7XG4gICAgICAgICAgICB0aGlzLnNldCh0YXJnZXQsIGtleSwgZGVzY3JpcHRvci52YWx1ZSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbn07XG5pZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFmYWxzZSkge1xuICAgIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5vd25LZXlzID0gKHRhcmdldCkgPT4ge1xuICAgICAgICB3YXJuKGBBdm9pZCBhcHAgbG9naWMgdGhhdCByZWxpZXMgb24gZW51bWVyYXRpbmcga2V5cyBvbiBhIGNvbXBvbmVudCBpbnN0YW5jZS4gYCArXG4gICAgICAgICAgICBgVGhlIGtleXMgd2lsbCBiZSBlbXB0eSBpbiBwcm9kdWN0aW9uIG1vZGUgdG8gYXZvaWQgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQuYCk7XG4gICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbiAgICB9O1xufVxuY29uc3QgUnVudGltZUNvbXBpbGVkUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0gLyojX19QVVJFX18qLyBleHRlbmQoe30sIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycywge1xuICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICAvLyBmYXN0IHBhdGggZm9yIHVuc2NvcGFibGVzIHdoZW4gdXNpbmcgYHdpdGhgIGJsb2NrXG4gICAgICAgIGlmIChrZXkgPT09IFN5bWJvbC51bnNjb3BhYmxlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuZ2V0KHRhcmdldCwga2V5LCB0YXJnZXQpO1xuICAgIH0sXG4gICAgaGFzKF8sIGtleSkge1xuICAgICAgICBjb25zdCBoYXMgPSBrZXlbMF0gIT09ICdfJyAmJiAhaXNHbG9iYWxseVdoaXRlbGlzdGVkKGtleSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhcyAmJiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuaGFzKF8sIGtleSkpIHtcbiAgICAgICAgICAgIHdhcm4oYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gc2hvdWxkIG5vdCBzdGFydCB3aXRoIF8gd2hpY2ggaXMgYSByZXNlcnZlZCBwcmVmaXggZm9yIFZ1ZSBpbnRlcm5hbHMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhcztcbiAgICB9XG59KTtcbi8vIGRldiBvbmx5XG4vLyBJbiBkZXYgbW9kZSwgdGhlIHByb3h5IHRhcmdldCBleHBvc2VzIHRoZSBzYW1lIHByb3BlcnRpZXMgYXMgc2VlbiBvbiBgdGhpc2Bcbi8vIGZvciBlYXNpZXIgY29uc29sZSBpbnNwZWN0aW9uLiBJbiBwcm9kIG1vZGUgaXQgd2lsbCBiZSBhbiBlbXB0eSBvYmplY3Qgc29cbi8vIHRoZXNlIHByb3BlcnRpZXMgZGVmaW5pdGlvbnMgY2FuIGJlIHNraXBwZWQuXG5mdW5jdGlvbiBjcmVhdGVEZXZSZW5kZXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0ge307XG4gICAgLy8gZXhwb3NlIGludGVybmFsIGluc3RhbmNlIGZvciBwcm94eSBoYW5kbGVyc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGBfYCwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlXG4gICAgfSk7XG4gICAgLy8gZXhwb3NlIHB1YmxpYyBwcm9wZXJ0aWVzXG4gICAgT2JqZWN0LmtleXMocHVibGljUHJvcGVydGllc01hcCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpLFxuICAgICAgICAgICAgLy8gaW50ZXJjZXB0ZWQgYnkgdGhlIHByb3h5IHNvIG5vIG5lZWQgZm9yIGltcGxlbWVudGF0aW9uLFxuICAgICAgICAgICAgLy8gYnV0IG5lZWRlZCB0byBwcmV2ZW50IHNldCBlcnJvcnNcbiAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLy8gZGV2IG9ubHlcbmZ1bmN0aW9uIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgY29uc3QgeyBjdHgsIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10gfSA9IGluc3RhbmNlO1xuICAgIGlmIChwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMocHJvcHNPcHRpb25zKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlLnByb3BzW2tleV0sXG4gICAgICAgICAgICAgICAgc2V0OiBOT09QXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8gZGV2IG9ubHlcbmZ1bmN0aW9uIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7IGN0eCwgc2V0dXBTdGF0ZSB9ID0gaW5zdGFuY2U7XG4gICAgT2JqZWN0LmtleXModG9SYXcoc2V0dXBTdGF0ZSkpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaWYgKCFzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCkge1xuICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYHNldHVwKCkgcmV0dXJuIHByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gc2hvdWxkIG5vdCBzdGFydCB3aXRoIFwiJFwiIG9yIFwiX1wiIGAgK1xuICAgICAgICAgICAgICAgICAgICBgd2hpY2ggYXJlIHJlc2VydmVkIHByZWZpeGVzIGZvciBWdWUgaW50ZXJuYWxzLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gc2V0dXBTdGF0ZVtrZXldLFxuICAgICAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIHtcbiAgICBjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV0dXJuICh0eXBlLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKGNhY2hlW2tleV0pIHtcbiAgICAgICAgICAgIHdhcm4oYCR7dHlwZX0gcHJvcGVydHkgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gJHtjYWNoZVtrZXldfS5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlW2tleV0gPSB0eXBlO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmxldCBzaG91bGRDYWNoZUFjY2VzcyA9IHRydWU7XG5mdW5jdGlvbiBhcHBseU9wdGlvbnMoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpO1xuICAgIGNvbnN0IHB1YmxpY1RoaXMgPSBpbnN0YW5jZS5wcm94eTtcbiAgICBjb25zdCBjdHggPSBpbnN0YW5jZS5jdHg7XG4gICAgLy8gZG8gbm90IGNhY2hlIHByb3BlcnR5IGFjY2VzcyBvbiBwdWJsaWMgcHJveHkgZHVyaW5nIHN0YXRlIGluaXRpYWxpemF0aW9uXG4gICAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSBmYWxzZTtcbiAgICAvLyBjYWxsIGJlZm9yZUNyZWF0ZSBmaXJzdCBiZWZvcmUgYWNjZXNzaW5nIG90aGVyIG9wdGlvbnMgc2luY2VcbiAgICAvLyB0aGUgaG9vayBtYXkgbXV0YXRlIHJlc29sdmVkIG9wdGlvbnMgKCMyNzkxKVxuICAgIGlmIChvcHRpb25zLmJlZm9yZUNyZWF0ZSkge1xuICAgICAgICBjYWxsSG9vayhvcHRpb25zLmJlZm9yZUNyZWF0ZSwgaW5zdGFuY2UsIFwiYmNcIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfQ1JFQVRFICovKTtcbiAgICB9XG4gICAgY29uc3QgeyBcbiAgICAvLyBzdGF0ZVxuICAgIGRhdGE6IGRhdGFPcHRpb25zLCBjb21wdXRlZDogY29tcHV0ZWRPcHRpb25zLCBtZXRob2RzLCB3YXRjaDogd2F0Y2hPcHRpb25zLCBwcm92aWRlOiBwcm92aWRlT3B0aW9ucywgaW5qZWN0OiBpbmplY3RPcHRpb25zLCBcbiAgICAvLyBsaWZlY3ljbGVcbiAgICBjcmVhdGVkLCBiZWZvcmVNb3VudCwgbW91bnRlZCwgYmVmb3JlVXBkYXRlLCB1cGRhdGVkLCBhY3RpdmF0ZWQsIGRlYWN0aXZhdGVkLCBiZWZvcmVEZXN0cm95LCBiZWZvcmVVbm1vdW50LCBkZXN0cm95ZWQsIHVubW91bnRlZCwgcmVuZGVyLCByZW5kZXJUcmFja2VkLCByZW5kZXJUcmlnZ2VyZWQsIGVycm9yQ2FwdHVyZWQsIHNlcnZlclByZWZldGNoLCBcbiAgICAvLyBwdWJsaWMgQVBJXG4gICAgZXhwb3NlLCBpbmhlcml0QXR0cnMsIFxuICAgIC8vIGFzc2V0c1xuICAgIGNvbXBvbmVudHMsIGRpcmVjdGl2ZXMsIGZpbHRlcnMgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIDogbnVsbDtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IFtwcm9wc09wdGlvbnNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xuICAgICAgICBpZiAocHJvcHNPcHRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJQcm9wc1wiIC8qIE9wdGlvblR5cGVzLlBST1BTICovLCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG9wdGlvbnMgaW5pdGlhbGl6YXRpb24gb3JkZXIgKHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBWdWUgMik6XG4gICAgLy8gLSBwcm9wcyAoYWxyZWFkeSBkb25lIG91dHNpZGUgb2YgdGhpcyBmdW5jdGlvbilcbiAgICAvLyAtIGluamVjdFxuICAgIC8vIC0gbWV0aG9kc1xuICAgIC8vIC0gZGF0YSAoZGVmZXJyZWQgc2luY2UgaXQgcmVsaWVzIG9uIGB0aGlzYCBhY2Nlc3MpXG4gICAgLy8gLSBjb21wdXRlZFxuICAgIC8vIC0gd2F0Y2ggKGRlZmVycmVkIHNpbmNlIGl0IHJlbGllcyBvbiBgdGhpc2AgYWNjZXNzKVxuICAgIGlmIChpbmplY3RPcHRpb25zKSB7XG4gICAgICAgIHJlc29sdmVJbmplY3Rpb25zKGluamVjdE9wdGlvbnMsIGN0eCwgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy51bndyYXBJbmplY3RlZFJlZik7XG4gICAgfVxuICAgIGlmIChtZXRob2RzKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZEhhbmRsZXIgPSBtZXRob2RzW2tleV07XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihtZXRob2RIYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgIC8vIEluIGRldiBtb2RlLCB3ZSB1c2UgdGhlIGBjcmVhdGVSZW5kZXJDb250ZXh0YCBmdW5jdGlvbiB0byBkZWZpbmVcbiAgICAgICAgICAgICAgICAvLyBtZXRob2RzIHRvIHRoZSBwcm94eSB0YXJnZXQsIGFuZCB0aG9zZSBhcmUgcmVhZC1vbmx5IGJ1dFxuICAgICAgICAgICAgICAgIC8vIHJlY29uZmlndXJhYmxlLCBzbyBpdCBuZWVkcyB0byBiZSByZWRlZmluZWQgaGVyZVxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbWV0aG9kSGFuZGxlci5iaW5kKHB1YmxpY1RoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4W2tleV0gPSBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiTWV0aG9kc1wiIC8qIE9wdGlvblR5cGVzLk1FVEhPRFMgKi8sIGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgTWV0aG9kIFwiJHtrZXl9XCIgaGFzIHR5cGUgXCIke3R5cGVvZiBtZXRob2RIYW5kbGVyfVwiIGluIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbi4gYCArXG4gICAgICAgICAgICAgICAgICAgIGBEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5P2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChkYXRhT3B0aW9ucykge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0Z1bmN0aW9uKGRhdGFPcHRpb25zKSkge1xuICAgICAgICAgICAgd2FybihgVGhlIGRhdGEgb3B0aW9uIG11c3QgYmUgYSBmdW5jdGlvbi4gYCArXG4gICAgICAgICAgICAgICAgYFBsYWluIG9iamVjdCB1c2FnZSBpcyBubyBsb25nZXIgc3VwcG9ydGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkYXRhT3B0aW9ucy5jYWxsKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzUHJvbWlzZShkYXRhKSkge1xuICAgICAgICAgICAgd2FybihgZGF0YSgpIHJldHVybmVkIGEgUHJvbWlzZSAtIG5vdGUgZGF0YSgpIGNhbm5vdCBiZSBhc3luYzsgSWYgeW91IGAgK1xuICAgICAgICAgICAgICAgIGBpbnRlbmQgdG8gcGVyZm9ybSBkYXRhIGZldGNoaW5nIGJlZm9yZSBjb21wb25lbnQgcmVuZGVycywgdXNlIGAgK1xuICAgICAgICAgICAgICAgIGBhc3luYyBzZXR1cCgpICsgPFN1c3BlbnNlPi5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgZGF0YSgpIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LmApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UuZGF0YSA9IHJlYWN0aXZlKGRhdGEpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiRGF0YVwiIC8qIE9wdGlvblR5cGVzLkRBVEEgKi8sIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV4cG9zZSBkYXRhIG9uIGN0eCBkdXJpbmcgZGV2XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByZWZpeChrZXlbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGRhdGFba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IE5PT1BcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHN0YXRlIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlIGF0IHRoaXMgcG9pbnQgLSBzdGFydCBjYWNoaW5nIGFjY2Vzc1xuICAgIHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbiAgICBpZiAoY29tcHV0ZWRPcHRpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNvbXB1dGVkT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qgb3B0ID0gY29tcHV0ZWRPcHRpb25zW2tleV07XG4gICAgICAgICAgICBjb25zdCBnZXQgPSBpc0Z1bmN0aW9uKG9wdClcbiAgICAgICAgICAgICAgICA/IG9wdC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpXG4gICAgICAgICAgICAgICAgOiBpc0Z1bmN0aW9uKG9wdC5nZXQpXG4gICAgICAgICAgICAgICAgICAgID8gb3B0LmdldC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpXG4gICAgICAgICAgICAgICAgICAgIDogTk9PUDtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgZ2V0ID09PSBOT09QKSB7XG4gICAgICAgICAgICAgICAgd2FybihgQ29tcHV0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBoYXMgbm8gZ2V0dGVyLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2V0ID0gIWlzRnVuY3Rpb24ob3B0KSAmJiBpc0Z1bmN0aW9uKG9wdC5zZXQpXG4gICAgICAgICAgICAgICAgPyBvcHQuc2V0LmJpbmQocHVibGljVGhpcylcbiAgICAgICAgICAgICAgICA6IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYFdyaXRlIG9wZXJhdGlvbiBmYWlsZWQ6IGNvbXB1dGVkIHByb3BlcnR5IFwiJHtrZXl9XCIgaXMgcmVhZG9ubHkuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiBOT09QO1xuICAgICAgICAgICAgY29uc3QgYyA9IGNvbXB1dGVkKHtcbiAgICAgICAgICAgICAgICBnZXQsXG4gICAgICAgICAgICAgICAgc2V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gYy52YWx1ZSxcbiAgICAgICAgICAgICAgICBzZXQ6IHYgPT4gKGMudmFsdWUgPSB2KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiQ29tcHV0ZWRcIiAvKiBPcHRpb25UeXBlcy5DT01QVVRFRCAqLywga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAod2F0Y2hPcHRpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHdhdGNoT3B0aW9ucykge1xuICAgICAgICAgICAgY3JlYXRlV2F0Y2hlcih3YXRjaE9wdGlvbnNba2V5XSwgY3R4LCBwdWJsaWNUaGlzLCBrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChwcm92aWRlT3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm92aWRlcyA9IGlzRnVuY3Rpb24ocHJvdmlkZU9wdGlvbnMpXG4gICAgICAgICAgICA/IHByb3ZpZGVPcHRpb25zLmNhbGwocHVibGljVGhpcylcbiAgICAgICAgICAgIDogcHJvdmlkZU9wdGlvbnM7XG4gICAgICAgIFJlZmxlY3Qub3duS2V5cyhwcm92aWRlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgcHJvdmlkZShrZXksIHByb3ZpZGVzW2tleV0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGNyZWF0ZWQpIHtcbiAgICAgICAgY2FsbEhvb2soY3JlYXRlZCwgaW5zdGFuY2UsIFwiY1wiIC8qIExpZmVjeWNsZUhvb2tzLkNSRUFURUQgKi8pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWdpc3RlckxpZmVjeWNsZUhvb2socmVnaXN0ZXIsIGhvb2spIHtcbiAgICAgICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgICAgICAgIGhvb2suZm9yRWFjaChfaG9vayA9PiByZWdpc3RlcihfaG9vay5iaW5kKHB1YmxpY1RoaXMpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaG9vaykge1xuICAgICAgICAgICAgcmVnaXN0ZXIoaG9vay5iaW5kKHB1YmxpY1RoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVNb3VudCwgYmVmb3JlTW91bnQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbk1vdW50ZWQsIG1vdW50ZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZVVwZGF0ZSwgYmVmb3JlVXBkYXRlKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25VcGRhdGVkLCB1cGRhdGVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25BY3RpdmF0ZWQsIGFjdGl2YXRlZCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uRGVhY3RpdmF0ZWQsIGRlYWN0aXZhdGVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25FcnJvckNhcHR1cmVkLCBlcnJvckNhcHR1cmVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmFja2VkLCByZW5kZXJUcmFja2VkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmlnZ2VyZWQsIHJlbmRlclRyaWdnZXJlZCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlVW5tb3VudCwgYmVmb3JlVW5tb3VudCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVW5tb3VudGVkLCB1bm1vdW50ZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblNlcnZlclByZWZldGNoLCBzZXJ2ZXJQcmVmZXRjaCk7XG4gICAgaWYgKGlzQXJyYXkoZXhwb3NlKSkge1xuICAgICAgICBpZiAoZXhwb3NlLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgZXhwb3NlZCA9IGluc3RhbmNlLmV4cG9zZWQgfHwgKGluc3RhbmNlLmV4cG9zZWQgPSB7fSk7XG4gICAgICAgICAgICBleHBvc2UuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvc2VkLCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNUaGlzW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogdmFsID0+IChwdWJsaWNUaGlzW2tleV0gPSB2YWwpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICAgICAgaW5zdGFuY2UuZXhwb3NlZCA9IHt9O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG9wdGlvbnMgdGhhdCBhcmUgaGFuZGxlZCB3aGVuIGNyZWF0aW5nIHRoZSBpbnN0YW5jZSBidXQgYWxzbyBuZWVkIHRvIGJlXG4gICAgLy8gYXBwbGllZCBmcm9tIG1peGluc1xuICAgIGlmIChyZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QKSB7XG4gICAgICAgIGluc3RhbmNlLnJlbmRlciA9IHJlbmRlcjtcbiAgICB9XG4gICAgaWYgKGluaGVyaXRBdHRycyAhPSBudWxsKSB7XG4gICAgICAgIGluc3RhbmNlLmluaGVyaXRBdHRycyA9IGluaGVyaXRBdHRycztcbiAgICB9XG4gICAgLy8gYXNzZXQgb3B0aW9ucy5cbiAgICBpZiAoY29tcG9uZW50cylcbiAgICAgICAgaW5zdGFuY2UuY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XG4gICAgaWYgKGRpcmVjdGl2ZXMpXG4gICAgICAgIGluc3RhbmNlLmRpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUluamVjdGlvbnMoaW5qZWN0T3B0aW9ucywgY3R4LCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSBOT09QLCB1bndyYXBSZWYgPSBmYWxzZSkge1xuICAgIGlmIChpc0FycmF5KGluamVjdE9wdGlvbnMpKSB7XG4gICAgICAgIGluamVjdE9wdGlvbnMgPSBub3JtYWxpemVJbmplY3QoaW5qZWN0T3B0aW9ucyk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIGluamVjdE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgb3B0ID0gaW5qZWN0T3B0aW9uc1trZXldO1xuICAgICAgICBsZXQgaW5qZWN0ZWQ7XG4gICAgICAgIGlmIChpc09iamVjdChvcHQpKSB7XG4gICAgICAgICAgICBpZiAoJ2RlZmF1bHQnIGluIG9wdCkge1xuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSwgb3B0LmRlZmF1bHQsIHRydWUgLyogdHJlYXQgZGVmYXVsdCBmdW5jdGlvbiBhcyBmYWN0b3J5ICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbmplY3RlZCA9IGluamVjdChvcHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZihpbmplY3RlZCkpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gcmVtb3ZlIHRoZSBjaGVjayBpbiAzLjNcbiAgICAgICAgICAgIGlmICh1bndyYXBSZWYpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluamVjdGVkLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IHYgPT4gKGluamVjdGVkLnZhbHVlID0gdilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgaW5qZWN0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBpcyBhIHJlZiBhbmQgd2lsbCBiZSBhdXRvLXVud3JhcHBlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBhbmQgbm8gbG9uZ2VyIG5lZWRzIFxcYC52YWx1ZVxcYCBpbiB0aGUgbmV4dCBtaW5vciByZWxlYXNlLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBUbyBvcHQtaW4gdG8gdGhlIG5ldyBiZWhhdmlvciBub3csIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHNldCBcXGBhcHAuY29uZmlnLnVud3JhcEluamVjdGVkUmVmID0gdHJ1ZVxcYCAodGhpcyBjb25maWcgaXMgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgdGVtcG9yYXJ5IGFuZCB3aWxsIG5vdCBiZSBuZWVkZWQgaW4gdGhlIGZ1dHVyZS4pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eFtrZXldID0gaW5qZWN0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdHhba2V5XSA9IGluamVjdGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIkluamVjdFwiIC8qIE9wdGlvblR5cGVzLklOSkVDVCAqLywga2V5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNhbGxIb29rKGhvb2ssIGluc3RhbmNlLCB0eXBlKSB7XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaXNBcnJheShob29rKVxuICAgICAgICA/IGhvb2subWFwKGggPT4gaC5iaW5kKGluc3RhbmNlLnByb3h5KSlcbiAgICAgICAgOiBob29rLmJpbmQoaW5zdGFuY2UucHJveHkpLCBpbnN0YW5jZSwgdHlwZSk7XG59XG5mdW5jdGlvbiBjcmVhdGVXYXRjaGVyKHJhdywgY3R4LCBwdWJsaWNUaGlzLCBrZXkpIHtcbiAgICBjb25zdCBnZXR0ZXIgPSBrZXkuaW5jbHVkZXMoJy4nKVxuICAgICAgICA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywga2V5KVxuICAgICAgICA6ICgpID0+IHB1YmxpY1RoaXNba2V5XTtcbiAgICBpZiAoaXNTdHJpbmcocmF3KSkge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gY3R4W3Jhd107XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBoYW5kbGVyIHNwZWNpZmllZCBieSBrZXkgXCIke3Jhd31cImAsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24ocmF3KSkge1xuICAgICAgICB3YXRjaChnZXR0ZXIsIHJhdy5iaW5kKHB1YmxpY1RoaXMpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QocmF3KSkge1xuICAgICAgICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgICAgICAgICByYXcuZm9yRWFjaChyID0+IGNyZWF0ZVdhdGNoZXIociwgY3R4LCBwdWJsaWNUaGlzLCBrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBpc0Z1bmN0aW9uKHJhdy5oYW5kbGVyKVxuICAgICAgICAgICAgICAgID8gcmF3LmhhbmRsZXIuYmluZChwdWJsaWNUaGlzKVxuICAgICAgICAgICAgICAgIDogY3R4W3Jhdy5oYW5kbGVyXTtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgd2F0Y2goZ2V0dGVyLCBoYW5kbGVyLCByYXcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBoYW5kbGVyIHNwZWNpZmllZCBieSBrZXkgXCIke3Jhdy5oYW5kbGVyfVwiYCwgaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggb3B0aW9uOiBcIiR7a2V5fVwiYCwgcmF3KTtcbiAgICB9XG59XG4vKipcbiAqIFJlc29sdmUgbWVyZ2VkIG9wdGlvbnMgYW5kIGNhY2hlIGl0IG9uIHRoZSBjb21wb25lbnQuXG4gKiBUaGlzIGlzIGRvbmUgb25seSBvbmNlIHBlci1jb21wb25lbnQgc2luY2UgdGhlIG1lcmdpbmcgZG9lcyBub3QgaW52b2x2ZVxuICogaW5zdGFuY2VzLlxuICovXG5mdW5jdGlvbiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbnN0YW5jZS50eXBlO1xuICAgIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gYmFzZTtcbiAgICBjb25zdCB7IG1peGluczogZ2xvYmFsTWl4aW5zLCBvcHRpb25zQ2FjaGU6IGNhY2hlLCBjb25maWc6IHsgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzIH0gfSA9IGluc3RhbmNlLmFwcENvbnRleHQ7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGJhc2UpO1xuICAgIGxldCByZXNvbHZlZDtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJlc29sdmVkID0gY2FjaGVkO1xuICAgIH1cbiAgICBlbHNlIGlmICghZ2xvYmFsTWl4aW5zLmxlbmd0aCAmJiAhbWl4aW5zICYmICFleHRlbmRzT3B0aW9ucykge1xuICAgICAgICB7XG4gICAgICAgICAgICByZXNvbHZlZCA9IGJhc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlc29sdmVkID0ge307XG4gICAgICAgIGlmIChnbG9iYWxNaXhpbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBnbG9iYWxNaXhpbnMuZm9yRWFjaChtID0+IG1lcmdlT3B0aW9ucyhyZXNvbHZlZCwgbSwgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgbWVyZ2VPcHRpb25zKHJlc29sdmVkLCBiYXNlLCBvcHRpb25NZXJnZVN0cmF0ZWdpZXMpO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3QoYmFzZSkpIHtcbiAgICAgICAgY2FjaGUuc2V0KGJhc2UsIHJlc29sdmVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc29sdmVkO1xufVxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHRvLCBmcm9tLCBzdHJhdHMsIGFzTWl4aW4gPSBmYWxzZSkge1xuICAgIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gZnJvbTtcbiAgICBpZiAoZXh0ZW5kc09wdGlvbnMpIHtcbiAgICAgICAgbWVyZ2VPcHRpb25zKHRvLCBleHRlbmRzT3B0aW9ucywgc3RyYXRzLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKG1peGlucykge1xuICAgICAgICBtaXhpbnMuZm9yRWFjaCgobSkgPT4gbWVyZ2VPcHRpb25zKHRvLCBtLCBzdHJhdHMsIHRydWUpKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuICAgICAgICBpZiAoYXNNaXhpbiAmJiBrZXkgPT09ICdleHBvc2UnKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBcImV4cG9zZVwiIG9wdGlvbiBpcyBpZ25vcmVkIHdoZW4gZGVjbGFyZWQgaW4gbWl4aW5zIG9yIGV4dGVuZHMuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgSXQgc2hvdWxkIG9ubHkgYmUgZGVjbGFyZWQgaW4gdGhlIGJhc2UgY29tcG9uZW50IGl0c2VsZi5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmF0ID0gaW50ZXJuYWxPcHRpb25NZXJnZVN0cmF0c1trZXldIHx8IChzdHJhdHMgJiYgc3RyYXRzW2tleV0pO1xuICAgICAgICAgICAgdG9ba2V5XSA9IHN0cmF0ID8gc3RyYXQodG9ba2V5XSwgZnJvbVtrZXldKSA6IGZyb21ba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG87XG59XG5jb25zdCBpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzID0ge1xuICAgIGRhdGE6IG1lcmdlRGF0YUZuLFxuICAgIHByb3BzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gICAgZW1pdHM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgICAvLyBvYmplY3RzXG4gICAgbWV0aG9kczogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAgIGNvbXB1dGVkOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gICAgLy8gbGlmZWN5Y2xlXG4gICAgYmVmb3JlQ3JlYXRlOiBtZXJnZUFzQXJyYXksXG4gICAgY3JlYXRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGJlZm9yZU1vdW50OiBtZXJnZUFzQXJyYXksXG4gICAgbW91bnRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGJlZm9yZVVwZGF0ZTogbWVyZ2VBc0FycmF5LFxuICAgIHVwZGF0ZWQ6IG1lcmdlQXNBcnJheSxcbiAgICBiZWZvcmVEZXN0cm95OiBtZXJnZUFzQXJyYXksXG4gICAgYmVmb3JlVW5tb3VudDogbWVyZ2VBc0FycmF5LFxuICAgIGRlc3Ryb3llZDogbWVyZ2VBc0FycmF5LFxuICAgIHVubW91bnRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGFjdGl2YXRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGRlYWN0aXZhdGVkOiBtZXJnZUFzQXJyYXksXG4gICAgZXJyb3JDYXB0dXJlZDogbWVyZ2VBc0FycmF5LFxuICAgIHNlcnZlclByZWZldGNoOiBtZXJnZUFzQXJyYXksXG4gICAgLy8gYXNzZXRzXG4gICAgY29tcG9uZW50czogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAgIGRpcmVjdGl2ZXM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgICAvLyB3YXRjaFxuICAgIHdhdGNoOiBtZXJnZVdhdGNoT3B0aW9ucyxcbiAgICAvLyBwcm92aWRlIC8gaW5qZWN0XG4gICAgcHJvdmlkZTogbWVyZ2VEYXRhRm4sXG4gICAgaW5qZWN0OiBtZXJnZUluamVjdFxufTtcbmZ1bmN0aW9uIG1lcmdlRGF0YUZuKHRvLCBmcm9tKSB7XG4gICAgaWYgKCFmcm9tKSB7XG4gICAgICAgIHJldHVybiB0bztcbiAgICB9XG4gICAgaWYgKCF0bykge1xuICAgICAgICByZXR1cm4gZnJvbTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgICAgcmV0dXJuIChleHRlbmQpKGlzRnVuY3Rpb24odG8pID8gdG8uY2FsbCh0aGlzLCB0aGlzKSA6IHRvLCBpc0Z1bmN0aW9uKGZyb20pID8gZnJvbS5jYWxsKHRoaXMsIHRoaXMpIDogZnJvbSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1lcmdlSW5qZWN0KHRvLCBmcm9tKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0T3B0aW9ucyhub3JtYWxpemVJbmplY3QodG8pLCBub3JtYWxpemVJbmplY3QoZnJvbSkpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplSW5qZWN0KHJhdykge1xuICAgIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXNbcmF3W2ldXSA9IHJhd1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICByZXR1cm4gcmF3O1xufVxuZnVuY3Rpb24gbWVyZ2VBc0FycmF5KHRvLCBmcm9tKSB7XG4gICAgcmV0dXJuIHRvID8gWy4uLm5ldyBTZXQoW10uY29uY2F0KHRvLCBmcm9tKSldIDogZnJvbTtcbn1cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0T3B0aW9ucyh0bywgZnJvbSkge1xuICAgIHJldHVybiB0byA/IGV4dGVuZChleHRlbmQoT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8pLCBmcm9tKSA6IGZyb207XG59XG5mdW5jdGlvbiBtZXJnZVdhdGNoT3B0aW9ucyh0bywgZnJvbSkge1xuICAgIGlmICghdG8pXG4gICAgICAgIHJldHVybiBmcm9tO1xuICAgIGlmICghZnJvbSlcbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIGNvbnN0IG1lcmdlZCA9IGV4dGVuZChPYmplY3QuY3JlYXRlKG51bGwpLCB0byk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuICAgICAgICBtZXJnZWRba2V5XSA9IG1lcmdlQXNBcnJheSh0b1trZXldLCBmcm9tW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkO1xufVxuXG5mdW5jdGlvbiBpbml0UHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBpc1N0YXRlZnVsLCAvLyByZXN1bHQgb2YgYml0d2lzZSBmbGFnIGNvbXBhcmlzb25cbmlzU1NSID0gZmFsc2UpIHtcbiAgICBjb25zdCBwcm9wcyA9IHt9O1xuICAgIGNvbnN0IGF0dHJzID0ge307XG4gICAgZGVmKGF0dHJzLCBJbnRlcm5hbE9iamVjdEtleSwgMSk7XG4gICAgaW5zdGFuY2UucHJvcHNEZWZhdWx0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgc2V0RnVsbFByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcHJvcHMsIGF0dHJzKTtcbiAgICAvLyBlbnN1cmUgYWxsIGRlY2xhcmVkIHByb3Aga2V5cyBhcmUgcHJlc2VudFxuICAgIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkge1xuICAgICAgICBpZiAoIShrZXkgaW4gcHJvcHMpKSB7XG4gICAgICAgICAgICBwcm9wc1trZXldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHZhbGlkYXRpb25cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHZhbGlkYXRlUHJvcHMocmF3UHJvcHMgfHwge30sIHByb3BzLCBpbnN0YW5jZSk7XG4gICAgfVxuICAgIGlmIChpc1N0YXRlZnVsKSB7XG4gICAgICAgIC8vIHN0YXRlZnVsXG4gICAgICAgIGluc3RhbmNlLnByb3BzID0gaXNTU1IgPyBwcm9wcyA6IHNoYWxsb3dSZWFjdGl2ZShwcm9wcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWluc3RhbmNlLnR5cGUucHJvcHMpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWwgdy8gb3B0aW9uYWwgcHJvcHMsIHByb3BzID09PSBhdHRyc1xuICAgICAgICAgICAgaW5zdGFuY2UucHJvcHMgPSBhdHRycztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWwgdy8gZGVjbGFyZWQgcHJvcHNcbiAgICAgICAgICAgIGluc3RhbmNlLnByb3BzID0gcHJvcHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5zdGFuY2UuYXR0cnMgPSBhdHRycztcbn1cbmZ1bmN0aW9uIGlzSW5IbXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgd2hpbGUgKGluc3RhbmNlKSB7XG4gICAgICAgIGlmIChpbnN0YW5jZS50eXBlLl9faG1ySWQpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaW5zdGFuY2UgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCByYXdQcmV2UHJvcHMsIG9wdGltaXplZCkge1xuICAgIGNvbnN0IHsgcHJvcHMsIGF0dHJzLCB2bm9kZTogeyBwYXRjaEZsYWcgfSB9ID0gaW5zdGFuY2U7XG4gICAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xuICAgIGNvbnN0IFtvcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBsZXQgaGFzQXR0cnNDaGFuZ2VkID0gZmFsc2U7XG4gICAgaWYgKFxuICAgIC8vIGFsd2F5cyBmb3JjZSBmdWxsIGRpZmYgaW4gZGV2XG4gICAgLy8gLSAjMTk0MiBpZiBobXIgaXMgZW5hYmxlZCB3aXRoIHNmYyBjb21wb25lbnRcbiAgICAvLyAtIHZpdGUjODcyIG5vbi1zZmMgY29tcG9uZW50IHVzZWQgYnkgc2ZjIGNvbXBvbmVudFxuICAgICEoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSW5IbXJDb250ZXh0KGluc3RhbmNlKSkgJiZcbiAgICAgICAgKG9wdGltaXplZCB8fCBwYXRjaEZsYWcgPiAwKSAmJlxuICAgICAgICAhKHBhdGNoRmxhZyAmIDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqLykpIHtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDggLyogUGF0Y2hGbGFncy5QUk9QUyAqLykge1xuICAgICAgICAgICAgLy8gQ29tcGlsZXItZ2VuZXJhdGVkIHByb3BzICYgbm8ga2V5cyBjaGFuZ2UsIGp1c3Qgc2V0IHRoZSB1cGRhdGVkXG4gICAgICAgICAgICAvLyB0aGUgcHJvcHMuXG4gICAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gaW5zdGFuY2Uudm5vZGUuZHluYW1pY1Byb3BzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wc1RvVXBkYXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgICAgICAgICAgLy8gc2tpcCBpZiB0aGUgcHJvcCBrZXkgaXMgYSBkZWNsYXJlZCBlbWl0IGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgaWYgKGlzRW1pdExpc3RlbmVyKGluc3RhbmNlLmVtaXRzT3B0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUFJPUFMgZmxhZyBndWFyYW50ZWVzIHJhd1Byb3BzIHRvIGJlIG5vbi1udWxsXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByYXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGF0dHIgLyBwcm9wcyBzZXBhcmF0aW9uIHdhcyBkb25lIG9uIGluaXQgYW5kIHdpbGwgYmUgY29uc2lzdGVudFxuICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGlzIGNvZGUgcGF0aCwgc28ganVzdCBjaGVjayBpZiBhdHRycyBoYXZlIGl0LlxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKGF0dHJzLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IGF0dHJzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbWVsaXplZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1tjYW1lbGl6ZWRLZXldID0gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCByYXdDdXJyZW50UHJvcHMsIGNhbWVsaXplZEtleSwgdmFsdWUsIGluc3RhbmNlLCBmYWxzZSAvKiBpc0Fic2VudCAqLyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gZnVsbCBwcm9wcyB1cGRhdGUuXG4gICAgICAgIGlmIChzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpKSB7XG4gICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluIGNhc2Ugb2YgZHluYW1pYyBwcm9wcywgY2hlY2sgaWYgd2UgbmVlZCB0byBkZWxldGUga2V5cyBmcm9tXG4gICAgICAgIC8vIHRoZSBwcm9wcyBvYmplY3RcbiAgICAgICAgbGV0IGtlYmFiS2V5O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdDdXJyZW50UHJvcHMpIHtcbiAgICAgICAgICAgIGlmICghcmF3UHJvcHMgfHxcbiAgICAgICAgICAgICAgICAvLyBmb3IgY2FtZWxDYXNlXG4gICAgICAgICAgICAgICAgKCFoYXNPd24ocmF3UHJvcHMsIGtleSkgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGUgb3JpZ2luYWwgcHJvcHMgd2FzIHBhc3NlZCBpbiBhcyBrZWJhYi1jYXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlICgjOTU1KVxuICAgICAgICAgICAgICAgICAgICAoKGtlYmFiS2V5ID0gaHlwaGVuYXRlKGtleSkpID09PSBrZXkgfHwgIWhhc093bihyYXdQcm9wcywga2ViYWJLZXkpKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmF3UHJldlByb3BzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgY2FtZWxDYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAocmF3UHJldlByb3BzW2tleV0gIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBrZWJhYi1jYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3UHJldlByb3BzW2tlYmFiS2V5XSAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcmF3Q3VycmVudFByb3BzLCBrZXksIHVuZGVmaW5lZCwgaW5zdGFuY2UsIHRydWUgLyogaXNBYnNlbnQgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW4gdGhlIGNhc2Ugb2YgZnVuY3Rpb25hbCBjb21wb25lbnQgdy9vIHByb3BzIGRlY2xhcmF0aW9uLCBwcm9wcyBhbmRcbiAgICAgICAgLy8gYXR0cnMgcG9pbnQgdG8gdGhlIHNhbWUgb2JqZWN0IHNvIGl0IHNob3VsZCBhbHJlYWR5IGhhdmUgYmVlbiB1cGRhdGVkLlxuICAgICAgICBpZiAoYXR0cnMgIT09IHJhd0N1cnJlbnRQcm9wcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJhd1Byb3BzIHx8XG4gICAgICAgICAgICAgICAgICAgICghaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoIWZhbHNlICkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRyc1trZXldO1xuICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyB0cmlnZ2VyIHVwZGF0ZXMgZm9yICRhdHRycyBpbiBjYXNlIGl0J3MgdXNlZCBpbiBjb21wb25lbnQgc2xvdHNcbiAgICBpZiAoaGFzQXR0cnNDaGFuZ2VkKSB7XG4gICAgICAgIHRyaWdnZXIoaW5zdGFuY2UsIFwic2V0XCIgLyogVHJpZ2dlck9wVHlwZXMuU0VUICovLCAnJGF0dHJzJyk7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpIHtcbiAgICBjb25zdCBbb3B0aW9ucywgbmVlZENhc3RLZXlzXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBsZXQgaGFzQXR0cnNDaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IHJhd0Nhc3RWYWx1ZXM7XG4gICAgaWYgKHJhd1Byb3BzKSB7XG4gICAgICAgIGZvciAobGV0IGtleSBpbiByYXdQcm9wcykge1xuICAgICAgICAgICAgLy8ga2V5LCByZWYgYXJlIHJlc2VydmVkIGFuZCBuZXZlciBwYXNzZWQgZG93blxuICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmF3UHJvcHNba2V5XTtcbiAgICAgICAgICAgIC8vIHByb3Agb3B0aW9uIG5hbWVzIGFyZSBjYW1lbGl6ZWQgZHVyaW5nIG5vcm1hbGl6YXRpb24sIHNvIHRvIHN1cHBvcnRcbiAgICAgICAgICAgIC8vIGtlYmFiIC0+IGNhbWVsIGNvbnZlcnNpb24gaGVyZSB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBrZXkuXG4gICAgICAgICAgICBsZXQgY2FtZWxLZXk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBoYXNPd24ob3B0aW9ucywgKGNhbWVsS2V5ID0gY2FtZWxpemUoa2V5KSkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuZWVkQ2FzdEtleXMgfHwgIW5lZWRDYXN0S2V5cy5pbmNsdWRlcyhjYW1lbEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHNbY2FtZWxLZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAocmF3Q2FzdFZhbHVlcyB8fCAocmF3Q2FzdFZhbHVlcyA9IHt9KSlbY2FtZWxLZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzRW1pdExpc3RlbmVyKGluc3RhbmNlLmVtaXRzT3B0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBhdHRycykgfHwgdmFsdWUgIT09IGF0dHJzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobmVlZENhc3RLZXlzKSB7XG4gICAgICAgIGNvbnN0IHJhd0N1cnJlbnRQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgICAgICAgY29uc3QgY2FzdFZhbHVlcyA9IHJhd0Nhc3RWYWx1ZXMgfHwgRU1QVFlfT0JKO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5lZWRDYXN0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gbmVlZENhc3RLZXlzW2ldO1xuICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcmF3Q3VycmVudFByb3BzLCBrZXksIGNhc3RWYWx1ZXNba2V5XSwgaW5zdGFuY2UsICFoYXNPd24oY2FzdFZhbHVlcywga2V5KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhc0F0dHJzQ2hhbmdlZDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcHJvcHMsIGtleSwgdmFsdWUsIGluc3RhbmNlLCBpc0Fic2VudCkge1xuICAgIGNvbnN0IG9wdCA9IG9wdGlvbnNba2V5XTtcbiAgICBpZiAob3B0ICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgaGFzRGVmYXVsdCA9IGhhc093bihvcHQsICdkZWZhdWx0Jyk7XG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIGlmIChoYXNEZWZhdWx0ICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG9wdC5kZWZhdWx0O1xuICAgICAgICAgICAgaWYgKG9wdC50eXBlICE9PSBGdW5jdGlvbiAmJiBpc0Z1bmN0aW9uKGRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BzRGVmYXVsdHMgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcHJvcHNEZWZhdWx0cykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHByb3BzRGVmYXVsdHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcHJvcHNEZWZhdWx0c1trZXldID0gZGVmYXVsdFZhbHVlLmNhbGwobnVsbCwgcHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGJvb2xlYW4gY2FzdGluZ1xuICAgICAgICBpZiAob3B0WzAgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3QgKi9dKSB7XG4gICAgICAgICAgICBpZiAoaXNBYnNlbnQgJiYgIWhhc0RlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3B0WzEgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3RUcnVlICovXSAmJlxuICAgICAgICAgICAgICAgICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wc09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LnByb3BzQ2FjaGU7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgY29uc3QgcmF3ID0gY29tcC5wcm9wcztcbiAgICBjb25zdCBub3JtYWxpemVkID0ge307XG4gICAgY29uc3QgbmVlZENhc3RLZXlzID0gW107XG4gICAgLy8gYXBwbHkgbWl4aW4vZXh0ZW5kcyBwcm9wc1xuICAgIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5kUHJvcHMgPSAocmF3KSA9PiB7XG4gICAgICAgICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IFtwcm9wcywga2V5c10gPSBub3JtYWxpemVQcm9wc09wdGlvbnMocmF3LCBhcHBDb250ZXh0LCB0cnVlKTtcbiAgICAgICAgICAgIGV4dGVuZChub3JtYWxpemVkLCBwcm9wcyk7XG4gICAgICAgICAgICBpZiAoa2V5cylcbiAgICAgICAgICAgICAgICBuZWVkQ2FzdEtleXMucHVzaCguLi5rZXlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRQcm9wcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXAuZXh0ZW5kcykge1xuICAgICAgICAgICAgZXh0ZW5kUHJvcHMoY29tcC5leHRlbmRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5taXhpbnMpIHtcbiAgICAgICAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kUHJvcHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XG4gICAgICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgICAgICAgY2FjaGUuc2V0KGNvbXAsIEVNUFRZX0FSUik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVNUFRZX0FSUjtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNTdHJpbmcocmF3W2ldKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYHByb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC5gLCByYXdbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGNhbWVsaXplKHJhd1tpXSk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdGVQcm9wTmFtZShub3JtYWxpemVkS2V5KSkge1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplZEtleV0gPSBFTVBUWV9PQko7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocmF3KSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzT2JqZWN0KHJhdykpIHtcbiAgICAgICAgICAgIHdhcm4oYGludmFsaWQgcHJvcHMgb3B0aW9uc2AsIHJhdyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmF3KSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZVByb3BOYW1lKG5vcm1hbGl6ZWRLZXkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gcmF3W2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IChub3JtYWxpemVkW25vcm1hbGl6ZWRLZXldID1cbiAgICAgICAgICAgICAgICAgICAgaXNBcnJheShvcHQpIHx8IGlzRnVuY3Rpb24ob3B0KSA/IHsgdHlwZTogb3B0IH0gOiBPYmplY3QuYXNzaWduKHt9LCBvcHQpKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib29sZWFuSW5kZXggPSBnZXRUeXBlSW5kZXgoQm9vbGVhbiwgcHJvcC50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nSW5kZXggPSBnZXRUeXBlSW5kZXgoU3RyaW5nLCBwcm9wLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBwcm9wWzAgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3QgKi9dID0gYm9vbGVhbkluZGV4ID4gLTE7XG4gICAgICAgICAgICAgICAgICAgIHByb3BbMSAvKiBCb29sZWFuRmxhZ3Muc2hvdWxkQ2FzdFRydWUgKi9dID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0luZGV4IDwgMCB8fCBib29sZWFuSW5kZXggPCBzdHJpbmdJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByb3AgbmVlZHMgYm9vbGVhbiBjYXN0aW5nIG9yIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2xlYW5JbmRleCA+IC0xIHx8IGhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkQ2FzdEtleXMucHVzaChub3JtYWxpemVkS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXMgPSBbbm9ybWFsaXplZCwgbmVlZENhc3RLZXlzXTtcbiAgICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICAgICAgY2FjaGUuc2V0KGNvbXAsIHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BOYW1lKGtleSkge1xuICAgIGlmIChrZXlbMF0gIT09ICckJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgcHJvcCBuYW1lOiBcIiR7a2V5fVwiIGlzIGEgcmVzZXJ2ZWQgcHJvcGVydHkuYCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIHVzZSBmdW5jdGlvbiBzdHJpbmcgbmFtZSB0byBjaGVjayB0eXBlIGNvbnN0cnVjdG9yc1xuLy8gc28gdGhhdCBpdCB3b3JrcyBhY3Jvc3Mgdm1zIC8gaWZyYW1lcy5cbmZ1bmN0aW9uIGdldFR5cGUoY3Rvcikge1xuICAgIGNvbnN0IG1hdGNoID0gY3RvciAmJiBjdG9yLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb24gKFxcdyspLyk7XG4gICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBjdG9yID09PSBudWxsID8gJ251bGwnIDogJyc7XG59XG5mdW5jdGlvbiBpc1NhbWVUeXBlKGEsIGIpIHtcbiAgICByZXR1cm4gZ2V0VHlwZShhKSA9PT0gZ2V0VHlwZShiKTtcbn1cbmZ1bmN0aW9uIGdldFR5cGVJbmRleCh0eXBlLCBleHBlY3RlZFR5cGVzKSB7XG4gICAgaWYgKGlzQXJyYXkoZXhwZWN0ZWRUeXBlcykpIHtcbiAgICAgICAgcmV0dXJuIGV4cGVjdGVkVHlwZXMuZmluZEluZGV4KHQgPT4gaXNTYW1lVHlwZSh0LCB0eXBlKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24oZXhwZWN0ZWRUeXBlcykpIHtcbiAgICAgICAgcmV0dXJuIGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlcywgdHlwZSkgPyAwIDogLTE7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQcm9wcyhyYXdQcm9wcywgcHJvcHMsIGluc3RhbmNlKSB7XG4gICAgY29uc3QgcmVzb2x2ZWRWYWx1ZXMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGluc3RhbmNlLnByb3BzT3B0aW9uc1swXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGxldCBvcHQgPSBvcHRpb25zW2tleV07XG4gICAgICAgIGlmIChvcHQgPT0gbnVsbClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB2YWxpZGF0ZVByb3Aoa2V5LCByZXNvbHZlZFZhbHVlc1trZXldLCBvcHQsICFoYXNPd24ocmF3UHJvcHMsIGtleSkgJiYgIWhhc093bihyYXdQcm9wcywgaHlwaGVuYXRlKGtleSkpKTtcbiAgICB9XG59XG4vKipcbiAqIGRldiBvbmx5XG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcChuYW1lLCB2YWx1ZSwgcHJvcCwgaXNBYnNlbnQpIHtcbiAgICBjb25zdCB7IHR5cGUsIHJlcXVpcmVkLCB2YWxpZGF0b3IgfSA9IHByb3A7XG4gICAgLy8gcmVxdWlyZWQhXG4gICAgaWYgKHJlcXVpcmVkICYmIGlzQWJzZW50KSB7XG4gICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogXCInICsgbmFtZSArICdcIicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG1pc3NpbmcgYnV0IG9wdGlvbmFsXG4gICAgaWYgKHZhbHVlID09IG51bGwgJiYgIXByb3AucmVxdWlyZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB0eXBlIGNoZWNrXG4gICAgaWYgKHR5cGUgIT0gbnVsbCAmJiB0eXBlICE9PSB0cnVlKSB7XG4gICAgICAgIGxldCBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHR5cGVzID0gaXNBcnJheSh0eXBlKSA/IHR5cGUgOiBbdHlwZV07XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgICAgICAgLy8gdmFsdWUgaXMgdmFsaWQgYXMgbG9uZyBhcyBvbmUgb2YgdGhlIHNwZWNpZmllZCB0eXBlcyBtYXRjaFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aCAmJiAhaXNWYWxpZDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbGlkLCBleHBlY3RlZFR5cGUgfSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVzW2ldKTtcbiAgICAgICAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChleHBlY3RlZFR5cGUgfHwgJycpO1xuICAgICAgICAgICAgaXNWYWxpZCA9IHZhbGlkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgd2FybihnZXRJbnZhbGlkVHlwZU1lc3NhZ2UobmFtZSwgdmFsdWUsIGV4cGVjdGVkVHlwZXMpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjdXN0b20gdmFsaWRhdG9yXG4gICAgaWYgKHZhbGlkYXRvciAmJiAhdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIG5hbWUgKyAnXCIuJyk7XG4gICAgfVxufVxuY29uc3QgaXNTaW1wbGVUeXBlID0gLyojX19QVVJFX18qLyBtYWtlTWFwKCdTdHJpbmcsTnVtYmVyLEJvb2xlYW4sRnVuY3Rpb24sU3ltYm9sLEJpZ0ludCcpO1xuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG4gICAgbGV0IHZhbGlkO1xuICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGdldFR5cGUodHlwZSk7XG4gICAgaWYgKGlzU2ltcGxlVHlwZShleHBlY3RlZFR5cGUpKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgIHZhbGlkID0gdCA9PT0gZXhwZWN0ZWRUeXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIC8vIGZvciBwcmltaXRpdmUgd3JhcHBlciBvYmplY3RzXG4gICAgICAgIGlmICghdmFsaWQgJiYgdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgdmFsaWQgPSBpc09iamVjdCh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ0FycmF5Jykge1xuICAgICAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdudWxsJykge1xuICAgICAgICB2YWxpZCA9IHZhbHVlID09PSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkLFxuICAgICAgICBleHBlY3RlZFR5cGVcbiAgICB9O1xufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBnZXRJbnZhbGlkVHlwZU1lc3NhZ2UobmFtZSwgdmFsdWUsIGV4cGVjdGVkVHlwZXMpIHtcbiAgICBsZXQgbWVzc2FnZSA9IGBJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJHtuYW1lfVwiLmAgK1xuICAgICAgICBgIEV4cGVjdGVkICR7ZXhwZWN0ZWRUeXBlcy5tYXAoY2FwaXRhbGl6ZSkuam9pbignIHwgJyl9YDtcbiAgICBjb25zdCBleHBlY3RlZFR5cGUgPSBleHBlY3RlZFR5cGVzWzBdO1xuICAgIGNvbnN0IHJlY2VpdmVkVHlwZSA9IHRvUmF3VHlwZSh2YWx1ZSk7XG4gICAgY29uc3QgZXhwZWN0ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIGV4cGVjdGVkVHlwZSk7XG4gICAgY29uc3QgcmVjZWl2ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIHJlY2VpdmVkVHlwZSk7XG4gICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBzcGVjaWZ5IGV4cGVjdGVkIHZhbHVlXG4gICAgaWYgKGV4cGVjdGVkVHlwZXMubGVuZ3RoID09PSAxICYmXG4gICAgICAgIGlzRXhwbGljYWJsZShleHBlY3RlZFR5cGUpICYmXG4gICAgICAgICFpc0Jvb2xlYW4oZXhwZWN0ZWRUeXBlLCByZWNlaXZlZFR5cGUpKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gYCB3aXRoIHZhbHVlICR7ZXhwZWN0ZWRWYWx1ZX1gO1xuICAgIH1cbiAgICBtZXNzYWdlICs9IGAsIGdvdCAke3JlY2VpdmVkVHlwZX0gYDtcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgcmVjZWl2ZWQgdmFsdWVcbiAgICBpZiAoaXNFeHBsaWNhYmxlKHJlY2VpdmVkVHlwZSkpIHtcbiAgICAgICAgbWVzc2FnZSArPSBgd2l0aCB2YWx1ZSAke3JlY2VpdmVkVmFsdWV9LmA7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBzdHlsZVZhbHVlKHZhbHVlLCB0eXBlKSB7XG4gICAgaWYgKHR5cGUgPT09ICdTdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBgXCIke3ZhbHVlfVwiYDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ051bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGAke051bWJlcih2YWx1ZSl9YDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBgJHt2YWx1ZX1gO1xuICAgIH1cbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqL1xuZnVuY3Rpb24gaXNFeHBsaWNhYmxlKHR5cGUpIHtcbiAgICBjb25zdCBleHBsaWNpdFR5cGVzID0gWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXTtcbiAgICByZXR1cm4gZXhwbGljaXRUeXBlcy5zb21lKGVsZW0gPT4gdHlwZS50b0xvd2VyQ2FzZSgpID09PSBlbGVtKTtcbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqL1xuZnVuY3Rpb24gaXNCb29sZWFuKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gYXJncy5zb21lKGVsZW0gPT4gZWxlbS50b0xvd2VyQ2FzZSgpID09PSAnYm9vbGVhbicpO1xufVxuXG5jb25zdCBpc0ludGVybmFsS2V5ID0gKGtleSkgPT4ga2V5WzBdID09PSAnXycgfHwga2V5ID09PSAnJHN0YWJsZSc7XG5jb25zdCBub3JtYWxpemVTbG90VmFsdWUgPSAodmFsdWUpID0+IGlzQXJyYXkodmFsdWUpXG4gICAgPyB2YWx1ZS5tYXAobm9ybWFsaXplVk5vZGUpXG4gICAgOiBbbm9ybWFsaXplVk5vZGUodmFsdWUpXTtcbmNvbnN0IG5vcm1hbGl6ZVNsb3QgPSAoa2V5LCByYXdTbG90LCBjdHgpID0+IHtcbiAgICBpZiAocmF3U2xvdC5fbikge1xuICAgICAgICAvLyBhbHJlYWR5IG5vcm1hbGl6ZWQgLSAjNTM1M1xuICAgICAgICByZXR1cm4gcmF3U2xvdDtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHdpdGhDdHgoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjdXJyZW50SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHdhcm4oYFNsb3QgXCIke2tleX1cIiBpbnZva2VkIG91dHNpZGUgb2YgdGhlIHJlbmRlciBmdW5jdGlvbjogYCArXG4gICAgICAgICAgICAgICAgYHRoaXMgd2lsbCBub3QgdHJhY2sgZGVwZW5kZW5jaWVzIHVzZWQgaW4gdGhlIHNsb3QuIGAgK1xuICAgICAgICAgICAgICAgIGBJbnZva2UgdGhlIHNsb3QgZnVuY3Rpb24gaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24gaW5zdGVhZC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9ybWFsaXplU2xvdFZhbHVlKHJhd1Nsb3QoLi4uYXJncykpO1xuICAgIH0sIGN0eCk7XG4gICAgbm9ybWFsaXplZC5fYyA9IGZhbHNlO1xuICAgIHJldHVybiBub3JtYWxpemVkO1xufTtcbmNvbnN0IG5vcm1hbGl6ZU9iamVjdFNsb3RzID0gKHJhd1Nsb3RzLCBzbG90cywgaW5zdGFuY2UpID0+IHtcbiAgICBjb25zdCBjdHggPSByYXdTbG90cy5fY3R4O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHJhd1Nsb3RzKSB7XG4gICAgICAgIGlmIChpc0ludGVybmFsS2V5KGtleSkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSByYXdTbG90c1trZXldO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHNsb3RzW2tleV0gPSBub3JtYWxpemVTbG90KGtleSwgdmFsdWUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICEoZmFsc2UgKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYE5vbi1mdW5jdGlvbiB2YWx1ZSBlbmNvdW50ZXJlZCBmb3Igc2xvdCBcIiR7a2V5fVwiLiBgICtcbiAgICAgICAgICAgICAgICAgICAgYFByZWZlciBmdW5jdGlvbiBzbG90cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVNsb3RWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICBzbG90c1trZXldID0gKCkgPT4gbm9ybWFsaXplZDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBub3JtYWxpemVWTm9kZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbikgPT4ge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgIWlzS2VlcEFsaXZlKGluc3RhbmNlLnZub2RlKSAmJlxuICAgICAgICAhKGZhbHNlICkpIHtcbiAgICAgICAgd2FybihgTm9uLWZ1bmN0aW9uIHZhbHVlIGVuY291bnRlcmVkIGZvciBkZWZhdWx0IHNsb3QuIGAgK1xuICAgICAgICAgICAgYFByZWZlciBmdW5jdGlvbiBzbG90cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLmApO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKGNoaWxkcmVuKTtcbiAgICBpbnN0YW5jZS5zbG90cy5kZWZhdWx0ID0gKCkgPT4gbm9ybWFsaXplZDtcbn07XG5jb25zdCBpbml0U2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuKSA9PiB7XG4gICAgaWYgKGluc3RhbmNlLnZub2RlLnNoYXBlRmxhZyAmIDMyIC8qIFNoYXBlRmxhZ3MuU0xPVFNfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IGNoaWxkcmVuLl87XG4gICAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgICAgICAvLyB1c2VycyBjYW4gZ2V0IHRoZSBzaGFsbG93IHJlYWRvbmx5IHZlcnNpb24gb2YgdGhlIHNsb3RzIG9iamVjdCB0aHJvdWdoIGB0aGlzLiRzbG90c2AsXG4gICAgICAgICAgICAvLyB3ZSBzaG91bGQgYXZvaWQgdGhlIHByb3h5IG9iamVjdCBwb2xsdXRpbmcgdGhlIHNsb3RzIG9mIHRoZSBpbnRlcm5hbCBpbnN0YW5jZVxuICAgICAgICAgICAgaW5zdGFuY2Uuc2xvdHMgPSB0b1JhdyhjaGlsZHJlbik7XG4gICAgICAgICAgICAvLyBtYWtlIGNvbXBpbGVyIG1hcmtlciBub24tZW51bWVyYWJsZVxuICAgICAgICAgICAgZGVmKGNoaWxkcmVuLCAnXycsIHR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9ybWFsaXplT2JqZWN0U2xvdHMoY2hpbGRyZW4sIChpbnN0YW5jZS5zbG90cyA9IHt9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGluc3RhbmNlLnNsb3RzID0ge307XG4gICAgICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgICAgICAgbm9ybWFsaXplVk5vZGVTbG90cyhpbnN0YW5jZSwgY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlZihpbnN0YW5jZS5zbG90cywgSW50ZXJuYWxPYmplY3RLZXksIDEpO1xufTtcbmNvbnN0IHVwZGF0ZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgeyB2bm9kZSwgc2xvdHMgfSA9IGluc3RhbmNlO1xuICAgIGxldCBuZWVkRGVsZXRpb25DaGVjayA9IHRydWU7XG4gICAgbGV0IGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IEVNUFRZX09CSjtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMzIgLyogU2hhcGVGbGFncy5TTE9UU19DSElMRFJFTiAqLykge1xuICAgICAgICBjb25zdCB0eXBlID0gY2hpbGRyZW4uXztcbiAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgIC8vIGNvbXBpbGVkIHNsb3RzLlxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gUGFyZW50IHdhcyBITVIgdXBkYXRlZCBzbyBzbG90IGNvbnRlbnQgbWF5IGhhdmUgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICAvLyBmb3JjZSB1cGRhdGUgc2xvdHMgYW5kIG1hcmsgaW5zdGFuY2UgZm9yIGhtciBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgZXh0ZW5kKHNsb3RzLCBjaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpbWl6ZWQgJiYgdHlwZSA9PT0gMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovKSB7XG4gICAgICAgICAgICAgICAgLy8gY29tcGlsZWQgQU5EIHN0YWJsZS5cbiAgICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSwgYW5kIHNraXAgc3RhbGUgc2xvdHMgcmVtb3ZhbC5cbiAgICAgICAgICAgICAgICBuZWVkRGVsZXRpb25DaGVjayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29tcGlsZWQgYnV0IGR5bmFtaWMgKHYtaWYvdi1mb3Igb24gc2xvdHMpIC0gdXBkYXRlIHNsb3RzLCBidXQgc2tpcFxuICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6YXRpb24uXG4gICAgICAgICAgICAgICAgZXh0ZW5kKHNsb3RzLCBjaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgLy8gIzI4OTNcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHJlbmRlcmluZyB0aGUgb3B0aW1pemVkIHNsb3RzIGJ5IG1hbnVhbGx5IHdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZGVsZXRlIHRoZSBgc2xvdHMuX2AgZmxhZyBpZiBuZWNlc3NhcnkgdG8gbWFrZSBzdWJzZXF1ZW50IHVwZGF0ZXMgcmVsaWFibGUsXG4gICAgICAgICAgICAgICAgLy8gaS5lLiBsZXQgdGhlIGByZW5kZXJTbG90YCBjcmVhdGUgdGhlIGJhaWxlZCBGcmFnbWVudFxuICAgICAgICAgICAgICAgIGlmICghb3B0aW1pemVkICYmIHR5cGUgPT09IDEgLyogU2xvdEZsYWdzLlNUQUJMRSAqLykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2xvdHMuXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZWVkRGVsZXRpb25DaGVjayA9ICFjaGlsZHJlbi4kc3RhYmxlO1xuICAgICAgICAgICAgbm9ybWFsaXplT2JqZWN0U2xvdHMoY2hpbGRyZW4sIHNsb3RzKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQgPSBjaGlsZHJlbjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgLy8gbm9uIHNsb3Qgb2JqZWN0IGNoaWxkcmVuIChkaXJlY3QgdmFsdWUpIHBhc3NlZCB0byBhIGNvbXBvbmVudFxuICAgICAgICBub3JtYWxpemVWTm9kZVNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gICAgICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IHsgZGVmYXVsdDogMSB9O1xuICAgIH1cbiAgICAvLyBkZWxldGUgc3RhbGUgc2xvdHNcbiAgICBpZiAobmVlZERlbGV0aW9uQ2hlY2spIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2xvdHMpIHtcbiAgICAgICAgICAgIGlmICghaXNJbnRlcm5hbEtleShrZXkpICYmICEoa2V5IGluIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2xvdHNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUFwcENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXBwOiBudWxsLFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIGlzTmF0aXZlVGFnOiBOTyxcbiAgICAgICAgICAgIHBlcmZvcm1hbmNlOiBmYWxzZSxcbiAgICAgICAgICAgIGdsb2JhbFByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzOiB7fSxcbiAgICAgICAgICAgIGVycm9ySGFuZGxlcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgd2FybkhhbmRsZXI6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbXBpbGVyT3B0aW9uczoge31cbiAgICAgICAgfSxcbiAgICAgICAgbWl4aW5zOiBbXSxcbiAgICAgICAgY29tcG9uZW50czoge30sXG4gICAgICAgIGRpcmVjdGl2ZXM6IHt9LFxuICAgICAgICBwcm92aWRlczogT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgICAgb3B0aW9uc0NhY2hlOiBuZXcgV2Vha01hcCgpLFxuICAgICAgICBwcm9wc0NhY2hlOiBuZXcgV2Vha01hcCgpLFxuICAgICAgICBlbWl0c0NhY2hlOiBuZXcgV2Vha01hcCgpXG4gICAgfTtcbn1cbmxldCB1aWQgPSAwO1xuZnVuY3Rpb24gY3JlYXRlQXBwQVBJKHJlbmRlciwgaHlkcmF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVBcHAocm9vdENvbXBvbmVudCwgcm9vdFByb3BzID0gbnVsbCkge1xuICAgICAgICBpZiAoIWlzRnVuY3Rpb24ocm9vdENvbXBvbmVudCkpIHtcbiAgICAgICAgICAgIHJvb3RDb21wb25lbnQgPSBPYmplY3QuYXNzaWduKHt9LCByb290Q29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm9vdFByb3BzICE9IG51bGwgJiYgIWlzT2JqZWN0KHJvb3RQcm9wcykpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGByb290IHByb3BzIHBhc3NlZCB0byBhcHAubW91bnQoKSBtdXN0IGJlIGFuIG9iamVjdC5gKTtcbiAgICAgICAgICAgIHJvb3RQcm9wcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZUFwcENvbnRleHQoKTtcbiAgICAgICAgY29uc3QgaW5zdGFsbGVkUGx1Z2lucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgbGV0IGlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBhcHAgPSAoY29udGV4dC5hcHAgPSB7XG4gICAgICAgICAgICBfdWlkOiB1aWQrKyxcbiAgICAgICAgICAgIF9jb21wb25lbnQ6IHJvb3RDb21wb25lbnQsXG4gICAgICAgICAgICBfcHJvcHM6IHJvb3RQcm9wcyxcbiAgICAgICAgICAgIF9jb250YWluZXI6IG51bGwsXG4gICAgICAgICAgICBfY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgIF9pbnN0YW5jZTogbnVsbCxcbiAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICBnZXQgY29uZmlnKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbmZpZztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQgY29uZmlnKHYpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYGFwcC5jb25maWcgY2Fubm90IGJlIHJlcGxhY2VkLiBNb2RpZnkgaW5kaXZpZHVhbCBvcHRpb25zIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVzZShwbHVnaW4sIC4uLm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFsbGVkUGx1Z2lucy5oYXMocGx1Z2luKSkge1xuICAgICAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgUGx1Z2luIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwbHVnaW4gJiYgaXNGdW5jdGlvbihwbHVnaW4uaW5zdGFsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGVkUGx1Z2lucy5hZGQocGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmluc3RhbGwoYXBwLCAuLi5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbihwbHVnaW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbGxlZFBsdWdpbnMuYWRkKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbihhcHAsIC4uLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQSBwbHVnaW4gbXVzdCBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3Qgd2l0aCBhbiBcImluc3RhbGxcIiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBmdW5jdGlvbi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtaXhpbihtaXhpbikge1xuICAgICAgICAgICAgICAgIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGV4dC5taXhpbnMuaW5jbHVkZXMobWl4aW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1peGlucy5wdXNoKG1peGluKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJ01peGluIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1peGluLm5hbWUgPyBgOiAke21peGluLm5hbWV9YCA6ICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oJ01peGlucyBhcmUgb25seSBhdmFpbGFibGUgaW4gYnVpbGRzIHN1cHBvcnRpbmcgT3B0aW9ucyBBUEknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wb25lbnQobmFtZSwgY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSwgY29udGV4dC5jb25maWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb21wb25lbnRzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIGluIHRhcmdldCBhcHAuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSA9IGNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRGlyZWN0aXZlIFwiJHtuYW1lfVwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCBpbiB0YXJnZXQgYXBwLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV0gPSBkaXJlY3RpdmU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb3VudChyb290Q29udGFpbmVyLCBpc0h5ZHJhdGUsIGlzU1ZHKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gIzU1NzFcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiByb290Q29udGFpbmVyLl9fdnVlX2FwcF9fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBUaGVyZSBpcyBhbHJlYWR5IGFuIGFwcCBpbnN0YW5jZSBtb3VudGVkIG9uIHRoZSBob3N0IGNvbnRhaW5lci5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgIElmIHlvdSB3YW50IHRvIG1vdW50IGFub3RoZXIgYXBwIG9uIHRoZSBzYW1lIGhvc3QgY29udGFpbmVyLGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAgeW91IG5lZWQgdG8gdW5tb3VudCB0aGUgcHJldmlvdXMgYXBwIGJ5IGNhbGxpbmcgXFxgYXBwLnVubW91bnQoKVxcYCBmaXJzdC5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIGFwcCBjb250ZXh0IG9uIHRoZSByb290IFZOb2RlLlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgYmUgc2V0IG9uIHRoZSByb290IGluc3RhbmNlIG9uIGluaXRpYWwgbW91bnQuXG4gICAgICAgICAgICAgICAgICAgIHZub2RlLmFwcENvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAvLyBITVIgcm9vdCByZWxvYWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZWxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyKGNsb25lVk5vZGUodm5vZGUpLCByb290Q29udGFpbmVyLCBpc1NWRyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0h5ZHJhdGUgJiYgaHlkcmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZSh2bm9kZSwgcm9vdENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXIodm5vZGUsIHJvb3RDb250YWluZXIsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhcHAuX2NvbnRhaW5lciA9IHJvb3RDb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgIHJvb3RDb250YWluZXIuX192dWVfYXBwX18gPSBhcHA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEV4cG9zZVByb3h5KHZub2RlLmNvbXBvbmVudCkgfHwgdm5vZGUuY29tcG9uZW50LnByb3h5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQXBwIGhhcyBhbHJlYWR5IGJlZW4gbW91bnRlZC5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBJZiB5b3Ugd2FudCB0byByZW1vdW50IHRoZSBzYW1lIGFwcCwgbW92ZSB5b3VyIGFwcCBjcmVhdGlvbiBsb2dpYyBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpbnRvIGEgZmFjdG9yeSBmdW5jdGlvbiBhbmQgY3JlYXRlIGZyZXNoIGFwcCBpbnN0YW5jZXMgZm9yIGVhY2ggYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgbW91bnQgLSBlLmcuIFxcYGNvbnN0IGNyZWF0ZU15QXBwID0gKCkgPT4gY3JlYXRlQXBwKEFwcClcXGBgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5tb3VudCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcihudWxsLCBhcHAuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldnRvb2xzVW5tb3VudEFwcChhcHApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhcHAuX2NvbnRhaW5lci5fX3Z1ZV9hcHBfXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENhbm5vdCB1bm1vdW50IGFuIGFwcCB0aGF0IGlzIG5vdCBtb3VudGVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleSBpbiBjb250ZXh0LnByb3ZpZGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEFwcCBhbHJlYWR5IHByb3ZpZGVzIHByb3BlcnR5IHdpdGgga2V5IFwiJHtTdHJpbmcoa2V5KX1cIi4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgSXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIHRoZSBuZXcgdmFsdWUuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQucHJvdmlkZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBhcHA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXBwO1xuICAgIH07XG59XG5cbi8qKlxuICogRnVuY3Rpb24gZm9yIGhhbmRsaW5nIGEgdGVtcGxhdGUgcmVmXG4gKi9cbmZ1bmN0aW9uIHNldFJlZihyYXdSZWYsIG9sZFJhd1JlZiwgcGFyZW50U3VzcGVuc2UsIHZub2RlLCBpc1VubW91bnQgPSBmYWxzZSkge1xuICAgIGlmIChpc0FycmF5KHJhd1JlZikpIHtcbiAgICAgICAgcmF3UmVmLmZvckVhY2goKHIsIGkpID0+IHNldFJlZihyLCBvbGRSYXdSZWYgJiYgKGlzQXJyYXkob2xkUmF3UmVmKSA/IG9sZFJhd1JlZltpXSA6IG9sZFJhd1JlZiksIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgaXNVbm1vdW50KSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzQXN5bmNXcmFwcGVyKHZub2RlKSAmJiAhaXNVbm1vdW50KSB7XG4gICAgICAgIC8vIHdoZW4gbW91bnRpbmcgYXN5bmMgY29tcG9uZW50cywgbm90aGluZyBuZWVkcyB0byBiZSBkb25lLFxuICAgICAgICAvLyBiZWNhdXNlIHRoZSB0ZW1wbGF0ZSByZWYgaXMgZm9yd2FyZGVkIHRvIGlubmVyIGNvbXBvbmVudFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlZlZhbHVlID0gdm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqL1xuICAgICAgICA/IGdldEV4cG9zZVByb3h5KHZub2RlLmNvbXBvbmVudCkgfHwgdm5vZGUuY29tcG9uZW50LnByb3h5XG4gICAgICAgIDogdm5vZGUuZWw7XG4gICAgY29uc3QgdmFsdWUgPSBpc1VubW91bnQgPyBudWxsIDogcmVmVmFsdWU7XG4gICAgY29uc3QgeyBpOiBvd25lciwgcjogcmVmIH0gPSByYXdSZWY7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhb3duZXIpIHtcbiAgICAgICAgd2FybihgTWlzc2luZyByZWYgb3duZXIgY29udGV4dC4gcmVmIGNhbm5vdCBiZSB1c2VkIG9uIGhvaXN0ZWQgdm5vZGVzLiBgICtcbiAgICAgICAgICAgIGBBIHZub2RlIHdpdGggcmVmIG11c3QgYmUgY3JlYXRlZCBpbnNpZGUgdGhlIHJlbmRlciBmdW5jdGlvbi5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvbGRSZWYgPSBvbGRSYXdSZWYgJiYgb2xkUmF3UmVmLnI7XG4gICAgY29uc3QgcmVmcyA9IG93bmVyLnJlZnMgPT09IEVNUFRZX09CSiA/IChvd25lci5yZWZzID0ge30pIDogb3duZXIucmVmcztcbiAgICBjb25zdCBzZXR1cFN0YXRlID0gb3duZXIuc2V0dXBTdGF0ZTtcbiAgICAvLyBkeW5hbWljIHJlZiBjaGFuZ2VkLiB1bnNldCBvbGQgcmVmXG4gICAgaWYgKG9sZFJlZiAhPSBudWxsICYmIG9sZFJlZiAhPT0gcmVmKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyhvbGRSZWYpKSB7XG4gICAgICAgICAgICByZWZzW29sZFJlZl0gPSBudWxsO1xuICAgICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCBvbGRSZWYpKSB7XG4gICAgICAgICAgICAgICAgc2V0dXBTdGF0ZVtvbGRSZWZdID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlZihvbGRSZWYpKSB7XG4gICAgICAgICAgICBvbGRSZWYudmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uKHJlZikpIHtcbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKHJlZiwgb3duZXIsIDEyIC8qIEVycm9yQ29kZXMuRlVOQ1RJT05fUkVGICovLCBbdmFsdWUsIHJlZnNdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IF9pc1N0cmluZyA9IGlzU3RyaW5nKHJlZik7XG4gICAgICAgIGNvbnN0IF9pc1JlZiA9IGlzUmVmKHJlZik7XG4gICAgICAgIGlmIChfaXNTdHJpbmcgfHwgX2lzUmVmKSB7XG4gICAgICAgICAgICBjb25zdCBkb1NldCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmF3UmVmLmYpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBfaXNTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gaGFzT3duKHNldHVwU3RhdGUsIHJlZilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldHVwU3RhdGVbcmVmXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVmc1tyZWZdXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlZi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVW5tb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheShleGlzdGluZykgJiYgcmVtb3ZlKGV4aXN0aW5nLCByZWZWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXkoZXhpc3RpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pc1N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZzW3JlZl0gPSBbcmVmVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIHJlZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwU3RhdGVbcmVmXSA9IHJlZnNbcmVmXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmLnZhbHVlID0gW3JlZlZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd1JlZi5rKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1tyYXdSZWYua10gPSByZWYudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWV4aXN0aW5nLmluY2x1ZGVzKHJlZlZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnB1c2gocmVmVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9pc1N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICByZWZzW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCByZWYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFN0YXRlW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChfaXNSZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXdSZWYuaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnNbcmF3UmVmLmtdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIHJlZiB0eXBlOicsIHJlZiwgYCgke3R5cGVvZiByZWZ9KWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBkb1NldC5pZCA9IC0xO1xuICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChkb1NldCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9TZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgcmVmIHR5cGU6JywgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmxldCBoYXNNaXNtYXRjaCA9IGZhbHNlO1xuY29uc3QgaXNTVkdDb250YWluZXIgPSAoY29udGFpbmVyKSA9PiAvc3ZnLy50ZXN0KGNvbnRhaW5lci5uYW1lc3BhY2VVUkkpICYmIGNvbnRhaW5lci50YWdOYW1lICE9PSAnZm9yZWlnbk9iamVjdCc7XG5jb25zdCBpc0NvbW1lbnQgPSAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBET01Ob2RlVHlwZXMuQ09NTUVOVCAqLztcbi8vIE5vdGU6IGh5ZHJhdGlvbiBpcyBET00tc3BlY2lmaWNcbi8vIEJ1dCB3ZSBoYXZlIHRvIHBsYWNlIGl0IGluIGNvcmUgZHVlIHRvIHRpZ2h0IGNvdXBsaW5nIHdpdGggY29yZSAtIHNwbGl0dGluZ1xuLy8gaXQgb3V0IGNyZWF0ZXMgYSB0b24gb2YgdW5uZWNlc3NhcnkgY29tcGxleGl0eS5cbi8vIEh5ZHJhdGlvbiBhbHNvIGRlcGVuZHMgb24gc29tZSByZW5kZXJlciBpbnRlcm5hbCBsb2dpYyB3aGljaCBuZWVkcyB0byBiZVxuLy8gcGFzc2VkIGluIHZpYSBhcmd1bWVudHMuXG5mdW5jdGlvbiBjcmVhdGVIeWRyYXRpb25GdW5jdGlvbnMocmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICBjb25zdCB7IG10OiBtb3VudENvbXBvbmVudCwgcDogcGF0Y2gsIG86IHsgcGF0Y2hQcm9wLCBjcmVhdGVUZXh0LCBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcmVtb3ZlLCBpbnNlcnQsIGNyZWF0ZUNvbW1lbnQgfSB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XG4gICAgY29uc3QgaHlkcmF0ZSA9ICh2bm9kZSwgY29udGFpbmVyKSA9PiB7XG4gICAgICAgIGlmICghY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgQXR0ZW1wdGluZyB0byBoeWRyYXRlIGV4aXN0aW5nIG1hcmt1cCBidXQgY29udGFpbmVyIGlzIGVtcHR5LiBgICtcbiAgICAgICAgICAgICAgICAgICAgYFBlcmZvcm1pbmcgZnVsbCBtb3VudCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICBmbHVzaFBvc3RGbHVzaENicygpO1xuICAgICAgICAgICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhc01pc21hdGNoID0gZmFsc2U7XG4gICAgICAgIGh5ZHJhdGVOb2RlKGNvbnRhaW5lci5maXJzdENoaWxkLCB2bm9kZSwgbnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICAgICAgaWYgKGhhc01pc21hdGNoICYmICFmYWxzZSkge1xuICAgICAgICAgICAgLy8gdGhpcyBlcnJvciBzaG91bGQgc2hvdyB1cCBpbiBwcm9kdWN0aW9uXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBIeWRyYXRpb24gY29tcGxldGVkIGJ1dCBjb250YWlucyBtaXNtYXRjaGVzLmApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoeWRyYXRlTm9kZSA9IChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgICAgICBjb25zdCBpc0ZyYWdtZW50U3RhcnQgPSBpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSAnWyc7XG4gICAgICAgIGNvbnN0IG9uTWlzbWF0Y2ggPSAoKSA9PiBoYW5kbGVNaXNtYXRjaChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBpc0ZyYWdtZW50U3RhcnQpO1xuICAgICAgICBjb25zdCB7IHR5cGUsIHJlZiwgc2hhcGVGbGFnLCBwYXRjaEZsYWcgfSA9IHZub2RlO1xuICAgICAgICBsZXQgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgIHZub2RlLmVsID0gbm9kZTtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyA9PT0gLTIgLyogUGF0Y2hGbGFncy5CQUlMICovKSB7XG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHROb2RlID0gbnVsbDtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFRleHQ6XG4gICAgICAgICAgICAgICAgaWYgKGRvbVR5cGUgIT09IDMgLyogRE9NTm9kZVR5cGVzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gIzU3MjggZW1wdHkgdGV4dCBub2RlIGluc2lkZSBhIHNsb3QgY2FuIGNhdXNlIGh5ZHJhdGlvbiBmYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIHNlcnZlciByZW5kZXJlZCBIVE1MIHdvbid0IGNvbnRhaW4gYSB0ZXh0IG5vZGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0KCh2bm9kZS5lbCA9IGNyZWF0ZVRleHQoJycpKSwgcGFyZW50Tm9kZShub2RlKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSAhPT0gdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiB0ZXh0IG1pc21hdGNoOmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXFxuLSBDbGllbnQ6ICR7SlNPTi5zdHJpbmdpZnkobm9kZS5kYXRhKX1gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxcbi0gU2VydmVyOiAke0pTT04uc3RyaW5naWZ5KHZub2RlLmNoaWxkcmVuKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSA4IC8qIERPTU5vZGVUeXBlcy5DT01NRU5UICovIHx8IGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdGF0aWM6XG4gICAgICAgICAgICAgICAgaWYgKGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbnRpcmUgdGVtcGxhdGUgaXMgc3RhdGljIGJ1dCBTU1JlZCBhcyBhIGZyYWdtZW50XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkb21UeXBlID09PSAxIC8qIERPTU5vZGVUeXBlcy5FTEVNRU5UICovIHx8IGRvbVR5cGUgPT09IDMgLyogRE9NTm9kZVR5cGVzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIGFuY2hvciwgYWRvcHQgY29udGVudFxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzdGF0aWMgdm5vZGUgaGFzIGl0cyBjb250ZW50IHN0cmlwcGVkIGR1cmluZyBidWlsZCxcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRvcHQgaXQgZnJvbSB0aGUgc2VydmVyLXJlbmRlcmVkIEhUTUwuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5lZWRUb0Fkb3B0Q29udGVudCA9ICF2bm9kZS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdm5vZGUuc3RhdGljQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5lZWRUb0Fkb3B0Q29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbiArPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZS5ub2RlVHlwZSA9PT0gMSAvKiBET01Ob2RlVHlwZXMuRUxFTUVOVCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXh0Tm9kZS5vdXRlckhUTUxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV4dE5vZGUuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSB2bm9kZS5zdGF0aWNDb3VudCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBuZXh0Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobmV4dE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0ZyYWdtZW50U3RhcnQgPyBuZXh0U2libGluZyhuZXh0Tm9kZSkgOiBuZXh0Tm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZyYWdtZW50OlxuICAgICAgICAgICAgICAgIGlmICghaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBoeWRyYXRlRnJhZ21lbnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gMSAvKiBET01Ob2RlVHlwZXMuRUxFTUVOVCAqLyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUudHlwZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gaHlkcmF0ZUVsZW1lbnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gc2V0dGluZyB1cCB0aGUgcmVuZGVyIGVmZmVjdCwgaWYgdGhlIGluaXRpYWwgdm5vZGUgYWxyZWFkeVxuICAgICAgICAgICAgICAgICAgICAvLyBoYXMgLmVsIHNldCwgdGhlIGNvbXBvbmVudCB3aWxsIHBlcmZvcm0gaHlkcmF0aW9uIGluc3RlYWQgb2YgbW91bnRcbiAgICAgICAgICAgICAgICAgICAgLy8gb24gaXRzIHN1Yi10cmVlLlxuICAgICAgICAgICAgICAgICAgICB2bm9kZS5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50Q29tcG9uZW50KHZub2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKGNvbnRhaW5lciksIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgYmUgYXN5bmMsIHNvIGluIHRoZSBjYXNlIG9mIGZyYWdtZW50cyB3ZSBjYW5ub3QgcmVseVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBjb21wb25lbnQncyByZW5kZXJlZCBvdXRwdXQgdG8gZGV0ZXJtaW5lIHRoZSBlbmQgb2YgdGhlIGZyYWdtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQsIHdlIGRvIGEgbG9va2FoZWFkIHRvIGZpbmQgdGhlIGVuZCBhbmNob3Igbm9kZS5cbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBpc0ZyYWdtZW50U3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbG9jYXRlQ2xvc2luZ0FzeW5jQW5jaG9yKG5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyAjNDI5MyB0ZWxlcG9ydCBhcyBjb21wb25lbnQgcm9vdFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dE5vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29tbWVudChuZXh0Tm9kZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlLmRhdGEgPT09ICd0ZWxlcG9ydCBlbmQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5leHROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAjMzc4N1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBjb21wb25lbnQgaXMgYXN5bmMsIGl0IG1heSBnZXQgbW92ZWQgLyB1bm1vdW50ZWQgYmVmb3JlIGl0c1xuICAgICAgICAgICAgICAgICAgICAvLyBpbm5lciBjb21wb25lbnQgaXMgbG9hZGVkLCBzbyB3ZSBuZWVkIHRvIGdpdmUgaXQgYSBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSB0aGF0IG1hdGNoZXMgaXRzIGFkb3B0ZWQgRE9NLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBc3luY1dyYXBwZXIodm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3ViVHJlZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlID0gY3JlYXRlVk5vZGUoRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRyZWUuYW5jaG9yID0gbmV4dE5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXh0Tm9kZS5wcmV2aW91c1NpYmxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb250YWluZXIubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgPyBjcmVhdGVUZXh0Vk5vZGUoJycpIDogY3JlYXRlVk5vZGUoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZS5lbCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5jb21wb25lbnQuc3ViVHJlZSA9IHN1YlRyZWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gOCAvKiBET01Ob2RlVHlwZXMuQ09NTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IHZub2RlLnR5cGUuaHlkcmF0ZShub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlQ2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gdm5vZGUudHlwZS5oeWRyYXRlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihwYXJlbnROb2RlKG5vZGUpKSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIEhvc3RWTm9kZSB0eXBlOicsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWYgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbnVsbCwgcGFyZW50U3VzcGVuc2UsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dE5vZGU7XG4gICAgfTtcbiAgICBjb25zdCBoeWRyYXRlRWxlbWVudCA9IChlbCwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcGF0Y2hGbGFnLCBzaGFwZUZsYWcsIGRpcnMgfSA9IHZub2RlO1xuICAgICAgICAvLyAjNDAwNiBmb3IgZm9ybSBlbGVtZW50cyB3aXRoIG5vbi1zdHJpbmcgdi1tb2RlbCB2YWx1ZSBiaW5kaW5nc1xuICAgICAgICAvLyBlLmcuIDxvcHRpb24gOnZhbHVlPVwib2JqXCI+LCA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgOnRydWUtdmFsdWU9XCIxXCI+XG4gICAgICAgIGNvbnN0IGZvcmNlUGF0Y2hWYWx1ZSA9ICh0eXBlID09PSAnaW5wdXQnICYmIGRpcnMpIHx8IHR5cGUgPT09ICdvcHRpb24nO1xuICAgICAgICAvLyBza2lwIHByb3BzICYgY2hpbGRyZW4gaWYgdGhpcyBpcyBob2lzdGVkIHN0YXRpYyBub2Rlc1xuICAgICAgICAvLyAjNTQwNSBpbiBkZXYsIGFsd2F5cyBoeWRyYXRlIGNoaWxkcmVuIGZvciBITVJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBmb3JjZVBhdGNoVmFsdWUgfHwgcGF0Y2hGbGFnICE9PSAtMSAvKiBQYXRjaEZsYWdzLkhPSVNURUQgKi8pIHtcbiAgICAgICAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgICAgIGlmIChwcm9wcykge1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZVBhdGNoVmFsdWUgfHxcbiAgICAgICAgICAgICAgICAgICAgIW9wdGltaXplZCB8fFxuICAgICAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiAoMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovIHwgMzIgLyogUGF0Y2hGbGFncy5IWURSQVRFX0VWRU5UUyAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZm9yY2VQYXRjaFZhbHVlICYmIGtleS5lbmRzV2l0aCgndmFsdWUnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXNPbihrZXkpICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoUHJvcChlbCwga2V5LCBudWxsLCBwcm9wc1trZXldLCBmYWxzZSwgdW5kZWZpbmVkLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3BzLm9uQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFzdCBwYXRoIGZvciBjbGljayBsaXN0ZW5lcnMgKHdoaWNoIGlzIG1vc3Qgb2Z0ZW4pIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGluZyB0aHJvdWdoIHByb3BzLlxuICAgICAgICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsICdvbkNsaWNrJywgbnVsbCwgcHJvcHMub25DbGljaywgZmFsc2UsIHVuZGVmaW5lZCwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2bm9kZSAvIGRpcmVjdGl2ZSBob29rc1xuICAgICAgICAgICAgbGV0IHZub2RlSG9va3M7XG4gICAgICAgICAgICBpZiAoKHZub2RlSG9va3MgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVNb3VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh2bm9kZUhvb2tzID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZU1vdW50ZWQpIHx8IGRpcnMpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZub2RlSG9va3MgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ21vdW50ZWQnKTtcbiAgICAgICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGlsZHJlblxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8gJiZcbiAgICAgICAgICAgICAgICAvLyBza2lwIGlmIGVsZW1lbnQgaGFzIGlubmVySFRNTCAvIHRleHRDb250ZW50XG4gICAgICAgICAgICAgICAgIShwcm9wcyAmJiAocHJvcHMuaW5uZXJIVE1MIHx8IHByb3BzLnRleHRDb250ZW50KSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGh5ZHJhdGVDaGlsZHJlbihlbC5maXJzdENoaWxkLCB2bm9kZSwgZWwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBsZXQgaGFzV2FybmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFoYXNXYXJuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiBjaGlsZHJlbiBtaXNtYXRjaCBpbiA8JHt2bm9kZS50eXBlfT46IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBzZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBtb3JlIGNoaWxkIG5vZGVzIHRoYW4gY2xpZW50IHZkb20uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBTU1JlZCBET00gY29udGFpbnMgbW9yZSBub2RlcyB0aGFuIGl0IHNob3VsZC4gUmVtb3ZlIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1ciA9IG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmUoY3VyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA4IC8qIFNoYXBlRmxhZ3MuVEVYVF9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgIGlmIChlbC50ZXh0Q29udGVudCAhPT0gdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiB0ZXh0IGNvbnRlbnQgbWlzbWF0Y2ggaW4gPCR7dm5vZGUudHlwZX0+OlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtIENsaWVudDogJHtlbC50ZXh0Q29udGVudH1cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLSBTZXJ2ZXI6ICR7dm5vZGUuY2hpbGRyZW59YCk7XG4gICAgICAgICAgICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbC5uZXh0U2libGluZztcbiAgICB9O1xuICAgIGNvbnN0IGh5ZHJhdGVDaGlsZHJlbiA9IChub2RlLCBwYXJlbnRWTm9kZSwgY29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISFwYXJlbnRWTm9kZS5keW5hbWljQ2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gcGFyZW50Vk5vZGUuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGwgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZub2RlID0gb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgPyBjaGlsZHJlbltpXVxuICAgICAgICAgICAgICAgIDogKGNoaWxkcmVuW2ldID0gbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pKTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGh5ZHJhdGVOb2RlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2bm9kZS50eXBlID09PSBUZXh0ICYmICF2bm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhc1dhcm5lZCkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBIeWRyYXRpb24gY2hpbGRyZW4gbWlzbWF0Y2ggaW4gPCR7Y29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0+OiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBzZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBmZXdlciBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmApO1xuICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB0aGUgU1NSZWQgRE9NIGRpZG4ndCBjb250YWluIGVub3VnaCBub2Rlcy4gTW91bnQgdGhlIG1pc3Npbmcgb25lcy5cbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCB2bm9kZSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihjb250YWluZXIpLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gICAgY29uc3QgaHlkcmF0ZUZyYWdtZW50ID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNsb3RTY29wZUlkczogZnJhZ21lbnRTbG90U2NvcGVJZHMgfSA9IHZub2RlO1xuICAgICAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkc1xuICAgICAgICAgICAgICAgID8gc2xvdFNjb3BlSWRzLmNvbmNhdChmcmFnbWVudFNsb3RTY29wZUlkcylcbiAgICAgICAgICAgICAgICA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgICAgIGNvbnN0IG5leHQgPSBoeWRyYXRlQ2hpbGRyZW4obmV4dFNpYmxpbmcobm9kZSksIHZub2RlLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgaWYgKG5leHQgJiYgaXNDb21tZW50KG5leHQpICYmIG5leHQuZGF0YSA9PT0gJ10nKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dFNpYmxpbmcoKHZub2RlLmFuY2hvciA9IG5leHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IGRpZG4ndCBoeWRyYXRlIHN1Y2Nlc3NmdWxseSwgc2luY2Ugd2UgZGlkbid0IGdldCBhIGVuZCBhbmNob3JcbiAgICAgICAgICAgIC8vIGJhY2suIFRoaXMgc2hvdWxkIGhhdmUgbGVkIHRvIG5vZGUvY2hpbGRyZW4gbWlzbWF0Y2ggd2FybmluZ3MuXG4gICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgYW5jaG9yIGlzIG1pc3NpbmcsIHdlIG5lZWQgdG8gY3JlYXRlIG9uZSBhbmQgaW5zZXJ0IGl0XG4gICAgICAgICAgICBpbnNlcnQoKHZub2RlLmFuY2hvciA9IGNyZWF0ZUNvbW1lbnQoYF1gKSksIGNvbnRhaW5lciwgbmV4dCk7XG4gICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlTWlzbWF0Y2ggPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgaXNGcmFnbWVudCkgPT4ge1xuICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIG5vZGUgbWlzbWF0Y2g6XFxuLSBDbGllbnQgdm5vZGU6YCwgdm5vZGUudHlwZSwgYFxcbi0gU2VydmVyIHJlbmRlcmVkIERPTTpgLCBub2RlLCBub2RlLm5vZGVUeXBlID09PSAzIC8qIERPTU5vZGVUeXBlcy5URVhUICovXG4gICAgICAgICAgICAgICAgPyBgKHRleHQpYFxuICAgICAgICAgICAgICAgIDogaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gJ1snXG4gICAgICAgICAgICAgICAgICAgID8gYChzdGFydCBvZiBmcmFnbWVudClgXG4gICAgICAgICAgICAgICAgICAgIDogYGApO1xuICAgICAgICB2bm9kZS5lbCA9IG51bGw7XG4gICAgICAgIGlmIChpc0ZyYWdtZW50KSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgZXhjZXNzaXZlIGZyYWdtZW50IG5vZGVzXG4gICAgICAgICAgICBjb25zdCBlbmQgPSBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3Iobm9kZSk7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKG5leHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHQgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICAgICAgcmVtb3ZlKG5vZGUpO1xuICAgICAgICBwYXRjaChudWxsLCB2bm9kZSwgY29udGFpbmVyLCBuZXh0LCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihjb250YWluZXIpLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICAgIGNvbnN0IGxvY2F0ZUNsb3NpbmdBc3luY0FuY2hvciA9IChub2RlKSA9PiB7XG4gICAgICAgIGxldCBtYXRjaCA9IDA7XG4gICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgICBub2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICBpZiAobm9kZSAmJiBpc0NvbW1lbnQobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5kYXRhID09PSAnWycpXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoKys7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gJ10nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2gtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuICAgIHJldHVybiBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbmxldCBzdXBwb3J0ZWQ7XG5sZXQgcGVyZjtcbmZ1bmN0aW9uIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgdHlwZSkge1xuICAgIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgIHBlcmYubWFyayhgdnVlLSR7dHlwZX0tJHtpbnN0YW5jZS51aWR9YCk7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzUGVyZlN0YXJ0KGluc3RhbmNlLCB0eXBlLCBpc1N1cHBvcnRlZCgpID8gcGVyZi5ub3coKSA6IERhdGUubm93KCkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVuZE1lYXN1cmUoaW5zdGFuY2UsIHR5cGUpIHtcbiAgICBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcucGVyZm9ybWFuY2UgJiYgaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICBjb25zdCBzdGFydFRhZyA9IGB2dWUtJHt0eXBlfS0ke2luc3RhbmNlLnVpZH1gO1xuICAgICAgICBjb25zdCBlbmRUYWcgPSBzdGFydFRhZyArIGA6ZW5kYDtcbiAgICAgICAgcGVyZi5tYXJrKGVuZFRhZyk7XG4gICAgICAgIHBlcmYubWVhc3VyZShgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgaW5zdGFuY2UudHlwZSl9PiAke3R5cGV9YCwgc3RhcnRUYWcsIGVuZFRhZyk7XG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7XG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyhlbmRUYWcpO1xuICAgIH1cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc1BlcmZFbmQoaW5zdGFuY2UsIHR5cGUsIGlzU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XG4gICAgaWYgKHN1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcGVyZiA9IHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwcG9ydGVkO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgb25seSBjYWxsZWQgaW4gZXNtLWJ1bmRsZXIgYnVpbGRzLlxuICogSXQgaXMgY2FsbGVkIHdoZW4gYSByZW5kZXJlciBpcyBjcmVhdGVkLCBpbiBgYmFzZUNyZWF0ZVJlbmRlcmVyYCBzbyB0aGF0XG4gKiBpbXBvcnRpbmcgcnVudGltZS1jb3JlIGlzIHNpZGUtZWZmZWN0cyBmcmVlLlxuICpcbiAqIGlzdGFuYnVsLWlnbm9yZS1uZXh0XG4gKi9cbmZ1bmN0aW9uIGluaXRGZWF0dXJlRmxhZ3MoKSB7XG4gICAgY29uc3QgbmVlZFdhcm4gPSBbXTtcbiAgICBpZiAodHlwZW9mIF9fVlVFX09QVElPTlNfQVBJX18gIT09ICdib29sZWFuJykge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfT1BUSU9OU19BUElfX2ApO1xuICAgICAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfT1BUSU9OU19BUElfXyA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX1BST0RfREVWVE9PTFNfX2ApO1xuICAgICAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfUFJPRF9ERVZUT09MU19fID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG11bHRpID0gbmVlZFdhcm4ubGVuZ3RoID4gMTtcbiAgICAgICAgY29uc29sZS53YXJuKGBGZWF0dXJlIGZsYWcke211bHRpID8gYHNgIDogYGB9ICR7bmVlZFdhcm4uam9pbignLCAnKX0gJHttdWx0aSA/IGBhcmVgIDogYGlzYH0gbm90IGV4cGxpY2l0bHkgZGVmaW5lZC4gWW91IGFyZSBydW5uaW5nIHRoZSBlc20tYnVuZGxlciBidWlsZCBvZiBWdWUsIGAgK1xuICAgICAgICAgICAgYHdoaWNoIGV4cGVjdHMgdGhlc2UgY29tcGlsZS10aW1lIGZlYXR1cmUgZmxhZ3MgdG8gYmUgZ2xvYmFsbHkgaW5qZWN0ZWQgYCArXG4gICAgICAgICAgICBgdmlhIHRoZSBidW5kbGVyIGNvbmZpZyBpbiBvcmRlciB0byBnZXQgYmV0dGVyIHRyZWUtc2hha2luZyBpbiB0aGUgYCArXG4gICAgICAgICAgICBgcHJvZHVjdGlvbiBidW5kbGUuXFxuXFxuYCArXG4gICAgICAgICAgICBgRm9yIG1vcmUgZGV0YWlscywgc2VlIGh0dHBzOi8vbGluay52dWVqcy5vcmcvZmVhdHVyZS1mbGFncy5gKTtcbiAgICB9XG59XG5cbmNvbnN0IHF1ZXVlUG9zdFJlbmRlckVmZmVjdCA9IHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlXG4gICAgO1xuLyoqXG4gKiBUaGUgY3JlYXRlUmVuZGVyZXIgZnVuY3Rpb24gYWNjZXB0cyB0d28gZ2VuZXJpYyBhcmd1bWVudHM6XG4gKiBIb3N0Tm9kZSBhbmQgSG9zdEVsZW1lbnQsIGNvcnJlc3BvbmRpbmcgdG8gTm9kZSBhbmQgRWxlbWVudCB0eXBlcyBpbiB0aGVcbiAqIGhvc3QgZW52aXJvbm1lbnQuIEZvciBleGFtcGxlLCBmb3IgcnVudGltZS1kb20sIEhvc3ROb2RlIHdvdWxkIGJlIHRoZSBET01cbiAqIGBOb2RlYCBpbnRlcmZhY2UgYW5kIEhvc3RFbGVtZW50IHdvdWxkIGJlIHRoZSBET00gYEVsZW1lbnRgIGludGVyZmFjZS5cbiAqXG4gKiBDdXN0b20gcmVuZGVyZXJzIGNhbiBwYXNzIGluIHRoZSBwbGF0Zm9ybSBzcGVjaWZpYyB0eXBlcyBsaWtlIHRoaXM6XG4gKlxuICogYGBgIGpzXG4gKiBjb25zdCB7IHJlbmRlciwgY3JlYXRlQXBwIH0gPSBjcmVhdGVSZW5kZXJlcjxOb2RlLCBFbGVtZW50Pih7XG4gKiAgIHBhdGNoUHJvcCxcbiAqICAgLi4ubm9kZU9wc1xuICogfSlcbiAqIGBgYFxuICovXG5mdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zKTtcbn1cbi8vIFNlcGFyYXRlIEFQSSBmb3IgY3JlYXRpbmcgaHlkcmF0aW9uLWVuYWJsZWQgcmVuZGVyZXIuXG4vLyBIeWRyYXRpb24gbG9naWMgaXMgb25seSB1c2VkIHdoZW4gY2FsbGluZyB0aGlzIGZ1bmN0aW9uLCBtYWtpbmcgaXRcbi8vIHRyZWUtc2hha2FibGUuXG5mdW5jdGlvbiBjcmVhdGVIeWRyYXRpb25SZW5kZXJlcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zLCBjcmVhdGVIeWRyYXRpb25GdW5jdGlvbnMpO1xufVxuLy8gaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zLCBjcmVhdGVIeWRyYXRpb25GbnMpIHtcbiAgICAvLyBjb21waWxlLXRpbWUgZmVhdHVyZSBmbGFncyBjaGVja1xuICAgIHtcbiAgICAgICAgaW5pdEZlYXR1cmVGbGFncygpO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBnZXRHbG9iYWxUaGlzKCk7XG4gICAgdGFyZ2V0Ll9fVlVFX18gPSB0cnVlO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIHNldERldnRvb2xzSG9vayh0YXJnZXQuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXywgdGFyZ2V0KTtcbiAgICB9XG4gICAgY29uc3QgeyBpbnNlcnQ6IGhvc3RJbnNlcnQsIHJlbW92ZTogaG9zdFJlbW92ZSwgcGF0Y2hQcm9wOiBob3N0UGF0Y2hQcm9wLCBjcmVhdGVFbGVtZW50OiBob3N0Q3JlYXRlRWxlbWVudCwgY3JlYXRlVGV4dDogaG9zdENyZWF0ZVRleHQsIGNyZWF0ZUNvbW1lbnQ6IGhvc3RDcmVhdGVDb21tZW50LCBzZXRUZXh0OiBob3N0U2V0VGV4dCwgc2V0RWxlbWVudFRleHQ6IGhvc3RTZXRFbGVtZW50VGV4dCwgcGFyZW50Tm9kZTogaG9zdFBhcmVudE5vZGUsIG5leHRTaWJsaW5nOiBob3N0TmV4dFNpYmxpbmcsIHNldFNjb3BlSWQ6IGhvc3RTZXRTY29wZUlkID0gTk9PUCwgaW5zZXJ0U3RhdGljQ29udGVudDogaG9zdEluc2VydFN0YXRpY0NvbnRlbnQgfSA9IG9wdGlvbnM7XG4gICAgLy8gTm90ZTogZnVuY3Rpb25zIGluc2lkZSB0aGlzIGNsb3N1cmUgc2hvdWxkIHVzZSBgY29uc3QgeHh4ID0gKCkgPT4ge31gXG4gICAgLy8gc3R5bGUgaW4gb3JkZXIgdG8gcHJldmVudCBiZWluZyBpbmxpbmVkIGJ5IG1pbmlmaWVycy5cbiAgICBjb25zdCBwYXRjaCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yID0gbnVsbCwgcGFyZW50Q29tcG9uZW50ID0gbnVsbCwgcGFyZW50U3VzcGVuc2UgPSBudWxsLCBpc1NWRyA9IGZhbHNlLCBzbG90U2NvcGVJZHMgPSBudWxsLCBvcHRpbWl6ZWQgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNIbXJVcGRhdGluZyA/IGZhbHNlIDogISFuMi5keW5hbWljQ2hpbGRyZW4pID0+IHtcbiAgICAgICAgaWYgKG4xID09PSBuMikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHBhdGNoaW5nICYgbm90IHNhbWUgdHlwZSwgdW5tb3VudCBvbGQgdHJlZVxuICAgICAgICBpZiAobjEgJiYgIWlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XG4gICAgICAgICAgICBhbmNob3IgPSBnZXROZXh0SG9zdE5vZGUobjEpO1xuICAgICAgICAgICAgdW5tb3VudChuMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICBuMSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4yLnBhdGNoRmxhZyA9PT0gLTIgLyogUGF0Y2hGbGFncy5CQUlMICovKSB7XG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIG4yLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eXBlLCByZWYsIHNoYXBlRmxhZyB9ID0gbjI7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBUZXh0OlxuICAgICAgICAgICAgICAgIHByb2Nlc3NUZXh0KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICAgICAgICAgIHByb2Nlc3NDb21tZW50Tm9kZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdGljOlxuICAgICAgICAgICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50U3RhdGljTm9kZShuMiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoU3RhdGljTm9kZShuMSwgbjIsIGNvbnRhaW5lciwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRnJhZ21lbnQ6XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0ZyYWdtZW50KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRWxlbWVudChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDb21wb25lbnQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlLnByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlLnByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBWTm9kZSB0eXBlOicsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHNldCByZWZcbiAgICAgICAgaWYgKHJlZiAhPSBudWxsICYmIHBhcmVudENvbXBvbmVudCkge1xuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbjEgJiYgbjEucmVmLCBwYXJlbnRTdXNwZW5zZSwgbjIgfHwgbjEsICFuMik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHByb2Nlc3NUZXh0ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoKG4yLmVsID0gaG9zdENyZWF0ZVRleHQobjIuY2hpbGRyZW4pKSwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZWwgPSAobjIuZWwgPSBuMS5lbCk7XG4gICAgICAgICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaG9zdFNldFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0NvbW1lbnROb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoKG4yLmVsID0gaG9zdENyZWF0ZUNvbW1lbnQobjIuY2hpbGRyZW4gfHwgJycpKSwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdGhlcmUncyBubyBzdXBwb3J0IGZvciBkeW5hbWljIGNvbW1lbnRzXG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3VudFN0YXRpY05vZGUgPSAobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRykgPT4ge1xuICAgICAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChuMi5jaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHLCBuMi5lbCwgbjIuYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldiAvIEhNUiBvbmx5XG4gICAgICovXG4gICAgY29uc3QgcGF0Y2hTdGF0aWNOb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBpc1NWRykgPT4ge1xuICAgICAgICAvLyBzdGF0aWMgbm9kZXMgYXJlIG9ubHkgcGF0Y2hlZCBkdXJpbmcgZGV2IGZvciBITVJcbiAgICAgICAgaWYgKG4yLmNoaWxkcmVuICE9PSBuMS5jaGlsZHJlbikge1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gaG9zdE5leHRTaWJsaW5nKG4xLmFuY2hvcik7XG4gICAgICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcbiAgICAgICAgICAgIHJlbW92ZVN0YXRpY05vZGUobjEpO1xuICAgICAgICAgICAgW24yLmVsLCBuMi5hbmNob3JdID0gaG9zdEluc2VydFN0YXRpY0NvbnRlbnQobjIuY2hpbGRyZW4sIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICAgICAgbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSwgY29udGFpbmVyLCBuZXh0U2libGluZykgPT4ge1xuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGVsICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xuICAgICAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XG4gICAgICAgICAgICBlbCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaG9zdEluc2VydChhbmNob3IsIGNvbnRhaW5lciwgbmV4dFNpYmxpbmcpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSkgPT4ge1xuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGVsICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xuICAgICAgICAgICAgaG9zdFJlbW92ZShlbCk7XG4gICAgICAgICAgICBlbCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0VsZW1lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGlzU1ZHID0gaXNTVkcgfHwgbjIudHlwZSA9PT0gJ3N2Zyc7XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBtb3VudEVsZW1lbnQobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGF0Y2hFbGVtZW50KG4xLCBuMiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgbW91bnRFbGVtZW50ID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGxldCBlbDtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgc2hhcGVGbGFnLCB0cmFuc2l0aW9uLCBkaXJzIH0gPSB2bm9kZTtcbiAgICAgICAgZWwgPSB2bm9kZS5lbCA9IGhvc3RDcmVhdGVFbGVtZW50KHZub2RlLnR5cGUsIGlzU1ZHLCBwcm9wcyAmJiBwcm9wcy5pcywgcHJvcHMpO1xuICAgICAgICAvLyBtb3VudCBjaGlsZHJlbiBmaXJzdCwgc2luY2Ugc29tZSBwcm9wcyBtYXkgcmVseSBvbiBjaGlsZCBjb250ZW50XG4gICAgICAgIC8vIGJlaW5nIGFscmVhZHkgcmVuZGVyZWQsIGUuZy4gYDxzZWxlY3QgdmFsdWU+YFxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChlbCwgdm5vZGUuY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4odm5vZGUuY2hpbGRyZW4sIGVsLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyAmJiB0eXBlICE9PSAnZm9yZWlnbk9iamVjdCcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlycykge1xuICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByb3BzXG4gICAgICAgIGlmIChwcm9wcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAndmFsdWUnICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU3BlY2lhbCBjYXNlIGZvciBzZXR0aW5nIHZhbHVlIG9uIERPTSBlbGVtZW50czpcbiAgICAgICAgICAgICAqIC0gaXQgY2FuIGJlIG9yZGVyLXNlbnNpdGl2ZSAoZS5nLiBzaG91bGQgYmUgc2V0ICphZnRlciogbWluL21heCwgIzIzMjUsICM0MDI0KVxuICAgICAgICAgICAgICogLSBpdCBuZWVkcyB0byBiZSBmb3JjZWQgKCMxNDcxKVxuICAgICAgICAgICAgICogIzIzNTMgcHJvcG9zZXMgYWRkaW5nIGFub3RoZXIgcmVuZGVyZXIgb3B0aW9uIHRvIGNvbmZpZ3VyZSB0aGlzLCBidXRcbiAgICAgICAgICAgICAqIHRoZSBwcm9wZXJ0aWVzIGFmZmVjdHMgYXJlIHNvIGZpbml0ZSBpdCBpcyB3b3J0aCBzcGVjaWFsIGNhc2luZyBpdFxuICAgICAgICAgICAgICogaGVyZSB0byByZWR1Y2UgdGhlIGNvbXBsZXhpdHkuIChTcGVjaWFsIGNhc2luZyBpdCBhbHNvIHNob3VsZCBub3RcbiAgICAgICAgICAgICAqIGFmZmVjdCBub24tRE9NIHJlbmRlcmVycylcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCd2YWx1ZScgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAndmFsdWUnLCBudWxsLCBwcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzLm9uVm5vZGVCZWZvcmVNb3VudCkpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzY29wZUlkXG4gICAgICAgIHNldFNjb3BlSWQoZWwsIHZub2RlLCB2bm9kZS5zY29wZUlkLCBzbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdfX3Zub2RlJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2bm9kZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdfX3Z1ZVBhcmVudENvbXBvbmVudCcsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlycykge1xuICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlTW91bnQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAjMTU4MyBGb3IgaW5zaWRlIHN1c3BlbnNlICsgc3VzcGVuc2Ugbm90IHJlc29sdmVkIGNhc2UsIGVudGVyIGhvb2sgc2hvdWxkIGNhbGwgd2hlbiBzdXNwZW5zZSByZXNvbHZlZFxuICAgICAgICAvLyAjMTY4OSBGb3IgaW5zaWRlIHN1c3BlbnNlICsgc3VzcGVuc2UgcmVzb2x2ZWQgY2FzZSwganVzdCBjYWxsIGl0XG4gICAgICAgIGNvbnN0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gKCFwYXJlbnRTdXNwZW5zZSB8fCAocGFyZW50U3VzcGVuc2UgJiYgIXBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpKSAmJlxuICAgICAgICAgICAgdHJhbnNpdGlvbiAmJlxuICAgICAgICAgICAgIXRyYW5zaXRpb24ucGVyc2lzdGVkO1xuICAgICAgICBpZiAobmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgICAgICB9XG4gICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlTW91bnRlZCkgfHxcbiAgICAgICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzIHx8XG4gICAgICAgICAgICBkaXJzKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyAmJiB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICAgICAgICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ21vdW50ZWQnKTtcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0U2NvcGVJZCA9IChlbCwgdm5vZGUsIHNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gICAgICAgIGlmIChzY29wZUlkKSB7XG4gICAgICAgICAgICBob3N0U2V0U2NvcGVJZChlbCwgc2NvcGVJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNsb3RTY29wZUlkcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbG90U2NvcGVJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBob3N0U2V0U2NvcGVJZChlbCwgc2xvdFNjb3BlSWRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICBsZXQgc3ViVHJlZSA9IHBhcmVudENvbXBvbmVudC5zdWJUcmVlO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHN1YlRyZWUucGF0Y2hGbGFnID4gMCAmJlxuICAgICAgICAgICAgICAgIHN1YlRyZWUucGF0Y2hGbGFnICYgMjA0OCAvKiBQYXRjaEZsYWdzLkRFVl9ST09UX0ZSQUdNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgc3ViVHJlZSA9XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclNpbmdsZVJvb3Qoc3ViVHJlZS5jaGlsZHJlbikgfHwgc3ViVHJlZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2bm9kZSA9PT0gc3ViVHJlZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudFZOb2RlID0gcGFyZW50Q29tcG9uZW50LnZub2RlO1xuICAgICAgICAgICAgICAgIHNldFNjb3BlSWQoZWwsIHBhcmVudFZOb2RlLCBwYXJlbnRWTm9kZS5zY29wZUlkLCBwYXJlbnRWTm9kZS5zbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudC5wYXJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBzdGFydCA9IDApID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gKGNoaWxkcmVuW2ldID0gb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjaGlsZHJlbltpXSlcbiAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGNoaWxkcmVuW2ldKSk7XG4gICAgICAgICAgICBwYXRjaChudWxsLCBjaGlsZCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBhdGNoRWxlbWVudCA9IChuMSwgbjIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBlbCA9IChuMi5lbCA9IG4xLmVsKTtcbiAgICAgICAgbGV0IHsgcGF0Y2hGbGFnLCBkeW5hbWljQ2hpbGRyZW4sIGRpcnMgfSA9IG4yO1xuICAgICAgICAvLyAjMTQyNiB0YWtlIHRoZSBvbGQgdm5vZGUncyBwYXRjaCBmbGFnIGludG8gYWNjb3VudCBzaW5jZSB1c2VyIG1heSBjbG9uZSBhXG4gICAgICAgIC8vIGNvbXBpbGVyLWdlbmVyYXRlZCB2bm9kZSwgd2hpY2ggZGUtb3B0cyB0byBGVUxMX1BST1BTXG4gICAgICAgIHBhdGNoRmxhZyB8PSBuMS5wYXRjaEZsYWcgJiAxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi87XG4gICAgICAgIGNvbnN0IG9sZFByb3BzID0gbjEucHJvcHMgfHwgRU1QVFlfT0JKO1xuICAgICAgICBjb25zdCBuZXdQcm9wcyA9IG4yLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgLy8gZGlzYWJsZSByZWN1cnNlIGluIGJlZm9yZVVwZGF0ZSBob29rc1xuICAgICAgICBwYXJlbnRDb21wb25lbnQgJiYgdG9nZ2xlUmVjdXJzZShwYXJlbnRDb21wb25lbnQsIGZhbHNlKTtcbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSkge1xuICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKG4yLCBuMSwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlVXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCB0cnVlKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICAgICAgICAvLyBITVIgdXBkYXRlZCwgZm9yY2UgZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaEZsYWcgPSAwO1xuICAgICAgICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFyZUNoaWxkcmVuU1ZHID0gaXNTVkcgJiYgbjIudHlwZSAhPT0gJ2ZvcmVpZ25PYmplY3QnO1xuICAgICAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGVsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBhcmVDaGlsZHJlblNWRywgc2xvdFNjb3BlSWRzKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgcGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW9wdGltaXplZCkge1xuICAgICAgICAgICAgLy8gZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaENoaWxkcmVuKG4xLCBuMiwgZWwsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGFyZUNoaWxkcmVuU1ZHLCBzbG90U2NvcGVJZHMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xuICAgICAgICAgICAgLy8gdGhlIHByZXNlbmNlIG9mIGEgcGF0Y2hGbGFnIG1lYW5zIHRoaXMgZWxlbWVudCdzIHJlbmRlciBjb2RlIHdhc1xuICAgICAgICAgICAgLy8gZ2VuZXJhdGVkIGJ5IHRoZSBjb21waWxlciBhbmQgY2FuIHRha2UgdGhlIGZhc3QgcGF0aC5cbiAgICAgICAgICAgIC8vIGluIHRoaXMgcGF0aCBvbGQgbm9kZSBhbmQgbmV3IG5vZGUgYXJlIGd1YXJhbnRlZWQgdG8gaGF2ZSB0aGUgc2FtZSBzaGFwZVxuICAgICAgICAgICAgLy8gKGkuZS4gYXQgdGhlIGV4YWN0IHNhbWUgcG9zaXRpb24gaW4gdGhlIHNvdXJjZSB0ZW1wbGF0ZSlcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi8pIHtcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50IHByb3BzIGNvbnRhaW4gZHluYW1pYyBrZXlzLCBmdWxsIGRpZmYgbmVlZGVkXG4gICAgICAgICAgICAgICAgcGF0Y2hQcm9wcyhlbCwgbjIsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY2xhc3NcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGZsYWcgaXMgbWF0Y2hlZCB3aGVuIHRoZSBlbGVtZW50IGhhcyBkeW5hbWljIGNsYXNzIGJpbmRpbmdzLlxuICAgICAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAyIC8qIFBhdGNoRmxhZ3MuQ0xBU1MgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFByb3BzLmNsYXNzICE9PSBuZXdQcm9wcy5jbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ2NsYXNzJywgbnVsbCwgbmV3UHJvcHMuY2xhc3MsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzdHlsZVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgc3R5bGUgYmluZGluZ3NcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgNCAvKiBQYXRjaEZsYWdzLlNUWUxFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsICdzdHlsZScsIG9sZFByb3BzLnN0eWxlLCBuZXdQcm9wcy5zdHlsZSwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBwcm9wc1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgcHJvcC9hdHRyIGJpbmRpbmdzXG4gICAgICAgICAgICAgICAgLy8gb3RoZXIgdGhhbiBjbGFzcyBhbmQgc3R5bGUuIFRoZSBrZXlzIG9mIGR5bmFtaWMgcHJvcC9hdHRycyBhcmUgc2F2ZWQgZm9yXG4gICAgICAgICAgICAgICAgLy8gZmFzdGVyIGl0ZXJhdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBOb3RlIGR5bmFtaWMga2V5cyBsaWtlIDpbZm9vXT1cImJhclwiIHdpbGwgY2F1c2UgdGhpcyBvcHRpbWl6YXRpb24gdG9cbiAgICAgICAgICAgICAgICAvLyBiYWlsIG91dCBhbmQgZ28gdGhyb3VnaCBhIGZ1bGwgZGlmZiBiZWNhdXNlIHdlIG5lZWQgdG8gdW5zZXQgdGhlIG9sZCBrZXlcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgOCAvKiBQYXRjaEZsYWdzLlBST1BTICovKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBmbGFnIGlzIHByZXNlbnQgdGhlbiBkeW5hbWljUHJvcHMgbXVzdCBiZSBub24tbnVsbFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gbjIuZHluYW1pY1Byb3BzO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gb2xkUHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIzE0NzEgZm9yY2UgcGF0Y2ggdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9PSBwcmV2IHx8IGtleSA9PT0gJ3ZhbHVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIG4xLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGV4dFxuICAgICAgICAgICAgLy8gVGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgb25seSBkeW5hbWljIHRleHQgY2hpbGRyZW4uXG4gICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgMSAvKiBQYXRjaEZsYWdzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAobjEuY2hpbGRyZW4gIT09IG4yLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChlbCwgbjIuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghb3B0aW1pemVkICYmIGR5bmFtaWNDaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyB1bm9wdGltaXplZCwgZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaFByb3BzKGVsLCBuMiwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlVXBkYXRlZCkgfHwgZGlycykge1xuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgICAgICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayhuMiwgbjEsIHBhcmVudENvbXBvbmVudCwgJ3VwZGF0ZWQnKTtcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gVGhlIGZhc3QgcGF0aCBmb3IgYmxvY2tzLlxuICAgIGNvbnN0IHBhdGNoQmxvY2tDaGlsZHJlbiA9IChvbGRDaGlsZHJlbiwgbmV3Q2hpbGRyZW4sIGZhbGxiYWNrQ29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFZOb2RlID0gb2xkQ2hpbGRyZW5baV07XG4gICAgICAgICAgICBjb25zdCBuZXdWTm9kZSA9IG5ld0NoaWxkcmVuW2ldO1xuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjb250YWluZXIgKHBhcmVudCBlbGVtZW50KSBmb3IgdGhlIHBhdGNoLlxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gXG4gICAgICAgICAgICAvLyBvbGRWTm9kZSBtYXkgYmUgYW4gZXJyb3JlZCBhc3luYyBzZXR1cCgpIGNvbXBvbmVudCBpbnNpZGUgU3VzcGVuc2VcbiAgICAgICAgICAgIC8vIHdoaWNoIHdpbGwgbm90IGhhdmUgYSBtb3VudGVkIGVsZW1lbnRcbiAgICAgICAgICAgIG9sZFZOb2RlLmVsICYmXG4gICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBhIEZyYWdtZW50LCB3ZSBuZWVkIHRvIHByb3ZpZGUgdGhlIGFjdHVhbCBwYXJlbnRcbiAgICAgICAgICAgICAgICAvLyBvZiB0aGUgRnJhZ21lbnQgaXRzZWxmIHNvIGl0IGNhbiBtb3ZlIGl0cyBjaGlsZHJlbi5cbiAgICAgICAgICAgICAgICAob2xkVk5vZGUudHlwZSA9PT0gRnJhZ21lbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBkaWZmZXJlbnQgbm9kZXMsIHRoZXJlIGlzIGdvaW5nIHRvIGJlIGEgcmVwbGFjZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggYWxzbyByZXF1aXJlcyB0aGUgY29ycmVjdCBwYXJlbnQgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICFpc1NhbWVWTm9kZVR5cGUob2xkVk5vZGUsIG5ld1ZOb2RlKSB8fFxuICAgICAgICAgICAgICAgICAgICAvLyAtIEluIHRoZSBjYXNlIG9mIGEgY29tcG9uZW50LCBpdCBjb3VsZCBjb250YWluIGFueXRoaW5nLlxuICAgICAgICAgICAgICAgICAgICBvbGRWTm9kZS5zaGFwZUZsYWcgJiAoNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLyB8IDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pKVxuICAgICAgICAgICAgICAgID8gaG9zdFBhcmVudE5vZGUob2xkVk5vZGUuZWwpXG4gICAgICAgICAgICAgICAgOiAvLyBJbiBvdGhlciBjYXNlcywgdGhlIHBhcmVudCBjb250YWluZXIgaXMgbm90IGFjdHVhbGx5IHVzZWQgc28gd2VcbiAgICAgICAgICAgICAgICAgICAgLy8ganVzdCBwYXNzIHRoZSBibG9jayBlbGVtZW50IGhlcmUgdG8gYXZvaWQgYSBET00gcGFyZW50Tm9kZSBjYWxsLlxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja0NvbnRhaW5lcjtcbiAgICAgICAgICAgIHBhdGNoKG9sZFZOb2RlLCBuZXdWTm9kZSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcGF0Y2hQcm9wcyA9IChlbCwgdm5vZGUsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpID0+IHtcbiAgICAgICAgaWYgKG9sZFByb3BzICE9PSBuZXdQcm9wcykge1xuICAgICAgICAgICAgaWYgKG9sZFByb3BzICE9PSBFTVBUWV9PQkopIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRQcm9wcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmVzZXJ2ZWRQcm9wKGtleSkgJiYgIShrZXkgaW4gbmV3UHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBrZXksIG9sZFByb3BzW2tleV0sIG51bGwsIGlzU1ZHLCB2bm9kZS5jaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgLy8gZW1wdHkgc3RyaW5nIGlzIG5vdCB2YWxpZCBwcm9wXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIC8vIGRlZmVyIHBhdGNoaW5nIHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT09IHByZXYgJiYga2V5ICE9PSAndmFsdWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgndmFsdWUnIGluIG5ld1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ3ZhbHVlJywgb2xkUHJvcHMudmFsdWUsIG5ld1Byb3BzLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0ZyYWdtZW50ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBmcmFnbWVudFN0YXJ0QW5jaG9yID0gKG4yLmVsID0gbjEgPyBuMS5lbCA6IGhvc3RDcmVhdGVUZXh0KCcnKSk7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50RW5kQW5jaG9yID0gKG4yLmFuY2hvciA9IG4xID8gbjEuYW5jaG9yIDogaG9zdENyZWF0ZVRleHQoJycpKTtcbiAgICAgICAgbGV0IHsgcGF0Y2hGbGFnLCBkeW5hbWljQ2hpbGRyZW4sIHNsb3RTY29wZUlkczogZnJhZ21lbnRTbG90U2NvcGVJZHMgfSA9IG4yO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAvLyAjNTUyMyBkZXYgcm9vdCBmcmFnbWVudCBtYXkgaW5oZXJpdCBkaXJlY3RpdmVzXG4gICAgICAgICAgICAoaXNIbXJVcGRhdGluZyB8fCBwYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8pKSB7XG4gICAgICAgICAgICAvLyBITVIgdXBkYXRlZCAvIERldiByb290IGZyYWdtZW50ICh3LyBjb21tZW50cyksIGZvcmNlIGZ1bGwgZGlmZlxuICAgICAgICAgICAgcGF0Y2hGbGFnID0gMDtcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgc2xvdCBmcmFnbWVudCB3aXRoIDpzbG90dGVkIHNjb3BlIGlkc1xuICAgICAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkc1xuICAgICAgICAgICAgICAgID8gc2xvdFNjb3BlSWRzLmNvbmNhdChmcmFnbWVudFNsb3RTY29wZUlkcylcbiAgICAgICAgICAgICAgICA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBob3N0SW5zZXJ0KGZyYWdtZW50U3RhcnRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZnJhZ21lbnRFbmRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIC8vIGEgZnJhZ21lbnQgY2FuIG9ubHkgaGF2ZSBhcnJheSBjaGlsZHJlblxuICAgICAgICAgICAgLy8gc2luY2UgdGhleSBhcmUgZWl0aGVyIGdlbmVyYXRlZCBieSB0aGUgY29tcGlsZXIsIG9yIGltcGxpY2l0bHkgY3JlYXRlZFxuICAgICAgICAgICAgLy8gZnJvbSBhcnJheXMuXG4gICAgICAgICAgICBtb3VudENoaWxkcmVuKG4yLmNoaWxkcmVuLCBjb250YWluZXIsIGZyYWdtZW50RW5kQW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyA+IDAgJiZcbiAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqLyAmJlxuICAgICAgICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbiAmJlxuICAgICAgICAgICAgICAgIC8vICMyNzE1IHRoZSBwcmV2aW91cyBmcmFnbWVudCBjb3VsZCd2ZSBiZWVuIGEgQkFJTGVkIG9uZSBhcyBhIHJlc3VsdFxuICAgICAgICAgICAgICAgIC8vIG9mIHJlbmRlclNsb3QoKSB3aXRoIG5vIHZhbGlkIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgLy8gYSBzdGFibGUgZnJhZ21lbnQgKHRlbXBsYXRlIHJvb3Qgb3IgPHRlbXBsYXRlIHYtZm9yPikgZG9lc24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gcGF0Y2ggY2hpbGRyZW4gb3JkZXIsIGJ1dCBpdCBtYXkgY29udGFpbiBkeW5hbWljQ2hpbGRyZW4uXG4gICAgICAgICAgICAgICAgcGF0Y2hCbG9ja0NoaWxkcmVuKG4xLmR5bmFtaWNDaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgcGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAvLyAjMjA4MCBpZiB0aGUgc3RhYmxlIGZyYWdtZW50IGhhcyBhIGtleSwgaXQncyBhIDx0ZW1wbGF0ZSB2LWZvcj4gdGhhdCBtYXlcbiAgICAgICAgICAgICAgICAvLyAgZ2V0IG1vdmVkIGFyb3VuZC4gTWFrZSBzdXJlIGFsbCByb290IGxldmVsIHZub2RlcyBpbmhlcml0IGVsLlxuICAgICAgICAgICAgICAgIC8vICMyMTM0IG9yIGlmIGl0J3MgYSBjb21wb25lbnQgcm9vdCwgaXQgbWF5IGFsc28gZ2V0IG1vdmVkIGFyb3VuZFxuICAgICAgICAgICAgICAgIC8vIGFzIHRoZSBjb21wb25lbnQgaXMgYmVpbmcgbW92ZWQuXG4gICAgICAgICAgICAgICAgbjIua2V5ICE9IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgKHBhcmVudENvbXBvbmVudCAmJiBuMiA9PT0gcGFyZW50Q29tcG9uZW50LnN1YlRyZWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCB0cnVlIC8qIHNoYWxsb3cgKi8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGtleWVkIC8gdW5rZXllZCwgb3IgbWFudWFsIGZyYWdtZW50cy5cbiAgICAgICAgICAgICAgICAvLyBmb3Iga2V5ZWQgJiB1bmtleWVkLCBzaW5jZSB0aGV5IGFyZSBjb21waWxlciBnZW5lcmF0ZWQgZnJvbSB2LWZvcixcbiAgICAgICAgICAgICAgICAvLyBlYWNoIGNoaWxkIGlzIGd1YXJhbnRlZWQgdG8gYmUgYSBibG9jayBzbyB0aGUgZnJhZ21lbnQgd2lsbCBuZXZlclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgZHluYW1pY0NoaWxkcmVuLlxuICAgICAgICAgICAgICAgIHBhdGNoQ2hpbGRyZW4objEsIG4yLCBjb250YWluZXIsIGZyYWdtZW50RW5kQW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwcm9jZXNzQ29tcG9uZW50ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBuMi5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAobjIuc2hhcGVGbGFnICYgNTEyIC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX0tFUFRfQUxJVkUgKi8pIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRDb21wb25lbnQuY3R4LmFjdGl2YXRlKG4yLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb3VudENvbXBvbmVudChuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgbW91bnRDb21wb25lbnQgPSAoaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IChpbml0aWFsVk5vZGUuY29tcG9uZW50ID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UoaW5pdGlhbFZOb2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlKSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5zdGFuY2UudHlwZS5fX2htcklkKSB7XG4gICAgICAgICAgICByZWdpc3RlckhNUihpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGluaXRpYWxWTm9kZSk7XG4gICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluamVjdCByZW5kZXJlciBpbnRlcm5hbHMgZm9yIGtlZXBBbGl2ZVxuICAgICAgICBpZiAoaXNLZWVwQWxpdmUoaW5pdGlhbFZOb2RlKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UuY3R4LnJlbmRlcmVyID0gaW50ZXJuYWxzO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlc29sdmUgcHJvcHMgYW5kIHNsb3RzIGZvciBzZXR1cCBjb250ZXh0XG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBpbml0YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXR1cENvbXBvbmVudChpbnN0YW5jZSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGluaXRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzZXR1cCgpIGlzIGFzeW5jLiBUaGlzIGNvbXBvbmVudCByZWxpZXMgb24gYXN5bmMgbG9naWMgdG8gYmUgcmVzb2x2ZWRcbiAgICAgICAgLy8gYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgICAgaWYgKGluc3RhbmNlLmFzeW5jRGVwKSB7XG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5yZWdpc3RlckRlcChpbnN0YW5jZSwgc2V0dXBSZW5kZXJFZmZlY3QpO1xuICAgICAgICAgICAgLy8gR2l2ZSBpdCBhIHBsYWNlaG9sZGVyIGlmIHRoaXMgaXMgbm90IGh5ZHJhdGlvblxuICAgICAgICAgICAgLy8gVE9ETyBoYW5kbGUgc2VsZi1kZWZpbmVkIGZhbGxiYWNrXG4gICAgICAgICAgICBpZiAoIWluaXRpYWxWTm9kZS5lbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gKGluc3RhbmNlLnN1YlRyZWUgPSBjcmVhdGVWTm9kZShDb21tZW50KSk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0NvbW1lbnROb2RlKG51bGwsIHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0dXBSZW5kZXJFZmZlY3QoaW5zdGFuY2UsIGluaXRpYWxWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVDb21wb25lbnQgPSAobjEsIG4yLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSAobjIuY29tcG9uZW50ID0gbjEuY29tcG9uZW50KTtcbiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUNvbXBvbmVudChuMSwgbjIsIG9wdGltaXplZCkpIHtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5hc3luY0RlcCAmJlxuICAgICAgICAgICAgICAgICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gYXN5bmMgJiBzdGlsbCBwZW5kaW5nIC0ganVzdCB1cGRhdGUgcHJvcHMgYW5kIHNsb3RzXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNvbXBvbmVudCdzIHJlYWN0aXZlIGVmZmVjdCBmb3IgcmVuZGVyIGlzbid0IHNldC11cCB5ZXRcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dChuMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbjIsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBub3JtYWwgdXBkYXRlXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubmV4dCA9IG4yO1xuICAgICAgICAgICAgICAgIC8vIGluIGNhc2UgdGhlIGNoaWxkIGNvbXBvbmVudCBpcyBhbHNvIHF1ZXVlZCwgcmVtb3ZlIGl0IHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gZG91YmxlIHVwZGF0aW5nIHRoZSBzYW1lIGNoaWxkIGNvbXBvbmVudCBpbiB0aGUgc2FtZSBmbHVzaC5cbiAgICAgICAgICAgICAgICBpbnZhbGlkYXRlSm9iKGluc3RhbmNlLnVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UudXBkYXRlIGlzIHRoZSByZWFjdGl2ZSBlZmZlY3QuXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBubyB1cGRhdGUgbmVlZGVkLiBqdXN0IGNvcHkgb3ZlciBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICAgICAgaW5zdGFuY2Uudm5vZGUgPSBuMjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0dXBSZW5kZXJFZmZlY3QgPSAoaW5zdGFuY2UsIGluaXRpYWxWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFVwZGF0ZUZuID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWwsIHByb3BzIH0gPSBpbml0aWFsVk5vZGU7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBibSwgbSwgcGFyZW50IH0gPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0FzeW5jV3JhcHBlclZOb2RlID0gaXNBc3luY1dyYXBwZXIoaW5pdGlhbFZOb2RlKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gYmVmb3JlTW91bnQgaG9va1xuICAgICAgICAgICAgICAgIGlmIChibSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhibSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG9uVm5vZGVCZWZvcmVNb3VudFxuICAgICAgICAgICAgICAgIGlmICghaXNBc3luY1dyYXBwZXJWTm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIGluaXRpYWxWTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmIChlbCAmJiBoeWRyYXRlTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBoYXMgYWRvcHRlZCBob3N0IG5vZGUgLSBwZXJmb3JtIGh5ZHJhdGlvbiBpbnN0ZWFkIG9mIG1vdW50LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoeWRyYXRlU3ViVHJlZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgaHlkcmF0ZWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZU5vZGUoZWwsIGluc3RhbmNlLnN1YlRyZWUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGh5ZHJhdGVgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXN5bmNXcmFwcGVyVk5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZS50eXBlLl9fYXN5bmNMb2FkZXIoKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm90ZTogd2UgYXJlIG1vdmluZyB0aGUgcmVuZGVyIGNhbGwgaW50byBhbiBhc3luYyBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIG1lYW5zIGl0IHdvbid0IHRyYWNrIGRlcGVuZGVuY2llcyAtIGJ1dCBpdCdzIG9rIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgc2VydmVyLXJlbmRlcmVkIGFzeW5jIHdyYXBwZXIgaXMgYWxyZWFkeSBpbiByZXNvbHZlZCBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGl0IHdpbGwgbmV2ZXIgbmVlZCB0byBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiAhaW5zdGFuY2UuaXNVbm1vdW50ZWQgJiYgaHlkcmF0ZVN1YlRyZWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoeWRyYXRlU3ViVHJlZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJUcmVlID0gKGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIHN1YlRyZWUsIGNvbnRhaW5lciwgYW5jaG9yLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZOb2RlLmVsID0gc3ViVHJlZS5lbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbW91bnRlZCBob29rXG4gICAgICAgICAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KG0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZU1vdW50ZWRcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY29wZWRJbml0aWFsVk5vZGUgPSBpbml0aWFsVk5vZGU7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIHNjb3BlZEluaXRpYWxWTm9kZSksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYWN0aXZhdGVkIGhvb2sgZm9yIGtlZXAtYWxpdmUgcm9vdHMuXG4gICAgICAgICAgICAgICAgLy8gIzE3NDIgYWN0aXZhdGVkIGhvb2sgbXVzdCBiZSBhY2Nlc3NlZCBhZnRlciBmaXJzdCByZW5kZXJcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGUgaG9vayBtYXkgYmUgaW5qZWN0ZWQgYnkgYSBjaGlsZCBrZWVwLWFsaXZlXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxWTm9kZS5zaGFwZUZsYWcgJiAyNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi8gfHxcbiAgICAgICAgICAgICAgICAgICAgKHBhcmVudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBc3luY1dyYXBwZXIocGFyZW50LnZub2RlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnZub2RlLnNoYXBlRmxhZyAmIDI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuYSAmJiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoaW5zdGFuY2UuYSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAjMjQ1ODogZGVmZXJlbmNlIG1vdW50LW9ubHkgb2JqZWN0IHBhcmFtZXRlcnMgdG8gcHJldmVudCBtZW1sZWFrc1xuICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZSA9IGNvbnRhaW5lciA9IGFuY2hvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVDb21wb25lbnRcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRyaWdnZXJlZCBieSBtdXRhdGlvbiBvZiBjb21wb25lbnQncyBvd24gc3RhdGUgKG5leHQ6IG51bGwpXG4gICAgICAgICAgICAgICAgLy8gT1IgcGFyZW50IGNhbGxpbmcgcHJvY2Vzc0NvbXBvbmVudCAobmV4dDogVk5vZGUpXG4gICAgICAgICAgICAgICAgbGV0IHsgbmV4dCwgYnUsIHUsIHBhcmVudCwgdm5vZGUgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGxldCBvcmlnaW5OZXh0ID0gbmV4dDtcbiAgICAgICAgICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG5leHQgfHwgaW5zdGFuY2Uudm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEaXNhbGxvdyBjb21wb25lbnQgZWZmZWN0IHJlY3Vyc2lvbiBkdXJpbmcgcHJlLWxpZmVjeWNsZSBob29rcy5cbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5lbCA9IHZub2RlLmVsO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIoaW5zdGFuY2UsIG5leHQsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gdm5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGJlZm9yZVVwZGF0ZSBob29rXG4gICAgICAgICAgICAgICAgaWYgKGJ1KSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJ1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZUJlZm9yZVVwZGF0ZVxuICAgICAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVCZWZvcmVVcGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgbmV4dCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAvLyByZW5kZXJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2VHJlZSA9IGluc3RhbmNlLnN1YlRyZWU7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc3ViVHJlZSA9IG5leHRUcmVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGF0Y2gocHJldlRyZWUsIG5leHRUcmVlLCBcbiAgICAgICAgICAgICAgICAvLyBwYXJlbnQgbWF5IGhhdmUgY2hhbmdlZCBpZiBpdCdzIGluIGEgdGVsZXBvcnRcbiAgICAgICAgICAgICAgICBob3N0UGFyZW50Tm9kZShwcmV2VHJlZS5lbCksIFxuICAgICAgICAgICAgICAgIC8vIGFuY2hvciBtYXkgaGF2ZSBjaGFuZ2VkIGlmIGl0J3MgaW4gYSBmcmFnbWVudFxuICAgICAgICAgICAgICAgIGdldE5leHRIb3N0Tm9kZShwcmV2VHJlZSksIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQuZWwgPSBuZXh0VHJlZS5lbDtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luTmV4dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLXRyaWdnZXJlZCB1cGRhdGUuIEluIGNhc2Ugb2YgSE9DLCB1cGRhdGUgcGFyZW50IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBlbC4gSE9DIGlzIGluZGljYXRlZCBieSBwYXJlbnQgaW5zdGFuY2UncyBzdWJUcmVlIHBvaW50aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGNoaWxkIGNvbXBvbmVudCdzIHZub2RlXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChpbnN0YW5jZSwgbmV4dFRyZWUuZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVkIGhvb2tcbiAgICAgICAgICAgICAgICBpZiAodSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvblZub2RlVXBkYXRlZFxuICAgICAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVVcGRhdGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4gaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBuZXh0LCB2bm9kZSksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRVcGRhdGVkKGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gY3JlYXRlIHJlYWN0aXZlIGVmZmVjdCBmb3IgcmVuZGVyaW5nXG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IChpbnN0YW5jZS5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoY29tcG9uZW50VXBkYXRlRm4sICgpID0+IHF1ZXVlSm9iKHVwZGF0ZSksIGluc3RhbmNlLnNjb3BlIC8vIHRyYWNrIGl0IGluIGNvbXBvbmVudCdzIGVmZmVjdCBzY29wZVxuICAgICAgICApKTtcbiAgICAgICAgY29uc3QgdXBkYXRlID0gKGluc3RhbmNlLnVwZGF0ZSA9ICgpID0+IGVmZmVjdC5ydW4oKSk7XG4gICAgICAgIHVwZGF0ZS5pZCA9IGluc3RhbmNlLnVpZDtcbiAgICAgICAgLy8gYWxsb3dSZWN1cnNlXG4gICAgICAgIC8vICMxODAxLCAjMjA0MyBjb21wb25lbnQgcmVuZGVyIGVmZmVjdHMgc2hvdWxkIGFsbG93IHJlY3Vyc2l2ZSB1cGRhdGVzXG4gICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBlZmZlY3Qub25UcmFjayA9IGluc3RhbmNlLnJ0Y1xuICAgICAgICAgICAgICAgID8gZSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGMsIGUpXG4gICAgICAgICAgICAgICAgOiB2b2lkIDA7XG4gICAgICAgICAgICBlZmZlY3Qub25UcmlnZ2VyID0gaW5zdGFuY2UucnRnXG4gICAgICAgICAgICAgICAgPyBlID0+IGludm9rZUFycmF5Rm5zKGluc3RhbmNlLnJ0ZywgZSlcbiAgICAgICAgICAgICAgICA6IHZvaWQgMDtcbiAgICAgICAgICAgIHVwZGF0ZS5vd25lckluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIgPSAoaW5zdGFuY2UsIG5leHRWTm9kZSwgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIG5leHRWTm9kZS5jb21wb25lbnQgPSBpbnN0YW5jZTtcbiAgICAgICAgY29uc3QgcHJldlByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHM7XG4gICAgICAgIGluc3RhbmNlLnZub2RlID0gbmV4dFZOb2RlO1xuICAgICAgICBpbnN0YW5jZS5uZXh0ID0gbnVsbDtcbiAgICAgICAgdXBkYXRlUHJvcHMoaW5zdGFuY2UsIG5leHRWTm9kZS5wcm9wcywgcHJldlByb3BzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB1cGRhdGVTbG90cyhpbnN0YW5jZSwgbmV4dFZOb2RlLmNoaWxkcmVuLCBvcHRpbWl6ZWQpO1xuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgIC8vIHByb3BzIHVwZGF0ZSBtYXkgaGF2ZSB0cmlnZ2VyZWQgcHJlLWZsdXNoIHdhdGNoZXJzLlxuICAgICAgICAvLyBmbHVzaCB0aGVtIGJlZm9yZSB0aGUgcmVuZGVyIHVwZGF0ZS5cbiAgICAgICAgZmx1c2hQcmVGbHVzaENicygpO1xuICAgICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgfTtcbiAgICBjb25zdCBwYXRjaENoaWxkcmVuID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XG4gICAgICAgIGNvbnN0IGMxID0gbjEgJiYgbjEuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHByZXZTaGFwZUZsYWcgPSBuMSA/IG4xLnNoYXBlRmxhZyA6IDA7XG4gICAgICAgIGNvbnN0IGMyID0gbjIuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHsgcGF0Y2hGbGFnLCBzaGFwZUZsYWcgfSA9IG4yO1xuICAgICAgICAvLyBmYXN0IHBhdGhcbiAgICAgICAgaWYgKHBhdGNoRmxhZyA+IDApIHtcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxMjggLyogUGF0Y2hGbGFncy5LRVlFRF9GUkFHTUVOVCAqLykge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgY291bGQgYmUgZWl0aGVyIGZ1bGx5LWtleWVkIG9yIG1peGVkIChzb21lIGtleWVkIHNvbWUgbm90KVxuICAgICAgICAgICAgICAgIC8vIHByZXNlbmNlIG9mIHBhdGNoRmxhZyBtZWFucyBjaGlsZHJlbiBhcmUgZ3VhcmFudGVlZCB0byBiZSBhcnJheXNcbiAgICAgICAgICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXRjaEZsYWcgJiAyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgLy8gdW5rZXllZFxuICAgICAgICAgICAgICAgIHBhdGNoVW5rZXllZENoaWxkcmVuKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNoaWxkcmVuIGhhcyAzIHBvc3NpYmlsaXRpZXM6IHRleHQsIGFycmF5IG9yIG5vIGNoaWxkcmVuLlxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIC8vIHRleHQgY2hpbGRyZW4gZmFzdCBwYXRoXG4gICAgICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMyICE9PSBjMSkge1xuICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsIGMyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgIC8vIHByZXYgY2hpbGRyZW4gd2FzIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdHdvIGFycmF5cywgY2Fubm90IGFzc3VtZSBhbnl0aGluZywgZG8gZnVsbCBkaWZmXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoS2V5ZWRDaGlsZHJlbihjMSwgYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbmV3IGNoaWxkcmVuLCBqdXN0IHVubW91bnQgb2xkXG4gICAgICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gcHJldiBjaGlsZHJlbiB3YXMgdGV4dCBPUiBudWxsXG4gICAgICAgICAgICAgICAgLy8gbmV3IGNoaWxkcmVuIGlzIGFycmF5IE9SIG51bGxcbiAgICAgICAgICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDggLyogU2hhcGVGbGFncy5URVhUX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbW91bnQgbmV3IGlmIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgbW91bnRDaGlsZHJlbihjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwYXRjaFVua2V5ZWRDaGlsZHJlbiA9IChjMSwgYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgYzEgPSBjMSB8fCBFTVBUWV9BUlI7XG4gICAgICAgIGMyID0gYzIgfHwgRU1QVFlfQVJSO1xuICAgICAgICBjb25zdCBvbGRMZW5ndGggPSBjMS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG5ld0xlbmd0aCA9IGMyLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY29tbW9uTGVuZ3RoID0gTWF0aC5taW4ob2xkTGVuZ3RoLCBuZXdMZW5ndGgpO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbW1vbkxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcbiAgICAgICAgICAgIHBhdGNoKGMxW2ldLCBuZXh0Q2hpbGQsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2xkTGVuZ3RoID4gbmV3TGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgb2xkXG4gICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUsIGZhbHNlLCBjb21tb25MZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbW91bnQgbmV3XG4gICAgICAgICAgICBtb3VudENoaWxkcmVuKGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBjb21tb25MZW5ndGgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBjYW4gYmUgYWxsLWtleWVkIG9yIG1peGVkXG4gICAgY29uc3QgcGF0Y2hLZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGNvbnN0IGwyID0gYzIubGVuZ3RoO1xuICAgICAgICBsZXQgZTEgPSBjMS5sZW5ndGggLSAxOyAvLyBwcmV2IGVuZGluZyBpbmRleFxuICAgICAgICBsZXQgZTIgPSBsMiAtIDE7IC8vIG5leHQgZW5kaW5nIGluZGV4XG4gICAgICAgIC8vIDEuIHN5bmMgZnJvbSBzdGFydFxuICAgICAgICAvLyAoYSBiKSBjXG4gICAgICAgIC8vIChhIGIpIGQgZVxuICAgICAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICAgICAgICBjb25zdCBuMSA9IGMxW2ldO1xuICAgICAgICAgICAgY29uc3QgbjIgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcbiAgICAgICAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgICAgICAgICAgIHBhdGNoKG4xLCBuMiwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMi4gc3luYyBmcm9tIGVuZFxuICAgICAgICAvLyBhIChiIGMpXG4gICAgICAgIC8vIGQgZSAoYiBjKVxuICAgICAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICAgICAgICBjb25zdCBuMSA9IGMxW2UxXTtcbiAgICAgICAgICAgIGNvbnN0IG4yID0gKGMyW2UyXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbZTJdKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbZTJdKSk7XG4gICAgICAgICAgICBpZiAoaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikpIHtcbiAgICAgICAgICAgICAgICBwYXRjaChuMSwgbjIsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZTEtLTtcbiAgICAgICAgICAgIGUyLS07XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4gY29tbW9uIHNlcXVlbmNlICsgbW91bnRcbiAgICAgICAgLy8gKGEgYilcbiAgICAgICAgLy8gKGEgYikgY1xuICAgICAgICAvLyBpID0gMiwgZTEgPSAxLCBlMiA9IDJcbiAgICAgICAgLy8gKGEgYilcbiAgICAgICAgLy8gYyAoYSBiKVxuICAgICAgICAvLyBpID0gMCwgZTEgPSAtMSwgZTIgPSAwXG4gICAgICAgIGlmIChpID4gZTEpIHtcbiAgICAgICAgICAgIGlmIChpIDw9IGUyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFBvcyA9IGUyICsgMTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0UG9zIDwgbDIgPyBjMltuZXh0UG9zXS5lbCA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA8PSBlMikge1xuICAgICAgICAgICAgICAgICAgICBwYXRjaChudWxsLCAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSksIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDQuIGNvbW1vbiBzZXF1ZW5jZSArIHVubW91bnRcbiAgICAgICAgLy8gKGEgYikgY1xuICAgICAgICAvLyAoYSBiKVxuICAgICAgICAvLyBpID0gMiwgZTEgPSAyLCBlMiA9IDFcbiAgICAgICAgLy8gYSAoYiBjKVxuICAgICAgICAvLyAoYiBjKVxuICAgICAgICAvLyBpID0gMCwgZTEgPSAwLCBlMiA9IC0xXG4gICAgICAgIGVsc2UgaWYgKGkgPiBlMikge1xuICAgICAgICAgICAgd2hpbGUgKGkgPD0gZTEpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KGMxW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gNS4gdW5rbm93biBzZXF1ZW5jZVxuICAgICAgICAvLyBbaSAuLi4gZTEgKyAxXTogYSBiIFtjIGQgZV0gZiBnXG4gICAgICAgIC8vIFtpIC4uLiBlMiArIDFdOiBhIGIgW2UgZCBjIGhdIGYgZ1xuICAgICAgICAvLyBpID0gMiwgZTEgPSA0LCBlMiA9IDVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzMSA9IGk7IC8vIHByZXYgc3RhcnRpbmcgaW5kZXhcbiAgICAgICAgICAgIGNvbnN0IHMyID0gaTsgLy8gbmV4dCBzdGFydGluZyBpbmRleFxuICAgICAgICAgICAgLy8gNS4xIGJ1aWxkIGtleTppbmRleCBtYXAgZm9yIG5ld0NoaWxkcmVuXG4gICAgICAgICAgICBjb25zdCBrZXlUb05ld0luZGV4TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChpID0gczI7IGkgPD0gZTI7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IChjMltpXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRDaGlsZC5rZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleVRvTmV3SW5kZXhNYXAuaGFzKG5leHRDaGlsZC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBEdXBsaWNhdGUga2V5cyBmb3VuZCBkdXJpbmcgdXBkYXRlOmAsIEpTT04uc3RyaW5naWZ5KG5leHRDaGlsZC5rZXkpLCBgTWFrZSBzdXJlIGtleXMgYXJlIHVuaXF1ZS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBrZXlUb05ld0luZGV4TWFwLnNldChuZXh0Q2hpbGQua2V5LCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyA1LjIgbG9vcCB0aHJvdWdoIG9sZCBjaGlsZHJlbiBsZWZ0IHRvIGJlIHBhdGNoZWQgYW5kIHRyeSB0byBwYXRjaFxuICAgICAgICAgICAgLy8gbWF0Y2hpbmcgbm9kZXMgJiByZW1vdmUgbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnRcbiAgICAgICAgICAgIGxldCBqO1xuICAgICAgICAgICAgbGV0IHBhdGNoZWQgPSAwO1xuICAgICAgICAgICAgY29uc3QgdG9CZVBhdGNoZWQgPSBlMiAtIHMyICsgMTtcbiAgICAgICAgICAgIGxldCBtb3ZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gdXNlZCB0byB0cmFjayB3aGV0aGVyIGFueSBub2RlIGhhcyBtb3ZlZFxuICAgICAgICAgICAgbGV0IG1heE5ld0luZGV4U29GYXIgPSAwO1xuICAgICAgICAgICAgLy8gd29ya3MgYXMgTWFwPG5ld0luZGV4LCBvbGRJbmRleD5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBvbGRJbmRleCBpcyBvZmZzZXQgYnkgKzFcbiAgICAgICAgICAgIC8vIGFuZCBvbGRJbmRleCA9IDAgaXMgYSBzcGVjaWFsIHZhbHVlIGluZGljYXRpbmcgdGhlIG5ldyBub2RlIGhhc1xuICAgICAgICAgICAgLy8gbm8gY29ycmVzcG9uZGluZyBvbGQgbm9kZS5cbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGRldGVybWluaW5nIGxvbmdlc3Qgc3RhYmxlIHN1YnNlcXVlbmNlXG4gICAgICAgICAgICBjb25zdCBuZXdJbmRleFRvT2xkSW5kZXhNYXAgPSBuZXcgQXJyYXkodG9CZVBhdGNoZWQpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRvQmVQYXRjaGVkOyBpKyspXG4gICAgICAgICAgICAgICAgbmV3SW5kZXhUb09sZEluZGV4TWFwW2ldID0gMDtcbiAgICAgICAgICAgIGZvciAoaSA9IHMxOyBpIDw9IGUxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2Q2hpbGQgPSBjMVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hlZCA+PSB0b0JlUGF0Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGwgbmV3IGNoaWxkcmVuIGhhdmUgYmVlbiBwYXRjaGVkIHNvIHRoaXMgY2FuIG9ubHkgYmUgYSByZW1vdmFsXG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQocHJldkNoaWxkLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAocHJldkNoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0luZGV4ID0ga2V5VG9OZXdJbmRleE1hcC5nZXQocHJldkNoaWxkLmtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBrZXktbGVzcyBub2RlLCB0cnkgdG8gbG9jYXRlIGEga2V5LWxlc3Mgbm9kZSBvZiB0aGUgc2FtZSB0eXBlXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IHMyOyBqIDw9IGUyOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdJbmRleFRvT2xkSW5kZXhNYXBbaiAtIHMyXSA9PT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2FtZVZOb2RlVHlwZShwcmV2Q2hpbGQsIGMyW2pdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4ID0gajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV3SW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB1bm1vdW50KHByZXZDaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdJbmRleFRvT2xkSW5kZXhNYXBbbmV3SW5kZXggLSBzMl0gPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4ID49IG1heE5ld0luZGV4U29GYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heE5ld0luZGV4U29GYXIgPSBuZXdJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXRjaChwcmV2Q2hpbGQsIGMyW25ld0luZGV4XSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICBwYXRjaGVkKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gNS4zIG1vdmUgYW5kIG1vdW50XG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSBsb25nZXN0IHN0YWJsZSBzdWJzZXF1ZW5jZSBvbmx5IHdoZW4gbm9kZXMgaGF2ZSBtb3ZlZFxuICAgICAgICAgICAgY29uc3QgaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UgPSBtb3ZlZFxuICAgICAgICAgICAgICAgID8gZ2V0U2VxdWVuY2UobmV3SW5kZXhUb09sZEluZGV4TWFwKVxuICAgICAgICAgICAgICAgIDogRU1QVFlfQVJSO1xuICAgICAgICAgICAgaiA9IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAvLyBsb29waW5nIGJhY2t3YXJkcyBzbyB0aGF0IHdlIGNhbiB1c2UgbGFzdCBwYXRjaGVkIG5vZGUgYXMgYW5jaG9yXG4gICAgICAgICAgICBmb3IgKGkgPSB0b0JlUGF0Y2hlZCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gczIgKyBpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IGMyW25leHRJbmRleF07XG4gICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gbmV4dEluZGV4ICsgMSA8IGwyID8gYzJbbmV4dEluZGV4ICsgMV0uZWwgOiBwYXJlbnRBbmNob3I7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtpXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtb3VudCBuZXdcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV4dENoaWxkLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBpZjpcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gc3RhYmxlIHN1YnNlcXVlbmNlIChlLmcuIGEgcmV2ZXJzZSlcbiAgICAgICAgICAgICAgICAgICAgLy8gT1IgY3VycmVudCBub2RlIGlzIG5vdCBhbW9uZyB0aGUgc3RhYmxlIHNlcXVlbmNlXG4gICAgICAgICAgICAgICAgICAgIGlmIChqIDwgMCB8fCBpICE9PSBpbmNyZWFzaW5nTmV3SW5kZXhTZXF1ZW5jZVtqXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZShuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCAyIC8qIE1vdmVUeXBlLlJFT1JERVIgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgai0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3ZlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUsIHBhcmVudFN1c3BlbnNlID0gbnVsbCkgPT4ge1xuICAgICAgICBjb25zdCB7IGVsLCB0eXBlLCB0cmFuc2l0aW9uLCBjaGlsZHJlbiwgc2hhcGVGbGFnIH0gPSB2bm9kZTtcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgIG1vdmUodm5vZGUuY29tcG9uZW50LnN1YlRyZWUsIGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICB2bm9kZS5zdXNwZW5zZS5tb3ZlKGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pIHtcbiAgICAgICAgICAgIHR5cGUubW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIGludGVybmFscyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbW92ZShjaGlsZHJlbltpXSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhvc3RJbnNlcnQodm5vZGUuYW5jaG9yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgICAgICAgbW92ZVN0YXRpY05vZGUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzaW5nbGUgbm9kZXNcbiAgICAgICAgY29uc3QgbmVlZFRyYW5zaXRpb24gPSBtb3ZlVHlwZSAhPT0gMiAvKiBNb3ZlVHlwZS5SRU9SREVSICovICYmXG4gICAgICAgICAgICBzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJlxuICAgICAgICAgICAgdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKG5lZWRUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAobW92ZVR5cGUgPT09IDAgLyogTW92ZVR5cGUuRU5URVIgKi8pIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHRyYW5zaXRpb24uZW50ZXIoZWwpLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGxlYXZlLCBkZWxheUxlYXZlLCBhZnRlckxlYXZlIH0gPSB0cmFuc2l0aW9uO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9ICgpID0+IGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJmb3JtTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxlYXZlKGVsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyTGVhdmUgJiYgYWZ0ZXJMZWF2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUoZWwsIHJlbW92ZSwgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1MZWF2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdW5tb3VudCA9ICh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUgPSBmYWxzZSwgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcmVmLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBzaGFwZUZsYWcsIHBhdGNoRmxhZywgZGlycyB9ID0gdm5vZGU7XG4gICAgICAgIC8vIHVuc2V0IHJlZlxuICAgICAgICBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLykge1xuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5kZWFjdGl2YXRlKHZub2RlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaG91bGRJbnZva2VEaXJzID0gc2hhcGVGbGFnICYgMSAvKiBTaGFwZUZsYWdzLkVMRU1FTlQgKi8gJiYgZGlycztcbiAgICAgICAgY29uc3Qgc2hvdWxkSW52b2tlVm5vZGVIb29rID0gIWlzQXN5bmNXcmFwcGVyKHZub2RlKTtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJlxuICAgICAgICAgICAgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVCZWZvcmVVbm1vdW50KSkge1xuICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgIHVubW91bnRDb21wb25lbnQodm5vZGUuY29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUuc3VzcGVuc2UudW5tb3VudChwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaG91bGRJbnZva2VEaXJzKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlVW5tb3VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pIHtcbiAgICAgICAgICAgICAgICB2bm9kZS50eXBlLnJlbW92ZSh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgb3B0aW1pemVkLCBpbnRlcm5hbHMsIGRvUmVtb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGR5bmFtaWNDaGlsZHJlbiAmJlxuICAgICAgICAgICAgICAgIC8vICMxMTUzOiBmYXN0IHBhdGggc2hvdWxkIG5vdCBiZSB0YWtlbiBmb3Igbm9uLXN0YWJsZSAodi1mb3IpIGZyYWdtZW50c1xuICAgICAgICAgICAgICAgICh0eXBlICE9PSBGcmFnbWVudCB8fFxuICAgICAgICAgICAgICAgICAgICAocGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqLykpKSB7XG4gICAgICAgICAgICAgICAgLy8gZmFzdCBwYXRoIGZvciBibG9jayBub2Rlczogb25seSBuZWVkIHRvIHVubW91bnQgZHluYW1pYyBjaGlsZHJlbi5cbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oZHluYW1pY0NoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgodHlwZSA9PT0gRnJhZ21lbnQgJiZcbiAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJlxuICAgICAgICAgICAgICAgICAgICAoMTI4IC8qIFBhdGNoRmxhZ3MuS0VZRURfRlJBR01FTlQgKi8gfCAyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovKSkgfHxcbiAgICAgICAgICAgICAgICAoIW9wdGltaXplZCAmJiBzaGFwZUZsYWcgJiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovKSkge1xuICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZG9SZW1vdmUpIHtcbiAgICAgICAgICAgICAgICByZW1vdmUodm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgoc2hvdWxkSW52b2tlVm5vZGVIb29rICYmXG4gICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkpIHx8XG4gICAgICAgICAgICBzaG91bGRJbnZva2VEaXJzKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICBzaG91bGRJbnZva2VEaXJzICYmXG4gICAgICAgICAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ3VubW91bnRlZCcpO1xuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmUgPSB2bm9kZSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdHlwZSwgZWwsIGFuY2hvciwgdHJhbnNpdGlvbiB9ID0gdm5vZGU7XG4gICAgICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyA+IDAgJiZcbiAgICAgICAgICAgICAgICB2bm9kZS5wYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8gJiZcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAgICAgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC50eXBlID09PSBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0UmVtb3ZlKGNoaWxkLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUZyYWdtZW50KGVsLCBhbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSBTdGF0aWMpIHtcbiAgICAgICAgICAgIHJlbW92ZVN0YXRpY05vZGUodm5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBlcmZvcm1SZW1vdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCAmJiB0cmFuc2l0aW9uLmFmdGVyTGVhdmUpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmFmdGVyTGVhdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovICYmXG4gICAgICAgICAgICB0cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAhdHJhbnNpdGlvbi5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVhdmUsIGRlbGF5TGVhdmUgfSA9IHRyYW5zaXRpb247XG4gICAgICAgICAgICBjb25zdCBwZXJmb3JtTGVhdmUgPSAoKSA9PiBsZWF2ZShlbCwgcGVyZm9ybVJlbW92ZSk7XG4gICAgICAgICAgICBpZiAoZGVsYXlMZWF2ZSkge1xuICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUodm5vZGUuZWwsIHBlcmZvcm1SZW1vdmUsIHBlcmZvcm1MZWF2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBlcmZvcm1SZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlRnJhZ21lbnQgPSAoY3VyLCBlbmQpID0+IHtcbiAgICAgICAgLy8gRm9yIGZyYWdtZW50cywgZGlyZWN0bHkgcmVtb3ZlIGFsbCBjb250YWluZWQgRE9NIG5vZGVzLlxuICAgICAgICAvLyAoZnJhZ21lbnQgY2hpbGQgbm9kZXMgY2Fubm90IGhhdmUgdHJhbnNpdGlvbilcbiAgICAgICAgbGV0IG5leHQ7XG4gICAgICAgIHdoaWxlIChjdXIgIT09IGVuZCkge1xuICAgICAgICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhjdXIpO1xuICAgICAgICAgICAgaG9zdFJlbW92ZShjdXIpO1xuICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBob3N0UmVtb3ZlKGVuZCk7XG4gICAgfTtcbiAgICBjb25zdCB1bm1vdW50Q29tcG9uZW50ID0gKGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpID0+IHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpbnN0YW5jZS50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgIHVucmVnaXN0ZXJITVIoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgYnVtLCBzY29wZSwgdXBkYXRlLCBzdWJUcmVlLCB1bSB9ID0gaW5zdGFuY2U7XG4gICAgICAgIC8vIGJlZm9yZVVubW91bnQgaG9va1xuICAgICAgICBpZiAoYnVtKSB7XG4gICAgICAgICAgICBpbnZva2VBcnJheUZucyhidW0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN0b3AgZWZmZWN0cyBpbiBjb21wb25lbnQgc2NvcGVcbiAgICAgICAgc2NvcGUuc3RvcCgpO1xuICAgICAgICAvLyB1cGRhdGUgbWF5IGJlIG51bGwgaWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGJlZm9yZSBpdHMgYXN5bmNcbiAgICAgICAgLy8gc2V0dXAgaGFzIHJlc29sdmVkLlxuICAgICAgICBpZiAodXBkYXRlKSB7XG4gICAgICAgICAgICAvLyBzbyB0aGF0IHNjaGVkdWxlciB3aWxsIG5vIGxvbmdlciBpbnZva2UgaXRcbiAgICAgICAgICAgIHVwZGF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHVubW91bnQoc3ViVHJlZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdW5tb3VudGVkIGhvb2tcbiAgICAgICAgaWYgKHVtKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodW0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgaW5zdGFuY2UuaXNVbm1vdW50ZWQgPSB0cnVlO1xuICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIC8vIEEgY29tcG9uZW50IHdpdGggYXN5bmMgZGVwIGluc2lkZSBhIHBlbmRpbmcgc3VzcGVuc2UgaXMgdW5tb3VudGVkIGJlZm9yZVxuICAgICAgICAvLyBpdHMgYXN5bmMgZGVwIHJlc29sdmVzLiBUaGlzIHNob3VsZCByZW1vdmUgdGhlIGRlcCBmcm9tIHRoZSBzdXNwZW5zZSwgYW5kXG4gICAgICAgIC8vIGNhdXNlIHRoZSBzdXNwZW5zZSB0byByZXNvbHZlIGltbWVkaWF0ZWx5IGlmIHRoYXQgd2FzIHRoZSBsYXN0IGRlcC5cbiAgICAgICAgaWYgKHBhcmVudFN1c3BlbnNlICYmXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmXG4gICAgICAgICAgICAhcGFyZW50U3VzcGVuc2UuaXNVbm1vdW50ZWQgJiZcbiAgICAgICAgICAgIGluc3RhbmNlLmFzeW5jRGVwICYmXG4gICAgICAgICAgICAhaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCAmJlxuICAgICAgICAgICAgaW5zdGFuY2Uuc3VzcGVuc2VJZCA9PT0gcGFyZW50U3VzcGVuc2UucGVuZGluZ0lkKSB7XG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5kZXBzLS07XG4gICAgICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRSZW1vdmVkKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdW5tb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSwgc3RhcnQgPSAwKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB1bm1vdW50KGNoaWxkcmVuW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSwgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZ2V0TmV4dEhvc3ROb2RlID0gdm5vZGUgPT4ge1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGdldE5leHRIb3N0Tm9kZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICByZXR1cm4gdm5vZGUuc3VzcGVuc2UubmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBob3N0TmV4dFNpYmxpbmcoKHZub2RlLmFuY2hvciB8fCB2bm9kZS5lbCkpO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyID0gKHZub2RlLCBjb250YWluZXIsIGlzU1ZHKSA9PiB7XG4gICAgICAgIGlmICh2bm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLl92bm9kZSkge1xuICAgICAgICAgICAgICAgIHVubW91bnQoY29udGFpbmVyLl92bm9kZSwgbnVsbCwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXRjaChjb250YWluZXIuX3Zub2RlIHx8IG51bGwsIHZub2RlLCBjb250YWluZXIsIG51bGwsIG51bGwsIG51bGwsIGlzU1ZHKTtcbiAgICAgICAgfVxuICAgICAgICBmbHVzaFByZUZsdXNoQ2JzKCk7XG4gICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICB9O1xuICAgIGNvbnN0IGludGVybmFscyA9IHtcbiAgICAgICAgcDogcGF0Y2gsXG4gICAgICAgIHVtOiB1bm1vdW50LFxuICAgICAgICBtOiBtb3ZlLFxuICAgICAgICByOiByZW1vdmUsXG4gICAgICAgIG10OiBtb3VudENvbXBvbmVudCxcbiAgICAgICAgbWM6IG1vdW50Q2hpbGRyZW4sXG4gICAgICAgIHBjOiBwYXRjaENoaWxkcmVuLFxuICAgICAgICBwYmM6IHBhdGNoQmxvY2tDaGlsZHJlbixcbiAgICAgICAgbjogZ2V0TmV4dEhvc3ROb2RlLFxuICAgICAgICBvOiBvcHRpb25zXG4gICAgfTtcbiAgICBsZXQgaHlkcmF0ZTtcbiAgICBsZXQgaHlkcmF0ZU5vZGU7XG4gICAgaWYgKGNyZWF0ZUh5ZHJhdGlvbkZucykge1xuICAgICAgICBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdID0gY3JlYXRlSHlkcmF0aW9uRm5zKGludGVybmFscyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcixcbiAgICAgICAgaHlkcmF0ZSxcbiAgICAgICAgY3JlYXRlQXBwOiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKVxuICAgIH07XG59XG5mdW5jdGlvbiB0b2dnbGVSZWN1cnNlKHsgZWZmZWN0LCB1cGRhdGUgfSwgYWxsb3dlZCkge1xuICAgIGVmZmVjdC5hbGxvd1JlY3Vyc2UgPSB1cGRhdGUuYWxsb3dSZWN1cnNlID0gYWxsb3dlZDtcbn1cbi8qKlxuICogIzExNTZcbiAqIFdoZW4gYSBjb21wb25lbnQgaXMgSE1SLWVuYWJsZWQsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHN0YXRpYyBub2Rlc1xuICogaW5zaWRlIGEgYmxvY2sgYWxzbyBpbmhlcml0IHRoZSBET00gZWxlbWVudCBmcm9tIHRoZSBwcmV2aW91cyB0cmVlIHNvIHRoYXRcbiAqIEhNUiB1cGRhdGVzICh3aGljaCBhcmUgZnVsbCB1cGRhdGVzKSBjYW4gcmV0cmlldmUgdGhlIGVsZW1lbnQgZm9yIHBhdGNoaW5nLlxuICpcbiAqICMyMDgwXG4gKiBJbnNpZGUga2V5ZWQgYHRlbXBsYXRlYCBmcmFnbWVudCBzdGF0aWMgY2hpbGRyZW4sIGlmIGEgZnJhZ21lbnQgaXMgbW92ZWQsXG4gKiB0aGUgY2hpbGRyZW4gd2lsbCBhbHdheXMgYmUgbW92ZWQuIFRoZXJlZm9yZSwgaW4gb3JkZXIgdG8gZW5zdXJlIGNvcnJlY3QgbW92ZVxuICogcG9zaXRpb24sIGVsIHNob3VsZCBiZSBpbmhlcml0ZWQgZnJvbSBwcmV2aW91cyBub2Rlcy5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIsIHNoYWxsb3cgPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoMSA9IG4xLmNoaWxkcmVuO1xuICAgIGNvbnN0IGNoMiA9IG4yLmNoaWxkcmVuO1xuICAgIGlmIChpc0FycmF5KGNoMSkgJiYgaXNBcnJheShjaDIpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2gxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIG9ubHkgY2FsbGVkIGluIHRoZSBvcHRpbWl6ZWQgcGF0aCBzbyBhcnJheSBjaGlsZHJlbiBhcmVcbiAgICAgICAgICAgIC8vIGd1YXJhbnRlZWQgdG8gYmUgdm5vZGVzXG4gICAgICAgICAgICBjb25zdCBjMSA9IGNoMVtpXTtcbiAgICAgICAgICAgIGxldCBjMiA9IGNoMltpXTtcbiAgICAgICAgICAgIGlmIChjMi5zaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJiAhYzIuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGMyLnBhdGNoRmxhZyA8PSAwIHx8IGMyLnBhdGNoRmxhZyA9PT0gMzIgLyogUGF0Y2hGbGFncy5IWURSQVRFX0VWRU5UUyAqLykge1xuICAgICAgICAgICAgICAgICAgICBjMiA9IGNoMltpXSA9IGNsb25lSWZNb3VudGVkKGNoMltpXSk7XG4gICAgICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghc2hhbGxvdylcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihjMSwgYzIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gIzY4NTIgYWxzbyBpbmhlcml0IGZvciB0ZXh0IG5vZGVzXG4gICAgICAgICAgICBpZiAoYzIudHlwZSA9PT0gVGV4dCkge1xuICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhbHNvIGluaGVyaXQgZm9yIGNvbW1lbnQgbm9kZXMsIGJ1dCBub3QgcGxhY2Vob2xkZXJzIChlLmcuIHYtaWYgd2hpY2hcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUgcmVjZWl2ZWQgLmVsIGR1cmluZyBibG9jayBwYXRjaClcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYzIudHlwZSA9PT0gQ29tbWVudCAmJiAhYzIuZWwpIHtcbiAgICAgICAgICAgICAgICBjMi5lbCA9IGMxLmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9uZ2VzdF9pbmNyZWFzaW5nX3N1YnNlcXVlbmNlXG5mdW5jdGlvbiBnZXRTZXF1ZW5jZShhcnIpIHtcbiAgICBjb25zdCBwID0gYXJyLnNsaWNlKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gWzBdO1xuICAgIGxldCBpLCBqLCB1LCB2LCBjO1xuICAgIGNvbnN0IGxlbiA9IGFyci5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFyckkgPSBhcnJbaV07XG4gICAgICAgIGlmIChhcnJJICE9PSAwKSB7XG4gICAgICAgICAgICBqID0gcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChhcnJbal0gPCBhcnJJKSB7XG4gICAgICAgICAgICAgICAgcFtpXSA9IGo7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1ID0gMDtcbiAgICAgICAgICAgIHYgPSByZXN1bHQubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHdoaWxlICh1IDwgdikge1xuICAgICAgICAgICAgICAgIGMgPSAodSArIHYpID4+IDE7XG4gICAgICAgICAgICAgICAgaWYgKGFycltyZXN1bHRbY11dIDwgYXJySSkge1xuICAgICAgICAgICAgICAgICAgICB1ID0gYyArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2ID0gYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJySSA8IGFycltyZXN1bHRbdV1dKSB7XG4gICAgICAgICAgICAgICAgaWYgKHUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBbaV0gPSByZXN1bHRbdSAtIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRbdV0gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHUgPSByZXN1bHQubGVuZ3RoO1xuICAgIHYgPSByZXN1bHRbdSAtIDFdO1xuICAgIHdoaWxlICh1LS0gPiAwKSB7XG4gICAgICAgIHJlc3VsdFt1XSA9IHY7XG4gICAgICAgIHYgPSBwW3ZdO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5jb25zdCBpc1RlbGVwb3J0ID0gKHR5cGUpID0+IHR5cGUuX19pc1RlbGVwb3J0O1xuY29uc3QgaXNUZWxlcG9ydERpc2FibGVkID0gKHByb3BzKSA9PiBwcm9wcyAmJiAocHJvcHMuZGlzYWJsZWQgfHwgcHJvcHMuZGlzYWJsZWQgPT09ICcnKTtcbmNvbnN0IGlzVGFyZ2V0U1ZHID0gKHRhcmdldCkgPT4gdHlwZW9mIFNWR0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7XG5jb25zdCByZXNvbHZlVGFyZ2V0ID0gKHByb3BzLCBzZWxlY3QpID0+IHtcbiAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IHByb3BzICYmIHByb3BzLnRvO1xuICAgIGlmIChpc1N0cmluZyh0YXJnZXRTZWxlY3RvcikpIHtcbiAgICAgICAgaWYgKCFzZWxlY3QpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHdhcm4oYEN1cnJlbnQgcmVuZGVyZXIgZG9lcyBub3Qgc3VwcG9ydCBzdHJpbmcgdGFyZ2V0IGZvciBUZWxlcG9ydHMuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgKG1pc3NpbmcgcXVlcnlTZWxlY3RvciByZW5kZXJlciBvcHRpb24pYCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdCh0YXJnZXRTZWxlY3Rvcik7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gbG9jYXRlIFRlbGVwb3J0IHRhcmdldCB3aXRoIHNlbGVjdG9yIFwiJHt0YXJnZXRTZWxlY3Rvcn1cIi4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgTm90ZSB0aGUgdGFyZ2V0IGVsZW1lbnQgbXVzdCBleGlzdCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkIC0gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgaS5lLiB0aGUgdGFyZ2V0IGNhbm5vdCBiZSByZW5kZXJlZCBieSB0aGUgY29tcG9uZW50IGl0c2VsZiwgYW5kIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGlkZWFsbHkgc2hvdWxkIGJlIG91dHNpZGUgb2YgdGhlIGVudGlyZSBWdWUgY29tcG9uZW50IHRyZWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICF0YXJnZXRTZWxlY3RvciAmJiAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgICAgICAgd2FybihgSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQ6ICR7dGFyZ2V0U2VsZWN0b3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldFNlbGVjdG9yO1xuICAgIH1cbn07XG5jb25zdCBUZWxlcG9ydEltcGwgPSB7XG4gICAgX19pc1RlbGVwb3J0OiB0cnVlLFxuICAgIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpIHtcbiAgICAgICAgY29uc3QgeyBtYzogbW91bnRDaGlsZHJlbiwgcGM6IHBhdGNoQ2hpbGRyZW4sIHBiYzogcGF0Y2hCbG9ja0NoaWxkcmVuLCBvOiB7IGluc2VydCwgcXVlcnlTZWxlY3RvciwgY3JlYXRlVGV4dCwgY3JlYXRlQ29tbWVudCB9IH0gPSBpbnRlcm5hbHM7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKG4yLnByb3BzKTtcbiAgICAgICAgbGV0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuIH0gPSBuMjtcbiAgICAgICAgLy8gIzMzMDJcbiAgICAgICAgLy8gSE1SIHVwZGF0ZWQsIGZvcmNlIGZ1bGwgZGlmZlxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gaW5zZXJ0IGFuY2hvcnMgaW4gdGhlIG1haW4gdmlld1xuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAobjIuZWwgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICA/IGNyZWF0ZUNvbW1lbnQoJ3RlbGVwb3J0IHN0YXJ0JylcbiAgICAgICAgICAgICAgICA6IGNyZWF0ZVRleHQoJycpKTtcbiAgICAgICAgICAgIGNvbnN0IG1haW5BbmNob3IgPSAobjIuYW5jaG9yID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVDb21tZW50KCd0ZWxlcG9ydCBlbmQnKVxuICAgICAgICAgICAgICAgIDogY3JlYXRlVGV4dCgnJykpO1xuICAgICAgICAgICAgaW5zZXJ0KHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICBpbnNlcnQobWFpbkFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gKG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQobjIucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IChuMi50YXJnZXRBbmNob3IgPSBjcmVhdGVUZXh0KCcnKSk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0KHRhcmdldEFuY2hvciwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAvLyAjMjY1MiB3ZSBjb3VsZCBiZSB0ZWxlcG9ydGluZyBmcm9tIGEgbm9uLVNWRyB0cmVlIGludG8gYW4gU1ZHIHRyZWVcbiAgICAgICAgICAgICAgICBpc1NWRyA9IGlzU1ZHIHx8IGlzVGFyZ2V0U1ZHKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gbW91bnQ6JywgdGFyZ2V0LCBgKCR7dHlwZW9mIHRhcmdldH0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtb3VudCA9IChjb250YWluZXIsIGFuY2hvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRlbGVwb3J0ICphbHdheXMqIGhhcyBBcnJheSBjaGlsZHJlbi4gVGhpcyBpcyBlbmZvcmNlZCBpbiBib3RoIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGVyIGFuZCB2bm9kZSBjaGlsZHJlbiBub3JtYWxpemF0aW9uLlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4oY2hpbGRyZW4sIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBtb3VudChjb250YWluZXIsIG1haW5BbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgbW91bnQodGFyZ2V0LCB0YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdXBkYXRlIGNvbnRlbnRcbiAgICAgICAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICAgICAgICBjb25zdCBtYWluQW5jaG9yID0gKG4yLmFuY2hvciA9IG4xLmFuY2hvcik7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAobjIudGFyZ2V0ID0gbjEudGFyZ2V0KTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IChuMi50YXJnZXRBbmNob3IgPSBuMS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgY29uc3Qgd2FzRGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjEucHJvcHMpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRhaW5lciA9IHdhc0Rpc2FibGVkID8gY29udGFpbmVyIDogdGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEFuY2hvciA9IHdhc0Rpc2FibGVkID8gbWFpbkFuY2hvciA6IHRhcmdldEFuY2hvcjtcbiAgICAgICAgICAgIGlzU1ZHID0gaXNTVkcgfHwgaXNUYXJnZXRTVkcodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAvLyBmYXN0IHBhdGggd2hlbiB0aGUgdGVsZXBvcnQgaGFwcGVucyB0byBiZSBhIGJsb2NrIHJvb3RcbiAgICAgICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGN1cnJlbnRDb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaW4gYmxvY2sgdHJlZSBtb2RlIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGFsbCByb290LWxldmVsIG5vZGVzXG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIHRlbGVwb3J0IGluaGVyaXQgcHJldmlvdXMgRE9NIHJlZmVyZW5jZXMgc28gdGhhdCB0aGV5IGNhblxuICAgICAgICAgICAgICAgIC8vIGJlIG1vdmVkIGluIGZ1dHVyZSBwYXRjaGVzLlxuICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcbiAgICAgICAgICAgICAgICBwYXRjaENoaWxkcmVuKG4xLCBuMiwgY3VycmVudENvbnRhaW5lciwgY3VycmVudEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3YXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGVkIC0+IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgaW50byBtYWluIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIGNvbnRhaW5lciwgbWFpbkFuY2hvciwgaW50ZXJuYWxzLCAxIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRPR0dMRSAqLyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdGFyZ2V0IGNoYW5nZWRcbiAgICAgICAgICAgICAgICBpZiAoKG4yLnByb3BzICYmIG4yLnByb3BzLnRvKSAhPT0gKG4xLnByb3BzICYmIG4xLnByb3BzLnRvKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFyZ2V0ID0gKG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQobjIucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUZWxlcG9ydChuMiwgbmV4dFRhcmdldCwgbnVsbCwgaW50ZXJuYWxzLCAwIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRBUkdFVF9DSEFOR0UgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gdXBkYXRlOicsIHRhcmdldCwgYCgke3R5cGVvZiB0YXJnZXR9KWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdhc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGVkIC0+IGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBpbnRvIHRlbGVwb3J0IHRhcmdldFxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIHRhcmdldCwgdGFyZ2V0QW5jaG9yLCBpbnRlcm5hbHMsIDEgLyogVGVsZXBvcnRNb3ZlVHlwZXMuVE9HR0xFICovKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlQ3NzVmFycyhuMik7XG4gICAgfSxcbiAgICByZW1vdmUodm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG9wdGltaXplZCwgeyB1bTogdW5tb3VudCwgbzogeyByZW1vdmU6IGhvc3RSZW1vdmUgfSB9LCBkb1JlbW92ZSkge1xuICAgICAgICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4sIGFuY2hvciwgdGFyZ2V0QW5jaG9yLCB0YXJnZXQsIHByb3BzIH0gPSB2bm9kZTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgaG9zdFJlbW92ZSh0YXJnZXRBbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFuIHVubW91bnRlZCB0ZWxlcG9ydCBzaG91bGQgYWx3YXlzIHJlbW92ZSBpdHMgY2hpbGRyZW4gaWYgbm90IGRpc2FibGVkXG4gICAgICAgIGlmIChkb1JlbW92ZSB8fCAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgICAgICAgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQoY2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUsICEhY2hpbGQuZHluYW1pY0NoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1vdmU6IG1vdmVUZWxlcG9ydCxcbiAgICBoeWRyYXRlOiBoeWRyYXRlVGVsZXBvcnRcbn07XG5mdW5jdGlvbiBtb3ZlVGVsZXBvcnQodm5vZGUsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCB7IG86IHsgaW5zZXJ0IH0sIG06IG1vdmUgfSwgbW92ZVR5cGUgPSAyIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlJFT1JERVIgKi8pIHtcbiAgICAvLyBtb3ZlIHRhcmdldCBhbmNob3IgaWYgdGhpcyBpcyBhIHRhcmdldCBjaGFuZ2UuXG4gICAgaWYgKG1vdmVUeXBlID09PSAwIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRBUkdFVF9DSEFOR0UgKi8pIHtcbiAgICAgICAgaW5zZXJ0KHZub2RlLnRhcmdldEFuY2hvciwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xuICAgIH1cbiAgICBjb25zdCB7IGVsLCBhbmNob3IsIHNoYXBlRmxhZywgY2hpbGRyZW4sIHByb3BzIH0gPSB2bm9kZTtcbiAgICBjb25zdCBpc1Jlb3JkZXIgPSBtb3ZlVHlwZSA9PT0gMiAvKiBUZWxlcG9ydE1vdmVUeXBlcy5SRU9SREVSICovO1xuICAgIC8vIG1vdmUgbWFpbiB2aWV3IGFuY2hvciBpZiB0aGlzIGlzIGEgcmUtb3JkZXIuXG4gICAgaWYgKGlzUmVvcmRlcikge1xuICAgICAgICBpbnNlcnQoZWwsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgICB9XG4gICAgLy8gaWYgdGhpcyBpcyBhIHJlLW9yZGVyIGFuZCB0ZWxlcG9ydCBpcyBlbmFibGVkIChjb250ZW50IGlzIGluIHRhcmdldClcbiAgICAvLyBkbyBub3QgbW92ZSBjaGlsZHJlbi4gU28gdGhlIG9wcG9zaXRlIGlzOiBvbmx5IG1vdmUgY2hpbGRyZW4gaWYgdGhpc1xuICAgIC8vIGlzIG5vdCBhIHJlb3JkZXIsIG9yIHRoZSB0ZWxlcG9ydCBpcyBkaXNhYmxlZFxuICAgIGlmICghaXNSZW9yZGVyIHx8IGlzVGVsZXBvcnREaXNhYmxlZChwcm9wcykpIHtcbiAgICAgICAgLy8gVGVsZXBvcnQgaGFzIGVpdGhlciBBcnJheSBjaGlsZHJlbiBvciBubyBjaGlsZHJlbi5cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtb3ZlKGNoaWxkcmVuW2ldLCBjb250YWluZXIsIHBhcmVudEFuY2hvciwgMiAvKiBNb3ZlVHlwZS5SRU9SREVSICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBtb3ZlIG1haW4gdmlldyBhbmNob3IgaWYgdGhpcyBpcyBhIHJlLW9yZGVyLlxuICAgIGlmIChpc1Jlb3JkZXIpIHtcbiAgICAgICAgaW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGh5ZHJhdGVUZWxlcG9ydChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHsgbzogeyBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcXVlcnlTZWxlY3RvciB9IH0sIGh5ZHJhdGVDaGlsZHJlbikge1xuICAgIGNvbnN0IHRhcmdldCA9ICh2bm9kZS50YXJnZXQgPSByZXNvbHZlVGFyZ2V0KHZub2RlLnByb3BzLCBxdWVyeVNlbGVjdG9yKSk7XG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgICAvLyBpZiBtdWx0aXBsZSB0ZWxlcG9ydHMgcmVuZGVyZWQgdG8gdGhlIHNhbWUgdGFyZ2V0IGVsZW1lbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgLy8gcGljayB1cCBmcm9tIHdoZXJlIHRoZSBsYXN0IHRlbGVwb3J0IGZpbmlzaGVkIGluc3RlYWQgb2YgdGhlIGZpcnN0IG5vZGVcbiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IHRhcmdldC5fbHBhIHx8IHRhcmdldC5maXJzdENoaWxkO1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgaWYgKGlzVGVsZXBvcnREaXNhYmxlZCh2bm9kZS5wcm9wcykpIHtcbiAgICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBoeWRyYXRlQ2hpbGRyZW4obmV4dFNpYmxpbmcobm9kZSksIHZub2RlLCBwYXJlbnROb2RlKG5vZGUpLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZub2RlLmFuY2hvciA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgIC8vIGxvb2thaGVhZCB1bnRpbCB3ZSBmaW5kIHRoZSB0YXJnZXQgYW5jaG9yXG4gICAgICAgICAgICAgICAgLy8gd2UgY2Fubm90IHJlbHkgb24gcmV0dXJuIHZhbHVlIG9mIGh5ZHJhdGVDaGlsZHJlbigpIGJlY2F1c2UgdGhlcmVcbiAgICAgICAgICAgICAgICAvLyBjb3VsZCBiZSBuZXN0ZWQgdGVsZXBvcnRzXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldEFuY2hvciA9IHRhcmdldE5vZGU7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRhcmdldEFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRBbmNob3IgPSBuZXh0U2libGluZyh0YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0QW5jaG9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBbmNob3Iubm9kZVR5cGUgPT09IDggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFuY2hvci5kYXRhID09PSAndGVsZXBvcnQgYW5jaG9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0QW5jaG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Ll9scGEgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZub2RlLnRhcmdldEFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHlkcmF0ZUNoaWxkcmVuKHRhcmdldE5vZGUsIHZub2RlLCB0YXJnZXQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVDc3NWYXJzKHZub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlLmFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS5hbmNob3IpO1xufVxuLy8gRm9yY2UtY2FzdGVkIHB1YmxpYyB0eXBpbmcgZm9yIGggYW5kIFRTWCBwcm9wcyBpbmZlcmVuY2VcbmNvbnN0IFRlbGVwb3J0ID0gVGVsZXBvcnRJbXBsO1xuZnVuY3Rpb24gdXBkYXRlQ3NzVmFycyh2bm9kZSkge1xuICAgIC8vIHByZXNlbmNlIG9mIC51dCBtZXRob2QgaW5kaWNhdGVzIG93bmVyIGNvbXBvbmVudCB1c2VzIGNzcyB2YXJzLlxuICAgIC8vIGNvZGUgcGF0aCBoZXJlIGNhbiBhc3N1bWUgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICBjb25zdCBjdHggPSB2bm9kZS5jdHg7XG4gICAgaWYgKGN0eCAmJiBjdHgudXQpIHtcbiAgICAgICAgbGV0IG5vZGUgPSB2bm9kZS5jaGlsZHJlblswXS5lbDtcbiAgICAgICAgd2hpbGUgKG5vZGUgIT09IHZub2RlLnRhcmdldEFuY2hvcikge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpXG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdi1vd25lcicsIGN0eC51aWQpO1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnV0KCk7XG4gICAgfVxufVxuXG5jb25zdCBGcmFnbWVudCA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnRnJhZ21lbnQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IFRleHQgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ1RleHQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IENvbW1lbnQgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ0NvbW1lbnQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IFN0YXRpYyA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnU3RhdGljJyA6IHVuZGVmaW5lZCk7XG4vLyBTaW5jZSB2LWlmIGFuZCB2LWZvciBhcmUgdGhlIHR3byBwb3NzaWJsZSB3YXlzIG5vZGUgc3RydWN0dXJlIGNhbiBkeW5hbWljYWxseVxuLy8gY2hhbmdlLCBvbmNlIHdlIGNvbnNpZGVyIHYtaWYgYnJhbmNoZXMgYW5kIGVhY2ggdi1mb3IgZnJhZ21lbnQgYSBibG9jaywgd2Vcbi8vIGNhbiBkaXZpZGUgYSB0ZW1wbGF0ZSBpbnRvIG5lc3RlZCBibG9ja3MsIGFuZCB3aXRoaW4gZWFjaCBibG9jayB0aGUgbm9kZVxuLy8gc3RydWN0dXJlIHdvdWxkIGJlIHN0YWJsZS4gVGhpcyBhbGxvd3MgdXMgdG8gc2tpcCBtb3N0IGNoaWxkcmVuIGRpZmZpbmdcbi8vIGFuZCBvbmx5IHdvcnJ5IGFib3V0IHRoZSBkeW5hbWljIG5vZGVzIChpbmRpY2F0ZWQgYnkgcGF0Y2ggZmxhZ3MpLlxuY29uc3QgYmxvY2tTdGFjayA9IFtdO1xubGV0IGN1cnJlbnRCbG9jayA9IG51bGw7XG4vKipcbiAqIE9wZW4gYSBibG9jay5cbiAqIFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGBjcmVhdGVCbG9ja2AuIEl0IGNhbm5vdCBiZSBwYXJ0IG9mIGBjcmVhdGVCbG9ja2BcbiAqIGJlY2F1c2UgdGhlIGNoaWxkcmVuIG9mIHRoZSBibG9jayBhcmUgZXZhbHVhdGVkIGJlZm9yZSBgY3JlYXRlQmxvY2tgIGl0c2VsZlxuICogaXMgY2FsbGVkLiBUaGUgZ2VuZXJhdGVkIGNvZGUgdHlwaWNhbGx5IGxvb2tzIGxpa2UgdGhpczpcbiAqXG4gKiBgYGBqc1xuICogZnVuY3Rpb24gcmVuZGVyKCkge1xuICogICByZXR1cm4gKG9wZW5CbG9jaygpLGNyZWF0ZUJsb2NrKCdkaXYnLCBudWxsLCBbLi4uXSkpXG4gKiB9XG4gKiBgYGBcbiAqIGRpc2FibGVUcmFja2luZyBpcyB0cnVlIHdoZW4gY3JlYXRpbmcgYSB2LWZvciBmcmFnbWVudCBibG9jaywgc2luY2UgYSB2LWZvclxuICogZnJhZ21lbnQgYWx3YXlzIGRpZmZzIGl0cyBjaGlsZHJlbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBvcGVuQmxvY2soZGlzYWJsZVRyYWNraW5nID0gZmFsc2UpIHtcbiAgICBibG9ja1N0YWNrLnB1c2goKGN1cnJlbnRCbG9jayA9IGRpc2FibGVUcmFja2luZyA/IG51bGwgOiBbXSkpO1xufVxuZnVuY3Rpb24gY2xvc2VCbG9jaygpIHtcbiAgICBibG9ja1N0YWNrLnBvcCgpO1xuICAgIGN1cnJlbnRCbG9jayA9IGJsb2NrU3RhY2tbYmxvY2tTdGFjay5sZW5ndGggLSAxXSB8fCBudWxsO1xufVxuLy8gV2hldGhlciB3ZSBzaG91bGQgYmUgdHJhY2tpbmcgZHluYW1pYyBjaGlsZCBub2RlcyBpbnNpZGUgYSBibG9jay5cbi8vIE9ubHkgdHJhY2tzIHdoZW4gdGhpcyB2YWx1ZSBpcyA+IDBcbi8vIFdlIGFyZSBub3QgdXNpbmcgYSBzaW1wbGUgYm9vbGVhbiBiZWNhdXNlIHRoaXMgdmFsdWUgbWF5IG5lZWQgdG8gYmVcbi8vIGluY3JlbWVudGVkL2RlY3JlbWVudGVkIGJ5IG5lc3RlZCB1c2FnZSBvZiB2LW9uY2UgKHNlZSBiZWxvdylcbmxldCBpc0Jsb2NrVHJlZUVuYWJsZWQgPSAxO1xuLyoqXG4gKiBCbG9jayB0cmFja2luZyBzb21ldGltZXMgbmVlZHMgdG8gYmUgZGlzYWJsZWQsIGZvciBleGFtcGxlIGR1cmluZyB0aGVcbiAqIGNyZWF0aW9uIG9mIGEgdHJlZSB0aGF0IG5lZWRzIHRvIGJlIGNhY2hlZCBieSB2LW9uY2UuIFRoZSBjb21waWxlciBnZW5lcmF0ZXNcbiAqIGNvZGUgbGlrZSB0aGlzOlxuICpcbiAqIGBgYCBqc1xuICogX2NhY2hlWzFdIHx8IChcbiAqICAgc2V0QmxvY2tUcmFja2luZygtMSksXG4gKiAgIF9jYWNoZVsxXSA9IGNyZWF0ZVZOb2RlKC4uLiksXG4gKiAgIHNldEJsb2NrVHJhY2tpbmcoMSksXG4gKiAgIF9jYWNoZVsxXVxuICogKVxuICogYGBgXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2V0QmxvY2tUcmFja2luZyh2YWx1ZSkge1xuICAgIGlzQmxvY2tUcmVlRW5hYmxlZCArPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldHVwQmxvY2sodm5vZGUpIHtcbiAgICAvLyBzYXZlIGN1cnJlbnQgYmxvY2sgY2hpbGRyZW4gb24gdGhlIGJsb2NrIHZub2RlXG4gICAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID1cbiAgICAgICAgaXNCbG9ja1RyZWVFbmFibGVkID4gMCA/IGN1cnJlbnRCbG9jayB8fCBFTVBUWV9BUlIgOiBudWxsO1xuICAgIC8vIGNsb3NlIGJsb2NrXG4gICAgY2xvc2VCbG9jaygpO1xuICAgIC8vIGEgYmxvY2sgaXMgYWx3YXlzIGdvaW5nIHRvIGJlIHBhdGNoZWQsIHNvIHRyYWNrIGl0IGFzIGEgY2hpbGQgb2YgaXRzXG4gICAgLy8gcGFyZW50IGJsb2NrXG4gICAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgICAgIGN1cnJlbnRCbG9jay5wdXNoKHZub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlO1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50QmxvY2sodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnKSB7XG4gICAgcmV0dXJuIHNldHVwQmxvY2soY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZywgdHJ1ZSAvKiBpc0Jsb2NrICovKSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIGJsb2NrIHJvb3Qgdm5vZGUuIFRha2VzIHRoZSBzYW1lIGV4YWN0IGFyZ3VtZW50cyBhcyBgY3JlYXRlVk5vZGVgLlxuICogQSBibG9jayByb290IGtlZXBzIHRyYWNrIG9mIGR5bmFtaWMgbm9kZXMgd2l0aGluIHRoZSBibG9jayBpbiB0aGVcbiAqIGBkeW5hbWljQ2hpbGRyZW5gIGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMpIHtcbiAgICByZXR1cm4gc2V0dXBCbG9jayhjcmVhdGVWTm9kZSh0eXBlLCBwcm9wcywgY2hpbGRyZW4sIHBhdGNoRmxhZywgZHluYW1pY1Byb3BzLCB0cnVlIC8qIGlzQmxvY2s6IHByZXZlbnQgYSBibG9jayBmcm9tIHRyYWNraW5nIGl0c2VsZiAqLykpO1xufVxuZnVuY3Rpb24gaXNWTm9kZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA/IHZhbHVlLl9fdl9pc1ZOb2RlID09PSB0cnVlIDogZmFsc2U7XG59XG5mdW5jdGlvbiBpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICBuMi5zaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovICYmXG4gICAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5oYXMobjIudHlwZSkpIHtcbiAgICAgICAgLy8gIzcwNDIsIGVuc3VyZSB0aGUgdm5vZGUgYmVpbmcgdW5tb3VudGVkIGR1cmluZyBITVJcbiAgICAgICAgLy8gYml0d2lzZSBvcGVyYXRpb25zIHRvIHJlbW92ZSBrZWVwIGFsaXZlIGZsYWdzXG4gICAgICAgIG4xLnNoYXBlRmxhZyAmPSB+MjU2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovO1xuICAgICAgICBuMi5zaGFwZUZsYWcgJj0gfjUxMiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9LRVBUX0FMSVZFICovO1xuICAgICAgICAvLyBITVIgb25seTogaWYgdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBob3QtdXBkYXRlZCwgZm9yY2UgYSByZWxvYWQuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG4xLnR5cGUgPT09IG4yLnR5cGUgJiYgbjEua2V5ID09PSBuMi5rZXk7XG59XG5sZXQgdm5vZGVBcmdzVHJhbnNmb3JtZXI7XG4vKipcbiAqIEludGVybmFsIEFQSSBmb3IgcmVnaXN0ZXJpbmcgYW4gYXJndW1lbnRzIHRyYW5zZm9ybSBmb3IgY3JlYXRlVk5vZGVcbiAqIHVzZWQgZm9yIGNyZWF0aW5nIHN0dWJzIGluIHRoZSB0ZXN0LXV0aWxzXG4gKiBJdCBpcyAqaW50ZXJuYWwqIGJ1dCBuZWVkcyB0byBiZSBleHBvc2VkIGZvciB0ZXN0LXV0aWxzIHRvIHBpY2sgdXAgcHJvcGVyXG4gKiB0eXBpbmdzXG4gKi9cbmZ1bmN0aW9uIHRyYW5zZm9ybVZOb2RlQXJncyh0cmFuc2Zvcm1lcikge1xuICAgIHZub2RlQXJnc1RyYW5zZm9ybWVyID0gdHJhbnNmb3JtZXI7XG59XG5jb25zdCBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtID0gKC4uLmFyZ3MpID0+IHtcbiAgICByZXR1cm4gX2NyZWF0ZVZOb2RlKC4uLih2bm9kZUFyZ3NUcmFuc2Zvcm1lclxuICAgICAgICA/IHZub2RlQXJnc1RyYW5zZm9ybWVyKGFyZ3MsIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSlcbiAgICAgICAgOiBhcmdzKSk7XG59O1xuY29uc3QgSW50ZXJuYWxPYmplY3RLZXkgPSBgX192SW50ZXJuYWxgO1xuY29uc3Qgbm9ybWFsaXplS2V5ID0gKHsga2V5IH0pID0+IGtleSAhPSBudWxsID8ga2V5IDogbnVsbDtcbmNvbnN0IG5vcm1hbGl6ZVJlZiA9ICh7IHJlZiwgcmVmX2tleSwgcmVmX2ZvciB9KSA9PiB7XG4gICAgcmV0dXJuIChyZWYgIT0gbnVsbFxuICAgICAgICA/IGlzU3RyaW5nKHJlZikgfHwgaXNSZWYocmVmKSB8fCBpc0Z1bmN0aW9uKHJlZilcbiAgICAgICAgICAgID8geyBpOiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIHI6IHJlZiwgazogcmVmX2tleSwgZjogISFyZWZfZm9yIH1cbiAgICAgICAgICAgIDogcmVmXG4gICAgICAgIDogbnVsbCk7XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzID0gbnVsbCwgY2hpbGRyZW4gPSBudWxsLCBwYXRjaEZsYWcgPSAwLCBkeW5hbWljUHJvcHMgPSBudWxsLCBzaGFwZUZsYWcgPSB0eXBlID09PSBGcmFnbWVudCA/IDAgOiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLywgaXNCbG9ja05vZGUgPSBmYWxzZSwgbmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24gPSBmYWxzZSkge1xuICAgIGNvbnN0IHZub2RlID0ge1xuICAgICAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICAgICAgX192X3NraXA6IHRydWUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHByb3BzLFxuICAgICAgICBrZXk6IHByb3BzICYmIG5vcm1hbGl6ZUtleShwcm9wcyksXG4gICAgICAgIHJlZjogcHJvcHMgJiYgbm9ybWFsaXplUmVmKHByb3BzKSxcbiAgICAgICAgc2NvcGVJZDogY3VycmVudFNjb3BlSWQsXG4gICAgICAgIHNsb3RTY29wZUlkczogbnVsbCxcbiAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgIGNvbXBvbmVudDogbnVsbCxcbiAgICAgICAgc3VzcGVuc2U6IG51bGwsXG4gICAgICAgIHNzQ29udGVudDogbnVsbCxcbiAgICAgICAgc3NGYWxsYmFjazogbnVsbCxcbiAgICAgICAgZGlyczogbnVsbCxcbiAgICAgICAgdHJhbnNpdGlvbjogbnVsbCxcbiAgICAgICAgZWw6IG51bGwsXG4gICAgICAgIGFuY2hvcjogbnVsbCxcbiAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICB0YXJnZXRBbmNob3I6IG51bGwsXG4gICAgICAgIHN0YXRpY0NvdW50OiAwLFxuICAgICAgICBzaGFwZUZsYWcsXG4gICAgICAgIHBhdGNoRmxhZyxcbiAgICAgICAgZHluYW1pY1Byb3BzLFxuICAgICAgICBkeW5hbWljQ2hpbGRyZW46IG51bGwsXG4gICAgICAgIGFwcENvbnRleHQ6IG51bGwsXG4gICAgICAgIGN0eDogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlXG4gICAgfTtcbiAgICBpZiAobmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24pIHtcbiAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKTtcbiAgICAgICAgLy8gbm9ybWFsaXplIHN1c3BlbnNlIGNoaWxkcmVuXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICAgICAgdHlwZS5ub3JtYWxpemUodm5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIC8vIGNvbXBpbGVkIGVsZW1lbnQgdm5vZGUgLSBpZiBjaGlsZHJlbiBpcyBwYXNzZWQsIG9ubHkgcG9zc2libGUgdHlwZXMgYXJlXG4gICAgICAgIC8vIHN0cmluZyBvciBBcnJheS5cbiAgICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IGlzU3RyaW5nKGNoaWxkcmVuKVxuICAgICAgICAgICAgPyA4IC8qIFNoYXBlRmxhZ3MuVEVYVF9DSElMRFJFTiAqL1xuICAgICAgICAgICAgOiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovO1xuICAgIH1cbiAgICAvLyB2YWxpZGF0ZSBrZXlcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHZub2RlLmtleSAhPT0gdm5vZGUua2V5KSB7XG4gICAgICAgIHdhcm4oYFZOb2RlIGNyZWF0ZWQgd2l0aCBpbnZhbGlkIGtleSAoTmFOKS4gVk5vZGUgdHlwZTpgLCB2bm9kZS50eXBlKTtcbiAgICB9XG4gICAgLy8gdHJhY2sgdm5vZGUgZm9yIGJsb2NrIHRyZWVcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJlxuICAgICAgICAvLyBhdm9pZCBhIGJsb2NrIG5vZGUgZnJvbSB0cmFja2luZyBpdHNlbGZcbiAgICAgICAgIWlzQmxvY2tOb2RlICYmXG4gICAgICAgIC8vIGhhcyBjdXJyZW50IHBhcmVudCBibG9ja1xuICAgICAgICBjdXJyZW50QmxvY2sgJiZcbiAgICAgICAgLy8gcHJlc2VuY2Ugb2YgYSBwYXRjaCBmbGFnIGluZGljYXRlcyB0aGlzIG5vZGUgbmVlZHMgcGF0Y2hpbmcgb24gdXBkYXRlcy5cbiAgICAgICAgLy8gY29tcG9uZW50IG5vZGVzIGFsc28gc2hvdWxkIGFsd2F5cyBiZSBwYXRjaGVkLCBiZWNhdXNlIGV2ZW4gaWYgdGhlXG4gICAgICAgIC8vIGNvbXBvbmVudCBkb2Vzbid0IG5lZWQgdG8gdXBkYXRlLCBpdCBuZWVkcyB0byBwZXJzaXN0IHRoZSBpbnN0YW5jZSBvbiB0b1xuICAgICAgICAvLyB0aGUgbmV4dCB2bm9kZSBzbyB0aGF0IGl0IGNhbiBiZSBwcm9wZXJseSB1bm1vdW50ZWQgbGF0ZXIuXG4gICAgICAgICh2bm9kZS5wYXRjaEZsYWcgPiAwIHx8IHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pICYmXG4gICAgICAgIC8vIHRoZSBFVkVOVFMgZmxhZyBpcyBvbmx5IGZvciBoeWRyYXRpb24gYW5kIGlmIGl0IGlzIHRoZSBvbmx5IGZsYWcsIHRoZVxuICAgICAgICAvLyB2bm9kZSBzaG91bGQgbm90IGJlIGNvbnNpZGVyZWQgZHluYW1pYyBkdWUgdG8gaGFuZGxlciBjYWNoaW5nLlxuICAgICAgICB2bm9kZS5wYXRjaEZsYWcgIT09IDMyIC8qIFBhdGNoRmxhZ3MuSFlEUkFURV9FVkVOVFMgKi8pIHtcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2godm5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG59XG5jb25zdCBjcmVhdGVWTm9kZSA9ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtIDogX2NyZWF0ZVZOb2RlKTtcbmZ1bmN0aW9uIF9jcmVhdGVWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgaXNCbG9ja05vZGUgPSBmYWxzZSkge1xuICAgIGlmICghdHlwZSB8fCB0eXBlID09PSBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXR5cGUpIHtcbiAgICAgICAgICAgIHdhcm4oYEludmFsaWQgdm5vZGUgdHlwZSB3aGVuIGNyZWF0aW5nIHZub2RlOiAke3R5cGV9LmApO1xuICAgICAgICB9XG4gICAgICAgIHR5cGUgPSBDb21tZW50O1xuICAgIH1cbiAgICBpZiAoaXNWTm9kZSh0eXBlKSkge1xuICAgICAgICAvLyBjcmVhdGVWTm9kZSByZWNlaXZpbmcgYW4gZXhpc3Rpbmcgdm5vZGUuIFRoaXMgaGFwcGVucyBpbiBjYXNlcyBsaWtlXG4gICAgICAgIC8vIDxjb21wb25lbnQgOmlzPVwidm5vZGVcIi8+XG4gICAgICAgIC8vICMyMDc4IG1ha2Ugc3VyZSB0byBtZXJnZSByZWZzIGR1cmluZyB0aGUgY2xvbmUgaW5zdGVhZCBvZiBvdmVyd3JpdGluZyBpdFxuICAgICAgICBjb25zdCBjbG9uZWQgPSBjbG9uZVZOb2RlKHR5cGUsIHByb3BzLCB0cnVlIC8qIG1lcmdlUmVmOiB0cnVlICovKTtcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBub3JtYWxpemVDaGlsZHJlbihjbG9uZWQsIGNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiAhaXNCbG9ja05vZGUgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoY2xvbmVkLnNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50QmxvY2tbY3VycmVudEJsb2NrLmluZGV4T2YodHlwZSldID0gY2xvbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJsb2NrLnB1c2goY2xvbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjbG9uZWQucGF0Y2hGbGFnIHw9IC0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqLztcbiAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICB9XG4gICAgLy8gY2xhc3MgY29tcG9uZW50IG5vcm1hbGl6YXRpb24uXG4gICAgaWYgKGlzQ2xhc3NDb21wb25lbnQodHlwZSkpIHtcbiAgICAgICAgdHlwZSA9IHR5cGUuX192Y2NPcHRzO1xuICAgIH1cbiAgICAvLyBjbGFzcyAmIHN0eWxlIG5vcm1hbGl6YXRpb24uXG4gICAgaWYgKHByb3BzKSB7XG4gICAgICAgIC8vIGZvciByZWFjdGl2ZSBvciBwcm94eSBvYmplY3RzLCB3ZSBuZWVkIHRvIGNsb25lIGl0IHRvIGVuYWJsZSBtdXRhdGlvbi5cbiAgICAgICAgcHJvcHMgPSBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpO1xuICAgICAgICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcbiAgICAgICAgaWYgKGtsYXNzICYmICFpc1N0cmluZyhrbGFzcykpIHtcbiAgICAgICAgICAgIHByb3BzLmNsYXNzID0gbm9ybWFsaXplQ2xhc3Moa2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc09iamVjdChzdHlsZSkpIHtcbiAgICAgICAgICAgIC8vIHJlYWN0aXZlIHN0YXRlIG9iamVjdHMgbmVlZCB0byBiZSBjbG9uZWQgc2luY2UgdGhleSBhcmUgbGlrZWx5IHRvIGJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkXG4gICAgICAgICAgICBpZiAoaXNQcm94eShzdHlsZSkgJiYgIWlzQXJyYXkoc3R5bGUpKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUgPSBleHRlbmQoe30sIHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3BzLnN0eWxlID0gbm9ybWFsaXplU3R5bGUoc3R5bGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVuY29kZSB0aGUgdm5vZGUgdHlwZSBpbmZvcm1hdGlvbiBpbnRvIGEgYml0bWFwXG4gICAgY29uc3Qgc2hhcGVGbGFnID0gaXNTdHJpbmcodHlwZSlcbiAgICAgICAgPyAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqL1xuICAgICAgICA6IGlzU3VzcGVuc2UodHlwZSlcbiAgICAgICAgICAgID8gMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi9cbiAgICAgICAgICAgIDogaXNUZWxlcG9ydCh0eXBlKVxuICAgICAgICAgICAgICAgID8gNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqL1xuICAgICAgICAgICAgICAgIDogaXNPYmplY3QodHlwZSlcbiAgICAgICAgICAgICAgICAgICAgPyA0IC8qIFNoYXBlRmxhZ3MuU1RBVEVGVUxfQ09NUE9ORU5UICovXG4gICAgICAgICAgICAgICAgICAgIDogaXNGdW5jdGlvbih0eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAyIC8qIFNoYXBlRmxhZ3MuRlVOQ1RJT05BTF9DT01QT05FTlQgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNoYXBlRmxhZyAmIDQgLyogU2hhcGVGbGFncy5TVEFURUZVTF9DT01QT05FTlQgKi8gJiYgaXNQcm94eSh0eXBlKSkge1xuICAgICAgICB0eXBlID0gdG9SYXcodHlwZSk7XG4gICAgICAgIHdhcm4oYFZ1ZSByZWNlaXZlZCBhIENvbXBvbmVudCB3aGljaCB3YXMgbWFkZSBhIHJlYWN0aXZlIG9iamVjdC4gVGhpcyBjYW4gYCArXG4gICAgICAgICAgICBgbGVhZCB0byB1bm5lY2Vzc2FyeSBwZXJmb3JtYW5jZSBvdmVyaGVhZCwgYW5kIHNob3VsZCBiZSBhdm9pZGVkIGJ5IGAgK1xuICAgICAgICAgICAgYG1hcmtpbmcgdGhlIGNvbXBvbmVudCB3aXRoIFxcYG1hcmtSYXdcXGAgb3IgdXNpbmcgXFxgc2hhbGxvd1JlZlxcYCBgICtcbiAgICAgICAgICAgIGBpbnN0ZWFkIG9mIFxcYHJlZlxcYC5gLCBgXFxuQ29tcG9uZW50IHRoYXQgd2FzIG1hZGUgcmVhY3RpdmU6IGAsIHR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZywgaXNCbG9ja05vZGUsIHRydWUpO1xufVxuZnVuY3Rpb24gZ3VhcmRSZWFjdGl2ZVByb3BzKHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcylcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGlzUHJveHkocHJvcHMpIHx8IEludGVybmFsT2JqZWN0S2V5IGluIHByb3BzXG4gICAgICAgID8gZXh0ZW5kKHt9LCBwcm9wcylcbiAgICAgICAgOiBwcm9wcztcbn1cbmZ1bmN0aW9uIGNsb25lVk5vZGUodm5vZGUsIGV4dHJhUHJvcHMsIG1lcmdlUmVmID0gZmFsc2UpIHtcbiAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgTk9UIHVzaW5nIHNwcmVhZCBvciBleHRlbmQgdG8gYXZvaWQgdGhlIHJ1bnRpbWVcbiAgICAvLyBrZXkgZW51bWVyYXRpb24gY29zdC5cbiAgICBjb25zdCB7IHByb3BzLCByZWYsIHBhdGNoRmxhZywgY2hpbGRyZW4gfSA9IHZub2RlO1xuICAgIGNvbnN0IG1lcmdlZFByb3BzID0gZXh0cmFQcm9wcyA/IG1lcmdlUHJvcHMocHJvcHMgfHwge30sIGV4dHJhUHJvcHMpIDogcHJvcHM7XG4gICAgY29uc3QgY2xvbmVkID0ge1xuICAgICAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICAgICAgX192X3NraXA6IHRydWUsXG4gICAgICAgIHR5cGU6IHZub2RlLnR5cGUsXG4gICAgICAgIHByb3BzOiBtZXJnZWRQcm9wcyxcbiAgICAgICAga2V5OiBtZXJnZWRQcm9wcyAmJiBub3JtYWxpemVLZXkobWVyZ2VkUHJvcHMpLFxuICAgICAgICByZWY6IGV4dHJhUHJvcHMgJiYgZXh0cmFQcm9wcy5yZWZcbiAgICAgICAgICAgID8gLy8gIzIwNzggaW4gdGhlIGNhc2Ugb2YgPGNvbXBvbmVudCA6aXM9XCJ2bm9kZVwiIHJlZj1cImV4dHJhXCIvPlxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB2bm9kZSBpdHNlbGYgYWxyZWFkeSBoYXMgYSByZWYsIGNsb25lVk5vZGUgd2lsbCBuZWVkIHRvIG1lcmdlXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJlZnMgc28gdGhlIHNpbmdsZSB2bm9kZSBjYW4gYmUgc2V0IG9uIG11bHRpcGxlIHJlZnNcbiAgICAgICAgICAgICAgICBtZXJnZVJlZiAmJiByZWZcbiAgICAgICAgICAgICAgICAgICAgPyBpc0FycmF5KHJlZilcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVmLmNvbmNhdChub3JtYWxpemVSZWYoZXh0cmFQcm9wcykpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtyZWYsIG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKV1cbiAgICAgICAgICAgICAgICAgICAgOiBub3JtYWxpemVSZWYoZXh0cmFQcm9wcylcbiAgICAgICAgICAgIDogcmVmLFxuICAgICAgICBzY29wZUlkOiB2bm9kZS5zY29wZUlkLFxuICAgICAgICBzbG90U2NvcGVJZHM6IHZub2RlLnNsb3RTY29wZUlkcyxcbiAgICAgICAgY2hpbGRyZW46IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXRjaEZsYWcgPT09IC0xIC8qIFBhdGNoRmxhZ3MuSE9JU1RFRCAqLyAmJiBpc0FycmF5KGNoaWxkcmVuKVxuICAgICAgICAgICAgPyBjaGlsZHJlbi5tYXAoZGVlcENsb25lVk5vZGUpXG4gICAgICAgICAgICA6IGNoaWxkcmVuLFxuICAgICAgICB0YXJnZXQ6IHZub2RlLnRhcmdldCxcbiAgICAgICAgdGFyZ2V0QW5jaG9yOiB2bm9kZS50YXJnZXRBbmNob3IsXG4gICAgICAgIHN0YXRpY0NvdW50OiB2bm9kZS5zdGF0aWNDb3VudCxcbiAgICAgICAgc2hhcGVGbGFnOiB2bm9kZS5zaGFwZUZsYWcsXG4gICAgICAgIC8vIGlmIHRoZSB2bm9kZSBpcyBjbG9uZWQgd2l0aCBleHRyYSBwcm9wcywgd2UgY2FuIG5vIGxvbmdlciBhc3N1bWUgaXRzXG4gICAgICAgIC8vIGV4aXN0aW5nIHBhdGNoIGZsYWcgdG8gYmUgcmVsaWFibGUgYW5kIG5lZWQgdG8gYWRkIHRoZSBGVUxMX1BST1BTIGZsYWcuXG4gICAgICAgIC8vIG5vdGU6IHByZXNlcnZlIGZsYWcgZm9yIGZyYWdtZW50cyBzaW5jZSB0aGV5IHVzZSB0aGUgZmxhZyBmb3IgY2hpbGRyZW5cbiAgICAgICAgLy8gZmFzdCBwYXRocyBvbmx5LlxuICAgICAgICBwYXRjaEZsYWc6IGV4dHJhUHJvcHMgJiYgdm5vZGUudHlwZSAhPT0gRnJhZ21lbnRcbiAgICAgICAgICAgID8gcGF0Y2hGbGFnID09PSAtMSAvLyBob2lzdGVkIG5vZGVcbiAgICAgICAgICAgICAgICA/IDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqL1xuICAgICAgICAgICAgICAgIDogcGF0Y2hGbGFnIHwgMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovXG4gICAgICAgICAgICA6IHBhdGNoRmxhZyxcbiAgICAgICAgZHluYW1pY1Byb3BzOiB2bm9kZS5keW5hbWljUHJvcHMsXG4gICAgICAgIGR5bmFtaWNDaGlsZHJlbjogdm5vZGUuZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICBhcHBDb250ZXh0OiB2bm9kZS5hcHBDb250ZXh0LFxuICAgICAgICBkaXJzOiB2bm9kZS5kaXJzLFxuICAgICAgICB0cmFuc2l0aW9uOiB2bm9kZS50cmFuc2l0aW9uLFxuICAgICAgICAvLyBUaGVzZSBzaG91bGQgdGVjaG5pY2FsbHkgb25seSBiZSBub24tbnVsbCBvbiBtb3VudGVkIFZOb2Rlcy4gSG93ZXZlcixcbiAgICAgICAgLy8gdGhleSAqc2hvdWxkKiBiZSBjb3BpZWQgZm9yIGtlcHQtYWxpdmUgdm5vZGVzLiBTbyB3ZSBqdXN0IGFsd2F5cyBjb3B5XG4gICAgICAgIC8vIHRoZW0gc2luY2UgdGhlbSBiZWluZyBub24tbnVsbCBkdXJpbmcgYSBtb3VudCBkb2Vzbid0IGFmZmVjdCB0aGUgbG9naWMgYXNcbiAgICAgICAgLy8gdGhleSB3aWxsIHNpbXBseSBiZSBvdmVyd3JpdHRlbi5cbiAgICAgICAgY29tcG9uZW50OiB2bm9kZS5jb21wb25lbnQsXG4gICAgICAgIHN1c3BlbnNlOiB2bm9kZS5zdXNwZW5zZSxcbiAgICAgICAgc3NDb250ZW50OiB2bm9kZS5zc0NvbnRlbnQgJiYgY2xvbmVWTm9kZSh2bm9kZS5zc0NvbnRlbnQpLFxuICAgICAgICBzc0ZhbGxiYWNrOiB2bm9kZS5zc0ZhbGxiYWNrICYmIGNsb25lVk5vZGUodm5vZGUuc3NGYWxsYmFjayksXG4gICAgICAgIGVsOiB2bm9kZS5lbCxcbiAgICAgICAgYW5jaG9yOiB2bm9kZS5hbmNob3IsXG4gICAgICAgIGN0eDogdm5vZGUuY3R4XG4gICAgfTtcbiAgICByZXR1cm4gY2xvbmVkO1xufVxuLyoqXG4gKiBEZXYgb25seSwgZm9yIEhNUiBvZiBob2lzdGVkIHZub2RlcyByZXVzZWQgaW4gdi1mb3JcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS9pc3N1ZXMvMjAyMlxuICovXG5mdW5jdGlvbiBkZWVwQ2xvbmVWTm9kZSh2bm9kZSkge1xuICAgIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgIGlmIChpc0FycmF5KHZub2RlLmNoaWxkcmVuKSkge1xuICAgICAgICBjbG9uZWQuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbi5tYXAoZGVlcENsb25lVk5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmVkO1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVUZXh0Vk5vZGUodGV4dCA9ICcgJywgZmxhZyA9IDApIHtcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgdGV4dCwgZmxhZyk7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVN0YXRpY1ZOb2RlKGNvbnRlbnQsIG51bWJlck9mTm9kZXMpIHtcbiAgICAvLyBBIHN0YXRpYyB2bm9kZSBjYW4gY29udGFpbiBtdWx0aXBsZSBzdHJpbmdpZmllZCBlbGVtZW50cywgYW5kIHRoZSBudW1iZXJcbiAgICAvLyBvZiBlbGVtZW50cyBpcyBuZWNlc3NhcnkgZm9yIGh5ZHJhdGlvbi5cbiAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKFN0YXRpYywgbnVsbCwgY29udGVudCk7XG4gICAgdm5vZGUuc3RhdGljQ291bnQgPSBudW1iZXJPZk5vZGVzO1xuICAgIHJldHVybiB2bm9kZTtcbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ29tbWVudFZOb2RlKHRleHQgPSAnJywgXG4vLyB3aGVuIHVzZWQgYXMgdGhlIHYtZWxzZSBicmFuY2gsIHRoZSBjb21tZW50IG5vZGUgbXVzdCBiZSBjcmVhdGVkIGFzIGFcbi8vIGJsb2NrIHRvIGVuc3VyZSBjb3JyZWN0IHVwZGF0ZXMuXG5hc0Jsb2NrID0gZmFsc2UpIHtcbiAgICByZXR1cm4gYXNCbG9ja1xuICAgICAgICA/IChvcGVuQmxvY2soKSwgY3JlYXRlQmxvY2soQ29tbWVudCwgbnVsbCwgdGV4dCkpXG4gICAgICAgIDogY3JlYXRlVk5vZGUoQ29tbWVudCwgbnVsbCwgdGV4dCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVWTm9kZShjaGlsZCkge1xuICAgIGlmIChjaGlsZCA9PSBudWxsIHx8IHR5cGVvZiBjaGlsZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIC8vIGVtcHR5IHBsYWNlaG9sZGVyXG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShDb21tZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheShjaGlsZCkpIHtcbiAgICAgICAgLy8gZnJhZ21lbnRcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKEZyYWdtZW50LCBudWxsLCBcbiAgICAgICAgLy8gIzM2NjYsIGF2b2lkIHJlZmVyZW5jZSBwb2xsdXRpb24gd2hlbiByZXVzaW5nIHZub2RlXG4gICAgICAgIGNoaWxkLnNsaWNlKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgY2hpbGQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIGFscmVhZHkgdm5vZGUsIHRoaXMgc2hvdWxkIGJlIHRoZSBtb3N0IGNvbW1vbiBzaW5jZSBjb21waWxlZCB0ZW1wbGF0ZXNcbiAgICAgICAgLy8gYWx3YXlzIHByb2R1Y2UgYWxsLXZub2RlIGNoaWxkcmVuIGFycmF5c1xuICAgICAgICByZXR1cm4gY2xvbmVJZk1vdW50ZWQoY2hpbGQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gc3RyaW5ncyBhbmQgbnVtYmVyc1xuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgU3RyaW5nKGNoaWxkKSk7XG4gICAgfVxufVxuLy8gb3B0aW1pemVkIG5vcm1hbGl6YXRpb24gZm9yIHRlbXBsYXRlLWNvbXBpbGVkIHJlbmRlciBmbnNcbmZ1bmN0aW9uIGNsb25lSWZNb3VudGVkKGNoaWxkKSB7XG4gICAgcmV0dXJuIChjaGlsZC5lbCA9PT0gbnVsbCAmJiBjaGlsZC5wYXRjaEZsYWcgIT09IC0xIC8qIFBhdGNoRmxhZ3MuSE9JU1RFRCAqLykgfHxcbiAgICAgICAgY2hpbGQubWVtb1xuICAgICAgICA/IGNoaWxkXG4gICAgICAgIDogY2xvbmVWTm9kZShjaGlsZCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4pIHtcbiAgICBsZXQgdHlwZSA9IDA7XG4gICAgY29uc3QgeyBzaGFwZUZsYWcgfSA9IHZub2RlO1xuICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgICAgIGNoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgdHlwZSA9IDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi87XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmICgxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyB8IDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pKSB7XG4gICAgICAgICAgICAvLyBOb3JtYWxpemUgc2xvdCB0byBwbGFpbiBjaGlsZHJlbiBmb3IgcGxhaW4gZWxlbWVudCBhbmQgVGVsZXBvcnRcbiAgICAgICAgICAgIGNvbnN0IHNsb3QgPSBjaGlsZHJlbi5kZWZhdWx0O1xuICAgICAgICAgICAgaWYgKHNsb3QpIHtcbiAgICAgICAgICAgICAgICAvLyBfYyBtYXJrZXIgaXMgYWRkZWQgYnkgd2l0aEN0eCgpIGluZGljYXRpbmcgdGhpcyBpcyBhIGNvbXBpbGVkIHNsb3RcbiAgICAgICAgICAgICAgICBzbG90Ll9jICYmIChzbG90Ll9kID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlLCBzbG90KCkpO1xuICAgICAgICAgICAgICAgIHNsb3QuX2MgJiYgKHNsb3QuX2QgPSB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHR5cGUgPSAzMiAvKiBTaGFwZUZsYWdzLlNMT1RTX0NISUxEUkVOICovO1xuICAgICAgICAgICAgY29uc3Qgc2xvdEZsYWcgPSBjaGlsZHJlbi5fO1xuICAgICAgICAgICAgaWYgKCFzbG90RmxhZyAmJiAhKEludGVybmFsT2JqZWN0S2V5IGluIGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLl9jdHggPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzbG90RmxhZyA9PT0gMyAvKiBTbG90RmxhZ3MuRk9SV0FSREVEICovICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIC8vIGEgY2hpbGQgY29tcG9uZW50IHJlY2VpdmVzIGZvcndhcmRlZCBzbG90cyBmcm9tIHRoZSBwYXJlbnQuXG4gICAgICAgICAgICAgICAgLy8gaXRzIHNsb3QgdHlwZSBpcyBkZXRlcm1pbmVkIGJ5IGl0cyBwYXJlbnQncyBzbG90IHR5cGUuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5zbG90cy5fID09PSAxIC8qIFNsb3RGbGFncy5TVEFCTEUgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4uXyA9IDEgLyogU2xvdEZsYWdzLlNUQUJMRSAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLl8gPSAyIC8qIFNsb3RGbGFncy5EWU5BTUlDICovO1xuICAgICAgICAgICAgICAgICAgICB2bm9kZS5wYXRjaEZsYWcgfD0gMTAyNCAvKiBQYXRjaEZsYWdzLkRZTkFNSUNfU0xPVFMgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24oY2hpbGRyZW4pKSB7XG4gICAgICAgIGNoaWxkcmVuID0geyBkZWZhdWx0OiBjaGlsZHJlbiwgX2N0eDogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIH07XG4gICAgICAgIHR5cGUgPSAzMiAvKiBTaGFwZUZsYWdzLlNMT1RTX0NISUxEUkVOICovO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2hpbGRyZW4gPSBTdHJpbmcoY2hpbGRyZW4pO1xuICAgICAgICAvLyBmb3JjZSB0ZWxlcG9ydCBjaGlsZHJlbiB0byBhcnJheSBzbyBpdCBjYW4gYmUgbW92ZWQgYXJvdW5kXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBTaGFwZUZsYWdzLlRFTEVQT1JUICovKSB7XG4gICAgICAgICAgICB0eXBlID0gMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLztcbiAgICAgICAgICAgIGNoaWxkcmVuID0gW2NyZWF0ZVRleHRWTm9kZShjaGlsZHJlbildO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHlwZSA9IDggLyogU2hhcGVGbGFncy5URVhUX0NISUxEUkVOICovO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZub2RlLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgdm5vZGUuc2hhcGVGbGFnIHw9IHR5cGU7XG59XG5mdW5jdGlvbiBtZXJnZVByb3BzKC4uLmFyZ3MpIHtcbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdG9NZXJnZSA9IGFyZ3NbaV07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRvTWVyZ2UpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgICBpZiAocmV0LmNsYXNzICE9PSB0b01lcmdlLmNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldC5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKFtyZXQuY2xhc3MsIHRvTWVyZ2UuY2xhc3NdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgICAgICByZXQuc3R5bGUgPSBub3JtYWxpemVTdHlsZShbcmV0LnN0eWxlLCB0b01lcmdlLnN0eWxlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc09uKGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHJldFtrZXldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluY29taW5nID0gdG9NZXJnZVtrZXldO1xuICAgICAgICAgICAgICAgIGlmIChpbmNvbWluZyAmJlxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZyAhPT0gaW5jb21pbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgIShpc0FycmF5KGV4aXN0aW5nKSAmJiBleGlzdGluZy5pbmNsdWRlcyhpbmNvbWluZykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldFtrZXldID0gZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gW10uY29uY2F0KGV4aXN0aW5nLCBpbmNvbWluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaW5jb21pbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHJldFtrZXldID0gdG9NZXJnZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiBpbnZva2VWTm9kZUhvb2soaG9vaywgaW5zdGFuY2UsIHZub2RlLCBwcmV2Vk5vZGUgPSBudWxsKSB7XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDcgLyogRXJyb3JDb2Rlcy5WTk9ERV9IT09LICovLCBbXG4gICAgICAgIHZub2RlLFxuICAgICAgICBwcmV2Vk5vZGVcbiAgICBdKTtcbn1cblxuY29uc3QgZW1wdHlBcHBDb250ZXh0ID0gY3JlYXRlQXBwQ29udGV4dCgpO1xubGV0IHVpZCQxID0gMDtcbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlKHZub2RlLCBwYXJlbnQsIHN1c3BlbnNlKSB7XG4gICAgY29uc3QgdHlwZSA9IHZub2RlLnR5cGU7XG4gICAgLy8gaW5oZXJpdCBwYXJlbnQgYXBwIGNvbnRleHQgLSBvciAtIGlmIHJvb3QsIGFkb3B0IGZyb20gcm9vdCB2bm9kZVxuICAgIGNvbnN0IGFwcENvbnRleHQgPSAocGFyZW50ID8gcGFyZW50LmFwcENvbnRleHQgOiB2bm9kZS5hcHBDb250ZXh0KSB8fCBlbXB0eUFwcENvbnRleHQ7XG4gICAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgICAgIHVpZDogdWlkJDErKyxcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgYXBwQ29udGV4dCxcbiAgICAgICAgcm9vdDogbnVsbCxcbiAgICAgICAgbmV4dDogbnVsbCxcbiAgICAgICAgc3ViVHJlZTogbnVsbCxcbiAgICAgICAgZWZmZWN0OiBudWxsLFxuICAgICAgICB1cGRhdGU6IG51bGwsXG4gICAgICAgIHNjb3BlOiBuZXcgRWZmZWN0U2NvcGUodHJ1ZSAvKiBkZXRhY2hlZCAqLyksXG4gICAgICAgIHJlbmRlcjogbnVsbCxcbiAgICAgICAgcHJveHk6IG51bGwsXG4gICAgICAgIGV4cG9zZWQ6IG51bGwsXG4gICAgICAgIGV4cG9zZVByb3h5OiBudWxsLFxuICAgICAgICB3aXRoUHJveHk6IG51bGwsXG4gICAgICAgIHByb3ZpZGVzOiBwYXJlbnQgPyBwYXJlbnQucHJvdmlkZXMgOiBPYmplY3QuY3JlYXRlKGFwcENvbnRleHQucHJvdmlkZXMpLFxuICAgICAgICBhY2Nlc3NDYWNoZTogbnVsbCxcbiAgICAgICAgcmVuZGVyQ2FjaGU6IFtdLFxuICAgICAgICAvLyBsb2NhbCByZXNvbHZlZCBhc3NldHNcbiAgICAgICAgY29tcG9uZW50czogbnVsbCxcbiAgICAgICAgZGlyZWN0aXZlczogbnVsbCxcbiAgICAgICAgLy8gcmVzb2x2ZWQgcHJvcHMgYW5kIGVtaXRzIG9wdGlvbnNcbiAgICAgICAgcHJvcHNPcHRpb25zOiBub3JtYWxpemVQcm9wc09wdGlvbnModHlwZSwgYXBwQ29udGV4dCksXG4gICAgICAgIGVtaXRzT3B0aW9uczogbm9ybWFsaXplRW1pdHNPcHRpb25zKHR5cGUsIGFwcENvbnRleHQpLFxuICAgICAgICAvLyBlbWl0XG4gICAgICAgIGVtaXQ6IG51bGwsXG4gICAgICAgIGVtaXR0ZWQ6IG51bGwsXG4gICAgICAgIC8vIHByb3BzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgcHJvcHNEZWZhdWx0czogRU1QVFlfT0JKLFxuICAgICAgICAvLyBpbmhlcml0QXR0cnNcbiAgICAgICAgaW5oZXJpdEF0dHJzOiB0eXBlLmluaGVyaXRBdHRycyxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgY3R4OiBFTVBUWV9PQkosXG4gICAgICAgIGRhdGE6IEVNUFRZX09CSixcbiAgICAgICAgcHJvcHM6IEVNUFRZX09CSixcbiAgICAgICAgYXR0cnM6IEVNUFRZX09CSixcbiAgICAgICAgc2xvdHM6IEVNUFRZX09CSixcbiAgICAgICAgcmVmczogRU1QVFlfT0JKLFxuICAgICAgICBzZXR1cFN0YXRlOiBFTVBUWV9PQkosXG4gICAgICAgIHNldHVwQ29udGV4dDogbnVsbCxcbiAgICAgICAgLy8gc3VzcGVuc2UgcmVsYXRlZFxuICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgc3VzcGVuc2VJZDogc3VzcGVuc2UgPyBzdXNwZW5zZS5wZW5kaW5nSWQgOiAwLFxuICAgICAgICBhc3luY0RlcDogbnVsbCxcbiAgICAgICAgYXN5bmNSZXNvbHZlZDogZmFsc2UsXG4gICAgICAgIC8vIGxpZmVjeWNsZSBob29rc1xuICAgICAgICAvLyBub3QgdXNpbmcgZW51bXMgaGVyZSBiZWNhdXNlIGl0IHJlc3VsdHMgaW4gY29tcHV0ZWQgcHJvcGVydGllc1xuICAgICAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgICAgICBpc1VubW91bnRlZDogZmFsc2UsXG4gICAgICAgIGlzRGVhY3RpdmF0ZWQ6IGZhbHNlLFxuICAgICAgICBiYzogbnVsbCxcbiAgICAgICAgYzogbnVsbCxcbiAgICAgICAgYm06IG51bGwsXG4gICAgICAgIG06IG51bGwsXG4gICAgICAgIGJ1OiBudWxsLFxuICAgICAgICB1OiBudWxsLFxuICAgICAgICB1bTogbnVsbCxcbiAgICAgICAgYnVtOiBudWxsLFxuICAgICAgICBkYTogbnVsbCxcbiAgICAgICAgYTogbnVsbCxcbiAgICAgICAgcnRnOiBudWxsLFxuICAgICAgICBydGM6IG51bGwsXG4gICAgICAgIGVjOiBudWxsLFxuICAgICAgICBzcDogbnVsbFxuICAgIH07XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBpbnN0YW5jZS5jdHggPSBjcmVhdGVEZXZSZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGluc3RhbmNlLmN0eCA9IHsgXzogaW5zdGFuY2UgfTtcbiAgICB9XG4gICAgaW5zdGFuY2Uucm9vdCA9IHBhcmVudCA/IHBhcmVudC5yb290IDogaW5zdGFuY2U7XG4gICAgaW5zdGFuY2UuZW1pdCA9IGVtaXQkMS5iaW5kKG51bGwsIGluc3RhbmNlKTtcbiAgICAvLyBhcHBseSBjdXN0b20gZWxlbWVudCBzcGVjaWFsIGhhbmRsaW5nXG4gICAgaWYgKHZub2RlLmNlKSB7XG4gICAgICAgIHZub2RlLmNlKGluc3RhbmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGluc3RhbmNlO1xufVxubGV0IGN1cnJlbnRJbnN0YW5jZSA9IG51bGw7XG5jb25zdCBnZXRDdXJyZW50SW5zdGFuY2UgPSAoKSA9PiBjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuY29uc3Qgc2V0Q3VycmVudEluc3RhbmNlID0gKGluc3RhbmNlKSA9PiB7XG4gICAgY3VycmVudEluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgaW5zdGFuY2Uuc2NvcGUub24oKTtcbn07XG5jb25zdCB1bnNldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IHtcbiAgICBjdXJyZW50SW5zdGFuY2UgJiYgY3VycmVudEluc3RhbmNlLnNjb3BlLm9mZigpO1xuICAgIGN1cnJlbnRJbnN0YW5jZSA9IG51bGw7XG59O1xuY29uc3QgaXNCdWlsdEluVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKCdzbG90LGNvbXBvbmVudCcpO1xuZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUsIGNvbmZpZykge1xuICAgIGNvbnN0IGFwcElzTmF0aXZlVGFnID0gY29uZmlnLmlzTmF0aXZlVGFnIHx8IE5PO1xuICAgIGlmIChpc0J1aWx0SW5UYWcobmFtZSkgfHwgYXBwSXNOYXRpdmVUYWcobmFtZSkpIHtcbiAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCBpZDogJyArIG5hbWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gaW5zdGFuY2Uudm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqLztcbn1cbmxldCBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSBmYWxzZTtcbmZ1bmN0aW9uIHNldHVwQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUiA9IGZhbHNlKSB7XG4gICAgaXNJblNTUkNvbXBvbmVudFNldHVwID0gaXNTU1I7XG4gICAgY29uc3QgeyBwcm9wcywgY2hpbGRyZW4gfSA9IGluc3RhbmNlLnZub2RlO1xuICAgIGNvbnN0IGlzU3RhdGVmdWwgPSBpc1N0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlKTtcbiAgICBpbml0UHJvcHMoaW5zdGFuY2UsIHByb3BzLCBpc1N0YXRlZnVsLCBpc1NTUik7XG4gICAgaW5pdFNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBpc1N0YXRlZnVsXG4gICAgICAgID8gc2V0dXBTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSwgaXNTU1IpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlzSW5TU1JDb21wb25lbnRTZXR1cCA9IGZhbHNlO1xuICAgIHJldHVybiBzZXR1cFJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNldHVwU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IENvbXBvbmVudCA9IGluc3RhbmNlLnR5cGU7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBpZiAoQ29tcG9uZW50Lm5hbWUpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShDb21wb25lbnQubmFtZSwgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChDb21wb25lbnQuY29tcG9uZW50cykge1xuICAgICAgICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhDb21wb25lbnQuY29tcG9uZW50cyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWVzW2ldLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXBvbmVudC5kaXJlY3RpdmVzKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKENvbXBvbmVudC5kaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChDb21wb25lbnQuY29tcGlsZXJPcHRpb25zICYmIGlzUnVudGltZU9ubHkoKSkge1xuICAgICAgICAgICAgd2FybihgXCJjb21waWxlck9wdGlvbnNcIiBpcyBvbmx5IHN1cHBvcnRlZCB3aGVuIHVzaW5nIGEgYnVpbGQgb2YgVnVlIHRoYXQgYCArXG4gICAgICAgICAgICAgICAgYGluY2x1ZGVzIHRoZSBydW50aW1lIGNvbXBpbGVyLiBTaW5jZSB5b3UgYXJlIHVzaW5nIGEgcnVudGltZS1vbmx5IGAgK1xuICAgICAgICAgICAgICAgIGBidWlsZCwgdGhlIG9wdGlvbnMgc2hvdWxkIGJlIHBhc3NlZCB2aWEgeW91ciBidWlsZCB0b29sIGNvbmZpZyBpbnN0ZWFkLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIDAuIGNyZWF0ZSByZW5kZXIgcHJveHkgcHJvcGVydHkgYWNjZXNzIGNhY2hlXG4gICAgaW5zdGFuY2UuYWNjZXNzQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIC8vIDEuIGNyZWF0ZSBwdWJsaWMgaW5zdGFuY2UgLyByZW5kZXIgcHJveHlcbiAgICAvLyBhbHNvIG1hcmsgaXQgcmF3IHNvIGl0J3MgbmV2ZXIgb2JzZXJ2ZWRcbiAgICBpbnN0YW5jZS5wcm94eSA9IG1hcmtSYXcobmV3IFByb3h5KGluc3RhbmNlLmN0eCwgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzKSk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBleHBvc2VQcm9wc09uUmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XG4gICAgfVxuICAgIC8vIDIuIGNhbGwgc2V0dXAoKVxuICAgIGNvbnN0IHsgc2V0dXAgfSA9IENvbXBvbmVudDtcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgICAgY29uc3Qgc2V0dXBDb250ZXh0ID0gKGluc3RhbmNlLnNldHVwQ29udGV4dCA9XG4gICAgICAgICAgICBzZXR1cC5sZW5ndGggPiAxID8gY3JlYXRlU2V0dXBDb250ZXh0KGluc3RhbmNlKSA6IG51bGwpO1xuICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgIGNvbnN0IHNldHVwUmVzdWx0ID0gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHNldHVwLCBpbnN0YW5jZSwgMCAvKiBFcnJvckNvZGVzLlNFVFVQX0ZVTkNUSU9OICovLCBbKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGluc3RhbmNlLnByb3BzKSA6IGluc3RhbmNlLnByb3BzLCBzZXR1cENvbnRleHRdKTtcbiAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICBpZiAoaXNQcm9taXNlKHNldHVwUmVzdWx0KSkge1xuICAgICAgICAgICAgc2V0dXBSZXN1bHQudGhlbih1bnNldEN1cnJlbnRJbnN0YW5jZSwgdW5zZXRDdXJyZW50SW5zdGFuY2UpO1xuICAgICAgICAgICAgaWYgKGlzU1NSKSB7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBwcm9taXNlIHNvIHNlcnZlci1yZW5kZXJlciBjYW4gd2FpdCBvbiBpdFxuICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzb2x2ZWRSZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHJlc29sdmVkUmVzdWx0LCBpc1NTUik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCBpbnN0YW5jZSwgMCAvKiBFcnJvckNvZGVzLlNFVFVQX0ZVTkNUSU9OICovKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFzeW5jIHNldHVwIHJldHVybmVkIFByb21pc2UuXG4gICAgICAgICAgICAgICAgLy8gYmFpbCBoZXJlIGFuZCB3YWl0IGZvciByZS1lbnRyeS5cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5hc3luY0RlcCA9IHNldHVwUmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWluc3RhbmNlLnN1c3BlbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAoX2EgPSBDb21wb25lbnQubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ0Fub255bW91cyc7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCA8JHtuYW1lfT46IHNldHVwIGZ1bmN0aW9uIHJldHVybmVkIGEgcHJvbWlzZSwgYnV0IG5vIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYDxTdXNwZW5zZT4gYm91bmRhcnkgd2FzIGZvdW5kIGluIHRoZSBwYXJlbnQgY29tcG9uZW50IHRyZWUuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYEEgY29tcG9uZW50IHdpdGggYXN5bmMgc2V0dXAoKSBtdXN0IGJlIG5lc3RlZCBpbiBhIDxTdXNwZW5zZT4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgaW4gb3JkZXIgdG8gYmUgcmVuZGVyZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUikge1xuICAgIGlmIChpc0Z1bmN0aW9uKHNldHVwUmVzdWx0KSkge1xuICAgICAgICAvLyBzZXR1cCByZXR1cm5lZCBhbiBpbmxpbmUgcmVuZGVyIGZ1bmN0aW9uXG4gICAgICAgIGlmIChpbnN0YW5jZS50eXBlLl9fc3NySW5saW5lUmVuZGVyKSB7XG4gICAgICAgICAgICAvLyB3aGVuIHRoZSBmdW5jdGlvbidzIG5hbWUgaXMgYHNzclJlbmRlcmAgKGNvbXBpbGVkIGJ5IFNGQyBpbmxpbmUgbW9kZSksXG4gICAgICAgICAgICAvLyBzZXQgaXQgYXMgc3NyUmVuZGVyIGluc3RlYWQuXG4gICAgICAgICAgICBpbnN0YW5jZS5zc3JSZW5kZXIgPSBzZXR1cFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnJlbmRlciA9IHNldHVwUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHNldHVwUmVzdWx0KSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzVk5vZGUoc2V0dXBSZXN1bHQpKSB7XG4gICAgICAgICAgICB3YXJuKGBzZXR1cCgpIHNob3VsZCBub3QgcmV0dXJuIFZOb2RlcyBkaXJlY3RseSAtIGAgK1xuICAgICAgICAgICAgICAgIGByZXR1cm4gYSByZW5kZXIgZnVuY3Rpb24gaW5zdGVhZC5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXR1cCByZXR1cm5lZCBiaW5kaW5ncy5cbiAgICAgICAgLy8gYXNzdW1pbmcgYSByZW5kZXIgZnVuY3Rpb24gY29tcGlsZWQgZnJvbSB0ZW1wbGF0ZSBpcyBwcmVzZW50LlxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgaW5zdGFuY2UuZGV2dG9vbHNSYXdTZXR1cFN0YXRlID0gc2V0dXBSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2Uuc2V0dXBTdGF0ZSA9IHByb3h5UmVmcyhzZXR1cFJlc3VsdCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBzZXR1cFJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHdhcm4oYHNldHVwKCkgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuIFJlY2VpdmVkOiAke3NldHVwUmVzdWx0ID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIHNldHVwUmVzdWx0fWApO1xuICAgIH1cbiAgICBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IpO1xufVxubGV0IGNvbXBpbGU7XG5sZXQgaW5zdGFsbFdpdGhQcm94eTtcbi8qKlxuICogRm9yIHJ1bnRpbWUtZG9tIHRvIHJlZ2lzdGVyIHRoZSBjb21waWxlci5cbiAqIE5vdGUgdGhlIGV4cG9ydGVkIG1ldGhvZCB1c2VzIGFueSB0byBhdm9pZCBkLnRzIHJlbHlpbmcgb24gdGhlIGNvbXBpbGVyIHR5cGVzLlxuICovXG5mdW5jdGlvbiByZWdpc3RlclJ1bnRpbWVDb21waWxlcihfY29tcGlsZSkge1xuICAgIGNvbXBpbGUgPSBfY29tcGlsZTtcbiAgICBpbnN0YWxsV2l0aFByb3h5ID0gaSA9PiB7XG4gICAgICAgIGlmIChpLnJlbmRlci5fcmMpIHtcbiAgICAgICAgICAgIGkud2l0aFByb3h5ID0gbmV3IFByb3h5KGkuY3R4LCBSdW50aW1lQ29tcGlsZWRQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8vIGRldiBvbmx5XG5jb25zdCBpc1J1bnRpbWVPbmx5ID0gKCkgPT4gIWNvbXBpbGU7XG5mdW5jdGlvbiBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IsIHNraXBPcHRpb25zKSB7XG4gICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgICAvLyB0ZW1wbGF0ZSAvIHJlbmRlciBmdW5jdGlvbiBub3JtYWxpemF0aW9uXG4gICAgLy8gY291bGQgYmUgYWxyZWFkeSBzZXQgd2hlbiByZXR1cm5lZCBmcm9tIHNldHVwKClcbiAgICBpZiAoIWluc3RhbmNlLnJlbmRlcikge1xuICAgICAgICAvLyBvbmx5IGRvIG9uLXRoZS1mbHkgY29tcGlsZSBpZiBub3QgaW4gU1NSIC0gU1NSIG9uLXRoZS1mbHkgY29tcGlsYXRpb25cbiAgICAgICAgLy8gaXMgZG9uZSBieSBzZXJ2ZXItcmVuZGVyZXJcbiAgICAgICAgaWYgKCFpc1NTUiAmJiBjb21waWxlICYmICFDb21wb25lbnQucmVuZGVyKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IENvbXBvbmVudC50ZW1wbGF0ZSB8fFxuICAgICAgICAgICAgICAgIHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKS50ZW1wbGF0ZTtcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgY29tcGlsZWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IGlzQ3VzdG9tRWxlbWVudCwgY29tcGlsZXJPcHRpb25zIH0gPSBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZztcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRlbGltaXRlcnMsIGNvbXBpbGVyT3B0aW9uczogY29tcG9uZW50Q29tcGlsZXJPcHRpb25zIH0gPSBDb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgZmluYWxDb21waWxlck9wdGlvbnMgPSBleHRlbmQoZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgaXNDdXN0b21FbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBkZWxpbWl0ZXJzXG4gICAgICAgICAgICAgICAgfSwgY29tcGlsZXJPcHRpb25zKSwgY29tcG9uZW50Q29tcGlsZXJPcHRpb25zKTtcbiAgICAgICAgICAgICAgICBDb21wb25lbnQucmVuZGVyID0gY29tcGlsZSh0ZW1wbGF0ZSwgZmluYWxDb21waWxlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGNvbXBpbGVgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gKENvbXBvbmVudC5yZW5kZXIgfHwgTk9PUCk7XG4gICAgICAgIC8vIGZvciBydW50aW1lLWNvbXBpbGVkIHJlbmRlciBmdW5jdGlvbnMgdXNpbmcgYHdpdGhgIGJsb2NrcywgdGhlIHJlbmRlclxuICAgICAgICAvLyBwcm94eSB1c2VkIG5lZWRzIGEgZGlmZmVyZW50IGBoYXNgIGhhbmRsZXIgd2hpY2ggaXMgbW9yZSBwZXJmb3JtYW50IGFuZFxuICAgICAgICAvLyBhbHNvIG9ubHkgYWxsb3dzIGEgd2hpdGVsaXN0IG9mIGdsb2JhbHMgdG8gZmFsbHRocm91Z2guXG4gICAgICAgIGlmIChpbnN0YWxsV2l0aFByb3h5KSB7XG4gICAgICAgICAgICBpbnN0YWxsV2l0aFByb3h5KGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBzdXBwb3J0IGZvciAyLnggb3B0aW9uc1xuICAgIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmICEoZmFsc2UgKSkge1xuICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSk7XG4gICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICB9XG4gICAgLy8gd2FybiBtaXNzaW5nIHRlbXBsYXRlL3JlbmRlclxuICAgIC8vIHRoZSBydW50aW1lIGNvbXBpbGF0aW9uIG9mIHRlbXBsYXRlIGluIFNTUiBpcyBkb25lIGJ5IHNlcnZlci1yZW5kZXJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFDb21wb25lbnQucmVuZGVyICYmIGluc3RhbmNlLnJlbmRlciA9PT0gTk9PUCAmJiAhaXNTU1IpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghY29tcGlsZSAmJiBDb21wb25lbnQudGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBwcm92aWRlZCB0ZW1wbGF0ZSBvcHRpb24gYnV0IGAgK1xuICAgICAgICAgICAgICAgIGBydW50aW1lIGNvbXBpbGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBidWlsZCBvZiBWdWUuYCArXG4gICAgICAgICAgICAgICAgKGAgQ29uZmlndXJlIHlvdXIgYnVuZGxlciB0byBhbGlhcyBcInZ1ZVwiIHRvIFwidnVlL2Rpc3QvdnVlLmVzbS1idW5kbGVyLmpzXCIuYFxuICAgICAgICAgICAgICAgICAgICApIC8qIHNob3VsZCBub3QgaGFwcGVuICovKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBpcyBtaXNzaW5nIHRlbXBsYXRlIG9yIHJlbmRlciBmdW5jdGlvbi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gbmV3IFByb3h5KGluc3RhbmNlLmF0dHJzLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgICAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sICckYXR0cnMnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KCkge1xuICAgICAgICAgICAgICAgIHdhcm4oYHNldHVwQ29udGV4dC5hdHRycyBpcyByZWFkb25seS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVsZXRlUHJvcGVydHkoKSB7XG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXBDb250ZXh0LmF0dHJzIGlzIHJlYWRvbmx5LmApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICAgICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sICckYXR0cnMnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlU2V0dXBDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgY29uc3QgZXhwb3NlID0gZXhwb3NlZCA9PiB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICAgICAgd2FybihgZXhwb3NlKCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UgcGVyIHNldHVwKCkuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UuZXhwb3NlZCA9IGV4cG9zZWQgfHwge307XG4gICAgfTtcbiAgICBsZXQgYXR0cnM7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAvLyBXZSB1c2UgZ2V0dGVycyBpbiBkZXYgaW4gY2FzZSBsaWJzIGxpa2UgdGVzdC11dGlscyBvdmVyd3JpdGUgaW5zdGFuY2VcbiAgICAgICAgLy8gcHJvcGVydGllcyAob3ZlcndyaXRlcyBzaG91bGQgbm90IGJlIGRvbmUgaW4gcHJvZClcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgICAgICAgICAgZ2V0IGF0dHJzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRycyB8fCAoYXR0cnMgPSBjcmVhdGVBdHRyc1Byb3h5KGluc3RhbmNlKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHNsb3RzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzaGFsbG93UmVhZG9ubHkoaW5zdGFuY2Uuc2xvdHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBlbWl0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoZXZlbnQsIC4uLmFyZ3MpID0+IGluc3RhbmNlLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGV4cG9zZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXQgYXR0cnMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzIHx8IChhdHRycyA9IGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzbG90czogaW5zdGFuY2Uuc2xvdHMsXG4gICAgICAgICAgICBlbWl0OiBpbnN0YW5jZS5lbWl0LFxuICAgICAgICAgICAgZXhwb3NlXG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RXhwb3NlUHJveHkoaW5zdGFuY2UpIHtcbiAgICBpZiAoaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICByZXR1cm4gKGluc3RhbmNlLmV4cG9zZVByb3h5IHx8XG4gICAgICAgICAgICAoaW5zdGFuY2UuZXhwb3NlUHJveHkgPSBuZXcgUHJveHkocHJveHlSZWZzKG1hcmtSYXcoaW5zdGFuY2UuZXhwb3NlZCkpLCB7XG4gICAgICAgICAgICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYXModGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleSBpbiB0YXJnZXQgfHwga2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpKTtcbiAgICB9XG59XG5jb25zdCBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXSkoXFx3KS9nO1xuY29uc3QgY2xhc3NpZnkgPSAoc3RyKSA9PiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCBjID0+IGMudG9VcHBlckNhc2UoKSkucmVwbGFjZSgvWy1fXS9nLCAnJyk7XG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKENvbXBvbmVudCwgaW5jbHVkZUluZmVycmVkID0gdHJ1ZSkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKENvbXBvbmVudClcbiAgICAgICAgPyBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWVcbiAgICAgICAgOiBDb21wb25lbnQubmFtZSB8fCAoaW5jbHVkZUluZmVycmVkICYmIENvbXBvbmVudC5fX25hbWUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIENvbXBvbmVudCwgaXNSb290ID0gZmFsc2UpIHtcbiAgICBsZXQgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50KTtcbiAgICBpZiAoIW5hbWUgJiYgQ29tcG9uZW50Ll9fZmlsZSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IENvbXBvbmVudC5fX2ZpbGUubWF0Y2goLyhbXi9cXFxcXSspXFwuXFx3KyQvKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBuYW1lID0gbWF0Y2hbMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuYW1lICYmIGluc3RhbmNlICYmIGluc3RhbmNlLnBhcmVudCkge1xuICAgICAgICAvLyB0cnkgdG8gaW5mZXIgdGhlIG5hbWUgYmFzZWQgb24gcmV2ZXJzZSByZXNvbHV0aW9uXG4gICAgICAgIGNvbnN0IGluZmVyRnJvbVJlZ2lzdHJ5ID0gKHJlZ2lzdHJ5KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZWdpc3RyeSkge1xuICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyeVtrZXldID09PSBDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG5hbWUgPVxuICAgICAgICAgICAgaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuY29tcG9uZW50cyB8fFxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhcmVudC50eXBlLmNvbXBvbmVudHMpIHx8IGluZmVyRnJvbVJlZ2lzdHJ5KGluc3RhbmNlLmFwcENvbnRleHQuY29tcG9uZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lID8gY2xhc3NpZnkobmFtZSkgOiBpc1Jvb3QgPyBgQXBwYCA6IGBBbm9ueW1vdXNgO1xufVxuZnVuY3Rpb24gaXNDbGFzc0NvbXBvbmVudCh2YWx1ZSkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlKSAmJiAnX192Y2NPcHRzJyBpbiB2YWx1ZTtcbn1cblxuY29uc3QgY29tcHV0ZWQgPSAoKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zKSA9PiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBjb21wdXRlZCQxKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zLCBpc0luU1NSQ29tcG9uZW50U2V0dXApO1xufSk7XG5cbi8vIGRldiBvbmx5XG5jb25zdCB3YXJuUnVudGltZVVzYWdlID0gKG1ldGhvZCkgPT4gd2FybihgJHttZXRob2R9KCkgaXMgYSBjb21waWxlci1oaW50IGhlbHBlciB0aGF0IGlzIG9ubHkgdXNhYmxlIGluc2lkZSBgICtcbiAgICBgPHNjcmlwdCBzZXR1cD4gb2YgYSBzaW5nbGUgZmlsZSBjb21wb25lbnQuIEl0cyBhcmd1bWVudHMgc2hvdWxkIGJlIGAgK1xuICAgIGBjb21waWxlZCBhd2F5IGFuZCBwYXNzaW5nIGl0IGF0IHJ1bnRpbWUgaGFzIG5vIGVmZmVjdC5gKTtcbi8vIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiBkZWZpbmVQcm9wcygpIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZVByb3BzYCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLy8gaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIGRlZmluZUVtaXRzKCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRW1pdHNgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFZ1ZSBgPHNjcmlwdCBzZXR1cD5gIGNvbXBpbGVyIG1hY3JvIGZvciBkZWNsYXJpbmcgYSBjb21wb25lbnQncyBleHBvc2VkXG4gKiBpbnN0YW5jZSBwcm9wZXJ0aWVzIHdoZW4gaXQgaXMgYWNjZXNzZWQgYnkgYSBwYXJlbnQgY29tcG9uZW50IHZpYSB0ZW1wbGF0ZVxuICogcmVmcy5cbiAqXG4gKiBgPHNjcmlwdCBzZXR1cD5gIGNvbXBvbmVudHMgYXJlIGNsb3NlZCBieSBkZWZhdWx0IC0gaS5lLiB2YXJpYWJsZXMgaW5zaWRlXG4gKiB0aGUgYDxzY3JpcHQgc2V0dXA+YCBzY29wZSBpcyBub3QgZXhwb3NlZCB0byBwYXJlbnQgdW5sZXNzIGV4cGxpY2l0bHkgZXhwb3NlZFxuICogdmlhIGBkZWZpbmVFeHBvc2VgLlxuICpcbiAqIFRoaXMgaXMgb25seSB1c2FibGUgaW5zaWRlIGA8c2NyaXB0IHNldHVwPmAsIGlzIGNvbXBpbGVkIGF3YXkgaW4gdGhlXG4gKiBvdXRwdXQgYW5kIHNob3VsZCAqKm5vdCoqIGJlIGFjdHVhbGx5IGNhbGxlZCBhdCBydW50aW1lLlxuICovXG5mdW5jdGlvbiBkZWZpbmVFeHBvc2UoZXhwb3NlZCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRXhwb3NlYCk7XG4gICAgfVxufVxuLyoqXG4gKiBWdWUgYDxzY3JpcHQgc2V0dXA+YCBjb21waWxlciBtYWNybyBmb3IgcHJvdmlkaW5nIHByb3BzIGRlZmF1bHQgdmFsdWVzIHdoZW5cbiAqIHVzaW5nIHR5cGUtYmFzZWQgYGRlZmluZVByb3BzYCBkZWNsYXJhdGlvbi5cbiAqXG4gKiBFeGFtcGxlIHVzYWdlOlxuICogYGBgdHNcbiAqIHdpdGhEZWZhdWx0cyhkZWZpbmVQcm9wczx7XG4gKiAgIHNpemU/OiBudW1iZXJcbiAqICAgbGFiZWxzPzogc3RyaW5nW11cbiAqIH0+KCksIHtcbiAqICAgc2l6ZTogMyxcbiAqICAgbGFiZWxzOiAoKSA9PiBbJ2RlZmF1bHQgbGFiZWwnXVxuICogfSlcbiAqIGBgYFxuICpcbiAqIFRoaXMgaXMgb25seSB1c2FibGUgaW5zaWRlIGA8c2NyaXB0IHNldHVwPmAsIGlzIGNvbXBpbGVkIGF3YXkgaW4gdGhlIG91dHB1dFxuICogYW5kIHNob3VsZCAqKm5vdCoqIGJlIGFjdHVhbGx5IGNhbGxlZCBhdCBydW50aW1lLlxuICovXG5mdW5jdGlvbiB3aXRoRGVmYXVsdHMocHJvcHMsIGRlZmF1bHRzKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuUnVudGltZVVzYWdlKGB3aXRoRGVmYXVsdHNgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiB1c2VTbG90cygpIHtcbiAgICByZXR1cm4gZ2V0Q29udGV4dCgpLnNsb3RzO1xufVxuZnVuY3Rpb24gdXNlQXR0cnMoKSB7XG4gICAgcmV0dXJuIGdldENvbnRleHQoKS5hdHRycztcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XG4gICAgY29uc3QgaSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWkpIHtcbiAgICAgICAgd2FybihgdXNlQ29udGV4dCgpIGNhbGxlZCB3aXRob3V0IGFjdGl2ZSBpbnN0YW5jZS5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGkuc2V0dXBDb250ZXh0IHx8IChpLnNldHVwQ29udGV4dCA9IGNyZWF0ZVNldHVwQ29udGV4dChpKSk7XG59XG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciBtZXJnaW5nIGRlZmF1bHQgZGVjbGFyYXRpb25zLiBJbXBvcnRlZCBieSBjb21waWxlZCBjb2RlXG4gKiBvbmx5LlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIG1lcmdlRGVmYXVsdHMocmF3LCBkZWZhdWx0cykge1xuICAgIGNvbnN0IHByb3BzID0gaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3LnJlZHVjZSgobm9ybWFsaXplZCwgcCkgPT4gKChub3JtYWxpemVkW3BdID0ge30pLCBub3JtYWxpemVkKSwge30pXG4gICAgICAgIDogcmF3O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XG4gICAgICAgIGlmIChvcHQpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KG9wdCkgfHwgaXNGdW5jdGlvbihvcHQpKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNba2V5XSA9IHsgdHlwZTogb3B0LCBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHQuZGVmYXVsdCA9IGRlZmF1bHRzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0ID09PSBudWxsKSB7XG4gICAgICAgICAgICBwcm9wc1trZXldID0geyBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBwcm9wcyBkZWZhdWx0IGtleSBcIiR7a2V5fVwiIGhhcyBubyBjb3JyZXNwb25kaW5nIGRlY2xhcmF0aW9uLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9wcztcbn1cbi8qKlxuICogVXNlZCB0byBjcmVhdGUgYSBwcm94eSBmb3IgdGhlIHJlc3QgZWxlbWVudCB3aGVuIGRlc3RydWN0dXJpbmcgcHJvcHMgd2l0aFxuICogZGVmaW5lUHJvcHMoKS5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBjcmVhdGVQcm9wc1Jlc3RQcm94eShwcm9wcywgZXhjbHVkZWRLZXlzKSB7XG4gICAgY29uc3QgcmV0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKCFleGNsdWRlZEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJldCwga2V5LCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHByb3BzW2tleV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG4vKipcbiAqIGA8c2NyaXB0IHNldHVwPmAgaGVscGVyIGZvciBwZXJzaXN0aW5nIHRoZSBjdXJyZW50IGluc3RhbmNlIGNvbnRleHQgb3ZlclxuICogYXN5bmMvYXdhaXQgZmxvd3MuXG4gKlxuICogYEB2dWUvY29tcGlsZXItc2ZjYCBjb252ZXJ0cyB0aGUgZm9sbG93aW5nOlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCB4ID0gYXdhaXQgZm9vKClcbiAqIGBgYFxuICpcbiAqIGludG86XG4gKlxuICogYGBgdHNcbiAqIGxldCBfX3RlbXAsIF9fcmVzdG9yZVxuICogY29uc3QgeCA9ICgoW19fdGVtcCwgX19yZXN0b3JlXSA9IHdpdGhBc3luY0NvbnRleHQoKCkgPT4gZm9vKCkpKSxfX3RlbXA9YXdhaXQgX190ZW1wLF9fcmVzdG9yZSgpLF9fdGVtcClcbiAqIGBgYFxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHdpdGhBc3luY0NvbnRleHQoZ2V0QXdhaXRhYmxlKSB7XG4gICAgY29uc3QgY3R4ID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY3R4KSB7XG4gICAgICAgIHdhcm4oYHdpdGhBc3luY0NvbnRleHQgY2FsbGVkIHdpdGhvdXQgYWN0aXZlIGN1cnJlbnQgaW5zdGFuY2UuIGAgK1xuICAgICAgICAgICAgYFRoaXMgaXMgbGlrZWx5IGEgYnVnLmApO1xuICAgIH1cbiAgICBsZXQgYXdhaXRhYmxlID0gZ2V0QXdhaXRhYmxlKCk7XG4gICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBpZiAoaXNQcm9taXNlKGF3YWl0YWJsZSkpIHtcbiAgICAgICAgYXdhaXRhYmxlID0gYXdhaXRhYmxlLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGN0eCk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFthd2FpdGFibGUsICgpID0+IHNldEN1cnJlbnRJbnN0YW5jZShjdHgpXTtcbn1cblxuLy8gQWN0dWFsIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiBoKHR5cGUsIHByb3BzT3JDaGlsZHJlbiwgY2hpbGRyZW4pIHtcbiAgICBjb25zdCBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAobCA9PT0gMikge1xuICAgICAgICBpZiAoaXNPYmplY3QocHJvcHNPckNoaWxkcmVuKSAmJiAhaXNBcnJheShwcm9wc09yQ2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAvLyBzaW5nbGUgdm5vZGUgd2l0aG91dCBwcm9wc1xuICAgICAgICAgICAgaWYgKGlzVk5vZGUocHJvcHNPckNoaWxkcmVuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBbcHJvcHNPckNoaWxkcmVuXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcm9wcyB3aXRob3V0IGNoaWxkcmVuXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG9taXQgcHJvcHNcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBwcm9wc09yQ2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAobCA+IDMpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAzICYmIGlzVk5vZGUoY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzT3JDaGlsZHJlbiwgY2hpbGRyZW4pO1xuICAgIH1cbn1cblxuY29uc3Qgc3NyQ29udGV4dEtleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBgc3NyQ29udGV4dGAgOiBgYCk7XG5jb25zdCB1c2VTU1JDb250ZXh0ID0gKCkgPT4ge1xuICAgIHtcbiAgICAgICAgY29uc3QgY3R4ID0gaW5qZWN0KHNzckNvbnRleHRLZXkpO1xuICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgU2VydmVyIHJlbmRlcmluZyBjb250ZXh0IG5vdCBwcm92aWRlZC4gTWFrZSBzdXJlIHRvIG9ubHkgY2FsbCBgICtcbiAgICAgICAgICAgICAgICAgICAgYHVzZVNTUkNvbnRleHQoKSBjb25kaXRpb25hbGx5IGluIHRoZSBzZXJ2ZXIgYnVpbGQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBpc1NoYWxsb3codmFsdWUpIHtcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNTaGFsbG93XCIgLyogUmVhY3RpdmVGbGFncy5JU19TSEFMTE9XICovXSk7XG59XG5cbmZ1bmN0aW9uIGluaXRDdXN0b21Gb3JtYXR0ZXIoKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB2dWVTdHlsZSA9IHsgc3R5bGU6ICdjb2xvcjojM2JhNzc2JyB9O1xuICAgIGNvbnN0IG51bWJlclN0eWxlID0geyBzdHlsZTogJ2NvbG9yOiMwYjFiYzknIH07XG4gICAgY29uc3Qgc3RyaW5nU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6I2I2MmUyNCcgfTtcbiAgICBjb25zdCBrZXl3b3JkU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6IzlkMjg4YycgfTtcbiAgICAvLyBjdXN0b20gZm9ybWF0dGVyIGZvciBDaHJvbWVcbiAgICAvLyBodHRwczovL3d3dy5tYXR0emV1bmVydC5jb20vMjAxNi8wMi8xOS9jdXN0b20tY2hyb21lLWRldnRvb2xzLW9iamVjdC1mb3JtYXR0ZXJzLmh0bWxcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSB7XG4gICAgICAgIGhlYWRlcihvYmopIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYWxzbyBmb3JtYXQgQ29tcG9uZW50UHVibGljSW5zdGFuY2UgJiBjdHguc2xvdHMvYXR0cnMgaW4gc2V0dXBcbiAgICAgICAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iai5fX2lzVnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsnZGl2JywgdnVlU3R5bGUsIGBWdWVJbnN0YW5jZWBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWYob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGdlblJlZkZsYWcob2JqKV0sXG4gICAgICAgICAgICAgICAgICAgICc8JyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUob2JqLnZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgYD5gXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGlzU2hhbGxvdyhvYmopID8gJ1NoYWxsb3dSZWFjdGl2ZScgOiAnUmVhY3RpdmUnXSxcbiAgICAgICAgICAgICAgICAgICAgJzwnLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRWYWx1ZShvYmopLFxuICAgICAgICAgICAgICAgICAgICBgPiR7aXNSZWFkb25seShvYmopID8gYCAocmVhZG9ubHkpYCA6IGBgfWBcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWFkb25seShvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCB2dWVTdHlsZSwgaXNTaGFsbG93KG9iaikgPyAnU2hhbGxvd1JlYWRvbmx5JyA6ICdSZWFkb25seSddLFxuICAgICAgICAgICAgICAgICAgICAnPCcsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXG4gICAgICAgICAgICAgICAgICAgICc+J1xuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzQm9keShvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9faXNWdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGJvZHkob2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqICYmIG9iai5fX2lzVnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICAuLi5mb3JtYXRJbnN0YW5jZShvYmouJClcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiBmb3JtYXRJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgICAgICBjb25zdCBibG9ja3MgPSBbXTtcbiAgICAgICAgaWYgKGluc3RhbmNlLnR5cGUucHJvcHMgJiYgaW5zdGFuY2UucHJvcHMpIHtcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soJ3Byb3BzJywgdG9SYXcoaW5zdGFuY2UucHJvcHMpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RhbmNlLnNldHVwU3RhdGUgIT09IEVNUFRZX09CSikge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnc2V0dXAnLCBpbnN0YW5jZS5zZXR1cFN0YXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RhbmNlLmRhdGEgIT09IEVNUFRZX09CSikge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnZGF0YScsIHRvUmF3KGluc3RhbmNlLmRhdGEpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcHV0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgJ2NvbXB1dGVkJyk7XG4gICAgICAgIGlmIChjb21wdXRlZCkge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnY29tcHV0ZWQnLCBjb21wdXRlZCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluamVjdGVkID0gZXh0cmFjdEtleXMoaW5zdGFuY2UsICdpbmplY3QnKTtcbiAgICAgICAgaWYgKGluamVjdGVkKSB7XG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdpbmplY3RlZCcsIGluamVjdGVkKSk7XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2tzLnB1c2goW1xuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZToga2V5d29yZFN0eWxlLnN0eWxlICsgJztvcGFjaXR5OjAuNjYnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnJCAoaW50ZXJuYWwpOiAnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgWydvYmplY3QnLCB7IG9iamVjdDogaW5zdGFuY2UgfV1cbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBibG9ja3M7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlQmxvY2sodHlwZSwgdGFyZ2V0KSB7XG4gICAgICAgIHRhcmdldCA9IGV4dGVuZCh7fSwgdGFyZ2V0KTtcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0YXJnZXQpLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIHt9XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IHN0eWxlOiAnbGluZS1oZWlnaHQ6MS4yNWVtO21hcmdpbi1ib3R0b206MC42ZW0nIH0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ2NvbG9yOiM0NzY1ODInXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0eXBlXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6MS4yNWVtJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmtleXModGFyZ2V0KS5tYXAoa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCBrZXl3b3JkU3R5bGUsIGtleSArICc6ICddLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUodGFyZ2V0W2tleV0sIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIF07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHYsIGFzUmF3ID0gdHJ1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywgbnVtYmVyU3R5bGUsIHZdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIHN0cmluZ1N0eWxlLCBKU09OLnN0cmluZ2lmeSh2KV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIGtleXdvcmRTdHlsZSwgdl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgIHJldHVybiBbJ29iamVjdCcsIHsgb2JqZWN0OiBhc1JhdyA/IHRvUmF3KHYpIDogdiB9XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbJ3NwYW4nLCBzdHJpbmdTdHlsZSwgU3RyaW5nKHYpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBleHRyYWN0S2V5cyhpbnN0YW5jZSwgdHlwZSkge1xuICAgICAgICBjb25zdCBDb21wID0gaW5zdGFuY2UudHlwZTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oQ29tcCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleHRyYWN0ZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW5zdGFuY2UuY3R4KSB7XG4gICAgICAgICAgICBpZiAoaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSkge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RlZFtrZXldID0gaW5zdGFuY2UuY3R4W2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4dHJhY3RlZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBDb21wW3R5cGVdO1xuICAgICAgICBpZiAoKGlzQXJyYXkob3B0cykgJiYgb3B0cy5pbmNsdWRlcyhrZXkpKSB8fFxuICAgICAgICAgICAgKGlzT2JqZWN0KG9wdHMpICYmIGtleSBpbiBvcHRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXAuZXh0ZW5kcyAmJiBpc0tleU9mVHlwZShDb21wLmV4dGVuZHMsIGtleSwgdHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChDb21wLm1peGlucyAmJiBDb21wLm1peGlucy5zb21lKG0gPT4gaXNLZXlPZlR5cGUobSwga2V5LCB0eXBlKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdlblJlZkZsYWcodikge1xuICAgICAgICBpZiAoaXNTaGFsbG93KHYpKSB7XG4gICAgICAgICAgICByZXR1cm4gYFNoYWxsb3dSZWZgO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2LmVmZmVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIGBDb21wdXRlZFJlZmA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBSZWZgO1xuICAgIH1cbiAgICBpZiAod2luZG93LmRldnRvb2xzRm9ybWF0dGVycykge1xuICAgICAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMgPSBbZm9ybWF0dGVyXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHdpdGhNZW1vKG1lbW8sIHJlbmRlciwgY2FjaGUsIGluZGV4KSB7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGVbaW5kZXhdO1xuICAgIGlmIChjYWNoZWQgJiYgaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJldCA9IHJlbmRlcigpO1xuICAgIC8vIHNoYWxsb3cgY2xvbmVcbiAgICByZXQubWVtbyA9IG1lbW8uc2xpY2UoKTtcbiAgICByZXR1cm4gKGNhY2hlW2luZGV4XSA9IHJldCk7XG59XG5mdW5jdGlvbiBpc01lbW9TYW1lKGNhY2hlZCwgbWVtbykge1xuICAgIGNvbnN0IHByZXYgPSBjYWNoZWQubWVtbztcbiAgICBpZiAocHJldi5sZW5ndGggIT0gbWVtby5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXYubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQocHJldltpXSwgbWVtb1tpXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgdG8gbGV0IHBhcmVudCBibG9jayB0cmFjayBpdCB3aGVuIHJldHVybmluZyBjYWNoZWRcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiBjdXJyZW50QmxvY2spIHtcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2goY2FjaGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8vIENvcmUgQVBJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgdmVyc2lvbiA9IFwiMy4yLjQ1XCI7XG5jb25zdCBfc3NyVXRpbHMgPSB7XG4gICAgY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UsXG4gICAgc2V0dXBDb21wb25lbnQsXG4gICAgcmVuZGVyQ29tcG9uZW50Um9vdCxcbiAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsXG4gICAgaXNWTm9kZSxcbiAgICBub3JtYWxpemVWTm9kZVxufTtcbi8qKlxuICogU1NSIHV0aWxzIGZvciBcXEB2dWUvc2VydmVyLXJlbmRlcmVyLiBPbmx5IGV4cG9zZWQgaW4gc3NyLXBvc3NpYmxlIGJ1aWxkcy5cbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBzc3JVdGlscyA9IChfc3NyVXRpbHMgKTtcbi8qKlxuICogQGludGVybmFsIG9ubHkgZXhwb3NlZCBpbiBjb21wYXQgYnVpbGRzXG4gKi9cbmNvbnN0IHJlc29sdmVGaWx0ZXIgPSBudWxsO1xuLyoqXG4gKiBAaW50ZXJuYWwgb25seSBleHBvc2VkIGluIGNvbXBhdCBidWlsZHMuXG4gKi9cbmNvbnN0IGNvbXBhdFV0aWxzID0gKG51bGwpO1xuXG5leHBvcnQgeyBCYXNlVHJhbnNpdGlvbiwgQ29tbWVudCwgRnJhZ21lbnQsIEtlZXBBbGl2ZSwgU3RhdGljLCBTdXNwZW5zZSwgVGVsZXBvcnQsIFRleHQsIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nLCBjYWxsV2l0aEVycm9ySGFuZGxpbmcsIGNsb25lVk5vZGUsIGNvbXBhdFV0aWxzLCBjb21wdXRlZCwgY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlRWxlbWVudEJsb2NrLCBjcmVhdGVCYXNlVk5vZGUgYXMgY3JlYXRlRWxlbWVudFZOb2RlLCBjcmVhdGVIeWRyYXRpb25SZW5kZXJlciwgY3JlYXRlUHJvcHNSZXN0UHJveHksIGNyZWF0ZVJlbmRlcmVyLCBjcmVhdGVTbG90cywgY3JlYXRlU3RhdGljVk5vZGUsIGNyZWF0ZVRleHRWTm9kZSwgY3JlYXRlVk5vZGUsIGRlZmluZUFzeW5jQ29tcG9uZW50LCBkZWZpbmVDb21wb25lbnQsIGRlZmluZUVtaXRzLCBkZWZpbmVFeHBvc2UsIGRlZmluZVByb3BzLCBkZXZ0b29scywgZ2V0Q3VycmVudEluc3RhbmNlLCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIGd1YXJkUmVhY3RpdmVQcm9wcywgaCwgaGFuZGxlRXJyb3IsIGluaXRDdXN0b21Gb3JtYXR0ZXIsIGluamVjdCwgaXNNZW1vU2FtZSwgaXNSdW50aW1lT25seSwgaXNWTm9kZSwgbWVyZ2VEZWZhdWx0cywgbWVyZ2VQcm9wcywgbmV4dFRpY2ssIG9uQWN0aXZhdGVkLCBvbkJlZm9yZU1vdW50LCBvbkJlZm9yZVVubW91bnQsIG9uQmVmb3JlVXBkYXRlLCBvbkRlYWN0aXZhdGVkLCBvbkVycm9yQ2FwdHVyZWQsIG9uTW91bnRlZCwgb25SZW5kZXJUcmFja2VkLCBvblJlbmRlclRyaWdnZXJlZCwgb25TZXJ2ZXJQcmVmZXRjaCwgb25Vbm1vdW50ZWQsIG9uVXBkYXRlZCwgb3BlbkJsb2NrLCBwb3BTY29wZUlkLCBwcm92aWRlLCBwdXNoU2NvcGVJZCwgcXVldWVQb3N0Rmx1c2hDYiwgcmVnaXN0ZXJSdW50aW1lQ29tcGlsZXIsIHJlbmRlckxpc3QsIHJlbmRlclNsb3QsIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUsIHJlc29sdmVEeW5hbWljQ29tcG9uZW50LCByZXNvbHZlRmlsdGVyLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBzZXRCbG9ja1RyYWNraW5nLCBzZXREZXZ0b29sc0hvb2ssIHNldFRyYW5zaXRpb25Ib29rcywgc3NyQ29udGV4dEtleSwgc3NyVXRpbHMsIHRvSGFuZGxlcnMsIHRyYW5zZm9ybVZOb2RlQXJncywgdXNlQXR0cnMsIHVzZVNTUkNvbnRleHQsIHVzZVNsb3RzLCB1c2VUcmFuc2l0aW9uU3RhdGUsIHZlcnNpb24sIHdhcm4sIHdhdGNoLCB3YXRjaEVmZmVjdCwgd2F0Y2hQb3N0RWZmZWN0LCB3YXRjaFN5bmNFZmZlY3QsIHdpdGhBc3luY0NvbnRleHQsIHdpdGhDdHgsIHdpdGhEZWZhdWx0cywgd2l0aERpcmVjdGl2ZXMsIHdpdGhNZW1vLCB3aXRoU2NvcGVJZCB9O1xuIiwiaW1wb3J0IHsgd2FybiwgY2FtZWxpemUsIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nLCBkZWZpbmVDb21wb25lbnQsIG5leHRUaWNrLCBjcmVhdGVWTm9kZSwgZ2V0Q3VycmVudEluc3RhbmNlLCB3YXRjaFBvc3RFZmZlY3QsIG9uTW91bnRlZCwgb25Vbm1vdW50ZWQsIEZyYWdtZW50LCBTdGF0aWMsIGgsIEJhc2VUcmFuc2l0aW9uLCB1c2VUcmFuc2l0aW9uU3RhdGUsIG9uVXBkYXRlZCwgdG9SYXcsIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbiwgc2V0VHJhbnNpdGlvbkhvb2tzLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBjcmVhdGVSZW5kZXJlciwgaXNSdW50aW1lT25seSwgY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIgfSBmcm9tICdAdnVlL3J1bnRpbWUtY29yZSc7XG5leHBvcnQgKiBmcm9tICdAdnVlL3J1bnRpbWUtY29yZSc7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNBcnJheSwgaHlwaGVuYXRlLCBjYXBpdGFsaXplLCBpc1NwZWNpYWxCb29sZWFuQXR0ciwgaW5jbHVkZUJvb2xlYW5BdHRyLCBpc09uLCBpc01vZGVsTGlzdGVuZXIsIGlzRnVuY3Rpb24sIGNhbWVsaXplIGFzIGNhbWVsaXplJDEsIHRvTnVtYmVyLCBleHRlbmQsIEVNUFRZX09CSiwgaXNPYmplY3QsIGludm9rZUFycmF5Rm5zLCBsb29zZUluZGV4T2YsIGlzU2V0LCBsb29zZUVxdWFsLCBpc0hUTUxUYWcsIGlzU1ZHVGFnIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5jb25zdCBzdmdOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG5jb25zdCBkb2MgPSAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogbnVsbCk7XG5jb25zdCB0ZW1wbGF0ZUNvbnRhaW5lciA9IGRvYyAmJiAvKiNfX1BVUkVfXyovIGRvYy5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuY29uc3Qgbm9kZU9wcyA9IHtcbiAgICBpbnNlcnQ6IChjaGlsZCwgcGFyZW50LCBhbmNob3IpID0+IHtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgYW5jaG9yIHx8IG51bGwpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBjaGlsZCA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGNoaWxkLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNyZWF0ZUVsZW1lbnQ6ICh0YWcsIGlzU1ZHLCBpcywgcHJvcHMpID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSBpc1NWR1xuICAgICAgICAgICAgPyBkb2MuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCB0YWcpXG4gICAgICAgICAgICA6IGRvYy5jcmVhdGVFbGVtZW50KHRhZywgaXMgPyB7IGlzIH0gOiB1bmRlZmluZWQpO1xuICAgICAgICBpZiAodGFnID09PSAnc2VsZWN0JyAmJiBwcm9wcyAmJiBwcm9wcy5tdWx0aXBsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ211bHRpcGxlJywgcHJvcHMubXVsdGlwbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9LFxuICAgIGNyZWF0ZVRleHQ6IHRleHQgPT4gZG9jLmNyZWF0ZVRleHROb2RlKHRleHQpLFxuICAgIGNyZWF0ZUNvbW1lbnQ6IHRleHQgPT4gZG9jLmNyZWF0ZUNvbW1lbnQodGV4dCksXG4gICAgc2V0VGV4dDogKG5vZGUsIHRleHQpID0+IHtcbiAgICAgICAgbm9kZS5ub2RlVmFsdWUgPSB0ZXh0O1xuICAgIH0sXG4gICAgc2V0RWxlbWVudFRleHQ6IChlbCwgdGV4dCkgPT4ge1xuICAgICAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfSxcbiAgICBwYXJlbnROb2RlOiBub2RlID0+IG5vZGUucGFyZW50Tm9kZSxcbiAgICBuZXh0U2libGluZzogbm9kZSA9PiBub2RlLm5leHRTaWJsaW5nLFxuICAgIHF1ZXJ5U2VsZWN0b3I6IHNlbGVjdG9yID0+IGRvYy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSxcbiAgICBzZXRTY29wZUlkKGVsLCBpZCkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoaWQsICcnKTtcbiAgICB9LFxuICAgIC8vIF9fVU5TQUZFX19cbiAgICAvLyBSZWFzb246IGlubmVySFRNTC5cbiAgICAvLyBTdGF0aWMgY29udGVudCBoZXJlIGNhbiBvbmx5IGNvbWUgZnJvbSBjb21waWxlZCB0ZW1wbGF0ZXMuXG4gICAgLy8gQXMgbG9uZyBhcyB0aGUgdXNlciBvbmx5IHVzZXMgdHJ1c3RlZCB0ZW1wbGF0ZXMsIHRoaXMgaXMgc2FmZS5cbiAgICBpbnNlcnRTdGF0aWNDb250ZW50KGNvbnRlbnQsIHBhcmVudCwgYW5jaG9yLCBpc1NWRywgc3RhcnQsIGVuZCkge1xuICAgICAgICAvLyA8cGFyZW50PiBiZWZvcmUgfCBmaXJzdCAuLi4gbGFzdCB8IGFuY2hvciA8L3BhcmVudD5cbiAgICAgICAgY29uc3QgYmVmb3JlID0gYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGQ7XG4gICAgICAgIC8vICM1MzA4IGNhbiBvbmx5IHRha2UgY2FjaGVkIHBhdGggaWY6XG4gICAgICAgIC8vIC0gaGFzIGEgc2luZ2xlIHJvb3Qgbm9kZVxuICAgICAgICAvLyAtIG5leHRTaWJsaW5nIGluZm8gaXMgc3RpbGwgYXZhaWxhYmxlXG4gICAgICAgIGlmIChzdGFydCAmJiAoc3RhcnQgPT09IGVuZCB8fCBzdGFydC5uZXh0U2libGluZykpIHtcbiAgICAgICAgICAgIC8vIGNhY2hlZFxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHN0YXJ0LmNsb25lTm9kZSh0cnVlKSwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPT09IGVuZCB8fCAhKHN0YXJ0ID0gc3RhcnQubmV4dFNpYmxpbmcpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZyZXNoIGluc2VydFxuICAgICAgICAgICAgdGVtcGxhdGVDb250YWluZXIuaW5uZXJIVE1MID0gaXNTVkcgPyBgPHN2Zz4ke2NvbnRlbnR9PC9zdmc+YCA6IGNvbnRlbnQ7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ29udGFpbmVyLmNvbnRlbnQ7XG4gICAgICAgICAgICBpZiAoaXNTVkcpIHtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgb3V0ZXIgc3ZnIHdyYXBwZXJcbiAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gdGVtcGxhdGUuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKHdyYXBwZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRlbXBsYXRlLnJlbW92ZUNoaWxkKHdyYXBwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSh0ZW1wbGF0ZSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLy8gZmlyc3RcbiAgICAgICAgICAgIGJlZm9yZSA/IGJlZm9yZS5uZXh0U2libGluZyA6IHBhcmVudC5maXJzdENoaWxkLFxuICAgICAgICAgICAgLy8gbGFzdFxuICAgICAgICAgICAgYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGRcbiAgICAgICAgXTtcbiAgICB9XG59O1xuXG4vLyBjb21waWxlciBzaG91bGQgbm9ybWFsaXplIGNsYXNzICsgOmNsYXNzIGJpbmRpbmdzIG9uIHRoZSBzYW1lIGVsZW1lbnRcbi8vIGludG8gYSBzaW5nbGUgYmluZGluZyBbJ3N0YXRpY0NsYXNzJywgZHluYW1pY11cbmZ1bmN0aW9uIHBhdGNoQ2xhc3MoZWwsIHZhbHVlLCBpc1NWRykge1xuICAgIC8vIGRpcmVjdGx5IHNldHRpbmcgY2xhc3NOYW1lIHNob3VsZCBiZSBmYXN0ZXIgdGhhbiBzZXRBdHRyaWJ1dGUgaW4gdGhlb3J5XG4gICAgLy8gaWYgdGhpcyBpcyBhbiBlbGVtZW50IGR1cmluZyBhIHRyYW5zaXRpb24sIHRha2UgdGhlIHRlbXBvcmFyeSB0cmFuc2l0aW9uXG4gICAgLy8gY2xhc3NlcyBpbnRvIGFjY291bnQuXG4gICAgY29uc3QgdHJhbnNpdGlvbkNsYXNzZXMgPSBlbC5fdnRjO1xuICAgIGlmICh0cmFuc2l0aW9uQ2xhc3Nlcykge1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSA/IFt2YWx1ZSwgLi4udHJhbnNpdGlvbkNsYXNzZXNdIDogWy4uLnRyYW5zaXRpb25DbGFzc2VzXSkuam9pbignICcpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU1ZHKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbC5jbGFzc05hbWUgPSB2YWx1ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBhdGNoU3R5bGUoZWwsIHByZXYsIG5leHQpIHtcbiAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICAgIGNvbnN0IGlzQ3NzU3RyaW5nID0gaXNTdHJpbmcobmV4dCk7XG4gICAgaWYgKG5leHQgJiYgIWlzQ3NzU3RyaW5nKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5leHQpIHtcbiAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksIG5leHRba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXYgJiYgIWlzU3RyaW5nKHByZXYpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcmV2KSB7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREaXNwbGF5ID0gc3R5bGUuZGlzcGxheTtcbiAgICAgICAgaWYgKGlzQ3NzU3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmNzc1RleHQgPSBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXYpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbmRpY2F0ZXMgdGhhdCB0aGUgYGRpc3BsYXlgIG9mIHRoZSBlbGVtZW50IGlzIGNvbnRyb2xsZWQgYnkgYHYtc2hvd2AsXG4gICAgICAgIC8vIHNvIHdlIGFsd2F5cyBrZWVwIHRoZSBjdXJyZW50IGBkaXNwbGF5YCB2YWx1ZSByZWdhcmRsZXNzIG9mIHRoZSBgc3R5bGVgXG4gICAgICAgIC8vIHZhbHVlLCB0aHVzIGhhbmRpbmcgb3ZlciBjb250cm9sIHRvIGB2LXNob3dgLlxuICAgICAgICBpZiAoJ192b2QnIGluIGVsKSB7XG4gICAgICAgICAgICBzdHlsZS5kaXNwbGF5ID0gY3VycmVudERpc3BsYXk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBzZW1pY29sb25SRSA9IC9bXlxcXFxdO1xccyokLztcbmNvbnN0IGltcG9ydGFudFJFID0gL1xccyohaW1wb3J0YW50JC87XG5mdW5jdGlvbiBzZXRTdHlsZShzdHlsZSwgbmFtZSwgdmFsKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YWwuZm9yRWFjaCh2ID0+IHNldFN0eWxlKHN0eWxlLCBuYW1lLCB2KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodmFsID09IG51bGwpXG4gICAgICAgICAgICB2YWwgPSAnJztcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgaWYgKHNlbWljb2xvblJFLnRlc3QodmFsKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYFVuZXhwZWN0ZWQgc2VtaWNvbG9uIGF0IHRoZSBlbmQgb2YgJyR7bmFtZX0nIHN0eWxlIHZhbHVlOiAnJHt2YWx9J2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJy0tJykpIHtcbiAgICAgICAgICAgIC8vIGN1c3RvbSBwcm9wZXJ0eSBkZWZpbml0aW9uXG4gICAgICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJlZml4ZWQgPSBhdXRvUHJlZml4KHN0eWxlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChpbXBvcnRhbnRSRS50ZXN0KHZhbCkpIHtcbiAgICAgICAgICAgICAgICAvLyAhaW1wb3J0YW50XG4gICAgICAgICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoaHlwaGVuYXRlKHByZWZpeGVkKSwgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKSwgJ2ltcG9ydGFudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3R5bGVbcHJlZml4ZWRdID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgcHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcbmNvbnN0IHByZWZpeENhY2hlID0ge307XG5mdW5jdGlvbiBhdXRvUHJlZml4KHN0eWxlLCByYXdOYW1lKSB7XG4gICAgY29uc3QgY2FjaGVkID0gcHJlZml4Q2FjaGVbcmF3TmFtZV07XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgICBsZXQgbmFtZSA9IGNhbWVsaXplKHJhd05hbWUpO1xuICAgIGlmIChuYW1lICE9PSAnZmlsdGVyJyAmJiBuYW1lIGluIHN0eWxlKSB7XG4gICAgICAgIHJldHVybiAocHJlZml4Q2FjaGVbcmF3TmFtZV0gPSBuYW1lKTtcbiAgICB9XG4gICAgbmFtZSA9IGNhcGl0YWxpemUobmFtZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwcmVmaXhlZCA9IHByZWZpeGVzW2ldICsgbmFtZTtcbiAgICAgICAgaWYgKHByZWZpeGVkIGluIHN0eWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gKHByZWZpeENhY2hlW3Jhd05hbWVdID0gcHJlZml4ZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByYXdOYW1lO1xufVxuXG5jb25zdCB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xuZnVuY3Rpb24gcGF0Y2hBdHRyKGVsLCBrZXksIHZhbHVlLCBpc1NWRywgaW5zdGFuY2UpIHtcbiAgICBpZiAoaXNTVkcgJiYga2V5LnN0YXJ0c1dpdGgoJ3hsaW5rOicpKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXkuc2xpY2UoNiwga2V5Lmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywga2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIG5vdGUgd2UgYXJlIG9ubHkgY2hlY2tpbmcgYm9vbGVhbiBhdHRyaWJ1dGVzIHRoYXQgZG9uJ3QgaGF2ZSBhXG4gICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgZG9tIHByb3Agb2YgdGhlIHNhbWUgbmFtZSBoZXJlLlxuICAgICAgICBjb25zdCBpc0Jvb2xlYW4gPSBpc1NwZWNpYWxCb29sZWFuQXR0cihrZXkpO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCAoaXNCb29sZWFuICYmICFpbmNsdWRlQm9vbGVhbkF0dHIodmFsdWUpKSkge1xuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBpc0Jvb2xlYW4gPyAnJyA6IHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gX19VTlNBRkVfX1xuLy8gZnVuY3Rpb25zLiBUaGUgdXNlciBpcyByZXNwb25zaWJsZSBmb3IgdXNpbmcgdGhlbSB3aXRoIG9ubHkgdHJ1c3RlZCBjb250ZW50LlxuZnVuY3Rpb24gcGF0Y2hET01Qcm9wKGVsLCBrZXksIHZhbHVlLCBcbi8vIHRoZSBmb2xsb3dpbmcgYXJncyBhcmUgcGFzc2VkIG9ubHkgZHVlIHRvIHBvdGVudGlhbCBpbm5lckhUTUwvdGV4dENvbnRlbnRcbi8vIG92ZXJyaWRpbmcgZXhpc3RpbmcgVk5vZGVzLCBpbiB3aGljaCBjYXNlIHRoZSBvbGQgdHJlZSBtdXN0IGJlIHByb3Blcmx5XG4vLyB1bm1vdW50ZWQuXG5wcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbikge1xuICAgIGlmIChrZXkgPT09ICdpbm5lckhUTUwnIHx8IGtleSA9PT0gJ3RleHRDb250ZW50Jykge1xuICAgICAgICBpZiAocHJldkNoaWxkcmVuKSB7XG4gICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4ocHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbFtrZXldID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gJ3ZhbHVlJyAmJlxuICAgICAgICBlbC50YWdOYW1lICE9PSAnUFJPR1JFU1MnICYmXG4gICAgICAgIC8vIGN1c3RvbSBlbGVtZW50cyBtYXkgdXNlIF92YWx1ZSBpbnRlcm5hbGx5XG4gICAgICAgICFlbC50YWdOYW1lLmluY2x1ZGVzKCctJykpIHtcbiAgICAgICAgLy8gc3RvcmUgdmFsdWUgYXMgX3ZhbHVlIGFzIHdlbGwgc2luY2VcbiAgICAgICAgLy8gbm9uLXN0cmluZyB2YWx1ZXMgd2lsbCBiZSBzdHJpbmdpZmllZC5cbiAgICAgICAgZWwuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG4gICAgICAgIGlmIChlbC52YWx1ZSAhPT0gbmV3VmFsdWUgfHxcbiAgICAgICAgICAgIC8vICM0OTU2OiBhbHdheXMgc2V0IGZvciBPUFRJT04gZWxlbWVudHMgYmVjYXVzZSBpdHMgdmFsdWUgZmFsbHMgYmFjayB0b1xuICAgICAgICAgICAgLy8gdGV4dENvbnRlbnQgaWYgbm8gdmFsdWUgYXR0cmlidXRlIGlzIHByZXNlbnQuIEFuZCBzZXR0aW5nIC52YWx1ZSBmb3JcbiAgICAgICAgICAgIC8vIE9QVElPTiBoYXMgbm8gc2lkZSBlZmZlY3RcbiAgICAgICAgICAgIGVsLnRhZ05hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICAgICBlbC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuZWVkUmVtb3ZlID0gZmFsc2U7XG4gICAgaWYgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgZWxba2V5XTtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgLy8gZS5nLiA8c2VsZWN0IG11bHRpcGxlPiBjb21waWxlcyB0byB7IG11bHRpcGxlOiAnJyB9XG4gICAgICAgICAgICB2YWx1ZSA9IGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT0gbnVsbCAmJiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gZS5nLiA8ZGl2IDppZD1cIm51bGxcIj5cbiAgICAgICAgICAgIHZhbHVlID0gJyc7XG4gICAgICAgICAgICBuZWVkUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgLy8gZS5nLiA8aW1nIDp3aWR0aD1cIm51bGxcIj5cbiAgICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgICAgIG5lZWRSZW1vdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHNvbWUgcHJvcGVydGllcyBwZXJmb3JtIHZhbHVlIHZhbGlkYXRpb24gYW5kIHRocm93LFxuICAgIC8vIHNvbWUgcHJvcGVydGllcyBoYXMgZ2V0dGVyLCBubyBzZXR0ZXIsIHdpbGwgZXJyb3IgaW4gJ3VzZSBzdHJpY3QnXG4gICAgLy8gZWcuIDxzZWxlY3QgOnR5cGU9XCJudWxsXCI+PC9zZWxlY3Q+IDxzZWxlY3QgOndpbGxWYWxpZGF0ZT1cIm51bGxcIj48L3NlbGVjdD5cbiAgICB0cnkge1xuICAgICAgICBlbFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdCB3YXJuIGlmIHZhbHVlIGlzIGF1dG8tY29lcmNlZCBmcm9tIG51bGxpc2ggdmFsdWVzXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIW5lZWRSZW1vdmUpIHtcbiAgICAgICAgICAgIHdhcm4oYEZhaWxlZCBzZXR0aW5nIHByb3AgXCIke2tleX1cIiBvbiA8JHtlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCl9PjogYCArXG4gICAgICAgICAgICAgICAgYHZhbHVlICR7dmFsdWV9IGlzIGludmFsaWQuYCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmVlZFJlbW92ZSAmJiBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBwYXRjaEV2ZW50KGVsLCByYXdOYW1lLCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgaW5zdGFuY2UgPSBudWxsKSB7XG4gICAgLy8gdmVpID0gdnVlIGV2ZW50IGludm9rZXJzXG4gICAgY29uc3QgaW52b2tlcnMgPSBlbC5fdmVpIHx8IChlbC5fdmVpID0ge30pO1xuICAgIGNvbnN0IGV4aXN0aW5nSW52b2tlciA9IGludm9rZXJzW3Jhd05hbWVdO1xuICAgIGlmIChuZXh0VmFsdWUgJiYgZXhpc3RpbmdJbnZva2VyKSB7XG4gICAgICAgIC8vIHBhdGNoXG4gICAgICAgIGV4aXN0aW5nSW52b2tlci52YWx1ZSA9IG5leHRWYWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IFtuYW1lLCBvcHRpb25zXSA9IHBhcnNlTmFtZShyYXdOYW1lKTtcbiAgICAgICAgaWYgKG5leHRWYWx1ZSkge1xuICAgICAgICAgICAgLy8gYWRkXG4gICAgICAgICAgICBjb25zdCBpbnZva2VyID0gKGludm9rZXJzW3Jhd05hbWVdID0gY3JlYXRlSW52b2tlcihuZXh0VmFsdWUsIGluc3RhbmNlKSk7XG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBuYW1lLCBpbnZva2VyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleGlzdGluZ0ludm9rZXIpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZVxuICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgZXhpc3RpbmdJbnZva2VyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGludm9rZXJzW3Jhd05hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3Qgb3B0aW9uc01vZGlmaWVyUkUgPSAvKD86T25jZXxQYXNzaXZlfENhcHR1cmUpJC87XG5mdW5jdGlvbiBwYXJzZU5hbWUobmFtZSkge1xuICAgIGxldCBvcHRpb25zO1xuICAgIGlmIChvcHRpb25zTW9kaWZpZXJSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IG07XG4gICAgICAgIHdoaWxlICgobSA9IG5hbWUubWF0Y2gob3B0aW9uc01vZGlmaWVyUkUpKSkge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgbmFtZS5sZW5ndGggLSBtWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICBvcHRpb25zW21bMF0udG9Mb3dlckNhc2UoKV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50ID0gbmFtZVsyXSA9PT0gJzonID8gbmFtZS5zbGljZSgzKSA6IGh5cGhlbmF0ZShuYW1lLnNsaWNlKDIpKTtcbiAgICByZXR1cm4gW2V2ZW50LCBvcHRpb25zXTtcbn1cbi8vIFRvIGF2b2lkIHRoZSBvdmVyaGVhZCBvZiByZXBlYXRlZGx5IGNhbGxpbmcgRGF0ZS5ub3coKSwgd2UgY2FjaGVcbi8vIGFuZCB1c2UgdGhlIHNhbWUgdGltZXN0YW1wIGZvciBhbGwgZXZlbnQgbGlzdGVuZXJzIGF0dGFjaGVkIGluIHRoZSBzYW1lIHRpY2suXG5sZXQgY2FjaGVkTm93ID0gMDtcbmNvbnN0IHAgPSAvKiNfX1BVUkVfXyovIFByb21pc2UucmVzb2x2ZSgpO1xuY29uc3QgZ2V0Tm93ID0gKCkgPT4gY2FjaGVkTm93IHx8IChwLnRoZW4oKCkgPT4gKGNhY2hlZE5vdyA9IDApKSwgKGNhY2hlZE5vdyA9IERhdGUubm93KCkpKTtcbmZ1bmN0aW9uIGNyZWF0ZUludm9rZXIoaW5pdGlhbFZhbHVlLCBpbnN0YW5jZSkge1xuICAgIGNvbnN0IGludm9rZXIgPSAoZSkgPT4ge1xuICAgICAgICAvLyBhc3luYyBlZGdlIGNhc2UgdnVlanMvdnVlIzY1NjZcbiAgICAgICAgLy8gaW5uZXIgY2xpY2sgZXZlbnQgdHJpZ2dlcnMgcGF0Y2gsIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgLy8gYXR0YWNoZWQgdG8gb3V0ZXIgZWxlbWVudCBkdXJpbmcgcGF0Y2gsIGFuZCB0cmlnZ2VyZWQgYWdhaW4uIFRoaXNcbiAgICAgICAgLy8gaGFwcGVucyBiZWNhdXNlIGJyb3dzZXJzIGZpcmUgbWljcm90YXNrIHRpY2tzIGJldHdlZW4gZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICAgIC8vIHRoaXMgbm8gbG9uZ2VyIGhhcHBlbnMgZm9yIHRlbXBsYXRlcyBpbiBWdWUgMywgYnV0IGNvdWxkIHN0aWxsIGJlXG4gICAgICAgIC8vIHRoZW9yZXRpY2FsbHkgcG9zc2libGUgZm9yIGhhbmQtd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zLlxuICAgICAgICAvLyB0aGUgc29sdXRpb246IHdlIHNhdmUgdGhlIHRpbWVzdGFtcCB3aGVuIGEgaGFuZGxlciBpcyBhdHRhY2hlZCxcbiAgICAgICAgLy8gYW5kIGFsc28gYXR0YWNoIHRoZSB0aW1lc3RhbXAgdG8gYW55IGV2ZW50IHRoYXQgd2FzIGhhbmRsZWQgYnkgdnVlXG4gICAgICAgIC8vIGZvciB0aGUgZmlyc3QgdGltZSAodG8gYXZvaWQgaW5jb25zaXN0ZW50IGV2ZW50IHRpbWVzdGFtcCBpbXBsZW1lbnRhdGlvbnNcbiAgICAgICAgLy8gb3IgZXZlbnRzIGZpcmVkIGZyb20gaWZyYW1lcywgZS5nLiAjMjUxMylcbiAgICAgICAgLy8gVGhlIGhhbmRsZXIgd291bGQgb25seSBmaXJlIGlmIHRoZSBldmVudCBwYXNzZWQgdG8gaXQgd2FzIGZpcmVkXG4gICAgICAgIC8vIEFGVEVSIGl0IHdhcyBhdHRhY2hlZC5cbiAgICAgICAgaWYgKCFlLl92dHMpIHtcbiAgICAgICAgICAgIGUuX3Z0cyA9IERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5fdnRzIDw9IGludm9rZXIuYXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhwYXRjaFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbihlLCBpbnZva2VyLnZhbHVlKSwgaW5zdGFuY2UsIDUgLyogRXJyb3JDb2Rlcy5OQVRJVkVfRVZFTlRfSEFORExFUiAqLywgW2VdKTtcbiAgICB9O1xuICAgIGludm9rZXIudmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgaW52b2tlci5hdHRhY2hlZCA9IGdldE5vdygpO1xuICAgIHJldHVybiBpbnZva2VyO1xufVxuZnVuY3Rpb24gcGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSwgdmFsdWUpIHtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxTdG9wID0gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb247XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgb3JpZ2luYWxTdG9wLmNhbGwoZSk7XG4gICAgICAgICAgICBlLl9zdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChmbiA9PiAoZSkgPT4gIWUuX3N0b3BwZWQgJiYgZm4gJiYgZm4oZSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cblxuY29uc3QgbmF0aXZlT25SRSA9IC9eb25bYS16XS87XG5jb25zdCBwYXRjaFByb3AgPSAoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIGlzU1ZHID0gZmFsc2UsIHByZXZDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKSA9PiB7XG4gICAgaWYgKGtleSA9PT0gJ2NsYXNzJykge1xuICAgICAgICBwYXRjaENsYXNzKGVsLCBuZXh0VmFsdWUsIGlzU1ZHKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgIHBhdGNoU3R5bGUoZWwsIHByZXZWYWx1ZSwgbmV4dFZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPbihrZXkpKSB7XG4gICAgICAgIC8vIGlnbm9yZSB2LW1vZGVsIGxpc3RlbmVyc1xuICAgICAgICBpZiAoIWlzTW9kZWxMaXN0ZW5lcihrZXkpKSB7XG4gICAgICAgICAgICBwYXRjaEV2ZW50KGVsLCBrZXksIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGtleVswXSA9PT0gJy4nXG4gICAgICAgID8gKChrZXkgPSBrZXkuc2xpY2UoMSkpLCB0cnVlKVxuICAgICAgICA6IGtleVswXSA9PT0gJ14nXG4gICAgICAgICAgICA/ICgoa2V5ID0ga2V5LnNsaWNlKDEpKSwgZmFsc2UpXG4gICAgICAgICAgICA6IHNob3VsZFNldEFzUHJvcChlbCwga2V5LCBuZXh0VmFsdWUsIGlzU1ZHKSkge1xuICAgICAgICBwYXRjaERPTVByb3AoZWwsIGtleSwgbmV4dFZhbHVlLCBwcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIDxpbnB1dCB2LW1vZGVsIHR5cGU9XCJjaGVja2JveFwiPiB3aXRoXG4gICAgICAgIC8vIDp0cnVlLXZhbHVlICYgOmZhbHNlLXZhbHVlXG4gICAgICAgIC8vIHN0b3JlIHZhbHVlIGFzIGRvbSBwcm9wZXJ0aWVzIHNpbmNlIG5vbi1zdHJpbmcgdmFsdWVzIHdpbGwgYmVcbiAgICAgICAgLy8gc3RyaW5naWZpZWQuXG4gICAgICAgIGlmIChrZXkgPT09ICd0cnVlLXZhbHVlJykge1xuICAgICAgICAgICAgZWwuX3RydWVWYWx1ZSA9IG5leHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdmYWxzZS12YWx1ZScpIHtcbiAgICAgICAgICAgIGVsLl9mYWxzZVZhbHVlID0gbmV4dFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdGNoQXR0cihlbCwga2V5LCBuZXh0VmFsdWUsIGlzU1ZHKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gc2hvdWxkU2V0QXNQcm9wKGVsLCBrZXksIHZhbHVlLCBpc1NWRykge1xuICAgIGlmIChpc1NWRykge1xuICAgICAgICAvLyBtb3N0IGtleXMgbXVzdCBiZSBzZXQgYXMgYXR0cmlidXRlIG9uIHN2ZyBlbGVtZW50cyB0byB3b3JrXG4gICAgICAgIC8vIC4uLmV4Y2VwdCBpbm5lckhUTUwgJiB0ZXh0Q29udGVudFxuICAgICAgICBpZiAoa2V5ID09PSAnaW5uZXJIVE1MJyB8fCBrZXkgPT09ICd0ZXh0Q29udGVudCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIG9yIG5hdGl2ZSBvbmNsaWNrIHdpdGggZnVuY3Rpb24gdmFsdWVzXG4gICAgICAgIGlmIChrZXkgaW4gZWwgJiYgbmF0aXZlT25SRS50ZXN0KGtleSkgJiYgaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gdGhlc2UgYXJlIGVudW1lcmF0ZWQgYXR0cnMsIGhvd2V2ZXIgdGhlaXIgY29ycmVzcG9uZGluZyBET00gcHJvcGVydGllc1xuICAgIC8vIGFyZSBhY3R1YWxseSBib29sZWFucyAtIHRoaXMgbGVhZHMgdG8gc2V0dGluZyBpdCB3aXRoIGEgc3RyaW5nIFwiZmFsc2VcIlxuICAgIC8vIHZhbHVlIGxlYWRpbmcgaXQgdG8gYmUgY29lcmNlZCB0byBgdHJ1ZWAsIHNvIHdlIG5lZWQgdG8gYWx3YXlzIHRyZWF0XG4gICAgLy8gdGhlbSBhcyBhdHRyaWJ1dGVzLlxuICAgIC8vIE5vdGUgdGhhdCBgY29udGVudEVkaXRhYmxlYCBkb2Vzbid0IGhhdmUgdGhpcyBwcm9ibGVtOiBpdHMgRE9NXG4gICAgLy8gcHJvcGVydHkgaXMgYWxzbyBlbnVtZXJhdGVkIHN0cmluZyB2YWx1ZXMuXG4gICAgaWYgKGtleSA9PT0gJ3NwZWxsY2hlY2snIHx8IGtleSA9PT0gJ2RyYWdnYWJsZScgfHwga2V5ID09PSAndHJhbnNsYXRlJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vICMxNzg3LCAjMjg0MCBmb3JtIHByb3BlcnR5IG9uIGZvcm0gZWxlbWVudHMgaXMgcmVhZG9ubHkgYW5kIG11c3QgYmUgc2V0IGFzXG4gICAgLy8gYXR0cmlidXRlLlxuICAgIGlmIChrZXkgPT09ICdmb3JtJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vICMxNTI2IDxpbnB1dCBsaXN0PiBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGVcbiAgICBpZiAoa2V5ID09PSAnbGlzdCcgJiYgZWwudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vICMyNzY2IDx0ZXh0YXJlYSB0eXBlPiBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGVcbiAgICBpZiAoa2V5ID09PSAndHlwZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIG5hdGl2ZSBvbmNsaWNrIHdpdGggc3RyaW5nIHZhbHVlLCBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGVcbiAgICBpZiAobmF0aXZlT25SRS50ZXN0KGtleSkgJiYgaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGtleSBpbiBlbDtcbn1cblxuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudChvcHRpb25zLCBoeWRyYXRlKSB7XG4gICAgY29uc3QgQ29tcCA9IGRlZmluZUNvbXBvbmVudChvcHRpb25zKTtcbiAgICBjbGFzcyBWdWVDdXN0b21FbGVtZW50IGV4dGVuZHMgVnVlRWxlbWVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGluaXRpYWxQcm9wcykge1xuICAgICAgICAgICAgc3VwZXIoQ29tcCwgaW5pdGlhbFByb3BzLCBoeWRyYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBWdWVDdXN0b21FbGVtZW50LmRlZiA9IENvbXA7XG4gICAgcmV0dXJuIFZ1ZUN1c3RvbUVsZW1lbnQ7XG59XG5jb25zdCBkZWZpbmVTU1JDdXN0b21FbGVtZW50ID0gKChvcHRpb25zKSA9PiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBkZWZpbmVDdXN0b21FbGVtZW50KG9wdGlvbnMsIGh5ZHJhdGUpO1xufSk7XG5jb25zdCBCYXNlQ2xhc3MgPSAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyA/IEhUTUxFbGVtZW50IDogY2xhc3Mge1xufSk7XG5jbGFzcyBWdWVFbGVtZW50IGV4dGVuZHMgQmFzZUNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcihfZGVmLCBfcHJvcHMgPSB7fSwgaHlkcmF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9kZWYgPSBfZGVmO1xuICAgICAgICB0aGlzLl9wcm9wcyA9IF9wcm9wcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbnVtYmVyUHJvcHMgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zaGFkb3dSb290ICYmIGh5ZHJhdGUpIHtcbiAgICAgICAgICAgIGh5ZHJhdGUodGhpcy5fY3JlYXRlVk5vZGUoKSwgdGhpcy5zaGFkb3dSb290KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgdGhpcy5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgd2FybihgQ3VzdG9tIGVsZW1lbnQgaGFzIHByZS1yZW5kZXJlZCBkZWNsYXJhdGl2ZSBzaGFkb3cgcm9vdCBidXQgaXMgbm90IGAgK1xuICAgICAgICAgICAgICAgICAgICBgZGVmaW5lZCBhcyBoeWRyYXRhYmxlLiBVc2UgXFxgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudFxcYC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9kZWYuX19hc3luY0xvYWRlcikge1xuICAgICAgICAgICAgICAgIC8vIGZvciBzeW5jIGNvbXBvbmVudCBkZWZzIHdlIGNhbiBpbW1lZGlhdGVseSByZXNvbHZlIHByb3BzXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZVByb3BzKHRoaXMuX2RlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5faW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZURlZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZW5kZXIobnVsbCwgdGhpcy5zaGFkb3dSb290KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiByZXNvbHZlIGlubmVyIGNvbXBvbmVudCBkZWZpbml0aW9uIChoYW5kbGUgcG9zc2libGUgYXN5bmMgY29tcG9uZW50KVxuICAgICAqL1xuICAgIF9yZXNvbHZlRGVmKCkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlZCA9IHRydWU7XG4gICAgICAgIC8vIHNldCBpbml0aWFsIGF0dHJzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRBdHRyKHRoaXMuYXR0cmlidXRlc1tpXS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3YXRjaCBmdXR1cmUgYXR0ciBjaGFuZ2VzXG4gICAgICAgIG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG0gb2YgbXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0QXR0cihtLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5vYnNlcnZlKHRoaXMsIHsgYXR0cmlidXRlczogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZSA9IChkZWYsIGlzQXN5bmMgPSBmYWxzZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBwcm9wcywgc3R5bGVzIH0gPSBkZWY7XG4gICAgICAgICAgICAvLyBjYXN0IE51bWJlci10eXBlIHByb3BzIHNldCBiZWZvcmUgcmVzb2x2ZVxuICAgICAgICAgICAgbGV0IG51bWJlclByb3BzO1xuICAgICAgICAgICAgaWYgKHByb3BzICYmICFpc0FycmF5KHByb3BzKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHQgPT09IE51bWJlciB8fCAob3B0ICYmIG9wdC50eXBlID09PSBOdW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvcHNba2V5XSA9IHRvTnVtYmVyKHRoaXMuX3Byb3BzW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKG51bWJlclByb3BzIHx8IChudW1iZXJQcm9wcyA9IE9iamVjdC5jcmVhdGUobnVsbCkpKVtjYW1lbGl6ZSQxKGtleSldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX251bWJlclByb3BzID0gbnVtYmVyUHJvcHM7XG4gICAgICAgICAgICBpZiAoaXNBc3luYykge1xuICAgICAgICAgICAgICAgIC8vIGRlZmluaW5nIGdldHRlci9zZXR0ZXJzIG9uIHByb3RvdHlwZVxuICAgICAgICAgICAgICAgIC8vIGZvciBzeW5jIGRlZnMsIHRoaXMgYWxyZWFkeSBoYXBwZW5lZCBpbiB0aGUgY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNvbHZlUHJvcHMoZGVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFwcGx5IENTU1xuICAgICAgICAgICAgdGhpcy5fYXBwbHlTdHlsZXMoc3R5bGVzKTtcbiAgICAgICAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYXN5bmNEZWYgPSB0aGlzLl9kZWYuX19hc3luY0xvYWRlcjtcbiAgICAgICAgaWYgKGFzeW5jRGVmKSB7XG4gICAgICAgICAgICBhc3luY0RlZigpLnRoZW4oZGVmID0+IHJlc29sdmUoZGVmLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMuX2RlZik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3Jlc29sdmVQcm9wcyhkZWYpIHtcbiAgICAgICAgY29uc3QgeyBwcm9wcyB9ID0gZGVmO1xuICAgICAgICBjb25zdCBkZWNsYXJlZFByb3BLZXlzID0gaXNBcnJheShwcm9wcykgPyBwcm9wcyA6IE9iamVjdC5rZXlzKHByb3BzIHx8IHt9KTtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgYXJlIHByb3BzIHNldCBwcmUtdXBncmFkZSBvciBjb25uZWN0XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMpKSB7XG4gICAgICAgICAgICBpZiAoa2V5WzBdICE9PSAnXycgJiYgZGVjbGFyZWRQcm9wS2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0UHJvcChrZXksIHRoaXNba2V5XSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGRlZmluaW5nIGdldHRlci9zZXR0ZXJzIG9uIHByb3RvdHlwZVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBkZWNsYXJlZFByb3BLZXlzLm1hcChjYW1lbGl6ZSQxKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFByb3Aoa2V5KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldCh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0UHJvcChrZXksIHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3NldEF0dHIoa2V5KSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgICAgIGNvbnN0IGNhbWVsS2V5ID0gY2FtZWxpemUkMShrZXkpO1xuICAgICAgICBpZiAodGhpcy5fbnVtYmVyUHJvcHMgJiYgdGhpcy5fbnVtYmVyUHJvcHNbY2FtZWxLZXldKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRvTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXRQcm9wKGNhbWVsS2V5LCB2YWx1ZSwgZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfZ2V0UHJvcChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BzW2tleV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9zZXRQcm9wKGtleSwgdmFsLCBzaG91bGRSZWZsZWN0ID0gdHJ1ZSwgc2hvdWxkVXBkYXRlID0gdHJ1ZSkge1xuICAgICAgICBpZiAodmFsICE9PSB0aGlzLl9wcm9wc1trZXldKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9wc1trZXldID0gdmFsO1xuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSAmJiB0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmVmbGVjdFxuICAgICAgICAgICAgaWYgKHNob3VsZFJlZmxlY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpLCB2YWwgKyAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfdXBkYXRlKCkge1xuICAgICAgICByZW5kZXIodGhpcy5fY3JlYXRlVk5vZGUoKSwgdGhpcy5zaGFkb3dSb290KTtcbiAgICB9XG4gICAgX2NyZWF0ZVZOb2RlKCkge1xuICAgICAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKHRoaXMuX2RlZiwgZXh0ZW5kKHt9LCB0aGlzLl9wcm9wcykpO1xuICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XG4gICAgICAgICAgICB2bm9kZS5jZSA9IGluc3RhbmNlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLmlzQ0UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIEhNUlxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuY2VSZWxvYWQgPSBuZXdTdHlsZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHJlc2V0IHN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N0eWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0eWxlcy5mb3JFYWNoKHMgPT4gdGhpcy5zaGFkb3dSb290LnJlbW92ZUNoaWxkKHMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FwcGx5U3R5bGVzKG5ld1N0eWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzcGF0Y2ggPSAoZXZlbnQsIGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChldmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBhcmdzXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGludGVyY2VwdCBlbWl0XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuZW1pdCA9IChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBkaXNwYXRjaCBib3RoIHRoZSByYXcgYW5kIGh5cGhlbmF0ZWQgdmVyc2lvbnMgb2YgYW4gZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gbWF0Y2ggVnVlIGJlaGF2aW9yXG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGV2ZW50LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGh5cGhlbmF0ZShldmVudCkgIT09IGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChoeXBoZW5hdGUoZXZlbnQpLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gbG9jYXRlIG5lYXJlc3QgVnVlIGN1c3RvbSBlbGVtZW50IHBhcmVudCBmb3IgcHJvdmlkZS9pbmplY3RcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgICAgICB3aGlsZSAoKHBhcmVudCA9XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudCAmJiAocGFyZW50LnBhcmVudE5vZGUgfHwgcGFyZW50Lmhvc3QpKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgVnVlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UucGFyZW50ID0gcGFyZW50Ll9pbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnByb3ZpZGVzID0gcGFyZW50Ll9pbnN0YW5jZS5wcm92aWRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdm5vZGU7XG4gICAgfVxuICAgIF9hcHBseVN0eWxlcyhzdHlsZXMpIHtcbiAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgICAgc3R5bGVzLmZvckVhY2goY3NzID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICBzLnRleHRDb250ZW50ID0gY3NzO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChzKTtcbiAgICAgICAgICAgICAgICAvLyByZWNvcmQgZm9yIEhNUlxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3N0eWxlcyB8fCAodGhpcy5fc3R5bGVzID0gW10pKS5wdXNoKHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1c2VDc3NNb2R1bGUobmFtZSA9ICckc3R5bGUnKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGB1c2VDc3NNb2R1bGUgbXVzdCBiZSBjYWxsZWQgaW5zaWRlIHNldHVwKClgKTtcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9PQko7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kdWxlcyA9IGluc3RhbmNlLnR5cGUuX19jc3NNb2R1bGVzO1xuICAgICAgICBpZiAoIW1vZHVsZXMpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZXMgaW5qZWN0ZWQuYCk7XG4gICAgICAgICAgICByZXR1cm4gRU1QVFlfT0JKO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZCA9IG1vZHVsZXNbbmFtZV07XG4gICAgICAgIGlmICghbW9kKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZSBuYW1lZCBcIiR7bmFtZX1cIi5gKTtcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9PQko7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vZDtcbiAgICB9XG59XG5cbi8qKlxuICogUnVudGltZSBoZWxwZXIgZm9yIFNGQydzIENTUyB2YXJpYWJsZSBpbmplY3Rpb24gZmVhdHVyZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHVzZUNzc1ZhcnMoZ2V0dGVyKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICB3YXJuKGB1c2VDc3NWYXJzIGlzIGNhbGxlZCB3aXRob3V0IGN1cnJlbnQgYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVUZWxlcG9ydHMgPSAoaW5zdGFuY2UudXQgPSAodmFycyA9IGdldHRlcihpbnN0YW5jZS5wcm94eSkpID0+IHtcbiAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbZGF0YS12LW93bmVyPVwiJHtpbnN0YW5jZS51aWR9XCJdYCkpLmZvckVhY2gobm9kZSA9PiBzZXRWYXJzT25Ob2RlKG5vZGUsIHZhcnMpKTtcbiAgICB9KTtcbiAgICBjb25zdCBzZXRWYXJzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB2YXJzID0gZ2V0dGVyKGluc3RhbmNlLnByb3h5KTtcbiAgICAgICAgc2V0VmFyc09uVk5vZGUoaW5zdGFuY2Uuc3ViVHJlZSwgdmFycyk7XG4gICAgICAgIHVwZGF0ZVRlbGVwb3J0cyh2YXJzKTtcbiAgICB9O1xuICAgIHdhdGNoUG9zdEVmZmVjdChzZXRWYXJzKTtcbiAgICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgICAgICBjb25zdCBvYiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHNldFZhcnMpO1xuICAgICAgICBvYi5vYnNlcnZlKGluc3RhbmNlLnN1YlRyZWUuZWwucGFyZW50Tm9kZSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG4gICAgICAgIG9uVW5tb3VudGVkKCgpID0+IG9iLmRpc2Nvbm5lY3QoKSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBzZXRWYXJzT25WTm9kZSh2bm9kZSwgdmFycykge1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlO1xuICAgICAgICB2bm9kZSA9IHN1c3BlbnNlLmFjdGl2ZUJyYW5jaDtcbiAgICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggJiYgIXN1c3BlbnNlLmlzSHlkcmF0aW5nKSB7XG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFZhcnNPblZOb2RlKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgdmFycyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBkcmlsbCBkb3duIEhPQ3MgdW50aWwgaXQncyBhIG5vbi1jb21wb25lbnQgdm5vZGVcbiAgICB3aGlsZSAodm5vZGUuY29tcG9uZW50KSB7XG4gICAgICAgIHZub2RlID0gdm5vZGUuY29tcG9uZW50LnN1YlRyZWU7XG4gICAgfVxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJiB2bm9kZS5lbCkge1xuICAgICAgICBzZXRWYXJzT25Ob2RlKHZub2RlLmVsLCB2YXJzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodm5vZGUudHlwZSA9PT0gRnJhZ21lbnQpIHtcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjID0+IHNldFZhcnNPblZOb2RlKGMsIHZhcnMpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodm5vZGUudHlwZSA9PT0gU3RhdGljKSB7XG4gICAgICAgIGxldCB7IGVsLCBhbmNob3IgfSA9IHZub2RlO1xuICAgICAgICB3aGlsZSAoZWwpIHtcbiAgICAgICAgICAgIHNldFZhcnNPbk5vZGUoZWwsIHZhcnMpO1xuICAgICAgICAgICAgaWYgKGVsID09PSBhbmNob3IpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBlbCA9IGVsLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0VmFyc09uTm9kZShlbCwgdmFycykge1xuICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB2YXJzKSB7XG4gICAgICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShgLS0ke2tleX1gLCB2YXJzW2tleV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBUUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xuY29uc3QgQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG4vLyBET00gVHJhbnNpdGlvbiBpcyBhIGhpZ2hlci1vcmRlci1jb21wb25lbnQgYmFzZWQgb24gdGhlIHBsYXRmb3JtLWFnbm9zdGljXG4vLyBiYXNlIFRyYW5zaXRpb24gY29tcG9uZW50LCB3aXRoIERPTS1zcGVjaWZpYyBsb2dpYy5cbmNvbnN0IFRyYW5zaXRpb24gPSAocHJvcHMsIHsgc2xvdHMgfSkgPT4gaChCYXNlVHJhbnNpdGlvbiwgcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhwcm9wcyksIHNsb3RzKTtcblRyYW5zaXRpb24uZGlzcGxheU5hbWUgPSAnVHJhbnNpdGlvbic7XG5jb25zdCBET01UcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzID0ge1xuICAgIG5hbWU6IFN0cmluZyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY3NzOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LFxuICAgIGR1cmF0aW9uOiBbU3RyaW5nLCBOdW1iZXIsIE9iamVjdF0sXG4gICAgZW50ZXJGcm9tQ2xhc3M6IFN0cmluZyxcbiAgICBlbnRlckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgZW50ZXJUb0NsYXNzOiBTdHJpbmcsXG4gICAgYXBwZWFyRnJvbUNsYXNzOiBTdHJpbmcsXG4gICAgYXBwZWFyQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgICBhcHBlYXJUb0NsYXNzOiBTdHJpbmcsXG4gICAgbGVhdmVGcm9tQ2xhc3M6IFN0cmluZyxcbiAgICBsZWF2ZUFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgbGVhdmVUb0NsYXNzOiBTdHJpbmdcbn07XG5jb25zdCBUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzID0gKFRyYW5zaXRpb24ucHJvcHMgPVxuICAgIC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCBCYXNlVHJhbnNpdGlvbi5wcm9wcywgRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycykpO1xuLyoqXG4gKiAjMzIyNyBJbmNvbWluZyBob29rcyBtYXkgYmUgbWVyZ2VkIGludG8gYXJyYXlzIHdoZW4gd3JhcHBpbmcgVHJhbnNpdGlvblxuICogd2l0aCBjdXN0b20gSE9Dcy5cbiAqL1xuY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncyA9IFtdKSA9PiB7XG4gICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgICAgaG9vay5mb3JFYWNoKGggPT4gaCguLi5hcmdzKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGhvb2spIHtcbiAgICAgICAgaG9vayguLi5hcmdzKTtcbiAgICB9XG59O1xuLyoqXG4gKiBDaGVjayBpZiBhIGhvb2sgZXhwZWN0cyBhIGNhbGxiYWNrICgybmQgYXJnKSwgd2hpY2ggbWVhbnMgdGhlIHVzZXJcbiAqIGludGVuZHMgdG8gZXhwbGljaXRseSBjb250cm9sIHRoZSBlbmQgb2YgdGhlIHRyYW5zaXRpb24uXG4gKi9cbmNvbnN0IGhhc0V4cGxpY2l0Q2FsbGJhY2sgPSAoaG9vaykgPT4ge1xuICAgIHJldHVybiBob29rXG4gICAgICAgID8gaXNBcnJheShob29rKVxuICAgICAgICAgICAgPyBob29rLnNvbWUoaCA9PiBoLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICA6IGhvb2subGVuZ3RoID4gMVxuICAgICAgICA6IGZhbHNlO1xufTtcbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocmF3UHJvcHMpIHtcbiAgICBjb25zdCBiYXNlUHJvcHMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdQcm9wcykge1xuICAgICAgICBpZiAoIShrZXkgaW4gRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycykpIHtcbiAgICAgICAgICAgIGJhc2VQcm9wc1trZXldID0gcmF3UHJvcHNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmF3UHJvcHMuY3NzID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gYmFzZVByb3BzO1xuICAgIH1cbiAgICBjb25zdCB7IG5hbWUgPSAndicsIHR5cGUsIGR1cmF0aW9uLCBlbnRlckZyb21DbGFzcyA9IGAke25hbWV9LWVudGVyLWZyb21gLCBlbnRlckFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tZW50ZXItYWN0aXZlYCwgZW50ZXJUb0NsYXNzID0gYCR7bmFtZX0tZW50ZXItdG9gLCBhcHBlYXJGcm9tQ2xhc3MgPSBlbnRlckZyb21DbGFzcywgYXBwZWFyQWN0aXZlQ2xhc3MgPSBlbnRlckFjdGl2ZUNsYXNzLCBhcHBlYXJUb0NsYXNzID0gZW50ZXJUb0NsYXNzLCBsZWF2ZUZyb21DbGFzcyA9IGAke25hbWV9LWxlYXZlLWZyb21gLCBsZWF2ZUFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tbGVhdmUtYWN0aXZlYCwgbGVhdmVUb0NsYXNzID0gYCR7bmFtZX0tbGVhdmUtdG9gIH0gPSByYXdQcm9wcztcbiAgICBjb25zdCBkdXJhdGlvbnMgPSBub3JtYWxpemVEdXJhdGlvbihkdXJhdGlvbik7XG4gICAgY29uc3QgZW50ZXJEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMF07XG4gICAgY29uc3QgbGVhdmVEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMV07XG4gICAgY29uc3QgeyBvbkJlZm9yZUVudGVyLCBvbkVudGVyLCBvbkVudGVyQ2FuY2VsbGVkLCBvbkxlYXZlLCBvbkxlYXZlQ2FuY2VsbGVkLCBvbkJlZm9yZUFwcGVhciA9IG9uQmVmb3JlRW50ZXIsIG9uQXBwZWFyID0gb25FbnRlciwgb25BcHBlYXJDYW5jZWxsZWQgPSBvbkVudGVyQ2FuY2VsbGVkIH0gPSBiYXNlUHJvcHM7XG4gICAgY29uc3QgZmluaXNoRW50ZXIgPSAoZWwsIGlzQXBwZWFyLCBkb25lKSA9PiB7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckFjdGl2ZUNsYXNzIDogZW50ZXJBY3RpdmVDbGFzcyk7XG4gICAgICAgIGRvbmUgJiYgZG9uZSgpO1xuICAgIH07XG4gICAgY29uc3QgZmluaXNoTGVhdmUgPSAoZWwsIGRvbmUpID0+IHtcbiAgICAgICAgZWwuX2lzTGVhdmluZyA9IGZhbHNlO1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgICAgICBkb25lICYmIGRvbmUoKTtcbiAgICB9O1xuICAgIGNvbnN0IG1ha2VFbnRlckhvb2sgPSAoaXNBcHBlYXIpID0+IHtcbiAgICAgICAgcmV0dXJuIChlbCwgZG9uZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaG9vayA9IGlzQXBwZWFyID8gb25BcHBlYXIgOiBvbkVudGVyO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaEVudGVyKGVsLCBpc0FwcGVhciwgZG9uZSk7XG4gICAgICAgICAgICBjYWxsSG9vayhob29rLCBbZWwsIHJlc29sdmVdKTtcbiAgICAgICAgICAgIG5leHRGcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckZyb21DbGFzcyA6IGVudGVyRnJvbUNsYXNzKTtcbiAgICAgICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyVG9DbGFzcyA6IGVudGVyVG9DbGFzcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNFeHBsaWNpdENhbGxiYWNrKGhvb2spKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgZW50ZXJEdXJhdGlvbiwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gZXh0ZW5kKGJhc2VQcm9wcywge1xuICAgICAgICBvbkJlZm9yZUVudGVyKGVsKSB7XG4gICAgICAgICAgICBjYWxsSG9vayhvbkJlZm9yZUVudGVyLCBbZWxdKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgZW50ZXJGcm9tQ2xhc3MpO1xuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBlbnRlckFjdGl2ZUNsYXNzKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25CZWZvcmVBcHBlYXIoZWwpIHtcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlQXBwZWFyLCBbZWxdKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYXBwZWFyRnJvbUNsYXNzKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYXBwZWFyQWN0aXZlQ2xhc3MpO1xuICAgICAgICB9LFxuICAgICAgICBvbkVudGVyOiBtYWtlRW50ZXJIb29rKGZhbHNlKSxcbiAgICAgICAgb25BcHBlYXI6IG1ha2VFbnRlckhvb2sodHJ1ZSksXG4gICAgICAgIG9uTGVhdmUoZWwsIGRvbmUpIHtcbiAgICAgICAgICAgIGVsLl9pc0xlYXZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaExlYXZlKGVsLCBkb25lKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVGcm9tQ2xhc3MpO1xuICAgICAgICAgICAgLy8gZm9yY2UgcmVmbG93IHNvICotbGVhdmUtZnJvbSBjbGFzc2VzIGltbWVkaWF0ZWx5IHRha2UgZWZmZWN0ICgjMjU5MylcbiAgICAgICAgICAgIGZvcmNlUmVmbG93KCk7XG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgICAgbmV4dEZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsLl9pc0xlYXZpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FuY2VsbGVkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhvbkxlYXZlKSkge1xuICAgICAgICAgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGxlYXZlRHVyYXRpb24sIHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FsbEhvb2sob25MZWF2ZSwgW2VsLCByZXNvbHZlXSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgICAgICAgIGZpbmlzaEVudGVyKGVsLCBmYWxzZSk7XG4gICAgICAgICAgICBjYWxsSG9vayhvbkVudGVyQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25BcHBlYXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgICAgICAgIGZpbmlzaEVudGVyKGVsLCB0cnVlKTtcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQXBwZWFyQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25MZWF2ZUNhbmNlbGxlZChlbCkge1xuICAgICAgICAgICAgZmluaXNoTGVhdmUoZWwpO1xuICAgICAgICAgICAgY2FsbEhvb2sob25MZWF2ZUNhbmNlbGxlZCwgW2VsXSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKSB7XG4gICAgaWYgKGR1cmF0aW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KGR1cmF0aW9uKSkge1xuICAgICAgICByZXR1cm4gW051bWJlck9mKGR1cmF0aW9uLmVudGVyKSwgTnVtYmVyT2YoZHVyYXRpb24ubGVhdmUpXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG4gPSBOdW1iZXJPZihkdXJhdGlvbik7XG4gICAgICAgIHJldHVybiBbbiwgbl07XG4gICAgfVxufVxuZnVuY3Rpb24gTnVtYmVyT2YodmFsKSB7XG4gICAgY29uc3QgcmVzID0gdG9OdW1iZXIodmFsKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKVxuICAgICAgICB2YWxpZGF0ZUR1cmF0aW9uKHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlRHVyYXRpb24odmFsKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHdhcm4oYDx0cmFuc2l0aW9uPiBleHBsaWNpdCBkdXJhdGlvbiBpcyBub3QgYSB2YWxpZCBudW1iZXIgLSBgICtcbiAgICAgICAgICAgIGBnb3QgJHtKU09OLnN0cmluZ2lmeSh2YWwpfS5gKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNOYU4odmFsKSkge1xuICAgICAgICB3YXJuKGA8dHJhbnNpdGlvbj4gZXhwbGljaXQgZHVyYXRpb24gaXMgTmFOIC0gYCArXG4gICAgICAgICAgICAndGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgY2xzKSB7XG4gICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgZWwuY2xhc3NMaXN0LmFkZChjKSk7XG4gICAgKGVsLl92dGMgfHxcbiAgICAgICAgKGVsLl92dGMgPSBuZXcgU2V0KCkpKS5hZGQoY2xzKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgY2xzKSB7XG4gICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgZWwuY2xhc3NMaXN0LnJlbW92ZShjKSk7XG4gICAgY29uc3QgeyBfdnRjIH0gPSBlbDtcbiAgICBpZiAoX3Z0Yykge1xuICAgICAgICBfdnRjLmRlbGV0ZShjbHMpO1xuICAgICAgICBpZiAoIV92dGMuc2l6ZSkge1xuICAgICAgICAgICAgZWwuX3Z0YyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIG5leHRGcmFtZShjYikge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gICAgfSk7XG59XG5sZXQgZW5kSWQgPSAwO1xuZnVuY3Rpb24gd2hlblRyYW5zaXRpb25FbmRzKGVsLCBleHBlY3RlZFR5cGUsIGV4cGxpY2l0VGltZW91dCwgcmVzb2x2ZSkge1xuICAgIGNvbnN0IGlkID0gKGVsLl9lbmRJZCA9ICsrZW5kSWQpO1xuICAgIGNvbnN0IHJlc29sdmVJZk5vdFN0YWxlID0gKCkgPT4ge1xuICAgICAgICBpZiAoaWQgPT09IGVsLl9lbmRJZCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoZXhwbGljaXRUaW1lb3V0KSB7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHJlc29sdmVJZk5vdFN0YWxlLCBleHBsaWNpdFRpbWVvdXQpO1xuICAgIH1cbiAgICBjb25zdCB7IHR5cGUsIHRpbWVvdXQsIHByb3BDb3VudCB9ID0gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSk7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgfVxuICAgIGNvbnN0IGVuZEV2ZW50ID0gdHlwZSArICdlbmQnO1xuICAgIGxldCBlbmRlZCA9IDA7XG4gICAgY29uc3QgZW5kID0gKCkgPT4ge1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XG4gICAgICAgIHJlc29sdmVJZk5vdFN0YWxlKCk7XG4gICAgfTtcbiAgICBjb25zdCBvbkVuZCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gZWwgJiYgKytlbmRlZCA+PSBwcm9wQ291bnQpIHtcbiAgICAgICAgICAgIGVuZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKGVuZGVkIDwgcHJvcENvdW50KSB7XG4gICAgICAgICAgICBlbmQoKTtcbiAgICAgICAgfVxuICAgIH0sIHRpbWVvdXQgKyAxKTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XG59XG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKSB7XG4gICAgY29uc3Qgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICAgIC8vIEpTRE9NIG1heSByZXR1cm4gdW5kZWZpbmVkIGZvciB0cmFuc2l0aW9uIHByb3BlcnRpZXNcbiAgICBjb25zdCBnZXRTdHlsZVByb3BlcnRpZXMgPSAoa2V5KSA9PiAoc3R5bGVzW2tleV0gfHwgJycpLnNwbGl0KCcsICcpO1xuICAgIGNvbnN0IHRyYW5zaXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1EZWxheWApO1xuICAgIGNvbnN0IHRyYW5zaXRpb25EdXJhdGlvbnMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1EdXJhdGlvbmApO1xuICAgIGNvbnN0IHRyYW5zaXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dCh0cmFuc2l0aW9uRGVsYXlzLCB0cmFuc2l0aW9uRHVyYXRpb25zKTtcbiAgICBjb25zdCBhbmltYXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7QU5JTUFUSU9OfURlbGF5YCk7XG4gICAgY29uc3QgYW5pbWF0aW9uRHVyYXRpb25zID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke0FOSU1BVElPTn1EdXJhdGlvbmApO1xuICAgIGNvbnN0IGFuaW1hdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KGFuaW1hdGlvbkRlbGF5cywgYW5pbWF0aW9uRHVyYXRpb25zKTtcbiAgICBsZXQgdHlwZSA9IG51bGw7XG4gICAgbGV0IHRpbWVvdXQgPSAwO1xuICAgIGxldCBwcm9wQ291bnQgPSAwO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChleHBlY3RlZFR5cGUgPT09IFRSQU5TSVRJT04pIHtcbiAgICAgICAgaWYgKHRyYW5zaXRpb25UaW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgdHlwZSA9IFRSQU5TSVRJT047XG4gICAgICAgICAgICB0aW1lb3V0ID0gdHJhbnNpdGlvblRpbWVvdXQ7XG4gICAgICAgICAgICBwcm9wQ291bnQgPSB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IEFOSU1BVElPTikge1xuICAgICAgICBpZiAoYW5pbWF0aW9uVGltZW91dCA+IDApIHtcbiAgICAgICAgICAgIHR5cGUgPSBBTklNQVRJT047XG4gICAgICAgICAgICB0aW1lb3V0ID0gYW5pbWF0aW9uVGltZW91dDtcbiAgICAgICAgICAgIHByb3BDb3VudCA9IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBNYXRoLm1heCh0cmFuc2l0aW9uVGltZW91dCwgYW5pbWF0aW9uVGltZW91dCk7XG4gICAgICAgIHR5cGUgPVxuICAgICAgICAgICAgdGltZW91dCA+IDBcbiAgICAgICAgICAgICAgICA/IHRyYW5zaXRpb25UaW1lb3V0ID4gYW5pbWF0aW9uVGltZW91dFxuICAgICAgICAgICAgICAgICAgICA/IFRSQU5TSVRJT05cbiAgICAgICAgICAgICAgICAgICAgOiBBTklNQVRJT05cbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHByb3BDb3VudCA9IHR5cGVcbiAgICAgICAgICAgID8gdHlwZSA9PT0gVFJBTlNJVElPTlxuICAgICAgICAgICAgICAgID8gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGhcbiAgICAgICAgICAgICAgICA6IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGhcbiAgICAgICAgICAgIDogMDtcbiAgICB9XG4gICAgY29uc3QgaGFzVHJhbnNmb3JtID0gdHlwZSA9PT0gVFJBTlNJVElPTiAmJlxuICAgICAgICAvXFxiKHRyYW5zZm9ybXxhbGwpKCx8JCkvLnRlc3QoZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke1RSQU5TSVRJT059UHJvcGVydHlgKS50b1N0cmluZygpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlLFxuICAgICAgICB0aW1lb3V0LFxuICAgICAgICBwcm9wQ291bnQsXG4gICAgICAgIGhhc1RyYW5zZm9ybVxuICAgIH07XG59XG5mdW5jdGlvbiBnZXRUaW1lb3V0KGRlbGF5cywgZHVyYXRpb25zKSB7XG4gICAgd2hpbGUgKGRlbGF5cy5sZW5ndGggPCBkdXJhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KC4uLmR1cmF0aW9ucy5tYXAoKGQsIGkpID0+IHRvTXMoZCkgKyB0b01zKGRlbGF5c1tpXSkpKTtcbn1cbi8vIE9sZCB2ZXJzaW9ucyBvZiBDaHJvbWl1bSAoYmVsb3cgNjEuMC4zMTYzLjEwMCkgZm9ybWF0cyBmbG9hdGluZyBwb2ludGVyXG4vLyBudW1iZXJzIGluIGEgbG9jYWxlLWRlcGVuZGVudCB3YXksIHVzaW5nIGEgY29tbWEgaW5zdGVhZCBvZiBhIGRvdC5cbi8vIElmIGNvbW1hIGlzIG5vdCByZXBsYWNlZCB3aXRoIGEgZG90LCB0aGUgaW5wdXQgd2lsbCBiZSByb3VuZGVkIGRvd25cbi8vIChpLmUuIGFjdGluZyBhcyBhIGZsb29yIGZ1bmN0aW9uKSBjYXVzaW5nIHVuZXhwZWN0ZWQgYmVoYXZpb3JzXG5mdW5jdGlvbiB0b01zKHMpIHtcbiAgICByZXR1cm4gTnVtYmVyKHMuc2xpY2UoMCwgLTEpLnJlcGxhY2UoJywnLCAnLicpKSAqIDEwMDA7XG59XG4vLyBzeW5jaHJvbm91c2x5IGZvcmNlIGxheW91dCB0byBwdXQgZWxlbWVudHMgaW50byBhIGNlcnRhaW4gc3RhdGVcbmZ1bmN0aW9uIGZvcmNlUmVmbG93KCkge1xuICAgIHJldHVybiBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDtcbn1cblxuY29uc3QgcG9zaXRpb25NYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgbmV3UG9zaXRpb25NYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgVHJhbnNpdGlvbkdyb3VwSW1wbCA9IHtcbiAgICBuYW1lOiAnVHJhbnNpdGlvbkdyb3VwJyxcbiAgICBwcm9wczogLyojX19QVVJFX18qLyBleHRlbmQoe30sIFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsIHtcbiAgICAgICAgdGFnOiBTdHJpbmcsXG4gICAgICAgIG1vdmVDbGFzczogU3RyaW5nXG4gICAgfSksXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xuICAgICAgICBsZXQgcHJldkNoaWxkcmVuO1xuICAgICAgICBsZXQgY2hpbGRyZW47XG4gICAgICAgIG9uVXBkYXRlZCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBjaGlsZHJlbiBpcyBndWFyYW50ZWVkIHRvIGV4aXN0IGFmdGVyIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAgICBpZiAoIXByZXZDaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtb3ZlQ2xhc3MgPSBwcm9wcy5tb3ZlQ2xhc3MgfHwgYCR7cHJvcHMubmFtZSB8fCAndid9LW1vdmVgO1xuICAgICAgICAgICAgaWYgKCFoYXNDU1NUcmFuc2Zvcm0ocHJldkNoaWxkcmVuWzBdLmVsLCBpbnN0YW5jZS52bm9kZS5lbCwgbW92ZUNsYXNzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIGRpdmlkZSB0aGUgd29yayBpbnRvIHRocmVlIGxvb3BzIHRvIGF2b2lkIG1peGluZyBET00gcmVhZHMgYW5kIHdyaXRlc1xuICAgICAgICAgICAgLy8gaW4gZWFjaCBpdGVyYXRpb24gLSB3aGljaCBoZWxwcyBwcmV2ZW50IGxheW91dCB0aHJhc2hpbmcuXG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChjYWxsUGVuZGluZ0Nicyk7XG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7XG4gICAgICAgICAgICBjb25zdCBtb3ZlZENoaWxkcmVuID0gcHJldkNoaWxkcmVuLmZpbHRlcihhcHBseVRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgIC8vIGZvcmNlIHJlZmxvdyB0byBwdXQgZXZlcnl0aGluZyBpbiBwb3NpdGlvblxuICAgICAgICAgICAgZm9yY2VSZWZsb3coKTtcbiAgICAgICAgICAgIG1vdmVkQ2hpbGRyZW4uZm9yRWFjaChjID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGMuZWw7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICAgICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgc3R5bGUudHJhbnNmb3JtID0gc3R5bGUud2Via2l0VHJhbnNmb3JtID0gc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgY2IgPSAoZWwuX21vdmVDYiA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlICYmIGUudGFyZ2V0ICE9PSBlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZSB8fCAvdHJhbnNmb3JtJC8udGVzdChlLnByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBjYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBjYik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByYXdQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgICAgICAgICAgIGNvbnN0IGNzc1RyYW5zaXRpb25Qcm9wcyA9IHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocmF3UHJvcHMpO1xuICAgICAgICAgICAgbGV0IHRhZyA9IHJhd1Byb3BzLnRhZyB8fCBGcmFnbWVudDtcbiAgICAgICAgICAgIHByZXZDaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICAgICAgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ID8gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKHNsb3RzLmRlZmF1bHQoKSkgOiBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5rZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoY2hpbGQsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoY2hpbGQsIGNzc1RyYW5zaXRpb25Qcm9wcywgc3RhdGUsIGluc3RhbmNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGA8VHJhbnNpdGlvbkdyb3VwPiBjaGlsZHJlbiBtdXN0IGJlIGtleWVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IHByZXZDaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKGNoaWxkLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKGNoaWxkLCBjc3NUcmFuc2l0aW9uUHJvcHMsIHN0YXRlLCBpbnN0YW5jZSkpO1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbk1hcC5zZXQoY2hpbGQsIGNoaWxkLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodGFnLCBudWxsLCBjaGlsZHJlbik7XG4gICAgICAgIH07XG4gICAgfVxufTtcbmNvbnN0IFRyYW5zaXRpb25Hcm91cCA9IFRyYW5zaXRpb25Hcm91cEltcGw7XG5mdW5jdGlvbiBjYWxsUGVuZGluZ0NicyhjKSB7XG4gICAgY29uc3QgZWwgPSBjLmVsO1xuICAgIGlmIChlbC5fbW92ZUNiKSB7XG4gICAgICAgIGVsLl9tb3ZlQ2IoKTtcbiAgICB9XG4gICAgaWYgKGVsLl9lbnRlckNiKSB7XG4gICAgICAgIGVsLl9lbnRlckNiKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVjb3JkUG9zaXRpb24oYykge1xuICAgIG5ld1Bvc2l0aW9uTWFwLnNldChjLCBjLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbn1cbmZ1bmN0aW9uIGFwcGx5VHJhbnNsYXRpb24oYykge1xuICAgIGNvbnN0IG9sZFBvcyA9IHBvc2l0aW9uTWFwLmdldChjKTtcbiAgICBjb25zdCBuZXdQb3MgPSBuZXdQb3NpdGlvbk1hcC5nZXQoYyk7XG4gICAgY29uc3QgZHggPSBvbGRQb3MubGVmdCAtIG5ld1Bvcy5sZWZ0O1xuICAgIGNvbnN0IGR5ID0gb2xkUG9zLnRvcCAtIG5ld1Bvcy50b3A7XG4gICAgaWYgKGR4IHx8IGR5KSB7XG4gICAgICAgIGNvbnN0IHMgPSBjLmVsLnN0eWxlO1xuICAgICAgICBzLnRyYW5zZm9ybSA9IHMud2Via2l0VHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke2R4fXB4LCR7ZHl9cHgpYDtcbiAgICAgICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMnO1xuICAgICAgICByZXR1cm4gYztcbiAgICB9XG59XG5mdW5jdGlvbiBoYXNDU1NUcmFuc2Zvcm0oZWwsIHJvb3QsIG1vdmVDbGFzcykge1xuICAgIC8vIERldGVjdCB3aGV0aGVyIGFuIGVsZW1lbnQgd2l0aCB0aGUgbW92ZSBjbGFzcyBhcHBsaWVkIGhhc1xuICAgIC8vIENTUyB0cmFuc2l0aW9ucy4gU2luY2UgdGhlIGVsZW1lbnQgbWF5IGJlIGluc2lkZSBhbiBlbnRlcmluZ1xuICAgIC8vIHRyYW5zaXRpb24gYXQgdGhpcyB2ZXJ5IG1vbWVudCwgd2UgbWFrZSBhIGNsb25lIG9mIGl0IGFuZCByZW1vdmVcbiAgICAvLyBhbGwgb3RoZXIgdHJhbnNpdGlvbiBjbGFzc2VzIGFwcGxpZWQgdG8gZW5zdXJlIG9ubHkgdGhlIG1vdmUgY2xhc3NcbiAgICAvLyBpcyBhcHBsaWVkLlxuICAgIGNvbnN0IGNsb25lID0gZWwuY2xvbmVOb2RlKCk7XG4gICAgaWYgKGVsLl92dGMpIHtcbiAgICAgICAgZWwuX3Z0Yy5mb3JFYWNoKGNscyA9PiB7XG4gICAgICAgICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGMgPT4gYyAmJiBjbG9uZS5jbGFzc0xpc3QucmVtb3ZlKGMpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1vdmVDbGFzcy5zcGxpdCgvXFxzKy8pLmZvckVhY2goYyA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5hZGQoYykpO1xuICAgIGNsb25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgY29uc3QgY29udGFpbmVyID0gKHJvb3Qubm9kZVR5cGUgPT09IDEgPyByb290IDogcm9vdC5wYXJlbnROb2RlKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICAgIGNvbnN0IHsgaGFzVHJhbnNmb3JtIH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhjbG9uZSk7XG4gICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNsb25lKTtcbiAgICByZXR1cm4gaGFzVHJhbnNmb3JtO1xufVxuXG5jb25zdCBnZXRNb2RlbEFzc2lnbmVyID0gKHZub2RlKSA9PiB7XG4gICAgY29uc3QgZm4gPSB2bm9kZS5wcm9wc1snb25VcGRhdGU6bW9kZWxWYWx1ZSddIHx8XG4gICAgICAgIChmYWxzZSApO1xuICAgIHJldHVybiBpc0FycmF5KGZuKSA/IHZhbHVlID0+IGludm9rZUFycmF5Rm5zKGZuLCB2YWx1ZSkgOiBmbjtcbn07XG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQoZSkge1xuICAgIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7XG59XG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kKGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICBpZiAodGFyZ2V0LmNvbXBvc2luZykge1xuICAgICAgICB0YXJnZXQuY29tcG9zaW5nID0gZmFsc2U7XG4gICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgfVxufVxuLy8gV2UgYXJlIGV4cG9ydGluZyB0aGUgdi1tb2RlbCBydW50aW1lIGRpcmVjdGx5IGFzIHZub2RlIGhvb2tzIHNvIHRoYXQgaXQgY2FuXG4vLyBiZSB0cmVlLXNoYWtlbiBpbiBjYXNlIHYtbW9kZWwgaXMgbmV2ZXIgdXNlZC5cbmNvbnN0IHZNb2RlbFRleHQgPSB7XG4gICAgY3JlYXRlZChlbCwgeyBtb2RpZmllcnM6IHsgbGF6eSwgdHJpbSwgbnVtYmVyIH0gfSwgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBjb25zdCBjYXN0VG9OdW1iZXIgPSBudW1iZXIgfHwgKHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGUgPT09ICdudW1iZXInKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgbGF6eSA/ICdjaGFuZ2UnIDogJ2lucHV0JywgZSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY29tcG9zaW5nKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBkb21WYWx1ZSA9IGVsLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRyaW0pIHtcbiAgICAgICAgICAgICAgICBkb21WYWx1ZSA9IGRvbVZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYXN0VG9OdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBkb21WYWx1ZSA9IHRvTnVtYmVyKGRvbVZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsLl9hc3NpZ24oZG9tVmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRyaW0pIHtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZWwudmFsdWUgPSBlbC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjb21wb3NpdGlvbnN0YXJ0Jywgb25Db21wb3NpdGlvblN0YXJ0KTtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjb21wb3NpdGlvbmVuZCcsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgICAgICAgICAgLy8gU2FmYXJpIDwgMTAuMiAmIFVJV2ViVmlldyBkb2Vzbid0IGZpcmUgY29tcG9zaXRpb25lbmQgd2hlblxuICAgICAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZVxuICAgICAgICAgICAgLy8gdGhpcyBhbHNvIGZpeGVzIHRoZSBpc3N1ZSB3aGVyZSBzb21lIGJyb3dzZXJzIGUuZy4gaU9TIENocm9tZVxuICAgICAgICAgICAgLy8gZmlyZXMgXCJjaGFuZ2VcIiBpbnN0ZWFkIG9mIFwiaW5wdXRcIiBvbiBhdXRvY29tcGxldGUuXG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgb25Db21wb3NpdGlvbkVuZCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8vIHNldCB2YWx1ZSBvbiBtb3VudGVkIHNvIGl0J3MgYWZ0ZXIgbWluL21heCBmb3IgdHlwZT1cInJhbmdlXCJcbiAgICBtb3VudGVkKGVsLCB7IHZhbHVlIH0pIHtcbiAgICAgICAgZWwudmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICB9LFxuICAgIGJlZm9yZVVwZGF0ZShlbCwgeyB2YWx1ZSwgbW9kaWZpZXJzOiB7IGxhenksIHRyaW0sIG51bWJlciB9IH0sIHZub2RlKSB7XG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICAgICAgLy8gYXZvaWQgY2xlYXJpbmcgdW5yZXNvbHZlZCB0ZXh0LiAjMjMwMlxuICAgICAgICBpZiAoZWwuY29tcG9zaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWwgJiYgZWwudHlwZSAhPT0gJ3JhbmdlJykge1xuICAgICAgICAgICAgaWYgKGxhenkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJpbSAmJiBlbC52YWx1ZS50cmltKCkgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChudW1iZXIgfHwgZWwudHlwZSA9PT0gJ251bWJlcicpICYmIHRvTnVtYmVyKGVsLnZhbHVlKSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICAgICAgaWYgKGVsLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZWwudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCB2TW9kZWxDaGVja2JveCA9IHtcbiAgICAvLyAjNDA5NiBhcnJheSBjaGVja2JveGVzIG5lZWQgdG8gYmUgZGVlcCB0cmF2ZXJzZWRcbiAgICBkZWVwOiB0cnVlLFxuICAgIGNyZWF0ZWQoZWwsIF8sIHZub2RlKSB7XG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsVmFsdWUgPSBlbC5fbW9kZWxWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRWYWx1ZSA9IGdldFZhbHVlKGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbC5jaGVja2VkO1xuICAgICAgICAgICAgY29uc3QgYXNzaWduID0gZWwuX2Fzc2lnbjtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KG1vZGVsVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsb29zZUluZGV4T2YobW9kZWxWYWx1ZSwgZWxlbWVudFZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZCA9IGluZGV4ICE9PSAtMTtcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCAmJiAhZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKG1vZGVsVmFsdWUuY29uY2F0KGVsZW1lbnRWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghY2hlY2tlZCAmJiBmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IFsuLi5tb2RlbFZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKGZpbHRlcmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1NldChtb2RlbFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lZCA9IG5ldyBTZXQobW9kZWxWYWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVkLmFkZChlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVkLmRlbGV0ZShlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhc3NpZ24oY2xvbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzc2lnbihnZXRDaGVja2JveFZhbHVlKGVsLCBjaGVja2VkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc2V0IGluaXRpYWwgY2hlY2tlZCBvbiBtb3VudCB0byB3YWl0IGZvciB0cnVlLXZhbHVlL2ZhbHNlLXZhbHVlXG4gICAgbW91bnRlZDogc2V0Q2hlY2tlZCxcbiAgICBiZWZvcmVVcGRhdGUoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICAgICAgc2V0Q2hlY2tlZChlbCwgYmluZGluZywgdm5vZGUpO1xuICAgIH1cbn07XG5mdW5jdGlvbiBzZXRDaGVja2VkKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB2bm9kZSkge1xuICAgIGVsLl9tb2RlbFZhbHVlID0gdmFsdWU7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKSA+IC0xO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZ2V0Q2hlY2tib3hWYWx1ZShlbCwgdHJ1ZSkpO1xuICAgIH1cbn1cbmNvbnN0IHZNb2RlbFJhZGlvID0ge1xuICAgIGNyZWF0ZWQoZWwsIHsgdmFsdWUgfSwgdm5vZGUpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKTtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgZWwuX2Fzc2lnbihnZXRWYWx1ZShlbCkpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGJlZm9yZVVwZGF0ZShlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IHZNb2RlbFNlbGVjdCA9IHtcbiAgICAvLyA8c2VsZWN0IG11bHRpcGxlPiB2YWx1ZSBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXG4gICAgZGVlcDogdHJ1ZSxcbiAgICBjcmVhdGVkKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbnVtYmVyIH0gfSwgdm5vZGUpIHtcbiAgICAgICAgY29uc3QgaXNTZXRNb2RlbCA9IGlzU2V0KHZhbHVlKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlclxuICAgICAgICAgICAgICAgIC5jYWxsKGVsLm9wdGlvbnMsIChvKSA9PiBvLnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgIC5tYXAoKG8pID0+IG51bWJlciA/IHRvTnVtYmVyKGdldFZhbHVlKG8pKSA6IGdldFZhbHVlKG8pKTtcbiAgICAgICAgICAgIGVsLl9hc3NpZ24oZWwubXVsdGlwbGVcbiAgICAgICAgICAgICAgICA/IGlzU2V0TW9kZWxcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgU2V0KHNlbGVjdGVkVmFsKVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGVjdGVkVmFsXG4gICAgICAgICAgICAgICAgOiBzZWxlY3RlZFZhbFswXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgfSxcbiAgICAvLyBzZXQgdmFsdWUgaW4gbW91bnRlZCAmIHVwZGF0ZWQgYmVjYXVzZSA8c2VsZWN0PiByZWxpZXMgb24gaXRzIGNoaWxkcmVuXG4gICAgLy8gPG9wdGlvbj5zLlxuICAgIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgICAgICBzZXRTZWxlY3RlZChlbCwgdmFsdWUpO1xuICAgIH0sXG4gICAgYmVmb3JlVXBkYXRlKGVsLCBfYmluZGluZywgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIH0sXG4gICAgdXBkYXRlZChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgICAgIHNldFNlbGVjdGVkKGVsLCB2YWx1ZSk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNldFNlbGVjdGVkKGVsLCB2YWx1ZSkge1xuICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBlbC5tdWx0aXBsZTtcbiAgICBpZiAoaXNNdWx0aXBsZSAmJiAhaXNBcnJheSh2YWx1ZSkgJiYgIWlzU2V0KHZhbHVlKSkge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIHdhcm4oYDxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD4gZXhwZWN0cyBhbiBBcnJheSBvciBTZXQgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBgICtcbiAgICAgICAgICAgICAgICBgYnV0IGdvdCAke09iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpfS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IGVsLm9wdGlvbnNbaV07XG4gICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gZ2V0VmFsdWUob3B0aW9uKTtcbiAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgb3B0aW9uVmFsdWUpID4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB2YWx1ZS5oYXMob3B0aW9uVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxvb3NlRXF1YWwoZ2V0VmFsdWUob3B0aW9uKSwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsLnNlbGVjdGVkSW5kZXggIT09IGkpXG4gICAgICAgICAgICAgICAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzTXVsdGlwbGUgJiYgZWwuc2VsZWN0ZWRJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgIH1cbn1cbi8vIHJldHJpZXZlIHJhdyB2YWx1ZSBzZXQgdmlhIDp2YWx1ZSBiaW5kaW5nc1xuZnVuY3Rpb24gZ2V0VmFsdWUoZWwpIHtcbiAgICByZXR1cm4gJ192YWx1ZScgaW4gZWwgPyBlbC5fdmFsdWUgOiBlbC52YWx1ZTtcbn1cbi8vIHJldHJpZXZlIHJhdyB2YWx1ZSBmb3IgdHJ1ZS12YWx1ZSBhbmQgZmFsc2UtdmFsdWUgc2V0IHZpYSA6dHJ1ZS12YWx1ZSBvciA6ZmFsc2UtdmFsdWUgYmluZGluZ3NcbmZ1bmN0aW9uIGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpIHtcbiAgICBjb25zdCBrZXkgPSBjaGVja2VkID8gJ190cnVlVmFsdWUnIDogJ19mYWxzZVZhbHVlJztcbiAgICByZXR1cm4ga2V5IGluIGVsID8gZWxba2V5XSA6IGNoZWNrZWQ7XG59XG5jb25zdCB2TW9kZWxEeW5hbWljID0ge1xuICAgIGNyZWF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCAnY3JlYXRlZCcpO1xuICAgIH0sXG4gICAgbW91bnRlZChlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICAgICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIG51bGwsICdtb3VudGVkJyk7XG4gICAgfSxcbiAgICBiZWZvcmVVcGRhdGUoZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpIHtcbiAgICAgICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgJ2JlZm9yZVVwZGF0ZScpO1xuICAgIH0sXG4gICAgdXBkYXRlZChlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSkge1xuICAgICAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlLCAndXBkYXRlZCcpO1xuICAgIH1cbn07XG5mdW5jdGlvbiByZXNvbHZlRHluYW1pY01vZGVsKHRhZ05hbWUsIHR5cGUpIHtcbiAgICBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICAgICAgY2FzZSAnU0VMRUNUJzpcbiAgICAgICAgICAgIHJldHVybiB2TW9kZWxTZWxlY3Q7XG4gICAgICAgIGNhc2UgJ1RFWFRBUkVBJzpcbiAgICAgICAgICAgIHJldHVybiB2TW9kZWxUZXh0O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdk1vZGVsQ2hlY2tib3g7XG4gICAgICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdk1vZGVsUmFkaW87XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZNb2RlbFRleHQ7XG4gICAgICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgaG9vaykge1xuICAgIGNvbnN0IG1vZGVsVG9Vc2UgPSByZXNvbHZlRHluYW1pY01vZGVsKGVsLnRhZ05hbWUsIHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGUpO1xuICAgIGNvbnN0IGZuID0gbW9kZWxUb1VzZVtob29rXTtcbiAgICBmbiAmJiBmbihlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSk7XG59XG4vLyBTU1Igdm5vZGUgdHJhbnNmb3Jtcywgb25seSB1c2VkIHdoZW4gdXNlciBpbmNsdWRlcyBjbGllbnQtb3JpZW50ZWQgcmVuZGVyXG4vLyBmdW5jdGlvbiBpbiBTU1JcbmZ1bmN0aW9uIGluaXRWTW9kZWxGb3JTU1IoKSB7XG4gICAgdk1vZGVsVGV4dC5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+ICh7IHZhbHVlIH0pO1xuICAgIHZNb2RlbFJhZGlvLmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSwgdm5vZGUpID0+IHtcbiAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlRXF1YWwodm5vZGUucHJvcHMudmFsdWUsIHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2TW9kZWxDaGVja2JveC5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0sIHZub2RlKSA9PiB7XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTZXQodmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAodm5vZGUucHJvcHMgJiYgdmFsdWUuaGFzKHZub2RlLnByb3BzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2TW9kZWxEeW5hbWljLmdldFNTUlByb3BzID0gKGJpbmRpbmcsIHZub2RlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygdm5vZGUudHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbFRvVXNlID0gcmVzb2x2ZUR5bmFtaWNNb2RlbChcbiAgICAgICAgLy8gcmVzb2x2ZUR5bmFtaWNNb2RlbCBleHBlY3RzIGFuIHVwcGVyY2FzZSB0YWcgbmFtZSwgYnV0IHZub2RlLnR5cGUgaXMgbG93ZXJjYXNlXG4gICAgICAgIHZub2RlLnR5cGUudG9VcHBlckNhc2UoKSwgdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZSk7XG4gICAgICAgIGlmIChtb2RlbFRvVXNlLmdldFNTUlByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kZWxUb1VzZS5nZXRTU1JQcm9wcyhiaW5kaW5nLCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBzeXN0ZW1Nb2RpZmllcnMgPSBbJ2N0cmwnLCAnc2hpZnQnLCAnYWx0JywgJ21ldGEnXTtcbmNvbnN0IG1vZGlmaWVyR3VhcmRzID0ge1xuICAgIHN0b3A6IGUgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSxcbiAgICBwcmV2ZW50OiBlID0+IGUucHJldmVudERlZmF1bHQoKSxcbiAgICBzZWxmOiBlID0+IGUudGFyZ2V0ICE9PSBlLmN1cnJlbnRUYXJnZXQsXG4gICAgY3RybDogZSA9PiAhZS5jdHJsS2V5LFxuICAgIHNoaWZ0OiBlID0+ICFlLnNoaWZ0S2V5LFxuICAgIGFsdDogZSA9PiAhZS5hbHRLZXksXG4gICAgbWV0YTogZSA9PiAhZS5tZXRhS2V5LFxuICAgIGxlZnQ6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMCxcbiAgICBtaWRkbGU6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMSxcbiAgICByaWdodDogZSA9PiAnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uICE9PSAyLFxuICAgIGV4YWN0OiAoZSwgbW9kaWZpZXJzKSA9PiBzeXN0ZW1Nb2RpZmllcnMuc29tZShtID0+IGVbYCR7bX1LZXlgXSAmJiAhbW9kaWZpZXJzLmluY2x1ZGVzKG0pKVxufTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3Qgd2l0aE1vZGlmaWVycyA9IChmbiwgbW9kaWZpZXJzKSA9PiB7XG4gICAgcmV0dXJuIChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZ3VhcmQgPSBtb2RpZmllckd1YXJkc1ttb2RpZmllcnNbaV1dO1xuICAgICAgICAgICAgaWYgKGd1YXJkICYmIGd1YXJkKGV2ZW50LCBtb2RpZmllcnMpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm4oZXZlbnQsIC4uLmFyZ3MpO1xuICAgIH07XG59O1xuLy8gS2VwdCBmb3IgMi54IGNvbXBhdC5cbi8vIE5vdGU6IElFMTEgY29tcGF0IGZvciBgc3BhY2ViYXJgIGFuZCBgZGVsYCBpcyByZW1vdmVkIGZvciBub3cuXG5jb25zdCBrZXlOYW1lcyA9IHtcbiAgICBlc2M6ICdlc2NhcGUnLFxuICAgIHNwYWNlOiAnICcsXG4gICAgdXA6ICdhcnJvdy11cCcsXG4gICAgbGVmdDogJ2Fycm93LWxlZnQnLFxuICAgIHJpZ2h0OiAnYXJyb3ctcmlnaHQnLFxuICAgIGRvd246ICdhcnJvdy1kb3duJyxcbiAgICBkZWxldGU6ICdiYWNrc3BhY2UnXG59O1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCB3aXRoS2V5cyA9IChmbiwgbW9kaWZpZXJzKSA9PiB7XG4gICAgcmV0dXJuIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoISgna2V5JyBpbiBldmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudEtleSA9IGh5cGhlbmF0ZShldmVudC5rZXkpO1xuICAgICAgICBpZiAobW9kaWZpZXJzLnNvbWUoayA9PiBrID09PSBldmVudEtleSB8fCBrZXlOYW1lc1trXSA9PT0gZXZlbnRLZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbmNvbnN0IHZTaG93ID0ge1xuICAgIGJlZm9yZU1vdW50KGVsLCB7IHZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgICAgIGVsLl92b2QgPSBlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnJyA6IGVsLnN0eWxlLmRpc3BsYXk7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uICYmIHZhbHVlKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbW91bnRlZChlbCwgeyB2YWx1ZSB9LCB7IHRyYW5zaXRpb24gfSkge1xuICAgICAgICBpZiAodHJhbnNpdGlvbiAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVwZGF0ZWQoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgICAgIGlmICghdmFsdWUgPT09ICFvbGRWYWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgICAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5sZWF2ZShlbCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXREaXNwbGF5KGVsLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGJlZm9yZVVubW91bnQoZWwsIHsgdmFsdWUgfSkge1xuICAgICAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNldERpc3BsYXkoZWwsIHZhbHVlKSB7XG4gICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWwuX3ZvZCA6ICdub25lJztcbn1cbi8vIFNTUiB2bm9kZSB0cmFuc2Zvcm1zLCBvbmx5IHVzZWQgd2hlbiB1c2VyIGluY2x1ZGVzIGNsaWVudC1vcmllbnRlZCByZW5kZXJcbi8vIGZ1bmN0aW9uIGluIFNTUlxuZnVuY3Rpb24gaW5pdFZTaG93Rm9yU1NSKCkge1xuICAgIHZTaG93LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSkgPT4ge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdHlsZTogeyBkaXNwbGF5OiAnbm9uZScgfSB9O1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuY29uc3QgcmVuZGVyZXJPcHRpb25zID0gLyojX19QVVJFX18qLyBleHRlbmQoeyBwYXRjaFByb3AgfSwgbm9kZU9wcyk7XG4vLyBsYXp5IGNyZWF0ZSB0aGUgcmVuZGVyZXIgLSB0aGlzIG1ha2VzIGNvcmUgcmVuZGVyZXIgbG9naWMgdHJlZS1zaGFrYWJsZVxuLy8gaW4gY2FzZSB0aGUgdXNlciBvbmx5IGltcG9ydHMgcmVhY3Rpdml0eSB1dGlsaXRpZXMgZnJvbSBWdWUuXG5sZXQgcmVuZGVyZXI7XG5sZXQgZW5hYmxlZEh5ZHJhdGlvbiA9IGZhbHNlO1xuZnVuY3Rpb24gZW5zdXJlUmVuZGVyZXIoKSB7XG4gICAgcmV0dXJuIChyZW5kZXJlciB8fFxuICAgICAgICAocmVuZGVyZXIgPSBjcmVhdGVSZW5kZXJlcihyZW5kZXJlck9wdGlvbnMpKSk7XG59XG5mdW5jdGlvbiBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpIHtcbiAgICByZW5kZXJlciA9IGVuYWJsZWRIeWRyYXRpb25cbiAgICAgICAgPyByZW5kZXJlclxuICAgICAgICA6IGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyKHJlbmRlcmVyT3B0aW9ucyk7XG4gICAgZW5hYmxlZEh5ZHJhdGlvbiA9IHRydWU7XG4gICAgcmV0dXJuIHJlbmRlcmVyO1xufVxuLy8gdXNlIGV4cGxpY2l0IHR5cGUgY2FzdHMgaGVyZSB0byBhdm9pZCBpbXBvcnQoKSBjYWxscyBpbiByb2xsZWQtdXAgZC50c1xuY29uc3QgcmVuZGVyID0gKCguLi5hcmdzKSA9PiB7XG4gICAgZW5zdXJlUmVuZGVyZXIoKS5yZW5kZXIoLi4uYXJncyk7XG59KTtcbmNvbnN0IGh5ZHJhdGUgPSAoKC4uLmFyZ3MpID0+IHtcbiAgICBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpLmh5ZHJhdGUoLi4uYXJncyk7XG59KTtcbmNvbnN0IGNyZWF0ZUFwcCA9ICgoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IGFwcCA9IGVuc3VyZVJlbmRlcmVyKCkuY3JlYXRlQXBwKC4uLmFyZ3MpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKTtcbiAgICAgICAgaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKTtcbiAgICB9XG4gICAgY29uc3QgeyBtb3VudCB9ID0gYXBwO1xuICAgIGFwcC5tb3VudCA9IChjb250YWluZXJPclNlbGVjdG9yKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXJPclNlbGVjdG9yKTtcbiAgICAgICAgaWYgKCFjb250YWluZXIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGFwcC5fY29tcG9uZW50O1xuICAgICAgICBpZiAoIWlzRnVuY3Rpb24oY29tcG9uZW50KSAmJiAhY29tcG9uZW50LnJlbmRlciAmJiAhY29tcG9uZW50LnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAvLyBfX1VOU0FGRV9fXG4gICAgICAgICAgICAvLyBSZWFzb246IHBvdGVudGlhbCBleGVjdXRpb24gb2YgSlMgZXhwcmVzc2lvbnMgaW4gaW4tRE9NIHRlbXBsYXRlLlxuICAgICAgICAgICAgLy8gVGhlIHVzZXIgbXVzdCBtYWtlIHN1cmUgdGhlIGluLURPTSB0ZW1wbGF0ZSBpcyB0cnVzdGVkLiBJZiBpdCdzXG4gICAgICAgICAgICAvLyByZW5kZXJlZCBieSB0aGUgc2VydmVyLCB0aGUgdGVtcGxhdGUgc2hvdWxkIG5vdCBjb250YWluIGFueSB1c2VyIGRhdGEuXG4gICAgICAgICAgICBjb21wb25lbnQudGVtcGxhdGUgPSBjb250YWluZXIuaW5uZXJIVE1MO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNsZWFyIGNvbnRlbnQgYmVmb3JlIG1vdW50aW5nXG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgY29uc3QgcHJveHkgPSBtb3VudChjb250YWluZXIsIGZhbHNlLCBjb250YWluZXIgaW5zdGFuY2VvZiBTVkdFbGVtZW50KTtcbiAgICAgICAgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtdi1hcHAnLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3h5O1xuICAgIH07XG4gICAgcmV0dXJuIGFwcDtcbn0pO1xuY29uc3QgY3JlYXRlU1NSQXBwID0gKCguLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgYXBwID0gZW5zdXJlSHlkcmF0aW9uUmVuZGVyZXIoKS5jcmVhdGVBcHAoLi4uYXJncyk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApO1xuICAgICAgICBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApO1xuICAgIH1cbiAgICBjb25zdCB7IG1vdW50IH0gPSBhcHA7XG4gICAgYXBwLm1vdW50ID0gKGNvbnRhaW5lck9yU2VsZWN0b3IpID0+IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lck9yU2VsZWN0b3IpO1xuICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbW91bnQoY29udGFpbmVyLCB0cnVlLCBjb250YWluZXIgaW5zdGFuY2VvZiBTVkdFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGFwcDtcbn0pO1xuZnVuY3Rpb24gaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKSB7XG4gICAgLy8gSW5qZWN0IGBpc05hdGl2ZVRhZ2BcbiAgICAvLyB0aGlzIGlzIHVzZWQgZm9yIGNvbXBvbmVudCBuYW1lIHZhbGlkYXRpb24gKGRldiBvbmx5KVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCAnaXNOYXRpdmVUYWcnLCB7XG4gICAgICAgIHZhbHVlOiAodGFnKSA9PiBpc0hUTUxUYWcodGFnKSB8fCBpc1NWR1RhZyh0YWcpLFxuICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICB9KTtcbn1cbi8vIGRldiBvbmx5XG5mdW5jdGlvbiBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApIHtcbiAgICBpZiAoaXNSdW50aW1lT25seSgpKSB7XG4gICAgICAgIGNvbnN0IGlzQ3VzdG9tRWxlbWVudCA9IGFwcC5jb25maWcuaXNDdXN0b21FbGVtZW50O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgJ2lzQ3VzdG9tRWxlbWVudCcsIHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNDdXN0b21FbGVtZW50O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCgpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBUaGUgXFxgaXNDdXN0b21FbGVtZW50XFxgIGNvbmZpZyBvcHRpb24gaXMgZGVwcmVjYXRlZC4gVXNlIGAgK1xuICAgICAgICAgICAgICAgICAgICBgXFxgY29tcGlsZXJPcHRpb25zLmlzQ3VzdG9tRWxlbWVudFxcYCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29tcGlsZXJPcHRpb25zID0gYXBwLmNvbmZpZy5jb21waWxlck9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG1zZyA9IGBUaGUgXFxgY29tcGlsZXJPcHRpb25zXFxgIGNvbmZpZyBvcHRpb24gaXMgb25seSByZXNwZWN0ZWQgd2hlbiB1c2luZyBgICtcbiAgICAgICAgICAgIGBhIGJ1aWxkIG9mIFZ1ZS5qcyB0aGF0IGluY2x1ZGVzIHRoZSBydW50aW1lIGNvbXBpbGVyIChha2EgXCJmdWxsIGJ1aWxkXCIpLiBgICtcbiAgICAgICAgICAgIGBTaW5jZSB5b3UgYXJlIHVzaW5nIHRoZSBydW50aW1lLW9ubHkgYnVpbGQsIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBgICtcbiAgICAgICAgICAgIGBtdXN0IGJlIHBhc3NlZCB0byBcXGBAdnVlL2NvbXBpbGVyLWRvbVxcYCBpbiB0aGUgYnVpbGQgc2V0dXAgaW5zdGVhZC5cXG5gICtcbiAgICAgICAgICAgIGAtIEZvciB2dWUtbG9hZGVyOiBwYXNzIGl0IHZpYSB2dWUtbG9hZGVyJ3MgXFxgY29tcGlsZXJPcHRpb25zXFxgIGxvYWRlciBvcHRpb24uXFxuYCArXG4gICAgICAgICAgICBgLSBGb3IgdnVlLWNsaTogc2VlIGh0dHBzOi8vY2xpLnZ1ZWpzLm9yZy9ndWlkZS93ZWJwYWNrLmh0bWwjbW9kaWZ5aW5nLW9wdGlvbnMtb2YtYS1sb2FkZXJcXG5gICtcbiAgICAgICAgICAgIGAtIEZvciB2aXRlOiBwYXNzIGl0IHZpYSBAdml0ZWpzL3BsdWdpbi12dWUgb3B0aW9ucy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS90cmVlL21haW4vcGFja2FnZXMvcGx1Z2luLXZ1ZSNleGFtcGxlLWZvci1wYXNzaW5nLW9wdGlvbnMtdG8tdnVlY29tcGlsZXItZG9tYDtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsICdjb21waWxlck9wdGlvbnMnLCB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgd2Fybihtc2cpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlck9wdGlvbnM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KCkge1xuICAgICAgICAgICAgICAgIHdhcm4obXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lcikge1xuICAgIGlmIChpc1N0cmluZyhjb250YWluZXIpKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcmVzKSB7XG4gICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gbW91bnQgYXBwOiBtb3VudCB0YXJnZXQgc2VsZWN0b3IgXCIke2NvbnRhaW5lcn1cIiByZXR1cm5lZCBudWxsLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgd2luZG93LlNoYWRvd1Jvb3QgJiZcbiAgICAgICAgY29udGFpbmVyIGluc3RhbmNlb2Ygd2luZG93LlNoYWRvd1Jvb3QgJiZcbiAgICAgICAgY29udGFpbmVyLm1vZGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIHdhcm4oYG1vdW50aW5nIG9uIGEgU2hhZG93Um9vdCB3aXRoIFxcYHttb2RlOiBcImNsb3NlZFwifVxcYCBtYXkgbGVhZCB0byB1bnByZWRpY3RhYmxlIGJ1Z3NgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbn1cbmxldCBzc3JEaXJlY3RpdmVJbml0aWFsaXplZCA9IGZhbHNlO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgaW5pdERpcmVjdGl2ZXNGb3JTU1IgPSAoKSA9PiB7XG4gICAgICAgIGlmICghc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHNzckRpcmVjdGl2ZUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGluaXRWTW9kZWxGb3JTU1IoKTtcbiAgICAgICAgICAgIGluaXRWU2hvd0ZvclNTUigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIDtcblxuZXhwb3J0IHsgVHJhbnNpdGlvbiwgVHJhbnNpdGlvbkdyb3VwLCBWdWVFbGVtZW50LCBjcmVhdGVBcHAsIGNyZWF0ZVNTUkFwcCwgZGVmaW5lQ3VzdG9tRWxlbWVudCwgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudCwgaHlkcmF0ZSwgaW5pdERpcmVjdGl2ZXNGb3JTU1IsIHJlbmRlciwgdXNlQ3NzTW9kdWxlLCB1c2VDc3NWYXJzLCB2TW9kZWxDaGVja2JveCwgdk1vZGVsRHluYW1pYywgdk1vZGVsUmFkaW8sIHZNb2RlbFNlbGVjdCwgdk1vZGVsVGV4dCwgdlNob3csIHdpdGhLZXlzLCB3aXRoTW9kaWZpZXJzIH07XG4iLCJleHBvcnQgZnVuY3Rpb24gaW5qZWN0UHJvcCAodGFyZ2V0LCBwcm9wTmFtZSwgZ2V0LCBzZXQpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcE5hbWUsIHtcbiAgICBnZXQsXG4gICAgc2V0LFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSlcbiAgcmV0dXJuIHRhcmdldFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0TXVsdGlwbGVQcm9wcyAodGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgIGluamVjdFByb3AodGFyZ2V0LCBrZXksIHByb3BzWyBrZXkgXSlcbiAgfVxuICByZXR1cm4gdGFyZ2V0XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11c2VsZXNzLWVzY2FwZSAqL1xuXG5pbXBvcnQgeyByZWYsIHJlYWN0aXZlIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgaW5qZWN0UHJvcCB9IGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvaW5qZWN0LW9iai1wcm9wJ1xuXG4vKipcbiAqIF9fIFFVQVNBUl9TU1IgX18gICAgICAgICAgICAtPiBydW5zIG9uIFNTUiBvbiBjbGllbnQgb3Igc2VydmVyXG4gKiBfXyBRVUFTQVJfU1NSX1NFUlZFUiBfXyAgICAgLT4gcnVucyBvbiBTU1Igb24gc2VydmVyXG4gKiBfXyBRVUFTQVJfU1NSX0NMSUVOVCBfXyAgICAgLT4gcnVucyBvbiBTU1Igb24gY2xpZW50XG4gKiBfXyBRVUFTQVJfU1NSX1BXQSBfXyAgICAgICAgLT4gYnVpbHQgd2l0aCBTU1IrUFdBOyBtYXkgcnVuIG9uIFNTUiBvbiBjbGllbnQgb3Igb24gUFdBIGNsaWVudFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobmVlZHMgcnVudGltZSBkZXRlY3Rpb24pXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzUnVudGltZVNzclByZUh5ZHJhdGlvbiA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IHsgdmFsdWU6IHRydWUgfVxuICA6IHJlZihcbiAgICBfX1FVQVNBUl9TU1JfQ0xJRU5UX18gJiYgKFxuICAgICAgX19RVUFTQVJfU1NSX1BXQV9fID8gZG9jdW1lbnQuYm9keS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VydmVyLXJlbmRlcmVkJykgIT09IG51bGwgOiB0cnVlXG4gICAgKVxuICApXG5cbmV4cG9ydCBsZXQgaW9zRW11bGF0ZWQgPSBmYWxzZVxuZXhwb3J0IGxldCBpb3NDb3JyZWN0aW9uXG5cbmZ1bmN0aW9uIGdldE1hdGNoICh1c2VyQWdlbnQsIHBsYXRmb3JtTWF0Y2gpIHtcbiAgY29uc3QgbWF0Y2ggPSAvKGVkZ3xlZGdlfGVkZ2F8ZWRnaW9zKVxcLyhbXFx3Ll0rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhvcHIpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8odml2YWxkaSlbXFwvXShbXFx3Ll0rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhjaHJvbWV8Y3Jpb3MpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8odmVyc2lvbikoYXBwbGV3ZWJraXQpW1xcL10oW1xcdy5dKykuKihzYWZhcmkpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8od2Via2l0KVtcXC9dKFtcXHcuXSspLioodmVyc2lvbilbXFwvXShbXFx3Ll0rKS4qKHNhZmFyaSlbXFwvXShbXFx3Ll0rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhmaXJlZm94fGZ4aW9zKVtcXC9dKFtcXHcuXSspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHdlYmtpdClbXFwvXShbXFx3Ll0rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhvcGVyYSkoPzouKnZlcnNpb258KVtcXC9dKFtcXHcuXSspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCBbXVxuXG4gIHJldHVybiB7XG4gICAgYnJvd3NlcjogbWF0Y2hbIDUgXSB8fCBtYXRjaFsgMyBdIHx8IG1hdGNoWyAxIF0gfHwgJycsXG4gICAgdmVyc2lvbjogbWF0Y2hbIDIgXSB8fCBtYXRjaFsgNCBdIHx8ICcwJyxcbiAgICB2ZXJzaW9uTnVtYmVyOiBtYXRjaFsgNCBdIHx8IG1hdGNoWyAyIF0gfHwgJzAnLFxuICAgIHBsYXRmb3JtOiBwbGF0Zm9ybU1hdGNoWyAwIF0gfHwgJydcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRQbGF0Zm9ybU1hdGNoICh1c2VyQWdlbnQpIHtcbiAgcmV0dXJuIC8oaXBhZCkvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oaXBvZCkvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8od2luZG93cyBwaG9uZSkvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oaXBob25lKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhraW5kbGUpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHNpbGspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKGFuZHJvaWQpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHdpbikvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8obWFjKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhsaW51eCkvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oY3JvcykvLmV4ZWModXNlckFnZW50KVxuICAgIC8vIFRPRE86IFJlbW92ZSBCbGFja0JlcnJ5IGRldGVjdGlvbi4gQmxhY2tCZXJyeSBPUywgQmxhY2tCZXJyeSAxMCwgYW5kIEJsYWNrQmVycnkgUGxheUJvb2sgT1NcbiAgICAvLyBpcyBvZmZpY2lhbGx5IGRlYWQgYXMgb2YgSmFudWFyeSA0LCAyMDIyIChodHRwczovL3d3dy5ibGFja2JlcnJ5LmNvbS91cy9lbi9zdXBwb3J0L2RldmljZXMvZW5kLW9mLWxpZmUpXG4gICAgfHwgLyhwbGF5Ym9vaykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oYmIpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKGJsYWNrYmVycnkpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCBbXVxufVxuXG5jb25zdCBoYXNUb3VjaCA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IGZhbHNlXG4gIDogJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8IHdpbmRvdy5uYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwXG5cbmZ1bmN0aW9uIGFwcGx5SW9zQ29ycmVjdGlvbiAoaXMpIHtcbiAgaW9zQ29ycmVjdGlvbiA9IHsgaXM6IHsgLi4uaXMgfSB9XG5cbiAgZGVsZXRlIGlzLm1hY1xuICBkZWxldGUgaXMuZGVza3RvcFxuXG4gIGNvbnN0IHBsYXRmb3JtID0gTWF0aC5taW4od2luZG93LmlubmVySGVpZ2h0LCB3aW5kb3cuaW5uZXJXaWR0aCkgPiA0MTRcbiAgICA/ICdpcGFkJ1xuICAgIDogJ2lwaG9uZSdcblxuICBPYmplY3QuYXNzaWduKGlzLCB7XG4gICAgbW9iaWxlOiB0cnVlLFxuICAgIGlvczogdHJ1ZSxcbiAgICBwbGF0Zm9ybSxcbiAgICBbIHBsYXRmb3JtIF06IHRydWVcbiAgfSlcbn1cblxuZnVuY3Rpb24gZ2V0UGxhdGZvcm0gKFVBKSB7XG4gIGNvbnN0XG4gICAgdXNlckFnZW50ID0gVUEudG9Mb3dlckNhc2UoKSxcbiAgICBwbGF0Zm9ybU1hdGNoID0gZ2V0UGxhdGZvcm1NYXRjaCh1c2VyQWdlbnQpLFxuICAgIG1hdGNoZWQgPSBnZXRNYXRjaCh1c2VyQWdlbnQsIHBsYXRmb3JtTWF0Y2gpLFxuICAgIGJyb3dzZXIgPSB7fVxuXG4gIGlmIChtYXRjaGVkLmJyb3dzZXIpIHtcbiAgICBicm93c2VyWyBtYXRjaGVkLmJyb3dzZXIgXSA9IHRydWVcbiAgICBicm93c2VyLnZlcnNpb24gPSBtYXRjaGVkLnZlcnNpb25cbiAgICBicm93c2VyLnZlcnNpb25OdW1iZXIgPSBwYXJzZUludChtYXRjaGVkLnZlcnNpb25OdW1iZXIsIDEwKVxuICB9XG5cbiAgaWYgKG1hdGNoZWQucGxhdGZvcm0pIHtcbiAgICBicm93c2VyWyBtYXRjaGVkLnBsYXRmb3JtIF0gPSB0cnVlXG4gIH1cblxuICBjb25zdCBrbm93bk1vYmlsZXMgPSBicm93c2VyLmFuZHJvaWRcbiAgICB8fCBicm93c2VyLmlvc1xuICAgIHx8IGJyb3dzZXIuYmJcbiAgICB8fCBicm93c2VyLmJsYWNrYmVycnlcbiAgICB8fCBicm93c2VyLmlwYWRcbiAgICB8fCBicm93c2VyLmlwaG9uZVxuICAgIHx8IGJyb3dzZXIuaXBvZFxuICAgIHx8IGJyb3dzZXIua2luZGxlXG4gICAgfHwgYnJvd3Nlci5wbGF5Ym9va1xuICAgIHx8IGJyb3dzZXIuc2lsa1xuICAgIHx8IGJyb3dzZXJbICd3aW5kb3dzIHBob25lJyBdXG5cbiAgLy8gVGhlc2UgYXJlIGFsbCBjb25zaWRlcmVkIG1vYmlsZSBwbGF0Zm9ybXMsIG1lYW5pbmcgdGhleSBydW4gYSBtb2JpbGUgYnJvd3NlclxuICBpZiAoa25vd25Nb2JpbGVzID09PSB0cnVlIHx8IHVzZXJBZ2VudC5pbmRleE9mKCdtb2JpbGUnKSA+IC0xKSB7XG4gICAgYnJvd3Nlci5tb2JpbGUgPSB0cnVlXG5cbiAgICBpZiAoYnJvd3Nlci5lZGdhIHx8IGJyb3dzZXIuZWRnaW9zKSB7XG4gICAgICBicm93c2VyLmVkZ2UgPSB0cnVlXG4gICAgICBtYXRjaGVkLmJyb3dzZXIgPSAnZWRnZSdcbiAgICB9XG4gICAgZWxzZSBpZiAoYnJvd3Nlci5jcmlvcykge1xuICAgICAgYnJvd3Nlci5jaHJvbWUgPSB0cnVlXG4gICAgICBtYXRjaGVkLmJyb3dzZXIgPSAnY2hyb21lJ1xuICAgIH1cbiAgICBlbHNlIGlmIChicm93c2VyLmZ4aW9zKSB7XG4gICAgICBicm93c2VyLmZpcmVmb3ggPSB0cnVlXG4gICAgICBtYXRjaGVkLmJyb3dzZXIgPSAnZmlyZWZveCdcbiAgICB9XG4gIH1cbiAgLy8gSWYgaXQncyBub3QgbW9iaWxlIHdlIHNob3VsZCBjb25zaWRlciBpdCdzIGRlc2t0b3AgcGxhdGZvcm0sIG1lYW5pbmcgaXQgcnVucyBhIGRlc2t0b3AgYnJvd3NlclxuICAvLyBJdCdzIGEgd29ya2Fyb3VuZCBmb3IgYW5vbnltaXplZCB1c2VyIGFnZW50c1xuICAvLyAoYnJvd3Nlci5jcm9zIHx8IGJyb3dzZXIubWFjIHx8IGJyb3dzZXIubGludXggfHwgYnJvd3Nlci53aW4pXG4gIGVsc2Uge1xuICAgIGJyb3dzZXIuZGVza3RvcCA9IHRydWVcbiAgfVxuXG4gIC8vIFNldCBpT1MgaWYgb24gaVBvZCwgaVBhZCBvciBpUGhvbmVcbiAgaWYgKGJyb3dzZXIuaXBvZCB8fCBicm93c2VyLmlwYWQgfHwgYnJvd3Nlci5pcGhvbmUpIHtcbiAgICBicm93c2VyLmlvcyA9IHRydWVcbiAgfVxuXG4gIGlmIChicm93c2VyWyAnd2luZG93cyBwaG9uZScgXSkge1xuICAgIGJyb3dzZXIud2lucGhvbmUgPSB0cnVlXG4gICAgZGVsZXRlIGJyb3dzZXJbICd3aW5kb3dzIHBob25lJyBdXG4gIH1cblxuICAvLyBUT0RPOiBUaGUgYXNzdW1wdGlvbiBhYm91dCBXZWJLaXQgYmFzZWQgYnJvd3NlcnMgYmVsb3cgaXMgbm90IGNvbXBsZXRlbHkgYWNjdXJhdGUuXG4gIC8vIEdvb2dsZSByZWxlYXNlZCBCbGluayhhIGZvcmsgb2YgV2ViS2l0KSBlbmdpbmUgb24gQXByaWwgMywgMjAxMywgd2hpY2ggaXMgcmVhbGx5IGRpZmZlcmVudCB0aGFuIFdlYktpdCB0b2RheS5cbiAgLy8gVG9kYXksIG9uZSBtaWdodCB3YW50IHRvIGNoZWNrIGZvciBXZWJLaXQgdG8gZGVhbCB3aXRoIGl0cyBidWdzLCB3aGljaCBpcyB1c2VkIG9uIGFsbCBicm93c2VycyBvbiBpT1MsIGFuZCBTYWZhcmkgYnJvd3NlciBvbiBhbGwgcGxhdGZvcm1zLlxuXG4gIC8vIENocm9tZSwgT3BlcmEgMTUrLCBWaXZhbGRpIGFuZCBTYWZhcmkgYXJlIHdlYmtpdCBiYXNlZCBicm93c2Vyc1xuICBpZiAoXG4gICAgYnJvd3Nlci5jaHJvbWVcbiAgICB8fCBicm93c2VyLm9wclxuICAgIHx8IGJyb3dzZXIuc2FmYXJpXG4gICAgfHwgYnJvd3Nlci52aXZhbGRpXG4gICAgLy8gd2UgZXhwZWN0IHVua25vd24sIG5vbiBpT1MgbW9iaWxlIGJyb3dzZXJzIHRvIGJlIHdlYmtpdCBiYXNlZFxuICAgIHx8IChcbiAgICAgIGJyb3dzZXIubW9iaWxlID09PSB0cnVlXG4gICAgICAmJiBicm93c2VyLmlvcyAhPT0gdHJ1ZVxuICAgICAgJiYga25vd25Nb2JpbGVzICE9PSB0cnVlXG4gICAgKVxuICApIHtcbiAgICBicm93c2VyLndlYmtpdCA9IHRydWVcbiAgfVxuXG4gIC8vIFRPRE86IChRdjMpIHJlbmFtZSB0aGUgdGVybXMgJ2VkZ2UnIHRvICdlZGdlIGxlZ2FjeScob3IgcmVtb3ZlIGl0KSB0aGVuICdlZGdlIGNocm9taXVtJyB0byAnZWRnZScgdG8gbWF0Y2ggd2l0aCB0aGUga25vd24gdXAtdG8tZGF0ZSB0ZXJtc1xuICAvLyBNaWNyb3NvZnQgRWRnZSBpcyB0aGUgbmV3IENocm9taXVtLWJhc2VkIGJyb3dzZXIuIE1pY3Jvc29mdCBFZGdlIExlZ2FjeSBpcyB0aGUgb2xkIEVkZ2VIVE1MLWJhc2VkIGJyb3dzZXIgKEVPTDogTWFyY2ggOSwgMjAyMSkuXG4gIGlmIChicm93c2VyLmVkZykge1xuICAgIG1hdGNoZWQuYnJvd3NlciA9ICdlZGdlY2hyb21pdW0nXG4gICAgYnJvd3Nlci5lZGdlQ2hyb21pdW0gPSB0cnVlXG4gIH1cblxuICAvLyBCbGFja2JlcnJ5IGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpIG9uIEJsYWNrQmVycnlcbiAgaWYgKChicm93c2VyLnNhZmFyaSAmJiBicm93c2VyLmJsYWNrYmVycnkpIHx8IGJyb3dzZXIuYmIpIHtcbiAgICBtYXRjaGVkLmJyb3dzZXIgPSAnYmxhY2tiZXJyeSdcbiAgICBicm93c2VyLmJsYWNrYmVycnkgPSB0cnVlXG4gIH1cblxuICAvLyBQbGF5Ym9vayBicm93c2VycyBhcmUgbWFya2VkIGFzIFNhZmFyaSBvbiBQbGF5Ym9va1xuICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgYnJvd3Nlci5wbGF5Ym9vaykge1xuICAgIG1hdGNoZWQuYnJvd3NlciA9ICdwbGF5Ym9vaydcbiAgICBicm93c2VyLnBsYXlib29rID0gdHJ1ZVxuICB9XG5cbiAgLy8gT3BlcmEgMTUrIGFyZSBpZGVudGlmaWVkIGFzIG9wclxuICBpZiAoYnJvd3Nlci5vcHIpIHtcbiAgICBtYXRjaGVkLmJyb3dzZXIgPSAnb3BlcmEnXG4gICAgYnJvd3Nlci5vcGVyYSA9IHRydWVcbiAgfVxuXG4gIC8vIFN0b2NrIEFuZHJvaWQgYnJvd3NlcnMgYXJlIG1hcmtlZCBhcyBTYWZhcmkgb24gQW5kcm9pZC5cbiAgaWYgKGJyb3dzZXIuc2FmYXJpICYmIGJyb3dzZXIuYW5kcm9pZCkge1xuICAgIG1hdGNoZWQuYnJvd3NlciA9ICdhbmRyb2lkJ1xuICAgIGJyb3dzZXIuYW5kcm9pZCA9IHRydWVcbiAgfVxuXG4gIC8vIEtpbmRsZSBicm93c2VycyBhcmUgbWFya2VkIGFzIFNhZmFyaSBvbiBLaW5kbGVcbiAgaWYgKGJyb3dzZXIuc2FmYXJpICYmIGJyb3dzZXIua2luZGxlKSB7XG4gICAgbWF0Y2hlZC5icm93c2VyID0gJ2tpbmRsZSdcbiAgICBicm93c2VyLmtpbmRsZSA9IHRydWVcbiAgfVxuXG4gIC8vIEtpbmRsZSBTaWxrIGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpIG9uIEtpbmRsZVxuICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgYnJvd3Nlci5zaWxrKSB7XG4gICAgbWF0Y2hlZC5icm93c2VyID0gJ3NpbGsnXG4gICAgYnJvd3Nlci5zaWxrID0gdHJ1ZVxuICB9XG5cbiAgaWYgKGJyb3dzZXIudml2YWxkaSkge1xuICAgIG1hdGNoZWQuYnJvd3NlciA9ICd2aXZhbGRpJ1xuICAgIGJyb3dzZXIudml2YWxkaSA9IHRydWVcbiAgfVxuXG4gIC8vIEFzc2lnbiB0aGUgbmFtZSBhbmQgcGxhdGZvcm0gdmFyaWFibGVcbiAgYnJvd3Nlci5uYW1lID0gbWF0Y2hlZC5icm93c2VyXG4gIGJyb3dzZXIucGxhdGZvcm0gPSBtYXRjaGVkLnBsYXRmb3JtXG5cbiAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSkge1xuICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignZWxlY3Ryb24nKSA+IC0xKSB7XG4gICAgICBicm93c2VyLmVsZWN0cm9uID0gdHJ1ZVxuICAgIH1cbiAgICBlbHNlIGlmIChkb2N1bWVudC5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJy1leHRlbnNpb246Ly8nKSA+IC0xKSB7XG4gICAgICBicm93c2VyLmJleCA9IHRydWVcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAod2luZG93LkNhcGFjaXRvciAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGJyb3dzZXIuY2FwYWNpdG9yID0gdHJ1ZVxuICAgICAgICBicm93c2VyLm5hdGl2ZU1vYmlsZSA9IHRydWVcbiAgICAgICAgYnJvd3Nlci5uYXRpdmVNb2JpbGVXcmFwcGVyID0gJ2NhcGFjaXRvcidcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHdpbmRvdy5fY29yZG92YU5hdGl2ZSAhPT0gdm9pZCAwIHx8IHdpbmRvdy5jb3Jkb3ZhICE9PSB2b2lkIDApIHtcbiAgICAgICAgYnJvd3Nlci5jb3Jkb3ZhID0gdHJ1ZVxuICAgICAgICBicm93c2VyLm5hdGl2ZU1vYmlsZSA9IHRydWVcbiAgICAgICAgYnJvd3Nlci5uYXRpdmVNb2JpbGVXcmFwcGVyID0gJ2NvcmRvdmEnXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgaGFzVG91Y2ggPT09IHRydWVcbiAgICAgICAgJiYgYnJvd3Nlci5tYWMgPT09IHRydWVcbiAgICAgICAgJiYgKFxuICAgICAgICAgIChicm93c2VyLmRlc2t0b3AgPT09IHRydWUgJiYgYnJvd3Nlci5zYWZhcmkgPT09IHRydWUpXG4gICAgICAgICAgfHwgKFxuICAgICAgICAgICAgYnJvd3Nlci5uYXRpdmVNb2JpbGUgPT09IHRydWVcbiAgICAgICAgICAgICYmIGJyb3dzZXIuYW5kcm9pZCAhPT0gdHJ1ZVxuICAgICAgICAgICAgJiYgYnJvd3Nlci5pb3MgIT09IHRydWVcbiAgICAgICAgICAgICYmIGJyb3dzZXIuaXBhZCAhPT0gdHJ1ZVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIC8qXG4gICAgICAgICogQ29ycmVjdGlvbiBuZWVkZWQgZm9yIGlPUyBzaW5jZSB0aGUgZGVmYXVsdFxuICAgICAgICAqIHNldHRpbmcgb24gaVBhZCBpcyB0byByZXF1ZXN0IGRlc2t0b3AgdmlldzsgaWYgd2UgaGF2ZVxuICAgICAgICAqIHRvdWNoIHN1cHBvcnQgYW5kIHRoZSB1c2VyIGFnZW50IHNheXMgaXQncyBhXG4gICAgICAgICogZGVza3RvcCwgd2UgaW5mZXIgdGhhdCBpdCdzIGFuIGlQaG9uZS9pUGFkIHdpdGggZGVza3RvcCB2aWV3XG4gICAgICAgICogc28gd2UgbXVzdCBmaXggdGhlIGZhbHNlIHBvc2l0aXZlc1xuICAgICAgICAqL1xuICAgICAgICBhcHBseUlvc0NvcnJlY3Rpb24oYnJvd3NlcilcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnJvd3NlclxufVxuXG5jb25zdCB1c2VyQWdlbnQgPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyAnJ1xuICA6IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmFcblxuY29uc3Qgc3NyQ2xpZW50ID0ge1xuICBoYXM6IHtcbiAgICB0b3VjaDogZmFsc2UsXG4gICAgd2ViU3RvcmFnZTogZmFsc2VcbiAgfSxcbiAgd2l0aGluOiB7IGlmcmFtZTogZmFsc2UgfVxufVxuXG4vLyBXZSBleHBvcnQgXCJjbGllbnRcIiBmb3IgaHlkcmF0aW9uIGVycm9yLWZyZWUgcGFydHMsXG4vLyBsaWtlIHRvdWNoIGRpcmVjdGl2ZXMgd2hvIGRvIG5vdCAoYW5kIG11c3QgTk9UKSB3YWl0XG4vLyBmb3IgdGhlIGNsaWVudCB0YWtlb3Zlcjtcbi8vIERvIE5PVCBpbXBvcnQgdGhpcyBkaXJlY3RseSBpbiB5b3VyIGFwcCwgdW5sZXNzIHlvdSByZWFsbHkga25vd1xuLy8gd2hhdCB5b3UgYXJlIGRvaW5nLlxuZXhwb3J0IGNvbnN0IGNsaWVudCA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IHNzckNsaWVudFxuICA6IHtcbiAgICAgIHVzZXJBZ2VudCxcbiAgICAgIGlzOiBnZXRQbGF0Zm9ybSh1c2VyQWdlbnQpLFxuICAgICAgaGFzOiB7XG4gICAgICAgIHRvdWNoOiBoYXNUb3VjaFxuICAgICAgfSxcbiAgICAgIHdpdGhpbjoge1xuICAgICAgICBpZnJhbWU6IHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wXG4gICAgICB9XG4gICAgfVxuXG5jb25zdCBQbGF0Zm9ybSA9IHtcbiAgaW5zdGFsbCAob3B0cykge1xuICAgIGNvbnN0IHsgJHEgfSA9IG9wdHNcblxuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHtcbiAgICAgICRxLnBsYXRmb3JtID0gdGhpcy5wYXJzZVNTUihvcHRzLnNzckNvbnRleHQpXG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUnVudGltZVNzclByZUh5ZHJhdGlvbi52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgLy8gdGFrZW92ZXIgc2hvdWxkIGluY3JlYXNlIGFjY3VyYWN5IGZvclxuICAgICAgLy8gdGhlIHJlc3Qgb2YgdGhlIHByb3BzOyB3ZSBhbHNvIGF2b2lkXG4gICAgICAvLyBoeWRyYXRpb24gZXJyb3JzXG4gICAgICBvcHRzLm9uU1NSSHlkcmF0ZWQucHVzaCgoKSA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oJHEucGxhdGZvcm0sIGNsaWVudClcbiAgICAgICAgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID0gZmFsc2VcbiAgICAgICAgaW9zQ29ycmVjdGlvbiA9IHZvaWQgMFxuICAgICAgfSlcblxuICAgICAgLy8gd2UgbmVlZCB0byBtYWtlIHBsYXRmb3JtIHJlYWN0aXZlXG4gICAgICAvLyBmb3IgdGhlIHRha2VvdmVyIHBoYXNlXG4gICAgICAkcS5wbGF0Zm9ybSA9IHJlYWN0aXZlKHRoaXMpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJHEucGxhdGZvcm0gPSB0aGlzXG4gICAgfVxuICB9XG59XG5cbmlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHtcbiAgUGxhdGZvcm0ucGFyc2VTU1IgPSAoc3NyQ29udGV4dCkgPT4ge1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IHNzckNvbnRleHQucmVxLmhlYWRlcnNbICd1c2VyLWFnZW50JyBdIHx8IHNzckNvbnRleHQucmVxLmhlYWRlcnNbICdVc2VyLUFnZW50JyBdIHx8ICcnXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmNsaWVudCxcbiAgICAgIHVzZXJBZ2VudCxcbiAgICAgIGlzOiBnZXRQbGF0Zm9ybSh1c2VyQWdlbnQpXG4gICAgfVxuICB9XG59XG5lbHNlIHtcbiAgLy8gZG8gbm90IGFjY2VzcyB3aW5kb3cubG9jYWxTdG9yYWdlIHdpdGhvdXRcbiAgLy8gZGV2bGFuZCBhY3R1YWxseSB1c2luZyBpdCBhcyB0aGlzIHdpbGwgZ2V0XG4gIC8vIHJlcG9ydGVkIHVuZGVyIFwiQ29va2llc1wiIGluIEdvb2dsZSBDaHJvbWVcbiAgbGV0IGhhc1dlYlN0b3JhZ2VcblxuICBpbmplY3RQcm9wKGNsaWVudC5oYXMsICd3ZWJTdG9yYWdlJywgKCkgPT4ge1xuICAgIGlmIChoYXNXZWJTdG9yYWdlICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBoYXNXZWJTdG9yYWdlXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIGhhc1dlYlN0b3JhZ2UgPSB0cnVlXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7fVxuXG4gICAgaGFzV2ViU3RvcmFnZSA9IGZhbHNlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH0pXG5cbiAgaW9zRW11bGF0ZWQgPSBjbGllbnQuaXMuaW9zID09PSB0cnVlXG4gICAgJiYgd2luZG93Lm5hdmlnYXRvci52ZW5kb3IudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdhcHBsZScpID09PSAtMVxuXG4gIGlmIChpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPT09IHRydWUpIHtcbiAgICAvLyBtdXN0IG1hdGNoIHdpdGggc2VydmVyLXNpZGUgYmVmb3JlXG4gICAgLy8gY2xpZW50IHRha2luZyBvdmVyIGluIG9yZGVyIHRvIHByZXZlbnRcbiAgICAvLyBoeWRyYXRpb24gZXJyb3JzXG4gICAgT2JqZWN0LmFzc2lnbihQbGF0Zm9ybSwgY2xpZW50LCBpb3NDb3JyZWN0aW9uLCBzc3JDbGllbnQpXG4gIH1cbiAgZWxzZSB7XG4gICAgT2JqZWN0LmFzc2lnbihQbGF0Zm9ybSwgY2xpZW50KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXRmb3JtXG4iLCJcbmltcG9ydCB7IHJlYWN0aXZlIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgaW5qZWN0UHJvcCB9IGZyb20gJy4vaW5qZWN0LW9iai1wcm9wJ1xuXG5leHBvcnQgZGVmYXVsdCBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyAoc3RhdGUsIHBsdWdpbikgPT4ge1xuICAgICAgT2JqZWN0LmFzc2lnbihwbHVnaW4sIHN0YXRlKVxuICAgICAgcmV0dXJuIHBsdWdpblxuICAgIH1cbiAgOiAoc3RhdGUsIHBsdWdpbikgPT4ge1xuICAgICAgY29uc3QgcmVhY3RpdmVTdGF0ZSA9IHJlYWN0aXZlKHN0YXRlKVxuXG4gICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gc3RhdGUpIHtcbiAgICAgICAgaW5qZWN0UHJvcChcbiAgICAgICAgICBwbHVnaW4sXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICAoKSA9PiByZWFjdGl2ZVN0YXRlWyBuYW1lIF0sXG4gICAgICAgICAgdmFsID0+IHsgcmVhY3RpdmVTdGF0ZVsgbmFtZSBdID0gdmFsIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGx1Z2luXG4gICAgfVxuIiwiZXhwb3J0IGNvbnN0IGxpc3Rlbk9wdHMgPSB7XG4gIGhhc1Bhc3NpdmU6IGZhbHNlLFxuICBwYXNzaXZlQ2FwdHVyZTogdHJ1ZSxcbiAgbm90UGFzc2l2ZUNhcHR1cmU6IHRydWVcbn1cblxudHJ5IHtcbiAgY29uc3Qgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgZ2V0ICgpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24obGlzdGVuT3B0cywge1xuICAgICAgICBoYXNQYXNzaXZlOiB0cnVlLFxuICAgICAgICBwYXNzaXZlOiB7IHBhc3NpdmU6IHRydWUgfSxcbiAgICAgICAgbm90UGFzc2l2ZTogeyBwYXNzaXZlOiBmYWxzZSB9LFxuICAgICAgICBwYXNzaXZlQ2FwdHVyZTogeyBwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiB0cnVlIH0sXG4gICAgICAgIG5vdFBhc3NpdmVDYXB0dXJlOiB7IHBhc3NpdmU6IGZhbHNlLCBjYXB0dXJlOiB0cnVlIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncXRlc3QnLCBudWxsLCBvcHRzKVxuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncXRlc3QnLCBudWxsLCBvcHRzKVxufVxuY2F0Y2ggKGUpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBub29wICgpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0Q2xpY2sgKGUpIHtcbiAgcmV0dXJuIGUuYnV0dG9uID09PSAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGVDbGljayAoZSkge1xuICByZXR1cm4gZS5idXR0b24gPT09IDFcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0Q2xpY2sgKGUpIHtcbiAgcmV0dXJuIGUuYnV0dG9uID09PSAyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3NpdGlvbiAoZSkge1xuICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlc1sgMCBdKSB7XG4gICAgZSA9IGUudG91Y2hlc1sgMCBdXG4gIH1cbiAgZWxzZSBpZiAoZS5jaGFuZ2VkVG91Y2hlcyAmJiBlLmNoYW5nZWRUb3VjaGVzWyAwIF0pIHtcbiAgICBlID0gZS5jaGFuZ2VkVG91Y2hlc1sgMCBdXG4gIH1cbiAgZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlc1sgMCBdKSB7XG4gICAgZSA9IGUudGFyZ2V0VG91Y2hlc1sgMCBdXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHRvcDogZS5jbGllbnRZLFxuICAgIGxlZnQ6IGUuY2xpZW50WFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudFBhdGggKGUpIHtcbiAgaWYgKGUucGF0aCkge1xuICAgIHJldHVybiBlLnBhdGhcbiAgfVxuICBpZiAoZS5jb21wb3NlZFBhdGgpIHtcbiAgICByZXR1cm4gZS5jb21wb3NlZFBhdGgoKVxuICB9XG5cbiAgY29uc3QgcGF0aCA9IFtdXG4gIGxldCBlbCA9IGUudGFyZ2V0XG5cbiAgd2hpbGUgKGVsKSB7XG4gICAgcGF0aC5wdXNoKGVsKVxuXG4gICAgaWYgKGVsLnRhZ05hbWUgPT09ICdIVE1MJykge1xuICAgICAgcGF0aC5wdXNoKGRvY3VtZW50KVxuICAgICAgcGF0aC5wdXNoKHdpbmRvdylcbiAgICAgIHJldHVybiBwYXRoXG4gICAgfVxuXG4gICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50XG4gIH1cbn1cblxuLy8gUmVhc29uYWJsZSBkZWZhdWx0c1xuY29uc3RcbiAgTElORV9IRUlHSFQgPSA0MCxcbiAgUEFHRV9IRUlHSFQgPSA4MDBcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vdXNlV2hlZWxEaXN0YW5jZSAoZSkge1xuICBsZXQgeCA9IGUuZGVsdGFYLCB5ID0gZS5kZWx0YVlcblxuICBpZiAoKHggfHwgeSkgJiYgZS5kZWx0YU1vZGUpIHtcbiAgICBjb25zdCBtdWx0aXBsaWVyID0gZS5kZWx0YU1vZGUgPT09IDEgPyBMSU5FX0hFSUdIVCA6IFBBR0VfSEVJR0hUXG4gICAgeCAqPSBtdWx0aXBsaWVyXG4gICAgeSAqPSBtdWx0aXBsaWVyXG4gIH1cblxuICBpZiAoZS5zaGlmdEtleSAmJiAheCkge1xuICAgIFsgeSwgeCBdID0gWyB4LCB5IF1cbiAgfVxuXG4gIHJldHVybiB7IHgsIHkgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcCAoZSkge1xuICBlLnN0b3BQcm9wYWdhdGlvbigpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50IChlKSB7XG4gIGUuY2FuY2VsYWJsZSAhPT0gZmFsc2UgJiYgZS5wcmV2ZW50RGVmYXVsdCgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wQW5kUHJldmVudCAoZSkge1xuICBlLmNhbmNlbGFibGUgIT09IGZhbHNlICYmIGUucHJldmVudERlZmF1bHQoKVxuICBlLnN0b3BQcm9wYWdhdGlvbigpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50RHJhZ2dhYmxlIChlbCwgc3RhdHVzKSB7XG4gIGlmIChlbCA9PT0gdm9pZCAwIHx8IChzdGF0dXMgPT09IHRydWUgJiYgZWwuX19kcmFnUHJldmVudGVkID09PSB0cnVlKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgZm4gPSBzdGF0dXMgPT09IHRydWVcbiAgICA/IGVsID0+IHtcbiAgICAgIGVsLl9fZHJhZ1ByZXZlbnRlZCA9IHRydWVcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHByZXZlbnQsIGxpc3Rlbk9wdHMubm90UGFzc2l2ZUNhcHR1cmUpXG4gICAgfVxuICAgIDogZWwgPT4ge1xuICAgICAgZGVsZXRlIGVsLl9fZHJhZ1ByZXZlbnRlZFxuICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgcHJldmVudCwgbGlzdGVuT3B0cy5ub3RQYXNzaXZlQ2FwdHVyZSlcbiAgICB9XG5cbiAgZWwucXVlcnlTZWxlY3RvckFsbCgnYSwgaW1nJykuZm9yRWFjaChmbilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEV2dCAoY3R4LCB0YXJnZXROYW1lLCBldmVudHMpIHtcbiAgY29uc3QgbmFtZSA9IGBfX3FfJHsgdGFyZ2V0TmFtZSB9X2V2dGBcblxuICBjdHhbIG5hbWUgXSA9IGN0eFsgbmFtZSBdICE9PSB2b2lkIDBcbiAgICA/IGN0eFsgbmFtZSBdLmNvbmNhdChldmVudHMpXG4gICAgOiBldmVudHNcblxuICBldmVudHMuZm9yRWFjaChldnQgPT4ge1xuICAgIGV2dFsgMCBdLmFkZEV2ZW50TGlzdGVuZXIoZXZ0WyAxIF0sIGN0eFsgZXZ0WyAyIF0gXSwgbGlzdGVuT3B0c1sgZXZ0WyAzIF0gXSlcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuRXZ0IChjdHgsIHRhcmdldE5hbWUpIHtcbiAgY29uc3QgbmFtZSA9IGBfX3FfJHsgdGFyZ2V0TmFtZSB9X2V2dGBcblxuICBpZiAoY3R4WyBuYW1lIF0gIT09IHZvaWQgMCkge1xuICAgIGN0eFsgbmFtZSBdLmZvckVhY2goZXZ0ID0+IHtcbiAgICAgIGV2dFsgMCBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0WyAxIF0sIGN0eFsgZXZ0WyAyIF0gXSwgbGlzdGVuT3B0c1sgZXZ0WyAzIF0gXSlcbiAgICB9KVxuICAgIGN0eFsgbmFtZSBdID0gdm9pZCAwXG4gIH1cbn1cblxuLypcbiAqIGFsc28gdXBkYXRlIC90eXBlcy91dGlscy9ldmVudC5kLnRzXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQge1xuICBsaXN0ZW5PcHRzLFxuICBsZWZ0Q2xpY2ssXG4gIG1pZGRsZUNsaWNrLFxuICByaWdodENsaWNrLFxuICBwb3NpdGlvbixcbiAgZ2V0RXZlbnRQYXRoLFxuICBnZXRNb3VzZVdoZWVsRGlzdGFuY2UsXG4gIHN0b3AsXG4gIHByZXZlbnQsXG4gIHN0b3BBbmRQcmV2ZW50LFxuICBwcmV2ZW50RHJhZ2dhYmxlXG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZm4sIHdhaXQgPSAyNTAsIGltbWVkaWF0ZSkge1xuICBsZXQgdGltZW91dFxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCAoLyogLi4uYXJncyAqLykge1xuICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHNcblxuICAgIGNvbnN0IGxhdGVyID0gKCkgPT4ge1xuICAgICAgdGltZW91dCA9IHZvaWQgMFxuICAgICAgaWYgKGltbWVkaWF0ZSAhPT0gdHJ1ZSkge1xuICAgICAgICBmbi5hcHBseSh0aGlzLCBhcmdzKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgIGlmIChpbW1lZGlhdGUgPT09IHRydWUgJiYgdGltZW91dCA9PT0gdm9pZCAwKSB7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmdzKVxuICAgIH1cbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdClcbiAgfVxuXG4gIGRlYm91bmNlZC5jYW5jZWwgPSAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXG4gIH1cblxuICByZXR1cm4gZGVib3VuY2VkXG59XG4iLCJpbXBvcnQgeyBpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24sIGNsaWVudCB9IGZyb20gJy4vUGxhdGZvcm0uanMnXG5cbmltcG9ydCBkZWZpbmVSZWFjdGl2ZVBsdWdpbiBmcm9tICcuLi91dGlscy9wcml2YXRlL2RlZmluZS1yZWFjdGl2ZS1wbHVnaW4uanMnXG5pbXBvcnQgeyBsaXN0ZW5PcHRzLCBub29wIH0gZnJvbSAnLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnLi4vdXRpbHMvZGVib3VuY2UuanMnXG5cbmNvbnN0IFNJWkVfTElTVCA9IFsgJ3NtJywgJ21kJywgJ2xnJywgJ3hsJyBdXG5jb25zdCB7IHBhc3NpdmUgfSA9IGxpc3Rlbk9wdHNcblxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lUmVhY3RpdmVQbHVnaW4oe1xuICB3aWR0aDogMCxcbiAgaGVpZ2h0OiAwLFxuICBuYW1lOiAneHMnLFxuXG4gIHNpemVzOiB7XG4gICAgc206IDYwMCxcbiAgICBtZDogMTAyNCxcbiAgICBsZzogMTQ0MCxcbiAgICB4bDogMTkyMFxuICB9LFxuXG4gIGx0OiB7XG4gICAgc206IHRydWUsXG4gICAgbWQ6IHRydWUsXG4gICAgbGc6IHRydWUsXG4gICAgeGw6IHRydWVcbiAgfSxcbiAgZ3Q6IHtcbiAgICB4czogZmFsc2UsXG4gICAgc206IGZhbHNlLFxuICAgIG1kOiBmYWxzZSxcbiAgICBsZzogZmFsc2VcbiAgfSxcblxuICB4czogdHJ1ZSxcbiAgc206IGZhbHNlLFxuICBtZDogZmFsc2UsXG4gIGxnOiBmYWxzZSxcbiAgeGw6IGZhbHNlXG59LCB7XG4gIHNldFNpemVzOiBub29wLFxuICBzZXREZWJvdW5jZTogbm9vcCxcblxuICBpbnN0YWxsICh7ICRxLCBvblNTUkh5ZHJhdGVkIH0pIHtcbiAgICAkcS5zY3JlZW4gPSB0aGlzXG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7IHJldHVybiB9XG5cbiAgICBpZiAodGhpcy5fX2luc3RhbGxlZCA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKCRxLmNvbmZpZy5zY3JlZW4gIT09IHZvaWQgMCkge1xuICAgICAgICBpZiAoJHEuY29uZmlnLnNjcmVlbi5ib2R5Q2xhc3NlcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoYHNjcmVlbi0tJHsgdGhpcy5uYW1lIH1gKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHRoaXMuX191cGRhdGUodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgeyB2aXN1YWxWaWV3cG9ydCB9ID0gd2luZG93XG4gICAgY29uc3QgdGFyZ2V0ID0gdmlzdWFsVmlld3BvcnQgfHwgd2luZG93XG4gICAgY29uc3Qgc2Nyb2xsaW5nRWxlbWVudCA9IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG4gICAgY29uc3QgZ2V0U2l6ZSA9IHZpc3VhbFZpZXdwb3J0ID09PSB2b2lkIDAgfHwgY2xpZW50LmlzLm1vYmlsZSA9PT0gdHJ1ZVxuICAgICAgPyAoKSA9PiBbXG4gICAgICAgICAgTWF0aC5tYXgod2luZG93LmlubmVyV2lkdGgsIHNjcm9sbGluZ0VsZW1lbnQuY2xpZW50V2lkdGgpLFxuICAgICAgICAgIE1hdGgubWF4KHdpbmRvdy5pbm5lckhlaWdodCwgc2Nyb2xsaW5nRWxlbWVudC5jbGllbnRIZWlnaHQpXG4gICAgICAgIF1cbiAgICAgIDogKCkgPT4gW1xuICAgICAgICAgIHZpc3VhbFZpZXdwb3J0LndpZHRoICogdmlzdWFsVmlld3BvcnQuc2NhbGUgKyB3aW5kb3cuaW5uZXJXaWR0aCAtIHNjcm9sbGluZ0VsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgdmlzdWFsVmlld3BvcnQuaGVpZ2h0ICogdmlzdWFsVmlld3BvcnQuc2NhbGUgKyB3aW5kb3cuaW5uZXJIZWlnaHQgLSBzY3JvbGxpbmdFbGVtZW50LmNsaWVudEhlaWdodFxuICAgICAgICBdXG5cbiAgICBjb25zdCBjbGFzc2VzID0gJHEuY29uZmlnLnNjcmVlbiAhPT0gdm9pZCAwICYmICRxLmNvbmZpZy5zY3JlZW4uYm9keUNsYXNzZXMgPT09IHRydWVcblxuICAgIHRoaXMuX191cGRhdGUgPSBmb3JjZSA9PiB7XG4gICAgICBjb25zdCBbIHcsIGggXSA9IGdldFNpemUoKVxuXG4gICAgICBpZiAoaCAhPT0gdGhpcy5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoXG4gICAgICB9XG5cbiAgICAgIGlmICh3ICE9PSB0aGlzLndpZHRoKSB7XG4gICAgICAgIHRoaXMud2lkdGggPSB3XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChmb3JjZSAhPT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgbGV0IHMgPSB0aGlzLnNpemVzXG5cbiAgICAgIHRoaXMuZ3QueHMgPSB3ID49IHMuc21cbiAgICAgIHRoaXMuZ3Quc20gPSB3ID49IHMubWRcbiAgICAgIHRoaXMuZ3QubWQgPSB3ID49IHMubGdcbiAgICAgIHRoaXMuZ3QubGcgPSB3ID49IHMueGxcbiAgICAgIHRoaXMubHQuc20gPSB3IDwgcy5zbVxuICAgICAgdGhpcy5sdC5tZCA9IHcgPCBzLm1kXG4gICAgICB0aGlzLmx0LmxnID0gdyA8IHMubGdcbiAgICAgIHRoaXMubHQueGwgPSB3IDwgcy54bFxuICAgICAgdGhpcy54cyA9IHRoaXMubHQuc21cbiAgICAgIHRoaXMuc20gPSB0aGlzLmd0LnhzID09PSB0cnVlICYmIHRoaXMubHQubWQgPT09IHRydWVcbiAgICAgIHRoaXMubWQgPSB0aGlzLmd0LnNtID09PSB0cnVlICYmIHRoaXMubHQubGcgPT09IHRydWVcbiAgICAgIHRoaXMubGcgPSB0aGlzLmd0Lm1kID09PSB0cnVlICYmIHRoaXMubHQueGwgPT09IHRydWVcbiAgICAgIHRoaXMueGwgPSB0aGlzLmd0LmxnXG5cbiAgICAgIHMgPSAodGhpcy54cyA9PT0gdHJ1ZSAmJiAneHMnKVxuICAgICAgICB8fCAodGhpcy5zbSA9PT0gdHJ1ZSAmJiAnc20nKVxuICAgICAgICB8fCAodGhpcy5tZCA9PT0gdHJ1ZSAmJiAnbWQnKVxuICAgICAgICB8fCAodGhpcy5sZyA9PT0gdHJ1ZSAmJiAnbGcnKVxuICAgICAgICB8fCAneGwnXG5cbiAgICAgIGlmIChzICE9PSB0aGlzLm5hbWUpIHtcbiAgICAgICAgaWYgKGNsYXNzZXMgPT09IHRydWUpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoYHNjcmVlbi0tJHsgdGhpcy5uYW1lIH1gKVxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChgc2NyZWVuLS0keyBzIH1gKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IHNcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdXBkYXRlRXZ0LCB1cGRhdGVTaXplcyA9IHt9LCB1cGRhdGVEZWJvdW5jZSA9IDE2XG5cbiAgICB0aGlzLnNldFNpemVzID0gc2l6ZXMgPT4ge1xuICAgICAgU0laRV9MSVNULmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGlmIChzaXplc1sgbmFtZSBdICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB1cGRhdGVTaXplc1sgbmFtZSBdID0gc2l6ZXNbIG5hbWUgXVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnNldERlYm91bmNlID0gZGViID0+IHtcbiAgICAgIHVwZGF0ZURlYm91bmNlID0gZGViXG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSlcblxuICAgICAgLy8gaWYgY3NzIHByb3BzIGF2YWlsYWJsZVxuICAgICAgaWYgKHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy0tcS1zaXplLXNtJykpIHtcbiAgICAgICAgU0laRV9MSVNULmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgICAgdGhpcy5zaXplc1sgbmFtZSBdID0gcGFyc2VJbnQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShgLS1xLXNpemUtJHsgbmFtZSB9YCksIDEwKVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFNpemVzID0gc2l6ZXMgPT4ge1xuICAgICAgICBTSVpFX0xJU1QuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICBpZiAoc2l6ZXNbIG5hbWUgXSkge1xuICAgICAgICAgICAgdGhpcy5zaXplc1sgbmFtZSBdID0gc2l6ZXNbIG5hbWUgXVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5fX3VwZGF0ZSh0cnVlKVxuICAgICAgfVxuXG4gICAgICB0aGlzLnNldERlYm91bmNlID0gZGVsYXkgPT4ge1xuICAgICAgICB1cGRhdGVFdnQgIT09IHZvaWQgMCAmJiB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlRXZ0LCBwYXNzaXZlKVxuICAgICAgICB1cGRhdGVFdnQgPSBkZWxheSA+IDBcbiAgICAgICAgICA/IGRlYm91bmNlKHRoaXMuX191cGRhdGUsIGRlbGF5KVxuICAgICAgICAgIDogdGhpcy5fX3VwZGF0ZVxuICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlRXZ0LCBwYXNzaXZlKVxuICAgICAgfVxuXG4gICAgICB0aGlzLnNldERlYm91bmNlKHVwZGF0ZURlYm91bmNlKVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlU2l6ZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5zZXRTaXplcyh1cGRhdGVTaXplcylcbiAgICAgICAgdXBkYXRlU2l6ZXMgPSB2b2lkIDAgLy8gZnJlZSB1cCBtZW1vcnlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9fdXBkYXRlKClcbiAgICAgIH1cblxuICAgICAgLy8gZHVlIHRvIG9wdGltaXphdGlvbnMsIHRoaXMgd291bGQgYmUgbGVmdCBvdXQgb3RoZXJ3aXNlXG4gICAgICBjbGFzc2VzID09PSB0cnVlICYmIHRoaXMubmFtZSA9PT0gJ3hzJ1xuICAgICAgICAmJiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3NjcmVlbi0teHMnKVxuICAgIH1cblxuICAgIGlmIChpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPT09IHRydWUpIHtcbiAgICAgIG9uU1NSSHlkcmF0ZWQucHVzaChzdGFydClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdGFydCgpXG4gICAgfVxuICB9XG59KVxuIiwiaW1wb3J0IGRlZmluZVJlYWN0aXZlUGx1Z2luIGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvZGVmaW5lLXJlYWN0aXZlLXBsdWdpbi5qcydcbmltcG9ydCB7IGlzUnVudGltZVNzclByZUh5ZHJhdGlvbiB9IGZyb20gJy4vUGxhdGZvcm0uanMnXG5cbmNvbnN0IFBsdWdpbiA9IGRlZmluZVJlYWN0aXZlUGx1Z2luKHtcbiAgaXNBY3RpdmU6IGZhbHNlLFxuICBtb2RlOiBmYWxzZVxufSwge1xuICBfX21lZGlhOiB2b2lkIDAsXG5cbiAgc2V0ICh2YWwpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7IHJldHVybiB9XG5cbiAgICBQbHVnaW4ubW9kZSA9IHZhbFxuXG4gICAgaWYgKHZhbCA9PT0gJ2F1dG8nKSB7XG4gICAgICBpZiAoUGx1Z2luLl9fbWVkaWEgPT09IHZvaWQgMCkge1xuICAgICAgICBQbHVnaW4uX19tZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJylcbiAgICAgICAgUGx1Z2luLl9fdXBkYXRlTWVkaWEgPSAoKSA9PiB7IFBsdWdpbi5zZXQoJ2F1dG8nKSB9XG4gICAgICAgIFBsdWdpbi5fX21lZGlhLmFkZExpc3RlbmVyKFBsdWdpbi5fX3VwZGF0ZU1lZGlhKVxuICAgICAgfVxuXG4gICAgICB2YWwgPSBQbHVnaW4uX19tZWRpYS5tYXRjaGVzXG4gICAgfVxuICAgIGVsc2UgaWYgKFBsdWdpbi5fX21lZGlhICE9PSB2b2lkIDApIHtcbiAgICAgIFBsdWdpbi5fX21lZGlhLnJlbW92ZUxpc3RlbmVyKFBsdWdpbi5fX3VwZGF0ZU1lZGlhKVxuICAgICAgUGx1Z2luLl9fbWVkaWEgPSB2b2lkIDBcbiAgICB9XG5cbiAgICBQbHVnaW4uaXNBY3RpdmUgPSB2YWwgPT09IHRydWVcblxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShgYm9keS0tJHsgdmFsID09PSB0cnVlID8gJ2xpZ2h0JyA6ICdkYXJrJyB9YClcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoYGJvZHktLSR7IHZhbCA9PT0gdHJ1ZSA/ICdkYXJrJyA6ICdsaWdodCcgfWApXG4gIH0sXG5cbiAgdG9nZ2xlICgpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlKSB7XG4gICAgICBQbHVnaW4uc2V0KFBsdWdpbi5pc0FjdGl2ZSA9PT0gZmFsc2UpXG4gICAgfVxuICB9LFxuXG4gIGluc3RhbGwgKHsgJHEsIG9uU1NSSHlkcmF0ZWQsIHNzckNvbnRleHQgfSkge1xuICAgIGNvbnN0IHsgZGFyayB9ID0gJHEuY29uZmlnXG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgICB0aGlzLmlzQWN0aXZlID0gZGFyayA9PT0gdHJ1ZVxuXG4gICAgICAkcS5kYXJrID0ge1xuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICAgIG1vZGU6IGZhbHNlLFxuICAgICAgICBzZXQ6IHZhbCA9PiB7XG4gICAgICAgICAgc3NyQ29udGV4dC5fbWV0YS5ib2R5Q2xhc3NlcyA9IHNzckNvbnRleHQuX21ldGEuYm9keUNsYXNzZXNcbiAgICAgICAgICAgIC5yZXBsYWNlKCcgYm9keS0tbGlnaHQnLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKCcgYm9keS0tZGFyaycsICcnKSArIGAgYm9keS0tJHsgdmFsID09PSB0cnVlID8gJ2RhcmsnIDogJ2xpZ2h0JyB9YFxuXG4gICAgICAgICAgJHEuZGFyay5pc0FjdGl2ZSA9IHZhbCA9PT0gdHJ1ZVxuICAgICAgICAgICRxLmRhcmsubW9kZSA9IHZhbFxuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6ICgpID0+IHtcbiAgICAgICAgICAkcS5kYXJrLnNldCgkcS5kYXJrLmlzQWN0aXZlID09PSBmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkcS5kYXJrLnNldChkYXJrKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgJHEuZGFyayA9IHRoaXNcblxuICAgIGlmICh0aGlzLl9faW5zdGFsbGVkID09PSB0cnVlICYmIGRhcmsgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5pc0FjdGl2ZSA9IGRhcmsgPT09IHRydWVcblxuICAgIGNvbnN0IGluaXRpYWxWYWwgPSBkYXJrICE9PSB2b2lkIDAgPyBkYXJrIDogZmFsc2VcblxuICAgIGlmIChpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IHNzclNldCA9IHZhbCA9PiB7XG4gICAgICAgIHRoaXMuX19mcm9tU1NSID0gdmFsXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9yaWdpbmFsU2V0ID0gdGhpcy5zZXRcblxuICAgICAgdGhpcy5zZXQgPSBzc3JTZXRcbiAgICAgIHNzclNldChpbml0aWFsVmFsKVxuXG4gICAgICBvblNTUkh5ZHJhdGVkLnB1c2goKCkgPT4ge1xuICAgICAgICB0aGlzLnNldCA9IG9yaWdpbmFsU2V0XG4gICAgICAgIHRoaXMuc2V0KHRoaXMuX19mcm9tU1NSKVxuICAgICAgfSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnNldChpbml0aWFsVmFsKVxuICAgIH1cbiAgfVxufSlcblxuZXhwb3J0IGRlZmF1bHQgUGx1Z2luXG4iLCJpbXBvcnQgeyBjbGllbnQgfSBmcm9tICcuL3BsdWdpbnMvUGxhdGZvcm0uanMnXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi91dGlscy9ldmVudC5qcydcblxuY29uc3QgZ2V0VHJ1ZSA9ICgpID0+IHRydWVcblxuZnVuY3Rpb24gZmlsdGVySW52YWxpZFBhdGggKHBhdGgpIHtcbiAgcmV0dXJuIHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJ1xuICAgICYmIHBhdGggIT09ICcnXG4gICAgJiYgcGF0aCAhPT0gJy8nXG4gICAgJiYgcGF0aCAhPT0gJyMvJ1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVFeGl0UGF0aCAocGF0aCkge1xuICBwYXRoLnN0YXJ0c1dpdGgoJyMnKSA9PT0gdHJ1ZSAmJiAocGF0aCA9IHBhdGguc3Vic3RyaW5nKDEpKVxuICBwYXRoLnN0YXJ0c1dpdGgoJy8nKSA9PT0gZmFsc2UgJiYgKHBhdGggPSAnLycgKyBwYXRoKVxuICBwYXRoLmVuZHNXaXRoKCcvJykgPT09IHRydWUgJiYgKHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aCAtIDEpKVxuICByZXR1cm4gJyMnICsgcGF0aFxufVxuXG5mdW5jdGlvbiBnZXRTaG91bGRFeGl0Rm4gKGNmZykge1xuICBpZiAoY2ZnLmJhY2tCdXR0b25FeGl0ID09PSBmYWxzZSkge1xuICAgIHJldHVybiAoKSA9PiBmYWxzZVxuICB9XG5cbiAgaWYgKGNmZy5iYWNrQnV0dG9uRXhpdCA9PT0gJyonKSB7XG4gICAgcmV0dXJuIGdldFRydWVcbiAgfVxuXG4gIC8vIEFkZCBkZWZhdWx0IHJvb3QgcGF0aFxuICBjb25zdCBleGl0UGF0aHMgPSBbICcjLycgXVxuXG4gIC8vIEFkZCBjdXN0b20gZXhpdCBwYXRoc1xuICBBcnJheS5pc0FycmF5KGNmZy5iYWNrQnV0dG9uRXhpdCkgPT09IHRydWUgJiYgZXhpdFBhdGhzLnB1c2goXG4gICAgLi4uY2ZnLmJhY2tCdXR0b25FeGl0LmZpbHRlcihmaWx0ZXJJbnZhbGlkUGF0aCkubWFwKG5vcm1hbGl6ZUV4aXRQYXRoKVxuICApXG5cbiAgcmV0dXJuICgpID0+IGV4aXRQYXRocy5pbmNsdWRlcyh3aW5kb3cubG9jYXRpb24uaGFzaClcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBfX2hpc3Rvcnk6IFtdLFxuICBhZGQ6IG5vb3AsXG4gIHJlbW92ZTogbm9vcCxcblxuICBpbnN0YWxsICh7ICRxIH0pIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fIHx8IHRoaXMuX19pbnN0YWxsZWQgPT09IHRydWUpIHsgcmV0dXJuIH1cblxuICAgIGNvbnN0IHsgY29yZG92YSwgY2FwYWNpdG9yIH0gPSBjbGllbnQuaXNcblxuICAgIGlmIChjb3Jkb3ZhICE9PSB0cnVlICYmIGNhcGFjaXRvciAhPT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcUNvbmYgPSAkcS5jb25maWdbIGNvcmRvdmEgPT09IHRydWUgPyAnY29yZG92YScgOiAnY2FwYWNpdG9yJyBdXG5cbiAgICBpZiAocUNvbmYgIT09IHZvaWQgMCAmJiBxQ29uZi5iYWNrQnV0dG9uID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gaWYgdGhlICdAY2FwYWNpdG9yL2FwcCcgcGx1Z2luIGlzIG5vdCBpbnN0YWxsZWRcbiAgICAvLyB0aGVuIHdlIGdvdCBub3RoaW5nIHRvIGRvXG4gICAgaWYgKFxuICAgICAgLy8gaWYgd2UncmUgb24gQ2FwYWNpdG9yIG1vZGVcbiAgICAgIGNhcGFjaXRvciA9PT0gdHJ1ZVxuICAgICAgLy8gYW5kIGl0J3MgYWxzbyBub3QgaW4gQ2FwYWNpdG9yJ3MgbWFpbiBpbnN0YW5jZVxuICAgICAgJiYgKHdpbmRvdy5DYXBhY2l0b3IgPT09IHZvaWQgMCB8fCB3aW5kb3cuQ2FwYWNpdG9yLlBsdWdpbnMuQXBwID09PSB2b2lkIDApXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLmFkZCA9IGVudHJ5ID0+IHtcbiAgICAgIGlmIChlbnRyeS5jb25kaXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgICBlbnRyeS5jb25kaXRpb24gPSBnZXRUcnVlXG4gICAgICB9XG4gICAgICB0aGlzLl9faGlzdG9yeS5wdXNoKGVudHJ5KVxuICAgIH1cblxuICAgIHRoaXMucmVtb3ZlID0gZW50cnkgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9faGlzdG9yeS5pbmRleE9mKGVudHJ5KVxuICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgdGhpcy5fX2hpc3Rvcnkuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNob3VsZEV4aXQgPSBnZXRTaG91bGRFeGl0Rm4oXG4gICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICB7IGJhY2tCdXR0b25FeGl0OiB0cnVlIH0sXG4gICAgICAgIHFDb25mXG4gICAgICApXG4gICAgKVxuXG4gICAgY29uc3QgYmFja0hhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fX2hpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5fX2hpc3RvcnlbIHRoaXMuX19oaXN0b3J5Lmxlbmd0aCAtIDEgXVxuXG4gICAgICAgIGlmIChlbnRyeS5jb25kaXRpb24oKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuX19oaXN0b3J5LnBvcCgpXG4gICAgICAgICAgZW50cnkuaGFuZGxlcigpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHNob3VsZEV4aXQoKSA9PT0gdHJ1ZSkge1xuICAgICAgICBuYXZpZ2F0b3IuYXBwLmV4aXRBcHAoKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb3Jkb3ZhID09PSB0cnVlKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VyZWFkeScsICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmFja2J1dHRvbicsIGJhY2tIYW5kbGVyLCBmYWxzZSlcbiAgICAgIH0pXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgd2luZG93LkNhcGFjaXRvci5QbHVnaW5zLkFwcC5hZGRMaXN0ZW5lcignYmFja0J1dHRvbicsIGJhY2tIYW5kbGVyKVxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBpc29OYW1lOiAnZW4tVVMnLFxuICBuYXRpdmVOYW1lOiAnRW5nbGlzaCAoVVMpJyxcbiAgbGFiZWw6IHtcbiAgICBjbGVhcjogJ0NsZWFyJyxcbiAgICBvazogJ09LJyxcbiAgICBjYW5jZWw6ICdDYW5jZWwnLFxuICAgIGNsb3NlOiAnQ2xvc2UnLFxuICAgIHNldDogJ1NldCcsXG4gICAgc2VsZWN0OiAnU2VsZWN0JyxcbiAgICByZXNldDogJ1Jlc2V0JyxcbiAgICByZW1vdmU6ICdSZW1vdmUnLFxuICAgIHVwZGF0ZTogJ1VwZGF0ZScsXG4gICAgY3JlYXRlOiAnQ3JlYXRlJyxcbiAgICBzZWFyY2g6ICdTZWFyY2gnLFxuICAgIGZpbHRlcjogJ0ZpbHRlcicsXG4gICAgcmVmcmVzaDogJ1JlZnJlc2gnLFxuICAgIGV4cGFuZDogbGFiZWwgPT4gKGxhYmVsID8gYEV4cGFuZCBcIiR7IGxhYmVsIH1cImAgOiAnRXhwYW5kJyksXG4gICAgY29sbGFwc2U6IGxhYmVsID0+IChsYWJlbCA/IGBDb2xsYXBzZSBcIiR7IGxhYmVsIH1cImAgOiAnQ29sbGFwc2UnKVxuICB9LFxuICBkYXRlOiB7XG4gICAgZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICAgIGRheXNTaG9ydDogJ1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKSxcbiAgICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gICAgZmlyc3REYXlPZldlZWs6IDAsIC8vIDAtNiwgMCAtIFN1bmRheSwgMSBNb25kYXksIC4uLlxuICAgIGZvcm1hdDI0aDogZmFsc2UsXG4gICAgcGx1cmFsRGF5OiAnZGF5cydcbiAgfSxcbiAgdGFibGU6IHtcbiAgICBub0RhdGE6ICdObyBkYXRhIGF2YWlsYWJsZScsXG4gICAgbm9SZXN1bHRzOiAnTm8gbWF0Y2hpbmcgcmVjb3JkcyBmb3VuZCcsXG4gICAgbG9hZGluZzogJ0xvYWRpbmcuLi4nLFxuICAgIHNlbGVjdGVkUmVjb3Jkczogcm93cyA9PiAoXG4gICAgICByb3dzID09PSAxXG4gICAgICAgID8gJzEgcmVjb3JkIHNlbGVjdGVkLidcbiAgICAgICAgOiAocm93cyA9PT0gMCA/ICdObycgOiByb3dzKSArICcgcmVjb3JkcyBzZWxlY3RlZC4nXG4gICAgKSxcbiAgICByZWNvcmRzUGVyUGFnZTogJ1JlY29yZHMgcGVyIHBhZ2U6JyxcbiAgICBhbGxSb3dzOiAnQWxsJyxcbiAgICBwYWdpbmF0aW9uOiAoc3RhcnQsIGVuZCwgdG90YWwpID0+IHN0YXJ0ICsgJy0nICsgZW5kICsgJyBvZiAnICsgdG90YWwsXG4gICAgY29sdW1uczogJ0NvbHVtbnMnXG4gIH0sXG4gIGVkaXRvcjoge1xuICAgIHVybDogJ1VSTCcsXG4gICAgYm9sZDogJ0JvbGQnLFxuICAgIGl0YWxpYzogJ0l0YWxpYycsXG4gICAgc3RyaWtldGhyb3VnaDogJ1N0cmlrZXRocm91Z2gnLFxuICAgIHVuZGVybGluZTogJ1VuZGVybGluZScsXG4gICAgdW5vcmRlcmVkTGlzdDogJ1Vub3JkZXJlZCBMaXN0JyxcbiAgICBvcmRlcmVkTGlzdDogJ09yZGVyZWQgTGlzdCcsXG4gICAgc3Vic2NyaXB0OiAnU3Vic2NyaXB0JyxcbiAgICBzdXBlcnNjcmlwdDogJ1N1cGVyc2NyaXB0JyxcbiAgICBoeXBlcmxpbms6ICdIeXBlcmxpbmsnLFxuICAgIHRvZ2dsZUZ1bGxzY3JlZW46ICdUb2dnbGUgRnVsbHNjcmVlbicsXG4gICAgcXVvdGU6ICdRdW90ZScsXG4gICAgbGVmdDogJ0xlZnQgYWxpZ24nLFxuICAgIGNlbnRlcjogJ0NlbnRlciBhbGlnbicsXG4gICAgcmlnaHQ6ICdSaWdodCBhbGlnbicsXG4gICAganVzdGlmeTogJ0p1c3RpZnkgYWxpZ24nLFxuICAgIHByaW50OiAnUHJpbnQnLFxuICAgIG91dGRlbnQ6ICdEZWNyZWFzZSBpbmRlbnRhdGlvbicsXG4gICAgaW5kZW50OiAnSW5jcmVhc2UgaW5kZW50YXRpb24nLFxuICAgIHJlbW92ZUZvcm1hdDogJ1JlbW92ZSBmb3JtYXR0aW5nJyxcbiAgICBmb3JtYXR0aW5nOiAnRm9ybWF0dGluZycsXG4gICAgZm9udFNpemU6ICdGb250IFNpemUnLFxuICAgIGFsaWduOiAnQWxpZ24nLFxuICAgIGhyOiAnSW5zZXJ0IEhvcml6b250YWwgUnVsZScsXG4gICAgdW5kbzogJ1VuZG8nLFxuICAgIHJlZG86ICdSZWRvJyxcbiAgICBoZWFkaW5nMTogJ0hlYWRpbmcgMScsXG4gICAgaGVhZGluZzI6ICdIZWFkaW5nIDInLFxuICAgIGhlYWRpbmczOiAnSGVhZGluZyAzJyxcbiAgICBoZWFkaW5nNDogJ0hlYWRpbmcgNCcsXG4gICAgaGVhZGluZzU6ICdIZWFkaW5nIDUnLFxuICAgIGhlYWRpbmc2OiAnSGVhZGluZyA2JyxcbiAgICBwYXJhZ3JhcGg6ICdQYXJhZ3JhcGgnLFxuICAgIGNvZGU6ICdDb2RlJyxcbiAgICBzaXplMTogJ1Zlcnkgc21hbGwnLFxuICAgIHNpemUyOiAnQSBiaXQgc21hbGwnLFxuICAgIHNpemUzOiAnTm9ybWFsJyxcbiAgICBzaXplNDogJ01lZGl1bS1sYXJnZScsXG4gICAgc2l6ZTU6ICdCaWcnLFxuICAgIHNpemU2OiAnVmVyeSBiaWcnLFxuICAgIHNpemU3OiAnTWF4aW11bScsXG4gICAgZGVmYXVsdEZvbnQ6ICdEZWZhdWx0IEZvbnQnLFxuICAgIHZpZXdTb3VyY2U6ICdWaWV3IFNvdXJjZSdcbiAgfSxcbiAgdHJlZToge1xuICAgIG5vTm9kZXM6ICdObyBub2RlcyBhdmFpbGFibGUnLFxuICAgIG5vUmVzdWx0czogJ05vIG1hdGNoaW5nIG5vZGVzIGZvdW5kJ1xuICB9XG59XG4iLCJpbXBvcnQgZGVmaW5lUmVhY3RpdmVQbHVnaW4gZnJvbSAnLi91dGlscy9wcml2YXRlL2RlZmluZS1yZWFjdGl2ZS1wbHVnaW4uanMnXG4vLyBubyBleHRlbnNpb24gb24gcHVycG9zZSBmb3IgbmV4dCBvbmU6XG5pbXBvcnQgZGVmYXVsdExhbmcgZnJvbSAnLi4vbGFuZy9lbi1VUydcblxuZnVuY3Rpb24gZ2V0TG9jYWxlICgpIHtcbiAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykgeyByZXR1cm4gfVxuXG4gIGNvbnN0IHZhbCA9IEFycmF5LmlzQXJyYXkobmF2aWdhdG9yLmxhbmd1YWdlcykgPT09IHRydWUgJiYgbmF2aWdhdG9yLmxhbmd1YWdlcy5sZW5ndGggPiAwXG4gICAgPyBuYXZpZ2F0b3IubGFuZ3VhZ2VzWyAwIF1cbiAgICA6IG5hdmlnYXRvci5sYW5ndWFnZVxuXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWwuc3BsaXQoL1stX10vKS5tYXAoKHYsIGkpID0+IChcbiAgICAgIGkgPT09IDBcbiAgICAgICAgPyB2LnRvTG93ZXJDYXNlKClcbiAgICAgICAgOiAoXG4gICAgICAgICAgICBpID4gMSB8fCB2Lmxlbmd0aCA8IDRcbiAgICAgICAgICAgICAgPyB2LnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgOiAodlsgMCBdLnRvVXBwZXJDYXNlKCkgKyB2LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgKVxuICAgICkpLmpvaW4oJy0nKVxuICB9XG59XG5cbmNvbnN0IFBsdWdpbiA9IGRlZmluZVJlYWN0aXZlUGx1Z2luKHtcbiAgX19sYW5nUGFjazoge31cbn0sIHtcbiAgZ2V0TG9jYWxlLFxuXG4gIHNldCAobGFuZ09iamVjdCA9IGRlZmF1bHRMYW5nLCBzc3JDb250ZXh0KSB7XG4gICAgY29uc3QgbGFuZyA9IHtcbiAgICAgIC4uLmxhbmdPYmplY3QsXG4gICAgICBydGw6IGxhbmdPYmplY3QucnRsID09PSB0cnVlLFxuICAgICAgZ2V0TG9jYWxlXG4gICAgfVxuXG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgaWYgKHNzckNvbnRleHQgPT09IHZvaWQgMCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTU1IgRVJST1I6IHNlY29uZCBwYXJhbSByZXF1aXJlZDogUXVhc2FyLmxhbmcuc2V0KGxhbmcsIHNzckNvbnRleHQpJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGxhbmcuc2V0ID0gc3NyQ29udGV4dC4kcS5sYW5nLnNldFxuXG4gICAgICBpZiAoc3NyQ29udGV4dC4kcS5jb25maWcubGFuZyA9PT0gdm9pZCAwIHx8IHNzckNvbnRleHQuJHEuY29uZmlnLmxhbmcubm9IdG1sQXR0cnMgIT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgZGlyID0gbGFuZy5ydGwgPT09IHRydWUgPyAncnRsJyA6ICdsdHInXG4gICAgICAgIGNvbnN0IGF0dHJzID0gYGxhbmc9JHsgbGFuZy5pc29OYW1lIH0gZGlyPSR7IGRpciB9YFxuXG4gICAgICAgIHNzckNvbnRleHQuX21ldGEuaHRtbEF0dHJzID0gc3NyQ29udGV4dC5fX3FQcmV2TGFuZyAhPT0gdm9pZCAwXG4gICAgICAgICAgPyBzc3JDb250ZXh0Ll9tZXRhLmh0bWxBdHRycy5yZXBsYWNlKHNzckNvbnRleHQuX19xUHJldkxhbmcsIGF0dHJzKVxuICAgICAgICAgIDogYXR0cnNcblxuICAgICAgICBzc3JDb250ZXh0Ll9fcVByZXZMYW5nID0gYXR0cnNcbiAgICAgIH1cblxuICAgICAgc3NyQ29udGV4dC4kcS5sYW5nID0gbGFuZ1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxhbmcuc2V0ID0gUGx1Z2luLnNldFxuXG4gICAgICBpZiAoUGx1Z2luLl9fbGFuZ0NvbmZpZyA9PT0gdm9pZCAwIHx8IFBsdWdpbi5fX2xhbmdDb25maWcubm9IdG1sQXR0cnMgIT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkaXInLCBsYW5nLnJ0bCA9PT0gdHJ1ZSA/ICdydGwnIDogJ2x0cicpXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnbGFuZycsIGxhbmcuaXNvTmFtZSlcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmFzc2lnbihQbHVnaW4uX19sYW5nUGFjaywgbGFuZylcblxuICAgICAgUGx1Z2luLnByb3BzID0gbGFuZ1xuICAgICAgUGx1Z2luLmlzb05hbWUgPSBsYW5nLmlzb05hbWVcbiAgICAgIFBsdWdpbi5uYXRpdmVOYW1lID0gbGFuZy5uYXRpdmVOYW1lXG4gICAgfVxuICB9LFxuXG4gIGluc3RhbGwgKHsgJHEsIGxhbmcsIHNzckNvbnRleHQgfSkge1xuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHtcbiAgICAgIGNvbnN0IGluaXRpYWxMYW5nID0gbGFuZyB8fCBkZWZhdWx0TGFuZ1xuXG4gICAgICAkcS5sYW5nID0ge31cbiAgICAgICRxLmxhbmcuc2V0ID0gbGFuZ09iamVjdCA9PiB7XG4gICAgICAgIHRoaXMuc2V0KGxhbmdPYmplY3QsIHNzckNvbnRleHQpXG4gICAgICB9XG5cbiAgICAgICRxLmxhbmcuc2V0KGluaXRpYWxMYW5nKVxuXG4gICAgICAvLyBvbmUtdGltZSBTU1Igc2VydmVyIG9wZXJhdGlvblxuICAgICAgaWYgKHRoaXMuaXNvTmFtZSAhPT0gaW5pdGlhbExhbmcuaXNvTmFtZSkge1xuICAgICAgICB0aGlzLmlzb05hbWUgPSBpbml0aWFsTGFuZy5pc29OYW1lXG4gICAgICAgIHRoaXMubmF0aXZlTmFtZSA9IGluaXRpYWxMYW5nLm5hdGl2ZU5hbWVcbiAgICAgICAgdGhpcy5wcm9wcyA9IGluaXRpYWxMYW5nXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJHEubGFuZyA9IFBsdWdpbi5fX2xhbmdQYWNrXG4gICAgICBQbHVnaW4uX19sYW5nQ29uZmlnID0gJHEuY29uZmlnLmxhbmdcblxuICAgICAgaWYgKHRoaXMuX19pbnN0YWxsZWQgPT09IHRydWUpIHtcbiAgICAgICAgbGFuZyAhPT0gdm9pZCAwICYmIHRoaXMuc2V0KGxhbmcpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXQobGFuZyB8fCBkZWZhdWx0TGFuZylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pXG5cbmV4cG9ydCBkZWZhdWx0IFBsdWdpblxuZXhwb3J0IHsgZGVmYXVsdExhbmcgfVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0Q3NzVmFyIChwcm9wTmFtZSwgdmFsdWUsIGVsZW1lbnQgPSBkb2N1bWVudC5ib2R5KSB7XG4gIGlmICh0eXBlb2YgcHJvcE5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBzdHJpbmcgYXMgcHJvcE5hbWUnKVxuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBzdHJpbmcgYXMgdmFsdWUnKVxuICB9XG4gIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgRE9NIGVsZW1lbnQnKVxuICB9XG5cbiAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShgLS1xLSR7IHByb3BOYW1lIH1gLCB2YWx1ZSlcbn1cbiIsImxldCBsYXN0S2V5Q29tcG9zaXRpb25TdGF0dXMgPSBmYWxzZVxuXG5leHBvcnQgZnVuY3Rpb24gb25LZXlEb3duQ29tcG9zaXRpb24gKGV2dCkge1xuICBsYXN0S2V5Q29tcG9zaXRpb25TdGF0dXMgPSBldnQuaXNDb21wb3NpbmcgPT09IHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZElnbm9yZUtleSAoZXZ0KSB7XG4gIHJldHVybiBsYXN0S2V5Q29tcG9zaXRpb25TdGF0dXMgPT09IHRydWVcbiAgICB8fCBldnQgIT09IE9iamVjdChldnQpXG4gICAgfHwgZXZ0LmlzQ29tcG9zaW5nID09PSB0cnVlXG4gICAgfHwgZXZ0LnFLZXlFdmVudCA9PT0gdHJ1ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNLZXlDb2RlIChldnQsIGtleUNvZGVzKSB7XG4gIHJldHVybiBzaG91bGRJZ25vcmVLZXkoZXZ0KSA9PT0gdHJ1ZVxuICAgID8gZmFsc2VcbiAgICA6IFtdLmNvbmNhdChrZXlDb2RlcykuaW5jbHVkZXMoZXZ0LmtleUNvZGUpXG59XG4iLCJpbXBvcnQgc2V0Q3NzVmFyIGZyb20gJy4vdXRpbHMvc2V0LWNzcy12YXIuanMnXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IG9uS2V5RG93bkNvbXBvc2l0aW9uIH0gZnJvbSAnLi91dGlscy9wcml2YXRlL2tleS1jb21wb3NpdGlvbi5qcydcbmltcG9ydCB7IGlzUnVudGltZVNzclByZUh5ZHJhdGlvbiwgY2xpZW50LCBpb3NDb3JyZWN0aW9uIH0gZnJvbSAnLi9wbHVnaW5zL1BsYXRmb3JtLmpzJ1xuXG5mdW5jdGlvbiBnZXRNb2JpbGVQbGF0Zm9ybSAoaXMpIHtcbiAgaWYgKGlzLmlvcyA9PT0gdHJ1ZSkgcmV0dXJuICdpb3MnXG4gIGlmIChpcy5hbmRyb2lkID09PSB0cnVlKSByZXR1cm4gJ2FuZHJvaWQnXG59XG5cbmZ1bmN0aW9uIGdldEJvZHlDbGFzc2VzICh7IGlzLCBoYXMsIHdpdGhpbiB9LCBjZmcpIHtcbiAgY29uc3QgY2xzID0gW1xuICAgIGlzLmRlc2t0b3AgPT09IHRydWUgPyAnZGVza3RvcCcgOiAnbW9iaWxlJyxcbiAgICBgJHsgaGFzLnRvdWNoID09PSBmYWxzZSA/ICduby0nIDogJycgfXRvdWNoYFxuICBdXG5cbiAgaWYgKGlzLm1vYmlsZSA9PT0gdHJ1ZSkge1xuICAgIGNvbnN0IG1vYmlsZSA9IGdldE1vYmlsZVBsYXRmb3JtKGlzKVxuICAgIG1vYmlsZSAhPT0gdm9pZCAwICYmIGNscy5wdXNoKCdwbGF0Zm9ybS0nICsgbW9iaWxlKVxuICB9XG5cbiAgaWYgKGlzLm5hdGl2ZU1vYmlsZSA9PT0gdHJ1ZSkge1xuICAgIGNvbnN0IHR5cGUgPSBpcy5uYXRpdmVNb2JpbGVXcmFwcGVyXG5cbiAgICBjbHMucHVzaCh0eXBlKVxuICAgIGNscy5wdXNoKCduYXRpdmUtbW9iaWxlJylcblxuICAgIGlmIChcbiAgICAgIGlzLmlvcyA9PT0gdHJ1ZVxuICAgICAgJiYgKGNmZ1sgdHlwZSBdID09PSB2b2lkIDAgfHwgY2ZnWyB0eXBlIF0uaW9zU3RhdHVzQmFyUGFkZGluZyAhPT0gZmFsc2UpXG4gICAgKSB7XG4gICAgICBjbHMucHVzaCgncS1pb3MtcGFkZGluZycpXG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKGlzLmVsZWN0cm9uID09PSB0cnVlKSB7XG4gICAgY2xzLnB1c2goJ2VsZWN0cm9uJylcbiAgfVxuICBlbHNlIGlmIChpcy5iZXggPT09IHRydWUpIHtcbiAgICBjbHMucHVzaCgnYmV4JylcbiAgfVxuXG4gIHdpdGhpbi5pZnJhbWUgPT09IHRydWUgJiYgY2xzLnB1c2goJ3dpdGhpbi1pZnJhbWUnKVxuXG4gIHJldHVybiBjbHNcbn1cblxuZnVuY3Rpb24gYXBwbHlDbGllbnRTc3JDb3JyZWN0aW9ucyAoKSB7XG4gIGNvbnN0IHsgaXMgfSA9IGNsaWVudFxuICBjb25zdCBjbGFzc2VzID0gZG9jdW1lbnQuYm9keS5jbGFzc05hbWVcblxuICBjb25zdCBjbGFzc0xpc3QgPSBuZXcgU2V0KGNsYXNzZXMucmVwbGFjZSgvIHsyfS9nLCAnICcpLnNwbGl0KCcgJykpXG5cbiAgaWYgKGlvc0NvcnJlY3Rpb24gIT09IHZvaWQgMCkge1xuICAgIGNsYXNzTGlzdC5kZWxldGUoJ2Rlc2t0b3AnKVxuICAgIGNsYXNzTGlzdC5hZGQoJ3BsYXRmb3JtLWlvcycpXG4gICAgY2xhc3NMaXN0LmFkZCgnbW9iaWxlJylcbiAgfVxuICAvLyBlbHNlOiBpcyBpdCBTU0c/XG4gIGVsc2UgaWYgKGlzLm5hdGl2ZU1vYmlsZSAhPT0gdHJ1ZSAmJiBpcy5lbGVjdHJvbiAhPT0gdHJ1ZSAmJiBpcy5iZXggIT09IHRydWUpIHtcbiAgICBpZiAoaXMuZGVza3RvcCA9PT0gdHJ1ZSkge1xuICAgICAgY2xhc3NMaXN0LmRlbGV0ZSgnbW9iaWxlJylcbiAgICAgIGNsYXNzTGlzdC5kZWxldGUoJ3BsYXRmb3JtLWlvcycpXG4gICAgICBjbGFzc0xpc3QuZGVsZXRlKCdwbGF0Zm9ybS1hbmRyb2lkJylcbiAgICAgIGNsYXNzTGlzdC5hZGQoJ2Rlc2t0b3AnKVxuICAgIH1cbiAgICBlbHNlIGlmIChpcy5tb2JpbGUgPT09IHRydWUpIHtcbiAgICAgIGNsYXNzTGlzdC5kZWxldGUoJ2Rlc2t0b3AnKVxuICAgICAgY2xhc3NMaXN0LmFkZCgnbW9iaWxlJylcblxuICAgICAgY29uc3QgbW9iaWxlID0gZ2V0TW9iaWxlUGxhdGZvcm0oaXMpXG4gICAgICBpZiAobW9iaWxlICE9PSB2b2lkIDApIHtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChgcGxhdGZvcm0tJHsgbW9iaWxlIH1gKVxuICAgICAgICBjbGFzc0xpc3QuZGVsZXRlKGBwbGF0Zm9ybS0keyBtb2JpbGUgPT09ICdpb3MnID8gJ2FuZHJvaWQnIDogJ2lvcycgfWApXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY2xhc3NMaXN0LmRlbGV0ZSgncGxhdGZvcm0taW9zJylcbiAgICAgICAgY2xhc3NMaXN0LmRlbGV0ZSgncGxhdGZvcm0tYW5kcm9pZCcpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGNsaWVudC5oYXMudG91Y2ggPT09IHRydWUpIHtcbiAgICBjbGFzc0xpc3QuZGVsZXRlKCduby10b3VjaCcpXG4gICAgY2xhc3NMaXN0LmFkZCgndG91Y2gnKVxuICB9XG5cbiAgaWYgKGNsaWVudC53aXRoaW4uaWZyYW1lID09PSB0cnVlKSB7XG4gICAgY2xhc3NMaXN0LmFkZCgnd2l0aGluLWlmcmFtZScpXG4gIH1cblxuICBjb25zdCBuZXdDbHMgPSBBcnJheS5mcm9tKGNsYXNzTGlzdCkuam9pbignICcpXG5cbiAgaWYgKGNsYXNzZXMgIT09IG5ld0Nscykge1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lID0gbmV3Q2xzXG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0Q29sb3JzIChicmFuZCkge1xuICBmb3IgKGNvbnN0IGNvbG9yIGluIGJyYW5kKSB7XG4gICAgc2V0Q3NzVmFyKGNvbG9yLCBicmFuZFsgY29sb3IgXSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGluc3RhbGwgKG9wdHMpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgICBjb25zdCB7ICRxLCBzc3JDb250ZXh0IH0gPSBvcHRzXG4gICAgICBjb25zdCBjbHMgPSBnZXRCb2R5Q2xhc3NlcygkcS5wbGF0Zm9ybSwgJHEuY29uZmlnKVxuXG4gICAgICBpZiAoJHEuY29uZmlnLnNjcmVlbiAhPT0gdm9pZCAwICYmICRxLmNvbmZpZy5zY3JlZW4uYm9keUNsYXNzID09PSB0cnVlKSB7XG4gICAgICAgIGNscy5wdXNoKCdzY3JlZW4tLXhzJylcbiAgICAgIH1cblxuICAgICAgc3NyQ29udGV4dC5fbWV0YS5ib2R5Q2xhc3NlcyArPSBjbHMuam9pbignICcpXG5cbiAgICAgIGNvbnN0IGJyYW5kID0gJHEuY29uZmlnLmJyYW5kXG4gICAgICBpZiAoYnJhbmQgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCB2YXJzID0gT2JqZWN0LmtleXMoYnJhbmQpXG4gICAgICAgICAgLm1hcChrZXkgPT4gYC0tcS0keyBrZXkgfTokeyBicmFuZFsga2V5IF0gfTtgKVxuICAgICAgICAgIC5qb2luKCcnKVxuXG4gICAgICAgIHNzckNvbnRleHQuX21ldGEuZW5kaW5nSGVhZFRhZ3MgKz0gYDxzdHlsZT46cm9vdHskeyB2YXJzIH19PC9zdHlsZT5gXG4gICAgICB9XG5cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0aGlzLl9faW5zdGFsbGVkID09PSB0cnVlKSB7IHJldHVybiB9XG5cbiAgICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBhcHBseUNsaWVudFNzckNvcnJlY3Rpb25zKClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCB7ICRxIH0gPSBvcHRzXG5cbiAgICAgICRxLmNvbmZpZy5icmFuZCAhPT0gdm9pZCAwICYmIHNldENvbG9ycygkcS5jb25maWcuYnJhbmQpXG5cbiAgICAgIGNvbnN0IGNscyA9IGdldEJvZHlDbGFzc2VzKGNsaWVudCwgJHEuY29uZmlnKVxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkLmFwcGx5KGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LCBjbHMpXG4gICAgfVxuXG4gICAgaWYgKGNsaWVudC5pcy5pb3MgPT09IHRydWUpIHtcbiAgICAgIC8vIG5lZWRlZCBmb3IgaU9TIGJ1dHRvbiBhY3RpdmUgc3RhdGVcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG5vb3ApXG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd25Db21wb3NpdGlvbiwgdHJ1ZSlcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnbWF0ZXJpYWwtaWNvbnMnLFxuICB0eXBlOiB7XG4gICAgcG9zaXRpdmU6ICdjaGVja19jaXJjbGUnLFxuICAgIG5lZ2F0aXZlOiAnd2FybmluZycsXG4gICAgaW5mbzogJ2luZm8nLFxuICAgIHdhcm5pbmc6ICdwcmlvcml0eV9oaWdoJ1xuICB9LFxuICBhcnJvdzoge1xuICAgIHVwOiAnYXJyb3dfdXB3YXJkJyxcbiAgICByaWdodDogJ2Fycm93X2ZvcndhcmQnLFxuICAgIGRvd246ICdhcnJvd19kb3dud2FyZCcsXG4gICAgbGVmdDogJ2Fycm93X2JhY2snLFxuICAgIGRyb3Bkb3duOiAnYXJyb3dfZHJvcF9kb3duJ1xuICB9LFxuICBjaGV2cm9uOiB7XG4gICAgbGVmdDogJ2NoZXZyb25fbGVmdCcsXG4gICAgcmlnaHQ6ICdjaGV2cm9uX3JpZ2h0J1xuICB9LFxuICBjb2xvclBpY2tlcjoge1xuICAgIHNwZWN0cnVtOiAnZ3JhZGllbnQnLFxuICAgIHR1bmU6ICd0dW5lJyxcbiAgICBwYWxldHRlOiAnc3R5bGUnXG4gIH0sXG4gIHB1bGxUb1JlZnJlc2g6IHtcbiAgICBpY29uOiAncmVmcmVzaCdcbiAgfSxcbiAgY2Fyb3VzZWw6IHtcbiAgICBsZWZ0OiAnY2hldnJvbl9sZWZ0JyxcbiAgICByaWdodDogJ2NoZXZyb25fcmlnaHQnLFxuICAgIHVwOiAna2V5Ym9hcmRfYXJyb3dfdXAnLFxuICAgIGRvd246ICdrZXlib2FyZF9hcnJvd19kb3duJyxcbiAgICBuYXZpZ2F0aW9uSWNvbjogJ2xlbnMnXG4gIH0sXG4gIGNoaXA6IHtcbiAgICByZW1vdmU6ICdjYW5jZWwnLFxuICAgIHNlbGVjdGVkOiAnY2hlY2snXG4gIH0sXG4gIGRhdGV0aW1lOiB7XG4gICAgYXJyb3dMZWZ0OiAnY2hldnJvbl9sZWZ0JyxcbiAgICBhcnJvd1JpZ2h0OiAnY2hldnJvbl9yaWdodCcsXG4gICAgbm93OiAnYWNjZXNzX3RpbWUnLFxuICAgIHRvZGF5OiAndG9kYXknXG4gIH0sXG4gIGVkaXRvcjoge1xuICAgIGJvbGQ6ICdmb3JtYXRfYm9sZCcsXG4gICAgaXRhbGljOiAnZm9ybWF0X2l0YWxpYycsXG4gICAgc3RyaWtldGhyb3VnaDogJ3N0cmlrZXRocm91Z2hfcycsXG4gICAgdW5kZXJsaW5lOiAnZm9ybWF0X3VuZGVybGluZWQnLFxuICAgIHVub3JkZXJlZExpc3Q6ICdmb3JtYXRfbGlzdF9idWxsZXRlZCcsXG4gICAgb3JkZXJlZExpc3Q6ICdmb3JtYXRfbGlzdF9udW1iZXJlZCcsXG4gICAgc3Vic2NyaXB0OiAndmVydGljYWxfYWxpZ25fYm90dG9tJyxcbiAgICBzdXBlcnNjcmlwdDogJ3ZlcnRpY2FsX2FsaWduX3RvcCcsXG4gICAgaHlwZXJsaW5rOiAnbGluaycsXG4gICAgdG9nZ2xlRnVsbHNjcmVlbjogJ2Z1bGxzY3JlZW4nLFxuICAgIHF1b3RlOiAnZm9ybWF0X3F1b3RlJyxcbiAgICBsZWZ0OiAnZm9ybWF0X2FsaWduX2xlZnQnLFxuICAgIGNlbnRlcjogJ2Zvcm1hdF9hbGlnbl9jZW50ZXInLFxuICAgIHJpZ2h0OiAnZm9ybWF0X2FsaWduX3JpZ2h0JyxcbiAgICBqdXN0aWZ5OiAnZm9ybWF0X2FsaWduX2p1c3RpZnknLFxuICAgIHByaW50OiAncHJpbnQnLFxuICAgIG91dGRlbnQ6ICdmb3JtYXRfaW5kZW50X2RlY3JlYXNlJyxcbiAgICBpbmRlbnQ6ICdmb3JtYXRfaW5kZW50X2luY3JlYXNlJyxcbiAgICByZW1vdmVGb3JtYXQ6ICdmb3JtYXRfY2xlYXInLFxuICAgIGZvcm1hdHRpbmc6ICd0ZXh0X2Zvcm1hdCcsXG4gICAgZm9udFNpemU6ICdmb3JtYXRfc2l6ZScsXG4gICAgYWxpZ246ICdmb3JtYXRfYWxpZ25fbGVmdCcsXG4gICAgaHI6ICdyZW1vdmUnLFxuICAgIHVuZG86ICd1bmRvJyxcbiAgICByZWRvOiAncmVkbycsXG4gICAgaGVhZGluZzogJ2Zvcm1hdF9zaXplJyxcbiAgICBjb2RlOiAnY29kZScsXG4gICAgc2l6ZTogJ2Zvcm1hdF9zaXplJyxcbiAgICBmb250OiAnZm9udF9kb3dubG9hZCcsXG4gICAgdmlld1NvdXJjZTogJ2NvZGUnXG4gIH0sXG4gIGV4cGFuc2lvbkl0ZW06IHtcbiAgICBpY29uOiAna2V5Ym9hcmRfYXJyb3dfZG93bicsXG4gICAgZGVuc2VJY29uOiAnYXJyb3dfZHJvcF9kb3duJ1xuICB9LFxuICBmYWI6IHtcbiAgICBpY29uOiAnYWRkJyxcbiAgICBhY3RpdmVJY29uOiAnY2xvc2UnXG4gIH0sXG4gIGZpZWxkOiB7XG4gICAgY2xlYXI6ICdjYW5jZWwnLFxuICAgIGVycm9yOiAnZXJyb3InXG4gIH0sXG4gIHBhZ2luYXRpb246IHtcbiAgICBmaXJzdDogJ2ZpcnN0X3BhZ2UnLFxuICAgIHByZXY6ICdrZXlib2FyZF9hcnJvd19sZWZ0JyxcbiAgICBuZXh0OiAna2V5Ym9hcmRfYXJyb3dfcmlnaHQnLFxuICAgIGxhc3Q6ICdsYXN0X3BhZ2UnXG4gIH0sXG4gIHJhdGluZzoge1xuICAgIGljb246ICdncmFkZSdcbiAgfSxcbiAgc3RlcHBlcjoge1xuICAgIGRvbmU6ICdjaGVjaycsXG4gICAgYWN0aXZlOiAnZWRpdCcsXG4gICAgZXJyb3I6ICd3YXJuaW5nJ1xuICB9LFxuICB0YWJzOiB7XG4gICAgbGVmdDogJ2NoZXZyb25fbGVmdCcsXG4gICAgcmlnaHQ6ICdjaGV2cm9uX3JpZ2h0JyxcbiAgICB1cDogJ2tleWJvYXJkX2Fycm93X3VwJyxcbiAgICBkb3duOiAna2V5Ym9hcmRfYXJyb3dfZG93bidcbiAgfSxcbiAgdGFibGU6IHtcbiAgICBhcnJvd1VwOiAnYXJyb3dfdXB3YXJkJyxcbiAgICB3YXJuaW5nOiAnd2FybmluZycsXG4gICAgZmlyc3RQYWdlOiAnZmlyc3RfcGFnZScsXG4gICAgcHJldlBhZ2U6ICdjaGV2cm9uX2xlZnQnLFxuICAgIG5leHRQYWdlOiAnY2hldnJvbl9yaWdodCcsXG4gICAgbGFzdFBhZ2U6ICdsYXN0X3BhZ2UnXG4gIH0sXG4gIHRyZWU6IHtcbiAgICBpY29uOiAncGxheV9hcnJvdydcbiAgfSxcbiAgdXBsb2FkZXI6IHtcbiAgICBkb25lOiAnZG9uZScsXG4gICAgY2xlYXI6ICdjbGVhcicsXG4gICAgYWRkOiAnYWRkX2JveCcsXG4gICAgdXBsb2FkOiAnY2xvdWRfdXBsb2FkJyxcbiAgICByZW1vdmVRdWV1ZTogJ2NsZWFyX2FsbCcsXG4gICAgcmVtb3ZlVXBsb2FkZWQ6ICdkb25lX2FsbCdcbiAgfVxufVxuIiwiaW1wb3J0IGRlZmluZVJlYWN0aXZlUGx1Z2luIGZyb20gJy4vdXRpbHMvcHJpdmF0ZS9kZWZpbmUtcmVhY3RpdmUtcGx1Z2luLmpzJ1xuaW1wb3J0IHsgaW5qZWN0UHJvcCB9IGZyb20gJy4vdXRpbHMvcHJpdmF0ZS9pbmplY3Qtb2JqLXByb3AuanMnXG4vLyBubyBleHRlbnNpb24gb24gcHVycG9zZSBmb3IgbmV4dCBvbmU6XG5pbXBvcnQgbWF0ZXJpYWxJY29ucyBmcm9tICcuLi9pY29uLXNldC9tYXRlcmlhbC1pY29ucydcblxuY29uc3QgUGx1Z2luID0gZGVmaW5lUmVhY3RpdmVQbHVnaW4oe1xuICBpY29uTWFwRm46IG51bGwsXG4gIF9faWNvbnM6IHt9XG59LCB7XG4gIHNldCAoc2V0T2JqZWN0LCBzc3JDb250ZXh0KSB7XG4gICAgY29uc3QgZGVmID0geyAuLi5zZXRPYmplY3QsIHJ0bDogc2V0T2JqZWN0LnJ0bCA9PT0gdHJ1ZSB9XG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgICBpZiAoc3NyQ29udGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NTUiBFUlJPUjogc2Vjb25kIHBhcmFtIHJlcXVpcmVkOiBRdWFzYXIuaWNvblNldC5zZXQoaWNvblNldCwgc3NyQ29udGV4dCknKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgZGVmLnNldCA9IHNzckNvbnRleHQuJHEuaWNvblNldC5zZXRcbiAgICAgIE9iamVjdC5hc3NpZ24oc3NyQ29udGV4dC4kcS5pY29uU2V0LCBkZWYpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGVmLnNldCA9IFBsdWdpbi5zZXRcbiAgICAgIE9iamVjdC5hc3NpZ24oUGx1Z2luLl9faWNvbnMsIGRlZilcbiAgICB9XG4gIH0sXG5cbiAgaW5zdGFsbCAoeyAkcSwgaWNvblNldCwgc3NyQ29udGV4dCB9KSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgY29uc3QgaW5pdGlhbFNldCA9IGljb25TZXQgfHwgbWF0ZXJpYWxJY29uc1xuXG4gICAgICAkcS5pY29uTWFwRm4gPSBzc3JDb250ZXh0LiRxLmNvbmZpZy5pY29uTWFwRm4gfHwgdGhpcy5pY29uTWFwRm4gfHwgbnVsbFxuICAgICAgJHEuaWNvblNldCA9IHt9XG4gICAgICAkcS5pY29uU2V0LnNldCA9IHNldE9iamVjdCA9PiB7XG4gICAgICAgIHRoaXMuc2V0KHNldE9iamVjdCwgc3NyQ29udGV4dClcbiAgICAgIH1cblxuICAgICAgJHEuaWNvblNldC5zZXQoaW5pdGlhbFNldClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoJHEuY29uZmlnLmljb25NYXBGbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHRoaXMuaWNvbk1hcEZuID0gJHEuY29uZmlnLmljb25NYXBGblxuICAgICAgfVxuXG4gICAgICAkcS5pY29uU2V0ID0gdGhpcy5fX2ljb25zXG5cbiAgICAgIGluamVjdFByb3AoJHEsICdpY29uTWFwRm4nLCAoKSA9PiB0aGlzLmljb25NYXBGbiwgdmFsID0+IHsgdGhpcy5pY29uTWFwRm4gPSB2YWwgfSlcblxuICAgICAgaWYgKHRoaXMuX19pbnN0YWxsZWQgPT09IHRydWUpIHtcbiAgICAgICAgaWNvblNldCAhPT0gdm9pZCAwICYmIHRoaXMuc2V0KGljb25TZXQpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXQoaWNvblNldCB8fCBtYXRlcmlhbEljb25zKVxuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuZXhwb3J0IGRlZmF1bHQgUGx1Z2luXG4iLCJleHBvcnQgY29uc3QgcXVhc2FyS2V5ID0gJ19xXydcbmV4cG9ydCBjb25zdCB0aW1lbGluZUtleSA9ICdfcV90XydcbmV4cG9ydCBjb25zdCBzdGVwcGVyS2V5ID0gJ19xX3NfJ1xuZXhwb3J0IGNvbnN0IGxheW91dEtleSA9ICdfcV9sXydcbmV4cG9ydCBjb25zdCBwYWdlQ29udGFpbmVyS2V5ID0gJ19xX3BjXydcbmV4cG9ydCBjb25zdCBmYWJLZXkgPSAnX3FfZl8nXG5leHBvcnQgY29uc3QgZm9ybUtleSA9ICdfcV9mb18nXG5leHBvcnQgY29uc3QgdGFic0tleSA9ICdfcV90YWJzXydcbmV4cG9ydCBjb25zdCB1cGxvYWRlcktleSA9ICdfcV91XydcblxuZXhwb3J0IGNvbnN0IGVtcHR5UmVuZGVyRm4gPSAoKSA9PiB7fVxuIiwiXG5leHBvcnQgY29uc3QgZ2xvYmFsQ29uZmlnID0ge31cbmV4cG9ydCBsZXQgZ2xvYmFsQ29uZmlnSXNGcm96ZW4gPSBmYWxzZVxuXG5leHBvcnQgZnVuY3Rpb24gZnJlZXplR2xvYmFsQ29uZmlnICgpIHtcbiAgZ2xvYmFsQ29uZmlnSXNGcm96ZW4gPSB0cnVlXG59XG4iLCJcbmV4cG9ydCBmdW5jdGlvbiBpc0RlZXBFcXVhbCAoYSwgYikge1xuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBpZiAoYSAhPT0gbnVsbCAmJiBiICE9PSBudWxsICYmIHR5cGVvZiBhID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoYS5jb25zdHJ1Y3RvciAhPT0gYi5jb25zdHJ1Y3Rvcikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IGxlbmd0aCwgaVxuXG4gICAgaWYgKGEuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICBsZW5ndGggPSBhLmxlbmd0aFxuXG4gICAgICBpZiAobGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSB7XG4gICAgICAgIGlmIChpc0RlZXBFcXVhbChhWyBpIF0sIGJbIGkgXSkgIT09IHRydWUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhLmNvbnN0cnVjdG9yID09PSBNYXApIHtcbiAgICAgIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaSA9IGEuZW50cmllcygpLm5leHQoKVxuICAgICAgd2hpbGUgKGkuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICBpZiAoYi5oYXMoaS52YWx1ZVsgMCBdKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGkgPSBpLm5leHQoKVxuICAgICAgfVxuXG4gICAgICBpID0gYS5lbnRyaWVzKCkubmV4dCgpXG4gICAgICB3aGlsZSAoaS5kb25lICE9PSB0cnVlKSB7XG4gICAgICAgIGlmIChpc0RlZXBFcXVhbChpLnZhbHVlWyAxIF0sIGIuZ2V0KGkudmFsdWVbIDAgXSkpICE9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaSA9IGkubmV4dCgpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGEuY29uc3RydWN0b3IgPT09IFNldCkge1xuICAgICAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpID0gYS5lbnRyaWVzKCkubmV4dCgpXG4gICAgICB3aGlsZSAoaS5kb25lICE9PSB0cnVlKSB7XG4gICAgICAgIGlmIChiLmhhcyhpLnZhbHVlWyAwIF0pICE9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaSA9IGkubmV4dCgpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGEuYnVmZmVyICE9IG51bGwgJiYgYS5idWZmZXIuY29uc3RydWN0b3IgPT09IEFycmF5QnVmZmVyKSB7XG4gICAgICBsZW5ndGggPSBhLmxlbmd0aFxuXG4gICAgICBpZiAobGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSB7XG4gICAgICAgIGlmIChhWyBpIF0gIT09IGJbIGkgXSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGEuY29uc3RydWN0b3IgPT09IFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmZsYWdzID09PSBiLmZsYWdzXG4gICAgfVxuXG4gICAgaWYgKGEudmFsdWVPZiAhPT0gT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mKSB7XG4gICAgICByZXR1cm4gYS52YWx1ZU9mKCkgPT09IGIudmFsdWVPZigpXG4gICAgfVxuXG4gICAgaWYgKGEudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpIHtcbiAgICAgIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKVxuICAgIH1cblxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhKS5maWx0ZXIoa2V5ID0+IGFbIGtleSBdICE9PSB2b2lkIDApXG4gICAgbGVuZ3RoID0ga2V5cy5sZW5ndGhcblxuICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmZpbHRlcihrZXkgPT4gYlsga2V5IF0gIT09IHZvaWQgMCkubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgIGNvbnN0IGtleSA9IGtleXNbIGkgXVxuICAgICAgaWYgKGlzRGVlcEVxdWFsKGFbIGtleSBdLCBiWyBrZXkgXSkgIT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIHRydWUgaWYgYm90aCBOYU4sIGZhbHNlIG90aGVyd2lzZVxuICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG59XG5cbi8vIG5vdCBwZXJmZWN0LCBidXQgd2hhdCB3ZSBBUkUgaW50ZXJlc3RlZCBpcyBmb3IgQXJyYXlzIG5vdCB0byBzbGlwIGluXG4vLyBhcyBzcHJlYWQgb3BlcmF0b3Igd2lsbCBtZXNzIHRoaW5ncyB1cCBpbiB2YXJpb3VzIGFyZWFzXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QgKHYpIHtcbiAgcmV0dXJuIHYgIT09IG51bGwgJiYgdHlwZW9mIHYgPT09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkodikgIT09IHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGF0ZSAodikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHYpID09PSAnW29iamVjdCBEYXRlXSdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVnZXhwICh2KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodikgPT09ICdbb2JqZWN0IFJlZ0V4cF0nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlciAodikge1xuICByZXR1cm4gdHlwZW9mIHYgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHYpXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZGVlcEVxdWFsOiBpc0RlZXBFcXVhbCxcbiAgb2JqZWN0OiBpc09iamVjdCxcbiAgZGF0ZTogaXNEYXRlLFxuICByZWdleHA6IGlzUmVnZXhwLFxuICBudW1iZXI6IGlzTnVtYmVyXG59XG4iLCJpbXBvcnQgeyBjcmVhdGVBcHAgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBQbGF0Zm9ybSwgeyBpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24gfSBmcm9tICcuL3BsdWdpbnMvUGxhdGZvcm0uanMnXG5pbXBvcnQgU2NyZWVuIGZyb20gJy4vcGx1Z2lucy9TY3JlZW4uanMnXG5pbXBvcnQgRGFyayBmcm9tICcuL3BsdWdpbnMvRGFyay5qcydcbmltcG9ydCBIaXN0b3J5IGZyb20gJy4vaGlzdG9yeS5qcydcbmltcG9ydCBMYW5nIGZyb20gJy4vbGFuZy5qcydcbmltcG9ydCBCb2R5IGZyb20gJy4vYm9keS5qcydcbmltcG9ydCBJY29uU2V0IGZyb20gJy4vaWNvbi1zZXQuanMnXG5cbmltcG9ydCB7IHF1YXNhcktleSB9IGZyb20gJy4vdXRpbHMvcHJpdmF0ZS9zeW1ib2xzLmpzJ1xuaW1wb3J0IHsgZ2xvYmFsQ29uZmlnLCBnbG9iYWxDb25maWdJc0Zyb3plbiwgZnJlZXplR2xvYmFsQ29uZmlnIH0gZnJvbSAnLi91dGlscy9wcml2YXRlL2dsb2JhbC1jb25maWcuanMnXG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4vdXRpbHMvaXMuanMnXG5cbmNvbnN0IGF1dG9JbnN0YWxsZWRQbHVnaW5zID0gW1xuICBQbGF0Zm9ybSxcbiAgQm9keSxcbiAgRGFyayxcbiAgU2NyZWVuLFxuICBIaXN0b3J5LFxuICBMYW5nLFxuICBJY29uU2V0XG5dXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDaGlsZEFwcCAoYXBwQ2ZnLCBwYXJlbnRBcHApIHtcbiAgY29uc3QgYXBwID0gY3JlYXRlQXBwKGFwcENmZylcblxuICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMgPSBwYXJlbnRBcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXNcblxuICBjb25zdCB7IHJlbG9hZCwgLi4uYXBwQ29udGV4dCB9ID0gcGFyZW50QXBwLl9jb250ZXh0XG4gIE9iamVjdC5hc3NpZ24oYXBwLl9jb250ZXh0LCBhcHBDb250ZXh0KVxuXG4gIHJldHVybiBhcHBcbn1cblxuZnVuY3Rpb24gaW5zdGFsbFBsdWdpbnMgKHBsdWdpbk9wdHMsIHBsdWdpbkxpc3QpIHtcbiAgcGx1Z2luTGlzdC5mb3JFYWNoKFBsdWdpbiA9PiB7XG4gICAgUGx1Z2luLmluc3RhbGwocGx1Z2luT3B0cylcbiAgICBQbHVnaW4uX19pbnN0YWxsZWQgPSB0cnVlXG4gIH0pXG59XG5cbmZ1bmN0aW9uIHByZXBhcmVBcHAgKGFwcCwgdWlPcHRzLCBwbHVnaW5PcHRzKSB7XG4gIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcSA9IHBsdWdpbk9wdHMuJHFcbiAgYXBwLnByb3ZpZGUocXVhc2FyS2V5LCBwbHVnaW5PcHRzLiRxKVxuXG4gIGluc3RhbGxQbHVnaW5zKHBsdWdpbk9wdHMsIGF1dG9JbnN0YWxsZWRQbHVnaW5zKVxuXG4gIHVpT3B0cy5jb21wb25lbnRzICE9PSB2b2lkIDAgJiYgT2JqZWN0LnZhbHVlcyh1aU9wdHMuY29tcG9uZW50cykuZm9yRWFjaChjID0+IHtcbiAgICBpZiAoaXNPYmplY3QoYykgPT09IHRydWUgJiYgYy5uYW1lICE9PSB2b2lkIDApIHtcbiAgICAgIGFwcC5jb21wb25lbnQoYy5uYW1lLCBjKVxuICAgIH1cbiAgfSlcblxuICB1aU9wdHMuZGlyZWN0aXZlcyAhPT0gdm9pZCAwICYmIE9iamVjdC52YWx1ZXModWlPcHRzLmRpcmVjdGl2ZXMpLmZvckVhY2goZCA9PiB7XG4gICAgaWYgKGlzT2JqZWN0KGQpID09PSB0cnVlICYmIGQubmFtZSAhPT0gdm9pZCAwKSB7XG4gICAgICBhcHAuZGlyZWN0aXZlKGQubmFtZSwgZClcbiAgICB9XG4gIH0pXG5cbiAgdWlPcHRzLnBsdWdpbnMgIT09IHZvaWQgMCAmJiBpbnN0YWxsUGx1Z2lucyhcbiAgICBwbHVnaW5PcHRzLFxuICAgIE9iamVjdC52YWx1ZXModWlPcHRzLnBsdWdpbnMpLmZpbHRlcihcbiAgICAgIHAgPT4gdHlwZW9mIHAuaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJyAmJiBhdXRvSW5zdGFsbGVkUGx1Z2lucy5pbmNsdWRlcyhwKSA9PT0gZmFsc2VcbiAgICApXG4gIClcblxuICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgcGx1Z2luT3B0cy4kcS5vblNTUkh5ZHJhdGVkID0gKCkgPT4ge1xuICAgICAgcGx1Z2luT3B0cy5vblNTUkh5ZHJhdGVkLmZvckVhY2goZm4gPT4geyBmbigpIH0pXG4gICAgICBwbHVnaW5PcHRzLiRxLm9uU1NSSHlkcmF0ZWQgPSAoKSA9PiB7fVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyBmdW5jdGlvbiAocGFyZW50QXBwLCBvcHRzID0ge30sIHNzckNvbnRleHQpIHtcbiAgICBjb25zdCAkcSA9IHtcbiAgICAgIHZlcnNpb246IF9fUVVBU0FSX1ZFUlNJT05fXyxcbiAgICAgIGNvbmZpZzogb3B0cy5jb25maWcgfHwge31cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKHNzckNvbnRleHQsIHtcbiAgICAgICRxLFxuICAgICAgX21ldGE6IHtcbiAgICAgICAgaHRtbEF0dHJzOiAnJyxcbiAgICAgICAgaGVhZFRhZ3M6ICcnLFxuICAgICAgICBlbmRpbmdIZWFkVGFnczogJycsXG4gICAgICAgIGJvZHlDbGFzc2VzOiAnJyxcbiAgICAgICAgYm9keUF0dHJzOiAnZGF0YS1zZXJ2ZXItcmVuZGVyZWQnLFxuICAgICAgICBib2R5VGFnczogJydcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKHNzckNvbnRleHQuX21vZHVsZXMgPT09IHZvaWQgMCkge1xuICAgICAgLy8gbm90IE9LLiBtZWFucyB0aGUgU1NSIGJ1aWxkIGlzIG5vdCB1c2luZyBAcXVhc2FyL3Nzci1oZWxwZXJzLFxuICAgICAgLy8gYnV0IHdlIHNob3VsZG4ndCBjcmFzaCB0aGUgYXBwXG4gICAgICBzc3JDb250ZXh0Ll9tb2R1bGVzID0gW11cbiAgICB9XG5cbiAgICBpZiAoc3NyQ29udGV4dC5vblJlbmRlcmVkID09PSB2b2lkIDApIHtcbiAgICAgIC8vIG5vdCBPSy4gbWVhbnMgdGhlIFNTUiBidWlsZCBpcyBub3QgdXNpbmcgQHF1YXNhci9zc3ItaGVscGVycyxcbiAgICAgIC8vIGJ1dCB3ZSBzaG91bGRuJ3QgY3Jhc2ggdGhlIGFwcFxuICAgICAgc3NyQ29udGV4dC5vblJlbmRlcmVkID0gKCkgPT4ge31cbiAgICB9XG5cbiAgICBwYXJlbnRBcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuc3NyQ29udGV4dCA9IHNzckNvbnRleHRcblxuICAgIHByZXBhcmVBcHAocGFyZW50QXBwLCBvcHRzLCB7XG4gICAgICBwYXJlbnRBcHAsXG4gICAgICAkcSxcbiAgICAgIGxhbmc6IG9wdHMubGFuZyxcbiAgICAgIGljb25TZXQ6IG9wdHMuaWNvblNldCxcbiAgICAgIHNzckNvbnRleHRcbiAgICB9KVxuICB9XG4gIDogZnVuY3Rpb24gKHBhcmVudEFwcCwgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgJHEgPSB7IHZlcnNpb246IF9fUVVBU0FSX1ZFUlNJT05fXyB9XG5cbiAgICBpZiAoZ2xvYmFsQ29uZmlnSXNGcm96ZW4gPT09IGZhbHNlKSB7XG4gICAgICBpZiAob3B0cy5jb25maWcgIT09IHZvaWQgMCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGdsb2JhbENvbmZpZywgb3B0cy5jb25maWcpXG4gICAgICB9XG5cbiAgICAgICRxLmNvbmZpZyA9IHsgLi4uZ2xvYmFsQ29uZmlnIH1cbiAgICAgIGZyZWV6ZUdsb2JhbENvbmZpZygpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJHEuY29uZmlnID0gb3B0cy5jb25maWcgfHwge31cbiAgICB9XG5cbiAgICBwcmVwYXJlQXBwKHBhcmVudEFwcCwgb3B0cywge1xuICAgICAgcGFyZW50QXBwLFxuICAgICAgJHEsXG4gICAgICBsYW5nOiBvcHRzLmxhbmcsXG4gICAgICBpY29uU2V0OiBvcHRzLmljb25TZXQsXG4gICAgICBvblNTUkh5ZHJhdGVkOiBbXVxuICAgIH0pXG4gIH1cbiIsImltcG9ydCBpbnN0YWxsUXVhc2FyIGZyb20gJy4vaW5zdGFsbC1xdWFzYXIuanMnXG5pbXBvcnQgbGFuZyBmcm9tICcuL2xhbmcuanMnXG5pbXBvcnQgaWNvblNldCBmcm9tICcuL2ljb24tc2V0LmpzJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHZlcnNpb246IF9fUVVBU0FSX1ZFUlNJT05fXyxcbiAgaW5zdGFsbDogaW5zdGFsbFF1YXNhcixcbiAgbGFuZyxcbiAgaWNvblNldFxufVxuIiwiXG5leHBvcnQgZGVmYXVsdCAoc2ZjLCBwcm9wcykgPT4ge1xuICBjb25zdCB0YXJnZXQgPSBzZmMuX192Y2NPcHRzIHx8IHNmYztcbiAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIHByb3BzKSB7XG4gICAgdGFyZ2V0W2tleV0gPSB2YWw7XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cbiIsIi8vIEZ1bmN0aW9ucyBpbiB0aGlzIGZpbGUgYXJlIG5vLW9wLFxuLy8gIHRoZXkganVzdCB0YWtlIGEgY2FsbGJhY2sgZnVuY3Rpb24gYW5kIHJldHVybiBpdFxuLy8gVGhleSdyZSB1c2VkIHRvIGFwcGx5IHR5cGluZ3MgdG8gdGhlIGNhbGxiYWNrXG4vLyAgcGFyYW1ldGVycyBhbmQgcmV0dXJuIHZhbHVlIHdoZW4gdXNpbmcgUXVhc2FyIHdpdGggVHlwZVNjcmlwdFxuLy8gV2UgbmVlZCB0aGVzZSBpbiBgdWlgIGZvbGRlciB0byBtYWtlIGBxdWFzYXIvd3JhcHBlcmAgaW1wb3J0IHdvcmssXG4vLyAgYnV0IHRoZXkgYXJlIHVzZWZ1bCBvbmx5IGZvciBRdWFzYXIgQ0xJIHByb2plY3RzXG4vLyBUaGV5IGFyZSB0eXBlZCB2aWEgbW9kdWxlIGF1Z21lbnRhdGlvbiBieSBgQHF1YXNhci9hcHAtd2VicGFja2AgLyBgQHF1YXNhci9hcHAtdml0ZWBcblxuZXhwb3J0IGZ1bmN0aW9uIGJvb3QgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlIChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZUZldGNoIChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdXRlIChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlIChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNzck1pZGRsZXdhcmUgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmV4QmFja2dyb3VuZCAoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiZXhDb250ZW50IChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJleERvbSAoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrXG59XG5cbi8qKlxuICogQmVsb3cgb25seSBmb3IgQHF1YXNhci9hcHAtd2VicGFja1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzc3JQcm9kdWN0aW9uRXhwb3J0IChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuLyoqXG4gKiBCZWxvdyBvbmx5IGZvciBAcXVhc2FyL2FwcC12aXRlXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNzckNyZWF0ZSAoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzc3JMaXN0ZW4gKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3NyQ2xvc2UgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3NyU2VydmVTdGF0aWNDb250ZW50IChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNzclJlbmRlclByZWxvYWRUYWcgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuIiwiaW1wb3J0ICogYXMgVnVlIGZyb20gJ3Z1ZSdcblxudmFyIGlzVnVlMiA9IGZhbHNlXG52YXIgaXNWdWUzID0gdHJ1ZVxudmFyIFZ1ZTIgPSB1bmRlZmluZWRcblxuZnVuY3Rpb24gaW5zdGFsbCgpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQodGFyZ2V0LCBrZXksIHZhbCkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgdGFyZ2V0Lmxlbmd0aCA9IE1hdGgubWF4KHRhcmdldC5sZW5ndGgsIGtleSlcbiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSwgdmFsKVxuICAgIHJldHVybiB2YWxcbiAgfVxuICB0YXJnZXRba2V5XSA9IHZhbFxuICByZXR1cm4gdmFsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWwodGFyZ2V0LCBrZXkpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xuICAgIHRhcmdldC5zcGxpY2Uoa2V5LCAxKVxuICAgIHJldHVyblxuICB9XG4gIGRlbGV0ZSB0YXJnZXRba2V5XVxufVxuXG5leHBvcnQgKiBmcm9tICd2dWUnXG5leHBvcnQge1xuICBWdWUsXG4gIFZ1ZTIsXG4gIGlzVnVlMixcbiAgaXNWdWUzLFxuICBpbnN0YWxsLFxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldERldnRvb2xzR2xvYmFsSG9vaygpIHtcbiAgICByZXR1cm4gZ2V0VGFyZ2V0KCkuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgID8gd2luZG93XG4gICAgICAgIDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gZ2xvYmFsXG4gICAgICAgICAgICA6IHt9O1xufVxuZXhwb3J0IGNvbnN0IGlzUHJveHlBdmFpbGFibGUgPSB0eXBlb2YgUHJveHkgPT09ICdmdW5jdGlvbic7XG4iLCJleHBvcnQgY29uc3QgSE9PS19TRVRVUCA9ICdkZXZ0b29scy1wbHVnaW46c2V0dXAnO1xuZXhwb3J0IGNvbnN0IEhPT0tfUExVR0lOX1NFVFRJTkdTX1NFVCA9ICdwbHVnaW46c2V0dGluZ3M6c2V0JztcbiIsImxldCBzdXBwb3J0ZWQ7XG5sZXQgcGVyZjtcbmV4cG9ydCBmdW5jdGlvbiBpc1BlcmZvcm1hbmNlU3VwcG9ydGVkKCkge1xuICAgIHZhciBfYTtcbiAgICBpZiAoc3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wZXJmb3JtYW5jZSkge1xuICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBwZXJmID0gd2luZG93LnBlcmZvcm1hbmNlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiAoKF9hID0gZ2xvYmFsLnBlcmZfaG9va3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wZXJmb3JtYW5jZSkpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcGVyZiA9IGdsb2JhbC5wZXJmX2hvb2tzLnBlcmZvcm1hbmNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdXBwb3J0ZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiBpc1BlcmZvcm1hbmNlU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKTtcbn1cbiIsImltcG9ydCB7IEhPT0tfUExVR0lOX1NFVFRJTkdTX1NFVCB9IGZyb20gJy4vY29uc3QuanMnO1xuaW1wb3J0IHsgbm93IH0gZnJvbSAnLi90aW1lLmpzJztcbmV4cG9ydCBjbGFzcyBBcGlQcm94eSB7XG4gICAgY29uc3RydWN0b3IocGx1Z2luLCBob29rKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXRRdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLm9uUXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuaG9vayA9IGhvb2s7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IHt9O1xuICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlkIGluIHBsdWdpbi5zZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwbHVnaW4uc2V0dGluZ3NbaWRdO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRTZXR0aW5nc1tpZF0gPSBpdGVtLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhbFNldHRpbmdzU2F2ZUlkID0gYF9fdnVlLWRldnRvb2xzLXBsdWdpbi1zZXR0aW5nc19fJHtwbHVnaW4uaWR9YDtcbiAgICAgICAgbGV0IGN1cnJlbnRTZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRTZXR0aW5ncyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFNldHRpbmdzU2F2ZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnRTZXR0aW5ncywgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGdldFNldHRpbmdzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50U2V0dGluZ3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0U2V0dGluZ3ModmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbFNldHRpbmdzU2F2ZUlkLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBub29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncyA9IHZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5vdygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm93KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBpZiAoaG9vaykge1xuICAgICAgICAgICAgaG9vay5vbihIT09LX1BMVUdJTl9TRVRUSU5HU19TRVQsIChwbHVnaW5JZCwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luSWQgPT09IHRoaXMucGx1Z2luLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmFsbGJhY2tzLnNldFNldHRpbmdzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3hpZWRPbiA9IG5ldyBQcm94eSh7fSwge1xuICAgICAgICAgICAgZ2V0OiAoX3RhcmdldCwgcHJvcCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YXJnZXQub25bcHJvcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25RdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHByb3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb3hpZWRUYXJnZXQgPSBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgICAgIGdldDogKF90YXJnZXQsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0W3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9wID09PSAnb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3hpZWRPbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoT2JqZWN0LmtleXModGhpcy5mYWxsYmFja3MpLmluY2x1ZGVzKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRRdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHByb3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrc1twcm9wXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcHJvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZXRSZWFsVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMub25RdWV1ZSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQub25baXRlbS5tZXRob2RdKC4uLml0ZW0uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMudGFyZ2V0UXVldWUpIHtcbiAgICAgICAgICAgIGl0ZW0ucmVzb2x2ZShhd2FpdCB0aGlzLnRhcmdldFtpdGVtLm1ldGhvZF0oLi4uaXRlbS5hcmdzKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRUYXJnZXQsIGdldERldnRvb2xzR2xvYmFsSG9vaywgaXNQcm94eUF2YWlsYWJsZSB9IGZyb20gJy4vZW52LmpzJztcbmltcG9ydCB7IEhPT0tfU0VUVVAgfSBmcm9tICcuL2NvbnN0LmpzJztcbmltcG9ydCB7IEFwaVByb3h5IH0gZnJvbSAnLi9wcm94eS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2FwaS9pbmRleC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3BsdWdpbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3RpbWUuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwRGV2dG9vbHNQbHVnaW4ocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbikge1xuICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBwbHVnaW5EZXNjcmlwdG9yO1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFRhcmdldCgpO1xuICAgIGNvbnN0IGhvb2sgPSBnZXREZXZ0b29sc0dsb2JhbEhvb2soKTtcbiAgICBjb25zdCBlbmFibGVQcm94eSA9IGlzUHJveHlBdmFpbGFibGUgJiYgZGVzY3JpcHRvci5lbmFibGVFYXJseVByb3h5O1xuICAgIGlmIChob29rICYmICh0YXJnZXQuX19WVUVfREVWVE9PTFNfUExVR0lOX0FQSV9BVkFJTEFCTEVfXyB8fCAhZW5hYmxlUHJveHkpKSB7XG4gICAgICAgIGhvb2suZW1pdChIT09LX1NFVFVQLCBwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHByb3h5ID0gZW5hYmxlUHJveHkgPyBuZXcgQXBpUHJveHkoZGVzY3JpcHRvciwgaG9vaykgOiBudWxsO1xuICAgICAgICBjb25zdCBsaXN0ID0gdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX1BMVUdJTlNfXyA9IHRhcmdldC5fX1ZVRV9ERVZUT09MU19QTFVHSU5TX18gfHwgW107XG4gICAgICAgIGxpc3QucHVzaCh7XG4gICAgICAgICAgICBwbHVnaW5EZXNjcmlwdG9yOiBkZXNjcmlwdG9yLFxuICAgICAgICAgICAgc2V0dXBGbixcbiAgICAgICAgICAgIHByb3h5LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHByb3h5KVxuICAgICAgICAgICAgc2V0dXBGbihwcm94eS5wcm94aWVkVGFyZ2V0KTtcbiAgICB9XG59XG4iLCIvKiFcbiAgKiBwaW5pYSB2Mi4wLjI3XG4gICogKGMpIDIwMjIgRWR1YXJkbyBTYW4gTWFydGluIE1vcm90ZVxuICAqIEBsaWNlbnNlIE1JVFxuICAqL1xuaW1wb3J0IHsgZ2V0Q3VycmVudEluc3RhbmNlLCBpbmplY3QsIHRvUmF3LCB3YXRjaCwgdW5yZWYsIG1hcmtSYXcsIGVmZmVjdFNjb3BlLCByZWYsIGlzVnVlMiwgaXNSZWYsIGlzUmVhY3RpdmUsIHNldCwgZ2V0Q3VycmVudFNjb3BlLCBvblNjb3BlRGlzcG9zZSwgcmVhY3RpdmUsIHRvUmVmLCBkZWwsIG5leHRUaWNrLCBjb21wdXRlZCwgdG9SZWZzIH0gZnJvbSAndnVlLWRlbWknO1xuaW1wb3J0IHsgc2V0dXBEZXZ0b29sc1BsdWdpbiB9IGZyb20gJ0B2dWUvZGV2dG9vbHMtYXBpJztcblxuLyoqXHJcbiAqIHNldEFjdGl2ZVBpbmlhIG11c3QgYmUgY2FsbGVkIHRvIGhhbmRsZSBTU1IgYXQgdGhlIHRvcCBvZiBmdW5jdGlvbnMgbGlrZVxyXG4gKiBgZmV0Y2hgLCBgc2V0dXBgLCBgc2VydmVyUHJlZmV0Y2hgIGFuZCBvdGhlcnNcclxuICovXHJcbmxldCBhY3RpdmVQaW5pYTtcclxuLyoqXHJcbiAqIFNldHMgb3IgdW5zZXRzIHRoZSBhY3RpdmUgcGluaWEuIFVzZWQgaW4gU1NSIGFuZCBpbnRlcm5hbGx5IHdoZW4gY2FsbGluZ1xyXG4gKiBhY3Rpb25zIGFuZCBnZXR0ZXJzXHJcbiAqXHJcbiAqIEBwYXJhbSBwaW5pYSAtIFBpbmlhIGluc3RhbmNlXHJcbiAqL1xyXG5jb25zdCBzZXRBY3RpdmVQaW5pYSA9IChwaW5pYSkgPT4gKGFjdGl2ZVBpbmlhID0gcGluaWEpO1xyXG4vKipcclxuICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIHBpbmlhIGlmIHRoZXJlIGlzIGFueS5cclxuICovXHJcbmNvbnN0IGdldEFjdGl2ZVBpbmlhID0gKCkgPT4gKGdldEN1cnJlbnRJbnN0YW5jZSgpICYmIGluamVjdChwaW5pYVN5bWJvbCkpIHx8IGFjdGl2ZVBpbmlhO1xyXG5jb25zdCBwaW5pYVN5bWJvbCA9ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBTeW1ib2woJ3BpbmlhJykgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBTeW1ib2woKSk7XG5cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QoXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbm8pIHtcclxuICAgIHJldHVybiAobyAmJlxyXG4gICAgICAgIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScgJiZcclxuICAgICAgICB0eXBlb2Ygby50b0pTT04gIT09ICdmdW5jdGlvbicpO1xyXG59XHJcbi8vIHR5cGUgRGVlcFJlYWRvbmx5PFQ+ID0geyByZWFkb25seSBbUCBpbiBrZXlvZiBUXTogRGVlcFJlYWRvbmx5PFRbUF0+IH1cclxuLy8gVE9ETzogY2FuIHdlIGNoYW5nZSB0aGVzZSB0byBudW1iZXJzP1xyXG4vKipcclxuICogUG9zc2libGUgdHlwZXMgZm9yIFN1YnNjcmlwdGlvbkNhbGxiYWNrXHJcbiAqL1xyXG52YXIgTXV0YXRpb25UeXBlO1xyXG4oZnVuY3Rpb24gKE11dGF0aW9uVHlwZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBEaXJlY3QgbXV0YXRpb24gb2YgdGhlIHN0YXRlOlxyXG4gICAgICpcclxuICAgICAqIC0gYHN0b3JlLm5hbWUgPSAnbmV3IG5hbWUnYFxyXG4gICAgICogLSBgc3RvcmUuJHN0YXRlLm5hbWUgPSAnbmV3IG5hbWUnYFxyXG4gICAgICogLSBgc3RvcmUubGlzdC5wdXNoKCduZXcgaXRlbScpYFxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvblR5cGVbXCJkaXJlY3RcIl0gPSBcImRpcmVjdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBNdXRhdGVkIHRoZSBzdGF0ZSB3aXRoIGAkcGF0Y2hgIGFuZCBhbiBvYmplY3RcclxuICAgICAqXHJcbiAgICAgKiAtIGBzdG9yZS4kcGF0Y2goeyBuYW1lOiAnbmV3TmFtZScgfSlgXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uVHlwZVtcInBhdGNoT2JqZWN0XCJdID0gXCJwYXRjaCBvYmplY3RcIjtcclxuICAgIC8qKlxyXG4gICAgICogTXV0YXRlZCB0aGUgc3RhdGUgd2l0aCBgJHBhdGNoYCBhbmQgYSBmdW5jdGlvblxyXG4gICAgICpcclxuICAgICAqIC0gYHN0b3JlLiRwYXRjaChzdGF0ZSA9PiBzdGF0ZS5uYW1lID0gJ25ld05hbWUnKWBcclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25UeXBlW1wicGF0Y2hGdW5jdGlvblwiXSA9IFwicGF0Y2ggZnVuY3Rpb25cIjtcclxuICAgIC8vIG1heWJlIHJlc2V0PyBmb3IgJHN0YXRlID0ge30gYW5kICRyZXNldFxyXG59KShNdXRhdGlvblR5cGUgfHwgKE11dGF0aW9uVHlwZSA9IHt9KSk7XG5cbmNvbnN0IElTX0NMSUVOVCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xyXG4vKipcclxuICogU2hvdWxkIHdlIGFkZCB0aGUgZGV2dG9vbHMgcGx1Z2lucy5cclxuICogLSBvbmx5IGlmIGRldiBtb2RlIG9yIGZvcmNlZCB0aHJvdWdoIHRoZSBwcm9kIGRldnRvb2xzIGZsYWdcclxuICogLSBub3QgaW4gdGVzdFxyXG4gKiAtIG9ubHkgaWYgd2luZG93IGV4aXN0cyAoY291bGQgY2hhbmdlIGluIHRoZSBmdXR1cmUpXHJcbiAqL1xyXG5jb25zdCBVU0VfREVWVE9PTFMgPSAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpICYmIElTX0NMSUVOVDtcblxuLypcclxuICogRmlsZVNhdmVyLmpzIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxyXG4gKlxyXG4gKiBPcmlnaW5hbGx5IGJ5IEVsaSBHcmV5LCBhZGFwdGVkIGFzIGFuIEVTTSBtb2R1bGUgYnkgRWR1YXJkbyBTYW4gTWFydGluXHJcbiAqIE1vcm90ZS5cclxuICpcclxuICogTGljZW5zZSA6IE1JVFxyXG4gKi9cclxuLy8gVGhlIG9uZSBhbmQgb25seSB3YXkgb2YgZ2V0dGluZyBnbG9iYWwgc2NvcGUgaW4gYWxsIGVudmlyb25tZW50c1xyXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMzI3NzE4Mi8xMDA4OTk5XHJcbmNvbnN0IF9nbG9iYWwgPSAvKiNfX1BVUkVfXyovICgoKSA9PiB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cud2luZG93ID09PSB3aW5kb3dcclxuICAgID8gd2luZG93XHJcbiAgICA6IHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGZcclxuICAgICAgICA/IHNlbGZcclxuICAgICAgICA6IHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnICYmIGdsb2JhbC5nbG9iYWwgPT09IGdsb2JhbFxyXG4gICAgICAgICAgICA/IGdsb2JhbFxyXG4gICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICAgICAgPyBnbG9iYWxUaGlzXHJcbiAgICAgICAgICAgICAgICA6IHsgSFRNTEVsZW1lbnQ6IG51bGwgfSkoKTtcclxuZnVuY3Rpb24gYm9tKGJsb2IsIHsgYXV0b0JvbSA9IGZhbHNlIH0gPSB7fSkge1xyXG4gICAgLy8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcclxuICAgIC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXHJcbiAgICBpZiAoYXV0b0JvbSAmJlxyXG4gICAgICAgIC9eXFxzKig/OnRleHRcXC9cXFMqfGFwcGxpY2F0aW9uXFwveG1sfFxcUypcXC9cXFMqXFwreG1sKVxccyo7LipjaGFyc2V0XFxzKj1cXHMqdXRmLTgvaS50ZXN0KGJsb2IudHlwZSkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW1N0cmluZy5mcm9tQ2hhckNvZGUoMHhmZWZmKSwgYmxvYl0sIHsgdHlwZTogYmxvYi50eXBlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJsb2I7XHJcbn1cclxuZnVuY3Rpb24gZG93bmxvYWQodXJsLCBuYW1lLCBvcHRzKSB7XHJcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xyXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcclxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2F2ZUFzKHhoci5yZXNwb25zZSwgbmFtZSwgb3B0cyk7XHJcbiAgICB9O1xyXG4gICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignY291bGQgbm90IGRvd25sb2FkIGZpbGUnKTtcclxuICAgIH07XHJcbiAgICB4aHIuc2VuZCgpO1xyXG59XHJcbmZ1bmN0aW9uIGNvcnNFbmFibGVkKHVybCkge1xyXG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAvLyB1c2Ugc3luYyB0byBhdm9pZCBwb3B1cCBibG9ja2VyXHJcbiAgICB4aHIub3BlbignSEVBRCcsIHVybCwgZmFsc2UpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPD0gMjk5O1xyXG59XHJcbi8vIGBhLmNsaWNrKClgIGRvZXNuJ3Qgd29yayBmb3IgYWxsIGJyb3dzZXJzICgjNDY1KVxyXG5mdW5jdGlvbiBjbGljayhub2RlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnY2xpY2snKSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnN0IGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpO1xyXG4gICAgICAgIGV2dC5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDgwLCAyMCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpO1xyXG4gICAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChldnQpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IF9uYXZpZ2F0b3IgPSBcclxuIHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnID8gbmF2aWdhdG9yIDogeyB1c2VyQWdlbnQ6ICcnIH07XHJcbi8vIERldGVjdCBXZWJWaWV3IGluc2lkZSBhIG5hdGl2ZSBtYWNPUyBhcHAgYnkgcnVsaW5nIG91dCBhbGwgYnJvd3NlcnNcclxuLy8gV2UganVzdCBuZWVkIHRvIGNoZWNrIGZvciAnU2FmYXJpJyBiZWNhdXNlIGFsbCBvdGhlciBicm93c2VycyAoYmVzaWRlcyBGaXJlZm94KSBpbmNsdWRlIHRoYXQgdG9vXHJcbi8vIGh0dHBzOi8vd3d3LndoYXRpc215YnJvd3Nlci5jb20vZ3VpZGVzL3RoZS1sYXRlc3QtdXNlci1hZ2VudC9tYWNvc1xyXG5jb25zdCBpc01hY09TV2ViVmlldyA9IC8qI19fUFVSRV9fKi8gKCgpID0+IC9NYWNpbnRvc2gvLnRlc3QoX25hdmlnYXRvci51c2VyQWdlbnQpICYmXHJcbiAgICAvQXBwbGVXZWJLaXQvLnRlc3QoX25hdmlnYXRvci51c2VyQWdlbnQpICYmXHJcbiAgICAhL1NhZmFyaS8udGVzdChfbmF2aWdhdG9yLnVzZXJBZ2VudCkpKCk7XHJcbmNvbnN0IHNhdmVBcyA9ICFJU19DTElFTlRcclxuICAgID8gKCkgPT4geyB9IC8vIG5vb3BcclxuICAgIDogLy8gVXNlIGRvd25sb2FkIGF0dHJpYnV0ZSBmaXJzdCBpZiBwb3NzaWJsZSAoIzE5MyBMdW1pYSBtb2JpbGUpIHVubGVzcyB0aGlzIGlzIGEgbWFjT1MgV2ViVmlldyBvciBtaW5pIHByb2dyYW1cclxuICAgICAgICB0eXBlb2YgSFRNTEFuY2hvckVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgICdkb3dubG9hZCcgaW4gSFRNTEFuY2hvckVsZW1lbnQucHJvdG90eXBlICYmXHJcbiAgICAgICAgICAgICFpc01hY09TV2ViVmlld1xyXG4gICAgICAgICAgICA/IGRvd25sb2FkU2F2ZUFzXHJcbiAgICAgICAgICAgIDogLy8gVXNlIG1zU2F2ZU9yT3BlbkJsb2IgYXMgYSBzZWNvbmQgYXBwcm9hY2hcclxuICAgICAgICAgICAgICAgICdtc1NhdmVPck9wZW5CbG9iJyBpbiBfbmF2aWdhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgPyBtc1NhdmVBc1xyXG4gICAgICAgICAgICAgICAgICAgIDogLy8gRmFsbGJhY2sgdG8gdXNpbmcgRmlsZVJlYWRlciBhbmQgYSBwb3B1cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlU2F2ZXJTYXZlQXM7XHJcbmZ1bmN0aW9uIGRvd25sb2FkU2F2ZUFzKGJsb2IsIG5hbWUgPSAnZG93bmxvYWQnLCBvcHRzKSB7XHJcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgYS5kb3dubG9hZCA9IG5hbWU7XHJcbiAgICBhLnJlbCA9ICdub29wZW5lcic7IC8vIHRhYm5hYmJpbmdcclxuICAgIC8vIFRPRE86IGRldGVjdCBjaHJvbWUgZXh0ZW5zaW9ucyAmIHBhY2thZ2VkIGFwcHNcclxuICAgIC8vIGEudGFyZ2V0ID0gJ19ibGFuaydcclxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvLyBTdXBwb3J0IHJlZ3VsYXIgbGlua3NcclxuICAgICAgICBhLmhyZWYgPSBibG9iO1xyXG4gICAgICAgIGlmIChhLm9yaWdpbiAhPT0gbG9jYXRpb24ub3JpZ2luKSB7XHJcbiAgICAgICAgICAgIGlmIChjb3JzRW5hYmxlZChhLmhyZWYpKSB7XHJcbiAgICAgICAgICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGEudGFyZ2V0ID0gJ19ibGFuayc7XHJcbiAgICAgICAgICAgICAgICBjbGljayhhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2xpY2soYSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gU3VwcG9ydCBibG9ic1xyXG4gICAgICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTtcclxuICAgICAgICB9LCA0ZTQpOyAvLyA0MHNcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2xpY2soYSk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbXNTYXZlQXMoYmxvYiwgbmFtZSA9ICdkb3dubG9hZCcsIG9wdHMpIHtcclxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAoY29yc0VuYWJsZWQoYmxvYikpIHtcclxuICAgICAgICAgICAgZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgICBhLmhyZWYgPSBibG9iO1xyXG4gICAgICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNsaWNrKGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlOiB3b3JrcyBvbiB3aW5kb3dzXHJcbiAgICAgICAgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYm9tKGJsb2IsIG9wdHMpLCBuYW1lKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBmaWxlU2F2ZXJTYXZlQXMoYmxvYiwgbmFtZSwgb3B0cywgcG9wdXApIHtcclxuICAgIC8vIE9wZW4gYSBwb3B1cCBpbW1lZGlhdGVseSBkbyBnbyBhcm91bmQgcG9wdXAgYmxvY2tlclxyXG4gICAgLy8gTW9zdGx5IG9ubHkgYXZhaWxhYmxlIG9uIHVzZXIgaW50ZXJhY3Rpb24gYW5kIHRoZSBmaWxlUmVhZGVyIGlzIGFzeW5jIHNvLi4uXHJcbiAgICBwb3B1cCA9IHBvcHVwIHx8IG9wZW4oJycsICdfYmxhbmsnKTtcclxuICAgIGlmIChwb3B1cCkge1xyXG4gICAgICAgIHBvcHVwLmRvY3VtZW50LnRpdGxlID0gcG9wdXAuZG9jdW1lbnQuYm9keS5pbm5lclRleHQgPSAnZG93bmxvYWRpbmcuLi4nO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJylcclxuICAgICAgICByZXR1cm4gZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XHJcbiAgICBjb25zdCBmb3JjZSA9IGJsb2IudHlwZSA9PT0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XHJcbiAgICBjb25zdCBpc1NhZmFyaSA9IC9jb25zdHJ1Y3Rvci9pLnRlc3QoU3RyaW5nKF9nbG9iYWwuSFRNTEVsZW1lbnQpKSB8fCAnc2FmYXJpJyBpbiBfZ2xvYmFsO1xyXG4gICAgY29uc3QgaXNDaHJvbWVJT1MgPSAvQ3JpT1NcXC9bXFxkXSsvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICBpZiAoKGlzQ2hyb21lSU9TIHx8IChmb3JjZSAmJiBpc1NhZmFyaSkgfHwgaXNNYWNPU1dlYlZpZXcpICYmXHJcbiAgICAgICAgdHlwZW9mIEZpbGVSZWFkZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiBVUkxzXHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gcmVhZGVyLnJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHJlYWRlci5yZXN1bHQgdHlwZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVybCA9IGlzQ2hyb21lSU9TXHJcbiAgICAgICAgICAgICAgICA/IHVybFxyXG4gICAgICAgICAgICAgICAgOiB1cmwucmVwbGFjZSgvXmRhdGE6W147XSo7LywgJ2RhdGE6YXR0YWNobWVudC9maWxlOycpO1xyXG4gICAgICAgICAgICBpZiAocG9wdXApIHtcclxuICAgICAgICAgICAgICAgIHBvcHVwLmxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5hc3NpZ24odXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwb3B1cCA9IG51bGw7IC8vIHJldmVyc2UtdGFibmFiYmluZyAjNDYwXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgaWYgKHBvcHVwKVxyXG4gICAgICAgICAgICBwb3B1cC5sb2NhdGlvbi5hc3NpZ24odXJsKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgcG9wdXAgPSBudWxsOyAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MFxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgICAgfSwgNGU0KTsgLy8gNDBzXHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIFNob3dzIGEgdG9hc3Qgb3IgY29uc29sZS5sb2dcclxuICpcclxuICogQHBhcmFtIG1lc3NhZ2UgLSBtZXNzYWdlIHRvIGxvZ1xyXG4gKiBAcGFyYW0gdHlwZSAtIGRpZmZlcmVudCBjb2xvciBvZiB0aGUgdG9vbHRpcFxyXG4gKi9cclxuZnVuY3Rpb24gdG9hc3RNZXNzYWdlKG1lc3NhZ2UsIHR5cGUpIHtcclxuICAgIGNvbnN0IHBpbmlhTWVzc2FnZSA9ICfwn42NICcgKyBtZXNzYWdlO1xyXG4gICAgaWYgKHR5cGVvZiBfX1ZVRV9ERVZUT09MU19UT0FTVF9fID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgX19WVUVfREVWVE9PTFNfVE9BU1RfXyhwaW5pYU1lc3NhZ2UsIHR5cGUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IocGluaWFNZXNzYWdlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICd3YXJuJykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihwaW5pYU1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocGluaWFNZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1BpbmlhKG8pIHtcclxuICAgIHJldHVybiAnX2EnIGluIG8gJiYgJ2luc3RhbGwnIGluIG87XHJcbn1cblxuZnVuY3Rpb24gY2hlY2tDbGlwYm9hcmRBY2Nlc3MoKSB7XHJcbiAgICBpZiAoISgnY2xpcGJvYXJkJyBpbiBuYXZpZ2F0b3IpKSB7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBDbGlwYm9hcmQgQVBJYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpIHtcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmXHJcbiAgICAgICAgZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkb2N1bWVudCBpcyBub3QgZm9jdXNlZCcpKSB7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKCdZb3UgbmVlZCB0byBhY3RpdmF0ZSB0aGUgXCJFbXVsYXRlIGEgZm9jdXNlZCBwYWdlXCIgc2V0dGluZyBpbiB0aGUgXCJSZW5kZXJpbmdcIiBwYW5lbCBvZiBkZXZ0b29scy4nLCAnd2FybicpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbENvcHlTdGF0ZShwaW5pYSkge1xyXG4gICAgaWYgKGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChKU09OLnN0cmluZ2lmeShwaW5pYS5zdGF0ZS52YWx1ZSkpO1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZSgnR2xvYmFsIHN0YXRlIGNvcGllZCB0byBjbGlwYm9hcmQuJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gc2VyaWFsaXplIHRoZSBzdGF0ZS4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5gLCAnZXJyb3InKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBhY3Rpb25HbG9iYWxQYXN0ZVN0YXRlKHBpbmlhKSB7XHJcbiAgICBpZiAoY2hlY2tDbGlwYm9hcmRBY2Nlc3MoKSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlID0gSlNPTi5wYXJzZShhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCkpO1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZSgnR2xvYmFsIHN0YXRlIHBhc3RlZCBmcm9tIGNsaXBib2FyZC4nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGlmIChjaGVja05vdEZvY3VzZWRFcnJvcihlcnJvcikpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBkZXNlcmlhbGl6ZSB0aGUgc3RhdGUgZnJvbSBjbGlwYm9hcmQuIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsU2F2ZVN0YXRlKHBpbmlhKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHNhdmVBcyhuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocGluaWEuc3RhdGUudmFsdWUpXSwge1xyXG4gICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICB9KSwgJ3BpbmlhLXN0YXRlLmpzb24nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZShgRmFpbGVkIHRvIGV4cG9ydCB0aGUgc3RhdGUgYXMgSlNPTi4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5gLCAnZXJyb3InKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxufVxyXG5sZXQgZmlsZUlucHV0O1xyXG5mdW5jdGlvbiBnZXRGaWxlT3BlbmVyKCkge1xyXG4gICAgaWYgKCFmaWxlSW5wdXQpIHtcclxuICAgICAgICBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgIGZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnO1xyXG4gICAgICAgIGZpbGVJbnB1dC5hY2NlcHQgPSAnLmpzb24nO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb3BlbkZpbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZmlsZUlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBmaWxlSW5wdXQuZmlsZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGZpbGVzLml0ZW0oMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHRleHQ6IGF3YWl0IGZpbGUudGV4dCgpLCBmaWxlIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlOiBUT0RPOiBjaGFuZ2VkIGZyb20gNC4zIHRvIDQuNFxyXG4gICAgICAgICAgICBmaWxlSW5wdXQub25jYW5jZWwgPSAoKSA9PiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICBmaWxlSW5wdXQub25lcnJvciA9IHJlamVjdDtcclxuICAgICAgICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3BlbkZpbGU7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsT3BlblN0YXRlRmlsZShwaW5pYSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBvcGVuID0gYXdhaXQgZ2V0RmlsZU9wZW5lcigpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZW4oKTtcclxuICAgICAgICBpZiAoIXJlc3VsdClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgdGV4dCwgZmlsZSB9ID0gcmVzdWx0O1xyXG4gICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlID0gSlNPTi5wYXJzZSh0ZXh0KTtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoYEdsb2JhbCBzdGF0ZSBpbXBvcnRlZCBmcm9tIFwiJHtmaWxlLm5hbWV9XCIuYCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBleHBvcnQgdGhlIHN0YXRlIGFzIEpTT04uIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gZm9ybWF0RGlzcGxheShkaXNwbGF5KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIF9jdXN0b206IHtcclxuICAgICAgICAgICAgZGlzcGxheSxcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5jb25zdCBQSU5JQV9ST09UX0xBQkVMID0gJ/CfjY0gUGluaWEgKHJvb3QpJztcclxuY29uc3QgUElOSUFfUk9PVF9JRCA9ICdfcm9vdCc7XHJcbmZ1bmN0aW9uIGZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yVHJlZShzdG9yZSkge1xyXG4gICAgcmV0dXJuIGlzUGluaWEoc3RvcmUpXHJcbiAgICAgICAgPyB7XHJcbiAgICAgICAgICAgIGlkOiBQSU5JQV9ST09UX0lELFxyXG4gICAgICAgICAgICBsYWJlbDogUElOSUFfUk9PVF9MQUJFTCxcclxuICAgICAgICB9XHJcbiAgICAgICAgOiB7XHJcbiAgICAgICAgICAgIGlkOiBzdG9yZS4kaWQsXHJcbiAgICAgICAgICAgIGxhYmVsOiBzdG9yZS4kaWQsXHJcbiAgICAgICAgfTtcclxufVxyXG5mdW5jdGlvbiBmb3JtYXRTdG9yZUZvckluc3BlY3RvclN0YXRlKHN0b3JlKSB7XHJcbiAgICBpZiAoaXNQaW5pYShzdG9yZSkpIHtcclxuICAgICAgICBjb25zdCBzdG9yZU5hbWVzID0gQXJyYXkuZnJvbShzdG9yZS5fcy5rZXlzKCkpO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlTWFwID0gc3RvcmUuX3M7XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHN0YXRlOiBzdG9yZU5hbWVzLm1hcCgoc3RvcmVJZCkgPT4gKHtcclxuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAga2V5OiBzdG9yZUlkLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLnN0YXRlLnZhbHVlW3N0b3JlSWRdLFxyXG4gICAgICAgICAgICB9KSksXHJcbiAgICAgICAgICAgIGdldHRlcnM6IHN0b3JlTmFtZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGlkKSA9PiBzdG9yZU1hcC5nZXQoaWQpLl9nZXR0ZXJzKVxyXG4gICAgICAgICAgICAgICAgLm1hcCgoaWQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gc3RvcmVNYXAuZ2V0KGlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLl9nZXR0ZXJzLnJlZHVjZSgoZ2V0dGVycywga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcnNba2V5XSA9IHN0b3JlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHt9KSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICAgICAgc3RhdGU6IE9iamVjdC5rZXlzKHN0b3JlLiRzdGF0ZSkubWFwKChrZXkpID0+ICh7XHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yZS4kc3RhdGVba2V5XSxcclxuICAgICAgICB9KSksXHJcbiAgICB9O1xyXG4gICAgLy8gYXZvaWQgYWRkaW5nIGVtcHR5IGdldHRlcnNcclxuICAgIGlmIChzdG9yZS5fZ2V0dGVycyAmJiBzdG9yZS5fZ2V0dGVycy5sZW5ndGgpIHtcclxuICAgICAgICBzdGF0ZS5nZXR0ZXJzID0gc3RvcmUuX2dldHRlcnMubWFwKChnZXR0ZXJOYW1lKSA9PiAoe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleTogZ2V0dGVyTmFtZSxcclxuICAgICAgICAgICAgdmFsdWU6IHN0b3JlW2dldHRlck5hbWVdLFxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIGlmIChzdG9yZS5fY3VzdG9tUHJvcGVydGllcy5zaXplKSB7XHJcbiAgICAgICAgc3RhdGUuY3VzdG9tUHJvcGVydGllcyA9IEFycmF5LmZyb20oc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMpLm1hcCgoa2V5KSA9PiAoe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICB2YWx1ZTogc3RvcmVba2V5XSxcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhdGU7XHJcbn1cclxuZnVuY3Rpb24gZm9ybWF0RXZlbnREYXRhKGV2ZW50cykge1xyXG4gICAgaWYgKCFldmVudHMpXHJcbiAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xyXG4gICAgICAgIC8vIFRPRE86IGhhbmRsZSBhZGQgYW5kIGRlbGV0ZSBmb3IgYXJyYXlzIGFuZCBvYmplY3RzXHJcbiAgICAgICAgcmV0dXJuIGV2ZW50cy5yZWR1Y2UoKGRhdGEsIGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGRhdGEua2V5cy5wdXNoKGV2ZW50LmtleSk7XHJcbiAgICAgICAgICAgIGRhdGEub3BlcmF0aW9ucy5wdXNoKGV2ZW50LnR5cGUpO1xyXG4gICAgICAgICAgICBkYXRhLm9sZFZhbHVlW2V2ZW50LmtleV0gPSBldmVudC5vbGRWYWx1ZTtcclxuICAgICAgICAgICAgZGF0YS5uZXdWYWx1ZVtldmVudC5rZXldID0gZXZlbnQubmV3VmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgb2xkVmFsdWU6IHt9LFxyXG4gICAgICAgICAgICBrZXlzOiBbXSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uczogW10sXHJcbiAgICAgICAgICAgIG5ld1ZhbHVlOiB7fSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbjogZm9ybWF0RGlzcGxheShldmVudHMudHlwZSksXHJcbiAgICAgICAgICAgIGtleTogZm9ybWF0RGlzcGxheShldmVudHMua2V5KSxcclxuICAgICAgICAgICAgb2xkVmFsdWU6IGV2ZW50cy5vbGRWYWx1ZSxcclxuICAgICAgICAgICAgbmV3VmFsdWU6IGV2ZW50cy5uZXdWYWx1ZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGZvcm1hdE11dGF0aW9uVHlwZSh0eXBlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIE11dGF0aW9uVHlwZS5kaXJlY3Q6XHJcbiAgICAgICAgICAgIHJldHVybiAnbXV0YXRpb24nO1xyXG4gICAgICAgIGNhc2UgTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb246XHJcbiAgICAgICAgICAgIHJldHVybiAnJHBhdGNoJztcclxuICAgICAgICBjYXNlIE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdDpcclxuICAgICAgICAgICAgcmV0dXJuICckcGF0Y2gnO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiAndW5rbm93bic7XHJcbiAgICB9XHJcbn1cblxuLy8gdGltZWxpbmUgY2FuIGJlIHBhdXNlZCB3aGVuIGRpcmVjdGx5IGNoYW5naW5nIHRoZSBzdGF0ZVxyXG5sZXQgaXNUaW1lbGluZUFjdGl2ZSA9IHRydWU7XHJcbmNvbnN0IGNvbXBvbmVudFN0YXRlVHlwZXMgPSBbXTtcclxuY29uc3QgTVVUQVRJT05TX0xBWUVSX0lEID0gJ3BpbmlhOm11dGF0aW9ucyc7XHJcbmNvbnN0IElOU1BFQ1RPUl9JRCA9ICdwaW5pYSc7XHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBkaXNwbGF5ZWQgbmFtZSBvZiBhIHN0b3JlIGluIGRldnRvb2xzXHJcbiAqXHJcbiAqIEBwYXJhbSBpZCAtIGlkIG9mIHRoZSBzdG9yZVxyXG4gKiBAcmV0dXJucyBhIGZvcm1hdHRlZCBzdHJpbmdcclxuICovXHJcbmNvbnN0IGdldFN0b3JlVHlwZSA9IChpZCkgPT4gJ/CfjY0gJyArIGlkO1xyXG4vKipcclxuICogQWRkIHRoZSBwaW5pYSBwbHVnaW4gd2l0aG91dCBhbnkgc3RvcmUuIEFsbG93cyBkaXNwbGF5aW5nIGEgUGluaWEgcGx1Z2luIHRhYlxyXG4gKiBhcyBzb29uIGFzIGl0IGlzIGFkZGVkIHRvIHRoZSBhcHBsaWNhdGlvbi5cclxuICpcclxuICogQHBhcmFtIGFwcCAtIFZ1ZSBhcHBsaWNhdGlvblxyXG4gKiBAcGFyYW0gcGluaWEgLSBwaW5pYSBpbnN0YW5jZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJQaW5pYURldnRvb2xzKGFwcCwgcGluaWEpIHtcclxuICAgIHNldHVwRGV2dG9vbHNQbHVnaW4oe1xyXG4gICAgICAgIGlkOiAnZGV2LmVzbS5waW5pYScsXHJcbiAgICAgICAgbGFiZWw6ICdQaW5pYSDwn42NJyxcclxuICAgICAgICBsb2dvOiAnaHR0cHM6Ly9waW5pYS52dWVqcy5vcmcvbG9nby5zdmcnLFxyXG4gICAgICAgIHBhY2thZ2VOYW1lOiAncGluaWEnLFxyXG4gICAgICAgIGhvbWVwYWdlOiAnaHR0cHM6Ly9waW5pYS52dWVqcy5vcmcnLFxyXG4gICAgICAgIGNvbXBvbmVudFN0YXRlVHlwZXMsXHJcbiAgICAgICAgYXBwLFxyXG4gICAgfSwgKGFwaSkgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXBpLm5vdyAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0b2FzdE1lc3NhZ2UoJ1lvdSBzZWVtIHRvIGJlIHVzaW5nIGFuIG91dGRhdGVkIHZlcnNpb24gb2YgVnVlIERldnRvb2xzLiBBcmUgeW91IHN0aWxsIHVzaW5nIHRoZSBCZXRhIHJlbGVhc2UgaW5zdGVhZCBvZiB0aGUgc3RhYmxlIG9uZT8gWW91IGNhbiBmaW5kIHRoZSBsaW5rcyBhdCBodHRwczovL2RldnRvb2xzLnZ1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXBpLmFkZFRpbWVsaW5lTGF5ZXIoe1xyXG4gICAgICAgICAgICBpZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICBsYWJlbDogYFBpbmlhIPCfjY1gLFxyXG4gICAgICAgICAgICBjb2xvcjogMHhlNWRmODgsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLmFkZEluc3BlY3Rvcih7XHJcbiAgICAgICAgICAgIGlkOiBJTlNQRUNUT1JfSUQsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXHJcbiAgICAgICAgICAgIGljb246ICdzdG9yYWdlJyxcclxuICAgICAgICAgICAgdHJlZUZpbHRlclBsYWNlaG9sZGVyOiAnU2VhcmNoIHN0b3JlcycsXHJcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnY29udGVudF9jb3B5JyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uR2xvYmFsQ29weVN0YXRlKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTZXJpYWxpemUgYW5kIGNvcHkgdGhlIHN0YXRlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvbnRlbnRfcGFzdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhY3Rpb25HbG9iYWxQYXN0ZVN0YXRlKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXBsYWNlIHRoZSBzdGF0ZSB3aXRoIHRoZSBjb250ZW50IG9mIHlvdXIgY2xpcGJvYXJkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3NhdmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25HbG9iYWxTYXZlU3RhdGUocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1NhdmUgdGhlIHN0YXRlIGFzIGEgSlNPTiBmaWxlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZvbGRlcl9vcGVuJyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWN0aW9uR2xvYmFsT3BlblN0YXRlRmlsZShwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnSW1wb3J0IHRoZSBzdGF0ZSBmcm9tIGEgSlNPTiBmaWxlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIG5vZGVBY3Rpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3Jlc3RvcmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXNldCB0aGUgc3RhdGUgKG9wdGlvbiBzdG9yZSBvbmx5KScsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobm9kZUlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KG5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgQ2Fubm90IHJlc2V0IFwiJHtub2RlSWR9XCIgc3RvcmUgYmVjYXVzZSBpdCB3YXNuJ3QgZm91bmQuYCwgJ3dhcm4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghc3RvcmUuX2lzT3B0aW9uc0FQSSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlKGBDYW5ub3QgcmVzZXQgXCIke25vZGVJZH1cIiBzdG9yZSBiZWNhdXNlIGl0J3MgYSBzZXR1cCBzdG9yZS5gLCAnd2FybicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuJHJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYFN0b3JlIFwiJHtub2RlSWR9XCIgcmVzZXQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcGkub24uaW5zcGVjdENvbXBvbmVudCgocGF5bG9hZCwgY3R4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3h5ID0gKHBheWxvYWQuY29tcG9uZW50SW5zdGFuY2UgJiZcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuY29tcG9uZW50SW5zdGFuY2UucHJveHkpO1xyXG4gICAgICAgICAgICBpZiAocHJveHkgJiYgcHJveHkuX3BTdG9yZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBpbmlhU3RvcmVzID0gcGF5bG9hZC5jb21wb25lbnRJbnN0YW5jZS5wcm94eS5fcFN0b3JlcztcclxuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMocGluaWFTdG9yZXMpLmZvckVhY2goKHN0b3JlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pbnN0YW5jZURhdGEuc3RhdGUucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGdldFN0b3JlVHlwZShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICdzdGF0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuX2lzT3B0aW9uc0FQSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2N1c3RvbToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdG9SYXcoc3RvcmUuJHN0YXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdyZXN0b3JlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUmVzZXQgdGhlIHN0YXRlIG9mIHRoaXMgc3RvcmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gc3RvcmUuJHJlc2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IC8vIE5PVEU6IHdvcmthcm91bmQgdG8gdW53cmFwIHRyYW5zZmVycmVkIHJlZnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLnJlZHVjZSgoc3RhdGUsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZVtrZXldID0gc3RvcmUuJHN0YXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSksXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLl9nZXR0ZXJzICYmIHN0b3JlLl9nZXR0ZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGdldFN0b3JlVHlwZShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnZ2V0dGVycycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuX2dldHRlcnMucmVkdWNlKChnZXR0ZXJzLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzW2tleV0gPSBzdG9yZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UganVzdCB3YW50IHRvIHNob3cgaXQgaW4gZGV2dG9vbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dGVyc1trZXldID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge30pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JUcmVlKChwYXlsb2FkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlcyA9IFtwaW5pYV07XHJcbiAgICAgICAgICAgICAgICBzdG9yZXMgPSBzdG9yZXMuY29uY2F0KEFycmF5LmZyb20ocGluaWEuX3MudmFsdWVzKCkpKTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQucm9vdE5vZGVzID0gKHBheWxvYWQuZmlsdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzdG9yZXMuZmlsdGVyKChzdG9yZSkgPT4gJyRpZCcgaW4gc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzdG9yZS4kaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMocGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBQSU5JQV9ST09UX0xBQkVMLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBzdG9yZXMpLm1hcChmb3JtYXRTdG9yZUZvckluc3BlY3RvclRyZWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclN0YXRlKChwYXlsb2FkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zcGVjdGVkU3RvcmUgPSBwYXlsb2FkLm5vZGVJZCA9PT0gUElOSUFfUk9PVF9JRFxyXG4gICAgICAgICAgICAgICAgICAgID8gcGluaWFcclxuICAgICAgICAgICAgICAgICAgICA6IHBpbmlhLl9zLmdldChwYXlsb2FkLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWluc3BlY3RlZFN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBjb3VsZCBiZSB0aGUgc2VsZWN0ZWQgc3RvcmUgcmVzdG9yZWQgZm9yIGEgZGlmZmVyZW50IHByb2plY3RcclxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBpdCdzIGJldHRlciBub3QgdG8gc2F5IGFueXRoaW5nIGhlcmVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zcGVjdGVkU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLnN0YXRlID0gZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JTdGF0ZShpbnNwZWN0ZWRTdG9yZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBhcGkub24uZWRpdEluc3BlY3RvclN0YXRlKChwYXlsb2FkLCBjdHgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gSU5TUEVDVE9SX0lEKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnNwZWN0ZWRTdG9yZSA9IHBheWxvYWQubm9kZUlkID09PSBQSU5JQV9ST09UX0lEXHJcbiAgICAgICAgICAgICAgICAgICAgPyBwaW5pYVxyXG4gICAgICAgICAgICAgICAgICAgIDogcGluaWEuX3MuZ2V0KHBheWxvYWQubm9kZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghaW5zcGVjdGVkU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9hc3RNZXNzYWdlKGBzdG9yZSBcIiR7cGF5bG9hZC5ub2RlSWR9XCIgbm90IGZvdW5kYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUGluaWEoaW5zcGVjdGVkU3RvcmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXNzIG9ubHkgdGhlIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSAxIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFpbnNwZWN0ZWRTdG9yZS5fY3VzdG9tUHJvcGVydGllcy5oYXMocGF0aFswXSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aFswXSBpbiBpbnNwZWN0ZWRTdG9yZS4kc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCckc3RhdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSb290IGFjY2Vzcywgd2UgY2FuIG9taXQgdGhlIGAudmFsdWVgIGJlY2F1c2UgdGhlIGRldnRvb2xzIEFQSSBkb2VzIGl0IGZvciB1c1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGgudW5zaGlmdCgnc3RhdGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KGluc3BlY3RlZFN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLm9uLmVkaXRDb21wb25lbnRTdGF0ZSgocGF5bG9hZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC50eXBlLnN0YXJ0c1dpdGgoJ/CfjY0nKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVJZCA9IHBheWxvYWQudHlwZS5yZXBsYWNlKC9e8J+NjVxccyovLCAnJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChzdG9yZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9hc3RNZXNzYWdlKGBzdG9yZSBcIiR7c3RvcmVJZH1cIiBub3QgZm91bmRgLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcGF0aCB9ID0gcGF5bG9hZDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXRoWzBdICE9PSAnc3RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgSW52YWxpZCBwYXRoIGZvciBzdG9yZSBcIiR7c3RvcmVJZH1cIjpcXG4ke3BhdGh9XFxuT25seSBzdGF0ZSBjYW4gYmUgbW9kaWZpZWQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyByZXdyaXRlIHRoZSBmaXJzdCBlbnRyeSB0byBiZSBhYmxlIHRvIGRpcmVjdGx5IHNldCB0aGUgc3RhdGUgYXNcclxuICAgICAgICAgICAgICAgIC8vIHdlbGwgYXMgYW55IG90aGVyIHBhdGhcclxuICAgICAgICAgICAgICAgIHBhdGhbMF0gPSAnJHN0YXRlJztcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KHN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBzdG9yZSkge1xyXG4gICAgaWYgKCFjb21wb25lbnRTdGF0ZVR5cGVzLmluY2x1ZGVzKGdldFN0b3JlVHlwZShzdG9yZS4kaWQpKSkge1xyXG4gICAgICAgIGNvbXBvbmVudFN0YXRlVHlwZXMucHVzaChnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSk7XHJcbiAgICB9XHJcbiAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcclxuICAgICAgICBpZDogJ2Rldi5lc20ucGluaWEnLFxyXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXHJcbiAgICAgICAgbG9nbzogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnL2xvZ28uc3ZnJyxcclxuICAgICAgICBwYWNrYWdlTmFtZTogJ3BpbmlhJyxcclxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcclxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzLFxyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICBsb2dTdG9yZUNoYW5nZXM6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAnTm90aWZ5IGFib3V0IG5ldy9kZWxldGVkIHN0b3JlcycsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHVzZUVtb2ppczoge1xyXG4gICAgICAgICAgICAvLyAgIGxhYmVsOiAnVXNlIGVtb2ppcyBpbiBtZXNzYWdlcyDimqHvuI8nLFxyXG4gICAgICAgICAgICAvLyAgIHR5cGU6ICdib29sZWFuJyxcclxuICAgICAgICAgICAgLy8gICBkZWZhdWx0VmFsdWU6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0sIChhcGkpID0+IHtcclxuICAgICAgICAvLyBncmFjZWZ1bGx5IGhhbmRsZSBlcnJvcnNcclxuICAgICAgICBjb25zdCBub3cgPSB0eXBlb2YgYXBpLm5vdyA9PT0gJ2Z1bmN0aW9uJyA/IGFwaS5ub3cuYmluZChhcGkpIDogRGF0ZS5ub3c7XHJcbiAgICAgICAgc3RvcmUuJG9uQWN0aW9uKCh7IGFmdGVyLCBvbkVycm9yLCBuYW1lLCBhcmdzIH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBJZCA9IHJ1bm5pbmdBY3Rpb25JZCsrO1xyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXHJcbiAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+bqyAnICsgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ3N0YXJ0JyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYWZ0ZXIoKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfwn5usICcgKyBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2VuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1hdERpc3BsYXkobmFtZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG9uRXJyb3IoKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dUeXBlOiAnZXJyb3InLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ/CfkqUgJyArIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmU6IGZvcm1hdERpc3BsYXkoc3RvcmUuJGlkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRydWUpO1xyXG4gICAgICAgIHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmZvckVhY2goKG5hbWUpID0+IHtcclxuICAgICAgICAgICAgd2F0Y2goKCkgPT4gdW5yZWYoc3RvcmVbbmFtZV0pLCAobmV3VmFsdWUsIG9sZFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNUaW1lbGluZUFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHsgZGVlcDogdHJ1ZSB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzdG9yZS4kc3Vic2NyaWJlKCh7IGV2ZW50cywgdHlwZSB9LCBzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgaWYgKCFpc1RpbWVsaW5lQWN0aXZlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAvLyByb290U3RvcmUuc3RhdGVbc3RvcmUuaWRdID0gc3RhdGVcclxuICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogZm9ybWF0TXV0YXRpb25UeXBlKHR5cGUpLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0RXZlbnREYXRhKGV2ZW50cyksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogYWN0aXZlQWN0aW9uLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyByZXNldCBmb3IgdGhlIG5leHQgbXV0YXRpb25cclxuICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5zdWJ0aXRsZSA9ICfipLXvuI8nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLnN1YnRpdGxlID0gJ/Cfp6knO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50cyAmJiAhQXJyYXkuaXNBcnJheShldmVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuc3VidGl0bGUgPSBldmVudHMudHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuZGF0YVsncmF3RXZlbnQocyknXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdEZWJ1Z2dlckV2ZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdyYXcgRGVidWdnZXJFdmVudFtdJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50cyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXHJcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnREYXRhLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB7IGRldGFjaGVkOiB0cnVlLCBmbHVzaDogJ3N5bmMnIH0pO1xyXG4gICAgICAgIGNvbnN0IGhvdFVwZGF0ZSA9IHN0b3JlLl9ob3RVcGRhdGU7XHJcbiAgICAgICAgc3RvcmUuX2hvdFVwZGF0ZSA9IG1hcmtSYXcoKG5ld1N0b3JlKSA9PiB7XHJcbiAgICAgICAgICAgIGhvdFVwZGF0ZShuZXdTdG9yZSk7XHJcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfwn5SlICcgKyBzdG9yZS4kaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdITVIgdXBkYXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IGZvcm1hdERpc3BsYXkoYEhNUiB1cGRhdGVgKSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZGV2dG9vbHMgdG9vXHJcbiAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB7ICRkaXNwb3NlIH0gPSBzdG9yZTtcclxuICAgICAgICBzdG9yZS4kZGlzcG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgJGRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xyXG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcclxuICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgRGlzcG9zZWQgXCIke3N0b3JlLiRpZH1cIiBzdG9yZSDwn5eRYCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyB0cmlnZ2VyIGFuIHVwZGF0ZSBzbyBpdCBjYW4gZGlzcGxheSBuZXcgcmVnaXN0ZXJlZCBzdG9yZXNcclxuICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgIGFwaS5nZXRTZXR0aW5ncygpLmxvZ1N0b3JlQ2hhbmdlcyAmJlxyXG4gICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYFwiJHtzdG9yZS4kaWR9XCIgc3RvcmUgaW5zdGFsbGVkIPCfhpVgKTtcclxuICAgIH0pO1xyXG59XHJcbmxldCBydW5uaW5nQWN0aW9uSWQgPSAwO1xyXG5sZXQgYWN0aXZlQWN0aW9uO1xyXG4vKipcclxuICogUGF0Y2hlcyBhIHN0b3JlIHRvIGVuYWJsZSBhY3Rpb24gZ3JvdXBpbmcgaW4gZGV2dG9vbHMgYnkgd3JhcHBpbmcgdGhlIHN0b3JlIHdpdGggYSBQcm94eSB0aGF0IGlzIHBhc3NlZCBhcyB0aGVcclxuICogY29udGV4dCBvZiBhbGwgYWN0aW9ucywgYWxsb3dpbmcgdXMgdG8gc2V0IGBydW5uaW5nQWN0aW9uYCBvbiBlYWNoIGFjY2VzcyBhbmQgZWZmZWN0aXZlbHkgYXNzb2NpYXRpbmcgYW55IHN0YXRlXHJcbiAqIG11dGF0aW9uIHRvIHRoZSBhY3Rpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIHBhdGNoXHJcbiAqIEBwYXJhbSBhY3Rpb25OYW1lcyAtIGxpc3Qgb2YgYWN0aW9uc3QgdG8gcGF0Y2hcclxuICovXHJcbmZ1bmN0aW9uIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIGFjdGlvbk5hbWVzKSB7XHJcbiAgICAvLyBvcmlnaW5hbCBhY3Rpb25zIG9mIHRoZSBzdG9yZSBhcyB0aGV5IGFyZSBnaXZlbiBieSBwaW5pYS4gV2UgYXJlIGdvaW5nIHRvIG92ZXJyaWRlIHRoZW1cclxuICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25OYW1lcy5yZWR1Y2UoKHN0b3JlQWN0aW9ucywgYWN0aW9uTmFtZSkgPT4ge1xyXG4gICAgICAgIC8vIHVzZSB0b1JhdyB0byBhdm9pZCB0cmFja2luZyAjNTQxXHJcbiAgICAgICAgc3RvcmVBY3Rpb25zW2FjdGlvbk5hbWVdID0gdG9SYXcoc3RvcmUpW2FjdGlvbk5hbWVdO1xyXG4gICAgICAgIHJldHVybiBzdG9yZUFjdGlvbnM7XHJcbiAgICB9LCB7fSk7XHJcbiAgICBmb3IgKGNvbnN0IGFjdGlvbk5hbWUgaW4gYWN0aW9ucykge1xyXG4gICAgICAgIHN0b3JlW2FjdGlvbk5hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBzZXRBY3RpdmVQaW5pYShzdG9yZS5fcClcclxuICAgICAgICAgICAgLy8gdGhlIHJ1bm5pbmcgYWN0aW9uIGlkIGlzIGluY3JlbWVudGVkIGluIGEgYmVmb3JlIGFjdGlvbiBob29rXHJcbiAgICAgICAgICAgIGNvbnN0IF9hY3Rpb25JZCA9IHJ1bm5pbmdBY3Rpb25JZDtcclxuICAgICAgICAgICAgY29uc3QgdHJhY2tlZFN0b3JlID0gbmV3IFByb3h5KHN0b3JlLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbiA9IF9hY3Rpb25JZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQoLi4uYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0KC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSBfYWN0aW9uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb25zW2FjdGlvbk5hbWVdLmFwcGx5KHRyYWNrZWRTdG9yZSwgYXJndW1lbnRzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBwaW5pYS51c2UoZGV2dG9vbHNQbHVnaW4pXHJcbiAqL1xyXG5mdW5jdGlvbiBkZXZ0b29sc1BsdWdpbih7IGFwcCwgc3RvcmUsIG9wdGlvbnMgfSkge1xyXG4gICAgLy8gSE1SIG1vZHVsZVxyXG4gICAgaWYgKHN0b3JlLiRpZC5zdGFydHNXaXRoKCdfX2hvdDonKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGRldGVjdCBvcHRpb24gYXBpIHZzIHNldHVwIGFwaVxyXG4gICAgaWYgKG9wdGlvbnMuc3RhdGUpIHtcclxuICAgICAgICBzdG9yZS5faXNPcHRpb25zQVBJID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIG9ubHkgd3JhcCBhY3Rpb25zIGluIG9wdGlvbi1kZWZpbmVkIHN0b3JlcyBhcyB0aGlzIHRlY2huaXF1ZSByZWxpZXMgb25cclxuICAgIC8vIHdyYXBwaW5nIHRoZSBjb250ZXh0IG9mIHRoZSBhY3Rpb24gd2l0aCBhIHByb3h5XHJcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3RhdGUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBwYXRjaEFjdGlvbkZvckdyb3VwaW5nKFxyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGNhbiBjYXN0IHRoZSBzdG9yZS4uLlxyXG4gICAgICAgIHN0b3JlLCBPYmplY3Qua2V5cyhvcHRpb25zLmFjdGlvbnMpKTtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbEhvdFVwZGF0ZSA9IHN0b3JlLl9ob3RVcGRhdGU7XHJcbiAgICAgICAgLy8gVXBncmFkZSB0aGUgSE1SIHRvIGFsc28gdXBkYXRlIHRoZSBuZXcgYWN0aW9uc1xyXG4gICAgICAgIHRvUmF3KHN0b3JlKS5faG90VXBkYXRlID0gZnVuY3Rpb24gKG5ld1N0b3JlKSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsSG90VXBkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIE9iamVjdC5rZXlzKG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYWRkU3RvcmVUb0RldnRvb2xzKGFwcCwgXHJcbiAgICAvLyBGSVhNRTogaXMgdGhlcmUgYSB3YXkgdG8gYWxsb3cgdGhlIGFzc2lnbm1lbnQgZnJvbSBTdG9yZTxJZCwgUywgRywgQT4gdG8gU3RvcmVHZW5lcmljP1xyXG4gICAgc3RvcmUpO1xyXG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgUGluaWEgaW5zdGFuY2UgdG8gYmUgdXNlZCBieSB0aGUgYXBwbGljYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVBpbmlhKCkge1xyXG4gICAgY29uc3Qgc2NvcGUgPSBlZmZlY3RTY29wZSh0cnVlKTtcclxuICAgIC8vIE5PVEU6IGhlcmUgd2UgY291bGQgY2hlY2sgdGhlIHdpbmRvdyBvYmplY3QgZm9yIGEgc3RhdGUgYW5kIGRpcmVjdGx5IHNldCBpdFxyXG4gICAgLy8gaWYgdGhlcmUgaXMgYW55dGhpbmcgbGlrZSBpdCB3aXRoIFZ1ZSAzIFNTUlxyXG4gICAgY29uc3Qgc3RhdGUgPSBzY29wZS5ydW4oKCkgPT4gcmVmKHt9KSk7XHJcbiAgICBsZXQgX3AgPSBbXTtcclxuICAgIC8vIHBsdWdpbnMgYWRkZWQgYmVmb3JlIGNhbGxpbmcgYXBwLnVzZShwaW5pYSlcclxuICAgIGxldCB0b0JlSW5zdGFsbGVkID0gW107XHJcbiAgICBjb25zdCBwaW5pYSA9IG1hcmtSYXcoe1xyXG4gICAgICAgIGluc3RhbGwoYXBwKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIGNhbGxpbmcgdXNlU3RvcmUoKSBvdXRzaWRlIG9mIGEgY29tcG9uZW50IHNldHVwIGFmdGVyXHJcbiAgICAgICAgICAgIC8vIGluc3RhbGxpbmcgcGluaWEncyBwbHVnaW5cclxuICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICBpZiAoIWlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgcGluaWEuX2EgPSBhcHA7XHJcbiAgICAgICAgICAgICAgICBhcHAucHJvdmlkZShwaW5pYVN5bWJvbCwgcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRwaW5pYSA9IHBpbmlhO1xyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgICAgIGlmIChVU0VfREVWVE9PTFMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlclBpbmlhRGV2dG9vbHMoYXBwLCBwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0b0JlSW5zdGFsbGVkLmZvckVhY2goKHBsdWdpbikgPT4gX3AucHVzaChwbHVnaW4pKTtcclxuICAgICAgICAgICAgICAgIHRvQmVJbnN0YWxsZWQgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXNlKHBsdWdpbikge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2EgJiYgIWlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgdG9CZUluc3RhbGxlZC5wdXNoKHBsdWdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfcC5wdXNoKHBsdWdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfcCxcclxuICAgICAgICAvLyBpdCdzIGFjdHVhbGx5IHVuZGVmaW5lZCBoZXJlXHJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgIF9hOiBudWxsLFxyXG4gICAgICAgIF9lOiBzY29wZSxcclxuICAgICAgICBfczogbmV3IE1hcCgpLFxyXG4gICAgICAgIHN0YXRlLFxyXG4gICAgfSk7XHJcbiAgICAvLyBwaW5pYSBkZXZ0b29scyByZWx5IG9uIGRldiBvbmx5IGZlYXR1cmVzIHNvIHRoZXkgY2Fubm90IGJlIGZvcmNlZCB1bmxlc3NcclxuICAgIC8vIHRoZSBkZXYgYnVpbGQgb2YgVnVlIGlzIHVzZWQuIEF2b2lkIG9sZCBicm93c2VycyBsaWtlIElFMTEuXHJcbiAgICBpZiAoVVNFX0RFVlRPT0xTICYmIHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBwaW5pYS51c2UoZGV2dG9vbHNQbHVnaW4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBpbmlhO1xyXG59XG5cbi8qKlxyXG4gKiBDaGVja3MgaWYgYSBmdW5jdGlvbiBpcyBhIGBTdG9yZURlZmluaXRpb25gLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm4gLSBvYmplY3QgdG8gdGVzdFxyXG4gKiBAcmV0dXJucyB0cnVlIGlmIGBmbmAgaXMgYSBTdG9yZURlZmluaXRpb25cclxuICovXHJcbmNvbnN0IGlzVXNlU3RvcmUgPSAoZm4pID0+IHtcclxuICAgIHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGZuLiRpZCA9PT0gJ3N0cmluZyc7XHJcbn07XHJcbi8qKlxyXG4gKiBNdXRhdGVzIGluIHBsYWNlIGBuZXdTdGF0ZWAgd2l0aCBgb2xkU3RhdGVgIHRvIF9ob3QgdXBkYXRlXyBpdC4gSXQgd2lsbFxyXG4gKiByZW1vdmUgYW55IGtleSBub3QgZXhpc3RpbmcgaW4gYG5ld1N0YXRlYCBhbmQgcmVjdXJzaXZlbHkgbWVyZ2UgcGxhaW5cclxuICogb2JqZWN0cy5cclxuICpcclxuICogQHBhcmFtIG5ld1N0YXRlIC0gbmV3IHN0YXRlIG9iamVjdCB0byBiZSBwYXRjaGVkXHJcbiAqIEBwYXJhbSBvbGRTdGF0ZSAtIG9sZCBzdGF0ZSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHBhdGNoIG5ld1N0YXRlXHJcbiAqIEByZXR1cm5zIC0gbmV3U3RhdGVcclxuICovXHJcbmZ1bmN0aW9uIHBhdGNoT2JqZWN0KG5ld1N0YXRlLCBvbGRTdGF0ZSkge1xyXG4gICAgLy8gbm8gbmVlZCB0byBnbyB0aHJvdWdoIHN5bWJvbHMgYmVjYXVzZSB0aGV5IGNhbm5vdCBiZSBzZXJpYWxpemVkIGFueXdheVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU3RhdGUpIHtcclxuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IG9sZFN0YXRlW2tleV07XHJcbiAgICAgICAgLy8gc2tpcCB0aGUgd2hvbGUgc3ViIHRyZWVcclxuICAgICAgICBpZiAoIShrZXkgaW4gbmV3U3RhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IG5ld1N0YXRlW2tleV07XHJcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0VmFsdWUpICYmXHJcbiAgICAgICAgICAgIGlzUGxhaW5PYmplY3Qoc3ViUGF0Y2gpICYmXHJcbiAgICAgICAgICAgICFpc1JlZihzdWJQYXRjaCkgJiZcclxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSBwYXRjaE9iamVjdCh0YXJnZXRWYWx1ZSwgc3ViUGF0Y2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gb2JqZWN0cyBhcmUgZWl0aGVyIGEgYml0IG1vcmUgY29tcGxleCAoZS5nLiByZWZzKSBvciBwcmltaXRpdmVzLCBzbyB3ZVxyXG4gICAgICAgICAgICAvLyBqdXN0IHNldCB0aGUgd2hvbGUgdGhpbmdcclxuICAgICAgICAgICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgc2V0KG5ld1N0YXRlLCBrZXksIHN1YlBhdGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSBzdWJQYXRjaDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXdTdGF0ZTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhbiBfYWNjZXB0XyBmdW5jdGlvbiB0byBwYXNzIHRvIGBpbXBvcnQubWV0YS5ob3RgIGluIFZpdGUgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiBjb25zdCB1c2VVc2VyID0gZGVmaW5lU3RvcmUoLi4uKVxyXG4gKiBpZiAoaW1wb3J0Lm1ldGEuaG90KSB7XHJcbiAqICAgaW1wb3J0Lm1ldGEuaG90LmFjY2VwdChhY2NlcHRITVJVcGRhdGUodXNlVXNlciwgaW1wb3J0Lm1ldGEuaG90KSlcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGluaXRpYWxVc2VTdG9yZSAtIHJldHVybiBvZiB0aGUgZGVmaW5lU3RvcmUgdG8gaG90IHVwZGF0ZVxyXG4gKiBAcGFyYW0gaG90IC0gYGltcG9ydC5tZXRhLmhvdGBcclxuICovXHJcbmZ1bmN0aW9uIGFjY2VwdEhNUlVwZGF0ZShpbml0aWFsVXNlU3RvcmUsIGhvdCkge1xyXG4gICAgLy8gc3RyaXAgYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIGlpZmUucHJvZFxyXG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICByZXR1cm4gKCkgPT4geyB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChuZXdNb2R1bGUpID0+IHtcclxuICAgICAgICBjb25zdCBwaW5pYSA9IGhvdC5kYXRhLnBpbmlhIHx8IGluaXRpYWxVc2VTdG9yZS5fcGluaWE7XHJcbiAgICAgICAgaWYgKCFwaW5pYSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzIHN0b3JlIGlzIHN0aWxsIG5vdCB1c2VkXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJlc2VydmUgdGhlIHBpbmlhIGluc3RhbmNlIGFjcm9zcyBsb2Fkc1xyXG4gICAgICAgIGhvdC5kYXRhLnBpbmlhID0gcGluaWE7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2dvdCBkYXRhJywgbmV3U3RvcmUpXHJcbiAgICAgICAgZm9yIChjb25zdCBleHBvcnROYW1lIGluIG5ld01vZHVsZSkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VTdG9yZSA9IG5ld01vZHVsZVtleHBvcnROYW1lXTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNraW5nIGZvcicsIGV4cG9ydE5hbWUpXHJcbiAgICAgICAgICAgIGlmIChpc1VzZVN0b3JlKHVzZVN0b3JlKSAmJiBwaW5pYS5fcy5oYXModXNlU3RvcmUuJGlkKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0FjY2VwdGluZyB1cGRhdGUgZm9yJywgdXNlU3RvcmUuJGlkKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB1c2VTdG9yZS4kaWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWQgIT09IGluaXRpYWxVc2VTdG9yZS4kaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoZSBpZCBvZiB0aGUgc3RvcmUgY2hhbmdlZCBmcm9tIFwiJHtpbml0aWFsVXNlU3RvcmUuJGlkfVwiIHRvIFwiJHtpZH1cIi4gUmVsb2FkaW5nLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBpbXBvcnQubWV0YS5ob3QuaW52YWxpZGF0ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvdC5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1N0b3JlID0gcGluaWEuX3MuZ2V0KGlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdTdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbUGluaWFdOiBza2lwcGluZyBobXIgYmVjYXVzZSBzdG9yZSBkb2Vzbid0IGV4aXN0IHlldGApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVzZVN0b3JlKHBpbmlhLCBleGlzdGluZ1N0b3JlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cblxuY29uc3Qgbm9vcCA9ICgpID0+IHsgfTtcclxuZnVuY3Rpb24gYWRkU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbnMsIGNhbGxiYWNrLCBkZXRhY2hlZCwgb25DbGVhbnVwID0gbm9vcCkge1xyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGNhbGxiYWNrKTtcclxuICAgIGNvbnN0IHJlbW92ZVN1YnNjcmlwdGlvbiA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBpZHggPSBzdWJzY3JpcHRpb25zLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgIGlmIChpZHggPiAtMSkge1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25zLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICBvbkNsZWFudXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgaWYgKCFkZXRhY2hlZCAmJiBnZXRDdXJyZW50U2NvcGUoKSkge1xyXG4gICAgICAgIG9uU2NvcGVEaXNwb3NlKHJlbW92ZVN1YnNjcmlwdGlvbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaXB0aW9uO1xyXG59XHJcbmZ1bmN0aW9uIHRyaWdnZXJTdWJzY3JpcHRpb25zKHN1YnNjcmlwdGlvbnMsIC4uLmFyZ3MpIHtcclxuICAgIHN1YnNjcmlwdGlvbnMuc2xpY2UoKS5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgfSk7XHJcbn1cblxuZnVuY3Rpb24gbWVyZ2VSZWFjdGl2ZU9iamVjdHModGFyZ2V0LCBwYXRjaFRvQXBwbHkpIHtcclxuICAgIC8vIEhhbmRsZSBNYXAgaW5zdGFuY2VzXHJcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTWFwICYmIHBhdGNoVG9BcHBseSBpbnN0YW5jZW9mIE1hcCkge1xyXG4gICAgICAgIHBhdGNoVG9BcHBseS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB0YXJnZXQuc2V0KGtleSwgdmFsdWUpKTtcclxuICAgIH1cclxuICAgIC8vIEhhbmRsZSBTZXQgaW5zdGFuY2VzXHJcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgU2V0ICYmIHBhdGNoVG9BcHBseSBpbnN0YW5jZW9mIFNldCkge1xyXG4gICAgICAgIHBhdGNoVG9BcHBseS5mb3JFYWNoKHRhcmdldC5hZGQsIHRhcmdldCk7XHJcbiAgICB9XHJcbiAgICAvLyBubyBuZWVkIHRvIGdvIHRocm91Z2ggc3ltYm9scyBiZWNhdXNlIHRoZXkgY2Fubm90IGJlIHNlcmlhbGl6ZWQgYW55d2F5XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXRjaFRvQXBwbHkpIHtcclxuICAgICAgICBpZiAoIXBhdGNoVG9BcHBseS5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IHBhdGNoVG9BcHBseVtrZXldO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gdGFyZ2V0W2tleV07XHJcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0VmFsdWUpICYmXHJcbiAgICAgICAgICAgIGlzUGxhaW5PYmplY3Qoc3ViUGF0Y2gpICYmXHJcbiAgICAgICAgICAgIHRhcmdldC5oYXNPd25Qcm9wZXJ0eShrZXkpICYmXHJcbiAgICAgICAgICAgICFpc1JlZihzdWJQYXRjaCkgJiZcclxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XHJcbiAgICAgICAgICAgIC8vIE5PVEU6IGhlcmUgSSB3YW50ZWQgdG8gd2FybiBhYm91dCBpbmNvbnNpc3RlbnQgdHlwZXMgYnV0IGl0J3Mgbm90IHBvc3NpYmxlIGJlY2F1c2UgaW4gc2V0dXAgc3RvcmVzIG9uZSBtaWdodFxyXG4gICAgICAgICAgICAvLyBzdGFydCB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSBhcyBhIGNlcnRhaW4gdHlwZSBlLmcuIGEgTWFwLCBhbmQgdGhlbiBmb3Igc29tZSByZWFzb24sIGR1cmluZyBTU1IsIGNoYW5nZSB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRvIGB1bmRlZmluZWRgLiBXaGVuIHRyeWluZyB0byBoeWRyYXRlLCB3ZSB3YW50IHRvIG92ZXJyaWRlIHRoZSBNYXAgd2l0aCBgdW5kZWZpbmVkYC5cclxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBtZXJnZVJlYWN0aXZlT2JqZWN0cyh0YXJnZXRWYWx1ZSwgc3ViUGF0Y2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogc3ViUGF0Y2ggaXMgYSB2YWxpZCB2YWx1ZVxyXG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHN1YlBhdGNoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuY29uc3Qgc2tpcEh5ZHJhdGVTeW1ib2wgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgID8gU3ltYm9sKCdwaW5pYTpza2lwSHlkcmF0aW9uJylcclxuICAgIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gU3ltYm9sKCk7XHJcbmNvbnN0IHNraXBIeWRyYXRlTWFwID0gLyojX19QVVJFX18qLyBuZXcgV2Vha01hcCgpO1xyXG4vKipcclxuICogVGVsbHMgUGluaWEgdG8gc2tpcCB0aGUgaHlkcmF0aW9uIHByb2Nlc3Mgb2YgYSBnaXZlbiBvYmplY3QuIFRoaXMgaXMgdXNlZnVsIGluIHNldHVwIHN0b3JlcyAob25seSkgd2hlbiB5b3UgcmV0dXJuIGFcclxuICogc3RhdGVmdWwgb2JqZWN0IGluIHRoZSBzdG9yZSBidXQgaXQgaXNuJ3QgcmVhbGx5IHN0YXRlLiBlLmcuIHJldHVybmluZyBhIHJvdXRlciBpbnN0YW5jZSBpbiBhIHNldHVwIHN0b3JlLlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqIC0gdGFyZ2V0IG9iamVjdFxyXG4gKiBAcmV0dXJucyBvYmpcclxuICovXHJcbmZ1bmN0aW9uIHNraXBIeWRyYXRlKG9iaikge1xyXG4gICAgcmV0dXJuIGlzVnVlMlxyXG4gICAgICAgID8gLy8gaW4gQHZ1ZS9jb21wb3NpdGlvbi1hcGksIHRoZSByZWZzIGFyZSBzZWFsZWQgc28gZGVmaW5lUHJvcGVydHkgZG9lc24ndCB3b3JrLi4uXHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHNraXBIeWRyYXRlTWFwLnNldChvYmosIDEpICYmIG9ialxyXG4gICAgICAgIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgc2tpcEh5ZHJhdGVTeW1ib2wsIHt9KTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgc2hvdWxkIGJlIGh5ZHJhdGVkXHJcbiAqXHJcbiAqIEBwYXJhbSBvYmogLSB0YXJnZXQgdmFyaWFibGVcclxuICogQHJldHVybnMgdHJ1ZSBpZiBgb2JqYCBzaG91bGQgYmUgaHlkcmF0ZWRcclxuICovXHJcbmZ1bmN0aW9uIHNob3VsZEh5ZHJhdGUob2JqKSB7XHJcbiAgICByZXR1cm4gaXNWdWUyXHJcbiAgICAgICAgPyAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyAhc2tpcEh5ZHJhdGVNYXAuaGFzKG9iailcclxuICAgICAgICA6ICFpc1BsYWluT2JqZWN0KG9iaikgfHwgIW9iai5oYXNPd25Qcm9wZXJ0eShza2lwSHlkcmF0ZVN5bWJvbCk7XHJcbn1cclxuY29uc3QgeyBhc3NpZ24gfSA9IE9iamVjdDtcclxuZnVuY3Rpb24gaXNDb21wdXRlZChvKSB7XHJcbiAgICByZXR1cm4gISEoaXNSZWYobykgJiYgby5lZmZlY3QpO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNTdG9yZShpZCwgb3B0aW9ucywgcGluaWEsIGhvdCkge1xyXG4gICAgY29uc3QgeyBzdGF0ZSwgYWN0aW9ucywgZ2V0dGVycyB9ID0gb3B0aW9ucztcclxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHBpbmlhLnN0YXRlLnZhbHVlW2lkXTtcclxuICAgIGxldCBzdG9yZTtcclxuICAgIGZ1bmN0aW9uIHNldHVwKCkge1xyXG4gICAgICAgIGlmICghaW5pdGlhbFN0YXRlICYmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICFob3QpKSB7XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgICAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgICAgICAgICBzZXQocGluaWEuc3RhdGUudmFsdWUsIGlkLCBzdGF0ZSA/IHN0YXRlKCkgOiB7fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVtpZF0gPSBzdGF0ZSA/IHN0YXRlKCkgOiB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhdm9pZCBjcmVhdGluZyBhIHN0YXRlIGluIHBpbmlhLnN0YXRlLnZhbHVlXHJcbiAgICAgICAgY29uc3QgbG9jYWxTdGF0ZSA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3RcclxuICAgICAgICAgICAgPyAvLyB1c2UgcmVmKCkgdG8gdW53cmFwIHJlZnMgaW5zaWRlIHN0YXRlIFRPRE86IGNoZWNrIGlmIHRoaXMgaXMgc3RpbGwgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgICAgICB0b1JlZnMocmVmKHN0YXRlID8gc3RhdGUoKSA6IHt9KS52YWx1ZSlcclxuICAgICAgICAgICAgOiB0b1JlZnMocGluaWEuc3RhdGUudmFsdWVbaWRdKTtcclxuICAgICAgICByZXR1cm4gYXNzaWduKGxvY2FsU3RhdGUsIGFjdGlvbnMsIE9iamVjdC5rZXlzKGdldHRlcnMgfHwge30pLnJlZHVjZSgoY29tcHV0ZWRHZXR0ZXJzLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmFtZSBpbiBsb2NhbFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFvwn42NXTogQSBnZXR0ZXIgY2Fubm90IGhhdmUgdGhlIHNhbWUgbmFtZSBhcyBhbm90aGVyIHN0YXRlIHByb3BlcnR5LiBSZW5hbWUgb25lIG9mIHRoZW0uIEZvdW5kIHdpdGggXCIke25hbWV9XCIgaW4gc3RvcmUgXCIke2lkfVwiLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbXB1dGVkR2V0dGVyc1tuYW1lXSA9IG1hcmtSYXcoY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNyZWF0ZWQganVzdCBiZWZvcmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KGlkKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsbG93IGNyb3NzIHVzaW5nIHN0b3Jlc1xyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICAgICAgICAgIGlmIChpc1Z1ZTIgJiYgIXN0b3JlLl9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBnZXR0ZXJzIVtuYW1lXS5jYWxsKGNvbnRleHQsIGNvbnRleHQpXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBhdm9pZCByZWFkaW5nIHRoZSBnZXR0ZXIgd2hpbGUgYXNzaWduaW5nIHdpdGggYSBnbG9iYWwgdmFyaWFibGVcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzW25hbWVdLmNhbGwoc3RvcmUsIHN0b3JlKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZWRHZXR0ZXJzO1xyXG4gICAgICAgIH0sIHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdG9yZSA9IGNyZWF0ZVNldHVwU3RvcmUoaWQsIHNldHVwLCBvcHRpb25zLCBwaW5pYSwgaG90LCB0cnVlKTtcclxuICAgIHN0b3JlLiRyZXNldCA9IGZ1bmN0aW9uICRyZXNldCgpIHtcclxuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHN0YXRlID8gc3RhdGUoKSA6IHt9O1xyXG4gICAgICAgIC8vIHdlIHVzZSBhIHBhdGNoIHRvIGdyb3VwIGFsbCBjaGFuZ2VzIGludG8gb25lIHNpbmdsZSBzdWJzY3JpcHRpb25cclxuICAgICAgICB0aGlzLiRwYXRjaCgoJHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgIGFzc2lnbigkc3RhdGUsIG5ld1N0YXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gc3RvcmU7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlU2V0dXBTdG9yZSgkaWQsIHNldHVwLCBvcHRpb25zID0ge30sIHBpbmlhLCBob3QsIGlzT3B0aW9uc1N0b3JlKSB7XHJcbiAgICBsZXQgc2NvcGU7XHJcbiAgICBjb25zdCBvcHRpb25zRm9yUGx1Z2luID0gYXNzaWduKHsgYWN0aW9uczoge30gfSwgb3B0aW9ucyk7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGFjdGl2ZSBpcyBhbiBpbnRlcm5hbCBwcm9wZXJ0eVxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcGluaWEuX2UuYWN0aXZlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQaW5pYSBkZXN0cm95ZWQnKTtcclxuICAgIH1cclxuICAgIC8vIHdhdGNoZXIgb3B0aW9ucyBmb3IgJHN1YnNjcmliZVxyXG4gICAgY29uc3QgJHN1YnNjcmliZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgZGVlcDogdHJ1ZSxcclxuICAgICAgICAvLyBmbHVzaDogJ3Bvc3QnLFxyXG4gICAgfTtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc1Z1ZTIpIHtcclxuICAgICAgICAkc3Vic2NyaWJlT3B0aW9ucy5vblRyaWdnZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgaWYgKGlzTGlzdGVuaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlckV2ZW50cyA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgdHJpZ2dlcmluZyB0aGlzIHdoaWxlIHRoZSBzdG9yZSBpcyBiZWluZyBidWlsdCBhbmQgdGhlIHN0YXRlIGlzIGJlaW5nIHNldCBpbiBwaW5pYVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTGlzdGVuaW5nID09IGZhbHNlICYmICFzdG9yZS5faG90VXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIGxldCBwYXRjaCBzZW5kIGFsbCB0aGUgZXZlbnRzIHRvZ2V0aGVyIGxhdGVyXHJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGVidWdnZXJFdmVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXJFdmVudHMucHVzaChldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfwn42NIGRlYnVnZ2VyRXZlbnRzIHNob3VsZCBiZSBhbiBhcnJheS4gVGhpcyBpcyBtb3N0IGxpa2VseSBhbiBpbnRlcm5hbCBQaW5pYSBidWcuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8gaW50ZXJuYWwgc3RhdGVcclxuICAgIGxldCBpc0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxyXG4gICAgbGV0IGlzU3luY0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxyXG4gICAgbGV0IHN1YnNjcmlwdGlvbnMgPSBtYXJrUmF3KFtdKTtcclxuICAgIGxldCBhY3Rpb25TdWJzY3JpcHRpb25zID0gbWFya1JhdyhbXSk7XHJcbiAgICBsZXQgZGVidWdnZXJFdmVudHM7XHJcbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdO1xyXG4gICAgLy8gYXZvaWQgc2V0dGluZyB0aGUgc3RhdGUgZm9yIG9wdGlvbiBzdG9yZXMgaWYgaXQgaXMgc2V0XHJcbiAgICAvLyBieSB0aGUgc2V0dXBcclxuICAgIGlmICghaXNPcHRpb25zU3RvcmUgJiYgIWluaXRpYWxTdGF0ZSAmJiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAhaG90KSkge1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgc2V0KHBpbmlhLnN0YXRlLnZhbHVlLCAkaWQsIHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBob3RTdGF0ZSA9IHJlZih7fSk7XHJcbiAgICAvLyBhdm9pZCB0cmlnZ2VyaW5nIHRvbyBtYW55IGxpc3RlbmVyc1xyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3BpbmlhL2lzc3Vlcy8xMTI5XHJcbiAgICBsZXQgYWN0aXZlTGlzdGVuZXI7XHJcbiAgICBmdW5jdGlvbiAkcGF0Y2gocGFydGlhbFN0YXRlT3JNdXRhdG9yKSB7XHJcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbk11dGF0aW9uO1xyXG4gICAgICAgIGlzTGlzdGVuaW5nID0gaXNTeW5jTGlzdGVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgLy8gcmVzZXQgdGhlIGRlYnVnZ2VyIGV2ZW50cyBzaW5jZSBwYXRjaGVzIGFyZSBzeW5jXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGRlYnVnZ2VyRXZlbnRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgcGFydGlhbFN0YXRlT3JNdXRhdG9yID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHBhcnRpYWxTdGF0ZU9yTXV0YXRvcihwaW5pYS5zdGF0ZS52YWx1ZVskaWRdKTtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTXV0YXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBNdXRhdGlvblR5cGUucGF0Y2hGdW5jdGlvbixcclxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6ICRpZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtZXJnZVJlYWN0aXZlT2JqZWN0cyhwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCBwYXJ0aWFsU3RhdGVPck11dGF0b3IpO1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25NdXRhdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCxcclxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHBhcnRpYWxTdGF0ZU9yTXV0YXRvcixcclxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6ICRpZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG15TGlzdGVuZXJJZCA9IChhY3RpdmVMaXN0ZW5lciA9IFN5bWJvbCgpKTtcclxuICAgICAgICBuZXh0VGljaygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlTGlzdGVuZXIgPT09IG15TGlzdGVuZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgICAgICAvLyBiZWNhdXNlIHdlIHBhdXNlZCB0aGUgd2F0Y2hlciwgd2UgbmVlZCB0byBtYW51YWxseSBjYWxsIHRoZSBzdWJzY3JpcHRpb25zXHJcbiAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucywgc3Vic2NyaXB0aW9uTXV0YXRpb24sIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0pO1xyXG4gICAgfVxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgIGNvbnN0ICRyZXNldCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgID8gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYPCfjY06IFN0b3JlIFwiJHskaWR9XCIgaXMgYnVpbHQgdXNpbmcgdGhlIHNldHVwIHN5bnRheCBhbmQgZG9lcyBub3QgaW1wbGVtZW50ICRyZXNldCgpLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICA6IG5vb3A7XHJcbiAgICBmdW5jdGlvbiAkZGlzcG9zZSgpIHtcclxuICAgICAgICBzY29wZS5zdG9wKCk7XHJcbiAgICAgICAgc3Vic2NyaXB0aW9ucyA9IFtdO1xyXG4gICAgICAgIGFjdGlvblN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgICAgICBwaW5pYS5fcy5kZWxldGUoJGlkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogV3JhcHMgYW4gYWN0aW9uIHRvIGhhbmRsZSBzdWJzY3JpcHRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIC0gbmFtZSBvZiB0aGUgYWN0aW9uXHJcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gYWN0aW9uIHRvIHdyYXBcclxuICAgICAqIEByZXR1cm5zIGEgd3JhcHBlZCBhY3Rpb24gdG8gaGFuZGxlIHN1YnNjcmlwdGlvbnNcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gd3JhcEFjdGlvbihuYW1lLCBhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFmdGVyQ2FsbGJhY2tMaXN0ID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IG9uRXJyb3JDYWxsYmFja0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gYWZ0ZXIoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGFmdGVyQ2FsbGJhY2tMaXN0LnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3JDYWxsYmFja0xpc3QucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhhY3Rpb25TdWJzY3JpcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIHN0b3JlLFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXIsXHJcbiAgICAgICAgICAgICAgICBvbkVycm9yLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHJldDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldCA9IGFjdGlvbi5hcHBseSh0aGlzICYmIHRoaXMuJGlkID09PSAkaWQgPyB0aGlzIDogc3RvcmUsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHN5bmMgZXJyb3JzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhvbkVycm9yQ2FsbGJhY2tMaXN0LCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldFxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKGFmdGVyQ2FsbGJhY2tMaXN0LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMob25FcnJvckNhbGxiYWNrTGlzdCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhbGxvdyB0aGUgYWZ0ZXJDYWxsYmFjayB0byBvdmVycmlkZSB0aGUgcmV0dXJuIHZhbHVlXHJcbiAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKGFmdGVyQ2FsbGJhY2tMaXN0LCByZXQpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBfaG1yUGF5bG9hZCA9IC8qI19fUFVSRV9fKi8gbWFya1Jhdyh7XHJcbiAgICAgICAgYWN0aW9uczoge30sXHJcbiAgICAgICAgZ2V0dGVyczoge30sXHJcbiAgICAgICAgc3RhdGU6IFtdLFxyXG4gICAgICAgIGhvdFN0YXRlLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBwYXJ0aWFsU3RvcmUgPSB7XHJcbiAgICAgICAgX3A6IHBpbmlhLFxyXG4gICAgICAgIC8vIF9zOiBzY29wZSxcclxuICAgICAgICAkaWQsXHJcbiAgICAgICAgJG9uQWN0aW9uOiBhZGRTdWJzY3JpcHRpb24uYmluZChudWxsLCBhY3Rpb25TdWJzY3JpcHRpb25zKSxcclxuICAgICAgICAkcGF0Y2gsXHJcbiAgICAgICAgJHJlc2V0LFxyXG4gICAgICAgICRzdWJzY3JpYmUoY2FsbGJhY2ssIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgICAgICBjb25zdCByZW1vdmVTdWJzY3JpcHRpb24gPSBhZGRTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9ucywgY2FsbGJhY2ssIG9wdGlvbnMuZGV0YWNoZWQsICgpID0+IHN0b3BXYXRjaGVyKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBzdG9wV2F0Y2hlciA9IHNjb3BlLnJ1bigoKSA9PiB3YXRjaCgoKSA9PiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCAoc3RhdGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmZsdXNoID09PSAnc3luYycgPyBpc1N5bmNMaXN0ZW5pbmcgOiBpc0xpc3RlbmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBNdXRhdGlvblR5cGUuZGlyZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHM6IGRlYnVnZ2VyRXZlbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHN0YXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgYXNzaWduKHt9LCAkc3Vic2NyaWJlT3B0aW9ucywgb3B0aW9ucykpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZVN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgICRkaXNwb3NlLFxyXG4gICAgfTtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgIC8vIHN0YXJ0IGFzIG5vbiByZWFkeVxyXG4gICAgICAgIHBhcnRpYWxTdG9yZS5fciA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3RvcmUgPSByZWFjdGl2ZSgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgVVNFX0RFVlRPT0xTXHJcbiAgICAgICAgPyBhc3NpZ24oe1xyXG4gICAgICAgICAgICBfaG1yUGF5bG9hZCxcclxuICAgICAgICAgICAgX2N1c3RvbVByb3BlcnRpZXM6IG1hcmtSYXcobmV3IFNldCgpKSwgLy8gZGV2dG9vbHMgY3VzdG9tIHByb3BlcnRpZXNcclxuICAgICAgICB9LCBwYXJ0aWFsU3RvcmVcclxuICAgICAgICAvLyBtdXN0IGJlIGFkZGVkIGxhdGVyXHJcbiAgICAgICAgLy8gc2V0dXBTdG9yZVxyXG4gICAgICAgIClcclxuICAgICAgICA6IHBhcnRpYWxTdG9yZSk7XHJcbiAgICAvLyBzdG9yZSB0aGUgcGFydGlhbCBzdG9yZSBub3cgc28gdGhlIHNldHVwIG9mIHN0b3JlcyBjYW4gaW5zdGFudGlhdGUgZWFjaCBvdGhlciBiZWZvcmUgdGhleSBhcmUgZmluaXNoZWQgd2l0aG91dFxyXG4gICAgLy8gY3JlYXRpbmcgaW5maW5pdGUgbG9vcHMuXHJcbiAgICBwaW5pYS5fcy5zZXQoJGlkLCBzdG9yZSk7XHJcbiAgICAvLyBUT0RPOiBpZGVhIGNyZWF0ZSBza2lwU2VyaWFsaXplIHRoYXQgbWFya3MgcHJvcGVydGllcyBhcyBub24gc2VyaWFsaXphYmxlIGFuZCB0aGV5IGFyZSBza2lwcGVkXHJcbiAgICBjb25zdCBzZXR1cFN0b3JlID0gcGluaWEuX2UucnVuKCgpID0+IHtcclxuICAgICAgICBzY29wZSA9IGVmZmVjdFNjb3BlKCk7XHJcbiAgICAgICAgcmV0dXJuIHNjb3BlLnJ1bigoKSA9PiBzZXR1cCgpKTtcclxuICAgIH0pO1xyXG4gICAgLy8gb3ZlcndyaXRlIGV4aXN0aW5nIGFjdGlvbnMgdG8gc3VwcG9ydCAkb25BY3Rpb25cclxuICAgIGZvciAoY29uc3Qga2V5IGluIHNldHVwU3RvcmUpIHtcclxuICAgICAgICBjb25zdCBwcm9wID0gc2V0dXBTdG9yZVtrZXldO1xyXG4gICAgICAgIGlmICgoaXNSZWYocHJvcCkgJiYgIWlzQ29tcHV0ZWQocHJvcCkpIHx8IGlzUmVhY3RpdmUocHJvcCkpIHtcclxuICAgICAgICAgICAgLy8gbWFyayBpdCBhcyBhIHBpZWNlIG9mIHN0YXRlIHRvIGJlIHNlcmlhbGl6ZWRcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QpIHtcclxuICAgICAgICAgICAgICAgIHNldChob3RTdGF0ZS52YWx1ZSwga2V5LCB0b1JlZihzZXR1cFN0b3JlLCBrZXkpKTtcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZU9wdGlvblN0b3JlIGRpcmVjdGx5IHNldHMgdGhlIHN0YXRlIGluIHBpbmlhLnN0YXRlLnZhbHVlIHNvIHdlXHJcbiAgICAgICAgICAgICAgICAvLyBjYW4ganVzdCBza2lwIHRoYXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghaXNPcHRpb25zU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluIHNldHVwIHN0b3JlcyB3ZSBtdXN0IGh5ZHJhdGUgdGhlIHN0YXRlIGFuZCBzeW5jIHBpbmlhIHN0YXRlIHRyZWUgd2l0aCB0aGUgcmVmcyB0aGUgdXNlciBqdXN0IGNyZWF0ZWRcclxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsU3RhdGUgJiYgc2hvdWxkSHlkcmF0ZShwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1JlZihwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wLnZhbHVlID0gaW5pdGlhbFN0YXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9iYWJseSBhIHJlYWN0aXZlIG9iamVjdCwgbGV0cyByZWN1cnNpdmVseSBhc3NpZ25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogcHJvcCBpcyB1bmtub3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlUmVhY3RpdmVPYmplY3RzKHByb3AsIGluaXRpYWxTdGF0ZVtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciB0aGUgcmVmIHRvIHRoZSBwaW5pYSBzdGF0ZSB0byBrZWVwIGV2ZXJ5dGhpbmcgaW4gc3luY1xyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0KHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0sIGtleSwgcHJvcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdW2tleV0gPSBwcm9wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIF9obXJQYXlsb2FkLnN0YXRlLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhY3Rpb25cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHByb3AgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UgYXJlIG92ZXJyaWRpbmcgdGhlIGZ1bmN0aW9uIHdlIGF2b2lkIHdyYXBwaW5nIGlmXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvblZhbHVlID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCA/IHByb3AgOiB3cmFwQWN0aW9uKGtleSwgcHJvcCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgYSBob3QgbW9kdWxlIHJlcGxhY2VtZW50IHN0b3JlIGJlY2F1c2UgdGhlIGhvdFVwZGF0ZSBtZXRob2QgbmVlZHNcclxuICAgICAgICAgICAgLy8gdG8gZG8gaXQgd2l0aCB0aGUgcmlnaHQgY29udGV4dFxyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgc2V0KHNldHVwU3RvcmUsIGtleSwgYWN0aW9uVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICAgICAgc2V0dXBTdG9yZVtrZXldID0gYWN0aW9uVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgX2htclBheWxvYWQuYWN0aW9uc1trZXldID0gcHJvcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBsaXN0IGFjdGlvbnMgc28gdGhleSBjYW4gYmUgdXNlZCBpbiBwbHVnaW5zXHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgb3B0aW9uc0ZvclBsdWdpbi5hY3Rpb25zW2tleV0gPSBwcm9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgLy8gYWRkIGdldHRlcnMgZm9yIGRldnRvb2xzXHJcbiAgICAgICAgICAgIGlmIChpc0NvbXB1dGVkKHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICBfaG1yUGF5bG9hZC5nZXR0ZXJzW2tleV0gPSBpc09wdGlvbnNTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgID8gLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmdldHRlcnNba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgIDogcHJvcDtcclxuICAgICAgICAgICAgICAgIGlmIChJU19DTElFTlQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZXR0ZXJzID0gc2V0dXBTdG9yZS5fZ2V0dGVycyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBzYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXR1cFN0b3JlLl9nZXR0ZXJzID0gbWFya1JhdyhbXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdldHRlcnMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIHRoZSBzdGF0ZSwgZ2V0dGVycywgYW5kIGFjdGlvbiBwcm9wZXJ0aWVzXHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyhzZXR1cFN0b3JlKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgc2V0KHN0b3JlLCBrZXksIHNldHVwU3RvcmVba2V5XSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhc3NpZ24oc3RvcmUsIHNldHVwU3RvcmUpO1xyXG4gICAgICAgIC8vIGFsbG93cyByZXRyaWV2aW5nIHJlYWN0aXZlIG9iamVjdHMgd2l0aCBgc3RvcmVUb1JlZnMoKWAuIE11c3QgYmUgY2FsbGVkIGFmdGVyIGFzc2lnbmluZyB0byB0aGUgcmVhY3RpdmUgb2JqZWN0LlxyXG4gICAgICAgIC8vIE1ha2UgYHN0b3JlVG9SZWZzKClgIHdvcmsgd2l0aCBgcmVhY3RpdmUoKWAgIzc5OVxyXG4gICAgICAgIGFzc2lnbih0b1JhdyhzdG9yZSksIHNldHVwU3RvcmUpO1xyXG4gICAgfVxyXG4gICAgLy8gdXNlIHRoaXMgaW5zdGVhZCBvZiBhIGNvbXB1dGVkIHdpdGggc2V0dGVyIHRvIGJlIGFibGUgdG8gY3JlYXRlIGl0IGFueXdoZXJlXHJcbiAgICAvLyB3aXRob3V0IGxpbmtpbmcgdGhlIGNvbXB1dGVkIGxpZmVzcGFuIHRvIHdoZXJldmVyIHRoZSBzdG9yZSBpcyBmaXJzdFxyXG4gICAgLy8gY3JlYXRlZC5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZSwgJyRzdGF0ZScsIHtcclxuICAgICAgICBnZXQ6ICgpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90ID8gaG90U3RhdGUudmFsdWUgOiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdKSxcclxuICAgICAgICBzZXQ6IChzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY2Fubm90IHNldCBob3RTdGF0ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRwYXRjaCgoJHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIC8vIGFkZCB0aGUgaG90VXBkYXRlIGJlZm9yZSBwbHVnaW5zIHRvIGFsbG93IHRoZW0gdG8gb3ZlcnJpZGUgaXRcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgc3RvcmUuX2hvdFVwZGF0ZSA9IG1hcmtSYXcoKG5ld1N0b3JlKSA9PiB7XHJcbiAgICAgICAgICAgIHN0b3JlLl9ob3RVcGRhdGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIG5ld1N0b3JlLl9obXJQYXlsb2FkLnN0YXRlLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGVLZXkgaW4gc3RvcmUuJHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U3RhdGVUYXJnZXQgPSBuZXdTdG9yZS4kc3RhdGVbc3RhdGVLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFN0YXRlU291cmNlID0gc3RvcmUuJHN0YXRlW3N0YXRlS2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5ld1N0YXRlVGFyZ2V0ID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KG5ld1N0YXRlVGFyZ2V0KSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KG9sZFN0YXRlU291cmNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaE9iamVjdChuZXdTdGF0ZVRhcmdldCwgb2xkU3RhdGVTb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgdGhlIHJlZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdG9yZS4kc3RhdGVbc3RhdGVLZXldID0gb2xkU3RhdGVTb3VyY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcGF0Y2ggZGlyZWN0IGFjY2VzcyBwcm9wZXJ0aWVzIHRvIGFsbG93IHN0b3JlLnN0YXRlUHJvcGVydHkgdG8gd29yayBhc1xyXG4gICAgICAgICAgICAgICAgLy8gc3RvcmUuJHN0YXRlLnN0YXRlUHJvcGVydHlcclxuICAgICAgICAgICAgICAgIHNldChzdG9yZSwgc3RhdGVLZXksIHRvUmVmKG5ld1N0b3JlLiRzdGF0ZSwgc3RhdGVLZXkpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBkZWxldGVkIHN0YXRlIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuJHN0YXRlKS5mb3JFYWNoKChzdGF0ZUtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoc3RhdGVLZXkgaW4gbmV3U3RvcmUuJHN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbChzdG9yZSwgc3RhdGVLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gYXZvaWQgZGV2dG9vbHMgbG9nZ2luZyB0aGlzIGFzIGEgbXV0YXRpb25cclxuICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0gPSB0b1JlZihuZXdTdG9yZS5faG1yUGF5bG9hZCwgJ2hvdFN0YXRlJyk7XHJcbiAgICAgICAgICAgIGlzU3luY0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIG5leHRUaWNrKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpc0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbk5hbWUgaW4gbmV3U3RvcmUuX2htclBheWxvYWQuYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gbmV3U3RvcmVbYWN0aW9uTmFtZV07XHJcbiAgICAgICAgICAgICAgICBzZXQoc3RvcmUsIGFjdGlvbk5hbWUsIHdyYXBBY3Rpb24oYWN0aW9uTmFtZSwgYWN0aW9uKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETzogZG9lcyB0aGlzIHdvcmsgaW4gYm90aCBzZXR1cCBhbmQgb3B0aW9uIHN0b3JlP1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGdldHRlck5hbWUgaW4gbmV3U3RvcmUuX2htclBheWxvYWQuZ2V0dGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVyID0gbmV3U3RvcmUuX2htclBheWxvYWQuZ2V0dGVyc1tnZXR0ZXJOYW1lXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdldHRlclZhbHVlID0gaXNPcHRpb25zU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICA/IC8vIHNwZWNpYWwgaGFuZGxpbmcgb2Ygb3B0aW9ucyBhcGlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldHRlci5jYWxsKHN0b3JlLCBzdG9yZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgOiBnZXR0ZXI7XHJcbiAgICAgICAgICAgICAgICBzZXQoc3RvcmUsIGdldHRlck5hbWUsIGdldHRlclZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyByZW1vdmUgZGVsZXRlZCBnZXR0ZXJzXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlLl9obXJQYXlsb2FkLmdldHRlcnMpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmdldHRlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsKHN0b3JlLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIG9sZCBhY3Rpb25zXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsKHN0b3JlLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSB2YWx1ZXMgdXNlZCBpbiBkZXZ0b29scyBhbmQgdG8gYWxsb3cgZGVsZXRpbmcgbmV3IHByb3BlcnRpZXMgbGF0ZXIgb25cclxuICAgICAgICAgICAgc3RvcmUuX2htclBheWxvYWQgPSBuZXdTdG9yZS5faG1yUGF5bG9hZDtcclxuICAgICAgICAgICAgc3RvcmUuX2dldHRlcnMgPSBuZXdTdG9yZS5fZ2V0dGVycztcclxuICAgICAgICAgICAgc3RvcmUuX2hvdFVwZGF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoVVNFX0RFVlRPT0xTKSB7XHJcbiAgICAgICAgY29uc3Qgbm9uRW51bWVyYWJsZSA9IHtcclxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gYXZvaWQgd2FybmluZyBvbiBkZXZ0b29scyB0cnlpbmcgdG8gZGlzcGxheSB0aGlzIHByb3BlcnR5XHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgWydfcCcsICdfaG1yUGF5bG9hZCcsICdfZ2V0dGVycycsICdfY3VzdG9tUHJvcGVydGllcyddLmZvckVhY2goKHApID0+IHtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0b3JlLCBwLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmVbcF0sXHJcbiAgICAgICAgICAgICAgICAuLi5ub25FbnVtZXJhYmxlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgIC8vIG1hcmsgdGhlIHN0b3JlIGFzIHJlYWR5IGJlZm9yZSBwbHVnaW5zXHJcbiAgICAgICAgc3RvcmUuX3IgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwbHkgYWxsIHBsdWdpbnNcclxuICAgIHBpbmlhLl9wLmZvckVhY2goKGV4dGVuZGVyKSA9PiB7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICBpZiAoVVNFX0RFVlRPT0xTKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBzY29wZS5ydW4oKCkgPT4gZXh0ZW5kZXIoe1xyXG4gICAgICAgICAgICAgICAgc3RvcmUsXHJcbiAgICAgICAgICAgICAgICBhcHA6IHBpbmlhLl9hLFxyXG4gICAgICAgICAgICAgICAgcGluaWEsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zRm9yUGx1Z2luLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dGVuc2lvbnMgfHwge30pLmZvckVhY2goKGtleSkgPT4gc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuYWRkKGtleSkpO1xyXG4gICAgICAgICAgICBhc3NpZ24oc3RvcmUsIGV4dGVuc2lvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXNzaWduKHN0b3JlLCBzY29wZS5ydW4oKCkgPT4gZXh0ZW5kZXIoe1xyXG4gICAgICAgICAgICAgICAgc3RvcmUsXHJcbiAgICAgICAgICAgICAgICBhcHA6IHBpbmlhLl9hLFxyXG4gICAgICAgICAgICAgICAgcGluaWEsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zRm9yUGx1Z2luLFxyXG4gICAgICAgICAgICB9KSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgIHN0b3JlLiRzdGF0ZSAmJlxyXG4gICAgICAgIHR5cGVvZiBzdG9yZS4kc3RhdGUgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgdHlwZW9mIHN0b3JlLiRzdGF0ZS5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICFzdG9yZS4kc3RhdGUuY29uc3RydWN0b3IudG9TdHJpbmcoKS5pbmNsdWRlcygnW25hdGl2ZSBjb2RlXScpKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBb8J+NjV06IFRoZSBcInN0YXRlXCIgbXVzdCBiZSBhIHBsYWluIG9iamVjdC4gSXQgY2Fubm90IGJlXFxuYCArXHJcbiAgICAgICAgICAgIGBcXHRzdGF0ZTogKCkgPT4gbmV3IE15Q2xhc3MoKVxcbmAgK1xyXG4gICAgICAgICAgICBgRm91bmQgaW4gc3RvcmUgXCIke3N0b3JlLiRpZH1cIi5gKTtcclxuICAgIH1cclxuICAgIC8vIG9ubHkgYXBwbHkgaHlkcmF0ZSB0byBvcHRpb24gc3RvcmVzIHdpdGggYW4gaW5pdGlhbCBzdGF0ZSBpbiBwaW5pYVxyXG4gICAgaWYgKGluaXRpYWxTdGF0ZSAmJlxyXG4gICAgICAgIGlzT3B0aW9uc1N0b3JlICYmXHJcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKSB7XHJcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKHN0b3JlLiRzdGF0ZSwgaW5pdGlhbFN0YXRlKTtcclxuICAgIH1cclxuICAgIGlzTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgIGlzU3luY0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICByZXR1cm4gc3RvcmU7XHJcbn1cclxuZnVuY3Rpb24gZGVmaW5lU3RvcmUoXHJcbi8vIFRPRE86IGFkZCBwcm9wZXIgdHlwZXMgZnJvbSBhYm92ZVxyXG5pZE9yT3B0aW9ucywgc2V0dXAsIHNldHVwT3B0aW9ucykge1xyXG4gICAgbGV0IGlkO1xyXG4gICAgbGV0IG9wdGlvbnM7XHJcbiAgICBjb25zdCBpc1NldHVwU3RvcmUgPSB0eXBlb2Ygc2V0dXAgPT09ICdmdW5jdGlvbic7XHJcbiAgICBpZiAodHlwZW9mIGlkT3JPcHRpb25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGlkID0gaWRPck9wdGlvbnM7XHJcbiAgICAgICAgLy8gdGhlIG9wdGlvbiBzdG9yZSBzZXR1cCB3aWxsIGNvbnRhaW4gdGhlIGFjdHVhbCBvcHRpb25zIGluIHRoaXMgY2FzZVxyXG4gICAgICAgIG9wdGlvbnMgPSBpc1NldHVwU3RvcmUgPyBzZXR1cE9wdGlvbnMgOiBzZXR1cDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG9wdGlvbnMgPSBpZE9yT3B0aW9ucztcclxuICAgICAgICBpZCA9IGlkT3JPcHRpb25zLmlkO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXNlU3RvcmUocGluaWEsIGhvdCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHBpbmlhID1cclxuICAgICAgICAgICAgLy8gaW4gdGVzdCBtb2RlLCBpZ25vcmUgdGhlIGFyZ3VtZW50IHByb3ZpZGVkIGFzIHdlIGNhbiBhbHdheXMgcmV0cmlldmUgYVxyXG4gICAgICAgICAgICAvLyBwaW5pYSBpbnN0YW5jZSB3aXRoIGdldEFjdGl2ZVBpbmlhKClcclxuICAgICAgICAgICAgKChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSAmJiBhY3RpdmVQaW5pYSAmJiBhY3RpdmVQaW5pYS5fdGVzdGluZyA/IG51bGwgOiBwaW5pYSkgfHxcclxuICAgICAgICAgICAgICAgIChjdXJyZW50SW5zdGFuY2UgJiYgaW5qZWN0KHBpbmlhU3ltYm9sKSk7XHJcbiAgICAgICAgaWYgKHBpbmlhKVxyXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYWN0aXZlUGluaWEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBb8J+NjV06IGdldEFjdGl2ZVBpbmlhIHdhcyBjYWxsZWQgd2l0aCBubyBhY3RpdmUgUGluaWEuIERpZCB5b3UgZm9yZ2V0IHRvIGluc3RhbGwgcGluaWE/XFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXFx0Y29uc3QgcGluaWEgPSBjcmVhdGVQaW5pYSgpXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXFx0YXBwLnVzZShwaW5pYSlcXG5gICtcclxuICAgICAgICAgICAgICAgIGBUaGlzIHdpbGwgZmFpbCBpbiBwcm9kdWN0aW9uLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwaW5pYSA9IGFjdGl2ZVBpbmlhO1xyXG4gICAgICAgIGlmICghcGluaWEuX3MuaGFzKGlkKSkge1xyXG4gICAgICAgICAgICAvLyBjcmVhdGluZyB0aGUgc3RvcmUgcmVnaXN0ZXJzIGl0IGluIGBwaW5pYS5fc2BcclxuICAgICAgICAgICAgaWYgKGlzU2V0dXBTdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2V0dXBTdG9yZShpZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZU9wdGlvbnNTdG9yZShpZCwgb3B0aW9ucywgcGluaWEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vdCB0aGUgcmlnaHQgaW5mZXJyZWQgdHlwZVxyXG4gICAgICAgICAgICAgICAgdXNlU3RvcmUuX3BpbmlhID0gcGluaWE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBwaW5pYS5fcy5nZXQoaWQpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdElkID0gJ19faG90OicgKyBpZDtcclxuICAgICAgICAgICAgY29uc3QgbmV3U3RvcmUgPSBpc1NldHVwU3RvcmVcclxuICAgICAgICAgICAgICAgID8gY3JlYXRlU2V0dXBTdG9yZShob3RJZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVPcHRpb25zU3RvcmUoaG90SWQsIGFzc2lnbih7fSwgb3B0aW9ucyksIHBpbmlhLCB0cnVlKTtcclxuICAgICAgICAgICAgaG90Ll9ob3RVcGRhdGUobmV3U3RvcmUpO1xyXG4gICAgICAgICAgICAvLyBjbGVhbnVwIHRoZSBzdGF0ZSBwcm9wZXJ0aWVzIGFuZCB0aGUgc3RvcmUgZnJvbSB0aGUgY2FjaGVcclxuICAgICAgICAgICAgZGVsZXRlIHBpbmlhLnN0YXRlLnZhbHVlW2hvdElkXTtcclxuICAgICAgICAgICAgcGluaWEuX3MuZGVsZXRlKGhvdElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2F2ZSBzdG9yZXMgaW4gaW5zdGFuY2VzIHRvIGFjY2VzcyB0aGVtIGRldnRvb2xzXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICBJU19DTElFTlQgJiZcclxuICAgICAgICAgICAgY3VycmVudEluc3RhbmNlICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnN0YW5jZS5wcm94eSAmJlxyXG4gICAgICAgICAgICAvLyBhdm9pZCBhZGRpbmcgc3RvcmVzIHRoYXQgYXJlIGp1c3QgYnVpbHQgZm9yIGhvdCBtb2R1bGUgcmVwbGFjZW1lbnRcclxuICAgICAgICAgICAgIWhvdCkge1xyXG4gICAgICAgICAgICBjb25zdCB2bSA9IGN1cnJlbnRJbnN0YW5jZS5wcm94eTtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSAnX3BTdG9yZXMnIGluIHZtID8gdm0uX3BTdG9yZXMgOiAodm0uX3BTdG9yZXMgPSB7fSk7XHJcbiAgICAgICAgICAgIGNhY2hlW2lkXSA9IHN0b3JlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTdG9yZUdlbmVyaWMgY2Fubm90IGJlIGNhc3RlZCB0b3dhcmRzIFN0b3JlXHJcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xyXG4gICAgfVxyXG4gICAgdXNlU3RvcmUuJGlkID0gaWQ7XHJcbiAgICByZXR1cm4gdXNlU3RvcmU7XHJcbn1cblxubGV0IG1hcFN0b3JlU3VmZml4ID0gJ1N0b3JlJztcclxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHN1ZmZpeCBhZGRlZCBieSBgbWFwU3RvcmVzKClgLiBDYW4gYmUgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy5cclxuICogRGVmYXVsdHMgdG8gYFwiU3RvcmVcImAuIE1ha2Ugc3VyZSB0byBleHRlbmQgdGhlIE1hcFN0b3Jlc0N1c3RvbWl6YXRpb25cclxuICogaW50ZXJmYWNlIGlmIHlvdSBhcmUgdXNpbmcgVHlwZVNjcmlwdC5cclxuICpcclxuICogQHBhcmFtIHN1ZmZpeCAtIG5ldyBzdWZmaXhcclxuICovXHJcbmZ1bmN0aW9uIHNldE1hcFN0b3JlU3VmZml4KHN1ZmZpeCAvLyBjb3VsZCBiZSAnU3RvcmUnIGJ1dCB0aGF0IHdvdWxkIGJlIGFubm95aW5nIGZvciBKU1xyXG4pIHtcclxuICAgIG1hcFN0b3JlU3VmZml4ID0gc3VmZml4O1xyXG59XHJcbi8qKlxyXG4gKiBBbGxvd3MgdXNpbmcgc3RvcmVzIHdpdGhvdXQgdGhlIGNvbXBvc2l0aW9uIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuXHJcbiAqIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBjb21wdXRlZGAgZmllbGQgb2YgYSBjb21wb25lbnQuIEl0IGFjY2VwdHMgYSBsaXN0XHJcbiAqIG9mIHN0b3JlIGRlZmluaXRpb25zLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiBleHBvcnQgZGVmYXVsdCB7XHJcbiAqICAgY29tcHV0ZWQ6IHtcclxuICogICAgIC8vIG90aGVyIGNvbXB1dGVkIHByb3BlcnRpZXNcclxuICogICAgIC4uLm1hcFN0b3Jlcyh1c2VVc2VyU3RvcmUsIHVzZUNhcnRTdG9yZSlcclxuICogICB9LFxyXG4gKlxyXG4gKiAgIGNyZWF0ZWQoKSB7XHJcbiAqICAgICB0aGlzLnVzZXJTdG9yZSAvLyBzdG9yZSB3aXRoIGlkIFwidXNlclwiXHJcbiAqICAgICB0aGlzLmNhcnRTdG9yZSAvLyBzdG9yZSB3aXRoIGlkIFwiY2FydFwiXHJcbiAqICAgfVxyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gc3RvcmVzIC0gbGlzdCBvZiBzdG9yZXMgdG8gbWFwIHRvIGFuIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gbWFwU3RvcmVzKC4uLnN0b3Jlcykge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBBcnJheS5pc0FycmF5KHN0b3Jlc1swXSkpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYFvwn42NXTogRGlyZWN0bHkgcGFzcyBhbGwgc3RvcmVzIHRvIFwibWFwU3RvcmVzKClcIiB3aXRob3V0IHB1dHRpbmcgdGhlbSBpbiBhbiBhcnJheTpcXG5gICtcclxuICAgICAgICAgICAgYFJlcGxhY2VcXG5gICtcclxuICAgICAgICAgICAgYFxcdG1hcFN0b3JlcyhbdXNlQXV0aFN0b3JlLCB1c2VDYXJ0U3RvcmVdKVxcbmAgK1xyXG4gICAgICAgICAgICBgd2l0aFxcbmAgK1xyXG4gICAgICAgICAgICBgXFx0bWFwU3RvcmVzKHVzZUF1dGhTdG9yZSwgdXNlQ2FydFN0b3JlKVxcbmAgK1xyXG4gICAgICAgICAgICBgVGhpcyB3aWxsIGZhaWwgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XHJcbiAgICAgICAgc3RvcmVzID0gc3RvcmVzWzBdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0b3Jlcy5yZWR1Y2UoKHJlZHVjZWQsIHVzZVN0b3JlKSA9PiB7XHJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogJGlkIGlzIGFkZGVkIGJ5IGRlZmluZVN0b3JlXHJcbiAgICAgICAgcmVkdWNlZFt1c2VTdG9yZS4kaWQgKyBtYXBTdG9yZVN1ZmZpeF0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgIH0sIHt9KTtcclxufVxyXG4vKipcclxuICogQWxsb3dzIHVzaW5nIHN0YXRlIGFuZCBnZXR0ZXJzIGZyb20gb25lIHN0b3JlIHdpdGhvdXQgdXNpbmcgdGhlIGNvbXBvc2l0aW9uXHJcbiAqIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBjb21wdXRlZGAgZmllbGRcclxuICogb2YgYSBjb21wb25lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VTdG9yZSAtIHN0b3JlIHRvIG1hcCBmcm9tXHJcbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIG1hcFN0YXRlKHVzZVN0b3JlLCBrZXlzT3JNYXBwZXIpIHtcclxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGtleXNPck1hcHBlcilcclxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KVxyXG4gICAgICAgIDogT2JqZWN0LmtleXMoa2V5c09yTWFwcGVyKS5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUodGhpcy4kcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVLZXkgPSBrZXlzT3JNYXBwZXJba2V5XTtcclxuICAgICAgICAgICAgICAgIC8vIGZvciBzb21lIHJlYXNvbiBUUyBpcyB1bmFibGUgdG8gaW5mZXIgdGhlIHR5cGUgb2Ygc3RvcmVLZXkgdG8gYmUgYVxyXG4gICAgICAgICAgICAgICAgLy8gZnVuY3Rpb25cclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygc3RvcmVLZXkgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgICAgICAgICA/IHN0b3JlS2V5LmNhbGwodGhpcywgc3RvcmUpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBzdG9yZVtzdG9yZUtleV07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KTtcclxufVxyXG4vKipcclxuICogQWxpYXMgZm9yIGBtYXBTdGF0ZSgpYC4gWW91IHNob3VsZCB1c2UgYG1hcFN0YXRlKClgIGluc3RlYWQuXHJcbiAqIEBkZXByZWNhdGVkIHVzZSBgbWFwU3RhdGUoKWAgaW5zdGVhZC5cclxuICovXHJcbmNvbnN0IG1hcEdldHRlcnMgPSBtYXBTdGF0ZTtcclxuLyoqXHJcbiAqIEFsbG93cyBkaXJlY3RseSB1c2luZyBhY3Rpb25zIGZyb20geW91ciBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxyXG4gKiBBUEkgKGBzZXR1cCgpYCkgYnkgZ2VuZXJhdGluZyBhbiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgbWV0aG9kc2AgZmllbGRcclxuICogb2YgYSBjb21wb25lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VTdG9yZSAtIHN0b3JlIHRvIG1hcCBmcm9tXHJcbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIG1hcEFjdGlvbnModXNlU3RvcmUsIGtleXNPck1hcHBlcikge1xyXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxyXG4gICAgICAgID8ga2V5c09yTWFwcGVyLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5XSguLi5hcmdzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XHJcbiAgICAgICAgfSwge30pXHJcbiAgICAgICAgOiBPYmplY3Qua2V5cyhrZXlzT3JNYXBwZXIpLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgICAgICB9LCB7fSk7XHJcbn1cclxuLyoqXHJcbiAqIEFsbG93cyB1c2luZyBzdGF0ZSBhbmQgZ2V0dGVycyBmcm9tIG9uZSBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxyXG4gKiBBUEkgKGBzZXR1cCgpYCkgYnkgZ2VuZXJhdGluZyBhbiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgY29tcHV0ZWRgIGZpZWxkXHJcbiAqIG9mIGEgY29tcG9uZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlU3RvcmUgLSBzdG9yZSB0byBtYXAgZnJvbVxyXG4gKiBAcGFyYW0ga2V5c09yTWFwcGVyIC0gYXJyYXkgb3Igb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBXcml0YWJsZVN0YXRlKHVzZVN0b3JlLCBrZXlzT3JNYXBwZXIpIHtcclxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGtleXNPck1hcHBlcilcclxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IHtcclxuICAgICAgICAgICAgICAgIGdldCgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV07XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBlYXNpZXIgdG8gdHlwZSBpdCBoZXJlIGFzIGFueVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV0gPSB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgICAgICB9LCB7fSlcclxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXlzT3JNYXBwZXJba2V5XV07XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBlYXNpZXIgdG8gdHlwZSBpdCBoZXJlIGFzIGFueVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodXNlU3RvcmUodGhpcy4kcGluaWEpW2tleXNPck1hcHBlcltrZXldXSA9IHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KTtcclxufVxuXG4vKipcclxuICogQ3JlYXRlcyBhbiBvYmplY3Qgb2YgcmVmZXJlbmNlcyB3aXRoIGFsbCB0aGUgc3RhdGUsIGdldHRlcnMsIGFuZCBwbHVnaW4tYWRkZWRcclxuICogc3RhdGUgcHJvcGVydGllcyBvZiB0aGUgc3RvcmUuIFNpbWlsYXIgdG8gYHRvUmVmcygpYCBidXQgc3BlY2lmaWNhbGx5XHJcbiAqIGRlc2lnbmVkIGZvciBQaW5pYSBzdG9yZXMgc28gbWV0aG9kcyBhbmQgbm9uIHJlYWN0aXZlIHByb3BlcnRpZXMgYXJlXHJcbiAqIGNvbXBsZXRlbHkgaWdub3JlZC5cclxuICpcclxuICogQHBhcmFtIHN0b3JlIC0gc3RvcmUgdG8gZXh0cmFjdCB0aGUgcmVmcyBmcm9tXHJcbiAqL1xyXG5mdW5jdGlvbiBzdG9yZVRvUmVmcyhzdG9yZSkge1xyXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9waW5pYS9pc3N1ZXMvODUyXHJcbiAgICAvLyBJdCdzIGVhc2llciB0byBqdXN0IHVzZSB0b1JlZnMoKSBldmVuIGlmIGl0IGluY2x1ZGVzIG1vcmUgc3R1ZmZcclxuICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0b1JlZnMgaW5jbHVkZSBtZXRob2RzIGFuZCBvdGhlcnNcclxuICAgICAgICByZXR1cm4gdG9SZWZzKHN0b3JlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHN0b3JlID0gdG9SYXcoc3RvcmUpO1xyXG4gICAgICAgIGNvbnN0IHJlZnMgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzdG9yZSkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHN0b3JlW2tleV07XHJcbiAgICAgICAgICAgIGlmIChpc1JlZih2YWx1ZSkgfHwgaXNSZWFjdGl2ZSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoZSBrZXkgaXMgc3RhdGUgb3IgZ2V0dGVyXHJcbiAgICAgICAgICAgICAgICByZWZzW2tleV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC0tLVxyXG4gICAgICAgICAgICAgICAgICAgIHRvUmVmKHN0b3JlLCBrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWZzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBWdWUgMiBQbHVnaW4gdGhhdCBtdXN0IGJlIGluc3RhbGxlZCBmb3IgcGluaWEgdG8gd29yay4gTm90ZSAqKnlvdSBkb24ndCBuZWVkXHJcbiAqIHRoaXMgcGx1Z2luIGlmIHlvdSBhcmUgdXNpbmcgTnV4dC5qcyoqLiBVc2UgdGhlIGBidWlsZE1vZHVsZWAgaW5zdGVhZDpcclxuICogaHR0cHM6Ly9waW5pYS52dWVqcy5vcmcvc3NyL251eHQuaHRtbC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBganNcclxuICogaW1wb3J0IFZ1ZSBmcm9tICd2dWUnXHJcbiAqIGltcG9ydCB7IFBpbmlhVnVlUGx1Z2luLCBjcmVhdGVQaW5pYSB9IGZyb20gJ3BpbmlhJ1xyXG4gKlxyXG4gKiBWdWUudXNlKFBpbmlhVnVlUGx1Z2luKVxyXG4gKiBjb25zdCBwaW5pYSA9IGNyZWF0ZVBpbmlhKClcclxuICpcclxuICogbmV3IFZ1ZSh7XHJcbiAqICAgZWw6ICcjYXBwJyxcclxuICogICAvLyAuLi5cclxuICogICBwaW5pYSxcclxuICogfSlcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBfVnVlIC0gYFZ1ZWAgaW1wb3J0ZWQgZnJvbSAndnVlJy5cclxuICovXHJcbmNvbnN0IFBpbmlhVnVlUGx1Z2luID0gZnVuY3Rpb24gKF9WdWUpIHtcclxuICAgIC8vIEVxdWl2YWxlbnQgb2ZcclxuICAgIC8vIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcGluaWEgPSBwaW5pYVxyXG4gICAgX1Z1ZS5taXhpbih7XHJcbiAgICAgICAgYmVmb3JlQ3JlYXRlKCkge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGluaWEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBpbmlhID0gb3B0aW9ucy5waW5pYTtcclxuICAgICAgICAgICAgICAgIC8vIEhBQ0s6IHRha2VuIGZyb20gcHJvdmlkZSgpOiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvY29tcG9zaXRpb24tYXBpL2Jsb2IvbWFpbi9zcmMvYXBpcy9pbmplY3QudHMjTDMxXHJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9wcm92aWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVDYWNoZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX3Byb3ZpZGVkJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHByb3ZpZGVDYWNoZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiAodikgPT4gT2JqZWN0LmFzc2lnbihwcm92aWRlQ2FjaGUsIHYpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvdmlkZWRbcGluaWFTeW1ib2xdID0gcGluaWE7XHJcbiAgICAgICAgICAgICAgICAvLyBwcm9wYWdhdGUgdGhlIHBpbmlhIGluc3RhbmNlIGluIGFuIFNTUiBmcmllbmRseSB3YXlcclxuICAgICAgICAgICAgICAgIC8vIGF2b2lkIGFkZGluZyBpdCB0byBudXh0IHR3aWNlXHJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLiRwaW5pYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHBpbmlhID0gcGluaWE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwaW5pYS5fYSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoSVNfQ0xJRU5UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBhbGxvd3MgY2FsbGluZyB1c2VTdG9yZSgpIG91dHNpZGUgb2YgYSBjb21wb25lbnQgc2V0dXAgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0YWxsaW5nIHBpbmlhJ3MgcGx1Z2luXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKFVTRV9ERVZUT09MUykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyUGluaWFEZXZ0b29scyhwaW5pYS5fYSwgcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLiRwaW5pYSAmJiBvcHRpb25zLnBhcmVudCAmJiBvcHRpb25zLnBhcmVudC4kcGluaWEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHBpbmlhID0gb3B0aW9ucy5wYXJlbnQuJHBpbmlhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9wU3RvcmVzO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxufTtcblxuZXhwb3J0IHsgTXV0YXRpb25UeXBlLCBQaW5pYVZ1ZVBsdWdpbiwgYWNjZXB0SE1SVXBkYXRlLCBjcmVhdGVQaW5pYSwgZGVmaW5lU3RvcmUsIGdldEFjdGl2ZVBpbmlhLCBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzLCBtYXBTdGF0ZSwgbWFwU3RvcmVzLCBtYXBXcml0YWJsZVN0YXRlLCBzZXRBY3RpdmVQaW5pYSwgc2V0TWFwU3RvcmVTdWZmaXgsIHNraXBIeWRyYXRlLCBzdG9yZVRvUmVmcyB9O1xuIiwiLy8gc3JjL25vcm1hbGl6ZS50c1xuZnVuY3Rpb24gaXNPYmplY3Qodikge1xuICByZXR1cm4gdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPT0gbnVsbDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZU9wdGlvbnMob3B0aW9ucywgZmFjdG9yeU9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGlzT2JqZWN0KG9wdGlvbnMpID8gb3B0aW9ucyA6IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gbmV3IFByb3h5KG9wdGlvbnMsIHtcbiAgICBnZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSB7XG4gICAgICBpZiAoa2V5ID09PSBcImtleVwiKVxuICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKTtcbiAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHx8IFJlZmxlY3QuZ2V0KGZhY3RvcnlPcHRpb25zLCBrZXksIHJlY2VpdmVyKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBzcmMvcGljay50c1xuZnVuY3Rpb24gZ2V0KHN0YXRlLCBwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlZHVjZSgob2JqLCBwKSA9PiB7XG4gICAgcmV0dXJuIG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW3BdO1xuICB9LCBzdGF0ZSk7XG59XG5mdW5jdGlvbiBzZXQoc3RhdGUsIHBhdGgsIHZhbCkge1xuICByZXR1cm4gcGF0aC5zbGljZSgwLCAtMSkucmVkdWNlKChvYmosIHApID0+IHtcbiAgICBpZiAoL14oX19wcm90b19fKSQvLnRlc3QocCkpXG4gICAgICByZXR1cm4ge307XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIG9ialtwXSA9IG9ialtwXSB8fCB7fTtcbiAgfSwgc3RhdGUpW3BhdGhbcGF0aC5sZW5ndGggLSAxXV0gPSB2YWwsIHN0YXRlO1xufVxuZnVuY3Rpb24gcGljayhiYXNlU3RhdGUsIHBhdGhzKSB7XG4gIHJldHVybiBwYXRocy5yZWR1Y2UoKHN1YnN0YXRlLCBwYXRoKSA9PiB7XG4gICAgY29uc3QgcGF0aEFycmF5ID0gcGF0aC5zcGxpdChcIi5cIik7XG4gICAgcmV0dXJuIHNldChzdWJzdGF0ZSwgcGF0aEFycmF5LCBnZXQoYmFzZVN0YXRlLCBwYXRoQXJyYXkpKTtcbiAgfSwge30pO1xufVxuXG4vLyBzcmMvcGx1Z2luLnRzXG5mdW5jdGlvbiBoeWRyYXRlU3RvcmUoc3RvcmUsIHsgc3RvcmFnZSwgc2VyaWFsaXplciwga2V5LCBkZWJ1ZyB9KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZnJvbVN0b3JhZ2UgPSBzdG9yYWdlID09IG51bGwgPyB2b2lkIDAgOiBzdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICBpZiAoZnJvbVN0b3JhZ2UpXG4gICAgICBzdG9yZS4kcGF0Y2goc2VyaWFsaXplciA9PSBudWxsID8gdm9pZCAwIDogc2VyaWFsaXplci5kZXNlcmlhbGl6ZShmcm9tU3RvcmFnZSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChkZWJ1ZylcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9XG59XG5mdW5jdGlvbiBwZXJzaXN0U3RhdGUoc3RhdGUsIHsgc3RvcmFnZSwgc2VyaWFsaXplciwga2V5LCBwYXRocywgZGVidWcgfSkge1xuICB0cnkge1xuICAgIGNvbnN0IHRvU3RvcmUgPSBBcnJheS5pc0FycmF5KHBhdGhzKSA/IHBpY2soc3RhdGUsIHBhdGhzKSA6IHN0YXRlO1xuICAgIHN0b3JhZ2Uuc2V0SXRlbShrZXksIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHRvU3RvcmUpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZGVidWcpXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlUGVyc2lzdGVkU3RhdGUoZmFjdG9yeU9wdGlvbnMgPSB7fSkge1xuICByZXR1cm4gKGNvbnRleHQpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBvcHRpb25zOiB7IHBlcnNpc3QgfSxcbiAgICAgIHN0b3JlXG4gICAgfSA9IGNvbnRleHQ7XG4gICAgaWYgKCFwZXJzaXN0KVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHBlcnNpc3RlbmNlcyA9IChBcnJheS5pc0FycmF5KHBlcnNpc3QpID8gcGVyc2lzdC5tYXAoKHApID0+IG5vcm1hbGl6ZU9wdGlvbnMocCwgZmFjdG9yeU9wdGlvbnMpKSA6IFtub3JtYWxpemVPcHRpb25zKHBlcnNpc3QsIGZhY3RvcnlPcHRpb25zKV0pLm1hcChcbiAgICAgICh7XG4gICAgICAgIHN0b3JhZ2UgPSBsb2NhbFN0b3JhZ2UsXG4gICAgICAgIGJlZm9yZVJlc3RvcmUgPSBudWxsLFxuICAgICAgICBhZnRlclJlc3RvcmUgPSBudWxsLFxuICAgICAgICBzZXJpYWxpemVyID0ge1xuICAgICAgICAgIHNlcmlhbGl6ZTogSlNPTi5zdHJpbmdpZnksXG4gICAgICAgICAgZGVzZXJpYWxpemU6IEpTT04ucGFyc2VcbiAgICAgICAgfSxcbiAgICAgICAga2V5ID0gc3RvcmUuJGlkLFxuICAgICAgICBwYXRocyA9IG51bGwsXG4gICAgICAgIGRlYnVnID0gZmFsc2VcbiAgICAgIH0pID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0b3JhZ2UsXG4gICAgICAgICAgYmVmb3JlUmVzdG9yZSxcbiAgICAgICAgICBhZnRlclJlc3RvcmUsXG4gICAgICAgICAgc2VyaWFsaXplcixcbiAgICAgICAgICBrZXk6ICgoX2EgPSBmYWN0b3J5T3B0aW9ucy5rZXkpICE9IG51bGwgPyBfYSA6IChrKSA9PiBrKShrZXkpLFxuICAgICAgICAgIHBhdGhzLFxuICAgICAgICAgIGRlYnVnXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgKTtcbiAgICBzdG9yZS4kcGVyc2lzdCA9ICgpID0+IHtcbiAgICAgIHBlcnNpc3RlbmNlcy5mb3JFYWNoKChwZXJzaXN0ZW5jZSkgPT4ge1xuICAgICAgICBwZXJzaXN0U3RhdGUoc3RvcmUuJHN0YXRlLCBwZXJzaXN0ZW5jZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHN0b3JlLiRoeWRyYXRlID0gKHsgcnVuSG9va3MgPSB0cnVlIH0gPSB7fSkgPT4ge1xuICAgICAgcGVyc2lzdGVuY2VzLmZvckVhY2goKHBlcnNpc3RlbmNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgYmVmb3JlUmVzdG9yZSwgYWZ0ZXJSZXN0b3JlIH0gPSBwZXJzaXN0ZW5jZTtcbiAgICAgICAgaWYgKHJ1bkhvb2tzKVxuICAgICAgICAgIGJlZm9yZVJlc3RvcmUgPT0gbnVsbCA/IHZvaWQgMCA6IGJlZm9yZVJlc3RvcmUoY29udGV4dCk7XG4gICAgICAgIGh5ZHJhdGVTdG9yZShzdG9yZSwgcGVyc2lzdGVuY2UpO1xuICAgICAgICBpZiAocnVuSG9va3MpXG4gICAgICAgICAgYWZ0ZXJSZXN0b3JlID09IG51bGwgPyB2b2lkIDAgOiBhZnRlclJlc3RvcmUoY29udGV4dCk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHBlcnNpc3RlbmNlcy5mb3JFYWNoKChwZXJzaXN0ZW5jZSkgPT4ge1xuICAgICAgY29uc3QgeyBiZWZvcmVSZXN0b3JlLCBhZnRlclJlc3RvcmUgfSA9IHBlcnNpc3RlbmNlO1xuICAgICAgYmVmb3JlUmVzdG9yZSA9PSBudWxsID8gdm9pZCAwIDogYmVmb3JlUmVzdG9yZShjb250ZXh0KTtcbiAgICAgIGh5ZHJhdGVTdG9yZShzdG9yZSwgcGVyc2lzdGVuY2UpO1xuICAgICAgYWZ0ZXJSZXN0b3JlID09IG51bGwgPyB2b2lkIDAgOiBhZnRlclJlc3RvcmUoY29udGV4dCk7XG4gICAgICBzdG9yZS4kc3Vic2NyaWJlKFxuICAgICAgICAoX211dGF0aW9uLCBzdGF0ZSkgPT4ge1xuICAgICAgICAgIHBlcnNpc3RTdGF0ZShzdGF0ZSwgcGVyc2lzdGVuY2UpO1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZGV0YWNoZWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuLy8gc3JjL2luZGV4LnRzXG52YXIgc3JjX2RlZmF1bHQgPSBjcmVhdGVQZXJzaXN0ZWRTdGF0ZSgpO1xuZXhwb3J0IHtcbiAgY3JlYXRlUGVyc2lzdGVkU3RhdGUsXG4gIHNyY19kZWZhdWx0IGFzIGRlZmF1bHRcbn07XG4iLCJmdW5jdGlvbiBlbmNvZGUgKHN0cmluZykge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZylcbn1cblxuZnVuY3Rpb24gZGVjb2RlIChzdHJpbmcpIHtcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHJpbmcpXG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeUNvb2tpZVZhbHVlICh2YWx1ZSkge1xuICByZXR1cm4gZW5jb2RlKHZhbHVlID09PSBPYmplY3QodmFsdWUpID8gSlNPTi5zdHJpbmdpZnkodmFsdWUpIDogJycgKyB2YWx1ZSlcbn1cblxuZnVuY3Rpb24gcmVhZCAoc3RyaW5nKSB7XG4gIGlmIChzdHJpbmcgPT09ICcnKSB7XG4gICAgcmV0dXJuIHN0cmluZ1xuICB9XG5cbiAgaWYgKHN0cmluZy5pbmRleE9mKCdcIicpID09PSAwKSB7XG4gICAgLy8gVGhpcyBpcyBhIHF1b3RlZCBjb29raWUgYXMgYWNjb3JkaW5nIHRvIFJGQzIwNjgsIHVuZXNjYXBlLi4uXG4gICAgc3RyaW5nID0gc3RyaW5nLnNsaWNlKDEsIC0xKS5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykucmVwbGFjZSgvXFxcXFxcXFwvZywgJ1xcXFwnKVxuICB9XG5cbiAgLy8gUmVwbGFjZSBzZXJ2ZXItc2lkZSB3cml0dGVuIHBsdXNlcyB3aXRoIHNwYWNlcy5cbiAgLy8gSWYgd2UgY2FuJ3QgZGVjb2RlIHRoZSBjb29raWUsIGlnbm9yZSBpdCwgaXQncyB1bnVzYWJsZS5cbiAgLy8gSWYgd2UgY2FuJ3QgcGFyc2UgdGhlIGNvb2tpZSwgaWdub3JlIGl0LCBpdCdzIHVudXNhYmxlLlxuICBzdHJpbmcgPSBkZWNvZGUoc3RyaW5nLnJlcGxhY2UoL1xcKy9nLCAnICcpKVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShzdHJpbmcpXG5cbiAgICBpZiAocGFyc2VkID09PSBPYmplY3QocGFyc2VkKSB8fCBBcnJheS5pc0FycmF5KHBhcnNlZCkgPT09IHRydWUpIHtcbiAgICAgIHN0cmluZyA9IHBhcnNlZFxuICAgIH1cbiAgfVxuICBjYXRjaCAoZSkge31cblxuICByZXR1cm4gc3RyaW5nXG59XG5cbmZ1bmN0aW9uIGdldFN0cmluZyAobXNPZmZzZXQpIHtcbiAgY29uc3QgdGltZSA9IG5ldyBEYXRlKClcbiAgdGltZS5zZXRNaWxsaXNlY29uZHModGltZS5nZXRNaWxsaXNlY29uZHMoKSArIG1zT2Zmc2V0KVxuICByZXR1cm4gdGltZS50b1VUQ1N0cmluZygpXG59XG5cbmZ1bmN0aW9uIHBhcnNlRXhwaXJlU3RyaW5nIChzdHIpIHtcbiAgbGV0IHRpbWVzdGFtcCA9IDBcblxuICBjb25zdCBkYXlzID0gc3RyLm1hdGNoKC8oXFxkKylkLylcbiAgY29uc3QgaG91cnMgPSBzdHIubWF0Y2goLyhcXGQrKWgvKVxuICBjb25zdCBtaW51dGVzID0gc3RyLm1hdGNoKC8oXFxkKyltLylcbiAgY29uc3Qgc2Vjb25kcyA9IHN0ci5tYXRjaCgvKFxcZCspcy8pXG5cbiAgaWYgKGRheXMpIHsgdGltZXN0YW1wICs9IGRheXNbIDEgXSAqIDg2NGUrNSB9XG4gIGlmIChob3VycykgeyB0aW1lc3RhbXAgKz0gaG91cnNbIDEgXSAqIDM2ZSs1IH1cbiAgaWYgKG1pbnV0ZXMpIHsgdGltZXN0YW1wICs9IG1pbnV0ZXNbIDEgXSAqIDZlKzQgfVxuICBpZiAoc2Vjb25kcykgeyB0aW1lc3RhbXAgKz0gc2Vjb25kc1sgMSBdICogMTAwMCB9XG5cbiAgcmV0dXJuIHRpbWVzdGFtcCA9PT0gMFxuICAgID8gc3RyXG4gICAgOiBnZXRTdHJpbmcodGltZXN0YW1wKVxufVxuXG5mdW5jdGlvbiBzZXQgKGtleSwgdmFsLCBvcHRzID0ge30sIHNzcikge1xuICBsZXQgZXhwaXJlLCBleHBpcmVWYWx1ZVxuXG4gIGlmIChvcHRzLmV4cGlyZXMgIT09IHZvaWQgMCkge1xuICAgIC8vIGlmIGl0J3MgYSBEYXRlIE9iamVjdFxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob3B0cy5leHBpcmVzKSA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgICBleHBpcmUgPSBvcHRzLmV4cGlyZXMudG9VVENTdHJpbmcoKVxuICAgIH1cbiAgICAvLyBpZiBpdCdzIGEgU3RyaW5nIChlZy4gXCIxNW1cIiwgXCIxaFwiLCBcIjEzZFwiLCBcIjFkIDE1bVwiLCBcIjMxc1wiKVxuICAgIC8vIHBvc3NpYmxlIHVuaXRzOiBkIChkYXlzKSwgaCAoaG91cnMpLCBtIChtaW51dGVzKSwgcyAoc2Vjb25kcylcbiAgICBlbHNlIGlmICh0eXBlb2Ygb3B0cy5leHBpcmVzID09PSAnc3RyaW5nJykge1xuICAgICAgZXhwaXJlID0gcGFyc2VFeHBpcmVTdHJpbmcob3B0cy5leHBpcmVzKVxuICAgIH1cbiAgICAvLyBvdGhlcndpc2UgaXQgbXVzdCBiZSBhIE51bWJlciAoZGVmaW5lZCBpbiBkYXlzKVxuICAgIGVsc2Uge1xuICAgICAgZXhwaXJlVmFsdWUgPSBwYXJzZUZsb2F0KG9wdHMuZXhwaXJlcylcbiAgICAgIGV4cGlyZSA9IGlzTmFOKGV4cGlyZVZhbHVlKSA9PT0gZmFsc2VcbiAgICAgICAgPyBnZXRTdHJpbmcoZXhwaXJlVmFsdWUgKiA4NjRlKzUpXG4gICAgICAgIDogb3B0cy5leHBpcmVzXG4gICAgfVxuICB9XG5cbiAgY29uc3Qga2V5VmFsdWUgPSBgJHsgZW5jb2RlKGtleSkgfT0keyBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWwpIH1gXG5cbiAgY29uc3QgY29va2llID0gW1xuICAgIGtleVZhbHVlLFxuICAgIGV4cGlyZSAhPT0gdm9pZCAwID8gJzsgRXhwaXJlcz0nICsgZXhwaXJlIDogJycsIC8vIHVzZSBleHBpcmVzIGF0dHJpYnV0ZSwgbWF4LWFnZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXG4gICAgb3B0cy5wYXRoID8gJzsgUGF0aD0nICsgb3B0cy5wYXRoIDogJycsXG4gICAgb3B0cy5kb21haW4gPyAnOyBEb21haW49JyArIG9wdHMuZG9tYWluIDogJycsXG4gICAgb3B0cy5zYW1lU2l0ZSA/ICc7IFNhbWVTaXRlPScgKyBvcHRzLnNhbWVTaXRlIDogJycsXG4gICAgb3B0cy5odHRwT25seSA/ICc7IEh0dHBPbmx5JyA6ICcnLFxuICAgIG9wdHMuc2VjdXJlID8gJzsgU2VjdXJlJyA6ICcnLFxuICAgIG9wdHMub3RoZXIgPyAnOyAnICsgb3B0cy5vdGhlciA6ICcnXG4gIF0uam9pbignJylcblxuICBpZiAoc3NyKSB7XG4gICAgaWYgKHNzci5yZXEucUNvb2tpZXMpIHtcbiAgICAgIHNzci5yZXEucUNvb2tpZXMucHVzaChjb29raWUpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3NyLnJlcS5xQ29va2llcyA9IFsgY29va2llIF1cbiAgICB9XG5cbiAgICBzc3IucmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIHNzci5yZXEucUNvb2tpZXMpXG5cbiAgICAvLyBtYWtlIHRlbXBvcmFyeSB1cGRhdGUgc28gZnV0dXJlIGdldCgpXG4gICAgLy8gd2l0aGluIHNhbWUgU1NSIHRpbWVmcmFtZSB3b3VsZCByZXR1cm4gdGhlIHNldCB2YWx1ZVxuXG4gICAgbGV0IGFsbCA9IHNzci5yZXEuaGVhZGVycy5jb29raWUgfHwgJydcblxuICAgIGlmIChleHBpcmUgIT09IHZvaWQgMCAmJiBleHBpcmVWYWx1ZSA8IDApIHtcbiAgICAgIGNvbnN0IHZhbCA9IGdldChrZXksIHNzcilcbiAgICAgIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbGwgPSBhbGxcbiAgICAgICAgICAucmVwbGFjZShgJHsga2V5IH09JHsgdmFsIH07IGAsICcnKVxuICAgICAgICAgIC5yZXBsYWNlKGA7ICR7IGtleSB9PSR7IHZhbCB9YCwgJycpXG4gICAgICAgICAgLnJlcGxhY2UoYCR7IGtleSB9PSR7IHZhbCB9YCwgJycpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgYWxsID0gYWxsXG4gICAgICAgID8gYCR7IGtleVZhbHVlIH07ICR7IGFsbCB9YFxuICAgICAgICA6IGNvb2tpZVxuICAgIH1cblxuICAgIHNzci5yZXEuaGVhZGVycy5jb29raWUgPSBhbGxcbiAgfVxuICBlbHNlIHtcbiAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXQgKGtleSwgc3NyKSB7XG4gIGNvbnN0XG4gICAgY29va2llU291cmNlID0gc3NyID8gc3NyLnJlcS5oZWFkZXJzIDogZG9jdW1lbnQsXG4gICAgY29va2llcyA9IGNvb2tpZVNvdXJjZS5jb29raWUgPyBjb29raWVTb3VyY2UuY29va2llLnNwbGl0KCc7ICcpIDogW10sXG4gICAgbCA9IGNvb2tpZXMubGVuZ3RoXG4gIGxldFxuICAgIHJlc3VsdCA9IGtleSA/IG51bGwgOiB7fSxcbiAgICBpID0gMCxcbiAgICBwYXJ0cyxcbiAgICBuYW1lLFxuICAgIGNvb2tpZVxuXG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgcGFydHMgPSBjb29raWVzWyBpIF0uc3BsaXQoJz0nKVxuICAgIG5hbWUgPSBkZWNvZGUocGFydHMuc2hpZnQoKSlcbiAgICBjb29raWUgPSBwYXJ0cy5qb2luKCc9JylcblxuICAgIGlmICgha2V5KSB7XG4gICAgICByZXN1bHRbIG5hbWUgXSA9IGNvb2tpZVxuICAgIH1cbiAgICBlbHNlIGlmIChrZXkgPT09IG5hbWUpIHtcbiAgICAgIHJlc3VsdCA9IHJlYWQoY29va2llKVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSAoa2V5LCBvcHRpb25zLCBzc3IpIHtcbiAgc2V0KFxuICAgIGtleSxcbiAgICAnJyxcbiAgICB7IGV4cGlyZXM6IC0xLCAuLi5vcHRpb25zIH0sXG4gICAgc3NyXG4gIClcbn1cblxuZnVuY3Rpb24gaGFzIChrZXksIHNzcikge1xuICByZXR1cm4gZ2V0KGtleSwgc3NyKSAhPT0gbnVsbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T2JqZWN0IChzc3IpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXQ6IGtleSA9PiBnZXQoa2V5LCBzc3IpLFxuICAgIHNldDogKGtleSwgdmFsLCBvcHRzKSA9PiBzZXQoa2V5LCB2YWwsIG9wdHMsIHNzciksXG4gICAgaGFzOiBrZXkgPT4gaGFzKGtleSwgc3NyKSxcbiAgICByZW1vdmU6IChrZXksIG9wdGlvbnMpID0+IHJlbW92ZShrZXksIG9wdGlvbnMsIHNzciksXG4gICAgZ2V0QWxsOiAoKSA9PiBnZXQobnVsbCwgc3NyKVxuICB9XG59XG5cbmNvbnN0IFBsdWdpbiA9IHtcbiAgaW5zdGFsbCAoeyAkcSwgc3NyQ29udGV4dCB9KSB7XG4gICAgJHEuY29va2llcyA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICAgICAgPyBnZXRPYmplY3Qoc3NyQ29udGV4dClcbiAgICAgIDogdGhpc1xuICB9XG59XG5cbmlmIChfX1FVQVNBUl9TU1JfXykge1xuICBQbHVnaW4ucGFyc2VTU1IgPSBzc3JDb250ZXh0ID0+IHtcbiAgICBpZiAoc3NyQ29udGV4dCAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gZ2V0T2JqZWN0KHNzckNvbnRleHQpXG4gICAgfVxuICB9XG59XG5cbmlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18gIT09IHRydWUpIHtcbiAgT2JqZWN0LmFzc2lnbihQbHVnaW4sIGdldE9iamVjdCgpKVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbHVnaW5cbiIsIi8qZXNsaW50IEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnk6ICdvZmYnKi9cbmltcG9ydCB7IFN0b3JhZ2VMaWtlIH0gZnJvbSAncGluaWEtcGx1Z2luLXBlcnNpc3RlZHN0YXRlJztcblxuZnVuY3Rpb24gZGlzY2FyZChjdHg6IHVua25vdyl7XG5cdHJldHVybiBjdHg7XG59O1xuXG5leHBvcnQgY29uc3QgY29va2llU3RvcmFnZTogU3RvcmFnZUxpa2UgPSB7XG5cdGdldEl0ZW0oa2V5OiBzdHJpbmcpe1xuXHRcdGRpc2NhcmQoeyBrZXkgfSk7XG5cdFx0cmV0dXJuO1xuXHR9LFxuXHRzZXRJdGVtKGtleTogc3RyaW5nLCB2YWw6IGFueSl7XG5cdFx0ZGlzY2FyZCh7IGtleSwgdmFsIH0pO1xuXHRcdHJldHVybjtcblx0fSxcblx0cmVtb3ZlSXRlbShrZXk6IHN0cmluZyl7XG5cdFx0ZGlzY2FyZCh7IGtleSB9KTtcblx0XHRyZXR1cm47XG5cdH0sXHRcbn07IiwiLyplc2xpbnQgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueTogJ29mZicqL1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICdxdWFzYXIvd3JhcHBlcnMnXG5pbXBvcnQgeyBjcmVhdGVQaW5pYSB9IGZyb20gJ3BpbmlhJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInO1xuaW1wb3J0IHBpbmlhUGx1Z2luUGVyc2lzdGVkc3RhdGUgZnJvbSAncGluaWEtcGx1Z2luLXBlcnNpc3RlZHN0YXRlJztcbmltcG9ydCB7IENvb2tpZXMgfSBmcm9tICdxdWFzYXInO1xuaW1wb3J0IHsgY29va2llU3RvcmFnZSB9IGZyb20gJ2FwcC9zcmMvc3RvcmVzL3N0b3JhZ2UnO1xuXG4vKlxuICogV2hlbiBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gc3RvcmVzLCB5b3Ugc2hvdWxkIGFsc29cbiAqIGV4dGVuZCB0aGUgYFBpbmlhQ3VzdG9tUHJvcGVydGllc2AgaW50ZXJmYWNlLlxuICogQHNlZSBodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9jb3JlLWNvbmNlcHRzL3BsdWdpbnMuaHRtbCN0eXBpbmctbmV3LXN0b3JlLXByb3BlcnRpZXNcbiAqL1xuZGVjbGFyZSBtb2R1bGUgJ3BpbmlhJyB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgUGluaWFDdXN0b21Qcm9wZXJ0aWVzIHtcbiAgICByZWFkb25seSByb3V0ZXI6IFJvdXRlcjtcbiAgfVxufVxuXG4vKlxuICogSWYgbm90IGJ1aWxkaW5nIHdpdGggU1NSIG1vZGUsIHlvdSBjYW5cbiAqIGRpcmVjdGx5IGV4cG9ydCB0aGUgU3RvcmUgaW5zdGFudGlhdGlvbjtcbiAqXG4gKiBUaGUgZnVuY3Rpb24gYmVsb3cgY2FuIGJlIGFzeW5jIHRvbzsgZWl0aGVyIHVzZVxuICogYXN5bmMvYXdhaXQgb3IgcmV0dXJuIGEgUHJvbWlzZSB3aGljaCByZXNvbHZlc1xuICogd2l0aCB0aGUgU3RvcmUgaW5zdGFuY2UuXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgc3RvcmUoKCB7IHNzckNvbnRleHQgfSApID0+IHtcbiAgLy8gY29uc29sZS5sb2coJ0Nvb2tpZSBTdG9yYWdlICEnKTtcbiAgY29uc3QgY29va2llcyA9IHByb2Nlc3MuZW52LlNFUlZFUlxuICAgID8gQ29va2llcy5wYXJzZVNTUihzc3JDb250ZXh0KVxuICAgIDogQ29va2llcztcbiAgY29uc3QgcGluaWEgPSBjcmVhdGVQaW5pYSgpO1xuICBwaW5pYS51c2UoKHsgb3B0aW9ucyB9KSA9PiB7XG4gICAgaWYgKG9wdGlvbnMucGVyc2lzdCA9PT0gdW5kZWZpbmVkKVxuICAgICAgcmV0dXJuO1xuICAgIGlmICghb3B0aW9ucy5wZXJzaXN0LnN0b3JhZ2UgfHwgdHlwZW9mIG9wdGlvbnMucGVyc2lzdC5zdG9yYWdlID09PSAnYm9vbGVhbicpXG4gICAgICByZXR1cm47XG4gICAgaWYgKG9wdGlvbnMucGVyc2lzdC5zdG9yYWdlID09PSBjb29raWVTdG9yYWdlKXtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdDb29raWUgU3RvcmFnZSAhJyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhvcHRpb25zLnBlcnNpc3Quc3RvcmFnZSk7XG4gICAgICBvcHRpb25zLnBlcnNpc3Quc3RvcmFnZSA9IHtcbiAgICAgICAgZ2V0SXRlbShrZXk6IHN0cmluZykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBDb29raWUgR2V0dGluZyBJdGVtICR7a2V5fSFgKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb29raWVzLmdldChrZXkpKTtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29va2llcy5nZXQoa2V5KSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbDogYW55KXtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgQ29va2llIFNldHRpbmcgSXRlbSAke2tleX0hYCk7XG4gICAgICAgICAgLy8gY29uc29sZS50cmFjZSh2YWwpO1xuICAgICAgICAgIGNvbnN0IG9iaiA9IHZhbDtcbiAgICAgICAgICBjb29raWVzLnNldChrZXksIG9iaiwge3BhdGg6ICcvJywgc2FtZVNpdGU6ICdMYXgnLCBzZWN1cmU6IGZhbHNlfSlcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlSXRlbShrZXk6IHN0cmluZyl7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coYENvb2tpZSBSZW1vdmUgSXRlbSAke2tleX0hYCk7XG4gICAgICAgICAgY29va2llcy5yZW1vdmUoa2V5LCB7cGF0aDogJy8nLCBzYW1lU2l0ZTogJ0xheCcsIHNlY3VyZTogZmFsc2V9KTtcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbiAgLy8gWW91IGNhbiBhZGQgUGluaWEgcGx1Z2lucyBoZXJlXG4gIC8vIHBpbmlhLnVzZShTb21lUGluaWFQbHVnaW4pXG4gIHBpbmlhLnVzZShwaW5pYVBsdWdpblBlcnNpc3RlZHN0YXRlKTtcbiAgLy8gYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRwaW5pYSA9IHBpbmlhO1xuICByZXR1cm4gcGluaWE7XG59KVxuIiwiLyohXG4gICogdnVlLXJvdXRlciB2NC4xLjZcbiAgKiAoYykgMjAyMiBFZHVhcmRvIFNhbiBNYXJ0aW4gTW9yb3RlXG4gICogQGxpY2Vuc2UgTUlUXG4gICovXG5pbXBvcnQgeyBnZXRDdXJyZW50SW5zdGFuY2UsIGluamVjdCwgb25Vbm1vdW50ZWQsIG9uRGVhY3RpdmF0ZWQsIG9uQWN0aXZhdGVkLCBjb21wdXRlZCwgdW5yZWYsIHdhdGNoRWZmZWN0LCBkZWZpbmVDb21wb25lbnQsIHJlYWN0aXZlLCBoLCBwcm92aWRlLCByZWYsIHdhdGNoLCBzaGFsbG93UmVmLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBzZXR1cERldnRvb2xzUGx1Z2luIH0gZnJvbSAnQHZ1ZS9kZXZ0b29scy1hcGknO1xuXG5jb25zdCBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcblxuZnVuY3Rpb24gaXNFU01vZHVsZShvYmopIHtcclxuICAgIHJldHVybiBvYmouX19lc01vZHVsZSB8fCBvYmpbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZSc7XHJcbn1cclxuY29uc3QgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcclxuZnVuY3Rpb24gYXBwbHlUb1BhcmFtcyhmbiwgcGFyYW1zKSB7XHJcbiAgICBjb25zdCBuZXdQYXJhbXMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIHBhcmFtcykge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gcGFyYW1zW2tleV07XHJcbiAgICAgICAgbmV3UGFyYW1zW2tleV0gPSBpc0FycmF5KHZhbHVlKVxyXG4gICAgICAgICAgICA/IHZhbHVlLm1hcChmbilcclxuICAgICAgICAgICAgOiBmbih2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3UGFyYW1zO1xyXG59XHJcbmNvbnN0IG5vb3AgPSAoKSA9PiB7IH07XHJcbi8qKlxyXG4gKiBUeXBlc2FmZSBhbHRlcm5hdGl2ZSB0byBBcnJheS5pc0FycmF5XHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9wdWxsLzQ4MjI4XHJcbiAqL1xyXG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuZnVuY3Rpb24gd2Fybihtc2cpIHtcclxuICAgIC8vIGF2b2lkIHVzaW5nIC4uLmFyZ3MgYXMgaXQgYnJlYWtzIGluIG9sZGVyIEVkZ2UgYnVpbGRzXHJcbiAgICBjb25zdCBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpLnNsaWNlKDEpO1xyXG4gICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIFsnW1Z1ZSBSb3V0ZXIgd2Fybl06ICcgKyBtc2ddLmNvbmNhdChhcmdzKSk7XHJcbn1cblxuY29uc3QgVFJBSUxJTkdfU0xBU0hfUkUgPSAvXFwvJC87XHJcbmNvbnN0IHJlbW92ZVRyYWlsaW5nU2xhc2ggPSAocGF0aCkgPT4gcGF0aC5yZXBsYWNlKFRSQUlMSU5HX1NMQVNIX1JFLCAnJyk7XHJcbi8qKlxyXG4gKiBUcmFuc2Zvcm1zIGEgVVJJIGludG8gYSBub3JtYWxpemVkIGhpc3RvcnkgbG9jYXRpb25cclxuICpcclxuICogQHBhcmFtIHBhcnNlUXVlcnlcclxuICogQHBhcmFtIGxvY2F0aW9uIC0gVVJJIHRvIG5vcm1hbGl6ZVxyXG4gKiBAcGFyYW0gY3VycmVudExvY2F0aW9uIC0gY3VycmVudCBhYnNvbHV0ZSBsb2NhdGlvbi4gQWxsb3dzIHJlc29sdmluZyByZWxhdGl2ZVxyXG4gKiBwYXRocy4gTXVzdCBzdGFydCB3aXRoIGAvYC4gRGVmYXVsdHMgdG8gYC9gXHJcbiAqIEByZXR1cm5zIGEgbm9ybWFsaXplZCBoaXN0b3J5IGxvY2F0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZVVSTChwYXJzZVF1ZXJ5LCBsb2NhdGlvbiwgY3VycmVudExvY2F0aW9uID0gJy8nKSB7XHJcbiAgICBsZXQgcGF0aCwgcXVlcnkgPSB7fSwgc2VhcmNoU3RyaW5nID0gJycsIGhhc2ggPSAnJztcclxuICAgIC8vIENvdWxkIHVzZSBVUkwgYW5kIFVSTFNlYXJjaFBhcmFtcyBidXQgSUUgMTEgZG9lc24ndCBzdXBwb3J0IGl0XHJcbiAgICAvLyBUT0RPOiBtb3ZlIHRvIG5ldyBVUkwoKVxyXG4gICAgY29uc3QgaGFzaFBvcyA9IGxvY2F0aW9uLmluZGV4T2YoJyMnKTtcclxuICAgIGxldCBzZWFyY2hQb3MgPSBsb2NhdGlvbi5pbmRleE9mKCc/Jyk7XHJcbiAgICAvLyB0aGUgaGFzaCBhcHBlYXJzIGJlZm9yZSB0aGUgc2VhcmNoLCBzbyBpdCdzIG5vdCBwYXJ0IG9mIHRoZSBzZWFyY2ggc3RyaW5nXHJcbiAgICBpZiAoaGFzaFBvcyA8IHNlYXJjaFBvcyAmJiBoYXNoUG9zID49IDApIHtcclxuICAgICAgICBzZWFyY2hQb3MgPSAtMTtcclxuICAgIH1cclxuICAgIGlmIChzZWFyY2hQb3MgPiAtMSkge1xyXG4gICAgICAgIHBhdGggPSBsb2NhdGlvbi5zbGljZSgwLCBzZWFyY2hQb3MpO1xyXG4gICAgICAgIHNlYXJjaFN0cmluZyA9IGxvY2F0aW9uLnNsaWNlKHNlYXJjaFBvcyArIDEsIGhhc2hQb3MgPiAtMSA/IGhhc2hQb3MgOiBsb2NhdGlvbi5sZW5ndGgpO1xyXG4gICAgICAgIHF1ZXJ5ID0gcGFyc2VRdWVyeShzZWFyY2hTdHJpbmcpO1xyXG4gICAgfVxyXG4gICAgaWYgKGhhc2hQb3MgPiAtMSkge1xyXG4gICAgICAgIHBhdGggPSBwYXRoIHx8IGxvY2F0aW9uLnNsaWNlKDAsIGhhc2hQb3MpO1xyXG4gICAgICAgIC8vIGtlZXAgdGhlICMgY2hhcmFjdGVyXHJcbiAgICAgICAgaGFzaCA9IGxvY2F0aW9uLnNsaWNlKGhhc2hQb3MsIGxvY2F0aW9uLmxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICAvLyBubyBzZWFyY2ggYW5kIG5vIHF1ZXJ5XHJcbiAgICBwYXRoID0gcmVzb2x2ZVJlbGF0aXZlUGF0aChwYXRoICE9IG51bGwgPyBwYXRoIDogbG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbik7XHJcbiAgICAvLyBlbXB0eSBwYXRoIG1lYW5zIGEgcmVsYXRpdmUgcXVlcnkgb3IgaGFzaCBgP2Zvbz1mYCwgYCN0aGluZ2BcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZnVsbFBhdGg6IHBhdGggKyAoc2VhcmNoU3RyaW5nICYmICc/JykgKyBzZWFyY2hTdHJpbmcgKyBoYXNoLFxyXG4gICAgICAgIHBhdGgsXHJcbiAgICAgICAgcXVlcnksXHJcbiAgICAgICAgaGFzaCxcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFN0cmluZ2lmaWVzIGEgVVJMIG9iamVjdFxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyaW5naWZ5UXVlcnlcclxuICogQHBhcmFtIGxvY2F0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnlVUkwoc3RyaW5naWZ5UXVlcnksIGxvY2F0aW9uKSB7XHJcbiAgICBjb25zdCBxdWVyeSA9IGxvY2F0aW9uLnF1ZXJ5ID8gc3RyaW5naWZ5UXVlcnkobG9jYXRpb24ucXVlcnkpIDogJyc7XHJcbiAgICByZXR1cm4gbG9jYXRpb24ucGF0aCArIChxdWVyeSAmJiAnPycpICsgcXVlcnkgKyAobG9jYXRpb24uaGFzaCB8fCAnJyk7XHJcbn1cclxuLyoqXHJcbiAqIFN0cmlwcyBvZmYgdGhlIGJhc2UgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIGEgbG9jYXRpb24ucGF0aG5hbWUgaW4gYSBub24tY2FzZS1zZW5zaXRpdmUgd2F5LlxyXG4gKlxyXG4gKiBAcGFyYW0gcGF0aG5hbWUgLSBsb2NhdGlvbi5wYXRobmFtZVxyXG4gKiBAcGFyYW0gYmFzZSAtIGJhc2UgdG8gc3RyaXAgb2ZmXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpcEJhc2UocGF0aG5hbWUsIGJhc2UpIHtcclxuICAgIC8vIG5vIGJhc2Ugb3IgYmFzZSBpcyBub3QgZm91bmQgYXQgdGhlIGJlZ2lubmluZ1xyXG4gICAgaWYgKCFiYXNlIHx8ICFwYXRobmFtZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoYmFzZS50b0xvd2VyQ2FzZSgpKSlcclxuICAgICAgICByZXR1cm4gcGF0aG5hbWU7XHJcbiAgICByZXR1cm4gcGF0aG5hbWUuc2xpY2UoYmFzZS5sZW5ndGgpIHx8ICcvJztcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGlmIHR3byBSb3V0ZUxvY2F0aW9uIGFyZSBlcXVhbC4gVGhpcyBtZWFucyB0aGF0IGJvdGggbG9jYXRpb25zIGFyZVxyXG4gKiBwb2ludGluZyB0b3dhcmRzIHRoZSBzYW1lIHtAbGluayBSb3V0ZVJlY29yZH0gYW5kIHRoYXQgYWxsIGBwYXJhbXNgLCBgcXVlcnlgXHJcbiAqIHBhcmFtZXRlcnMgYW5kIGBoYXNoYCBhcmUgdGhlIHNhbWVcclxuICpcclxuICogQHBhcmFtIGEgLSBmaXJzdCB7QGxpbmsgUm91dGVMb2NhdGlvbn1cclxuICogQHBhcmFtIGIgLSBzZWNvbmQge0BsaW5rIFJvdXRlTG9jYXRpb259XHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZUxvY2F0aW9uKHN0cmluZ2lmeVF1ZXJ5LCBhLCBiKSB7XHJcbiAgICBjb25zdCBhTGFzdEluZGV4ID0gYS5tYXRjaGVkLmxlbmd0aCAtIDE7XHJcbiAgICBjb25zdCBiTGFzdEluZGV4ID0gYi5tYXRjaGVkLmxlbmd0aCAtIDE7XHJcbiAgICByZXR1cm4gKGFMYXN0SW5kZXggPiAtMSAmJlxyXG4gICAgICAgIGFMYXN0SW5kZXggPT09IGJMYXN0SW5kZXggJiZcclxuICAgICAgICBpc1NhbWVSb3V0ZVJlY29yZChhLm1hdGNoZWRbYUxhc3RJbmRleF0sIGIubWF0Y2hlZFtiTGFzdEluZGV4XSkgJiZcclxuICAgICAgICBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zKGEucGFyYW1zLCBiLnBhcmFtcykgJiZcclxuICAgICAgICBzdHJpbmdpZnlRdWVyeShhLnF1ZXJ5KSA9PT0gc3RyaW5naWZ5UXVlcnkoYi5xdWVyeSkgJiZcclxuICAgICAgICBhLmhhc2ggPT09IGIuaGFzaCk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrIGlmIHR3byBgUm91dGVSZWNvcmRzYCBhcmUgZXF1YWwuIFRha2VzIGludG8gYWNjb3VudCBhbGlhc2VzOiB0aGV5IGFyZVxyXG4gKiBjb25zaWRlcmVkIGVxdWFsIHRvIHRoZSBgUm91dGVSZWNvcmRgIHRoZXkgYXJlIGFsaWFzaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gYSAtIGZpcnN0IHtAbGluayBSb3V0ZVJlY29yZH1cclxuICogQHBhcmFtIGIgLSBzZWNvbmQge0BsaW5rIFJvdXRlUmVjb3JkfVxyXG4gKi9cclxuZnVuY3Rpb24gaXNTYW1lUm91dGVSZWNvcmQoYSwgYikge1xyXG4gICAgLy8gc2luY2UgdGhlIG9yaWdpbmFsIHJlY29yZCBoYXMgYW4gdW5kZWZpbmVkIHZhbHVlIGZvciBhbGlhc09mXHJcbiAgICAvLyBidXQgYWxsIGFsaWFzZXMgcG9pbnQgdG8gdGhlIG9yaWdpbmFsIHJlY29yZCwgdGhpcyB3aWxsIGFsd2F5cyBjb21wYXJlXHJcbiAgICAvLyB0aGUgb3JpZ2luYWwgcmVjb3JkXHJcbiAgICByZXR1cm4gKGEuYWxpYXNPZiB8fCBhKSA9PT0gKGIuYWxpYXNPZiB8fCBiKTtcclxufVxyXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zKGEsIGIpIHtcclxuICAgIGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhKSB7XHJcbiAgICAgICAgaWYgKCFpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zVmFsdWUoYVtrZXldLCBiW2tleV0pKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zVmFsdWUoYSwgYikge1xyXG4gICAgcmV0dXJuIGlzQXJyYXkoYSlcclxuICAgICAgICA/IGlzRXF1aXZhbGVudEFycmF5KGEsIGIpXHJcbiAgICAgICAgOiBpc0FycmF5KGIpXHJcbiAgICAgICAgICAgID8gaXNFcXVpdmFsZW50QXJyYXkoYiwgYSlcclxuICAgICAgICAgICAgOiBhID09PSBiO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0d28gYXJyYXlzIGFyZSB0aGUgc2FtZSBvciBpZiBhbiBhcnJheSB3aXRoIG9uZSBzaW5nbGUgZW50cnkgaXMgdGhlXHJcbiAqIHNhbWUgYXMgYW5vdGhlciBwcmltaXRpdmUgdmFsdWUuIFVzZWQgdG8gY2hlY2sgcXVlcnkgYW5kIHBhcmFtZXRlcnNcclxuICpcclxuICogQHBhcmFtIGEgLSBhcnJheSBvZiB2YWx1ZXNcclxuICogQHBhcmFtIGIgLSBhcnJheSBvZiB2YWx1ZXMgb3IgYSBzaW5nbGUgdmFsdWVcclxuICovXHJcbmZ1bmN0aW9uIGlzRXF1aXZhbGVudEFycmF5KGEsIGIpIHtcclxuICAgIHJldHVybiBpc0FycmF5KGIpXHJcbiAgICAgICAgPyBhLmxlbmd0aCA9PT0gYi5sZW5ndGggJiYgYS5ldmVyeSgodmFsdWUsIGkpID0+IHZhbHVlID09PSBiW2ldKVxyXG4gICAgICAgIDogYS5sZW5ndGggPT09IDEgJiYgYVswXSA9PT0gYjtcclxufVxyXG4vKipcclxuICogUmVzb2x2ZXMgYSByZWxhdGl2ZSBwYXRoIHRoYXQgc3RhcnRzIHdpdGggYC5gLlxyXG4gKlxyXG4gKiBAcGFyYW0gdG8gLSBwYXRoIGxvY2F0aW9uIHdlIGFyZSByZXNvbHZpbmdcclxuICogQHBhcmFtIGZyb20gLSBjdXJyZW50TG9jYXRpb24ucGF0aCwgc2hvdWxkIHN0YXJ0IHdpdGggYC9gXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNvbHZlUmVsYXRpdmVQYXRoKHRvLCBmcm9tKSB7XHJcbiAgICBpZiAodG8uc3RhcnRzV2l0aCgnLycpKVxyXG4gICAgICAgIHJldHVybiB0bztcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWZyb20uc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgd2FybihgQ2Fubm90IHJlc29sdmUgYSByZWxhdGl2ZSBsb2NhdGlvbiB3aXRob3V0IGFuIGFic29sdXRlIHBhdGguIFRyeWluZyB0byByZXNvbHZlIFwiJHt0b31cIiBmcm9tIFwiJHtmcm9tfVwiLiBJdCBzaG91bGQgbG9vayBsaWtlIFwiLyR7ZnJvbX1cIi5gKTtcclxuICAgICAgICByZXR1cm4gdG87XHJcbiAgICB9XHJcbiAgICBpZiAoIXRvKVxyXG4gICAgICAgIHJldHVybiBmcm9tO1xyXG4gICAgY29uc3QgZnJvbVNlZ21lbnRzID0gZnJvbS5zcGxpdCgnLycpO1xyXG4gICAgY29uc3QgdG9TZWdtZW50cyA9IHRvLnNwbGl0KCcvJyk7XHJcbiAgICBsZXQgcG9zaXRpb24gPSBmcm9tU2VnbWVudHMubGVuZ3RoIC0gMTtcclxuICAgIGxldCB0b1Bvc2l0aW9uO1xyXG4gICAgbGV0IHNlZ21lbnQ7XHJcbiAgICBmb3IgKHRvUG9zaXRpb24gPSAwOyB0b1Bvc2l0aW9uIDwgdG9TZWdtZW50cy5sZW5ndGg7IHRvUG9zaXRpb24rKykge1xyXG4gICAgICAgIHNlZ21lbnQgPSB0b1NlZ21lbnRzW3RvUG9zaXRpb25dO1xyXG4gICAgICAgIC8vIHdlIHN0YXkgb24gdGhlIHNhbWUgcG9zaXRpb25cclxuICAgICAgICBpZiAoc2VnbWVudCA9PT0gJy4nKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAvLyBnbyB1cCBpbiB0aGUgZnJvbSBhcnJheVxyXG4gICAgICAgIGlmIChzZWdtZW50ID09PSAnLi4nKSB7XHJcbiAgICAgICAgICAgIC8vIHdlIGNhbid0IGdvIGJlbG93IHplcm8sIGJ1dCB3ZSBzdGlsbCBuZWVkIHRvIGluY3JlbWVudCB0b1Bvc2l0aW9uXHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA+IDEpXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi0tO1xyXG4gICAgICAgICAgICAvLyBjb250aW51ZVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB3ZSByZWFjaGVkIGEgbm9uLXJlbGF0aXZlIHBhdGgsIHdlIHN0b3AgaGVyZVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKGZyb21TZWdtZW50cy5zbGljZSgwLCBwb3NpdGlvbikuam9pbignLycpICtcclxuICAgICAgICAnLycgK1xyXG4gICAgICAgIHRvU2VnbWVudHNcclxuICAgICAgICAgICAgLy8gZW5zdXJlIHdlIHVzZSBhdCBsZWFzdCB0aGUgbGFzdCBlbGVtZW50IGluIHRoZSB0b1NlZ21lbnRzXHJcbiAgICAgICAgICAgIC5zbGljZSh0b1Bvc2l0aW9uIC0gKHRvUG9zaXRpb24gPT09IHRvU2VnbWVudHMubGVuZ3RoID8gMSA6IDApKVxyXG4gICAgICAgICAgICAuam9pbignLycpKTtcclxufVxuXG52YXIgTmF2aWdhdGlvblR5cGU7XHJcbihmdW5jdGlvbiAoTmF2aWdhdGlvblR5cGUpIHtcclxuICAgIE5hdmlnYXRpb25UeXBlW1wicG9wXCJdID0gXCJwb3BcIjtcclxuICAgIE5hdmlnYXRpb25UeXBlW1wicHVzaFwiXSA9IFwicHVzaFwiO1xyXG59KShOYXZpZ2F0aW9uVHlwZSB8fCAoTmF2aWdhdGlvblR5cGUgPSB7fSkpO1xyXG52YXIgTmF2aWdhdGlvbkRpcmVjdGlvbjtcclxuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uRGlyZWN0aW9uKSB7XHJcbiAgICBOYXZpZ2F0aW9uRGlyZWN0aW9uW1wiYmFja1wiXSA9IFwiYmFja1wiO1xyXG4gICAgTmF2aWdhdGlvbkRpcmVjdGlvbltcImZvcndhcmRcIl0gPSBcImZvcndhcmRcIjtcclxuICAgIE5hdmlnYXRpb25EaXJlY3Rpb25bXCJ1bmtub3duXCJdID0gXCJcIjtcclxufSkoTmF2aWdhdGlvbkRpcmVjdGlvbiB8fCAoTmF2aWdhdGlvbkRpcmVjdGlvbiA9IHt9KSk7XHJcbi8qKlxyXG4gKiBTdGFydGluZyBsb2NhdGlvbiBmb3IgSGlzdG9yaWVzXHJcbiAqL1xyXG5jb25zdCBTVEFSVCA9ICcnO1xyXG4vLyBHZW5lcmljIHV0aWxzXHJcbi8qKlxyXG4gKiBOb3JtYWxpemVzIGEgYmFzZSBieSByZW1vdmluZyBhbnkgdHJhaWxpbmcgc2xhc2ggYW5kIHJlYWRpbmcgdGhlIGJhc2UgdGFnIGlmXHJcbiAqIHByZXNlbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSBiYXNlIC0gYmFzZSB0byBub3JtYWxpemVcclxuICovXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUJhc2UoYmFzZSkge1xyXG4gICAgaWYgKCFiYXNlKSB7XHJcbiAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICAvLyByZXNwZWN0IDxiYXNlPiB0YWdcclxuICAgICAgICAgICAgY29uc3QgYmFzZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYmFzZScpO1xyXG4gICAgICAgICAgICBiYXNlID0gKGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJykpIHx8ICcvJztcclxuICAgICAgICAgICAgLy8gc3RyaXAgZnVsbCBVUkwgb3JpZ2luXHJcbiAgICAgICAgICAgIGJhc2UgPSBiYXNlLnJlcGxhY2UoL15cXHcrOlxcL1xcL1teXFwvXSsvLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBiYXNlID0gJy8nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGVuc3VyZSBsZWFkaW5nIHNsYXNoIHdoZW4gaXQgd2FzIHJlbW92ZWQgYnkgdGhlIHJlZ2V4IGFib3ZlIGF2b2lkIGxlYWRpbmdcclxuICAgIC8vIHNsYXNoIHdpdGggaGFzaCBiZWNhdXNlIHRoZSBmaWxlIGNvdWxkIGJlIHJlYWQgZnJvbSB0aGUgZGlzayBsaWtlIGZpbGU6Ly9cclxuICAgIC8vIGFuZCB0aGUgbGVhZGluZyBzbGFzaCB3b3VsZCBjYXVzZSBwcm9ibGVtc1xyXG4gICAgaWYgKGJhc2VbMF0gIT09ICcvJyAmJiBiYXNlWzBdICE9PSAnIycpXHJcbiAgICAgICAgYmFzZSA9ICcvJyArIGJhc2U7XHJcbiAgICAvLyByZW1vdmUgdGhlIHRyYWlsaW5nIHNsYXNoIHNvIGFsbCBvdGhlciBtZXRob2QgY2FuIGp1c3QgZG8gYGJhc2UgKyBmdWxsUGF0aGBcclxuICAgIC8vIHRvIGJ1aWxkIGFuIGhyZWZcclxuICAgIHJldHVybiByZW1vdmVUcmFpbGluZ1NsYXNoKGJhc2UpO1xyXG59XHJcbi8vIHJlbW92ZSBhbnkgY2hhcmFjdGVyIGJlZm9yZSB0aGUgaGFzaFxyXG5jb25zdCBCRUZPUkVfSEFTSF9SRSA9IC9eW14jXSsjLztcclxuZnVuY3Rpb24gY3JlYXRlSHJlZihiYXNlLCBsb2NhdGlvbikge1xyXG4gICAgcmV0dXJuIGJhc2UucmVwbGFjZShCRUZPUkVfSEFTSF9SRSwgJyMnKSArIGxvY2F0aW9uO1xyXG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRQb3NpdGlvbihlbCwgb2Zmc2V0KSB7XHJcbiAgICBjb25zdCBkb2NSZWN0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgY29uc3QgZWxSZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGJlaGF2aW9yOiBvZmZzZXQuYmVoYXZpb3IsXHJcbiAgICAgICAgbGVmdDogZWxSZWN0LmxlZnQgLSBkb2NSZWN0LmxlZnQgLSAob2Zmc2V0LmxlZnQgfHwgMCksXHJcbiAgICAgICAgdG9wOiBlbFJlY3QudG9wIC0gZG9jUmVjdC50b3AgLSAob2Zmc2V0LnRvcCB8fCAwKSxcclxuICAgIH07XHJcbn1cclxuY29uc3QgY29tcHV0ZVNjcm9sbFBvc2l0aW9uID0gKCkgPT4gKHtcclxuICAgIGxlZnQ6IHdpbmRvdy5wYWdlWE9mZnNldCxcclxuICAgIHRvcDogd2luZG93LnBhZ2VZT2Zmc2V0LFxyXG59KTtcclxuZnVuY3Rpb24gc2Nyb2xsVG9Qb3NpdGlvbihwb3NpdGlvbikge1xyXG4gICAgbGV0IHNjcm9sbFRvT3B0aW9ucztcclxuICAgIGlmICgnZWwnIGluIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25FbCA9IHBvc2l0aW9uLmVsO1xyXG4gICAgICAgIGNvbnN0IGlzSWRTZWxlY3RvciA9IHR5cGVvZiBwb3NpdGlvbkVsID09PSAnc3RyaW5nJyAmJiBwb3NpdGlvbkVsLnN0YXJ0c1dpdGgoJyMnKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBgaWRgcyBjYW4gYWNjZXB0IHByZXR0eSBtdWNoIGFueSBjaGFyYWN0ZXJzLCBpbmNsdWRpbmcgQ1NTIGNvbWJpbmF0b3JzXHJcbiAgICAgICAgICogbGlrZSBgPmAgb3IgYH5gLiBJdCdzIHN0aWxsIHBvc3NpYmxlIHRvIHJldHJpZXZlIGVsZW1lbnRzIHVzaW5nXHJcbiAgICAgICAgICogYGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd+JylgIGJ1dCBpdCBuZWVkcyB0byBiZSBlc2NhcGVkIHdoZW4gdXNpbmdcclxuICAgICAgICAgKiBgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI1xcXFx+JylgIGZvciBpdCB0byBiZSB2YWxpZC4gVGhlIG9ubHlcclxuICAgICAgICAgKiByZXF1aXJlbWVudHMgZm9yIGBpZGBzIGFyZSB0aGVtIHRvIGJlIHVuaXF1ZSBvbiB0aGUgcGFnZSBhbmQgdG8gbm90IGJlXHJcbiAgICAgICAgICogZW1wdHkgKGBpZD1cIlwiYCkuIEJlY2F1c2Ugb2YgdGhhdCwgd2hlbiBwYXNzaW5nIGFuIGlkIHNlbGVjdG9yLCBpdCBzaG91bGRcclxuICAgICAgICAgKiBiZSBwcm9wZXJseSBlc2NhcGVkIGZvciBpdCB0byB3b3JrIHdpdGggYHF1ZXJ5U2VsZWN0b3JgLiBXZSBjb3VsZCBjaGVja1xyXG4gICAgICAgICAqIGZvciB0aGUgaWQgc2VsZWN0b3IgdG8gYmUgc2ltcGxlIChubyBDU1MgY29tYmluYXRvcnMgYCsgPn5gKSBidXQgdGhhdFxyXG4gICAgICAgICAqIHdvdWxkIG1ha2UgdGhpbmdzIGluY29uc2lzdGVudCBzaW5jZSB0aGV5IGFyZSB2YWxpZCBjaGFyYWN0ZXJzIGZvciBhblxyXG4gICAgICAgICAqIGBpZGAgYnV0IHdvdWxkIG5lZWQgdG8gYmUgZXNjYXBlZCB3aGVuIHVzaW5nIGBxdWVyeVNlbGVjdG9yYCwgYnJlYWtpbmdcclxuICAgICAgICAgKiB0aGVpciB1c2FnZSBhbmQgZW5kaW5nIHVwIGluIG5vIHNlbGVjdG9yIHJldHVybmVkLiBTZWxlY3RvcnMgbmVlZCB0byBiZVxyXG4gICAgICAgICAqIGVzY2FwZWQ6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAtIGAjMS10aGluZ2AgYmVjb21lcyBgI1xcMzEgLXRoaW5nYFxyXG4gICAgICAgICAqIC0gYCN3aXRofnN5bWJvbHNgIGJlY29tZXMgYCN3aXRoXFxcXH5zeW1ib2xzYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLSBNb3JlIGluZm9ybWF0aW9uIGFib3V0ICB0aGUgdG9waWMgY2FuIGJlIGZvdW5kIGF0XHJcbiAgICAgICAgICogICBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvaHRtbDUtaWQtY2xhc3MuXHJcbiAgICAgICAgICogLSBQcmFjdGljYWwgZXhhbXBsZTogaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL2RlbW8vaHRtbDUtaWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHR5cGVvZiBwb3NpdGlvbi5lbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgaWYgKCFpc0lkU2VsZWN0b3IgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvc2l0aW9uLmVsLnNsaWNlKDEpKSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3VuZEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3NpdGlvbi5lbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSWRTZWxlY3RvciAmJiBmb3VuZEVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYFRoZSBzZWxlY3RvciBcIiR7cG9zaXRpb24uZWx9XCIgc2hvdWxkIGJlIHBhc3NlZCBhcyBcImVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcke3Bvc2l0aW9uLmVsfScpXCIgYmVjYXVzZSBpdCBzdGFydHMgd2l0aCBcIiNcIi5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRvIGF2b2lkIG90aGVyIHdhcm5pbmdzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgVGhlIHNlbGVjdG9yIFwiJHtwb3NpdGlvbi5lbH1cIiBpcyBpbnZhbGlkLiBJZiB5b3UgYXJlIHVzaW5nIGFuIGlkIHNlbGVjdG9yLCBtYWtlIHN1cmUgdG8gZXNjYXBlIGl0LiBZb3UgY2FuIGZpbmQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBlc2NhcGluZyBjaGFyYWN0ZXJzIGluIHNlbGVjdG9ycyBhdCBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvY3NzLWVzY2FwZXMgb3IgdXNlIENTUy5lc2NhcGUgKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DU1MvZXNjYXBlKS5gKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gdG8gYXZvaWQgb3RoZXIgd2FybmluZ3NcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZWwgPSB0eXBlb2YgcG9zaXRpb25FbCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBpc0lkU2VsZWN0b3JcclxuICAgICAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9zaXRpb25FbC5zbGljZSgxKSlcclxuICAgICAgICAgICAgICAgIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3NpdGlvbkVsKVxyXG4gICAgICAgICAgICA6IHBvc2l0aW9uRWw7XHJcbiAgICAgICAgaWYgKCFlbCkge1xyXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgIHdhcm4oYENvdWxkbid0IGZpbmQgZWxlbWVudCB1c2luZyBzZWxlY3RvciBcIiR7cG9zaXRpb24uZWx9XCIgcmV0dXJuZWQgYnkgc2Nyb2xsQmVoYXZpb3IuYCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2Nyb2xsVG9PcHRpb25zID0gZ2V0RWxlbWVudFBvc2l0aW9uKGVsLCBwb3NpdGlvbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzY3JvbGxUb09wdGlvbnMgPSBwb3NpdGlvbjtcclxuICAgIH1cclxuICAgIGlmICgnc2Nyb2xsQmVoYXZpb3InIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSlcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsVG9PcHRpb25zKTtcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbyhzY3JvbGxUb09wdGlvbnMubGVmdCAhPSBudWxsID8gc2Nyb2xsVG9PcHRpb25zLmxlZnQgOiB3aW5kb3cucGFnZVhPZmZzZXQsIHNjcm9sbFRvT3B0aW9ucy50b3AgIT0gbnVsbCA/IHNjcm9sbFRvT3B0aW9ucy50b3AgOiB3aW5kb3cucGFnZVlPZmZzZXQpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFNjcm9sbEtleShwYXRoLCBkZWx0YSkge1xyXG4gICAgY29uc3QgcG9zaXRpb24gPSBoaXN0b3J5LnN0YXRlID8gaGlzdG9yeS5zdGF0ZS5wb3NpdGlvbiAtIGRlbHRhIDogLTE7XHJcbiAgICByZXR1cm4gcG9zaXRpb24gKyBwYXRoO1xyXG59XHJcbmNvbnN0IHNjcm9sbFBvc2l0aW9ucyA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gc2F2ZVNjcm9sbFBvc2l0aW9uKGtleSwgc2Nyb2xsUG9zaXRpb24pIHtcclxuICAgIHNjcm9sbFBvc2l0aW9ucy5zZXQoa2V5LCBzY3JvbGxQb3NpdGlvbik7XHJcbn1cclxuZnVuY3Rpb24gZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbihrZXkpIHtcclxuICAgIGNvbnN0IHNjcm9sbCA9IHNjcm9sbFBvc2l0aW9ucy5nZXQoa2V5KTtcclxuICAgIC8vIGNvbnN1bWUgaXQgc28gaXQncyBub3QgdXNlZCBhZ2FpblxyXG4gICAgc2Nyb2xsUG9zaXRpb25zLmRlbGV0ZShrZXkpO1xyXG4gICAgcmV0dXJuIHNjcm9sbDtcclxufVxyXG4vLyBUT0RPOiBSRkMgYWJvdXQgaG93IHRvIHNhdmUgc2Nyb2xsIHBvc2l0aW9uXHJcbi8qKlxyXG4gKiBTY3JvbGxCZWhhdmlvciBpbnN0YW5jZSB1c2VkIGJ5IHRoZSByb3V0ZXIgdG8gY29tcHV0ZSBhbmQgcmVzdG9yZSB0aGUgc2Nyb2xsXHJcbiAqIHBvc2l0aW9uIHdoZW4gbmF2aWdhdGluZy5cclxuICovXHJcbi8vIGV4cG9ydCBpbnRlcmZhY2UgU2Nyb2xsSGFuZGxlcjxTY3JvbGxQb3NpdGlvbkVudHJ5IGV4dGVuZHMgSGlzdG9yeVN0YXRlVmFsdWUsIFNjcm9sbFBvc2l0aW9uIGV4dGVuZHMgU2Nyb2xsUG9zaXRpb25FbnRyeT4ge1xyXG4vLyAgIC8vIHJldHVybnMgYSBzY3JvbGwgcG9zaXRpb24gdGhhdCBjYW4gYmUgc2F2ZWQgaW4gaGlzdG9yeVxyXG4vLyAgIGNvbXB1dGUoKTogU2Nyb2xsUG9zaXRpb25FbnRyeVxyXG4vLyAgIC8vIGNhbiB0YWtlIGFuIGV4dGVuZGVkIFNjcm9sbFBvc2l0aW9uRW50cnlcclxuLy8gICBzY3JvbGwocG9zaXRpb246IFNjcm9sbFBvc2l0aW9uKTogdm9pZFxyXG4vLyB9XHJcbi8vIGV4cG9ydCBjb25zdCBzY3JvbGxIYW5kbGVyOiBTY3JvbGxIYW5kbGVyPFNjcm9sbFBvc2l0aW9uPiA9IHtcclxuLy8gICBjb21wdXRlOiBjb21wdXRlU2Nyb2xsLFxyXG4vLyAgIHNjcm9sbDogc2Nyb2xsVG9Qb3NpdGlvbixcclxuLy8gfVxuXG5sZXQgY3JlYXRlQmFzZUxvY2F0aW9uID0gKCkgPT4gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdDtcclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBub3JtYWxpemVkIGhpc3RvcnkgbG9jYXRpb24gZnJvbSBhIHdpbmRvdy5sb2NhdGlvbiBvYmplY3RcclxuICogQHBhcmFtIGxvY2F0aW9uIC1cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUN1cnJlbnRMb2NhdGlvbihiYXNlLCBsb2NhdGlvbikge1xyXG4gICAgY29uc3QgeyBwYXRobmFtZSwgc2VhcmNoLCBoYXNoIH0gPSBsb2NhdGlvbjtcclxuICAgIC8vIGFsbG93cyBoYXNoIGJhc2VzIGxpa2UgIywgLyMsICMvLCAjISwgIyEvLCAvIyEvLCBvciBldmVuIC9mb2xkZXIjZW5kXHJcbiAgICBjb25zdCBoYXNoUG9zID0gYmFzZS5pbmRleE9mKCcjJyk7XHJcbiAgICBpZiAoaGFzaFBvcyA+IC0xKSB7XHJcbiAgICAgICAgbGV0IHNsaWNlUG9zID0gaGFzaC5pbmNsdWRlcyhiYXNlLnNsaWNlKGhhc2hQb3MpKVxyXG4gICAgICAgICAgICA/IGJhc2Uuc2xpY2UoaGFzaFBvcykubGVuZ3RoXHJcbiAgICAgICAgICAgIDogMTtcclxuICAgICAgICBsZXQgcGF0aEZyb21IYXNoID0gaGFzaC5zbGljZShzbGljZVBvcyk7XHJcbiAgICAgICAgLy8gcHJlcGVuZCB0aGUgc3RhcnRpbmcgc2xhc2ggdG8gaGFzaCBzbyB0aGUgdXJsIHN0YXJ0cyB3aXRoIC8jXHJcbiAgICAgICAgaWYgKHBhdGhGcm9tSGFzaFswXSAhPT0gJy8nKVxyXG4gICAgICAgICAgICBwYXRoRnJvbUhhc2ggPSAnLycgKyBwYXRoRnJvbUhhc2g7XHJcbiAgICAgICAgcmV0dXJuIHN0cmlwQmFzZShwYXRoRnJvbUhhc2gsICcnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBhdGggPSBzdHJpcEJhc2UocGF0aG5hbWUsIGJhc2UpO1xyXG4gICAgcmV0dXJuIHBhdGggKyBzZWFyY2ggKyBoYXNoO1xyXG59XHJcbmZ1bmN0aW9uIHVzZUhpc3RvcnlMaXN0ZW5lcnMoYmFzZSwgaGlzdG9yeVN0YXRlLCBjdXJyZW50TG9jYXRpb24sIHJlcGxhY2UpIHtcclxuICAgIGxldCBsaXN0ZW5lcnMgPSBbXTtcclxuICAgIGxldCB0ZWFyZG93bnMgPSBbXTtcclxuICAgIC8vIFRPRE86IHNob3VsZCBpdCBiZSBhIHN0YWNrPyBhIERpY3QuIENoZWNrIGlmIHRoZSBwb3BzdGF0ZSBsaXN0ZW5lclxyXG4gICAgLy8gY2FuIHRyaWdnZXIgdHdpY2VcclxuICAgIGxldCBwYXVzZVN0YXRlID0gbnVsbDtcclxuICAgIGNvbnN0IHBvcFN0YXRlSGFuZGxlciA9ICh7IHN0YXRlLCB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdG8gPSBjcmVhdGVDdXJyZW50TG9jYXRpb24oYmFzZSwgbG9jYXRpb24pO1xyXG4gICAgICAgIGNvbnN0IGZyb20gPSBjdXJyZW50TG9jYXRpb24udmFsdWU7XHJcbiAgICAgICAgY29uc3QgZnJvbVN0YXRlID0gaGlzdG9yeVN0YXRlLnZhbHVlO1xyXG4gICAgICAgIGxldCBkZWx0YSA9IDA7XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbi52YWx1ZSA9IHRvO1xyXG4gICAgICAgICAgICBoaXN0b3J5U3RhdGUudmFsdWUgPSBzdGF0ZTtcclxuICAgICAgICAgICAgLy8gaWdub3JlIHRoZSBwb3BzdGF0ZSBhbmQgcmVzZXQgdGhlIHBhdXNlU3RhdGVcclxuICAgICAgICAgICAgaWYgKHBhdXNlU3RhdGUgJiYgcGF1c2VTdGF0ZSA9PT0gZnJvbSkge1xyXG4gICAgICAgICAgICAgICAgcGF1c2VTdGF0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVsdGEgPSBmcm9tU3RhdGUgPyBzdGF0ZS5wb3NpdGlvbiAtIGZyb21TdGF0ZS5wb3NpdGlvbiA6IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXBsYWNlKHRvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coeyBkZWx0YUZyb21DdXJyZW50IH0pXHJcbiAgICAgICAgLy8gSGVyZSB3ZSBjb3VsZCBhbHNvIHJldmVydCB0aGUgbmF2aWdhdGlvbiBieSBjYWxsaW5nIGhpc3RvcnkuZ28oLWRlbHRhKVxyXG4gICAgICAgIC8vIHRoaXMgbGlzdGVuZXIgd2lsbCBoYXZlIHRvIGJlIGFkYXB0ZWQgdG8gbm90IHRyaWdnZXIgYWdhaW4gYW5kIHRvIHdhaXQgZm9yIHRoZSB1cmxcclxuICAgICAgICAvLyB0byBiZSB1cGRhdGVkIGJlZm9yZSB0cmlnZ2VyaW5nIHRoZSBsaXN0ZW5lcnMuIFNvbWUga2luZCBvZiB2YWxpZGF0aW9uIGZ1bmN0aW9uIHdvdWxkIGFsc29cclxuICAgICAgICAvLyBuZWVkIHRvIGJlIHBhc3NlZCB0byB0aGUgbGlzdGVuZXJzIHNvIHRoZSBuYXZpZ2F0aW9uIGNhbiBiZSBhY2NlcHRlZFxyXG4gICAgICAgIC8vIGNhbGwgYWxsIGxpc3RlbmVyc1xyXG4gICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IHtcclxuICAgICAgICAgICAgbGlzdGVuZXIoY3VycmVudExvY2F0aW9uLnZhbHVlLCBmcm9tLCB7XHJcbiAgICAgICAgICAgICAgICBkZWx0YSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IE5hdmlnYXRpb25UeXBlLnBvcCxcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZGVsdGFcclxuICAgICAgICAgICAgICAgICAgICA/IGRlbHRhID4gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IE5hdmlnYXRpb25EaXJlY3Rpb24uZm9yd2FyZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IE5hdmlnYXRpb25EaXJlY3Rpb24uYmFja1xyXG4gICAgICAgICAgICAgICAgICAgIDogTmF2aWdhdGlvbkRpcmVjdGlvbi51bmtub3duLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBwYXVzZUxpc3RlbmVycygpIHtcclxuICAgICAgICBwYXVzZVN0YXRlID0gY3VycmVudExvY2F0aW9uLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbGlzdGVuKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy8gc2V0IHVwIHRoZSBsaXN0ZW5lciBhbmQgcHJlcGFyZSB0ZWFyZG93biBjYWxsYmFja3NcclxuICAgICAgICBsaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgY29uc3QgdGVhcmRvd24gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGVhcmRvd25zLnB1c2godGVhcmRvd24pO1xyXG4gICAgICAgIHJldHVybiB0ZWFyZG93bjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGJlZm9yZVVubG9hZExpc3RlbmVyKCkge1xyXG4gICAgICAgIGNvbnN0IHsgaGlzdG9yeSB9ID0gd2luZG93O1xyXG4gICAgICAgIGlmICghaGlzdG9yeS5zdGF0ZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGFzc2lnbih7fSwgaGlzdG9yeS5zdGF0ZSwgeyBzY3JvbGw6IGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpIH0pLCAnJyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgdGVhcmRvd24gb2YgdGVhcmRvd25zKVxyXG4gICAgICAgICAgICB0ZWFyZG93bigpO1xyXG4gICAgICAgIHRlYXJkb3ducyA9IFtdO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHBvcFN0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGJlZm9yZVVubG9hZExpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIC8vIHNldCB1cCB0aGUgbGlzdGVuZXJzIGFuZCBwcmVwYXJlIHRlYXJkb3duIGNhbGxiYWNrc1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgcG9wU3RhdGVIYW5kbGVyKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBiZWZvcmVVbmxvYWRMaXN0ZW5lcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHBhdXNlTGlzdGVuZXJzLFxyXG4gICAgICAgIGxpc3RlbixcclxuICAgICAgICBkZXN0cm95LFxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIHN0YXRlIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gYnVpbGRTdGF0ZShiYWNrLCBjdXJyZW50LCBmb3J3YXJkLCByZXBsYWNlZCA9IGZhbHNlLCBjb21wdXRlU2Nyb2xsID0gZmFsc2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYmFjayxcclxuICAgICAgICBjdXJyZW50LFxyXG4gICAgICAgIGZvcndhcmQsXHJcbiAgICAgICAgcmVwbGFjZWQsXHJcbiAgICAgICAgcG9zaXRpb246IHdpbmRvdy5oaXN0b3J5Lmxlbmd0aCxcclxuICAgICAgICBzY3JvbGw6IGNvbXB1dGVTY3JvbGwgPyBjb21wdXRlU2Nyb2xsUG9zaXRpb24oKSA6IG51bGwsXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHVzZUhpc3RvcnlTdGF0ZU5hdmlnYXRpb24oYmFzZSkge1xyXG4gICAgY29uc3QgeyBoaXN0b3J5LCBsb2NhdGlvbiB9ID0gd2luZG93O1xyXG4gICAgLy8gcHJpdmF0ZSB2YXJpYWJsZXNcclxuICAgIGNvbnN0IGN1cnJlbnRMb2NhdGlvbiA9IHtcclxuICAgICAgICB2YWx1ZTogY3JlYXRlQ3VycmVudExvY2F0aW9uKGJhc2UsIGxvY2F0aW9uKSxcclxuICAgIH07XHJcbiAgICBjb25zdCBoaXN0b3J5U3RhdGUgPSB7IHZhbHVlOiBoaXN0b3J5LnN0YXRlIH07XHJcbiAgICAvLyBidWlsZCBjdXJyZW50IGhpc3RvcnkgZW50cnkgYXMgdGhpcyBpcyBhIGZyZXNoIG5hdmlnYXRpb25cclxuICAgIGlmICghaGlzdG9yeVN0YXRlLnZhbHVlKSB7XHJcbiAgICAgICAgY2hhbmdlTG9jYXRpb24oY3VycmVudExvY2F0aW9uLnZhbHVlLCB7XHJcbiAgICAgICAgICAgIGJhY2s6IG51bGwsXHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IGN1cnJlbnRMb2NhdGlvbi52YWx1ZSxcclxuICAgICAgICAgICAgZm9yd2FyZDogbnVsbCxcclxuICAgICAgICAgICAgLy8gdGhlIGxlbmd0aCBpcyBvZmYgYnkgb25lLCB3ZSBuZWVkIHRvIGRlY3JlYXNlIGl0XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBoaXN0b3J5Lmxlbmd0aCAtIDEsXHJcbiAgICAgICAgICAgIHJlcGxhY2VkOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBkb24ndCBhZGQgYSBzY3JvbGwgYXMgdGhlIHVzZXIgbWF5IGhhdmUgYW4gYW5jaG9yLCBhbmQgd2Ugd2FudFxyXG4gICAgICAgICAgICAvLyBzY3JvbGxCZWhhdmlvciB0byBiZSB0cmlnZ2VyZWQgd2l0aG91dCBhIHNhdmVkIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIHNjcm9sbDogbnVsbCxcclxuICAgICAgICB9LCB0cnVlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUxvY2F0aW9uKHRvLCBzdGF0ZSwgcmVwbGFjZSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGlmIGEgYmFzZSB0YWcgaXMgcHJvdmlkZWQsIGFuZCB3ZSBhcmUgb24gYSBub3JtYWwgZG9tYWluLCB3ZSBoYXZlIHRvXHJcbiAgICAgICAgICogcmVzcGVjdCB0aGUgcHJvdmlkZWQgYGJhc2VgIGF0dHJpYnV0ZSBiZWNhdXNlIHB1c2hTdGF0ZSgpIHdpbGwgdXNlIGl0IGFuZFxyXG4gICAgICAgICAqIHBvdGVudGlhbGx5IGVyYXNlIGFueXRoaW5nIGJlZm9yZSB0aGUgYCNgIGxpa2UgYXRcclxuICAgICAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy82ODUgd2hlcmUgYSBiYXNlIG9mXHJcbiAgICAgICAgICogYC9mb2xkZXIvI2AgYnV0IGEgYmFzZSBvZiBgL2Agd291bGQgZXJhc2UgdGhlIGAvZm9sZGVyL2Agc2VjdGlvbi4gSWZcclxuICAgICAgICAgKiB0aGVyZSBpcyBubyBob3N0LCB0aGUgYDxiYXNlPmAgdGFnIG1ha2VzIG5vIHNlbnNlIGFuZCBpZiB0aGVyZSBpc24ndCBhXHJcbiAgICAgICAgICogYmFzZSB0YWcgd2UgY2FuIGp1c3QgdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGAjYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBoYXNoSW5kZXggPSBiYXNlLmluZGV4T2YoJyMnKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBoYXNoSW5kZXggPiAtMVxyXG4gICAgICAgICAgICA/IChsb2NhdGlvbi5ob3N0ICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKVxyXG4gICAgICAgICAgICAgICAgPyBiYXNlXHJcbiAgICAgICAgICAgICAgICA6IGJhc2Uuc2xpY2UoaGFzaEluZGV4KSkgKyB0b1xyXG4gICAgICAgICAgICA6IGNyZWF0ZUJhc2VMb2NhdGlvbigpICsgYmFzZSArIHRvO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEJST1dTRVIgUVVJUktcclxuICAgICAgICAgICAgLy8gTk9URTogU2FmYXJpIHRocm93cyBhIFNlY3VyaXR5RXJyb3Igd2hlbiBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gMTAwIHRpbWVzIGluIDMwIHNlY29uZHNcclxuICAgICAgICAgICAgaGlzdG9yeVtyZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oc3RhdGUsICcnLCB1cmwpO1xyXG4gICAgICAgICAgICBoaXN0b3J5U3RhdGUudmFsdWUgPSBzdGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKCdFcnJvciB3aXRoIHB1c2gvcmVwbGFjZSBTdGF0ZScsIGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRm9yY2UgdGhlIG5hdmlnYXRpb24sIHRoaXMgYWxzbyByZXNldHMgdGhlIGNhbGwgY291bnRcclxuICAgICAgICAgICAgbG9jYXRpb25bcmVwbGFjZSA/ICdyZXBsYWNlJyA6ICdhc3NpZ24nXSh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlcGxhY2UodG8sIGRhdGEpIHtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IGFzc2lnbih7fSwgaGlzdG9yeS5zdGF0ZSwgYnVpbGRTdGF0ZShoaXN0b3J5U3RhdGUudmFsdWUuYmFjaywgXHJcbiAgICAgICAgLy8ga2VlcCBiYWNrIGFuZCBmb3J3YXJkIGVudHJpZXMgYnV0IG92ZXJyaWRlIGN1cnJlbnQgcG9zaXRpb25cclxuICAgICAgICB0bywgaGlzdG9yeVN0YXRlLnZhbHVlLmZvcndhcmQsIHRydWUpLCBkYXRhLCB7IHBvc2l0aW9uOiBoaXN0b3J5U3RhdGUudmFsdWUucG9zaXRpb24gfSk7XHJcbiAgICAgICAgY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCB0cnVlKTtcclxuICAgICAgICBjdXJyZW50TG9jYXRpb24udmFsdWUgPSB0bztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHB1c2godG8sIGRhdGEpIHtcclxuICAgICAgICAvLyBBZGQgdG8gY3VycmVudCBlbnRyeSB0aGUgaW5mb3JtYXRpb24gb2Ygd2hlcmUgd2UgYXJlIGdvaW5nXHJcbiAgICAgICAgLy8gYXMgd2VsbCBhcyBzYXZpbmcgdGhlIGN1cnJlbnQgcG9zaXRpb25cclxuICAgICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBhc3NpZ24oe30sIFxyXG4gICAgICAgIC8vIHVzZSBjdXJyZW50IGhpc3Rvcnkgc3RhdGUgdG8gZ3JhY2VmdWxseSBoYW5kbGUgYSB3cm9uZyBjYWxsIHRvXHJcbiAgICAgICAgLy8gaGlzdG9yeS5yZXBsYWNlU3RhdGVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy8zNjZcclxuICAgICAgICBoaXN0b3J5U3RhdGUudmFsdWUsIGhpc3Rvcnkuc3RhdGUsIHtcclxuICAgICAgICAgICAgZm9yd2FyZDogdG8sXHJcbiAgICAgICAgICAgIHNjcm9sbDogY29tcHV0ZVNjcm9sbFBvc2l0aW9uKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaGlzdG9yeS5zdGF0ZSkge1xyXG4gICAgICAgICAgICB3YXJuKGBoaXN0b3J5LnN0YXRlIHNlZW1zIHRvIGhhdmUgYmVlbiBtYW51YWxseSByZXBsYWNlZCB3aXRob3V0IHByZXNlcnZpbmcgdGhlIG5lY2Vzc2FyeSB2YWx1ZXMuIE1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSBleGlzdGluZyBoaXN0b3J5IHN0YXRlIGlmIHlvdSBhcmUgbWFudWFsbHkgY2FsbGluZyBoaXN0b3J5LnJlcGxhY2VTdGF0ZTpcXG5cXG5gICtcclxuICAgICAgICAgICAgICAgIGBoaXN0b3J5LnJlcGxhY2VTdGF0ZShoaXN0b3J5LnN0YXRlLCAnJywgdXJsKVxcblxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFlvdSBjYW4gZmluZCBtb3JlIGluZm9ybWF0aW9uIGF0IGh0dHBzOi8vbmV4dC5yb3V0ZXIudnVlanMub3JnL2d1aWRlL21pZ3JhdGlvbi8jdXNhZ2Utb2YtaGlzdG9yeS1zdGF0ZS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hhbmdlTG9jYXRpb24oY3VycmVudFN0YXRlLmN1cnJlbnQsIGN1cnJlbnRTdGF0ZSwgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBhc3NpZ24oe30sIGJ1aWxkU3RhdGUoY3VycmVudExvY2F0aW9uLnZhbHVlLCB0bywgbnVsbCksIHsgcG9zaXRpb246IGN1cnJlbnRTdGF0ZS5wb3NpdGlvbiArIDEgfSwgZGF0YSk7XHJcbiAgICAgICAgY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCBmYWxzZSk7XHJcbiAgICAgICAgY3VycmVudExvY2F0aW9uLnZhbHVlID0gdG87XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxvY2F0aW9uOiBjdXJyZW50TG9jYXRpb24sXHJcbiAgICAgICAgc3RhdGU6IGhpc3RvcnlTdGF0ZSxcclxuICAgICAgICBwdXNoLFxyXG4gICAgICAgIHJlcGxhY2UsXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuIEhUTUw1IGhpc3RvcnkuIE1vc3QgY29tbW9uIGhpc3RvcnkgZm9yIHNpbmdsZSBwYWdlIGFwcGxpY2F0aW9ucy5cclxuICpcclxuICogQHBhcmFtIGJhc2UgLVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViSGlzdG9yeShiYXNlKSB7XHJcbiAgICBiYXNlID0gbm9ybWFsaXplQmFzZShiYXNlKTtcclxuICAgIGNvbnN0IGhpc3RvcnlOYXZpZ2F0aW9uID0gdXNlSGlzdG9yeVN0YXRlTmF2aWdhdGlvbihiYXNlKTtcclxuICAgIGNvbnN0IGhpc3RvcnlMaXN0ZW5lcnMgPSB1c2VIaXN0b3J5TGlzdGVuZXJzKGJhc2UsIGhpc3RvcnlOYXZpZ2F0aW9uLnN0YXRlLCBoaXN0b3J5TmF2aWdhdGlvbi5sb2NhdGlvbiwgaGlzdG9yeU5hdmlnYXRpb24ucmVwbGFjZSk7XHJcbiAgICBmdW5jdGlvbiBnbyhkZWx0YSwgdHJpZ2dlckxpc3RlbmVycyA9IHRydWUpIHtcclxuICAgICAgICBpZiAoIXRyaWdnZXJMaXN0ZW5lcnMpXHJcbiAgICAgICAgICAgIGhpc3RvcnlMaXN0ZW5lcnMucGF1c2VMaXN0ZW5lcnMoKTtcclxuICAgICAgICBoaXN0b3J5LmdvKGRlbHRhKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSBhc3NpZ24oe1xyXG4gICAgICAgIC8vIGl0J3Mgb3ZlcnJpZGRlbiByaWdodCBhZnRlclxyXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcclxuICAgICAgICBiYXNlLFxyXG4gICAgICAgIGdvLFxyXG4gICAgICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYuYmluZChudWxsLCBiYXNlKSxcclxuICAgIH0sIGhpc3RvcnlOYXZpZ2F0aW9uLCBoaXN0b3J5TGlzdGVuZXJzKTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyb3V0ZXJIaXN0b3J5LCAnbG9jYXRpb24nLCB7XHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBnZXQ6ICgpID0+IGhpc3RvcnlOYXZpZ2F0aW9uLmxvY2F0aW9uLnZhbHVlLFxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ3N0YXRlJywge1xyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgZ2V0OiAoKSA9PiBoaXN0b3J5TmF2aWdhdGlvbi5zdGF0ZS52YWx1ZSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJvdXRlckhpc3Rvcnk7XHJcbn1cblxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gaW4tbWVtb3J5IGJhc2VkIGhpc3RvcnkuIFRoZSBtYWluIHB1cnBvc2Ugb2YgdGhpcyBoaXN0b3J5IGlzIHRvIGhhbmRsZSBTU1IuIEl0IHN0YXJ0cyBpbiBhIHNwZWNpYWwgbG9jYXRpb24gdGhhdCBpcyBub3doZXJlLlxyXG4gKiBJdCdzIHVwIHRvIHRoZSB1c2VyIHRvIHJlcGxhY2UgdGhhdCBsb2NhdGlvbiB3aXRoIHRoZSBzdGFydGVyIGxvY2F0aW9uIGJ5IGVpdGhlciBjYWxsaW5nIGByb3V0ZXIucHVzaGAgb3IgYHJvdXRlci5yZXBsYWNlYC5cclxuICpcclxuICogQHBhcmFtIGJhc2UgLSBCYXNlIGFwcGxpZWQgdG8gYWxsIHVybHMsIGRlZmF1bHRzIHRvICcvJ1xyXG4gKiBAcmV0dXJucyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgcm91dGVyIGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVNZW1vcnlIaXN0b3J5KGJhc2UgPSAnJykge1xyXG4gICAgbGV0IGxpc3RlbmVycyA9IFtdO1xyXG4gICAgbGV0IHF1ZXVlID0gW1NUQVJUXTtcclxuICAgIGxldCBwb3NpdGlvbiA9IDA7XHJcbiAgICBiYXNlID0gbm9ybWFsaXplQmFzZShiYXNlKTtcclxuICAgIGZ1bmN0aW9uIHNldExvY2F0aW9uKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgcG9zaXRpb24rKztcclxuICAgICAgICBpZiAocG9zaXRpb24gPT09IHF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyB3ZSBhcmUgYXQgdGhlIGVuZCwgd2UgY2FuIHNpbXBseSBhcHBlbmQgYSBuZXcgZW50cnlcclxuICAgICAgICAgICAgcXVldWUucHVzaChsb2NhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB3ZSBhcmUgaW4gdGhlIG1pZGRsZSwgd2UgcmVtb3ZlIGV2ZXJ5dGhpbmcgZnJvbSBoZXJlIGluIHRoZSBxdWV1ZVxyXG4gICAgICAgICAgICBxdWV1ZS5zcGxpY2UocG9zaXRpb24pO1xyXG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGxvY2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB0cmlnZ2VyTGlzdGVuZXJzKHRvLCBmcm9tLCB7IGRpcmVjdGlvbiwgZGVsdGEgfSkge1xyXG4gICAgICAgIGNvbnN0IGluZm8gPSB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbixcclxuICAgICAgICAgICAgZGVsdGEsXHJcbiAgICAgICAgICAgIHR5cGU6IE5hdmlnYXRpb25UeXBlLnBvcCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgbGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRvLCBmcm9tLCBpbmZvKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCByb3V0ZXJIaXN0b3J5ID0ge1xyXG4gICAgICAgIC8vIHJld3JpdHRlbiBieSBPYmplY3QuZGVmaW5lUHJvcGVydHlcclxuICAgICAgICBsb2NhdGlvbjogU1RBUlQsXHJcbiAgICAgICAgLy8gVE9ETzogc2hvdWxkIGJlIGtlcHQgaW4gcXVldWVcclxuICAgICAgICBzdGF0ZToge30sXHJcbiAgICAgICAgYmFzZSxcclxuICAgICAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLmJpbmQobnVsbCwgYmFzZSksXHJcbiAgICAgICAgcmVwbGFjZSh0bykge1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgY3VycmVudCBlbnRyeSBhbmQgZGVjcmVtZW50IHBvc2l0aW9uXHJcbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShwb3NpdGlvbi0tLCAxKTtcclxuICAgICAgICAgICAgc2V0TG9jYXRpb24odG8pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHVzaCh0bywgZGF0YSkge1xyXG4gICAgICAgICAgICBzZXRMb2NhdGlvbih0byk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsaXN0ZW4oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgICAgICBxdWV1ZSA9IFtTVEFSVF07XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdvKGRlbHRhLCBzaG91bGRUcmlnZ2VyID0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBmcm9tID0gdGhpcy5sb2NhdGlvbjtcclxuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gXHJcbiAgICAgICAgICAgIC8vIHdlIGFyZSBjb25zaWRlcmluZyBkZWx0YSA9PT0gMCBnb2luZyBmb3J3YXJkLCBidXQgaW4gYWJzdHJhY3QgbW9kZVxyXG4gICAgICAgICAgICAvLyB1c2luZyAwIGZvciB0aGUgZGVsdGEgZG9lc24ndCBtYWtlIHNlbnNlIGxpa2UgaXQgZG9lcyBpbiBodG1sNSB3aGVyZVxyXG4gICAgICAgICAgICAvLyBpdCByZWxvYWRzIHRoZSBwYWdlXHJcbiAgICAgICAgICAgIGRlbHRhIDwgMCA/IE5hdmlnYXRpb25EaXJlY3Rpb24uYmFjayA6IE5hdmlnYXRpb25EaXJlY3Rpb24uZm9yd2FyZDtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBNYXRoLm1heCgwLCBNYXRoLm1pbihwb3NpdGlvbiArIGRlbHRhLCBxdWV1ZS5sZW5ndGggLSAxKSk7XHJcbiAgICAgICAgICAgIGlmIChzaG91bGRUcmlnZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VyTGlzdGVuZXJzKHRoaXMubG9jYXRpb24sIGZyb20sIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJvdXRlckhpc3RvcnksICdsb2NhdGlvbicsIHtcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGdldDogKCkgPT4gcXVldWVbcG9zaXRpb25dLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcm91dGVySGlzdG9yeTtcclxufVxuXG4vKipcclxuICogQ3JlYXRlcyBhIGhhc2ggaGlzdG9yeS4gVXNlZnVsIGZvciB3ZWIgYXBwbGljYXRpb25zIHdpdGggbm8gaG9zdCAoZS5nLiBgZmlsZTovL2ApIG9yIHdoZW4gY29uZmlndXJpbmcgYSBzZXJ2ZXIgdG9cclxuICogaGFuZGxlIGFueSBVUkwgaXMgbm90IHBvc3NpYmxlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYmFzZSAtIG9wdGlvbmFsIGJhc2UgdG8gcHJvdmlkZS4gRGVmYXVsdHMgdG8gYGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoYCBJZiB0aGVyZSBpcyBhIGA8YmFzZT5gIHRhZ1xyXG4gKiBpbiB0aGUgYGhlYWRgLCBpdHMgdmFsdWUgd2lsbCBiZSBpZ25vcmVkIGluIGZhdm9yIG9mIHRoaXMgcGFyYW1ldGVyICoqYnV0IG5vdGUgaXQgYWZmZWN0cyBhbGwgdGhlIGhpc3RvcnkucHVzaFN0YXRlKClcclxuICogY2FsbHMqKiwgbWVhbmluZyB0aGF0IGlmIHlvdSB1c2UgYSBgPGJhc2U+YCB0YWcsIGl0J3MgYGhyZWZgIHZhbHVlICoqaGFzIHRvIG1hdGNoIHRoaXMgcGFyYW1ldGVyKiogKGlnbm9yaW5nIGFueXRoaW5nXHJcbiAqIGFmdGVyIHRoZSBgI2ApLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiAvLyBhdCBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlclxyXG4gKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgpIC8vIGdpdmVzIGEgdXJsIG9mIGBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlciNgXHJcbiAqIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCcvZm9sZGVyLycpIC8vIGdpdmVzIGEgdXJsIG9mIGBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlci8jYFxyXG4gKiAvLyBpZiB0aGUgYCNgIGlzIHByb3ZpZGVkIGluIHRoZSBiYXNlLCBpdCB3b24ndCBiZSBhZGRlZCBieSBgY3JlYXRlV2ViSGFzaEhpc3RvcnlgXHJcbiAqIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCcvZm9sZGVyLyMvYXBwLycpIC8vIGdpdmVzIGEgdXJsIG9mIGBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlci8jL2FwcC9gXHJcbiAqIC8vIHlvdSBzaG91bGQgYXZvaWQgZG9pbmcgdGhpcyBiZWNhdXNlIGl0IGNoYW5nZXMgdGhlIG9yaWdpbmFsIHVybCBhbmQgYnJlYWtzIGNvcHlpbmcgdXJsc1xyXG4gKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgnL290aGVyLWZvbGRlci8nKSAvLyBnaXZlcyBhIHVybCBvZiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9vdGhlci1mb2xkZXIvI2BcclxuICpcclxuICogLy8gYXQgZmlsZTovLy91c3IvZXRjL2ZvbGRlci9pbmRleC5odG1sXHJcbiAqIC8vIGZvciBsb2NhdGlvbnMgd2l0aCBubyBgaG9zdGAsIHRoZSBiYXNlIGlzIGlnbm9yZWRcclxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoJy9pQW1JZ25vcmVkJykgLy8gZ2l2ZXMgYSB1cmwgb2YgYGZpbGU6Ly8vdXNyL2V0Yy9mb2xkZXIvaW5kZXguaHRtbCNgXHJcbiAqIGBgYFxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViSGFzaEhpc3RvcnkoYmFzZSkge1xyXG4gICAgLy8gTWFrZSBzdXJlIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgZmluZSBpbiB0ZXJtcyBvZiBlbmNvZGluZywgc3BlY2lhbGx5IGZvciBJRTExXHJcbiAgICAvLyBmb3IgYGZpbGU6Ly9gLCBkaXJlY3RseSB1c2UgdGhlIHBhdGhuYW1lIGFuZCBpZ25vcmUgdGhlIGJhc2VcclxuICAgIC8vIGxvY2F0aW9uLnBhdGhuYW1lIGNvbnRhaW5zIGFuIGluaXRpYWwgYC9gIGV2ZW4gYXQgdGhlIHJvb3Q6IGBodHRwczovL2V4YW1wbGUuY29tYFxyXG4gICAgYmFzZSA9IGxvY2F0aW9uLmhvc3QgPyBiYXNlIHx8IGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoIDogJyc7XHJcbiAgICAvLyBhbGxvdyB0aGUgdXNlciB0byBwcm92aWRlIGEgYCNgIGluIHRoZSBtaWRkbGU6IGAvYmFzZS8jL2FwcGBcclxuICAgIGlmICghYmFzZS5pbmNsdWRlcygnIycpKVxyXG4gICAgICAgIGJhc2UgKz0gJyMnO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYmFzZS5lbmRzV2l0aCgnIy8nKSAmJiAhYmFzZS5lbmRzV2l0aCgnIycpKSB7XHJcbiAgICAgICAgd2FybihgQSBoYXNoIGJhc2UgbXVzdCBlbmQgd2l0aCBhIFwiI1wiOlxcblwiJHtiYXNlfVwiIHNob3VsZCBiZSBcIiR7YmFzZS5yZXBsYWNlKC8jLiokLywgJyMnKX1cIi5gKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjcmVhdGVXZWJIaXN0b3J5KGJhc2UpO1xyXG59XG5cbmZ1bmN0aW9uIGlzUm91dGVMb2NhdGlvbihyb3V0ZSkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiByb3V0ZSA9PT0gJ3N0cmluZycgfHwgKHJvdXRlICYmIHR5cGVvZiByb3V0ZSA9PT0gJ29iamVjdCcpO1xyXG59XHJcbmZ1bmN0aW9uIGlzUm91dGVOYW1lKG5hbWUpIHtcclxuICAgIHJldHVybiB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIG5hbWUgPT09ICdzeW1ib2wnO1xyXG59XG5cbi8qKlxyXG4gKiBJbml0aWFsIHJvdXRlIGxvY2F0aW9uIHdoZXJlIHRoZSByb3V0ZXIgaXMuIENhbiBiZSB1c2VkIGluIG5hdmlnYXRpb24gZ3VhcmRzXHJcbiAqIHRvIGRpZmZlcmVudGlhdGUgdGhlIGluaXRpYWwgbmF2aWdhdGlvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBganNcclxuICogaW1wb3J0IHsgU1RBUlRfTE9DQVRJT04gfSBmcm9tICd2dWUtcm91dGVyJ1xyXG4gKlxyXG4gKiByb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20pID0+IHtcclxuICogICBpZiAoZnJvbSA9PT0gU1RBUlRfTE9DQVRJT04pIHtcclxuICogICAgIC8vIGluaXRpYWwgbmF2aWdhdGlvblxyXG4gKiAgIH1cclxuICogfSlcclxuICogYGBgXHJcbiAqL1xyXG5jb25zdCBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEID0ge1xyXG4gICAgcGF0aDogJy8nLFxyXG4gICAgbmFtZTogdW5kZWZpbmVkLFxyXG4gICAgcGFyYW1zOiB7fSxcclxuICAgIHF1ZXJ5OiB7fSxcclxuICAgIGhhc2g6ICcnLFxyXG4gICAgZnVsbFBhdGg6ICcvJyxcclxuICAgIG1hdGNoZWQ6IFtdLFxyXG4gICAgbWV0YToge30sXHJcbiAgICByZWRpcmVjdGVkRnJvbTogdW5kZWZpbmVkLFxyXG59O1xuXG5jb25zdCBOYXZpZ2F0aW9uRmFpbHVyZVN5bWJvbCA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnbmF2aWdhdGlvbiBmYWlsdXJlJyA6ICcnKTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIHdpdGggYWxsIHBvc3NpYmxlIHR5cGVzIGZvciBuYXZpZ2F0aW9uIGZhaWx1cmVzLiBDYW4gYmUgcGFzc2VkIHRvXHJcbiAqIHtAbGluayBpc05hdmlnYXRpb25GYWlsdXJlfSB0byBjaGVjayBmb3Igc3BlY2lmaWMgZmFpbHVyZXMuXHJcbiAqL1xyXG52YXIgTmF2aWdhdGlvbkZhaWx1cmVUeXBlO1xyXG4oZnVuY3Rpb24gKE5hdmlnYXRpb25GYWlsdXJlVHlwZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhYm9ydGVkIG5hdmlnYXRpb24gaXMgYSBuYXZpZ2F0aW9uIHRoYXQgZmFpbGVkIGJlY2F1c2UgYSBuYXZpZ2F0aW9uXHJcbiAgICAgKiBndWFyZCByZXR1cm5lZCBgZmFsc2VgIG9yIGNhbGxlZCBgbmV4dChmYWxzZSlgXHJcbiAgICAgKi9cclxuICAgIE5hdmlnYXRpb25GYWlsdXJlVHlwZVtOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbXCJhYm9ydGVkXCJdID0gNF0gPSBcImFib3J0ZWRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQSBjYW5jZWxsZWQgbmF2aWdhdGlvbiBpcyBhIG5hdmlnYXRpb24gdGhhdCBmYWlsZWQgYmVjYXVzZSBhIG1vcmUgcmVjZW50XHJcbiAgICAgKiBuYXZpZ2F0aW9uIGZpbmlzaGVkIHN0YXJ0ZWQgKG5vdCBuZWNlc3NhcmlseSBmaW5pc2hlZCkuXHJcbiAgICAgKi9cclxuICAgIE5hdmlnYXRpb25GYWlsdXJlVHlwZVtOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbXCJjYW5jZWxsZWRcIl0gPSA4XSA9IFwiY2FuY2VsbGVkXCI7XHJcbiAgICAvKipcclxuICAgICAqIEEgZHVwbGljYXRlZCBuYXZpZ2F0aW9uIGlzIGEgbmF2aWdhdGlvbiB0aGF0IGZhaWxlZCBiZWNhdXNlIGl0IHdhc1xyXG4gICAgICogaW5pdGlhdGVkIHdoaWxlIGFscmVhZHkgYmVpbmcgYXQgdGhlIGV4YWN0IHNhbWUgbG9jYXRpb24uXHJcbiAgICAgKi9cclxuICAgIE5hdmlnYXRpb25GYWlsdXJlVHlwZVtOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbXCJkdXBsaWNhdGVkXCJdID0gMTZdID0gXCJkdXBsaWNhdGVkXCI7XHJcbn0pKE5hdmlnYXRpb25GYWlsdXJlVHlwZSB8fCAoTmF2aWdhdGlvbkZhaWx1cmVUeXBlID0ge30pKTtcclxuLy8gREVWIG9ubHkgZGVidWcgbWVzc2FnZXNcclxuY29uc3QgRXJyb3JUeXBlTWVzc2FnZXMgPSB7XHJcbiAgICBbMSAvKiBFcnJvclR5cGVzLk1BVENIRVJfTk9UX0ZPVU5EICovXSh7IGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gfSkge1xyXG4gICAgICAgIHJldHVybiBgTm8gbWF0Y2ggZm9yXFxuICR7SlNPTi5zdHJpbmdpZnkobG9jYXRpb24pfSR7Y3VycmVudExvY2F0aW9uXHJcbiAgICAgICAgICAgID8gJ1xcbndoaWxlIGJlaW5nIGF0XFxuJyArIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRMb2NhdGlvbilcclxuICAgICAgICAgICAgOiAnJ31gO1xyXG4gICAgfSxcclxuICAgIFsyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqL10oeyBmcm9tLCB0bywgfSkge1xyXG4gICAgICAgIHJldHVybiBgUmVkaXJlY3RlZCBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHtzdHJpbmdpZnlSb3V0ZSh0byl9XCIgdmlhIGEgbmF2aWdhdGlvbiBndWFyZC5gO1xyXG4gICAgfSxcclxuICAgIFs0IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9BQk9SVEVEICovXSh7IGZyb20sIHRvIH0pIHtcclxuICAgICAgICByZXR1cm4gYE5hdmlnYXRpb24gYWJvcnRlZCBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0by5mdWxsUGF0aH1cIiB2aWEgYSBuYXZpZ2F0aW9uIGd1YXJkLmA7XHJcbiAgICB9LFxyXG4gICAgWzggLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRCAqL10oeyBmcm9tLCB0byB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGBOYXZpZ2F0aW9uIGNhbmNlbGxlZCBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0by5mdWxsUGF0aH1cIiB3aXRoIGEgbmV3IG5hdmlnYXRpb24uYDtcclxuICAgIH0sXHJcbiAgICBbMTYgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0RVUExJQ0FURUQgKi9dKHsgZnJvbSwgdG8gfSkge1xyXG4gICAgICAgIHJldHVybiBgQXZvaWRlZCByZWR1bmRhbnQgbmF2aWdhdGlvbiB0byBjdXJyZW50IGxvY2F0aW9uOiBcIiR7ZnJvbS5mdWxsUGF0aH1cIi5gO1xyXG4gICAgfSxcclxufTtcclxuZnVuY3Rpb24gY3JlYXRlUm91dGVyRXJyb3IodHlwZSwgcGFyYW1zKSB7XHJcbiAgICAvLyBrZWVwIGZ1bGwgZXJyb3IgbWVzc2FnZXMgaW4gY2pzIHZlcnNpb25zXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICF0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGFzc2lnbihuZXcgRXJyb3IoRXJyb3JUeXBlTWVzc2FnZXNbdHlwZV0ocGFyYW1zKSksIHtcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgW05hdmlnYXRpb25GYWlsdXJlU3ltYm9sXTogdHJ1ZSxcclxuICAgICAgICB9LCBwYXJhbXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGFzc2lnbihuZXcgRXJyb3IoKSwge1xyXG4gICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICBbTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2xdOiB0cnVlLFxyXG4gICAgICAgIH0sIHBhcmFtcyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvciwgdHlwZSkge1xyXG4gICAgcmV0dXJuIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmXHJcbiAgICAgICAgTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2wgaW4gZXJyb3IgJiZcclxuICAgICAgICAodHlwZSA9PSBudWxsIHx8ICEhKGVycm9yLnR5cGUgJiB0eXBlKSkpO1xyXG59XHJcbmNvbnN0IHByb3BlcnRpZXNUb0xvZyA9IFsncGFyYW1zJywgJ3F1ZXJ5JywgJ2hhc2gnXTtcclxuZnVuY3Rpb24gc3RyaW5naWZ5Um91dGUodG8pIHtcclxuICAgIGlmICh0eXBlb2YgdG8gPT09ICdzdHJpbmcnKVxyXG4gICAgICAgIHJldHVybiB0bztcclxuICAgIGlmICgncGF0aCcgaW4gdG8pXHJcbiAgICAgICAgcmV0dXJuIHRvLnBhdGg7XHJcbiAgICBjb25zdCBsb2NhdGlvbiA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgcHJvcGVydGllc1RvTG9nKSB7XHJcbiAgICAgICAgaWYgKGtleSBpbiB0bylcclxuICAgICAgICAgICAgbG9jYXRpb25ba2V5XSA9IHRvW2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobG9jYXRpb24sIG51bGwsIDIpO1xyXG59XG5cbi8vIGRlZmF1bHQgcGF0dGVybiBmb3IgYSBwYXJhbTogbm9uLWdyZWVkeSBldmVyeXRoaW5nIGJ1dCAvXHJcbmNvbnN0IEJBU0VfUEFSQU1fUEFUVEVSTiA9ICdbXi9dKz8nO1xyXG5jb25zdCBCQVNFX1BBVEhfUEFSU0VSX09QVElPTlMgPSB7XHJcbiAgICBzZW5zaXRpdmU6IGZhbHNlLFxyXG4gICAgc3RyaWN0OiBmYWxzZSxcclxuICAgIHN0YXJ0OiB0cnVlLFxyXG4gICAgZW5kOiB0cnVlLFxyXG59O1xyXG4vLyBTcGVjaWFsIFJlZ2V4IGNoYXJhY3RlcnMgdGhhdCBtdXN0IGJlIGVzY2FwZWQgaW4gc3RhdGljIHRva2Vuc1xyXG5jb25zdCBSRUdFWF9DSEFSU19SRSA9IC9bLisqP14ke30oKVtcXF0vXFxcXF0vZztcclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBwYXRoIHBhcnNlciBmcm9tIGFuIGFycmF5IG9mIFNlZ21lbnRzIChhIHNlZ21lbnQgaXMgYW4gYXJyYXkgb2YgVG9rZW5zKVxyXG4gKlxyXG4gKiBAcGFyYW0gc2VnbWVudHMgLSBhcnJheSBvZiBzZWdtZW50cyByZXR1cm5lZCBieSB0b2tlbml6ZVBhdGhcclxuICogQHBhcmFtIGV4dHJhT3B0aW9ucyAtIG9wdGlvbmFsIG9wdGlvbnMgZm9yIHRoZSByZWdleHBcclxuICogQHJldHVybnMgYSBQYXRoUGFyc2VyXHJcbiAqL1xyXG5mdW5jdGlvbiB0b2tlbnNUb1BhcnNlcihzZWdtZW50cywgZXh0cmFPcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gYXNzaWduKHt9LCBCQVNFX1BBVEhfUEFSU0VSX09QVElPTlMsIGV4dHJhT3B0aW9ucyk7XHJcbiAgICAvLyB0aGUgYW1vdW50IG9mIHNjb3JlcyBpcyB0aGUgc2FtZSBhcyB0aGUgbGVuZ3RoIG9mIHNlZ21lbnRzIGV4Y2VwdCBmb3IgdGhlIHJvb3Qgc2VnbWVudCBcIi9cIlxyXG4gICAgY29uc3Qgc2NvcmUgPSBbXTtcclxuICAgIC8vIHRoZSByZWdleHAgYXMgYSBzdHJpbmdcclxuICAgIGxldCBwYXR0ZXJuID0gb3B0aW9ucy5zdGFydCA/ICdeJyA6ICcnO1xyXG4gICAgLy8gZXh0cmFjdGVkIGtleXNcclxuICAgIGNvbnN0IGtleXMgPSBbXTtcclxuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xyXG4gICAgICAgIC8vIHRoZSByb290IHNlZ21lbnQgbmVlZHMgc3BlY2lhbCB0cmVhdG1lbnRcclxuICAgICAgICBjb25zdCBzZWdtZW50U2NvcmVzID0gc2VnbWVudC5sZW5ndGggPyBbXSA6IFs5MCAvKiBQYXRoU2NvcmUuUm9vdCAqL107XHJcbiAgICAgICAgLy8gYWxsb3cgdHJhaWxpbmcgc2xhc2hcclxuICAgICAgICBpZiAob3B0aW9ucy5zdHJpY3QgJiYgIXNlZ21lbnQubGVuZ3RoKVxyXG4gICAgICAgICAgICBwYXR0ZXJuICs9ICcvJztcclxuICAgICAgICBmb3IgKGxldCB0b2tlbkluZGV4ID0gMDsgdG9rZW5JbmRleCA8IHNlZ21lbnQubGVuZ3RoOyB0b2tlbkluZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBzZWdtZW50W3Rva2VuSW5kZXhdO1xyXG4gICAgICAgICAgICAvLyByZXNldHMgdGhlIHNjb3JlIGlmIHdlIGFyZSBpbnNpZGUgYSBzdWItc2VnbWVudCAvOmEtb3RoZXItOmJcclxuICAgICAgICAgICAgbGV0IHN1YlNlZ21lbnRTY29yZSA9IDQwIC8qIFBhdGhTY29yZS5TZWdtZW50ICovICtcclxuICAgICAgICAgICAgICAgIChvcHRpb25zLnNlbnNpdGl2ZSA/IDAuMjUgLyogUGF0aFNjb3JlLkJvbnVzQ2FzZVNlbnNpdGl2ZSAqLyA6IDApO1xyXG4gICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMCAvKiBUb2tlblR5cGUuU3RhdGljICovKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBwcmVwZW5kIHRoZSBzbGFzaCBpZiB3ZSBhcmUgc3RhcnRpbmcgYSBuZXcgc2VnbWVudFxyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gJy8nO1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSB0b2tlbi52YWx1ZS5yZXBsYWNlKFJFR0VYX0NIQVJTX1JFLCAnXFxcXCQmJyk7XHJcbiAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gNDAgLyogUGF0aFNjb3JlLlN0YXRpYyAqLztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0b2tlbi50eXBlID09PSAxIC8qIFRva2VuVHlwZS5QYXJhbSAqLykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgcmVwZWF0YWJsZSwgb3B0aW9uYWwsIHJlZ2V4cCB9ID0gdG9rZW47XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGVhdGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWwsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlID0gcmVnZXhwID8gcmVnZXhwIDogQkFTRV9QQVJBTV9QQVRURVJOO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHVzZXIgcHJvdmlkZWQgYSBjdXN0b20gcmVnZXhwIC86aWQoXFxcXGQrKVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlICE9PSBCQVNFX1BBUkFNX1BBVFRFUk4pIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gMTAgLyogUGF0aFNjb3JlLkJvbnVzQ3VzdG9tUmVnRXhwICovO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgcmVnZXhwIGlzIHZhbGlkIGJlZm9yZSB1c2luZyBpdFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZWdFeHAoYCgke3JlfSlgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY3VzdG9tIFJlZ0V4cCBmb3IgcGFyYW0gXCIke3ZhbHVlfVwiICgke3JlfSk6IGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gd2UgcmVwZWF0IHdlIG11c3QgdGFrZSBjYXJlIG9mIHRoZSByZXBlYXRpbmcgbGVhZGluZyBzbGFzaFxyXG4gICAgICAgICAgICAgICAgbGV0IHN1YlBhdHRlcm4gPSByZXBlYXRhYmxlID8gYCgoPzoke3JlfSkoPzovKD86JHtyZX0pKSopYCA6IGAoJHtyZX0pYDtcclxuICAgICAgICAgICAgICAgIC8vIHByZXBlbmQgdGhlIHNsYXNoIGlmIHdlIGFyZSBzdGFydGluZyBhIG5ldyBzZWdtZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgc3ViUGF0dGVybiA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIGFuIG9wdGlvbmFsIC8gaWYgdGhlcmUgYXJlIG1vcmUgc2VnbWVudHMgZS5nLiAvOnA/LXN0YXRpY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvciAvOnA/LTpwMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbCAmJiBzZWdtZW50Lmxlbmd0aCA8IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYCg/Oi8ke3N1YlBhdHRlcm59KWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJy8nICsgc3ViUGF0dGVybjtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbClcclxuICAgICAgICAgICAgICAgICAgICBzdWJQYXR0ZXJuICs9ICc/JztcclxuICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gc3ViUGF0dGVybjtcclxuICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSAyMCAvKiBQYXRoU2NvcmUuRHluYW1pYyAqLztcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbClcclxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gLTggLyogUGF0aFNjb3JlLkJvbnVzT3B0aW9uYWwgKi87XHJcbiAgICAgICAgICAgICAgICBpZiAocmVwZWF0YWJsZSlcclxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gLTIwIC8qIFBhdGhTY29yZS5Cb251c1JlcGVhdGFibGUgKi87XHJcbiAgICAgICAgICAgICAgICBpZiAocmUgPT09ICcuKicpXHJcbiAgICAgICAgICAgICAgICAgICAgc3ViU2VnbWVudFNjb3JlICs9IC01MCAvKiBQYXRoU2NvcmUuQm9udXNXaWxkY2FyZCAqLztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWdtZW50U2NvcmVzLnB1c2goc3ViU2VnbWVudFNjb3JlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYW4gZW1wdHkgYXJyYXkgbGlrZSAvaG9tZS8gLT4gW1t7aG9tZX1dLCBbXV1cclxuICAgICAgICAvLyBpZiAoIXNlZ21lbnQubGVuZ3RoKSBwYXR0ZXJuICs9ICcvJ1xyXG4gICAgICAgIHNjb3JlLnB1c2goc2VnbWVudFNjb3Jlcyk7XHJcbiAgICB9XHJcbiAgICAvLyBvbmx5IGFwcGx5IHRoZSBzdHJpY3QgYm9udXMgdG8gdGhlIGxhc3Qgc2NvcmVcclxuICAgIGlmIChvcHRpb25zLnN0cmljdCAmJiBvcHRpb25zLmVuZCkge1xyXG4gICAgICAgIGNvbnN0IGkgPSBzY29yZS5sZW5ndGggLSAxO1xyXG4gICAgICAgIHNjb3JlW2ldW3Njb3JlW2ldLmxlbmd0aCAtIDFdICs9IDAuNzAwMDAwMDAwMDAwMDAwMSAvKiBQYXRoU2NvcmUuQm9udXNTdHJpY3QgKi87XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiBkZXYgb25seSB3YXJuIGRvdWJsZSB0cmFpbGluZyBzbGFzaFxyXG4gICAgaWYgKCFvcHRpb25zLnN0cmljdClcclxuICAgICAgICBwYXR0ZXJuICs9ICcvPyc7XHJcbiAgICBpZiAob3B0aW9ucy5lbmQpXHJcbiAgICAgICAgcGF0dGVybiArPSAnJCc7XHJcbiAgICAvLyBhbGxvdyBwYXRocyBsaWtlIC9keW5hbWljIHRvIG9ubHkgbWF0Y2ggZHluYW1pYyBvciBkeW5hbWljLy4uLiBidXQgbm90IGR5bmFtaWNfc29tZXRoaW5nX2Vsc2VcclxuICAgIGVsc2UgaWYgKG9wdGlvbnMuc3RyaWN0KVxyXG4gICAgICAgIHBhdHRlcm4gKz0gJyg/Oi98JCknO1xyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKHBhdHRlcm4sIG9wdGlvbnMuc2Vuc2l0aXZlID8gJycgOiAnaScpO1xyXG4gICAgZnVuY3Rpb24gcGFyc2UocGF0aCkge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcGF0aC5tYXRjaChyZSk7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge307XHJcbiAgICAgICAgaWYgKCFtYXRjaClcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBtYXRjaC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG1hdGNoW2ldIHx8ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2kgLSAxXTtcclxuICAgICAgICAgICAgcGFyYW1zW2tleS5uYW1lXSA9IHZhbHVlICYmIGtleS5yZXBlYXRhYmxlID8gdmFsdWUuc3BsaXQoJy8nKSA6IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc3RyaW5naWZ5KHBhcmFtcykge1xyXG4gICAgICAgIGxldCBwYXRoID0gJyc7XHJcbiAgICAgICAgLy8gZm9yIG9wdGlvbmFsIHBhcmFtZXRlcnMgdG8gYWxsb3cgdG8gYmUgZW1wdHlcclxuICAgICAgICBsZXQgYXZvaWREdXBsaWNhdGVkU2xhc2ggPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKCFhdm9pZER1cGxpY2F0ZWRTbGFzaCB8fCAhcGF0aC5lbmRzV2l0aCgnLycpKVxyXG4gICAgICAgICAgICAgICAgcGF0aCArPSAnLyc7XHJcbiAgICAgICAgICAgIGF2b2lkRHVwbGljYXRlZFNsYXNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2Ygc2VnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IDAgLyogVG9rZW5UeXBlLlN0YXRpYyAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGggKz0gdG9rZW4udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0b2tlbi50eXBlID09PSAxIC8qIFRva2VuVHlwZS5QYXJhbSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIHJlcGVhdGFibGUsIG9wdGlvbmFsIH0gPSB0b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbSA9IHZhbHVlIGluIHBhcmFtcyA/IHBhcmFtc1t2YWx1ZV0gOiAnJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShwYXJhbSkgJiYgIXJlcGVhdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcm92aWRlZCBwYXJhbSBcIiR7dmFsdWV9XCIgaXMgYW4gYXJyYXkgYnV0IGl0IGlzIG5vdCByZXBlYXRhYmxlICgqIG9yICsgbW9kaWZpZXJzKWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gaXNBcnJheShwYXJhbSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJhbS5qb2luKCcvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBwYXJhbTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIG1vcmUgdGhhbiBvbmUgb3B0aW9uYWwgcGFyYW0gbGlrZSAvOmE/LXN0YXRpYyB3ZSBkb24ndCBuZWVkIHRvIGNhcmUgYWJvdXQgdGhlIG9wdGlvbmFsIHBhcmFtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VnbWVudC5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBsYXN0IHNsYXNoIGFzIHdlIGNvdWxkIGJlIGF0IHRoZSBlbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0aC5lbmRzV2l0aCgnLycpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGF0aC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGFwcGVuZCBhIHNsYXNoIG9uIHRoZSBuZXh0IGl0ZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZvaWREdXBsaWNhdGVkU2xhc2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBwYXJhbSBcIiR7dmFsdWV9XCJgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGF2b2lkIGVtcHR5IHBhdGggd2hlbiB3ZSBoYXZlIG11bHRpcGxlIG9wdGlvbmFsIHBhcmFtc1xyXG4gICAgICAgIHJldHVybiBwYXRoIHx8ICcvJztcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmUsXHJcbiAgICAgICAgc2NvcmUsXHJcbiAgICAgICAga2V5cyxcclxuICAgICAgICBwYXJzZSxcclxuICAgICAgICBzdHJpbmdpZnksXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDb21wYXJlcyBhbiBhcnJheSBvZiBudW1iZXJzIGFzIHVzZWQgaW4gUGF0aFBhcnNlci5zY29yZSBhbmQgcmV0dXJucyBhXHJcbiAqIG51bWJlci4gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBgc29ydGAgYW4gYXJyYXlcclxuICpcclxuICogQHBhcmFtIGEgLSBmaXJzdCBhcnJheSBvZiBudW1iZXJzXHJcbiAqIEBwYXJhbSBiIC0gc2Vjb25kIGFycmF5IG9mIG51bWJlcnNcclxuICogQHJldHVybnMgMCBpZiBib3RoIGFyZSBlcXVhbCwgPCAwIGlmIGEgc2hvdWxkIGJlIHNvcnRlZCBmaXJzdCwgPiAwIGlmIGJcclxuICogc2hvdWxkIGJlIHNvcnRlZCBmaXJzdFxyXG4gKi9cclxuZnVuY3Rpb24gY29tcGFyZVNjb3JlQXJyYXkoYSwgYikge1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgd2hpbGUgKGkgPCBhLmxlbmd0aCAmJiBpIDwgYi5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBkaWZmID0gYltpXSAtIGFbaV07XHJcbiAgICAgICAgLy8gb25seSBrZWVwIGdvaW5nIGlmIGRpZmYgPT09IDBcclxuICAgICAgICBpZiAoZGlmZilcclxuICAgICAgICAgICAgcmV0dXJuIGRpZmY7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgdGhlIGxhc3Qgc3Vic2VnbWVudCB3YXMgU3RhdGljLCB0aGUgc2hvcnRlciBzZWdtZW50cyBzaG91bGQgYmUgc29ydGVkIGZpcnN0XHJcbiAgICAvLyBvdGhlcndpc2Ugc29ydCB0aGUgbG9uZ2VzdCBzZWdtZW50IGZpcnN0XHJcbiAgICBpZiAoYS5sZW5ndGggPCBiLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBhLmxlbmd0aCA9PT0gMSAmJiBhWzBdID09PSA0MCAvKiBQYXRoU2NvcmUuU3RhdGljICovICsgNDAgLyogUGF0aFNjb3JlLlNlZ21lbnQgKi9cclxuICAgICAgICAgICAgPyAtMVxyXG4gICAgICAgICAgICA6IDE7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhLmxlbmd0aCA+IGIubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGIubGVuZ3RoID09PSAxICYmIGJbMF0gPT09IDQwIC8qIFBhdGhTY29yZS5TdGF0aWMgKi8gKyA0MCAvKiBQYXRoU2NvcmUuU2VnbWVudCAqL1xyXG4gICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgOiAtMTtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG59XHJcbi8qKlxyXG4gKiBDb21wYXJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBgc29ydGAgdG8gc29ydCBhbiBhcnJheSBvZiBQYXRoUGFyc2VyXHJcbiAqXHJcbiAqIEBwYXJhbSBhIC0gZmlyc3QgUGF0aFBhcnNlclxyXG4gKiBAcGFyYW0gYiAtIHNlY29uZCBQYXRoUGFyc2VyXHJcbiAqIEByZXR1cm5zIDAgaWYgYm90aCBhcmUgZXF1YWwsIDwgMCBpZiBhIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3QsID4gMCBpZiBiXHJcbiAqL1xyXG5mdW5jdGlvbiBjb21wYXJlUGF0aFBhcnNlclNjb3JlKGEsIGIpIHtcclxuICAgIGxldCBpID0gMDtcclxuICAgIGNvbnN0IGFTY29yZSA9IGEuc2NvcmU7XHJcbiAgICBjb25zdCBiU2NvcmUgPSBiLnNjb3JlO1xyXG4gICAgd2hpbGUgKGkgPCBhU2NvcmUubGVuZ3RoICYmIGkgPCBiU2NvcmUubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgY29tcCA9IGNvbXBhcmVTY29yZUFycmF5KGFTY29yZVtpXSwgYlNjb3JlW2ldKTtcclxuICAgICAgICAvLyBkbyBub3QgcmV0dXJuIGlmIGJvdGggYXJlIGVxdWFsXHJcbiAgICAgICAgaWYgKGNvbXApXHJcbiAgICAgICAgICAgIHJldHVybiBjb21wO1xyXG4gICAgICAgIGkrKztcclxuICAgIH1cclxuICAgIGlmIChNYXRoLmFicyhiU2NvcmUubGVuZ3RoIC0gYVNjb3JlLmxlbmd0aCkgPT09IDEpIHtcclxuICAgICAgICBpZiAoaXNMYXN0U2NvcmVOZWdhdGl2ZShhU2NvcmUpKVxyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICBpZiAoaXNMYXN0U2NvcmVOZWdhdGl2ZShiU2NvcmUpKVxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgICAvLyBpZiBhIGFuZCBiIHNoYXJlIHRoZSBzYW1lIHNjb3JlIGVudHJpZXMgYnV0IGIgaGFzIG1vcmUsIHNvcnQgYiBmaXJzdFxyXG4gICAgcmV0dXJuIGJTY29yZS5sZW5ndGggLSBhU2NvcmUubGVuZ3RoO1xyXG4gICAgLy8gdGhpcyBpcyB0aGUgdGVybmFyeSB2ZXJzaW9uXHJcbiAgICAvLyByZXR1cm4gYVNjb3JlLmxlbmd0aCA8IGJTY29yZS5sZW5ndGhcclxuICAgIC8vICAgPyAxXHJcbiAgICAvLyAgIDogYVNjb3JlLmxlbmd0aCA+IGJTY29yZS5sZW5ndGhcclxuICAgIC8vICAgPyAtMVxyXG4gICAgLy8gICA6IDBcclxufVxyXG4vKipcclxuICogVGhpcyBhbGxvd3MgZGV0ZWN0aW5nIHNwbGF0cyBhdCB0aGUgZW5kIG9mIGEgcGF0aDogL2hvbWUvOmlkKC4qKSpcclxuICpcclxuICogQHBhcmFtIHNjb3JlIC0gc2NvcmUgdG8gY2hlY2tcclxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbGFzdCBlbnRyeSBpcyBuZWdhdGl2ZVxyXG4gKi9cclxuZnVuY3Rpb24gaXNMYXN0U2NvcmVOZWdhdGl2ZShzY29yZSkge1xyXG4gICAgY29uc3QgbGFzdCA9IHNjb3JlW3Njb3JlLmxlbmd0aCAtIDFdO1xyXG4gICAgcmV0dXJuIHNjb3JlLmxlbmd0aCA+IDAgJiYgbGFzdFtsYXN0Lmxlbmd0aCAtIDFdIDwgMDtcclxufVxuXG5jb25zdCBST09UX1RPS0VOID0ge1xyXG4gICAgdHlwZTogMCAvKiBUb2tlblR5cGUuU3RhdGljICovLFxyXG4gICAgdmFsdWU6ICcnLFxyXG59O1xyXG5jb25zdCBWQUxJRF9QQVJBTV9SRSA9IC9bYS16QS1aMC05X10vO1xyXG4vLyBBZnRlciBzb21lIHByb2ZpbGluZywgdGhlIGNhY2hlIHNlZW1zIHRvIGJlIHVubmVjZXNzYXJ5IGJlY2F1c2UgdG9rZW5pemVQYXRoXHJcbi8vICh0aGUgc2xvd2VzdCBwYXJ0IG9mIGFkZGluZyBhIHJvdXRlKSBpcyB2ZXJ5IGZhc3RcclxuLy8gY29uc3QgdG9rZW5DYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBUb2tlbltdW10+KClcclxuZnVuY3Rpb24gdG9rZW5pemVQYXRoKHBhdGgpIHtcclxuICAgIGlmICghcGF0aClcclxuICAgICAgICByZXR1cm4gW1tdXTtcclxuICAgIGlmIChwYXRoID09PSAnLycpXHJcbiAgICAgICAgcmV0dXJuIFtbUk9PVF9UT0tFTl1dO1xyXG4gICAgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICAgICAgPyBgUm91dGUgcGF0aHMgc2hvdWxkIHN0YXJ0IHdpdGggYSBcIi9cIjogXCIke3BhdGh9XCIgc2hvdWxkIGJlIFwiLyR7cGF0aH1cIi5gXHJcbiAgICAgICAgICAgIDogYEludmFsaWQgcGF0aCBcIiR7cGF0aH1cImApO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgKHRva2VuQ2FjaGUuaGFzKHBhdGgpKSByZXR1cm4gdG9rZW5DYWNoZS5nZXQocGF0aCkhXHJcbiAgICBmdW5jdGlvbiBjcmFzaChtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFUlIgKCR7c3RhdGV9KS9cIiR7YnVmZmVyfVwiOiAke21lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgICBsZXQgc3RhdGUgPSAwIC8qIFRva2VuaXplclN0YXRlLlN0YXRpYyAqLztcclxuICAgIGxldCBwcmV2aW91c1N0YXRlID0gc3RhdGU7XHJcbiAgICBjb25zdCB0b2tlbnMgPSBbXTtcclxuICAgIC8vIHRoZSBzZWdtZW50IHdpbGwgYWx3YXlzIGJlIHZhbGlkIGJlY2F1c2Ugd2UgZ2V0IGludG8gdGhlIGluaXRpYWwgc3RhdGVcclxuICAgIC8vIHdpdGggdGhlIGxlYWRpbmcgL1xyXG4gICAgbGV0IHNlZ21lbnQ7XHJcbiAgICBmdW5jdGlvbiBmaW5hbGl6ZVNlZ21lbnQoKSB7XHJcbiAgICAgICAgaWYgKHNlZ21lbnQpXHJcbiAgICAgICAgICAgIHRva2Vucy5wdXNoKHNlZ21lbnQpO1xyXG4gICAgICAgIHNlZ21lbnQgPSBbXTtcclxuICAgIH1cclxuICAgIC8vIGluZGV4IG9uIHRoZSBwYXRoXHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICAvLyBjaGFyIGF0IGluZGV4XHJcbiAgICBsZXQgY2hhcjtcclxuICAgIC8vIGJ1ZmZlciBvZiB0aGUgdmFsdWUgcmVhZFxyXG4gICAgbGV0IGJ1ZmZlciA9ICcnO1xyXG4gICAgLy8gY3VzdG9tIHJlZ2V4cCBmb3IgYSBwYXJhbVxyXG4gICAgbGV0IGN1c3RvbVJlID0gJyc7XHJcbiAgICBmdW5jdGlvbiBjb25zdW1lQnVmZmVyKCkge1xyXG4gICAgICAgIGlmICghYnVmZmVyKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKHN0YXRlID09PSAwIC8qIFRva2VuaXplclN0YXRlLlN0YXRpYyAqLykge1xyXG4gICAgICAgICAgICBzZWdtZW50LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBUb2tlblR5cGUuU3RhdGljICovLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGJ1ZmZlcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovIHx8XHJcbiAgICAgICAgICAgIHN0YXRlID09PSAyIC8qIFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwICovIHx8XHJcbiAgICAgICAgICAgIHN0YXRlID09PSAzIC8qIFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwRW5kICovKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA+IDEgJiYgKGNoYXIgPT09ICcqJyB8fCBjaGFyID09PSAnKycpKVxyXG4gICAgICAgICAgICAgICAgY3Jhc2goYEEgcmVwZWF0YWJsZSBwYXJhbSAoJHtidWZmZXJ9KSBtdXN0IGJlIGFsb25lIGluIGl0cyBzZWdtZW50LiBlZzogJy86aWRzKy5gKTtcclxuICAgICAgICAgICAgc2VnbWVudC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogVG9rZW5UeXBlLlBhcmFtICovLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGJ1ZmZlcixcclxuICAgICAgICAgICAgICAgIHJlZ2V4cDogY3VzdG9tUmUsXHJcbiAgICAgICAgICAgICAgICByZXBlYXRhYmxlOiBjaGFyID09PSAnKicgfHwgY2hhciA9PT0gJysnLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IGNoYXIgPT09ICcqJyB8fCBjaGFyID09PSAnPycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY3Jhc2goJ0ludmFsaWQgc3RhdGUgdG8gY29uc3VtZSBidWZmZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyID0gJyc7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBhZGRDaGFyVG9CdWZmZXIoKSB7XHJcbiAgICAgICAgYnVmZmVyICs9IGNoYXI7XHJcbiAgICB9XHJcbiAgICB3aGlsZSAoaSA8IHBhdGgubGVuZ3RoKSB7XHJcbiAgICAgICAgY2hhciA9IHBhdGhbaSsrXTtcclxuICAgICAgICBpZiAoY2hhciA9PT0gJ1xcXFwnICYmIHN0YXRlICE9PSAyIC8qIFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwICovKSB7XHJcbiAgICAgICAgICAgIHByZXZpb3VzU3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICAgICAgc3RhdGUgPSA0IC8qIFRva2VuaXplclN0YXRlLkVzY2FwZU5leHQgKi87XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMCAvKiBUb2tlbml6ZXJTdGF0ZS5TdGF0aWMgKi86XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJy8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdW1lQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsaXplU2VnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gJzonKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3VtZUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gMSAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbSAqLztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENoYXJUb0J1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNCAvKiBUb2tlbml6ZXJTdGF0ZS5Fc2NhcGVOZXh0ICovOlxyXG4gICAgICAgICAgICAgICAgYWRkQ2hhclRvQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHByZXZpb3VzU3RhdGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovOlxyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09ICcoJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gMiAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cCAqLztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFZBTElEX1BBUkFNX1JFLnRlc3QoY2hhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRDaGFyVG9CdWZmZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdvIGJhY2sgb25lIGNoYXJhY3RlciBpZiB3ZSB3ZXJlIG5vdCBtb2RpZnlpbmdcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhciAhPT0gJyonICYmIGNoYXIgIT09ICc/JyAmJiBjaGFyICE9PSAnKycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDIgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHAgKi86XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBpcyBpdCB3b3J0aCBoYW5kbGluZyBuZXN0ZWQgcmVnZXhwPyBsaWtlIDpwKD86cHJlZml4XyhbXi9dKylfc3VmZml4KVxyXG4gICAgICAgICAgICAgICAgLy8gaXQgYWxyZWFkeSB3b3JrcyBieSBlc2NhcGluZyB0aGUgY2xvc2luZyApXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3BhdGhzLmVzbS5kZXYvP3A9QUFNZUpiaUF3UUVjREtiQW9BQWtQNjBQRzJSNlFBdmdOYUE2QUZBQ00yQUJ1UUJCI1xyXG4gICAgICAgICAgICAgICAgLy8gaXMgdGhpcyByZWFsbHkgc29tZXRoaW5nIHBlb3BsZSBuZWVkIHNpbmNlIHlvdSBjYW4gYWxzbyB3cml0ZVxyXG4gICAgICAgICAgICAgICAgLy8gL3ByZWZpeF86cCgpX3N1ZmZpeFxyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09ICcpJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgZXNjYXBlZCApXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbVJlW2N1c3RvbVJlLmxlbmd0aCAtIDFdID09ICdcXFxcJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tUmUgPSBjdXN0b21SZS5zbGljZSgwLCAtMSkgKyBjaGFyO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAzIC8qIFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwRW5kICovO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tUmUgKz0gY2hhcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDMgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQgKi86XHJcbiAgICAgICAgICAgICAgICAvLyBzYW1lIGFzIGZpbmFsaXppbmcgYSBwYXJhbVxyXG4gICAgICAgICAgICAgICAgY29uc3VtZUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSAwIC8qIFRva2VuaXplclN0YXRlLlN0YXRpYyAqLztcclxuICAgICAgICAgICAgICAgIC8vIGdvIGJhY2sgb25lIGNoYXJhY3RlciBpZiB3ZSB3ZXJlIG5vdCBtb2RpZnlpbmdcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyICE9PSAnKicgJiYgY2hhciAhPT0gJz8nICYmIGNoYXIgIT09ICcrJylcclxuICAgICAgICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgICAgICBjdXN0b21SZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjcmFzaCgnVW5rbm93biBzdGF0ZScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHN0YXRlID09PSAyIC8qIFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwICovKVxyXG4gICAgICAgIGNyYXNoKGBVbmZpbmlzaGVkIGN1c3RvbSBSZWdFeHAgZm9yIHBhcmFtIFwiJHtidWZmZXJ9XCJgKTtcclxuICAgIGNvbnN1bWVCdWZmZXIoKTtcclxuICAgIGZpbmFsaXplU2VnbWVudCgpO1xyXG4gICAgLy8gdG9rZW5DYWNoZS5zZXQocGF0aCwgdG9rZW5zKVxyXG4gICAgcmV0dXJuIHRva2VucztcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZVJlY29yZE1hdGNoZXIocmVjb3JkLCBwYXJlbnQsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHBhcnNlciA9IHRva2Vuc1RvUGFyc2VyKHRva2VuaXplUGF0aChyZWNvcmQucGF0aCksIG9wdGlvbnMpO1xyXG4gICAgLy8gd2FybiBhZ2FpbnN0IHBhcmFtcyB3aXRoIHRoZSBzYW1lIG5hbWVcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0tleXMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcGFyc2VyLmtleXMpIHtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nS2V5cy5oYXMoa2V5Lm5hbWUpKVxyXG4gICAgICAgICAgICAgICAgd2FybihgRm91bmQgZHVwbGljYXRlZCBwYXJhbXMgd2l0aCBuYW1lIFwiJHtrZXkubmFtZX1cIiBmb3IgcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIuIE9ubHkgdGhlIGxhc3Qgb25lIHdpbGwgYmUgYXZhaWxhYmxlIG9uIFwiJHJvdXRlLnBhcmFtc1wiLmApO1xyXG4gICAgICAgICAgICBleGlzdGluZ0tleXMuYWRkKGtleS5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBtYXRjaGVyID0gYXNzaWduKHBhcnNlciwge1xyXG4gICAgICAgIHJlY29yZCxcclxuICAgICAgICBwYXJlbnQsXHJcbiAgICAgICAgLy8gdGhlc2UgbmVlZHMgdG8gYmUgcG9wdWxhdGVkIGJ5IHRoZSBwYXJlbnRcclxuICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgYWxpYXM6IFtdLFxyXG4gICAgfSk7XHJcbiAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgLy8gYm90aCBhcmUgYWxpYXNlcyBvciBib3RoIGFyZSBub3QgYWxpYXNlc1xyXG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gbWl4IHRoZW0gYmVjYXVzZSB0aGUgb3JkZXIgaXMgdXNlZCB3aGVuXHJcbiAgICAgICAgLy8gcGFzc2luZyBvcmlnaW5hbFJlY29yZCBpbiBNYXRjaGVyLmFkZFJvdXRlXHJcbiAgICAgICAgaWYgKCFtYXRjaGVyLnJlY29yZC5hbGlhc09mID09PSAhcGFyZW50LnJlY29yZC5hbGlhc09mKVxyXG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChtYXRjaGVyKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtYXRjaGVyO1xyXG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgUm91dGVyIE1hdGNoZXIuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKiBAcGFyYW0gcm91dGVzIC0gYXJyYXkgb2YgaW5pdGlhbCByb3V0ZXNcclxuICogQHBhcmFtIGdsb2JhbE9wdGlvbnMgLSBnbG9iYWwgcm91dGUgb3B0aW9uc1xyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUm91dGVyTWF0Y2hlcihyb3V0ZXMsIGdsb2JhbE9wdGlvbnMpIHtcclxuICAgIC8vIG5vcm1hbGl6ZWQgb3JkZXJlZCBhcnJheSBvZiBtYXRjaGVyc1xyXG4gICAgY29uc3QgbWF0Y2hlcnMgPSBbXTtcclxuICAgIGNvbnN0IG1hdGNoZXJNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICBnbG9iYWxPcHRpb25zID0gbWVyZ2VPcHRpb25zKHsgc3RyaWN0OiBmYWxzZSwgZW5kOiB0cnVlLCBzZW5zaXRpdmU6IGZhbHNlIH0sIGdsb2JhbE9wdGlvbnMpO1xyXG4gICAgZnVuY3Rpb24gZ2V0UmVjb3JkTWF0Y2hlcihuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXJNYXAuZ2V0KG5hbWUpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWRkUm91dGUocmVjb3JkLCBwYXJlbnQsIG9yaWdpbmFsUmVjb3JkKSB7XHJcbiAgICAgICAgLy8gdXNlZCBsYXRlciBvbiB0byByZW1vdmUgYnkgbmFtZVxyXG4gICAgICAgIGNvbnN0IGlzUm9vdEFkZCA9ICFvcmlnaW5hbFJlY29yZDtcclxuICAgICAgICBjb25zdCBtYWluTm9ybWFsaXplZFJlY29yZCA9IG5vcm1hbGl6ZVJvdXRlUmVjb3JkKHJlY29yZCk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBjaGVja0NoaWxkTWlzc2luZ05hbWVXaXRoRW1wdHlQYXRoKG1haW5Ob3JtYWxpemVkUmVjb3JkLCBwYXJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB3ZSBtaWdodCBiZSB0aGUgY2hpbGQgb2YgYW4gYWxpYXNcclxuICAgICAgICBtYWluTm9ybWFsaXplZFJlY29yZC5hbGlhc09mID0gb3JpZ2luYWxSZWNvcmQgJiYgb3JpZ2luYWxSZWNvcmQucmVjb3JkO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoZ2xvYmFsT3B0aW9ucywgcmVjb3JkKTtcclxuICAgICAgICAvLyBnZW5lcmF0ZSBhbiBhcnJheSBvZiByZWNvcmRzIHRvIGNvcnJlY3RseSBoYW5kbGUgYWxpYXNlc1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRSZWNvcmRzID0gW1xyXG4gICAgICAgICAgICBtYWluTm9ybWFsaXplZFJlY29yZCxcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmICgnYWxpYXMnIGluIHJlY29yZCkge1xyXG4gICAgICAgICAgICBjb25zdCBhbGlhc2VzID0gdHlwZW9mIHJlY29yZC5hbGlhcyA9PT0gJ3N0cmluZycgPyBbcmVjb3JkLmFsaWFzXSA6IHJlY29yZC5hbGlhcztcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhbGlhcyBvZiBhbGlhc2VzKSB7XHJcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkUmVjb3Jkcy5wdXNoKGFzc2lnbih7fSwgbWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGFsbG93cyB1cyB0byBob2xkIGEgY29weSBvZiB0aGUgYGNvbXBvbmVudHNgIG9wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvIHRoYXQgYXN5bmMgY29tcG9uZW50cyBjYWNoZSBpcyBob2xkIG9uIHRoZSBvcmlnaW5hbCByZWNvcmRcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBvcmlnaW5hbFJlY29yZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9yaWdpbmFsUmVjb3JkLnJlY29yZC5jb21wb25lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbk5vcm1hbGl6ZWRSZWNvcmQuY29tcG9uZW50cyxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBhbGlhcyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBtaWdodCBiZSB0aGUgY2hpbGQgb2YgYW4gYWxpYXNcclxuICAgICAgICAgICAgICAgICAgICBhbGlhc09mOiBvcmlnaW5hbFJlY29yZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9yaWdpbmFsUmVjb3JkLnJlY29yZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5Ob3JtYWxpemVkUmVjb3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhbGlhc2VzIGFyZSBhbHdheXMgb2YgdGhlIHNhbWUga2luZCBhcyB0aGUgb3JpZ2luYWwgc2luY2UgdGhleVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFyZSBkZWZpbmVkIG9uIHRoZSBzYW1lIHJlY29yZFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtYXRjaGVyO1xyXG4gICAgICAgIGxldCBvcmlnaW5hbE1hdGNoZXI7XHJcbiAgICAgICAgZm9yIChjb25zdCBub3JtYWxpemVkUmVjb3JkIG9mIG5vcm1hbGl6ZWRSZWNvcmRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcGF0aCB9ID0gbm9ybWFsaXplZFJlY29yZDtcclxuICAgICAgICAgICAgLy8gQnVpbGQgdXAgdGhlIHBhdGggZm9yIG5lc3RlZCByb3V0ZXMgaWYgdGhlIGNoaWxkIGlzbid0IGFuIGFic29sdXRlXHJcbiAgICAgICAgICAgIC8vIHJvdXRlLiBPbmx5IGFkZCB0aGUgLyBkZWxpbWl0ZXIgaWYgdGhlIGNoaWxkIHBhdGggaXNuJ3QgZW1wdHkgYW5kIGlmIHRoZVxyXG4gICAgICAgICAgICAvLyBwYXJlbnQgcGF0aCBkb2Vzbid0IGhhdmUgYSB0cmFpbGluZyBzbGFzaFxyXG4gICAgICAgICAgICBpZiAocGFyZW50ICYmIHBhdGhbMF0gIT09ICcvJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhcmVudC5yZWNvcmQucGF0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RpbmdTbGFzaCA9IHBhcmVudFBhdGhbcGFyZW50UGF0aC5sZW5ndGggLSAxXSA9PT0gJy8nID8gJycgOiAnLyc7XHJcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkUmVjb3JkLnBhdGggPVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZWNvcmQucGF0aCArIChwYXRoICYmIGNvbm5lY3RpbmdTbGFzaCArIHBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbm9ybWFsaXplZFJlY29yZC5wYXRoID09PSAnKicpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2F0Y2ggYWxsIHJvdXRlcyAoXCIqXCIpIG11c3Qgbm93IGJlIGRlZmluZWQgdXNpbmcgYSBwYXJhbSB3aXRoIGEgY3VzdG9tIHJlZ2V4cC5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnU2VlIG1vcmUgYXQgaHR0cHM6Ly9uZXh0LnJvdXRlci52dWVqcy5vcmcvZ3VpZGUvbWlncmF0aW9uLyNyZW1vdmVkLXN0YXItb3ItY2F0Y2gtYWxsLXJvdXRlcy4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjcmVhdGUgdGhlIG9iamVjdCBiZWZvcmVoYW5kLCBzbyBpdCBjYW4gYmUgcGFzc2VkIHRvIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIG1hdGNoZXIgPSBjcmVhdGVSb3V0ZVJlY29yZE1hdGNoZXIobm9ybWFsaXplZFJlY29yZCwgcGFyZW50LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnQgJiYgcGF0aFswXSA9PT0gJy8nKVxyXG4gICAgICAgICAgICAgICAgY2hlY2tNaXNzaW5nUGFyYW1zSW5BYnNvbHV0ZVBhdGgobWF0Y2hlciwgcGFyZW50KTtcclxuICAgICAgICAgICAgLy8gaWYgd2UgYXJlIGFuIGFsaWFzIHdlIG11c3QgdGVsbCB0aGUgb3JpZ2luYWwgcmVjb3JkIHRoYXQgd2UgZXhpc3QsXHJcbiAgICAgICAgICAgIC8vIHNvIHdlIGNhbiBiZSByZW1vdmVkXHJcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbFJlY29yZCkge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxSZWNvcmQuYWxpYXMucHVzaChtYXRjaGVyKTtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGVja1NhbWVQYXJhbXMob3JpZ2luYWxSZWNvcmQsIG1hdGNoZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCB0aGUgZmlyc3QgcmVjb3JkIGlzIHRoZSBvcmlnaW5hbCBhbmQgb3RoZXJzIGFyZSBhbGlhc2VzXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbE1hdGNoZXIgPSBvcmlnaW5hbE1hdGNoZXIgfHwgbWF0Y2hlcjtcclxuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbE1hdGNoZXIgIT09IG1hdGNoZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYXRjaGVyLmFsaWFzLnB1c2gobWF0Y2hlcik7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIHJvdXRlIGlmIG5hbWVkIGFuZCBvbmx5IGZvciB0aGUgdG9wIHJlY29yZCAoYXZvaWQgaW4gbmVzdGVkIGNhbGxzKVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyB3b3JrcyBiZWNhdXNlIHRoZSBvcmlnaW5hbCByZWNvcmQgaXMgdGhlIGZpcnN0IG9uZVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUm9vdEFkZCAmJiByZWNvcmQubmFtZSAmJiAhaXNBbGlhc1JlY29yZChtYXRjaGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVSb3V0ZShyZWNvcmQubmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1haW5Ob3JtYWxpemVkUmVjb3JkLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IG1haW5Ob3JtYWxpemVkUmVjb3JkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFJvdXRlKGNoaWxkcmVuW2ldLCBtYXRjaGVyLCBvcmlnaW5hbFJlY29yZCAmJiBvcmlnaW5hbFJlY29yZC5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgd2FzIG5vIG9yaWdpbmFsIHJlY29yZCwgdGhlbiB0aGUgZmlyc3Qgb25lIHdhcyBub3QgYW4gYWxpYXMgYW5kIGFsbFxyXG4gICAgICAgICAgICAvLyBvdGhlciBhbGlhc2VzIChpZiBhbnkpIG5lZWQgdG8gcmVmZXJlbmNlIHRoaXMgcmVjb3JkIHdoZW4gYWRkaW5nIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIG9yaWdpbmFsUmVjb3JkID0gb3JpZ2luYWxSZWNvcmQgfHwgbWF0Y2hlcjtcclxuICAgICAgICAgICAgLy8gVE9ETzogYWRkIG5vcm1hbGl6ZWQgcmVjb3JkcyBmb3IgbW9yZSBmbGV4aWJpbGl0eVxyXG4gICAgICAgICAgICAvLyBpZiAocGFyZW50ICYmIGlzQWxpYXNSZWNvcmQob3JpZ2luYWxSZWNvcmQpKSB7XHJcbiAgICAgICAgICAgIC8vICAgcGFyZW50LmNoaWxkcmVuLnB1c2gob3JpZ2luYWxSZWNvcmQpXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gQXZvaWQgYWRkaW5nIGEgcmVjb3JkIHRoYXQgZG9lc24ndCBkaXNwbGF5IGFueXRoaW5nLiBUaGlzIGFsbG93cyBwYXNzaW5nIHRocm91Z2ggcmVjb3JkcyB3aXRob3V0IGEgY29tcG9uZW50IHRvXHJcbiAgICAgICAgICAgIC8vIG5vdCBiZSByZWFjaGVkIGFuZCBwYXNzIHRocm91Z2ggdGhlIGNhdGNoIGFsbCByb3V0ZVxyXG4gICAgICAgICAgICBpZiAoKG1hdGNoZXIucmVjb3JkLmNvbXBvbmVudHMgJiZcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1hdGNoZXIucmVjb3JkLmNvbXBvbmVudHMpLmxlbmd0aCkgfHxcclxuICAgICAgICAgICAgICAgIG1hdGNoZXIucmVjb3JkLm5hbWUgfHxcclxuICAgICAgICAgICAgICAgIG1hdGNoZXIucmVjb3JkLnJlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpbnNlcnRNYXRjaGVyKG1hdGNoZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbE1hdGNoZXJcclxuICAgICAgICAgICAgPyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSBvdGhlciBtYXRjaGVycyBhcmUgYWxpYXNlcywgdGhleSBzaG91bGQgYmUgcmVtb3ZlZCBieSB0aGUgb3JpZ2luYWwgbWF0Y2hlclxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlUm91dGUob3JpZ2luYWxNYXRjaGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA6IG5vb3A7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZW1vdmVSb3V0ZShtYXRjaGVyUmVmKSB7XHJcbiAgICAgICAgaWYgKGlzUm91dGVOYW1lKG1hdGNoZXJSZWYpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXIgPSBtYXRjaGVyTWFwLmdldChtYXRjaGVyUmVmKTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoZXIpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXJNYXAuZGVsZXRlKG1hdGNoZXJSZWYpO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlcnMuc3BsaWNlKG1hdGNoZXJzLmluZGV4T2YobWF0Y2hlciksIDEpO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlci5jaGlsZHJlbi5mb3JFYWNoKHJlbW92ZVJvdXRlKTtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXIuYWxpYXMuZm9yRWFjaChyZW1vdmVSb3V0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbWF0Y2hlcnMuaW5kZXhPZihtYXRjaGVyUmVmKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlclJlZi5yZWNvcmQubmFtZSlcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVyTWFwLmRlbGV0ZShtYXRjaGVyUmVmLnJlY29yZC5uYW1lKTtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXJSZWYuY2hpbGRyZW4uZm9yRWFjaChyZW1vdmVSb3V0ZSk7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVyUmVmLmFsaWFzLmZvckVhY2gocmVtb3ZlUm91dGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZ2V0Um91dGVzKCkge1xyXG4gICAgICAgIHJldHVybiBtYXRjaGVycztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGluc2VydE1hdGNoZXIobWF0Y2hlcikge1xyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICB3aGlsZSAoaSA8IG1hdGNoZXJzLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICBjb21wYXJlUGF0aFBhcnNlclNjb3JlKG1hdGNoZXIsIG1hdGNoZXJzW2ldKSA+PSAwICYmXHJcbiAgICAgICAgICAgIC8vIEFkZGluZyBjaGlsZHJlbiB3aXRoIGVtcHR5IHBhdGggc2hvdWxkIHN0aWxsIGFwcGVhciBiZWZvcmUgdGhlIHBhcmVudFxyXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy8xMTI0XHJcbiAgICAgICAgICAgIChtYXRjaGVyLnJlY29yZC5wYXRoICE9PSBtYXRjaGVyc1tpXS5yZWNvcmQucGF0aCB8fFxyXG4gICAgICAgICAgICAgICAgIWlzUmVjb3JkQ2hpbGRPZihtYXRjaGVyLCBtYXRjaGVyc1tpXSkpKVxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgbWF0Y2hlcnMuc3BsaWNlKGksIDAsIG1hdGNoZXIpO1xyXG4gICAgICAgIC8vIG9ubHkgYWRkIHRoZSBvcmlnaW5hbCByZWNvcmQgdG8gdGhlIG5hbWUgbWFwXHJcbiAgICAgICAgaWYgKG1hdGNoZXIucmVjb3JkLm5hbWUgJiYgIWlzQWxpYXNSZWNvcmQobWF0Y2hlcikpXHJcbiAgICAgICAgICAgIG1hdGNoZXJNYXAuc2V0KG1hdGNoZXIucmVjb3JkLm5hbWUsIG1hdGNoZXIpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVzb2x2ZShsb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKSB7XHJcbiAgICAgICAgbGV0IG1hdGNoZXI7XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHt9O1xyXG4gICAgICAgIGxldCBwYXRoO1xyXG4gICAgICAgIGxldCBuYW1lO1xyXG4gICAgICAgIGlmICgnbmFtZScgaW4gbG9jYXRpb24gJiYgbG9jYXRpb24ubmFtZSkge1xyXG4gICAgICAgICAgICBtYXRjaGVyID0gbWF0Y2hlck1hcC5nZXQobG9jYXRpb24ubmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghbWF0Y2hlcilcclxuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZVJvdXRlckVycm9yKDEgLyogRXJyb3JUeXBlcy5NQVRDSEVSX05PVF9GT1VORCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHdhcm4gaWYgdGhlIHVzZXIgaXMgcGFzc2luZyBpbnZhbGlkIHBhcmFtcyBzbyB0aGV5IGNhbiBkZWJ1ZyBpdCBiZXR0ZXIgd2hlbiB0aGV5IGdldCByZW1vdmVkXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRQYXJhbXMgPSBPYmplY3Qua2V5cyhsb2NhdGlvbi5wYXJhbXMgfHwge30pLmZpbHRlcihwYXJhbU5hbWUgPT4gIW1hdGNoZXIua2V5cy5maW5kKGsgPT4gay5uYW1lID09PSBwYXJhbU5hbWUpKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbnZhbGlkUGFyYW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYERpc2NhcmRlZCBpbnZhbGlkIHBhcmFtKHMpIFwiJHtpbnZhbGlkUGFyYW1zLmpvaW4oJ1wiLCBcIicpfVwiIHdoZW4gbmF2aWdhdGluZy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvYmxvYi9tYWluL3BhY2thZ2VzL3JvdXRlci9DSEFOR0VMT0cubWQjNDE0LTIwMjItMDgtMjIgZm9yIG1vcmUgZGV0YWlscy5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuYW1lID0gbWF0Y2hlci5yZWNvcmQubmFtZTtcclxuICAgICAgICAgICAgcGFyYW1zID0gYXNzaWduKFxyXG4gICAgICAgICAgICAvLyBwYXJhbXNGcm9tTG9jYXRpb24gaXMgYSBuZXcgb2JqZWN0XHJcbiAgICAgICAgICAgIHBhcmFtc0Zyb21Mb2NhdGlvbihjdXJyZW50TG9jYXRpb24ucGFyYW1zLCBcclxuICAgICAgICAgICAgLy8gb25seSBrZWVwIHBhcmFtcyB0aGF0IGV4aXN0IGluIHRoZSByZXNvbHZlZCBsb2NhdGlvblxyXG4gICAgICAgICAgICAvLyBUT0RPOiBvbmx5IGtlZXAgb3B0aW9uYWwgcGFyYW1zIGNvbWluZyBmcm9tIGEgcGFyZW50IHJlY29yZFxyXG4gICAgICAgICAgICBtYXRjaGVyLmtleXMuZmlsdGVyKGsgPT4gIWsub3B0aW9uYWwpLm1hcChrID0+IGsubmFtZSkpLCBcclxuICAgICAgICAgICAgLy8gZGlzY2FyZCBhbnkgZXhpc3RpbmcgcGFyYW1zIGluIHRoZSBjdXJyZW50IGxvY2F0aW9uIHRoYXQgZG8gbm90IGV4aXN0IGhlcmVcclxuICAgICAgICAgICAgLy8gIzE0OTcgdGhpcyBlbnN1cmVzIGJldHRlciBhY3RpdmUvZXhhY3QgbWF0Y2hpbmdcclxuICAgICAgICAgICAgbG9jYXRpb24ucGFyYW1zICYmXHJcbiAgICAgICAgICAgICAgICBwYXJhbXNGcm9tTG9jYXRpb24obG9jYXRpb24ucGFyYW1zLCBtYXRjaGVyLmtleXMubWFwKGsgPT4gay5uYW1lKSkpO1xyXG4gICAgICAgICAgICAvLyB0aHJvd3MgaWYgY2Fubm90IGJlIHN0cmluZ2lmaWVkXHJcbiAgICAgICAgICAgIHBhdGggPSBtYXRjaGVyLnN0cmluZ2lmeShwYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgncGF0aCcgaW4gbG9jYXRpb24pIHtcclxuICAgICAgICAgICAgLy8gbm8gbmVlZCB0byByZXNvbHZlIHRoZSBwYXRoIHdpdGggdGhlIG1hdGNoZXIgYXMgaXQgd2FzIHByb3ZpZGVkXHJcbiAgICAgICAgICAgIC8vIHRoaXMgYWxzbyBhbGxvd3MgdGhlIHVzZXIgdG8gY29udHJvbCB0aGUgZW5jb2RpbmdcclxuICAgICAgICAgICAgcGF0aCA9IGxvY2F0aW9uLnBhdGg7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXBhdGguc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKGBUaGUgTWF0Y2hlciBjYW5ub3QgcmVzb2x2ZSByZWxhdGl2ZSBwYXRocyBidXQgcmVjZWl2ZWQgXCIke3BhdGh9XCIuIFVubGVzcyB5b3UgZGlyZWN0bHkgY2FsbGVkIFxcYG1hdGNoZXIucmVzb2x2ZShcIiR7cGF0aH1cIilcXGAsIHRoaXMgaXMgcHJvYmFibHkgYSBidWcgaW4gdnVlLXJvdXRlci4gUGxlYXNlIG9wZW4gYW4gaXNzdWUgYXQgaHR0cHM6Ly9uZXctaXNzdWUudnVlanMub3JnLz9yZXBvPXZ1ZWpzL3JvdXRlci5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXRjaGVyID0gbWF0Y2hlcnMuZmluZChtID0+IG0ucmUudGVzdChwYXRoKSk7XHJcbiAgICAgICAgICAgIC8vIG1hdGNoZXIgc2hvdWxkIGhhdmUgYSB2YWx1ZSBhZnRlciB0aGUgbG9vcFxyXG4gICAgICAgICAgICBpZiAobWF0Y2hlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gd2Uga25vdyB0aGUgbWF0Y2hlciB3b3JrcyBiZWNhdXNlIHdlIHRlc3RlZCB0aGUgcmVnZXhwXHJcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBtYXRjaGVyLnBhcnNlKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbG9jYXRpb24gaXMgYSByZWxhdGl2ZSBwYXRoXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBtYXRjaCBieSBuYW1lIG9yIHBhdGggb2YgY3VycmVudCByb3V0ZVxyXG4gICAgICAgICAgICBtYXRjaGVyID0gY3VycmVudExvY2F0aW9uLm5hbWVcclxuICAgICAgICAgICAgICAgID8gbWF0Y2hlck1hcC5nZXQoY3VycmVudExvY2F0aW9uLm5hbWUpXHJcbiAgICAgICAgICAgICAgICA6IG1hdGNoZXJzLmZpbmQobSA9PiBtLnJlLnRlc3QoY3VycmVudExvY2F0aW9uLnBhdGgpKTtcclxuICAgICAgICAgICAgaWYgKCFtYXRjaGVyKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlUm91dGVyRXJyb3IoMSAvKiBFcnJvclR5cGVzLk1BVENIRVJfTk9UX0ZPVU5EICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5hbWUgPSBtYXRjaGVyLnJlY29yZC5uYW1lO1xyXG4gICAgICAgICAgICAvLyBzaW5jZSB3ZSBhcmUgbmF2aWdhdGluZyB0byB0aGUgc2FtZSBsb2NhdGlvbiwgd2UgZG9uJ3QgbmVlZCB0byBwaWNrIHRoZVxyXG4gICAgICAgICAgICAvLyBwYXJhbXMgbGlrZSB3aGVuIGBuYW1lYCBpcyBwcm92aWRlZFxyXG4gICAgICAgICAgICBwYXJhbXMgPSBhc3NpZ24oe30sIGN1cnJlbnRMb2NhdGlvbi5wYXJhbXMsIGxvY2F0aW9uLnBhcmFtcyk7XHJcbiAgICAgICAgICAgIHBhdGggPSBtYXRjaGVyLnN0cmluZ2lmeShwYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtYXRjaGVkID0gW107XHJcbiAgICAgICAgbGV0IHBhcmVudE1hdGNoZXIgPSBtYXRjaGVyO1xyXG4gICAgICAgIHdoaWxlIChwYXJlbnRNYXRjaGVyKSB7XHJcbiAgICAgICAgICAgIC8vIHJldmVyc2VkIG9yZGVyIHNvIHBhcmVudHMgYXJlIGF0IHRoZSBiZWdpbm5pbmdcclxuICAgICAgICAgICAgbWF0Y2hlZC51bnNoaWZ0KHBhcmVudE1hdGNoZXIucmVjb3JkKTtcclxuICAgICAgICAgICAgcGFyZW50TWF0Y2hlciA9IHBhcmVudE1hdGNoZXIucGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICBwYXJhbXMsXHJcbiAgICAgICAgICAgIG1hdGNoZWQsXHJcbiAgICAgICAgICAgIG1ldGE6IG1lcmdlTWV0YUZpZWxkcyhtYXRjaGVkKSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8gYWRkIGluaXRpYWwgcm91dGVzXHJcbiAgICByb3V0ZXMuZm9yRWFjaChyb3V0ZSA9PiBhZGRSb3V0ZShyb3V0ZSkpO1xyXG4gICAgcmV0dXJuIHsgYWRkUm91dGUsIHJlc29sdmUsIHJlbW92ZVJvdXRlLCBnZXRSb3V0ZXMsIGdldFJlY29yZE1hdGNoZXIgfTtcclxufVxyXG5mdW5jdGlvbiBwYXJhbXNGcm9tTG9jYXRpb24ocGFyYW1zLCBrZXlzKSB7XHJcbiAgICBjb25zdCBuZXdQYXJhbXMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcclxuICAgICAgICBpZiAoa2V5IGluIHBhcmFtcylcclxuICAgICAgICAgICAgbmV3UGFyYW1zW2tleV0gPSBwYXJhbXNba2V5XTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXdQYXJhbXM7XHJcbn1cclxuLyoqXHJcbiAqIE5vcm1hbGl6ZXMgYSBSb3V0ZVJlY29yZFJhdy4gQ3JlYXRlcyBhIGNvcHlcclxuICpcclxuICogQHBhcmFtIHJlY29yZFxyXG4gKiBAcmV0dXJucyB0aGUgbm9ybWFsaXplZCB2ZXJzaW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBub3JtYWxpemVSb3V0ZVJlY29yZChyZWNvcmQpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcGF0aDogcmVjb3JkLnBhdGgsXHJcbiAgICAgICAgcmVkaXJlY3Q6IHJlY29yZC5yZWRpcmVjdCxcclxuICAgICAgICBuYW1lOiByZWNvcmQubmFtZSxcclxuICAgICAgICBtZXRhOiByZWNvcmQubWV0YSB8fCB7fSxcclxuICAgICAgICBhbGlhc09mOiB1bmRlZmluZWQsXHJcbiAgICAgICAgYmVmb3JlRW50ZXI6IHJlY29yZC5iZWZvcmVFbnRlcixcclxuICAgICAgICBwcm9wczogbm9ybWFsaXplUmVjb3JkUHJvcHMocmVjb3JkKSxcclxuICAgICAgICBjaGlsZHJlbjogcmVjb3JkLmNoaWxkcmVuIHx8IFtdLFxyXG4gICAgICAgIGluc3RhbmNlczoge30sXHJcbiAgICAgICAgbGVhdmVHdWFyZHM6IG5ldyBTZXQoKSxcclxuICAgICAgICB1cGRhdGVHdWFyZHM6IG5ldyBTZXQoKSxcclxuICAgICAgICBlbnRlckNhbGxiYWNrczoge30sXHJcbiAgICAgICAgY29tcG9uZW50czogJ2NvbXBvbmVudHMnIGluIHJlY29yZFxyXG4gICAgICAgICAgICA/IHJlY29yZC5jb21wb25lbnRzIHx8IG51bGxcclxuICAgICAgICAgICAgOiByZWNvcmQuY29tcG9uZW50ICYmIHsgZGVmYXVsdDogcmVjb3JkLmNvbXBvbmVudCB9LFxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogTm9ybWFsaXplIHRoZSBvcHRpb25hbCBgcHJvcHNgIGluIGEgcmVjb3JkIHRvIGFsd2F5cyBiZSBhbiBvYmplY3Qgc2ltaWxhciB0b1xyXG4gKiBjb21wb25lbnRzLiBBbHNvIGFjY2VwdCBhIGJvb2xlYW4gZm9yIGNvbXBvbmVudHMuXHJcbiAqIEBwYXJhbSByZWNvcmRcclxuICovXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVJlY29yZFByb3BzKHJlY29yZCkge1xyXG4gICAgY29uc3QgcHJvcHNPYmplY3QgPSB7fTtcclxuICAgIC8vIHByb3BzIGRvZXMgbm90IGV4aXN0IG9uIHJlZGlyZWN0IHJlY29yZHMsIGJ1dCB3ZSBjYW4gc2V0IGZhbHNlIGRpcmVjdGx5XHJcbiAgICBjb25zdCBwcm9wcyA9IHJlY29yZC5wcm9wcyB8fCBmYWxzZTtcclxuICAgIGlmICgnY29tcG9uZW50JyBpbiByZWNvcmQpIHtcclxuICAgICAgICBwcm9wc09iamVjdC5kZWZhdWx0ID0gcHJvcHM7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBOT1RFOiB3ZSBjb3VsZCBhbHNvIGFsbG93IGEgZnVuY3Rpb24gdG8gYmUgYXBwbGllZCB0byBldmVyeSBjb21wb25lbnQuXHJcbiAgICAgICAgLy8gV291bGQgbmVlZCB1c2VyIGZlZWRiYWNrIGZvciB1c2UgY2FzZXNcclxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gcmVjb3JkLmNvbXBvbmVudHMpXHJcbiAgICAgICAgICAgIHByb3BzT2JqZWN0W25hbWVdID0gdHlwZW9mIHByb3BzID09PSAnYm9vbGVhbicgPyBwcm9wcyA6IHByb3BzW25hbWVdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb3BzT2JqZWN0O1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYSByZWNvcmQgb3IgYW55IG9mIGl0cyBwYXJlbnQgaXMgYW4gYWxpYXNcclxuICogQHBhcmFtIHJlY29yZFxyXG4gKi9cclxuZnVuY3Rpb24gaXNBbGlhc1JlY29yZChyZWNvcmQpIHtcclxuICAgIHdoaWxlIChyZWNvcmQpIHtcclxuICAgICAgICBpZiAocmVjb3JkLnJlY29yZC5hbGlhc09mKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICByZWNvcmQgPSByZWNvcmQucGFyZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbi8qKlxyXG4gKiBNZXJnZSBtZXRhIGZpZWxkcyBvZiBhbiBhcnJheSBvZiByZWNvcmRzXHJcbiAqXHJcbiAqIEBwYXJhbSBtYXRjaGVkIC0gYXJyYXkgb2YgbWF0Y2hlZCByZWNvcmRzXHJcbiAqL1xyXG5mdW5jdGlvbiBtZXJnZU1ldGFGaWVsZHMobWF0Y2hlZCkge1xyXG4gICAgcmV0dXJuIG1hdGNoZWQucmVkdWNlKChtZXRhLCByZWNvcmQpID0+IGFzc2lnbihtZXRhLCByZWNvcmQubWV0YSksIHt9KTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMoZGVmYXVsdHMsIHBhcnRpYWxPcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkZWZhdWx0cykge1xyXG4gICAgICAgIG9wdGlvbnNba2V5XSA9IGtleSBpbiBwYXJ0aWFsT3B0aW9ucyA/IHBhcnRpYWxPcHRpb25zW2tleV0gOiBkZWZhdWx0c1trZXldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbn1cclxuZnVuY3Rpb24gaXNTYW1lUGFyYW0oYSwgYikge1xyXG4gICAgcmV0dXJuIChhLm5hbWUgPT09IGIubmFtZSAmJlxyXG4gICAgICAgIGEub3B0aW9uYWwgPT09IGIub3B0aW9uYWwgJiZcclxuICAgICAgICBhLnJlcGVhdGFibGUgPT09IGIucmVwZWF0YWJsZSk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgcGF0aCBhbmQgaXRzIGFsaWFzIGhhdmUgdGhlIHNhbWUgcmVxdWlyZWQgcGFyYW1zXHJcbiAqXHJcbiAqIEBwYXJhbSBhIC0gb3JpZ2luYWwgcmVjb3JkXHJcbiAqIEBwYXJhbSBiIC0gYWxpYXMgcmVjb3JkXHJcbiAqL1xyXG5mdW5jdGlvbiBjaGVja1NhbWVQYXJhbXMoYSwgYikge1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgYS5rZXlzKSB7XHJcbiAgICAgICAgaWYgKCFrZXkub3B0aW9uYWwgJiYgIWIua2V5cy5maW5kKGlzU2FtZVBhcmFtLmJpbmQobnVsbCwga2V5KSkpXHJcbiAgICAgICAgICAgIHJldHVybiB3YXJuKGBBbGlhcyBcIiR7Yi5yZWNvcmQucGF0aH1cIiBhbmQgdGhlIG9yaWdpbmFsIHJlY29yZDogXCIke2EucmVjb3JkLnBhdGh9XCIgbXVzdCBoYXZlIHRoZSBleGFjdCBzYW1lIHBhcmFtIG5hbWVkIFwiJHtrZXkubmFtZX1cImApO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgYi5rZXlzKSB7XHJcbiAgICAgICAgaWYgKCFrZXkub3B0aW9uYWwgJiYgIWEua2V5cy5maW5kKGlzU2FtZVBhcmFtLmJpbmQobnVsbCwga2V5KSkpXHJcbiAgICAgICAgICAgIHJldHVybiB3YXJuKGBBbGlhcyBcIiR7Yi5yZWNvcmQucGF0aH1cIiBhbmQgdGhlIG9yaWdpbmFsIHJlY29yZDogXCIke2EucmVjb3JkLnBhdGh9XCIgbXVzdCBoYXZlIHRoZSBleGFjdCBzYW1lIHBhcmFtIG5hbWVkIFwiJHtrZXkubmFtZX1cImApO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBIHJvdXRlIHdpdGggYSBuYW1lIGFuZCBhIGNoaWxkIHdpdGggYW4gZW1wdHkgcGF0aCB3aXRob3V0IGEgbmFtZSBzaG91bGQgd2FybiB3aGVuIGFkZGluZyB0aGUgcm91dGVcclxuICpcclxuICogQHBhcmFtIG1haW5Ob3JtYWxpemVkUmVjb3JkIC0gUm91dGVSZWNvcmROb3JtYWxpemVkXHJcbiAqIEBwYXJhbSBwYXJlbnQgLSBSb3V0ZVJlY29yZE1hdGNoZXJcclxuICovXHJcbmZ1bmN0aW9uIGNoZWNrQ2hpbGRNaXNzaW5nTmFtZVdpdGhFbXB0eVBhdGgobWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHBhcmVudCkge1xyXG4gICAgaWYgKHBhcmVudCAmJlxyXG4gICAgICAgIHBhcmVudC5yZWNvcmQubmFtZSAmJlxyXG4gICAgICAgICFtYWluTm9ybWFsaXplZFJlY29yZC5uYW1lICYmXHJcbiAgICAgICAgIW1haW5Ob3JtYWxpemVkUmVjb3JkLnBhdGgpIHtcclxuICAgICAgICB3YXJuKGBUaGUgcm91dGUgbmFtZWQgXCIke1N0cmluZyhwYXJlbnQucmVjb3JkLm5hbWUpfVwiIGhhcyBhIGNoaWxkIHdpdGhvdXQgYSBuYW1lIGFuZCBhbiBlbXB0eSBwYXRoLiBVc2luZyB0aGF0IG5hbWUgd29uJ3QgcmVuZGVyIHRoZSBlbXB0eSBwYXRoIGNoaWxkIHNvIHlvdSBwcm9iYWJseSB3YW50IHRvIG1vdmUgdGhlIG5hbWUgdG8gdGhlIGNoaWxkIGluc3RlYWQuIElmIHRoaXMgaXMgaW50ZW50aW9uYWwsIGFkZCBhIG5hbWUgdG8gdGhlIGNoaWxkIHJvdXRlIHRvIHJlbW92ZSB0aGUgd2FybmluZy5gKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjaGVja01pc3NpbmdQYXJhbXNJbkFic29sdXRlUGF0aChyZWNvcmQsIHBhcmVudCkge1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgcGFyZW50LmtleXMpIHtcclxuICAgICAgICBpZiAoIXJlY29yZC5rZXlzLmZpbmQoaXNTYW1lUGFyYW0uYmluZChudWxsLCBrZXkpKSlcclxuICAgICAgICAgICAgcmV0dXJuIHdhcm4oYEFic29sdXRlIHBhdGggXCIke3JlY29yZC5yZWNvcmQucGF0aH1cIiBtdXN0IGhhdmUgdGhlIGV4YWN0IHNhbWUgcGFyYW0gbmFtZWQgXCIke2tleS5uYW1lfVwiIGFzIGl0cyBwYXJlbnQgXCIke3BhcmVudC5yZWNvcmQucGF0aH1cIi5gKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1JlY29yZENoaWxkT2YocmVjb3JkLCBwYXJlbnQpIHtcclxuICAgIHJldHVybiBwYXJlbnQuY2hpbGRyZW4uc29tZShjaGlsZCA9PiBjaGlsZCA9PT0gcmVjb3JkIHx8IGlzUmVjb3JkQ2hpbGRPZihyZWNvcmQsIGNoaWxkKSk7XHJcbn1cblxuLyoqXHJcbiAqIEVuY29kaW5nIFJ1bGVzIOKQoyA9IFNwYWNlIFBhdGg6IOKQoyBcIiA8ID4gIyA/IHsgfSBRdWVyeTog4pCjIFwiIDwgPiAjICYgPSBIYXNoOiDikKMgXCJcclxuICogPCA+IGBcclxuICpcclxuICogT24gdG9wIG9mIHRoYXQsIHRoZSBSRkMzOTg2IChodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NiNzZWN0aW9uLTIuMilcclxuICogZGVmaW5lcyBzb21lIGV4dHJhIGNoYXJhY3RlcnMgdG8gYmUgZW5jb2RlZC4gTW9zdCBicm93c2VycyBkbyBub3QgZW5jb2RlIHRoZW1cclxuICogaW4gZW5jb2RlVVJJIGh0dHBzOi8vZ2l0aHViLmNvbS93aGF0d2cvdXJsL2lzc3Vlcy8zNjksIHNvIGl0IG1heSBiZSBzYWZlciB0b1xyXG4gKiBhbHNvIGVuY29kZSBgIScoKSpgLiBMZWF2aW5nIHVuLWVuY29kZWQgb25seSBBU0NJSSBhbHBoYW51bWVyaWMoYGEtekEtWjAtOWApXHJcbiAqIHBsdXMgYC0uX35gLiBUaGlzIGV4dHJhIHNhZmV0eSBzaG91bGQgYmUgYXBwbGllZCB0byBxdWVyeSBieSBwYXRjaGluZyB0aGVcclxuICogc3RyaW5nIHJldHVybmVkIGJ5IGVuY29kZVVSSUNvbXBvbmVudCBlbmNvZGVVUkkgYWxzbyBlbmNvZGVzIGBbXFxdXmAuIGBcXGBcclxuICogc2hvdWxkIGJlIGVuY29kZWQgdG8gYXZvaWQgYW1iaWd1aXR5LiBCcm93c2VycyAoSUUsIEZGLCBDKSB0cmFuc2Zvcm0gYSBgXFxgXHJcbiAqIGludG8gYSBgL2AgaWYgZGlyZWN0bHkgdHlwZWQgaW4uIFRoZSBfYmFja3RpY2tfIChgYGBgYCkgc2hvdWxkIGFsc28gYmVcclxuICogZW5jb2RlZCBldmVyeXdoZXJlIGJlY2F1c2Ugc29tZSBicm93c2VycyBsaWtlIEZGIGVuY29kZSBpdCB3aGVuIGRpcmVjdGx5XHJcbiAqIHdyaXR0ZW4gd2hpbGUgb3RoZXJzIGRvbid0LiBTYWZhcmkgYW5kIElFIGRvbid0IGVuY29kZSBgYFwiPD57fWBgYCBpbiBoYXNoLlxyXG4gKi9cclxuLy8gY29uc3QgRVhUUkFfUkVTRVJWRURfUkUgPSAvWyEnKCkqXS9nXHJcbi8vIGNvbnN0IGVuY29kZVJlc2VydmVkUmVwbGFjZXIgPSAoYzogc3RyaW5nKSA9PiAnJScgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpXHJcbmNvbnN0IEhBU0hfUkUgPSAvIy9nOyAvLyAlMjNcclxuY29uc3QgQU1QRVJTQU5EX1JFID0gLyYvZzsgLy8gJTI2XHJcbmNvbnN0IFNMQVNIX1JFID0gL1xcLy9nOyAvLyAlMkZcclxuY29uc3QgRVFVQUxfUkUgPSAvPS9nOyAvLyAlM0RcclxuY29uc3QgSU1fUkUgPSAvXFw/L2c7IC8vICUzRlxyXG5jb25zdCBQTFVTX1JFID0gL1xcKy9nOyAvLyAlMkJcclxuLyoqXHJcbiAqIE5PVEU6IEl0J3Mgbm90IGNsZWFyIHRvIG1lIGlmIHdlIHNob3VsZCBlbmNvZGUgdGhlICsgc3ltYm9sIGluIHF1ZXJpZXMsIGl0XHJcbiAqIHNlZW1zIHRvIGJlIGxlc3MgZmxleGlibGUgdGhhbiBub3QgZG9pbmcgc28gYW5kIEkgY2FuJ3QgZmluZCBvdXQgdGhlIGxlZ2FjeVxyXG4gKiBzeXN0ZW1zIHJlcXVpcmluZyB0aGlzIGZvciByZWd1bGFyIHJlcXVlc3RzIGxpa2UgdGV4dC9odG1sLiBJbiB0aGUgc3RhbmRhcmQsXHJcbiAqIHRoZSBlbmNvZGluZyBvZiB0aGUgcGx1cyBjaGFyYWN0ZXIgaXMgb25seSBtZW50aW9uZWQgZm9yXHJcbiAqIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFxyXG4gKiAoaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXBhcnNpbmcpIGFuZCBtb3N0IGJyb3dzZXJzIHNlZW1zIGxvXHJcbiAqIGxlYXZlIHRoZSBwbHVzIGNoYXJhY3RlciBhcyBpcyBpbiBxdWVyaWVzLiBUbyBiZSBtb3JlIGZsZXhpYmxlLCB3ZSBhbGxvdyB0aGVcclxuICogcGx1cyBjaGFyYWN0ZXIgb24gdGhlIHF1ZXJ5LCBidXQgaXQgY2FuIGFsc28gYmUgbWFudWFsbHkgZW5jb2RlZCBieSB0aGUgdXNlci5cclxuICpcclxuICogUmVzb3VyY2VzOlxyXG4gKiAtIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsZW5jb2RlZC1wYXJzaW5nXHJcbiAqIC0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYzNDI3MS91cmwtZW5jb2RpbmctdGhlLXNwYWNlLWNoYXJhY3Rlci1vci0yMFxyXG4gKi9cclxuY29uc3QgRU5DX0JSQUNLRVRfT1BFTl9SRSA9IC8lNUIvZzsgLy8gW1xyXG5jb25zdCBFTkNfQlJBQ0tFVF9DTE9TRV9SRSA9IC8lNUQvZzsgLy8gXVxyXG5jb25zdCBFTkNfQ0FSRVRfUkUgPSAvJTVFL2c7IC8vIF5cclxuY29uc3QgRU5DX0JBQ0tUSUNLX1JFID0gLyU2MC9nOyAvLyBgXHJcbmNvbnN0IEVOQ19DVVJMWV9PUEVOX1JFID0gLyU3Qi9nOyAvLyB7XHJcbmNvbnN0IEVOQ19QSVBFX1JFID0gLyU3Qy9nOyAvLyB8XHJcbmNvbnN0IEVOQ19DVVJMWV9DTE9TRV9SRSA9IC8lN0QvZzsgLy8gfVxyXG5jb25zdCBFTkNfU1BBQ0VfUkUgPSAvJTIwL2c7IC8vIH1cclxuLyoqXHJcbiAqIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIG9uIHRoZSBwYXRoLCBzZWFyY2ggYW5kIGhhc2hcclxuICogc2VjdGlvbnMgb2YgdGhlIFVSTC5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gY29tbW9uRW5jb2RlKHRleHQpIHtcclxuICAgIHJldHVybiBlbmNvZGVVUkkoJycgKyB0ZXh0KVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19QSVBFX1JFLCAnfCcpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX0JSQUNLRVRfT1BFTl9SRSwgJ1snKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19CUkFDS0VUX0NMT1NFX1JFLCAnXScpO1xyXG59XHJcbi8qKlxyXG4gKiBFbmNvZGUgY2hhcmFjdGVycyB0aGF0IG5lZWQgdG8gYmUgZW5jb2RlZCBvbiB0aGUgaGFzaCBzZWN0aW9uIG9mIHRoZSBVUkwuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlSGFzaCh0ZXh0KSB7XHJcbiAgICByZXR1cm4gY29tbW9uRW5jb2RlKHRleHQpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX0NVUkxZX09QRU5fUkUsICd7JylcclxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfQ0xPU0VfUkUsICd9JylcclxuICAgICAgICAucmVwbGFjZShFTkNfQ0FSRVRfUkUsICdeJyk7XHJcbn1cclxuLyoqXHJcbiAqIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIHF1ZXJ5IHZhbHVlcyBvbiB0aGUgcXVlcnlcclxuICogc2VjdGlvbiBvZiB0aGUgVVJMLlxyXG4gKlxyXG4gKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBlbmNvZGVcclxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGVuY29kZVF1ZXJ5VmFsdWUodGV4dCkge1xyXG4gICAgcmV0dXJuIChjb21tb25FbmNvZGUodGV4dClcclxuICAgICAgICAvLyBFbmNvZGUgdGhlIHNwYWNlIGFzICssIGVuY29kZSB0aGUgKyB0byBkaWZmZXJlbnRpYXRlIGl0IGZyb20gdGhlIHNwYWNlXHJcbiAgICAgICAgLnJlcGxhY2UoUExVU19SRSwgJyUyQicpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX1NQQUNFX1JFLCAnKycpXHJcbiAgICAgICAgLnJlcGxhY2UoSEFTSF9SRSwgJyUyMycpXHJcbiAgICAgICAgLnJlcGxhY2UoQU1QRVJTQU5EX1JFLCAnJTI2JylcclxuICAgICAgICAucmVwbGFjZShFTkNfQkFDS1RJQ0tfUkUsICdgJylcclxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfT1BFTl9SRSwgJ3snKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19DVVJMWV9DTE9TRV9SRSwgJ30nKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19DQVJFVF9SRSwgJ14nKSk7XHJcbn1cclxuLyoqXHJcbiAqIExpa2UgYGVuY29kZVF1ZXJ5VmFsdWVgIGJ1dCBhbHNvIGVuY29kZXMgdGhlIGA9YCBjaGFyYWN0ZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlUXVlcnlLZXkodGV4dCkge1xyXG4gICAgcmV0dXJuIGVuY29kZVF1ZXJ5VmFsdWUodGV4dCkucmVwbGFjZShFUVVBTF9SRSwgJyUzRCcpO1xyXG59XHJcbi8qKlxyXG4gKiBFbmNvZGUgY2hhcmFjdGVycyB0aGF0IG5lZWQgdG8gYmUgZW5jb2RlZCBvbiB0aGUgcGF0aCBzZWN0aW9uIG9mIHRoZSBVUkwuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlUGF0aCh0ZXh0KSB7XHJcbiAgICByZXR1cm4gY29tbW9uRW5jb2RlKHRleHQpLnJlcGxhY2UoSEFTSF9SRSwgJyUyMycpLnJlcGxhY2UoSU1fUkUsICclM0YnKTtcclxufVxyXG4vKipcclxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGggc2VjdGlvbiBvZiB0aGUgVVJMIGFzIGFcclxuICogcGFyYW0uIFRoaXMgZnVuY3Rpb24gZW5jb2RlcyBldmVyeXRoaW5nIHtAbGluayBlbmNvZGVQYXRofSBkb2VzIHBsdXMgdGhlXHJcbiAqIHNsYXNoIChgL2ApIGNoYXJhY3Rlci4gSWYgYHRleHRgIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBhbiBlbXB0eVxyXG4gKiBzdHJpbmcgaW5zdGVhZC5cclxuICpcclxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXHJcbiAqIEByZXR1cm5zIGVuY29kZWQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVQYXJhbSh0ZXh0KSB7XHJcbiAgICByZXR1cm4gdGV4dCA9PSBudWxsID8gJycgOiBlbmNvZGVQYXRoKHRleHQpLnJlcGxhY2UoU0xBU0hfUkUsICclMkYnKTtcclxufVxyXG4vKipcclxuICogRGVjb2RlIHRleHQgdXNpbmcgYGRlY29kZVVSSUNvbXBvbmVudGAuIFJldHVybnMgdGhlIG9yaWdpbmFsIHRleHQgaWYgaXRcclxuICogZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGRlY29kZVxyXG4gKiBAcmV0dXJucyBkZWNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZGVjb2RlKHRleHQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCgnJyArIHRleHQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBFcnJvciBkZWNvZGluZyBcIiR7dGV4dH1cIi4gVXNpbmcgb3JpZ2luYWwgdmFsdWVgKTtcclxuICAgIH1cclxuICAgIHJldHVybiAnJyArIHRleHQ7XHJcbn1cblxuLyoqXHJcbiAqIFRyYW5zZm9ybXMgYSBxdWVyeVN0cmluZyBpbnRvIGEge0BsaW5rIExvY2F0aW9uUXVlcnl9IG9iamVjdC4gQWNjZXB0IGJvdGgsIGFcclxuICogdmVyc2lvbiB3aXRoIHRoZSBsZWFkaW5nIGA/YCBhbmQgd2l0aG91dCBTaG91bGQgd29yayBhcyBVUkxTZWFyY2hQYXJhbXNcclxuXG4gKiBAaW50ZXJuYWxcclxuICpcclxuICogQHBhcmFtIHNlYXJjaCAtIHNlYXJjaCBzdHJpbmcgdG8gcGFyc2VcclxuICogQHJldHVybnMgYSBxdWVyeSBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlUXVlcnkoc2VhcmNoKSB7XHJcbiAgICBjb25zdCBxdWVyeSA9IHt9O1xyXG4gICAgLy8gYXZvaWQgY3JlYXRpbmcgYW4gb2JqZWN0IHdpdGggYW4gZW1wdHkga2V5IGFuZCBlbXB0eSB2YWx1ZVxyXG4gICAgLy8gYmVjYXVzZSBvZiBzcGxpdCgnJicpXHJcbiAgICBpZiAoc2VhcmNoID09PSAnJyB8fCBzZWFyY2ggPT09ICc/JylcclxuICAgICAgICByZXR1cm4gcXVlcnk7XHJcbiAgICBjb25zdCBoYXNMZWFkaW5nSU0gPSBzZWFyY2hbMF0gPT09ICc/JztcclxuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IChoYXNMZWFkaW5nSU0gPyBzZWFyY2guc2xpY2UoMSkgOiBzZWFyY2gpLnNwbGl0KCcmJyk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlYXJjaFBhcmFtcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIC8vIHByZSBkZWNvZGUgdGhlICsgaW50byBzcGFjZVxyXG4gICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtID0gc2VhcmNoUGFyYW1zW2ldLnJlcGxhY2UoUExVU19SRSwgJyAnKTtcclxuICAgICAgICAvLyBhbGxvdyB0aGUgPSBjaGFyYWN0ZXJcclxuICAgICAgICBjb25zdCBlcVBvcyA9IHNlYXJjaFBhcmFtLmluZGV4T2YoJz0nKTtcclxuICAgICAgICBjb25zdCBrZXkgPSBkZWNvZGUoZXFQb3MgPCAwID8gc2VhcmNoUGFyYW0gOiBzZWFyY2hQYXJhbS5zbGljZSgwLCBlcVBvcykpO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZXFQb3MgPCAwID8gbnVsbCA6IGRlY29kZShzZWFyY2hQYXJhbS5zbGljZShlcVBvcyArIDEpKTtcclxuICAgICAgICBpZiAoa2V5IGluIHF1ZXJ5KSB7XHJcbiAgICAgICAgICAgIC8vIGFuIGV4dHJhIHZhcmlhYmxlIGZvciB0cyB0eXBlc1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFZhbHVlID0gcXVlcnlba2V5XTtcclxuICAgICAgICAgICAgaWYgKCFpc0FycmF5KGN1cnJlbnRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IHF1ZXJ5W2tleV0gPSBbY3VycmVudFZhbHVlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50VmFsdWUucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBxdWVyeVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHF1ZXJ5O1xyXG59XHJcbi8qKlxyXG4gKiBTdHJpbmdpZmllcyBhIHtAbGluayBMb2NhdGlvblF1ZXJ5UmF3fSBvYmplY3QuIExpa2UgYFVSTFNlYXJjaFBhcmFtc2AsIGl0XHJcbiAqIGRvZXNuJ3QgcHJlcGVuZCBhIGA/YFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICpcclxuICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnkgb2JqZWN0IHRvIHN0cmluZ2lmeVxyXG4gKiBAcmV0dXJucyBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgcXVlcnkgd2l0aG91dCB0aGUgbGVhZGluZyBgP2BcclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5KSB7XHJcbiAgICBsZXQgc2VhcmNoID0gJyc7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gcXVlcnkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHF1ZXJ5W2tleV07XHJcbiAgICAgICAga2V5ID0gZW5jb2RlUXVlcnlLZXkoa2V5KTtcclxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBvbmx5IG51bGwgYWRkcyB0aGUgdmFsdWVcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHNlYXJjaCArPSAoc2VhcmNoLmxlbmd0aCA/ICcmJyA6ICcnKSArIGtleTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8ga2VlcCBudWxsIHZhbHVlc1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGlzQXJyYXkodmFsdWUpXHJcbiAgICAgICAgICAgID8gdmFsdWUubWFwKHYgPT4gdiAmJiBlbmNvZGVRdWVyeVZhbHVlKHYpKVxyXG4gICAgICAgICAgICA6IFt2YWx1ZSAmJiBlbmNvZGVRdWVyeVZhbHVlKHZhbHVlKV07XHJcbiAgICAgICAgdmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAvLyBza2lwIHVuZGVmaW5lZCB2YWx1ZXMgaW4gYXJyYXlzIGFzIGlmIHRoZXkgd2VyZSBub3QgcHJlc2VudFxyXG4gICAgICAgICAgICAvLyBzbWFsbGVyIGNvZGUgdGhhbiB1c2luZyBmaWx0ZXJcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIG9ubHkgYXBwZW5kICYgd2l0aCBub24tZW1wdHkgc2VhcmNoXHJcbiAgICAgICAgICAgICAgICBzZWFyY2ggKz0gKHNlYXJjaC5sZW5ndGggPyAnJicgOiAnJykgKyBrZXk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBzZWFyY2ggKz0gJz0nICsgdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZWFyY2g7XHJcbn1cclxuLyoqXHJcbiAqIFRyYW5zZm9ybXMgYSB7QGxpbmsgTG9jYXRpb25RdWVyeVJhd30gaW50byBhIHtAbGluayBMb2NhdGlvblF1ZXJ5fSBieSBjYXN0aW5nXHJcbiAqIG51bWJlcnMgaW50byBzdHJpbmdzLCByZW1vdmluZyBrZXlzIHdpdGggYW4gdW5kZWZpbmVkIHZhbHVlIGFuZCByZXBsYWNpbmdcclxuICogdW5kZWZpbmVkIHdpdGggbnVsbCBpbiBhcnJheXNcclxuICpcclxuICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnkgb2JqZWN0IHRvIG5vcm1hbGl6ZVxyXG4gKiBAcmV0dXJucyBhIG5vcm1hbGl6ZWQgcXVlcnkgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBub3JtYWxpemVRdWVyeShxdWVyeSkge1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZFF1ZXJ5ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBxdWVyeSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBub3JtYWxpemVkUXVlcnlba2V5XSA9IGlzQXJyYXkodmFsdWUpXHJcbiAgICAgICAgICAgICAgICA/IHZhbHVlLm1hcCh2ID0+ICh2ID09IG51bGwgPyBudWxsIDogJycgKyB2KSlcclxuICAgICAgICAgICAgICAgIDogdmFsdWUgPT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgID8gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICA6ICcnICsgdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRRdWVyeTtcclxufVxuXG4vKipcclxuICogUm91dGVSZWNvcmQgYmVpbmcgcmVuZGVyZWQgYnkgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgUm91dGVyIFZpZXcuIFVzZWQgZm9yXHJcbiAqIGBvbkJlZm9yZVJvdXRlVXBkYXRlYCBhbmQgYG9uQmVmb3JlUm91dGVMZWF2ZWAuIHJ2bG0gc3RhbmRzIGZvciBSb3V0ZXIgVmlld1xyXG4gKiBMb2NhdGlvbiBNYXRjaGVkXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgbWF0Y2hlZFJvdXRlS2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBsb2NhdGlvbiBtYXRjaGVkJyA6ICcnKTtcclxuLyoqXHJcbiAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSByb3V0ZXIgdmlldyBkZXB0aCB0byBjb250cm9sIHdoaWNoIGNvbXBvbmVudCBpblxyXG4gKiBgbWF0Y2hlZGAgaXMgcmVuZGVyZWQuIHJ2ZCBzdGFuZHMgZm9yIFJvdXRlciBWaWV3IERlcHRoXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3Qgdmlld0RlcHRoS2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBkZXB0aCcgOiAnJyk7XHJcbi8qKlxyXG4gKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgcm91dGVyIGluc3RhbmNlIHJldHVybmVkIGJ5IGB1c2VSb3V0ZXJgIGluIHRlc3RzLiByXHJcbiAqIHN0YW5kcyBmb3Igcm91dGVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3Qgcm91dGVyS2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXInIDogJycpO1xyXG4vKipcclxuICogQWxsb3dzIG92ZXJyaWRpbmcgdGhlIGN1cnJlbnQgcm91dGUgcmV0dXJuZWQgYnkgYHVzZVJvdXRlYCBpbiB0ZXN0cy4gcmxcclxuICogc3RhbmRzIGZvciByb3V0ZSBsb2NhdGlvblxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IHJvdXRlTG9jYXRpb25LZXkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ3JvdXRlIGxvY2F0aW9uJyA6ICcnKTtcclxuLyoqXHJcbiAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSBjdXJyZW50IHJvdXRlIHVzZWQgYnkgcm91dGVyLXZpZXcuIEludGVybmFsbHkgdGhpcyBpc1xyXG4gKiB1c2VkIHdoZW4gdGhlIGByb3V0ZWAgcHJvcCBpcyBwYXNzZWQuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3Qgcm91dGVyVmlld0xvY2F0aW9uS2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBsb2NhdGlvbicgOiAnJyk7XG5cbi8qKlxyXG4gKiBDcmVhdGUgYSBsaXN0IG9mIGNhbGxiYWNrcyB0aGF0IGNhbiBiZSByZXNldC4gVXNlZCB0byBjcmVhdGUgYmVmb3JlIGFuZCBhZnRlciBuYXZpZ2F0aW9uIGd1YXJkcyBsaXN0XHJcbiAqL1xyXG5mdW5jdGlvbiB1c2VDYWxsYmFja3MoKSB7XHJcbiAgICBsZXQgaGFuZGxlcnMgPSBbXTtcclxuICAgIGZ1bmN0aW9uIGFkZChoYW5kbGVyKSB7XHJcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcclxuICAgICAgICAgICAgaWYgKGkgPiAtMSlcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgICAgaGFuZGxlcnMgPSBbXTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWRkLFxyXG4gICAgICAgIGxpc3Q6ICgpID0+IGhhbmRsZXJzLFxyXG4gICAgICAgIHJlc2V0LFxyXG4gICAgfTtcclxufVxuXG5mdW5jdGlvbiByZWdpc3Rlckd1YXJkKHJlY29yZCwgbmFtZSwgZ3VhcmQpIHtcclxuICAgIGNvbnN0IHJlbW92ZUZyb21MaXN0ID0gKCkgPT4ge1xyXG4gICAgICAgIHJlY29yZFtuYW1lXS5kZWxldGUoZ3VhcmQpO1xyXG4gICAgfTtcclxuICAgIG9uVW5tb3VudGVkKHJlbW92ZUZyb21MaXN0KTtcclxuICAgIG9uRGVhY3RpdmF0ZWQocmVtb3ZlRnJvbUxpc3QpO1xyXG4gICAgb25BY3RpdmF0ZWQoKCkgPT4ge1xyXG4gICAgICAgIHJlY29yZFtuYW1lXS5hZGQoZ3VhcmQpO1xyXG4gICAgfSk7XHJcbiAgICByZWNvcmRbbmFtZV0uYWRkKGd1YXJkKTtcclxufVxyXG4vKipcclxuICogQWRkIGEgbmF2aWdhdGlvbiBndWFyZCB0aGF0IHRyaWdnZXJzIHdoZW5ldmVyIHRoZSBjb21wb25lbnQgZm9yIHRoZSBjdXJyZW50XHJcbiAqIGxvY2F0aW9uIGlzIGFib3V0IHRvIGJlIGxlZnQuIFNpbWlsYXIgdG8ge0BsaW5rIGJlZm9yZVJvdXRlTGVhdmV9IGJ1dCBjYW4gYmVcclxuICogdXNlZCBpbiBhbnkgY29tcG9uZW50LiBUaGUgZ3VhcmQgaXMgcmVtb3ZlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdW5tb3VudGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gbGVhdmVHdWFyZCAtIHtAbGluayBOYXZpZ2F0aW9uR3VhcmR9XHJcbiAqL1xyXG5mdW5jdGlvbiBvbkJlZm9yZVJvdXRlTGVhdmUobGVhdmVHdWFyZCkge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZ2V0Q3VycmVudEluc3RhbmNlKCkpIHtcclxuICAgICAgICB3YXJuKCdnZXRDdXJyZW50SW5zdGFuY2UoKSByZXR1cm5lZCBudWxsLiBvbkJlZm9yZVJvdXRlTGVhdmUoKSBtdXN0IGJlIGNhbGxlZCBhdCB0aGUgdG9wIG9mIGEgc2V0dXAgZnVuY3Rpb24nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBhY3RpdmVSZWNvcmQgPSBpbmplY3QobWF0Y2hlZFJvdXRlS2V5LCBcclxuICAgIC8vIHRvIGF2b2lkIHdhcm5pbmdcclxuICAgIHt9KS52YWx1ZTtcclxuICAgIGlmICghYWN0aXZlUmVjb3JkKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIHdhcm4oJ05vIGFjdGl2ZSByb3V0ZSByZWNvcmQgd2FzIGZvdW5kIHdoZW4gY2FsbGluZyBgb25CZWZvcmVSb3V0ZUxlYXZlKClgLiBNYWtlIHN1cmUgeW91IGNhbGwgdGhpcyBmdW5jdGlvbiBpbnNpZGUgYSBjb21wb25lbnQgY2hpbGQgb2YgPHJvdXRlci12aWV3Pi4gTWF5YmUgeW91IGNhbGxlZCBpdCBpbnNpZGUgb2YgQXBwLnZ1ZT8nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlckd1YXJkKGFjdGl2ZVJlY29yZCwgJ2xlYXZlR3VhcmRzJywgbGVhdmVHdWFyZCk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZCBhIG5hdmlnYXRpb24gZ3VhcmQgdGhhdCB0cmlnZ2VycyB3aGVuZXZlciB0aGUgY3VycmVudCBsb2NhdGlvbiBpcyBhYm91dFxyXG4gKiB0byBiZSB1cGRhdGVkLiBTaW1pbGFyIHRvIHtAbGluayBiZWZvcmVSb3V0ZVVwZGF0ZX0gYnV0IGNhbiBiZSB1c2VkIGluIGFueVxyXG4gKiBjb21wb25lbnQuIFRoZSBndWFyZCBpcyByZW1vdmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1cGRhdGVHdWFyZCAtIHtAbGluayBOYXZpZ2F0aW9uR3VhcmR9XHJcbiAqL1xyXG5mdW5jdGlvbiBvbkJlZm9yZVJvdXRlVXBkYXRlKHVwZGF0ZUd1YXJkKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFnZXRDdXJyZW50SW5zdGFuY2UoKSkge1xyXG4gICAgICAgIHdhcm4oJ2dldEN1cnJlbnRJbnN0YW5jZSgpIHJldHVybmVkIG51bGwuIG9uQmVmb3JlUm91dGVVcGRhdGUoKSBtdXN0IGJlIGNhbGxlZCBhdCB0aGUgdG9wIG9mIGEgc2V0dXAgZnVuY3Rpb24nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBhY3RpdmVSZWNvcmQgPSBpbmplY3QobWF0Y2hlZFJvdXRlS2V5LCBcclxuICAgIC8vIHRvIGF2b2lkIHdhcm5pbmdcclxuICAgIHt9KS52YWx1ZTtcclxuICAgIGlmICghYWN0aXZlUmVjb3JkKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIHdhcm4oJ05vIGFjdGl2ZSByb3V0ZSByZWNvcmQgd2FzIGZvdW5kIHdoZW4gY2FsbGluZyBgb25CZWZvcmVSb3V0ZVVwZGF0ZSgpYC4gTWFrZSBzdXJlIHlvdSBjYWxsIHRoaXMgZnVuY3Rpb24gaW5zaWRlIGEgY29tcG9uZW50IGNoaWxkIG9mIDxyb3V0ZXItdmlldz4uIE1heWJlIHlvdSBjYWxsZWQgaXQgaW5zaWRlIG9mIEFwcC52dWU/Jyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJHdWFyZChhY3RpdmVSZWNvcmQsICd1cGRhdGVHdWFyZHMnLCB1cGRhdGVHdWFyZCk7XHJcbn1cclxuZnVuY3Rpb24gZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20sIHJlY29yZCwgbmFtZSkge1xyXG4gICAgLy8ga2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgZW50ZXJDYWxsYmFja0FycmF5IHRvIHByZXZlbnQgcHVzaGluZyBjYWxsYmFja3MgaWYgYSBuZXcgbmF2aWdhdGlvbiB0b29rIHBsYWNlXHJcbiAgICBjb25zdCBlbnRlckNhbGxiYWNrQXJyYXkgPSByZWNvcmQgJiZcclxuICAgICAgICAvLyBuYW1lIGlzIGRlZmluZWQgaWYgcmVjb3JkIGlzIGJlY2F1c2Ugb2YgdGhlIGZ1bmN0aW9uIG92ZXJsb2FkXHJcbiAgICAgICAgKHJlY29yZC5lbnRlckNhbGxiYWNrc1tuYW1lXSA9IHJlY29yZC5lbnRlckNhbGxiYWNrc1tuYW1lXSB8fCBbXSk7XHJcbiAgICByZXR1cm4gKCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5leHQgPSAodmFsaWQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHZhbGlkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGNyZWF0ZVJvdXRlckVycm9yKDQgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvLFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbGlkIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh2YWxpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSb3V0ZUxvY2F0aW9uKHZhbGlkKSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGNyZWF0ZVJvdXRlckVycm9yKDIgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0dVQVJEX1JFRElSRUNUICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogdG8sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHZhbGlkLFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudGVyQ2FsbGJhY2tBcnJheSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlIGVudGVyQ2FsbGJhY2tBcnJheSBpcyB0cnV0aHksIGJvdGggcmVjb3JkIGFuZCBuYW1lIGFsc28gYXJlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkLmVudGVyQ2FsbGJhY2tzW25hbWVdID09PSBlbnRlckNhbGxiYWNrQXJyYXkgJiZcclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdmFsaWQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnRlckNhbGxiYWNrQXJyYXkucHVzaCh2YWxpZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIHdyYXBwaW5nIHdpdGggUHJvbWlzZS5yZXNvbHZlIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYm90aCBhc3luYyBhbmQgc3luYyBndWFyZHNcclxuICAgICAgICBjb25zdCBndWFyZFJldHVybiA9IGd1YXJkLmNhbGwocmVjb3JkICYmIHJlY29yZC5pbnN0YW5jZXNbbmFtZV0sIHRvLCBmcm9tLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBjYW5Pbmx5QmVDYWxsZWRPbmNlKG5leHQsIHRvLCBmcm9tKSA6IG5leHQpO1xyXG4gICAgICAgIGxldCBndWFyZENhbGwgPSBQcm9taXNlLnJlc29sdmUoZ3VhcmRSZXR1cm4pO1xyXG4gICAgICAgIGlmIChndWFyZC5sZW5ndGggPCAzKVxyXG4gICAgICAgICAgICBndWFyZENhbGwgPSBndWFyZENhbGwudGhlbihuZXh0KTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGd1YXJkLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBUaGUgXCJuZXh0XCIgY2FsbGJhY2sgd2FzIG5ldmVyIGNhbGxlZCBpbnNpZGUgb2YgJHtndWFyZC5uYW1lID8gJ1wiJyArIGd1YXJkLm5hbWUgKyAnXCInIDogJyd9OlxcbiR7Z3VhcmQudG9TdHJpbmcoKX1cXG4uIElmIHlvdSBhcmUgcmV0dXJuaW5nIGEgdmFsdWUgaW5zdGVhZCBvZiBjYWxsaW5nIFwibmV4dFwiLCBtYWtlIHN1cmUgdG8gcmVtb3ZlIHRoZSBcIm5leHRcIiBwYXJhbWV0ZXIgZnJvbSB5b3VyIGZ1bmN0aW9uLmA7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZ3VhcmRSZXR1cm4gPT09ICdvYmplY3QnICYmICd0aGVuJyBpbiBndWFyZFJldHVybikge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmRDYWxsID0gZ3VhcmRDYWxsLnRoZW4ocmVzb2x2ZWRWYWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogX2NhbGxlZCBpcyBhZGRlZCBhdCBjYW5Pbmx5QmVDYWxsZWRPbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0Ll9jYWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBuYXZpZ2F0aW9uIGd1YXJkJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGd1YXJkUmV0dXJuICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IF9jYWxsZWQgaXMgYWRkZWQgYXQgY2FuT25seUJlQ2FsbGVkT25jZVxyXG4gICAgICAgICAgICAgICAgaWYgKCFuZXh0Ll9jYWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ludmFsaWQgbmF2aWdhdGlvbiBndWFyZCcpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZ3VhcmRDYWxsLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjYW5Pbmx5QmVDYWxsZWRPbmNlKG5leHQsIHRvLCBmcm9tKSB7XHJcbiAgICBsZXQgY2FsbGVkID0gMDtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNhbGxlZCsrID09PSAxKVxyXG4gICAgICAgICAgICB3YXJuKGBUaGUgXCJuZXh0XCIgY2FsbGJhY2sgd2FzIGNhbGxlZCBtb3JlIHRoYW4gb25jZSBpbiBvbmUgbmF2aWdhdGlvbiBndWFyZCB3aGVuIGdvaW5nIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3RvLmZ1bGxQYXRofVwiLiBJdCBzaG91bGQgYmUgY2FsbGVkIGV4YWN0bHkgb25lIHRpbWUgaW4gZWFjaCBuYXZpZ2F0aW9uIGd1YXJkLiBUaGlzIHdpbGwgZmFpbCBpbiBwcm9kdWN0aW9uLmApO1xyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHdlIHB1dCBpdCBpbiB0aGUgb3JpZ2luYWwgb25lIGJlY2F1c2UgaXQncyBlYXNpZXIgdG8gY2hlY2tcclxuICAgICAgICBuZXh0Ll9jYWxsZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChjYWxsZWQgPT09IDEpXHJcbiAgICAgICAgICAgIG5leHQuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdENvbXBvbmVudHNHdWFyZHMobWF0Y2hlZCwgZ3VhcmRUeXBlLCB0bywgZnJvbSkge1xyXG4gICAgY29uc3QgZ3VhcmRzID0gW107XHJcbiAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBtYXRjaGVkKSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcmVjb3JkLmNvbXBvbmVudHMgJiYgIXJlY29yZC5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgd2FybihgUmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgZWl0aGVyIG1pc3NpbmcgYSBcImNvbXBvbmVudChzKVwiYCArXHJcbiAgICAgICAgICAgICAgICBgIG9yIFwiY2hpbGRyZW5cIiBwcm9wZXJ0eS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHJlY29yZC5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgIGxldCByYXdDb21wb25lbnQgPSByZWNvcmQuY29tcG9uZW50c1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyYXdDb21wb25lbnQgfHxcclxuICAgICAgICAgICAgICAgICAgICAodHlwZW9mIHJhd0NvbXBvbmVudCAhPT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHJhd0NvbXBvbmVudCAhPT0gJ2Z1bmN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgbm90YCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGAgYSB2YWxpZCBjb21wb25lbnQuIFJlY2VpdmVkIFwiJHtTdHJpbmcocmF3Q29tcG9uZW50KX1cIi5gKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aHJvdyB0byBlbnN1cmUgd2Ugc3RvcCBoZXJlIGJ1dCB3YXJuIHRvIGVuc3VyZSB0aGUgbWVzc2FnZSBpc24ndFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1pc3NlZCBieSB0aGUgdXNlclxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByb3V0ZSBjb21wb25lbnQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCd0aGVuJyBpbiByYXdDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3YXJuIGlmIHVzZXIgd3JvdGUgaW1wb3J0KCcvY29tcG9uZW50LnZ1ZScpIGluc3RlYWQgb2YgKCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpbXBvcnQoJy4vY29tcG9uZW50LnZ1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGluIHJlY29yZCB3aXRoIHBhdGggXCIke3JlY29yZC5wYXRofVwiIGlzIGEgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBQcm9taXNlIGluc3RlYWQgb2YgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlLiBEaWQgeW91IGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgd3JpdGUgXCJpbXBvcnQoJy4vTXlQYWdlLnZ1ZScpXCIgaW5zdGVhZCBvZiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFwiKCkgPT4gaW1wb3J0KCcuL015UGFnZS52dWUnKVwiID8gVGhpcyB3aWxsIGJyZWFrIGluIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHJhd0NvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICByYXdDb21wb25lbnQgPSAoKSA9PiBwcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmF3Q29tcG9uZW50Ll9fYXN5bmNMb2FkZXIgJiZcclxuICAgICAgICAgICAgICAgICAgICAvLyB3YXJuIG9ubHkgb25jZSBwZXIgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgIXJhd0NvbXBvbmVudC5fX3dhcm5lZERlZmluZUFzeW5jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmF3Q29tcG9uZW50Ll9fd2FybmVkRGVmaW5lQXN5bmMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBcIiR7bmFtZX1cIiBpbiByZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBkZWZpbmVkIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgdXNpbmcgXCJkZWZpbmVBc3luY0NvbXBvbmVudCgpXCIuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgV3JpdGUgXCIoKSA9PiBpbXBvcnQoJy4vTXlQYWdlLnZ1ZScpXCIgaW5zdGVhZCBvZiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFwiZGVmaW5lQXN5bmNDb21wb25lbnQoKCkgPT4gaW1wb3J0KCcuL015UGFnZS52dWUnKSlcIi5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBza2lwIHVwZGF0ZSBhbmQgbGVhdmUgZ3VhcmRzIGlmIHRoZSByb3V0ZSBjb21wb25lbnQgaXMgbm90IG1vdW50ZWRcclxuICAgICAgICAgICAgaWYgKGd1YXJkVHlwZSAhPT0gJ2JlZm9yZVJvdXRlRW50ZXInICYmICFyZWNvcmQuaW5zdGFuY2VzW25hbWVdKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChpc1JvdXRlQ29tcG9uZW50KHJhd0NvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIF9fdmNjT3B0cyBpcyBhZGRlZCBieSB2dWUtY2xhc3MtY29tcG9uZW50IGFuZCBjb250YWluIHRoZSByZWd1bGFyIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSByYXdDb21wb25lbnQuX192Y2NPcHRzIHx8IHJhd0NvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gb3B0aW9uc1tndWFyZFR5cGVdO1xyXG4gICAgICAgICAgICAgICAgZ3VhcmQgJiYgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20sIHJlY29yZCwgbmFtZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc3RhcnQgcmVxdWVzdGluZyB0aGUgY2h1bmsgYWxyZWFkeVxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbXBvbmVudFByb21pc2UgPSByYXdDb21wb25lbnQoKTtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgISgnY2F0Y2gnIGluIGNvbXBvbmVudFByb21pc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGluIHJlY29yZCB3aXRoIHBhdGggXCIke3JlY29yZC5wYXRofVwiIGlzIGEgZnVuY3Rpb24gdGhhdCBkb2VzIG5vdCByZXR1cm4gYSBQcm9taXNlLiBJZiB5b3Ugd2VyZSBwYXNzaW5nIGEgZnVuY3Rpb25hbCBjb21wb25lbnQsIG1ha2Ugc3VyZSB0byBhZGQgYSBcImRpc3BsYXlOYW1lXCIgdG8gdGhlIGNvbXBvbmVudC4gVGhpcyB3aWxsIGJyZWFrIGluIHByb2R1Y3Rpb24gaWYgbm90IGZpeGVkLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29tcG9uZW50UHJvbWlzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBndWFyZHMucHVzaCgoKSA9PiBjb21wb25lbnRQcm9taXNlLnRoZW4ocmVzb2x2ZWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzb2x2ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYENvdWxkbid0IHJlc29sdmUgY29tcG9uZW50IFwiJHtuYW1lfVwiIGF0IFwiJHtyZWNvcmQucGF0aH1cImApKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNvbHZlZENvbXBvbmVudCA9IGlzRVNNb2R1bGUocmVzb2x2ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzb2x2ZWQuZGVmYXVsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc29sdmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIHJlc29sdmVkIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCBiZWNhdXNlIHdlIHdlbnQgaW50byB0aGUgZm9yIGxvb3BcclxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuY29tcG9uZW50c1tuYW1lXSA9IHJlc29sdmVkQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIF9fdmNjT3B0cyBpcyBhZGRlZCBieSB2dWUtY2xhc3MtY29tcG9uZW50IGFuZCBjb250YWluIHRoZSByZWd1bGFyIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZWRDb21wb25lbnQuX192Y2NPcHRzIHx8IHJlc29sdmVkQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gb3B0aW9uc1tndWFyZFR5cGVdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBndWFyZCAmJiBndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSwgcmVjb3JkLCBuYW1lKSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGd1YXJkcztcclxufVxyXG4vKipcclxuICogQWxsb3dzIGRpZmZlcmVudGlhdGluZyBsYXp5IGNvbXBvbmVudHMgZnJvbSBmdW5jdGlvbmFsIGNvbXBvbmVudHMgYW5kIHZ1ZS1jbGFzcy1jb21wb25lbnRcclxuICogQGludGVybmFsXHJcbiAqXHJcbiAqIEBwYXJhbSBjb21wb25lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzUm91dGVDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBjb21wb25lbnQgPT09ICdvYmplY3QnIHx8XHJcbiAgICAgICAgJ2Rpc3BsYXlOYW1lJyBpbiBjb21wb25lbnQgfHxcclxuICAgICAgICAncHJvcHMnIGluIGNvbXBvbmVudCB8fFxyXG4gICAgICAgICdfX3ZjY09wdHMnIGluIGNvbXBvbmVudCk7XHJcbn1cclxuLyoqXHJcbiAqIEVuc3VyZXMgYSByb3V0ZSBpcyBsb2FkZWQsIHNvIGl0IGNhbiBiZSBwYXNzZWQgYXMgbyBwcm9wIHRvIGA8Um91dGVyVmlldz5gLlxyXG4gKlxyXG4gKiBAcGFyYW0gcm91dGUgLSByZXNvbHZlZCByb3V0ZSB0byBsb2FkXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2FkUm91dGVMb2NhdGlvbihyb3V0ZSkge1xyXG4gICAgcmV0dXJuIHJvdXRlLm1hdGNoZWQuZXZlcnkocmVjb3JkID0+IHJlY29yZC5yZWRpcmVjdClcclxuICAgICAgICA/IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignQ2Fubm90IGxvYWQgYSByb3V0ZSB0aGF0IHJlZGlyZWN0cy4nKSlcclxuICAgICAgICA6IFByb21pc2UuYWxsKHJvdXRlLm1hdGNoZWQubWFwKHJlY29yZCA9PiByZWNvcmQuY29tcG9uZW50cyAmJlxyXG4gICAgICAgICAgICBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhyZWNvcmQuY29tcG9uZW50cykucmVkdWNlKChwcm9taXNlcywgbmFtZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmF3Q29tcG9uZW50ID0gcmVjb3JkLmNvbXBvbmVudHNbbmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJhd0NvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICEoJ2Rpc3BsYXlOYW1lJyBpbiByYXdDb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChyYXdDb21wb25lbnQoKS50aGVuKHJlc29sdmVkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNvbHZlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYENvdWxkbid0IHJlc29sdmUgY29tcG9uZW50IFwiJHtuYW1lfVwiIGF0IFwiJHtyZWNvcmQucGF0aH1cIi4gRW5zdXJlIHlvdSBwYXNzZWQgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlLmApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRDb21wb25lbnQgPSBpc0VTTW9kdWxlKHJlc29sdmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByZXNvbHZlZC5kZWZhdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlc29sdmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSByZXNvbHZlZCBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIGJlY2F1c2Ugd2Ugd2VudCBpbnRvIHRoZSBmb3IgbG9vcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmQuY29tcG9uZW50c1tuYW1lXSA9IHJlc29sdmVkQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2VzO1xyXG4gICAgICAgICAgICB9LCBbXSkpKSkudGhlbigoKSA9PiByb3V0ZSk7XHJcbn1cblxuLy8gVE9ETzogd2UgY291bGQgYWxsb3cgY3VycmVudFJvdXRlIGFzIGEgcHJvcCB0byBleHBvc2UgYGlzQWN0aXZlYCBhbmRcclxuLy8gYGlzRXhhY3RBY3RpdmVgIGJlaGF2aW9yIHNob3VsZCBnbyB0aHJvdWdoIGFuIFJGQ1xyXG5mdW5jdGlvbiB1c2VMaW5rKHByb3BzKSB7XHJcbiAgICBjb25zdCByb3V0ZXIgPSBpbmplY3Qocm91dGVyS2V5KTtcclxuICAgIGNvbnN0IGN1cnJlbnRSb3V0ZSA9IGluamVjdChyb3V0ZUxvY2F0aW9uS2V5KTtcclxuICAgIGNvbnN0IHJvdXRlID0gY29tcHV0ZWQoKCkgPT4gcm91dGVyLnJlc29sdmUodW5yZWYocHJvcHMudG8pKSk7XHJcbiAgICBjb25zdCBhY3RpdmVSZWNvcmRJbmRleCA9IGNvbXB1dGVkKCgpID0+IHtcclxuICAgICAgICBjb25zdCB7IG1hdGNoZWQgfSA9IHJvdXRlLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBtYXRjaGVkO1xyXG4gICAgICAgIGNvbnN0IHJvdXRlTWF0Y2hlZCA9IG1hdGNoZWRbbGVuZ3RoIC0gMV07XHJcbiAgICAgICAgY29uc3QgY3VycmVudE1hdGNoZWQgPSBjdXJyZW50Um91dGUubWF0Y2hlZDtcclxuICAgICAgICBpZiAoIXJvdXRlTWF0Y2hlZCB8fCAhY3VycmVudE1hdGNoZWQubGVuZ3RoKVxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBjdXJyZW50TWF0Y2hlZC5maW5kSW5kZXgoaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCByb3V0ZU1hdGNoZWQpKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSlcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgICAgIC8vIHBvc3NpYmxlIHBhcmVudCByZWNvcmRcclxuICAgICAgICBjb25zdCBwYXJlbnRSZWNvcmRQYXRoID0gZ2V0T3JpZ2luYWxQYXRoKG1hdGNoZWRbbGVuZ3RoIC0gMl0pO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgLy8gd2UgYXJlIGRlYWxpbmcgd2l0aCBuZXN0ZWQgcm91dGVzXHJcbiAgICAgICAgbGVuZ3RoID4gMSAmJlxyXG4gICAgICAgICAgICAvLyBpZiB0aGUgcGFyZW50IGFuZCBtYXRjaGVkIHJvdXRlIGhhdmUgdGhlIHNhbWUgcGF0aCwgdGhpcyBsaW5rIGlzXHJcbiAgICAgICAgICAgIC8vIHJlZmVycmluZyB0byB0aGUgZW1wdHkgY2hpbGQuIE9yIHdlIGN1cnJlbnRseSBhcmUgb24gYSBkaWZmZXJlbnRcclxuICAgICAgICAgICAgLy8gY2hpbGQgb2YgdGhlIHNhbWUgcGFyZW50XHJcbiAgICAgICAgICAgIGdldE9yaWdpbmFsUGF0aChyb3V0ZU1hdGNoZWQpID09PSBwYXJlbnRSZWNvcmRQYXRoICYmXHJcbiAgICAgICAgICAgIC8vIGF2b2lkIGNvbXBhcmluZyB0aGUgY2hpbGQgd2l0aCBpdHMgcGFyZW50XHJcbiAgICAgICAgICAgIGN1cnJlbnRNYXRjaGVkW2N1cnJlbnRNYXRjaGVkLmxlbmd0aCAtIDFdLnBhdGggIT09IHBhcmVudFJlY29yZFBhdGhcclxuICAgICAgICAgICAgPyBjdXJyZW50TWF0Y2hlZC5maW5kSW5kZXgoaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCBtYXRjaGVkW2xlbmd0aCAtIDJdKSlcclxuICAgICAgICAgICAgOiBpbmRleCk7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGlzQWN0aXZlID0gY29tcHV0ZWQoKCkgPT4gYWN0aXZlUmVjb3JkSW5kZXgudmFsdWUgPiAtMSAmJlxyXG4gICAgICAgIGluY2x1ZGVzUGFyYW1zKGN1cnJlbnRSb3V0ZS5wYXJhbXMsIHJvdXRlLnZhbHVlLnBhcmFtcykpO1xyXG4gICAgY29uc3QgaXNFeGFjdEFjdGl2ZSA9IGNvbXB1dGVkKCgpID0+IGFjdGl2ZVJlY29yZEluZGV4LnZhbHVlID4gLTEgJiZcclxuICAgICAgICBhY3RpdmVSZWNvcmRJbmRleC52YWx1ZSA9PT0gY3VycmVudFJvdXRlLm1hdGNoZWQubGVuZ3RoIC0gMSAmJlxyXG4gICAgICAgIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMoY3VycmVudFJvdXRlLnBhcmFtcywgcm91dGUudmFsdWUucGFyYW1zKSk7XHJcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZShlID0ge30pIHtcclxuICAgICAgICBpZiAoZ3VhcmRFdmVudChlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcm91dGVyW3VucmVmKHByb3BzLnJlcGxhY2UpID8gJ3JlcGxhY2UnIDogJ3B1c2gnXSh1bnJlZihwcm9wcy50bylcclxuICAgICAgICAgICAgLy8gYXZvaWQgdW5jYXVnaHQgZXJyb3JzIGFyZSB0aGV5IGFyZSBsb2dnZWQgYW55d2F5XHJcbiAgICAgICAgICAgICkuY2F0Y2gobm9vcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIC8vIGRldnRvb2xzIG9ubHlcclxuICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiYgaXNCcm93c2VyKSB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbGlua0NvbnRleHREZXZ0b29scyA9IHtcclxuICAgICAgICAgICAgICAgIHJvdXRlOiByb3V0ZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGlzQWN0aXZlOiBpc0FjdGl2ZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGlzRXhhY3RBY3RpdmU6IGlzRXhhY3RBY3RpdmUudmFsdWUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoaXMgaXMgaW50ZXJuYWxcclxuICAgICAgICAgICAgaW5zdGFuY2UuX192cmxfZGV2dG9vbHMgPSBpbnN0YW5jZS5fX3ZybF9kZXZ0b29scyB8fCBbXTtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhpcyBpcyBpbnRlcm5hbFxyXG4gICAgICAgICAgICBpbnN0YW5jZS5fX3ZybF9kZXZ0b29scy5wdXNoKGxpbmtDb250ZXh0RGV2dG9vbHMpO1xyXG4gICAgICAgICAgICB3YXRjaEVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsaW5rQ29udGV4dERldnRvb2xzLnJvdXRlID0gcm91dGUudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsaW5rQ29udGV4dERldnRvb2xzLmlzQWN0aXZlID0gaXNBY3RpdmUudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsaW5rQ29udGV4dERldnRvb2xzLmlzRXhhY3RBY3RpdmUgPSBpc0V4YWN0QWN0aXZlLnZhbHVlO1xyXG4gICAgICAgICAgICB9LCB7IGZsdXNoOiAncG9zdCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBOT1RFOiB1cGRhdGUge0BsaW5rIF9Sb3V0ZXJMaW5rSX0ncyBgJHNsb3RzYCB0eXBlIHdoZW4gdXBkYXRpbmcgdGhpc1xyXG4gICAgICovXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJvdXRlLFxyXG4gICAgICAgIGhyZWY6IGNvbXB1dGVkKCgpID0+IHJvdXRlLnZhbHVlLmhyZWYpLFxyXG4gICAgICAgIGlzQWN0aXZlLFxyXG4gICAgICAgIGlzRXhhY3RBY3RpdmUsXHJcbiAgICAgICAgbmF2aWdhdGUsXHJcbiAgICB9O1xyXG59XHJcbmNvbnN0IFJvdXRlckxpbmtJbXBsID0gLyojX19QVVJFX18qLyBkZWZpbmVDb21wb25lbnQoe1xyXG4gICAgbmFtZTogJ1JvdXRlckxpbmsnLFxyXG4gICAgY29tcGF0Q29uZmlnOiB7IE1PREU6IDMgfSxcclxuICAgIHByb3BzOiB7XHJcbiAgICAgICAgdG86IHtcclxuICAgICAgICAgICAgdHlwZTogW1N0cmluZywgT2JqZWN0XSxcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXBsYWNlOiBCb29sZWFuLFxyXG4gICAgICAgIGFjdGl2ZUNsYXNzOiBTdHJpbmcsXHJcbiAgICAgICAgLy8gaW5hY3RpdmVDbGFzczogU3RyaW5nLFxyXG4gICAgICAgIGV4YWN0QWN0aXZlQ2xhc3M6IFN0cmluZyxcclxuICAgICAgICBjdXN0b206IEJvb2xlYW4sXHJcbiAgICAgICAgYXJpYUN1cnJlbnRWYWx1ZToge1xyXG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdwYWdlJyxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIHVzZUxpbmssXHJcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XHJcbiAgICAgICAgY29uc3QgbGluayA9IHJlYWN0aXZlKHVzZUxpbmsocHJvcHMpKTtcclxuICAgICAgICBjb25zdCB7IG9wdGlvbnMgfSA9IGluamVjdChyb3V0ZXJLZXkpO1xyXG4gICAgICAgIGNvbnN0IGVsQ2xhc3MgPSBjb21wdXRlZCgoKSA9PiAoe1xyXG4gICAgICAgICAgICBbZ2V0TGlua0NsYXNzKHByb3BzLmFjdGl2ZUNsYXNzLCBvcHRpb25zLmxpbmtBY3RpdmVDbGFzcywgJ3JvdXRlci1saW5rLWFjdGl2ZScpXTogbGluay5pc0FjdGl2ZSxcclxuICAgICAgICAgICAgLy8gW2dldExpbmtDbGFzcyhcclxuICAgICAgICAgICAgLy8gICBwcm9wcy5pbmFjdGl2ZUNsYXNzLFxyXG4gICAgICAgICAgICAvLyAgIG9wdGlvbnMubGlua0luYWN0aXZlQ2xhc3MsXHJcbiAgICAgICAgICAgIC8vICAgJ3JvdXRlci1saW5rLWluYWN0aXZlJ1xyXG4gICAgICAgICAgICAvLyApXTogIWxpbmsuaXNFeGFjdEFjdGl2ZSxcclxuICAgICAgICAgICAgW2dldExpbmtDbGFzcyhwcm9wcy5leGFjdEFjdGl2ZUNsYXNzLCBvcHRpb25zLmxpbmtFeGFjdEFjdGl2ZUNsYXNzLCAncm91dGVyLWxpbmstZXhhY3QtYWN0aXZlJyldOiBsaW5rLmlzRXhhY3RBY3RpdmUsXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCAmJiBzbG90cy5kZWZhdWx0KGxpbmspO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvcHMuY3VzdG9tXHJcbiAgICAgICAgICAgICAgICA/IGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICA6IGgoJ2EnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtY3VycmVudCc6IGxpbmsuaXNFeGFjdEFjdGl2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHByb3BzLmFyaWFDdXJyZW50VmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGxpbmsuaHJlZixcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdvdWxkIG92ZXJyaWRlIHVzZXIgYWRkZWQgYXR0cnMgYnV0IFZ1ZSB3aWxsIHN0aWxsIGFkZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBsaXN0ZW5lciwgc28gd2UgZW5kIHVwIHRyaWdnZXJpbmcgYm90aFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGxpbmsubmF2aWdhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IGVsQ2xhc3MudmFsdWUsXHJcbiAgICAgICAgICAgICAgICB9LCBjaGlsZHJlbik7XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcbn0pO1xyXG4vLyBleHBvcnQgdGhlIHB1YmxpYyB0eXBlIGZvciBoL3RzeCBpbmZlcmVuY2VcclxuLy8gYWxzbyB0byBhdm9pZCBpbmxpbmUgaW1wb3J0KCkgaW4gZ2VuZXJhdGVkIGQudHMgZmlsZXNcclxuLyoqXHJcbiAqIENvbXBvbmVudCB0byByZW5kZXIgYSBsaW5rIHRoYXQgdHJpZ2dlcnMgYSBuYXZpZ2F0aW9uIG9uIGNsaWNrLlxyXG4gKi9cclxuY29uc3QgUm91dGVyTGluayA9IFJvdXRlckxpbmtJbXBsO1xyXG5mdW5jdGlvbiBndWFyZEV2ZW50KGUpIHtcclxuICAgIC8vIGRvbid0IHJlZGlyZWN0IHdpdGggY29udHJvbCBrZXlzXHJcbiAgICBpZiAoZS5tZXRhS2V5IHx8IGUuYWx0S2V5IHx8IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5KVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIC8vIGRvbid0IHJlZGlyZWN0IHdoZW4gcHJldmVudERlZmF1bHQgY2FsbGVkXHJcbiAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIC8vIGRvbid0IHJlZGlyZWN0IG9uIHJpZ2h0IGNsaWNrXHJcbiAgICBpZiAoZS5idXR0b24gIT09IHVuZGVmaW5lZCAmJiBlLmJ1dHRvbiAhPT0gMClcclxuICAgICAgICByZXR1cm47XHJcbiAgICAvLyBkb24ndCByZWRpcmVjdCBpZiBgdGFyZ2V0PVwiX2JsYW5rXCJgXHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGdldEF0dHJpYnV0ZSBkb2VzIGV4aXN0XHJcbiAgICBpZiAoZS5jdXJyZW50VGFyZ2V0ICYmIGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUpIHtcclxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGdldEF0dHJpYnV0ZSBleGlzdHNcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKTtcclxuICAgICAgICBpZiAoL1xcYl9ibGFua1xcYi9pLnRlc3QodGFyZ2V0KSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gdGhpcyBtYXkgYmUgYSBXZWV4IGV2ZW50IHdoaWNoIGRvZXNuJ3QgaGF2ZSB0aGlzIG1ldGhvZFxyXG4gICAgaWYgKGUucHJldmVudERlZmF1bHQpXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaW5jbHVkZXNQYXJhbXMob3V0ZXIsIGlubmVyKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBpbm5lcikge1xyXG4gICAgICAgIGNvbnN0IGlubmVyVmFsdWUgPSBpbm5lcltrZXldO1xyXG4gICAgICAgIGNvbnN0IG91dGVyVmFsdWUgPSBvdXRlcltrZXldO1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5uZXJWYWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgaWYgKGlubmVyVmFsdWUgIT09IG91dGVyVmFsdWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkob3V0ZXJWYWx1ZSkgfHxcclxuICAgICAgICAgICAgICAgIG91dGVyVmFsdWUubGVuZ3RoICE9PSBpbm5lclZhbHVlLmxlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgaW5uZXJWYWx1ZS5zb21lKCh2YWx1ZSwgaSkgPT4gdmFsdWUgIT09IG91dGVyVmFsdWVbaV0pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBHZXQgdGhlIG9yaWdpbmFsIHBhdGggdmFsdWUgb2YgYSByZWNvcmQgYnkgZm9sbG93aW5nIGl0cyBhbGlhc09mXHJcbiAqIEBwYXJhbSByZWNvcmRcclxuICovXHJcbmZ1bmN0aW9uIGdldE9yaWdpbmFsUGF0aChyZWNvcmQpIHtcclxuICAgIHJldHVybiByZWNvcmQgPyAocmVjb3JkLmFsaWFzT2YgPyByZWNvcmQuYWxpYXNPZi5wYXRoIDogcmVjb3JkLnBhdGgpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIFV0aWxpdHkgY2xhc3MgdG8gZ2V0IHRoZSBhY3RpdmUgY2xhc3MgYmFzZWQgb24gZGVmYXVsdHMuXHJcbiAqIEBwYXJhbSBwcm9wQ2xhc3NcclxuICogQHBhcmFtIGdsb2JhbENsYXNzXHJcbiAqIEBwYXJhbSBkZWZhdWx0Q2xhc3NcclxuICovXHJcbmNvbnN0IGdldExpbmtDbGFzcyA9IChwcm9wQ2xhc3MsIGdsb2JhbENsYXNzLCBkZWZhdWx0Q2xhc3MpID0+IHByb3BDbGFzcyAhPSBudWxsXHJcbiAgICA/IHByb3BDbGFzc1xyXG4gICAgOiBnbG9iYWxDbGFzcyAhPSBudWxsXHJcbiAgICAgICAgPyBnbG9iYWxDbGFzc1xyXG4gICAgICAgIDogZGVmYXVsdENsYXNzO1xuXG5jb25zdCBSb3V0ZXJWaWV3SW1wbCA9IC8qI19fUFVSRV9fKi8gZGVmaW5lQ29tcG9uZW50KHtcclxuICAgIG5hbWU6ICdSb3V0ZXJWaWV3JyxcclxuICAgIC8vICM2NzQgd2UgbWFudWFsbHkgaW5oZXJpdCB0aGVtXHJcbiAgICBpbmhlcml0QXR0cnM6IGZhbHNlLFxyXG4gICAgcHJvcHM6IHtcclxuICAgICAgICBuYW1lOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgICAgZGVmYXVsdDogJ2RlZmF1bHQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcm91dGU6IE9iamVjdCxcclxuICAgIH0sXHJcbiAgICAvLyBCZXR0ZXIgY29tcGF0IGZvciBAdnVlL2NvbXBhdCB1c2Vyc1xyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9pc3N1ZXMvMTMxNVxyXG4gICAgY29tcGF0Q29uZmlnOiB7IE1PREU6IDMgfSxcclxuICAgIHNldHVwKHByb3BzLCB7IGF0dHJzLCBzbG90cyB9KSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm5EZXByZWNhdGVkVXNhZ2UoKTtcclxuICAgICAgICBjb25zdCBpbmplY3RlZFJvdXRlID0gaW5qZWN0KHJvdXRlclZpZXdMb2NhdGlvbktleSk7XHJcbiAgICAgICAgY29uc3Qgcm91dGVUb0Rpc3BsYXkgPSBjb21wdXRlZCgoKSA9PiBwcm9wcy5yb3V0ZSB8fCBpbmplY3RlZFJvdXRlLnZhbHVlKTtcclxuICAgICAgICBjb25zdCBpbmplY3RlZERlcHRoID0gaW5qZWN0KHZpZXdEZXB0aEtleSwgMCk7XHJcbiAgICAgICAgLy8gVGhlIGRlcHRoIGNoYW5nZXMgYmFzZWQgb24gZW1wdHkgY29tcG9uZW50cyBvcHRpb24sIHdoaWNoIGFsbG93cyBwYXNzdGhyb3VnaCByb3V0ZXMgZS5nLiByb3V0ZXMgd2l0aCBjaGlsZHJlblxyXG4gICAgICAgIC8vIHRoYXQgYXJlIHVzZWQgdG8gcmV1c2UgdGhlIGBwYXRoYCBwcm9wZXJ0eVxyXG4gICAgICAgIGNvbnN0IGRlcHRoID0gY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW5pdGlhbERlcHRoID0gdW5yZWYoaW5qZWN0ZWREZXB0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWF0Y2hlZCB9ID0gcm91dGVUb0Rpc3BsYXkudmFsdWU7XHJcbiAgICAgICAgICAgIGxldCBtYXRjaGVkUm91dGU7XHJcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2hlZFJvdXRlID0gbWF0Y2hlZFtpbml0aWFsRGVwdGhdKSAmJlxyXG4gICAgICAgICAgICAgICAgIW1hdGNoZWRSb3V0ZS5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsRGVwdGgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbERlcHRoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoZWRSb3V0ZVJlZiA9IGNvbXB1dGVkKCgpID0+IHJvdXRlVG9EaXNwbGF5LnZhbHVlLm1hdGNoZWRbZGVwdGgudmFsdWVdKTtcclxuICAgICAgICBwcm92aWRlKHZpZXdEZXB0aEtleSwgY29tcHV0ZWQoKCkgPT4gZGVwdGgudmFsdWUgKyAxKSk7XHJcbiAgICAgICAgcHJvdmlkZShtYXRjaGVkUm91dGVLZXksIG1hdGNoZWRSb3V0ZVJlZik7XHJcbiAgICAgICAgcHJvdmlkZShyb3V0ZXJWaWV3TG9jYXRpb25LZXksIHJvdXRlVG9EaXNwbGF5KTtcclxuICAgICAgICBjb25zdCB2aWV3UmVmID0gcmVmKCk7XHJcbiAgICAgICAgLy8gd2F0Y2ggYXQgdGhlIHNhbWUgdGltZSB0aGUgY29tcG9uZW50IGluc3RhbmNlLCB0aGUgcm91dGUgcmVjb3JkIHdlIGFyZVxyXG4gICAgICAgIC8vIHJlbmRlcmluZywgYW5kIHRoZSBuYW1lXHJcbiAgICAgICAgd2F0Y2goKCkgPT4gW3ZpZXdSZWYudmFsdWUsIG1hdGNoZWRSb3V0ZVJlZi52YWx1ZSwgcHJvcHMubmFtZV0sIChbaW5zdGFuY2UsIHRvLCBuYW1lXSwgW29sZEluc3RhbmNlLCBmcm9tLCBvbGROYW1lXSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb3B5IHJldXNlZCBpbnN0YW5jZXNcclxuICAgICAgICAgICAgaWYgKHRvKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgdXBkYXRlIHRoZSBpbnN0YW5jZSBmb3IgbmV3IGluc3RhbmNlcyBhcyB3ZWxsIGFzIHJldXNlZFxyXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2VzIHdoZW4gbmF2aWdhdGluZyB0byBhIG5ldyByb3V0ZVxyXG4gICAgICAgICAgICAgICAgdG8uaW5zdGFuY2VzW25hbWVdID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgY29tcG9uZW50IGluc3RhbmNlIGlzIHJldXNlZCBmb3IgYSBkaWZmZXJlbnQgcm91dGUgb3IgbmFtZSwgc29cclxuICAgICAgICAgICAgICAgIC8vIHdlIGNvcHkgYW55IHNhdmVkIHVwZGF0ZSBvciBsZWF2ZSBndWFyZHMuIFdpdGggYXN5bmMgc2V0dXAsIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gbW91bnRpbmcgY29tcG9uZW50IHdpbGwgbW91bnQgYmVmb3JlIHRoZSBtYXRjaGVkUm91dGUgY2hhbmdlcyxcclxuICAgICAgICAgICAgICAgIC8vIG1ha2luZyBpbnN0YW5jZSA9PT0gb2xkSW5zdGFuY2UsIHNvIHdlIGNoZWNrIGlmIGd1YXJkcyBoYXZlIGJlZW5cclxuICAgICAgICAgICAgICAgIC8vIGFkZGVkIGJlZm9yZS4gVGhpcyB3b3JrcyBiZWNhdXNlIHdlIHJlbW92ZSBndWFyZHMgd2hlblxyXG4gICAgICAgICAgICAgICAgLy8gdW5tb3VudGluZy9kZWFjdGl2YXRpbmcgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAgICAgaWYgKGZyb20gJiYgZnJvbSAhPT0gdG8gJiYgaW5zdGFuY2UgJiYgaW5zdGFuY2UgPT09IG9sZEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0by5sZWF2ZUd1YXJkcy5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvLmxlYXZlR3VhcmRzID0gZnJvbS5sZWF2ZUd1YXJkcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0by51cGRhdGVHdWFyZHMuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0by51cGRhdGVHdWFyZHMgPSBmcm9tLnVwZGF0ZUd1YXJkcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdHJpZ2dlciBiZWZvcmVSb3V0ZUVudGVyIG5leHQgY2FsbGJhY2tzXHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSAmJlxyXG4gICAgICAgICAgICAgICAgdG8gJiZcclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGluc3RhbmNlIGJ1dCB0byBhbmQgZnJvbSBhcmUgdGhlIHNhbWUgdGhpcyBtaWdodCBiZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGZpcnN0IHZpc2l0XHJcbiAgICAgICAgICAgICAgICAoIWZyb20gfHwgIWlzU2FtZVJvdXRlUmVjb3JkKHRvLCBmcm9tKSB8fCAhb2xkSW5zdGFuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAodG8uZW50ZXJDYWxsYmFja3NbbmFtZV0gfHwgW10pLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soaW5zdGFuY2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHsgZmx1c2g6ICdwb3N0JyB9KTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvdXRlVG9EaXNwbGF5LnZhbHVlO1xyXG4gICAgICAgICAgICAvLyB3ZSBuZWVkIHRoZSB2YWx1ZSBhdCB0aGUgdGltZSB3ZSByZW5kZXIgYmVjYXVzZSB3aGVuIHdlIHVubW91bnQsIHdlXHJcbiAgICAgICAgICAgIC8vIG5hdmlnYXRlZCB0byBhIGRpZmZlcmVudCBsb2NhdGlvbiBzbyB0aGUgdmFsdWUgaXMgZGlmZmVyZW50XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROYW1lID0gcHJvcHMubmFtZTtcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2hlZFJvdXRlID0gbWF0Y2hlZFJvdXRlUmVmLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBWaWV3Q29tcG9uZW50ID0gbWF0Y2hlZFJvdXRlICYmIG1hdGNoZWRSb3V0ZS5jb21wb25lbnRzW2N1cnJlbnROYW1lXTtcclxuICAgICAgICAgICAgaWYgKCFWaWV3Q29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplU2xvdChzbG90cy5kZWZhdWx0LCB7IENvbXBvbmVudDogVmlld0NvbXBvbmVudCwgcm91dGUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcHJvcHMgZnJvbSByb3V0ZSBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlUHJvcHNPcHRpb24gPSBtYXRjaGVkUm91dGUucHJvcHNbY3VycmVudE5hbWVdO1xyXG4gICAgICAgICAgICBjb25zdCByb3V0ZVByb3BzID0gcm91dGVQcm9wc09wdGlvblxyXG4gICAgICAgICAgICAgICAgPyByb3V0ZVByb3BzT3B0aW9uID09PSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgPyByb3V0ZS5wYXJhbXNcclxuICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiByb3V0ZVByb3BzT3B0aW9uID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcm91dGVQcm9wc09wdGlvbihyb3V0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiByb3V0ZVByb3BzT3B0aW9uXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IG9uVm5vZGVVbm1vdW50ZWQgPSB2bm9kZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGluc3RhbmNlIHJlZmVyZW5jZSB0byBwcmV2ZW50IGxlYWtcclxuICAgICAgICAgICAgICAgIGlmICh2bm9kZS5jb21wb25lbnQuaXNVbm1vdW50ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVkUm91dGUuaW5zdGFuY2VzW2N1cnJlbnROYW1lXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGgoVmlld0NvbXBvbmVudCwgYXNzaWduKHt9LCByb3V0ZVByb3BzLCBhdHRycywge1xyXG4gICAgICAgICAgICAgICAgb25Wbm9kZVVubW91bnRlZCxcclxuICAgICAgICAgICAgICAgIHJlZjogdmlld1JlZixcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBpZiAoKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pICYmXHJcbiAgICAgICAgICAgICAgICBpc0Jyb3dzZXIgJiZcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5yZWYpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGNhbiBkaXNwbGF5IGlmIGl0J3MgYW4gYWxpYXMsIGl0cyBwcm9wc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkZXB0aDogZGVwdGgudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbWF0Y2hlZFJvdXRlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogbWF0Y2hlZFJvdXRlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YTogbWF0Y2hlZFJvdXRlLm1ldGEsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJuYWxJbnN0YW5jZXMgPSBpc0FycmF5KGNvbXBvbmVudC5yZWYpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBjb21wb25lbnQucmVmLm1hcChyID0+IHIuaSlcclxuICAgICAgICAgICAgICAgICAgICA6IFtjb21wb25lbnQucmVmLmldO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxJbnN0YW5jZXMuZm9yRWFjaChpbnN0YW5jZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLl9fdnJ2X2RldnRvb2xzID0gaW5mbztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIC8vIHBhc3MgdGhlIHZub2RlIHRvIHRoZSBzbG90IGFzIGEgcHJvcC5cclxuICAgICAgICAgICAgLy8gaCBhbmQgPGNvbXBvbmVudCA6aXM9XCIuLi5cIj4gYm90aCBhY2NlcHQgdm5vZGVzXHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZVNsb3Qoc2xvdHMuZGVmYXVsdCwgeyBDb21wb25lbnQ6IGNvbXBvbmVudCwgcm91dGUgfSkgfHxcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcbn0pO1xyXG5mdW5jdGlvbiBub3JtYWxpemVTbG90KHNsb3QsIGRhdGEpIHtcclxuICAgIGlmICghc2xvdClcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIGNvbnN0IHNsb3RDb250ZW50ID0gc2xvdChkYXRhKTtcclxuICAgIHJldHVybiBzbG90Q29udGVudC5sZW5ndGggPT09IDEgPyBzbG90Q29udGVudFswXSA6IHNsb3RDb250ZW50O1xyXG59XHJcbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxyXG4vLyBhbHNvIHRvIGF2b2lkIGlubGluZSBpbXBvcnQoKSBpbiBnZW5lcmF0ZWQgZC50cyBmaWxlc1xyXG4vKipcclxuICogQ29tcG9uZW50IHRvIGRpc3BsYXkgdGhlIGN1cnJlbnQgcm91dGUgdGhlIHVzZXIgaXMgYXQuXHJcbiAqL1xyXG5jb25zdCBSb3V0ZXJWaWV3ID0gUm91dGVyVmlld0ltcGw7XHJcbi8vIHdhcm4gYWdhaW5zdCBkZXByZWNhdGVkIHVzYWdlIHdpdGggPHRyYW5zaXRpb24+ICYgPGtlZXAtYWxpdmU+XHJcbi8vIGR1ZSB0byBmdW5jdGlvbmFsIGNvbXBvbmVudCBiZWluZyBubyBsb25nZXIgZWFnZXIgaW4gVnVlIDNcclxuZnVuY3Rpb24gd2FybkRlcHJlY2F0ZWRVc2FnZSgpIHtcclxuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICBjb25zdCBwYXJlbnROYW1lID0gaW5zdGFuY2UucGFyZW50ICYmIGluc3RhbmNlLnBhcmVudC50eXBlLm5hbWU7XHJcbiAgICBpZiAocGFyZW50TmFtZSAmJlxyXG4gICAgICAgIChwYXJlbnROYW1lID09PSAnS2VlcEFsaXZlJyB8fCBwYXJlbnROYW1lLmluY2x1ZGVzKCdUcmFuc2l0aW9uJykpKSB7XHJcbiAgICAgICAgY29uc3QgY29tcCA9IHBhcmVudE5hbWUgPT09ICdLZWVwQWxpdmUnID8gJ2tlZXAtYWxpdmUnIDogJ3RyYW5zaXRpb24nO1xyXG4gICAgICAgIHdhcm4oYDxyb3V0ZXItdmlldz4gY2FuIG5vIGxvbmdlciBiZSB1c2VkIGRpcmVjdGx5IGluc2lkZSA8dHJhbnNpdGlvbj4gb3IgPGtlZXAtYWxpdmU+LlxcbmAgK1xyXG4gICAgICAgICAgICBgVXNlIHNsb3QgcHJvcHMgaW5zdGVhZDpcXG5cXG5gICtcclxuICAgICAgICAgICAgYDxyb3V0ZXItdmlldyB2LXNsb3Q9XCJ7IENvbXBvbmVudCB9XCI+XFxuYCArXHJcbiAgICAgICAgICAgIGAgIDwke2NvbXB9PlxcbmAgK1xyXG4gICAgICAgICAgICBgICAgIDxjb21wb25lbnQgOmlzPVwiQ29tcG9uZW50XCIgLz5cXG5gICtcclxuICAgICAgICAgICAgYCAgPC8ke2NvbXB9PlxcbmAgK1xyXG4gICAgICAgICAgICBgPC9yb3V0ZXItdmlldz5gKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQ29waWVzIGEgcm91dGUgbG9jYXRpb24gYW5kIHJlbW92ZXMgYW55IHByb2JsZW1hdGljIHByb3BlcnRpZXMgdGhhdCBjYW5ub3QgYmUgc2hvd24gaW4gZGV2dG9vbHMgKGUuZy4gVnVlIGluc3RhbmNlcykuXHJcbiAqXHJcbiAqIEBwYXJhbSByb3V0ZUxvY2F0aW9uIC0gcm91dGVMb2NhdGlvbiB0byBmb3JtYXRcclxuICogQHBhcmFtIHRvb2x0aXAgLSBvcHRpb25hbCB0b29sdGlwXHJcbiAqIEByZXR1cm5zIGEgY29weSBvZiB0aGUgcm91dGVMb2NhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZm9ybWF0Um91dGVMb2NhdGlvbihyb3V0ZUxvY2F0aW9uLCB0b29sdGlwKSB7XHJcbiAgICBjb25zdCBjb3B5ID0gYXNzaWduKHt9LCByb3V0ZUxvY2F0aW9uLCB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIHZhcmlhYmxlcyB0aGF0IGNhbiBjb250YWluIHZ1ZSBpbnN0YW5jZXNcclxuICAgICAgICBtYXRjaGVkOiByb3V0ZUxvY2F0aW9uLm1hdGNoZWQubWFwKG1hdGNoZWQgPT4gb21pdChtYXRjaGVkLCBbJ2luc3RhbmNlcycsICdjaGlsZHJlbicsICdhbGlhc09mJ10pKSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IG51bGwsXHJcbiAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlLFxyXG4gICAgICAgICAgICBkaXNwbGF5OiByb3V0ZUxvY2F0aW9uLmZ1bGxQYXRoLFxyXG4gICAgICAgICAgICB0b29sdGlwLFxyXG4gICAgICAgICAgICB2YWx1ZTogY29weSxcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBmb3JtYXREaXNwbGF5KGRpc3BsYXkpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgX2N1c3RvbToge1xyXG4gICAgICAgICAgICBkaXNwbGF5LFxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbi8vIHRvIHN1cHBvcnQgbXVsdGlwbGUgcm91dGVyIGluc3RhbmNlc1xyXG5sZXQgcm91dGVySWQgPSAwO1xyXG5mdW5jdGlvbiBhZGREZXZ0b29scyhhcHAsIHJvdXRlciwgbWF0Y2hlcikge1xyXG4gICAgLy8gVGFrZSBvdmVyIHJvdXRlci5iZWZvcmVFYWNoIGFuZCBhZnRlckVhY2hcclxuICAgIC8vIG1ha2Ugc3VyZSB3ZSBhcmUgbm90IHJlZ2lzdGVyaW5nIHRoZSBkZXZ0b29sIHR3aWNlXHJcbiAgICBpZiAocm91dGVyLl9faGFzRGV2dG9vbHMpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgcm91dGVyLl9faGFzRGV2dG9vbHMgPSB0cnVlO1xyXG4gICAgLy8gaW5jcmVtZW50IHRvIHN1cHBvcnQgbXVsdGlwbGUgcm91dGVyIGluc3RhbmNlc1xyXG4gICAgY29uc3QgaWQgPSByb3V0ZXJJZCsrO1xyXG4gICAgc2V0dXBEZXZ0b29sc1BsdWdpbih7XHJcbiAgICAgICAgaWQ6ICdvcmcudnVlanMucm91dGVyJyArIChpZCA/ICcuJyArIGlkIDogJycpLFxyXG4gICAgICAgIGxhYmVsOiAnVnVlIFJvdXRlcicsXHJcbiAgICAgICAgcGFja2FnZU5hbWU6ICd2dWUtcm91dGVyJyxcclxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcm91dGVyLnZ1ZWpzLm9yZycsXHJcbiAgICAgICAgbG9nbzogJ2h0dHBzOi8vcm91dGVyLnZ1ZWpzLm9yZy9sb2dvLnBuZycsXHJcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlczogWydSb3V0aW5nJ10sXHJcbiAgICAgICAgYXBwLFxyXG4gICAgfSwgYXBpID0+IHtcclxuICAgICAgICBpZiAodHlwZW9mIGFwaS5ub3cgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbVnVlIFJvdXRlcl06IFlvdSBzZWVtIHRvIGJlIHVzaW5nIGFuIG91dGRhdGVkIHZlcnNpb24gb2YgVnVlIERldnRvb2xzLiBBcmUgeW91IHN0aWxsIHVzaW5nIHRoZSBCZXRhIHJlbGVhc2UgaW5zdGVhZCBvZiB0aGUgc3RhYmxlIG9uZT8gWW91IGNhbiBmaW5kIHRoZSBsaW5rcyBhdCBodHRwczovL2RldnRvb2xzLnZ1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZGlzcGxheSBzdGF0ZSBhZGRlZCBieSB0aGUgcm91dGVyXHJcbiAgICAgICAgYXBpLm9uLmluc3BlY3RDb21wb25lbnQoKHBheWxvYWQsIGN0eCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5pbnN0YW5jZURhdGEpIHtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuaW5zdGFuY2VEYXRhLnN0YXRlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdSb3V0aW5nJyxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICckcm91dGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZm9ybWF0Um91dGVMb2NhdGlvbihyb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlLCAnQ3VycmVudCBSb3V0ZScpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBtYXJrIHJvdXRlci1saW5rIGFzIGFjdGl2ZSBhbmQgZGlzcGxheSB0YWdzIG9uIHJvdXRlciB2aWV3c1xyXG4gICAgICAgIGFwaS5vbi52aXNpdENvbXBvbmVudFRyZWUoKHsgdHJlZU5vZGU6IG5vZGUsIGNvbXBvbmVudEluc3RhbmNlIH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudEluc3RhbmNlLl9fdnJ2X2RldnRvb2xzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gY29tcG9uZW50SW5zdGFuY2UuX192cnZfZGV2dG9vbHM7XHJcbiAgICAgICAgICAgICAgICBub2RlLnRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IChpbmZvLm5hbWUgPyBgJHtpbmZvLm5hbWUudG9TdHJpbmcoKX06IGAgOiAnJykgKyBpbmZvLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdUaGlzIGNvbXBvbmVudCBpcyByZW5kZXJlZCBieSAmbHQ7cm91dGVyLXZpZXcmZ3Q7JyxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFBJTktfNTAwLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaWYgbXVsdGlwbGUgdXNlTGluayBhcmUgdXNlZFxyXG4gICAgICAgICAgICBpZiAoaXNBcnJheShjb21wb25lbnRJbnN0YW5jZS5fX3ZybF9kZXZ0b29scykpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudEluc3RhbmNlLl9fZGV2dG9vbHNBcGkgPSBhcGk7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRJbnN0YW5jZS5fX3ZybF9kZXZ0b29scy5mb3JFYWNoKGRldnRvb2xzRGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhY2tncm91bmRDb2xvciA9IE9SQU5HRV80MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvb2x0aXAgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGV2dG9vbHNEYXRhLmlzRXhhY3RBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gTElNRV81MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXAgPSAnVGhpcyBpcyBleGFjdGx5IGFjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRldnRvb2xzRGF0YS5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBCTFVFXzYwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcCA9ICdUaGlzIGxpbmsgaXMgYWN0aXZlJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS50YWdzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGV2dG9vbHNEYXRhLnJvdXRlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb2xvcjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB3YXRjaChyb3V0ZXIuY3VycmVudFJvdXRlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggYWN0aXZlIHN0YXRlXHJcbiAgICAgICAgICAgIHJlZnJlc2hSb3V0ZXNWaWV3KCk7XHJcbiAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKHJvdXRlckluc3BlY3RvcklkKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShyb3V0ZXJJbnNwZWN0b3JJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmF2aWdhdGlvbnNMYXllcklkID0gJ3JvdXRlcjpuYXZpZ2F0aW9uczonICsgaWQ7XHJcbiAgICAgICAgYXBpLmFkZFRpbWVsaW5lTGF5ZXIoe1xyXG4gICAgICAgICAgICBpZDogbmF2aWdhdGlvbnNMYXllcklkLFxyXG4gICAgICAgICAgICBsYWJlbDogYFJvdXRlciR7aWQgPyAnICcgKyBpZCA6ICcnfSBOYXZpZ2F0aW9uc2AsXHJcbiAgICAgICAgICAgIGNvbG9yOiAweDQwYThjNCxcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBjb25zdCBlcnJvcnNMYXllcklkID0gJ3JvdXRlcjplcnJvcnMnXHJcbiAgICAgICAgLy8gYXBpLmFkZFRpbWVsaW5lTGF5ZXIoe1xyXG4gICAgICAgIC8vICAgaWQ6IGVycm9yc0xheWVySWQsXHJcbiAgICAgICAgLy8gICBsYWJlbDogJ1JvdXRlciBFcnJvcnMnLFxyXG4gICAgICAgIC8vICAgY29sb3I6IDB4ZWE1NDU1LFxyXG4gICAgICAgIC8vIH0pXHJcbiAgICAgICAgcm91dGVyLm9uRXJyb3IoKGVycm9yLCB0bykgPT4ge1xyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBuYXZpZ2F0aW9uc0xheWVySWQsXHJcbiAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRXJyb3IgZHVyaW5nIE5hdmlnYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiB0by5mdWxsUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBsb2dUeXBlOiAnZXJyb3InLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGFwaS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogdG8ubWV0YS5fX25hdmlnYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGF0dGFjaGVkIHRvIGBtZXRhYCBhbmQgdXNlZCB0byBncm91cCBldmVudHNcclxuICAgICAgICBsZXQgbmF2aWdhdGlvbklkID0gMDtcclxuICAgICAgICByb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGd1YXJkOiBmb3JtYXREaXNwbGF5KCdiZWZvcmVFYWNoJyksXHJcbiAgICAgICAgICAgICAgICBmcm9tOiBmb3JtYXRSb3V0ZUxvY2F0aW9uKGZyb20sICdDdXJyZW50IExvY2F0aW9uIGR1cmluZyB0aGlzIG5hdmlnYXRpb24nKSxcclxuICAgICAgICAgICAgICAgIHRvOiBmb3JtYXRSb3V0ZUxvY2F0aW9uKHRvLCAnVGFyZ2V0IGxvY2F0aW9uJyksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIFVzZWQgdG8gZ3JvdXAgbmF2aWdhdGlvbnMgdG9nZXRoZXIsIGhpZGUgZnJvbSBkZXZ0b29sc1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodG8ubWV0YSwgJ19fbmF2aWdhdGlvbklkJywge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IG5hdmlnYXRpb25JZCsrLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBhcGkubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGFydCBvZiBuYXZpZ2F0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogdG8uZnVsbFBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiB0by5tZXRhLl9fbmF2aWdhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcm91dGVyLmFmdGVyRWFjaCgodG8sIGZyb20sIGZhaWx1cmUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGd1YXJkOiBmb3JtYXREaXNwbGF5KCdhZnRlckVhY2gnKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuZmFpbHVyZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmFpbHVyZSA/IGZhaWx1cmUubWVzc2FnZSA6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnTmF2aWdhdGlvbiBGYWlsdXJlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZhaWx1cmUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkYXRhLnN0YXR1cyA9IGZvcm1hdERpc3BsYXkoJ+KdjCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSBmb3JtYXREaXNwbGF5KCfinIUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB3ZSBzZXQgaGVyZSB0byBoYXZlIHRoZSByaWdodCBvcmRlclxyXG4gICAgICAgICAgICBkYXRhLmZyb20gPSBmb3JtYXRSb3V0ZUxvY2F0aW9uKGZyb20sICdDdXJyZW50IExvY2F0aW9uIGR1cmluZyB0aGlzIG5hdmlnYXRpb24nKTtcclxuICAgICAgICAgICAgZGF0YS50byA9IGZvcm1hdFJvdXRlTG9jYXRpb24odG8sICdUYXJnZXQgbG9jYXRpb24nKTtcclxuICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0VuZCBvZiBuYXZpZ2F0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogdG8uZnVsbFBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYXBpLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogZmFpbHVyZSA/ICd3YXJuaW5nJyA6ICdkZWZhdWx0JyxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiB0by5tZXRhLl9fbmF2aWdhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5zcGVjdG9yIG9mIEV4aXN0aW5nIHJvdXRlc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IHJvdXRlckluc3BlY3RvcklkID0gJ3JvdXRlci1pbnNwZWN0b3I6JyArIGlkO1xyXG4gICAgICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xyXG4gICAgICAgICAgICBpZDogcm91dGVySW5zcGVjdG9ySWQsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnUm91dGVzJyArIChpZCA/ICcgJyArIGlkIDogJycpLFxyXG4gICAgICAgICAgICBpY29uOiAnYm9vaycsXHJcbiAgICAgICAgICAgIHRyZWVGaWx0ZXJQbGFjZWhvbGRlcjogJ1NlYXJjaCByb3V0ZXMnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hSb3V0ZXNWaWV3KCkge1xyXG4gICAgICAgICAgICAvLyB0aGUgcm91dGVzIHZpZXcgaXNuJ3QgYWN0aXZlXHJcbiAgICAgICAgICAgIGlmICghYWN0aXZlUm91dGVzUGF5bG9hZClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGFjdGl2ZVJvdXRlc1BheWxvYWQ7XHJcbiAgICAgICAgICAgIC8vIGNoaWxkcmVuIHJvdXRlcyB3aWxsIGFwcGVhciBhcyBuZXN0ZWRcclxuICAgICAgICAgICAgbGV0IHJvdXRlcyA9IG1hdGNoZXIuZ2V0Um91dGVzKCkuZmlsdGVyKHJvdXRlID0+ICFyb3V0ZS5wYXJlbnQpO1xyXG4gICAgICAgICAgICAvLyByZXNldCBtYXRjaCBzdGF0ZSB0byBmYWxzZVxyXG4gICAgICAgICAgICByb3V0ZXMuZm9yRWFjaChyZXNldE1hdGNoU3RhdGVPblJvdXRlUmVjb3JkKTtcclxuICAgICAgICAgICAgLy8gYXBwbHkgYSBtYXRjaCBzdGF0ZSBpZiB0aGVyZSBpcyBhIHBheWxvYWRcclxuICAgICAgICAgICAgaWYgKHBheWxvYWQuZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByb3V0ZXMgPSByb3V0ZXMuZmlsdGVyKHJvdXRlID0+IFxyXG4gICAgICAgICAgICAgICAgLy8gc2F2ZSBtYXRjaGVzIHN0YXRlIGJhc2VkIG9uIHRoZSBwYXlsb2FkXHJcbiAgICAgICAgICAgICAgICBpc1JvdXRlTWF0Y2hpbmcocm91dGUsIHBheWxvYWQuZmlsdGVyLnRvTG93ZXJDYXNlKCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBtYXJrIGFjdGl2ZSByb3V0ZXNcclxuICAgICAgICAgICAgcm91dGVzLmZvckVhY2gocm91dGUgPT4gbWFya1JvdXRlUmVjb3JkQWN0aXZlKHJvdXRlLCByb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlKSk7XHJcbiAgICAgICAgICAgIHBheWxvYWQucm9vdE5vZGVzID0gcm91dGVzLm1hcChmb3JtYXRSb3V0ZVJlY29yZEZvckluc3BlY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhY3RpdmVSb3V0ZXNQYXlsb2FkO1xyXG4gICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JUcmVlKHBheWxvYWQgPT4ge1xyXG4gICAgICAgICAgICBhY3RpdmVSb3V0ZXNQYXlsb2FkID0gcGF5bG9hZDtcclxuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gcm91dGVySW5zcGVjdG9ySWQpIHtcclxuICAgICAgICAgICAgICAgIHJlZnJlc2hSb3V0ZXNWaWV3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEaXNwbGF5IGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcm91dGUgcmVjb3JkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclN0YXRlKHBheWxvYWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSByb3V0ZXJJbnNwZWN0b3JJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGVzID0gbWF0Y2hlci5nZXRSb3V0ZXMoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm91dGVzLmZpbmQocm91dGUgPT4gcm91dGUucmVjb3JkLl9fdmRfaWQgPT09IHBheWxvYWQubm9kZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGZvcm1hdFJvdXRlUmVjb3JkTWF0Y2hlckZvclN0YXRlSW5zcGVjdG9yKHJvdXRlKSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKHJvdXRlckluc3BlY3RvcklkKTtcclxuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKHJvdXRlckluc3BlY3RvcklkKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIG1vZGlmaWVyRm9yS2V5KGtleSkge1xyXG4gICAgaWYgKGtleS5vcHRpb25hbCkge1xyXG4gICAgICAgIHJldHVybiBrZXkucmVwZWF0YWJsZSA/ICcqJyA6ICc/JztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBrZXkucmVwZWF0YWJsZSA/ICcrJyA6ICcnO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGZvcm1hdFJvdXRlUmVjb3JkTWF0Y2hlckZvclN0YXRlSW5zcGVjdG9yKHJvdXRlKSB7XHJcbiAgICBjb25zdCB7IHJlY29yZCB9ID0gcm91dGU7XHJcbiAgICBjb25zdCBmaWVsZHMgPSBbXHJcbiAgICAgICAgeyBlZGl0YWJsZTogZmFsc2UsIGtleTogJ3BhdGgnLCB2YWx1ZTogcmVjb3JkLnBhdGggfSxcclxuICAgIF07XHJcbiAgICBpZiAocmVjb3JkLm5hbWUgIT0gbnVsbCkge1xyXG4gICAgICAgIGZpZWxkcy5wdXNoKHtcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBrZXk6ICduYW1lJyxcclxuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5uYW1lLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmllbGRzLnB1c2goeyBlZGl0YWJsZTogZmFsc2UsIGtleTogJ3JlZ2V4cCcsIHZhbHVlOiByb3V0ZS5yZSB9KTtcclxuICAgIGlmIChyb3V0ZS5rZXlzLmxlbmd0aCkge1xyXG4gICAgICAgIGZpZWxkcy5wdXNoKHtcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBrZXk6ICdrZXlzJyxcclxuICAgICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgICAgIF9jdXN0b206IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHJvdXRlLmtleXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChrZXkgPT4gYCR7a2V5Lm5hbWV9JHttb2RpZmllckZvcktleShrZXkpfWApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1BhcmFtIGtleXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5rZXlzLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZWNvcmQucmVkaXJlY3QgIT0gbnVsbCkge1xyXG4gICAgICAgIGZpZWxkcy5wdXNoKHtcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBrZXk6ICdyZWRpcmVjdCcsXHJcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQucmVkaXJlY3QsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocm91dGUuYWxpYXMubGVuZ3RoKSB7XHJcbiAgICAgICAgZmllbGRzLnB1c2goe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleTogJ2FsaWFzZXMnLFxyXG4gICAgICAgICAgICB2YWx1ZTogcm91dGUuYWxpYXMubWFwKGFsaWFzID0+IGFsaWFzLnJlY29yZC5wYXRoKSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChPYmplY3Qua2V5cyhyb3V0ZS5yZWNvcmQubWV0YSkubGVuZ3RoKSB7XHJcbiAgICAgICAgZmllbGRzLnB1c2goe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleTogJ21ldGEnLFxyXG4gICAgICAgICAgICB2YWx1ZTogcm91dGUucmVjb3JkLm1ldGEsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmaWVsZHMucHVzaCh7XHJcbiAgICAgICAga2V5OiAnc2NvcmUnLFxyXG4gICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiByb3V0ZS5zY29yZS5tYXAoc2NvcmUgPT4gc2NvcmUuam9pbignLCAnKSkuam9pbignIHwgJyksXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwOiAnU2NvcmUgdXNlZCB0byBzb3J0IHJvdXRlcycsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcm91dGUuc2NvcmUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZpZWxkcztcclxufVxyXG4vKipcclxuICogRXh0cmFjdGVkIGZyb20gdGFpbHdpbmQgcGFsZXR0ZVxyXG4gKi9cclxuY29uc3QgUElOS181MDAgPSAweGVjNDg5OTtcclxuY29uc3QgQkxVRV82MDAgPSAweDI1NjNlYjtcclxuY29uc3QgTElNRV81MDAgPSAweDg0Y2MxNjtcclxuY29uc3QgQ1lBTl80MDAgPSAweDIyZDNlZTtcclxuY29uc3QgT1JBTkdFXzQwMCA9IDB4ZmI5MjNjO1xyXG4vLyBjb25zdCBHUkFZXzEwMCA9IDB4ZjRmNGY1XHJcbmNvbnN0IERBUksgPSAweDY2NjY2NjtcclxuZnVuY3Rpb24gZm9ybWF0Um91dGVSZWNvcmRGb3JJbnNwZWN0b3Iocm91dGUpIHtcclxuICAgIGNvbnN0IHRhZ3MgPSBbXTtcclxuICAgIGNvbnN0IHsgcmVjb3JkIH0gPSByb3V0ZTtcclxuICAgIGlmIChyZWNvcmQubmFtZSAhPSBudWxsKSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6IFN0cmluZyhyZWNvcmQubmFtZSksXHJcbiAgICAgICAgICAgIHRleHRDb2xvcjogMCxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBDWUFOXzQwMCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZWNvcmQuYWxpYXNPZikge1xyXG4gICAgICAgIHRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgIGxhYmVsOiAnYWxpYXMnLFxyXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogT1JBTkdFXzQwMCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChyb3V0ZS5fX3ZkX21hdGNoKSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6ICdtYXRjaGVzJyxcclxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFBJTktfNTAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJvdXRlLl9fdmRfZXhhY3RBY3RpdmUpIHtcclxuICAgICAgICB0YWdzLnB1c2goe1xyXG4gICAgICAgICAgICBsYWJlbDogJ2V4YWN0JyxcclxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IExJTUVfNTAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJvdXRlLl9fdmRfYWN0aXZlKSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6ICdhY3RpdmUnLFxyXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogQkxVRV82MDAsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVjb3JkLnJlZGlyZWN0KSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6IHR5cGVvZiByZWNvcmQucmVkaXJlY3QgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgICAgICA/IGByZWRpcmVjdDogJHtyZWNvcmQucmVkaXJlY3R9YFxyXG4gICAgICAgICAgICAgICAgOiAncmVkaXJlY3RzJyxcclxuICAgICAgICAgICAgdGV4dENvbG9yOiAweGZmZmZmZixcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBEQVJLLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gYWRkIGFuIGlkIHRvIGJlIGFibGUgdG8gc2VsZWN0IGl0LiBVc2luZyB0aGUgYHBhdGhgIGlzIG5vdCBwb3NzaWJsZSBiZWNhdXNlXHJcbiAgICAvLyBlbXB0eSBwYXRoIGNoaWxkcmVuIHdvdWxkIGNvbGxpZGUgd2l0aCB0aGVpciBwYXJlbnRzXHJcbiAgICBsZXQgaWQgPSByZWNvcmQuX192ZF9pZDtcclxuICAgIGlmIChpZCA9PSBudWxsKSB7XHJcbiAgICAgICAgaWQgPSBTdHJpbmcocm91dGVSZWNvcmRJZCsrKTtcclxuICAgICAgICByZWNvcmQuX192ZF9pZCA9IGlkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpZCxcclxuICAgICAgICBsYWJlbDogcmVjb3JkLnBhdGgsXHJcbiAgICAgICAgdGFncyxcclxuICAgICAgICBjaGlsZHJlbjogcm91dGUuY2hpbGRyZW4ubWFwKGZvcm1hdFJvdXRlUmVjb3JkRm9ySW5zcGVjdG9yKSxcclxuICAgIH07XHJcbn1cclxuLy8gIGluY3JlbWVudGFsIGlkIGZvciByb3V0ZSByZWNvcmRzIGFuZCBpbnNwZWN0b3Igc3RhdGVcclxubGV0IHJvdXRlUmVjb3JkSWQgPSAwO1xyXG5jb25zdCBFWFRSQUNUX1JFR0VYUF9SRSA9IC9eXFwvKC4qKVxcLyhbYS16XSopJC87XHJcbmZ1bmN0aW9uIG1hcmtSb3V0ZVJlY29yZEFjdGl2ZShyb3V0ZSwgY3VycmVudFJvdXRlKSB7XHJcbiAgICAvLyBubyByb3V0ZSB3aWxsIGJlIGFjdGl2ZSBpZiBtYXRjaGVkIGlzIGVtcHR5XHJcbiAgICAvLyByZXNldCB0aGUgbWF0Y2hpbmcgc3RhdGVcclxuICAgIGNvbnN0IGlzRXhhY3RBY3RpdmUgPSBjdXJyZW50Um91dGUubWF0Y2hlZC5sZW5ndGggJiZcclxuICAgICAgICBpc1NhbWVSb3V0ZVJlY29yZChjdXJyZW50Um91dGUubWF0Y2hlZFtjdXJyZW50Um91dGUubWF0Y2hlZC5sZW5ndGggLSAxXSwgcm91dGUucmVjb3JkKTtcclxuICAgIHJvdXRlLl9fdmRfZXhhY3RBY3RpdmUgPSByb3V0ZS5fX3ZkX2FjdGl2ZSA9IGlzRXhhY3RBY3RpdmU7XHJcbiAgICBpZiAoIWlzRXhhY3RBY3RpdmUpIHtcclxuICAgICAgICByb3V0ZS5fX3ZkX2FjdGl2ZSA9IGN1cnJlbnRSb3V0ZS5tYXRjaGVkLnNvbWUobWF0Y2ggPT4gaXNTYW1lUm91dGVSZWNvcmQobWF0Y2gsIHJvdXRlLnJlY29yZCkpO1xyXG4gICAgfVxyXG4gICAgcm91dGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZFJvdXRlID0+IG1hcmtSb3V0ZVJlY29yZEFjdGl2ZShjaGlsZFJvdXRlLCBjdXJyZW50Um91dGUpKTtcclxufVxyXG5mdW5jdGlvbiByZXNldE1hdGNoU3RhdGVPblJvdXRlUmVjb3JkKHJvdXRlKSB7XHJcbiAgICByb3V0ZS5fX3ZkX21hdGNoID0gZmFsc2U7XHJcbiAgICByb3V0ZS5jaGlsZHJlbi5mb3JFYWNoKHJlc2V0TWF0Y2hTdGF0ZU9uUm91dGVSZWNvcmQpO1xyXG59XHJcbmZ1bmN0aW9uIGlzUm91dGVNYXRjaGluZyhyb3V0ZSwgZmlsdGVyKSB7XHJcbiAgICBjb25zdCBmb3VuZCA9IFN0cmluZyhyb3V0ZS5yZSkubWF0Y2goRVhUUkFDVF9SRUdFWFBfUkUpO1xyXG4gICAgcm91dGUuX192ZF9tYXRjaCA9IGZhbHNlO1xyXG4gICAgaWYgKCFmb3VuZCB8fCBmb3VuZC5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy8gdXNlIGEgcmVnZXhwIHdpdGhvdXQgJCBhdCB0aGUgZW5kIHRvIG1hdGNoIG5lc3RlZCByb3V0ZXMgYmV0dGVyXHJcbiAgICBjb25zdCBub25FbmRpbmdSRSA9IG5ldyBSZWdFeHAoZm91bmRbMV0ucmVwbGFjZSgvXFwkJC8sICcnKSwgZm91bmRbMl0pO1xyXG4gICAgaWYgKG5vbkVuZGluZ1JFLnRlc3QoZmlsdGVyKSkge1xyXG4gICAgICAgIC8vIG1hcmsgY2hpbGRyZW4gYXMgbWF0Y2hlc1xyXG4gICAgICAgIHJvdXRlLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gaXNSb3V0ZU1hdGNoaW5nKGNoaWxkLCBmaWx0ZXIpKTtcclxuICAgICAgICAvLyBleGNlcHRpb24gY2FzZTogYC9gXHJcbiAgICAgICAgaWYgKHJvdXRlLnJlY29yZC5wYXRoICE9PSAnLycgfHwgZmlsdGVyID09PSAnLycpIHtcclxuICAgICAgICAgICAgcm91dGUuX192ZF9tYXRjaCA9IHJvdXRlLnJlLnRlc3QoZmlsdGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGhpZGUgdGhlIC8gcm91dGVcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXRoID0gcm91dGUucmVjb3JkLnBhdGgudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IGRlY29kZWRQYXRoID0gZGVjb2RlKHBhdGgpO1xyXG4gICAgLy8gYWxzbyBhbGxvdyBwYXJ0aWFsIG1hdGNoaW5nIG9uIHRoZSBwYXRoXHJcbiAgICBpZiAoIWZpbHRlci5zdGFydHNXaXRoKCcvJykgJiZcclxuICAgICAgICAoZGVjb2RlZFBhdGguaW5jbHVkZXMoZmlsdGVyKSB8fCBwYXRoLmluY2x1ZGVzKGZpbHRlcikpKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgaWYgKGRlY29kZWRQYXRoLnN0YXJ0c1dpdGgoZmlsdGVyKSB8fCBwYXRoLnN0YXJ0c1dpdGgoZmlsdGVyKSlcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIGlmIChyb3V0ZS5yZWNvcmQubmFtZSAmJiBTdHJpbmcocm91dGUucmVjb3JkLm5hbWUpLmluY2x1ZGVzKGZpbHRlcikpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICByZXR1cm4gcm91dGUuY2hpbGRyZW4uc29tZShjaGlsZCA9PiBpc1JvdXRlTWF0Y2hpbmcoY2hpbGQsIGZpbHRlcikpO1xyXG59XHJcbmZ1bmN0aW9uIG9taXQob2JqLCBrZXlzKSB7XHJcbiAgICBjb25zdCByZXQgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmICgha2V5cy5pbmNsdWRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgcmV0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgUm91dGVyIGluc3RhbmNlIHRoYXQgY2FuIGJlIHVzZWQgYnkgYSBWdWUgYXBwLlxyXG4gKlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIHtAbGluayBSb3V0ZXJPcHRpb25zfVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUm91dGVyKG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG1hdGNoZXIgPSBjcmVhdGVSb3V0ZXJNYXRjaGVyKG9wdGlvbnMucm91dGVzLCBvcHRpb25zKTtcclxuICAgIGNvbnN0IHBhcnNlUXVlcnkkMSA9IG9wdGlvbnMucGFyc2VRdWVyeSB8fCBwYXJzZVF1ZXJ5O1xyXG4gICAgY29uc3Qgc3RyaW5naWZ5UXVlcnkkMSA9IG9wdGlvbnMuc3RyaW5naWZ5UXVlcnkgfHwgc3RyaW5naWZ5UXVlcnk7XHJcbiAgICBjb25zdCByb3V0ZXJIaXN0b3J5ID0gb3B0aW9ucy5oaXN0b3J5O1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcm91dGVySGlzdG9yeSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb3ZpZGUgdGhlIFwiaGlzdG9yeVwiIG9wdGlvbiB3aGVuIGNhbGxpbmcgXCJjcmVhdGVSb3V0ZXIoKVwiOicgK1xyXG4gICAgICAgICAgICAnIGh0dHBzOi8vbmV4dC5yb3V0ZXIudnVlanMub3JnL2FwaS8jaGlzdG9yeS4nKTtcclxuICAgIGNvbnN0IGJlZm9yZUd1YXJkcyA9IHVzZUNhbGxiYWNrcygpO1xyXG4gICAgY29uc3QgYmVmb3JlUmVzb2x2ZUd1YXJkcyA9IHVzZUNhbGxiYWNrcygpO1xyXG4gICAgY29uc3QgYWZ0ZXJHdWFyZHMgPSB1c2VDYWxsYmFja3MoKTtcclxuICAgIGNvbnN0IGN1cnJlbnRSb3V0ZSA9IHNoYWxsb3dSZWYoU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRCk7XHJcbiAgICBsZXQgcGVuZGluZ0xvY2F0aW9uID0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcclxuICAgIC8vIGxlYXZlIHRoZSBzY3JvbGxSZXN0b3JhdGlvbiBpZiBubyBzY3JvbGxCZWhhdmlvciBpcyBwcm92aWRlZFxyXG4gICAgaWYgKGlzQnJvd3NlciAmJiBvcHRpb25zLnNjcm9sbEJlaGF2aW9yICYmICdzY3JvbGxSZXN0b3JhdGlvbicgaW4gaGlzdG9yeSkge1xyXG4gICAgICAgIGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSAnbWFudWFsJztcclxuICAgIH1cclxuICAgIGNvbnN0IG5vcm1hbGl6ZVBhcmFtcyA9IGFwcGx5VG9QYXJhbXMuYmluZChudWxsLCBwYXJhbVZhbHVlID0+ICcnICsgcGFyYW1WYWx1ZSk7XHJcbiAgICBjb25zdCBlbmNvZGVQYXJhbXMgPSBhcHBseVRvUGFyYW1zLmJpbmQobnVsbCwgZW5jb2RlUGFyYW0pO1xyXG4gICAgY29uc3QgZGVjb2RlUGFyYW1zID0gXHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBpbnRlbnRpb25hbGx5IGF2b2lkIHRoZSB0eXBlIGNoZWNrXHJcbiAgICBhcHBseVRvUGFyYW1zLmJpbmQobnVsbCwgZGVjb2RlKTtcclxuICAgIGZ1bmN0aW9uIGFkZFJvdXRlKHBhcmVudE9yUm91dGUsIHJvdXRlKSB7XHJcbiAgICAgICAgbGV0IHBhcmVudDtcclxuICAgICAgICBsZXQgcmVjb3JkO1xyXG4gICAgICAgIGlmIChpc1JvdXRlTmFtZShwYXJlbnRPclJvdXRlKSkge1xyXG4gICAgICAgICAgICBwYXJlbnQgPSBtYXRjaGVyLmdldFJlY29yZE1hdGNoZXIocGFyZW50T3JSb3V0ZSk7XHJcbiAgICAgICAgICAgIHJlY29yZCA9IHJvdXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVjb3JkID0gcGFyZW50T3JSb3V0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXIuYWRkUm91dGUocmVjb3JkLCBwYXJlbnQpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlUm91dGUobmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHJlY29yZE1hdGNoZXIgPSBtYXRjaGVyLmdldFJlY29yZE1hdGNoZXIobmFtZSk7XHJcbiAgICAgICAgaWYgKHJlY29yZE1hdGNoZXIpIHtcclxuICAgICAgICAgICAgbWF0Y2hlci5yZW1vdmVSb3V0ZShyZWNvcmRNYXRjaGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYENhbm5vdCByZW1vdmUgbm9uLWV4aXN0ZW50IHJvdXRlIFwiJHtTdHJpbmcobmFtZSl9XCJgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRSb3V0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXIuZ2V0Um91dGVzKCkubWFwKHJvdXRlTWF0Y2hlciA9PiByb3V0ZU1hdGNoZXIucmVjb3JkKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGhhc1JvdXRlKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gISFtYXRjaGVyLmdldFJlY29yZE1hdGNoZXIobmFtZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZXNvbHZlKHJhd0xvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24pIHtcclxuICAgICAgICAvLyBjb25zdCBvYmplY3RMb2NhdGlvbiA9IHJvdXRlckxvY2F0aW9uQXNPYmplY3QocmF3TG9jYXRpb24pXHJcbiAgICAgICAgLy8gd2UgY3JlYXRlIGEgY29weSB0byBtb2RpZnkgaXQgbGF0ZXJcclxuICAgICAgICBjdXJyZW50TG9jYXRpb24gPSBhc3NpZ24oe30sIGN1cnJlbnRMb2NhdGlvbiB8fCBjdXJyZW50Um91dGUudmFsdWUpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgcmF3TG9jYXRpb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uTm9ybWFsaXplZCA9IHBhcnNlVVJMKHBhcnNlUXVlcnkkMSwgcmF3TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbi5wYXRoKTtcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2hlZFJvdXRlID0gbWF0Y2hlci5yZXNvbHZlKHsgcGF0aDogbG9jYXRpb25Ob3JtYWxpemVkLnBhdGggfSwgY3VycmVudExvY2F0aW9uKTtcclxuICAgICAgICAgICAgY29uc3QgaHJlZiA9IHJvdXRlckhpc3RvcnkuY3JlYXRlSHJlZihsb2NhdGlvbk5vcm1hbGl6ZWQuZnVsbFBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaHJlZi5zdGFydHNXaXRoKCcvLycpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYExvY2F0aW9uIFwiJHtyYXdMb2NhdGlvbn1cIiByZXNvbHZlZCB0byBcIiR7aHJlZn1cIi4gQSByZXNvbHZlZCBsb2NhdGlvbiBjYW5ub3Qgc3RhcnQgd2l0aCBtdWx0aXBsZSBzbGFzaGVzLmApO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIW1hdGNoZWRSb3V0ZS5tYXRjaGVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYE5vIG1hdGNoIGZvdW5kIGZvciBsb2NhdGlvbiB3aXRoIHBhdGggXCIke3Jhd0xvY2F0aW9ufVwiYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbG9jYXRpb25Ob3JtYWxpemVkIGlzIGFsd2F5cyBhIG5ldyBvYmplY3RcclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbihsb2NhdGlvbk5vcm1hbGl6ZWQsIG1hdGNoZWRSb3V0ZSwge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBkZWNvZGVQYXJhbXMobWF0Y2hlZFJvdXRlLnBhcmFtcyksXHJcbiAgICAgICAgICAgICAgICBoYXNoOiBkZWNvZGUobG9jYXRpb25Ob3JtYWxpemVkLmhhc2gpLFxyXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RlZEZyb206IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIGhyZWYsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbWF0Y2hlckxvY2F0aW9uO1xyXG4gICAgICAgIC8vIHBhdGggY291bGQgYmUgcmVsYXRpdmUgaW4gb2JqZWN0IGFzIHdlbGxcclxuICAgICAgICBpZiAoJ3BhdGgnIGluIHJhd0xvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgICdwYXJhbXMnIGluIHJhd0xvY2F0aW9uICYmXHJcbiAgICAgICAgICAgICAgICAhKCduYW1lJyBpbiByYXdMb2NhdGlvbikgJiZcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoZSB0eXBlIGlzIG5ldmVyXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhyYXdMb2NhdGlvbi5wYXJhbXMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgUGF0aCBcIiR7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0aGUgdHlwZSBpcyBuZXZlclxyXG4gICAgICAgICAgICAgICAgcmF3TG9jYXRpb24ucGF0aH1cIiB3YXMgcGFzc2VkIHdpdGggcGFyYW1zIGJ1dCB0aGV5IHdpbGwgYmUgaWdub3JlZC4gVXNlIGEgbmFtZWQgcm91dGUgYWxvbmdzaWRlIHBhcmFtcyBpbnN0ZWFkLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hdGNoZXJMb2NhdGlvbiA9IGFzc2lnbih7fSwgcmF3TG9jYXRpb24sIHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IHBhcnNlVVJMKHBhcnNlUXVlcnkkMSwgcmF3TG9jYXRpb24ucGF0aCwgY3VycmVudExvY2F0aW9uLnBhdGgpLnBhdGgsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSBudWxsaXNoIHBhcmFtXHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFBhcmFtcyA9IGFzc2lnbih7fSwgcmF3TG9jYXRpb24ucGFyYW1zKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGFyZ2V0UGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UGFyYW1zW2tleV0gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRQYXJhbXNba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBwYXNzIGVuY29kZWQgdmFsdWVzIHRvIHRoZSBtYXRjaGVyLCBzbyBpdCBjYW4gcHJvZHVjZSBlbmNvZGVkIHBhdGggYW5kIGZ1bGxQYXRoXHJcbiAgICAgICAgICAgIG1hdGNoZXJMb2NhdGlvbiA9IGFzc2lnbih7fSwgcmF3TG9jYXRpb24sIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogZW5jb2RlUGFyYW1zKHJhd0xvY2F0aW9uLnBhcmFtcyksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBjdXJyZW50IGxvY2F0aW9uIHBhcmFtcyBhcmUgZGVjb2RlZCwgd2UgbmVlZCB0byBlbmNvZGUgdGhlbSBpbiBjYXNlIHRoZVxyXG4gICAgICAgICAgICAvLyBtYXRjaGVyIG1lcmdlcyB0aGUgcGFyYW1zXHJcbiAgICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbi5wYXJhbXMgPSBlbmNvZGVQYXJhbXMoY3VycmVudExvY2F0aW9uLnBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1hdGNoZWRSb3V0ZSA9IG1hdGNoZXIucmVzb2x2ZShtYXRjaGVyTG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbik7XHJcbiAgICAgICAgY29uc3QgaGFzaCA9IHJhd0xvY2F0aW9uLmhhc2ggfHwgJyc7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBoYXNoICYmICFoYXNoLnN0YXJ0c1dpdGgoJyMnKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBBIFxcYGhhc2hcXGAgc2hvdWxkIGFsd2F5cyBzdGFydCB3aXRoIHRoZSBjaGFyYWN0ZXIgXCIjXCIuIFJlcGxhY2UgXCIke2hhc2h9XCIgd2l0aCBcIiMke2hhc2h9XCIuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRoZSBtYXRjaGVyIG1pZ2h0IGhhdmUgbWVyZ2VkIGN1cnJlbnQgbG9jYXRpb24gcGFyYW1zLCBzb1xyXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gcnVuIHRoZSBkZWNvZGluZyBhZ2FpblxyXG4gICAgICAgIG1hdGNoZWRSb3V0ZS5wYXJhbXMgPSBub3JtYWxpemVQYXJhbXMoZGVjb2RlUGFyYW1zKG1hdGNoZWRSb3V0ZS5wYXJhbXMpKTtcclxuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHN0cmluZ2lmeVVSTChzdHJpbmdpZnlRdWVyeSQxLCBhc3NpZ24oe30sIHJhd0xvY2F0aW9uLCB7XHJcbiAgICAgICAgICAgIGhhc2g6IGVuY29kZUhhc2goaGFzaCksXHJcbiAgICAgICAgICAgIHBhdGg6IG1hdGNoZWRSb3V0ZS5wYXRoLFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBjb25zdCBocmVmID0gcm91dGVySGlzdG9yeS5jcmVhdGVIcmVmKGZ1bGxQYXRoKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGlmIChocmVmLnN0YXJ0c1dpdGgoJy8vJykpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYExvY2F0aW9uIFwiJHtyYXdMb2NhdGlvbn1cIiByZXNvbHZlZCB0byBcIiR7aHJlZn1cIi4gQSByZXNvbHZlZCBsb2NhdGlvbiBjYW5ub3Qgc3RhcnQgd2l0aCBtdWx0aXBsZSBzbGFzaGVzLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFtYXRjaGVkUm91dGUubWF0Y2hlZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYE5vIG1hdGNoIGZvdW5kIGZvciBsb2NhdGlvbiB3aXRoIHBhdGggXCIkeydwYXRoJyBpbiByYXdMb2NhdGlvbiA/IHJhd0xvY2F0aW9uLnBhdGggOiByYXdMb2NhdGlvbn1cImApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhc3NpZ24oe1xyXG4gICAgICAgICAgICBmdWxsUGF0aCxcclxuICAgICAgICAgICAgLy8ga2VlcCB0aGUgaGFzaCBlbmNvZGVkIHNvIGZ1bGxQYXRoIGlzIGVmZmVjdGl2ZWx5IHBhdGggKyBlbmNvZGVkUXVlcnkgK1xyXG4gICAgICAgICAgICAvLyBoYXNoXHJcbiAgICAgICAgICAgIGhhc2gsXHJcbiAgICAgICAgICAgIHF1ZXJ5OiBcclxuICAgICAgICAgICAgLy8gaWYgdGhlIHVzZXIgaXMgdXNpbmcgYSBjdXN0b20gcXVlcnkgbGliIGxpa2UgcXMsIHdlIG1pZ2h0IGhhdmVcclxuICAgICAgICAgICAgLy8gbmVzdGVkIG9iamVjdHMsIHNvIHdlIGtlZXAgdGhlIHF1ZXJ5IGFzIGlzLCBtZWFuaW5nIGl0IGNhbiBjb250YWluXHJcbiAgICAgICAgICAgIC8vIG51bWJlcnMgYXQgYCRyb3V0ZS5xdWVyeWAsIGJ1dCBhdCB0aGUgcG9pbnQsIHRoZSB1c2VyIHdpbGwgaGF2ZSB0b1xyXG4gICAgICAgICAgICAvLyB1c2UgdGhlaXIgb3duIHR5cGUgYW55d2F5LlxyXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy8zMjgjaXNzdWVjb21tZW50LTY0OTQ4MTU2N1xyXG4gICAgICAgICAgICBzdHJpbmdpZnlRdWVyeSQxID09PSBzdHJpbmdpZnlRdWVyeVxyXG4gICAgICAgICAgICAgICAgPyBub3JtYWxpemVRdWVyeShyYXdMb2NhdGlvbi5xdWVyeSlcclxuICAgICAgICAgICAgICAgIDogKHJhd0xvY2F0aW9uLnF1ZXJ5IHx8IHt9KSxcclxuICAgICAgICB9LCBtYXRjaGVkUm91dGUsIHtcclxuICAgICAgICAgICAgcmVkaXJlY3RlZEZyb206IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgaHJlZixcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGxvY2F0aW9uQXNPYmplY3QodG8pIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHRvID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICA/IHBhcnNlVVJMKHBhcnNlUXVlcnkkMSwgdG8sIGN1cnJlbnRSb3V0ZS52YWx1ZS5wYXRoKVxyXG4gICAgICAgICAgICA6IGFzc2lnbih7fSwgdG8pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb24odG8sIGZyb20pIHtcclxuICAgICAgICBpZiAocGVuZGluZ0xvY2F0aW9uICE9PSB0bykge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUm91dGVyRXJyb3IoOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICBmcm9tLFxyXG4gICAgICAgICAgICAgICAgdG8sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHB1c2godG8pIHtcclxuICAgICAgICByZXR1cm4gcHVzaFdpdGhSZWRpcmVjdCh0byk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZXBsYWNlKHRvKSB7XHJcbiAgICAgICAgcmV0dXJuIHB1c2goYXNzaWduKGxvY2F0aW9uQXNPYmplY3QodG8pLCB7IHJlcGxhY2U6IHRydWUgfSkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaGFuZGxlUmVkaXJlY3RSZWNvcmQodG8pIHtcclxuICAgICAgICBjb25zdCBsYXN0TWF0Y2hlZCA9IHRvLm1hdGNoZWRbdG8ubWF0Y2hlZC5sZW5ndGggLSAxXTtcclxuICAgICAgICBpZiAobGFzdE1hdGNoZWQgJiYgbGFzdE1hdGNoZWQucmVkaXJlY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgeyByZWRpcmVjdCB9ID0gbGFzdE1hdGNoZWQ7XHJcbiAgICAgICAgICAgIGxldCBuZXdUYXJnZXRMb2NhdGlvbiA9IHR5cGVvZiByZWRpcmVjdCA9PT0gJ2Z1bmN0aW9uJyA/IHJlZGlyZWN0KHRvKSA6IHJlZGlyZWN0O1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5ld1RhcmdldExvY2F0aW9uID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgbmV3VGFyZ2V0TG9jYXRpb24gPVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RhcmdldExvY2F0aW9uLmluY2x1ZGVzKCc/JykgfHwgbmV3VGFyZ2V0TG9jYXRpb24uaW5jbHVkZXMoJyMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChuZXdUYXJnZXRMb2NhdGlvbiA9IGxvY2F0aW9uQXNPYmplY3QobmV3VGFyZ2V0TG9jYXRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IC8vIGZvcmNlIGVtcHR5IHBhcmFtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBwYXRoOiBuZXdUYXJnZXRMb2NhdGlvbiB9O1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogZm9yY2UgZW1wdHkgcGFyYW1zIHdoZW4gYSBzdHJpbmcgaXMgcGFzc2VkIHRvIGxldFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvdXRlciBwYXJzZSB0aGVtIGFnYWluXHJcbiAgICAgICAgICAgICAgICBuZXdUYXJnZXRMb2NhdGlvbi5wYXJhbXMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICAhKCdwYXRoJyBpbiBuZXdUYXJnZXRMb2NhdGlvbikgJiZcclxuICAgICAgICAgICAgICAgICEoJ25hbWUnIGluIG5ld1RhcmdldExvY2F0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgSW52YWxpZCByZWRpcmVjdCBmb3VuZDpcXG4ke0pTT04uc3RyaW5naWZ5KG5ld1RhcmdldExvY2F0aW9uLCBudWxsLCAyKX1cXG4gd2hlbiBuYXZpZ2F0aW5nIHRvIFwiJHt0by5mdWxsUGF0aH1cIi4gQSByZWRpcmVjdCBtdXN0IGNvbnRhaW4gYSBuYW1lIG9yIHBhdGguIFRoaXMgd2lsbCBicmVhayBpbiBwcm9kdWN0aW9uLmApO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlZGlyZWN0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbih7XHJcbiAgICAgICAgICAgICAgICBxdWVyeTogdG8ucXVlcnksXHJcbiAgICAgICAgICAgICAgICBoYXNoOiB0by5oYXNoLFxyXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgdHJhbnNmZXJyaW5nIHBhcmFtcyBpZiB0aGUgcmVkaXJlY3QgaGFzIGEgcGF0aFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiAncGF0aCcgaW4gbmV3VGFyZ2V0TG9jYXRpb24gPyB7fSA6IHRvLnBhcmFtcyxcclxuICAgICAgICAgICAgfSwgbmV3VGFyZ2V0TG9jYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHB1c2hXaXRoUmVkaXJlY3QodG8sIHJlZGlyZWN0ZWRGcm9tKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TG9jYXRpb24gPSAocGVuZGluZ0xvY2F0aW9uID0gcmVzb2x2ZSh0bykpO1xyXG4gICAgICAgIGNvbnN0IGZyb20gPSBjdXJyZW50Um91dGUudmFsdWU7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRvLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IGZvcmNlID0gdG8uZm9yY2U7XHJcbiAgICAgICAgLy8gdG8gY291bGQgYmUgYSBzdHJpbmcgd2hlcmUgYHJlcGxhY2VgIGlzIGEgZnVuY3Rpb25cclxuICAgICAgICBjb25zdCByZXBsYWNlID0gdG8ucmVwbGFjZSA9PT0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBzaG91bGRSZWRpcmVjdCA9IGhhbmRsZVJlZGlyZWN0UmVjb3JkKHRhcmdldExvY2F0aW9uKTtcclxuICAgICAgICBpZiAoc2hvdWxkUmVkaXJlY3QpXHJcbiAgICAgICAgICAgIHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KGFzc2lnbihsb2NhdGlvbkFzT2JqZWN0KHNob3VsZFJlZGlyZWN0KSwge1xyXG4gICAgICAgICAgICAgICAgc3RhdGU6IHR5cGVvZiBzaG91bGRSZWRpcmVjdCA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgICAgICAgICA/IGFzc2lnbih7fSwgZGF0YSwgc2hvdWxkUmVkaXJlY3Quc3RhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgZm9yY2UsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlLFxyXG4gICAgICAgICAgICB9KSwgXHJcbiAgICAgICAgICAgIC8vIGtlZXAgb3JpZ2luYWwgcmVkaXJlY3RlZEZyb20gaWYgaXQgZXhpc3RzXHJcbiAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tIHx8IHRhcmdldExvY2F0aW9uKTtcclxuICAgICAgICAvLyBpZiBpdCB3YXMgYSByZWRpcmVjdCB3ZSBhbHJlYWR5IGNhbGxlZCBgcHVzaFdpdGhSZWRpcmVjdGAgYWJvdmVcclxuICAgICAgICBjb25zdCB0b0xvY2F0aW9uID0gdGFyZ2V0TG9jYXRpb247XHJcbiAgICAgICAgdG9Mb2NhdGlvbi5yZWRpcmVjdGVkRnJvbSA9IHJlZGlyZWN0ZWRGcm9tO1xyXG4gICAgICAgIGxldCBmYWlsdXJlO1xyXG4gICAgICAgIGlmICghZm9yY2UgJiYgaXNTYW1lUm91dGVMb2NhdGlvbihzdHJpbmdpZnlRdWVyeSQxLCBmcm9tLCB0YXJnZXRMb2NhdGlvbikpIHtcclxuICAgICAgICAgICAgZmFpbHVyZSA9IGNyZWF0ZVJvdXRlckVycm9yKDE2IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9EVVBMSUNBVEVEICovLCB7IHRvOiB0b0xvY2F0aW9uLCBmcm9tIH0pO1xyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHNjcm9sbCB0byBhbGxvdyBzY3JvbGxpbmcgdG8gdGhlIHNhbWUgYW5jaG9yXHJcbiAgICAgICAgICAgIGhhbmRsZVNjcm9sbChmcm9tLCBmcm9tLCBcclxuICAgICAgICAgICAgLy8gdGhpcyBpcyBhIHB1c2gsIHRoZSBvbmx5IHdheSBmb3IgaXQgdG8gYmUgdHJpZ2dlcmVkIGZyb20gYVxyXG4gICAgICAgICAgICAvLyBoaXN0b3J5Lmxpc3RlbiBpcyB3aXRoIGEgcmVkaXJlY3QsIHdoaWNoIG1ha2VzIGl0IGJlY29tZSBhIHB1c2hcclxuICAgICAgICAgICAgdHJ1ZSwgXHJcbiAgICAgICAgICAgIC8vIFRoaXMgY2Fubm90IGJlIHRoZSBmaXJzdCBuYXZpZ2F0aW9uIGJlY2F1c2UgdGhlIGluaXRpYWwgbG9jYXRpb25cclxuICAgICAgICAgICAgLy8gY2Fubm90IGJlIG1hbnVhbGx5IG5hdmlnYXRlZCB0b1xyXG4gICAgICAgICAgICBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoZmFpbHVyZSA/IFByb21pc2UucmVzb2x2ZShmYWlsdXJlKSA6IG5hdmlnYXRlKHRvTG9jYXRpb24sIGZyb20pKVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yKVxyXG4gICAgICAgICAgICA/IC8vIG5hdmlnYXRpb24gcmVkaXJlY3RzIHN0aWxsIG1hcmsgdGhlIHJvdXRlciBhcyByZWFkeVxyXG4gICAgICAgICAgICAgICAgaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvciwgMiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QgKi8pXHJcbiAgICAgICAgICAgICAgICAgICAgPyBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIDogbWFya0FzUmVhZHkoZXJyb3IpIC8vIGFsc28gcmV0dXJucyB0aGUgZXJyb3JcclxuICAgICAgICAgICAgOiAvLyByZWplY3QgYW55IHVua25vd24gZXJyb3JcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJFcnJvcihlcnJvciwgdG9Mb2NhdGlvbiwgZnJvbSkpXHJcbiAgICAgICAgICAgIC50aGVuKChmYWlsdXJlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmYWlsdXJlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNOYXZpZ2F0aW9uRmFpbHVyZShmYWlsdXJlLCAyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSByZWRpcmVjdGluZyB0byB0aGUgc2FtZSBsb2NhdGlvbiB3ZSB3ZXJlIGFscmVhZHkgYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTYW1lUm91dGVMb2NhdGlvbihzdHJpbmdpZnlRdWVyeSQxLCByZXNvbHZlKGZhaWx1cmUudG8pLCB0b0xvY2F0aW9uKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgd2UgaGF2ZSBkb25lIGl0IGEgY291cGxlIG9mIHRpbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGFkZGVkIG9ubHkgaW4gZGV2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZWRpcmVjdGVkRnJvbS5fY291bnQgPSByZWRpcmVjdGVkRnJvbS5fY291bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tLl9jb3VudCArIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMSkgPiAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBEZXRlY3RlZCBhbiBpbmZpbml0ZSByZWRpcmVjdGlvbiBpbiBhIG5hdmlnYXRpb24gZ3VhcmQgd2hlbiBnb2luZyBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0b0xvY2F0aW9uLmZ1bGxQYXRofVwiLiBBYm9ydGluZyB0byBhdm9pZCBhIFN0YWNrIE92ZXJmbG93LiBUaGlzIHdpbGwgYnJlYWsgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0luZmluaXRlIHJlZGlyZWN0IGluIG5hdmlnYXRpb24gZ3VhcmQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlIGFuIGV4aXN0aW5nIHJlcGxhY2VtZW50IGJ1dCBhbGxvdyB0aGUgcmVkaXJlY3QgdG8gb3ZlcnJpZGUgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZSxcclxuICAgICAgICAgICAgICAgICAgICB9LCBsb2NhdGlvbkFzT2JqZWN0KGZhaWx1cmUudG8pLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0eXBlb2YgZmFpbHVyZS50byA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXNzaWduKHt9LCBkYXRhLCBmYWlsdXJlLnRvLnN0YXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZSxcclxuICAgICAgICAgICAgICAgICAgICB9KSwgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIHJlZGlyZWN0ZWRGcm9tIGlmIGFueVxyXG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tIHx8IHRvTG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgZmFpbCB3ZSBkb24ndCBmaW5hbGl6ZSB0aGUgbmF2aWdhdGlvblxyXG4gICAgICAgICAgICAgICAgZmFpbHVyZSA9IGZpbmFsaXplTmF2aWdhdGlvbih0b0xvY2F0aW9uLCBmcm9tLCB0cnVlLCByZXBsYWNlLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmlnZ2VyQWZ0ZXJFYWNoKHRvTG9jYXRpb24sIGZyb20sIGZhaWx1cmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbHVyZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHRvIHJlamVjdCBhbmQgc2tpcCBhbGwgbmF2aWdhdGlvbiBndWFyZHMgaWYgYSBuZXcgbmF2aWdhdGlvbiBoYXBwZW5lZFxyXG4gICAgICogQHBhcmFtIHRvXHJcbiAgICAgKiBAcGFyYW0gZnJvbVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbkFuZFJlamVjdCh0bywgZnJvbSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb24odG8sIGZyb20pO1xyXG4gICAgICAgIHJldHVybiBlcnJvciA/IFByb21pc2UucmVqZWN0KGVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogcmVmYWN0b3IgdGhlIHdob2xlIGJlZm9yZSBndWFyZHMgYnkgaW50ZXJuYWxseSB1c2luZyByb3V0ZXIuYmVmb3JlRWFjaFxyXG4gICAgZnVuY3Rpb24gbmF2aWdhdGUodG8sIGZyb20pIHtcclxuICAgICAgICBsZXQgZ3VhcmRzO1xyXG4gICAgICAgIGNvbnN0IFtsZWF2aW5nUmVjb3JkcywgdXBkYXRpbmdSZWNvcmRzLCBlbnRlcmluZ1JlY29yZHNdID0gZXh0cmFjdENoYW5naW5nUmVjb3Jkcyh0bywgZnJvbSk7XHJcbiAgICAgICAgLy8gYWxsIGNvbXBvbmVudHMgaGVyZSBoYXZlIGJlZW4gcmVzb2x2ZWQgb25jZSBiZWNhdXNlIHdlIGFyZSBsZWF2aW5nXHJcbiAgICAgICAgZ3VhcmRzID0gZXh0cmFjdENvbXBvbmVudHNHdWFyZHMobGVhdmluZ1JlY29yZHMucmV2ZXJzZSgpLCAnYmVmb3JlUm91dGVMZWF2ZScsIHRvLCBmcm9tKTtcclxuICAgICAgICAvLyBsZWF2aW5nUmVjb3JkcyBpcyBhbHJlYWR5IHJldmVyc2VkXHJcbiAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgbGVhdmluZ1JlY29yZHMpIHtcclxuICAgICAgICAgICAgcmVjb3JkLmxlYXZlR3VhcmRzLmZvckVhY2goZ3VhcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrID0gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb25BbmRSZWplY3QuYmluZChudWxsLCB0bywgZnJvbSk7XHJcbiAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xyXG4gICAgICAgIC8vIHJ1biB0aGUgcXVldWUgb2YgcGVyIHJvdXRlIGJlZm9yZVJvdXRlTGVhdmUgZ3VhcmRzXHJcbiAgICAgICAgcmV0dXJuIChydW5HdWFyZFF1ZXVlKGd1YXJkcylcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBnbG9iYWwgZ3VhcmRzIGJlZm9yZUVhY2hcclxuICAgICAgICAgICAgZ3VhcmRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ3VhcmQgb2YgYmVmb3JlR3VhcmRzLmxpc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XHJcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBpbiBjb21wb25lbnRzIGJlZm9yZVJvdXRlVXBkYXRlXHJcbiAgICAgICAgICAgIGd1YXJkcyA9IGV4dHJhY3RDb21wb25lbnRzR3VhcmRzKHVwZGF0aW5nUmVjb3JkcywgJ2JlZm9yZVJvdXRlVXBkYXRlJywgdG8sIGZyb20pO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiB1cGRhdGluZ1JlY29yZHMpIHtcclxuICAgICAgICAgICAgICAgIHJlY29yZC51cGRhdGVHdWFyZHMuZm9yRWFjaChndWFyZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcclxuICAgICAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlRW50ZXIgZ3VhcmRzXHJcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgcm91dGUgYmVmb3JlRW50ZXJcclxuICAgICAgICAgICAgZ3VhcmRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIHRvLm1hdGNoZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCB0cmlnZ2VyIGJlZm9yZUVudGVyIG9uIHJldXNlZCB2aWV3c1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlY29yZC5iZWZvcmVFbnRlciAmJiAhZnJvbS5tYXRjaGVkLmluY2x1ZGVzKHJlY29yZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShyZWNvcmQuYmVmb3JlRW50ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmVmb3JlRW50ZXIgb2YgcmVjb3JkLmJlZm9yZUVudGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihiZWZvcmVFbnRlciwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4ocmVjb3JkLmJlZm9yZUVudGVyLCB0bywgZnJvbSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XHJcbiAgICAgICAgICAgIC8vIHJ1biB0aGUgcXVldWUgb2YgcGVyIHJvdXRlIGJlZm9yZUVudGVyIGd1YXJkc1xyXG4gICAgICAgICAgICByZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gTk9URTogYXQgdGhpcyBwb2ludCB0by5tYXRjaGVkIGlzIG5vcm1hbGl6ZWQgYW5kIGRvZXMgbm90IGNvbnRhaW4gYW55ICgpID0+IFByb21pc2U8Q29tcG9uZW50PlxyXG4gICAgICAgICAgICAvLyBjbGVhciBleGlzdGluZyBlbnRlckNhbGxiYWNrcywgdGhlc2UgYXJlIGFkZGVkIGJ5IGV4dHJhY3RDb21wb25lbnRzR3VhcmRzXHJcbiAgICAgICAgICAgIHRvLm1hdGNoZWQuZm9yRWFjaChyZWNvcmQgPT4gKHJlY29yZC5lbnRlckNhbGxiYWNrcyA9IHt9KSk7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGluLWNvbXBvbmVudCBiZWZvcmVSb3V0ZUVudGVyXHJcbiAgICAgICAgICAgIGd1YXJkcyA9IGV4dHJhY3RDb21wb25lbnRzR3VhcmRzKGVudGVyaW5nUmVjb3JkcywgJ2JlZm9yZVJvdXRlRW50ZXInLCB0bywgZnJvbSk7XHJcbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcclxuICAgICAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlRW50ZXIgZ3VhcmRzXHJcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBnbG9iYWwgZ3VhcmRzIGJlZm9yZVJlc29sdmVcclxuICAgICAgICAgICAgZ3VhcmRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ3VhcmQgb2YgYmVmb3JlUmVzb2x2ZUd1YXJkcy5saXN0KCkpIHtcclxuICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIGNhdGNoIGFueSBuYXZpZ2F0aW9uIGNhbmNlbGVkXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnIsIDggLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRCAqLylcclxuICAgICAgICAgICAgPyBlcnJcclxuICAgICAgICAgICAgOiBQcm9taXNlLnJlamVjdChlcnIpKSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB0cmlnZ2VyQWZ0ZXJFYWNoKHRvLCBmcm9tLCBmYWlsdXJlKSB7XHJcbiAgICAgICAgLy8gbmF2aWdhdGlvbiBpcyBjb25maXJtZWQsIGNhbGwgYWZ0ZXJHdWFyZHNcclxuICAgICAgICAvLyBUT0RPOiB3cmFwIHdpdGggZXJyb3IgaGFuZGxlcnNcclxuICAgICAgICBmb3IgKGNvbnN0IGd1YXJkIG9mIGFmdGVyR3VhcmRzLmxpc3QoKSlcclxuICAgICAgICAgICAgZ3VhcmQodG8sIGZyb20sIGZhaWx1cmUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiAtIENsZWFucyB1cCBhbnkgbmF2aWdhdGlvbiBndWFyZHNcclxuICAgICAqIC0gQ2hhbmdlcyB0aGUgdXJsIGlmIG5lY2Vzc2FyeVxyXG4gICAgICogLSBDYWxscyB0aGUgc2Nyb2xsQmVoYXZpb3JcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZmluYWxpemVOYXZpZ2F0aW9uKHRvTG9jYXRpb24sIGZyb20sIGlzUHVzaCwgcmVwbGFjZSwgZGF0YSkge1xyXG4gICAgICAgIC8vIGEgbW9yZSByZWNlbnQgbmF2aWdhdGlvbiB0b29rIHBsYWNlXHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbih0b0xvY2F0aW9uLCBmcm9tKTtcclxuICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgICAgICAvLyBvbmx5IGNvbnNpZGVyIGFzIHB1c2ggaWYgaXQncyBub3QgdGhlIGZpcnN0IG5hdmlnYXRpb25cclxuICAgICAgICBjb25zdCBpc0ZpcnN0TmF2aWdhdGlvbiA9IGZyb20gPT09IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQ7XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSAhaXNCcm93c2VyID8ge30gOiBoaXN0b3J5LnN0YXRlO1xyXG4gICAgICAgIC8vIGNoYW5nZSBVUkwgb25seSBpZiB0aGUgdXNlciBkaWQgYSBwdXNoL3JlcGxhY2UgYW5kIGlmIGl0J3Mgbm90IHRoZSBpbml0aWFsIG5hdmlnYXRpb24gYmVjYXVzZVxyXG4gICAgICAgIC8vIGl0J3MganVzdCByZWZsZWN0aW5nIHRoZSB1cmxcclxuICAgICAgICBpZiAoaXNQdXNoKSB7XHJcbiAgICAgICAgICAgIC8vIG9uIHRoZSBpbml0aWFsIG5hdmlnYXRpb24sIHdlIHdhbnQgdG8gcmV1c2UgdGhlIHNjcm9sbCBwb3NpdGlvbiBmcm9tXHJcbiAgICAgICAgICAgIC8vIGhpc3Rvcnkgc3RhdGUgaWYgaXQgZXhpc3RzXHJcbiAgICAgICAgICAgIGlmIChyZXBsYWNlIHx8IGlzRmlyc3ROYXZpZ2F0aW9uKVxyXG4gICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5yZXBsYWNlKHRvTG9jYXRpb24uZnVsbFBhdGgsIGFzc2lnbih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBpc0ZpcnN0TmF2aWdhdGlvbiAmJiBzdGF0ZSAmJiBzdGF0ZS5zY3JvbGwsXHJcbiAgICAgICAgICAgICAgICB9LCBkYXRhKSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkucHVzaCh0b0xvY2F0aW9uLmZ1bGxQYXRoLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWNjZXB0IGN1cnJlbnQgbmF2aWdhdGlvblxyXG4gICAgICAgIGN1cnJlbnRSb3V0ZS52YWx1ZSA9IHRvTG9jYXRpb247XHJcbiAgICAgICAgaGFuZGxlU2Nyb2xsKHRvTG9jYXRpb24sIGZyb20sIGlzUHVzaCwgaXNGaXJzdE5hdmlnYXRpb24pO1xyXG4gICAgICAgIG1hcmtBc1JlYWR5KCk7XHJcbiAgICB9XHJcbiAgICBsZXQgcmVtb3ZlSGlzdG9yeUxpc3RlbmVyO1xyXG4gICAgLy8gYXR0YWNoIGxpc3RlbmVyIHRvIGhpc3RvcnkgdG8gdHJpZ2dlciBuYXZpZ2F0aW9uc1xyXG4gICAgZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy8gYXZvaWQgc2V0dGluZyB1cCBsaXN0ZW5lcnMgdHdpY2UgZHVlIHRvIGFuIGludmFsaWQgZmlyc3QgbmF2aWdhdGlvblxyXG4gICAgICAgIGlmIChyZW1vdmVIaXN0b3J5TGlzdGVuZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICByZW1vdmVIaXN0b3J5TGlzdGVuZXIgPSByb3V0ZXJIaXN0b3J5Lmxpc3RlbigodG8sIF9mcm9tLCBpbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcm91dGVyLmxpc3RlbmluZylcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgLy8gY2Fubm90IGJlIGEgcmVkaXJlY3Qgcm91dGUgYmVjYXVzZSBpdCB3YXMgaW4gaGlzdG9yeVxyXG4gICAgICAgICAgICBjb25zdCB0b0xvY2F0aW9uID0gcmVzb2x2ZSh0byk7XHJcbiAgICAgICAgICAgIC8vIGR1ZSB0byBkeW5hbWljIHJvdXRpbmcsIGFuZCB0byBoYXNoIGhpc3Rvcnkgd2l0aCBtYW51YWwgbmF2aWdhdGlvblxyXG4gICAgICAgICAgICAvLyAobWFudWFsbHkgY2hhbmdpbmcgdGhlIHVybCBvciBjYWxsaW5nIGhpc3RvcnkuaGFzaCA9ICcjL3NvbWV3aGVyZScpLFxyXG4gICAgICAgICAgICAvLyB0aGVyZSBjb3VsZCBiZSBhIHJlZGlyZWN0IHJlY29yZCBpbiBoaXN0b3J5XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFJlZGlyZWN0ID0gaGFuZGxlUmVkaXJlY3RSZWNvcmQodG9Mb2NhdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChzaG91bGRSZWRpcmVjdCkge1xyXG4gICAgICAgICAgICAgICAgcHVzaFdpdGhSZWRpcmVjdChhc3NpZ24oc2hvdWxkUmVkaXJlY3QsIHsgcmVwbGFjZTogdHJ1ZSB9KSwgdG9Mb2NhdGlvbikuY2F0Y2gobm9vcCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gdG9Mb2NhdGlvbjtcclxuICAgICAgICAgICAgY29uc3QgZnJvbSA9IGN1cnJlbnRSb3V0ZS52YWx1ZTtcclxuICAgICAgICAgICAgLy8gVE9ETzogc2hvdWxkIGJlIG1vdmVkIHRvIHdlYiBoaXN0b3J5P1xyXG4gICAgICAgICAgICBpZiAoaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBzYXZlU2Nyb2xsUG9zaXRpb24oZ2V0U2Nyb2xsS2V5KGZyb20uZnVsbFBhdGgsIGluZm8uZGVsdGEpLCBjb21wdXRlU2Nyb2xsUG9zaXRpb24oKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmF2aWdhdGUodG9Mb2NhdGlvbiwgZnJvbSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCA0IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9BQk9SVEVEICovIHwgOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCAyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBIZXJlIHdlIGNvdWxkIGNhbGwgaWYgKGluZm8uZGVsdGEpIHJvdXRlckhpc3RvcnkuZ28oLWluZm8uZGVsdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFsc2UpIGJ1dCB0aGlzIGlzIGJ1ZyBwcm9uZSBhcyB3ZSBoYXZlIG5vIHdheSB0byB3YWl0IHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5hdmlnYXRpb24gdG8gYmUgZmluaXNoZWQgYmVmb3JlIGNhbGxpbmcgcHVzaFdpdGhSZWRpcmVjdC4gVXNpbmdcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIHNldFRpbWVvdXQgb2YgMTZtcyBzZWVtcyB0byB3b3JrIGJ1dCB0aGVyZSBpcyBubyBndWFyYW50ZWUgZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgdG8gd29yayBvbiBldmVyeSBicm93c2VyLiBTbyBpbnN0ZWFkIHdlIGRvIG5vdCByZXN0b3JlIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhpc3RvcnkgZW50cnkgYW5kIHRyaWdnZXIgYSBuZXcgbmF2aWdhdGlvbiBhcyByZXF1ZXN0ZWQgYnkgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbmF2aWdhdGlvbiBndWFyZC5cclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZXJyb3IgaXMgYWxyZWFkeSBoYW5kbGVkIGJ5IHJvdXRlci5wdXNoIHdlIGp1c3Qgd2FudCB0byBhdm9pZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZ2dpbmcgdGhlIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdpdGhSZWRpcmVjdChlcnJvci50bywgdG9Mb2NhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIGFuIHVuY2F1Z2h0IHJlamVjdGlvbiwgbGV0IHB1c2ggY2FsbCB0cmlnZ2VyRXJyb3JcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZhaWx1cmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYW51YWwgY2hhbmdlIGluIGhhc2ggaGlzdG9yeSAjOTE2IGVuZGluZyB1cCBpbiB0aGUgVVJMIG5vdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGFuZ2luZywgYnV0IGl0IHdhcyBjaGFuZ2VkIGJ5IHRoZSBtYW51YWwgdXJsIGNoYW5nZSwgc28gd2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBtYW51YWxseSBjaGFuZ2UgaXQgb3Vyc2VsdmVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDQgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgKi8gfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTYgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0RVUExJQ0FURUQgKi8pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaW5mby5kZWx0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mby50eXBlID09PSBOYXZpZ2F0aW9uVHlwZS5wb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkuZ28oLTEsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChub29wKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhdm9pZCB0aGUgdGhlbiBicmFuY2hcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCByZXN0b3JlIGhpc3Rvcnkgb24gdW5rbm93biBkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgIGlmIChpbmZvLmRlbHRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtaW5mby5kZWx0YSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdW5yZWNvZ25pemVkIGVycm9yLCB0cmFuc2ZlciB0byB0aGUgZ2xvYmFsIGhhbmRsZXJcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmlnZ2VyRXJyb3IoZXJyb3IsIHRvTG9jYXRpb24sIGZyb20pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGZhaWx1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgIGZhaWx1cmUgPVxyXG4gICAgICAgICAgICAgICAgICAgIGZhaWx1cmUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxpemVOYXZpZ2F0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBuYXZpZ2F0aW9uLCBhbGwgbWF0Y2hlZCBjb21wb25lbnRzIGFyZSByZXNvbHZlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0xvY2F0aW9uLCBmcm9tLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvLyByZXZlcnQgdGhlIG5hdmlnYXRpb25cclxuICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uZGVsdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBuZXcgbmF2aWdhdGlvbiBoYXMgYmVlbiB0cmlnZ2VyZWQsIHNvIHdlIGRvIG5vdCB3YW50IHRvIHJldmVydCwgdGhhdCB3aWxsIGNoYW5nZSB0aGUgY3VycmVudCBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudHJ5IHdoaWxlIGEgZGlmZmVyZW50IHJvdXRlIGlzIGRpc3BsYXllZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhaXNOYXZpZ2F0aW9uRmFpbHVyZShmYWlsdXJlLCA4IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9DQU5DRUxMRUQgKi8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkuZ28oLWluZm8uZGVsdGEsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5mby50eXBlID09PSBOYXZpZ2F0aW9uVHlwZS5wb3AgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOYXZpZ2F0aW9uRmFpbHVyZShmYWlsdXJlLCA0IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9BQk9SVEVEICovIHwgMTYgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0RVUExJQ0FURUQgKi8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hbnVhbCBjaGFuZ2UgaW4gaGFzaCBoaXN0b3J5ICM5MTZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBsaWtlIGEgcHVzaCBidXQgbGFja3MgdGhlIGluZm9ybWF0aW9uIG9mIHRoZSBkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtMSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRyaWdnZXJBZnRlckVhY2godG9Mb2NhdGlvbiwgZnJvbSwgZmFpbHVyZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2gobm9vcCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBJbml0aWFsaXphdGlvbiBhbmQgRXJyb3JzXHJcbiAgICBsZXQgcmVhZHlIYW5kbGVycyA9IHVzZUNhbGxiYWNrcygpO1xyXG4gICAgbGV0IGVycm9ySGFuZGxlcnMgPSB1c2VDYWxsYmFja3MoKTtcclxuICAgIGxldCByZWFkeTtcclxuICAgIC8qKlxyXG4gICAgICogVHJpZ2dlciBlcnJvckhhbmRsZXJzIGFkZGVkIHZpYSBvbkVycm9yIGFuZCB0aHJvd3MgdGhlIGVycm9yIGFzIHdlbGxcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBlcnJvciB0byB0aHJvd1xyXG4gICAgICogQHBhcmFtIHRvIC0gbG9jYXRpb24gd2Ugd2VyZSBuYXZpZ2F0aW5nIHRvIHdoZW4gdGhlIGVycm9yIGhhcHBlbmVkXHJcbiAgICAgKiBAcGFyYW0gZnJvbSAtIGxvY2F0aW9uIHdlIHdlcmUgbmF2aWdhdGluZyBmcm9tIHdoZW4gdGhlIGVycm9yIGhhcHBlbmVkXHJcbiAgICAgKiBAcmV0dXJucyB0aGUgZXJyb3IgYXMgYSByZWplY3RlZCBwcm9taXNlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHRyaWdnZXJFcnJvcihlcnJvciwgdG8sIGZyb20pIHtcclxuICAgICAgICBtYXJrQXNSZWFkeShlcnJvcik7XHJcbiAgICAgICAgY29uc3QgbGlzdCA9IGVycm9ySGFuZGxlcnMubGlzdCgpO1xyXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsaXN0LmZvckVhY2goaGFuZGxlciA9PiBoYW5kbGVyKGVycm9yLCB0bywgZnJvbSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybigndW5jYXVnaHQgZXJyb3IgZHVyaW5nIHJvdXRlIG5hdmlnYXRpb246Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpc1JlYWR5KCkge1xyXG4gICAgICAgIGlmIChyZWFkeSAmJiBjdXJyZW50Um91dGUudmFsdWUgIT09IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQpXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZWFkeUhhbmRsZXJzLmFkZChbcmVzb2x2ZSwgcmVqZWN0XSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBtYXJrQXNSZWFkeShlcnIpIHtcclxuICAgICAgICBpZiAoIXJlYWR5KSB7XHJcbiAgICAgICAgICAgIC8vIHN0aWxsIG5vdCByZWFkeSBpZiBhbiBlcnJvciBoYXBwZW5lZFxyXG4gICAgICAgICAgICByZWFkeSA9ICFlcnI7XHJcbiAgICAgICAgICAgIHNldHVwTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgIHJlYWR5SGFuZGxlcnNcclxuICAgICAgICAgICAgICAgIC5saXN0KClcclxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChbcmVzb2x2ZSwgcmVqZWN0XSkgPT4gKGVyciA/IHJlamVjdChlcnIpIDogcmVzb2x2ZSgpKSk7XHJcbiAgICAgICAgICAgIHJlYWR5SGFuZGxlcnMucmVzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVycjtcclxuICAgIH1cclxuICAgIC8vIFNjcm9sbCBiZWhhdmlvclxyXG4gICAgZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKHRvLCBmcm9tLCBpc1B1c2gsIGlzRmlyc3ROYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgY29uc3QgeyBzY3JvbGxCZWhhdmlvciB9ID0gb3B0aW9ucztcclxuICAgICAgICBpZiAoIWlzQnJvd3NlciB8fCAhc2Nyb2xsQmVoYXZpb3IpXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9ICghaXNQdXNoICYmIGdldFNhdmVkU2Nyb2xsUG9zaXRpb24oZ2V0U2Nyb2xsS2V5KHRvLmZ1bGxQYXRoLCAwKSkpIHx8XHJcbiAgICAgICAgICAgICgoaXNGaXJzdE5hdmlnYXRpb24gfHwgIWlzUHVzaCkgJiZcclxuICAgICAgICAgICAgICAgIGhpc3Rvcnkuc3RhdGUgJiZcclxuICAgICAgICAgICAgICAgIGhpc3Rvcnkuc3RhdGUuc2Nyb2xsKSB8fFxyXG4gICAgICAgICAgICBudWxsO1xyXG4gICAgICAgIHJldHVybiBuZXh0VGljaygpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHNjcm9sbEJlaGF2aW9yKHRvLCBmcm9tLCBzY3JvbGxQb3NpdGlvbikpXHJcbiAgICAgICAgICAgIC50aGVuKHBvc2l0aW9uID0+IHBvc2l0aW9uICYmIHNjcm9sbFRvUG9zaXRpb24ocG9zaXRpb24pKVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHRyaWdnZXJFcnJvcihlcnIsIHRvLCBmcm9tKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBnbyA9IChkZWx0YSkgPT4gcm91dGVySGlzdG9yeS5nbyhkZWx0YSk7XHJcbiAgICBsZXQgc3RhcnRlZDtcclxuICAgIGNvbnN0IGluc3RhbGxlZEFwcHMgPSBuZXcgU2V0KCk7XHJcbiAgICBjb25zdCByb3V0ZXIgPSB7XHJcbiAgICAgICAgY3VycmVudFJvdXRlLFxyXG4gICAgICAgIGxpc3RlbmluZzogdHJ1ZSxcclxuICAgICAgICBhZGRSb3V0ZSxcclxuICAgICAgICByZW1vdmVSb3V0ZSxcclxuICAgICAgICBoYXNSb3V0ZSxcclxuICAgICAgICBnZXRSb3V0ZXMsXHJcbiAgICAgICAgcmVzb2x2ZSxcclxuICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgIHB1c2gsXHJcbiAgICAgICAgcmVwbGFjZSxcclxuICAgICAgICBnbyxcclxuICAgICAgICBiYWNrOiAoKSA9PiBnbygtMSksXHJcbiAgICAgICAgZm9yd2FyZDogKCkgPT4gZ28oMSksXHJcbiAgICAgICAgYmVmb3JlRWFjaDogYmVmb3JlR3VhcmRzLmFkZCxcclxuICAgICAgICBiZWZvcmVSZXNvbHZlOiBiZWZvcmVSZXNvbHZlR3VhcmRzLmFkZCxcclxuICAgICAgICBhZnRlckVhY2g6IGFmdGVyR3VhcmRzLmFkZCxcclxuICAgICAgICBvbkVycm9yOiBlcnJvckhhbmRsZXJzLmFkZCxcclxuICAgICAgICBpc1JlYWR5LFxyXG4gICAgICAgIGluc3RhbGwoYXBwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlciA9IHRoaXM7XHJcbiAgICAgICAgICAgIGFwcC5jb21wb25lbnQoJ1JvdXRlckxpbmsnLCBSb3V0ZXJMaW5rKTtcclxuICAgICAgICAgICAgYXBwLmNvbXBvbmVudCgnUm91dGVyVmlldycsIFJvdXRlclZpZXcpO1xyXG4gICAgICAgICAgICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHJvdXRlciA9IHJvdXRlcjtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywgJyRyb3V0ZScsIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHVucmVmKGN1cnJlbnRSb3V0ZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB0aGlzIGluaXRpYWwgbmF2aWdhdGlvbiBpcyBvbmx5IG5lY2Vzc2FyeSBvbiBjbGllbnQsIG9uIHNlcnZlciBpdCBkb2Vzbid0XHJcbiAgICAgICAgICAgIC8vIG1ha2Ugc2Vuc2UgYmVjYXVzZSBpdCB3aWxsIGNyZWF0ZSBhbiBleHRyYSB1bm5lY2Vzc2FyeSBuYXZpZ2F0aW9uIGFuZCBjb3VsZFxyXG4gICAgICAgICAgICAvLyBsZWFkIHRvIHByb2JsZW1zXHJcbiAgICAgICAgICAgIGlmIChpc0Jyb3dzZXIgJiZcclxuICAgICAgICAgICAgICAgIC8vIHVzZWQgZm9yIHRoZSBpbml0aWFsIG5hdmlnYXRpb24gY2xpZW50IHNpZGUgdG8gYXZvaWQgcHVzaGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gbXVsdGlwbGUgdGltZXMgd2hlbiB0aGUgcm91dGVyIGlzIHVzZWQgaW4gbXVsdGlwbGUgYXBwc1xyXG4gICAgICAgICAgICAgICAgIXN0YXJ0ZWQgJiZcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRSb3V0ZS52YWx1ZSA9PT0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2VlIGFib3ZlXHJcbiAgICAgICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHB1c2gocm91dGVySGlzdG9yeS5sb2NhdGlvbikuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKCdVbmV4cGVjdGVkIGVycm9yIHdoZW4gc3RhcnRpbmcgdGhlIHJvdXRlcjonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVhY3RpdmVSb3V0ZSA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0aGUga2V5IG1hdGNoZXNcclxuICAgICAgICAgICAgICAgIHJlYWN0aXZlUm91dGVba2V5XSA9IGNvbXB1dGVkKCgpID0+IGN1cnJlbnRSb3V0ZS52YWx1ZVtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcHAucHJvdmlkZShyb3V0ZXJLZXksIHJvdXRlcik7XHJcbiAgICAgICAgICAgIGFwcC5wcm92aWRlKHJvdXRlTG9jYXRpb25LZXksIHJlYWN0aXZlKHJlYWN0aXZlUm91dGUpKTtcclxuICAgICAgICAgICAgYXBwLnByb3ZpZGUocm91dGVyVmlld0xvY2F0aW9uS2V5LCBjdXJyZW50Um91dGUpO1xyXG4gICAgICAgICAgICBjb25zdCB1bm1vdW50QXBwID0gYXBwLnVubW91bnQ7XHJcbiAgICAgICAgICAgIGluc3RhbGxlZEFwcHMuYWRkKGFwcCk7XHJcbiAgICAgICAgICAgIGFwcC51bm1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFsbGVkQXBwcy5kZWxldGUoYXBwKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3V0ZXIgaXMgbm90IGF0dGFjaGVkIHRvIGFuIGFwcCBhbnltb3JlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFsbGVkQXBwcy5zaXplIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGludmFsaWRhdGUgdGhlIGN1cnJlbnQgbmF2aWdhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSGlzdG9yeUxpc3RlbmVyICYmIHJlbW92ZUhpc3RvcnlMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUhpc3RvcnlMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJvdXRlLnZhbHVlID0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVubW91bnRBcHAoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBwcm9iYWJseSBuZWVkcyB0byBiZSB1cGRhdGVkIHNvIGl0IGNhbiBiZSB1c2VkIGJ5IHZ1ZS10ZXJtdWlcclxuICAgICAgICAgICAgaWYgKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiBpc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgICAgIGFkZERldnRvb2xzKGFwcCwgcm91dGVyLCBtYXRjaGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHJvdXRlcjtcclxufVxyXG5mdW5jdGlvbiBydW5HdWFyZFF1ZXVlKGd1YXJkcykge1xyXG4gICAgcmV0dXJuIGd1YXJkcy5yZWR1Y2UoKHByb21pc2UsIGd1YXJkKSA9PiBwcm9taXNlLnRoZW4oKCkgPT4gZ3VhcmQoKSksIFByb21pc2UucmVzb2x2ZSgpKTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0Q2hhbmdpbmdSZWNvcmRzKHRvLCBmcm9tKSB7XHJcbiAgICBjb25zdCBsZWF2aW5nUmVjb3JkcyA9IFtdO1xyXG4gICAgY29uc3QgdXBkYXRpbmdSZWNvcmRzID0gW107XHJcbiAgICBjb25zdCBlbnRlcmluZ1JlY29yZHMgPSBbXTtcclxuICAgIGNvbnN0IGxlbiA9IE1hdGgubWF4KGZyb20ubWF0Y2hlZC5sZW5ndGgsIHRvLm1hdGNoZWQubGVuZ3RoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjb25zdCByZWNvcmRGcm9tID0gZnJvbS5tYXRjaGVkW2ldO1xyXG4gICAgICAgIGlmIChyZWNvcmRGcm9tKSB7XHJcbiAgICAgICAgICAgIGlmICh0by5tYXRjaGVkLmZpbmQocmVjb3JkID0+IGlzU2FtZVJvdXRlUmVjb3JkKHJlY29yZCwgcmVjb3JkRnJvbSkpKVxyXG4gICAgICAgICAgICAgICAgdXBkYXRpbmdSZWNvcmRzLnB1c2gocmVjb3JkRnJvbSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGxlYXZpbmdSZWNvcmRzLnB1c2gocmVjb3JkRnJvbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlY29yZFRvID0gdG8ubWF0Y2hlZFtpXTtcclxuICAgICAgICBpZiAocmVjb3JkVG8pIHtcclxuICAgICAgICAgICAgLy8gdGhlIHR5cGUgZG9lc24ndCBtYXR0ZXIgYmVjYXVzZSB3ZSBhcmUgY29tcGFyaW5nIHBlciByZWZlcmVuY2VcclxuICAgICAgICAgICAgaWYgKCFmcm9tLm1hdGNoZWQuZmluZChyZWNvcmQgPT4gaXNTYW1lUm91dGVSZWNvcmQocmVjb3JkLCByZWNvcmRUbykpKSB7XHJcbiAgICAgICAgICAgICAgICBlbnRlcmluZ1JlY29yZHMucHVzaChyZWNvcmRUbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW2xlYXZpbmdSZWNvcmRzLCB1cGRhdGluZ1JlY29yZHMsIGVudGVyaW5nUmVjb3Jkc107XHJcbn1cblxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHJvdXRlciBpbnN0YW5jZS4gRXF1aXZhbGVudCB0byB1c2luZyBgJHJvdXRlcmAgaW5zaWRlXHJcbiAqIHRlbXBsYXRlcy5cclxuICovXHJcbmZ1bmN0aW9uIHVzZVJvdXRlcigpIHtcclxuICAgIHJldHVybiBpbmplY3Qocm91dGVyS2V5KTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0aGUgY3VycmVudCByb3V0ZSBsb2NhdGlvbi4gRXF1aXZhbGVudCB0byB1c2luZyBgJHJvdXRlYCBpbnNpZGVcclxuICogdGVtcGxhdGVzLlxyXG4gKi9cclxuZnVuY3Rpb24gdXNlUm91dGUoKSB7XHJcbiAgICByZXR1cm4gaW5qZWN0KHJvdXRlTG9jYXRpb25LZXkpO1xyXG59XG5cbmV4cG9ydCB7IE5hdmlnYXRpb25GYWlsdXJlVHlwZSwgUm91dGVyTGluaywgUm91dGVyVmlldywgU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRCBhcyBTVEFSVF9MT0NBVElPTiwgY3JlYXRlTWVtb3J5SGlzdG9yeSwgY3JlYXRlUm91dGVyLCBjcmVhdGVSb3V0ZXJNYXRjaGVyLCBjcmVhdGVXZWJIYXNoSGlzdG9yeSwgY3JlYXRlV2ViSGlzdG9yeSwgaXNOYXZpZ2F0aW9uRmFpbHVyZSwgbG9hZFJvdXRlTG9jYXRpb24sIG1hdGNoZWRSb3V0ZUtleSwgb25CZWZvcmVSb3V0ZUxlYXZlLCBvbkJlZm9yZVJvdXRlVXBkYXRlLCBwYXJzZVF1ZXJ5LCByb3V0ZUxvY2F0aW9uS2V5LCByb3V0ZXJLZXksIHJvdXRlclZpZXdMb2NhdGlvbktleSwgc3RyaW5naWZ5UXVlcnksIHVzZUxpbmssIHVzZVJvdXRlLCB1c2VSb3V0ZXIsIHZpZXdEZXB0aEtleSB9O1xuIiwiLyohXG4gICogc2hhcmVkIHY5LjIuMlxuICAqIChjKSAyMDIyIGthenV5YSBrYXdhZ3VjaGlcbiAgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gICovXG4vKipcclxuICogT3JpZ2luYWwgVXRpbGl0aWVzXHJcbiAqIHdyaXR0ZW4gYnkga2F6dXlhIGthd2FndWNoaVxyXG4gKi9cclxuY29uc3QgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XHJcbmxldCBtYXJrO1xyXG5sZXQgbWVhc3VyZTtcclxuaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgY29uc3QgcGVyZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucGVyZm9ybWFuY2U7XHJcbiAgICBpZiAocGVyZiAmJlxyXG4gICAgICAgIHBlcmYubWFyayAmJlxyXG4gICAgICAgIHBlcmYubWVhc3VyZSAmJlxyXG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyAmJlxyXG4gICAgICAgIHBlcmYuY2xlYXJNZWFzdXJlcykge1xyXG4gICAgICAgIG1hcmsgPSAodGFnKSA9PiBwZXJmLm1hcmsodGFnKTtcclxuICAgICAgICBtZWFzdXJlID0gKG5hbWUsIHN0YXJ0VGFnLCBlbmRUYWcpID0+IHtcclxuICAgICAgICAgICAgcGVyZi5tZWFzdXJlKG5hbWUsIHN0YXJ0VGFnLCBlbmRUYWcpO1xyXG4gICAgICAgICAgICBwZXJmLmNsZWFyTWFya3Moc3RhcnRUYWcpO1xyXG4gICAgICAgICAgICBwZXJmLmNsZWFyTWFya3MoZW5kVGFnKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IFJFX0FSR1MgPSAvXFx7KFswLTlhLXpBLVpdKylcXH0vZztcclxuLyogZXNsaW50LWRpc2FibGUgKi9cclxuZnVuY3Rpb24gZm9ybWF0KG1lc3NhZ2UsIC4uLmFyZ3MpIHtcclxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSAmJiBpc09iamVjdChhcmdzWzBdKSkge1xyXG4gICAgICAgIGFyZ3MgPSBhcmdzWzBdO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmhhc093blByb3BlcnR5KSB7XHJcbiAgICAgICAgYXJncyA9IHt9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1lc3NhZ2UucmVwbGFjZShSRV9BUkdTLCAobWF0Y2gsIGlkZW50aWZpZXIpID0+IHtcclxuICAgICAgICByZXR1cm4gYXJncy5oYXNPd25Qcm9wZXJ0eShpZGVudGlmaWVyKSA/IGFyZ3NbaWRlbnRpZmllcl0gOiAnJztcclxuICAgIH0pO1xyXG59XHJcbmNvbnN0IGhhc1N5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCc7XHJcbmNvbnN0IG1ha2VTeW1ib2wgPSAobmFtZSkgPT4gaGFzU3ltYm9sID8gU3ltYm9sKG5hbWUpIDogbmFtZTtcclxuY29uc3QgZ2VuZXJhdGVGb3JtYXRDYWNoZUtleSA9IChsb2NhbGUsIGtleSwgc291cmNlKSA9PiBmcmllbmRseUpTT05zdHJpbmdpZnkoeyBsOiBsb2NhbGUsIGs6IGtleSwgczogc291cmNlIH0pO1xyXG5jb25zdCBmcmllbmRseUpTT05zdHJpbmdpZnkgPSAoanNvbikgPT4gSlNPTi5zdHJpbmdpZnkoanNvbilcclxuICAgIC5yZXBsYWNlKC9cXHUyMDI4L2csICdcXFxcdTIwMjgnKVxyXG4gICAgLnJlcGxhY2UoL1xcdTIwMjkvZywgJ1xcXFx1MjAyOScpXHJcbiAgICAucmVwbGFjZSgvXFx1MDAyNy9nLCAnXFxcXHUwMDI3Jyk7XHJcbmNvbnN0IGlzTnVtYmVyID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsKTtcclxuY29uc3QgaXNEYXRlID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IERhdGVdJztcclxuY29uc3QgaXNSZWdFeHAgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XHJcbmNvbnN0IGlzRW1wdHlPYmplY3QgPSAodmFsKSA9PiBpc1BsYWluT2JqZWN0KHZhbCkgJiYgT2JqZWN0LmtleXModmFsKS5sZW5ndGggPT09IDA7XHJcbmZ1bmN0aW9uIHdhcm4obXNnLCBlcnIpIHtcclxuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYFtpbnRsaWZ5XSBgICsgbXNnKTtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jb25zdCBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xyXG5sZXQgX2dsb2JhbFRoaXM7XHJcbmNvbnN0IGdldEdsb2JhbFRoaXMgPSAoKSA9PiB7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIHJldHVybiAoX2dsb2JhbFRoaXMgfHxcclxuICAgICAgICAoX2dsb2JhbFRoaXMgPVxyXG4gICAgICAgICAgICB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgICAgID8gZ2xvYmFsVGhpc1xyXG4gICAgICAgICAgICAgICAgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGZcclxuICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gd2luZG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2xvYmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSk7XHJcbn07XHJcbmZ1bmN0aW9uIGVzY2FwZUh0bWwocmF3VGV4dCkge1xyXG4gICAgcmV0dXJuIHJhd1RleHRcclxuICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXHJcbiAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcclxuICAgICAgICAucmVwbGFjZSgvJy9nLCAnJmFwb3M7Jyk7XHJcbn1cclxuY29uc3QgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xyXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG4vKiBlc2xpbnQtZW5hYmxlICovXHJcbi8qKlxyXG4gKiBVc2VmdWwgVXRpbGl0aWVzIEJ5IEV2YW4geW91XHJcbiAqIE1vZGlmaWVkIGJ5IGthenV5YSBrYXdhZ3VjaGlcclxuICogTUlUIExpY2Vuc2VcclxuICogaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1uZXh0L2Jsb2IvbWFzdGVyL3BhY2thZ2VzL3NoYXJlZC9zcmMvaW5kZXgudHNcclxuICogaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1uZXh0L2Jsb2IvbWFzdGVyL3BhY2thZ2VzL3NoYXJlZC9zcmMvY29kZWZyYW1lLnRzXHJcbiAqL1xyXG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcclxuY29uc3QgaXNGdW5jdGlvbiA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbic7XHJcbmNvbnN0IGlzU3RyaW5nID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XHJcbmNvbnN0IGlzQm9vbGVhbiA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdib29sZWFuJztcclxuY29uc3QgaXNTeW1ib2wgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSAnc3ltYm9sJztcclxuY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XHJcbmNvbnN0IGlzUHJvbWlzZSA9ICh2YWwpID0+IHtcclxuICAgIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnRoZW4pICYmIGlzRnVuY3Rpb24odmFsLmNhdGNoKTtcclxufTtcclxuY29uc3Qgb2JqZWN0VG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xyXG5jb25zdCB0b1R5cGVTdHJpbmcgPSAodmFsdWUpID0+IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xyXG5jb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xyXG4vLyBmb3IgY29udmVydGluZyBsaXN0IGFuZCBuYW1lZCB2YWx1ZXMgdG8gZGlzcGxheWVkIHN0cmluZ3MuXHJcbmNvbnN0IHRvRGlzcGxheVN0cmluZyA9ICh2YWwpID0+IHtcclxuICAgIHJldHVybiB2YWwgPT0gbnVsbFxyXG4gICAgICAgID8gJydcclxuICAgICAgICA6IGlzQXJyYXkodmFsKSB8fCAoaXNQbGFpbk9iamVjdCh2YWwpICYmIHZhbC50b1N0cmluZyA9PT0gb2JqZWN0VG9TdHJpbmcpXHJcbiAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCBudWxsLCAyKVxyXG4gICAgICAgICAgICA6IFN0cmluZyh2YWwpO1xyXG59O1xyXG5jb25zdCBSQU5HRSA9IDI7XHJcbmZ1bmN0aW9uIGdlbmVyYXRlQ29kZUZyYW1lKHNvdXJjZSwgc3RhcnQgPSAwLCBlbmQgPSBzb3VyY2UubGVuZ3RoKSB7XHJcbiAgICBjb25zdCBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvXFxyP1xcbi8pO1xyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuICAgIGNvbnN0IHJlcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvdW50ICs9IGxpbmVzW2ldLmxlbmd0aCArIDE7XHJcbiAgICAgICAgaWYgKGNvdW50ID49IHN0YXJ0KSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpIC0gUkFOR0U7IGogPD0gaSArIFJBTkdFIHx8IGVuZCA+IGNvdW50OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChqIDwgMCB8fCBqID49IGxpbmVzLmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBqICsgMTtcclxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKGAke2xpbmV9JHsnICcucmVwZWF0KDMgLSBTdHJpbmcobGluZSkubGVuZ3RoKX18ICAke2xpbmVzW2pdfWApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVzW2pdLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChqID09PSBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHVzaCB1bmRlcmxpbmVcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWQgPSBzdGFydCAtIChjb3VudCAtIGxpbmVMZW5ndGgpICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heCgxLCBlbmQgPiBjb3VudCA/IGxpbmVMZW5ndGggLSBwYWQgOiBlbmQgLSBzdGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goYCAgIHwgIGAgKyAnICcucmVwZWF0KHBhZCkgKyAnXicucmVwZWF0KGxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaiA+IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kID4gY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoTWF0aC5taW4oZW5kIC0gY291bnQsIGxpbmVMZW5ndGgpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goYCAgIHwgIGAgKyAnXicucmVwZWF0KGxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSBsaW5lTGVuZ3RoICsgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzLmpvaW4oJ1xcbicpO1xyXG59XG5cbi8qKlxyXG4gKiBFdmVudCBlbWl0dGVyLCBmb3JrZWQgZnJvbSB0aGUgYmVsb3c6XHJcbiAqIC0gb3JpZ2luYWwgcmVwb3NpdG9yeSB1cmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9kZXZlbG9waXQvbWl0dFxyXG4gKiAtIGNvZGUgdXJsOiBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L21pdHQvYmxvYi9tYXN0ZXIvc3JjL2luZGV4LnRzXHJcbiAqIC0gYXV0aG9yOiBKYXNvbiBNaWxsZXIgKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXZlbG9waXQpXHJcbiAqIC0gbGljZW5zZTogTUlUXHJcbiAqL1xyXG4vKipcclxuICogQ3JlYXRlIGEgZXZlbnQgZW1pdHRlclxyXG4gKlxyXG4gKiBAcmV0dXJucyBBbiBldmVudCBlbWl0dGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVFbWl0dGVyKCkge1xyXG4gICAgY29uc3QgZXZlbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgY29uc3QgZW1pdHRlciA9IHtcclxuICAgICAgICBldmVudHMsXHJcbiAgICAgICAgb24oZXZlbnQsIGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSBldmVudHMuZ2V0KGV2ZW50KTtcclxuICAgICAgICAgICAgY29uc3QgYWRkZWQgPSBoYW5kbGVycyAmJiBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpZiAoIWFkZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudHMuc2V0KGV2ZW50LCBbaGFuZGxlcl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvZmYoZXZlbnQsIGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSBldmVudHMuZ2V0KGV2ZW50KTtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKSA+Pj4gMCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVtaXQoZXZlbnQsIHBheWxvYWQpIHtcclxuICAgICAgICAgICAgKGV2ZW50cy5nZXQoZXZlbnQpIHx8IFtdKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKClcclxuICAgICAgICAgICAgICAgIC5tYXAoaGFuZGxlciA9PiBoYW5kbGVyKHBheWxvYWQpKTtcclxuICAgICAgICAgICAgKGV2ZW50cy5nZXQoJyonKSB8fCBbXSlcclxuICAgICAgICAgICAgICAgIC5zbGljZSgpXHJcbiAgICAgICAgICAgICAgICAubWFwKGhhbmRsZXIgPT4gaGFuZGxlcihldmVudCwgcGF5bG9hZCkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gZW1pdHRlcjtcclxufVxuXG5leHBvcnQgeyBhc3NpZ24sIGNyZWF0ZUVtaXR0ZXIsIGVzY2FwZUh0bWwsIGZvcm1hdCwgZnJpZW5kbHlKU09Oc3RyaW5naWZ5LCBnZW5lcmF0ZUNvZGVGcmFtZSwgZ2VuZXJhdGVGb3JtYXRDYWNoZUtleSwgZ2V0R2xvYmFsVGhpcywgaGFzT3duLCBpbkJyb3dzZXIsIGlzQXJyYXksIGlzQm9vbGVhbiwgaXNEYXRlLCBpc0VtcHR5T2JqZWN0LCBpc0Z1bmN0aW9uLCBpc051bWJlciwgaXNPYmplY3QsIGlzUGxhaW5PYmplY3QsIGlzUHJvbWlzZSwgaXNSZWdFeHAsIGlzU3RyaW5nLCBpc1N5bWJvbCwgbWFrZVN5bWJvbCwgbWFyaywgbWVhc3VyZSwgb2JqZWN0VG9TdHJpbmcsIHRvRGlzcGxheVN0cmluZywgdG9UeXBlU3RyaW5nLCB3YXJuIH07XG4iLCIvKiFcbiAgKiBtZXNzYWdlLWNvbXBpbGVyIHY5LjIuMlxuICAqIChjKSAyMDIyIGthenV5YSBrYXdhZ3VjaGlcbiAgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gICovXG5pbXBvcnQgeyBmb3JtYXQsIGFzc2lnbiwgaXNTdHJpbmcgfSBmcm9tICdAaW50bGlmeS9zaGFyZWQnO1xuXG5jb25zdCBDb21waWxlRXJyb3JDb2RlcyA9IHtcclxuICAgIC8vIHRva2VuaXplciBlcnJvciBjb2Rlc1xyXG4gICAgRVhQRUNURURfVE9LRU46IDEsXHJcbiAgICBJTlZBTElEX1RPS0VOX0lOX1BMQUNFSE9MREVSOiAyLFxyXG4gICAgVU5URVJNSU5BVEVEX1NJTkdMRV9RVU9URV9JTl9QTEFDRUhPTERFUjogMyxcclxuICAgIFVOS05PV05fRVNDQVBFX1NFUVVFTkNFOiA0LFxyXG4gICAgSU5WQUxJRF9VTklDT0RFX0VTQ0FQRV9TRVFVRU5DRTogNSxcclxuICAgIFVOQkFMQU5DRURfQ0xPU0lOR19CUkFDRTogNixcclxuICAgIFVOVEVSTUlOQVRFRF9DTE9TSU5HX0JSQUNFOiA3LFxyXG4gICAgRU1QVFlfUExBQ0VIT0xERVI6IDgsXHJcbiAgICBOT1RfQUxMT1dfTkVTVF9QTEFDRUhPTERFUjogOSxcclxuICAgIElOVkFMSURfTElOS0VEX0ZPUk1BVDogMTAsXHJcbiAgICAvLyBwYXJzZXIgZXJyb3IgY29kZXNcclxuICAgIE1VU1RfSEFWRV9NRVNTQUdFU19JTl9QTFVSQUw6IDExLFxyXG4gICAgVU5FWFBFQ1RFRF9FTVBUWV9MSU5LRURfTU9ESUZJRVI6IDEyLFxyXG4gICAgVU5FWFBFQ1RFRF9FTVBUWV9MSU5LRURfS0VZOiAxMyxcclxuICAgIFVORVhQRUNURURfTEVYSUNBTF9BTkFMWVNJUzogMTQsXHJcbiAgICAvLyBTcGVjaWFsIHZhbHVlIGZvciBoaWdoZXItb3JkZXIgY29tcGlsZXJzIHRvIHBpY2sgdXAgdGhlIGxhc3QgY29kZVxyXG4gICAgLy8gdG8gYXZvaWQgY29sbGlzaW9uIG9mIGVycm9yIGNvZGVzLiBUaGlzIHNob3VsZCBhbHdheXMgYmUga2VwdCBhcyB0aGUgbGFzdFxyXG4gICAgLy8gaXRlbS5cclxuICAgIF9fRVhURU5EX1BPSU5UX186IDE1XHJcbn07XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuY29uc3QgZXJyb3JNZXNzYWdlcyA9IHtcclxuICAgIC8vIHRva2VuaXplciBlcnJvciBtZXNzYWdlc1xyXG4gICAgW0NvbXBpbGVFcnJvckNvZGVzLkVYUEVDVEVEX1RPS0VOXTogYEV4cGVjdGVkIHRva2VuOiAnezB9J2AsXHJcbiAgICBbQ29tcGlsZUVycm9yQ29kZXMuSU5WQUxJRF9UT0tFTl9JTl9QTEFDRUhPTERFUl06IGBJbnZhbGlkIHRva2VuIGluIHBsYWNlaG9sZGVyOiAnezB9J2AsXHJcbiAgICBbQ29tcGlsZUVycm9yQ29kZXMuVU5URVJNSU5BVEVEX1NJTkdMRV9RVU9URV9JTl9QTEFDRUhPTERFUl06IGBVbnRlcm1pbmF0ZWQgc2luZ2xlIHF1b3RlIGluIHBsYWNlaG9sZGVyYCxcclxuICAgIFtDb21waWxlRXJyb3JDb2Rlcy5VTktOT1dOX0VTQ0FQRV9TRVFVRU5DRV06IGBVbmtub3duIGVzY2FwZSBzZXF1ZW5jZTogXFxcXHswfWAsXHJcbiAgICBbQ29tcGlsZUVycm9yQ29kZXMuSU5WQUxJRF9VTklDT0RFX0VTQ0FQRV9TRVFVRU5DRV06IGBJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiB7MH1gLFxyXG4gICAgW0NvbXBpbGVFcnJvckNvZGVzLlVOQkFMQU5DRURfQ0xPU0lOR19CUkFDRV06IGBVbmJhbGFuY2VkIGNsb3NpbmcgYnJhY2VgLFxyXG4gICAgW0NvbXBpbGVFcnJvckNvZGVzLlVOVEVSTUlOQVRFRF9DTE9TSU5HX0JSQUNFXTogYFVudGVybWluYXRlZCBjbG9zaW5nIGJyYWNlYCxcclxuICAgIFtDb21waWxlRXJyb3JDb2Rlcy5FTVBUWV9QTEFDRUhPTERFUl06IGBFbXB0eSBwbGFjZWhvbGRlcmAsXHJcbiAgICBbQ29tcGlsZUVycm9yQ29kZXMuTk9UX0FMTE9XX05FU1RfUExBQ0VIT0xERVJdOiBgTm90IGFsbG93ZWQgbmVzdCBwbGFjZWhvbGRlcmAsXHJcbiAgICBbQ29tcGlsZUVycm9yQ29kZXMuSU5WQUxJRF9MSU5LRURfRk9STUFUXTogYEludmFsaWQgbGlua2VkIGZvcm1hdGAsXHJcbiAgICAvLyBwYXJzZXIgZXJyb3IgbWVzc2FnZXNcclxuICAgIFtDb21waWxlRXJyb3JDb2Rlcy5NVVNUX0hBVkVfTUVTU0FHRVNfSU5fUExVUkFMXTogYFBsdXJhbCBtdXN0IGhhdmUgbWVzc2FnZXNgLFxyXG4gICAgW0NvbXBpbGVFcnJvckNvZGVzLlVORVhQRUNURURfRU1QVFlfTElOS0VEX01PRElGSUVSXTogYFVuZXhwZWN0ZWQgZW1wdHkgbGlua2VkIG1vZGlmaWVyYCxcclxuICAgIFtDb21waWxlRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0VNUFRZX0xJTktFRF9LRVldOiBgVW5leHBlY3RlZCBlbXB0eSBsaW5rZWQga2V5YCxcclxuICAgIFtDb21waWxlRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0xFWElDQUxfQU5BTFlTSVNdOiBgVW5leHBlY3RlZCBsZXhpY2FsIGFuYWx5c2lzIGluIHRva2VuOiAnezB9J2BcclxufTtcclxuZnVuY3Rpb24gY3JlYXRlQ29tcGlsZUVycm9yKGNvZGUsIGxvYywgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCB7IGRvbWFpbiwgbWVzc2FnZXMsIGFyZ3MgfSA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCBtc2cgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICA/IGZvcm1hdCgobWVzc2FnZXMgfHwgZXJyb3JNZXNzYWdlcylbY29kZV0gfHwgJycsIC4uLihhcmdzIHx8IFtdKSlcclxuICAgICAgICA6IGNvZGU7XHJcbiAgICBjb25zdCBlcnJvciA9IG5ldyBTeW50YXhFcnJvcihTdHJpbmcobXNnKSk7XHJcbiAgICBlcnJvci5jb2RlID0gY29kZTtcclxuICAgIGlmIChsb2MpIHtcclxuICAgICAgICBlcnJvci5sb2NhdGlvbiA9IGxvYztcclxuICAgIH1cclxuICAgIGVycm9yLmRvbWFpbiA9IGRvbWFpbjtcclxuICAgIHJldHVybiBlcnJvcjtcclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIGRlZmF1bHRPbkVycm9yKGVycm9yKSB7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxufVxuXG5jb25zdCBMb2NhdGlvblN0dWIgPSB7XHJcbiAgICBzdGFydDogeyBsaW5lOiAxLCBjb2x1bW46IDEsIG9mZnNldDogMCB9LFxyXG4gICAgZW5kOiB7IGxpbmU6IDEsIGNvbHVtbjogMSwgb2Zmc2V0OiAwIH1cclxufTtcclxuZnVuY3Rpb24gY3JlYXRlUG9zaXRpb24obGluZSwgY29sdW1uLCBvZmZzZXQpIHtcclxuICAgIHJldHVybiB7IGxpbmUsIGNvbHVtbiwgb2Zmc2V0IH07XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24oc3RhcnQsIGVuZCwgc291cmNlKSB7XHJcbiAgICBjb25zdCBsb2MgPSB7IHN0YXJ0LCBlbmQgfTtcclxuICAgIGlmIChzb3VyY2UgIT0gbnVsbCkge1xyXG4gICAgICAgIGxvYy5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbG9jO1xyXG59XG5cbmNvbnN0IENIQVJfU1AgPSAnICc7XHJcbmNvbnN0IENIQVJfQ1IgPSAnXFxyJztcclxuY29uc3QgQ0hBUl9MRiA9ICdcXG4nO1xyXG5jb25zdCBDSEFSX0xTID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweDIwMjgpO1xyXG5jb25zdCBDSEFSX1BTID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweDIwMjkpO1xyXG5mdW5jdGlvbiBjcmVhdGVTY2FubmVyKHN0cikge1xyXG4gICAgY29uc3QgX2J1ZiA9IHN0cjtcclxuICAgIGxldCBfaW5kZXggPSAwO1xyXG4gICAgbGV0IF9saW5lID0gMTtcclxuICAgIGxldCBfY29sdW1uID0gMTtcclxuICAgIGxldCBfcGVla09mZnNldCA9IDA7XHJcbiAgICBjb25zdCBpc0NSTEYgPSAoaW5kZXgpID0+IF9idWZbaW5kZXhdID09PSBDSEFSX0NSICYmIF9idWZbaW5kZXggKyAxXSA9PT0gQ0hBUl9MRjtcclxuICAgIGNvbnN0IGlzTEYgPSAoaW5kZXgpID0+IF9idWZbaW5kZXhdID09PSBDSEFSX0xGO1xyXG4gICAgY29uc3QgaXNQUyA9IChpbmRleCkgPT4gX2J1ZltpbmRleF0gPT09IENIQVJfUFM7XHJcbiAgICBjb25zdCBpc0xTID0gKGluZGV4KSA9PiBfYnVmW2luZGV4XSA9PT0gQ0hBUl9MUztcclxuICAgIGNvbnN0IGlzTGluZUVuZCA9IChpbmRleCkgPT4gaXNDUkxGKGluZGV4KSB8fCBpc0xGKGluZGV4KSB8fCBpc1BTKGluZGV4KSB8fCBpc0xTKGluZGV4KTtcclxuICAgIGNvbnN0IGluZGV4ID0gKCkgPT4gX2luZGV4O1xyXG4gICAgY29uc3QgbGluZSA9ICgpID0+IF9saW5lO1xyXG4gICAgY29uc3QgY29sdW1uID0gKCkgPT4gX2NvbHVtbjtcclxuICAgIGNvbnN0IHBlZWtPZmZzZXQgPSAoKSA9PiBfcGVla09mZnNldDtcclxuICAgIGNvbnN0IGNoYXJBdCA9IChvZmZzZXQpID0+IGlzQ1JMRihvZmZzZXQpIHx8IGlzUFMob2Zmc2V0KSB8fCBpc0xTKG9mZnNldCkgPyBDSEFSX0xGIDogX2J1ZltvZmZzZXRdO1xyXG4gICAgY29uc3QgY3VycmVudENoYXIgPSAoKSA9PiBjaGFyQXQoX2luZGV4KTtcclxuICAgIGNvbnN0IGN1cnJlbnRQZWVrID0gKCkgPT4gY2hhckF0KF9pbmRleCArIF9wZWVrT2Zmc2V0KTtcclxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICAgICAgX3BlZWtPZmZzZXQgPSAwO1xyXG4gICAgICAgIGlmIChpc0xpbmVFbmQoX2luZGV4KSkge1xyXG4gICAgICAgICAgICBfbGluZSsrO1xyXG4gICAgICAgICAgICBfY29sdW1uID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzQ1JMRihfaW5kZXgpKSB7XHJcbiAgICAgICAgICAgIF9pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfaW5kZXgrKztcclxuICAgICAgICBfY29sdW1uKys7XHJcbiAgICAgICAgcmV0dXJuIF9idWZbX2luZGV4XTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBlZWsoKSB7XHJcbiAgICAgICAgaWYgKGlzQ1JMRihfaW5kZXggKyBfcGVla09mZnNldCkpIHtcclxuICAgICAgICAgICAgX3BlZWtPZmZzZXQrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgX3BlZWtPZmZzZXQrKztcclxuICAgICAgICByZXR1cm4gX2J1ZltfaW5kZXggKyBfcGVla09mZnNldF07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgICAgICBfaW5kZXggPSAwO1xyXG4gICAgICAgIF9saW5lID0gMTtcclxuICAgICAgICBfY29sdW1uID0gMTtcclxuICAgICAgICBfcGVla09mZnNldCA9IDA7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZXNldFBlZWsob2Zmc2V0ID0gMCkge1xyXG4gICAgICAgIF9wZWVrT2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2tpcFRvUGVlaygpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBfaW5kZXggKyBfcGVla09mZnNldDtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5tb2RpZmllZC1sb29wLWNvbmRpdGlvblxyXG4gICAgICAgIHdoaWxlICh0YXJnZXQgIT09IF9pbmRleCkge1xyXG4gICAgICAgICAgICBuZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9wZWVrT2Zmc2V0ID0gMDtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5kZXgsXHJcbiAgICAgICAgbGluZSxcclxuICAgICAgICBjb2x1bW4sXHJcbiAgICAgICAgcGVla09mZnNldCxcclxuICAgICAgICBjaGFyQXQsXHJcbiAgICAgICAgY3VycmVudENoYXIsXHJcbiAgICAgICAgY3VycmVudFBlZWssXHJcbiAgICAgICAgbmV4dCxcclxuICAgICAgICBwZWVrLFxyXG4gICAgICAgIHJlc2V0LFxyXG4gICAgICAgIHJlc2V0UGVlayxcclxuICAgICAgICBza2lwVG9QZWVrXHJcbiAgICB9O1xyXG59XG5cbmNvbnN0IEVPRiA9IHVuZGVmaW5lZDtcclxuY29uc3QgTElURVJBTF9ERUxJTUlURVIgPSBcIidcIjtcclxuY29uc3QgRVJST1JfRE9NQUlOJDEgPSAndG9rZW5pemVyJztcclxuZnVuY3Rpb24gY3JlYXRlVG9rZW5pemVyKHNvdXJjZSwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCBsb2NhdGlvbiA9IG9wdGlvbnMubG9jYXRpb24gIT09IGZhbHNlO1xyXG4gICAgY29uc3QgX3NjbnIgPSBjcmVhdGVTY2FubmVyKHNvdXJjZSk7XHJcbiAgICBjb25zdCBjdXJyZW50T2Zmc2V0ID0gKCkgPT4gX3NjbnIuaW5kZXgoKTtcclxuICAgIGNvbnN0IGN1cnJlbnRQb3NpdGlvbiA9ICgpID0+IGNyZWF0ZVBvc2l0aW9uKF9zY25yLmxpbmUoKSwgX3NjbnIuY29sdW1uKCksIF9zY25yLmluZGV4KCkpO1xyXG4gICAgY29uc3QgX2luaXRMb2MgPSBjdXJyZW50UG9zaXRpb24oKTtcclxuICAgIGNvbnN0IF9pbml0T2Zmc2V0ID0gY3VycmVudE9mZnNldCgpO1xyXG4gICAgY29uc3QgX2NvbnRleHQgPSB7XHJcbiAgICAgICAgY3VycmVudFR5cGU6IDE0IC8qIEVPRiAqLyxcclxuICAgICAgICBvZmZzZXQ6IF9pbml0T2Zmc2V0LFxyXG4gICAgICAgIHN0YXJ0TG9jOiBfaW5pdExvYyxcclxuICAgICAgICBlbmRMb2M6IF9pbml0TG9jLFxyXG4gICAgICAgIGxhc3RUeXBlOiAxNCAvKiBFT0YgKi8sXHJcbiAgICAgICAgbGFzdE9mZnNldDogX2luaXRPZmZzZXQsXHJcbiAgICAgICAgbGFzdFN0YXJ0TG9jOiBfaW5pdExvYyxcclxuICAgICAgICBsYXN0RW5kTG9jOiBfaW5pdExvYyxcclxuICAgICAgICBicmFjZU5lc3Q6IDAsXHJcbiAgICAgICAgaW5MaW5rZWQ6IGZhbHNlLFxyXG4gICAgICAgIHRleHQ6ICcnXHJcbiAgICB9O1xyXG4gICAgY29uc3QgY29udGV4dCA9ICgpID0+IF9jb250ZXh0O1xyXG4gICAgY29uc3QgeyBvbkVycm9yIH0gPSBvcHRpb25zO1xyXG4gICAgZnVuY3Rpb24gZW1pdEVycm9yKGNvZGUsIHBvcywgb2Zmc2V0LCAuLi5hcmdzKSB7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gY29udGV4dCgpO1xyXG4gICAgICAgIHBvcy5jb2x1bW4gKz0gb2Zmc2V0O1xyXG4gICAgICAgIHBvcy5vZmZzZXQgKz0gb2Zmc2V0O1xyXG4gICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvYyA9IGNyZWF0ZUxvY2F0aW9uKGN0eC5zdGFydExvYywgcG9zKTtcclxuICAgICAgICAgICAgY29uc3QgZXJyID0gY3JlYXRlQ29tcGlsZUVycm9yKGNvZGUsIGxvYywge1xyXG4gICAgICAgICAgICAgICAgZG9tYWluOiBFUlJPUl9ET01BSU4kMSxcclxuICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRUb2tlbihjb250ZXh0LCB0eXBlLCB2YWx1ZSkge1xyXG4gICAgICAgIGNvbnRleHQuZW5kTG9jID0gY3VycmVudFBvc2l0aW9uKCk7XHJcbiAgICAgICAgY29udGV4dC5jdXJyZW50VHlwZSA9IHR5cGU7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSB7IHR5cGUgfTtcclxuICAgICAgICBpZiAobG9jYXRpb24pIHtcclxuICAgICAgICAgICAgdG9rZW4ubG9jID0gY3JlYXRlTG9jYXRpb24oY29udGV4dC5zdGFydExvYywgY29udGV4dC5lbmRMb2MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0b2tlbi52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICB9XHJcbiAgICBjb25zdCBnZXRFbmRUb2tlbiA9IChjb250ZXh0KSA9PiBnZXRUb2tlbihjb250ZXh0LCAxNCAvKiBFT0YgKi8pO1xyXG4gICAgZnVuY3Rpb24gZWF0KHNjbnIsIGNoKSB7XHJcbiAgICAgICAgaWYgKHNjbnIuY3VycmVudENoYXIoKSA9PT0gY2gpIHtcclxuICAgICAgICAgICAgc2Nuci5uZXh0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVtaXRFcnJvcihDb21waWxlRXJyb3JDb2Rlcy5FWFBFQ1RFRF9UT0tFTiwgY3VycmVudFBvc2l0aW9uKCksIDAsIGNoKTtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBlZWtTcGFjZXMoc2Nucikge1xyXG4gICAgICAgIGxldCBidWYgPSAnJztcclxuICAgICAgICB3aGlsZSAoc2Nuci5jdXJyZW50UGVlaygpID09PSBDSEFSX1NQIHx8IHNjbnIuY3VycmVudFBlZWsoKSA9PT0gQ0hBUl9MRikge1xyXG4gICAgICAgICAgICBidWYgKz0gc2Nuci5jdXJyZW50UGVlaygpO1xyXG4gICAgICAgICAgICBzY25yLnBlZWsoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ1ZjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNraXBTcGFjZXMoc2Nucikge1xyXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHBlZWtTcGFjZXMoc2Nucik7XHJcbiAgICAgICAgc2Nuci5za2lwVG9QZWVrKCk7XHJcbiAgICAgICAgcmV0dXJuIGJ1ZjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzSWRlbnRpZmllclN0YXJ0KGNoKSB7XHJcbiAgICAgICAgaWYgKGNoID09PSBFT0YpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYyA9IGNoLmNoYXJDb2RlQXQoMCk7XHJcbiAgICAgICAgcmV0dXJuICgoY2MgPj0gOTcgJiYgY2MgPD0gMTIyKSB8fCAvLyBhLXpcclxuICAgICAgICAgICAgKGNjID49IDY1ICYmIGNjIDw9IDkwKSB8fCAvLyBBLVpcclxuICAgICAgICAgICAgY2MgPT09IDk1IC8vIF9cclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaXNOdW1iZXJTdGFydChjaCkge1xyXG4gICAgICAgIGlmIChjaCA9PT0gRU9GKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2MgPSBjaC5jaGFyQ29kZUF0KDApO1xyXG4gICAgICAgIHJldHVybiBjYyA+PSA0OCAmJiBjYyA8PSA1NzsgLy8gMC05XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpc05hbWVkSWRlbnRpZmllclN0YXJ0KHNjbnIsIGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCB7IGN1cnJlbnRUeXBlIH0gPSBjb250ZXh0O1xyXG4gICAgICAgIGlmIChjdXJyZW50VHlwZSAhPT0gMiAvKiBCcmFjZUxlZnQgKi8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwZWVrU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgIGNvbnN0IHJldCA9IGlzSWRlbnRpZmllclN0YXJ0KHNjbnIuY3VycmVudFBlZWsoKSk7XHJcbiAgICAgICAgc2Nuci5yZXNldFBlZWsoKTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaXNMaXN0SWRlbnRpZmllclN0YXJ0KHNjbnIsIGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCB7IGN1cnJlbnRUeXBlIH0gPSBjb250ZXh0O1xyXG4gICAgICAgIGlmIChjdXJyZW50VHlwZSAhPT0gMiAvKiBCcmFjZUxlZnQgKi8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwZWVrU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgIGNvbnN0IGNoID0gc2Nuci5jdXJyZW50UGVlaygpID09PSAnLScgPyBzY25yLnBlZWsoKSA6IHNjbnIuY3VycmVudFBlZWsoKTtcclxuICAgICAgICBjb25zdCByZXQgPSBpc051bWJlclN0YXJ0KGNoKTtcclxuICAgICAgICBzY25yLnJlc2V0UGVlaygpO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpc0xpdGVyYWxTdGFydChzY25yLCBjb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgeyBjdXJyZW50VHlwZSB9ID0gY29udGV4dDtcclxuICAgICAgICBpZiAoY3VycmVudFR5cGUgIT09IDIgLyogQnJhY2VMZWZ0ICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGVla1NwYWNlcyhzY25yKTtcclxuICAgICAgICBjb25zdCByZXQgPSBzY25yLmN1cnJlbnRQZWVrKCkgPT09IExJVEVSQUxfREVMSU1JVEVSO1xyXG4gICAgICAgIHNjbnIucmVzZXRQZWVrKCk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzTGlua2VkRG90U3RhcnQoc2NuciwgY29udGV4dCkge1xyXG4gICAgICAgIGNvbnN0IHsgY3VycmVudFR5cGUgfSA9IGNvbnRleHQ7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRUeXBlICE9PSA4IC8qIExpbmtlZEFsaWFzICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGVla1NwYWNlcyhzY25yKTtcclxuICAgICAgICBjb25zdCByZXQgPSBzY25yLmN1cnJlbnRQZWVrKCkgPT09IFwiLlwiIC8qIExpbmtlZERvdCAqLztcclxuICAgICAgICBzY25yLnJlc2V0UGVlaygpO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpc0xpbmtlZE1vZGlmaWVyU3RhcnQoc2NuciwgY29udGV4dCkge1xyXG4gICAgICAgIGNvbnN0IHsgY3VycmVudFR5cGUgfSA9IGNvbnRleHQ7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRUeXBlICE9PSA5IC8qIExpbmtlZERvdCAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBlZWtTcGFjZXMoc2Nucik7XHJcbiAgICAgICAgY29uc3QgcmV0ID0gaXNJZGVudGlmaWVyU3RhcnQoc2Nuci5jdXJyZW50UGVlaygpKTtcclxuICAgICAgICBzY25yLnJlc2V0UGVlaygpO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpc0xpbmtlZERlbGltaXRlclN0YXJ0KHNjbnIsIGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCB7IGN1cnJlbnRUeXBlIH0gPSBjb250ZXh0O1xyXG4gICAgICAgIGlmICghKGN1cnJlbnRUeXBlID09PSA4IC8qIExpbmtlZEFsaWFzICovIHx8XHJcbiAgICAgICAgICAgIGN1cnJlbnRUeXBlID09PSAxMiAvKiBMaW5rZWRNb2RpZmllciAqLykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwZWVrU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgIGNvbnN0IHJldCA9IHNjbnIuY3VycmVudFBlZWsoKSA9PT0gXCI6XCIgLyogTGlua2VkRGVsaW1pdGVyICovO1xyXG4gICAgICAgIHNjbnIucmVzZXRQZWVrKCk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzTGlua2VkUmVmZXJTdGFydChzY25yLCBjb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgeyBjdXJyZW50VHlwZSB9ID0gY29udGV4dDtcclxuICAgICAgICBpZiAoY3VycmVudFR5cGUgIT09IDEwIC8qIExpbmtlZERlbGltaXRlciAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZuID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjaCA9IHNjbnIuY3VycmVudFBlZWsoKTtcclxuICAgICAgICAgICAgaWYgKGNoID09PSBcIntcIiAvKiBCcmFjZUxlZnQgKi8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpc0lkZW50aWZpZXJTdGFydChzY25yLnBlZWsoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY2ggPT09IFwiQFwiIC8qIExpbmtlZEFsaWFzICovIHx8XHJcbiAgICAgICAgICAgICAgICBjaCA9PT0gXCIlXCIgLyogTW9kdWxvICovIHx8XHJcbiAgICAgICAgICAgICAgICBjaCA9PT0gXCJ8XCIgLyogUGlwZSAqLyB8fFxyXG4gICAgICAgICAgICAgICAgY2ggPT09IFwiOlwiIC8qIExpbmtlZERlbGltaXRlciAqLyB8fFxyXG4gICAgICAgICAgICAgICAgY2ggPT09IFwiLlwiIC8qIExpbmtlZERvdCAqLyB8fFxyXG4gICAgICAgICAgICAgICAgY2ggPT09IENIQVJfU1AgfHxcclxuICAgICAgICAgICAgICAgICFjaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSBDSEFSX0xGKSB7XHJcbiAgICAgICAgICAgICAgICBzY25yLnBlZWsoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gb3RoZXIgY2hhcmFjdGVyc1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzSWRlbnRpZmllclN0YXJ0KGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgcmV0ID0gZm4oKTtcclxuICAgICAgICBzY25yLnJlc2V0UGVlaygpO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpc1BsdXJhbFN0YXJ0KHNjbnIpIHtcclxuICAgICAgICBwZWVrU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgIGNvbnN0IHJldCA9IHNjbnIuY3VycmVudFBlZWsoKSA9PT0gXCJ8XCIgLyogUGlwZSAqLztcclxuICAgICAgICBzY25yLnJlc2V0UGVlaygpO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBkZXRlY3RNb2R1bG9TdGFydChzY25yKSB7XHJcbiAgICAgICAgY29uc3Qgc3BhY2VzID0gcGVla1NwYWNlcyhzY25yKTtcclxuICAgICAgICBjb25zdCByZXQgPSBzY25yLmN1cnJlbnRQZWVrKCkgPT09IFwiJVwiIC8qIE1vZHVsbyAqLyAmJlxyXG4gICAgICAgICAgICBzY25yLnBlZWsoKSA9PT0gXCJ7XCIgLyogQnJhY2VMZWZ0ICovO1xyXG4gICAgICAgIHNjbnIucmVzZXRQZWVrKCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXNNb2R1bG86IHJldCxcclxuICAgICAgICAgICAgaGFzU3BhY2U6IHNwYWNlcy5sZW5ndGggPiAwXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzVGV4dFN0YXJ0KHNjbnIsIHJlc2V0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGZuID0gKGhhc1NwYWNlID0gZmFsc2UsIHByZXYgPSAnJywgZGV0ZWN0TW9kdWxvID0gZmFsc2UpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2ggPSBzY25yLmN1cnJlbnRQZWVrKCk7XHJcbiAgICAgICAgICAgIGlmIChjaCA9PT0gXCJ7XCIgLyogQnJhY2VMZWZ0ICovKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldiA9PT0gXCIlXCIgLyogTW9kdWxvICovID8gZmFsc2UgOiBoYXNTcGFjZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PT0gXCJAXCIgLyogTGlua2VkQWxpYXMgKi8gfHwgIWNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldiA9PT0gXCIlXCIgLyogTW9kdWxvICovID8gdHJ1ZSA6IGhhc1NwYWNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSBcIiVcIiAvKiBNb2R1bG8gKi8pIHtcclxuICAgICAgICAgICAgICAgIHNjbnIucGVlaygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuKGhhc1NwYWNlLCBcIiVcIiAvKiBNb2R1bG8gKi8sIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSBcInxcIiAvKiBQaXBlICovKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldiA9PT0gXCIlXCIgLyogTW9kdWxvICovIHx8IGRldGVjdE1vZHVsb1xyXG4gICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIDogIShwcmV2ID09PSBDSEFSX1NQIHx8IHByZXYgPT09IENIQVJfTEYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSBDSEFSX1NQKSB7XHJcbiAgICAgICAgICAgICAgICBzY25yLnBlZWsoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmbih0cnVlLCBDSEFSX1NQLCBkZXRlY3RNb2R1bG8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSBDSEFSX0xGKSB7XHJcbiAgICAgICAgICAgICAgICBzY25yLnBlZWsoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmbih0cnVlLCBDSEFSX0xGLCBkZXRlY3RNb2R1bG8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJldCA9IGZuKCk7XHJcbiAgICAgICAgcmVzZXQgJiYgc2Nuci5yZXNldFBlZWsoKTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdGFrZUNoYXIoc2NuciwgZm4pIHtcclxuICAgICAgICBjb25zdCBjaCA9IHNjbnIuY3VycmVudENoYXIoKTtcclxuICAgICAgICBpZiAoY2ggPT09IEVPRikge1xyXG4gICAgICAgICAgICByZXR1cm4gRU9GO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZm4oY2gpKSB7XHJcbiAgICAgICAgICAgIHNjbnIubmV4dCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdGFrZUlkZW50aWZpZXJDaGFyKHNjbnIpIHtcclxuICAgICAgICBjb25zdCBjbG9zdXJlID0gKGNoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNjID0gY2guY2hhckNvZGVBdCgwKTtcclxuICAgICAgICAgICAgcmV0dXJuICgoY2MgPj0gOTcgJiYgY2MgPD0gMTIyKSB8fCAvLyBhLXpcclxuICAgICAgICAgICAgICAgIChjYyA+PSA2NSAmJiBjYyA8PSA5MCkgfHwgLy8gQS1aXHJcbiAgICAgICAgICAgICAgICAoY2MgPj0gNDggJiYgY2MgPD0gNTcpIHx8IC8vIDAtOVxyXG4gICAgICAgICAgICAgICAgY2MgPT09IDk1IHx8IC8vIF9cclxuICAgICAgICAgICAgICAgIGNjID09PSAzNiAvLyAkXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGFrZUNoYXIoc2NuciwgY2xvc3VyZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB0YWtlRGlnaXQoc2Nucikge1xyXG4gICAgICAgIGNvbnN0IGNsb3N1cmUgPSAoY2gpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2MgPSBjaC5jaGFyQ29kZUF0KDApO1xyXG4gICAgICAgICAgICByZXR1cm4gY2MgPj0gNDggJiYgY2MgPD0gNTc7IC8vIDAtOVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRha2VDaGFyKHNjbnIsIGNsb3N1cmUpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdGFrZUhleERpZ2l0KHNjbnIpIHtcclxuICAgICAgICBjb25zdCBjbG9zdXJlID0gKGNoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNjID0gY2guY2hhckNvZGVBdCgwKTtcclxuICAgICAgICAgICAgcmV0dXJuICgoY2MgPj0gNDggJiYgY2MgPD0gNTcpIHx8IC8vIDAtOVxyXG4gICAgICAgICAgICAgICAgKGNjID49IDY1ICYmIGNjIDw9IDcwKSB8fCAvLyBBLUZcclxuICAgICAgICAgICAgICAgIChjYyA+PSA5NyAmJiBjYyA8PSAxMDIpKTsgLy8gYS1mXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGFrZUNoYXIoc2NuciwgY2xvc3VyZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXREaWdpdHMoc2Nucikge1xyXG4gICAgICAgIGxldCBjaCA9ICcnO1xyXG4gICAgICAgIGxldCBudW0gPSAnJztcclxuICAgICAgICB3aGlsZSAoKGNoID0gdGFrZURpZ2l0KHNjbnIpKSkge1xyXG4gICAgICAgICAgICBudW0gKz0gY2g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudW07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZWFkTW9kdWxvKHNjbnIpIHtcclxuICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgIGNvbnN0IGNoID0gc2Nuci5jdXJyZW50Q2hhcigpO1xyXG4gICAgICAgIGlmIChjaCAhPT0gXCIlXCIgLyogTW9kdWxvICovKSB7XHJcbiAgICAgICAgICAgIGVtaXRFcnJvcihDb21waWxlRXJyb3JDb2Rlcy5FWFBFQ1RFRF9UT0tFTiwgY3VycmVudFBvc2l0aW9uKCksIDAsIGNoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2Nuci5uZXh0KCk7XHJcbiAgICAgICAgcmV0dXJuIFwiJVwiIC8qIE1vZHVsbyAqLztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlYWRUZXh0KHNjbnIpIHtcclxuICAgICAgICBsZXQgYnVmID0gJyc7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgY29uc3QgY2ggPSBzY25yLmN1cnJlbnRDaGFyKCk7XHJcbiAgICAgICAgICAgIGlmIChjaCA9PT0gXCJ7XCIgLyogQnJhY2VMZWZ0ICovIHx8XHJcbiAgICAgICAgICAgICAgICBjaCA9PT0gXCJ9XCIgLyogQnJhY2VSaWdodCAqLyB8fFxyXG4gICAgICAgICAgICAgICAgY2ggPT09IFwiQFwiIC8qIExpbmtlZEFsaWFzICovIHx8XHJcbiAgICAgICAgICAgICAgICBjaCA9PT0gXCJ8XCIgLyogUGlwZSAqLyB8fFxyXG4gICAgICAgICAgICAgICAgIWNoKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PT0gXCIlXCIgLyogTW9kdWxvICovKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNUZXh0U3RhcnQoc2NucikpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWYgKz0gY2g7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nuci5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PT0gQ0hBUl9TUCB8fCBjaCA9PT0gQ0hBUl9MRikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVGV4dFN0YXJ0KHNjbnIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmICs9IGNoO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjbnIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNQbHVyYWxTdGFydChzY25yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmICs9IGNoO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjbnIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnVmICs9IGNoO1xyXG4gICAgICAgICAgICAgICAgc2Nuci5uZXh0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ1ZjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlYWROYW1lZElkZW50aWZpZXIoc2Nucikge1xyXG4gICAgICAgIHNraXBTcGFjZXMoc2Nucik7XHJcbiAgICAgICAgbGV0IGNoID0gJyc7XHJcbiAgICAgICAgbGV0IG5hbWUgPSAnJztcclxuICAgICAgICB3aGlsZSAoKGNoID0gdGFrZUlkZW50aWZpZXJDaGFyKHNjbnIpKSkge1xyXG4gICAgICAgICAgICBuYW1lICs9IGNoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2Nuci5jdXJyZW50Q2hhcigpID09PSBFT0YpIHtcclxuICAgICAgICAgICAgZW1pdEVycm9yKENvbXBpbGVFcnJvckNvZGVzLlVOVEVSTUlOQVRFRF9DTE9TSU5HX0JSQUNFLCBjdXJyZW50UG9zaXRpb24oKSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVhZExpc3RJZGVudGlmaWVyKHNjbnIpIHtcclxuICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xyXG4gICAgICAgIGlmIChzY25yLmN1cnJlbnRDaGFyKCkgPT09ICctJykge1xyXG4gICAgICAgICAgICBzY25yLm5leHQoKTtcclxuICAgICAgICAgICAgdmFsdWUgKz0gYC0ke2dldERpZ2l0cyhzY25yKX1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsdWUgKz0gZ2V0RGlnaXRzKHNjbnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2Nuci5jdXJyZW50Q2hhcigpID09PSBFT0YpIHtcclxuICAgICAgICAgICAgZW1pdEVycm9yKENvbXBpbGVFcnJvckNvZGVzLlVOVEVSTUlOQVRFRF9DTE9TSU5HX0JSQUNFLCBjdXJyZW50UG9zaXRpb24oKSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlYWRMaXRlcmFsKHNjbnIpIHtcclxuICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgIGVhdChzY25yLCBgXFwnYCk7XHJcbiAgICAgICAgbGV0IGNoID0gJyc7XHJcbiAgICAgICAgbGV0IGxpdGVyYWwgPSAnJztcclxuICAgICAgICBjb25zdCBmbiA9ICh4KSA9PiB4ICE9PSBMSVRFUkFMX0RFTElNSVRFUiAmJiB4ICE9PSBDSEFSX0xGO1xyXG4gICAgICAgIHdoaWxlICgoY2ggPSB0YWtlQ2hhcihzY25yLCBmbikpKSB7XHJcbiAgICAgICAgICAgIGlmIChjaCA9PT0gJ1xcXFwnKSB7XHJcbiAgICAgICAgICAgICAgICBsaXRlcmFsICs9IHJlYWRFc2NhcGVTZXF1ZW5jZShzY25yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxpdGVyYWwgKz0gY2g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHNjbnIuY3VycmVudENoYXIoKTtcclxuICAgICAgICBpZiAoY3VycmVudCA9PT0gQ0hBUl9MRiB8fCBjdXJyZW50ID09PSBFT0YpIHtcclxuICAgICAgICAgICAgZW1pdEVycm9yKENvbXBpbGVFcnJvckNvZGVzLlVOVEVSTUlOQVRFRF9TSU5HTEVfUVVPVEVfSU5fUExBQ0VIT0xERVIsIGN1cnJlbnRQb3NpdGlvbigpLCAwKTtcclxuICAgICAgICAgICAgLy8gVE9ETzogSXMgaXQgY29ycmVjdCByZWFsbHk/XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSBDSEFSX0xGKSB7XHJcbiAgICAgICAgICAgICAgICBzY25yLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIGVhdChzY25yLCBgXFwnYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGxpdGVyYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVhdChzY25yLCBgXFwnYCk7XHJcbiAgICAgICAgcmV0dXJuIGxpdGVyYWw7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZWFkRXNjYXBlU2VxdWVuY2Uoc2Nucikge1xyXG4gICAgICAgIGNvbnN0IGNoID0gc2Nuci5jdXJyZW50Q2hhcigpO1xyXG4gICAgICAgIHN3aXRjaCAoY2gpIHtcclxuICAgICAgICAgICAgY2FzZSAnXFxcXCc6XHJcbiAgICAgICAgICAgIGNhc2UgYFxcJ2A6XHJcbiAgICAgICAgICAgICAgICBzY25yLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgXFxcXCR7Y2h9YDtcclxuICAgICAgICAgICAgY2FzZSAndSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZFVuaWNvZGVFc2NhcGVTZXF1ZW5jZShzY25yLCBjaCwgNCk7XHJcbiAgICAgICAgICAgIGNhc2UgJ1UnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRVbmljb2RlRXNjYXBlU2VxdWVuY2Uoc2NuciwgY2gsIDYpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZW1pdEVycm9yKENvbXBpbGVFcnJvckNvZGVzLlVOS05PV05fRVNDQVBFX1NFUVVFTkNFLCBjdXJyZW50UG9zaXRpb24oKSwgMCwgY2gpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlYWRVbmljb2RlRXNjYXBlU2VxdWVuY2Uoc2NuciwgdW5pY29kZSwgZGlnaXRzKSB7XHJcbiAgICAgICAgZWF0KHNjbnIsIHVuaWNvZGUpO1xyXG4gICAgICAgIGxldCBzZXF1ZW5jZSA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlnaXRzOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2ggPSB0YWtlSGV4RGlnaXQoc2Nucik7XHJcbiAgICAgICAgICAgIGlmICghY2gpIHtcclxuICAgICAgICAgICAgICAgIGVtaXRFcnJvcihDb21waWxlRXJyb3JDb2Rlcy5JTlZBTElEX1VOSUNPREVfRVNDQVBFX1NFUVVFTkNFLCBjdXJyZW50UG9zaXRpb24oKSwgMCwgYFxcXFwke3VuaWNvZGV9JHtzZXF1ZW5jZX0ke3NjbnIuY3VycmVudENoYXIoKX1gKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlcXVlbmNlICs9IGNoO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYFxcXFwke3VuaWNvZGV9JHtzZXF1ZW5jZX1gO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVhZEludmFsaWRJZGVudGlmaWVyKHNjbnIpIHtcclxuICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgIGxldCBjaCA9ICcnO1xyXG4gICAgICAgIGxldCBpZGVudGlmaWVycyA9ICcnO1xyXG4gICAgICAgIGNvbnN0IGNsb3N1cmUgPSAoY2gpID0+IGNoICE9PSBcIntcIiAvKiBCcmFjZUxlZnQgKi8gJiZcclxuICAgICAgICAgICAgY2ggIT09IFwifVwiIC8qIEJyYWNlUmlnaHQgKi8gJiZcclxuICAgICAgICAgICAgY2ggIT09IENIQVJfU1AgJiZcclxuICAgICAgICAgICAgY2ggIT09IENIQVJfTEY7XHJcbiAgICAgICAgd2hpbGUgKChjaCA9IHRha2VDaGFyKHNjbnIsIGNsb3N1cmUpKSkge1xyXG4gICAgICAgICAgICBpZGVudGlmaWVycyArPSBjaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlkZW50aWZpZXJzO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVhZExpbmtlZE1vZGlmaWVyKHNjbnIpIHtcclxuICAgICAgICBsZXQgY2ggPSAnJztcclxuICAgICAgICBsZXQgbmFtZSA9ICcnO1xyXG4gICAgICAgIHdoaWxlICgoY2ggPSB0YWtlSWRlbnRpZmllckNoYXIoc2NucikpKSB7XHJcbiAgICAgICAgICAgIG5hbWUgKz0gY2g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVhZExpbmtlZFJlZmVyKHNjbnIpIHtcclxuICAgICAgICBjb25zdCBmbiA9IChkZXRlY3QgPSBmYWxzZSwgYnVmKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoID0gc2Nuci5jdXJyZW50Q2hhcigpO1xyXG4gICAgICAgICAgICBpZiAoY2ggPT09IFwie1wiIC8qIEJyYWNlTGVmdCAqLyB8fFxyXG4gICAgICAgICAgICAgICAgY2ggPT09IFwiJVwiIC8qIE1vZHVsbyAqLyB8fFxyXG4gICAgICAgICAgICAgICAgY2ggPT09IFwiQFwiIC8qIExpbmtlZEFsaWFzICovIHx8XHJcbiAgICAgICAgICAgICAgICBjaCA9PT0gXCJ8XCIgLyogUGlwZSAqLyB8fFxyXG4gICAgICAgICAgICAgICAgIWNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSBDSEFSX1NQKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSBDSEFSX0xGKSB7XHJcbiAgICAgICAgICAgICAgICBidWYgKz0gY2g7XHJcbiAgICAgICAgICAgICAgICBzY25yLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmbihkZXRlY3QsIGJ1Zik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidWYgKz0gY2g7XHJcbiAgICAgICAgICAgICAgICBzY25yLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmbih0cnVlLCBidWYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZm4oZmFsc2UsICcnKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlYWRQbHVyYWwoc2Nucikge1xyXG4gICAgICAgIHNraXBTcGFjZXMoc2Nucik7XHJcbiAgICAgICAgY29uc3QgcGx1cmFsID0gZWF0KHNjbnIsIFwifFwiIC8qIFBpcGUgKi8pO1xyXG4gICAgICAgIHNraXBTcGFjZXMoc2Nucik7XHJcbiAgICAgICAgcmV0dXJuIHBsdXJhbDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IFdlIG5lZWQgcmVmYWN0b3Jpbmcgb2YgdG9rZW4gcGFyc2luZyAuLi5cclxuICAgIGZ1bmN0aW9uIHJlYWRUb2tlbkluUGxhY2Vob2xkZXIoc2NuciwgY29udGV4dCkge1xyXG4gICAgICAgIGxldCB0b2tlbiA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgY2ggPSBzY25yLmN1cnJlbnRDaGFyKCk7XHJcbiAgICAgICAgc3dpdGNoIChjaCkge1xyXG4gICAgICAgICAgICBjYXNlIFwie1wiIC8qIEJyYWNlTGVmdCAqLzpcclxuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmJyYWNlTmVzdCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1pdEVycm9yKENvbXBpbGVFcnJvckNvZGVzLk5PVF9BTExPV19ORVNUX1BMQUNFSE9MREVSLCBjdXJyZW50UG9zaXRpb24oKSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzY25yLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIHRva2VuID0gZ2V0VG9rZW4oY29udGV4dCwgMiAvKiBCcmFjZUxlZnQgKi8sIFwie1wiIC8qIEJyYWNlTGVmdCAqLyk7XHJcbiAgICAgICAgICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5icmFjZU5lc3QrKztcclxuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjtcclxuICAgICAgICAgICAgY2FzZSBcIn1cIiAvKiBCcmFjZVJpZ2h0ICovOlxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuYnJhY2VOZXN0ID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY3VycmVudFR5cGUgPT09IDIgLyogQnJhY2VMZWZ0ICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1pdEVycm9yKENvbXBpbGVFcnJvckNvZGVzLkVNUFRZX1BMQUNFSE9MREVSLCBjdXJyZW50UG9zaXRpb24oKSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzY25yLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIHRva2VuID0gZ2V0VG9rZW4oY29udGV4dCwgMyAvKiBCcmFjZVJpZ2h0ICovLCBcIn1cIiAvKiBCcmFjZVJpZ2h0ICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuYnJhY2VOZXN0LS07XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmJyYWNlTmVzdCA+IDAgJiYgc2tpcFNwYWNlcyhzY25yKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmluTGlua2VkICYmIGNvbnRleHQuYnJhY2VOZXN0ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5pbkxpbmtlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgICAgICAgICBjYXNlIFwiQFwiIC8qIExpbmtlZEFsaWFzICovOlxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuYnJhY2VOZXN0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtaXRFcnJvcihDb21waWxlRXJyb3JDb2Rlcy5VTlRFUk1JTkFURURfQ0xPU0lOR19CUkFDRSwgY3VycmVudFBvc2l0aW9uKCksIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9rZW4gPSByZWFkVG9rZW5JbkxpbmtlZChzY25yLCBjb250ZXh0KSB8fCBnZXRFbmRUb2tlbihjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuYnJhY2VOZXN0ID0gMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGxldCB2YWxpZE5hbWVkSWRlbnRpZmllciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsaWRMaXN0SWRlbnRpZmllciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsaWRMaXRlcmFsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChpc1BsdXJhbFN0YXJ0KHNjbnIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuYnJhY2VOZXN0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0RXJyb3IoQ29tcGlsZUVycm9yQ29kZXMuVU5URVJNSU5BVEVEX0NMT1NJTkdfQlJBQ0UsIGN1cnJlbnRQb3NpdGlvbigpLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBnZXRUb2tlbihjb250ZXh0LCAxIC8qIFBpcGUgKi8sIHJlYWRQbHVyYWwoc2NucikpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5icmFjZU5lc3QgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuaW5MaW5rZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5icmFjZU5lc3QgPiAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKGNvbnRleHQuY3VycmVudFR5cGUgPT09IDUgLyogTmFtZWQgKi8gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jdXJyZW50VHlwZSA9PT0gNiAvKiBMaXN0ICovIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY3VycmVudFR5cGUgPT09IDcgLyogTGl0ZXJhbCAqLykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbWl0RXJyb3IoQ29tcGlsZUVycm9yQ29kZXMuVU5URVJNSU5BVEVEX0NMT1NJTkdfQlJBQ0UsIGN1cnJlbnRQb3NpdGlvbigpLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmJyYWNlTmVzdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRUb2tlbihzY25yLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgodmFsaWROYW1lZElkZW50aWZpZXIgPSBpc05hbWVkSWRlbnRpZmllclN0YXJ0KHNjbnIsIGNvbnRleHQpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuID0gZ2V0VG9rZW4oY29udGV4dCwgNSAvKiBOYW1lZCAqLywgcmVhZE5hbWVkSWRlbnRpZmllcihzY25yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcFNwYWNlcyhzY25yKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKHZhbGlkTGlzdElkZW50aWZpZXIgPSBpc0xpc3RJZGVudGlmaWVyU3RhcnQoc2NuciwgY29udGV4dCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBnZXRUb2tlbihjb250ZXh0LCA2IC8qIExpc3QgKi8sIHJlYWRMaXN0SWRlbnRpZmllcihzY25yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcFNwYWNlcyhzY25yKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKHZhbGlkTGl0ZXJhbCA9IGlzTGl0ZXJhbFN0YXJ0KHNjbnIsIGNvbnRleHQpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuID0gZ2V0VG9rZW4oY29udGV4dCwgNyAvKiBMaXRlcmFsICovLCByZWFkTGl0ZXJhbChzY25yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcFNwYWNlcyhzY25yKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkTmFtZWRJZGVudGlmaWVyICYmICF2YWxpZExpc3RJZGVudGlmaWVyICYmICF2YWxpZExpdGVyYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiB3ZSBzaG91bGQgYmUgcmUtZGVzaWduZWQgaW52YWxpZCBjYXNlcywgd2hlbiB3ZSB3aWxsIGV4dGVuZCBtZXNzYWdlIHN5bnRheCBuZWFyIHRoZSBmdXR1cmUgLi4uXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBnZXRUb2tlbihjb250ZXh0LCAxMyAvKiBJbnZhbGlkUGxhY2UgKi8sIHJlYWRJbnZhbGlkSWRlbnRpZmllcihzY25yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1pdEVycm9yKENvbXBpbGVFcnJvckNvZGVzLklOVkFMSURfVE9LRU5fSU5fUExBQ0VIT0xERVIsIGN1cnJlbnRQb3NpdGlvbigpLCAwLCB0b2tlbi52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcFNwYWNlcyhzY25yKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogV2UgbmVlZCByZWZhY3RvcmluZyBvZiB0b2tlbiBwYXJzaW5nIC4uLlxyXG4gICAgZnVuY3Rpb24gcmVhZFRva2VuSW5MaW5rZWQoc2NuciwgY29udGV4dCkge1xyXG4gICAgICAgIGNvbnN0IHsgY3VycmVudFR5cGUgfSA9IGNvbnRleHQ7XHJcbiAgICAgICAgbGV0IHRva2VuID0gbnVsbDtcclxuICAgICAgICBjb25zdCBjaCA9IHNjbnIuY3VycmVudENoYXIoKTtcclxuICAgICAgICBpZiAoKGN1cnJlbnRUeXBlID09PSA4IC8qIExpbmtlZEFsaWFzICovIHx8XHJcbiAgICAgICAgICAgIGN1cnJlbnRUeXBlID09PSA5IC8qIExpbmtlZERvdCAqLyB8fFxyXG4gICAgICAgICAgICBjdXJyZW50VHlwZSA9PT0gMTIgLyogTGlua2VkTW9kaWZpZXIgKi8gfHxcclxuICAgICAgICAgICAgY3VycmVudFR5cGUgPT09IDEwIC8qIExpbmtlZERlbGltaXRlciAqLykgJiZcclxuICAgICAgICAgICAgKGNoID09PSBDSEFSX0xGIHx8IGNoID09PSBDSEFSX1NQKSkge1xyXG4gICAgICAgICAgICBlbWl0RXJyb3IoQ29tcGlsZUVycm9yQ29kZXMuSU5WQUxJRF9MSU5LRURfRk9STUFULCBjdXJyZW50UG9zaXRpb24oKSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoY2gpIHtcclxuICAgICAgICAgICAgY2FzZSBcIkBcIiAvKiBMaW5rZWRBbGlhcyAqLzpcclxuICAgICAgICAgICAgICAgIHNjbnIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgdG9rZW4gPSBnZXRUb2tlbihjb250ZXh0LCA4IC8qIExpbmtlZEFsaWFzICovLCBcIkBcIiAvKiBMaW5rZWRBbGlhcyAqLyk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmluTGlua2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjtcclxuICAgICAgICAgICAgY2FzZSBcIi5cIiAvKiBMaW5rZWREb3QgKi86XHJcbiAgICAgICAgICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgICAgICAgICAgc2Nuci5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VG9rZW4oY29udGV4dCwgOSAvKiBMaW5rZWREb3QgKi8sIFwiLlwiIC8qIExpbmtlZERvdCAqLyk7XHJcbiAgICAgICAgICAgIGNhc2UgXCI6XCIgLyogTGlua2VkRGVsaW1pdGVyICovOlxyXG4gICAgICAgICAgICAgICAgc2tpcFNwYWNlcyhzY25yKTtcclxuICAgICAgICAgICAgICAgIHNjbnIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRva2VuKGNvbnRleHQsIDEwIC8qIExpbmtlZERlbGltaXRlciAqLywgXCI6XCIgLyogTGlua2VkRGVsaW1pdGVyICovKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGlmIChpc1BsdXJhbFN0YXJ0KHNjbnIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBnZXRUb2tlbihjb250ZXh0LCAxIC8qIFBpcGUgKi8sIHJlYWRQbHVyYWwoc2NucikpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5icmFjZU5lc3QgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuaW5MaW5rZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNMaW5rZWREb3RTdGFydChzY25yLCBjb250ZXh0KSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTGlua2VkRGVsaW1pdGVyU3RhcnQoc2NuciwgY29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkVG9rZW5JbkxpbmtlZChzY25yLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpc0xpbmtlZE1vZGlmaWVyU3RhcnQoc2NuciwgY29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRUb2tlbihjb250ZXh0LCAxMiAvKiBMaW5rZWRNb2RpZmllciAqLywgcmVhZExpbmtlZE1vZGlmaWVyKHNjbnIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpc0xpbmtlZFJlZmVyU3RhcnQoc2NuciwgY29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBza2lwU3BhY2VzKHNjbnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gXCJ7XCIgLyogQnJhY2VMZWZ0ICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjYW4gdGhlIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkVG9rZW5JblBsYWNlaG9sZGVyKHNjbnIsIGNvbnRleHQpIHx8IHRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldFRva2VuKGNvbnRleHQsIDExIC8qIExpbmtlZEtleSAqLywgcmVhZExpbmtlZFJlZmVyKHNjbnIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFR5cGUgPT09IDggLyogTGlua2VkQWxpYXMgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBlbWl0RXJyb3IoQ29tcGlsZUVycm9yQ29kZXMuSU5WQUxJRF9MSU5LRURfRk9STUFULCBjdXJyZW50UG9zaXRpb24oKSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmJyYWNlTmVzdCA9IDA7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmluTGlua2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZFRva2VuKHNjbnIsIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFRPRE86IFdlIG5lZWQgcmVmYWN0b3Jpbmcgb2YgdG9rZW4gcGFyc2luZyAuLi5cclxuICAgIGZ1bmN0aW9uIHJlYWRUb2tlbihzY25yLCBjb250ZXh0KSB7XHJcbiAgICAgICAgbGV0IHRva2VuID0geyB0eXBlOiAxNCAvKiBFT0YgKi8gfTtcclxuICAgICAgICBpZiAoY29udGV4dC5icmFjZU5lc3QgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWFkVG9rZW5JblBsYWNlaG9sZGVyKHNjbnIsIGNvbnRleHQpIHx8IGdldEVuZFRva2VuKGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGV4dC5pbkxpbmtlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVhZFRva2VuSW5MaW5rZWQoc2NuciwgY29udGV4dCkgfHwgZ2V0RW5kVG9rZW4oY29udGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNoID0gc2Nuci5jdXJyZW50Q2hhcigpO1xyXG4gICAgICAgIHN3aXRjaCAoY2gpIHtcclxuICAgICAgICAgICAgY2FzZSBcIntcIiAvKiBCcmFjZUxlZnQgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZFRva2VuSW5QbGFjZWhvbGRlcihzY25yLCBjb250ZXh0KSB8fCBnZXRFbmRUb2tlbihjb250ZXh0KTtcclxuICAgICAgICAgICAgY2FzZSBcIn1cIiAvKiBCcmFjZVJpZ2h0ICovOlxyXG4gICAgICAgICAgICAgICAgZW1pdEVycm9yKENvbXBpbGVFcnJvckNvZGVzLlVOQkFMQU5DRURfQ0xPU0lOR19CUkFDRSwgY3VycmVudFBvc2l0aW9uKCksIDApO1xyXG4gICAgICAgICAgICAgICAgc2Nuci5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VG9rZW4oY29udGV4dCwgMyAvKiBCcmFjZVJpZ2h0ICovLCBcIn1cIiAvKiBCcmFjZVJpZ2h0ICovKTtcclxuICAgICAgICAgICAgY2FzZSBcIkBcIiAvKiBMaW5rZWRBbGlhcyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWFkVG9rZW5JbkxpbmtlZChzY25yLCBjb250ZXh0KSB8fCBnZXRFbmRUb2tlbihjb250ZXh0KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGlmIChpc1BsdXJhbFN0YXJ0KHNjbnIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBnZXRUb2tlbihjb250ZXh0LCAxIC8qIFBpcGUgKi8sIHJlYWRQbHVyYWwoc2NucikpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5icmFjZU5lc3QgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuaW5MaW5rZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGlzTW9kdWxvLCBoYXNTcGFjZSB9ID0gZGV0ZWN0TW9kdWxvU3RhcnQoc2Nucik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNNb2R1bG8pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzU3BhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRUb2tlbihjb250ZXh0LCAwIC8qIFRleHQgKi8sIHJlYWRUZXh0KHNjbnIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldFRva2VuKGNvbnRleHQsIDQgLyogTW9kdWxvICovLCByZWFkTW9kdWxvKHNjbnIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpc1RleHRTdGFydChzY25yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRUb2tlbihjb250ZXh0LCAwIC8qIFRleHQgKi8sIHJlYWRUZXh0KHNjbnIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBuZXh0VG9rZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjdXJyZW50VHlwZSwgb2Zmc2V0LCBzdGFydExvYywgZW5kTG9jIH0gPSBfY29udGV4dDtcclxuICAgICAgICBfY29udGV4dC5sYXN0VHlwZSA9IGN1cnJlbnRUeXBlO1xyXG4gICAgICAgIF9jb250ZXh0Lmxhc3RPZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICAgICAgX2NvbnRleHQubGFzdFN0YXJ0TG9jID0gc3RhcnRMb2M7XHJcbiAgICAgICAgX2NvbnRleHQubGFzdEVuZExvYyA9IGVuZExvYztcclxuICAgICAgICBfY29udGV4dC5vZmZzZXQgPSBjdXJyZW50T2Zmc2V0KCk7XHJcbiAgICAgICAgX2NvbnRleHQuc3RhcnRMb2MgPSBjdXJyZW50UG9zaXRpb24oKTtcclxuICAgICAgICBpZiAoX3NjbnIuY3VycmVudENoYXIoKSA9PT0gRU9GKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRUb2tlbihfY29udGV4dCwgMTQgLyogRU9GICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlYWRUb2tlbihfc2NuciwgX2NvbnRleHQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0VG9rZW4sXHJcbiAgICAgICAgY3VycmVudE9mZnNldCxcclxuICAgICAgICBjdXJyZW50UG9zaXRpb24sXHJcbiAgICAgICAgY29udGV4dFxyXG4gICAgfTtcclxufVxuXG5jb25zdCBFUlJPUl9ET01BSU4gPSAncGFyc2VyJztcclxuLy8gQmFja3NsYXNoIGJhY2tzbGFzaCwgYmFja3NsYXNoIHF1b3RlLCB1SEhISCwgVUhISEhISC5cclxuY29uc3QgS05PV05fRVNDQVBFUyA9IC8oPzpcXFxcXFxcXHxcXFxcJ3xcXFxcdShbMC05YS1mQS1GXXs0fSl8XFxcXFUoWzAtOWEtZkEtRl17Nn0pKS9nO1xyXG5mdW5jdGlvbiBmcm9tRXNjYXBlU2VxdWVuY2UobWF0Y2gsIGNvZGVQb2ludDQsIGNvZGVQb2ludDYpIHtcclxuICAgIHN3aXRjaCAobWF0Y2gpIHtcclxuICAgICAgICBjYXNlIGBcXFxcXFxcXGA6XHJcbiAgICAgICAgICAgIHJldHVybiBgXFxcXGA7XHJcbiAgICAgICAgY2FzZSBgXFxcXFxcJ2A6XHJcbiAgICAgICAgICAgIHJldHVybiBgXFwnYDtcclxuICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvZGVQb2ludCA9IHBhcnNlSW50KGNvZGVQb2ludDQgfHwgY29kZVBvaW50NiwgMTYpO1xyXG4gICAgICAgICAgICBpZiAoY29kZVBvaW50IDw9IDB4ZDdmZiB8fCBjb2RlUG9pbnQgPj0gMHhlMDAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21Db2RlUG9pbnQoY29kZVBvaW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpbnZhbGlkIC4uLlxyXG4gICAgICAgICAgICAvLyBSZXBsYWNlIHRoZW0gd2l0aCBVK0ZGRkQgUkVQTEFDRU1FTlQgQ0hBUkFDVEVSLlxyXG4gICAgICAgICAgICByZXR1cm4gJ++/vSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVBhcnNlcihvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IGxvY2F0aW9uID0gb3B0aW9ucy5sb2NhdGlvbiAhPT0gZmFsc2U7XHJcbiAgICBjb25zdCB7IG9uRXJyb3IgfSA9IG9wdGlvbnM7XHJcbiAgICBmdW5jdGlvbiBlbWl0RXJyb3IodG9rZW56ZXIsIGNvZGUsIHN0YXJ0LCBvZmZzZXQsIC4uLmFyZ3MpIHtcclxuICAgICAgICBjb25zdCBlbmQgPSB0b2tlbnplci5jdXJyZW50UG9zaXRpb24oKTtcclxuICAgICAgICBlbmQub2Zmc2V0ICs9IG9mZnNldDtcclxuICAgICAgICBlbmQuY29sdW1uICs9IG9mZnNldDtcclxuICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICBjb25zdCBsb2MgPSBjcmVhdGVMb2NhdGlvbihzdGFydCwgZW5kKTtcclxuICAgICAgICAgICAgY29uc3QgZXJyID0gY3JlYXRlQ29tcGlsZUVycm9yKGNvZGUsIGxvYywge1xyXG4gICAgICAgICAgICAgICAgZG9tYWluOiBFUlJPUl9ET01BSU4sXHJcbiAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBvbkVycm9yKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc3RhcnROb2RlKHR5cGUsIG9mZnNldCwgbG9jKSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHtcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgc3RhcnQ6IG9mZnNldCxcclxuICAgICAgICAgICAgZW5kOiBvZmZzZXRcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChsb2NhdGlvbikge1xyXG4gICAgICAgICAgICBub2RlLmxvYyA9IHsgc3RhcnQ6IGxvYywgZW5kOiBsb2MgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBlbmROb2RlKG5vZGUsIG9mZnNldCwgcG9zLCB0eXBlKSB7XHJcbiAgICAgICAgbm9kZS5lbmQgPSBvZmZzZXQ7XHJcbiAgICAgICAgaWYgKHR5cGUpIHtcclxuICAgICAgICAgICAgbm9kZS50eXBlID0gdHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvY2F0aW9uICYmIG5vZGUubG9jKSB7XHJcbiAgICAgICAgICAgIG5vZGUubG9jLmVuZCA9IHBvcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwYXJzZVRleHQodG9rZW5pemVyLCB2YWx1ZSkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0b2tlbml6ZXIuY29udGV4dCgpO1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBzdGFydE5vZGUoMyAvKiBUZXh0ICovLCBjb250ZXh0Lm9mZnNldCwgY29udGV4dC5zdGFydExvYyk7XHJcbiAgICAgICAgbm9kZS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGVuZE5vZGUobm9kZSwgdG9rZW5pemVyLmN1cnJlbnRPZmZzZXQoKSwgdG9rZW5pemVyLmN1cnJlbnRQb3NpdGlvbigpKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhcnNlTGlzdCh0b2tlbml6ZXIsIGluZGV4KSB7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRva2VuaXplci5jb250ZXh0KCk7XHJcbiAgICAgICAgY29uc3QgeyBsYXN0T2Zmc2V0OiBvZmZzZXQsIGxhc3RTdGFydExvYzogbG9jIH0gPSBjb250ZXh0OyAvLyBnZXQgYnJhY2UgbGVmdCBsb2NcclxuICAgICAgICBjb25zdCBub2RlID0gc3RhcnROb2RlKDUgLyogTGlzdCAqLywgb2Zmc2V0LCBsb2MpO1xyXG4gICAgICAgIG5vZGUuaW5kZXggPSBwYXJzZUludChpbmRleCwgMTApO1xyXG4gICAgICAgIHRva2VuaXplci5uZXh0VG9rZW4oKTsgLy8gc2tpcCBicmFjaCByaWdodFxyXG4gICAgICAgIGVuZE5vZGUobm9kZSwgdG9rZW5pemVyLmN1cnJlbnRPZmZzZXQoKSwgdG9rZW5pemVyLmN1cnJlbnRQb3NpdGlvbigpKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhcnNlTmFtZWQodG9rZW5pemVyLCBrZXkpIHtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gdG9rZW5pemVyLmNvbnRleHQoKTtcclxuICAgICAgICBjb25zdCB7IGxhc3RPZmZzZXQ6IG9mZnNldCwgbGFzdFN0YXJ0TG9jOiBsb2MgfSA9IGNvbnRleHQ7IC8vIGdldCBicmFjZSBsZWZ0IGxvY1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBzdGFydE5vZGUoNCAvKiBOYW1lZCAqLywgb2Zmc2V0LCBsb2MpO1xyXG4gICAgICAgIG5vZGUua2V5ID0ga2V5O1xyXG4gICAgICAgIHRva2VuaXplci5uZXh0VG9rZW4oKTsgLy8gc2tpcCBicmFjaCByaWdodFxyXG4gICAgICAgIGVuZE5vZGUobm9kZSwgdG9rZW5pemVyLmN1cnJlbnRPZmZzZXQoKSwgdG9rZW5pemVyLmN1cnJlbnRQb3NpdGlvbigpKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhcnNlTGl0ZXJhbCh0b2tlbml6ZXIsIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRva2VuaXplci5jb250ZXh0KCk7XHJcbiAgICAgICAgY29uc3QgeyBsYXN0T2Zmc2V0OiBvZmZzZXQsIGxhc3RTdGFydExvYzogbG9jIH0gPSBjb250ZXh0OyAvLyBnZXQgYnJhY2UgbGVmdCBsb2NcclxuICAgICAgICBjb25zdCBub2RlID0gc3RhcnROb2RlKDkgLyogTGl0ZXJhbCAqLywgb2Zmc2V0LCBsb2MpO1xyXG4gICAgICAgIG5vZGUudmFsdWUgPSB2YWx1ZS5yZXBsYWNlKEtOT1dOX0VTQ0FQRVMsIGZyb21Fc2NhcGVTZXF1ZW5jZSk7XHJcbiAgICAgICAgdG9rZW5pemVyLm5leHRUb2tlbigpOyAvLyBza2lwIGJyYWNoIHJpZ2h0XHJcbiAgICAgICAgZW5kTm9kZShub2RlLCB0b2tlbml6ZXIuY3VycmVudE9mZnNldCgpLCB0b2tlbml6ZXIuY3VycmVudFBvc2l0aW9uKCkpO1xyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcGFyc2VMaW5rZWRNb2RpZmllcih0b2tlbml6ZXIpIHtcclxuICAgICAgICBjb25zdCB0b2tlbiA9IHRva2VuaXplci5uZXh0VG9rZW4oKTtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gdG9rZW5pemVyLmNvbnRleHQoKTtcclxuICAgICAgICBjb25zdCB7IGxhc3RPZmZzZXQ6IG9mZnNldCwgbGFzdFN0YXJ0TG9jOiBsb2MgfSA9IGNvbnRleHQ7IC8vIGdldCBsaW5rZWQgZG90IGxvY1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBzdGFydE5vZGUoOCAvKiBMaW5rZWRNb2RpZmllciAqLywgb2Zmc2V0LCBsb2MpO1xyXG4gICAgICAgIGlmICh0b2tlbi50eXBlICE9PSAxMiAvKiBMaW5rZWRNb2RpZmllciAqLykge1xyXG4gICAgICAgICAgICAvLyBlbXB0eSBtb2RpZmllclxyXG4gICAgICAgICAgICBlbWl0RXJyb3IodG9rZW5pemVyLCBDb21waWxlRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0VNUFRZX0xJTktFRF9NT0RJRklFUiwgY29udGV4dC5sYXN0U3RhcnRMb2MsIDApO1xyXG4gICAgICAgICAgICBub2RlLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIGVuZE5vZGUobm9kZSwgb2Zmc2V0LCBsb2MpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbmV4dENvbnN1bWVUb2tlbjogdG9rZW4sXHJcbiAgICAgICAgICAgICAgICBub2RlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIHRva2VuXHJcbiAgICAgICAgaWYgKHRva2VuLnZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgZW1pdEVycm9yKHRva2VuaXplciwgQ29tcGlsZUVycm9yQ29kZXMuVU5FWFBFQ1RFRF9MRVhJQ0FMX0FOQUxZU0lTLCBjb250ZXh0Lmxhc3RTdGFydExvYywgMCwgZ2V0VG9rZW5DYXB0aW9uKHRva2VuKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGUudmFsdWUgPSB0b2tlbi52YWx1ZSB8fCAnJztcclxuICAgICAgICBlbmROb2RlKG5vZGUsIHRva2VuaXplci5jdXJyZW50T2Zmc2V0KCksIHRva2VuaXplci5jdXJyZW50UG9zaXRpb24oKSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbm9kZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwYXJzZUxpbmtlZEtleSh0b2tlbml6ZXIsIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRva2VuaXplci5jb250ZXh0KCk7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHN0YXJ0Tm9kZSg3IC8qIExpbmtlZEtleSAqLywgY29udGV4dC5vZmZzZXQsIGNvbnRleHQuc3RhcnRMb2MpO1xyXG4gICAgICAgIG5vZGUudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBlbmROb2RlKG5vZGUsIHRva2VuaXplci5jdXJyZW50T2Zmc2V0KCksIHRva2VuaXplci5jdXJyZW50UG9zaXRpb24oKSk7XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwYXJzZUxpbmtlZCh0b2tlbml6ZXIpIHtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gdG9rZW5pemVyLmNvbnRleHQoKTtcclxuICAgICAgICBjb25zdCBsaW5rZWROb2RlID0gc3RhcnROb2RlKDYgLyogTGlua2VkICovLCBjb250ZXh0Lm9mZnNldCwgY29udGV4dC5zdGFydExvYyk7XHJcbiAgICAgICAgbGV0IHRva2VuID0gdG9rZW5pemVyLm5leHRUb2tlbigpO1xyXG4gICAgICAgIGlmICh0b2tlbi50eXBlID09PSA5IC8qIExpbmtlZERvdCAqLykge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUxpbmtlZE1vZGlmaWVyKHRva2VuaXplcik7XHJcbiAgICAgICAgICAgIGxpbmtlZE5vZGUubW9kaWZpZXIgPSBwYXJzZWQubm9kZTtcclxuICAgICAgICAgICAgdG9rZW4gPSBwYXJzZWQubmV4dENvbnN1bWVUb2tlbiB8fCB0b2tlbml6ZXIubmV4dFRva2VuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFzc2V0IGNoZWNrIHRva2VuXHJcbiAgICAgICAgaWYgKHRva2VuLnR5cGUgIT09IDEwIC8qIExpbmtlZERlbGltaXRlciAqLykge1xyXG4gICAgICAgICAgICBlbWl0RXJyb3IodG9rZW5pemVyLCBDb21waWxlRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0xFWElDQUxfQU5BTFlTSVMsIGNvbnRleHQubGFzdFN0YXJ0TG9jLCAwLCBnZXRUb2tlbkNhcHRpb24odG9rZW4pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG9rZW4gPSB0b2tlbml6ZXIubmV4dFRva2VuKCk7XHJcbiAgICAgICAgLy8gc2tpcCBicmFjZSBsZWZ0XHJcbiAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IDIgLyogQnJhY2VMZWZ0ICovKSB7XHJcbiAgICAgICAgICAgIHRva2VuID0gdG9rZW5pemVyLm5leHRUb2tlbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAxMSAvKiBMaW5rZWRLZXkgKi86XHJcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4udmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtaXRFcnJvcih0b2tlbml6ZXIsIENvbXBpbGVFcnJvckNvZGVzLlVORVhQRUNURURfTEVYSUNBTF9BTkFMWVNJUywgY29udGV4dC5sYXN0U3RhcnRMb2MsIDAsIGdldFRva2VuQ2FwdGlvbih0b2tlbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGlua2VkTm9kZS5rZXkgPSBwYXJzZUxpbmtlZEtleSh0b2tlbml6ZXIsIHRva2VuLnZhbHVlIHx8ICcnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDUgLyogTmFtZWQgKi86XHJcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4udmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtaXRFcnJvcih0b2tlbml6ZXIsIENvbXBpbGVFcnJvckNvZGVzLlVORVhQRUNURURfTEVYSUNBTF9BTkFMWVNJUywgY29udGV4dC5sYXN0U3RhcnRMb2MsIDAsIGdldFRva2VuQ2FwdGlvbih0b2tlbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGlua2VkTm9kZS5rZXkgPSBwYXJzZU5hbWVkKHRva2VuaXplciwgdG9rZW4udmFsdWUgfHwgJycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNiAvKiBMaXN0ICovOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbWl0RXJyb3IodG9rZW5pemVyLCBDb21waWxlRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0xFWElDQUxfQU5BTFlTSVMsIGNvbnRleHQubGFzdFN0YXJ0TG9jLCAwLCBnZXRUb2tlbkNhcHRpb24odG9rZW4pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxpbmtlZE5vZGUua2V5ID0gcGFyc2VMaXN0KHRva2VuaXplciwgdG9rZW4udmFsdWUgfHwgJycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNyAvKiBMaXRlcmFsICovOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbWl0RXJyb3IodG9rZW5pemVyLCBDb21waWxlRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0xFWElDQUxfQU5BTFlTSVMsIGNvbnRleHQubGFzdFN0YXJ0TG9jLCAwLCBnZXRUb2tlbkNhcHRpb24odG9rZW4pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxpbmtlZE5vZGUua2V5ID0gcGFyc2VMaXRlcmFsKHRva2VuaXplciwgdG9rZW4udmFsdWUgfHwgJycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvLyBlbXB0eSBrZXlcclxuICAgICAgICAgICAgICAgIGVtaXRFcnJvcih0b2tlbml6ZXIsIENvbXBpbGVFcnJvckNvZGVzLlVORVhQRUNURURfRU1QVFlfTElOS0VEX0tFWSwgY29udGV4dC5sYXN0U3RhcnRMb2MsIDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENvbnRleHQgPSB0b2tlbml6ZXIuY29udGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW1wdHlMaW5rZWRLZXlOb2RlID0gc3RhcnROb2RlKDcgLyogTGlua2VkS2V5ICovLCBuZXh0Q29udGV4dC5vZmZzZXQsIG5leHRDb250ZXh0LnN0YXJ0TG9jKTtcclxuICAgICAgICAgICAgICAgIGVtcHR5TGlua2VkS2V5Tm9kZS52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgZW5kTm9kZShlbXB0eUxpbmtlZEtleU5vZGUsIG5leHRDb250ZXh0Lm9mZnNldCwgbmV4dENvbnRleHQuc3RhcnRMb2MpO1xyXG4gICAgICAgICAgICAgICAgbGlua2VkTm9kZS5rZXkgPSBlbXB0eUxpbmtlZEtleU5vZGU7XHJcbiAgICAgICAgICAgICAgICBlbmROb2RlKGxpbmtlZE5vZGUsIG5leHRDb250ZXh0Lm9mZnNldCwgbmV4dENvbnRleHQuc3RhcnRMb2MpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Q29uc3VtZVRva2VuOiB0b2tlbixcclxuICAgICAgICAgICAgICAgICAgICBub2RlOiBsaW5rZWROb2RlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbmROb2RlKGxpbmtlZE5vZGUsIHRva2VuaXplci5jdXJyZW50T2Zmc2V0KCksIHRva2VuaXplci5jdXJyZW50UG9zaXRpb24oKSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbm9kZTogbGlua2VkTm9kZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwYXJzZU1lc3NhZ2UodG9rZW5pemVyKSB7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRva2VuaXplci5jb250ZXh0KCk7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBjb250ZXh0LmN1cnJlbnRUeXBlID09PSAxIC8qIFBpcGUgKi9cclxuICAgICAgICAgICAgPyB0b2tlbml6ZXIuY3VycmVudE9mZnNldCgpXHJcbiAgICAgICAgICAgIDogY29udGV4dC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRMb2MgPSBjb250ZXh0LmN1cnJlbnRUeXBlID09PSAxIC8qIFBpcGUgKi9cclxuICAgICAgICAgICAgPyBjb250ZXh0LmVuZExvY1xyXG4gICAgICAgICAgICA6IGNvbnRleHQuc3RhcnRMb2M7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHN0YXJ0Tm9kZSgyIC8qIE1lc3NhZ2UgKi8sIHN0YXJ0T2Zmc2V0LCBzdGFydExvYyk7XHJcbiAgICAgICAgbm9kZS5pdGVtcyA9IFtdO1xyXG4gICAgICAgIGxldCBuZXh0VG9rZW4gPSBudWxsO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBuZXh0VG9rZW4gfHwgdG9rZW5pemVyLm5leHRUb2tlbigpO1xyXG4gICAgICAgICAgICBuZXh0VG9rZW4gPSBudWxsO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBUZXh0ICovOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbi52YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRFcnJvcih0b2tlbml6ZXIsIENvbXBpbGVFcnJvckNvZGVzLlVORVhQRUNURURfTEVYSUNBTF9BTkFMWVNJUywgY29udGV4dC5sYXN0U3RhcnRMb2MsIDAsIGdldFRva2VuQ2FwdGlvbih0b2tlbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBub2RlLml0ZW1zLnB1c2gocGFyc2VUZXh0KHRva2VuaXplciwgdG9rZW4udmFsdWUgfHwgJycpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNiAvKiBMaXN0ICovOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbi52YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRFcnJvcih0b2tlbml6ZXIsIENvbXBpbGVFcnJvckNvZGVzLlVORVhQRUNURURfTEVYSUNBTF9BTkFMWVNJUywgY29udGV4dC5sYXN0U3RhcnRMb2MsIDAsIGdldFRva2VuQ2FwdGlvbih0b2tlbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBub2RlLml0ZW1zLnB1c2gocGFyc2VMaXN0KHRva2VuaXplciwgdG9rZW4udmFsdWUgfHwgJycpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNSAvKiBOYW1lZCAqLzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4udmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0RXJyb3IodG9rZW5pemVyLCBDb21waWxlRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0xFWElDQUxfQU5BTFlTSVMsIGNvbnRleHQubGFzdFN0YXJ0TG9jLCAwLCBnZXRUb2tlbkNhcHRpb24odG9rZW4pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5pdGVtcy5wdXNoKHBhcnNlTmFtZWQodG9rZW5pemVyLCB0b2tlbi52YWx1ZSB8fCAnJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3IC8qIExpdGVyYWwgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdEVycm9yKHRva2VuaXplciwgQ29tcGlsZUVycm9yQ29kZXMuVU5FWFBFQ1RFRF9MRVhJQ0FMX0FOQUxZU0lTLCBjb250ZXh0Lmxhc3RTdGFydExvYywgMCwgZ2V0VG9rZW5DYXB0aW9uKHRva2VuKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaXRlbXMucHVzaChwYXJzZUxpdGVyYWwodG9rZW5pemVyLCB0b2tlbi52YWx1ZSB8fCAnJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4IC8qIExpbmtlZEFsaWFzICovOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlTGlua2VkKHRva2VuaXplcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5pdGVtcy5wdXNoKHBhcnNlZC5ub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0VG9rZW4gPSBwYXJzZWQubmV4dENvbnN1bWVUb2tlbiB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSB3aGlsZSAoY29udGV4dC5jdXJyZW50VHlwZSAhPT0gMTQgLyogRU9GICovICYmXHJcbiAgICAgICAgICAgIGNvbnRleHQuY3VycmVudFR5cGUgIT09IDEgLyogUGlwZSAqLyk7XHJcbiAgICAgICAgLy8gYWRqdXN0IG1lc3NhZ2Ugbm9kZSBsb2NcclxuICAgICAgICBjb25zdCBlbmRPZmZzZXQgPSBjb250ZXh0LmN1cnJlbnRUeXBlID09PSAxIC8qIFBpcGUgKi9cclxuICAgICAgICAgICAgPyBjb250ZXh0Lmxhc3RPZmZzZXRcclxuICAgICAgICAgICAgOiB0b2tlbml6ZXIuY3VycmVudE9mZnNldCgpO1xyXG4gICAgICAgIGNvbnN0IGVuZExvYyA9IGNvbnRleHQuY3VycmVudFR5cGUgPT09IDEgLyogUGlwZSAqL1xyXG4gICAgICAgICAgICA/IGNvbnRleHQubGFzdEVuZExvY1xyXG4gICAgICAgICAgICA6IHRva2VuaXplci5jdXJyZW50UG9zaXRpb24oKTtcclxuICAgICAgICBlbmROb2RlKG5vZGUsIGVuZE9mZnNldCwgZW5kTG9jKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhcnNlUGx1cmFsKHRva2VuaXplciwgb2Zmc2V0LCBsb2MsIG1zZ05vZGUpIHtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gdG9rZW5pemVyLmNvbnRleHQoKTtcclxuICAgICAgICBsZXQgaGFzRW1wdHlNZXNzYWdlID0gbXNnTm9kZS5pdGVtcy5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHN0YXJ0Tm9kZSgxIC8qIFBsdXJhbCAqLywgb2Zmc2V0LCBsb2MpO1xyXG4gICAgICAgIG5vZGUuY2FzZXMgPSBbXTtcclxuICAgICAgICBub2RlLmNhc2VzLnB1c2gobXNnTm9kZSk7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBjb25zdCBtc2cgPSBwYXJzZU1lc3NhZ2UodG9rZW5pemVyKTtcclxuICAgICAgICAgICAgaWYgKCFoYXNFbXB0eU1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGhhc0VtcHR5TWVzc2FnZSA9IG1zZy5pdGVtcy5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZS5jYXNlcy5wdXNoKG1zZyk7XHJcbiAgICAgICAgfSB3aGlsZSAoY29udGV4dC5jdXJyZW50VHlwZSAhPT0gMTQgLyogRU9GICovKTtcclxuICAgICAgICBpZiAoaGFzRW1wdHlNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGVtaXRFcnJvcih0b2tlbml6ZXIsIENvbXBpbGVFcnJvckNvZGVzLk1VU1RfSEFWRV9NRVNTQUdFU19JTl9QTFVSQUwsIGxvYywgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVuZE5vZGUobm9kZSwgdG9rZW5pemVyLmN1cnJlbnRPZmZzZXQoKSwgdG9rZW5pemVyLmN1cnJlbnRQb3NpdGlvbigpKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhcnNlUmVzb3VyY2UodG9rZW5pemVyKSB7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRva2VuaXplci5jb250ZXh0KCk7XHJcbiAgICAgICAgY29uc3QgeyBvZmZzZXQsIHN0YXJ0TG9jIH0gPSBjb250ZXh0O1xyXG4gICAgICAgIGNvbnN0IG1zZ05vZGUgPSBwYXJzZU1lc3NhZ2UodG9rZW5pemVyKTtcclxuICAgICAgICBpZiAoY29udGV4dC5jdXJyZW50VHlwZSA9PT0gMTQgLyogRU9GICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtc2dOb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUGx1cmFsKHRva2VuaXplciwgb2Zmc2V0LCBzdGFydExvYywgbXNnTm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcGFyc2Uoc291cmNlKSB7XHJcbiAgICAgICAgY29uc3QgdG9rZW5pemVyID0gY3JlYXRlVG9rZW5pemVyKHNvdXJjZSwgYXNzaWduKHt9LCBvcHRpb25zKSk7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRva2VuaXplci5jb250ZXh0KCk7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHN0YXJ0Tm9kZSgwIC8qIFJlc291cmNlICovLCBjb250ZXh0Lm9mZnNldCwgY29udGV4dC5zdGFydExvYyk7XHJcbiAgICAgICAgaWYgKGxvY2F0aW9uICYmIG5vZGUubG9jKSB7XHJcbiAgICAgICAgICAgIG5vZGUubG9jLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZS5ib2R5ID0gcGFyc2VSZXNvdXJjZSh0b2tlbml6ZXIpO1xyXG4gICAgICAgIC8vIGFzc2VydCB3aGV0aGVyIGFjaGlldmVkIHRvIEVPRlxyXG4gICAgICAgIGlmIChjb250ZXh0LmN1cnJlbnRUeXBlICE9PSAxNCAvKiBFT0YgKi8pIHtcclxuICAgICAgICAgICAgZW1pdEVycm9yKHRva2VuaXplciwgQ29tcGlsZUVycm9yQ29kZXMuVU5FWFBFQ1RFRF9MRVhJQ0FMX0FOQUxZU0lTLCBjb250ZXh0Lmxhc3RTdGFydExvYywgMCwgc291cmNlW2NvbnRleHQub2Zmc2V0XSB8fCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVuZE5vZGUobm9kZSwgdG9rZW5pemVyLmN1cnJlbnRPZmZzZXQoKSwgdG9rZW5pemVyLmN1cnJlbnRQb3NpdGlvbigpKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuICAgIHJldHVybiB7IHBhcnNlIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0VG9rZW5DYXB0aW9uKHRva2VuKSB7XHJcbiAgICBpZiAodG9rZW4udHlwZSA9PT0gMTQgLyogRU9GICovKSB7XHJcbiAgICAgICAgcmV0dXJuICdFT0YnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmFtZSA9ICh0b2tlbi52YWx1ZSB8fCAnJykucmVwbGFjZSgvXFxyP1xcbi9ndSwgJ1xcXFxuJyk7XHJcbiAgICByZXR1cm4gbmFtZS5sZW5ndGggPiAxMCA/IG5hbWUuc2xpY2UoMCwgOSkgKyAn4oCmJyA6IG5hbWU7XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHJhbnNmb3JtZXIoYXN0LCBvcHRpb25zID0ge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4pIHtcclxuICAgIGNvbnN0IF9jb250ZXh0ID0ge1xyXG4gICAgICAgIGFzdCxcclxuICAgICAgICBoZWxwZXJzOiBuZXcgU2V0KClcclxuICAgIH07XHJcbiAgICBjb25zdCBjb250ZXh0ID0gKCkgPT4gX2NvbnRleHQ7XHJcbiAgICBjb25zdCBoZWxwZXIgPSAobmFtZSkgPT4ge1xyXG4gICAgICAgIF9jb250ZXh0LmhlbHBlcnMuYWRkKG5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7IGNvbnRleHQsIGhlbHBlciB9O1xyXG59XHJcbmZ1bmN0aW9uIHRyYXZlcnNlTm9kZXMobm9kZXMsIHRyYW5zZm9ybWVyKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdHJhdmVyc2VOb2RlKG5vZGVzW2ldLCB0cmFuc2Zvcm1lcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdHJhdmVyc2VOb2RlKG5vZGUsIHRyYW5zZm9ybWVyKSB7XHJcbiAgICAvLyBUT0RPOiBpZiB3ZSBuZWVkIHByZS1ob29rIG9mIHRyYW5zZm9ybSwgc2hvdWxkIGJlIGltcGxlbWVudGVkIHRvIGhlcmVcclxuICAgIHN3aXRjaCAobm9kZS50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAxIC8qIFBsdXJhbCAqLzpcclxuICAgICAgICAgICAgdHJhdmVyc2VOb2Rlcyhub2RlLmNhc2VzLCB0cmFuc2Zvcm1lcik7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVyLmhlbHBlcihcInBsdXJhbFwiIC8qIFBMVVJBTCAqLyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMiAvKiBNZXNzYWdlICovOlxyXG4gICAgICAgICAgICB0cmF2ZXJzZU5vZGVzKG5vZGUuaXRlbXMsIHRyYW5zZm9ybWVyKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA2IC8qIExpbmtlZCAqLzpcclxuICAgICAgICAgICAgY29uc3QgbGlua2VkID0gbm9kZTtcclxuICAgICAgICAgICAgdHJhdmVyc2VOb2RlKGxpbmtlZC5rZXksIHRyYW5zZm9ybWVyKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtZXIuaGVscGVyKFwibGlua2VkXCIgLyogTElOS0VEICovKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtZXIuaGVscGVyKFwidHlwZVwiIC8qIFRZUEUgKi8pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDUgLyogTGlzdCAqLzpcclxuICAgICAgICAgICAgdHJhbnNmb3JtZXIuaGVscGVyKFwiaW50ZXJwb2xhdGVcIiAvKiBJTlRFUlBPTEFURSAqLyk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVyLmhlbHBlcihcImxpc3RcIiAvKiBMSVNUICovKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA0IC8qIE5hbWVkICovOlxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lci5oZWxwZXIoXCJpbnRlcnBvbGF0ZVwiIC8qIElOVEVSUE9MQVRFICovKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtZXIuaGVscGVyKFwibmFtZWRcIiAvKiBOQU1FRCAqLyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogaWYgd2UgbmVlZCBwb3N0LWhvb2sgb2YgdHJhbnNmb3JtLCBzaG91bGQgYmUgaW1wbGVtZW50ZWQgdG8gaGVyZVxyXG59XHJcbi8vIHRyYW5zZm9ybSBBU1RcclxuZnVuY3Rpb24gdHJhbnNmb3JtKGFzdCwgb3B0aW9ucyA9IHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuKSB7XHJcbiAgICBjb25zdCB0cmFuc2Zvcm1lciA9IGNyZWF0ZVRyYW5zZm9ybWVyKGFzdCk7XHJcbiAgICB0cmFuc2Zvcm1lci5oZWxwZXIoXCJub3JtYWxpemVcIiAvKiBOT1JNQUxJWkUgKi8pO1xyXG4gICAgLy8gdHJhdmVyc2VcclxuICAgIGFzdC5ib2R5ICYmIHRyYXZlcnNlTm9kZShhc3QuYm9keSwgdHJhbnNmb3JtZXIpO1xyXG4gICAgLy8gc2V0IG1ldGEgaW5mb3JtYXRpb25cclxuICAgIGNvbnN0IGNvbnRleHQgPSB0cmFuc2Zvcm1lci5jb250ZXh0KCk7XHJcbiAgICBhc3QuaGVscGVycyA9IEFycmF5LmZyb20oY29udGV4dC5oZWxwZXJzKTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb2RlR2VuZXJhdG9yKGFzdCwgb3B0aW9ucykge1xyXG4gICAgY29uc3QgeyBzb3VyY2VNYXAsIGZpbGVuYW1lLCBicmVha0xpbmVDb2RlLCBuZWVkSW5kZW50OiBfbmVlZEluZGVudCB9ID0gb3B0aW9ucztcclxuICAgIGNvbnN0IF9jb250ZXh0ID0ge1xyXG4gICAgICAgIHNvdXJjZTogYXN0LmxvYy5zb3VyY2UsXHJcbiAgICAgICAgZmlsZW5hbWUsXHJcbiAgICAgICAgY29kZTogJycsXHJcbiAgICAgICAgY29sdW1uOiAxLFxyXG4gICAgICAgIGxpbmU6IDEsXHJcbiAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgIG1hcDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGJyZWFrTGluZUNvZGUsXHJcbiAgICAgICAgbmVlZEluZGVudDogX25lZWRJbmRlbnQsXHJcbiAgICAgICAgaW5kZW50TGV2ZWw6IDBcclxuICAgIH07XHJcbiAgICBjb25zdCBjb250ZXh0ID0gKCkgPT4gX2NvbnRleHQ7XHJcbiAgICBmdW5jdGlvbiBwdXNoKGNvZGUsIG5vZGUpIHtcclxuICAgICAgICBfY29udGV4dC5jb2RlICs9IGNvZGU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBfbmV3bGluZShuLCB3aXRoQnJlYWtMaW5lID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IF9icmVha0xpbmVDb2RlID0gd2l0aEJyZWFrTGluZSA/IGJyZWFrTGluZUNvZGUgOiAnJztcclxuICAgICAgICBwdXNoKF9uZWVkSW5kZW50ID8gX2JyZWFrTGluZUNvZGUgKyBgICBgLnJlcGVhdChuKSA6IF9icmVha0xpbmVDb2RlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGluZGVudCh3aXRoTmV3TGluZSA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBsZXZlbCA9ICsrX2NvbnRleHQuaW5kZW50TGV2ZWw7XHJcbiAgICAgICAgd2l0aE5ld0xpbmUgJiYgX25ld2xpbmUobGV2ZWwpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZGVpbmRlbnQod2l0aE5ld0xpbmUgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgbGV2ZWwgPSAtLV9jb250ZXh0LmluZGVudExldmVsO1xyXG4gICAgICAgIHdpdGhOZXdMaW5lICYmIF9uZXdsaW5lKGxldmVsKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG5ld2xpbmUoKSB7XHJcbiAgICAgICAgX25ld2xpbmUoX2NvbnRleHQuaW5kZW50TGV2ZWwpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGVscGVyID0gKGtleSkgPT4gYF8ke2tleX1gO1xyXG4gICAgY29uc3QgbmVlZEluZGVudCA9ICgpID0+IF9jb250ZXh0Lm5lZWRJbmRlbnQ7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNvbnRleHQsXHJcbiAgICAgICAgcHVzaCxcclxuICAgICAgICBpbmRlbnQsXHJcbiAgICAgICAgZGVpbmRlbnQsXHJcbiAgICAgICAgbmV3bGluZSxcclxuICAgICAgICBoZWxwZXIsXHJcbiAgICAgICAgbmVlZEluZGVudFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBnZW5lcmF0ZUxpbmtlZE5vZGUoZ2VuZXJhdG9yLCBub2RlKSB7XHJcbiAgICBjb25zdCB7IGhlbHBlciB9ID0gZ2VuZXJhdG9yO1xyXG4gICAgZ2VuZXJhdG9yLnB1c2goYCR7aGVscGVyKFwibGlua2VkXCIgLyogTElOS0VEICovKX0oYCk7XHJcbiAgICBnZW5lcmF0ZU5vZGUoZ2VuZXJhdG9yLCBub2RlLmtleSk7XHJcbiAgICBpZiAobm9kZS5tb2RpZmllcikge1xyXG4gICAgICAgIGdlbmVyYXRvci5wdXNoKGAsIGApO1xyXG4gICAgICAgIGdlbmVyYXRlTm9kZShnZW5lcmF0b3IsIG5vZGUubW9kaWZpZXIpO1xyXG4gICAgICAgIGdlbmVyYXRvci5wdXNoKGAsIF90eXBlYCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBnZW5lcmF0b3IucHVzaChgLCB1bmRlZmluZWQsIF90eXBlYCk7XHJcbiAgICB9XHJcbiAgICBnZW5lcmF0b3IucHVzaChgKWApO1xyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlTWVzc2FnZU5vZGUoZ2VuZXJhdG9yLCBub2RlKSB7XHJcbiAgICBjb25zdCB7IGhlbHBlciwgbmVlZEluZGVudCB9ID0gZ2VuZXJhdG9yO1xyXG4gICAgZ2VuZXJhdG9yLnB1c2goYCR7aGVscGVyKFwibm9ybWFsaXplXCIgLyogTk9STUFMSVpFICovKX0oW2ApO1xyXG4gICAgZ2VuZXJhdG9yLmluZGVudChuZWVkSW5kZW50KCkpO1xyXG4gICAgY29uc3QgbGVuZ3RoID0gbm9kZS5pdGVtcy5sZW5ndGg7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZ2VuZXJhdGVOb2RlKGdlbmVyYXRvciwgbm9kZS5pdGVtc1tpXSk7XHJcbiAgICAgICAgaWYgKGkgPT09IGxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdlbmVyYXRvci5wdXNoKCcsICcpO1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdG9yLmRlaW5kZW50KG5lZWRJbmRlbnQoKSk7XHJcbiAgICBnZW5lcmF0b3IucHVzaCgnXSknKTtcclxufVxyXG5mdW5jdGlvbiBnZW5lcmF0ZVBsdXJhbE5vZGUoZ2VuZXJhdG9yLCBub2RlKSB7XHJcbiAgICBjb25zdCB7IGhlbHBlciwgbmVlZEluZGVudCB9ID0gZ2VuZXJhdG9yO1xyXG4gICAgaWYgKG5vZGUuY2FzZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIGdlbmVyYXRvci5wdXNoKGAke2hlbHBlcihcInBsdXJhbFwiIC8qIFBMVVJBTCAqLyl9KFtgKTtcclxuICAgICAgICBnZW5lcmF0b3IuaW5kZW50KG5lZWRJbmRlbnQoKSk7XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gbm9kZS5jYXNlcy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBnZW5lcmF0ZU5vZGUoZ2VuZXJhdG9yLCBub2RlLmNhc2VzW2ldKTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IGxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdlbmVyYXRvci5wdXNoKCcsICcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZW5lcmF0b3IuZGVpbmRlbnQobmVlZEluZGVudCgpKTtcclxuICAgICAgICBnZW5lcmF0b3IucHVzaChgXSlgKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZW5lcmF0ZVJlc291cmNlKGdlbmVyYXRvciwgbm9kZSkge1xyXG4gICAgaWYgKG5vZGUuYm9keSkge1xyXG4gICAgICAgIGdlbmVyYXRlTm9kZShnZW5lcmF0b3IsIG5vZGUuYm9keSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBnZW5lcmF0b3IucHVzaCgnbnVsbCcpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlTm9kZShnZW5lcmF0b3IsIG5vZGUpIHtcclxuICAgIGNvbnN0IHsgaGVscGVyIH0gPSBnZW5lcmF0b3I7XHJcbiAgICBzd2l0Y2ggKG5vZGUudHlwZSkge1xyXG4gICAgICAgIGNhc2UgMCAvKiBSZXNvdXJjZSAqLzpcclxuICAgICAgICAgICAgZ2VuZXJhdGVSZXNvdXJjZShnZW5lcmF0b3IsIG5vZGUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDEgLyogUGx1cmFsICovOlxyXG4gICAgICAgICAgICBnZW5lcmF0ZVBsdXJhbE5vZGUoZ2VuZXJhdG9yLCBub2RlKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyIC8qIE1lc3NhZ2UgKi86XHJcbiAgICAgICAgICAgIGdlbmVyYXRlTWVzc2FnZU5vZGUoZ2VuZXJhdG9yLCBub2RlKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA2IC8qIExpbmtlZCAqLzpcclxuICAgICAgICAgICAgZ2VuZXJhdGVMaW5rZWROb2RlKGdlbmVyYXRvciwgbm9kZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgOCAvKiBMaW5rZWRNb2RpZmllciAqLzpcclxuICAgICAgICAgICAgZ2VuZXJhdG9yLnB1c2goSlNPTi5zdHJpbmdpZnkobm9kZS52YWx1ZSksIG5vZGUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDcgLyogTGlua2VkS2V5ICovOlxyXG4gICAgICAgICAgICBnZW5lcmF0b3IucHVzaChKU09OLnN0cmluZ2lmeShub2RlLnZhbHVlKSwgbm9kZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNSAvKiBMaXN0ICovOlxyXG4gICAgICAgICAgICBnZW5lcmF0b3IucHVzaChgJHtoZWxwZXIoXCJpbnRlcnBvbGF0ZVwiIC8qIElOVEVSUE9MQVRFICovKX0oJHtoZWxwZXIoXCJsaXN0XCIgLyogTElTVCAqLyl9KCR7bm9kZS5pbmRleH0pKWAsIG5vZGUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDQgLyogTmFtZWQgKi86XHJcbiAgICAgICAgICAgIGdlbmVyYXRvci5wdXNoKGAke2hlbHBlcihcImludGVycG9sYXRlXCIgLyogSU5URVJQT0xBVEUgKi8pfSgke2hlbHBlcihcIm5hbWVkXCIgLyogTkFNRUQgKi8pfSgke0pTT04uc3RyaW5naWZ5KG5vZGUua2V5KX0pKWAsIG5vZGUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDkgLyogTGl0ZXJhbCAqLzpcclxuICAgICAgICAgICAgZ2VuZXJhdG9yLnB1c2goSlNPTi5zdHJpbmdpZnkobm9kZS52YWx1ZSksIG5vZGUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDMgLyogVGV4dCAqLzpcclxuICAgICAgICAgICAgZ2VuZXJhdG9yLnB1c2goSlNPTi5zdHJpbmdpZnkobm9kZS52YWx1ZSksIG5vZGUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVuaGFuZGxlZCBjb2RlZ2VuIG5vZGUgdHlwZTogJHtub2RlLnR5cGV9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vLyBnZW5lcmF0ZSBjb2RlIGZyb20gQVNUXHJcbmNvbnN0IGdlbmVyYXRlID0gKGFzdCwgb3B0aW9ucyA9IHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuKSA9PiB7XHJcbiAgICBjb25zdCBtb2RlID0gaXNTdHJpbmcob3B0aW9ucy5tb2RlKSA/IG9wdGlvbnMubW9kZSA6ICdub3JtYWwnO1xyXG4gICAgY29uc3QgZmlsZW5hbWUgPSBpc1N0cmluZyhvcHRpb25zLmZpbGVuYW1lKVxyXG4gICAgICAgID8gb3B0aW9ucy5maWxlbmFtZVxyXG4gICAgICAgIDogJ21lc3NhZ2UuaW50bCc7XHJcbiAgICBjb25zdCBzb3VyY2VNYXAgPSAhIW9wdGlvbnMuc291cmNlTWFwO1xyXG4gICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICBjb25zdCBicmVha0xpbmVDb2RlID0gb3B0aW9ucy5icmVha0xpbmVDb2RlICE9IG51bGxcclxuICAgICAgICA/IG9wdGlvbnMuYnJlYWtMaW5lQ29kZVxyXG4gICAgICAgIDogbW9kZSA9PT0gJ2Fycm93J1xyXG4gICAgICAgICAgICA/ICc7J1xyXG4gICAgICAgICAgICA6ICdcXG4nO1xyXG4gICAgY29uc3QgbmVlZEluZGVudCA9IG9wdGlvbnMubmVlZEluZGVudCA/IG9wdGlvbnMubmVlZEluZGVudCA6IG1vZGUgIT09ICdhcnJvdyc7XHJcbiAgICBjb25zdCBoZWxwZXJzID0gYXN0LmhlbHBlcnMgfHwgW107XHJcbiAgICBjb25zdCBnZW5lcmF0b3IgPSBjcmVhdGVDb2RlR2VuZXJhdG9yKGFzdCwge1xyXG4gICAgICAgIG1vZGUsXHJcbiAgICAgICAgZmlsZW5hbWUsXHJcbiAgICAgICAgc291cmNlTWFwLFxyXG4gICAgICAgIGJyZWFrTGluZUNvZGUsXHJcbiAgICAgICAgbmVlZEluZGVudFxyXG4gICAgfSk7XHJcbiAgICBnZW5lcmF0b3IucHVzaChtb2RlID09PSAnbm9ybWFsJyA/IGBmdW5jdGlvbiBfX21zZ19fIChjdHgpIHtgIDogYChjdHgpID0+IHtgKTtcclxuICAgIGdlbmVyYXRvci5pbmRlbnQobmVlZEluZGVudCk7XHJcbiAgICBpZiAoaGVscGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZ2VuZXJhdG9yLnB1c2goYGNvbnN0IHsgJHtoZWxwZXJzLm1hcChzID0+IGAke3N9OiBfJHtzfWApLmpvaW4oJywgJyl9IH0gPSBjdHhgKTtcclxuICAgICAgICBnZW5lcmF0b3IubmV3bGluZSgpO1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdG9yLnB1c2goYHJldHVybiBgKTtcclxuICAgIGdlbmVyYXRlTm9kZShnZW5lcmF0b3IsIGFzdCk7XHJcbiAgICBnZW5lcmF0b3IuZGVpbmRlbnQobmVlZEluZGVudCk7XHJcbiAgICBnZW5lcmF0b3IucHVzaChgfWApO1xyXG4gICAgY29uc3QgeyBjb2RlLCBtYXAgfSA9IGdlbmVyYXRvci5jb250ZXh0KCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFzdCxcclxuICAgICAgICBjb2RlLFxyXG4gICAgICAgIG1hcDogbWFwID8gbWFwLnRvSlNPTigpIDogdW5kZWZpbmVkIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgfTtcclxufTtcblxuZnVuY3Rpb24gYmFzZUNvbXBpbGUoc291cmNlLCBvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IGFzc2lnbmVkT3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAvLyBwYXJzZSBzb3VyY2UgY29kZXNcclxuICAgIGNvbnN0IHBhcnNlciA9IGNyZWF0ZVBhcnNlcihhc3NpZ25lZE9wdGlvbnMpO1xyXG4gICAgY29uc3QgYXN0ID0gcGFyc2VyLnBhcnNlKHNvdXJjZSk7XHJcbiAgICAvLyB0cmFuc2Zvcm0gQVNUc1xyXG4gICAgdHJhbnNmb3JtKGFzdCwgYXNzaWduZWRPcHRpb25zKTtcclxuICAgIC8vIGdlbmVyYXRlIGphdmFzY3JpcHQgY29kZXNcclxuICAgIHJldHVybiBnZW5lcmF0ZShhc3QsIGFzc2lnbmVkT3B0aW9ucyk7XHJcbn1cblxuZXhwb3J0IHsgQ29tcGlsZUVycm9yQ29kZXMsIEVSUk9SX0RPTUFJTiwgTG9jYXRpb25TdHViLCBiYXNlQ29tcGlsZSwgY3JlYXRlQ29tcGlsZUVycm9yLCBjcmVhdGVMb2NhdGlvbiwgY3JlYXRlUGFyc2VyLCBjcmVhdGVQb3NpdGlvbiwgZGVmYXVsdE9uRXJyb3IsIGVycm9yTWVzc2FnZXMgfTtcbiIsIi8qIVxuICAqIGRldnRvb2xzLWlmIHY5LjIuMlxuICAqIChjKSAyMDIyIGthenV5YSBrYXdhZ3VjaGlcbiAgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gICovXG5jb25zdCBJbnRsaWZ5RGV2VG9vbHNIb29rcyA9ICB7XHJcbiAgICBJMThuSW5pdDogJ2kxOG46aW5pdCcsXHJcbiAgICBGdW5jdGlvblRyYW5zbGF0ZTogJ2Z1bmN0aW9uOnRyYW5zbGF0ZSdcclxufTtcblxuZXhwb3J0IHsgSW50bGlmeURldlRvb2xzSG9va3MgfTtcbiIsIi8qIVxuICAqIGNvcmUtYmFzZSB2OS4yLjJcbiAgKiAoYykgMjAyMiBrYXp1eWEga2F3YWd1Y2hpXG4gICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICAqL1xuaW1wb3J0IHsgaXNPYmplY3QsIGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCBpc051bWJlciwgaXNQbGFpbk9iamVjdCwgdG9EaXNwbGF5U3RyaW5nLCBpc0FycmF5LCBmb3JtYXQsIGlzQm9vbGVhbiwgYXNzaWduLCBpc1JlZ0V4cCwgd2FybiwgZXNjYXBlSHRtbCwgaW5Ccm93c2VyLCBtYXJrLCBtZWFzdXJlLCBpc0VtcHR5T2JqZWN0LCBnZW5lcmF0ZUNvZGVGcmFtZSwgZ2VuZXJhdGVGb3JtYXRDYWNoZUtleSwgaXNEYXRlLCBnZXRHbG9iYWxUaGlzIH0gZnJvbSAnQGludGxpZnkvc2hhcmVkJztcbmltcG9ydCB7IGRlZmF1bHRPbkVycm9yLCBiYXNlQ29tcGlsZSwgQ29tcGlsZUVycm9yQ29kZXMsIGNyZWF0ZUNvbXBpbGVFcnJvciB9IGZyb20gJ0BpbnRsaWZ5L21lc3NhZ2UtY29tcGlsZXInO1xuZXhwb3J0IHsgQ29tcGlsZUVycm9yQ29kZXMsIGNyZWF0ZUNvbXBpbGVFcnJvciB9IGZyb20gJ0BpbnRsaWZ5L21lc3NhZ2UtY29tcGlsZXInO1xuaW1wb3J0IHsgSW50bGlmeURldlRvb2xzSG9va3MgfSBmcm9tICdAaW50bGlmeS9kZXZ0b29scy1pZic7XG5cbmNvbnN0IHBhdGhTdGF0ZU1hY2hpbmUgPSAgW107XHJcbnBhdGhTdGF0ZU1hY2hpbmVbMCAvKiBCRUZPUkVfUEFUSCAqL10gPSB7XHJcbiAgICBbXCJ3XCIgLyogV09SS1NQQUNFICovXTogWzAgLyogQkVGT1JFX1BBVEggKi9dLFxyXG4gICAgW1wiaVwiIC8qIElERU5UICovXTogWzMgLyogSU5fSURFTlQgKi8sIDAgLyogQVBQRU5EICovXSxcclxuICAgIFtcIltcIiAvKiBMRUZUX0JSQUNLRVQgKi9dOiBbNCAvKiBJTl9TVUJfUEFUSCAqL10sXHJcbiAgICBbXCJvXCIgLyogRU5EX09GX0ZBSUwgKi9dOiBbNyAvKiBBRlRFUl9QQVRIICovXVxyXG59O1xyXG5wYXRoU3RhdGVNYWNoaW5lWzEgLyogSU5fUEFUSCAqL10gPSB7XHJcbiAgICBbXCJ3XCIgLyogV09SS1NQQUNFICovXTogWzEgLyogSU5fUEFUSCAqL10sXHJcbiAgICBbXCIuXCIgLyogRE9UICovXTogWzIgLyogQkVGT1JFX0lERU5UICovXSxcclxuICAgIFtcIltcIiAvKiBMRUZUX0JSQUNLRVQgKi9dOiBbNCAvKiBJTl9TVUJfUEFUSCAqL10sXHJcbiAgICBbXCJvXCIgLyogRU5EX09GX0ZBSUwgKi9dOiBbNyAvKiBBRlRFUl9QQVRIICovXVxyXG59O1xyXG5wYXRoU3RhdGVNYWNoaW5lWzIgLyogQkVGT1JFX0lERU5UICovXSA9IHtcclxuICAgIFtcIndcIiAvKiBXT1JLU1BBQ0UgKi9dOiBbMiAvKiBCRUZPUkVfSURFTlQgKi9dLFxyXG4gICAgW1wiaVwiIC8qIElERU5UICovXTogWzMgLyogSU5fSURFTlQgKi8sIDAgLyogQVBQRU5EICovXSxcclxuICAgIFtcIjBcIiAvKiBaRVJPICovXTogWzMgLyogSU5fSURFTlQgKi8sIDAgLyogQVBQRU5EICovXVxyXG59O1xyXG5wYXRoU3RhdGVNYWNoaW5lWzMgLyogSU5fSURFTlQgKi9dID0ge1xyXG4gICAgW1wiaVwiIC8qIElERU5UICovXTogWzMgLyogSU5fSURFTlQgKi8sIDAgLyogQVBQRU5EICovXSxcclxuICAgIFtcIjBcIiAvKiBaRVJPICovXTogWzMgLyogSU5fSURFTlQgKi8sIDAgLyogQVBQRU5EICovXSxcclxuICAgIFtcIndcIiAvKiBXT1JLU1BBQ0UgKi9dOiBbMSAvKiBJTl9QQVRIICovLCAxIC8qIFBVU0ggKi9dLFxyXG4gICAgW1wiLlwiIC8qIERPVCAqL106IFsyIC8qIEJFRk9SRV9JREVOVCAqLywgMSAvKiBQVVNIICovXSxcclxuICAgIFtcIltcIiAvKiBMRUZUX0JSQUNLRVQgKi9dOiBbNCAvKiBJTl9TVUJfUEFUSCAqLywgMSAvKiBQVVNIICovXSxcclxuICAgIFtcIm9cIiAvKiBFTkRfT0ZfRkFJTCAqL106IFs3IC8qIEFGVEVSX1BBVEggKi8sIDEgLyogUFVTSCAqL11cclxufTtcclxucGF0aFN0YXRlTWFjaGluZVs0IC8qIElOX1NVQl9QQVRIICovXSA9IHtcclxuICAgIFtcIidcIiAvKiBTSU5HTEVfUVVPVEUgKi9dOiBbNSAvKiBJTl9TSU5HTEVfUVVPVEUgKi8sIDAgLyogQVBQRU5EICovXSxcclxuICAgIFtcIlxcXCJcIiAvKiBET1VCTEVfUVVPVEUgKi9dOiBbNiAvKiBJTl9ET1VCTEVfUVVPVEUgKi8sIDAgLyogQVBQRU5EICovXSxcclxuICAgIFtcIltcIiAvKiBMRUZUX0JSQUNLRVQgKi9dOiBbXHJcbiAgICAgICAgNCAvKiBJTl9TVUJfUEFUSCAqLyxcclxuICAgICAgICAyIC8qIElOQ19TVUJfUEFUSF9ERVBUSCAqL1xyXG4gICAgXSxcclxuICAgIFtcIl1cIiAvKiBSSUdIVF9CUkFDS0VUICovXTogWzEgLyogSU5fUEFUSCAqLywgMyAvKiBQVVNIX1NVQl9QQVRIICovXSxcclxuICAgIFtcIm9cIiAvKiBFTkRfT0ZfRkFJTCAqL106IDggLyogRVJST1IgKi8sXHJcbiAgICBbXCJsXCIgLyogRUxTRSAqL106IFs0IC8qIElOX1NVQl9QQVRIICovLCAwIC8qIEFQUEVORCAqL11cclxufTtcclxucGF0aFN0YXRlTWFjaGluZVs1IC8qIElOX1NJTkdMRV9RVU9URSAqL10gPSB7XHJcbiAgICBbXCInXCIgLyogU0lOR0xFX1FVT1RFICovXTogWzQgLyogSU5fU1VCX1BBVEggKi8sIDAgLyogQVBQRU5EICovXSxcclxuICAgIFtcIm9cIiAvKiBFTkRfT0ZfRkFJTCAqL106IDggLyogRVJST1IgKi8sXHJcbiAgICBbXCJsXCIgLyogRUxTRSAqL106IFs1IC8qIElOX1NJTkdMRV9RVU9URSAqLywgMCAvKiBBUFBFTkQgKi9dXHJcbn07XHJcbnBhdGhTdGF0ZU1hY2hpbmVbNiAvKiBJTl9ET1VCTEVfUVVPVEUgKi9dID0ge1xyXG4gICAgW1wiXFxcIlwiIC8qIERPVUJMRV9RVU9URSAqL106IFs0IC8qIElOX1NVQl9QQVRIICovLCAwIC8qIEFQUEVORCAqL10sXHJcbiAgICBbXCJvXCIgLyogRU5EX09GX0ZBSUwgKi9dOiA4IC8qIEVSUk9SICovLFxyXG4gICAgW1wibFwiIC8qIEVMU0UgKi9dOiBbNiAvKiBJTl9ET1VCTEVfUVVPVEUgKi8sIDAgLyogQVBQRU5EICovXVxyXG59O1xyXG4vKipcclxuICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXHJcbiAqL1xyXG5jb25zdCBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyg/OnRydWV8ZmFsc2V8LT9bXFxkLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XHJcbmZ1bmN0aW9uIGlzTGl0ZXJhbChleHApIHtcclxuICAgIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XHJcbn1cclxuLyoqXHJcbiAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpcFF1b3RlcyhzdHIpIHtcclxuICAgIGNvbnN0IGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcclxuICAgIGNvbnN0IGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSk7XHJcbiAgICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XHJcbn1cclxuLyoqXHJcbiAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoY2gpIHtcclxuICAgIGlmIChjaCA9PT0gdW5kZWZpbmVkIHx8IGNoID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIFwib1wiIC8qIEVORF9PRl9GQUlMICovO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XHJcbiAgICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgICAgICBjYXNlIDB4NWI6IC8vIFtcclxuICAgICAgICBjYXNlIDB4NWQ6IC8vIF1cclxuICAgICAgICBjYXNlIDB4MmU6IC8vIC5cclxuICAgICAgICBjYXNlIDB4MjI6IC8vIFwiXHJcbiAgICAgICAgY2FzZSAweDI3OiAvLyAnXHJcbiAgICAgICAgICAgIHJldHVybiBjaDtcclxuICAgICAgICBjYXNlIDB4NWY6IC8vIF9cclxuICAgICAgICBjYXNlIDB4MjQ6IC8vICRcclxuICAgICAgICBjYXNlIDB4MmQ6IC8vIC1cclxuICAgICAgICAgICAgcmV0dXJuIFwiaVwiIC8qIElERU5UICovO1xyXG4gICAgICAgIGNhc2UgMHgwOTogLy8gVGFiIChIVClcclxuICAgICAgICBjYXNlIDB4MGE6IC8vIE5ld2xpbmUgKExGKVxyXG4gICAgICAgIGNhc2UgMHgwZDogLy8gUmV0dXJuIChDUilcclxuICAgICAgICBjYXNlIDB4YTA6IC8vIE5vLWJyZWFrIHNwYWNlIChOQlNQKVxyXG4gICAgICAgIGNhc2UgMHhmZWZmOiAvLyBCeXRlIE9yZGVyIE1hcmsgKEJPTSlcclxuICAgICAgICBjYXNlIDB4MjAyODogLy8gTGluZSBTZXBhcmF0b3IgKExTKVxyXG4gICAgICAgIGNhc2UgMHgyMDI5OiAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yIChQUylcclxuICAgICAgICAgICAgcmV0dXJuIFwid1wiIC8qIFdPUktTUEFDRSAqLztcclxuICAgIH1cclxuICAgIHJldHVybiBcImlcIiAvKiBJREVOVCAqLztcclxufVxyXG4vKipcclxuICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXHJcbiAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGVcclxuICogZHluYW1pYyBpbmRpY2F0b3IgKCopLlxyXG4gKi9cclxuZnVuY3Rpb24gZm9ybWF0U3ViUGF0aChwYXRoKSB7XHJcbiAgICBjb25zdCB0cmltbWVkID0gcGF0aC50cmltKCk7XHJcbiAgICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxyXG4gICAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGFyc2VJbnQocGF0aCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKVxyXG4gICAgICAgID8gc3RyaXBRdW90ZXModHJpbW1lZClcclxuICAgICAgICA6IFwiKlwiIC8qIEFTVEFSSVNLICovICsgdHJpbW1lZDtcclxufVxyXG4vKipcclxuICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZShwYXRoKSB7XHJcbiAgICBjb25zdCBrZXlzID0gW107XHJcbiAgICBsZXQgaW5kZXggPSAtMTtcclxuICAgIGxldCBtb2RlID0gMCAvKiBCRUZPUkVfUEFUSCAqLztcclxuICAgIGxldCBzdWJQYXRoRGVwdGggPSAwO1xyXG4gICAgbGV0IGM7XHJcbiAgICBsZXQga2V5OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICBsZXQgbmV3Q2hhcjtcclxuICAgIGxldCB0eXBlO1xyXG4gICAgbGV0IHRyYW5zaXRpb247XHJcbiAgICBsZXQgYWN0aW9uO1xyXG4gICAgbGV0IHR5cGVNYXA7XHJcbiAgICBjb25zdCBhY3Rpb25zID0gW107XHJcbiAgICBhY3Rpb25zWzAgLyogQVBQRU5EICovXSA9ICgpID0+IHtcclxuICAgICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAga2V5ID0gbmV3Q2hhcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGtleSArPSBuZXdDaGFyO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBhY3Rpb25zWzEgLyogUFVTSCAqL10gPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICBrZXkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGFjdGlvbnNbMiAvKiBJTkNfU1VCX1BBVEhfREVQVEggKi9dID0gKCkgPT4ge1xyXG4gICAgICAgIGFjdGlvbnNbMCAvKiBBUFBFTkQgKi9dKCk7XHJcbiAgICAgICAgc3ViUGF0aERlcHRoKys7XHJcbiAgICB9O1xyXG4gICAgYWN0aW9uc1szIC8qIFBVU0hfU1VCX1BBVEggKi9dID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChzdWJQYXRoRGVwdGggPiAwKSB7XHJcbiAgICAgICAgICAgIHN1YlBhdGhEZXB0aC0tO1xyXG4gICAgICAgICAgICBtb2RlID0gNCAvKiBJTl9TVUJfUEFUSCAqLztcclxuICAgICAgICAgICAgYWN0aW9uc1swIC8qIEFQUEVORCAqL10oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbnNbMSAvKiBQVVNIICovXSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIG1heWJlVW5lc2NhcGVRdW90ZSgpIHtcclxuICAgICAgICBjb25zdCBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcclxuICAgICAgICBpZiAoKG1vZGUgPT09IDUgLyogSU5fU0lOR0xFX1FVT1RFICovICYmXHJcbiAgICAgICAgICAgIG5leHRDaGFyID09PSBcIidcIiAvKiBTSU5HTEVfUVVPVEUgKi8pIHx8XHJcbiAgICAgICAgICAgIChtb2RlID09PSA2IC8qIElOX0RPVUJMRV9RVU9URSAqLyAmJlxyXG4gICAgICAgICAgICAgICAgbmV4dENoYXIgPT09IFwiXFxcIlwiIC8qIERPVUJMRV9RVU9URSAqLykpIHtcclxuICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgbmV3Q2hhciA9ICdcXFxcJyArIG5leHRDaGFyO1xyXG4gICAgICAgICAgICBhY3Rpb25zWzAgLyogQVBQRU5EICovXSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB3aGlsZSAobW9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgYyA9IHBhdGhbaW5kZXhdO1xyXG4gICAgICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XHJcbiAgICAgICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XHJcbiAgICAgICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFtcImxcIiAvKiBFTFNFICovXSB8fCA4IC8qIEVSUk9SICovO1xyXG4gICAgICAgIC8vIGNoZWNrIHBhcnNlIGVycm9yXHJcbiAgICAgICAgaWYgKHRyYW5zaXRpb24gPT09IDggLyogRVJST1IgKi8pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcclxuICAgICAgICBpZiAodHJhbnNpdGlvblsxXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV07XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIG5ld0NoYXIgPSBjO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjaGVjayBwYXJzZSBmaW5pc2hcclxuICAgICAgICBpZiAobW9kZSA9PT0gNyAvKiBBRlRFUl9QQVRIICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vLyBwYXRoIHRva2VuIGNhY2hlXHJcbmNvbnN0IGNhY2hlID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICoga2V5LXZhbHVlIG1lc3NhZ2UgcmVzb2x2ZXJcclxuICpcclxuICogQHJlbWFya3NcclxuICogUmVzb2x2ZXMgbWVzc2FnZXMgd2l0aCB0aGUga2V5LXZhbHVlIHN0cnVjdHVyZS4gTm90ZSB0aGF0IG1lc3NhZ2VzIHdpdGggYSBoaWVyYXJjaGljYWwgc3RydWN0dXJlIHN1Y2ggYXMgb2JqZWN0cyBjYW5ub3QgYmUgcmVzb2x2ZWRcclxuICpcclxuICogQHBhcmFtIG9iaiAtIEEgdGFyZ2V0IG9iamVjdCB0byBiZSByZXNvbHZlZCB3aXRoIHBhdGhcclxuICogQHBhcmFtIHBhdGggLSBBIHtAbGluayBQYXRoIHwgcGF0aH0gdG8gcmVzb2x2ZSB0aGUgdmFsdWUgb2YgbWVzc2FnZVxyXG4gKlxyXG4gKiBAcmV0dXJucyBBIHJlc29sdmVkIHtAbGluayBQYXRoVmFsdWUgfCBwYXRoIHZhbHVlfVxyXG4gKlxyXG4gKiBAVnVlSTE4bkdlbmVyYWxcclxuICovXHJcbmZ1bmN0aW9uIHJlc29sdmVXaXRoS2V5VmFsdWUob2JqLCBwYXRoKSB7XHJcbiAgICByZXR1cm4gaXNPYmplY3Qob2JqKSA/IG9ialtwYXRoXSA6IG51bGw7XHJcbn1cclxuLyoqXHJcbiAqIG1lc3NhZ2UgcmVzb2x2ZXJcclxuICpcclxuICogQHJlbWFya3NcclxuICogUmVzb2x2ZXMgbWVzc2FnZXMuIG1lc3NhZ2VzIHdpdGggYSBoaWVyYXJjaGljYWwgc3RydWN0dXJlIHN1Y2ggYXMgb2JqZWN0cyBjYW4gYmUgcmVzb2x2ZWQuIFRoaXMgcmVzb2x2ZXIgaXMgdXNlZCBpbiBWdWVJMThuIGFzIGRlZmF1bHQuXHJcbiAqXHJcbiAqIEBwYXJhbSBvYmogLSBBIHRhcmdldCBvYmplY3QgdG8gYmUgcmVzb2x2ZWQgd2l0aCBwYXRoXHJcbiAqIEBwYXJhbSBwYXRoIC0gQSB7QGxpbmsgUGF0aCB8IHBhdGh9IHRvIHJlc29sdmUgdGhlIHZhbHVlIG9mIG1lc3NhZ2VcclxuICpcclxuICogQHJldHVybnMgQSByZXNvbHZlZCB7QGxpbmsgUGF0aFZhbHVlIHwgcGF0aCB2YWx1ZX1cclxuICpcclxuICogQFZ1ZUkxOG5HZW5lcmFsXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNvbHZlVmFsdWUob2JqLCBwYXRoKSB7XHJcbiAgICAvLyBjaGVjayBvYmplY3RcclxuICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gcGFyc2UgcGF0aFxyXG4gICAgbGV0IGhpdCA9IGNhY2hlLmdldChwYXRoKTtcclxuICAgIGlmICghaGl0KSB7XHJcbiAgICAgICAgaGl0ID0gcGFyc2UocGF0aCk7XHJcbiAgICAgICAgaWYgKGhpdCkge1xyXG4gICAgICAgICAgICBjYWNoZS5zZXQocGF0aCwgaGl0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBjaGVjayBoaXRcclxuICAgIGlmICghaGl0KSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvLyByZXNvbHZlIHBhdGggdmFsdWVcclxuICAgIGNvbnN0IGxlbiA9IGhpdC5sZW5ndGg7XHJcbiAgICBsZXQgbGFzdCA9IG9iajtcclxuICAgIGxldCBpID0gMDtcclxuICAgIHdoaWxlIChpIDwgbGVuKSB7XHJcbiAgICAgICAgY29uc3QgdmFsID0gbGFzdFtoaXRbaV1dO1xyXG4gICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGFzdCA9IHZhbDtcclxuICAgICAgICBpKys7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGFzdDtcclxufVxuXG5jb25zdCBERUZBVUxUX01PRElGSUVSID0gKHN0cikgPT4gc3RyO1xyXG5jb25zdCBERUZBVUxUX01FU1NBR0UgPSAoY3R4KSA9PiAnJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG5jb25zdCBERUZBVUxUX01FU1NBR0VfREFUQV9UWVBFID0gJ3RleHQnO1xyXG5jb25zdCBERUZBVUxUX05PUk1BTElaRSA9ICh2YWx1ZXMpID0+IHZhbHVlcy5sZW5ndGggPT09IDAgPyAnJyA6IHZhbHVlcy5qb2luKCcnKTtcclxuY29uc3QgREVGQVVMVF9JTlRFUlBPTEFURSA9IHRvRGlzcGxheVN0cmluZztcclxuZnVuY3Rpb24gcGx1cmFsRGVmYXVsdChjaG9pY2UsIGNob2ljZXNMZW5ndGgpIHtcclxuICAgIGNob2ljZSA9IE1hdGguYWJzKGNob2ljZSk7XHJcbiAgICBpZiAoY2hvaWNlc0xlbmd0aCA9PT0gMikge1xyXG4gICAgICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiBjaG9pY2VcclxuICAgICAgICAgICAgPyBjaG9pY2UgPiAxXHJcbiAgICAgICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgICAgIDogMFxyXG4gICAgICAgICAgICA6IDE7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hvaWNlID8gTWF0aC5taW4oY2hvaWNlLCAyKSA6IDA7XHJcbn1cclxuZnVuY3Rpb24gZ2V0UGx1cmFsSW5kZXgob3B0aW9ucykge1xyXG4gICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICBjb25zdCBpbmRleCA9IGlzTnVtYmVyKG9wdGlvbnMucGx1cmFsSW5kZXgpXHJcbiAgICAgICAgPyBvcHRpb25zLnBsdXJhbEluZGV4XHJcbiAgICAgICAgOiAtMTtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgcmV0dXJuIG9wdGlvbnMubmFtZWQgJiYgKGlzTnVtYmVyKG9wdGlvbnMubmFtZWQuY291bnQpIHx8IGlzTnVtYmVyKG9wdGlvbnMubmFtZWQubikpXHJcbiAgICAgICAgPyBpc051bWJlcihvcHRpb25zLm5hbWVkLmNvdW50KVxyXG4gICAgICAgICAgICA/IG9wdGlvbnMubmFtZWQuY291bnRcclxuICAgICAgICAgICAgOiBpc051bWJlcihvcHRpb25zLm5hbWVkLm4pXHJcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMubmFtZWQublxyXG4gICAgICAgICAgICAgICAgOiBpbmRleFxyXG4gICAgICAgIDogaW5kZXg7XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZWQocGx1cmFsSW5kZXgsIHByb3BzKSB7XHJcbiAgICBpZiAoIXByb3BzLmNvdW50KSB7XHJcbiAgICAgICAgcHJvcHMuY291bnQgPSBwbHVyYWxJbmRleDtcclxuICAgIH1cclxuICAgIGlmICghcHJvcHMubikge1xyXG4gICAgICAgIHByb3BzLm4gPSBwbHVyYWxJbmRleDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVNZXNzYWdlQ29udGV4dChvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlO1xyXG4gICAgY29uc3QgcGx1cmFsSW5kZXggPSBnZXRQbHVyYWxJbmRleChvcHRpb25zKTtcclxuICAgIGNvbnN0IHBsdXJhbFJ1bGUgPSBpc09iamVjdChvcHRpb25zLnBsdXJhbFJ1bGVzKSAmJlxyXG4gICAgICAgIGlzU3RyaW5nKGxvY2FsZSkgJiZcclxuICAgICAgICBpc0Z1bmN0aW9uKG9wdGlvbnMucGx1cmFsUnVsZXNbbG9jYWxlXSlcclxuICAgICAgICA/IG9wdGlvbnMucGx1cmFsUnVsZXNbbG9jYWxlXVxyXG4gICAgICAgIDogcGx1cmFsRGVmYXVsdDtcclxuICAgIGNvbnN0IG9yZ1BsdXJhbFJ1bGUgPSBpc09iamVjdChvcHRpb25zLnBsdXJhbFJ1bGVzKSAmJlxyXG4gICAgICAgIGlzU3RyaW5nKGxvY2FsZSkgJiZcclxuICAgICAgICBpc0Z1bmN0aW9uKG9wdGlvbnMucGx1cmFsUnVsZXNbbG9jYWxlXSlcclxuICAgICAgICA/IHBsdXJhbERlZmF1bHRcclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHBsdXJhbCA9IChtZXNzYWdlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlc1twbHVyYWxSdWxlKHBsdXJhbEluZGV4LCBtZXNzYWdlcy5sZW5ndGgsIG9yZ1BsdXJhbFJ1bGUpXTtcclxuICAgIH07XHJcbiAgICBjb25zdCBfbGlzdCA9IG9wdGlvbnMubGlzdCB8fCBbXTtcclxuICAgIGNvbnN0IGxpc3QgPSAoaW5kZXgpID0+IF9saXN0W2luZGV4XTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBjb25zdCBfbmFtZWQgPSBvcHRpb25zLm5hbWVkIHx8IHt9O1xyXG4gICAgaXNOdW1iZXIob3B0aW9ucy5wbHVyYWxJbmRleCkgJiYgbm9ybWFsaXplTmFtZWQocGx1cmFsSW5kZXgsIF9uYW1lZCk7XHJcbiAgICBjb25zdCBuYW1lZCA9IChrZXkpID0+IF9uYW1lZFtrZXldO1xyXG4gICAgZnVuY3Rpb24gbWVzc2FnZShrZXkpIHtcclxuICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgICAgICBjb25zdCBtc2cgPSBpc0Z1bmN0aW9uKG9wdGlvbnMubWVzc2FnZXMpXHJcbiAgICAgICAgICAgID8gb3B0aW9ucy5tZXNzYWdlcyhrZXkpXHJcbiAgICAgICAgICAgIDogaXNPYmplY3Qob3B0aW9ucy5tZXNzYWdlcylcclxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5tZXNzYWdlc1trZXldXHJcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiAhbXNnXHJcbiAgICAgICAgICAgID8gb3B0aW9ucy5wYXJlbnRcclxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5wYXJlbnQubWVzc2FnZShrZXkpIC8vIHJlc29sdmUgZnJvbSBwYXJlbnQgbWVzc2FnZXNcclxuICAgICAgICAgICAgICAgIDogREVGQVVMVF9NRVNTQUdFXHJcbiAgICAgICAgICAgIDogbXNnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgX21vZGlmaWVyID0gKG5hbWUpID0+IG9wdGlvbnMubW9kaWZpZXJzXHJcbiAgICAgICAgPyBvcHRpb25zLm1vZGlmaWVyc1tuYW1lXVxyXG4gICAgICAgIDogREVGQVVMVF9NT0RJRklFUjtcclxuICAgIGNvbnN0IG5vcm1hbGl6ZSA9IGlzUGxhaW5PYmplY3Qob3B0aW9ucy5wcm9jZXNzb3IpICYmIGlzRnVuY3Rpb24ob3B0aW9ucy5wcm9jZXNzb3Iubm9ybWFsaXplKVxyXG4gICAgICAgID8gb3B0aW9ucy5wcm9jZXNzb3Iubm9ybWFsaXplXHJcbiAgICAgICAgOiBERUZBVUxUX05PUk1BTElaRTtcclxuICAgIGNvbnN0IGludGVycG9sYXRlID0gaXNQbGFpbk9iamVjdChvcHRpb25zLnByb2Nlc3NvcikgJiZcclxuICAgICAgICBpc0Z1bmN0aW9uKG9wdGlvbnMucHJvY2Vzc29yLmludGVycG9sYXRlKVxyXG4gICAgICAgID8gb3B0aW9ucy5wcm9jZXNzb3IuaW50ZXJwb2xhdGVcclxuICAgICAgICA6IERFRkFVTFRfSU5URVJQT0xBVEU7XHJcbiAgICBjb25zdCB0eXBlID0gaXNQbGFpbk9iamVjdChvcHRpb25zLnByb2Nlc3NvcikgJiYgaXNTdHJpbmcob3B0aW9ucy5wcm9jZXNzb3IudHlwZSlcclxuICAgICAgICA/IG9wdGlvbnMucHJvY2Vzc29yLnR5cGVcclxuICAgICAgICA6IERFRkFVTFRfTUVTU0FHRV9EQVRBX1RZUEU7XHJcbiAgICBjb25zdCBsaW5rZWQgPSAoa2V5LCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW2FyZzEsIGFyZzJdID0gYXJncztcclxuICAgICAgICBsZXQgdHlwZSA9ICd0ZXh0JztcclxuICAgICAgICBsZXQgbW9kaWZpZXIgPSAnJztcclxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KGFyZzEpKSB7XHJcbiAgICAgICAgICAgICAgICBtb2RpZmllciA9IGFyZzEubW9kaWZpZXIgfHwgbW9kaWZpZXI7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gYXJnMS50eXBlIHx8IHR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNTdHJpbmcoYXJnMSkpIHtcclxuICAgICAgICAgICAgICAgIG1vZGlmaWVyID0gYXJnMSB8fCBtb2RpZmllcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcoYXJnMSkpIHtcclxuICAgICAgICAgICAgICAgIG1vZGlmaWVyID0gYXJnMSB8fCBtb2RpZmllcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcoYXJnMikpIHtcclxuICAgICAgICAgICAgICAgIHR5cGUgPSBhcmcyIHx8IHR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1zZyA9IG1lc3NhZ2Uoa2V5KShjdHgpO1xyXG4gICAgICAgIC8vIFRoZSBtZXNzYWdlIGluIHZub2RlIHJlc29sdmVkIHdpdGggbGlua2VkIGFyZSByZXR1cm5lZCBhcyBhbiBhcnJheSBieSBwcm9jZXNzb3Iubm9tYWxpemVcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ3Zub2RlJyAmJiBpc0FycmF5KG1zZykgJiYgbW9kaWZpZXIpIHtcclxuICAgICAgICAgICAgbXNnID0gbXNnWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbW9kaWZpZXIgPyBfbW9kaWZpZXIobW9kaWZpZXIpKG1zZywgdHlwZSkgOiBtc2c7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgY3R4ID0ge1xyXG4gICAgICAgIFtcImxpc3RcIiAvKiBMSVNUICovXTogbGlzdCxcclxuICAgICAgICBbXCJuYW1lZFwiIC8qIE5BTUVEICovXTogbmFtZWQsXHJcbiAgICAgICAgW1wicGx1cmFsXCIgLyogUExVUkFMICovXTogcGx1cmFsLFxyXG4gICAgICAgIFtcImxpbmtlZFwiIC8qIExJTktFRCAqL106IGxpbmtlZCxcclxuICAgICAgICBbXCJtZXNzYWdlXCIgLyogTUVTU0FHRSAqL106IG1lc3NhZ2UsXHJcbiAgICAgICAgW1widHlwZVwiIC8qIFRZUEUgKi9dOiB0eXBlLFxyXG4gICAgICAgIFtcImludGVycG9sYXRlXCIgLyogSU5URVJQT0xBVEUgKi9dOiBpbnRlcnBvbGF0ZSxcclxuICAgICAgICBbXCJub3JtYWxpemVcIiAvKiBOT1JNQUxJWkUgKi9dOiBub3JtYWxpemVcclxuICAgIH07XHJcbiAgICByZXR1cm4gY3R4O1xyXG59XG5cbmxldCBkZXZ0b29scyA9IG51bGw7XHJcbmZ1bmN0aW9uIHNldERldlRvb2xzSG9vayhob29rKSB7XHJcbiAgICBkZXZ0b29scyA9IGhvb2s7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGV2VG9vbHNIb29rKCkge1xyXG4gICAgcmV0dXJuIGRldnRvb2xzO1xyXG59XHJcbmZ1bmN0aW9uIGluaXRJMThuRGV2VG9vbHMoaTE4biwgdmVyc2lvbiwgbWV0YSkge1xyXG4gICAgLy8gVE9ETzogcXVldWUgaWYgZGV2dG9vbHMgaXMgdW5kZWZpbmVkXHJcbiAgICBkZXZ0b29scyAmJlxyXG4gICAgICAgIGRldnRvb2xzLmVtaXQoSW50bGlmeURldlRvb2xzSG9va3MuSTE4bkluaXQsIHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICBpMThuLFxyXG4gICAgICAgICAgICB2ZXJzaW9uLFxyXG4gICAgICAgICAgICBtZXRhXHJcbiAgICAgICAgfSk7XHJcbn1cclxuY29uc3QgdHJhbnNsYXRlRGV2VG9vbHMgPSAvKiAjX19QVVJFX18qLyBjcmVhdGVEZXZUb29sc0hvb2soSW50bGlmeURldlRvb2xzSG9va3MuRnVuY3Rpb25UcmFuc2xhdGUpO1xyXG5mdW5jdGlvbiBjcmVhdGVEZXZUb29sc0hvb2soaG9vaykge1xyXG4gICAgcmV0dXJuIChwYXlsb2FkcykgPT4gZGV2dG9vbHMgJiYgZGV2dG9vbHMuZW1pdChob29rLCBwYXlsb2Fkcyk7XHJcbn1cblxuY29uc3QgQ29yZVdhcm5Db2RlcyA9IHtcclxuICAgIE5PVF9GT1VORF9LRVk6IDEsXHJcbiAgICBGQUxMQkFDS19UT19UUkFOU0xBVEU6IDIsXHJcbiAgICBDQU5OT1RfRk9STUFUX05VTUJFUjogMyxcclxuICAgIEZBTExCQUNLX1RPX05VTUJFUl9GT1JNQVQ6IDQsXHJcbiAgICBDQU5OT1RfRk9STUFUX0RBVEU6IDUsXHJcbiAgICBGQUxMQkFDS19UT19EQVRFX0ZPUk1BVDogNixcclxuICAgIF9fRVhURU5EX1BPSU5UX186IDdcclxufTtcclxuLyoqIEBpbnRlcm5hbCAqL1xyXG5jb25zdCB3YXJuTWVzc2FnZXMgPSB7XHJcbiAgICBbQ29yZVdhcm5Db2Rlcy5OT1RfRk9VTkRfS0VZXTogYE5vdCBmb3VuZCAne2tleX0nIGtleSBpbiAne2xvY2FsZX0nIGxvY2FsZSBtZXNzYWdlcy5gLFxyXG4gICAgW0NvcmVXYXJuQ29kZXMuRkFMTEJBQ0tfVE9fVFJBTlNMQVRFXTogYEZhbGwgYmFjayB0byB0cmFuc2xhdGUgJ3trZXl9JyBrZXkgd2l0aCAne3RhcmdldH0nIGxvY2FsZS5gLFxyXG4gICAgW0NvcmVXYXJuQ29kZXMuQ0FOTk9UX0ZPUk1BVF9OVU1CRVJdOiBgQ2Fubm90IGZvcm1hdCBhIG51bWJlciB2YWx1ZSBkdWUgdG8gbm90IHN1cHBvcnRlZCBJbnRsLk51bWJlckZvcm1hdC5gLFxyXG4gICAgW0NvcmVXYXJuQ29kZXMuRkFMTEJBQ0tfVE9fTlVNQkVSX0ZPUk1BVF06IGBGYWxsIGJhY2sgdG8gbnVtYmVyIGZvcm1hdCAne2tleX0nIGtleSB3aXRoICd7dGFyZ2V0fScgbG9jYWxlLmAsXHJcbiAgICBbQ29yZVdhcm5Db2Rlcy5DQU5OT1RfRk9STUFUX0RBVEVdOiBgQ2Fubm90IGZvcm1hdCBhIGRhdGUgdmFsdWUgZHVlIHRvIG5vdCBzdXBwb3J0ZWQgSW50bC5EYXRlVGltZUZvcm1hdC5gLFxyXG4gICAgW0NvcmVXYXJuQ29kZXMuRkFMTEJBQ0tfVE9fREFURV9GT1JNQVRdOiBgRmFsbCBiYWNrIHRvIGRhdGV0aW1lIGZvcm1hdCAne2tleX0nIGtleSB3aXRoICd7dGFyZ2V0fScgbG9jYWxlLmBcclxufTtcclxuZnVuY3Rpb24gZ2V0V2Fybk1lc3NhZ2UoY29kZSwgLi4uYXJncykge1xyXG4gICAgcmV0dXJuIGZvcm1hdCh3YXJuTWVzc2FnZXNbY29kZV0sIC4uLmFyZ3MpO1xyXG59XG5cbi8qKlxyXG4gKiBGYWxsYmFjayB3aXRoIHNpbXBsZSBpbXBsZW1lbmF0aW9uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEEgZmFsbGJhY2sgbG9jYWxlIGZ1bmN0aW9uIGltcGxlbWVudGVkIHdpdGggYSBzaW1wbGUgZmFsbGJhY2sgYWxnb3JpdGhtLlxyXG4gKlxyXG4gKiBCYXNpY2FsbHksIGl0IHJldHVybnMgdGhlIHZhbHVlIGFzIHNwZWNpZmllZCBpbiB0aGUgYGZhbGxiYWNrTG9jYWxlYCBwcm9wcywgYW5kIGlzIHByb2Nlc3NlZCB3aXRoIHRoZSBmYWxsYmFjayBpbnNpZGUgaW50bGlmeS5cclxuICpcclxuICogQHBhcmFtIGN0eCAtIEEge0BsaW5rIENvcmVDb250ZXh0IHwgY29udGV4dH1cclxuICogQHBhcmFtIGZhbGxiYWNrIC0gQSB7QGxpbmsgRmFsbGJhY2tMb2NhbGUgfCBmYWxsYmFjayBsb2NhbGV9XHJcbiAqIEBwYXJhbSBzdGFydCAtIEEgc3RhcnRpbmcge0BsaW5rIExvY2FsZSB8IGxvY2FsZX1cclxuICpcclxuICogQHJldHVybnMgRmFsbGJhY2sgbG9jYWxlc1xyXG4gKlxyXG4gKiBAVnVlSTE4bkdlbmVyYWxcclxuICovXHJcbmZ1bmN0aW9uIGZhbGxiYWNrV2l0aFNpbXBsZShjdHgsIGZhbGxiYWNrLCBzdGFydCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xyXG4pIHtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KFtcclxuICAgICAgICAgICAgc3RhcnQsXHJcbiAgICAgICAgICAgIC4uLihpc0FycmF5KGZhbGxiYWNrKVxyXG4gICAgICAgICAgICAgICAgPyBmYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgOiBpc09iamVjdChmYWxsYmFjaylcclxuICAgICAgICAgICAgICAgICAgICA/IE9iamVjdC5rZXlzKGZhbGxiYWNrKVxyXG4gICAgICAgICAgICAgICAgICAgIDogaXNTdHJpbmcoZmFsbGJhY2spXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gW2ZhbGxiYWNrXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtzdGFydF0pXHJcbiAgICAgICAgXSldO1xyXG59XHJcbi8qKlxyXG4gKiBGYWxsYmFjayB3aXRoIGxvY2FsZSBjaGFpblxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBIGZhbGxiYWNrIGxvY2FsZSBmdW5jdGlvbiBpbXBsZW1lbnRlZCB3aXRoIGEgZmFsbGJhY2sgY2hhaW4gYWxnb3JpdGhtLiBJdCdzIHVzZWQgaW4gVnVlSTE4biBhcyBkZWZhdWx0LlxyXG4gKlxyXG4gKiBAcGFyYW0gY3R4IC0gQSB7QGxpbmsgQ29yZUNvbnRleHQgfCBjb250ZXh0fVxyXG4gKiBAcGFyYW0gZmFsbGJhY2sgLSBBIHtAbGluayBGYWxsYmFja0xvY2FsZSB8IGZhbGxiYWNrIGxvY2FsZX1cclxuICogQHBhcmFtIHN0YXJ0IC0gQSBzdGFydGluZyB7QGxpbmsgTG9jYWxlIHwgbG9jYWxlfVxyXG4gKlxyXG4gKiBAcmV0dXJucyBGYWxsYmFjayBsb2NhbGVzXHJcbiAqXHJcbiAqIEBWdWVJMThuU2VlIFtGYWxsYmFja2luZ10oLi4vZ3VpZGUvZXNzZW50aWFscy9mYWxsYmFjaylcclxuICpcclxuICogQFZ1ZUkxOG5HZW5lcmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBmYWxsYmFja1dpdGhMb2NhbGVDaGFpbihjdHgsIGZhbGxiYWNrLCBzdGFydCkge1xyXG4gICAgY29uc3Qgc3RhcnRMb2NhbGUgPSBpc1N0cmluZyhzdGFydCkgPyBzdGFydCA6IERFRkFVTFRfTE9DQUxFO1xyXG4gICAgY29uc3QgY29udGV4dCA9IGN0eDtcclxuICAgIGlmICghY29udGV4dC5fX2xvY2FsZUNoYWluQ2FjaGUpIHtcclxuICAgICAgICBjb250ZXh0Ll9fbG9jYWxlQ2hhaW5DYWNoZSA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIGxldCBjaGFpbiA9IGNvbnRleHQuX19sb2NhbGVDaGFpbkNhY2hlLmdldChzdGFydExvY2FsZSk7XHJcbiAgICBpZiAoIWNoYWluKSB7XHJcbiAgICAgICAgY2hhaW4gPSBbXTtcclxuICAgICAgICAvLyBmaXJzdCBibG9jayBkZWZpbmVkIGJ5IHN0YXJ0XHJcbiAgICAgICAgbGV0IGJsb2NrID0gW3N0YXJ0XTtcclxuICAgICAgICAvLyB3aGlsZSBhbnkgaW50ZXJ2ZW5pbmcgYmxvY2sgZm91bmRcclxuICAgICAgICB3aGlsZSAoaXNBcnJheShibG9jaykpIHtcclxuICAgICAgICAgICAgYmxvY2sgPSBhcHBlbmRCbG9ja1RvQ2hhaW4oY2hhaW4sIGJsb2NrLCBmYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgICAgIC8vIGxhc3QgYmxvY2sgZGVmaW5lZCBieSBkZWZhdWx0XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSBpc0FycmF5KGZhbGxiYWNrKSB8fCAhaXNQbGFpbk9iamVjdChmYWxsYmFjaylcclxuICAgICAgICAgICAgPyBmYWxsYmFja1xyXG4gICAgICAgICAgICA6IGZhbGxiYWNrWydkZWZhdWx0J11cclxuICAgICAgICAgICAgICAgID8gZmFsbGJhY2tbJ2RlZmF1bHQnXVxyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIC8vIGNvbnZlcnQgZGVmYXVsdHMgdG8gYXJyYXlcclxuICAgICAgICBibG9jayA9IGlzU3RyaW5nKGRlZmF1bHRzKSA/IFtkZWZhdWx0c10gOiBkZWZhdWx0cztcclxuICAgICAgICBpZiAoaXNBcnJheShibG9jaykpIHtcclxuICAgICAgICAgICAgYXBwZW5kQmxvY2tUb0NoYWluKGNoYWluLCBibG9jaywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0Ll9fbG9jYWxlQ2hhaW5DYWNoZS5zZXQoc3RhcnRMb2NhbGUsIGNoYWluKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaGFpbjtcclxufVxyXG5mdW5jdGlvbiBhcHBlbmRCbG9ja1RvQ2hhaW4oY2hhaW4sIGJsb2NrLCBibG9ja3MpIHtcclxuICAgIGxldCBmb2xsb3cgPSB0cnVlO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9jay5sZW5ndGggJiYgaXNCb29sZWFuKGZvbGxvdyk7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGxvY2FsZSA9IGJsb2NrW2ldO1xyXG4gICAgICAgIGlmIChpc1N0cmluZyhsb2NhbGUpKSB7XHJcbiAgICAgICAgICAgIGZvbGxvdyA9IGFwcGVuZExvY2FsZVRvQ2hhaW4oY2hhaW4sIGJsb2NrW2ldLCBibG9ja3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmb2xsb3c7XHJcbn1cclxuZnVuY3Rpb24gYXBwZW5kTG9jYWxlVG9DaGFpbihjaGFpbiwgbG9jYWxlLCBibG9ja3MpIHtcclxuICAgIGxldCBmb2xsb3c7XHJcbiAgICBjb25zdCB0b2tlbnMgPSBsb2NhbGUuc3BsaXQoJy0nKTtcclxuICAgIGRvIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSB0b2tlbnMuam9pbignLScpO1xyXG4gICAgICAgIGZvbGxvdyA9IGFwcGVuZEl0ZW1Ub0NoYWluKGNoYWluLCB0YXJnZXQsIGJsb2Nrcyk7XHJcbiAgICAgICAgdG9rZW5zLnNwbGljZSgtMSwgMSk7XHJcbiAgICB9IHdoaWxlICh0b2tlbnMubGVuZ3RoICYmIGZvbGxvdyA9PT0gdHJ1ZSk7XHJcbiAgICByZXR1cm4gZm9sbG93O1xyXG59XHJcbmZ1bmN0aW9uIGFwcGVuZEl0ZW1Ub0NoYWluKGNoYWluLCB0YXJnZXQsIGJsb2Nrcykge1xyXG4gICAgbGV0IGZvbGxvdyA9IGZhbHNlO1xyXG4gICAgaWYgKCFjaGFpbi5pbmNsdWRlcyh0YXJnZXQpKSB7XHJcbiAgICAgICAgZm9sbG93ID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGZvbGxvdyA9IHRhcmdldFt0YXJnZXQubGVuZ3RoIC0gMV0gIT09ICchJztcclxuICAgICAgICAgICAgY29uc3QgbG9jYWxlID0gdGFyZ2V0LnJlcGxhY2UoLyEvZywgJycpO1xyXG4gICAgICAgICAgICBjaGFpbi5wdXNoKGxvY2FsZSk7XHJcbiAgICAgICAgICAgIGlmICgoaXNBcnJheShibG9ja3MpIHx8IGlzUGxhaW5PYmplY3QoYmxvY2tzKSkgJiZcclxuICAgICAgICAgICAgICAgIGJsb2Nrc1tsb2NhbGVdIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBmb2xsb3cgPSBibG9ja3NbbG9jYWxlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmb2xsb3c7XHJcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xyXG4vKipcclxuICogSW50bGlmeSBjb3JlLWJhc2UgdmVyc2lvblxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IFZFUlNJT04gPSAnOS4yLjInO1xyXG5jb25zdCBOT1RfUkVPU0xWRUQgPSAtMTtcclxuY29uc3QgREVGQVVMVF9MT0NBTEUgPSAnZW4tVVMnO1xyXG5jb25zdCBNSVNTSU5HX1JFU09MVkVfVkFMVUUgPSAnJztcclxuY29uc3QgY2FwaXRhbGl6ZSA9IChzdHIpID0+IGAke3N0ci5jaGFyQXQoMCkudG9Mb2NhbGVVcHBlckNhc2UoKX0ke3N0ci5zdWJzdHIoMSl9YDtcclxuZnVuY3Rpb24gZ2V0RGVmYXVsdExpbmtlZE1vZGlmaWVycygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdXBwZXI6ICh2YWwsIHR5cGUpID0+IHtcclxuICAgICAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlID09PSAndGV4dCcgJiYgaXNTdHJpbmcodmFsKVxyXG4gICAgICAgICAgICAgICAgPyB2YWwudG9VcHBlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgOiB0eXBlID09PSAndm5vZGUnICYmIGlzT2JqZWN0KHZhbCkgJiYgJ19fdl9pc1ZOb2RlJyBpbiB2YWxcclxuICAgICAgICAgICAgICAgICAgICA/IHZhbC5jaGlsZHJlbi50b1VwcGVyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgOiB2YWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsb3dlcjogKHZhbCwgdHlwZSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09ICd0ZXh0JyAmJiBpc1N0cmluZyh2YWwpXHJcbiAgICAgICAgICAgICAgICA/IHZhbC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICA6IHR5cGUgPT09ICd2bm9kZScgJiYgaXNPYmplY3QodmFsKSAmJiAnX192X2lzVk5vZGUnIGluIHZhbFxyXG4gICAgICAgICAgICAgICAgICAgID8gdmFsLmNoaWxkcmVuLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICA6IHZhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhcGl0YWxpemU6ICh2YWwsIHR5cGUpID0+IHtcclxuICAgICAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICAgICAgICAgIHJldHVybiAodHlwZSA9PT0gJ3RleHQnICYmIGlzU3RyaW5nKHZhbClcclxuICAgICAgICAgICAgICAgID8gY2FwaXRhbGl6ZSh2YWwpXHJcbiAgICAgICAgICAgICAgICA6IHR5cGUgPT09ICd2bm9kZScgJiYgaXNPYmplY3QodmFsKSAmJiAnX192X2lzVk5vZGUnIGluIHZhbFxyXG4gICAgICAgICAgICAgICAgICAgID8gY2FwaXRhbGl6ZSh2YWwuY2hpbGRyZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgOiB2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxubGV0IF9jb21waWxlcjtcclxuZnVuY3Rpb24gcmVnaXN0ZXJNZXNzYWdlQ29tcGlsZXIoY29tcGlsZXIpIHtcclxuICAgIF9jb21waWxlciA9IGNvbXBpbGVyO1xyXG59XHJcbmxldCBfcmVzb2x2ZXI7XHJcbi8qKlxyXG4gKiBSZWdpc3RlciB0aGUgbWVzc2FnZSByZXNvbHZlclxyXG4gKlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBIHtAbGluayBNZXNzYWdlUmVzb2x2ZXJ9IGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBWdWVJMThuR2VuZXJhbFxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJNZXNzYWdlUmVzb2x2ZXIocmVzb2x2ZXIpIHtcclxuICAgIF9yZXNvbHZlciA9IHJlc29sdmVyO1xyXG59XHJcbmxldCBfZmFsbGJhY2tlcjtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyIHRoZSBsb2NhbGUgZmFsbGJhY2tlclxyXG4gKlxyXG4gKiBAcGFyYW0gZmFsbGJhY2tlciAtIEEge0BsaW5rIExvY2FsZUZhbGxiYWNrZXJ9IGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBWdWVJMThuR2VuZXJhbFxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJMb2NhbGVGYWxsYmFja2VyKGZhbGxiYWNrZXIpIHtcclxuICAgIF9mYWxsYmFja2VyID0gZmFsbGJhY2tlcjtcclxufVxyXG4vLyBBZGRpdGlvbmFsIE1ldGEgZm9yIEludGxpZnkgRGV2VG9vbHNcclxubGV0IF9hZGRpdGlvbmFsTWV0YSA9IG51bGw7XHJcbmNvbnN0IHNldEFkZGl0aW9uYWxNZXRhID0gIChtZXRhKSA9PiB7XHJcbiAgICBfYWRkaXRpb25hbE1ldGEgPSBtZXRhO1xyXG59O1xyXG5jb25zdCBnZXRBZGRpdGlvbmFsTWV0YSA9ICAoKSA9PiBfYWRkaXRpb25hbE1ldGE7XHJcbmxldCBfZmFsbGJhY2tDb250ZXh0ID0gbnVsbDtcclxuY29uc3Qgc2V0RmFsbGJhY2tDb250ZXh0ID0gKGNvbnRleHQpID0+IHtcclxuICAgIF9mYWxsYmFja0NvbnRleHQgPSBjb250ZXh0O1xyXG59O1xyXG5jb25zdCBnZXRGYWxsYmFja0NvbnRleHQgPSAoKSA9PiBfZmFsbGJhY2tDb250ZXh0O1xyXG4vLyBJRCBmb3IgQ29yZUNvbnRleHRcclxubGV0IF9jaWQgPSAwO1xyXG5mdW5jdGlvbiBjcmVhdGVDb3JlQ29udGV4dChvcHRpb25zID0ge30pIHtcclxuICAgIC8vIHNldHVwIG9wdGlvbnNcclxuICAgIGNvbnN0IHZlcnNpb24gPSBpc1N0cmluZyhvcHRpb25zLnZlcnNpb24pID8gb3B0aW9ucy52ZXJzaW9uIDogVkVSU0lPTjtcclxuICAgIGNvbnN0IGxvY2FsZSA9IGlzU3RyaW5nKG9wdGlvbnMubG9jYWxlKSA/IG9wdGlvbnMubG9jYWxlIDogREVGQVVMVF9MT0NBTEU7XHJcbiAgICBjb25zdCBmYWxsYmFja0xvY2FsZSA9IGlzQXJyYXkob3B0aW9ucy5mYWxsYmFja0xvY2FsZSkgfHxcclxuICAgICAgICBpc1BsYWluT2JqZWN0KG9wdGlvbnMuZmFsbGJhY2tMb2NhbGUpIHx8XHJcbiAgICAgICAgaXNTdHJpbmcob3B0aW9ucy5mYWxsYmFja0xvY2FsZSkgfHxcclxuICAgICAgICBvcHRpb25zLmZhbGxiYWNrTG9jYWxlID09PSBmYWxzZVxyXG4gICAgICAgID8gb3B0aW9ucy5mYWxsYmFja0xvY2FsZVxyXG4gICAgICAgIDogbG9jYWxlO1xyXG4gICAgY29uc3QgbWVzc2FnZXMgPSBpc1BsYWluT2JqZWN0KG9wdGlvbnMubWVzc2FnZXMpXHJcbiAgICAgICAgPyBvcHRpb25zLm1lc3NhZ2VzXHJcbiAgICAgICAgOiB7IFtsb2NhbGVdOiB7fSB9O1xyXG4gICAgY29uc3QgZGF0ZXRpbWVGb3JtYXRzID0gaXNQbGFpbk9iamVjdChvcHRpb25zLmRhdGV0aW1lRm9ybWF0cylcclxuICAgICAgICAgICAgPyBvcHRpb25zLmRhdGV0aW1lRm9ybWF0c1xyXG4gICAgICAgICAgICA6IHsgW2xvY2FsZV06IHt9IH1cclxuICAgICAgICA7XHJcbiAgICBjb25zdCBudW1iZXJGb3JtYXRzID0gaXNQbGFpbk9iamVjdChvcHRpb25zLm51bWJlckZvcm1hdHMpXHJcbiAgICAgICAgICAgID8gb3B0aW9ucy5udW1iZXJGb3JtYXRzXHJcbiAgICAgICAgICAgIDogeyBbbG9jYWxlXToge30gfVxyXG4gICAgICAgIDtcclxuICAgIGNvbnN0IG1vZGlmaWVycyA9IGFzc2lnbih7fSwgb3B0aW9ucy5tb2RpZmllcnMgfHwge30sIGdldERlZmF1bHRMaW5rZWRNb2RpZmllcnMoKSk7XHJcbiAgICBjb25zdCBwbHVyYWxSdWxlcyA9IG9wdGlvbnMucGx1cmFsUnVsZXMgfHwge307XHJcbiAgICBjb25zdCBtaXNzaW5nID0gaXNGdW5jdGlvbihvcHRpb25zLm1pc3NpbmcpID8gb3B0aW9ucy5taXNzaW5nIDogbnVsbDtcclxuICAgIGNvbnN0IG1pc3NpbmdXYXJuID0gaXNCb29sZWFuKG9wdGlvbnMubWlzc2luZ1dhcm4pIHx8IGlzUmVnRXhwKG9wdGlvbnMubWlzc2luZ1dhcm4pXHJcbiAgICAgICAgPyBvcHRpb25zLm1pc3NpbmdXYXJuXHJcbiAgICAgICAgOiB0cnVlO1xyXG4gICAgY29uc3QgZmFsbGJhY2tXYXJuID0gaXNCb29sZWFuKG9wdGlvbnMuZmFsbGJhY2tXYXJuKSB8fCBpc1JlZ0V4cChvcHRpb25zLmZhbGxiYWNrV2FybilcclxuICAgICAgICA/IG9wdGlvbnMuZmFsbGJhY2tXYXJuXHJcbiAgICAgICAgOiB0cnVlO1xyXG4gICAgY29uc3QgZmFsbGJhY2tGb3JtYXQgPSAhIW9wdGlvbnMuZmFsbGJhY2tGb3JtYXQ7XHJcbiAgICBjb25zdCB1bnJlc29sdmluZyA9ICEhb3B0aW9ucy51bnJlc29sdmluZztcclxuICAgIGNvbnN0IHBvc3RUcmFuc2xhdGlvbiA9IGlzRnVuY3Rpb24ob3B0aW9ucy5wb3N0VHJhbnNsYXRpb24pXHJcbiAgICAgICAgPyBvcHRpb25zLnBvc3RUcmFuc2xhdGlvblxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIGNvbnN0IHByb2Nlc3NvciA9IGlzUGxhaW5PYmplY3Qob3B0aW9ucy5wcm9jZXNzb3IpID8gb3B0aW9ucy5wcm9jZXNzb3IgOiBudWxsO1xyXG4gICAgY29uc3Qgd2Fybkh0bWxNZXNzYWdlID0gaXNCb29sZWFuKG9wdGlvbnMud2Fybkh0bWxNZXNzYWdlKVxyXG4gICAgICAgID8gb3B0aW9ucy53YXJuSHRtbE1lc3NhZ2VcclxuICAgICAgICA6IHRydWU7XHJcbiAgICBjb25zdCBlc2NhcGVQYXJhbWV0ZXIgPSAhIW9wdGlvbnMuZXNjYXBlUGFyYW1ldGVyO1xyXG4gICAgY29uc3QgbWVzc2FnZUNvbXBpbGVyID0gaXNGdW5jdGlvbihvcHRpb25zLm1lc3NhZ2VDb21waWxlcilcclxuICAgICAgICA/IG9wdGlvbnMubWVzc2FnZUNvbXBpbGVyXHJcbiAgICAgICAgOiBfY29tcGlsZXI7XHJcbiAgICBjb25zdCBtZXNzYWdlUmVzb2x2ZXIgPSBpc0Z1bmN0aW9uKG9wdGlvbnMubWVzc2FnZVJlc29sdmVyKVxyXG4gICAgICAgID8gb3B0aW9ucy5tZXNzYWdlUmVzb2x2ZXJcclxuICAgICAgICA6IF9yZXNvbHZlciB8fCByZXNvbHZlV2l0aEtleVZhbHVlO1xyXG4gICAgY29uc3QgbG9jYWxlRmFsbGJhY2tlciA9IGlzRnVuY3Rpb24ob3B0aW9ucy5sb2NhbGVGYWxsYmFja2VyKVxyXG4gICAgICAgID8gb3B0aW9ucy5sb2NhbGVGYWxsYmFja2VyXHJcbiAgICAgICAgOiBfZmFsbGJhY2tlciB8fCBmYWxsYmFja1dpdGhTaW1wbGU7XHJcbiAgICBjb25zdCBmYWxsYmFja0NvbnRleHQgPSBpc09iamVjdChvcHRpb25zLmZhbGxiYWNrQ29udGV4dClcclxuICAgICAgICA/IG9wdGlvbnMuZmFsbGJhY2tDb250ZXh0XHJcbiAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBvbldhcm4gPSBpc0Z1bmN0aW9uKG9wdGlvbnMub25XYXJuKSA/IG9wdGlvbnMub25XYXJuIDogd2FybjtcclxuICAgIC8vIHNldHVwIGludGVybmFsIG9wdGlvbnNcclxuICAgIGNvbnN0IGludGVybmFsT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCBfX2RhdGV0aW1lRm9ybWF0dGVycyA9IGlzT2JqZWN0KGludGVybmFsT3B0aW9ucy5fX2RhdGV0aW1lRm9ybWF0dGVycylcclxuICAgICAgICAgICAgPyBpbnRlcm5hbE9wdGlvbnMuX19kYXRldGltZUZvcm1hdHRlcnNcclxuICAgICAgICAgICAgOiBuZXcgTWFwKClcclxuICAgICAgICA7XHJcbiAgICBjb25zdCBfX251bWJlckZvcm1hdHRlcnMgPSBpc09iamVjdChpbnRlcm5hbE9wdGlvbnMuX19udW1iZXJGb3JtYXR0ZXJzKVxyXG4gICAgICAgICAgICA/IGludGVybmFsT3B0aW9ucy5fX251bWJlckZvcm1hdHRlcnNcclxuICAgICAgICAgICAgOiBuZXcgTWFwKClcclxuICAgICAgICA7XHJcbiAgICBjb25zdCBfX21ldGEgPSBpc09iamVjdChpbnRlcm5hbE9wdGlvbnMuX19tZXRhKSA/IGludGVybmFsT3B0aW9ucy5fX21ldGEgOiB7fTtcclxuICAgIF9jaWQrKztcclxuICAgIGNvbnN0IGNvbnRleHQgPSB7XHJcbiAgICAgICAgdmVyc2lvbixcclxuICAgICAgICBjaWQ6IF9jaWQsXHJcbiAgICAgICAgbG9jYWxlLFxyXG4gICAgICAgIGZhbGxiYWNrTG9jYWxlLFxyXG4gICAgICAgIG1lc3NhZ2VzLFxyXG4gICAgICAgIG1vZGlmaWVycyxcclxuICAgICAgICBwbHVyYWxSdWxlcyxcclxuICAgICAgICBtaXNzaW5nLFxyXG4gICAgICAgIG1pc3NpbmdXYXJuLFxyXG4gICAgICAgIGZhbGxiYWNrV2FybixcclxuICAgICAgICBmYWxsYmFja0Zvcm1hdCxcclxuICAgICAgICB1bnJlc29sdmluZyxcclxuICAgICAgICBwb3N0VHJhbnNsYXRpb24sXHJcbiAgICAgICAgcHJvY2Vzc29yLFxyXG4gICAgICAgIHdhcm5IdG1sTWVzc2FnZSxcclxuICAgICAgICBlc2NhcGVQYXJhbWV0ZXIsXHJcbiAgICAgICAgbWVzc2FnZUNvbXBpbGVyLFxyXG4gICAgICAgIG1lc3NhZ2VSZXNvbHZlcixcclxuICAgICAgICBsb2NhbGVGYWxsYmFja2VyLFxyXG4gICAgICAgIGZhbGxiYWNrQ29udGV4dCxcclxuICAgICAgICBvbldhcm4sXHJcbiAgICAgICAgX19tZXRhXHJcbiAgICB9O1xyXG4gICAge1xyXG4gICAgICAgIGNvbnRleHQuZGF0ZXRpbWVGb3JtYXRzID0gZGF0ZXRpbWVGb3JtYXRzO1xyXG4gICAgICAgIGNvbnRleHQubnVtYmVyRm9ybWF0cyA9IG51bWJlckZvcm1hdHM7XHJcbiAgICAgICAgY29udGV4dC5fX2RhdGV0aW1lRm9ybWF0dGVycyA9IF9fZGF0ZXRpbWVGb3JtYXR0ZXJzO1xyXG4gICAgICAgIGNvbnRleHQuX19udW1iZXJGb3JtYXR0ZXJzID0gX19udW1iZXJGb3JtYXR0ZXJzO1xyXG4gICAgfVxyXG4gICAgLy8gZm9yIHZ1ZS1kZXZ0b29scyB0aW1lbGluZSBldmVudFxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNvbnRleHQuX192X2VtaXR0ZXIgPVxyXG4gICAgICAgICAgICBpbnRlcm5hbE9wdGlvbnMuX192X2VtaXR0ZXIgIT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgPyBpbnRlcm5hbE9wdGlvbnMuX192X2VtaXR0ZXJcclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgLy8gTk9URTogZXhwZXJpbWVudGFsICEhXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fSU5UTElGWV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICBpbml0STE4bkRldlRvb2xzKGNvbnRleHQsIHZlcnNpb24sIF9fbWV0YSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29udGV4dDtcclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIGlzVHJhbnNsYXRlRmFsbGJhY2tXYXJuKGZhbGxiYWNrLCBrZXkpIHtcclxuICAgIHJldHVybiBmYWxsYmFjayBpbnN0YW5jZW9mIFJlZ0V4cCA/IGZhbGxiYWNrLnRlc3Qoa2V5KSA6IGZhbGxiYWNrO1xyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZnVuY3Rpb24gaXNUcmFuc2xhdGVNaXNzaW5nV2FybihtaXNzaW5nLCBrZXkpIHtcclxuICAgIHJldHVybiBtaXNzaW5nIGluc3RhbmNlb2YgUmVnRXhwID8gbWlzc2luZy50ZXN0KGtleSkgOiBtaXNzaW5nO1xyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZnVuY3Rpb24gaGFuZGxlTWlzc2luZyhjb250ZXh0LCBrZXksIGxvY2FsZSwgbWlzc2luZ1dhcm4sIHR5cGUpIHtcclxuICAgIGNvbnN0IHsgbWlzc2luZywgb25XYXJuIH0gPSBjb250ZXh0O1xyXG4gICAgLy8gZm9yIHZ1ZS1kZXZ0b29scyB0aW1lbGluZSBldmVudFxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNvbnN0IGVtaXR0ZXIgPSBjb250ZXh0Ll9fdl9lbWl0dGVyO1xyXG4gICAgICAgIGlmIChlbWl0dGVyKSB7XHJcbiAgICAgICAgICAgIGVtaXR0ZXIuZW1pdChcIm1pc3NpbmdcIiAvKiBNSVNTSU5HICovLCB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogYCR7dHlwZX06JHtrZXl9YFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobWlzc2luZyAhPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IHJldCA9IG1pc3NpbmcoY29udGV4dCwgbG9jYWxlLCBrZXksIHR5cGUpO1xyXG4gICAgICAgIHJldHVybiBpc1N0cmluZyhyZXQpID8gcmV0IDoga2V5O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc1RyYW5zbGF0ZU1pc3NpbmdXYXJuKG1pc3NpbmdXYXJuLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIG9uV2FybihnZXRXYXJuTWVzc2FnZShDb3JlV2FybkNvZGVzLk5PVF9GT1VORF9LRVksIHsga2V5LCBsb2NhbGUgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgfVxyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZnVuY3Rpb24gdXBkYXRlRmFsbGJhY2tMb2NhbGUoY3R4LCBsb2NhbGUsIGZhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gY3R4O1xyXG4gICAgY29udGV4dC5fX2xvY2FsZUNoYWluQ2FjaGUgPSBuZXcgTWFwKCk7XHJcbiAgICBjdHgubG9jYWxlRmFsbGJhY2tlcihjdHgsIGZhbGxiYWNrLCBsb2NhbGUpO1xyXG59XHJcbi8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuXG5jb25zdCBSRV9IVE1MX1RBRyA9IC88XFwvP1tcXHdcXHM9XCIvLic6OyMtXFwvXSs+LztcclxuY29uc3QgV0FSTl9NRVNTQUdFID0gYERldGVjdGVkIEhUTUwgaW4gJ3tzb3VyY2V9JyBtZXNzYWdlLiBSZWNvbW1lbmQgbm90IHVzaW5nIEhUTUwgbWVzc2FnZXMgdG8gYXZvaWQgWFNTLmA7XHJcbmZ1bmN0aW9uIGNoZWNrSHRtbE1lc3NhZ2Uoc291cmNlLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCB3YXJuSHRtbE1lc3NhZ2UgPSBpc0Jvb2xlYW4ob3B0aW9ucy53YXJuSHRtbE1lc3NhZ2UpXHJcbiAgICAgICAgPyBvcHRpb25zLndhcm5IdG1sTWVzc2FnZVxyXG4gICAgICAgIDogdHJ1ZTtcclxuICAgIGlmICh3YXJuSHRtbE1lc3NhZ2UgJiYgUkVfSFRNTF9UQUcudGVzdChzb3VyY2UpKSB7XHJcbiAgICAgICAgd2Fybihmb3JtYXQoV0FSTl9NRVNTQUdFLCB7IHNvdXJjZSB9KSk7XHJcbiAgICB9XHJcbn1cclxuY29uc3QgZGVmYXVsdE9uQ2FjaGVLZXkgPSAoc291cmNlKSA9PiBzb3VyY2U7XHJcbmxldCBjb21waWxlQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG5mdW5jdGlvbiBjbGVhckNvbXBpbGVDYWNoZSgpIHtcclxuICAgIGNvbXBpbGVDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbn1cclxuZnVuY3Rpb24gY29tcGlsZVRvRnVuY3Rpb24oc291cmNlLCBvcHRpb25zID0ge30pIHtcclxuICAgIHtcclxuICAgICAgICAvLyBjaGVjayBIVE1MIG1lc3NhZ2VcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY2hlY2tIdG1sTWVzc2FnZShzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgICAgIC8vIGNoZWNrIGNhY2hlc1xyXG4gICAgICAgIGNvbnN0IG9uQ2FjaGVLZXkgPSBvcHRpb25zLm9uQ2FjaGVLZXkgfHwgZGVmYXVsdE9uQ2FjaGVLZXk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gb25DYWNoZUtleShzb3VyY2UpO1xyXG4gICAgICAgIGNvbnN0IGNhY2hlZCA9IGNvbXBpbGVDYWNoZVtrZXldO1xyXG4gICAgICAgIGlmIChjYWNoZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29tcGlsZSBlcnJvciBkZXRlY3RpbmdcclxuICAgICAgICBsZXQgb2NjdXJyZWQgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBvbkVycm9yID0gb3B0aW9ucy5vbkVycm9yIHx8IGRlZmF1bHRPbkVycm9yO1xyXG4gICAgICAgIG9wdGlvbnMub25FcnJvciA9IChlcnIpID0+IHtcclxuICAgICAgICAgICAgb2NjdXJyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBvbkVycm9yKGVycik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBjb21waWxlXHJcbiAgICAgICAgY29uc3QgeyBjb2RlIH0gPSBiYXNlQ29tcGlsZShzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgICAgIC8vIGV2YWx1YXRlIGZ1bmN0aW9uXHJcbiAgICAgICAgY29uc3QgbXNnID0gbmV3IEZ1bmN0aW9uKGByZXR1cm4gJHtjb2RlfWApKCk7XHJcbiAgICAgICAgLy8gaWYgb2NjdXJyZWQgY29tcGlsZSBlcnJvciwgZG9uJ3QgY2FjaGVcclxuICAgICAgICByZXR1cm4gIW9jY3VycmVkID8gKGNvbXBpbGVDYWNoZVtrZXldID0gbXNnKSA6IG1zZztcclxuICAgIH1cclxufVxuXG5sZXQgY29kZSA9IENvbXBpbGVFcnJvckNvZGVzLl9fRVhURU5EX1BPSU5UX187XHJcbmNvbnN0IGluYyA9ICgpID0+ICsrY29kZTtcclxuY29uc3QgQ29yZUVycm9yQ29kZXMgPSB7XHJcbiAgICBJTlZBTElEX0FSR1VNRU5UOiBjb2RlLFxyXG4gICAgSU5WQUxJRF9EQVRFX0FSR1VNRU5UOiBpbmMoKSxcclxuICAgIElOVkFMSURfSVNPX0RBVEVfQVJHVU1FTlQ6IGluYygpLFxyXG4gICAgX19FWFRFTkRfUE9JTlRfXzogaW5jKCkgLy8gMThcclxufTtcclxuZnVuY3Rpb24gY3JlYXRlQ29yZUVycm9yKGNvZGUpIHtcclxuICAgIHJldHVybiBjcmVhdGVDb21waWxlRXJyb3IoY29kZSwgbnVsbCwgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8geyBtZXNzYWdlczogZXJyb3JNZXNzYWdlcyB9IDogdW5kZWZpbmVkKTtcclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmNvbnN0IGVycm9yTWVzc2FnZXMgPSB7XHJcbiAgICBbQ29yZUVycm9yQ29kZXMuSU5WQUxJRF9BUkdVTUVOVF06ICdJbnZhbGlkIGFyZ3VtZW50cycsXHJcbiAgICBbQ29yZUVycm9yQ29kZXMuSU5WQUxJRF9EQVRFX0FSR1VNRU5UXTogJ1RoZSBkYXRlIHByb3ZpZGVkIGlzIGFuIGludmFsaWQgRGF0ZSBvYmplY3QuJyArXHJcbiAgICAgICAgJ01ha2Ugc3VyZSB5b3VyIERhdGUgcmVwcmVzZW50cyBhIHZhbGlkIGRhdGUuJyxcclxuICAgIFtDb3JlRXJyb3JDb2Rlcy5JTlZBTElEX0lTT19EQVRFX0FSR1VNRU5UXTogJ1RoZSBhcmd1bWVudCBwcm92aWRlZCBpcyBub3QgYSB2YWxpZCBJU08gZGF0ZSBzdHJpbmcnXHJcbn07XG5cbmNvbnN0IE5PT1BfTUVTU0FHRV9GVU5DVElPTiA9ICgpID0+ICcnO1xyXG5jb25zdCBpc01lc3NhZ2VGdW5jdGlvbiA9ICh2YWwpID0+IGlzRnVuY3Rpb24odmFsKTtcclxuLy8gaW1wbGVtZW50YXRpb24gb2YgYHRyYW5zbGF0ZWAgZnVuY3Rpb25cclxuZnVuY3Rpb24gdHJhbnNsYXRlKGNvbnRleHQsIC4uLmFyZ3MpIHtcclxuICAgIGNvbnN0IHsgZmFsbGJhY2tGb3JtYXQsIHBvc3RUcmFuc2xhdGlvbiwgdW5yZXNvbHZpbmcsIG1lc3NhZ2VDb21waWxlciwgZmFsbGJhY2tMb2NhbGUsIG1lc3NhZ2VzIH0gPSBjb250ZXh0O1xyXG4gICAgY29uc3QgW2tleSwgb3B0aW9uc10gPSBwYXJzZVRyYW5zbGF0ZUFyZ3MoLi4uYXJncyk7XHJcbiAgICBjb25zdCBtaXNzaW5nV2FybiA9IGlzQm9vbGVhbihvcHRpb25zLm1pc3NpbmdXYXJuKVxyXG4gICAgICAgID8gb3B0aW9ucy5taXNzaW5nV2FyblxyXG4gICAgICAgIDogY29udGV4dC5taXNzaW5nV2FybjtcclxuICAgIGNvbnN0IGZhbGxiYWNrV2FybiA9IGlzQm9vbGVhbihvcHRpb25zLmZhbGxiYWNrV2FybilcclxuICAgICAgICA/IG9wdGlvbnMuZmFsbGJhY2tXYXJuXHJcbiAgICAgICAgOiBjb250ZXh0LmZhbGxiYWNrV2FybjtcclxuICAgIGNvbnN0IGVzY2FwZVBhcmFtZXRlciA9IGlzQm9vbGVhbihvcHRpb25zLmVzY2FwZVBhcmFtZXRlcilcclxuICAgICAgICA/IG9wdGlvbnMuZXNjYXBlUGFyYW1ldGVyXHJcbiAgICAgICAgOiBjb250ZXh0LmVzY2FwZVBhcmFtZXRlcjtcclxuICAgIGNvbnN0IHJlc29sdmVkTWVzc2FnZSA9ICEhb3B0aW9ucy5yZXNvbHZlZE1lc3NhZ2U7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IGRlZmF1bHRNc2dPcktleSA9IGlzU3RyaW5nKG9wdGlvbnMuZGVmYXVsdCkgfHwgaXNCb29sZWFuKG9wdGlvbnMuZGVmYXVsdCkgLy8gZGVmYXVsdCBieSBmdW5jdGlvbiBvcHRpb25cclxuICAgICAgICA/ICFpc0Jvb2xlYW4ob3B0aW9ucy5kZWZhdWx0KVxyXG4gICAgICAgICAgICA/IG9wdGlvbnMuZGVmYXVsdFxyXG4gICAgICAgICAgICA6ICghbWVzc2FnZUNvbXBpbGVyID8gKCkgPT4ga2V5IDoga2V5KVxyXG4gICAgICAgIDogZmFsbGJhY2tGb3JtYXQgLy8gZGVmYXVsdCBieSBgZmFsbGJhY2tGb3JtYXRgIG9wdGlvblxyXG4gICAgICAgICAgICA/ICghbWVzc2FnZUNvbXBpbGVyID8gKCkgPT4ga2V5IDoga2V5KVxyXG4gICAgICAgICAgICA6ICcnO1xyXG4gICAgY29uc3QgZW5hYmxlRGVmYXVsdE1zZyA9IGZhbGxiYWNrRm9ybWF0IHx8IGRlZmF1bHRNc2dPcktleSAhPT0gJyc7XHJcbiAgICBjb25zdCBsb2NhbGUgPSBpc1N0cmluZyhvcHRpb25zLmxvY2FsZSkgPyBvcHRpb25zLmxvY2FsZSA6IGNvbnRleHQubG9jYWxlO1xyXG4gICAgLy8gZXNjYXBlIHBhcmFtc1xyXG4gICAgZXNjYXBlUGFyYW1ldGVyICYmIGVzY2FwZVBhcmFtcyhvcHRpb25zKTtcclxuICAgIC8vIHJlc29sdmUgbWVzc2FnZSBmb3JtYXRcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcclxuICAgIGxldCBbZm9ybWF0U2NvcGUsIHRhcmdldExvY2FsZSwgbWVzc2FnZV0gPSAhcmVzb2x2ZWRNZXNzYWdlXHJcbiAgICAgICAgPyByZXNvbHZlTWVzc2FnZUZvcm1hdChjb250ZXh0LCBrZXksIGxvY2FsZSwgZmFsbGJhY2tMb2NhbGUsIGZhbGxiYWNrV2FybiwgbWlzc2luZ1dhcm4pXHJcbiAgICAgICAgOiBbXHJcbiAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgbG9jYWxlLFxyXG4gICAgICAgICAgICBtZXNzYWdlc1tsb2NhbGVdIHx8IHt9XHJcbiAgICAgICAgXTtcclxuICAgIC8vIE5PVEU6XHJcbiAgICAvLyAgRml4IHRvIHdvcmsgYXJvdW5kIGBzc3JUcmFuc2Zyb21gIGJ1ZyBpbiBWaXRlLlxyXG4gICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS9pc3N1ZXMvNDMwNlxyXG4gICAgLy8gIFRvIGdldCBhcm91bmQgdGhpcywgdXNlIHRlbXBvcmFyeSB2YXJpYWJsZXMuXHJcbiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL251eHQvZnJhbWV3b3JrL2lzc3Vlcy8xNDYxI2lzc3VlY29tbWVudC05NTQ2MDYyNDNcclxuICAgIGxldCBmb3JtYXQgPSBmb3JtYXRTY29wZTtcclxuICAgIC8vIGlmIHlvdSB1c2UgZGVmYXVsdCBtZXNzYWdlLCBzZXQgaXQgYXMgbWVzc2FnZSBmb3JtYXQhXHJcbiAgICBsZXQgY2FjaGVCYXNlS2V5ID0ga2V5O1xyXG4gICAgaWYgKCFyZXNvbHZlZE1lc3NhZ2UgJiZcclxuICAgICAgICAhKGlzU3RyaW5nKGZvcm1hdCkgfHwgaXNNZXNzYWdlRnVuY3Rpb24oZm9ybWF0KSkpIHtcclxuICAgICAgICBpZiAoZW5hYmxlRGVmYXVsdE1zZykge1xyXG4gICAgICAgICAgICBmb3JtYXQgPSBkZWZhdWx0TXNnT3JLZXk7XHJcbiAgICAgICAgICAgIGNhY2hlQmFzZUtleSA9IGZvcm1hdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBjaGVja2luZyBtZXNzYWdlIGZvcm1hdCBhbmQgdGFyZ2V0IGxvY2FsZVxyXG4gICAgaWYgKCFyZXNvbHZlZE1lc3NhZ2UgJiZcclxuICAgICAgICAoIShpc1N0cmluZyhmb3JtYXQpIHx8IGlzTWVzc2FnZUZ1bmN0aW9uKGZvcm1hdCkpIHx8XHJcbiAgICAgICAgICAgICFpc1N0cmluZyh0YXJnZXRMb2NhbGUpKSkge1xyXG4gICAgICAgIHJldHVybiB1bnJlc29sdmluZyA/IE5PVF9SRU9TTFZFRCA6IGtleTtcclxuICAgIH1cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNTdHJpbmcoZm9ybWF0KSAmJiBjb250ZXh0Lm1lc3NhZ2VDb21waWxlciA9PSBudWxsKSB7XHJcbiAgICAgICAgd2FybihgVGhlIG1lc3NhZ2UgZm9ybWF0IGNvbXBpbGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBidWlsZC4gYCArXHJcbiAgICAgICAgICAgIGBCZWNhdXNlIG1lc3NhZ2UgY29tcGlsZXIgaXNuJ3QgaW5jbHVkZWQuIGAgK1xyXG4gICAgICAgICAgICBgWW91IG5lZWQgdG8gcHJlLWNvbXBpbGF0aW9uIGFsbCBtZXNzYWdlIGZvcm1hdC4gYCArXHJcbiAgICAgICAgICAgIGBTbyB0cmFuc2xhdGUgZnVuY3Rpb24gcmV0dXJuICcke2tleX0nLmApO1xyXG4gICAgICAgIHJldHVybiBrZXk7XHJcbiAgICB9XHJcbiAgICAvLyBzZXR1cCBjb21waWxlIGVycm9yIGRldGVjdGluZ1xyXG4gICAgbGV0IG9jY3VycmVkID0gZmFsc2U7XHJcbiAgICBjb25zdCBlcnJvckRldGVjdG9yID0gKCkgPT4ge1xyXG4gICAgICAgIG9jY3VycmVkID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICAvLyBjb21waWxlIG1lc3NhZ2UgZm9ybWF0XHJcbiAgICBjb25zdCBtc2cgPSAhaXNNZXNzYWdlRnVuY3Rpb24oZm9ybWF0KVxyXG4gICAgICAgID8gY29tcGlsZU1lc3NhZ2VGb3JtYXQoY29udGV4dCwga2V5LCB0YXJnZXRMb2NhbGUsIGZvcm1hdCwgY2FjaGVCYXNlS2V5LCBlcnJvckRldGVjdG9yKVxyXG4gICAgICAgIDogZm9ybWF0O1xyXG4gICAgLy8gaWYgb2NjdXJyZWQgY29tcGlsZSBlcnJvciwgcmV0dXJuIHRoZSBtZXNzYWdlIGZvcm1hdFxyXG4gICAgaWYgKG9jY3VycmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdDtcclxuICAgIH1cclxuICAgIC8vIGV2YWx1YXRlIG1lc3NhZ2Ugd2l0aCBjb250ZXh0XHJcbiAgICBjb25zdCBjdHhPcHRpb25zID0gZ2V0TWVzc2FnZUNvbnRleHRPcHRpb25zKGNvbnRleHQsIHRhcmdldExvY2FsZSwgbWVzc2FnZSwgb3B0aW9ucyk7XHJcbiAgICBjb25zdCBtc2dDb250ZXh0ID0gY3JlYXRlTWVzc2FnZUNvbnRleHQoY3R4T3B0aW9ucyk7XHJcbiAgICBjb25zdCBtZXNzYWdlZCA9IGV2YWx1YXRlTWVzc2FnZShjb250ZXh0LCBtc2csIG1zZ0NvbnRleHQpO1xyXG4gICAgLy8gaWYgdXNlIHBvc3QgdHJhbnNsYXRpb24gb3B0aW9uLCBwcm9jZWVkIGl0IHdpdGggaGFuZGxlclxyXG4gICAgY29uc3QgcmV0ID0gcG9zdFRyYW5zbGF0aW9uXHJcbiAgICAgICAgPyBwb3N0VHJhbnNsYXRpb24obWVzc2FnZWQsIGtleSlcclxuICAgICAgICA6IG1lc3NhZ2VkO1xyXG4gICAgLy8gTk9URTogZXhwZXJpbWVudGFsICEhXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fSU5UTElGWV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgICAgICBjb25zdCBwYXlsb2FkcyA9IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICBrZXk6IGlzU3RyaW5nKGtleSlcclxuICAgICAgICAgICAgICAgID8ga2V5XHJcbiAgICAgICAgICAgICAgICA6IGlzTWVzc2FnZUZ1bmN0aW9uKGZvcm1hdClcclxuICAgICAgICAgICAgICAgICAgICA/IGZvcm1hdC5rZXlcclxuICAgICAgICAgICAgICAgICAgICA6ICcnLFxyXG4gICAgICAgICAgICBsb2NhbGU6IHRhcmdldExvY2FsZSB8fCAoaXNNZXNzYWdlRnVuY3Rpb24oZm9ybWF0KVxyXG4gICAgICAgICAgICAgICAgPyBmb3JtYXQubG9jYWxlXHJcbiAgICAgICAgICAgICAgICA6ICcnKSxcclxuICAgICAgICAgICAgZm9ybWF0OiBpc1N0cmluZyhmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICA/IGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgOiBpc01lc3NhZ2VGdW5jdGlvbihmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBmb3JtYXQuc291cmNlXHJcbiAgICAgICAgICAgICAgICAgICAgOiAnJyxcclxuICAgICAgICAgICAgbWVzc2FnZTogcmV0XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwYXlsb2Fkcy5tZXRhID0gYXNzaWduKHt9LCBjb250ZXh0Ll9fbWV0YSwgZ2V0QWRkaXRpb25hbE1ldGEoKSB8fCB7fSk7XHJcbiAgICAgICAgdHJhbnNsYXRlRGV2VG9vbHMocGF5bG9hZHMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG5mdW5jdGlvbiBlc2NhcGVQYXJhbXMob3B0aW9ucykge1xyXG4gICAgaWYgKGlzQXJyYXkob3B0aW9ucy5saXN0KSkge1xyXG4gICAgICAgIG9wdGlvbnMubGlzdCA9IG9wdGlvbnMubGlzdC5tYXAoaXRlbSA9PiBpc1N0cmluZyhpdGVtKSA/IGVzY2FwZUh0bWwoaXRlbSkgOiBpdGVtKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMubmFtZWQpKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMob3B0aW9ucy5uYW1lZCkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcob3B0aW9ucy5uYW1lZFtrZXldKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5uYW1lZFtrZXldID0gZXNjYXBlSHRtbChvcHRpb25zLm5hbWVkW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVzb2x2ZU1lc3NhZ2VGb3JtYXQoY29udGV4dCwga2V5LCBsb2NhbGUsIGZhbGxiYWNrTG9jYWxlLCBmYWxsYmFja1dhcm4sIG1pc3NpbmdXYXJuKSB7XHJcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBvbldhcm4sIG1lc3NhZ2VSZXNvbHZlcjogcmVzb2x2ZVZhbHVlLCBsb2NhbGVGYWxsYmFja2VyIH0gPSBjb250ZXh0O1xyXG4gICAgY29uc3QgbG9jYWxlcyA9IGxvY2FsZUZhbGxiYWNrZXIoY29udGV4dCwgZmFsbGJhY2tMb2NhbGUsIGxvY2FsZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgbGV0IG1lc3NhZ2UgPSB7fTtcclxuICAgIGxldCB0YXJnZXRMb2NhbGU7XHJcbiAgICBsZXQgZm9ybWF0ID0gbnVsbDtcclxuICAgIGxldCBmcm9tID0gbG9jYWxlO1xyXG4gICAgbGV0IHRvID0gbnVsbDtcclxuICAgIGNvbnN0IHR5cGUgPSAndHJhbnNsYXRlJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRhcmdldExvY2FsZSA9IHRvID0gbG9jYWxlc1tpXTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIGxvY2FsZSAhPT0gdGFyZ2V0TG9jYWxlICYmXHJcbiAgICAgICAgICAgIGlzVHJhbnNsYXRlRmFsbGJhY2tXYXJuKGZhbGxiYWNrV2Fybiwga2V5KSkge1xyXG4gICAgICAgICAgICBvbldhcm4oZ2V0V2Fybk1lc3NhZ2UoQ29yZVdhcm5Db2Rlcy5GQUxMQkFDS19UT19UUkFOU0xBVEUsIHtcclxuICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0TG9jYWxlXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZm9yIHZ1ZS1kZXZ0b29scyB0aW1lbGluZSBldmVudFxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbG9jYWxlICE9PSB0YXJnZXRMb2NhbGUpIHtcclxuICAgICAgICAgICAgY29uc3QgZW1pdHRlciA9IGNvbnRleHQuX192X2VtaXR0ZXI7XHJcbiAgICAgICAgICAgIGlmIChlbWl0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoXCJmYWxsYmFja1wiIC8qIEZBTEJBQ0sgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGAke3R5cGV9OiR7a2V5fWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2UgPVxyXG4gICAgICAgICAgICBtZXNzYWdlc1t0YXJnZXRMb2NhbGVdIHx8IHt9O1xyXG4gICAgICAgIC8vIGZvciB2dWUtZGV2dG9vbHMgdGltZWxpbmUgZXZlbnRcclxuICAgICAgICBsZXQgc3RhcnQgPSBudWxsO1xyXG4gICAgICAgIGxldCBzdGFydFRhZztcclxuICAgICAgICBsZXQgZW5kVGFnO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5Ccm93c2VyKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgICAgICBzdGFydFRhZyA9ICdpbnRsaWZ5LW1lc3NhZ2UtcmVzb2x2ZS1zdGFydCc7XHJcbiAgICAgICAgICAgIGVuZFRhZyA9ICdpbnRsaWZ5LW1lc3NhZ2UtcmVzb2x2ZS1lbmQnO1xyXG4gICAgICAgICAgICBtYXJrICYmIG1hcmsoc3RhcnRUYWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKGZvcm1hdCA9IHJlc29sdmVWYWx1ZShtZXNzYWdlLCBrZXkpKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBpZiBudWxsLCByZXNvbHZlIHdpdGggb2JqZWN0IGtleSBwYXRoXHJcbiAgICAgICAgICAgIGZvcm1hdCA9IG1lc3NhZ2Vba2V5XTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZvciB2dWUtZGV2dG9vbHMgdGltZWxpbmUgZXZlbnRcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGluQnJvd3Nlcikge1xyXG4gICAgICAgICAgICBjb25zdCBlbmQgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtaXR0ZXIgPSBjb250ZXh0Ll9fdl9lbWl0dGVyO1xyXG4gICAgICAgICAgICBpZiAoZW1pdHRlciAmJiBzdGFydCAmJiBmb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdChcIm1lc3NhZ2UtcmVzb2x2ZVwiIC8qIE1FU1NBR0VfUkVTT0xWRSAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibWVzc2FnZS1yZXNvbHZlXCIgLyogTUVTU0FHRV9SRVNPTFZFICovLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBmb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogZW5kIC0gc3RhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogYCR7dHlwZX06JHtrZXl9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YXJ0VGFnICYmIGVuZFRhZyAmJiBtYXJrICYmIG1lYXN1cmUpIHtcclxuICAgICAgICAgICAgICAgIG1hcmsoZW5kVGFnKTtcclxuICAgICAgICAgICAgICAgIG1lYXN1cmUoJ2ludGxpZnkgbWVzc2FnZSByZXNvbHZlJywgc3RhcnRUYWcsIGVuZFRhZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKGZvcm1hdCkgfHwgaXNGdW5jdGlvbihmb3JtYXQpKVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjb25zdCBtaXNzaW5nUmV0ID0gaGFuZGxlTWlzc2luZyhjb250ZXh0LCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBrZXksIHRhcmdldExvY2FsZSwgbWlzc2luZ1dhcm4sIHR5cGUpO1xyXG4gICAgICAgIGlmIChtaXNzaW5nUmV0ICE9PSBrZXkpIHtcclxuICAgICAgICAgICAgZm9ybWF0ID0gbWlzc2luZ1JldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnJvbSA9IHRvO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtmb3JtYXQsIHRhcmdldExvY2FsZSwgbWVzc2FnZV07XHJcbn1cclxuZnVuY3Rpb24gY29tcGlsZU1lc3NhZ2VGb3JtYXQoY29udGV4dCwga2V5LCB0YXJnZXRMb2NhbGUsIGZvcm1hdCwgY2FjaGVCYXNlS2V5LCBlcnJvckRldGVjdG9yKSB7XHJcbiAgICBjb25zdCB7IG1lc3NhZ2VDb21waWxlciwgd2Fybkh0bWxNZXNzYWdlIH0gPSBjb250ZXh0O1xyXG4gICAgaWYgKGlzTWVzc2FnZUZ1bmN0aW9uKGZvcm1hdCkpIHtcclxuICAgICAgICBjb25zdCBtc2cgPSBmb3JtYXQ7XHJcbiAgICAgICAgbXNnLmxvY2FsZSA9IG1zZy5sb2NhbGUgfHwgdGFyZ2V0TG9jYWxlO1xyXG4gICAgICAgIG1zZy5rZXkgPSBtc2cua2V5IHx8IGtleTtcclxuICAgICAgICByZXR1cm4gbXNnO1xyXG4gICAgfVxyXG4gICAgaWYgKG1lc3NhZ2VDb21waWxlciA9PSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgbXNnID0gKCgpID0+IGZvcm1hdCk7XHJcbiAgICAgICAgbXNnLmxvY2FsZSA9IHRhcmdldExvY2FsZTtcclxuICAgICAgICBtc2cua2V5ID0ga2V5O1xyXG4gICAgICAgIHJldHVybiBtc2c7XHJcbiAgICB9XHJcbiAgICAvLyBmb3IgdnVlLWRldnRvb2xzIHRpbWVsaW5lIGV2ZW50XHJcbiAgICBsZXQgc3RhcnQgPSBudWxsO1xyXG4gICAgbGV0IHN0YXJ0VGFnO1xyXG4gICAgbGV0IGVuZFRhZztcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5Ccm93c2VyKSB7XHJcbiAgICAgICAgc3RhcnQgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgc3RhcnRUYWcgPSAnaW50bGlmeS1tZXNzYWdlLWNvbXBpbGF0aW9uLXN0YXJ0JztcclxuICAgICAgICBlbmRUYWcgPSAnaW50bGlmeS1tZXNzYWdlLWNvbXBpbGF0aW9uLWVuZCc7XHJcbiAgICAgICAgbWFyayAmJiBtYXJrKHN0YXJ0VGFnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG1zZyA9IG1lc3NhZ2VDb21waWxlcihmb3JtYXQsIGdldENvbXBpbGVPcHRpb25zKGNvbnRleHQsIHRhcmdldExvY2FsZSwgY2FjaGVCYXNlS2V5LCBmb3JtYXQsIHdhcm5IdG1sTWVzc2FnZSwgZXJyb3JEZXRlY3RvcikpO1xyXG4gICAgLy8gZm9yIHZ1ZS1kZXZ0b29scyB0aW1lbGluZSBldmVudFxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpbkJyb3dzZXIpIHtcclxuICAgICAgICBjb25zdCBlbmQgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgY29uc3QgZW1pdHRlciA9IGNvbnRleHQuX192X2VtaXR0ZXI7XHJcbiAgICAgICAgaWYgKGVtaXR0ZXIgJiYgc3RhcnQpIHtcclxuICAgICAgICAgICAgZW1pdHRlci5lbWl0KFwibWVzc2FnZS1jb21waWxhdGlvblwiIC8qIE1FU1NBR0VfQ09NUElMQVRJT04gKi8sIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwibWVzc2FnZS1jb21waWxhdGlvblwiIC8qIE1FU1NBR0VfQ09NUElMQVRJT04gKi8sXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBmb3JtYXQsXHJcbiAgICAgICAgICAgICAgICB0aW1lOiBlbmQgLSBzdGFydCxcclxuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGAkeyd0cmFuc2xhdGUnfToke2tleX1gXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhcnRUYWcgJiYgZW5kVGFnICYmIG1hcmsgJiYgbWVhc3VyZSkge1xyXG4gICAgICAgICAgICBtYXJrKGVuZFRhZyk7XHJcbiAgICAgICAgICAgIG1lYXN1cmUoJ2ludGxpZnkgbWVzc2FnZSBjb21waWxhdGlvbicsIHN0YXJ0VGFnLCBlbmRUYWcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1zZy5sb2NhbGUgPSB0YXJnZXRMb2NhbGU7XHJcbiAgICBtc2cua2V5ID0ga2V5O1xyXG4gICAgbXNnLnNvdXJjZSA9IGZvcm1hdDtcclxuICAgIHJldHVybiBtc2c7XHJcbn1cclxuZnVuY3Rpb24gZXZhbHVhdGVNZXNzYWdlKGNvbnRleHQsIG1zZywgbXNnQ3R4KSB7XHJcbiAgICAvLyBmb3IgdnVlLWRldnRvb2xzIHRpbWVsaW5lIGV2ZW50XHJcbiAgICBsZXQgc3RhcnQgPSBudWxsO1xyXG4gICAgbGV0IHN0YXJ0VGFnO1xyXG4gICAgbGV0IGVuZFRhZztcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5Ccm93c2VyKSB7XHJcbiAgICAgICAgc3RhcnQgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgc3RhcnRUYWcgPSAnaW50bGlmeS1tZXNzYWdlLWV2YWx1YXRpb24tc3RhcnQnO1xyXG4gICAgICAgIGVuZFRhZyA9ICdpbnRsaWZ5LW1lc3NhZ2UtZXZhbHVhdGlvbi1lbmQnO1xyXG4gICAgICAgIG1hcmsgJiYgbWFyayhzdGFydFRhZyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBtZXNzYWdlZCA9IG1zZyhtc2dDdHgpO1xyXG4gICAgLy8gZm9yIHZ1ZS1kZXZ0b29scyB0aW1lbGluZSBldmVudFxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpbkJyb3dzZXIpIHtcclxuICAgICAgICBjb25zdCBlbmQgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgY29uc3QgZW1pdHRlciA9IGNvbnRleHQuX192X2VtaXR0ZXI7XHJcbiAgICAgICAgaWYgKGVtaXR0ZXIgJiYgc3RhcnQpIHtcclxuICAgICAgICAgICAgZW1pdHRlci5lbWl0KFwibWVzc2FnZS1ldmFsdWF0aW9uXCIgLyogTUVTU0FHRV9FVkFMVUFUSU9OICovLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm1lc3NhZ2UtZXZhbHVhdGlvblwiIC8qIE1FU1NBR0VfRVZBTFVBVElPTiAqLyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBtZXNzYWdlZCxcclxuICAgICAgICAgICAgICAgIHRpbWU6IGVuZCAtIHN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogYCR7J3RyYW5zbGF0ZSd9OiR7bXNnLmtleX1gXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhcnRUYWcgJiYgZW5kVGFnICYmIG1hcmsgJiYgbWVhc3VyZSkge1xyXG4gICAgICAgICAgICBtYXJrKGVuZFRhZyk7XHJcbiAgICAgICAgICAgIG1lYXN1cmUoJ2ludGxpZnkgbWVzc2FnZSBldmFsdWF0aW9uJywgc3RhcnRUYWcsIGVuZFRhZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1lc3NhZ2VkO1xyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZnVuY3Rpb24gcGFyc2VUcmFuc2xhdGVBcmdzKC4uLmFyZ3MpIHtcclxuICAgIGNvbnN0IFthcmcxLCBhcmcyLCBhcmczXSA9IGFyZ3M7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge307XHJcbiAgICBpZiAoIWlzU3RyaW5nKGFyZzEpICYmICFpc051bWJlcihhcmcxKSAmJiAhaXNNZXNzYWdlRnVuY3Rpb24oYXJnMSkpIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVDb3JlRXJyb3IoQ29yZUVycm9yQ29kZXMuSU5WQUxJRF9BUkdVTUVOVCk7XHJcbiAgICB9XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IGtleSA9IGlzTnVtYmVyKGFyZzEpXHJcbiAgICAgICAgPyBTdHJpbmcoYXJnMSlcclxuICAgICAgICA6IGlzTWVzc2FnZUZ1bmN0aW9uKGFyZzEpXHJcbiAgICAgICAgICAgID8gYXJnMVxyXG4gICAgICAgICAgICA6IGFyZzE7XHJcbiAgICBpZiAoaXNOdW1iZXIoYXJnMikpIHtcclxuICAgICAgICBvcHRpb25zLnBsdXJhbCA9IGFyZzI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1N0cmluZyhhcmcyKSkge1xyXG4gICAgICAgIG9wdGlvbnMuZGVmYXVsdCA9IGFyZzI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1BsYWluT2JqZWN0KGFyZzIpICYmICFpc0VtcHR5T2JqZWN0KGFyZzIpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5uYW1lZCA9IGFyZzI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0FycmF5KGFyZzIpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5saXN0ID0gYXJnMjtcclxuICAgIH1cclxuICAgIGlmIChpc051bWJlcihhcmczKSkge1xyXG4gICAgICAgIG9wdGlvbnMucGx1cmFsID0gYXJnMztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzU3RyaW5nKGFyZzMpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5kZWZhdWx0ID0gYXJnMztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzUGxhaW5PYmplY3QoYXJnMykpIHtcclxuICAgICAgICBhc3NpZ24ob3B0aW9ucywgYXJnMyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW2tleSwgb3B0aW9uc107XHJcbn1cclxuZnVuY3Rpb24gZ2V0Q29tcGlsZU9wdGlvbnMoY29udGV4dCwgbG9jYWxlLCBrZXksIHNvdXJjZSwgd2Fybkh0bWxNZXNzYWdlLCBlcnJvckRldGVjdG9yKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHdhcm5IdG1sTWVzc2FnZSxcclxuICAgICAgICBvbkVycm9yOiAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGVycm9yRGV0ZWN0b3IgJiYgZXJyb3JEZXRlY3RvcihlcnIpO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYE1lc3NhZ2UgY29tcGlsYXRpb24gZXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvZGVGcmFtZSA9IGVyci5sb2NhdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlQ29kZUZyYW1lKHNvdXJjZSwgZXJyLmxvY2F0aW9uLnN0YXJ0Lm9mZnNldCwgZXJyLmxvY2F0aW9uLmVuZC5vZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW1pdHRlciA9IGNvbnRleHQuX192X2VtaXR0ZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdChcImNvbXBpbGUtZXJyb3JcIiAvKiBDT01QSUxFX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHNvdXJjZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVyci5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogZXJyLmxvY2F0aW9uICYmIGVyci5sb2NhdGlvbi5zdGFydC5vZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZXJyLmxvY2F0aW9uICYmIGVyci5sb2NhdGlvbi5lbmQub2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBgJHsndHJhbnNsYXRlJ306JHtrZXl9YFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihjb2RlRnJhbWUgPyBgJHttZXNzYWdlfVxcbiR7Y29kZUZyYW1lfWAgOiBtZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25DYWNoZUtleTogKHNvdXJjZSkgPT4gZ2VuZXJhdGVGb3JtYXRDYWNoZUtleShsb2NhbGUsIGtleSwgc291cmNlKVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBnZXRNZXNzYWdlQ29udGV4dE9wdGlvbnMoY29udGV4dCwgbG9jYWxlLCBtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCB7IG1vZGlmaWVycywgcGx1cmFsUnVsZXMsIG1lc3NhZ2VSZXNvbHZlcjogcmVzb2x2ZVZhbHVlLCBmYWxsYmFja0xvY2FsZSwgZmFsbGJhY2tXYXJuLCBtaXNzaW5nV2FybiwgZmFsbGJhY2tDb250ZXh0IH0gPSBjb250ZXh0O1xyXG4gICAgY29uc3QgcmVzb2x2ZU1lc3NhZ2UgPSAoa2V5KSA9PiB7XHJcbiAgICAgICAgbGV0IHZhbCA9IHJlc29sdmVWYWx1ZShtZXNzYWdlLCBrZXkpO1xyXG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIHJvb3QgY29udGV4dFxyXG4gICAgICAgIGlmICh2YWwgPT0gbnVsbCAmJiBmYWxsYmFja0NvbnRleHQpIHtcclxuICAgICAgICAgICAgY29uc3QgWywgLCBtZXNzYWdlXSA9IHJlc29sdmVNZXNzYWdlRm9ybWF0KGZhbGxiYWNrQ29udGV4dCwga2V5LCBsb2NhbGUsIGZhbGxiYWNrTG9jYWxlLCBmYWxsYmFja1dhcm4sIG1pc3NpbmdXYXJuKTtcclxuICAgICAgICAgICAgdmFsID0gcmVzb2x2ZVZhbHVlKG1lc3NhZ2UsIGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1N0cmluZyh2YWwpKSB7XHJcbiAgICAgICAgICAgIGxldCBvY2N1cnJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvckRldGVjdG9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgb2NjdXJyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtc2cgPSBjb21waWxlTWVzc2FnZUZvcm1hdChjb250ZXh0LCBrZXksIGxvY2FsZSwgdmFsLCBrZXksIGVycm9yRGV0ZWN0b3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gIW9jY3VycmVkXHJcbiAgICAgICAgICAgICAgICA/IG1zZ1xyXG4gICAgICAgICAgICAgICAgOiBOT09QX01FU1NBR0VfRlVOQ1RJT047XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlzTWVzc2FnZUZ1bmN0aW9uKHZhbCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHNob3VsZCBiZSBpbXBsZW1lbnRlZCB3YXJuaW5nIG1lc3NhZ2VcclxuICAgICAgICAgICAgcmV0dXJuIE5PT1BfTUVTU0FHRV9GVU5DVElPTjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgY3R4T3B0aW9ucyA9IHtcclxuICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgbW9kaWZpZXJzLFxyXG4gICAgICAgIHBsdXJhbFJ1bGVzLFxyXG4gICAgICAgIG1lc3NhZ2VzOiByZXNvbHZlTWVzc2FnZVxyXG4gICAgfTtcclxuICAgIGlmIChjb250ZXh0LnByb2Nlc3Nvcikge1xyXG4gICAgICAgIGN0eE9wdGlvbnMucHJvY2Vzc29yID0gY29udGV4dC5wcm9jZXNzb3I7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5saXN0KSB7XHJcbiAgICAgICAgY3R4T3B0aW9ucy5saXN0ID0gb3B0aW9ucy5saXN0O1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMubmFtZWQpIHtcclxuICAgICAgICBjdHhPcHRpb25zLm5hbWVkID0gb3B0aW9ucy5uYW1lZDtcclxuICAgIH1cclxuICAgIGlmIChpc051bWJlcihvcHRpb25zLnBsdXJhbCkpIHtcclxuICAgICAgICBjdHhPcHRpb25zLnBsdXJhbEluZGV4ID0gb3B0aW9ucy5wbHVyYWw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3R4T3B0aW9ucztcclxufVxuXG5jb25zdCBpbnRsRGVmaW5lZCA9IHR5cGVvZiBJbnRsICE9PSAndW5kZWZpbmVkJztcclxuY29uc3QgQXZhaWxhYmlsaXRpZXMgPSB7XHJcbiAgICBkYXRlVGltZUZvcm1hdDogaW50bERlZmluZWQgJiYgdHlwZW9mIEludGwuRGF0ZVRpbWVGb3JtYXQgIT09ICd1bmRlZmluZWQnLFxyXG4gICAgbnVtYmVyRm9ybWF0OiBpbnRsRGVmaW5lZCAmJiB0eXBlb2YgSW50bC5OdW1iZXJGb3JtYXQgIT09ICd1bmRlZmluZWQnXHJcbn07XG5cbi8vIGltcGxlbWVudGF0aW9uIG9mIGBkYXRldGltZWAgZnVuY3Rpb25cclxuZnVuY3Rpb24gZGF0ZXRpbWUoY29udGV4dCwgLi4uYXJncykge1xyXG4gICAgY29uc3QgeyBkYXRldGltZUZvcm1hdHMsIHVucmVzb2x2aW5nLCBmYWxsYmFja0xvY2FsZSwgb25XYXJuLCBsb2NhbGVGYWxsYmFja2VyIH0gPSBjb250ZXh0O1xyXG4gICAgY29uc3QgeyBfX2RhdGV0aW1lRm9ybWF0dGVycyB9ID0gY29udGV4dDtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIUF2YWlsYWJpbGl0aWVzLmRhdGVUaW1lRm9ybWF0KSB7XHJcbiAgICAgICAgb25XYXJuKGdldFdhcm5NZXNzYWdlKENvcmVXYXJuQ29kZXMuQ0FOTk9UX0ZPUk1BVF9EQVRFKSk7XHJcbiAgICAgICAgcmV0dXJuIE1JU1NJTkdfUkVTT0xWRV9WQUxVRTtcclxuICAgIH1cclxuICAgIGNvbnN0IFtrZXksIHZhbHVlLCBvcHRpb25zLCBvdmVycmlkZXNdID0gcGFyc2VEYXRlVGltZUFyZ3MoLi4uYXJncyk7XHJcbiAgICBjb25zdCBtaXNzaW5nV2FybiA9IGlzQm9vbGVhbihvcHRpb25zLm1pc3NpbmdXYXJuKVxyXG4gICAgICAgID8gb3B0aW9ucy5taXNzaW5nV2FyblxyXG4gICAgICAgIDogY29udGV4dC5taXNzaW5nV2FybjtcclxuICAgIGNvbnN0IGZhbGxiYWNrV2FybiA9IGlzQm9vbGVhbihvcHRpb25zLmZhbGxiYWNrV2FybilcclxuICAgICAgICA/IG9wdGlvbnMuZmFsbGJhY2tXYXJuXHJcbiAgICAgICAgOiBjb250ZXh0LmZhbGxiYWNrV2FybjtcclxuICAgIGNvbnN0IHBhcnQgPSAhIW9wdGlvbnMucGFydDtcclxuICAgIGNvbnN0IGxvY2FsZSA9IGlzU3RyaW5nKG9wdGlvbnMubG9jYWxlKSA/IG9wdGlvbnMubG9jYWxlIDogY29udGV4dC5sb2NhbGU7XHJcbiAgICBjb25zdCBsb2NhbGVzID0gbG9jYWxlRmFsbGJhY2tlcihjb250ZXh0LCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIGZhbGxiYWNrTG9jYWxlLCBsb2NhbGUpO1xyXG4gICAgaWYgKCFpc1N0cmluZyhrZXkpIHx8IGtleSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBvdmVycmlkZXMpLmZvcm1hdCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyByZXNvbHZlIGZvcm1hdFxyXG4gICAgbGV0IGRhdGV0aW1lRm9ybWF0ID0ge307XHJcbiAgICBsZXQgdGFyZ2V0TG9jYWxlO1xyXG4gICAgbGV0IGZvcm1hdCA9IG51bGw7XHJcbiAgICBsZXQgZnJvbSA9IGxvY2FsZTtcclxuICAgIGxldCB0byA9IG51bGw7XHJcbiAgICBjb25zdCB0eXBlID0gJ2RhdGV0aW1lIGZvcm1hdCc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0YXJnZXRMb2NhbGUgPSB0byA9IGxvY2FsZXNbaV07XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICBsb2NhbGUgIT09IHRhcmdldExvY2FsZSAmJlxyXG4gICAgICAgICAgICBpc1RyYW5zbGF0ZUZhbGxiYWNrV2FybihmYWxsYmFja1dhcm4sIGtleSkpIHtcclxuICAgICAgICAgICAgb25XYXJuKGdldFdhcm5NZXNzYWdlKENvcmVXYXJuQ29kZXMuRkFMTEJBQ0tfVE9fREFURV9GT1JNQVQsIHtcclxuICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0TG9jYWxlXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZm9yIHZ1ZS1kZXZ0b29scyB0aW1lbGluZSBldmVudFxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbG9jYWxlICE9PSB0YXJnZXRMb2NhbGUpIHtcclxuICAgICAgICAgICAgY29uc3QgZW1pdHRlciA9IGNvbnRleHQuX192X2VtaXR0ZXI7XHJcbiAgICAgICAgICAgIGlmIChlbWl0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoXCJmYWxsYmFja1wiIC8qIEZBTEJBQ0sgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGAke3R5cGV9OiR7a2V5fWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGV0aW1lRm9ybWF0ID1cclxuICAgICAgICAgICAgZGF0ZXRpbWVGb3JtYXRzW3RhcmdldExvY2FsZV0gfHwge307XHJcbiAgICAgICAgZm9ybWF0ID0gZGF0ZXRpbWVGb3JtYXRba2V5XTtcclxuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChmb3JtYXQpKVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBoYW5kbGVNaXNzaW5nKGNvbnRleHQsIGtleSwgdGFyZ2V0TG9jYWxlLCBtaXNzaW5nV2FybiwgdHlwZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIGZyb20gPSB0bztcclxuICAgIH1cclxuICAgIC8vIGNoZWNraW5nIGZvcm1hdCBhbmQgdGFyZ2V0IGxvY2FsZVxyXG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGZvcm1hdCkgfHwgIWlzU3RyaW5nKHRhcmdldExvY2FsZSkpIHtcclxuICAgICAgICByZXR1cm4gdW5yZXNvbHZpbmcgPyBOT1RfUkVPU0xWRUQgOiBrZXk7XHJcbiAgICB9XHJcbiAgICBsZXQgaWQgPSBgJHt0YXJnZXRMb2NhbGV9X18ke2tleX1gO1xyXG4gICAgaWYgKCFpc0VtcHR5T2JqZWN0KG92ZXJyaWRlcykpIHtcclxuICAgICAgICBpZCA9IGAke2lkfV9fJHtKU09OLnN0cmluZ2lmeShvdmVycmlkZXMpfWA7XHJcbiAgICB9XHJcbiAgICBsZXQgZm9ybWF0dGVyID0gX19kYXRldGltZUZvcm1hdHRlcnMuZ2V0KGlkKTtcclxuICAgIGlmICghZm9ybWF0dGVyKSB7XHJcbiAgICAgICAgZm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodGFyZ2V0TG9jYWxlLCBhc3NpZ24oe30sIGZvcm1hdCwgb3ZlcnJpZGVzKSk7XHJcbiAgICAgICAgX19kYXRldGltZUZvcm1hdHRlcnMuc2V0KGlkLCBmb3JtYXR0ZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICFwYXJ0ID8gZm9ybWF0dGVyLmZvcm1hdCh2YWx1ZSkgOiBmb3JtYXR0ZXIuZm9ybWF0VG9QYXJ0cyh2YWx1ZSk7XHJcbn1cclxuLyoqIEBpbnRlcm5hbCAqL1xyXG5jb25zdCBEQVRFVElNRV9GT1JNQVRfT1BUSU9OU19LRVlTID0gW1xyXG4gICAgJ2xvY2FsZU1hdGNoZXInLFxyXG4gICAgJ3dlZWtkYXknLFxyXG4gICAgJ2VyYScsXHJcbiAgICAneWVhcicsXHJcbiAgICAnbW9udGgnLFxyXG4gICAgJ2RheScsXHJcbiAgICAnaG91cicsXHJcbiAgICAnbWludXRlJyxcclxuICAgICdzZWNvbmQnLFxyXG4gICAgJ3RpbWVab25lTmFtZScsXHJcbiAgICAnZm9ybWF0TWF0Y2hlcicsXHJcbiAgICAnaG91cjEyJyxcclxuICAgICd0aW1lWm9uZScsXHJcbiAgICAnZGF0ZVN0eWxlJyxcclxuICAgICd0aW1lU3R5bGUnLFxyXG4gICAgJ2NhbGVuZGFyJyxcclxuICAgICdkYXlQZXJpb2QnLFxyXG4gICAgJ251bWJlcmluZ1N5c3RlbScsXHJcbiAgICAnaG91ckN5Y2xlJyxcclxuICAgICdmcmFjdGlvbmFsU2Vjb25kRGlnaXRzJ1xyXG5dO1xyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIHBhcnNlRGF0ZVRpbWVBcmdzKC4uLmFyZ3MpIHtcclxuICAgIGNvbnN0IFthcmcxLCBhcmcyLCBhcmczLCBhcmc0XSA9IGFyZ3M7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge307XHJcbiAgICBsZXQgb3ZlcnJpZGVzID0ge307XHJcbiAgICBsZXQgdmFsdWU7XHJcbiAgICBpZiAoaXNTdHJpbmcoYXJnMSkpIHtcclxuICAgICAgICAvLyBPbmx5IGFsbG93IElTTyBzdHJpbmdzIC0gb3RoZXIgZGF0ZSBmb3JtYXRzIGFyZSBvZnRlbiBzdXBwb3J0ZWQsXHJcbiAgICAgICAgLy8gYnV0IG1heSBjYXVzZSBkaWZmZXJlbnQgcmVzdWx0cyBpbiBkaWZmZXJlbnQgYnJvd3NlcnMuXHJcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGFyZzEubWF0Y2goLyhcXGR7NH0tXFxkezJ9LVxcZHsyfSkoVHxcXHMpPyguKikvKTtcclxuICAgICAgICBpZiAoIW1hdGNoZXMpIHtcclxuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ29yZUVycm9yKENvcmVFcnJvckNvZGVzLklOVkFMSURfSVNPX0RBVEVfQVJHVU1FTlQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTb21lIGJyb3dzZXJzIGNhbiBub3QgcGFyc2UgdGhlIGlzbyBkYXRldGltZSBzZXBhcmF0ZWQgYnkgc3BhY2UsXHJcbiAgICAgICAgLy8gdGhpcyBpcyBhIGNvbXByb21pc2Ugc29sdXRpb24gYnkgcmVwbGFjZSB0aGUgJ1QnLycgJyB3aXRoICdUJ1xyXG4gICAgICAgIGNvbnN0IGRhdGVUaW1lID0gbWF0Y2hlc1szXVxyXG4gICAgICAgICAgICA/IG1hdGNoZXNbM10udHJpbSgpLnN0YXJ0c1dpdGgoJ1QnKVxyXG4gICAgICAgICAgICAgICAgPyBgJHttYXRjaGVzWzFdLnRyaW0oKX0ke21hdGNoZXNbM10udHJpbSgpfWBcclxuICAgICAgICAgICAgICAgIDogYCR7bWF0Y2hlc1sxXS50cmltKCl9VCR7bWF0Y2hlc1szXS50cmltKCl9YFxyXG4gICAgICAgICAgICA6IG1hdGNoZXNbMV0udHJpbSgpO1xyXG4gICAgICAgIHZhbHVlID0gbmV3IERhdGUoZGF0ZVRpbWUpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBmYWlsIGlmIHRoZSBkYXRlIGlzIG5vdCB2YWxpZFxyXG4gICAgICAgICAgICB2YWx1ZS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDb3JlRXJyb3IoQ29yZUVycm9yQ29kZXMuSU5WQUxJRF9JU09fREFURV9BUkdVTUVOVCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNEYXRlKGFyZzEpKSB7XHJcbiAgICAgICAgaWYgKGlzTmFOKGFyZzEuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDb3JlRXJyb3IoQ29yZUVycm9yQ29kZXMuSU5WQUxJRF9EQVRFX0FSR1VNRU5UKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsdWUgPSBhcmcxO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNOdW1iZXIoYXJnMSkpIHtcclxuICAgICAgICB2YWx1ZSA9IGFyZzE7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVDb3JlRXJyb3IoQ29yZUVycm9yQ29kZXMuSU5WQUxJRF9BUkdVTUVOVCk7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNTdHJpbmcoYXJnMikpIHtcclxuICAgICAgICBvcHRpb25zLmtleSA9IGFyZzI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1BsYWluT2JqZWN0KGFyZzIpKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoYXJnMikuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoREFURVRJTUVfRk9STUFUX09QVElPTlNfS0VZUy5pbmNsdWRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXNba2V5XSA9IGFyZzJba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNba2V5XSA9IGFyZzJba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzU3RyaW5nKGFyZzMpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5sb2NhbGUgPSBhcmczO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdChhcmczKSkge1xyXG4gICAgICAgIG92ZXJyaWRlcyA9IGFyZzM7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNQbGFpbk9iamVjdChhcmc0KSkge1xyXG4gICAgICAgIG92ZXJyaWRlcyA9IGFyZzQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW29wdGlvbnMua2V5IHx8ICcnLCB2YWx1ZSwgb3B0aW9ucywgb3ZlcnJpZGVzXTtcclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIGNsZWFyRGF0ZVRpbWVGb3JtYXQoY3R4LCBsb2NhbGUsIGZvcm1hdCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IGN0eDtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGZvcm1hdCkge1xyXG4gICAgICAgIGNvbnN0IGlkID0gYCR7bG9jYWxlfV9fJHtrZXl9YDtcclxuICAgICAgICBpZiAoIWNvbnRleHQuX19kYXRldGltZUZvcm1hdHRlcnMuaGFzKGlkKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udGV4dC5fX2RhdGV0aW1lRm9ybWF0dGVycy5kZWxldGUoaWQpO1xyXG4gICAgfVxyXG59XG5cbi8vIGltcGxlbWVudGF0aW9uIG9mIGBudW1iZXJgIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIG51bWJlcihjb250ZXh0LCAuLi5hcmdzKSB7XHJcbiAgICBjb25zdCB7IG51bWJlckZvcm1hdHMsIHVucmVzb2x2aW5nLCBmYWxsYmFja0xvY2FsZSwgb25XYXJuLCBsb2NhbGVGYWxsYmFja2VyIH0gPSBjb250ZXh0O1xyXG4gICAgY29uc3QgeyBfX251bWJlckZvcm1hdHRlcnMgfSA9IGNvbnRleHQ7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFBdmFpbGFiaWxpdGllcy5udW1iZXJGb3JtYXQpIHtcclxuICAgICAgICBvbldhcm4oZ2V0V2Fybk1lc3NhZ2UoQ29yZVdhcm5Db2Rlcy5DQU5OT1RfRk9STUFUX05VTUJFUikpO1xyXG4gICAgICAgIHJldHVybiBNSVNTSU5HX1JFU09MVkVfVkFMVUU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBba2V5LCB2YWx1ZSwgb3B0aW9ucywgb3ZlcnJpZGVzXSA9IHBhcnNlTnVtYmVyQXJncyguLi5hcmdzKTtcclxuICAgIGNvbnN0IG1pc3NpbmdXYXJuID0gaXNCb29sZWFuKG9wdGlvbnMubWlzc2luZ1dhcm4pXHJcbiAgICAgICAgPyBvcHRpb25zLm1pc3NpbmdXYXJuXHJcbiAgICAgICAgOiBjb250ZXh0Lm1pc3NpbmdXYXJuO1xyXG4gICAgY29uc3QgZmFsbGJhY2tXYXJuID0gaXNCb29sZWFuKG9wdGlvbnMuZmFsbGJhY2tXYXJuKVxyXG4gICAgICAgID8gb3B0aW9ucy5mYWxsYmFja1dhcm5cclxuICAgICAgICA6IGNvbnRleHQuZmFsbGJhY2tXYXJuO1xyXG4gICAgY29uc3QgcGFydCA9ICEhb3B0aW9ucy5wYXJ0O1xyXG4gICAgY29uc3QgbG9jYWxlID0gaXNTdHJpbmcob3B0aW9ucy5sb2NhbGUpID8gb3B0aW9ucy5sb2NhbGUgOiBjb250ZXh0LmxvY2FsZTtcclxuICAgIGNvbnN0IGxvY2FsZXMgPSBsb2NhbGVGYWxsYmFja2VyKGNvbnRleHQsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgZmFsbGJhY2tMb2NhbGUsIGxvY2FsZSk7XHJcbiAgICBpZiAoIWlzU3RyaW5nKGtleSkgfHwga2V5ID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlLCBvdmVycmlkZXMpLmZvcm1hdCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyByZXNvbHZlIGZvcm1hdFxyXG4gICAgbGV0IG51bWJlckZvcm1hdCA9IHt9O1xyXG4gICAgbGV0IHRhcmdldExvY2FsZTtcclxuICAgIGxldCBmb3JtYXQgPSBudWxsO1xyXG4gICAgbGV0IGZyb20gPSBsb2NhbGU7XHJcbiAgICBsZXQgdG8gPSBudWxsO1xyXG4gICAgY29uc3QgdHlwZSA9ICdudW1iZXIgZm9ybWF0JztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRhcmdldExvY2FsZSA9IHRvID0gbG9jYWxlc1tpXTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIGxvY2FsZSAhPT0gdGFyZ2V0TG9jYWxlICYmXHJcbiAgICAgICAgICAgIGlzVHJhbnNsYXRlRmFsbGJhY2tXYXJuKGZhbGxiYWNrV2Fybiwga2V5KSkge1xyXG4gICAgICAgICAgICBvbldhcm4oZ2V0V2Fybk1lc3NhZ2UoQ29yZVdhcm5Db2Rlcy5GQUxMQkFDS19UT19OVU1CRVJfRk9STUFULCB7XHJcbiAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldExvY2FsZVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZvciB2dWUtZGV2dG9vbHMgdGltZWxpbmUgZXZlbnRcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGxvY2FsZSAhPT0gdGFyZ2V0TG9jYWxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtaXR0ZXIgPSBjb250ZXh0Ll9fdl9lbWl0dGVyO1xyXG4gICAgICAgICAgICBpZiAoZW1pdHRlcikge1xyXG4gICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KFwiZmFsbGJhY2tcIiAvKiBGQUxCQUNLICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbSxcclxuICAgICAgICAgICAgICAgICAgICB0byxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBgJHt0eXBlfToke2tleX1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBudW1iZXJGb3JtYXQgPVxyXG4gICAgICAgICAgICBudW1iZXJGb3JtYXRzW3RhcmdldExvY2FsZV0gfHwge307XHJcbiAgICAgICAgZm9ybWF0ID0gbnVtYmVyRm9ybWF0W2tleV07XHJcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZm9ybWF0KSlcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgaGFuZGxlTWlzc2luZyhjb250ZXh0LCBrZXksIHRhcmdldExvY2FsZSwgbWlzc2luZ1dhcm4sIHR5cGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBmcm9tID0gdG87XHJcbiAgICB9XHJcbiAgICAvLyBjaGVja2luZyBmb3JtYXQgYW5kIHRhcmdldCBsb2NhbGVcclxuICAgIGlmICghaXNQbGFpbk9iamVjdChmb3JtYXQpIHx8ICFpc1N0cmluZyh0YXJnZXRMb2NhbGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVucmVzb2x2aW5nID8gTk9UX1JFT1NMVkVEIDoga2V5O1xyXG4gICAgfVxyXG4gICAgbGV0IGlkID0gYCR7dGFyZ2V0TG9jYWxlfV9fJHtrZXl9YDtcclxuICAgIGlmICghaXNFbXB0eU9iamVjdChvdmVycmlkZXMpKSB7XHJcbiAgICAgICAgaWQgPSBgJHtpZH1fXyR7SlNPTi5zdHJpbmdpZnkob3ZlcnJpZGVzKX1gO1xyXG4gICAgfVxyXG4gICAgbGV0IGZvcm1hdHRlciA9IF9fbnVtYmVyRm9ybWF0dGVycy5nZXQoaWQpO1xyXG4gICAgaWYgKCFmb3JtYXR0ZXIpIHtcclxuICAgICAgICBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodGFyZ2V0TG9jYWxlLCBhc3NpZ24oe30sIGZvcm1hdCwgb3ZlcnJpZGVzKSk7XHJcbiAgICAgICAgX19udW1iZXJGb3JtYXR0ZXJzLnNldChpZCwgZm9ybWF0dGVyKTtcclxuICAgIH1cclxuICAgIHJldHVybiAhcGFydCA/IGZvcm1hdHRlci5mb3JtYXQodmFsdWUpIDogZm9ybWF0dGVyLmZvcm1hdFRvUGFydHModmFsdWUpO1xyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuY29uc3QgTlVNQkVSX0ZPUk1BVF9PUFRJT05TX0tFWVMgPSBbXHJcbiAgICAnbG9jYWxlTWF0Y2hlcicsXHJcbiAgICAnc3R5bGUnLFxyXG4gICAgJ2N1cnJlbmN5JyxcclxuICAgICdjdXJyZW5jeURpc3BsYXknLFxyXG4gICAgJ2N1cnJlbmN5U2lnbicsXHJcbiAgICAndXNlR3JvdXBpbmcnLFxyXG4gICAgJ21pbmltdW1JbnRlZ2VyRGlnaXRzJyxcclxuICAgICdtaW5pbXVtRnJhY3Rpb25EaWdpdHMnLFxyXG4gICAgJ21heGltdW1GcmFjdGlvbkRpZ2l0cycsXHJcbiAgICAnbWluaW11bVNpZ25pZmljYW50RGlnaXRzJyxcclxuICAgICdtYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMnLFxyXG4gICAgJ2NvbXBhY3REaXNwbGF5JyxcclxuICAgICdub3RhdGlvbicsXHJcbiAgICAnc2lnbkRpc3BsYXknLFxyXG4gICAgJ3VuaXQnLFxyXG4gICAgJ3VuaXREaXNwbGF5JyxcclxuICAgICdyb3VuZGluZ01vZGUnLFxyXG4gICAgJ3JvdW5kaW5nUHJpb3JpdHknLFxyXG4gICAgJ3JvdW5kaW5nSW5jcmVtZW50JyxcclxuICAgICd0cmFpbGluZ1plcm9EaXNwbGF5J1xyXG5dO1xyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIHBhcnNlTnVtYmVyQXJncyguLi5hcmdzKSB7XHJcbiAgICBjb25zdCBbYXJnMSwgYXJnMiwgYXJnMywgYXJnNF0gPSBhcmdzO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xyXG4gICAgbGV0IG92ZXJyaWRlcyA9IHt9O1xyXG4gICAgaWYgKCFpc051bWJlcihhcmcxKSkge1xyXG4gICAgICAgIHRocm93IGNyZWF0ZUNvcmVFcnJvcihDb3JlRXJyb3JDb2Rlcy5JTlZBTElEX0FSR1VNRU5UKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHZhbHVlID0gYXJnMTtcclxuICAgIGlmIChpc1N0cmluZyhhcmcyKSkge1xyXG4gICAgICAgIG9wdGlvbnMua2V5ID0gYXJnMjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzUGxhaW5PYmplY3QoYXJnMikpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyhhcmcyKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChOVU1CRVJfRk9STUFUX09QVElPTlNfS0VZUy5pbmNsdWRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXNba2V5XSA9IGFyZzJba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNba2V5XSA9IGFyZzJba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzU3RyaW5nKGFyZzMpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5sb2NhbGUgPSBhcmczO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdChhcmczKSkge1xyXG4gICAgICAgIG92ZXJyaWRlcyA9IGFyZzM7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNQbGFpbk9iamVjdChhcmc0KSkge1xyXG4gICAgICAgIG92ZXJyaWRlcyA9IGFyZzQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW29wdGlvbnMua2V5IHx8ICcnLCB2YWx1ZSwgb3B0aW9ucywgb3ZlcnJpZGVzXTtcclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIGNsZWFyTnVtYmVyRm9ybWF0KGN0eCwgbG9jYWxlLCBmb3JtYXQpIHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSBjdHg7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmb3JtYXQpIHtcclxuICAgICAgICBjb25zdCBpZCA9IGAke2xvY2FsZX1fXyR7a2V5fWA7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0Ll9fbnVtYmVyRm9ybWF0dGVycy5oYXMoaWQpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0Ll9fbnVtYmVyRm9ybWF0dGVycy5kZWxldGUoaWQpO1xyXG4gICAgfVxyXG59XG5cbi8vIFRPRE86IHdlIGNvdWxkIG5vdCBleHBvcnRzIGZvciBOb2RlIG5hdGl2ZSBFUyBNb3VkbGVzIHlldC4uLlxyXG57XHJcbiAgICBpZiAodHlwZW9mIF9fSU5UTElGWV9QUk9EX0RFVlRPT0xTX18gIT09ICdib29sZWFuJykge1xyXG4gICAgICAgIGdldEdsb2JhbFRoaXMoKS5fX0lOVExJRllfUFJPRF9ERVZUT09MU19fID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29yZUVycm9yQ29kZXMsIENvcmVXYXJuQ29kZXMsIERBVEVUSU1FX0ZPUk1BVF9PUFRJT05TX0tFWVMsIERFRkFVTFRfTE9DQUxFLCBERUZBVUxUX01FU1NBR0VfREFUQV9UWVBFLCBNSVNTSU5HX1JFU09MVkVfVkFMVUUsIE5PVF9SRU9TTFZFRCwgTlVNQkVSX0ZPUk1BVF9PUFRJT05TX0tFWVMsIFZFUlNJT04sIGNsZWFyQ29tcGlsZUNhY2hlLCBjbGVhckRhdGVUaW1lRm9ybWF0LCBjbGVhck51bWJlckZvcm1hdCwgY29tcGlsZVRvRnVuY3Rpb24sIGNyZWF0ZUNvcmVDb250ZXh0LCBjcmVhdGVDb3JlRXJyb3IsIGNyZWF0ZU1lc3NhZ2VDb250ZXh0LCBkYXRldGltZSwgZmFsbGJhY2tXaXRoTG9jYWxlQ2hhaW4sIGZhbGxiYWNrV2l0aFNpbXBsZSwgZ2V0QWRkaXRpb25hbE1ldGEsIGdldERldlRvb2xzSG9vaywgZ2V0RmFsbGJhY2tDb250ZXh0LCBnZXRXYXJuTWVzc2FnZSwgaGFuZGxlTWlzc2luZywgaW5pdEkxOG5EZXZUb29scywgaXNNZXNzYWdlRnVuY3Rpb24sIGlzVHJhbnNsYXRlRmFsbGJhY2tXYXJuLCBpc1RyYW5zbGF0ZU1pc3NpbmdXYXJuLCBudW1iZXIsIHBhcnNlLCBwYXJzZURhdGVUaW1lQXJncywgcGFyc2VOdW1iZXJBcmdzLCBwYXJzZVRyYW5zbGF0ZUFyZ3MsIHJlZ2lzdGVyTG9jYWxlRmFsbGJhY2tlciwgcmVnaXN0ZXJNZXNzYWdlQ29tcGlsZXIsIHJlZ2lzdGVyTWVzc2FnZVJlc29sdmVyLCByZXNvbHZlVmFsdWUsIHJlc29sdmVXaXRoS2V5VmFsdWUsIHNldEFkZGl0aW9uYWxNZXRhLCBzZXREZXZUb29sc0hvb2ssIHNldEZhbGxiYWNrQ29udGV4dCwgdHJhbnNsYXRlLCB0cmFuc2xhdGVEZXZUb29scywgdXBkYXRlRmFsbGJhY2tMb2NhbGUgfTtcbiIsIi8qIVxuICAqIHZ1ZS1kZXZ0b29scyB2OS4yLjJcbiAgKiAoYykgMjAyMiBrYXp1eWEga2F3YWd1Y2hpXG4gICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICAqL1xuY29uc3QgVnVlRGV2VG9vbHNMYWJlbHMgPSB7XHJcbiAgICBbXCJ2dWUtZGV2dG9vbHMtcGx1Z2luLXZ1ZS1pMThuXCIgLyogUExVR0lOICovXTogJ1Z1ZSBJMThuIGRldnRvb2xzJyxcclxuICAgIFtcInZ1ZS1pMThuLXJlc291cmNlLWluc3BlY3RvclwiIC8qIENVU1RPTV9JTlNQRUNUT1IgKi9dOiAnSTE4biBSZXNvdXJjZXMnLFxyXG4gICAgW1widnVlLWkxOG4tdGltZWxpbmVcIiAvKiBUSU1FTElORSAqL106ICdWdWUgSTE4bidcclxufTtcclxuY29uc3QgVnVlRGV2VG9vbHNQbGFjZWhvbGRlcnMgPSB7XHJcbiAgICBbXCJ2dWUtaTE4bi1yZXNvdXJjZS1pbnNwZWN0b3JcIiAvKiBDVVNUT01fSU5TUEVDVE9SICovXTogJ1NlYXJjaCBmb3Igc2NvcGVzIC4uLidcclxufTtcclxuY29uc3QgVnVlRGV2VG9vbHNUaW1lbGluZUNvbG9ycyA9IHtcclxuICAgIFtcInZ1ZS1pMThuLXRpbWVsaW5lXCIgLyogVElNRUxJTkUgKi9dOiAweGZmY2QxOVxyXG59O1xuXG5leHBvcnQgeyBWdWVEZXZUb29sc0xhYmVscywgVnVlRGV2VG9vbHNQbGFjZWhvbGRlcnMsIFZ1ZURldlRvb2xzVGltZWxpbmVDb2xvcnMgfTtcbiIsIi8qIVxuICAqIHZ1ZS1pMThuIHY5LjIuMlxuICAqIChjKSAyMDIyIGthenV5YSBrYXdhZ3VjaGlcbiAgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gICovXG5pbXBvcnQgeyBnZXRHbG9iYWxUaGlzLCBmb3JtYXQsIG1ha2VTeW1ib2wsIGlzUGxhaW5PYmplY3QsIGlzQXJyYXksIGlzU3RyaW5nLCBoYXNPd24sIGlzT2JqZWN0LCBpc0Jvb2xlYW4sIGlzUmVnRXhwLCBpc0Z1bmN0aW9uLCBpbkJyb3dzZXIsIGFzc2lnbiwgaXNOdW1iZXIsIHdhcm4sIGNyZWF0ZUVtaXR0ZXIsIGlzRW1wdHlPYmplY3QgfSBmcm9tICdAaW50bGlmeS9zaGFyZWQnO1xuaW1wb3J0IHsgQ29yZVdhcm5Db2RlcywgQ29tcGlsZUVycm9yQ29kZXMsIGNyZWF0ZUNvbXBpbGVFcnJvciwgREVGQVVMVF9MT0NBTEUsIHVwZGF0ZUZhbGxiYWNrTG9jYWxlLCBzZXRGYWxsYmFja0NvbnRleHQsIGNyZWF0ZUNvcmVDb250ZXh0LCBjbGVhckRhdGVUaW1lRm9ybWF0LCBjbGVhck51bWJlckZvcm1hdCwgc2V0QWRkaXRpb25hbE1ldGEsIGdldEZhbGxiYWNrQ29udGV4dCwgTk9UX1JFT1NMVkVELCBpc1RyYW5zbGF0ZUZhbGxiYWNrV2FybiwgaXNUcmFuc2xhdGVNaXNzaW5nV2FybiwgcGFyc2VUcmFuc2xhdGVBcmdzLCB0cmFuc2xhdGUsIE1JU1NJTkdfUkVTT0xWRV9WQUxVRSwgcGFyc2VEYXRlVGltZUFyZ3MsIGRhdGV0aW1lLCBwYXJzZU51bWJlckFyZ3MsIG51bWJlciwgZmFsbGJhY2tXaXRoTG9jYWxlQ2hhaW4sIE5VTUJFUl9GT1JNQVRfT1BUSU9OU19LRVlTLCBEQVRFVElNRV9GT1JNQVRfT1BUSU9OU19LRVlTLCByZWdpc3Rlck1lc3NhZ2VSZXNvbHZlciwgcmVzb2x2ZVZhbHVlLCByZWdpc3RlckxvY2FsZUZhbGxiYWNrZXIsIHNldERldlRvb2xzSG9vayB9IGZyb20gJ0BpbnRsaWZ5L2NvcmUtYmFzZSc7XG5pbXBvcnQgeyBjcmVhdGVWTm9kZSwgVGV4dCwgcmVmLCBjb21wdXRlZCwgd2F0Y2gsIGdldEN1cnJlbnRJbnN0YW5jZSwgRnJhZ21lbnQsIGgsIGVmZmVjdFNjb3BlLCBpbmplY3QsIG9uTW91bnRlZCwgb25Vbm1vdW50ZWQsIHNoYWxsb3dSZWYsIG9uQmVmb3JlTW91bnQsIGlzUmVmIH0gZnJvbSAndnVlJztcbmltcG9ydCB7IHNldHVwRGV2dG9vbHNQbHVnaW4gfSBmcm9tICdAdnVlL2RldnRvb2xzLWFwaSc7XG5pbXBvcnQgeyBWdWVEZXZUb29sc0xhYmVscywgVnVlRGV2VG9vbHNQbGFjZWhvbGRlcnMsIFZ1ZURldlRvb2xzVGltZWxpbmVDb2xvcnMgfSBmcm9tICdAaW50bGlmeS92dWUtZGV2dG9vbHMnO1xuXG4vKipcclxuICogVnVlIEkxOG4gVmVyc2lvblxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBTZW12ZXIgZm9ybWF0LiBTYW1lIGZvcm1hdCBhcyB0aGUgcGFja2FnZS5qc29uIGB2ZXJzaW9uYCBmaWVsZC5cclxuICpcclxuICogQFZ1ZUkxOG5HZW5lcmFsXHJcbiAqL1xyXG5jb25zdCBWRVJTSU9OID0gJzkuMi4yJztcclxuLyoqXHJcbiAqIFRoaXMgaXMgb25seSBjYWxsZWQgaW4gZXNtLWJ1bmRsZXIgYnVpbGRzLlxyXG4gKiBpc3RhbmJ1bC1pZ25vcmUtbmV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdEZlYXR1cmVGbGFncygpIHtcclxuICAgIGxldCBuZWVkV2FybiA9IGZhbHNlO1xyXG4gICAgaWYgKHR5cGVvZiBfX1ZVRV9JMThOX0ZVTExfSU5TVEFMTF9fICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgICBuZWVkV2FybiA9IHRydWU7XHJcbiAgICAgICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX0kxOE5fRlVMTF9JTlNUQUxMX18gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBfX1ZVRV9JMThOX0xFR0FDWV9BUElfXyAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgbmVlZFdhcm4gPSB0cnVlO1xyXG4gICAgICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9JMThOX0xFR0FDWV9BUElfXyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIF9fSU5UTElGWV9QUk9EX0RFVlRPT0xTX18gIT09ICdib29sZWFuJykge1xyXG4gICAgICAgIGdldEdsb2JhbFRoaXMoKS5fX0lOVExJRllfUFJPRF9ERVZUT09MU19fID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5lZWRXYXJuKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBZb3UgYXJlIHJ1bm5pbmcgdGhlIGVzbS1idW5kbGVyIGJ1aWxkIG9mIHZ1ZS1pMThuLiBJdCBpcyByZWNvbW1lbmRlZCB0byBgICtcclxuICAgICAgICAgICAgYGNvbmZpZ3VyZSB5b3VyIGJ1bmRsZXIgdG8gZXhwbGljaXRseSByZXBsYWNlIGZlYXR1cmUgZmxhZyBnbG9iYWxzIGAgK1xyXG4gICAgICAgICAgICBgd2l0aCBib29sZWFuIGxpdGVyYWxzIHRvIGdldCBwcm9wZXIgdHJlZS1zaGFraW5nIGluIHRoZSBmaW5hbCBidW5kbGUuYCk7XHJcbiAgICB9XHJcbn1cblxubGV0IGNvZGUkMSA9IENvcmVXYXJuQ29kZXMuX19FWFRFTkRfUE9JTlRfXztcclxuY29uc3QgaW5jJDEgPSAoKSA9PiArK2NvZGUkMTtcclxuY29uc3QgSTE4bldhcm5Db2RlcyA9IHtcclxuICAgIEZBTExCQUNLX1RPX1JPT1Q6IGNvZGUkMSxcclxuICAgIE5PVF9TVVBQT1JURURfUFJFU0VSVkU6IGluYyQxKCksXHJcbiAgICBOT1RfU1VQUE9SVEVEX0ZPUk1BVFRFUjogaW5jJDEoKSxcclxuICAgIE5PVF9TVVBQT1JURURfUFJFU0VSVkVfRElSRUNUSVZFOiBpbmMkMSgpLFxyXG4gICAgTk9UX1NVUFBPUlRFRF9HRVRfQ0hPSUNFX0lOREVYOiBpbmMkMSgpLFxyXG4gICAgQ09NUE9ORU5UX05BTUVfTEVHQUNZX0NPTVBBVElCTEU6IGluYyQxKCksXHJcbiAgICBOT1RfRk9VTkRfUEFSRU5UX1NDT1BFOiBpbmMkMSgpIC8vIDEzXHJcbn07XHJcbmNvbnN0IHdhcm5NZXNzYWdlcyA9IHtcclxuICAgIFtJMThuV2FybkNvZGVzLkZBTExCQUNLX1RPX1JPT1RdOiBgRmFsbCBiYWNrIHRvIHt0eXBlfSAne2tleX0nIHdpdGggcm9vdCBsb2NhbGUuYCxcclxuICAgIFtJMThuV2FybkNvZGVzLk5PVF9TVVBQT1JURURfUFJFU0VSVkVdOiBgTm90IHN1cHBvcnRlZCAncHJlc2VydmUnLmAsXHJcbiAgICBbSTE4bldhcm5Db2Rlcy5OT1RfU1VQUE9SVEVEX0ZPUk1BVFRFUl06IGBOb3Qgc3VwcG9ydGVkICdmb3JtYXR0ZXInLmAsXHJcbiAgICBbSTE4bldhcm5Db2Rlcy5OT1RfU1VQUE9SVEVEX1BSRVNFUlZFX0RJUkVDVElWRV06IGBOb3Qgc3VwcG9ydGVkICdwcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQnLmAsXHJcbiAgICBbSTE4bldhcm5Db2Rlcy5OT1RfU1VQUE9SVEVEX0dFVF9DSE9JQ0VfSU5ERVhdOiBgTm90IHN1cHBvcnRlZCAnZ2V0Q2hvaWNlSW5kZXgnLmAsXHJcbiAgICBbSTE4bldhcm5Db2Rlcy5DT01QT05FTlRfTkFNRV9MRUdBQ1lfQ09NUEFUSUJMRV06IGBDb21wb25lbnQgbmFtZSBsZWdhY3kgY29tcGF0aWJsZTogJ3tuYW1lfScgLT4gJ2kxOG4nYCxcclxuICAgIFtJMThuV2FybkNvZGVzLk5PVF9GT1VORF9QQVJFTlRfU0NPUEVdOiBgTm90IGZvdW5kIHBhcmVudCBzY29wZS4gdXNlIHRoZSBnbG9iYWwgc2NvcGUuYFxyXG59O1xyXG5mdW5jdGlvbiBnZXRXYXJuTWVzc2FnZShjb2RlLCAuLi5hcmdzKSB7XHJcbiAgICByZXR1cm4gZm9ybWF0KHdhcm5NZXNzYWdlc1tjb2RlXSwgLi4uYXJncyk7XHJcbn1cblxubGV0IGNvZGUgPSBDb21waWxlRXJyb3JDb2Rlcy5fX0VYVEVORF9QT0lOVF9fO1xyXG5jb25zdCBpbmMgPSAoKSA9PiArK2NvZGU7XHJcbmNvbnN0IEkxOG5FcnJvckNvZGVzID0ge1xyXG4gICAgLy8gY29tcG9zZXIgbW9kdWxlIGVycm9yc1xyXG4gICAgVU5FWFBFQ1RFRF9SRVRVUk5fVFlQRTogY29kZSxcclxuICAgIC8vIGxlZ2FjeSBtb2R1bGUgZXJyb3JzXHJcbiAgICBJTlZBTElEX0FSR1VNRU5UOiBpbmMoKSxcclxuICAgIC8vIGkxOG4gbW9kdWxlIGVycm9yc1xyXG4gICAgTVVTVF9CRV9DQUxMX1NFVFVQX1RPUDogaW5jKCksXHJcbiAgICBOT1RfSU5TTEFMTEVEOiBpbmMoKSxcclxuICAgIE5PVF9BVkFJTEFCTEVfSU5fTEVHQUNZX01PREU6IGluYygpLFxyXG4gICAgLy8gZGlyZWN0aXZlIG1vZHVsZSBlcnJvcnNcclxuICAgIFJFUVVJUkVEX1ZBTFVFOiBpbmMoKSxcclxuICAgIElOVkFMSURfVkFMVUU6IGluYygpLFxyXG4gICAgLy8gdnVlLWRldnRvb2xzIGVycm9yc1xyXG4gICAgQ0FOTk9UX1NFVFVQX1ZVRV9ERVZUT09MU19QTFVHSU46IGluYygpLFxyXG4gICAgTk9UX0lOU0xBTExFRF9XSVRIX1BST1ZJREU6IGluYygpLFxyXG4gICAgLy8gdW5leHBlY3RlZCBlcnJvclxyXG4gICAgVU5FWFBFQ1RFRF9FUlJPUjogaW5jKCksXHJcbiAgICAvLyBub3QgY29tcGF0aWJsZSBsZWdhY3kgdnVlLWkxOG4gY29uc3RydWN0b3JcclxuICAgIE5PVF9DT01QQVRJQkxFX0xFR0FDWV9WVUVfSTE4TjogaW5jKCksXHJcbiAgICAvLyBicmlkZ2Ugc3VwcG9ydCB2dWUgMi54IG9ubHlcclxuICAgIEJSSURHRV9TVVBQT1JUX1ZVRV8yX09OTFk6IGluYygpLFxyXG4gICAgLy8gbmVlZCB0byBkZWZpbmUgYGkxOG5gIG9wdGlvbiBpbiBgYWxsb3dDb21wb3NpdGlvbjogdHJ1ZWAgYW5kIGB1c2VTY29wZTogJ2xvY2FsJyBhdCBgdXNlSTE4bmBgXHJcbiAgICBNVVNUX0RFRklORV9JMThOX09QVElPTl9JTl9BTExPV19DT01QT1NJVElPTjogaW5jKCksXHJcbiAgICAvLyBOb3QgYXZhaWxhYmxlIENvbXBvc3Rpb24gQVBJIGluIExlZ2FjeSBBUEkgbW9kZS4gUGxlYXNlIG1ha2Ugc3VyZSB0aGF0IHRoZSBsZWdhY3kgQVBJIG1vZGUgaXMgd29ya2luZyBwcm9wZXJseVxyXG4gICAgTk9UX0FWQUlMQUJMRV9DT01QT1NJVElPTl9JTl9MRUdBQ1k6IGluYygpLFxyXG4gICAgLy8gZm9yIGVuaGFuY2VtZW50XHJcbiAgICBfX0VYVEVORF9QT0lOVF9fOiBpbmMoKSAvLyAyOVxyXG59O1xyXG5mdW5jdGlvbiBjcmVhdGVJMThuRXJyb3IoY29kZSwgLi4uYXJncykge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUNvbXBpbGVFcnJvcihjb2RlLCBudWxsLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyB7IG1lc3NhZ2VzOiBlcnJvck1lc3NhZ2VzLCBhcmdzIH0gOiB1bmRlZmluZWQpO1xyXG59XHJcbmNvbnN0IGVycm9yTWVzc2FnZXMgPSB7XHJcbiAgICBbSTE4bkVycm9yQ29kZXMuVU5FWFBFQ1RFRF9SRVRVUk5fVFlQRV06ICdVbmV4cGVjdGVkIHJldHVybiB0eXBlIGluIGNvbXBvc2VyJyxcclxuICAgIFtJMThuRXJyb3JDb2Rlcy5JTlZBTElEX0FSR1VNRU5UXTogJ0ludmFsaWQgYXJndW1lbnQnLFxyXG4gICAgW0kxOG5FcnJvckNvZGVzLk1VU1RfQkVfQ0FMTF9TRVRVUF9UT1BdOiAnTXVzdCBiZSBjYWxsZWQgYXQgdGhlIHRvcCBvZiBhIGBzZXR1cGAgZnVuY3Rpb24nLFxyXG4gICAgW0kxOG5FcnJvckNvZGVzLk5PVF9JTlNMQUxMRURdOiAnTmVlZCB0byBpbnN0YWxsIHdpdGggYGFwcC51c2VgIGZ1bmN0aW9uJyxcclxuICAgIFtJMThuRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0VSUk9SXTogJ1VuZXhwZWN0ZWQgZXJyb3InLFxyXG4gICAgW0kxOG5FcnJvckNvZGVzLk5PVF9BVkFJTEFCTEVfSU5fTEVHQUNZX01PREVdOiAnTm90IGF2YWlsYWJsZSBpbiBsZWdhY3kgbW9kZScsXHJcbiAgICBbSTE4bkVycm9yQ29kZXMuUkVRVUlSRURfVkFMVUVdOiBgUmVxdWlyZWQgaW4gdmFsdWU6IHswfWAsXHJcbiAgICBbSTE4bkVycm9yQ29kZXMuSU5WQUxJRF9WQUxVRV06IGBJbnZhbGlkIHZhbHVlYCxcclxuICAgIFtJMThuRXJyb3JDb2Rlcy5DQU5OT1RfU0VUVVBfVlVFX0RFVlRPT0xTX1BMVUdJTl06IGBDYW5ub3Qgc2V0dXAgdnVlLWRldnRvb2xzIHBsdWdpbmAsXHJcbiAgICBbSTE4bkVycm9yQ29kZXMuTk9UX0lOU0xBTExFRF9XSVRIX1BST1ZJREVdOiAnTmVlZCB0byBpbnN0YWxsIHdpdGggYHByb3ZpZGVgIGZ1bmN0aW9uJyxcclxuICAgIFtJMThuRXJyb3JDb2Rlcy5OT1RfQ09NUEFUSUJMRV9MRUdBQ1lfVlVFX0kxOE5dOiAnTm90IGNvbXBhdGlibGUgbGVnYWN5IFZ1ZUkxOG4uJyxcclxuICAgIFtJMThuRXJyb3JDb2Rlcy5CUklER0VfU1VQUE9SVF9WVUVfMl9PTkxZXTogJ3Z1ZS1pMThuLWJyaWRnZSBzdXBwb3J0IFZ1ZSAyLnggb25seScsXHJcbiAgICBbSTE4bkVycm9yQ29kZXMuTVVTVF9ERUZJTkVfSTE4Tl9PUFRJT05fSU5fQUxMT1dfQ09NUE9TSVRJT05dOiAnTXVzdCBkZWZpbmUg4oCYaTE4buKAmSBvcHRpb24gb3IgY3VzdG9tIGJsb2NrIGluIENvbXBvc2l0aW9uIEFQSSB3aXRoIHVzaW5nIGxvY2FsIHNjb3BlIGluIExlZ2FjeSBBUEkgbW9kZScsXHJcbiAgICBbSTE4bkVycm9yQ29kZXMuTk9UX0FWQUlMQUJMRV9DT01QT1NJVElPTl9JTl9MRUdBQ1ldOiAnTm90IGF2YWlsYWJsZSBDb21wb3N0aW9uIEFQSSBpbiBMZWdhY3kgQVBJIG1vZGUuIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUgbGVnYWN5IEFQSSBtb2RlIGlzIHdvcmtpbmcgcHJvcGVybHknXHJcbn07XG5cbmNvbnN0IFRyYW5zcmF0ZVZOb2RlU3ltYm9sID0gXHJcbi8qICNfX1BVUkVfXyovIG1ha2VTeW1ib2woJ19fdHJhbnNyYXRlVk5vZGUnKTtcclxuY29uc3QgRGF0ZXRpbWVQYXJ0c1N5bWJvbCA9IC8qICNfX1BVUkVfXyovIG1ha2VTeW1ib2woJ19fZGF0ZXRpbWVQYXJ0cycpO1xyXG5jb25zdCBOdW1iZXJQYXJ0c1N5bWJvbCA9IC8qICNfX1BVUkVfXyovIG1ha2VTeW1ib2woJ19fbnVtYmVyUGFydHMnKTtcclxuY29uc3QgRW5hYmxlRW1pdHRlciA9IC8qICNfX1BVUkVfXyovIG1ha2VTeW1ib2woJ19fZW5hYmxlRW1pdHRlcicpO1xyXG5jb25zdCBEaXNhYmxlRW1pdHRlciA9IC8qICNfX1BVUkVfXyovIG1ha2VTeW1ib2woJ19fZGlzYWJsZUVtaXR0ZXInKTtcclxuY29uc3QgU2V0UGx1cmFsUnVsZXNTeW1ib2wgPSBtYWtlU3ltYm9sKCdfX3NldFBsdXJhbFJ1bGVzJyk7XHJcbm1ha2VTeW1ib2woJ19faW50bGlmeU1ldGEnKTtcclxuY29uc3QgSW5lamN0V2l0aE9wdGlvbiA9IC8qICNfX1BVUkVfXyovIG1ha2VTeW1ib2woJ19faW5qZWN0V2l0aE9wdGlvbicpO1xyXG5jb25zdCBfX1ZVRV9JMThOX0JSSURHRV9fID0gICdfX1ZVRV9JMThOX0JSSURHRV9fJztcblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xyXG4vKipcclxuICogVHJhbnNmb3JtIGZsYXQganNvbiBpbiBvYmogdG8gbm9ybWFsIGpzb24gaW4gb2JqXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVGbGF0SnNvbihvYmopIHtcclxuICAgIC8vIGNoZWNrIG9ialxyXG4gICAgaWYgKCFpc09iamVjdChvYmopKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIC8vIGNoZWNrIGtleVxyXG4gICAgICAgIGlmICghaGFzT3duKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaGFuZGxlIGZvciBub3JtYWwganNvblxyXG4gICAgICAgIGlmICgha2V5LmluY2x1ZGVzKCcuJykpIHtcclxuICAgICAgICAgICAgLy8gcmVjdXJzaXZlIHByb2Nlc3MgdmFsdWUgaWYgdmFsdWUgaXMgYWxzbyBhIG9iamVjdFxyXG4gICAgICAgICAgICBpZiAoaXNPYmplY3Qob2JqW2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVGbGF0SnNvbihvYmpba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaGFuZGxlIGZvciBmbGF0IGpzb24sIHRyYW5zZm9ybSB0byBub3JtYWwganNvblxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBnbyB0byB0aGUgbGFzdCBvYmplY3RcclxuICAgICAgICAgICAgY29uc3Qgc3ViS2V5cyA9IGtleS5zcGxpdCgnLicpO1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBzdWJLZXlzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50T2JqID0gb2JqO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhc3RJbmRleDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShzdWJLZXlzW2ldIGluIGN1cnJlbnRPYmopKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE9ialtzdWJLZXlzW2ldXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY3VycmVudE9iaiA9IGN1cnJlbnRPYmpbc3ViS2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdXBkYXRlIGxhc3Qgb2JqZWN0IHZhbHVlLCBkZWxldGUgb2xkIHByb3BlcnR5XHJcbiAgICAgICAgICAgIGN1cnJlbnRPYmpbc3ViS2V5c1tsYXN0SW5kZXhdXSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICBkZWxldGUgb2JqW2tleV07XHJcbiAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZSBwcm9jZXNzIHZhbHVlIGlmIHZhbHVlIGlzIGFsc28gYSBvYmplY3RcclxuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KGN1cnJlbnRPYmpbc3ViS2V5c1tsYXN0SW5kZXhdXSkpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZUZsYXRKc29uKGN1cnJlbnRPYmpbc3ViS2V5c1tsYXN0SW5kZXhdXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbmZ1bmN0aW9uIGdldExvY2FsZU1lc3NhZ2VzKGxvY2FsZSwgb3B0aW9ucykge1xyXG4gICAgY29uc3QgeyBtZXNzYWdlcywgX19pMThuLCBtZXNzYWdlUmVzb2x2ZXIsIGZsYXRKc29uIH0gPSBvcHRpb25zO1xyXG4gICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICBjb25zdCByZXQgPSBpc1BsYWluT2JqZWN0KG1lc3NhZ2VzKVxyXG4gICAgICAgID8gbWVzc2FnZXNcclxuICAgICAgICA6IGlzQXJyYXkoX19pMThuKVxyXG4gICAgICAgICAgICA/IHt9XHJcbiAgICAgICAgICAgIDogeyBbbG9jYWxlXToge30gfTtcclxuICAgIC8vIG1lcmdlIGxvY2FsZSBtZXNzYWdlcyBvZiBpMThuIGN1c3RvbSBibG9ja1xyXG4gICAgaWYgKGlzQXJyYXkoX19pMThuKSkge1xyXG4gICAgICAgIF9faTE4bi5mb3JFYWNoKGN1c3RvbSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgnbG9jYWxlJyBpbiBjdXN0b20gJiYgJ3Jlc291cmNlJyBpbiBjdXN0b20pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbG9jYWxlLCByZXNvdXJjZSB9ID0gY3VzdG9tO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldFtsb2NhbGVdID0gcmV0W2xvY2FsZV0gfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgZGVlcENvcHkocmVzb3VyY2UsIHJldFtsb2NhbGVdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZXBDb3B5KHJlc291cmNlLCByZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXNTdHJpbmcoY3VzdG9tKSAmJiBkZWVwQ29weShKU09OLnBhcnNlKGN1c3RvbSksIHJldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIGhhbmRsZSBtZXNzYWdlcyBmb3IgZmxhdCBqc29uXHJcbiAgICBpZiAobWVzc2FnZVJlc29sdmVyID09IG51bGwgJiYgZmxhdEpzb24pIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXQpIHtcclxuICAgICAgICAgICAgaWYgKGhhc093bihyZXQsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZUZsYXRKc29uKHJldFtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuY29uc3QgaXNOb3RPYmplY3RPcklzQXJyYXkgPSAodmFsKSA9PiAhaXNPYmplY3QodmFsKSB8fCBpc0FycmF5KHZhbCk7XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHNyYywgZGVzKSB7XHJcbiAgICAvLyBzcmMgYW5kIGRlcyBzaG91bGQgYm90aCBiZSBvYmplY3RzLCBhbmQgbm9uIG9mIHRoZW4gY2FuIGJlIGEgYXJyYXlcclxuICAgIGlmIChpc05vdE9iamVjdE9ySXNBcnJheShzcmMpIHx8IGlzTm90T2JqZWN0T3JJc0FycmF5KGRlcykpIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuSU5WQUxJRF9WQUxVRSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzcmMpIHtcclxuICAgICAgICBpZiAoaGFzT3duKHNyYywga2V5KSkge1xyXG4gICAgICAgICAgICBpZiAoaXNOb3RPYmplY3RPcklzQXJyYXkoc3JjW2tleV0pIHx8IGlzTm90T2JqZWN0T3JJc0FycmF5KGRlc1trZXldKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVwbGFjZSB3aXRoIHNyY1trZXldIHdoZW46XHJcbiAgICAgICAgICAgICAgICAvLyBzcmNba2V5XSBvciBkZXNba2V5XSBpcyBub3QgYSBvYmplY3QsIG9yXHJcbiAgICAgICAgICAgICAgICAvLyBzcmNba2V5XSBvciBkZXNba2V5XSBpcyBhIGFycmF5XHJcbiAgICAgICAgICAgICAgICBkZXNba2V5XSA9IHNyY1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc3JjW2tleV0gYW5kIGRlc1trZXldIGFyZSBib3RoIG9iamVjdCwgbWVyZ2UgdGhlbVxyXG4gICAgICAgICAgICAgICAgZGVlcENvcHkoc3JjW2tleV0sIGRlc1trZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5mdW5jdGlvbiBnZXRDb21wb25lbnRPcHRpb25zKGluc3RhbmNlKSB7XHJcbiAgICByZXR1cm4gaW5zdGFuY2UudHlwZSA7XHJcbn1cclxuZnVuY3Rpb24gYWRqdXN0STE4blJlc291cmNlcyhnbG9iYWwsIG9wdGlvbnMsIGNvbXBvbmVudE9wdGlvbnMgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbikge1xyXG4gICAgbGV0IG1lc3NhZ2VzID0gaXNPYmplY3Qob3B0aW9ucy5tZXNzYWdlcykgPyBvcHRpb25zLm1lc3NhZ2VzIDoge307XHJcbiAgICBpZiAoJ19faTE4bkdsb2JhbCcgaW4gY29tcG9uZW50T3B0aW9ucykge1xyXG4gICAgICAgIG1lc3NhZ2VzID0gZ2V0TG9jYWxlTWVzc2FnZXMoZ2xvYmFsLmxvY2FsZS52YWx1ZSwge1xyXG4gICAgICAgICAgICBtZXNzYWdlcyxcclxuICAgICAgICAgICAgX19pMThuOiBjb21wb25lbnRPcHRpb25zLl9faTE4bkdsb2JhbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gbWVyZ2UgbG9jYWxlIG1lc3NhZ2VzXHJcbiAgICBjb25zdCBsb2NhbGVzID0gT2JqZWN0LmtleXMobWVzc2FnZXMpO1xyXG4gICAgaWYgKGxvY2FsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgbG9jYWxlcy5mb3JFYWNoKGxvY2FsZSA9PiB7XHJcbiAgICAgICAgICAgIGdsb2JhbC5tZXJnZUxvY2FsZU1lc3NhZ2UobG9jYWxlLCBtZXNzYWdlc1tsb2NhbGVdKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHtcclxuICAgICAgICAvLyBtZXJnZSBkYXRldGltZSBmb3JtYXRzXHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMuZGF0ZXRpbWVGb3JtYXRzKSkge1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhbGVzID0gT2JqZWN0LmtleXMob3B0aW9ucy5kYXRldGltZUZvcm1hdHMpO1xyXG4gICAgICAgICAgICBpZiAobG9jYWxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsZXMuZm9yRWFjaChsb2NhbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbC5tZXJnZURhdGVUaW1lRm9ybWF0KGxvY2FsZSwgb3B0aW9ucy5kYXRldGltZUZvcm1hdHNbbG9jYWxlXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBtZXJnZSBudW1iZXIgZm9ybWF0c1xyXG4gICAgICAgIGlmIChpc09iamVjdChvcHRpb25zLm51bWJlckZvcm1hdHMpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsZXMgPSBPYmplY3Qua2V5cyhvcHRpb25zLm51bWJlckZvcm1hdHMpO1xyXG4gICAgICAgICAgICBpZiAobG9jYWxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsZXMuZm9yRWFjaChsb2NhbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbC5tZXJnZU51bWJlckZvcm1hdChsb2NhbGUsIG9wdGlvbnMubnVtYmVyRm9ybWF0c1tsb2NhbGVdKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVRleHROb2RlKGtleSkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZVZOb2RlKFRleHQsIG51bGwsIGtleSwgMClcclxuICAgICAgICA7XHJcbn1cclxuLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cclxuLy8gZXh0ZW5kIFZOb2RlIGludGVyZmFjZVxyXG5jb25zdCBERVZUT09MU19NRVRBID0gJ19fSU5UTElGWV9NRVRBX18nO1xyXG5sZXQgY29tcG9zZXJJRCA9IDA7XHJcbmZ1bmN0aW9uIGRlZmluZUNvcmVNaXNzaW5nSGFuZGxlcihtaXNzaW5nKSB7XHJcbiAgICByZXR1cm4gKChjdHgsIGxvY2FsZSwga2V5LCB0eXBlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG1pc3NpbmcobG9jYWxlLCBrZXksIGdldEN1cnJlbnRJbnN0YW5jZSgpIHx8IHVuZGVmaW5lZCwgdHlwZSk7XHJcbiAgICB9KTtcclxufVxyXG4vLyBmb3IgSW50bGlmeSBEZXZUb29sc1xyXG5jb25zdCBnZXRNZXRhSW5mbyA9ICAoKSA9PiB7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgbGV0IG1ldGEgPSBudWxsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIHJldHVybiBpbnN0YW5jZSAmJiAobWV0YSA9IGdldENvbXBvbmVudE9wdGlvbnMoaW5zdGFuY2UpW0RFVlRPT0xTX01FVEFdKVxyXG4gICAgICAgID8geyBbREVWVE9PTFNfTUVUQV06IG1ldGEgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICA6IG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBDcmVhdGUgY29tcG9zZXIgaW50ZXJmYWNlIGZhY3RvcnlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xyXG5mdW5jdGlvbiBjcmVhdGVDb21wb3NlcihvcHRpb25zID0ge30sIFZ1ZUkxOG5MZWdhY3kpIHtcclxuICAgIGNvbnN0IHsgX19yb290IH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgX2lzR2xvYmFsID0gX19yb290ID09PSB1bmRlZmluZWQ7XHJcbiAgICBsZXQgX2luaGVyaXRMb2NhbGUgPSBpc0Jvb2xlYW4ob3B0aW9ucy5pbmhlcml0TG9jYWxlKVxyXG4gICAgICAgID8gb3B0aW9ucy5pbmhlcml0TG9jYWxlXHJcbiAgICAgICAgOiB0cnVlO1xyXG4gICAgY29uc3QgX2xvY2FsZSA9IHJlZihcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgX19yb290ICYmIF9pbmhlcml0TG9jYWxlXHJcbiAgICAgICAgPyBfX3Jvb3QubG9jYWxlLnZhbHVlXHJcbiAgICAgICAgOiBpc1N0cmluZyhvcHRpb25zLmxvY2FsZSlcclxuICAgICAgICAgICAgPyBvcHRpb25zLmxvY2FsZVxyXG4gICAgICAgICAgICA6IERFRkFVTFRfTE9DQUxFKTtcclxuICAgIGNvbnN0IF9mYWxsYmFja0xvY2FsZSA9IHJlZihcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgX19yb290ICYmIF9pbmhlcml0TG9jYWxlXHJcbiAgICAgICAgPyBfX3Jvb3QuZmFsbGJhY2tMb2NhbGUudmFsdWVcclxuICAgICAgICA6IGlzU3RyaW5nKG9wdGlvbnMuZmFsbGJhY2tMb2NhbGUpIHx8XHJcbiAgICAgICAgICAgIGlzQXJyYXkob3B0aW9ucy5mYWxsYmFja0xvY2FsZSkgfHxcclxuICAgICAgICAgICAgaXNQbGFpbk9iamVjdChvcHRpb25zLmZhbGxiYWNrTG9jYWxlKSB8fFxyXG4gICAgICAgICAgICBvcHRpb25zLmZhbGxiYWNrTG9jYWxlID09PSBmYWxzZVxyXG4gICAgICAgICAgICA/IG9wdGlvbnMuZmFsbGJhY2tMb2NhbGVcclxuICAgICAgICAgICAgOiBfbG9jYWxlLnZhbHVlKTtcclxuICAgIGNvbnN0IF9tZXNzYWdlcyA9IHJlZihnZXRMb2NhbGVNZXNzYWdlcyhfbG9jYWxlLnZhbHVlLCBvcHRpb25zKSk7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IF9kYXRldGltZUZvcm1hdHMgPSByZWYoaXNQbGFpbk9iamVjdChvcHRpb25zLmRhdGV0aW1lRm9ybWF0cylcclxuICAgICAgICAgICAgPyBvcHRpb25zLmRhdGV0aW1lRm9ybWF0c1xyXG4gICAgICAgICAgICA6IHsgW19sb2NhbGUudmFsdWVdOiB7fSB9KVxyXG4gICAgICAgIDtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgY29uc3QgX251bWJlckZvcm1hdHMgPSByZWYoaXNQbGFpbk9iamVjdChvcHRpb25zLm51bWJlckZvcm1hdHMpXHJcbiAgICAgICAgICAgID8gb3B0aW9ucy5udW1iZXJGb3JtYXRzXHJcbiAgICAgICAgICAgIDogeyBbX2xvY2FsZS52YWx1ZV06IHt9IH0pXHJcbiAgICAgICAgO1xyXG4gICAgLy8gd2FybmluZyBzdXBwcmVzcyBvcHRpb25zXHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGxldCBfbWlzc2luZ1dhcm4gPSBfX3Jvb3RcclxuICAgICAgICA/IF9fcm9vdC5taXNzaW5nV2FyblxyXG4gICAgICAgIDogaXNCb29sZWFuKG9wdGlvbnMubWlzc2luZ1dhcm4pIHx8IGlzUmVnRXhwKG9wdGlvbnMubWlzc2luZ1dhcm4pXHJcbiAgICAgICAgICAgID8gb3B0aW9ucy5taXNzaW5nV2FyblxyXG4gICAgICAgICAgICA6IHRydWU7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGxldCBfZmFsbGJhY2tXYXJuID0gX19yb290XHJcbiAgICAgICAgPyBfX3Jvb3QuZmFsbGJhY2tXYXJuXHJcbiAgICAgICAgOiBpc0Jvb2xlYW4ob3B0aW9ucy5mYWxsYmFja1dhcm4pIHx8IGlzUmVnRXhwKG9wdGlvbnMuZmFsbGJhY2tXYXJuKVxyXG4gICAgICAgICAgICA/IG9wdGlvbnMuZmFsbGJhY2tXYXJuXHJcbiAgICAgICAgICAgIDogdHJ1ZTtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgbGV0IF9mYWxsYmFja1Jvb3QgPSBfX3Jvb3RcclxuICAgICAgICA/IF9fcm9vdC5mYWxsYmFja1Jvb3RcclxuICAgICAgICA6IGlzQm9vbGVhbihvcHRpb25zLmZhbGxiYWNrUm9vdClcclxuICAgICAgICAgICAgPyBvcHRpb25zLmZhbGxiYWNrUm9vdFxyXG4gICAgICAgICAgICA6IHRydWU7XHJcbiAgICAvLyBjb25maWd1cmUgZmFsbCBiYWNrIHRvIHJvb3RcclxuICAgIGxldCBfZmFsbGJhY2tGb3JtYXQgPSAhIW9wdGlvbnMuZmFsbGJhY2tGb3JtYXQ7XHJcbiAgICAvLyBydW50aW1lIG1pc3NpbmdcclxuICAgIGxldCBfbWlzc2luZyA9IGlzRnVuY3Rpb24ob3B0aW9ucy5taXNzaW5nKSA/IG9wdGlvbnMubWlzc2luZyA6IG51bGw7XHJcbiAgICBsZXQgX3J1bnRpbWVNaXNzaW5nID0gaXNGdW5jdGlvbihvcHRpb25zLm1pc3NpbmcpXHJcbiAgICAgICAgPyBkZWZpbmVDb3JlTWlzc2luZ0hhbmRsZXIob3B0aW9ucy5taXNzaW5nKVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIC8vIHBvc3RUcmFuc2xhdGlvbiBoYW5kbGVyXHJcbiAgICBsZXQgX3Bvc3RUcmFuc2xhdGlvbiA9IGlzRnVuY3Rpb24ob3B0aW9ucy5wb3N0VHJhbnNsYXRpb24pXHJcbiAgICAgICAgPyBvcHRpb25zLnBvc3RUcmFuc2xhdGlvblxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgbGV0IF93YXJuSHRtbE1lc3NhZ2UgPSBfX3Jvb3RcclxuICAgICAgICA/IF9fcm9vdC53YXJuSHRtbE1lc3NhZ2VcclxuICAgICAgICA6IGlzQm9vbGVhbihvcHRpb25zLndhcm5IdG1sTWVzc2FnZSlcclxuICAgICAgICAgICAgPyBvcHRpb25zLndhcm5IdG1sTWVzc2FnZVxyXG4gICAgICAgICAgICA6IHRydWU7XHJcbiAgICBsZXQgX2VzY2FwZVBhcmFtZXRlciA9ICEhb3B0aW9ucy5lc2NhcGVQYXJhbWV0ZXI7XHJcbiAgICAvLyBjdXN0b20gbGlua2VkIG1vZGlmaWVyc1xyXG4gICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICBjb25zdCBfbW9kaWZpZXJzID0gX19yb290XHJcbiAgICAgICAgPyBfX3Jvb3QubW9kaWZpZXJzXHJcbiAgICAgICAgOiBpc1BsYWluT2JqZWN0KG9wdGlvbnMubW9kaWZpZXJzKVxyXG4gICAgICAgICAgICA/IG9wdGlvbnMubW9kaWZpZXJzXHJcbiAgICAgICAgICAgIDoge307XHJcbiAgICAvLyBwbHVyYWxSdWxlc1xyXG4gICAgbGV0IF9wbHVyYWxSdWxlcyA9IG9wdGlvbnMucGx1cmFsUnVsZXMgfHwgKF9fcm9vdCAmJiBfX3Jvb3QucGx1cmFsUnVsZXMpO1xyXG4gICAgLy8gcnVudGltZSBjb250ZXh0XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XHJcbiAgICBsZXQgX2NvbnRleHQ7XHJcbiAgICBjb25zdCBnZXRDb3JlQ29udGV4dCA9ICgpID0+IHtcclxuICAgICAgICBfaXNHbG9iYWwgJiYgc2V0RmFsbGJhY2tDb250ZXh0KG51bGwpO1xyXG4gICAgICAgIGNvbnN0IGN0eE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHZlcnNpb246IFZFUlNJT04sXHJcbiAgICAgICAgICAgIGxvY2FsZTogX2xvY2FsZS52YWx1ZSxcclxuICAgICAgICAgICAgZmFsbGJhY2tMb2NhbGU6IF9mYWxsYmFja0xvY2FsZS52YWx1ZSxcclxuICAgICAgICAgICAgbWVzc2FnZXM6IF9tZXNzYWdlcy52YWx1ZSxcclxuICAgICAgICAgICAgbW9kaWZpZXJzOiBfbW9kaWZpZXJzLFxyXG4gICAgICAgICAgICBwbHVyYWxSdWxlczogX3BsdXJhbFJ1bGVzLFxyXG4gICAgICAgICAgICBtaXNzaW5nOiBfcnVudGltZU1pc3NpbmcgPT09IG51bGwgPyB1bmRlZmluZWQgOiBfcnVudGltZU1pc3NpbmcsXHJcbiAgICAgICAgICAgIG1pc3NpbmdXYXJuOiBfbWlzc2luZ1dhcm4sXHJcbiAgICAgICAgICAgIGZhbGxiYWNrV2FybjogX2ZhbGxiYWNrV2FybixcclxuICAgICAgICAgICAgZmFsbGJhY2tGb3JtYXQ6IF9mYWxsYmFja0Zvcm1hdCxcclxuICAgICAgICAgICAgdW5yZXNvbHZpbmc6IHRydWUsXHJcbiAgICAgICAgICAgIHBvc3RUcmFuc2xhdGlvbjogX3Bvc3RUcmFuc2xhdGlvbiA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IF9wb3N0VHJhbnNsYXRpb24sXHJcbiAgICAgICAgICAgIHdhcm5IdG1sTWVzc2FnZTogX3dhcm5IdG1sTWVzc2FnZSxcclxuICAgICAgICAgICAgZXNjYXBlUGFyYW1ldGVyOiBfZXNjYXBlUGFyYW1ldGVyLFxyXG4gICAgICAgICAgICBtZXNzYWdlUmVzb2x2ZXI6IG9wdGlvbnMubWVzc2FnZVJlc29sdmVyLFxyXG4gICAgICAgICAgICBfX21ldGE6IHsgZnJhbWV3b3JrOiAndnVlJyB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGN0eE9wdGlvbnMuZGF0ZXRpbWVGb3JtYXRzID0gX2RhdGV0aW1lRm9ybWF0cy52YWx1ZTtcclxuICAgICAgICAgICAgY3R4T3B0aW9ucy5udW1iZXJGb3JtYXRzID0gX251bWJlckZvcm1hdHMudmFsdWU7XHJcbiAgICAgICAgICAgIGN0eE9wdGlvbnMuX19kYXRldGltZUZvcm1hdHRlcnMgPSBpc1BsYWluT2JqZWN0KF9jb250ZXh0KVxyXG4gICAgICAgICAgICAgICAgPyBfY29udGV4dC5fX2RhdGV0aW1lRm9ybWF0dGVyc1xyXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGN0eE9wdGlvbnMuX19udW1iZXJGb3JtYXR0ZXJzID0gaXNQbGFpbk9iamVjdChfY29udGV4dClcclxuICAgICAgICAgICAgICAgID8gX2NvbnRleHQuX19udW1iZXJGb3JtYXR0ZXJzXHJcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBjdHhPcHRpb25zLl9fdl9lbWl0dGVyID0gaXNQbGFpbk9iamVjdChfY29udGV4dClcclxuICAgICAgICAgICAgICAgID8gX2NvbnRleHQuX192X2VtaXR0ZXJcclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdHggPSBjcmVhdGVDb3JlQ29udGV4dChjdHhPcHRpb25zKTtcclxuICAgICAgICBfaXNHbG9iYWwgJiYgc2V0RmFsbGJhY2tDb250ZXh0KGN0eCk7XHJcbiAgICAgICAgcmV0dXJuIGN0eDtcclxuICAgIH07XHJcbiAgICBfY29udGV4dCA9IGdldENvcmVDb250ZXh0KCk7XHJcbiAgICB1cGRhdGVGYWxsYmFja0xvY2FsZShfY29udGV4dCwgX2xvY2FsZS52YWx1ZSwgX2ZhbGxiYWNrTG9jYWxlLnZhbHVlKTtcclxuICAgIC8vIHRyYWNrIHJlYWN0aXZpdHlcclxuICAgIGZ1bmN0aW9uIHRyYWNrUmVhY3Rpdml0eVZhbHVlcygpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgX2xvY2FsZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIF9mYWxsYmFja0xvY2FsZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIF9tZXNzYWdlcy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIF9kYXRldGltZUZvcm1hdHMudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBfbnVtYmVyRm9ybWF0cy52YWx1ZVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIDtcclxuICAgIH1cclxuICAgIC8vIGxvY2FsZVxyXG4gICAgY29uc3QgbG9jYWxlID0gY29tcHV0ZWQoe1xyXG4gICAgICAgIGdldDogKCkgPT4gX2xvY2FsZS52YWx1ZSxcclxuICAgICAgICBzZXQ6IHZhbCA9PiB7XHJcbiAgICAgICAgICAgIF9sb2NhbGUudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LmxvY2FsZSA9IF9sb2NhbGUudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBmYWxsYmFja0xvY2FsZVxyXG4gICAgY29uc3QgZmFsbGJhY2tMb2NhbGUgPSBjb21wdXRlZCh7XHJcbiAgICAgICAgZ2V0OiAoKSA9PiBfZmFsbGJhY2tMb2NhbGUudmFsdWUsXHJcbiAgICAgICAgc2V0OiB2YWwgPT4ge1xyXG4gICAgICAgICAgICBfZmFsbGJhY2tMb2NhbGUudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LmZhbGxiYWNrTG9jYWxlID0gX2ZhbGxiYWNrTG9jYWxlLnZhbHVlO1xyXG4gICAgICAgICAgICB1cGRhdGVGYWxsYmFja0xvY2FsZShfY29udGV4dCwgX2xvY2FsZS52YWx1ZSwgdmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIG1lc3NhZ2VzXHJcbiAgICBjb25zdCBtZXNzYWdlcyA9IGNvbXB1dGVkKCgpID0+IF9tZXNzYWdlcy52YWx1ZSk7XHJcbiAgICAvLyBkYXRldGltZUZvcm1hdHNcclxuICAgIGNvbnN0IGRhdGV0aW1lRm9ybWF0cyA9IC8qICNfX1BVUkVfXyovIGNvbXB1dGVkKCgpID0+IF9kYXRldGltZUZvcm1hdHMudmFsdWUpO1xyXG4gICAgLy8gbnVtYmVyRm9ybWF0c1xyXG4gICAgY29uc3QgbnVtYmVyRm9ybWF0cyA9IC8qICNfX1BVUkVfXyovIGNvbXB1dGVkKCgpID0+IF9udW1iZXJGb3JtYXRzLnZhbHVlKTtcclxuICAgIC8vIGdldFBvc3RUcmFuc2xhdGlvbkhhbmRsZXJcclxuICAgIGZ1bmN0aW9uIGdldFBvc3RUcmFuc2xhdGlvbkhhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24oX3Bvc3RUcmFuc2xhdGlvbikgPyBfcG9zdFRyYW5zbGF0aW9uIDogbnVsbDtcclxuICAgIH1cclxuICAgIC8vIHNldFBvc3RUcmFuc2xhdGlvbkhhbmRsZXJcclxuICAgIGZ1bmN0aW9uIHNldFBvc3RUcmFuc2xhdGlvbkhhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgICAgIF9wb3N0VHJhbnNsYXRpb24gPSBoYW5kbGVyO1xyXG4gICAgICAgIF9jb250ZXh0LnBvc3RUcmFuc2xhdGlvbiA9IGhhbmRsZXI7XHJcbiAgICB9XHJcbiAgICAvLyBnZXRNaXNzaW5nSGFuZGxlclxyXG4gICAgZnVuY3Rpb24gZ2V0TWlzc2luZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9taXNzaW5nO1xyXG4gICAgfVxyXG4gICAgLy8gc2V0TWlzc2luZ0hhbmRsZXJcclxuICAgIGZ1bmN0aW9uIHNldE1pc3NpbmdIYW5kbGVyKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoaGFuZGxlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBfcnVudGltZU1pc3NpbmcgPSBkZWZpbmVDb3JlTWlzc2luZ0hhbmRsZXIoaGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9taXNzaW5nID0gaGFuZGxlcjtcclxuICAgICAgICBfY29udGV4dC5taXNzaW5nID0gX3J1bnRpbWVNaXNzaW5nO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaXNSZXNvbHZlZFRyYW5zbGF0ZU1lc3NhZ2UodHlwZSwgYXJnIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGUgIT09ICd0cmFuc2xhdGUnIHx8ICFhcmcucmVzb2x2ZWRNZXNzYWdlO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgd3JhcFdpdGhEZXBzID0gKGZuLCBhcmd1bWVudFBhcnNlciwgd2FyblR5cGUsIGZhbGxiYWNrU3VjY2VzcywgZmFsbGJhY2tGYWlsLCBzdWNjZXNzQ29uZGl0aW9uKSA9PiB7XHJcbiAgICAgICAgdHJhY2tSZWFjdGl2aXR5VmFsdWVzKCk7IC8vIHRyYWNrIHJlYWN0aXZlIGRlcGVuZGVuY3lcclxuICAgICAgICAvLyBOT1RFOiBleHBlcmltZW50YWwgISFcclxuICAgICAgICBsZXQgcmV0O1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19JTlRMSUZZX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgc2V0QWRkaXRpb25hbE1ldGEoZ2V0TWV0YUluZm8oKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV9pc0dsb2JhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LmZhbGxiYWNrQ29udGV4dCA9IF9fcm9vdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdldEZhbGxiYWNrQ29udGV4dCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0ID0gZm4oX2NvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgc2V0QWRkaXRpb25hbE1ldGEobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV9pc0dsb2JhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LmZhbGxiYWNrQ29udGV4dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0ID0gZm4oX2NvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOdW1iZXIocmV0KSAmJiByZXQgPT09IE5PVF9SRU9TTFZFRCkge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCBhcmcyXSA9IGFyZ3VtZW50UGFyc2VyKCk7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgIF9fcm9vdCAmJlxyXG4gICAgICAgICAgICAgICAgaXNTdHJpbmcoa2V5KSAmJlxyXG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZFRyYW5zbGF0ZU1lc3NhZ2Uod2FyblR5cGUsIGFyZzIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2ZhbGxiYWNrUm9vdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChpc1RyYW5zbGF0ZUZhbGxiYWNrV2FybihfZmFsbGJhY2tXYXJuLCBrZXkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVHJhbnNsYXRlTWlzc2luZ1dhcm4oX21pc3NpbmdXYXJuLCBrZXkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oZ2V0V2Fybk1lc3NhZ2UoSTE4bldhcm5Db2Rlcy5GQUxMQkFDS19UT19ST09ULCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogd2FyblR5cGVcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgdnVlLWRldnRvb2xzIHRpbWVsaW5lIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBfX3ZfZW1pdHRlcjogZW1pdHRlciB9ID0gX2NvbnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVtaXR0ZXIgJiYgX2ZhbGxiYWNrUm9vdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoXCJmYWxsYmFja1wiIC8qIEZBTEJBQ0sgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHdhcm5UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG86ICdnbG9iYWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogYCR7d2FyblR5cGV9OiR7a2V5fWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfX3Jvb3QgJiYgX2ZhbGxiYWNrUm9vdFxyXG4gICAgICAgICAgICAgICAgPyBmYWxsYmFja1N1Y2Nlc3MoX19yb290KVxyXG4gICAgICAgICAgICAgICAgOiBmYWxsYmFja0ZhaWwoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3VjY2Vzc0NvbmRpdGlvbihyZXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuVU5FWFBFQ1RFRF9SRVRVUk5fVFlQRSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIHRcclxuICAgIGZ1bmN0aW9uIHQoLi4uYXJncykge1xyXG4gICAgICAgIHJldHVybiB3cmFwV2l0aERlcHMoY29udGV4dCA9PiBSZWZsZWN0LmFwcGx5KHRyYW5zbGF0ZSwgbnVsbCwgW2NvbnRleHQsIC4uLmFyZ3NdKSwgKCkgPT4gcGFyc2VUcmFuc2xhdGVBcmdzKC4uLmFyZ3MpLCAndHJhbnNsYXRlJywgcm9vdCA9PiBSZWZsZWN0LmFwcGx5KHJvb3QudCwgcm9vdCwgWy4uLmFyZ3NdKSwga2V5ID0+IGtleSwgdmFsID0+IGlzU3RyaW5nKHZhbCkpO1xyXG4gICAgfVxyXG4gICAgLy8gcnRcclxuICAgIGZ1bmN0aW9uIHJ0KC4uLmFyZ3MpIHtcclxuICAgICAgICBjb25zdCBbYXJnMSwgYXJnMiwgYXJnM10gPSBhcmdzO1xyXG4gICAgICAgIGlmIChhcmczICYmICFpc09iamVjdChhcmczKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuSU5WQUxJRF9BUkdVTUVOVCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0KC4uLlthcmcxLCBhcmcyLCBhc3NpZ24oeyByZXNvbHZlZE1lc3NhZ2U6IHRydWUgfSwgYXJnMyB8fCB7fSldKTtcclxuICAgIH1cclxuICAgIC8vIGRcclxuICAgIGZ1bmN0aW9uIGQoLi4uYXJncykge1xyXG4gICAgICAgIHJldHVybiB3cmFwV2l0aERlcHMoY29udGV4dCA9PiBSZWZsZWN0LmFwcGx5KGRhdGV0aW1lLCBudWxsLCBbY29udGV4dCwgLi4uYXJnc10pLCAoKSA9PiBwYXJzZURhdGVUaW1lQXJncyguLi5hcmdzKSwgJ2RhdGV0aW1lIGZvcm1hdCcsIHJvb3QgPT4gUmVmbGVjdC5hcHBseShyb290LmQsIHJvb3QsIFsuLi5hcmdzXSksICgpID0+IE1JU1NJTkdfUkVTT0xWRV9WQUxVRSwgdmFsID0+IGlzU3RyaW5nKHZhbCkpO1xyXG4gICAgfVxyXG4gICAgLy8gblxyXG4gICAgZnVuY3Rpb24gbiguLi5hcmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBXaXRoRGVwcyhjb250ZXh0ID0+IFJlZmxlY3QuYXBwbHkobnVtYmVyLCBudWxsLCBbY29udGV4dCwgLi4uYXJnc10pLCAoKSA9PiBwYXJzZU51bWJlckFyZ3MoLi4uYXJncyksICdudW1iZXIgZm9ybWF0Jywgcm9vdCA9PiBSZWZsZWN0LmFwcGx5KHJvb3Qubiwgcm9vdCwgWy4uLmFyZ3NdKSwgKCkgPT4gTUlTU0lOR19SRVNPTFZFX1ZBTFVFLCB2YWwgPT4gaXNTdHJpbmcodmFsKSk7XHJcbiAgICB9XHJcbiAgICAvLyBmb3IgY3VzdG9tIHByb2Nlc3NvclxyXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplKHZhbHVlcykge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZXMubWFwKHZhbCA9PiBpc1N0cmluZyh2YWwpIHx8IGlzTnVtYmVyKHZhbCkgfHwgaXNCb29sZWFuKHZhbClcclxuICAgICAgICAgICAgPyBjcmVhdGVUZXh0Tm9kZShTdHJpbmcodmFsKSlcclxuICAgICAgICAgICAgOiB2YWwpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaW50ZXJwb2xhdGUgPSAodmFsKSA9PiB2YWw7XHJcbiAgICBjb25zdCBwcm9jZXNzb3IgPSB7XHJcbiAgICAgICAgbm9ybWFsaXplLFxyXG4gICAgICAgIGludGVycG9sYXRlLFxyXG4gICAgICAgIHR5cGU6ICd2bm9kZSdcclxuICAgIH07XHJcbiAgICAvLyB0cmFuc3JhdGVWTm9kZSwgdXNpbmcgZm9yIGBpMThuLXRgIGNvbXBvbmVudFxyXG4gICAgZnVuY3Rpb24gdHJhbnNyYXRlVk5vZGUoLi4uYXJncykge1xyXG4gICAgICAgIHJldHVybiB3cmFwV2l0aERlcHMoY29udGV4dCA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IF9jb250ZXh0ID0gY29udGV4dDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIF9jb250ZXh0LnByb2Nlc3NvciA9IHByb2Nlc3NvcjtcclxuICAgICAgICAgICAgICAgIHJldCA9IFJlZmxlY3QuYXBwbHkodHJhbnNsYXRlLCBudWxsLCBbX2NvbnRleHQsIC4uLmFyZ3NdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgIF9jb250ZXh0LnByb2Nlc3NvciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9LCAoKSA9PiBwYXJzZVRyYW5zbGF0ZUFyZ3MoLi4uYXJncyksICd0cmFuc2xhdGUnLCBcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHJvb3QgPT4gcm9vdFtUcmFuc3JhdGVWTm9kZVN5bWJvbF0oLi4uYXJncyksIGtleSA9PiBbY3JlYXRlVGV4dE5vZGUoa2V5KV0sIHZhbCA9PiBpc0FycmF5KHZhbCkpO1xyXG4gICAgfVxyXG4gICAgLy8gbnVtYmVyUGFydHMsIHVzaW5nIGZvciBgaTE4bi1uYCBjb21wb25lbnRcclxuICAgIGZ1bmN0aW9uIG51bWJlclBhcnRzKC4uLmFyZ3MpIHtcclxuICAgICAgICByZXR1cm4gd3JhcFdpdGhEZXBzKGNvbnRleHQgPT4gUmVmbGVjdC5hcHBseShudW1iZXIsIG51bGwsIFtjb250ZXh0LCAuLi5hcmdzXSksICgpID0+IHBhcnNlTnVtYmVyQXJncyguLi5hcmdzKSwgJ251bWJlciBmb3JtYXQnLCBcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHJvb3QgPT4gcm9vdFtOdW1iZXJQYXJ0c1N5bWJvbF0oLi4uYXJncyksICgpID0+IFtdLCB2YWwgPT4gaXNTdHJpbmcodmFsKSB8fCBpc0FycmF5KHZhbCkpO1xyXG4gICAgfVxyXG4gICAgLy8gZGF0ZXRpbWVQYXJ0cywgdXNpbmcgZm9yIGBpMThuLWRgIGNvbXBvbmVudFxyXG4gICAgZnVuY3Rpb24gZGF0ZXRpbWVQYXJ0cyguLi5hcmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBXaXRoRGVwcyhjb250ZXh0ID0+IFJlZmxlY3QuYXBwbHkoZGF0ZXRpbWUsIG51bGwsIFtjb250ZXh0LCAuLi5hcmdzXSksICgpID0+IHBhcnNlRGF0ZVRpbWVBcmdzKC4uLmFyZ3MpLCAnZGF0ZXRpbWUgZm9ybWF0JywgXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICByb290ID0+IHJvb3RbRGF0ZXRpbWVQYXJ0c1N5bWJvbF0oLi4uYXJncyksICgpID0+IFtdLCB2YWwgPT4gaXNTdHJpbmcodmFsKSB8fCBpc0FycmF5KHZhbCkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0UGx1cmFsUnVsZXMocnVsZXMpIHtcclxuICAgICAgICBfcGx1cmFsUnVsZXMgPSBydWxlcztcclxuICAgICAgICBfY29udGV4dC5wbHVyYWxSdWxlcyA9IF9wbHVyYWxSdWxlcztcclxuICAgIH1cclxuICAgIC8vIHRlXHJcbiAgICBmdW5jdGlvbiB0ZShrZXksIGxvY2FsZSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldExvY2FsZSA9IGlzU3RyaW5nKGxvY2FsZSkgPyBsb2NhbGUgOiBfbG9jYWxlLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnZXRMb2NhbGVNZXNzYWdlKHRhcmdldExvY2FsZSk7XHJcbiAgICAgICAgcmV0dXJuIF9jb250ZXh0Lm1lc3NhZ2VSZXNvbHZlcihtZXNzYWdlLCBrZXkpICE9PSBudWxsO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVzb2x2ZU1lc3NhZ2VzKGtleSkge1xyXG4gICAgICAgIGxldCBtZXNzYWdlcyA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgbG9jYWxlcyA9IGZhbGxiYWNrV2l0aExvY2FsZUNoYWluKF9jb250ZXh0LCBfZmFsbGJhY2tMb2NhbGUudmFsdWUsIF9sb2NhbGUudmFsdWUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRMb2NhbGVNZXNzYWdlcyA9IF9tZXNzYWdlcy52YWx1ZVtsb2NhbGVzW2ldXSB8fCB7fTtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZVZhbHVlID0gX2NvbnRleHQubWVzc2FnZVJlc29sdmVyKHRhcmdldExvY2FsZU1lc3NhZ2VzLCBrZXkpO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZVZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzID0gbWVzc2FnZVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xyXG4gICAgfVxyXG4gICAgLy8gdG1cclxuICAgIGZ1bmN0aW9uIHRtKGtleSkge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzb2x2ZU1lc3NhZ2VzKGtleSk7XHJcbiAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzICE9IG51bGxcclxuICAgICAgICAgICAgPyBtZXNzYWdlc1xyXG4gICAgICAgICAgICA6IF9fcm9vdFxyXG4gICAgICAgICAgICAgICAgPyBfX3Jvb3QudG0oa2V5KSB8fCB7fVxyXG4gICAgICAgICAgICAgICAgOiB7fTtcclxuICAgIH1cclxuICAgIC8vIGdldExvY2FsZU1lc3NhZ2VcclxuICAgIGZ1bmN0aW9uIGdldExvY2FsZU1lc3NhZ2UobG9jYWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIChfbWVzc2FnZXMudmFsdWVbbG9jYWxlXSB8fCB7fSk7XHJcbiAgICB9XHJcbiAgICAvLyBzZXRMb2NhbGVNZXNzYWdlXHJcbiAgICBmdW5jdGlvbiBzZXRMb2NhbGVNZXNzYWdlKGxvY2FsZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIF9tZXNzYWdlcy52YWx1ZVtsb2NhbGVdID0gbWVzc2FnZTtcclxuICAgICAgICBfY29udGV4dC5tZXNzYWdlcyA9IF9tZXNzYWdlcy52YWx1ZTtcclxuICAgIH1cclxuICAgIC8vIG1lcmdlTG9jYWxlTWVzc2FnZVxyXG4gICAgZnVuY3Rpb24gbWVyZ2VMb2NhbGVNZXNzYWdlKGxvY2FsZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIF9tZXNzYWdlcy52YWx1ZVtsb2NhbGVdID0gX21lc3NhZ2VzLnZhbHVlW2xvY2FsZV0gfHwge307XHJcbiAgICAgICAgZGVlcENvcHkobWVzc2FnZSwgX21lc3NhZ2VzLnZhbHVlW2xvY2FsZV0pO1xyXG4gICAgICAgIF9jb250ZXh0Lm1lc3NhZ2VzID0gX21lc3NhZ2VzLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgLy8gZ2V0RGF0ZVRpbWVGb3JtYXRcclxuICAgIGZ1bmN0aW9uIGdldERhdGVUaW1lRm9ybWF0KGxvY2FsZSkge1xyXG4gICAgICAgIHJldHVybiBfZGF0ZXRpbWVGb3JtYXRzLnZhbHVlW2xvY2FsZV0gfHwge307XHJcbiAgICB9XHJcbiAgICAvLyBzZXREYXRlVGltZUZvcm1hdFxyXG4gICAgZnVuY3Rpb24gc2V0RGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBmb3JtYXQpIHtcclxuICAgICAgICBfZGF0ZXRpbWVGb3JtYXRzLnZhbHVlW2xvY2FsZV0gPSBmb3JtYXQ7XHJcbiAgICAgICAgX2NvbnRleHQuZGF0ZXRpbWVGb3JtYXRzID0gX2RhdGV0aW1lRm9ybWF0cy52YWx1ZTtcclxuICAgICAgICBjbGVhckRhdGVUaW1lRm9ybWF0KF9jb250ZXh0LCBsb2NhbGUsIGZvcm1hdCk7XHJcbiAgICB9XHJcbiAgICAvLyBtZXJnZURhdGVUaW1lRm9ybWF0XHJcbiAgICBmdW5jdGlvbiBtZXJnZURhdGVUaW1lRm9ybWF0KGxvY2FsZSwgZm9ybWF0KSB7XHJcbiAgICAgICAgX2RhdGV0aW1lRm9ybWF0cy52YWx1ZVtsb2NhbGVdID0gYXNzaWduKF9kYXRldGltZUZvcm1hdHMudmFsdWVbbG9jYWxlXSB8fCB7fSwgZm9ybWF0KTtcclxuICAgICAgICBfY29udGV4dC5kYXRldGltZUZvcm1hdHMgPSBfZGF0ZXRpbWVGb3JtYXRzLnZhbHVlO1xyXG4gICAgICAgIGNsZWFyRGF0ZVRpbWVGb3JtYXQoX2NvbnRleHQsIGxvY2FsZSwgZm9ybWF0KTtcclxuICAgIH1cclxuICAgIC8vIGdldE51bWJlckZvcm1hdFxyXG4gICAgZnVuY3Rpb24gZ2V0TnVtYmVyRm9ybWF0KGxvY2FsZSkge1xyXG4gICAgICAgIHJldHVybiBfbnVtYmVyRm9ybWF0cy52YWx1ZVtsb2NhbGVdIHx8IHt9O1xyXG4gICAgfVxyXG4gICAgLy8gc2V0TnVtYmVyRm9ybWF0XHJcbiAgICBmdW5jdGlvbiBzZXROdW1iZXJGb3JtYXQobG9jYWxlLCBmb3JtYXQpIHtcclxuICAgICAgICBfbnVtYmVyRm9ybWF0cy52YWx1ZVtsb2NhbGVdID0gZm9ybWF0O1xyXG4gICAgICAgIF9jb250ZXh0Lm51bWJlckZvcm1hdHMgPSBfbnVtYmVyRm9ybWF0cy52YWx1ZTtcclxuICAgICAgICBjbGVhck51bWJlckZvcm1hdChfY29udGV4dCwgbG9jYWxlLCBmb3JtYXQpO1xyXG4gICAgfVxyXG4gICAgLy8gbWVyZ2VOdW1iZXJGb3JtYXRcclxuICAgIGZ1bmN0aW9uIG1lcmdlTnVtYmVyRm9ybWF0KGxvY2FsZSwgZm9ybWF0KSB7XHJcbiAgICAgICAgX251bWJlckZvcm1hdHMudmFsdWVbbG9jYWxlXSA9IGFzc2lnbihfbnVtYmVyRm9ybWF0cy52YWx1ZVtsb2NhbGVdIHx8IHt9LCBmb3JtYXQpO1xyXG4gICAgICAgIF9jb250ZXh0Lm51bWJlckZvcm1hdHMgPSBfbnVtYmVyRm9ybWF0cy52YWx1ZTtcclxuICAgICAgICBjbGVhck51bWJlckZvcm1hdChfY29udGV4dCwgbG9jYWxlLCBmb3JtYXQpO1xyXG4gICAgfVxyXG4gICAgLy8gZm9yIGRlYnVnXHJcbiAgICBjb21wb3NlcklEKys7XHJcbiAgICAvLyB3YXRjaCByb290IGxvY2FsZSAmIGZhbGxiYWNrTG9jYWxlXHJcbiAgICBpZiAoX19yb290ICYmIGluQnJvd3Nlcikge1xyXG4gICAgICAgIHdhdGNoKF9fcm9vdC5sb2NhbGUsICh2YWwpID0+IHtcclxuICAgICAgICAgICAgaWYgKF9pbmhlcml0TG9jYWxlKSB7XHJcbiAgICAgICAgICAgICAgICBfbG9jYWxlLnZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgX2NvbnRleHQubG9jYWxlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRmFsbGJhY2tMb2NhbGUoX2NvbnRleHQsIF9sb2NhbGUudmFsdWUsIF9mYWxsYmFja0xvY2FsZS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB3YXRjaChfX3Jvb3QuZmFsbGJhY2tMb2NhbGUsICh2YWwpID0+IHtcclxuICAgICAgICAgICAgaWYgKF9pbmhlcml0TG9jYWxlKSB7XHJcbiAgICAgICAgICAgICAgICBfZmFsbGJhY2tMb2NhbGUudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICBfY29udGV4dC5mYWxsYmFja0xvY2FsZSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUZhbGxiYWNrTG9jYWxlKF9jb250ZXh0LCBfbG9jYWxlLnZhbHVlLCBfZmFsbGJhY2tMb2NhbGUudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBkZWZpbmUgYmFzaWMgY29tcG9zaXRpb24gQVBJIVxyXG4gICAgY29uc3QgY29tcG9zZXIgPSB7XHJcbiAgICAgICAgaWQ6IGNvbXBvc2VySUQsXHJcbiAgICAgICAgbG9jYWxlLFxyXG4gICAgICAgIGZhbGxiYWNrTG9jYWxlLFxyXG4gICAgICAgIGdldCBpbmhlcml0TG9jYWxlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2luaGVyaXRMb2NhbGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgaW5oZXJpdExvY2FsZSh2YWwpIHtcclxuICAgICAgICAgICAgX2luaGVyaXRMb2NhbGUgPSB2YWw7XHJcbiAgICAgICAgICAgIGlmICh2YWwgJiYgX19yb290KSB7XHJcbiAgICAgICAgICAgICAgICBfbG9jYWxlLnZhbHVlID0gX19yb290LmxvY2FsZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIF9mYWxsYmFja0xvY2FsZS52YWx1ZSA9IF9fcm9vdC5mYWxsYmFja0xvY2FsZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUZhbGxiYWNrTG9jYWxlKF9jb250ZXh0LCBfbG9jYWxlLnZhbHVlLCBfZmFsbGJhY2tMb2NhbGUudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgYXZhaWxhYmxlTG9jYWxlcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKF9tZXNzYWdlcy52YWx1ZSkuc29ydCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVzc2FnZXMsXHJcbiAgICAgICAgZ2V0IG1vZGlmaWVycygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9tb2RpZmllcnM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgcGx1cmFsUnVsZXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfcGx1cmFsUnVsZXMgfHwge307XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgaXNHbG9iYWwoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaXNHbG9iYWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgbWlzc2luZ1dhcm4oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfbWlzc2luZ1dhcm47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgbWlzc2luZ1dhcm4odmFsKSB7XHJcbiAgICAgICAgICAgIF9taXNzaW5nV2FybiA9IHZhbDtcclxuICAgICAgICAgICAgX2NvbnRleHQubWlzc2luZ1dhcm4gPSBfbWlzc2luZ1dhcm47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgZmFsbGJhY2tXYXJuKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2ZhbGxiYWNrV2FybjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCBmYWxsYmFja1dhcm4odmFsKSB7XHJcbiAgICAgICAgICAgIF9mYWxsYmFja1dhcm4gPSB2YWw7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LmZhbGxiYWNrV2FybiA9IF9mYWxsYmFja1dhcm47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgZmFsbGJhY2tSb290KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2ZhbGxiYWNrUm9vdDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCBmYWxsYmFja1Jvb3QodmFsKSB7XHJcbiAgICAgICAgICAgIF9mYWxsYmFja1Jvb3QgPSB2YWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgZmFsbGJhY2tGb3JtYXQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfZmFsbGJhY2tGb3JtYXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgZmFsbGJhY2tGb3JtYXQodmFsKSB7XHJcbiAgICAgICAgICAgIF9mYWxsYmFja0Zvcm1hdCA9IHZhbDtcclxuICAgICAgICAgICAgX2NvbnRleHQuZmFsbGJhY2tGb3JtYXQgPSBfZmFsbGJhY2tGb3JtYXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgd2Fybkh0bWxNZXNzYWdlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3dhcm5IdG1sTWVzc2FnZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCB3YXJuSHRtbE1lc3NhZ2UodmFsKSB7XHJcbiAgICAgICAgICAgIF93YXJuSHRtbE1lc3NhZ2UgPSB2YWw7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lndhcm5IdG1sTWVzc2FnZSA9IHZhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldCBlc2NhcGVQYXJhbWV0ZXIoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfZXNjYXBlUGFyYW1ldGVyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IGVzY2FwZVBhcmFtZXRlcih2YWwpIHtcclxuICAgICAgICAgICAgX2VzY2FwZVBhcmFtZXRlciA9IHZhbDtcclxuICAgICAgICAgICAgX2NvbnRleHQuZXNjYXBlUGFyYW1ldGVyID0gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdCxcclxuICAgICAgICBnZXRMb2NhbGVNZXNzYWdlLFxyXG4gICAgICAgIHNldExvY2FsZU1lc3NhZ2UsXHJcbiAgICAgICAgbWVyZ2VMb2NhbGVNZXNzYWdlLFxyXG4gICAgICAgIGdldFBvc3RUcmFuc2xhdGlvbkhhbmRsZXIsXHJcbiAgICAgICAgc2V0UG9zdFRyYW5zbGF0aW9uSGFuZGxlcixcclxuICAgICAgICBnZXRNaXNzaW5nSGFuZGxlcixcclxuICAgICAgICBzZXRNaXNzaW5nSGFuZGxlcixcclxuICAgICAgICBbU2V0UGx1cmFsUnVsZXNTeW1ib2xdOiBzZXRQbHVyYWxSdWxlc1xyXG4gICAgfTtcclxuICAgIHtcclxuICAgICAgICBjb21wb3Nlci5kYXRldGltZUZvcm1hdHMgPSBkYXRldGltZUZvcm1hdHM7XHJcbiAgICAgICAgY29tcG9zZXIubnVtYmVyRm9ybWF0cyA9IG51bWJlckZvcm1hdHM7XHJcbiAgICAgICAgY29tcG9zZXIucnQgPSBydDtcclxuICAgICAgICBjb21wb3Nlci50ZSA9IHRlO1xyXG4gICAgICAgIGNvbXBvc2VyLnRtID0gdG07XHJcbiAgICAgICAgY29tcG9zZXIuZCA9IGQ7XHJcbiAgICAgICAgY29tcG9zZXIubiA9IG47XHJcbiAgICAgICAgY29tcG9zZXIuZ2V0RGF0ZVRpbWVGb3JtYXQgPSBnZXREYXRlVGltZUZvcm1hdDtcclxuICAgICAgICBjb21wb3Nlci5zZXREYXRlVGltZUZvcm1hdCA9IHNldERhdGVUaW1lRm9ybWF0O1xyXG4gICAgICAgIGNvbXBvc2VyLm1lcmdlRGF0ZVRpbWVGb3JtYXQgPSBtZXJnZURhdGVUaW1lRm9ybWF0O1xyXG4gICAgICAgIGNvbXBvc2VyLmdldE51bWJlckZvcm1hdCA9IGdldE51bWJlckZvcm1hdDtcclxuICAgICAgICBjb21wb3Nlci5zZXROdW1iZXJGb3JtYXQgPSBzZXROdW1iZXJGb3JtYXQ7XHJcbiAgICAgICAgY29tcG9zZXIubWVyZ2VOdW1iZXJGb3JtYXQgPSBtZXJnZU51bWJlckZvcm1hdDtcclxuICAgICAgICBjb21wb3NlcltJbmVqY3RXaXRoT3B0aW9uXSA9IG9wdGlvbnMuX19pbmplY3RXaXRoT3B0aW9uO1xyXG4gICAgICAgIGNvbXBvc2VyW1RyYW5zcmF0ZVZOb2RlU3ltYm9sXSA9IHRyYW5zcmF0ZVZOb2RlO1xyXG4gICAgICAgIGNvbXBvc2VyW0RhdGV0aW1lUGFydHNTeW1ib2xdID0gZGF0ZXRpbWVQYXJ0cztcclxuICAgICAgICBjb21wb3NlcltOdW1iZXJQYXJ0c1N5bWJvbF0gPSBudW1iZXJQYXJ0cztcclxuICAgIH1cclxuICAgIC8vIGZvciB2dWUtZGV2dG9vbHMgdGltZWxpbmUgZXZlbnRcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBjb21wb3NlcltFbmFibGVFbWl0dGVyXSA9IChlbWl0dGVyKSA9PiB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Ll9fdl9lbWl0dGVyID0gZW1pdHRlcjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbXBvc2VyW0Rpc2FibGVFbWl0dGVyXSA9ICgpID0+IHtcclxuICAgICAgICAgICAgX2NvbnRleHQuX192X2VtaXR0ZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb21wb3NlcjtcclxufVxyXG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xyXG4vKipcclxuICogQ29udmVydCB0byBJMThuIENvbXBvc2VyIE9wdGlvbnMgZnJvbSBWdWVJMThuIE9wdGlvbnNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBjb252ZXJ0Q29tcG9zZXJPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGxvY2FsZSA9IGlzU3RyaW5nKG9wdGlvbnMubG9jYWxlKSA/IG9wdGlvbnMubG9jYWxlIDogREVGQVVMVF9MT0NBTEU7XHJcbiAgICBjb25zdCBmYWxsYmFja0xvY2FsZSA9IGlzU3RyaW5nKG9wdGlvbnMuZmFsbGJhY2tMb2NhbGUpIHx8XHJcbiAgICAgICAgaXNBcnJheShvcHRpb25zLmZhbGxiYWNrTG9jYWxlKSB8fFxyXG4gICAgICAgIGlzUGxhaW5PYmplY3Qob3B0aW9ucy5mYWxsYmFja0xvY2FsZSkgfHxcclxuICAgICAgICBvcHRpb25zLmZhbGxiYWNrTG9jYWxlID09PSBmYWxzZVxyXG4gICAgICAgID8gb3B0aW9ucy5mYWxsYmFja0xvY2FsZVxyXG4gICAgICAgIDogbG9jYWxlO1xyXG4gICAgY29uc3QgbWlzc2luZyA9IGlzRnVuY3Rpb24ob3B0aW9ucy5taXNzaW5nKSA/IG9wdGlvbnMubWlzc2luZyA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IG1pc3NpbmdXYXJuID0gaXNCb29sZWFuKG9wdGlvbnMuc2lsZW50VHJhbnNsYXRpb25XYXJuKSB8fFxyXG4gICAgICAgIGlzUmVnRXhwKG9wdGlvbnMuc2lsZW50VHJhbnNsYXRpb25XYXJuKVxyXG4gICAgICAgID8gIW9wdGlvbnMuc2lsZW50VHJhbnNsYXRpb25XYXJuXHJcbiAgICAgICAgOiB0cnVlO1xyXG4gICAgY29uc3QgZmFsbGJhY2tXYXJuID0gaXNCb29sZWFuKG9wdGlvbnMuc2lsZW50RmFsbGJhY2tXYXJuKSB8fFxyXG4gICAgICAgIGlzUmVnRXhwKG9wdGlvbnMuc2lsZW50RmFsbGJhY2tXYXJuKVxyXG4gICAgICAgID8gIW9wdGlvbnMuc2lsZW50RmFsbGJhY2tXYXJuXHJcbiAgICAgICAgOiB0cnVlO1xyXG4gICAgY29uc3QgZmFsbGJhY2tSb290ID0gaXNCb29sZWFuKG9wdGlvbnMuZmFsbGJhY2tSb290KVxyXG4gICAgICAgID8gb3B0aW9ucy5mYWxsYmFja1Jvb3RcclxuICAgICAgICA6IHRydWU7XHJcbiAgICBjb25zdCBmYWxsYmFja0Zvcm1hdCA9ICEhb3B0aW9ucy5mb3JtYXRGYWxsYmFja01lc3NhZ2VzO1xyXG4gICAgY29uc3QgbW9kaWZpZXJzID0gaXNQbGFpbk9iamVjdChvcHRpb25zLm1vZGlmaWVycykgPyBvcHRpb25zLm1vZGlmaWVycyA6IHt9O1xyXG4gICAgY29uc3QgcGx1cmFsaXphdGlvblJ1bGVzID0gb3B0aW9ucy5wbHVyYWxpemF0aW9uUnVsZXM7XHJcbiAgICBjb25zdCBwb3N0VHJhbnNsYXRpb24gPSBpc0Z1bmN0aW9uKG9wdGlvbnMucG9zdFRyYW5zbGF0aW9uKVxyXG4gICAgICAgID8gb3B0aW9ucy5wb3N0VHJhbnNsYXRpb25cclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHdhcm5IdG1sTWVzc2FnZSA9IGlzU3RyaW5nKG9wdGlvbnMud2Fybkh0bWxJbk1lc3NhZ2UpXHJcbiAgICAgICAgPyBvcHRpb25zLndhcm5IdG1sSW5NZXNzYWdlICE9PSAnb2ZmJ1xyXG4gICAgICAgIDogdHJ1ZTtcclxuICAgIGNvbnN0IGVzY2FwZVBhcmFtZXRlciA9ICEhb3B0aW9ucy5lc2NhcGVQYXJhbWV0ZXJIdG1sO1xyXG4gICAgY29uc3QgaW5oZXJpdExvY2FsZSA9IGlzQm9vbGVhbihvcHRpb25zLnN5bmMpID8gb3B0aW9ucy5zeW5jIDogdHJ1ZTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgb3B0aW9ucy5mb3JtYXR0ZXIpIHtcclxuICAgICAgICB3YXJuKGdldFdhcm5NZXNzYWdlKEkxOG5XYXJuQ29kZXMuTk9UX1NVUFBPUlRFRF9GT1JNQVRURVIpKTtcclxuICAgIH1cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgb3B0aW9ucy5wcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQpIHtcclxuICAgICAgICB3YXJuKGdldFdhcm5NZXNzYWdlKEkxOG5XYXJuQ29kZXMuTk9UX1NVUFBPUlRFRF9QUkVTRVJWRV9ESVJFQ1RJVkUpKTtcclxuICAgIH1cclxuICAgIGxldCBtZXNzYWdlcyA9IG9wdGlvbnMubWVzc2FnZXM7XHJcbiAgICBpZiAoaXNQbGFpbk9iamVjdChvcHRpb25zLnNoYXJlZE1lc3NhZ2VzKSkge1xyXG4gICAgICAgIGNvbnN0IHNoYXJlZE1lc3NhZ2VzID0gb3B0aW9ucy5zaGFyZWRNZXNzYWdlcztcclxuICAgICAgICBjb25zdCBsb2NhbGVzID0gT2JqZWN0LmtleXMoc2hhcmVkTWVzc2FnZXMpO1xyXG4gICAgICAgIG1lc3NhZ2VzID0gbG9jYWxlcy5yZWR1Y2UoKG1lc3NhZ2VzLCBsb2NhbGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IG1lc3NhZ2VzW2xvY2FsZV0gfHwgKG1lc3NhZ2VzW2xvY2FsZV0gPSB7fSk7XHJcbiAgICAgICAgICAgIGFzc2lnbihtZXNzYWdlLCBzaGFyZWRNZXNzYWdlc1tsb2NhbGVdKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xyXG4gICAgICAgIH0sIChtZXNzYWdlcyB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBfX2kxOG4sIF9fcm9vdCwgX19pbmplY3RXaXRoT3B0aW9uIH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgZGF0ZXRpbWVGb3JtYXRzID0gb3B0aW9ucy5kYXRldGltZUZvcm1hdHM7XHJcbiAgICBjb25zdCBudW1iZXJGb3JtYXRzID0gb3B0aW9ucy5udW1iZXJGb3JtYXRzO1xyXG4gICAgY29uc3QgZmxhdEpzb24gPSBvcHRpb25zLmZsYXRKc29uO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgZmFsbGJhY2tMb2NhbGUsXHJcbiAgICAgICAgbWVzc2FnZXMsXHJcbiAgICAgICAgZmxhdEpzb24sXHJcbiAgICAgICAgZGF0ZXRpbWVGb3JtYXRzLFxyXG4gICAgICAgIG51bWJlckZvcm1hdHMsXHJcbiAgICAgICAgbWlzc2luZyxcclxuICAgICAgICBtaXNzaW5nV2FybixcclxuICAgICAgICBmYWxsYmFja1dhcm4sXHJcbiAgICAgICAgZmFsbGJhY2tSb290LFxyXG4gICAgICAgIGZhbGxiYWNrRm9ybWF0LFxyXG4gICAgICAgIG1vZGlmaWVycyxcclxuICAgICAgICBwbHVyYWxSdWxlczogcGx1cmFsaXphdGlvblJ1bGVzLFxyXG4gICAgICAgIHBvc3RUcmFuc2xhdGlvbixcclxuICAgICAgICB3YXJuSHRtbE1lc3NhZ2UsXHJcbiAgICAgICAgZXNjYXBlUGFyYW1ldGVyLFxyXG4gICAgICAgIG1lc3NhZ2VSZXNvbHZlcjogb3B0aW9ucy5tZXNzYWdlUmVzb2x2ZXIsXHJcbiAgICAgICAgaW5oZXJpdExvY2FsZSxcclxuICAgICAgICBfX2kxOG4sXHJcbiAgICAgICAgX19yb290LFxyXG4gICAgICAgIF9faW5qZWN0V2l0aE9wdGlvblxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogY3JlYXRlIFZ1ZUkxOG4gaW50ZXJmYWNlIGZhY3RvcnlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xyXG5mdW5jdGlvbiBjcmVhdGVWdWVJMThuKG9wdGlvbnMgPSB7fSwgVnVlSTE4bkxlZ2FjeSkge1xyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvc2VyID0gY3JlYXRlQ29tcG9zZXIoY29udmVydENvbXBvc2VyT3B0aW9ucyhvcHRpb25zKSk7XHJcbiAgICAgICAgLy8gZGVmaW5lcyBWdWVJMThuXHJcbiAgICAgICAgY29uc3QgdnVlSTE4biA9IHtcclxuICAgICAgICAgICAgLy8gaWRcclxuICAgICAgICAgICAgaWQ6IGNvbXBvc2VyLmlkLFxyXG4gICAgICAgICAgICAvLyBsb2NhbGVcclxuICAgICAgICAgICAgZ2V0IGxvY2FsZSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci5sb2NhbGUudmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCBsb2NhbGUodmFsKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb3Nlci5sb2NhbGUudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrTG9jYWxlXHJcbiAgICAgICAgICAgIGdldCBmYWxsYmFja0xvY2FsZSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci5mYWxsYmFja0xvY2FsZS52YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0IGZhbGxiYWNrTG9jYWxlKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9zZXIuZmFsbGJhY2tMb2NhbGUudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgIGdldCBtZXNzYWdlcygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci5tZXNzYWdlcy52YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZGF0ZXRpbWVGb3JtYXRzXHJcbiAgICAgICAgICAgIGdldCBkYXRldGltZUZvcm1hdHMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9zZXIuZGF0ZXRpbWVGb3JtYXRzLnZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBudW1iZXJGb3JtYXRzXHJcbiAgICAgICAgICAgIGdldCBudW1iZXJGb3JtYXRzKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvc2VyLm51bWJlckZvcm1hdHMudmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGF2YWlsYWJsZUxvY2FsZXNcclxuICAgICAgICAgICAgZ2V0IGF2YWlsYWJsZUxvY2FsZXMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9zZXIuYXZhaWxhYmxlTG9jYWxlcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZm9ybWF0dGVyXHJcbiAgICAgICAgICAgIGdldCBmb3JtYXR0ZXIoKSB7XHJcbiAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihnZXRXYXJuTWVzc2FnZShJMThuV2FybkNvZGVzLk5PVF9TVVBQT1JURURfRk9STUFUVEVSKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBkdW1teVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCBmb3JtYXR0ZXIodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihnZXRXYXJuTWVzc2FnZShJMThuV2FybkNvZGVzLk5PVF9TVVBQT1JURURfRk9STUFUVEVSKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIG1pc3NpbmdcclxuICAgICAgICAgICAgZ2V0IG1pc3NpbmcoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9zZXIuZ2V0TWlzc2luZ0hhbmRsZXIoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0IG1pc3NpbmcoaGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgY29tcG9zZXIuc2V0TWlzc2luZ0hhbmRsZXIoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHNpbGVudFRyYW5zbGF0aW9uV2FyblxyXG4gICAgICAgICAgICBnZXQgc2lsZW50VHJhbnNsYXRpb25XYXJuKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzQm9vbGVhbihjb21wb3Nlci5taXNzaW5nV2FybilcclxuICAgICAgICAgICAgICAgICAgICA/ICFjb21wb3Nlci5taXNzaW5nV2FyblxyXG4gICAgICAgICAgICAgICAgICAgIDogY29tcG9zZXIubWlzc2luZ1dhcm47XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCBzaWxlbnRUcmFuc2xhdGlvbldhcm4odmFsKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb3Nlci5taXNzaW5nV2FybiA9IGlzQm9vbGVhbih2YWwpID8gIXZhbCA6IHZhbDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gc2lsZW50RmFsbGJhY2tXYXJuXHJcbiAgICAgICAgICAgIGdldCBzaWxlbnRGYWxsYmFja1dhcm4oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNCb29sZWFuKGNvbXBvc2VyLmZhbGxiYWNrV2FybilcclxuICAgICAgICAgICAgICAgICAgICA/ICFjb21wb3Nlci5mYWxsYmFja1dhcm5cclxuICAgICAgICAgICAgICAgICAgICA6IGNvbXBvc2VyLmZhbGxiYWNrV2FybjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0IHNpbGVudEZhbGxiYWNrV2Fybih2YWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvc2VyLmZhbGxiYWNrV2FybiA9IGlzQm9vbGVhbih2YWwpID8gIXZhbCA6IHZhbDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gbW9kaWZpZXJzXHJcbiAgICAgICAgICAgIGdldCBtb2RpZmllcnMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9zZXIubW9kaWZpZXJzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBmb3JtYXRGYWxsYmFja01lc3NhZ2VzXHJcbiAgICAgICAgICAgIGdldCBmb3JtYXRGYWxsYmFja01lc3NhZ2VzKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvc2VyLmZhbGxiYWNrRm9ybWF0O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQgZm9ybWF0RmFsbGJhY2tNZXNzYWdlcyh2YWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvc2VyLmZhbGxiYWNrRm9ybWF0ID0gdmFsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBwb3N0VHJhbnNsYXRpb25cclxuICAgICAgICAgICAgZ2V0IHBvc3RUcmFuc2xhdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci5nZXRQb3N0VHJhbnNsYXRpb25IYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCBwb3N0VHJhbnNsYXRpb24oaGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgY29tcG9zZXIuc2V0UG9zdFRyYW5zbGF0aW9uSGFuZGxlcihoYW5kbGVyKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gc3luY1xyXG4gICAgICAgICAgICBnZXQgc3luYygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci5pbmhlcml0TG9jYWxlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQgc3luYyh2YWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvc2VyLmluaGVyaXRMb2NhbGUgPSB2YWw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHdhcm5Jbkh0bWxNZXNzYWdlXHJcbiAgICAgICAgICAgIGdldCB3YXJuSHRtbEluTWVzc2FnZSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci53YXJuSHRtbE1lc3NhZ2UgPyAnd2FybicgOiAnb2ZmJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0IHdhcm5IdG1sSW5NZXNzYWdlKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9zZXIud2Fybkh0bWxNZXNzYWdlID0gdmFsICE9PSAnb2ZmJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZXNjYXBlUGFyYW1ldGVySHRtbFxyXG4gICAgICAgICAgICBnZXQgZXNjYXBlUGFyYW1ldGVySHRtbCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci5lc2NhcGVQYXJhbWV0ZXI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCBlc2NhcGVQYXJhbWV0ZXJIdG1sKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9zZXIuZXNjYXBlUGFyYW1ldGVyID0gdmFsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBwcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnRcclxuICAgICAgICAgICAgZ2V0IHByZXNlcnZlRGlyZWN0aXZlQ29udGVudCgpIHtcclxuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oZ2V0V2Fybk1lc3NhZ2UoSTE4bldhcm5Db2Rlcy5OT1RfU1VQUE9SVEVEX1BSRVNFUlZFX0RJUkVDVElWRSkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCBwcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGdldFdhcm5NZXNzYWdlKEkxOG5XYXJuQ29kZXMuTk9UX1NVUFBPUlRFRF9QUkVTRVJWRV9ESVJFQ1RJVkUpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gcGx1cmFsaXphdGlvblJ1bGVzXHJcbiAgICAgICAgICAgIGdldCBwbHVyYWxpemF0aW9uUnVsZXMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9zZXIucGx1cmFsUnVsZXMgfHwge307XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGZvciBpbnRlcm5hbFxyXG4gICAgICAgICAgICBfX2NvbXBvc2VyOiBjb21wb3NlcixcclxuICAgICAgICAgICAgLy8gdFxyXG4gICAgICAgICAgICB0KC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFthcmcxLCBhcmcyLCBhcmczXSA9IGFyZ3M7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICBsZXQgbGlzdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1N0cmluZyhhcmcxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUkxOG5FcnJvcihJMThuRXJyb3JDb2Rlcy5JTlZBTElEX0FSR1VNRU5UKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGFyZzE7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcoYXJnMikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxvY2FsZSA9IGFyZzI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5KGFyZzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdCA9IGFyZzI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1BsYWluT2JqZWN0KGFyZzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZWQgPSBhcmcyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoYXJnMykpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0ID0gYXJnMztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzUGxhaW5PYmplY3QoYXJnMykpIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lZCA9IGFyZzM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gY29tcG9zZXIudChrZXksIChsaXN0IHx8IG5hbWVkIHx8IHt9KSBhcyBhbnksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5hcHBseShjb21wb3Nlci50LCBjb21wb3NlciwgW1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICAobGlzdCB8fCBuYW1lZCB8fCB7fSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJ0KC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmFwcGx5KGNvbXBvc2VyLnJ0LCBjb21wb3NlciwgWy4uLmFyZ3NdKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gdGNcclxuICAgICAgICAgICAgdGMoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2FyZzEsIGFyZzIsIGFyZzNdID0gYXJncztcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHBsdXJhbDogMSB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5hbWVkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICghaXNTdHJpbmcoYXJnMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuSU5WQUxJRF9BUkdVTUVOVCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhcmcxO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzU3RyaW5nKGFyZzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5sb2NhbGUgPSBhcmcyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNOdW1iZXIoYXJnMikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnBsdXJhbCA9IGFyZzI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5KGFyZzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdCA9IGFyZzI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1BsYWluT2JqZWN0KGFyZzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZWQgPSBhcmcyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzU3RyaW5nKGFyZzMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5sb2NhbGUgPSBhcmczO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNBcnJheShhcmczKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QgPSBhcmczO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdChhcmczKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVkID0gYXJnMztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBjb21wb3Nlci50KGtleSwgKGxpc3QgfHwgbmFtZWQgfHwge30pIGFzIGFueSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmFwcGx5KGNvbXBvc2VyLnQsIGNvbXBvc2VyLCBbXHJcbiAgICAgICAgICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIChsaXN0IHx8IG5hbWVkIHx8IHt9KSxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gdGVcclxuICAgICAgICAgICAgdGUoa2V5LCBsb2NhbGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci50ZShrZXksIGxvY2FsZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHRtXHJcbiAgICAgICAgICAgIHRtKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvc2VyLnRtKGtleSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGdldExvY2FsZU1lc3NhZ2VcclxuICAgICAgICAgICAgZ2V0TG9jYWxlTWVzc2FnZShsb2NhbGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci5nZXRMb2NhbGVNZXNzYWdlKGxvY2FsZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHNldExvY2FsZU1lc3NhZ2VcclxuICAgICAgICAgICAgc2V0TG9jYWxlTWVzc2FnZShsb2NhbGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvc2VyLnNldExvY2FsZU1lc3NhZ2UobG9jYWxlLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gbWVyZ2VMb2NhbGVNZXNzYWdlXHJcbiAgICAgICAgICAgIG1lcmdlTG9jYWxlTWVzc2FnZShsb2NhbGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvc2VyLm1lcmdlTG9jYWxlTWVzc2FnZShsb2NhbGUsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBkXHJcbiAgICAgICAgICAgIGQoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuYXBwbHkoY29tcG9zZXIuZCwgY29tcG9zZXIsIFsuLi5hcmdzXSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGdldERhdGVUaW1lRm9ybWF0XHJcbiAgICAgICAgICAgIGdldERhdGVUaW1lRm9ybWF0KGxvY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvc2VyLmdldERhdGVUaW1lRm9ybWF0KGxvY2FsZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHNldERhdGVUaW1lRm9ybWF0XHJcbiAgICAgICAgICAgIHNldERhdGVUaW1lRm9ybWF0KGxvY2FsZSwgZm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb3Nlci5zZXREYXRlVGltZUZvcm1hdChsb2NhbGUsIGZvcm1hdCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIG1lcmdlRGF0ZVRpbWVGb3JtYXRcclxuICAgICAgICAgICAgbWVyZ2VEYXRlVGltZUZvcm1hdChsb2NhbGUsIGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9zZXIubWVyZ2VEYXRlVGltZUZvcm1hdChsb2NhbGUsIGZvcm1hdCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIG5cclxuICAgICAgICAgICAgbiguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5hcHBseShjb21wb3Nlci5uLCBjb21wb3NlciwgWy4uLmFyZ3NdKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZ2V0TnVtYmVyRm9ybWF0XHJcbiAgICAgICAgICAgIGdldE51bWJlckZvcm1hdChsb2NhbGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb3Nlci5nZXROdW1iZXJGb3JtYXQobG9jYWxlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gc2V0TnVtYmVyRm9ybWF0XHJcbiAgICAgICAgICAgIHNldE51bWJlckZvcm1hdChsb2NhbGUsIGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9zZXIuc2V0TnVtYmVyRm9ybWF0KGxvY2FsZSwgZm9ybWF0KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gbWVyZ2VOdW1iZXJGb3JtYXRcclxuICAgICAgICAgICAgbWVyZ2VOdW1iZXJGb3JtYXQobG9jYWxlLCBmb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvc2VyLm1lcmdlTnVtYmVyRm9ybWF0KGxvY2FsZSwgZm9ybWF0KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZ2V0Q2hvaWNlSW5kZXhcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xyXG4gICAgICAgICAgICBnZXRDaG9pY2VJbmRleChjaG9pY2UsIGNob2ljZXNMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oZ2V0V2Fybk1lc3NhZ2UoSTE4bldhcm5Db2Rlcy5OT1RfU1VQUE9SVEVEX0dFVF9DSE9JQ0VfSU5ERVgpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZm9yIGludGVybmFsXHJcbiAgICAgICAgICAgIF9fb25Db21wb25lbnRJbnN0YW5jZUNyZWF0ZWQodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvbXBvbmVudEluc3RhbmNlQ3JlYXRlZExpc3RlbmVyIH0gPSBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudEluc3RhbmNlQ3JlYXRlZExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50SW5zdGFuY2VDcmVhdGVkTGlzdGVuZXIodGFyZ2V0LCB2dWVJMThuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gZm9yIHZ1ZS1kZXZ0b29scyB0aW1lbGluZSBldmVudFxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgdnVlSTE4bi5fX2VuYWJsZUVtaXR0ZXIgPSAoZW1pdHRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX19jb21wb3NlciA9IGNvbXBvc2VyO1xyXG4gICAgICAgICAgICAgICAgX19jb21wb3NlcltFbmFibGVFbWl0dGVyXSAmJiBfX2NvbXBvc2VyW0VuYWJsZUVtaXR0ZXJdKGVtaXR0ZXIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2dWVJMThuLl9fZGlzYWJsZUVtaXR0ZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfX2NvbXBvc2VyID0gY29tcG9zZXI7XHJcbiAgICAgICAgICAgICAgICBfX2NvbXBvc2VyW0Rpc2FibGVFbWl0dGVyXSAmJiBfX2NvbXBvc2VyW0Rpc2FibGVFbWl0dGVyXSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdnVlSTE4bjtcclxuICAgIH1cclxufVxyXG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cblxuY29uc3QgYmFzZUZvcm1hdFByb3BzID0ge1xyXG4gICAgdGFnOiB7XHJcbiAgICAgICAgdHlwZTogW1N0cmluZywgT2JqZWN0XVxyXG4gICAgfSxcclxuICAgIGxvY2FsZToge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZ1xyXG4gICAgfSxcclxuICAgIHNjb3BlOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIC8vIE5PVEU6IGF2b2lkIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvcnVzaHN0YWNrL2lzc3Vlcy8xMDUwXHJcbiAgICAgICAgdmFsaWRhdG9yOiAodmFsIC8qIENvbXBvbmV0STE4blNjb3BlICovKSA9PiB2YWwgPT09ICdwYXJlbnQnIHx8IHZhbCA9PT0gJ2dsb2JhbCcsXHJcbiAgICAgICAgZGVmYXVsdDogJ3BhcmVudCcgLyogQ29tcG9uZXRJMThuU2NvcGUgKi9cclxuICAgIH0sXHJcbiAgICBpMThuOiB7XHJcbiAgICAgICAgdHlwZTogT2JqZWN0XHJcbiAgICB9XHJcbn07XG5cbmZ1bmN0aW9uIGdldEludGVycG9sYXRlQXJnKFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG57IHNsb3RzIH0sIC8vIFNldHVwQ29udGV4dCxcclxua2V5cykge1xyXG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAxICYmIGtleXNbMF0gPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgIC8vIGRlZmF1bHQgc2xvdCB3aXRoIGxpc3RcclxuICAgICAgICBjb25zdCByZXQgPSBzbG90cy5kZWZhdWx0ID8gc2xvdHMuZGVmYXVsdCgpIDogW107XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICByZXR1cm4gcmV0LnJlZHVjZSgoc2xvdCwgY3VycmVudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKHNsb3QgPSBbXHJcbiAgICAgICAgICAgICAgICAuLi5zbG90LFxyXG4gICAgICAgICAgICAgICAgLi4uKGlzQXJyYXkoY3VycmVudC5jaGlsZHJlbikgPyBjdXJyZW50LmNoaWxkcmVuIDogW2N1cnJlbnRdKVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICB9LCBbXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBuYW1lZCBzbG90c1xyXG4gICAgICAgIHJldHVybiBrZXlzLnJlZHVjZSgoYXJnLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2xvdCA9IHNsb3RzW2tleV07XHJcbiAgICAgICAgICAgIGlmIChzbG90KSB7XHJcbiAgICAgICAgICAgICAgICBhcmdba2V5XSA9IHNsb3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYXJnO1xyXG4gICAgICAgIH0sIHt9KTtcclxuICAgIH1cclxufVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5mdW5jdGlvbiBnZXRGcmFnbWVudGFibGVUYWcodGFnKSB7XHJcbiAgICByZXR1cm4gRnJhZ21lbnQgO1xyXG59XG5cbi8qKlxyXG4gKiBUcmFuc2xhdGlvbiBDb21wb25lbnRcclxuICpcclxuICogQHJlbWFya3NcclxuICogU2VlIHRoZSBmb2xsb3dpbmcgaXRlbXMgZm9yIHByb3BlcnR5IGFib3V0IGRldGFpbHNcclxuICpcclxuICogQFZ1ZUkxOG5TZWUgW1RyYW5zbGF0aW9uUHJvcHNdKGNvbXBvbmVudCN0cmFuc2xhdGlvbnByb3BzKVxyXG4gKiBAVnVlSTE4blNlZSBbQmFzZUZvcm1hdFByb3BzXShjb21wb25lbnQjYmFzZWZvcm1hdHByb3BzKVxyXG4gKiBAVnVlSTE4blNlZSBbQ29tcG9uZW50IEludGVycG9sYXRpb25dKC4uL2d1aWRlL2FkdmFuY2VkL2NvbXBvbmVudClcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgaHRtbFxyXG4gKiA8ZGl2IGlkPVwiYXBwXCI+XHJcbiAqICAgPCEtLSAuLi4gLS0+XHJcbiAqICAgPGkxOG4gcGF0aD1cInRlcm1cIiB0YWc9XCJsYWJlbFwiIGZvcj1cInRvc1wiPlxyXG4gKiAgICAgPGEgOmhyZWY9XCJ1cmxcIiB0YXJnZXQ9XCJfYmxhbmtcIj57eyAkdCgndG9zJykgfX08L2E+XHJcbiAqICAgPC9pMThuPlxyXG4gKiAgIDwhLS0gLi4uIC0tPlxyXG4gKiA8L2Rpdj5cclxuICogYGBgXHJcbiAqIGBgYGpzXHJcbiAqIGltcG9ydCB7IGNyZWF0ZUFwcCB9IGZyb20gJ3Z1ZSdcclxuICogaW1wb3J0IHsgY3JlYXRlSTE4biB9IGZyb20gJ3Z1ZS1pMThuJ1xyXG4gKlxyXG4gKiBjb25zdCBtZXNzYWdlcyA9IHtcclxuICogICBlbjoge1xyXG4gKiAgICAgdG9zOiAnVGVybSBvZiBTZXJ2aWNlJyxcclxuICogICAgIHRlcm06ICdJIGFjY2VwdCB4eHggezB9LidcclxuICogICB9LFxyXG4gKiAgIGphOiB7XHJcbiAqICAgICB0b3M6ICfliKnnlKjopo/ntIQnLFxyXG4gKiAgICAgdGVybTogJ+engeOBryB4eHgg44GuezB944Gr5ZCM5oSP44GX44G+44GZ44CCJ1xyXG4gKiAgIH1cclxuICogfVxyXG4gKlxyXG4gKiBjb25zdCBpMThuID0gY3JlYXRlSTE4bih7XHJcbiAqICAgbG9jYWxlOiAnZW4nLFxyXG4gKiAgIG1lc3NhZ2VzXHJcbiAqIH0pXHJcbiAqXHJcbiAqIGNvbnN0IGFwcCA9IGNyZWF0ZUFwcCh7XHJcbiAqICAgZGF0YToge1xyXG4gKiAgICAgdXJsOiAnL3Rlcm0nXHJcbiAqICAgfVxyXG4gKiB9KS51c2UoaTE4bikubW91bnQoJyNhcHAnKVxyXG4gKiBgYGBcclxuICpcclxuICogQFZ1ZUkxOG5Db21wb25lbnRcclxuICovXHJcbmNvbnN0IFRyYW5zbGF0aW9uID0gIC8qIGRlZmluZUNvbXBvbmVudCAqLyB7XHJcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xyXG4gICAgbmFtZTogJ2kxOG4tdCcsXHJcbiAgICBwcm9wczogYXNzaWduKHtcclxuICAgICAgICBrZXlwYXRoOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBsdXJhbDoge1xyXG4gICAgICAgICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLFxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICB2YWxpZGF0b3I6ICh2YWwpID0+IGlzTnVtYmVyKHZhbCkgfHwgIWlzTmFOKHZhbClcclxuICAgICAgICB9XHJcbiAgICB9LCBiYXNlRm9ybWF0UHJvcHMpLFxyXG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIHNldHVwKHByb3BzLCBjb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgeyBzbG90cywgYXR0cnMgfSA9IGNvbnRleHQ7XHJcbiAgICAgICAgLy8gTk9URTogYXZvaWQgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9ydXNoc3RhY2svaXNzdWVzLzEwNTBcclxuICAgICAgICBjb25zdCBpMThuID0gcHJvcHMuaTE4biB8fFxyXG4gICAgICAgICAgICB1c2VJMThuKHtcclxuICAgICAgICAgICAgICAgIHVzZVNjb3BlOiBwcm9wcy5zY29wZSxcclxuICAgICAgICAgICAgICAgIF9fdXNlQ29tcG9uZW50OiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzbG90cykuZmlsdGVyKGtleSA9PiBrZXkgIT09ICdfJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgaWYgKHByb3BzLmxvY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5sb2NhbGUgPSBwcm9wcy5sb2NhbGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByb3BzLnBsdXJhbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnBsdXJhbCA9IGlzU3RyaW5nKHByb3BzLnBsdXJhbCkgPyArcHJvcHMucGx1cmFsIDogcHJvcHMucGx1cmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGFyZyA9IGdldEludGVycG9sYXRlQXJnKGNvbnRleHQsIGtleXMpO1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGkxOG5bVHJhbnNyYXRlVk5vZGVTeW1ib2xdKHByb3BzLmtleXBhdGgsIGFyZywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFzc2lnbmVkQXR0cnMgPSBhc3NpZ24oe30sIGF0dHJzKTtcclxuICAgICAgICAgICAgY29uc3QgdGFnID0gaXNTdHJpbmcocHJvcHMudGFnKSB8fCBpc09iamVjdChwcm9wcy50YWcpXHJcbiAgICAgICAgICAgICAgICA/IHByb3BzLnRhZ1xyXG4gICAgICAgICAgICAgICAgOiBnZXRGcmFnbWVudGFibGVUYWcoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGgodGFnLCBhc3NpZ25lZEF0dHJzLCBjaGlsZHJlbik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufTtcblxuZnVuY3Rpb24gaXNWTm9kZSh0YXJnZXQpIHtcclxuICAgIHJldHVybiBpc0FycmF5KHRhcmdldCkgJiYgIWlzU3RyaW5nKHRhcmdldFswXSk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyRm9ybWF0dGVyKHByb3BzLCBjb250ZXh0LCBzbG90S2V5cywgcGFydEZvcm1hdHRlcikge1xyXG4gICAgY29uc3QgeyBzbG90cywgYXR0cnMgfSA9IGNvbnRleHQ7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHBhcnQ6IHRydWUgfTtcclxuICAgICAgICBsZXQgb3ZlcnJpZGVzID0ge307XHJcbiAgICAgICAgaWYgKHByb3BzLmxvY2FsZSkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmxvY2FsZSA9IHByb3BzLmxvY2FsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHByb3BzLmZvcm1hdCkpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5rZXkgPSBwcm9wcy5mb3JtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlzT2JqZWN0KHByb3BzLmZvcm1hdCkpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgaWYgKGlzU3RyaW5nKHByb3BzLmZvcm1hdC5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5rZXkgPSBwcm9wcy5mb3JtYXQua2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgbnVtYmVyIGZvcm1hdCBvcHRpb25zIG9ubHlcclxuICAgICAgICAgICAgb3ZlcnJpZGVzID0gT2JqZWN0LmtleXMocHJvcHMuZm9ybWF0KS5yZWR1Y2UoKG9wdGlvbnMsIHByb3ApID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzbG90S2V5cy5pbmNsdWRlcyhwcm9wKVxyXG4gICAgICAgICAgICAgICAgICAgID8gYXNzaWduKHt9LCBvcHRpb25zLCB7IFtwcm9wXTogcHJvcHMuZm9ybWF0W3Byb3BdIH0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgICAgIDogb3B0aW9ucztcclxuICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHBhcnRGb3JtYXR0ZXIoLi4uW3Byb3BzLnZhbHVlLCBvcHRpb25zLCBvdmVycmlkZXNdKTtcclxuICAgICAgICBsZXQgY2hpbGRyZW4gPSBbb3B0aW9ucy5rZXldO1xyXG4gICAgICAgIGlmIChpc0FycmF5KHBhcnRzKSkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IHBhcnRzLm1hcCgocGFydCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNsb3QgPSBzbG90c1twYXJ0LnR5cGVdO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHNsb3RcclxuICAgICAgICAgICAgICAgICAgICA/IHNsb3QoeyBbcGFydC50eXBlXTogcGFydC52YWx1ZSwgaW5kZXgsIHBhcnRzIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgOiBbcGFydC52YWx1ZV07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNWTm9kZShub2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVbMF0ua2V5ID0gYCR7cGFydC50eXBlfS0ke2luZGV4fWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlzU3RyaW5nKHBhcnRzKSkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtwYXJ0c107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFzc2lnbmVkQXR0cnMgPSBhc3NpZ24oe30sIGF0dHJzKTtcclxuICAgICAgICBjb25zdCB0YWcgPSBpc1N0cmluZyhwcm9wcy50YWcpIHx8IGlzT2JqZWN0KHByb3BzLnRhZylcclxuICAgICAgICAgICAgPyBwcm9wcy50YWdcclxuICAgICAgICAgICAgOiBnZXRGcmFnbWVudGFibGVUYWcoKTtcclxuICAgICAgICByZXR1cm4gaCh0YWcsIGFzc2lnbmVkQXR0cnMsIGNoaWxkcmVuKTtcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIE51bWJlciBGb3JtYXQgQ29tcG9uZW50XHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFNlZSB0aGUgZm9sbG93aW5nIGl0ZW1zIGZvciBwcm9wZXJ0eSBhYm91dCBkZXRhaWxzXHJcbiAqXHJcbiAqIEBWdWVJMThuU2VlIFtGb3JtYXR0YWJsZVByb3BzXShjb21wb25lbnQjZm9ybWF0dGFibGVwcm9wcylcclxuICogQFZ1ZUkxOG5TZWUgW0Jhc2VGb3JtYXRQcm9wc10oY29tcG9uZW50I2Jhc2Vmb3JtYXRwcm9wcylcclxuICogQFZ1ZUkxOG5TZWUgW0N1c3RvbSBGb3JtYXR0aW5nXSguLi9ndWlkZS9lc3NlbnRpYWxzL251bWJlciNjdXN0b20tZm9ybWF0dGluZylcclxuICpcclxuICogQFZ1ZUkxOG5EYW5nZXJcclxuICogTm90IHN1cHBvcnRlZCBJRSwgZHVlIHRvIG5vIHN1cHBvcnQgYEludGwuTnVtYmVyRm9ybWF0I2Zvcm1hdFRvUGFydHNgIGluIFtJRV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvSW50bC9OdW1iZXJGb3JtYXQvZm9ybWF0VG9QYXJ0cylcclxuICpcclxuICogSWYgeW91IHdhbnQgdG8gdXNlIGl0LCB5b3UgbmVlZCB0byB1c2UgW3BvbHlmaWxsXShodHRwczovL2dpdGh1Yi5jb20vZm9ybWF0anMvZm9ybWF0anMvdHJlZS9tYWluL3BhY2thZ2VzL2ludGwtbnVtYmVyZm9ybWF0KVxyXG4gKlxyXG4gKiBAVnVlSTE4bkNvbXBvbmVudFxyXG4gKi9cclxuY29uc3QgTnVtYmVyRm9ybWF0ID0gIC8qIGRlZmluZUNvbXBvbmVudCAqLyB7XHJcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xyXG4gICAgbmFtZTogJ2kxOG4tbicsXHJcbiAgICBwcm9wczogYXNzaWduKHtcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmb3JtYXQ6IHtcclxuICAgICAgICAgICAgdHlwZTogW1N0cmluZywgT2JqZWN0XVxyXG4gICAgICAgIH1cclxuICAgIH0sIGJhc2VGb3JtYXRQcm9wcyksXHJcbiAgICAvKiBlc2xpbnQtZW5hYmxlICovXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgc2V0dXAocHJvcHMsIGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCBpMThuID0gcHJvcHMuaTE4biB8fFxyXG4gICAgICAgICAgICB1c2VJMThuKHsgdXNlU2NvcGU6ICdwYXJlbnQnLCBfX3VzZUNvbXBvbmVudDogdHJ1ZSB9KTtcclxuICAgICAgICByZXR1cm4gcmVuZGVyRm9ybWF0dGVyKHByb3BzLCBjb250ZXh0LCBOVU1CRVJfRk9STUFUX09QVElPTlNfS0VZUywgKC4uLmFyZ3MpID0+IFxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgaTE4bltOdW1iZXJQYXJ0c1N5bWJvbF0oLi4uYXJncykpO1xyXG4gICAgfVxyXG59O1xuXG4vKipcclxuICogRGF0ZXRpbWUgRm9ybWF0IENvbXBvbmVudFxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBTZWUgdGhlIGZvbGxvd2luZyBpdGVtcyBmb3IgcHJvcGVydHkgYWJvdXQgZGV0YWlsc1xyXG4gKlxyXG4gKiBAVnVlSTE4blNlZSBbRm9ybWF0dGFibGVQcm9wc10oY29tcG9uZW50I2Zvcm1hdHRhYmxlcHJvcHMpXHJcbiAqIEBWdWVJMThuU2VlIFtCYXNlRm9ybWF0UHJvcHNdKGNvbXBvbmVudCNiYXNlZm9ybWF0cHJvcHMpXHJcbiAqIEBWdWVJMThuU2VlIFtDdXN0b20gRm9ybWF0dGluZ10oLi4vZ3VpZGUvZXNzZW50aWFscy9kYXRldGltZSNjdXN0b20tZm9ybWF0dGluZylcclxuICpcclxuICogQFZ1ZUkxOG5EYW5nZXJcclxuICogTm90IHN1cHBvcnRlZCBJRSwgZHVlIHRvIG5vIHN1cHBvcnQgYEludGwuRGF0ZVRpbWVGb3JtYXQjZm9ybWF0VG9QYXJ0c2AgaW4gW0lFXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9JbnRsL0RhdGVUaW1lRm9ybWF0L2Zvcm1hdFRvUGFydHMpXHJcbiAqXHJcbiAqIElmIHlvdSB3YW50IHRvIHVzZSBpdCwgeW91IG5lZWQgdG8gdXNlIFtwb2x5ZmlsbF0oaHR0cHM6Ly9naXRodWIuY29tL2Zvcm1hdGpzL2Zvcm1hdGpzL3RyZWUvbWFpbi9wYWNrYWdlcy9pbnRsLWRhdGV0aW1lZm9ybWF0KVxyXG4gKlxyXG4gKiBAVnVlSTE4bkNvbXBvbmVudFxyXG4gKi9cclxuY29uc3QgRGF0ZXRpbWVGb3JtYXQgPSAgLypkZWZpbmVDb21wb25lbnQgKi8ge1xyXG4gICAgLyogZXNsaW50LWRpc2FibGUgKi9cclxuICAgIG5hbWU6ICdpMThuLWQnLFxyXG4gICAgcHJvcHM6IGFzc2lnbih7XHJcbiAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgdHlwZTogW051bWJlciwgRGF0ZV0sXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmb3JtYXQ6IHtcclxuICAgICAgICAgICAgdHlwZTogW1N0cmluZywgT2JqZWN0XVxyXG4gICAgICAgIH1cclxuICAgIH0sIGJhc2VGb3JtYXRQcm9wcyksXHJcbiAgICAvKiBlc2xpbnQtZW5hYmxlICovXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgc2V0dXAocHJvcHMsIGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCBpMThuID0gcHJvcHMuaTE4biB8fFxyXG4gICAgICAgICAgICB1c2VJMThuKHsgdXNlU2NvcGU6ICdwYXJlbnQnLCBfX3VzZUNvbXBvbmVudDogdHJ1ZSB9KTtcclxuICAgICAgICByZXR1cm4gcmVuZGVyRm9ybWF0dGVyKHByb3BzLCBjb250ZXh0LCBEQVRFVElNRV9GT1JNQVRfT1BUSU9OU19LRVlTLCAoLi4uYXJncykgPT4gXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBpMThuW0RhdGV0aW1lUGFydHNTeW1ib2xdKC4uLmFyZ3MpKTtcclxuICAgIH1cclxufTtcblxuZnVuY3Rpb24gZ2V0Q29tcG9zZXIkMihpMThuLCBpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgaTE4bkludGVybmFsID0gaTE4bjtcclxuICAgIGlmIChpMThuLm1vZGUgPT09ICdjb21wb3NpdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gKGkxOG5JbnRlcm5hbC5fX2dldEluc3RhbmNlKGluc3RhbmNlKSB8fCBpMThuLmdsb2JhbCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCB2dWVJMThuID0gaTE4bkludGVybmFsLl9fZ2V0SW5zdGFuY2UoaW5zdGFuY2UpO1xyXG4gICAgICAgIHJldHVybiB2dWVJMThuICE9IG51bGxcclxuICAgICAgICAgICAgPyB2dWVJMThuLl9fY29tcG9zZXJcclxuICAgICAgICAgICAgOiBpMThuLmdsb2JhbC5fX2NvbXBvc2VyO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZURGlyZWN0aXZlKGkxOG4pIHtcclxuICAgIGNvbnN0IF9wcm9jZXNzID0gKGJpbmRpbmcpID0+IHtcclxuICAgICAgICBjb25zdCB7IGluc3RhbmNlLCBtb2RpZmllcnMsIHZhbHVlIH0gPSBiaW5kaW5nO1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgfHwgIWluc3RhbmNlLiQpIHtcclxuICAgICAgICAgICAgdGhyb3cgY3JlYXRlSTE4bkVycm9yKEkxOG5FcnJvckNvZGVzLlVORVhQRUNURURfRVJST1IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb21wb3NlciA9IGdldENvbXBvc2VyJDIoaTE4biwgaW5zdGFuY2UuJCk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBtb2RpZmllcnMucHJlc2VydmUpIHtcclxuICAgICAgICAgICAgd2FybihnZXRXYXJuTWVzc2FnZShJMThuV2FybkNvZGVzLk5PVF9TVVBQT1JURURfUFJFU0VSVkUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFyc2VkVmFsdWUgPSBwYXJzZVZhbHVlKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBSZWZsZWN0LmFwcGx5KGNvbXBvc2VyLnQsIGNvbXBvc2VyLCBbLi4ubWFrZVBhcmFtcyhwYXJzZWRWYWx1ZSldKSxcclxuICAgICAgICAgICAgY29tcG9zZXJcclxuICAgICAgICBdO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlZ2lzdGVyID0gKGVsLCBiaW5kaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW3RleHRDb250ZW50LCBjb21wb3Nlcl0gPSBfcHJvY2VzcyhiaW5kaW5nKTtcclxuICAgICAgICBpZiAoaW5Ccm93c2VyICYmIGkxOG4uZ2xvYmFsID09PSBjb21wb3Nlcikge1xyXG4gICAgICAgICAgICAvLyBnbG9iYWwgc2NvcGUgb25seVxyXG4gICAgICAgICAgICBlbC5fX2kxOG5XYXRjaGVyID0gd2F0Y2goY29tcG9zZXIubG9jYWxlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nLmluc3RhbmNlICYmIGJpbmRpbmcuaW5zdGFuY2UuJGZvcmNlVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbC5fX2NvbXBvc2VyID0gY29tcG9zZXI7XHJcbiAgICAgICAgZWwudGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudDtcclxuICAgIH07XHJcbiAgICBjb25zdCB1bnJlZ2lzdGVyID0gKGVsKSA9PiB7XHJcbiAgICAgICAgaWYgKGluQnJvd3NlciAmJiBlbC5fX2kxOG5XYXRjaGVyKSB7XHJcbiAgICAgICAgICAgIGVsLl9faTE4bldhdGNoZXIoKTtcclxuICAgICAgICAgICAgZWwuX19pMThuV2F0Y2hlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgZGVsZXRlIGVsLl9faTE4bldhdGNoZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbC5fX2NvbXBvc2VyKSB7XHJcbiAgICAgICAgICAgIGVsLl9fY29tcG9zZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBlbC5fX2NvbXBvc2VyO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCB1cGRhdGUgPSAoZWwsIHsgdmFsdWUgfSkgPT4ge1xyXG4gICAgICAgIGlmIChlbC5fX2NvbXBvc2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvc2VyID0gZWwuX19jb21wb3NlcjtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkVmFsdWUgPSBwYXJzZVZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgZWwudGV4dENvbnRlbnQgPSBSZWZsZWN0LmFwcGx5KGNvbXBvc2VyLnQsIGNvbXBvc2VyLCBbXHJcbiAgICAgICAgICAgICAgICAuLi5tYWtlUGFyYW1zKHBhcnNlZFZhbHVlKVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZ2V0U1NSUHJvcHMgPSAoYmluZGluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IFt0ZXh0Q29udGVudF0gPSBfcHJvY2VzcyhiaW5kaW5nKTtcclxuICAgICAgICByZXR1cm4geyB0ZXh0Q29udGVudCB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY3JlYXRlZDogcmVnaXN0ZXIsXHJcbiAgICAgICAgdW5tb3VudGVkOiB1bnJlZ2lzdGVyLFxyXG4gICAgICAgIGJlZm9yZVVwZGF0ZTogdXBkYXRlLFxyXG4gICAgICAgIGdldFNTUlByb3BzXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHBhcnNlVmFsdWUodmFsdWUpIHtcclxuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4geyBwYXRoOiB2YWx1ZSB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcclxuICAgICAgICBpZiAoISgncGF0aCcgaW4gdmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUkxOG5FcnJvcihJMThuRXJyb3JDb2Rlcy5SRVFVSVJFRF9WQUxVRSwgJ3BhdGgnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgY3JlYXRlSTE4bkVycm9yKEkxOG5FcnJvckNvZGVzLklOVkFMSURfVkFMVUUpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG1ha2VQYXJhbXModmFsdWUpIHtcclxuICAgIGNvbnN0IHsgcGF0aCwgbG9jYWxlLCBhcmdzLCBjaG9pY2UsIHBsdXJhbCB9ID0gdmFsdWU7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge307XHJcbiAgICBjb25zdCBuYW1lZCA9IGFyZ3MgfHwge307XHJcbiAgICBpZiAoaXNTdHJpbmcobG9jYWxlKSkge1xyXG4gICAgICAgIG9wdGlvbnMubG9jYWxlID0gbG9jYWxlO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzTnVtYmVyKGNob2ljZSkpIHtcclxuICAgICAgICBvcHRpb25zLnBsdXJhbCA9IGNob2ljZTtcclxuICAgIH1cclxuICAgIGlmIChpc051bWJlcihwbHVyYWwpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5wbHVyYWwgPSBwbHVyYWw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW3BhdGgsIG5hbWVkLCBvcHRpb25zXTtcclxufVxuXG5mdW5jdGlvbiBhcHBseShhcHAsIGkxOG4sIC4uLm9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHBsdWdpbk9wdGlvbnMgPSBpc1BsYWluT2JqZWN0KG9wdGlvbnNbMF0pXHJcbiAgICAgICAgPyBvcHRpb25zWzBdXHJcbiAgICAgICAgOiB7fTtcclxuICAgIGNvbnN0IHVzZUkxOG5Db21wb25lbnROYW1lID0gISFwbHVnaW5PcHRpb25zLnVzZUkxOG5Db21wb25lbnROYW1lO1xyXG4gICAgY29uc3QgZ2xvYmFsSW5zdGFsbCA9IGlzQm9vbGVhbihwbHVnaW5PcHRpb25zLmdsb2JhbEluc3RhbGwpXHJcbiAgICAgICAgPyBwbHVnaW5PcHRpb25zLmdsb2JhbEluc3RhbGxcclxuICAgICAgICA6IHRydWU7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGdsb2JhbEluc3RhbGwgJiYgdXNlSTE4bkNvbXBvbmVudE5hbWUpIHtcclxuICAgICAgICB3YXJuKGdldFdhcm5NZXNzYWdlKEkxOG5XYXJuQ29kZXMuQ09NUE9ORU5UX05BTUVfTEVHQUNZX0NPTVBBVElCTEUsIHtcclxuICAgICAgICAgICAgbmFtZTogVHJhbnNsYXRpb24ubmFtZVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIGlmIChnbG9iYWxJbnN0YWxsKSB7XHJcbiAgICAgICAgLy8gaW5zdGFsbCBjb21wb25lbnRzXHJcbiAgICAgICAgYXBwLmNvbXBvbmVudCghdXNlSTE4bkNvbXBvbmVudE5hbWUgPyBUcmFuc2xhdGlvbi5uYW1lIDogJ2kxOG4nLCBUcmFuc2xhdGlvbik7XHJcbiAgICAgICAgYXBwLmNvbXBvbmVudChOdW1iZXJGb3JtYXQubmFtZSwgTnVtYmVyRm9ybWF0KTtcclxuICAgICAgICBhcHAuY29tcG9uZW50KERhdGV0aW1lRm9ybWF0Lm5hbWUsIERhdGV0aW1lRm9ybWF0KTtcclxuICAgIH1cclxuICAgIC8vIGluc3RhbGwgZGlyZWN0aXZlXHJcbiAgICB7XHJcbiAgICAgICAgYXBwLmRpcmVjdGl2ZSgndCcsIHZURGlyZWN0aXZlKGkxOG4pKTtcclxuICAgIH1cclxufVxuXG5jb25zdCBWVUVfSTE4Tl9DT01QT05FTlRfVFlQRVMgPSAndnVlLWkxOG46IGNvbXBvc2VyIHByb3BlcnRpZXMnO1xyXG5sZXQgZGV2dG9vbHNBcGk7XHJcbmFzeW5jIGZ1bmN0aW9uIGVuYWJsZURldlRvb2xzKGFwcCwgaTE4bikge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcclxuICAgICAgICAgICAgICAgIGlkOiBcInZ1ZS1kZXZ0b29scy1wbHVnaW4tdnVlLWkxOG5cIiAvKiBQTFVHSU4gKi8sXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogVnVlRGV2VG9vbHNMYWJlbHNbXCJ2dWUtZGV2dG9vbHMtcGx1Z2luLXZ1ZS1pMThuXCIgLyogUExVR0lOICovXSxcclxuICAgICAgICAgICAgICAgIHBhY2thZ2VOYW1lOiAndnVlLWkxOG4nLFxyXG4gICAgICAgICAgICAgICAgaG9tZXBhZ2U6ICdodHRwczovL3Z1ZS1pMThuLmludGxpZnkuZGV2JyxcclxuICAgICAgICAgICAgICAgIGxvZ286ICdodHRwczovL3Z1ZS1pMThuLmludGxpZnkuZGV2L3Z1ZS1pMThuLWRldnRvb2xzLWxvZ28ucG5nJyxcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFN0YXRlVHlwZXM6IFtWVUVfSTE4Tl9DT01QT05FTlRfVFlQRVNdLFxyXG4gICAgICAgICAgICAgICAgYXBwOiBhcHAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIH0sIGFwaSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZXZ0b29sc0FwaSA9IGFwaTtcclxuICAgICAgICAgICAgICAgIGFwaS5vbi52aXNpdENvbXBvbmVudFRyZWUoKHsgY29tcG9uZW50SW5zdGFuY2UsIHRyZWVOb2RlIH0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnRUcmVlVGFncyhjb21wb25lbnRJbnN0YW5jZSwgdHJlZU5vZGUsIGkxOG4pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhcGkub24uaW5zcGVjdENvbXBvbmVudCgoeyBjb21wb25lbnRJbnN0YW5jZSwgaW5zdGFuY2VEYXRhIH0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50SW5zdGFuY2Uudm5vZGUuZWwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50SW5zdGFuY2Uudm5vZGUuZWwuX19WVUVfSTE4Tl9fICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaTE4bi5tb2RlID09PSAnbGVnYWN5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGdsb2JhbCBzY29wZSBvbiBsZWdhY3kgbW9kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudEluc3RhbmNlLnZub2RlLmVsLl9fVlVFX0kxOE5fXyAhPT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpMThuLmdsb2JhbC5fX2NvbXBvc2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zcGVjdENvbXBvc2VyKGluc3RhbmNlRGF0YSwgY29tcG9uZW50SW5zdGFuY2Uudm5vZGUuZWwuX19WVUVfSTE4Tl9fKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3BlY3RDb21wb3NlcihpbnN0YW5jZURhdGEsIGNvbXBvbmVudEluc3RhbmNlLnZub2RlLmVsLl9fVlVFX0kxOE5fXyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBcInZ1ZS1pMThuLXJlc291cmNlLWluc3BlY3RvclwiIC8qIENVU1RPTV9JTlNQRUNUT1IgKi8sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFZ1ZURldlRvb2xzTGFiZWxzW1widnVlLWkxOG4tcmVzb3VyY2UtaW5zcGVjdG9yXCIgLyogQ1VTVE9NX0lOU1BFQ1RPUiAqL10sXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2xhbmd1YWdlJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmVlRmlsdGVyUGxhY2Vob2xkZXI6IFZ1ZURldlRvb2xzUGxhY2Vob2xkZXJzW1widnVlLWkxOG4tcmVzb3VyY2UtaW5zcGVjdG9yXCIgLyogQ1VTVE9NX0lOU1BFQ1RPUiAqL11cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclRyZWUocGF5bG9hZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gXCJ2dWUtaTE4bi1yZXNvdXJjZS1pbnNwZWN0b3JcIiAvKiBDVVNUT01fSU5TUEVDVE9SICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyU2NvcGUocGF5bG9hZCwgaTE4bik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb290cyA9IG5ldyBNYXAoKTtcclxuICAgICAgICAgICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JTdGF0ZShhc3luYyAocGF5bG9hZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IFwidnVlLWkxOG4tcmVzb3VyY2UtaW5zcGVjdG9yXCIgLyogQ1VTVE9NX0lOU1BFQ1RPUiAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkudW5oaWdobGlnaHRFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3BlY3RTY29wZShwYXlsb2FkLCBpMThuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQubm9kZUlkID09PSAnZ2xvYmFsJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyb290cy5oYXMocGF5bG9hZC5hcHApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW3Jvb3RdID0gYXdhaXQgYXBpLmdldENvbXBvbmVudEluc3RhbmNlcyhwYXlsb2FkLmFwcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdHMuc2V0KHBheWxvYWQuYXBwLCByb290KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5oaWdobGlnaHRFbGVtZW50KHJvb3RzLmdldChwYXlsb2FkLmFwcCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDb21wb25lbnRJbnN0YW5jZShwYXlsb2FkLm5vZGVJZCwgaTE4bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSAmJiBhcGkuaGlnaGxpZ2h0RWxlbWVudChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGFwaS5vbi5lZGl0SW5zcGVjdG9yU3RhdGUocGF5bG9hZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gXCJ2dWUtaTE4bi1yZXNvdXJjZS1pbnNwZWN0b3JcIiAvKiBDVVNUT01fSU5TUEVDVE9SICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRTY29wZShwYXlsb2FkLCBpMThuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogXCJ2dWUtaTE4bi10aW1lbGluZVwiIC8qIFRJTUVMSU5FICovLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBWdWVEZXZUb29sc0xhYmVsc1tcInZ1ZS1pMThuLXRpbWVsaW5lXCIgLyogVElNRUxJTkUgKi9dLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBWdWVEZXZUb29sc1RpbWVsaW5lQ29sb3JzW1widnVlLWkxOG4tdGltZWxpbmVcIiAvKiBUSU1FTElORSAqL11cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIHJlamVjdChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuZnVuY3Rpb24gZ2V0STE4blNjb3BlTGFibGUoaW5zdGFuY2UpIHtcclxuICAgIHJldHVybiAoaW5zdGFuY2UudHlwZS5uYW1lIHx8XHJcbiAgICAgICAgaW5zdGFuY2UudHlwZS5kaXNwbGF5TmFtZSB8fFxyXG4gICAgICAgIGluc3RhbmNlLnR5cGUuX19maWxlIHx8XHJcbiAgICAgICAgJ0Fub255bW91cycpO1xyXG59XHJcbmZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudFRyZWVUYWdzKGluc3RhbmNlLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxudHJlZU5vZGUsIGkxOG4pIHtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgY29uc3QgZ2xvYmFsID0gaTE4bi5tb2RlID09PSAnY29tcG9zaXRpb24nXHJcbiAgICAgICAgPyBpMThuLmdsb2JhbFxyXG4gICAgICAgIDogaTE4bi5nbG9iYWwuX19jb21wb3NlcjtcclxuICAgIGlmIChpbnN0YW5jZSAmJiBpbnN0YW5jZS52bm9kZS5lbCAmJiBpbnN0YW5jZS52bm9kZS5lbC5fX1ZVRV9JMThOX18pIHtcclxuICAgICAgICAvLyBhZGQgY3VzdG9tIHRhZ3MgbG9jYWwgc2NvcGUgb25seVxyXG4gICAgICAgIGlmIChpbnN0YW5jZS52bm9kZS5lbC5fX1ZVRV9JMThOX18gIT09IGdsb2JhbCkge1xyXG4gICAgICAgICAgICBjb25zdCB0YWcgPSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogYGkxOG4gKCR7Z2V0STE4blNjb3BlTGFibGUoaW5zdGFuY2UpfSBTY29wZSlgLFxyXG4gICAgICAgICAgICAgICAgdGV4dENvbG9yOiAweDAwMDAwMCxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogMHhmZmNkMTlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdHJlZU5vZGUudGFncy5wdXNoKHRhZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGluc3BlY3RDb21wb3NlcihpbnN0YW5jZURhdGEsIGNvbXBvc2VyKSB7XHJcbiAgICBjb25zdCB0eXBlID0gVlVFX0kxOE5fQ09NUE9ORU5UX1RZUEVTO1xyXG4gICAgaW5zdGFuY2VEYXRhLnN0YXRlLnB1c2goe1xyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAga2V5OiAnbG9jYWxlJyxcclxuICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICB2YWx1ZTogY29tcG9zZXIubG9jYWxlLnZhbHVlXHJcbiAgICB9KTtcclxuICAgIGluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGtleTogJ2F2YWlsYWJsZUxvY2FsZXMnLFxyXG4gICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZTogY29tcG9zZXIuYXZhaWxhYmxlTG9jYWxlc1xyXG4gICAgfSk7XHJcbiAgICBpbnN0YW5jZURhdGEuc3RhdGUucHVzaCh7XHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBrZXk6ICdmYWxsYmFja0xvY2FsZScsXHJcbiAgICAgICAgZWRpdGFibGU6IHRydWUsXHJcbiAgICAgICAgdmFsdWU6IGNvbXBvc2VyLmZhbGxiYWNrTG9jYWxlLnZhbHVlXHJcbiAgICB9KTtcclxuICAgIGluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGtleTogJ2luaGVyaXRMb2NhbGUnLFxyXG4gICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgIHZhbHVlOiBjb21wb3Nlci5pbmhlcml0TG9jYWxlXHJcbiAgICB9KTtcclxuICAgIGluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGtleTogJ21lc3NhZ2VzJyxcclxuICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgdmFsdWU6IGdldExvY2FsZU1lc3NhZ2VWYWx1ZShjb21wb3Nlci5tZXNzYWdlcy52YWx1ZSlcclxuICAgIH0pO1xyXG4gICAge1xyXG4gICAgICAgIGluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAga2V5OiAnZGF0ZXRpbWVGb3JtYXRzJyxcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICB2YWx1ZTogY29tcG9zZXIuZGF0ZXRpbWVGb3JtYXRzLnZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaW5zdGFuY2VEYXRhLnN0YXRlLnB1c2goe1xyXG4gICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICBrZXk6ICdudW1iZXJGb3JtYXRzJyxcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICB2YWx1ZTogY29tcG9zZXIubnVtYmVyRm9ybWF0cy52YWx1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmZ1bmN0aW9uIGdldExvY2FsZU1lc3NhZ2VWYWx1ZShtZXNzYWdlcykge1xyXG4gICAgY29uc3QgdmFsdWUgPSB7fTtcclxuICAgIE9iamVjdC5rZXlzKG1lc3NhZ2VzKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB2ID0gbWVzc2FnZXNba2V5XTtcclxuICAgICAgICBpZiAoaXNGdW5jdGlvbih2KSAmJiAnc291cmNlJyBpbiB2KSB7XHJcbiAgICAgICAgICAgIHZhbHVlW2tleV0gPSBnZXRNZXNzYWdlRnVuY3Rpb25EZXRhaWxzKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpc09iamVjdCh2KSkge1xyXG4gICAgICAgICAgICB2YWx1ZVtrZXldID0gZ2V0TG9jYWxlTWVzc2FnZVZhbHVlKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsdWVba2V5XSA9IHY7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuY29uc3QgRVNDID0ge1xyXG4gICAgJzwnOiAnJmx0OycsXHJcbiAgICAnPic6ICcmZ3Q7JyxcclxuICAgICdcIic6ICcmcXVvdDsnLFxyXG4gICAgJyYnOiAnJmFtcDsnXHJcbn07XHJcbmZ1bmN0aW9uIGVzY2FwZShzKSB7XHJcbiAgICByZXR1cm4gcy5yZXBsYWNlKC9bPD5cIiZdL2csIGVzY2FwZUNoYXIpO1xyXG59XHJcbmZ1bmN0aW9uIGVzY2FwZUNoYXIoYSkge1xyXG4gICAgcmV0dXJuIEVTQ1thXSB8fCBhO1xyXG59XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmZ1bmN0aW9uIGdldE1lc3NhZ2VGdW5jdGlvbkRldGFpbHMoZnVuYykge1xyXG4gICAgY29uc3QgYXJnU3RyaW5nID0gZnVuYy5zb3VyY2UgPyBgKFwiJHtlc2NhcGUoZnVuYy5zb3VyY2UpfVwiKWAgOiBgKD8pYDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgX2N1c3RvbToge1xyXG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxyXG4gICAgICAgICAgICBkaXNwbGF5OiBgPHNwYW4+xpI8L3NwYW4+ICR7YXJnU3RyaW5nfWBcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHJlZ2lzdGVyU2NvcGUocGF5bG9hZCwgaTE4bikge1xyXG4gICAgcGF5bG9hZC5yb290Tm9kZXMucHVzaCh7XHJcbiAgICAgICAgaWQ6ICdnbG9iYWwnLFxyXG4gICAgICAgIGxhYmVsOiAnR2xvYmFsIFNjb3BlJ1xyXG4gICAgfSk7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IGdsb2JhbCA9IGkxOG4ubW9kZSA9PT0gJ2NvbXBvc2l0aW9uJ1xyXG4gICAgICAgID8gaTE4bi5nbG9iYWxcclxuICAgICAgICA6IGkxOG4uZ2xvYmFsLl9fY29tcG9zZXI7XHJcbiAgICBmb3IgKGNvbnN0IFtrZXlJbnN0YW5jZSwgaW5zdGFuY2VdIG9mIGkxOG4uX19pbnN0YW5jZXMpIHtcclxuICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgICAgICBjb25zdCBjb21wb3NlciA9IGkxOG4ubW9kZSA9PT0gJ2NvbXBvc2l0aW9uJ1xyXG4gICAgICAgICAgICA/IGluc3RhbmNlXHJcbiAgICAgICAgICAgIDogaW5zdGFuY2UuX19jb21wb3NlcjtcclxuICAgICAgICBpZiAoZ2xvYmFsID09PSBjb21wb3Nlcikge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF5bG9hZC5yb290Tm9kZXMucHVzaCh7XHJcbiAgICAgICAgICAgIGlkOiBjb21wb3Nlci5pZC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICBsYWJlbDogYCR7Z2V0STE4blNjb3BlTGFibGUoa2V5SW5zdGFuY2UpfSBTY29wZWBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRDb21wb25lbnRJbnN0YW5jZShub2RlSWQsIGkxOG4pIHtcclxuICAgIGxldCBpbnN0YW5jZSA9IG51bGw7XHJcbiAgICBpZiAobm9kZUlkICE9PSAnZ2xvYmFsJykge1xyXG4gICAgICAgIGZvciAoY29uc3QgW2NvbXBvbmVudCwgY29tcG9zZXJdIG9mIGkxOG4uX19pbnN0YW5jZXMuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb3Nlci5pZC50b1N0cmluZygpID09PSBub2RlSWQpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlID0gY29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5zdGFuY2U7XHJcbn1cclxuZnVuY3Rpb24gZ2V0Q29tcG9zZXIkMShub2RlSWQsIGkxOG4pIHtcclxuICAgIGlmIChub2RlSWQgPT09ICdnbG9iYWwnKSB7XHJcbiAgICAgICAgcmV0dXJuIGkxOG4ubW9kZSA9PT0gJ2NvbXBvc2l0aW9uJ1xyXG4gICAgICAgICAgICA/IGkxOG4uZ2xvYmFsXHJcbiAgICAgICAgICAgIDogaTE4bi5nbG9iYWwuX19jb21wb3NlcjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gQXJyYXkuZnJvbShpMThuLl9faW5zdGFuY2VzLnZhbHVlcygpKS5maW5kKGl0ZW0gPT4gaXRlbS5pZC50b1N0cmluZygpID09PSBub2RlSWQpO1xyXG4gICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaTE4bi5tb2RlID09PSAnY29tcG9zaXRpb24nXHJcbiAgICAgICAgICAgICAgICA/IGluc3RhbmNlXHJcbiAgICAgICAgICAgICAgICA6IGluc3RhbmNlLl9fY29tcG9zZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaW5zcGVjdFNjb3BlKHBheWxvYWQsIGkxOG5cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuKSB7XHJcbiAgICBjb25zdCBjb21wb3NlciA9IGdldENvbXBvc2VyJDEocGF5bG9hZC5ub2RlSWQsIGkxOG4pO1xyXG4gICAgaWYgKGNvbXBvc2VyKSB7XHJcbiAgICAgICAgLy8gVE9ETzpcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHBheWxvYWQuc3RhdGUgPSBtYWtlU2NvcGVJbnNwZWN0U3RhdGUoY29tcG9zZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuZnVuY3Rpb24gbWFrZVNjb3BlSW5zcGVjdFN0YXRlKGNvbXBvc2VyKSB7XHJcbiAgICBjb25zdCBzdGF0ZSA9IHt9O1xyXG4gICAgY29uc3QgbG9jYWxlVHlwZSA9ICdMb2NhbGUgcmVsYXRlZCBpbmZvJztcclxuICAgIGNvbnN0IGxvY2FsZVN0YXRlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHR5cGU6IGxvY2FsZVR5cGUsXHJcbiAgICAgICAgICAgIGtleTogJ2xvY2FsZScsXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB2YWx1ZTogY29tcG9zZXIubG9jYWxlLnZhbHVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHR5cGU6IGxvY2FsZVR5cGUsXHJcbiAgICAgICAgICAgIGtleTogJ2ZhbGxiYWNrTG9jYWxlJyxcclxuICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjb21wb3Nlci5mYWxsYmFja0xvY2FsZS52YWx1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiBsb2NhbGVUeXBlLFxyXG4gICAgICAgICAgICBrZXk6ICdhdmFpbGFibGVMb2NhbGVzJyxcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICB2YWx1ZTogY29tcG9zZXIuYXZhaWxhYmxlTG9jYWxlc1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiBsb2NhbGVUeXBlLFxyXG4gICAgICAgICAgICBrZXk6ICdpbmhlcml0TG9jYWxlJyxcclxuICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjb21wb3Nlci5pbmhlcml0TG9jYWxlXHJcbiAgICAgICAgfVxyXG4gICAgXTtcclxuICAgIHN0YXRlW2xvY2FsZVR5cGVdID0gbG9jYWxlU3RhdGVzO1xyXG4gICAgY29uc3QgbG9jYWxlTWVzc2FnZXNUeXBlID0gJ0xvY2FsZSBtZXNzYWdlcyBpbmZvJztcclxuICAgIGNvbnN0IGxvY2FsZU1lc3NhZ2VzU3RhdGVzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZTogbG9jYWxlTWVzc2FnZXNUeXBlLFxyXG4gICAgICAgICAgICBrZXk6ICdtZXNzYWdlcycsXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgdmFsdWU6IGdldExvY2FsZU1lc3NhZ2VWYWx1ZShjb21wb3Nlci5tZXNzYWdlcy52YWx1ZSlcclxuICAgICAgICB9XHJcbiAgICBdO1xyXG4gICAgc3RhdGVbbG9jYWxlTWVzc2FnZXNUeXBlXSA9IGxvY2FsZU1lc3NhZ2VzU3RhdGVzO1xyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGRhdGV0aW1lRm9ybWF0c1R5cGUgPSAnRGF0ZXRpbWUgZm9ybWF0cyBpbmZvJztcclxuICAgICAgICBjb25zdCBkYXRldGltZUZvcm1hdHNTdGF0ZXMgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IGRhdGV0aW1lRm9ybWF0c1R5cGUsXHJcbiAgICAgICAgICAgICAgICBrZXk6ICdkYXRldGltZUZvcm1hdHMnLFxyXG4gICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNvbXBvc2VyLmRhdGV0aW1lRm9ybWF0cy52YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBzdGF0ZVtkYXRldGltZUZvcm1hdHNUeXBlXSA9IGRhdGV0aW1lRm9ybWF0c1N0YXRlcztcclxuICAgICAgICBjb25zdCBudW1iZXJGb3JtYXRzVHlwZSA9ICdEYXRldGltZSBmb3JtYXRzIGluZm8nO1xyXG4gICAgICAgIGNvbnN0IG51bWJlckZvcm1hdHNTdGF0ZXMgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IG51bWJlckZvcm1hdHNUeXBlLFxyXG4gICAgICAgICAgICAgICAga2V5OiAnbnVtYmVyRm9ybWF0cycsXHJcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogY29tcG9zZXIubnVtYmVyRm9ybWF0cy52YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBzdGF0ZVtudW1iZXJGb3JtYXRzVHlwZV0gPSBudW1iZXJGb3JtYXRzU3RhdGVzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0YXRlO1xyXG59XHJcbmZ1bmN0aW9uIGFkZFRpbWVsaW5lRXZlbnQoZXZlbnQsIHBheWxvYWQpIHtcclxuICAgIGlmIChkZXZ0b29sc0FwaSkge1xyXG4gICAgICAgIGxldCBncm91cElkO1xyXG4gICAgICAgIGlmIChwYXlsb2FkICYmICdncm91cElkJyBpbiBwYXlsb2FkKSB7XHJcbiAgICAgICAgICAgIGdyb3VwSWQgPSBwYXlsb2FkLmdyb3VwSWQ7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBwYXlsb2FkLmdyb3VwSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRldnRvb2xzQXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICBsYXllcklkOiBcInZ1ZS1pMThuLXRpbWVsaW5lXCIgLyogVElNRUxJTkUgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogZXZlbnQsXHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgdGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIG1ldGE6IHt9LFxyXG4gICAgICAgICAgICAgICAgZGF0YTogcGF5bG9hZCB8fCB7fSxcclxuICAgICAgICAgICAgICAgIGxvZ1R5cGU6IGV2ZW50ID09PSBcImNvbXBpbGUtZXJyb3JcIiAvKiBDT01QSUxFX0VSUk9SICovXHJcbiAgICAgICAgICAgICAgICAgICAgPyAnZXJyb3InXHJcbiAgICAgICAgICAgICAgICAgICAgOiBldmVudCA9PT0gXCJmYWxsYmFja1wiIC8qIEZBTEJBQ0sgKi8gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPT09IFwibWlzc2luZ1wiIC8qIE1JU1NJTkcgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnd2FybmluZydcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiAnZGVmYXVsdCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGVkaXRTY29wZShwYXlsb2FkLCBpMThuKSB7XHJcbiAgICBjb25zdCBjb21wb3NlciA9IGdldENvbXBvc2VyJDEocGF5bG9hZC5ub2RlSWQsIGkxOG4pO1xyXG4gICAgaWYgKGNvbXBvc2VyKSB7XHJcbiAgICAgICAgY29uc3QgW2ZpZWxkXSA9IHBheWxvYWQucGF0aDtcclxuICAgICAgICBpZiAoZmllbGQgPT09ICdsb2NhbGUnICYmIGlzU3RyaW5nKHBheWxvYWQuc3RhdGUudmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGNvbXBvc2VyLmxvY2FsZS52YWx1ZSA9IHBheWxvYWQuc3RhdGUudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpZWxkID09PSAnZmFsbGJhY2tMb2NhbGUnICYmXHJcbiAgICAgICAgICAgIChpc1N0cmluZyhwYXlsb2FkLnN0YXRlLnZhbHVlKSB8fFxyXG4gICAgICAgICAgICAgICAgaXNBcnJheShwYXlsb2FkLnN0YXRlLnZhbHVlKSB8fFxyXG4gICAgICAgICAgICAgICAgaXNPYmplY3QocGF5bG9hZC5zdGF0ZS52YWx1ZSkpKSB7XHJcbiAgICAgICAgICAgIGNvbXBvc2VyLmZhbGxiYWNrTG9jYWxlLnZhbHVlID0gcGF5bG9hZC5zdGF0ZS52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmllbGQgPT09ICdpbmhlcml0TG9jYWxlJyAmJiBpc0Jvb2xlYW4ocGF5bG9hZC5zdGF0ZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29tcG9zZXIuaW5oZXJpdExvY2FsZSA9IHBheWxvYWQuc3RhdGUudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBTdXBwb3J0cyBjb21wYXRpYmlsaXR5IGZvciBsZWdhY3kgdnVlLWkxOG4gQVBJc1xyXG4gKiBUaGlzIG1peGluIGlzIHVzZWQgd2hlbiB3ZSB1c2UgdnVlLWkxOG5AdjkueCBvciBsYXRlclxyXG4gKi9cclxuZnVuY3Rpb24gZGVmaW5lTWl4aW4odnVlaTE4biwgY29tcG9zZXIsIGkxOG4pIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYmVmb3JlQ3JlYXRlKCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlSTE4bkVycm9yKEkxOG5FcnJvckNvZGVzLlVORVhQRUNURURfRVJST1IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pMThuKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zSTE4biA9IG9wdGlvbnMuaTE4bjtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLl9faTE4bikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNJMThuLl9faTE4biA9IG9wdGlvbnMuX19pMThuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3B0aW9uc0kxOG4uX19yb290ID0gY29tcG9zZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcyA9PT0gdGhpcy4kcm9vdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGkxOG4gPSBtZXJnZVRvUm9vdCh2dWVpMThuLCBvcHRpb25zSTE4bik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zSTE4bi5fX2luamVjdFdpdGhPcHRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGkxOG4gPSBjcmVhdGVWdWVJMThuKG9wdGlvbnNJMThuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLl9faTE4bikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMgPT09IHRoaXMuJHJvb3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRpMThuID0gbWVyZ2VUb1Jvb3QodnVlaTE4biwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRpMThuID0gY3JlYXRlVnVlSTE4bih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9faTE4bjogb3B0aW9ucy5fX2kxOG4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9faW5qZWN0V2l0aE9wdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX19yb290OiBjb21wb3NlclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc2V0IGdsb2JhbFxyXG4gICAgICAgICAgICAgICAgdGhpcy4kaTE4biA9IHZ1ZWkxOG47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuX19pMThuR2xvYmFsKSB7XHJcbiAgICAgICAgICAgICAgICBhZGp1c3RJMThuUmVzb3VyY2VzKGNvbXBvc2VyLCBvcHRpb25zLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2dWVpMThuLl9fb25Db21wb25lbnRJbnN0YW5jZUNyZWF0ZWQodGhpcy4kaTE4bik7XHJcbiAgICAgICAgICAgIGkxOG4uX19zZXRJbnN0YW5jZShpbnN0YW5jZSwgdGhpcy4kaTE4bik7XHJcbiAgICAgICAgICAgIC8vIGRlZmluZXMgdnVlLWkxOG4gbGVnYWN5IEFQSXNcclxuICAgICAgICAgICAgdGhpcy4kdCA9ICguLi5hcmdzKSA9PiB0aGlzLiRpMThuLnQoLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHRoaXMuJHJ0ID0gKC4uLmFyZ3MpID0+IHRoaXMuJGkxOG4ucnQoLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHRoaXMuJHRjID0gKC4uLmFyZ3MpID0+IHRoaXMuJGkxOG4udGMoLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHRoaXMuJHRlID0gKGtleSwgbG9jYWxlKSA9PiB0aGlzLiRpMThuLnRlKGtleSwgbG9jYWxlKTtcclxuICAgICAgICAgICAgdGhpcy4kZCA9ICguLi5hcmdzKSA9PiB0aGlzLiRpMThuLmQoLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHRoaXMuJG4gPSAoLi4uYXJncykgPT4gdGhpcy4kaTE4bi5uKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB0aGlzLiR0bSA9IChrZXkpID0+IHRoaXMuJGkxOG4udG0oa2V5KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vdW50ZWQoKSB7XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgICAgICBpZiAoKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pICYmXHJcbiAgICAgICAgICAgICAgICAhZmFsc2UgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuJGVsICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLiRpMThuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5fX1ZVRV9JMThOX18gPSB0aGlzLiRpMThuLl9fY29tcG9zZXI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbWl0dGVyID0gKHRoaXMuX192X2VtaXR0ZXIgPVxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVtaXR0ZXIoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdnVlSTE4biA9IHRoaXMuJGkxOG47XHJcbiAgICAgICAgICAgICAgICBfdnVlSTE4bi5fX2VuYWJsZUVtaXR0ZXIgJiYgX3Z1ZUkxOG4uX19lbmFibGVFbWl0dGVyKGVtaXR0ZXIpO1xyXG4gICAgICAgICAgICAgICAgZW1pdHRlci5vbignKicsIGFkZFRpbWVsaW5lRXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1bm1vdW50ZWQoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgICAgICBpZiAoIWluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuVU5FWFBFQ1RFRF9FUlJPUik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiZcclxuICAgICAgICAgICAgICAgICFmYWxzZSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy4kZWwgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuJGVsLl9fVlVFX0kxOE5fXykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX192X2VtaXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdl9lbWl0dGVyLm9mZignKicsIGFkZFRpbWVsaW5lRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9fdl9lbWl0dGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJGkxOG4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfdnVlSTE4biA9IHRoaXMuJGkxOG47XHJcbiAgICAgICAgICAgICAgICAgICAgX3Z1ZUkxOG4uX19kaXNhYmxlRW1pdHRlciAmJiBfdnVlSTE4bi5fX2Rpc2FibGVFbWl0dGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuJGVsLl9fVlVFX0kxOE5fXztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy4kdDtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuJHJ0O1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy4kdGM7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLiR0ZTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuJGQ7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLiRuO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy4kdG07XHJcbiAgICAgICAgICAgIGkxOG4uX19kZWxldGVJbnN0YW5jZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLiRpMThuO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gbWVyZ2VUb1Jvb3Qocm9vdCwgb3B0aW9ucykge1xyXG4gICAgcm9vdC5sb2NhbGUgPSBvcHRpb25zLmxvY2FsZSB8fCByb290LmxvY2FsZTtcclxuICAgIHJvb3QuZmFsbGJhY2tMb2NhbGUgPSBvcHRpb25zLmZhbGxiYWNrTG9jYWxlIHx8IHJvb3QuZmFsbGJhY2tMb2NhbGU7XHJcbiAgICByb290Lm1pc3NpbmcgPSBvcHRpb25zLm1pc3NpbmcgfHwgcm9vdC5taXNzaW5nO1xyXG4gICAgcm9vdC5zaWxlbnRUcmFuc2xhdGlvbldhcm4gPVxyXG4gICAgICAgIG9wdGlvbnMuc2lsZW50VHJhbnNsYXRpb25XYXJuIHx8IHJvb3Quc2lsZW50RmFsbGJhY2tXYXJuO1xyXG4gICAgcm9vdC5zaWxlbnRGYWxsYmFja1dhcm4gPVxyXG4gICAgICAgIG9wdGlvbnMuc2lsZW50RmFsbGJhY2tXYXJuIHx8IHJvb3Quc2lsZW50RmFsbGJhY2tXYXJuO1xyXG4gICAgcm9vdC5mb3JtYXRGYWxsYmFja01lc3NhZ2VzID1cclxuICAgICAgICBvcHRpb25zLmZvcm1hdEZhbGxiYWNrTWVzc2FnZXMgfHwgcm9vdC5mb3JtYXRGYWxsYmFja01lc3NhZ2VzO1xyXG4gICAgcm9vdC5wb3N0VHJhbnNsYXRpb24gPSBvcHRpb25zLnBvc3RUcmFuc2xhdGlvbiB8fCByb290LnBvc3RUcmFuc2xhdGlvbjtcclxuICAgIHJvb3Qud2Fybkh0bWxJbk1lc3NhZ2UgPSBvcHRpb25zLndhcm5IdG1sSW5NZXNzYWdlIHx8IHJvb3Qud2Fybkh0bWxJbk1lc3NhZ2U7XHJcbiAgICByb290LmVzY2FwZVBhcmFtZXRlckh0bWwgPVxyXG4gICAgICAgIG9wdGlvbnMuZXNjYXBlUGFyYW1ldGVySHRtbCB8fCByb290LmVzY2FwZVBhcmFtZXRlckh0bWw7XHJcbiAgICByb290LnN5bmMgPSBvcHRpb25zLnN5bmMgfHwgcm9vdC5zeW5jO1xyXG4gICAgcm9vdC5fX2NvbXBvc2VyW1NldFBsdXJhbFJ1bGVzU3ltYm9sXShvcHRpb25zLnBsdXJhbGl6YXRpb25SdWxlcyB8fCByb290LnBsdXJhbGl6YXRpb25SdWxlcyk7XHJcbiAgICBjb25zdCBtZXNzYWdlcyA9IGdldExvY2FsZU1lc3NhZ2VzKHJvb3QubG9jYWxlLCB7XHJcbiAgICAgICAgbWVzc2FnZXM6IG9wdGlvbnMubWVzc2FnZXMsXHJcbiAgICAgICAgX19pMThuOiBvcHRpb25zLl9faTE4blxyXG4gICAgfSk7XHJcbiAgICBPYmplY3Qua2V5cyhtZXNzYWdlcykuZm9yRWFjaChsb2NhbGUgPT4gcm9vdC5tZXJnZUxvY2FsZU1lc3NhZ2UobG9jYWxlLCBtZXNzYWdlc1tsb2NhbGVdKSk7XHJcbiAgICBpZiAob3B0aW9ucy5kYXRldGltZUZvcm1hdHMpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLmRhdGV0aW1lRm9ybWF0cykuZm9yRWFjaChsb2NhbGUgPT4gcm9vdC5tZXJnZURhdGVUaW1lRm9ybWF0KGxvY2FsZSwgb3B0aW9ucy5kYXRldGltZUZvcm1hdHNbbG9jYWxlXSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMubnVtYmVyRm9ybWF0cykge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMubnVtYmVyRm9ybWF0cykuZm9yRWFjaChsb2NhbGUgPT4gcm9vdC5tZXJnZU51bWJlckZvcm1hdChsb2NhbGUsIG9wdGlvbnMubnVtYmVyRm9ybWF0c1tsb2NhbGVdKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcm9vdDtcclxufVxuXG4vKipcclxuICogSW5qZWN0aW9uIGtleSBmb3Ige0BsaW5rIHVzZUkxOG59XHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSBnbG9iYWwgaW5qZWN0aW9uIGtleSBmb3IgSTE4biBpbnN0YW5jZXMgd2l0aCBgdXNlSTE4bmAuIHRoaXMgaW5qZWN0aW9uIGtleSBpcyB1c2VkIGluIFdlYiBDb21wb25lbnRzLlxyXG4gKiBTcGVjaWZ5IHRoZSBpMThuIGluc3RhbmNlIGNyZWF0ZWQgYnkge0BsaW5rIGNyZWF0ZUkxOG59IHRvZ2V0aGVyIHdpdGggYHByb3ZpZGVgIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAVnVlSTE4bkdlbmVyYWxcclxuICovXHJcbmNvbnN0IEkxOG5JbmplY3Rpb25LZXkgPSBcclxuLyogI19fUFVSRV9fKi8gbWFrZVN5bWJvbCgnZ2xvYmFsLXZ1ZS1pMThuJyk7XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzXHJcbmZ1bmN0aW9uIGNyZWF0ZUkxOG4ob3B0aW9ucyA9IHt9LCBWdWVJMThuTGVnYWN5KSB7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IF9fbGVnYWN5TW9kZSA9IF9fVlVFX0kxOE5fTEVHQUNZX0FQSV9fICYmIGlzQm9vbGVhbihvcHRpb25zLmxlZ2FjeSlcclxuICAgICAgICAgICAgPyBvcHRpb25zLmxlZ2FjeVxyXG4gICAgICAgICAgICA6IF9fVlVFX0kxOE5fTEVHQUNZX0FQSV9fO1xyXG4gICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICBjb25zdCBfX2dsb2JhbEluamVjdGlvbiA9IGlzQm9vbGVhbihvcHRpb25zLmdsb2JhbEluamVjdGlvbilcclxuICAgICAgICA/IG9wdGlvbnMuZ2xvYmFsSW5qZWN0aW9uXHJcbiAgICAgICAgOiB0cnVlO1xyXG4gICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICBjb25zdCBfX2FsbG93Q29tcG9zaXRpb24gPSBfX1ZVRV9JMThOX0xFR0FDWV9BUElfXyAmJiBfX2xlZ2FjeU1vZGVcclxuICAgICAgICAgICAgPyAhIW9wdGlvbnMuYWxsb3dDb21wb3NpdGlvblxyXG4gICAgICAgICAgICA6IHRydWU7XHJcbiAgICBjb25zdCBfX2luc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgIGNvbnN0IFtnbG9iYWxTY29wZSwgX19nbG9iYWxdID0gY3JlYXRlR2xvYmFsKG9wdGlvbnMsIF9fbGVnYWN5TW9kZSk7XHJcbiAgICBjb25zdCBzeW1ib2wgPSBtYWtlU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICd2dWUtaTE4bicgOiAnJyk7XHJcbiAgICBmdW5jdGlvbiBfX2dldEluc3RhbmNlKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHJldHVybiBfX2luc3RhbmNlcy5nZXQoY29tcG9uZW50KSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gX19zZXRJbnN0YW5jZShjb21wb25lbnQsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgX19pbnN0YW5jZXMuc2V0KGNvbXBvbmVudCwgaW5zdGFuY2UpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gX19kZWxldGVJbnN0YW5jZShjb21wb25lbnQpIHtcclxuICAgICAgICBfX2luc3RhbmNlcy5kZWxldGUoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHtcclxuICAgICAgICBjb25zdCBpMThuID0ge1xyXG4gICAgICAgICAgICAvLyBtb2RlXHJcbiAgICAgICAgICAgIGdldCBtb2RlKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fVlVFX0kxOE5fTEVHQUNZX0FQSV9fICYmIF9fbGVnYWN5TW9kZVxyXG4gICAgICAgICAgICAgICAgICAgID8gJ2xlZ2FjeSdcclxuICAgICAgICAgICAgICAgICAgICA6ICdjb21wb3NpdGlvbic7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGFsbG93Q29tcG9zaXRpb25cclxuICAgICAgICAgICAgZ2V0IGFsbG93Q29tcG9zaXRpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX19hbGxvd0NvbXBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBpbnN0YWxsIHBsdWdpblxyXG4gICAgICAgICAgICBhc3luYyBpbnN0YWxsKGFwcCwgLi4ub3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5fX1ZVRV9JMThOX18gPSBpMThuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gc2V0dXAgZ2xvYmFsIHByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICBhcHAuX19WVUVfSTE4Tl9TWU1CT0xfXyA9IHN5bWJvbDtcclxuICAgICAgICAgICAgICAgIGFwcC5wcm92aWRlKGFwcC5fX1ZVRV9JMThOX1NZTUJPTF9fLCBpMThuKTtcclxuICAgICAgICAgICAgICAgIC8vIGdsb2JhbCBtZXRob2QgYW5kIHByb3BlcnRpZXMgaW5qZWN0aW9uIGZvciBDb21wb3NpdGlvbiBBUElcclxuICAgICAgICAgICAgICAgIGlmICghX19sZWdhY3lNb2RlICYmIF9fZ2xvYmFsSW5qZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5qZWN0R2xvYmFsRmllbGRzKGFwcCwgaTE4bi5nbG9iYWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFsbCBidWlsdC1pbiBjb21wb25lbnRzIGFuZCBkaXJlY3RpdmVcclxuICAgICAgICAgICAgICAgIGlmIChfX1ZVRV9JMThOX0ZVTExfSU5TVEFMTF9fKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbHkoYXBwLCBpMThuLCAuLi5vcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHNldHVwIG1peGluIGZvciBMZWdhY3kgQVBJXHJcbiAgICAgICAgICAgICAgICBpZiAoX19WVUVfSTE4Tl9MRUdBQ1lfQVBJX18gJiYgX19sZWdhY3lNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLm1peGluKGRlZmluZU1peGluKF9fZ2xvYmFsLCBfX2dsb2JhbC5fX2NvbXBvc2VyLCBpMThuKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyByZWxlYXNlIGdsb2JhbCBzY29wZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdW5tb3VudEFwcCA9IGFwcC51bm1vdW50O1xyXG4gICAgICAgICAgICAgICAgYXBwLnVubW91bnQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaTE4bi5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5tb3VudEFwcCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIHNldHVwIHZ1ZS1kZXZ0b29scyBwbHVnaW5cclxuICAgICAgICAgICAgICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiYgIWZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0ID0gYXdhaXQgZW5hYmxlRGV2VG9vbHMoYXBwLCBpMThuKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuQ0FOTk9UX1NFVFVQX1ZVRV9ERVZUT09MU19QTFVHSU4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWl0dGVyID0gY3JlYXRlRW1pdHRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfX2xlZ2FjeU1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX3Z1ZUkxOG4gPSBfX2dsb2JhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Z1ZUkxOG4uX19lbmFibGVFbWl0dGVyICYmIF92dWVJMThuLl9fZW5hYmxlRW1pdHRlcihlbWl0dGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9jb21wb3NlciA9IF9fZ2xvYmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY29tcG9zZXJbRW5hYmxlRW1pdHRlcl0gJiYgX2NvbXBvc2VyW0VuYWJsZUVtaXR0ZXJdKGVtaXR0ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLm9uKCcqJywgYWRkVGltZWxpbmVFdmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGdsb2JhbCBhY2Nlc3NvclxyXG4gICAgICAgICAgICBnZXQgZ2xvYmFsKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2xvYmFsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsU2NvcGUuc3RvcCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBAaW50ZXJuYWxcclxuICAgICAgICAgICAgX19pbnN0YW5jZXMsXHJcbiAgICAgICAgICAgIC8vIEBpbnRlcm5hbFxyXG4gICAgICAgICAgICBfX2dldEluc3RhbmNlLFxyXG4gICAgICAgICAgICAvLyBAaW50ZXJuYWxcclxuICAgICAgICAgICAgX19zZXRJbnN0YW5jZSxcclxuICAgICAgICAgICAgLy8gQGludGVybmFsXHJcbiAgICAgICAgICAgIF9fZGVsZXRlSW5zdGFuY2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBpMThuO1xyXG4gICAgfVxyXG59XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzXHJcbmZ1bmN0aW9uIHVzZUkxOG4ob3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgaWYgKGluc3RhbmNlID09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuTVVTVF9CRV9DQUxMX1NFVFVQX1RPUCk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWluc3RhbmNlLmlzQ0UgJiZcclxuICAgICAgICBpbnN0YW5jZS5hcHBDb250ZXh0LmFwcCAhPSBudWxsICYmXHJcbiAgICAgICAgIWluc3RhbmNlLmFwcENvbnRleHQuYXBwLl9fVlVFX0kxOE5fU1lNQk9MX18pIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuTk9UX0lOU0xBTExFRCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBpMThuID0gZ2V0STE4bkluc3RhbmNlKGluc3RhbmNlKTtcclxuICAgIGNvbnN0IGdsb2JhbCA9IGdldEdsb2JhbENvbXBvc2VyKGkxOG4pO1xyXG4gICAgY29uc3QgY29tcG9uZW50T3B0aW9ucyA9IGdldENvbXBvbmVudE9wdGlvbnMoaW5zdGFuY2UpO1xyXG4gICAgY29uc3Qgc2NvcGUgPSBnZXRTY29wZShvcHRpb25zLCBjb21wb25lbnRPcHRpb25zKTtcclxuICAgIGlmIChfX1ZVRV9JMThOX0xFR0FDWV9BUElfXykge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgaWYgKGkxOG4ubW9kZSA9PT0gJ2xlZ2FjeScgJiYgIW9wdGlvbnMuX191c2VDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaWYgKCFpMThuLmFsbG93Q29tcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUkxOG5FcnJvcihJMThuRXJyb3JDb2Rlcy5OT1RfQVZBSUxBQkxFX0lOX0xFR0FDWV9NT0RFKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdXNlSTE4bkZvckxlZ2FjeShpbnN0YW5jZSwgc2NvcGUsIGdsb2JhbCwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNjb3BlID09PSAnZ2xvYmFsJykge1xyXG4gICAgICAgIGFkanVzdEkxOG5SZXNvdXJjZXMoZ2xvYmFsLCBvcHRpb25zLCBjb21wb25lbnRPcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgaWYgKHNjb3BlID09PSAncGFyZW50Jykge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgbGV0IGNvbXBvc2VyID0gZ2V0Q29tcG9zZXIoaTE4biwgaW5zdGFuY2UsIG9wdGlvbnMuX191c2VDb21wb25lbnQpO1xyXG4gICAgICAgIGlmIChjb21wb3NlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oZ2V0V2Fybk1lc3NhZ2UoSTE4bldhcm5Db2Rlcy5OT1RfRk9VTkRfUEFSRU5UX1NDT1BFKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcG9zZXIgPSBnbG9iYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21wb3NlcjtcclxuICAgIH1cclxuICAgIGNvbnN0IGkxOG5JbnRlcm5hbCA9IGkxOG47XHJcbiAgICBsZXQgY29tcG9zZXIgPSBpMThuSW50ZXJuYWwuX19nZXRJbnN0YW5jZShpbnN0YW5jZSk7XHJcbiAgICBpZiAoY29tcG9zZXIgPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvc2VyT3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKCdfX2kxOG4nIGluIGNvbXBvbmVudE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgY29tcG9zZXJPcHRpb25zLl9faTE4biA9IGNvbXBvbmVudE9wdGlvbnMuX19pMThuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ2xvYmFsKSB7XHJcbiAgICAgICAgICAgIGNvbXBvc2VyT3B0aW9ucy5fX3Jvb3QgPSBnbG9iYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbXBvc2VyID0gY3JlYXRlQ29tcG9zZXIoY29tcG9zZXJPcHRpb25zKTtcclxuICAgICAgICBzZXR1cExpZmVDeWNsZShpMThuSW50ZXJuYWwsIGluc3RhbmNlLCBjb21wb3Nlcik7XHJcbiAgICAgICAgaTE4bkludGVybmFsLl9fc2V0SW5zdGFuY2UoaW5zdGFuY2UsIGNvbXBvc2VyKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb21wb3NlcjtcclxufVxyXG4vKipcclxuICogQ2FzdCB0byBWdWVJMThuIGxlZ2FjeSBjb21wYXRpYmxlIHR5cGVcclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBBUEkgaXMgcHJvdmlkZWQgb25seSB3aXRoIFt2dWUtaTE4bi1icmlkZ2VdKGh0dHBzOi8vdnVlLWkxOG4uaW50bGlmeS5kZXYvZ3VpZGUvbWlncmF0aW9uL3dheXMuaHRtbCN3aGF0LWlzLXZ1ZS1pMThuLWJyaWRnZSkuXHJcbiAqXHJcbiAqIFRoZSBwdXJwb3NlIG9mIHRoaXMgZnVuY3Rpb24gaXMgdG8gY29udmVydCBhbiB7QGxpbmsgSTE4bn0gaW5zdGFuY2UgY3JlYXRlZCB3aXRoIHtAbGluayBjcmVhdGVJMThuIHwgY3JlYXRlSTE4bihsZWdhY3k6IHRydWUpfSBpbnRvIGEgYHZ1ZS1pMThuQHY4LnhgIGNvbXBhdGlibGUgaW5zdGFuY2Ugb2YgYG5ldyBWdWVJMThuYCBpbiBhIFR5cGVTY3JpcHQgZW52aXJvbm1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSBpMThuIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIEkxOG59XHJcbiAqIEByZXR1cm5zIEEgaTE4biBpbnN0YW5jZSB3aGljaCBpcyBjYXN0ZWQgdG8ge0BsaW5rIFZ1ZUkxOG59IHR5cGVcclxuICpcclxuICogQFZ1ZUkxOG5UaXBcclxuICogOm5ldzogcHJvdmlkZWQgYnkgKip2dWUtaTE4bi1icmlkZ2Ugb25seSoqXHJcbiAqXHJcbiAqIEBWdWVJMThuR2VuZXJhbFxyXG4gKi9cclxuY29uc3QgY2FzdFRvVnVlSTE4biA9ICAoaTE4blxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4pID0+IHtcclxuICAgIGlmICghKF9fVlVFX0kxOE5fQlJJREdFX18gaW4gaTE4bikpIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuTk9UX0NPTVBBVElCTEVfTEVHQUNZX1ZVRV9JMThOKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpMThuO1xyXG59O1xyXG5mdW5jdGlvbiBjcmVhdGVHbG9iYWwob3B0aW9ucywgbGVnYWN5TW9kZSwgVnVlSTE4bkxlZ2FjeSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuKSB7XHJcbiAgICBjb25zdCBzY29wZSA9IGVmZmVjdFNjb3BlKCk7XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gX19WVUVfSTE4Tl9MRUdBQ1lfQVBJX18gJiYgbGVnYWN5TW9kZVxyXG4gICAgICAgICAgICA/IHNjb3BlLnJ1bigoKSA9PiBjcmVhdGVWdWVJMThuKG9wdGlvbnMpKVxyXG4gICAgICAgICAgICA6IHNjb3BlLnJ1bigoKSA9PiBjcmVhdGVDb21wb3NlcihvcHRpb25zKSk7XHJcbiAgICAgICAgaWYgKG9iaiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUkxOG5FcnJvcihJMThuRXJyb3JDb2Rlcy5VTkVYUEVDVEVEX0VSUk9SKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtzY29wZSwgb2JqXTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRJMThuSW5zdGFuY2UoaW5zdGFuY2UpIHtcclxuICAgIHtcclxuICAgICAgICBjb25zdCBpMThuID0gaW5qZWN0KCFpbnN0YW5jZS5pc0NFXHJcbiAgICAgICAgICAgID8gaW5zdGFuY2UuYXBwQ29udGV4dC5hcHAuX19WVUVfSTE4Tl9TWU1CT0xfX1xyXG4gICAgICAgICAgICA6IEkxOG5JbmplY3Rpb25LZXkpO1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmICghaTE4bikge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoIWluc3RhbmNlLmlzQ0VcclxuICAgICAgICAgICAgICAgID8gSTE4bkVycm9yQ29kZXMuVU5FWFBFQ1RFRF9FUlJPUlxyXG4gICAgICAgICAgICAgICAgOiBJMThuRXJyb3JDb2Rlcy5OT1RfSU5TTEFMTEVEX1dJVEhfUFJPVklERSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpMThuO1xyXG4gICAgfVxyXG59XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmZ1bmN0aW9uIGdldFNjb3BlKG9wdGlvbnMsIGNvbXBvbmVudE9wdGlvbnMpIHtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgcmV0dXJuIGlzRW1wdHlPYmplY3Qob3B0aW9ucylcclxuICAgICAgICA/ICgnX19pMThuJyBpbiBjb21wb25lbnRPcHRpb25zKVxyXG4gICAgICAgICAgICA/ICdsb2NhbCdcclxuICAgICAgICAgICAgOiAnZ2xvYmFsJ1xyXG4gICAgICAgIDogIW9wdGlvbnMudXNlU2NvcGVcclxuICAgICAgICAgICAgPyAnbG9jYWwnXHJcbiAgICAgICAgICAgIDogb3B0aW9ucy51c2VTY29wZTtcclxufVxyXG5mdW5jdGlvbiBnZXRHbG9iYWxDb21wb3NlcihpMThuKSB7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIHJldHVybiBpMThuLm1vZGUgPT09ICdjb21wb3NpdGlvbidcclxuICAgICAgICAgICAgPyBpMThuLmdsb2JhbFxyXG4gICAgICAgICAgICA6IGkxOG4uZ2xvYmFsLl9fY29tcG9zZXJcclxuICAgICAgICA7XHJcbn1cclxuZnVuY3Rpb24gZ2V0Q29tcG9zZXIoaTE4biwgdGFyZ2V0LCB1c2VDb21wb25lbnQgPSBmYWxzZSkge1xyXG4gICAgbGV0IGNvbXBvc2VyID0gbnVsbDtcclxuICAgIGNvbnN0IHJvb3QgPSB0YXJnZXQucm9vdDtcclxuICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0LnBhcmVudDtcclxuICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwpIHtcclxuICAgICAgICBjb25zdCBpMThuSW50ZXJuYWwgPSBpMThuO1xyXG4gICAgICAgIGlmIChpMThuLm1vZGUgPT09ICdjb21wb3NpdGlvbicpIHtcclxuICAgICAgICAgICAgY29tcG9zZXIgPSBpMThuSW50ZXJuYWwuX19nZXRJbnN0YW5jZShjdXJyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChfX1ZVRV9JMThOX0xFR0FDWV9BUElfXykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdnVlSTE4biA9IGkxOG5JbnRlcm5hbC5fX2dldEluc3RhbmNlKGN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZ1ZUkxOG4gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2VyID0gdnVlSTE4blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuX19jb21wb3NlcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlQ29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvc2VyICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFjb21wb3NlcltJbmVqY3RXaXRoT3B0aW9uXSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9zZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29tcG9zZXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJvb3QgPT09IGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcclxuICAgIH1cclxuICAgIHJldHVybiBjb21wb3NlcjtcclxufVxyXG5mdW5jdGlvbiBzZXR1cExpZmVDeWNsZShpMThuLCB0YXJnZXQsIGNvbXBvc2VyKSB7XHJcbiAgICBsZXQgZW1pdHRlciA9IG51bGw7XHJcbiAgICB7XHJcbiAgICAgICAgb25Nb3VudGVkKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gaW5qZWN0IGNvbXBvc2VyIGluc3RhbmNlIHRvIERPTSBmb3IgaW50bGlmeS1kZXZ0b29sc1xyXG4gICAgICAgICAgICBpZiAoKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pICYmXHJcbiAgICAgICAgICAgICAgICAhZmFsc2UgJiZcclxuICAgICAgICAgICAgICAgIHRhcmdldC52bm9kZS5lbCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnZub2RlLmVsLl9fVlVFX0kxOE5fXyA9IGNvbXBvc2VyO1xyXG4gICAgICAgICAgICAgICAgZW1pdHRlciA9IGNyZWF0ZUVtaXR0ZXIoKTtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfY29tcG9zZXIgPSBjb21wb3NlcjtcclxuICAgICAgICAgICAgICAgIF9jb21wb3NlcltFbmFibGVFbWl0dGVyXSAmJiBfY29tcG9zZXJbRW5hYmxlRW1pdHRlcl0oZW1pdHRlcik7XHJcbiAgICAgICAgICAgICAgICBlbWl0dGVyLm9uKCcqJywgYWRkVGltZWxpbmVFdmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0YXJnZXQpO1xyXG4gICAgICAgIG9uVW5tb3VudGVkKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGNvbXBvc2VyIGluc3RhbmNlIGZyb20gRE9NIGZvciBpbnRsaWZ5LWRldnRvb2xzXHJcbiAgICAgICAgICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiZcclxuICAgICAgICAgICAgICAgICFmYWxzZSAmJlxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnZub2RlLmVsICYmXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQudm5vZGUuZWwuX19WVUVfSTE4Tl9fKSB7XHJcbiAgICAgICAgICAgICAgICBlbWl0dGVyICYmIGVtaXR0ZXIub2ZmKCcqJywgYWRkVGltZWxpbmVFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgY29uc3QgX2NvbXBvc2VyID0gY29tcG9zZXI7XHJcbiAgICAgICAgICAgICAgICBfY29tcG9zZXJbRGlzYWJsZUVtaXR0ZXJdICYmIF9jb21wb3NlcltEaXNhYmxlRW1pdHRlcl0oKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXQudm5vZGUuZWwuX19WVUVfSTE4Tl9fO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGkxOG4uX19kZWxldGVJbnN0YW5jZSh0YXJnZXQpO1xyXG4gICAgICAgIH0sIHRhcmdldCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdXNlSTE4bkZvckxlZ2FjeShpbnN0YW5jZSwgc2NvcGUsIHJvb3QsIG9wdGlvbnMgPSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuKSB7XHJcbiAgICBjb25zdCBpc0xvY2FsZSA9IHNjb3BlID09PSAnbG9jYWwnO1xyXG4gICAgY29uc3QgX2NvbXBvc2VyID0gc2hhbGxvd1JlZihudWxsKTtcclxuICAgIGlmIChpc0xvY2FsZSAmJlxyXG4gICAgICAgIGluc3RhbmNlLnByb3h5ICYmXHJcbiAgICAgICAgIShpbnN0YW5jZS5wcm94eS4kb3B0aW9ucy5pMThuIHx8IGluc3RhbmNlLnByb3h5LiRvcHRpb25zLl9faTE4bikpIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuTVVTVF9ERUZJTkVfSTE4Tl9PUFRJT05fSU5fQUxMT1dfQ09NUE9TSVRJT04pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgX2luaGVyaXRMb2NhbGUgPSBpc0Jvb2xlYW4ob3B0aW9ucy5pbmhlcml0TG9jYWxlKVxyXG4gICAgICAgID8gb3B0aW9ucy5pbmhlcml0TG9jYWxlXHJcbiAgICAgICAgOiB0cnVlO1xyXG4gICAgY29uc3QgX2xvY2FsZSA9IHJlZihcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgaXNMb2NhbGUgJiYgX2luaGVyaXRMb2NhbGVcclxuICAgICAgICA/IHJvb3QubG9jYWxlLnZhbHVlXHJcbiAgICAgICAgOiBpc1N0cmluZyhvcHRpb25zLmxvY2FsZSlcclxuICAgICAgICAgICAgPyBvcHRpb25zLmxvY2FsZVxyXG4gICAgICAgICAgICA6IERFRkFVTFRfTE9DQUxFKTtcclxuICAgIGNvbnN0IF9mYWxsYmFja0xvY2FsZSA9IHJlZihcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgaXNMb2NhbGUgJiYgX2luaGVyaXRMb2NhbGVcclxuICAgICAgICA/IHJvb3QuZmFsbGJhY2tMb2NhbGUudmFsdWVcclxuICAgICAgICA6IGlzU3RyaW5nKG9wdGlvbnMuZmFsbGJhY2tMb2NhbGUpIHx8XHJcbiAgICAgICAgICAgIGlzQXJyYXkob3B0aW9ucy5mYWxsYmFja0xvY2FsZSkgfHxcclxuICAgICAgICAgICAgaXNQbGFpbk9iamVjdChvcHRpb25zLmZhbGxiYWNrTG9jYWxlKSB8fFxyXG4gICAgICAgICAgICBvcHRpb25zLmZhbGxiYWNrTG9jYWxlID09PSBmYWxzZVxyXG4gICAgICAgICAgICA/IG9wdGlvbnMuZmFsbGJhY2tMb2NhbGVcclxuICAgICAgICAgICAgOiBfbG9jYWxlLnZhbHVlKTtcclxuICAgIGNvbnN0IF9tZXNzYWdlcyA9IHJlZihnZXRMb2NhbGVNZXNzYWdlcyhfbG9jYWxlLnZhbHVlLCBvcHRpb25zKSk7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IF9kYXRldGltZUZvcm1hdHMgPSByZWYoaXNQbGFpbk9iamVjdChvcHRpb25zLmRhdGV0aW1lRm9ybWF0cylcclxuICAgICAgICA/IG9wdGlvbnMuZGF0ZXRpbWVGb3JtYXRzXHJcbiAgICAgICAgOiB7IFtfbG9jYWxlLnZhbHVlXToge30gfSk7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IF9udW1iZXJGb3JtYXRzID0gcmVmKGlzUGxhaW5PYmplY3Qob3B0aW9ucy5udW1iZXJGb3JtYXRzKVxyXG4gICAgICAgID8gb3B0aW9ucy5udW1iZXJGb3JtYXRzXHJcbiAgICAgICAgOiB7IFtfbG9jYWxlLnZhbHVlXToge30gfSk7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IF9taXNzaW5nV2FybiA9IGlzTG9jYWxlXHJcbiAgICAgICAgPyByb290Lm1pc3NpbmdXYXJuXHJcbiAgICAgICAgOiBpc0Jvb2xlYW4ob3B0aW9ucy5taXNzaW5nV2FybikgfHwgaXNSZWdFeHAob3B0aW9ucy5taXNzaW5nV2FybilcclxuICAgICAgICAgICAgPyBvcHRpb25zLm1pc3NpbmdXYXJuXHJcbiAgICAgICAgICAgIDogdHJ1ZTtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgY29uc3QgX2ZhbGxiYWNrV2FybiA9IGlzTG9jYWxlXHJcbiAgICAgICAgPyByb290LmZhbGxiYWNrV2FyblxyXG4gICAgICAgIDogaXNCb29sZWFuKG9wdGlvbnMuZmFsbGJhY2tXYXJuKSB8fCBpc1JlZ0V4cChvcHRpb25zLmZhbGxiYWNrV2FybilcclxuICAgICAgICAgICAgPyBvcHRpb25zLmZhbGxiYWNrV2FyblxyXG4gICAgICAgICAgICA6IHRydWU7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IF9mYWxsYmFja1Jvb3QgPSBpc0xvY2FsZVxyXG4gICAgICAgID8gcm9vdC5mYWxsYmFja1Jvb3RcclxuICAgICAgICA6IGlzQm9vbGVhbihvcHRpb25zLmZhbGxiYWNrUm9vdClcclxuICAgICAgICAgICAgPyBvcHRpb25zLmZhbGxiYWNrUm9vdFxyXG4gICAgICAgICAgICA6IHRydWU7XHJcbiAgICAvLyBjb25maWd1cmUgZmFsbCBiYWNrIHRvIHJvb3RcclxuICAgIGNvbnN0IF9mYWxsYmFja0Zvcm1hdCA9ICEhb3B0aW9ucy5mYWxsYmFja0Zvcm1hdDtcclxuICAgIC8vIHJ1bnRpbWUgbWlzc2luZ1xyXG4gICAgY29uc3QgX21pc3NpbmcgPSBpc0Z1bmN0aW9uKG9wdGlvbnMubWlzc2luZykgPyBvcHRpb25zLm1pc3NpbmcgOiBudWxsO1xyXG4gICAgLy8gcG9zdFRyYW5zbGF0aW9uIGhhbmRsZXJcclxuICAgIGNvbnN0IF9wb3N0VHJhbnNsYXRpb24gPSBpc0Z1bmN0aW9uKG9wdGlvbnMucG9zdFRyYW5zbGF0aW9uKVxyXG4gICAgICAgID8gb3B0aW9ucy5wb3N0VHJhbnNsYXRpb25cclxuICAgICAgICA6IG51bGw7XHJcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcclxuICAgIGNvbnN0IF93YXJuSHRtbE1lc3NhZ2UgPSBpc0xvY2FsZVxyXG4gICAgICAgID8gcm9vdC53YXJuSHRtbE1lc3NhZ2VcclxuICAgICAgICA6IGlzQm9vbGVhbihvcHRpb25zLndhcm5IdG1sTWVzc2FnZSlcclxuICAgICAgICAgICAgPyBvcHRpb25zLndhcm5IdG1sTWVzc2FnZVxyXG4gICAgICAgICAgICA6IHRydWU7XHJcbiAgICBjb25zdCBfZXNjYXBlUGFyYW1ldGVyID0gISFvcHRpb25zLmVzY2FwZVBhcmFtZXRlcjtcclxuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxyXG4gICAgY29uc3QgX21vZGlmaWVycyA9IGlzTG9jYWxlXHJcbiAgICAgICAgPyByb290Lm1vZGlmaWVyc1xyXG4gICAgICAgIDogaXNQbGFpbk9iamVjdChvcHRpb25zLm1vZGlmaWVycylcclxuICAgICAgICAgICAgPyBvcHRpb25zLm1vZGlmaWVyc1xyXG4gICAgICAgICAgICA6IHt9O1xyXG4gICAgLy8gcGx1cmFsUnVsZXNcclxuICAgIGNvbnN0IF9wbHVyYWxSdWxlcyA9IG9wdGlvbnMucGx1cmFsUnVsZXMgfHwgKGlzTG9jYWxlICYmIHJvb3QucGx1cmFsUnVsZXMpO1xyXG4gICAgLy8gdHJhY2sgcmVhY3Rpdml0eVxyXG4gICAgZnVuY3Rpb24gdHJhY2tSZWFjdGl2aXR5VmFsdWVzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIF9sb2NhbGUudmFsdWUsXHJcbiAgICAgICAgICAgIF9mYWxsYmFja0xvY2FsZS52YWx1ZSxcclxuICAgICAgICAgICAgX21lc3NhZ2VzLnZhbHVlLFxyXG4gICAgICAgICAgICBfZGF0ZXRpbWVGb3JtYXRzLnZhbHVlLFxyXG4gICAgICAgICAgICBfbnVtYmVyRm9ybWF0cy52YWx1ZVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICAvLyBsb2NhbGVcclxuICAgIGNvbnN0IGxvY2FsZSA9IGNvbXB1dGVkKHtcclxuICAgICAgICBnZXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIF9jb21wb3Nlci52YWx1ZSA/IF9jb21wb3Nlci52YWx1ZS5sb2NhbGUudmFsdWUgOiBfbG9jYWxlLnZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiB2YWwgPT4ge1xyXG4gICAgICAgICAgICBpZiAoX2NvbXBvc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBfY29tcG9zZXIudmFsdWUubG9jYWxlLnZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9sb2NhbGUudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBmYWxsYmFja0xvY2FsZVxyXG4gICAgY29uc3QgZmFsbGJhY2tMb2NhbGUgPSBjb21wdXRlZCh7XHJcbiAgICAgICAgZ2V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWVcclxuICAgICAgICAgICAgICAgID8gX2NvbXBvc2VyLnZhbHVlLmZhbGxiYWNrTG9jYWxlLnZhbHVlXHJcbiAgICAgICAgICAgICAgICA6IF9mYWxsYmFja0xvY2FsZS52YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogdmFsID0+IHtcclxuICAgICAgICAgICAgaWYgKF9jb21wb3Nlci52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgX2NvbXBvc2VyLnZhbHVlLmZhbGxiYWNrTG9jYWxlLnZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9mYWxsYmFja0xvY2FsZS52YWx1ZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIG1lc3NhZ2VzXHJcbiAgICBjb25zdCBtZXNzYWdlcyA9IGNvbXB1dGVkKCgpID0+IHtcclxuICAgICAgICBpZiAoX2NvbXBvc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWUubWVzc2FnZXMudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICByZXR1cm4gX21lc3NhZ2VzLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgZGF0ZXRpbWVGb3JtYXRzID0gY29tcHV0ZWQoKCkgPT4gX2RhdGV0aW1lRm9ybWF0cy52YWx1ZSk7XHJcbiAgICBjb25zdCBudW1iZXJGb3JtYXRzID0gY29tcHV0ZWQoKCkgPT4gX251bWJlckZvcm1hdHMudmFsdWUpO1xyXG4gICAgZnVuY3Rpb24gZ2V0UG9zdFRyYW5zbGF0aW9uSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gX2NvbXBvc2VyLnZhbHVlXHJcbiAgICAgICAgICAgID8gX2NvbXBvc2VyLnZhbHVlLmdldFBvc3RUcmFuc2xhdGlvbkhhbmRsZXIoKVxyXG4gICAgICAgICAgICA6IF9wb3N0VHJhbnNsYXRpb247XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZXRQb3N0VHJhbnNsYXRpb25IYW5kbGVyKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoX2NvbXBvc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIF9jb21wb3Nlci52YWx1ZS5zZXRQb3N0VHJhbnNsYXRpb25IYW5kbGVyKGhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldE1pc3NpbmdIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWUgPyBfY29tcG9zZXIudmFsdWUuZ2V0TWlzc2luZ0hhbmRsZXIoKSA6IF9taXNzaW5nO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0TWlzc2luZ0hhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgICAgIGlmIChfY29tcG9zZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgX2NvbXBvc2VyLnZhbHVlLnNldE1pc3NpbmdIYW5kbGVyKGhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHdhcnBXaXRoRGVwcyhmbikge1xyXG4gICAgICAgIHRyYWNrUmVhY3Rpdml0eVZhbHVlcygpO1xyXG4gICAgICAgIHJldHVybiBmbigpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdCguLi5hcmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9jb21wb3Nlci52YWx1ZVxyXG4gICAgICAgICAgICA/IHdhcnBXaXRoRGVwcygoKSA9PiBSZWZsZWN0LmFwcGx5KF9jb21wb3Nlci52YWx1ZS50LCBudWxsLCBbLi4uYXJnc10pKVxyXG4gICAgICAgICAgICA6IHdhcnBXaXRoRGVwcygoKSA9PiAnJyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBydCguLi5hcmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9jb21wb3Nlci52YWx1ZVxyXG4gICAgICAgICAgICA/IFJlZmxlY3QuYXBwbHkoX2NvbXBvc2VyLnZhbHVlLnJ0LCBudWxsLCBbLi4uYXJnc10pXHJcbiAgICAgICAgICAgIDogJyc7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBkKC4uLmFyZ3MpIHtcclxuICAgICAgICByZXR1cm4gX2NvbXBvc2VyLnZhbHVlXHJcbiAgICAgICAgICAgID8gd2FycFdpdGhEZXBzKCgpID0+IFJlZmxlY3QuYXBwbHkoX2NvbXBvc2VyLnZhbHVlLmQsIG51bGwsIFsuLi5hcmdzXSkpXHJcbiAgICAgICAgICAgIDogd2FycFdpdGhEZXBzKCgpID0+ICcnKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG4oLi4uYXJncykge1xyXG4gICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWVcclxuICAgICAgICAgICAgPyB3YXJwV2l0aERlcHMoKCkgPT4gUmVmbGVjdC5hcHBseShfY29tcG9zZXIudmFsdWUubiwgbnVsbCwgWy4uLmFyZ3NdKSlcclxuICAgICAgICAgICAgOiB3YXJwV2l0aERlcHMoKCkgPT4gJycpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdG0oa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9jb21wb3Nlci52YWx1ZSA/IF9jb21wb3Nlci52YWx1ZS50bShrZXkpIDoge307XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB0ZShrZXksIGxvY2FsZSkge1xyXG4gICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWUgPyBfY29tcG9zZXIudmFsdWUudGUoa2V5LCBsb2NhbGUpIDogZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRMb2NhbGVNZXNzYWdlKGxvY2FsZSkge1xyXG4gICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWUgPyBfY29tcG9zZXIudmFsdWUuZ2V0TG9jYWxlTWVzc2FnZShsb2NhbGUpIDoge307XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZXRMb2NhbGVNZXNzYWdlKGxvY2FsZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIGlmIChfY29tcG9zZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgX2NvbXBvc2VyLnZhbHVlLnNldExvY2FsZU1lc3NhZ2UobG9jYWxlLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgX21lc3NhZ2VzLnZhbHVlW2xvY2FsZV0gPSBtZXNzYWdlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG1lcmdlTG9jYWxlTWVzc2FnZShsb2NhbGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICBpZiAoX2NvbXBvc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIF9jb21wb3Nlci52YWx1ZS5tZXJnZUxvY2FsZU1lc3NhZ2UobG9jYWxlLCBtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXREYXRlVGltZUZvcm1hdChsb2NhbGUpIHtcclxuICAgICAgICByZXR1cm4gX2NvbXBvc2VyLnZhbHVlID8gX2NvbXBvc2VyLnZhbHVlLmdldERhdGVUaW1lRm9ybWF0KGxvY2FsZSkgOiB7fTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldERhdGVUaW1lRm9ybWF0KGxvY2FsZSwgZm9ybWF0KSB7XHJcbiAgICAgICAgaWYgKF9jb21wb3Nlci52YWx1ZSkge1xyXG4gICAgICAgICAgICBfY29tcG9zZXIudmFsdWUuc2V0RGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBmb3JtYXQpO1xyXG4gICAgICAgICAgICBfZGF0ZXRpbWVGb3JtYXRzLnZhbHVlW2xvY2FsZV0gPSBmb3JtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbWVyZ2VEYXRlVGltZUZvcm1hdChsb2NhbGUsIGZvcm1hdCkge1xyXG4gICAgICAgIGlmIChfY29tcG9zZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgX2NvbXBvc2VyLnZhbHVlLm1lcmdlRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBmb3JtYXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldE51bWJlckZvcm1hdChsb2NhbGUpIHtcclxuICAgICAgICByZXR1cm4gX2NvbXBvc2VyLnZhbHVlID8gX2NvbXBvc2VyLnZhbHVlLmdldE51bWJlckZvcm1hdChsb2NhbGUpIDoge307XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZXROdW1iZXJGb3JtYXQobG9jYWxlLCBmb3JtYXQpIHtcclxuICAgICAgICBpZiAoX2NvbXBvc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIF9jb21wb3Nlci52YWx1ZS5zZXROdW1iZXJGb3JtYXQobG9jYWxlLCBmb3JtYXQpO1xyXG4gICAgICAgICAgICBfbnVtYmVyRm9ybWF0cy52YWx1ZVtsb2NhbGVdID0gZm9ybWF0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG1lcmdlTnVtYmVyRm9ybWF0KGxvY2FsZSwgZm9ybWF0KSB7XHJcbiAgICAgICAgaWYgKF9jb21wb3Nlci52YWx1ZSkge1xyXG4gICAgICAgICAgICBfY29tcG9zZXIudmFsdWUubWVyZ2VOdW1iZXJGb3JtYXQobG9jYWxlLCBmb3JtYXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHdyYXBwZXIgPSB7XHJcbiAgICAgICAgZ2V0IGlkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2NvbXBvc2VyLnZhbHVlID8gX2NvbXBvc2VyLnZhbHVlLmlkIDogLTE7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgZmFsbGJhY2tMb2NhbGUsXHJcbiAgICAgICAgbWVzc2FnZXMsXHJcbiAgICAgICAgZGF0ZXRpbWVGb3JtYXRzLFxyXG4gICAgICAgIG51bWJlckZvcm1hdHMsXHJcbiAgICAgICAgZ2V0IGluaGVyaXRMb2NhbGUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWUgPyBfY29tcG9zZXIudmFsdWUuaW5oZXJpdExvY2FsZSA6IF9pbmhlcml0TG9jYWxlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IGluaGVyaXRMb2NhbGUodmFsKSB7XHJcbiAgICAgICAgICAgIGlmIChfY29tcG9zZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIF9jb21wb3Nlci52YWx1ZS5pbmhlcml0TG9jYWxlID0gdmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgYXZhaWxhYmxlTG9jYWxlcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9jb21wb3Nlci52YWx1ZVxyXG4gICAgICAgICAgICAgICAgPyBfY29tcG9zZXIudmFsdWUuYXZhaWxhYmxlTG9jYWxlc1xyXG4gICAgICAgICAgICAgICAgOiBPYmplY3Qua2V5cyhfbWVzc2FnZXMudmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0IG1vZGlmaWVycygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChfY29tcG9zZXIudmFsdWUgPyBfY29tcG9zZXIudmFsdWUubW9kaWZpZXJzIDogX21vZGlmaWVycyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgcGx1cmFsUnVsZXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoX2NvbXBvc2VyLnZhbHVlID8gX2NvbXBvc2VyLnZhbHVlLnBsdXJhbFJ1bGVzIDogX3BsdXJhbFJ1bGVzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldCBpc0dsb2JhbCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9jb21wb3Nlci52YWx1ZSA/IF9jb21wb3Nlci52YWx1ZS5pc0dsb2JhbCA6IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0IG1pc3NpbmdXYXJuKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2NvbXBvc2VyLnZhbHVlID8gX2NvbXBvc2VyLnZhbHVlLm1pc3NpbmdXYXJuIDogX21pc3NpbmdXYXJuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IG1pc3NpbmdXYXJuKHZhbCkge1xyXG4gICAgICAgICAgICBpZiAoX2NvbXBvc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBfY29tcG9zZXIudmFsdWUubWlzc2luZ1dhcm4gPSB2YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldCBmYWxsYmFja1dhcm4oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWUgPyBfY29tcG9zZXIudmFsdWUuZmFsbGJhY2tXYXJuIDogX2ZhbGxiYWNrV2FybjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCBmYWxsYmFja1dhcm4odmFsKSB7XHJcbiAgICAgICAgICAgIGlmIChfY29tcG9zZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIF9jb21wb3Nlci52YWx1ZS5taXNzaW5nV2FybiA9IHZhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0IGZhbGxiYWNrUm9vdCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9jb21wb3Nlci52YWx1ZSA/IF9jb21wb3Nlci52YWx1ZS5mYWxsYmFja1Jvb3QgOiBfZmFsbGJhY2tSb290O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IGZhbGxiYWNrUm9vdCh2YWwpIHtcclxuICAgICAgICAgICAgaWYgKF9jb21wb3Nlci52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgX2NvbXBvc2VyLnZhbHVlLmZhbGxiYWNrUm9vdCA9IHZhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0IGZhbGxiYWNrRm9ybWF0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2NvbXBvc2VyLnZhbHVlID8gX2NvbXBvc2VyLnZhbHVlLmZhbGxiYWNrRm9ybWF0IDogX2ZhbGxiYWNrRm9ybWF0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IGZhbGxiYWNrRm9ybWF0KHZhbCkge1xyXG4gICAgICAgICAgICBpZiAoX2NvbXBvc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBfY29tcG9zZXIudmFsdWUuZmFsbGJhY2tGb3JtYXQgPSB2YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldCB3YXJuSHRtbE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfY29tcG9zZXIudmFsdWVcclxuICAgICAgICAgICAgICAgID8gX2NvbXBvc2VyLnZhbHVlLndhcm5IdG1sTWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgOiBfd2Fybkh0bWxNZXNzYWdlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IHdhcm5IdG1sTWVzc2FnZSh2YWwpIHtcclxuICAgICAgICAgICAgaWYgKF9jb21wb3Nlci52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgX2NvbXBvc2VyLnZhbHVlLndhcm5IdG1sTWVzc2FnZSA9IHZhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0IGVzY2FwZVBhcmFtZXRlcigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9jb21wb3Nlci52YWx1ZVxyXG4gICAgICAgICAgICAgICAgPyBfY29tcG9zZXIudmFsdWUuZXNjYXBlUGFyYW1ldGVyXHJcbiAgICAgICAgICAgICAgICA6IF9lc2NhcGVQYXJhbWV0ZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgZXNjYXBlUGFyYW1ldGVyKHZhbCkge1xyXG4gICAgICAgICAgICBpZiAoX2NvbXBvc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBfY29tcG9zZXIudmFsdWUuZXNjYXBlUGFyYW1ldGVyID0gdmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0LFxyXG4gICAgICAgIGdldFBvc3RUcmFuc2xhdGlvbkhhbmRsZXIsXHJcbiAgICAgICAgc2V0UG9zdFRyYW5zbGF0aW9uSGFuZGxlcixcclxuICAgICAgICBnZXRNaXNzaW5nSGFuZGxlcixcclxuICAgICAgICBzZXRNaXNzaW5nSGFuZGxlcixcclxuICAgICAgICBydCxcclxuICAgICAgICBkLFxyXG4gICAgICAgIG4sXHJcbiAgICAgICAgdG0sXHJcbiAgICAgICAgdGUsXHJcbiAgICAgICAgZ2V0TG9jYWxlTWVzc2FnZSxcclxuICAgICAgICBzZXRMb2NhbGVNZXNzYWdlLFxyXG4gICAgICAgIG1lcmdlTG9jYWxlTWVzc2FnZSxcclxuICAgICAgICBnZXREYXRlVGltZUZvcm1hdCxcclxuICAgICAgICBzZXREYXRlVGltZUZvcm1hdCxcclxuICAgICAgICBtZXJnZURhdGVUaW1lRm9ybWF0LFxyXG4gICAgICAgIGdldE51bWJlckZvcm1hdCxcclxuICAgICAgICBzZXROdW1iZXJGb3JtYXQsXHJcbiAgICAgICAgbWVyZ2VOdW1iZXJGb3JtYXRcclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBzeW5jKGNvbXBvc2VyKSB7XHJcbiAgICAgICAgY29tcG9zZXIubG9jYWxlLnZhbHVlID0gX2xvY2FsZS52YWx1ZTtcclxuICAgICAgICBjb21wb3Nlci5mYWxsYmFja0xvY2FsZS52YWx1ZSA9IF9mYWxsYmFja0xvY2FsZS52YWx1ZTtcclxuICAgICAgICBPYmplY3Qua2V5cyhfbWVzc2FnZXMudmFsdWUpLmZvckVhY2gobG9jYWxlID0+IHtcclxuICAgICAgICAgICAgY29tcG9zZXIubWVyZ2VMb2NhbGVNZXNzYWdlKGxvY2FsZSwgX21lc3NhZ2VzLnZhbHVlW2xvY2FsZV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKF9kYXRldGltZUZvcm1hdHMudmFsdWUpLmZvckVhY2gobG9jYWxlID0+IHtcclxuICAgICAgICAgICAgY29tcG9zZXIubWVyZ2VEYXRlVGltZUZvcm1hdChsb2NhbGUsIF9kYXRldGltZUZvcm1hdHMudmFsdWVbbG9jYWxlXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoX251bWJlckZvcm1hdHMudmFsdWUpLmZvckVhY2gobG9jYWxlID0+IHtcclxuICAgICAgICAgICAgY29tcG9zZXIubWVyZ2VOdW1iZXJGb3JtYXQobG9jYWxlLCBfbnVtYmVyRm9ybWF0cy52YWx1ZVtsb2NhbGVdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb21wb3Nlci5lc2NhcGVQYXJhbWV0ZXIgPSBfZXNjYXBlUGFyYW1ldGVyO1xyXG4gICAgICAgIGNvbXBvc2VyLmZhbGxiYWNrRm9ybWF0ID0gX2ZhbGxiYWNrRm9ybWF0O1xyXG4gICAgICAgIGNvbXBvc2VyLmZhbGxiYWNrUm9vdCA9IF9mYWxsYmFja1Jvb3Q7XHJcbiAgICAgICAgY29tcG9zZXIuZmFsbGJhY2tXYXJuID0gX2ZhbGxiYWNrV2FybjtcclxuICAgICAgICBjb21wb3Nlci5taXNzaW5nV2FybiA9IF9taXNzaW5nV2FybjtcclxuICAgICAgICBjb21wb3Nlci53YXJuSHRtbE1lc3NhZ2UgPSBfd2Fybkh0bWxNZXNzYWdlO1xyXG4gICAgfVxyXG4gICAgb25CZWZvcmVNb3VudCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGluc3RhbmNlLnByb3h5ID09IG51bGwgfHwgaW5zdGFuY2UucHJveHkuJGkxOG4gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuTk9UX0FWQUlMQUJMRV9DT01QT1NJVElPTl9JTl9MRUdBQ1kpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIGNvbnN0IGNvbXBvc2VyID0gKF9jb21wb3Nlci52YWx1ZSA9IGluc3RhbmNlLnByb3h5LiRpMThuXHJcbiAgICAgICAgICAgIC5fX2NvbXBvc2VyKTtcclxuICAgICAgICBpZiAoc2NvcGUgPT09ICdnbG9iYWwnKSB7XHJcbiAgICAgICAgICAgIF9sb2NhbGUudmFsdWUgPSBjb21wb3Nlci5sb2NhbGUudmFsdWU7XHJcbiAgICAgICAgICAgIF9mYWxsYmFja0xvY2FsZS52YWx1ZSA9IGNvbXBvc2VyLmZhbGxiYWNrTG9jYWxlLnZhbHVlO1xyXG4gICAgICAgICAgICBfbWVzc2FnZXMudmFsdWUgPSBjb21wb3Nlci5tZXNzYWdlcy52YWx1ZTtcclxuICAgICAgICAgICAgX2RhdGV0aW1lRm9ybWF0cy52YWx1ZSA9IGNvbXBvc2VyLmRhdGV0aW1lRm9ybWF0cy52YWx1ZTtcclxuICAgICAgICAgICAgX251bWJlckZvcm1hdHMudmFsdWUgPSBjb21wb3Nlci5udW1iZXJGb3JtYXRzLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpc0xvY2FsZSkge1xyXG4gICAgICAgICAgICBzeW5jKGNvbXBvc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB3cmFwcGVyO1xyXG59XHJcbmNvbnN0IGdsb2JhbEV4cG9ydFByb3BzID0gW1xyXG4gICAgJ2xvY2FsZScsXHJcbiAgICAnZmFsbGJhY2tMb2NhbGUnLFxyXG4gICAgJ2F2YWlsYWJsZUxvY2FsZXMnXHJcbl07XHJcbmNvbnN0IGdsb2JhbEV4cG9ydE1ldGhvZHMgPSBbJ3QnLCAncnQnLCAnZCcsICduJywgJ3RtJ10gO1xyXG5mdW5jdGlvbiBpbmplY3RHbG9iYWxGaWVsZHMoYXBwLCBjb21wb3Nlcikge1xyXG4gICAgY29uc3QgaTE4biA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICBnbG9iYWxFeHBvcnRQcm9wcy5mb3JFYWNoKHByb3AgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbXBvc2VyLCBwcm9wKTtcclxuICAgICAgICBpZiAoIWRlc2MpIHtcclxuICAgICAgICAgICAgdGhyb3cgY3JlYXRlSTE4bkVycm9yKEkxOG5FcnJvckNvZGVzLlVORVhQRUNURURfRVJST1IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB3cmFwID0gaXNSZWYoZGVzYy52YWx1ZSkgLy8gY2hlY2sgY29tcHV0ZWQgcHJvcHNcclxuICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2MudmFsdWUudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIHNldCh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNjLnZhbHVlLnZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDoge1xyXG4gICAgICAgICAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXNjLmdldCAmJiBkZXNjLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpMThuLCBwcm9wLCB3cmFwKTtcclxuICAgIH0pO1xyXG4gICAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRpMThuID0gaTE4bjtcclxuICAgIGdsb2JhbEV4cG9ydE1ldGhvZHMuZm9yRWFjaChtZXRob2QgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbXBvc2VyLCBtZXRob2QpO1xyXG4gICAgICAgIGlmICghZGVzYyB8fCAhZGVzYy52YWx1ZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVJMThuRXJyb3IoSTE4bkVycm9yQ29kZXMuVU5FWFBFQ1RFRF9FUlJPUik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMsIGAkJHttZXRob2R9YCwgZGVzYyk7XHJcbiAgICB9KTtcclxufVxuXG4vLyByZWdpc3RlciBtZXNzYWdlIHJlc29sdmVyIGF0IHZ1ZS1pMThuXHJcbnJlZ2lzdGVyTWVzc2FnZVJlc29sdmVyKHJlc29sdmVWYWx1ZSk7XHJcbi8vIHJlZ2lzdGVyIGZhbGxiYWNrIGxvY2FsZSBhdCB2dWUtaTE4blxyXG5yZWdpc3RlckxvY2FsZUZhbGxiYWNrZXIoZmFsbGJhY2tXaXRoTG9jYWxlQ2hhaW4pO1xyXG57XHJcbiAgICBpbml0RmVhdHVyZUZsYWdzKCk7XHJcbn1cclxuLy8gTk9URTogZXhwZXJpbWVudGFsICEhXHJcbmlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19JTlRMSUZZX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZ2V0R2xvYmFsVGhpcygpO1xyXG4gICAgdGFyZ2V0Ll9fSU5UTElGWV9fID0gdHJ1ZTtcclxuICAgIHNldERldlRvb2xzSG9vayh0YXJnZXQuX19JTlRMSUZZX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pO1xyXG59XHJcbmlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIDtcblxuZXhwb3J0IHsgRGF0ZXRpbWVGb3JtYXQsIEkxOG5JbmplY3Rpb25LZXksIE51bWJlckZvcm1hdCwgVHJhbnNsYXRpb24sIFZFUlNJT04sIGNhc3RUb1Z1ZUkxOG4sIGNyZWF0ZUkxOG4sIHVzZUkxOG4sIHZURGlyZWN0aXZlIH07XG4iLCIvLyBUaGlzIGlzIGp1c3QgYW4gZXhhbXBsZSxcbi8vIHNvIHlvdSBjYW4gc2FmZWx5IGRlbGV0ZSBhbGwgZGVmYXVsdCBwcm9wcyBiZWxvd1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGZhaWxlZDogJ0FjdGlvbiBmYWlsZWQnLFxuICBzdWNjZXNzOiAnQWN0aW9uIHdhcyBzdWNjZXNzZnVsJyxcbiAgc3RhcnRUaXRsZTogJ1NpZ24gSW4nLFxuICBzdGFydExpbmtOYW1lOiAnU3RhcnQnLFxuICBzdGFydExpbmtUYXJnZXQ6ICcvc3RhcnQnLFxuICByZWdpc3RlclRpdGxlOiAnU2lnbiB1cCcsXG4gIHJlZ2lzdGVyTGlua05hbWU6ICdTaWduVXAnLFxuICByZWdpc3RlckxpbmtUYXJnZXQ6ICcvcmVnaXN0ZXInLFxuICBob21lVGl0bGU6ICdIb21lJyxcbiAgaG9tZUxpbmtOYW1lOiAnSG9tZScsXG4gIGhvbWVMaW5rVGFyZ2V0OiAnL2hvbWUvOmhvbWVQYXJhbXM/JyxcbiAgaG9tZUJpc0xpbmtOYW1lOiAnSG9tZUJpcycsXG4gIGhvbWVCaXNMaW5rVGFyZ2V0OiAnJyxcbiAgaG9tZVRlckxpbmtOYW1lOiAnSG9tZVRlcicsXG4gIGhvbWVUZXJMaW5rVGFyZ2V0OiAnL2hvbWUnLFxuICBwcm9maWxlVGl0bGU6ICdQcm9maWxlJyxcbiAgcHJvZmlsZUxpbmtOYW1lOiAnUHJvZmlsZScsXG4gIHByb2ZpbGVMaW5rVGFyZ2V0OiAnL3Byb2ZpbGUnLFxuICBhYm91dFRpdGxlOiAnQWJvdXQnLFxuICBhYm91dExpbmtOYW1lOiAnQWJvdXQnLFxuICBhYm91dExpbmtUYXJnZXQ6ICcvYWJvdXQnLFxuICBzZXJ2aWNlVGl0bGU6ICdTZXJ2aWNlJyxcbiAgc2VydmljZUxpbmtOYW1lOiAnU2VydmljZScsXG4gIHNlcnZpY2VMaW5rVGFyZ2V0OiAnL3NlcnZpY2UvOnR5cGU/JyxcbiAgYWN0b3JUaXRsZTogJ0FjdG9yJyxcbiAgYWN0b3JMaW5rTmFtZTogJ0FjdG9yJyxcbiAgYWN0b3JMaW5rVGFyZ2V0OiAnL2FjdG9yLzp0eXBlPycsXG4gIG9yZGVyVGl0bGU6ICdPcmRlcicsXG4gIG9yZGVyTGlua05hbWU6ICdPcmRlcicsXG4gIG9yZGVyTGlua1RhcmdldDogJy9vcmRlci86dHlwZT8nLFxuICBwYXltZW50VGl0bGU6ICdQYXltZW50JyxcbiAgcGF5bWVudExpbmtOYW1lOiAnUGF5bWVudCcsXG4gIHBheW1lbnRMaW5rVGFyZ2V0OiAnL3BheW1lbnQvOnR5cGU/JyxcbiAgaW52b2ljZVRpdGxlOiAnSW52b2ljZScsXG4gIGludm9pY2VMaW5rTmFtZTogJ0ludm9pY2UnLFxuICBpbnZvaWNlTGlua1RhcmdldDogJy9pbnZvaWNlLzp0eXBlPycsXG4gIGV4cG9ydFRpdGxlOiAnRXhwb3J0JyxcbiAgZXhwb3J0TGlua05hbWU6ICdFeHBvcnQnLFxuICBleHBvcnRMaW5rVGFyZ2V0OiAnL2V4cG9ydCcsXG4gIHBkZlRpdGxlOiAnRXhwb3J0IHRvIHBkZicsXG4gIHBkZkxpbmtOYW1lOiAnUGRmRXhwb3J0JyxcbiAgcGRmTGlua1RhcmdldDogJy9wZGYvOmludm9pY2VJZHMoXFxcXGQrKSonLFxuICBwZGZQcmVMaW5rVGFyZ2V0OiAnL3BkZi8nLFxuICBub3RGb3VuZFRpdGxlOiAnUGFnZSBOb3QgRm91bmQnLFxuICBkcmF3ZXI6IHtcbiAgICB0aXRsZTogJ0xpbmtzJ1xuICB9LFxuICB0b29sYmFyOiB7XG4gICAgbGFuZ3VhZ2VMYWJlbDogJ0xhbmd1YWdlcycsXG4gICAgZHJvcGRvd25IZWFkZXI6ICdMYW5ndWFnZXMgc2VsZWN0aW9uJyxcbiAgICBkcm9wZG93bkRlZmF1bHQ6ICdEZWZhdWx0ICh7bGFuZ30pJyxcbiAgfSxcbiAgY29tcHRhTGlua3M6IHtcbiAgICBzZXJ2aWNlczoge1xuICAgICAgdGl0bGU6ICdTZXJ2aWNlcycsXG4gICAgICBhZG1pbjogJ01hbmFnZScsXG4gICAgICBhZG1pbkxhYmVsOiAnU2VydmljZXMgbWFuYWdtZW50JyxcbiAgICAgIGFkbWluTGluazogJy9zZXJ2aWNlL2FkbWluJyxcbiAgICAgIGRpc3BsYXk6ICdEaXNwbGF5JyxcbiAgICAgIGRpc3BsYXlMYWJlbDogJ1NlcnZpY2VzIGRpc3BsYXknLFxuICAgICAgZGlzcGxheUxpbms6ICcvc2VydmljZS9kaXNwbGF5JyxcbiAgICB9LFxuICAgIGFjdG9yczoge1xuICAgICAgdGl0bGU6ICdBY3RvcnMnLFxuICAgICAgYWRtaW46ICdNYW5hZ2UnLFxuICAgICAgYWRtaW5MYWJlbDogJ0FjdG9ycyBtYW5hZ21lbnQnLFxuICAgICAgYWRtaW5MaW5rOiAnL2FjdG9yL2FkbWluJyxcbiAgICAgIGRpc3BsYXk6ICdEaXNwbGF5JyxcbiAgICAgIGRpc3BsYXlMYWJlbDogJ0FjdG9ycyBkaXNwbGF5JyxcbiAgICAgIGRpc3BsYXlMaW5rOiAnL2FjdG9yL2Rpc3BsYXknLFxuICAgIH0sXG4gICAgb3JkZXJzOiB7XG4gICAgICB0aXRsZTogJ09yZGVycycsXG4gICAgICBhZG1pbjogJ01hbmFnZScsXG4gICAgICBhZG1pbkxhYmVsOiAnT3JkZXJzIG1hbmFnbWVudCcsXG4gICAgICBhZG1pbkxpbms6ICcvb3JkZXIvYWRtaW4nLFxuICAgICAgZGlzcGxheTogJ0Rpc3BsYXknLFxuICAgICAgZGlzcGxheUxhYmVsOiAnT3JkZXJzIGRpc3BsYXknLFxuICAgICAgZGlzcGxheUxpbms6ICcvb3JkZXIvZGlzcGxheScsXG4gICAgfSxcbiAgICBwYXltZW50czoge1xuICAgICAgdGl0bGU6ICdQYXltZW50cycsXG4gICAgICBhZG1pbjogJ01hbmFnZScsXG4gICAgICBhZG1pbkxhYmVsOiAnUGF5bWVudHMgbWFuYWdtZW50JyxcbiAgICAgIGFkbWluTGluazogJy9wYXltZW50L2FkbWluJyxcbiAgICAgIGRpc3BsYXk6ICdEaXNwbGF5JyxcbiAgICAgIGRpc3BsYXlMYWJlbDogJ1BheW1lbnRzIGRpc3BsYXknLFxuICAgICAgZGlzcGxheUxpbms6ICcvcGF5bWVudC9kaXNwbGF5JyxcbiAgICB9LFxuICAgIGludm9pY2VzOiB7XG4gICAgICB0aXRsZTogJ0ludm9pY2VzJyxcbiAgICAgIGFkbWluOiAnTWFuYWdlJyxcbiAgICAgIGFkbWluTGFiZWw6ICdJbnZvaWNlcyBtYW5hZ21lbnQnLFxuICAgICAgYWRtaW5MaW5rOiAnL2ludm9pY2UvYWRtaW4nLFxuICAgICAgZGlzcGxheTogJ0Rpc3BsYXknLFxuICAgICAgZGlzcGxheUxhYmVsOiAnSW52b2ljZXMgZGlzcGxheScsXG4gICAgICBkaXNwbGF5TGluazogJy9pbnZvaWNlL2Rpc3BsYXknLFxuICAgIH0sXG4gICAgZXhwb3J0OiB7XG4gICAgICB0aXRsZTogJ0V4cG9ydCcsXG4gICAgICBsaW5rOiAnL2V4cG9ydCdcbiAgICB9LFxuICB9LFxuICBzZXJ2aWNlc0NvbXBvbmVudDoge1xuICAgIHRhYmxlVGl0bGU6ICdTZXJ2aWNlcycsXG4gICAgaGVhZFRhYmxlOiB7XG4gICAgICBuYW1lOiAnTmFtZScsXG4gICAgICBhbW91bnQ6ICdVbml0IGFtb3VudCBleGNsLiB0YXhlcycsXG4gICAgICBxdWFudGl0eTogJ1F1YW50aXR5JyxcbiAgICB9LFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBuYW1lOiAnTmFtZScsXG4gICAgICBhbW91bnQ6ICdBbW91bnQnLFxuICAgICAgcXVhbnRpdHk6ICdRdWFudGl0eScsXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlcnM6IHtcbiAgICAgIG5hbWU6ICdOYW1lJyxcbiAgICAgIGFtb3VudDogJ0Ftb3VudCcsXG4gICAgICBxdWFudGl0eTogJ1F1YW50aXR5JyxcbiAgICB9LFxuICAgIGhpbnRzOiB7XG4gICAgICBuYW1lOiAnU2VydmljZSBuYW1lIG11c3QgY29udGFpbiBsZXNzIHRoYW4gMzAgY2hhcmFjdGVycyBhbmQgbm90IGNvbnRhaW4gbnVtYmVycyAhJyxcbiAgICAgIGFtb3VudDogJ0Ftb3VudCBtdXN0IGJlIGxvd2VyIHRoYW4gMSwwMDAsMDAwICEnLFxuICAgICAgcXVhbnRpdHk6ICdRdWFudGl0eSBtdXN0IGJlIGxvd2VyIHRoYW4gNTAgIScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIHRhYmxlQm9keUNvbnRlbnRUZXh0OiAnU29ycnkuLi4gTm8gc2VydmljZS4nLFxuICAgICAgICBuYW1lOiAnU2VydmljZSBuYW1lIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGFtb3VudDogJ0Ftb3VudCBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBxdWFudGl0eTogJ1F1YW50aXR5IGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGJ1dHRvbkFkZGluZzogJ0FkZCBhIG5ldyBzZXJ2aWNlJyxcbiAgICAgICAgYnV0dG9uVXBkYXRpbmc6ICdVcGRhdGUgc2VydmljZScsXG4gICAgICB9LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgbmFtZTogJ0JhZCBzZXJ2aWNlIG5hbWUgc3VwcGxpZWQgIScsXG4gICAgICAgIGFtb3VudDogJ0JhZCBhbW91bnQgc3VwcGxpZWQgIScsXG4gICAgICAgIHF1YW50aXR5OiAnQmFkIHF1YW50aXR5IHN1cHBsaWVkICEnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHJlc3VsdHM6IHtcbiAgICAgIG9rOiB7XG4gICAgICAgIGFkZDogJ1NlcnZpY2UgYWRkZWQgc3VjY2Vzc2Z1bGx5ICEnLFxuICAgICAgICB1cGRhdGU6ICdTZXJ2aWNlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ICEnLFxuICAgICAgICBkZWxldGU6ICdTZXJ2aWNlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5ICEnLFxuICAgICAgfSxcbiAgICAgIGtvOiB7XG4gICAgICAgIGFkZDogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgYWRkaW5nIHNlcnZpY2U6IHtlcnJ9JyxcbiAgICAgICAgdXBkYXRlOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSB1cGRhdGluZyBzZXJ2aWNlOiB7ZXJyfScsXG4gICAgICAgIGRlbGV0ZTogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZGVsZXRpbmcgc2VydmljZSA6IHtlcnJ9JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgYWN0b3JzQ29tcG9uZW50OiB7XG4gICAgdGFibGVUaXRsZTogJ0FjdG9ycycsXG4gICAgaGVhZFRhYmxlOiB7XG4gICAgICBmaXJzdE5hbWU6ICdGaXJzdG5hbWUnLFxuICAgICAgbGFzdE5hbWU6ICdMYXN0bmFtZScsXG4gICAgICBlbWFpbDogJ0VtYWlsJyxcbiAgICAgIHN0cmVldE51bTogJ1N0cmVldCBOIycsXG4gICAgICBzdHJlZXROYW1lOiAnU3RyZWV0IG5hbWUnLFxuICAgICAgY3A6ICdQb3N0YWwgY29kZScsXG4gICAgICBjaXR5OiAnQ2l0eScsXG4gICAgICB0ZWw6ICdQaG9uZSBOIycsXG4gICAgICBzZWxsZXJOdW06ICdTZWxsZXIgTiMnLFxuICAgICAgdHlwZTogJ1R5cGUnLFxuICAgIH0sXG4gICAgaW5wdXRMYWJlbHM6IHtcbiAgICAgIGZpcnN0TmFtZTogJ0ZpcnN0bmFtZScsXG4gICAgICBsYXN0TmFtZTogJ0xhc3RuYW1lJyxcbiAgICAgIGVtYWlsOiAnRW1haWwnLFxuICAgICAgc3RyZWV0TnVtOiAnU3RyZWV0IE4jJyxcbiAgICAgIHN0cmVldE5hbWU6ICdTdHJlZXQgbmFtZScsXG4gICAgICBjcDogJ1Bvc3RhbCBjb2RlJyxcbiAgICAgIGNpdHk6ICdDaXR5JyxcbiAgICAgIHRlbDogJ1Bob25lIG51bWJlcicsXG4gICAgICBzZWxsZXJOdW06ICdTZWxsZXIgTiMnLFxuICAgICAgdHlwZTogJ1R5cGUnLFxuICAgICAgc2VsbGVyVHlwZTogJ1NlbGxlcicsXG4gICAgICBidXllclR5cGU6ICdCdXllcicsXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlcnM6IHtcbiAgICAgIGZpcnN0TmFtZTogJ0ZpcnN0bmFtZScsXG4gICAgICBsYXN0TmFtZTogJ0xhc3RuYW1lJyxcbiAgICAgIGVtYWlsOiAnRW1haWwnLFxuICAgICAgc3RyZWV0TnVtOiAnU3RyZWV0IE4jJyxcbiAgICAgIHN0cmVldE5hbWU6ICdTdHJlZXQgbmFtZScsXG4gICAgICBjcDogJ1Bvc3RhbCBjb2RlJyxcbiAgICAgIGNpdHk6ICdDaXR5JyxcbiAgICAgIHRlbDogJ1Bob25lIG51bWJlcicsXG4gICAgICBzZWxsZXJOdW06ICdTZWxsZXIgTiMnLFxuICAgICAgdHlwZTogJ1R5cGUnLFxuICAgIH0sXG4gICAgaGludHM6IHtcbiAgICAgIGZpcnN0TmFtZTogJ0ZpcnN0bmFtZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgMiBhbmQgbGVzcyB0aGFuIDE1IGFscGhhYmV0aWNhbCBjaGFyYWN0ZXJzICEnLFxuICAgICAgbGFzdE5hbWU6ICdMYXN0bmFtZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgMiBhbmQgbGVzcyB0aGFuIDE1IGFscGhhYmV0aWNhbCBjaGFyYWN0ZXJzICEnLFxuICAgICAgZW1haWw6ICdFbWFpbCBtdXN0IGJlIHZhbGlkICEnLFxuICAgICAgc3RyZWV0TnVtOiAnU3RyZWV0IE4jIG11c3QgaGF2ZSBudW1lcmljYWwgY2hhcmFjdGVycyB3aXRoIG9wdGlvbmFsIEJJUy9URVIgIScsXG4gICAgICBzdHJlZXROYW1lOiAnU3RyZWV0IE5hbWUgbXVzdCBjb250YWluIGF0IGxlYXN0IDIgYW5kIGxlc3MgdGhhbiAxNSBhbHBoYWJldGljYWwgY2hhcmFjdGVycyAhJyxcbiAgICAgIGNwOiAnUG9zdGFsIGNvZGUgbXVzdCBjb250YWluIDUgbnVtZXJpY2FsIGNoYXJhY3RlcnMgIScsXG4gICAgICBjaXR5OiAnQ2l0eSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgMiBhbmQgbGVzcyB0aGFuIDE1IGNoYXJhY3RlcnMgIScsXG4gICAgICB0ZWw6ICdQaG9uZSBOIyBtdXN0IGNvbnRhaW4gMTAgbnVtZXJpY2FsIGNoYXJhY3RlcnMgIScsXG4gICAgICBzZWxsZXJOdW06ICdTZWxsZXIgTiMgbXVzdCBiZSB2YWxpZCAhJyxcbiAgICAgIHR5cGU6ICdBY3RvciB0eXBlIG11c3QgYmUgb2YgdHlwZSBzZWxsZXIsIGJ1eWVyIG9yIGJvdGggIScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIHRhYmxlQm9keUNvbnRlbnRUZXh0OiAnU29ycnkuLi4gTm8gYWN0b3IuJyxcbiAgICAgICAgZmlyc3ROYW1lOiAnRmlyc3RuYW1lIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGxhc3ROYW1lOiAnTGFzdG5hbWUgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgZW1haWw6ICdFbWFpbCBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBzdHJlZXROdW06ICdTdHJlZXQgTiMgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgc3RyZWV0TmFtZTogJ1N0cmVldCBOYW1lIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGNwOiAnUG9zdGFsIGNvZGUgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgY2l0eTogJ0NpdHkgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgdGVsOiAnUGhvbmUgTiMgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgc2VsbGVyTnVtOiAnU2VsbGVyIE4jIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIHR5cGU6ICdBY3RvciB0eXBlIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGJ1dHRvbkFkZGluZzogJ0FkZCBhIG5ldyBhY3RvcicsXG4gICAgICAgIGJ1dHRvblVwZGF0aW5nOiAnVXBkYXRlIGFjdG9yJyxcbiAgICAgIH0sXG4gICAgICBlcnJvcjoge1xuICAgICAgICBmaXJzdE5hbWU6ICdCYWQgZmlyc3RuYW1lIHN1cHBsaWVkICEnLFxuICAgICAgICBsYXN0TmFtZTogJ0JhZCBsYXN0bmFtZSBzdXBwbGllZCAhJyxcbiAgICAgICAgZW1haWw6ICdCYWQgZW1haWwgc3VwcGxpZWQgIScsXG4gICAgICAgIHN0cmVldE51bTogJ0JhZCBzdHJlZXQgTiMgc3VwcGxpZWQgIScsXG4gICAgICAgIHN0cmVldE5hbWU6ICdCYWQgc3RyZWV0IE5hbWUgc3VwcGxpZWQgIScsXG4gICAgICAgIGNwOiAnQmFkIHBvc3RhbCBjb2RlIHN1cHBsaWVkICEnLFxuICAgICAgICBjaXR5OiAnQmFkIGNpdHkgc3VwcGxpZWQgIScsXG4gICAgICAgIHRlbDogJ0JhZCBwaG9uZSBOIyBzdXBwbGllZCAhJyxcbiAgICAgICAgc2VsbGVyTnVtOiAnQmFkIHNlbGxlciBOIyBzdXBwbGllZCAhJyxcbiAgICAgICAgdHlwZTogJ0JhZCBhY3RvciB0eXBlIHN1cHBsaWVkICEnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHJlc3VsdHM6IHtcbiAgICAgIG9rOiB7XG4gICAgICAgIGFkZDogJ0FjdG9yIGFkZGVkIHN1Y2Nlc3NmdWxseSAhJyxcbiAgICAgICAgdXBkYXRlOiAnQWN0b3IgdXBkYXRlZCBzdWNjZXNzZnVsbHkgIScsXG4gICAgICAgIGRlbGV0ZTogJ0FjdG9yIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5ICEnLFxuICAgICAgfSxcbiAgICAgIGtvOiB7XG4gICAgICAgIGFkZDogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgYWRkaW5nIGFjdG9yOiB7ZXJyfScsXG4gICAgICAgIHVwZGF0ZTogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgdXBkYXRpbmcgYWN0b3I6IHtlcnJ9JyxcbiAgICAgICAgZGVsZXRlOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBkZWxldGluZyBhY3Rvcjoge2Vycn0nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxpYmVsbGVzOiB7XG4gICAgICBhY3RvclR5cGVzOiB7XG4gICAgICAgIGJvdGg6ICdCdXllciwgU2VsbGVyJyxcbiAgICAgICAgYnV5ZXI6ICdCdXllcicsXG4gICAgICAgIHNlbGxlcjogJ1NlbGxlcicsXG4gICAgICB9LFxuICAgICAgbm9fc2VsbGVyTnVtOiAnTm8gc2VsbGVyIE4jLicsXG4gICAgfVxuICB9LFxuICBvcmRlcnNDb21wb25lbnQ6IHtcbiAgICB0YWJsZVRpdGxlOiAnT3JkZXJzJyxcbiAgICBoZWFkVGFibGU6IHtcbiAgICAgIGNvbnRlbnVBZGRpdGlvbm5lbDogJ0FkZGl0aW9uYWwgY29udGVudCcsXG4gICAgICBzZXJ2aWNlczogJ1NlcnZpY2VzJyxcbiAgICAgIHByaWNlSHQ6ICdQcmljZSBFeGNsLiBUYXhlcycsXG4gICAgICBmYWN0dXJlOiAnSW52b2ljZScsXG4gICAgfSxcbiAgICBpbnB1dExhYmVsczoge1xuICAgICAgY29udGVudUFkZGl0aW9ubmVsOiAnQWRkaXRpb25hbCBjb250ZW50JyxcbiAgICAgIHNlcnZpY2VzOiAnU2VydmljZXMnLFxuICAgICAgcHJpY2VIdDogJ1ByaWNlJyxcbiAgICAgIGZhY3R1cmU6ICdJbnZvaWNlcycsXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlcnM6IHtcbiAgICAgIGNvbnRlbnVBZGRpdGlvbm5lbDogJ0FkZGl0aW9uYWwgY29udGVudCcsXG4gICAgICBzZXJ2aWNlczogJ1NlcnZpY2VzJyxcbiAgICAgIHByaWNlSHQ6ICdQcmljZScsXG4gICAgICBmYWN0dXJlOiAnSW52b2ljZXMnLFxuICAgIH0sXG4gICAgaGludHM6IHtcbiAgICAgIGNvbnRlbnVBZGRpdGlvbm5lbDogJ0FkZGl0aW9uYWwgY29udGVudCBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgMiBhbmQgbGVzcyB0aGFuIDMwIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGFuZCBpcyBub3QgbWFuZGF0b3J5ICEnLFxuICAgICAgc2VydmljZXM6ICdBdCBsZWFzdCAxIHNlcnZpY2UgbXVzdCBiZSBzZWxlY3RlZCAhJyxcbiAgICAgIHByaWNlSHQ6ICdQcmljZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwICEnLFxuICAgICAgZmFjdHVyZTogJ0FuIGludm9pY2UgaXMgbm90IHJlcXVpcmVkICEnLFxuICAgIH0sXG4gICAgZXJyb3JzOiB7XG4gICAgICBlbXB0eToge1xuICAgICAgICB0YWJsZUJvZHlDb250ZW50VGV4dDogJ1NvcnJ5Li4uIE5vIG9yZGVyLicsXG4gICAgICAgIGNvbnRlbnVBZGRpdGlvbm5lbDogJ0FkZGl0aW9ubmFsIGNvbnRlbnQgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgc2VydmljZXM6ICdTZXJ2aWNlcyBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBwcmljZUh0OiAnUHJpY2UgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgZmFjdHVyZTogJ0ludm9pY2UgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgYnV0dG9uQWRkaW5nOiAnQWRkIGEgbmV3IG9yZGVyJyxcbiAgICAgICAgYnV0dG9uVXBkYXRpbmc6ICdVcGRhdGUgb3JkZXInLFxuICAgICAgfSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvbnRlbnVBZGRpdGlvbm5lbDogJ0JhZCBhZGRpdGlvbm5hbCBjb250ZW50IHN1cHBsaWVkICEnLFxuICAgICAgICBzZXJ2aWNlczogJ0JhZCBzZXJ2aWNlcyBzdXBwbGllZCAhJyxcbiAgICAgICAgcHJpY2VIdDogJ0JhZCBwcmljZXMgc3VwcGxpZWQgIScsXG4gICAgICAgIGZhY3R1cmU6ICdCYWQgaW52b2ljZSBzdXBwbGllZCAhJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICByZXN1bHRzOiB7XG4gICAgICBvazoge1xuICAgICAgICBhZGQ6ICdPcmRlciBhZGRlZCBzdWNjZXNzZnVsbHkgIScsXG4gICAgICAgIHVwZGF0ZTogJ09yZGVyIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ICEnLFxuICAgICAgICBkZWxldGU6ICdPcmRlciBkZWxldGVkIHN1Y2Nlc3NmdWxseSAhJyxcbiAgICAgIH0sXG4gICAgICBrbzoge1xuICAgICAgICBhZGQ6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGFkZGluZyBvcmRlcjoge2Vycn0nLFxuICAgICAgICB1cGRhdGU6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHVwZGF0aW5nIG9yZGVyOiB7ZXJyfScsXG4gICAgICAgIGRlbGV0ZTogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZGVsZXRpbmcgb3JkZXI6IHtlcnJ9JyxcbiAgICAgICAgZmV0Y2hfc2VydmljZXM6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHNlcnZpY2VzOiB7ZXJyfScsXG4gICAgICAgIGZldGNoX2ludm9pY2VzOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyBpbnZvaWNlczoge2Vycn0nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxpYmVsbGVzOiB7XG4gICAgICBub19hZGRpdGlvbmFsX2NvbnRlbnQ6ICdObyBhZGRpdGlvbm5hbCBjb250ZW50LicsXG4gICAgICBub19vcHRpb25fc2VydmljZXM6ICdObyBzZXJ2aWNlLicsXG4gICAgICBub19pbnZvaWNlOiAnTm8gaW52b2ljZSBhZmZlY3RlZC4nLFxuICAgIH1cbiAgfSxcbiAgcGF5bWVudHNDb21wb25lbnQ6IHtcbiAgICB0YWJsZVRpdGxlOiAnUGF5bWVudHMnLFxuICAgIGhlYWRUYWJsZToge1xuICAgICAgZXRhdDogJ1BheW1lbnQgc3RhdGUnLFxuICAgICAgcGF5bWVudFZhbHVlOiAnUGF5bWVudCB2YWx1ZScsXG4gICAgICBwYXltZW50VHlwZTogJ1BheW1lbnQgdHlwZScsXG4gICAgICBmYWN0dXJlOiAnSW52b2ljZScsXG4gICAgfSxcbiAgICBpbnB1dExhYmVsczoge1xuICAgICAgZXRhdDogJ1N0YXRlJyxcbiAgICAgIHBheW1lbnRWYWx1ZTogJ1ZhbHVlJyxcbiAgICAgIHBheW1lbnRUeXBlOiAnVHlwZScsXG4gICAgICBmYWN0dXJlOiAnSW52b2ljZScsXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlcnM6IHtcbiAgICAgIGV0YXQ6ICdTdGF0ZXMnLFxuICAgICAgcGF5bWVudFZhbHVlOiAnVmFsdWUnLFxuICAgICAgcGF5bWVudFR5cGU6ICdUeXBlcycsXG4gICAgICBmYWN0dXJlOiAnSW52b2ljZXMnLFxuICAgIH0sXG4gICAgaGludHM6IHtcbiAgICAgIGV0YXQ6ICdTdGF0ZSBmaWVsZCBpcyBtYW5kYXRvcnkgIScsXG4gICAgICBwYXltZW50VmFsdWU6ICdWYWx1ZSBjYW5cXCd0IGJlIGdyZWF0ZXIgdGhhbiB0aGUgaW52b2ljZSBwcmljZSAhJyxcbiAgICAgIHBheW1lbnRUeXBlOiAnVHlwZSBmaWVsZCBpcyBtYW5kYXRvcnkgIScsXG4gICAgICBmYWN0dXJlOiAnSW52b2ljZSBmaWVsZCBpcyBtYW5kYXRvcnkgIScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIHRhYmxlQm9keUNvbnRlbnRUZXh0OiAnU29ycnkuLi4gTm8gcGF5bWVudC4nLFxuICAgICAgICBldGF0OiAnUGF5bWVudCBzdGF0ZSBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBwYXltZW50VmFsdWU6ICdQYXltZW50IHZhbHVlIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIHBheW1lbnRUeXBlOiAnUGF5bWVudCB0eXBlIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGZhY3R1cmU6ICdJbnZvaWNlIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGJ1dHRvblVwZGF0aW5nOiAnVXBkYXRlIHBheW1lbnQnLFxuICAgICAgICBidXR0b25BZGRpbmc6ICdBZGQgYSBuZXcgcGF5bWVudCcsXG4gICAgICB9LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgZXRhdDogJ0JhZCBzdGF0ZSBzdXBwbGllZCAhJyxcbiAgICAgICAgcGF5bWVudFZhbHVlOiAnQmFkIHZhbHVlIHN1cHBsaWVkLCBtdXN0IGJlIGVxdWFscyBvciBsb3dlciB0aGFuIHt2YWx9ICEnLFxuICAgICAgICBwYXltZW50VHlwZTogJ0JhZCB0eXBlIHN1cHBsaWVkICEnLFxuICAgICAgICBmYWN0dXJlOiAnQmFkIGludm9pY2Ugc3VwcGxpZWQgIScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgcmVzdWx0czoge1xuICAgICAgb2s6IHtcbiAgICAgICAgYWRkOiAnUGF5bWVudCBhZGRlZCBzdWNjZXNzZnVsbHkgIScsXG4gICAgICAgIHVwZGF0ZTogJ1BheW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHkgIScsXG4gICAgICAgIGRlbGV0ZTogJ1BheW1lbnQgZGVsZXRlZCBzdWNjZXNzZnVsbHkgIScsXG4gICAgICB9LFxuICAgICAga286IHtcbiAgICAgICAgYWRkOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBhZGRpbmcgcGF5bWVudDoge2Vycn0nLFxuICAgICAgICB1cGRhdGU6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHVwZGF0aW5nIHBheW1lbnQ6IHtlcnJ9JyxcbiAgICAgICAgZGVsZXRlOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBkZWxldGluZyBwYXltZW50OiB7ZXJyfScsXG4gICAgICAgIGZldGNoX2ludm9pY2VzOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyBpbnZvaWNlczoge2Vycn0nLFxuICAgICAgICBmZXRjaF9ldGF0czogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgc3RhdGVzOiB7ZXJyfScsXG4gICAgICAgIGZldGNoX3R5cGVzOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyB0eXBlczoge2Vycn0nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxpYmVsbGVzOiB7XG4gICAgICBub19pbnZvaWNlOiAnTm8gaW52b2ljZSBhZmZlY3RlZCAhJyxcbiAgICAgIG5vX29wdGlvbl9pbnZvaWNlOiAnTm8gaW52b2ljZS4nLFxuICAgICAgbm9fZXRhdDogJ05vIHBheW1lbnQgc3RhdGUgYWZmZWN0ZWQgIScsXG4gICAgICBub19vcHRpb25fZXRhdDogJ05vIHN0YXRlLicsXG4gICAgICBub190eXBlOiAnTm8gcGF5bWVudCB0eXBlIGFmZmVjdGVkICEnLFxuICAgICAgbm9fb3B0aW9uX3R5cGU6ICdObyB0eXBlLicsXG4gICAgICB0eXBlczoge1xuICAgICAgICBjYjogJ0NyZWRpdCBjYXJkJyxcbiAgICAgICAgZXNwOiAnQ2FzaCcsXG4gICAgICAgIGNocTogJ0NoZWNrJyxcbiAgICAgIH0sXG4gICAgICBldGF0czoge1xuICAgICAgICBwYWlkOiAnUGFpZCcsXG4gICAgICAgIG5vdF9wYWlkOiAnTm90IHBhaWQnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBpbnZvaWNlc0NvbXBvbmVudDoge1xuICAgIHRhYmxlVGl0bGU6ICdJbnZvaWNlcycsXG4gICAgaGVhZFRhYmxlOiB7XG4gICAgICBkYXRlOiAnSW52b2ljZSBkYXRlJyxcbiAgICAgIGludm9pY2VIVFByaWNlOiAnSW52b2ljZSBwcmljZSBFeGNsLiBUYXhlcycsXG4gICAgICBpbnZvaWNlVFRQcmljZTogJ0ludm9pY2UgcHJpY2UgSW5jbC4gVGF4ZXMnLFxuICAgICAgbGFuZ3VhZ2U6ICdJbnZvaWNlIGxhbmd1YWdlJyxcbiAgICAgIGRldmlzZTogJ0ludm9pY2UgZGV2aXNlJyxcbiAgICAgIHR2YTogJ0ludm9pY2UgVkFUJyxcbiAgICAgIGJ1eWVyOiAnSW52b2ljZSBidXllcicsXG4gICAgICBzZWxsZXI6ICdJbnZvaWNlIHNlbGxlcicsXG4gICAgICBjb21tYW5kZTogJ0ludm9pY2Ugb3JkZXJzJyxcbiAgICAgIHBheW1lbnQ6ICdJbnZvaWNlIHBheW1lbnRzJyxcbiAgICB9LFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBkYXRlOiAnRGF0ZScsXG4gICAgICBpbnZvaWNlSFRQcmljZTogJ1ByaWNlJyxcbiAgICAgIGludm9pY2VUVFByaWNlOiAnUHJpY2UgKyBUYXhlcycsXG4gICAgICBsYW5ndWFnZTogJ0xhbmd1YWdlJyxcbiAgICAgIGRldmlzZTogJ0RldmlzZScsXG4gICAgICB0dmE6ICdWQVQnLFxuICAgICAgYnV5ZXI6ICdCdXllcicsXG4gICAgICBzZWxsZXI6ICdTZWxsZXInLFxuICAgICAgY29tbWFuZGU6ICdPcmRlcnMnLFxuICAgICAgcGF5bWVudDogJ1BheW1lbnRzJyxcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyczoge1xuICAgICAgZGF0ZTogJ0RhdGUnLFxuICAgICAgaW52b2ljZUhUUHJpY2U6ICdQcmljZScsXG4gICAgICBpbnZvaWNlVFRQcmljZTogJ1ByaWNlICsgVGF4ZXMnLFxuICAgICAgbGFuZ3VhZ2U6ICdMYW5ndWFnZXMnLFxuICAgICAgZGV2aXNlOiAnRGV2aXNlcycsXG4gICAgICB0dmE6ICdWQVQnLFxuICAgICAgYnV5ZXI6ICdCdXllcnMnLFxuICAgICAgc2VsbGVyOiAnU2VsbGVycycsXG4gICAgICBjb21tYW5kZTogJ09yZGVycycsXG4gICAgICBwYXltZW50OiAnUGF5bWVudHMnLFxuICAgIH0sXG4gICAgaGludHM6IHtcbiAgICAgIGRhdGU6ICdEYXRlIG11c3QgYmUgZ3JlYXRlciB0aGFuIHRoZSBjdXJyZW50IGRhdGUgIScsXG4gICAgICBpbnZvaWNlSFRQcmljZTogJ1ByaWNlIG11c3QgYmUgbG93ZXIgdGhhbiBvcmRlcnMgdG90YWwgcHJpY2UgIScsXG4gICAgICBpbnZvaWNlVFRQcmljZTogJ1ByaWNlICsgVGF4ZXMgbXVzdCBiZSBsb3dlciB0aGFuIG9yZGVycyBwcmljZSAhJyxcbiAgICAgIGxhbmd1YWdlOiAnTGFuZ3VhZ2UgZmllbGQgaXMgbWFuZGF0b3J5JyxcbiAgICAgIGRldmlzZTogJ0RldmlzZSBmaWVsZCBpcyBtYW5kYXRvcnkgIScsXG4gICAgICB0dmE6ICdWQVQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCBhbmQgbG93ZXIgdGhhbiAxICEnLFxuICAgICAgYnV5ZXI6ICdCdXllciBmaWVsZCBpcyBtYW5kYXRvcnkgIScsXG4gICAgICBzZWxsZXI6ICdTZWxsZXIgZmllbGQgaXMgbWFuZGF0b3J5ICEnLFxuICAgICAgY29tbWFuZGU6ICdPcmRlcnMgZmllbGQgaXMgbWFuZGF0b3J5ICEnLFxuICAgICAgcGF5bWVudDogJ1BheW1lbnQgZmllbGQgaXMgbm90IG1hbmRhdG9yeSwgYnV0IGlmIHN1cHBsaWVkIGl0IG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiBpbnZvaWNlIHByaWNlICEnLFxuICAgIH0sXG4gICAgZXJyb3JzOiB7XG4gICAgICBlbXB0eToge1xuICAgICAgICB0YWJsZUJvZHlDb250ZW50VGV4dDogJ1NvcnJ5Li4uIE5vIGludm9pY2UuJyxcbiAgICAgICAgZGF0ZTogJ0RhdGUgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgaW52b2ljZUhUUHJpY2U6ICdQcmljZSBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBpbnZvaWNlVFRQcmljZTogJ1ByaWNlICsgVGF4ZXMgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgbGFuZ3VhZ2U6ICdMYW5ndWFnZSBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBkZXZpc2U6ICdEZXZpc2UgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgdHZhOiAnVkFUIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGJ1eWVyOiAnQnV5ZXIgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgc2VsbGVyOiAnU2VsbGVyIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGNvbW1hbmRlOiAnT3JkZXJzIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIHBheW1lbnQ6ICdQYXltZW50cyBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBidXR0b25VcGRhdGluZzogJ1VwZGF0ZSBpbnZvaWNlJyxcbiAgICAgICAgYnV0dG9uQWRkaW5nOiAnQWRkIGEgbmV3IGludm9pY2UnLFxuICAgICAgfSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGRhdGU6ICdCYWQgZGF0ZSBzdXBwbGllZCAhJyxcbiAgICAgICAgaW52b2ljZUhUUHJpY2U6ICdCYWQgcHJpY2Ugc3VwcGxpZWQgIScsXG4gICAgICAgIGludm9pY2VUVFByaWNlOiAnQmFkIHByaWNlICsgVGF4ZXMgc3VwcGxpZWQgIScsXG4gICAgICAgIGxhbmd1YWdlOiAnQmFkIGxhbmd1YWdlIHN1cHBsaWVkICEnLFxuICAgICAgICBkZXZpc2U6ICdCYWQgZGV2aXNlIHN1cHBsaWVkICEnLFxuICAgICAgICB0dmE6ICdCYWQgVkFUIHN1cHBsaWVkICEnLFxuICAgICAgICBidXllcjogJ0JhZCBidXllciBzdXBwbGllZCAhJyxcbiAgICAgICAgc2VsbGVyOiAnQmFkIHNlbGxlciBzdXBwbGllZCAhJyxcbiAgICAgICAgY29tbWFuZGU6ICdCYWQgb3JkZXJzIHN1cHBsaWVkICEnLFxuICAgICAgICBwYXltZW50OiAnQmFkIHBheW1lbnRzIHN1cHBsaWVkICEnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHJlc3VsdHM6IHtcbiAgICAgIG9rOiB7XG4gICAgICAgIGFkZDogJ0ludm9pY2UgYWRkZWQgc3VjY2Vzc2Z1bGx5ICEnLFxuICAgICAgICB1cGRhdGU6ICdJbnZvaWNlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ICEnLFxuICAgICAgICBkZWxldGU6ICdJbnZvaWNlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5ICEnLFxuICAgICAgfSxcbiAgICAgIGtvOiB7XG4gICAgICAgIGFkZDogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgYWRkaW5nIGludm9pY2U6IHtlcnJ9JyxcbiAgICAgICAgdXBkYXRlOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSB1cGRhdGluZyBpbnZvaWNlOiB7ZXJyfScsXG4gICAgICAgIGRlbGV0ZTogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZGVsZXRpbmcgaW52b2ljZToge2Vycn0nLFxuICAgICAgICBmZXRjaF9sYW5ndWFnZXM6IHtcbiAgICAgICAgICBlbXB0eTogJ05vIHBheW1lbnQgZm91bmQgIScsXG4gICAgICAgICAgZXJyb3I6ICdTZWxlY3QgZnJvbSBwYXltZW50IHRhYmxlIG9mIFNRTGl0ZSAhJyxcbiAgICAgICAgICBsaW5rZWRfZW1wdHk6ICdBbiBlcnJvciBvY2N1cmVkIHdpaGxlIGZldGNoaW5nIGxhbmd1YWdlczogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX2xhbmd1YWdlcy5lbXB0eScsXG4gICAgICAgICAgbGlua2VkX2Vycm9yOiAnQW4gZXJyb3Igb2NjdXJlZCB3aWhsZSBmZXRjaGluZyBsYW5ndWFnZXM6IEA6aW52b2ljZXNDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9sYW5ndWFnZXMuZXJyb3Ige2Vycn0nLFxuICAgICAgICB9LFxuICAgICAgICBmZXRjaF9kZXZpc2VzOiB7XG4gICAgICAgICAgZW1wdHk6ICdObyBkZXZpc2UgZm91bmQgIScsXG4gICAgICAgICAgZXJyb3I6ICdTZWxlY3QgZnJvbSBkZXZpc2UgdGFibGUgb2YgU1FMaXRlICEnLFxuICAgICAgICAgIGxpbmtlZF9lbXB0eTogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgZGV2aXNlczogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX2RldmlzZXMuZW1wdHknLFxuICAgICAgICAgIGxpbmtlZF9lcnJvcjogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgZGV2aXNlczogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX2RldmlzZXMuZXJyb3Ige2Vycn0nLFxuICAgICAgICB9LFxuICAgICAgICBmZXRjaF9idXllcnM6IHtcbiAgICAgICAgICBlbXB0eTogJ05vIGJ1eWVyIGZvdW5kICEnLFxuICAgICAgICAgIGVycm9yOiAnU2VsZWN0IGZyb20gYWN0b3IgdGFibGUgb2YgU1FMaXRlICEnLFxuICAgICAgICAgIGxpbmtlZF9lbXB0eTogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgYnV5ZXJzOiBAOmludm9pY2VzQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfYnV5ZXJzLmVtcHR5JyxcbiAgICAgICAgICBsaW5rZWRfZXJyb3I6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIGJ1eWVyczogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX2J1eWVycy5lcnJvciB7ZXJyfScsXG4gICAgICAgIH0sXG4gICAgICAgIGZldGNoX3NlbGxlcnM6IHtcbiAgICAgICAgICBlbXB0eTogJ05vIHNlbGxlciBmb3VuZCAhJyxcbiAgICAgICAgICBlcnJvcjogJ1NlbGVjdCBmcm9tIGFjdG9yIHRhYmxlIG9mIFNRTGl0ZSAhJyxcbiAgICAgICAgICBsaW5rZWRfZW1wdHk6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHNlbGxlcnM6IEA6aW52b2ljZXNDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9zZWxsZXJzLmVtcHR5JyxcbiAgICAgICAgICBsaW5rZWRfZXJyb3I6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHNlbGxlcnM6IEA6aW52b2ljZXNDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9zZWxsZXJzLmVycm9yIHtlcnJ9JyxcbiAgICAgICAgfSxcbiAgICAgICAgZmV0Y2hfb3JkZXJzOiB7XG4gICAgICAgICAgZW1wdHk6ICdObyBvcmRlciBmb3VuZCAhJyxcbiAgICAgICAgICBlcnJvcjogJ1NlbGVjdCBmcm9tIG9yZGVyIHRhYmxlIG9mIFNRTGl0ZSBEQiAhJyxcbiAgICAgICAgICBsaW5rZWRfZW1wdHk6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIG9yZGVyczogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX29yZGVycy5lbXB0eScsXG4gICAgICAgICAgbGlua2VkX2Vycm9yOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyBvcmRlcnM6IEA6aW52b2ljZXNDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9vcmRlcnMuZXJyb3Ige2Vycn0nLFxuICAgICAgICB9LFxuICAgICAgICBmZXRjaF9wYXltZW50czoge1xuICAgICAgICAgIGVtcHR5OiAnTm8gcGF5bWVudCBmb3VuZCAhJyxcbiAgICAgICAgICBlcnJvcjogJ1NlbGVjdCBmcm9tIHBheW1lbnQgdGFibGUgb2YgU1FMaXRlICEnLFxuICAgICAgICAgIGxpbmtlZF9lbXB0eTogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgcGF5bWVudHM6IEA6aW52b2ljZXNDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9wYXltZW50cy5lbXB0eScsXG4gICAgICAgICAgbGlua2VkX2Vycm9yOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyBwYXltZW50czogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX3BheW1lbnRzLmVycm9yIHtlcnJ9JyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsaWJlbGxlczoge1xuICAgICAgbm9fb3JkZXI6ICdObyBvcmRlciBhZmZlY3RlZCAhJyxcbiAgICAgIG5vX29wdGlvbl9vcmRlcjogJ05vIG9yZGVyLicsXG4gICAgICBub19wYXltZW50OiAnTm8gcGF5bWVudCBhZmZlY3RlZCAhJyxcbiAgICAgIG5vX29wdGlvbl9wYXltZW50OiAnTm8gcGF5bWVudC4nLFxuICAgICAgbm9fbGFuZ3VhZ2U6ICdObyBsYW5ndWFnZSBhZmZlY3RlZCAhJyxcbiAgICAgIG5vX29wdGlvbl9sYW5ndWFnZTogJ05vIGxhbmd1YWdlLicsXG4gICAgICBub19kZXZpc2U6ICdObyBkZXZpc2UgYWZmZWN0ZWQgIScsXG4gICAgICBub19vcHRpb25fZGV2aXNlOiAnTm8gZGV2aXNlLicsXG4gICAgICBub19idXllcjogJ05vIGJ1eWVyIGFmZmVjdGVkICEnLFxuICAgICAgbm9fb3B0aW9uX2J1eWVyOiAnTm8gYnV5ZXIuJyxcbiAgICAgIG5vX3NlbGxlcjogJ05vIHNlbGxlciBhZmZlY3RlZCAhJyxcbiAgICAgIG5vX29wdGlvbl9zZWxsZXI6ICdObyBzZWxsZXIuJyxcbiAgICAgIG5vX2RhdGU6ICdObyBkYXRlIHN1cHBsaWVkICEnLFxuICAgIH0sXG4gIH0sXG4gIHByb2ZpbGVDb21wb25lbnQ6IHtcbiAgICB0aXRsZXM6IHtcbiAgICAgIHVwZGF0ZTogJ1VwZGF0ZSBteSBwcm9maWxlJyxcbiAgICAgIHJlZ2lzdGVyOiAnUmVnaXN0ZXIgZm9ybScsXG4gICAgfSwgIFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBmaXJzdE5hbWU6ICdGaXJzdG5hbWUnLFxuICAgICAgbGFzdE5hbWU6ICdMYXN0bmFtZScsXG4gICAgICBsb2dpbjogJ0xvZ2luJyxcbiAgICAgIGVtYWlsOiAnRW1haWwnLFxuICAgICAgY29uZmlybUVtYWlsOiAnRW1haWwgY29uZmlybWF0aW9uJyxcbiAgICAgIHBhc3M6ICdQYXNzd29yZCcsXG4gICAgICBjb25maXJtUGFzczogJ1Bhc3N3b3JkIGNvbmZpcm1hdGlvbicsXG4gICAgICBjb21wYW55TmFtZTogJ0NvbXBhbnkgbmFtZScsXG4gICAgICBjb21wYW55TG9nbzogJ0NvbXBhbnkgbG9nbyByZXN0cmljdGVkIHRvIFNWRyBpbWFnZXMnLFxuICAgICAgZGV2aXNlOiAnRGV2aXNlJyxcbiAgICAgIHVzZXJUeXBlOiAnVHlwZScsXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlcnM6IHtcbiAgICAgIGZpcnN0TmFtZTogJ0ZpcnN0bmFtZScsXG4gICAgICBsYXN0TmFtZTogJ0xhc3RuYW1lJyxcbiAgICAgIGxvZ2luOiAnTG9naW4nLFxuICAgICAgZW1haWw6ICdFbWFpbCcsXG4gICAgICBjb25maXJtRW1haWw6ICdFbWFpbCBjb25maXJtYXRpb24nLFxuICAgICAgcGFzczogJ1Bhc3N3b3JkJyxcbiAgICAgIGNvbmZpcm1QYXNzOiAnUGFzc3dvcmQgY29uZmlybWF0aW9uJyxcbiAgICAgIGNvbXBhbnlOYW1lOiAnQ29tcGFueSBuYW1lJyxcbiAgICAgIGNvbXBhbnlMb2dvOiAnQ29tcGFueSBsb2dvJyxcbiAgICAgIGRldmlzZTogJ0RldmlzZXMnLFxuICAgICAgdXNlclR5cGU6ICdUeXBlcycsXG4gICAgfSxcbiAgICBoaW50czoge1xuICAgICAgZmlyc3ROYW1lOiAnRmlyc3RuYW1lIGlzIG1hbmRhdG9yeSAhJyxcbiAgICAgIGxhc3ROYW1lOiAnTGFzdG5hbWUgaXMgbWFuZGF0b3J5ICEnLFxuICAgICAgbG9naW46ICdMb2dpbiBpcyBtYW5kYXRvcnkgIScsXG4gICAgICBlbWFpbDogJ0VtYWlsIGlzIG1hbmRhdG9yeSAhJyxcbiAgICAgIGNvbmZpcm1FbWFpbDogJ0VtYWlsIGNvbmZpcm1hdGlvbiBpcyBtYW5kYXRvcnkgIScsXG4gICAgICBwYXNzOiAnUGFzc3dvcmQgaXMgbWFuZGF0b3J5IGFuZCBtdXN0IGNvbnRhaW4gbWluaW11bSA4IGNoYXJhY3RlcnMsIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyLCBvbmUgbG93ZXJjYXNlIGxldHRlciwgb25lIG51bWJlciBhbmQgb25lIHNwZWNpYWwgY2hhcmFjdGVyICEnLFxuICAgICAgY29uZmlybVBhc3M6ICdQYXNzd29yZCBjb25maXJtYXRpb24gaXMgbWFuZGF0b3J5ICEnLFxuICAgICAgY29tcGFueU5hbWU6ICdDb21wYW55IG5hbWUgaXMgbWFuZGF0b3J5ICEnLFxuICAgICAgY29tcGFueUxvZ286ICdDb21wYW55IGxvZ28gaXMgb3B0aW9ubmFsLCBpZiBzdXBwbGllZCwgZmlsZSBtdXN0IGJlIGFuIHN2ZyB0eXBlIG9mIG1heGltdW0ge3NpemV9IGJ5dGVzICEnLFxuICAgICAgZGV2aXNlOiAnRGV2aXNlIGlzIG1hbmRhdG9yeSAhJyxcbiAgICAgIHVzZXJUeXBlOiAnVHlwZSBpcyBtYW5kYXRvcnkgIScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIGZpcnN0TmFtZTogJ0ZpcnN0bmFtZSBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBsYXN0TmFtZTogJ0xhc3RuYW1lIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGxvZ2luOiAnTG9naW4gY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgZW1haWw6ICdFbWFpbCBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICBjb25maXJtRW1haWw6ICdFbWFpbCBjb25maXJtYXRpb24gY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgcGFzczogJ1Bhc3N3b3JkIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGNvbmZpcm1QYXNzOiAnUGFzc3dvcmQgY29uZmlybWF0aW9uIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGNvbXBhbnlOYW1lOiAnQ29tcGFueSBuYW1lIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGNvbXBhbnlMb2dvOiAnQ29tcGFueSBsb2dvIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICAgIGRldmlzZTogJ0RldmlzZSBjYW5cXCd0IGJlIGVtcHR5ICEnLFxuICAgICAgICB1c2VyVHlwZTogJ1R5cGUgY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgIH0sXG4gICAgICBlcnJvcjoge1xuICAgICAgICBmaXJzdE5hbWU6ICdCYWQgZmlyc3RuYW1lIHN1cHBsaWVkICEnLFxuICAgICAgICBsYXN0TmFtZTogJ0JhZCBsYXN0bmFtZSBzdXBwbGllZCAhJyxcbiAgICAgICAgbG9naW46ICdCYWQgbG9naW4gc3VwcGxpZWQgIScsXG4gICAgICAgIGVtYWlsOiAnQmFkIGVtYWlsIHN1cHBsaWVkICEnLFxuICAgICAgICBjb25maXJtRW1haWw6ICdCYWQgZW1haWwgY29uZmlybWF0aW9uIHN1cHBsaWVkICEnLFxuICAgICAgICBlbWFpbEJ1c3k6ICdFbWFpbCBhbHJlYWR5IGV4aXN0cyAhJyxcbiAgICAgICAgZW1haWxNaXNzbWF0Y2g6ICdFbWFpbCBhbmQgY29uZmlybWF0aW9uIG1pc3NtYXRjaCAhJyxcbiAgICAgICAgcGFzczogJ0JhZCBwYXNzd29yZCBzdXBwbGllZCAhJyxcbiAgICAgICAgY29uZmlybVBhc3M6ICdCYWQgcGFzc3dvcmQgY29uZmlybWF0aW9uIHN1cHBsaWVkICEnLFxuICAgICAgICBwYXNzTWlzc21hdGNoOiAnUGFzc3dvcmQgYW5kIGNvbmZpcm1hdGlvbiBtaXNzbWF0Y2gnLFxuICAgICAgICBjb21wYW55TmFtZTogJ0JhZCBjb21wYW55IG5hbWUgc3VwcGxpZWQgIScsXG4gICAgICAgIGNvbXBhbnlMb2dvOiB7XG4gICAgICAgICAgYWNjZXB0OiAnQmFkIGltYWdlIHN1cHBsaWVkLCB3YWl0aW5nIGZvciAoLnN2ZykgaGF2aW5nICh7ZXh0fSkgIScsXG4gICAgICAgICAgbWF4RmlsZVNpemU6ICdGaWxlIHNpemUgZXhjZWVkZWQgdGhlIG1heGltdW0gc2l6ZSwgd2FpdGluZyAoPHttYXh9KSBoYXZpbmcgKHtzaXplfSkgIScsXG4gICAgICAgIH0sXG4gICAgICAgIGRldmlzZTogJ0JhZCBkZXZpc2Ugc3VwcGxpZWQgIScsXG4gICAgICAgIHVzZXJUeXBlOiAnQmFkIHR5cGUgc3VwcGxpZWQgIScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGliZWxsZXM6IHtcbiAgICAgIG5vX2RldmlzZTogJ05vIGRldmlzZSBhZmZlY3RlZCAhJyxcbiAgICAgIG5vX29wdGlvbl9kZXZpc2U6ICdObyBkZXZpc2UuJyxcbiAgICAgIG5vX3R5cGU6ICdObyB0eXBlIGFmZmVjdGVkICEnLFxuICAgICAgbm9fb3B0aW9uX3R5cGU6ICdObyB0eXBlLicsXG4gICAgICB1cGRhdGVCdXR0b246ICdTdWJtaXQnLFxuICAgICAgcmVzZXRCdXR0b246ICdSZXNldCcsXG4gICAgICB0eXBlczoge1xuICAgICAgICByZWd1bGFyOiAnTWFuYWdlcicsXG4gICAgICAgIGFkbWluOiAnQWRtaW5pc3RyYXRvcicsXG4gICAgICB9LFxuICAgIH0sXG4gICAgcmVzdWx0czoge1xuICAgICAgb2s6IHtcbiAgICAgICAgYWRkOiAnUHJvZmlsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseSAhJyxcbiAgICAgICAgdXBkYXRlOiAnUHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseSAhJyxcbiAgICAgICAgZGVsZXRlOiAnUHJvZmlsZSBkZWxldGVkIHN1Y2Nlc3NmdWxseSAhJyxcbiAgICAgIH0sXG4gICAgICBrbzoge1xuICAgICAgICBhZGQ6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGFkZGluZyB1c2VyOiB7ZXJyfScsXG4gICAgICAgIHVwZGF0ZTogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgdXBkYXRpbmcgdXNlcjoge2Vycn0nLFxuICAgICAgICBkZWxldGU6ICdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGRlbGV0aW5nIHVzZXI6IHtlcnJ9JyxcbiAgICAgICAgZmV0Y2hfdXNlcjogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgdXNlciBpbmZvcm1hdGlvbnM6IHtlcnJ9JyxcbiAgICAgICAgZmV0Y2hfdXNlclR5cGVzOiB7XG4gICAgICAgICAgZW1wdHk6ICdObyB1c2VyIHR5cGUgZm91bmQgIScsXG4gICAgICAgICAgZXJyb3I6ICdTZWxlY3QgZnJvbSB1c2VyVHlwZSB0YWJsZSBvZiBTUUxpdGUgIScsXG4gICAgICAgICAgbGlua2VkX2VtcHR5OiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyB1c2VyIHR5cGVzOiBAOnByb2ZpbGVDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF91c2VyVHlwZXMuZW1wdHknLFxuICAgICAgICAgIGxpbmtlZF9lcnJvcjogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgdXNlciB0eXBlczogQDpwcm9maWxlQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfdXNlclR5cGVzLmVycm9yIHtlcnJ9JyxcbiAgICAgICAgfSxcbiAgICAgICAgdXBsb2FkOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSB1cGxvYWRpbmcgY29tcGFueSBsb2dvIGZpbGU6IHtlcnJ9JyxcbiAgICAgICAgY2hlY2tFbWFpbDogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgY2hlY2tpbmcgdGhlIGVtYWlsIGF2YWlsYWJpbGl0eToge2Vycn0nXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIGV4cG9ydHNDb21wb25lbnQ6IHtcbiAgICB0YWJsZVRpdGxlOiAnRXhwb3J0JyxcbiAgICByZXN1bHRzOiB7XG4gICAgICBrbzoge1xuICAgICAgICBmZXRjaF9pbnZvaWNlczoge1xuICAgICAgICAgIGVycm9yOiAnU2VsZWN0IGZyb20gaW52b2ljZSB0YWJsZSBvZiBTUUxpdGUgIScsXG4gICAgICAgICAgbGlua2VkX2Vycm9yOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBmZXRjaGluZyBpbnZvaWNlczogQDpleHBvcnRDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9pbnZvaWNlcy5lcnJvciB7ZXJyfScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGliZWxsZXM6IHtcbiAgICAgIGludm9pY2U6ICdJbnZvaWNlJyxcbiAgICAgIGJpbGxpbmdBZGRyZXNzTGliZWxsZTogJ0JpbGxpbmcgYWRkcmVzcyA6JyxcbiAgICAgIGFkZENvbnRlbnRMaWJlbGxlOiAnQWRkaXRpb25hbCBjb250ZW50IDonLFxuICAgICAgYnV5ZXJMaWJlbGxlOiAnQnV5ZXIgOicsXG4gICAgICBzZWxsZXJMaWJlbGxlOiAnU2VsbGVyIDonLFxuICAgICAgZGF0ZUxpYmVsbGU6ICdEYXRlIDonLFxuICAgICAgb3JkZXJOdW1iZXJMaWJlbGxlOiAnT3JkZXIgTiMnLFxuICAgICAgZGVzY3JpcHRpb25MaWJlbGxlOiAnRGVzY3JpcHRpb24nLFxuICAgICAgc2VydmljZU51bWJlckxpYmVsbGU6ICdTZXJ2aWNlIElEJyxcbiAgICAgIHR0VW5pdFByaWNlTGliZWxsZTogJ1VuaXQuIEFtb3VudCBJbmNsLiBUYXhlcycsXG4gICAgICBxdWFudGl0eUxpYmVsbGU6ICdRdWFudGl0eScsXG4gICAgICB0dE5ldFByaWNlTGliZWxsZTogJ05ldCBwcmljZSBJbmNsLiBUYXhlcycsXG4gICAgICB0dE92ZXJhbGxBbW91bnRMaWJlbGxlOiAnQW1vdW50IEluY2wuIFRheGVzJyxcbiAgICAgIHRvdGFsTGliZWxsZTogJ1RvdGFsJyxcbiAgICAgIHZhdExpYmVsbGU6ICdWQVQnLFxuICAgICAgdmF0QmFzZUxpYmVsbGU6ICdWQVQgQmFzZScsXG4gICAgICB2YXRBbW91bnRMaWJlbGxlOiAnVkFUIEFtb3VudCcsXG4gICAgICB0dFRvdGFsTGliZWxsZTogJ1RvdGFsIEluY2wuIFRheGVzJyxcbiAgICB9LFxuICB9LFxuICBob21lQ29tcG9uZW50OiB7XG4gICAgaGVhZFRhYmxlOiB7XG4gICAgICB0b3RhbEZpc2NhbFllYXJIVEluY29tZXM6ICdUb3RhbCBmaXNjYWwgeWVhciBpbmNvbWVzIGV4Y2wuIHRheGVzJyxcbiAgICAgIHRvdGFsRmlzY2FsWWVhclRUSW5jb21lczogJ1RvdGFsIGZpc2NhbCB5ZWFyIGluY29tZXMgaW5jbC4gdGF4ZXMnLFxuICAgICAgdG90YWxGaXNjYWxZZWFyUGF5bWVudHNJbmNvbWVzOiAnV2l0aGRyYXdhbCBpbiB0aGUgZmlzY2FsIHllYXInLFxuICAgICAgdG90YWxGaXNjYWxZZWFyUGF5bWVudHNPdmVyZHVlOiAnT3ZlcmR1ZSBpbiB0aGUgZmlzY2FsIHllYXInLFxuICAgIH0sXG4gICAgbGFiZWxzOiB7XG4gICAgICBzZXJ2aWNlc0xhYmVsOiAnU2VydmljZShzKScsXG4gICAgICBpbnZvaWNlc0xhYmVsOiAnSW52b2ljZShzKScsXG4gICAgICBvcmRlcnNMYWJlbDogJ09yZGVyKHMpJyxcbiAgICAgIGFjdG9yc0xhYmVsOiAnQWN0b3IocyknLFxuICAgIH0sXG4gICAgYmFyQ2hhcnQ6IHtcbiAgICAgIGp1bmVMYWJlbDogJ0p1bmUnLFxuICAgICAganVseUxhYmVsOiAnSnVseScsXG4gICAgICBhdWd1c3RMYWJlbDogJ0F1Z3VzdCcsXG4gICAgICBzZXB0ZW1iZXJMYWJlbDogJ1NlcHRlbWJlcicsXG4gICAgICBvY3RvYmVyTGFiZWw6ICdPY3RvYmVyJyxcbiAgICAgIG5vdmVtYmVyTGFiZWw6ICdOb3ZlbWJlcicsXG4gICAgICBkZWNlbWJlckxhYmVsOiAnRGVjZW1iZXInLFxuICAgICAgamFudWFyeUxhYmVsOiAnSmFudWFyeScsXG4gICAgICBmZWJydWFyeUxhYmVsOiAnRmVicnVhcnknLFxuICAgICAgbWFyY2hMYWJlbDogJ01hcmNoJyxcbiAgICAgIGFwcmlsTGFiZWw6ICdBcHJpbCcsXG4gICAgICBtYXlMYWJlbDogJ01heScsXG4gICAgICBkYXRhc2V0TGFiZWw6ICdJbnZvaWNlKHMpIG51bWJlcicsXG4gICAgICBoZWFkaW5nOiAnTnVtYmVyIG9mIGludm9pY2VzIGRpc3BhdGNoJ1xuICAgIH0sXG4gICAgcGllQ2hhcnQ6IHtcbiAgICAgIGNiTGFiZWw6ICdDcmVkaXQgY2FyZCcsXG4gICAgICBjYXNoTGFiZWw6ICdDYXNoJyxcbiAgICAgIGNocUxhYmVsOiAnQ2hlY2snLFxuICAgICAgaGVhZGluZzogJ1JlY2VpdmVkIHBheW1lbnQgdHlwZSBkaXNwYXRjaCcsXG4gICAgfSxcbiAgICBob21lVGFibGU6IHtcbiAgICAgIGhlYWRpbmc6ICdGaXNjYWwgeWVhciBzdGF0cycsXG4gICAgfSxcbiAgICByZXN1bHRzOiB7XG4gICAgICBrbzoge1xuICAgICAgICBmZXRjaF9zdGF0czogJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgc3RhdHMgOiB7ZXJyfScsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHN0YXJ0Q29tcG9uZW50OiB7XG4gICAgdGl0bGU6ICdTaWduIGluIGZvcm0nLFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBsb2dpbjogJ0xvZ2luIG9yIGVtYWlsJyxcbiAgICAgIHBhc3M6ICdQYXNzd29yZCdcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyczoge1xuICAgICAgbG9naW46ICdMb2dpbi9lbWFpbCcsXG4gICAgICBwYXNzOiAnUGFzc3dvcmQnLFxuICAgIH0sXG4gICAgaGludHM6IHtcbiAgICAgIGxvZ2luOiAnTG9naW4gb3IgZW1haWwgdXNlZCBpbiByZWdpc3RlciBmb3JtIGlzIG1hbmRhdG9yeSAhJyxcbiAgICAgIHBhc3M6ICdwYXNzd29yZCB1c2VkIGluIHJlZ2lzdGVyIGZvcm0gaXMgbWFuZGF0b3J5IScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIGxvZ2luOiAnTG9naW4gY2FuXFwndCBiZSBlbXB0eSAhJyxcbiAgICAgICAgcGFzczogJ1Bhc3N3b3JkIGNhblxcJ3QgYmUgZW1wdHkgIScsXG4gICAgICB9LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgc2lnbkluOiAnQmFkIGxvZ2luL2VtYWlsIG9yIHBhc3N3b3JkIHN1cHBsaWVkICEnLFxuICAgICAgfVxuICAgIH0sXG4gICAgcmVzdWx0czoge1xuICAgICAga286IHtcbiAgICAgICAgc2lnbkluOiAnRXJyb3Igd2hpbGUgc2lnbmluZyBpbjoge2Vycn0nLFxuICAgICAgICBzZXNzaW9uOiAnQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIHNlc3Npb246IHtlcnJ9JyxcbiAgICAgIH1cbiAgICB9LFxuICAgIGxpYmVsbGVzOiB7XG4gICAgICBzaWduSW5CdXR0b246ICdTaWduIEluJyxcbiAgICAgIHJlc2V0QnV0dG9uOiAnUmVzZXQnLFxuICAgICAgc2lnblVwOiAnUmVnaXN0ZXInLFxuICAgICAgbG9nb3V0OiAnTG9nb3V0JyxcbiAgICB9LFxuICB9LFxuICBlcnJvck5vdEZvdW5kQ29tcG9uZW50OiB7XG4gICAgdGV4dDogJ09vcHMuIE5vdGhpbmcgaGVyZS4uLicsXG4gICAgYnV0dG9uVGV4dDogJ0dvIEhvbWUnLFxuICB9LFxuICBmb3Jtczoge1xuICAgIGhlYWRUYWJsZToge1xuICAgICAgYWN0aW9uOiAnQWN0aW9ucycsXG4gICAgICBleHBvcnQ6ICdFeHBvcnQgdG8gY3N2JyxcbiAgICB9LFxuICAgIGVycm9yczoge1xuICAgICAgZW1wdHk6IHtcbiAgICAgICAgZmlsdGVyQm9keUNvbnRlbnRUZXh0OiAnU29ycnkuLi4gVGhlIGZpbHRlciBkaWRuXFwndCB1bmNvdmVyIGFueSByZXN1bHRzJyxcbiAgICAgIH0sXG4gICAgICBlcnJvcjoge1xuICAgICAgICBpbnB1dHM6ICdTb21ldGhpbmcgd3JvbmcgaGFwcGVuZWQsIHBsZWFzZSBjaGVjayB0aGUgZm9ybSBmaWVsZHMgIScsXG4gICAgICAgIGV4cG9ydDogJ0Jyb3dzZXIgZGVuaWVkIGZpbGUgZG93bmxvYWQuLi4nLFxuICAgICAgICBzcWxpdGVEYjogJ1VuYmFsZSB0byBvcGVuIFNRTGl0ZSBEQiAhJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBhZGRCdXR0b25UZXh0OiAnQWRkJyxcbiAgICB1cGRhdGVCdXR0b25UZXh0OiAnVXBkYXRlJyxcbiAgICBkZWxldGVCdXR0b25UZXh0OiAnRGVsZXRlJyxcbiAgICBleHBvcnRCdXR0b25UZXh0OiAnRXhwb3J0JyxcbiAgICB2YWxpZDogJ09rICEnLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgcmVzdWx0czoge1xuICAgICAga286ICdZb3VyIHNlc3Npb24gaGFzIGV4cGlyZWQsIHBsZWFzZSBsb2dpbiBhZ2FpbiAhJyxcbiAgICB9XG4gIH0sXG4gIGZvb3Rlcjoge1xuICAgIHBhcmFncmFwaDogJ8KpMjAyMyBQb3dlcmVkIGJ5IENyeXB0b0xvZ2lxdWUgLSBEaWdpdGFsIHNlcnZpY2VzIGNvbXBhbnknLFxuICB9LFxuICBub1NjcmlwdDogJ1RoaXMgYXBwIHVzZSBKYXZhc2NyaXB0IHdoaWNoIGlzIGN1cnJlbnRseSBkaXNhYmxlZCBvciBub3Qgc3VwcG9ydGVkICEnLFxufTtcbiIsIi8vIFRoaXMgaXMganVzdCBhbiBleGFtcGxlLFxuLy8gc28geW91IGNhbiBzYWZlbHkgZGVsZXRlIGFsbCBkZWZhdWx0IHByb3BzIGJlbG93XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZmFpbGVkOiAnQWN0aW9uIMOpY2hvdcOpZScsXG4gIHN1Y2Nlc3M6ICdBY3Rpb24gdGVybWluw6llIGF2ZWMgc3VjY8OocyAhJyxcbiAgc3RhcnRUaXRsZTogJ0Nvbm5leGlvbicsXG4gIHN0YXJ0TGlua05hbWU6ICdTdGFydCcsXG4gIHN0YXJ0TGlua1RhcmdldDogJy9zdGFydCcsXG4gIHJlZ2lzdGVyVGl0bGU6ICdTXFwnZW5yZWdpc3RyZXInLFxuICByZWdpc3RlckxpbmtOYW1lOiAnU2lnblVwJyxcbiAgcmVnaXN0ZXJMaW5rVGFyZ2V0OiAnL3JlZ2lzdGVyJyxcbiAgaG9tZVRpdGxlOiAnQWNjdWVpbCcsXG4gIGhvbWVMaW5rTmFtZTogJ0hvbWUnLFxuICBob21lTGlua1RhcmdldDogJy9ob21lJyxcbiAgaG9tZUJpc0xpbmtOYW1lOiAnSG9tZUJpcycsXG4gIGhvbWVCaXNMaW5rVGFyZ2V0OiAnJyxcbiAgaG9tZVRlckxpbmtOYW1lOiAnSG9tZVRlcicsXG4gIGhvbWVUZXJMaW5rVGFyZ2V0OiAnL2hvbWUnLFxuICBwcm9maWxlVGl0bGU6ICdQcm9maWwnLFxuICBwcm9maWxlTGlua05hbWU6ICdQcm9maWxlJyxcbiAgcHJvZmlsZUxpbmtUYXJnZXQ6ICcvcHJvZmlsZScsXG4gIGFib3V0VGl0bGU6ICfDgCBQcm9wb3MnLFxuICBhYm91dExpbmtOYW1lOiAnQWJvdXQnLFxuICBhYm91dExpbmtUYXJnZXQ6ICcvYWJvdXQnLFxuICBzZXJ2aWNlVGl0bGU6ICdTZXJ2aWNlJyxcbiAgc2VydmljZUxpbmtOYW1lOiAnU2VydmljZScsXG4gIHNlcnZpY2VMaW5rVGFyZ2V0OiAnL3NlcnZpY2UvOnR5cGU/JyxcbiAgYWN0b3JUaXRsZTogJ0FjdGV1cicsXG4gIGFjdG9yTGlua05hbWU6ICdBY3RvcicsXG4gIGFjdG9yTGlua1RhcmdldDogJy9hY3Rvci86dHlwZT8nLFxuICBvcmRlclRpdGxlOiAnQ29tbWFuZGUnLFxuICBvcmRlckxpbmtOYW1lOiAnT3JkZXInLFxuICBvcmRlckxpbmtUYXJnZXQ6ICcvb3JkZXIvOnR5cGU/JyxcbiAgcGF5bWVudFRpdGxlOiAnUGFpZW1lbnQnLFxuICBwYXltZW50TGlua05hbWU6ICdQYXltZW50JyxcbiAgcGF5bWVudExpbmtUYXJnZXQ6ICcvcGF5bWVudC86dHlwZT8nLFxuICBpbnZvaWNlVGl0bGU6ICdGYWN0dXJlJyxcbiAgaW52b2ljZUxpbmtOYW1lOiAnSW52b2ljZScsXG4gIGludm9pY2VMaW5rVGFyZ2V0OiAnL2ludm9pY2UvOnR5cGU/JyxcbiAgZXhwb3J0VGl0bGU6ICdFeHBvcnRhdGlvbicsXG4gIGV4cG9ydExpbmtOYW1lOiAnRXhwb3J0JyxcbiAgZXhwb3J0TGlua1RhcmdldDogJy9leHBvcnQnLFxuICBwZGZUaXRsZTogJ0V4cG9ydGF0aW9uIFBERicsXG4gIHBkZkxpbmtOYW1lOiAnUGRmRXhwb3J0JyxcbiAgcGRmTGlua1RhcmdldDogJy9wZGYvOmludm9pY2VJZHMoXFxcXGQrKSonLFxuICBwZGZQcmVMaW5rVGFyZ2V0OiAnL3BkZi8nLFxuICBub3RGb3VuZFRpdGxlOiAnUGFnZSBpbnRyb3V2YWJsZScsXG4gIGRyYXdlcjoge1xuICAgIHRpdGxlOiAnTGllbnMnXG4gIH0sXG4gIHRvb2xiYXI6IHtcbiAgICBsYW5ndWFnZUxhYmVsOiAnTGFuZ2FnZXMnLFxuICAgIGRyb3Bkb3duSGVhZGVyOiAnU8OpbMOpY3Rpb24gZGUgbGFuZ2FnZScsXG4gICAgZHJvcGRvd25EZWZhdWx0OiAnRMOpZmF1dCAoe2xhbmd9KScsXG4gIH0sXG4gIGNvbXB0YUxpbmtzOiB7XG4gICAgc2VydmljZXM6IHtcbiAgICAgIHRpdGxlOiAnU2VydmljZXMnLFxuICAgICAgYWRtaW46ICdBZG1pbmlzdHJhdGlvbicsXG4gICAgICBhZG1pbkxhYmVsOiAnQWRtaW4uIHNlcnZpY2VzJyxcbiAgICAgIGFkbWluTGluazogJy9zZXJ2aWNlL2FkbWluJyxcbiAgICAgIGRpc3BsYXk6ICdBZmZpY2hhZ2UnLFxuICAgICAgZGlzcGxheUxhYmVsOiAnQWZmaWNoLiBzZXJ2aWNlcycsXG4gICAgICBkaXNwbGF5TGluazogJy9zZXJ2aWNlL2Rpc3BsYXknLFxuICAgIH0sXG4gICAgYWN0b3JzOiB7XG4gICAgICB0aXRsZTogJ0FjdGV1cnMnLFxuICAgICAgYWRtaW46ICdBZG1pbmlzdHJhdGlvbicsXG4gICAgICBhZG1pbkxhYmVsOiAnQWRtaW4uIGFjdGV1cnMnLFxuICAgICAgYWRtaW5MaW5rOiAnL2FjdG9yL2FkbWluJyxcbiAgICAgIGRpc3BsYXk6ICdBZmZpY2hhZ2UnLFxuICAgICAgZGlzcGxheUxhYmVsOiAnQWZmaWNoLiBhY3RldXJzJyxcbiAgICAgIGRpc3BsYXlMaW5rOiAnL2FjdG9yL2Rpc3BsYXknLFxuICAgIH0sXG4gICAgb3JkZXJzOiB7XG4gICAgICB0aXRsZTogJ0NvbW1hbmRlcycsXG4gICAgICBhZG1pbjogJ0FkbWluaXN0cmF0aW9uJyxcbiAgICAgIGFkbWluTGFiZWw6ICdBZG1pbi4gY29tbWFuZGVzJyxcbiAgICAgIGFkbWluTGluazogJy9vcmRlci9hZG1pbicsXG4gICAgICBkaXNwbGF5OiAnQWZmaWNoYWdlJyxcbiAgICAgIGRpc3BsYXlMYWJlbDogJ0FmZmljaC4gY29tbWFuZGVzJyxcbiAgICAgIGRpc3BsYXlMaW5rOiAnL29yZGVyL2Rpc3BsYXknLFxuICAgIH0sXG4gICAgcGF5bWVudHM6IHtcbiAgICAgIHRpdGxlOiAnUGFpZW1lbnRzJyxcbiAgICAgIGFkbWluOiAnQWRtaW5pc3RyYXRpb24nLFxuICAgICAgYWRtaW5MYWJlbDogJ0FkbWluLiBwYWllbWVudHMnLFxuICAgICAgYWRtaW5MaW5rOiAnL3BheW1lbnQvYWRtaW4nLFxuICAgICAgZGlzcGxheTogJ0FmZmljaGFnZScsXG4gICAgICBkaXNwbGF5TGFiZWw6ICdBZmZpY2guIHBhaWVtZW50cycsXG4gICAgICBkaXNwbGF5TGluazogJy9wYXltZW50L2Rpc3BsYXknLFxuICAgIH0sXG4gICAgaW52b2ljZXM6IHtcbiAgICAgIHRpdGxlOiAnRmFjdHVyZXMnLFxuICAgICAgYWRtaW46ICdBZG1pbmlzdHJhdGlvbicsXG4gICAgICBhZG1pbkxhYmVsOiAnQWRtaW4uIGZhY3R1cmVzJyxcbiAgICAgIGFkbWluTGluazogJy9pbnZvaWNlL2FkbWluJyxcbiAgICAgIGRpc3BsYXk6ICdBZmZpY2hhZ2UnLFxuICAgICAgZGlzcGxheUxhYmVsOiAnQWZmaWNoLiBmYWN0dXJlcycsXG4gICAgICBkaXNwbGF5TGluazogJy9pbnZvaWNlL2Rpc3BsYXknLFxuICAgIH0sXG4gICAgZXhwb3J0OiB7XG4gICAgICB0aXRsZTogJ0V4cG9ydGF0aW9uJyxcbiAgICAgIGxpbms6ICcvZXhwb3J0J1xuICAgIH0sXG4gIH0sXG4gIHNlcnZpY2VzQ29tcG9uZW50OiB7XG4gICAgdGFibGVUaXRsZTogJ1NlcnZpY2VzJyxcbiAgICBoZWFkVGFibGU6IHtcbiAgICAgIG5hbWU6ICdOb20nLFxuICAgICAgYW1vdW50OiAnTW9udGFudCB1bml0YWlyZSBob3JzIHRheGVzJyxcbiAgICAgIHF1YW50aXR5OiAnUXVhbnRpdMOpJyxcbiAgICB9LFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBuYW1lOiAnTm9tJyxcbiAgICAgIGFtb3VudDogJ01vbnRhbnQnLFxuICAgICAgcXVhbnRpdHk6ICdRdWFudGl0w6knLFxuICAgIH0sXG4gICAgcGxhY2Vob2xkZXJzOiB7XG4gICAgICBuYW1lOiAnTm9tJyxcbiAgICAgIGFtb3VudDogJ01vbnRhbnQnLFxuICAgICAgcXVhbnRpdHk6ICdRdWFudGl0w6knLFxuICAgIH0sXG4gICAgaGludHM6IHtcbiAgICAgIG5hbWU6ICdMZSBzZXJ2aWNlIGRvaXQgY29udGVuaXIgbW9pbnMgZGUgMzAgY2FyYWN0w6hyZXMgc2FucyBjaGlmZnJlcyAhJyxcbiAgICAgIGFtb3VudDogJ0xlIG1vbnRhbnQgZG9pdCDDqnRyZSBpbmbDqXJpZXVyIMOgIDEsMDAwLDAwMCAhJyxcbiAgICAgIHF1YW50aXR5OiAnTGEgcXVhbnRpdMOpIGRvaXQgw6p0cmUgaW5mw6lyaWV1cmUgw6AgNTAgIScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIHRhYmxlQm9keUNvbnRlbnRUZXh0OiAnT3Vwcy4uLiBBdWN1biBzZXJ2aWNlLicsXG4gICAgICAgIG5hbWU6ICdMZSBub20gZHUgc2VydmljZSBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGFtb3VudDogJ0xlIG1vbnRhbnQgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBxdWFudGl0eTogJ0xhIHF1YW50aXTDqSBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGJ1dHRvbkFkZGluZzogJ0Fqb3V0IGRcXCd1biBzZXJ2aWNlJyxcbiAgICAgICAgYnV0dG9uVXBkYXRpbmc6ICdNaXNlIMOgIGpvdXIgZFxcJ3VuIHNlcnZpY2UnLFxuICAgICAgfSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIG5hbWU6ICdOb20gZGUgc2VydmljZSBpbmNvcnJlY3QgIScsXG4gICAgICAgIGFtb3VudDogJ01vbnRhbnQgaW5jb3JyZWN0ICEnLFxuICAgICAgICBxdWFudGl0eTogJ1F1YW50aXTDqSBpbmNvcnJlY3QgIScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgcmVzdWx0czoge1xuICAgICAgb2s6IHtcbiAgICAgICAgYWRkOiAnU2VydmljZSBham91dMOpIGF2ZWMgc3VjY8OocyAhJyxcbiAgICAgICAgdXBkYXRlOiAnU2VydmljZSBtaXMgw6Agam91ciBhdmVjIHN1Y2PDqHMgIScsXG4gICAgICAgIGRlbGV0ZTogJ1NlcnZpY2Ugc3VwcHJpbcOpIGF2ZWMgc3VjY8OocyAhJyxcbiAgICAgIH0sXG4gICAgICBrbzoge1xuICAgICAgICBhZGQ6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxcXCdham91dCBkdSBzZXJ2aWNlOiB7ZXJyfScsXG4gICAgICAgIHVwZGF0ZTogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgbWlzZSDDoCBqb3VyIGR1IHNlcnZpY2U6IHtlcnJ9JyxcbiAgICAgICAgZGVsZXRlOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSBzdXBwcmVzc2lvbiBkdSBzZXJ2aWNlIDoge2Vycn0nLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBhY3RvcnNDb21wb25lbnQ6IHtcbiAgICB0YWJsZVRpdGxlOiAnQWN0ZXVycycsXG4gICAgaGVhZFRhYmxlOiB7XG4gICAgICBmaXJzdE5hbWU6ICdQcsOpbm9tJyxcbiAgICAgIGxhc3ROYW1lOiAnTm9tJyxcbiAgICAgIGVtYWlsOiAnRW1haWwnLFxuICAgICAgc3RyZWV0TnVtOiAnTiMgZGUgcnVlJyxcbiAgICAgIHN0cmVldE5hbWU6ICdOb20gZGUgcnVlJyxcbiAgICAgIGNwOiAnQ29kZSBwb3N0YWwnLFxuICAgICAgY2l0eTogJ1ZpbGxlJyxcbiAgICAgIHRlbDogJ04jIGRlIHTDqWzDqXBob25lJyxcbiAgICAgIHNlbGxlck51bTogJ04jIGRlIGNvbW1lcsOnYW50JyxcbiAgICAgIHR5cGU6ICdUeXBlJyxcbiAgICB9LFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBmaXJzdE5hbWU6ICdQcsOpbm9tJyxcbiAgICAgIGxhc3ROYW1lOiAnTm9tJyxcbiAgICAgIGVtYWlsOiAnRW1haWwnLFxuICAgICAgc3RyZWV0TnVtOiAnTiMgZGUgcnVlJyxcbiAgICAgIHN0cmVldE5hbWU6ICdOb20gZGUgcnVlJyxcbiAgICAgIGNwOiAnQ29kZSBwb3N0YWwnLFxuICAgICAgY2l0eTogJ1ZpbGxlJyxcbiAgICAgIHRlbDogJ04jIGRlIHTDqWzDqXBob25lJyxcbiAgICAgIHNlbGxlck51bTogJ04jIGRlIGNvbW1lcsOnYW50JyxcbiAgICAgIHR5cGU6ICdUeXBlJyxcbiAgICAgIHNlbGxlclR5cGU6ICdWZW5kZXVyJyxcbiAgICAgIGJ1eWVyVHlwZTogJ0FjaGV0ZXVyJyxcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyczoge1xuICAgICAgZmlyc3ROYW1lOiAnUHLDqW5vbScsXG4gICAgICBsYXN0TmFtZTogJ05vbScsXG4gICAgICBlbWFpbDogJ0VtYWlsJyxcbiAgICAgIHN0cmVldE51bTogJ04jIGRlIHJ1ZScsXG4gICAgICBzdHJlZXROYW1lOiAnTm9tIGRlIHJ1ZScsXG4gICAgICBjcDogJ0NvZGUgcG9zdGFsJyxcbiAgICAgIGNpdHk6ICdWaWxsZScsXG4gICAgICB0ZWw6ICdOIyBkZSB0w6lsw6lwaG9uZScsXG4gICAgICBzZWxsZXJOdW06ICdOIyBjb21tZXLDp2FudCcsXG4gICAgICB0eXBlOiAnVHlwZScsXG4gICAgfSxcbiAgICBoaW50czoge1xuICAgICAgZmlyc3ROYW1lOiAnTGUgcHLDqW5vbSBkb2l0IGNvbnRlbmlyIGF1IG1vaW5zIDIgY2FyYWN0w6hyZXMgZXQgbW9pbnMgZGUgMTUgY2FyYWN0w6hyZXMgYWxwaGFiw6l0aXF1ZXMgaW5jbHVhbnQgKC0pICEnLFxuICAgICAgbGFzdE5hbWU6ICdMZSBub20gZG9pdCBjb250ZW5pciBhdSBtb2lucyAyIGNhcmFjdMOocmVzIGV0IG1vaW5zIGRlIDE1IGNhcmFjdMOocmVzIGFscGhhYsOpdGlxdWVzICEnLFxuICAgICAgZW1haWw6ICdFbWFpbCBkb2l0IMOqdHJlIHZhbGlkZSAhJyxcbiAgICAgIHN0cmVldE51bTogJ0xlIG51bcOpcm8gZGUgcnVlIGRvaXQgw6p0cmUgbnVtw6lyaXF1ZSBzdWl2aSBkZSBCSVMvVEVSIHNpIGJlc29pbiAhJyxcbiAgICAgIHN0cmVldE5hbWU6ICdMZSBub20gZGUgcnVlIGRvaXQgY29udGVuaXIgYXUgbW9pbnMgMiBjYXJhY3TDqHJlcyBldCBtb2lucyBkZSA1MCBjYXJhY3TDqHJlcyBhbHBoYWLDqXRpcXVlcyAhJyxcbiAgICAgIGNwOiAnTGUgY29kZSBwb3N0YWwgZG9pdCBjb250ZW5pciA1IGNhcmFjdMOocmVzIG51bcOpcmlxdWVzIChleDogMDEwMDApICEnLFxuICAgICAgY2l0eTogJ0xhIHZpbGxlIGRvaXQgY29udGVuaXIgYXUgbW9pbnMgMiBjYXJhY3TDqHJlcyBldCBtb2lucyBkZSA1MCBjYXJhY3TDqHJlcyBhbHBoYWLDqXRpcXVlcyAhJyxcbiAgICAgIHRlbDogJ0xlIG51bcOpcm8gZGUgdMOpbMOpcGhvbmUgZG9pdCBjb250ZW5pciAxMCBjYXJ0YWN0w6hyZXMgbnVtw6lyaXF1ZXMgIScsXG4gICAgICBzZWxsZXJOdW06ICdMZSBudW3DqXJvIGRlIGNvbW1lcsOnYW50IGRvaXQgw6p0cmUgdmFsaWRlICEnLFxuICAgICAgdHlwZTogJ0xlIHR5cGUgZFxcJ2FjdGV1ciBkb2l0IMOqdHJlIFZlbmRldXIsIEFjaGV0ZXVyIG91IGxlcyBkZXV4ICEnLFxuICAgIH0sXG4gICAgZXJyb3JzOiB7XG4gICAgICBlbXB0eToge1xuICAgICAgICB0YWJsZUJvZHlDb250ZW50VGV4dDogJ091cHMuLi4gQXVjdW4gYWN0ZXVyLicsXG4gICAgICAgIGZpcnN0TmFtZTogJ0xlIHByw6lub20gbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBsYXN0TmFtZTogJ0xlIG5vbSBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGVtYWlsOiAnTFxcJ2VtYWlsIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgc3RyZWV0TnVtOiAnTGUgbnVtw6lybyBkZSBydWUgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBzdHJlZXROYW1lOiAnTGUgbm9tIGRlIHJ1ZSBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGNwOiAnTGUgY29kZSBwb3N0YWwgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBjaXR5OiAnTGEgdmlsbGUgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICB0ZWw6ICdMZSBudW3DqXJvIGRlIHTDqWzDqXBob25lIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgc2VsbGVyTnVtOiAnTGUgbnVtw6lybyBkZSBjb21tZXLDp2FudCBkb2l0IMOqdHJlIHJlbnNlaWduw6kgIScsXG4gICAgICAgIHR5cGU6ICdMZSB0eXBlIGRcXCdhY3RldXIgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBidXR0b25BZGRpbmc6ICdBam91dGVyIHVuIGFjdGV1cicsXG4gICAgICAgIGJ1dHRvblVwZGF0aW5nOiAnTWV0dHJlIMOgIGpvdXIgdW4gYWN0ZXVyJyxcbiAgICAgIH0sXG4gICAgICBlcnJvcjoge1xuICAgICAgICBmaXJzdE5hbWU6ICdQcsOpbm9tIGluY29ycmVjdCAhJyxcbiAgICAgICAgbGFzdE5hbWU6ICdOb20gaW5jb3JyZWN0ICEnLFxuICAgICAgICBlbWFpbDogJ0VtYWlsIGluY29ycmVjdCAhJyxcbiAgICAgICAgc3RyZWV0TnVtOiAnTiMgZGUgcnVlIGluY29ycmVjdCAhJyxcbiAgICAgICAgc3RyZWV0TmFtZTogJ05vbSBkZSBydWUgaW5jb3JyZWN0ICEnLFxuICAgICAgICBjcDogJ0NvZGUgcG9zdGFsIGluY29ycmVjdCAhJyxcbiAgICAgICAgY2l0eTogJ1ZpbGxlIGluY29ycmVjdGUgIScsXG4gICAgICAgIHRlbDogJ04jIGRlIHTDqWzDqXBob25lIGluY29ycmVjdCAhJyxcbiAgICAgICAgc2VsbGVyTnVtOiAnTiMgZGUgY29tbWVyw6dhbnQgaW5jb3JyZWN0ICEnLFxuICAgICAgICB0eXBlOiAnVHlwZSBkXFwnYWN0ZXVyIGluY29ycmVjdCAhJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICByZXN1bHRzOiB7XG4gICAgICBvazoge1xuICAgICAgICBhZGQ6ICdBY3RldXIgYWpvdXTDqSBhdmVjIHN1Y2PDqHMgIScsXG4gICAgICAgIHVwZGF0ZTogJ0FjdGV1ciBtaXMgw6Agam91ciBhdmVjIHN1Y2PDqHMgIScsXG4gICAgICAgIGRlbGV0ZTogJ0FjdGV1ciBzdXBwcmltw6kgYXZlYyBzdWNjw6hzICEnLFxuICAgICAgfSxcbiAgICAgIGtvOiB7XG4gICAgICAgIGFkZDogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbFxcJ2Fqb3V0IGRlIGxcXCdhY3RldXI6IHtlcnJ9JyxcbiAgICAgICAgdXBkYXRlOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSBtaXNlIMOgIGpvdXIgZGUgbFxcJ2FjdGV1cjoge2Vycn0nLFxuICAgICAgICBkZWxldGU6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51IGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGUgbFxcJ2FjdGV1cjoge2Vycn0nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxpYmVsbGVzOiB7XG4gICAgICBhY3RvclR5cGVzOiB7XG4gICAgICAgIGJvdGg6ICdBY2hldGV1ciwgVmVuZGV1cicsXG4gICAgICAgIGJ1eWVyOiAnQWNoZXRldXInLFxuICAgICAgICBzZWxsZXI6ICdWZW5kZXVyJyxcbiAgICAgIH0sXG4gICAgICBub19zZWxsZXJOdW06ICdBdWN1biBOIyBkZSBjb21tZXLDp2FudCcsXG4gICAgfVxuICB9LFxuICBvcmRlcnNDb21wb25lbnQ6IHtcbiAgICB0YWJsZVRpdGxlOiAnQ29tbWFuZGVzJyxcbiAgICBoZWFkVGFibGU6IHtcbiAgICAgIGNvbnRlbnVBZGRpdGlvbm5lbDogJ0NvbnRlbnUgYWRkaXRpb25uZWwnLFxuICAgICAgc2VydmljZXM6ICdTZXJ2aWNlcycsXG4gICAgICBwcmljZUh0OiAnUHJpeCBIb3JzIFRheGVzJyxcbiAgICAgIGZhY3R1cmU6ICdGYWN0dXJlJyxcbiAgICB9LFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBjb250ZW51QWRkaXRpb25uZWw6ICdDb250ZW51IGFkZGl0aW9ubmVsJyxcbiAgICAgIHNlcnZpY2VzOiAnU2VydmljZXMnLFxuICAgICAgcHJpY2VIdDogJ1ByaXgnLFxuICAgICAgZmFjdHVyZTogJ0ZhY3R1cmVzJyxcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyczoge1xuICAgICAgY29udGVudUFkZGl0aW9ubmVsOiAnQ29udGVudSBhZGRpdGlvbm5lbCcsXG4gICAgICBzZXJ2aWNlczogJ1NlcnZpY2VzJyxcbiAgICAgIHByaWNlSHQ6ICdQcml4JyxcbiAgICAgIGZhY3R1cmU6ICdGYWN0dXJlcycsXG4gICAgfSxcbiAgICBoaW50czoge1xuICAgICAgY29udGVudUFkZGl0aW9ubmVsOiAnTGUgY29udGVudSBhZGRpdGlvbm5lbCBkb2l0IGNvbnRlbmlyIGF1IG1vaW5zIDIgY2FyYWN0w6hyZXMgZXQgbW9pbnMgZGUgMzAgY2FyYWN0w6hyZXMgYWxwaGFudW3DqXJpcXVlcywgY2UgY2hhbXBzIGVzdCBvYmxpZ2F0b2lyZSAhJyxcbiAgICAgIHNlcnZpY2VzOiAnQXUgbW9pbnMgMSBzZXJ2aWNlIGRvaXQgw6p0cmUgc8OpbGVjdGlvbm7DqSAhJyxcbiAgICAgIHByaWNlSHQ6ICdMZSBwcml4IGRvaXQgw6p0cmUgc3Vww6lyaWV1ciDDoCAwICEnLFxuICAgICAgZmFjdHVyZTogJ1VuZSBmYWN0dXJlIGRvaXQgw6p0cmUgc8OpbGVjdGlvbm7DqWUgIScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIHRhYmxlQm9keUNvbnRlbnRUZXh0OiAnT3Vwcy4uLiBBdWN1bmUgY29tbWFuZGUuJyxcbiAgICAgICAgY29udGVudUFkZGl0aW9ubmVsOiAnTGUgY29udGVudSBhZGRpdGlvbm5lbCBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIHNlcnZpY2VzOiAnQXUgbW9pbnMgMSBzZXJ2aWNlIGRvaXQgw6p0cmUgc8OpbGVjdGlvbm7DqSAhJyxcbiAgICAgICAgcHJpY2VIdDogJ0xlIHByaXggbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBmYWN0dXJlOiAnVW5lIGZhY3R1cmUgZG9pdCDDqnRyZSByZW5zZWlnbsOpZSAhJyxcbiAgICAgICAgYnV0dG9uQWRkaW5nOiAnQWpvdXRlciB1bmUgY29tbWFuZGUnLFxuICAgICAgICBidXR0b25VcGRhdGluZzogJ01ldHRyZSDDoCBqb3VyIHVuZSBjb21tYW5kZScsXG4gICAgICB9LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29udGVudUFkZGl0aW9ubmVsOiAnQ29udGVudSBhZGRpdGlvbm5lbCBpbmNvcnJlY3QgIScsXG4gICAgICAgIHNlcnZpY2VzOiAnU2VydmljZShzKSBpbmNvcnJlY3QocykgIScsXG4gICAgICAgIHByaWNlSHQ6ICdQcml4IGluY29ycmVjdCAhJyxcbiAgICAgICAgZmFjdHVyZTogJ0ZhY3R1cmUgaW5jb3JyZWN0ICEnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHJlc3VsdHM6IHtcbiAgICAgIG9rOiB7XG4gICAgICAgIGFkZDogJ0NvbW1hbmRlIGFqb3V0w6llIGF2ZWMgc3VjY8OocyAhJyxcbiAgICAgICAgdXBkYXRlOiAnQ29tbWFuZGUgbWlzZSDDoCBqb3VyIGF2ZWMgc3VjY8OocyAhJyxcbiAgICAgICAgZGVsZXRlOiAnQ29tbWFuZGUgc3VwcHJpbcOpZSBhdmVjIHN1Y2PDqHMgIScsXG4gICAgICB9LFxuICAgICAga286IHtcbiAgICAgICAgYWRkOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsXFwnYWpvdXQgZGUgbGEgY29tbWFuZGU6IHtlcnJ9JyxcbiAgICAgICAgdXBkYXRlOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSBtaXNlIMOgIGpvdXIgZGUgbGEgY29tbWFuZGU6IHtlcnJ9JyxcbiAgICAgICAgZGVsZXRlOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSBzdXBwcmVzc2lvbiBkZSBsYSBjb21tYW5kZToge2Vycn0nLFxuICAgICAgICBmZXRjaF9zZXJ2aWNlczogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGUocykgc2VydmljZShzKToge2Vycn0nLFxuICAgICAgICBmZXRjaF9pbnZvaWNlczogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGUocykgZmFjdHVyZShzKToge2Vycn0nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxpYmVsbGVzOiB7XG4gICAgICBub19hZGRpdGlvbmFsX2NvbnRlbnQ6ICdBdWN1biBjb250ZW51IGFkZGl0aW9ubmVsLicsXG4gICAgICBub19vcHRpb25fc2VydmljZXM6ICdBdWN1biBzZXJ2aWNlLicsXG4gICAgICBub19pbnZvaWNlOiAnQXVjdW5lIGZhY3R1cmUgYWZmZWN0w6llLicsXG4gICAgfVxuICB9LFxuICBwYXltZW50c0NvbXBvbmVudDoge1xuICAgIHRhYmxlVGl0bGU6ICdQYWllbWVudHMnLFxuICAgIGhlYWRUYWJsZToge1xuICAgICAgZXRhdDogJ8OJdGF0IGR1IHBhaWVtZW50JyxcbiAgICAgIHBheW1lbnRWYWx1ZTogJ1ZhbGV1ciBkdSBwYWllbWVudCcsXG4gICAgICBwYXltZW50VHlwZTogJ1R5cGUgZHUgcGFpZW1lbnQnLFxuICAgICAgZmFjdHVyZTogJ0ZhY3R1cmUnLFxuICAgIH0sXG4gICAgaW5wdXRMYWJlbHM6IHtcbiAgICAgIGV0YXQ6ICfDiXRhdCcsXG4gICAgICBwYXltZW50VmFsdWU6ICdWYWxldXInLFxuICAgICAgcGF5bWVudFR5cGU6ICdUeXBlJyxcbiAgICAgIGZhY3R1cmU6ICdGYWN0dXJlJyxcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyczoge1xuICAgICAgZXRhdDogJ8OJdGF0cycsXG4gICAgICBwYXltZW50VmFsdWU6ICdWYWxldXInLFxuICAgICAgcGF5bWVudFR5cGU6ICdUeXBlcycsXG4gICAgICBmYWN0dXJlOiAnRmFjdHVyZXMnLFxuICAgIH0sXG4gICAgaGludHM6IHtcbiAgICAgIGV0YXQ6ICdDaGFtcCDDqXRhdCBlc3Qgb2JsaWdhdG9pcmUgIScsXG4gICAgICBwYXltZW50VmFsdWU6ICdWYWxldXIgZHUgcGFpZW1lbnQgbmUgcGV1dCDDqnRyZSBzdXDDqXJpZXVyZSBhdSBwcml4IFRUQyBkZSBsYSBmYWN0dXJlIGFmZmVjdMOpZSAhJyxcbiAgICAgIHBheW1lbnRUeXBlOiAnQ2hhbXAgdHlwZSBlc3Qgb2JsaWdhdG9pcmUgIScsXG4gICAgICBmYWN0dXJlOiAnQ2hhbXAgZmFjdHVyZSBlc3Qgb2JsaWdhdG9pcmUgIScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIHRhYmxlQm9keUNvbnRlbnRUZXh0OiAnT3Vwcy4uLiBBdWN1biBwYWllbWVudC4nLFxuICAgICAgICBldGF0OiAnTFxcJ8OpdGF0IGR1IHBhaWVtZW50IG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgcGF5bWVudFZhbHVlOiAnTGEgdmFsZXVyIGR1IHBhaWVtZW50IG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgcGF5bWVudFR5cGU6ICdMZSB0eXBlIGR1IHBhaWVtZW50IG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgZmFjdHVyZTogJ0xhIGZhY3R1cmUgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBidXR0b25VcGRhdGluZzogJ01ldHRyZSDDoCBqb3VyIGxlIHBhaWVtZW50JyxcbiAgICAgICAgYnV0dG9uQWRkaW5nOiAnQWpvdXRlciB1biBub3V2ZWF1IHBhaWVtZW50JyxcbiAgICAgIH0sXG4gICAgICBlcnJvcjoge1xuICAgICAgICBldGF0OiAnw4l0YXQgaW5jb3JyZWN0ICEnLFxuICAgICAgICBwYXltZW50VmFsdWU6ICdWYWxldXIgaW5jb3JyZWN0ZSwgZG9pdCDDqnRyZSDDqWdhbGUgb3UgaW5mw6lyaWV1cmUgw6Age3ZhbH0gIScsXG4gICAgICAgIHBheW1lbnRUeXBlOiAnVHlwZSBpbmNvcnJlY3QgIScsXG4gICAgICAgIGZhY3R1cmU6ICdGYWN0dXJlIGluY29ycmVjdCAhJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICByZXN1bHRzOiB7XG4gICAgICBvazoge1xuICAgICAgICBhZGQ6ICdQYWllbWVudCBham91dMOpIGF2ZWMgc3VjY8OocyAhJyxcbiAgICAgICAgdXBkYXRlOiAnUGFpZW1lbnQgbWlzIMOgIGpvdXIgYXZlYyBzdWNjw6hzICEnLFxuICAgICAgICBkZWxldGU6ICdQYWllbWVudCBzdXBwcmltw6kgYXZlYyBzdWNjw6hzICEnLFxuICAgICAgfSxcbiAgICAgIGtvOiB7XG4gICAgICAgIGFkZDogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbFxcJ2Fqb3V0IGR1IHBhaWVtZW50OiB7ZXJyfScsXG4gICAgICAgIHVwZGF0ZTogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgbWlzZSDDoCBqb3VyIGR1IHBhaWVtZW50OiB7ZXJyfScsXG4gICAgICAgIGRlbGV0ZTogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZHUgcGFpZW1lbnQ6IHtlcnJ9JyxcbiAgICAgICAgZmV0Y2hfaW52b2ljZXM6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlKHMpIGZhY3R1cmUocyk6IHtlcnJ9JyxcbiAgICAgICAgZmV0Y2hfZXRhdHM6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXRhdHMgZGUgcGFpZW1lbnQ6IHtlcnJ9JyxcbiAgICAgICAgZmV0Y2hfdHlwZXM6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyB0eXBlcyBkZSBwYWllbWVudDoge2Vycn0nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxpYmVsbGVzOiB7XG4gICAgICBub19pbnZvaWNlOiAnQXVjdW5lIGZhY3R1cmUgYWZmZWN0w6llICEnLFxuICAgICAgbm9fb3B0aW9uX2ludm9pY2U6ICdBdWN1bmUgZmFjdHVyZS4nLFxuICAgICAgbm9fZXRhdDogJ0F1Y3VuIMOpdGF0IGRlIHBhaWVtZW50IGFmZmVjdMOpICEnLFxuICAgICAgbm9fb3B0aW9uX2V0YXQ6ICdBdWN1biDDqXRhdC4nLFxuICAgICAgbm9fdHlwZTogJ0F1Y3VuIHR5cGUgZGUgcGFpZW1lbnQgYWZmZWN0w6kgIScsXG4gICAgICBub19vcHRpb25fdHlwZTogJ0F1Y3VuIHR5cGUuJyxcbiAgICAgIHR5cGVzOiB7XG4gICAgICAgIGNiOiAnQ2FydGUgYmxldWUnLFxuICAgICAgICBlc3A6ICdFc3DDqGNlJyxcbiAgICAgICAgY2hxOiAnQ2jDqHF1ZScsXG4gICAgICB9LFxuICAgICAgZXRhdHM6IHtcbiAgICAgICAgcGFpZDogJ1BhecOpJyxcbiAgICAgICAgbm90X3BhaWQ6ICdOb24gcGF5w6knLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBpbnZvaWNlc0NvbXBvbmVudDoge1xuICAgIHRhYmxlVGl0bGU6ICdGYWN0dXJlcycsXG4gICAgaGVhZFRhYmxlOiB7XG4gICAgICBkYXRlOiAnRGF0ZSBkZSBsYSBmYWN0dXJlJyxcbiAgICAgIGludm9pY2VIVFByaWNlOiAnUHJpeCBIb3JzIFRheGVzJyxcbiAgICAgIGludm9pY2VUVFByaWNlOiAnUHJpeCBUb3V0ZXMgVGF4ZXMgQ29tcHJpc2VzJyxcbiAgICAgIGxhbmd1YWdlOiAnTGFuZ3VlIGRlIGxhIGZhY3R1cmUnLFxuICAgICAgZGV2aXNlOiAnRGV2aXNlIGRlIGxhIGZhY3R1cmUnLFxuICAgICAgdHZhOiAnVFZBIGRlIGxhIGZhY3R1cmUnLFxuICAgICAgYnV5ZXI6ICdBY2hldGV1cicsXG4gICAgICBzZWxsZXI6ICdWZW5kZXVyJyxcbiAgICAgIGNvbW1hbmRlOiAnQ29tbWFuZGUocyknLFxuICAgICAgcGF5bWVudDogJ1BhaWVtZW50KHMpJyxcbiAgICB9LFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBkYXRlOiAnRGF0ZScsXG4gICAgICBpbnZvaWNlSFRQcmljZTogJ1ByaXgnLFxuICAgICAgaW52b2ljZVRUUHJpY2U6ICdQcml4ICsgVGF4ZXMnLFxuICAgICAgbGFuZ3VhZ2U6ICdMYW5ndWUnLFxuICAgICAgZGV2aXNlOiAnRGV2aXNlJyxcbiAgICAgIHR2YTogJ1RWQScsXG4gICAgICBidXllcjogJ0FjaGV0ZXVyJyxcbiAgICAgIHNlbGxlcjogJ1ZlbmRldXInLFxuICAgICAgY29tbWFuZGU6ICdDb21tYW5kZXMnLFxuICAgICAgcGF5bWVudDogJ1BhaWVtZW50cycsXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlcnM6IHtcbiAgICAgIGRhdGU6ICdEYXRlJyxcbiAgICAgIGludm9pY2VIVFByaWNlOiAnUHJpeCcsXG4gICAgICBpbnZvaWNlVFRQcmljZTogJ1ByaXggKyBUYXhlcycsXG4gICAgICBsYW5ndWFnZTogJ0xhbmd1ZXMnLFxuICAgICAgZGV2aXNlOiAnRGV2aXNlcycsXG4gICAgICB0dmE6ICdUVkEnLFxuICAgICAgYnV5ZXI6ICdBY2hldGV1cnMnLFxuICAgICAgc2VsbGVyOiAnVmVuZGV1cnMnLFxuICAgICAgY29tbWFuZGU6ICdDb21tYW5kZXMnLFxuICAgICAgcGF5bWVudDogJ1BhaWVtZW50cycsXG4gICAgfSxcbiAgICBoaW50czoge1xuICAgICAgZGF0ZTogJ0xhIGRhdGUgZG9pdCDDqnRyZSBzdXDDqXJpZXVyZSBvdSDDqWdhbGUgw6AgbGEgZGF0ZSBjb3VydGFudGUgIScsXG4gICAgICBpbnZvaWNlSFRQcmljZTogJ0xlIHByaXggZG9pdCDDqnRyZSBpbmbDqXJpZXVyIG91IMOpZ2FsZSBhdSBwcml4IHRvdGFsIGhvcnMgdGF4ZXMgZGVzIGNvbW1hbmRlcyAhJyxcbiAgICAgIGludm9pY2VUVFByaWNlOiAnUHJpeCArIFRheGVzIGRvaXQgw6p0cmUgaW5mw6lyaWV1ciBvdSDDqWdhbGUgYXUgcHJpeCB0b3RhbCBpbmNsdWFudCBsZXMgdGF4ZXMgZGVzIGNvbW1hbmRlcyAhJyxcbiAgICAgIGxhbmd1YWdlOiAnQ2hhbXAgbGFuZ3VlIGRlIGxhIGZhY3R1cmUgb2JsaWdhdG9pcmUgIScsXG4gICAgICBkZXZpc2U6ICdDaGFtcCBkZXZpc2UgZGUgbGEgZmFjdHVyZSBlc3Qgb2JsaWdhdG9pcmUgIScsXG4gICAgICB0dmE6ICdMYSBUVkEgZG9pdCDDqnRyZSBjb21wcmlzZSBlbnRyZSAwIGV0IDEgIScsXG4gICAgICBidXllcjogJ0NoYW1wIGFjaGV0ZXVyIG9ibGlnYXRvaXJlICEnLFxuICAgICAgc2VsbGVyOiAnQ2hhbXAgdmVuZGV1ciBvYmxpZ2F0b2lyZSAhJyxcbiAgICAgIGNvbW1hbmRlOiAnQ2hhbXAgY29tbWFuZGUgb2JsaWdhdG9pcmUgIScsXG4gICAgICBwYXltZW50OiAnQ2hhbXAgcGFpZW1lbnQgb3B0aW9ubmVsLCBjZXBlbmRhbnQgc2kgcmVuc2VpZ27DqSBzYSB2YWxldXIgbmUgcGV1dCDDqnRyZSBzdXDDqXJpZXVyZSBhdSBwcml4IGRlIGxhIGZhY3R1cmUgIScsXG4gICAgfSxcbiAgICBlcnJvcnM6IHtcbiAgICAgIGVtcHR5OiB7XG4gICAgICAgIHRhYmxlQm9keUNvbnRlbnRUZXh0OiAnT3Vwcy4uLiBBdWN1bmUgZmFjdHVyZS4nLFxuICAgICAgICBkYXRlOiAnRGF0ZSBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGludm9pY2VIVFByaWNlOiAnUHJpeCBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGludm9pY2VUVFByaWNlOiAnUHJpeCArIFRheGVzIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgbGFuZ3VhZ2U6ICdMYW5ndWUgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBkZXZpc2U6ICdEZXZpc2UgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICB0dmE6ICdUVkEgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBidXllcjogJ0FjaGV0ZXVyIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgc2VsbGVyOiAnVmVuZGV1ciBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGNvbW1hbmRlOiAnQ29tbWFuZGVzIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgcGF5bWVudDogJ1BhaWVtZW50cyBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGJ1dHRvblVwZGF0aW5nOiAnTWV0dHJlIMOgIGpvdXIgbGEgZmFjdHVyZScsXG4gICAgICAgIGJ1dHRvbkFkZGluZzogJ0Fqb3V0ZXIgdW5lIG5vdXZlbGxlIGZhY3R1cmUnLFxuICAgICAgfSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGRhdGU6ICdEYXRlIGluY29ycmVjdGUgIScsXG4gICAgICAgIGludm9pY2VIVFByaWNlOiAnUHJpeCBIVCBpbmNvcnJlY3QgIScsXG4gICAgICAgIGludm9pY2VUVFByaWNlOiAnUHJpeCBUVEMgaW5jb3JyZWN0ICEnLFxuICAgICAgICBsYW5ndWFnZTogJ0xhbmd1ZSBpbmNvcnJlY3RlICEnLFxuICAgICAgICBkZXZpc2U6ICdEZXZpc2UgaW5jb3JyZWN0ZSAhJyxcbiAgICAgICAgdHZhOiAnVFZBIGluY29ycmVjdGUgIScsXG4gICAgICAgIGJ1eWVyOiAnQWNoZXRldXIgaW5jb3JyZWN0ICEnLFxuICAgICAgICBzZWxsZXI6ICdWZW5kZXVyIGluY29ycmVjdCAhJyxcbiAgICAgICAgY29tbWFuZGU6ICdDb21tYW5kZXMgaW5jb3JyZWN0ZXMgIScsXG4gICAgICAgIHBheW1lbnQ6ICdQYWllbWVudHMgaW5jb3JyZWN0cyAhJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICByZXN1bHRzOiB7XG4gICAgICBvazoge1xuICAgICAgICBhZGQ6ICdGYWN0dXJlIGFqb3V0w6llIGF2ZWMgc3VjY8OocyAhJyxcbiAgICAgICAgdXBkYXRlOiAnRmFjdHVyZSBtaXMgw6Agam91ciBhdmVjIHN1Y2PDqHMgIScsXG4gICAgICAgIGRlbGV0ZTogJ0ZhY3R1cmUgc3VwcHJpbcOpZSBhdmVjIHN1Y2PDqHMgIScsXG4gICAgICB9LFxuICAgICAga286IHtcbiAgICAgICAgYWRkOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsXFwnYWpvdXQgZGUgbGEgZmFjdHVyZToge2Vycn0nLFxuICAgICAgICB1cGRhdGU6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIG1pc2Ugw6Agam91ciBkZSBsYSBmYWN0dXJlOiB7ZXJyfScsXG4gICAgICAgIGRlbGV0ZTogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGUgbGEgZmFjdHVyZToge2Vycn0nLFxuICAgICAgICBmZXRjaF9sYW5ndWFnZXM6IHtcbiAgICAgICAgICBlbXB0eTogJ0F1Y3VuIGxhbmdhZ2UgdHJvdXbDqSAhJyxcbiAgICAgICAgICBlcnJvcjogJ1LDqWN1cMOpcmF0aW9uIGRlcHVpcyBsYSB0YWJsZSBcXCdMYW5nYWdlXFwnIFNRTGl0ZSAhJyxcbiAgICAgICAgICBsaW5rZWRfZW1wdHk6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBsYW5ndWVzOiBAOmludm9pY2VzQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfbGFuZ3VhZ2VzLmVtcHR5JyxcbiAgICAgICAgICBsaW5rZWRfZXJyb3I6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBsYW5ndWVzOiBAOmludm9pY2VzQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfbGFuZ3VhZ2VzLmVycm9yIHtlcnJ9JyxcbiAgICAgICAgfSxcbiAgICAgICAgZmV0Y2hfZGV2aXNlczoge1xuICAgICAgICAgIGVtcHR5OiAnQXVjdW5lIGRldmlzZSB0cm91dsOpZSAhJyxcbiAgICAgICAgICBlcnJvcjogJ1LDqWN1cMOpcmF0aW9uIGRlcHVpcyBsYSB0YWJsZSBcXCdEZXZpc2VcXCcgU1FMaXRlICEnLFxuICAgICAgICAgIGxpbmtlZF9lbXB0eTogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGRldmlzZXM6IEA6aW52b2ljZXNDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9kZXZpc2VzLmVtcHR5JyxcbiAgICAgICAgICBsaW5rZWRfZXJyb3I6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBkZXZpc2VzOiBAOmludm9pY2VzQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfZGV2aXNlcy5lcnJvciB7ZXJyfScsXG4gICAgICAgIH0sXG4gICAgICAgIGZldGNoX2J1eWVyczoge1xuICAgICAgICAgIGVtcHR5OiAnQXVjdW4gYWNoZXRldXIgdHJvdXbDqSAhJyxcbiAgICAgICAgICBlcnJvcjogJ1LDqWN1cMOpcmF0aW9uIGRlcHVpcyBsYSB0YWJsZSBcXCdQZXJzb25uZVxcJyBTUUxpdGUgIScsXG4gICAgICAgICAgbGlua2VkX2VtcHR5OiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZShzKSBhY2hldGV1cihzKTogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX2J1eWVycy5lbXB0eScsXG4gICAgICAgICAgbGlua2VkX2Vycm9yOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZShzKSBhY2hldGV1cihzKTogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX2J1eWVycy5lcnJvciB7ZXJyfScsXG4gICAgICAgIH0sXG4gICAgICAgIGZldGNoX3NlbGxlcnM6IHtcbiAgICAgICAgICBlbXB0eTogJ0F1Y3VuIHZlbmRldXIgdHJvdXbDqSAhJyxcbiAgICAgICAgICBlcnJvcjogJ1LDqWN1cMOpcmF0aW9uIGRlcHVpcyBsYSB0YWJsZSBcXCdQZXJzb25uZVxcJyBTUUxpdGUgIScsXG4gICAgICAgICAgbGlua2VkX2VtcHR5OiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZShzKSB2ZW5kZXVyKHMpOiBAOmludm9pY2VzQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfc2VsbGVycy5lbXB0eScsXG4gICAgICAgICAgbGlua2VkX2Vycm9yOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZShzKSB2ZW5kZXVyKHMpOiBAOmludm9pY2VzQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfc2VsbGVycy5lcnJvciB7ZXJyfScsXG4gICAgICAgIH0sXG4gICAgICAgIGZldGNoX29yZGVyczoge1xuICAgICAgICAgIGVtcHR5OiAnQXVjdW5lIGNvbW1hbmRlIHRyb3V2w6llICEnLFxuICAgICAgICAgIGVycm9yOiAnUsOpY3Vww6lyYXRpb24gZGVwdWlzIGxhIHRhYmxlIFxcJ0NvbW1hbmRlXFwnIFNRTGl0ZSAhJyxcbiAgICAgICAgICBsaW5rZWRfZW1wdHk6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlKHMpIGNvbW1hbmRlKHMpOiBAOmludm9pY2VzQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfb3JkZXJzLmVtcHR5JyxcbiAgICAgICAgICBsaW5rZWRfZXJyb3I6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlKHMpIGNvbW1hbmRlKHMpOiBAOmludm9pY2VzQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfb3JkZXJzLmVycm9yIHtlcnJ9JyxcbiAgICAgICAgfSxcbiAgICAgICAgZmV0Y2hfcGF5bWVudHM6IHtcbiAgICAgICAgICBlbXB0eTogJ0F1Y3VuIHBhaWVtZW50IHRyb3V2w6kgIScsXG4gICAgICAgICAgZXJyb3I6ICdSw6ljdXDDqXJhdGlvbiBkZXB1aXMgbGEgdGFibGUgXFwnUGFpZW1lbnRcXCcgU1FMaXRlICEnLFxuICAgICAgICAgIGxpbmtlZF9lbXB0eTogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGUocykgcGFpZW1lbnQocyk6IEA6aW52b2ljZXNDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9wYXltZW50cy5lbXB0eScsXG4gICAgICAgICAgbGlua2VkX2Vycm9yOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZShzKSBwYWllbWVudChzKTogQDppbnZvaWNlc0NvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX3BheW1lbnRzLmVycm9yIHtlcnJ9JyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsaWJlbGxlczoge1xuICAgICAgbm9fb3JkZXI6ICdBdWN1bmUgY29tbWFuZGUgYWZmZWN0w6llICEnLFxuICAgICAgbm9fb3B0aW9uX29yZGVyOiAnQXVjdW4gY29tbWFuZGUuJyxcbiAgICAgIG5vX3BheW1lbnQ6ICdBdWN1biBwYWllbWVudCBhZmZlY3TDqSAhJyxcbiAgICAgIG5vX29wdGlvbl9wYXltZW50OiAnQXVjdW4gcGFpZW1lbnQuJyxcbiAgICAgIG5vX2xhbmd1YWdlOiAnQXVjdW5lIGxhbmd1ZSBhZmZlY3TDqWUgIScsXG4gICAgICBub19vcHRpb25fbGFuZ3VhZ2U6ICdBdWN1bmUgbGFuZ3VlLicsXG4gICAgICBub19kZXZpc2U6ICdBdWN1bmUgZGV2aXNlIGFmZmVjdMOpZSAhJyxcbiAgICAgIG5vX29wdGlvbl9kZXZpc2U6ICdBdWN1biBkZXZpc2UuJyxcbiAgICAgIG5vX2J1eWVyOiAnQXVjdW4gYWNoZXRldXIgYWZmZWN0w6kgIScsXG4gICAgICBub19vcHRpb25fYnV5ZXI6ICdBdWN1biBhY2hldGV1ci4nLFxuICAgICAgbm9fc2VsbGVyOiAnQXVjdW4gdmVuZGV1ciBhZmZlY3TDqSAhJyxcbiAgICAgIG5vX29wdGlvbl9zZWxsZXI6ICdBdWN1biB2ZW5kZXVyLicsXG4gICAgICBub19kYXRlOiAnQXVjdW5lIGRhdGUgYWZmZWN0w6llICEnLFxuICAgIH0sXG4gIH0sXG4gIHByb2ZpbGVDb21wb25lbnQ6IHtcbiAgICB0aXRsZXM6IHtcbiAgICAgIHVwZGF0ZTogJ01pc2Ugw6Agam91ciBkdSBwcm9maWwnLFxuICAgICAgcmVnaXN0ZXI6ICdGb3JtdWxhaXJlIGRcXCdpbnNjcmlwdGlvbicsXG4gICAgfSwgIFxuICAgIGlucHV0TGFiZWxzOiB7XG4gICAgICBmaXJzdE5hbWU6ICdQcsOpbm9tJyxcbiAgICAgIGxhc3ROYW1lOiAnTm9tJyxcbiAgICAgIGxvZ2luOiAnTG9naW4nLFxuICAgICAgZW1haWw6ICdFbWFpbCcsXG4gICAgICBjb25maXJtRW1haWw6ICdDb25maXJtYXRpb24gZGUgbFxcJ2VtYWlsJyxcbiAgICAgIHBhc3M6ICdNb3QgZGUgcGFzc2UnLFxuICAgICAgY29uZmlybVBhc3M6ICdDb25maXJtYXRpb24gZHUgbW90IGRlIHBhc3NlJyxcbiAgICAgIGNvbXBhbnlOYW1lOiAnTm9tIGRlIGxcXCdlbnRyZXByaXNlJyxcbiAgICAgIGNvbXBhbnlMb2dvOiAnTG9nbyBkZSBsXFwnZW50cmVwcmlzZSAodW5pcXVlbWVudCBhdSBmb3JtYXQgU1ZHKScsXG4gICAgICBkZXZpc2U6ICdEZXZpc2UnLFxuICAgICAgdXNlclR5cGU6ICdUeXBlJyxcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyczoge1xuICAgICAgZmlyc3ROYW1lOiAnUHLDqW5vbScsXG4gICAgICBsYXN0TmFtZTogJ05vbScsXG4gICAgICBsb2dpbjogJ0xvZ2luJyxcbiAgICAgIGVtYWlsOiAnRW1haWwnLFxuICAgICAgY29uZmlybUVtYWlsOiAnQ29uZmlybWF0aW9uIGRlIGxcXCdlbWFpbCcsXG4gICAgICBwYXNzOiAnTW90IGRlIHBhc3NlJyxcbiAgICAgIGNvbmZpcm1QYXNzOiAnQ29uZmlybWF0aW9uIGR1IG1vdCBkZSBwYXNzZScsXG4gICAgICBjb21wYW55TmFtZTogJ05vbSBkZSBsXFwnZW50cmVwcmlzZScsXG4gICAgICBjb21wYW55TG9nbzogJ0xvZ28gZGUgbFxcJ2VudHJlcHJpc2UnLFxuICAgICAgZGV2aXNlOiAnRGV2aXNlcycsXG4gICAgICB1c2VyVHlwZTogJ1R5cGVzJyxcbiAgICB9LFxuICAgIGhpbnRzOiB7XG4gICAgICBmaXJzdE5hbWU6ICdQcsOpbm9tIHJlcXVpcyAhJyxcbiAgICAgIGxhc3ROYW1lOiAnTm9tIHJlcXVpcyAhJyxcbiAgICAgIGxvZ2luOiAnTG9naW4gcmVxdWlzICEnLFxuICAgICAgZW1haWw6ICdFbWFpbCByZXF1aXMgIScsXG4gICAgICBjb25maXJtRW1haWw6ICdDb25maXJtYXRpb24gZGUgbFxcJ2VtYWlsIHJlcXVpcyAhJyxcbiAgICAgIHBhc3M6ICdNb3QgZGUgcGFzc2UgcmVxdWlzIGV0IGRvaXQgY29udGVuaXIgbWluaW11bSA4IGNhcmFjdMOocmVzLCBhdW1vaW5zIHVuZSBsZXR0cmUgbWFqdXNjdWxlLCB1bmUgbWludXNjdWxlLCB1biBjaGlmZnJlIGV0IHVuIGNhcmFjdMOocmUgc3DDqWNpYWwgIScsXG4gICAgICBjb25maXJtUGFzczogJ0NvbmZpcm1hdGlvbiBkdSBtb3QgZGUgcGFzc2UgcmVxdWlzICEnLFxuICAgICAgY29tcGFueU5hbWU6ICdOb20gZGUgbFxcJ2VudHJlcHJpc2UgcmVxdWlzICEnLFxuICAgICAgY29tcGFueUxvZ286ICdMb2dvIGRlIGxcXCdlbnRyZXByaXNlIG9wdGlvbm5lbCwgc2kgcmVuc2VpZ27DqSwgbGUgZmljaGllciBmb3VybmkgZG9pdCDDqnRyZSBkZSB0eXBlIFNWRyBkZSB0YWlsbGUgbWF4LiB7c2l6ZX0gYml0cyAhJyxcbiAgICAgIGRldmlzZTogJ0RldmlzZSByZXF1aXMgIScsXG4gICAgICB1c2VyVHlwZTogJ1R5cGUgcmVxdWlzICEnLFxuICAgIH0sXG4gICAgZXJyb3JzOiB7XG4gICAgICBlbXB0eToge1xuICAgICAgICBmaXJzdE5hbWU6ICdMZSBwcsOpbm9tIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgbGFzdE5hbWU6ICdMZSBub20gbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBsb2dpbjogJ0xlIGxvZ2luIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgZW1haWw6ICdMXFwnZW1haWwgbmUgcGV1dCDDqnRyZSB2aWRlICEnLFxuICAgICAgICBjb25maXJtRW1haWw6ICdMYSBjb25maXJtYXRpb24gZGUgbFxcJ2VtYWlsIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgcGFzczogJ0xlIG1vdCBkZSBwYXNzZSBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGNvbmZpcm1QYXNzOiAnTGEgY29uZmlybWF0aW9uIGR1IG1vdCBkZSBwYXNzZSBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICAgIGNvbXBhbnlOYW1lOiAnTGUgbm9tIGRlIGxcXCdlbnRyZXByaXNlIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgY29tcGFueUxvZ286ICdMZSBsb2dvIGRlIGxcXCdlbnRyZXByaXNlIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgZGV2aXNlOiAnTGEgZGV2aXNlIGRlIHLDqWbDqXJlbmNlIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgdXNlclR5cGU6ICdMZSB0eXBlIGRlIGxcXCd1dGlsaXNhdGV1ciBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICB9LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgZmlyc3ROYW1lOiAnUHLDqW5vbSBpbmNvcnJlY3QgIScsXG4gICAgICAgIGxhc3ROYW1lOiAnTm9tIGluY29ycmVjdCAhJyxcbiAgICAgICAgbG9naW46ICdMb2dpbiBpbmNvcnJlY3QgIScsXG4gICAgICAgIGVtYWlsOiAnRW1haWwgaW5jb3JyZWN0ICEnLFxuICAgICAgICBjb25maXJtRW1haWw6ICdDb25maXJtYXRpb24gZGUgbFxcJ2VtYWlsIGluY29ycmVjdGUgIScsXG4gICAgICAgIGVtYWlsQnVzeTogJ0VtYWlsIGTDqWphIHByaXMgIScsXG4gICAgICAgIGVtYWlsTWlzc21hdGNoOiAnTFxcJ2VtYWlsIGV0IGxhIGNvbmZpcm1hdGlvbiBuZSBjb3JyZXNwb25kZW50IHBhcyAhJyxcbiAgICAgICAgcGFzczogJ01vdCBkZSBwYXNzZSBpbmNvcnJlY3QgIScsXG4gICAgICAgIGNvbmZpcm1QYXNzOiAnQ29uZmlybWF0aW9uIGR1IG1vdCBkZSBwYXNzZSBpbmNvcnJlY3RlICEnLFxuICAgICAgICBwYXNzTWlzc21hdGNoOiAnTGUgbW90IGRlIHBhc3NlIGV0IGxhIGNvbmZpcm1hdGlvbiBuZSBjb3JyZXNwb25kZW50IHBhcyAhJyxcbiAgICAgICAgY29tcGFueU5hbWU6ICdOb20gZGUgbFxcJ2VudHJlcHJpc2UgaW5jb3JyZWN0ICEnLFxuICAgICAgICBjb21wYW55TG9nbzoge1xuICAgICAgICAgIGFjY2VwdDogJ01hdXZhaXNlIGltYWdlIGZvdXJuaWUsIGF0dGVuZHUgKC5zdmcpIHJlw6d1ICh7ZXh0fSkgIScsXG4gICAgICAgICAgbWF4RmlsZVNpemU6ICdGaWNoaWVyIGRlIHRhaWxsZSBzdXDDqXJpZXVyZSDDoCBsYSB0YWlsbGUgbWF4LiwgYXR0ZW5kdSAoPHttYXh9KSByZcOndSAoe3NpemV9KSAhJyxcbiAgICAgICAgfSxcbiAgICAgICAgZGV2aXNlOiAnRGV2aXNlIGluY29ycmVjdGUgIScsXG4gICAgICAgIHVzZXJUeXBlOiAnVHlwZSBpbmNvcnJlY3QgIScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGliZWxsZXM6IHtcbiAgICAgIG5vX2RldmlzZTogJ0F1Y3VuZSBkZXZpc2UgYWZmZWN0w6llICEnLFxuICAgICAgbm9fb3B0aW9uX2RldmlzZTogJ0F1Y3VuZSBkZXZpc2UuJyxcbiAgICAgIG5vX3R5cGU6ICdBdWN1biBwYWllbWVudCBhZmZlY3TDqSAhJyxcbiAgICAgIG5vX29wdGlvbl90eXBlOiAnQXVjdW4gcGFpZW1lbnQuJyxcbiAgICAgIHVwZGF0ZUJ1dHRvbjogJ1NvdW1ldHRyZScsXG4gICAgICByZXNldEJ1dHRvbjogJ1JlbWlzZSDDoCB6w6lybycsXG4gICAgICB0eXBlczoge1xuICAgICAgICByZWd1bGFyOiAnTWFuYWdldXInLFxuICAgICAgICBhZG1pbjogJ0FkbWluaXN0cmF0ZXVyJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICByZXN1bHRzOiB7XG4gICAgICBvazoge1xuICAgICAgICBhZGQ6ICdQcm9maWwgY3LDqcOpIGF2ZWMgc3VjY8OocyAhJyxcbiAgICAgICAgdXBkYXRlOiAnUHJvZmlsIG1pcyDDoCBqb3VyIGF2ZWMgc3VjY8OocyAhJyxcbiAgICAgICAgZGVsZXRlOiAnUHJvZmlsIHN1cHByaW3DqSBhdmVjIHN1Y2PDqHMgIScsXG4gICAgICB9LFxuICAgICAga286IHtcbiAgICAgICAgYWRkOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsXFwnYWpvdXQgZGUgbFxcJ3V0aWxpc2F0ZXVyOiB7ZXJyfScsXG4gICAgICAgIHVwZGF0ZTogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgbWlzZSDDoCBqb3VyIGRlIGxcXCd1dGlsaXNhdGV1cjoge2Vycn0nLFxuICAgICAgICBkZWxldGU6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGRlIGxcXCd1dGlsaXNhdGV1cjoge2Vycn0nLFxuICAgICAgICBmZXRjaF91c2VyOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYXLDqWN1cMOpcmF0aW9uIGRlcyBpbmZvcm1hdGlvbnMgZGUgbFxcJ3V0aWxpc2F0ZXVyOiB7ZXJyfScsXG4gICAgICAgIGZldGNoX3VzZXJUeXBlczoge1xuICAgICAgICAgIGVtcHR5OiAnQXVjdW4gdHlwZSBkXFwndXRpbGlzYXRldXIgdHJvdXbDqSAhJyxcbiAgICAgICAgICBlcnJvcjogJ1LDqWN1cMOpcmF0aW9uIGRlcHVpcyBsYSB0YWJsZSBcXCd1c2VyX3R5cGVcXCcgU1FsaXRlICEnLFxuICAgICAgICAgIGxpbmtlZF9lbXB0eTogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHR5cGVzIGRcXCd1dGlsaXNhdGV1cjogQDpwcm9maWxlQ29tcG9uZW50LnJlc3VsdHMua28uZmV0Y2hfdXNlclR5cGVzLmVtcHR5JyxcbiAgICAgICAgICBsaW5rZWRfZXJyb3I6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyB0eXBlcyBkXFwndXRpbGlzYXRldXI6IEA6cHJvZmlsZUNvbXBvbmVudC5yZXN1bHRzLmtvLmZldGNoX3VzZXJUeXBlcy5lcnJvciB7ZXJyfScsXG4gICAgICAgIH0sXG4gICAgICAgIHVwbG9hZDogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbFxcJ3Vwb2FkIGR1IGZpY2hpZXIgZGUgbG9nbyBkZSBsXFwnZW50cmVwcmlzZToge2Vycn0nLFxuICAgICAgICBjaGVja0VtYWlsOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSB2w6lyaWZpY2F0aW9uIGRlIGxhIGRpc3BvbmliaWxpdMOpIGRlIGxcXCdlbWFpbDoge2Vycn0nXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIGV4cG9ydHNDb21wb25lbnQ6IHtcbiAgICB0YWJsZVRpdGxlOiAnRXhwb3J0JyxcbiAgICByZXN1bHRzOiB7XG4gICAgICBrbzoge1xuICAgICAgICBmZXRjaF9pbnZvaWNlczoge1xuICAgICAgICAgIGVycm9yOiAnUsOpY3Vww6lyYXRpb24gZGVwdWlzIGxhIHRhYmxlIFxcJ0ZhY3R1cmVcXCcgU1FMaXRlICEnLFxuICAgICAgICAgIGxpbmtlZF9lcnJvcjogJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGUocykgZmFjdHVyZShzKTogQDpleHBvcnRDb21wb25lbnQucmVzdWx0cy5rby5mZXRjaF9pbnZvaWNlcy5lcnJvciB7ZXJyfSdcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsaWJlbGxlczoge1xuICAgICAgaW52b2ljZTogJ0ZhY3R1cmUnLFxuICAgICAgYmlsbGluZ0FkZHJlc3NMaWJlbGxlOiAnQWRyZXNzZSBkZSBmYWN0dXJhdGlvbjonLFxuICAgICAgYWRkQ29udGVudExpYmVsbGU6ICdDb250ZW51IGFkZGl0aW9ubmVsIDonLFxuICAgICAgYnV5ZXJMaWJlbGxlOiAnQWNoZXRldXIgOicsXG4gICAgICBzZWxsZXJMaWJlbGxlOiAnVmVuZGV1ciA6JyxcbiAgICAgIGRhdGVMaWJlbGxlOiAnRGF0ZSA6JyxcbiAgICAgIG9yZGVyTnVtYmVyTGliZWxsZTogJ0NvbW1hbmRlIE4jJyxcbiAgICAgIGRlc2NyaXB0aW9uTGliZWxsZTogJ0Rlc2NyaXB0aW9uJyxcbiAgICAgIHNlcnZpY2VOdW1iZXJMaWJlbGxlOiAnQ29kZSBTZXJ2aWNlJyxcbiAgICAgIHR0VW5pdFByaWNlTGliZWxsZTogJ01vbnRhbnQgdW5pdGFpcmUgVFRDJyxcbiAgICAgIHF1YW50aXR5TGliZWxsZTogJ1F1YW50aXTDqScsXG4gICAgICB0dE5ldFByaWNlTGliZWxsZTogJ1ByaXggbmV0IFRUQycsXG4gICAgICB0dE92ZXJhbGxBbW91bnRMaWJlbGxlOiAnTW9udGFudCBUVEMnLFxuICAgICAgdG90YWxMaWJlbGxlOiAnVG90YWwnLFxuICAgICAgdmF0TGliZWxsZTogJ1RWQScsXG4gICAgICB2YXRCYXNlTGliZWxsZTogJ0Jhc2UgVFZBJyxcbiAgICAgIHZhdEFtb3VudExpYmVsbGU6ICdNb250YW50IFRWQScsXG4gICAgICB0dFRvdGFsTGliZWxsZTogJ1RvdGFsIFRUQycsXG4gICAgfSxcbiAgfSxcbiAgaG9tZUNvbXBvbmVudDoge1xuICAgIGhlYWRUYWJsZToge1xuICAgICAgdG90YWxGaXNjYWxZZWFySFRJbmNvbWVzOiAnVG90YWwgZGUgcmV2ZW51cyBIVCBzdXIgbFxcJ2FubsOpZSBmaXNjYWxlJyxcbiAgICAgIHRvdGFsRmlzY2FsWWVhclRUSW5jb21lczogJ1RvdGFsIGRlIHJldmVudXMgVFRDIHN1ciBsXFwnYW5uw6llIGZpc2NhbGUnLFxuICAgICAgdG90YWxGaXNjYWxZZWFyUGF5bWVudHNJbmNvbWVzOiAnRW5jYWlzc2VtZW50cyBzdXIgbFxcJ2FubsOpZSBmaXNjYWxlJyxcbiAgICAgIHRvdGFsRmlzY2FsWWVhclBheW1lbnRzT3ZlcmR1ZTogJ0ltcGF5w6lzIHN1ciBsXFwnYW5uw6llIGZpc2NhbGUnLFxuICAgIH0sXG4gICAgbGFiZWxzOiB7XG4gICAgICBzZXJ2aWNlc0xhYmVsOiAnU2VydmljZShzKScsXG4gICAgICBpbnZvaWNlc0xhYmVsOiAnRmFjdHVyZShzKScsXG4gICAgICBvcmRlcnNMYWJlbDogJ0NvbW1hbmRlKHMpJyxcbiAgICAgIGFjdG9yc0xhYmVsOiAnQWN0ZXVyKHMpJyxcbiAgICB9LFxuICAgIGJhckNoYXJ0OiB7XG4gICAgICBqdW5lTGFiZWw6ICdKdWluJyxcbiAgICAgIGp1bHlMYWJlbDogJ0p1aWxsZXQnLFxuICAgICAgYXVndXN0TGFiZWw6ICdBb8O7dCcsXG4gICAgICBzZXB0ZW1iZXJMYWJlbDogJ1NlcHRlbWJyZScsXG4gICAgICBvY3RvYmVyTGFiZWw6ICdPY3RvYnJlJyxcbiAgICAgIG5vdmVtYmVyTGFiZWw6ICdOb3ZlbWJyZScsXG4gICAgICBkZWNlbWJlckxhYmVsOiAnRGVjZW1icmUnLFxuICAgICAgamFudWFyeUxhYmVsOiAnSmFudmllcicsXG4gICAgICBmZWJydWFyeUxhYmVsOiAnRsOpdnJpZXInLFxuICAgICAgbWFyY2hMYWJlbDogJ01hcnMnLFxuICAgICAgYXByaWxMYWJlbDogJ0F2cmlsJyxcbiAgICAgIG1heUxhYmVsOiAnTWFpJyxcbiAgICAgIGRhdGFzZXRMYWJlbDogJ05vbWJyZSBkZSBmYWN0dXJlKHMpJyxcbiAgICAgIGhlYWRpbmc6ICdSw6lwYXJ0aXRpb24gZGUgZmFjdHVyZXMgc3VyIGxcXCdhbm7DqWUgZmlzY2FsZScsXG4gICAgfSxcbiAgICBwaWVDaGFydDoge1xuICAgICAgY2JMYWJlbDogJ0NhcnRlIGJsZXVlJyxcbiAgICAgIGNhc2hMYWJlbDogJ0VzcMOoY2UnLFxuICAgICAgY2hxTGFiZWw6ICdDaMOocXVlJyxcbiAgICAgIGhlYWRpbmc6ICdSw6lwYXJ0aXRpb24gZHUgdHlwZSBkZSBwYWllbWVudCByZcOndSBzdXIgbFxcJ2FubsOpZSBmaXNjYWxlJyxcbiAgICB9LFxuICAgIGhvbWVUYWJsZToge1xuICAgICAgaGVhZGluZzogJ1N0YXRpc3RpcXVlcyBkZSBsXFwnYW5uw6llIGZpc2NhbGUnLFxuICAgIH0sXG4gICAgcmVzdWx0czoge1xuICAgICAga286IHtcbiAgICAgICAgZmV0Y2hfc3RhdHM6ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBzdGF0aXN0aXF1ZXM6IHtlcnJ9JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgc3RhcnRDb21wb25lbnQ6IHtcbiAgICB0aXRsZTogJ1NlIGNvbm5lY3RlcicsXG4gICAgaW5wdXRMYWJlbHM6IHtcbiAgICAgIGxvZ2luOiAnTG9naW4gb3UgZW1haWwnLFxuICAgICAgcGFzczogJ01vdCBkZSBwYXNzZSdcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyczoge1xuICAgICAgbG9naW46ICdMb2dpbi9lbWFpbCcsXG4gICAgICBwYXNzOiAnTW90IGRlIHBhc3NlJyxcbiAgICB9LFxuICAgIGhpbnRzOiB7XG4gICAgICBsb2dpbjogJ0xvZ2luIG91IGVtYWlsIHV0aWxpc8OpIGxvcnMgZGUgbFxcJ2luc2NyaXB0aW9uIGVzdCBvYmxpZ2F0b2lyZSAhJyxcbiAgICAgIHBhc3M6ICdNb3QgZGUgcGFzc2UgdXRpbGlzw6kgbG9ycyBkZSBsXFwnaW5zY3JpcHRpb24gZXN0IG9ibGlnYXRvaXJlICEnLFxuICAgIH0sXG4gICAgZXJyb3JzOiB7XG4gICAgICBlbXB0eToge1xuICAgICAgICBsb2dpbjogJ0xvZ2luIG5lIHBldXQgw6p0cmUgdmlkZSAhJyxcbiAgICAgICAgcGFzczogJ0xlIG1vdCBkZSBwYXNzZSBuZSBwZXV0IMOqdHJlIHZpZGUgIScsXG4gICAgICB9LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgc2lnbkluOiAnTWF1dmFpc2UgY29tYmluYWlzb24gbG9naW4vZW1haWwsIG1vdCBkZSBwYXNzZSBmb3VybmllICEnLFxuICAgICAgfVxuICAgIH0sXG4gICAgcmVzdWx0czoge1xuICAgICAga286IHtcbiAgICAgICAgc2lnbkluOiAnRXJyZXVyIGxvcnMgZGUgbGEgY29ubmV4aW9uOiB7ZXJyfScsXG4gICAgICAgIHNlc3Npb246ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlIGxhIHNlc3Npb246IHtlcnJ9JyxcbiAgICAgIH1cbiAgICB9LFxuICAgIGxpYmVsbGVzOiB7XG4gICAgICBzaWduSW5CdXR0b246ICdTZSBjb25uZWN0ZXInLFxuICAgICAgcmVzZXRCdXR0b246ICdSZW1pc2Ugw6AgesOpcm8nLFxuICAgICAgc2lnblVwOiAnU1xcJ2luc2NyaXJlJyxcbiAgICAgIGxvZ291dDogJ1NlIGTDqWNvbm5lY3RlcicsXG4gICAgfSxcbiAgfSxcbiAgZXJyb3JOb3RGb3VuZENvbXBvbmVudDoge1xuICAgIHRleHQ6ICdPdXBzLiBWb3VzIHZvdXMgw6p0ZXMgcGVyZHUgPy4uLicsXG4gICAgYnV0dG9uVGV4dDogJ1JldG91ciDDoCBsXFwnYWNjdWVpbCcsXG4gIH0sXG4gIGZvcm1zOiB7XG4gICAgaGVhZFRhYmxlOiB7XG4gICAgICBhY3Rpb246ICdBY3Rpb25zJyxcbiAgICAgIGV4cG9ydDogJ0V4cG9ydGVyIGVuIGNzdidcbiAgICB9LFxuICAgIGVycm9yczoge1xuICAgICAgZW1wdHk6IHtcbiAgICAgICAgZmlsdGVyQm9keUNvbnRlbnRUZXh0OiAnT3Vwcy4uLiBMZSBmaWx0cmUgYXBwbGlxdcOpIG5lIHJldG91cm5lIGF1Y3VuIHLDqXN1bHRhdCcsXG4gICAgICB9LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgaW5wdXRzOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsYSB2YWxpZGF0aW9uIGR1IGZvcm11bGFpcmUsIHZlaWxsZXogw6AgdsOpcmlmaWVyIHF1ZSB0b3VzIGxlcyBjaGFtcHMgc29pZW50IHZhbGlkZXMgIScsXG4gICAgICAgIGV4cG9ydDogJ1ZvdHJlIG5hdmlnYXRldXIgYSByZWZ1c8OpIGxlIHTDqWzDqWNoYXJnZW1lbnQgZHUgZmljaGllci4uLicsXG4gICAgICAgIHNxbGl0ZURiOiAnSW1wb3NzaWJsZSBkXFwnb3V2cmlyIGxhIGJhc2UgZGUgZG9ubsOpZXMgU1FMaXRlICEnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFkZEJ1dHRvblRleHQ6ICdBam91dGVyJyxcbiAgICB1cGRhdGVCdXR0b25UZXh0OiAnTWV0dHJlIMOgIGpvdXInLFxuICAgIGRlbGV0ZUJ1dHRvblRleHQ6ICdTdXBwcmltZXInLFxuICAgIGV4cG9ydEJ1dHRvblRleHQ6ICdFeHBvcnRlcicsXG4gICAgdmFsaWQ6ICdPayAhJyxcbiAgfSxcbiAgc2Vzc2lvbjoge1xuICAgIHJlc3VsdHM6IHtcbiAgICAgIGtvOiAnVm90cmUgc2Vzc2lvbiBhIGV4cGlyw6llLCB2ZXVpbGxleiB2b3VzIHJlY29ubmVjdGVyICEnLFxuICAgIH1cbiAgfSxcbiAgZm9vdGVyOiB7XG4gICAgcGFyYWdyYXBoOiAnwqkyMDIzIEFkbWluaXN0csOpIHBhciBDcnlwdG9Mb2dpcXVlIC0gRW50cmVwcmlzZSBkZSBzZXJ2aWNlcyBkdSBudW3DqXJpcXVlIChFU04pJyxcbiAgfSxcbiAgbm9TY3JpcHQ6ICdDZXR0ZSBhcHBsaWNhdGlvbiBlc3QgYmFzw6llIHN1ciBsZSBqYXZhc2NyaXB0LiBKYXZhc2NyaXB0IGFjdHVlbGxlbWVudCBkw6lzYWN0aXbDqSBvdSBub24gc3VwcG9ydMOpICEnLFxufTsiLCJpbXBvcnQgZW5VUyBmcm9tICcuL2VuLVVTJztcbmltcG9ydCBmckZSIGZyb20gJy4vZnItRlInO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICdlbi1VUyc6IGVuVVMsXG4gICdmci1GUic6IGZyRlIsXG59O1xuIiwiaW1wb3J0IHsgYm9vdCB9IGZyb20gJ3F1YXNhci93cmFwcGVycyc7XG5pbXBvcnQgeyBjcmVhdGVJMThuIH0gZnJvbSAndnVlLWkxOG4nO1xuXG5pbXBvcnQgbWVzc2FnZXMgZnJvbSAnc3JjL2kxOG4nO1xuXG5leHBvcnQgdHlwZSBNZXNzYWdlTGFuZ3VhZ2VzID0ga2V5b2YgdHlwZW9mIG1lc3NhZ2VzO1xuLy8gVHlwZS1kZWZpbmUgJ2VuLVVTJyBhcyB0aGUgbWFzdGVyIHNjaGVtYSBmb3IgdGhlIHJlc291cmNlXG5leHBvcnQgdHlwZSBNZXNzYWdlU2NoZW1hID0gdHlwZW9mIG1lc3NhZ2VzWydlbi1VUyddO1xuY29uc3QgaTE4biA9IGNyZWF0ZUkxOG4oe1xuICBsb2NhbGU6ICdlbi1VUycsXG4gIGxlZ2FjeTogZmFsc2UsXG4gIGdsb2JhbEluamVjdGlvbjogdHJ1ZSxcbiAgbWVzc2FnZXMsXG59KTtcbi8vIFNlZSBodHRwczovL3Z1ZS1pMThuLmludGxpZnkuZGV2L2d1aWRlL2FkdmFuY2VkL3R5cGVzY3JpcHQuaHRtbCNnbG9iYWwtcmVzb3VyY2Utc2NoZW1hLXR5cGUtZGVmaW5pdGlvblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWludGVyZmFjZSAqL1xuZGVjbGFyZSBtb2R1bGUgJ3Z1ZS1pMThuJyB7XG4gIC8vIGRlZmluZSB0aGUgbG9jYWxlIG1lc3NhZ2VzIHNjaGVtYVxuICBleHBvcnQgaW50ZXJmYWNlIERlZmluZUxvY2FsZU1lc3NhZ2UgZXh0ZW5kcyBNZXNzYWdlU2NoZW1hIHt9XG5cbiAgLy8gZGVmaW5lIHRoZSBkYXRldGltZSBmb3JtYXQgc2NoZW1hXG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVmaW5lRGF0ZVRpbWVGb3JtYXQge31cblxuICAvLyBkZWZpbmUgdGhlIG51bWJlciBmb3JtYXQgc2NoZW1hXG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVmaW5lTnVtYmVyRm9ybWF0IHt9XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1pbnRlcmZhY2UgKi9cblxuZXhwb3J0IGRlZmF1bHQgYm9vdCgoeyBhcHAgfSkgPT4ge1xuICAvLyBTZXQgaTE4biBpbnN0YW5jZSBvbiBhcHBcbiAgYXBwLnVzZShpMThuKTtcbn0pO1xuXG5leHBvcnQgeyBpMThuIH07XG4iLCJpbXBvcnQgeyBSb3V0ZVJlY29yZFJhdyB9IGZyb20gJ3Z1ZS1yb3V0ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJ2FwcC9zcmMvYm9vdC9pMThuJztcbi8vIGltcG9ydCB7IHVwbG9hZCB9IGZyb20gJ2FwcC9zcmMvbWlkZGxld2FyZS9pbmRleCc7XG5cbi8vIGNvbnNvbGUubG9nKGkxOG4uZ2xvYmFsKTtcbmNvbnN0IHQgPSBpMThuLmdsb2JhbC50O1xuXG5jb25zdCByb3V0ZXM6IFJvdXRlUmVjb3JkUmF3W10gPSBbXG4gIHtcbiAgICBwYXRoOiAnJyxcbiAgICBuYW1lOiAnTWFpbicsXG4gICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ2xheW91dHMvTWFpbkxheW91dC52dWUnKSxcbiAgICBjaGlsZHJlbjogW1xuICAgICAgeyBcbiAgICAgICAgcGF0aDogdCgnaG9tZUxpbmtUYXJnZXQnKSxcbiAgICAgICAgbmFtZTogdCgnaG9tZUxpbmtOYW1lJyksXG4gICAgICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdwYWdlcy9JbmRleFBhZ2UudnVlJyksXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAvLyB0aXRsZTogdCgnaG9tZVRpdGxlJyksXG4gICAgICAgICAgcmVxdWlyZXNBdXRoOiB0cnVlLFxuICAgICAgICAgIHRpdGxlS2V5OiAnaG9tZVRpdGxlJyxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgXG4gICAgICAgIHBhdGg6IHQoJ2hvbWVCaXNMaW5rVGFyZ2V0JyksXG4gICAgICAgIG5hbWU6IHQoJ2hvbWVCaXNMaW5rTmFtZScpLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvSW5kZXhQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgLy8gdGl0bGU6IHQoJ2hvbWVUaXRsZScpLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSxcbiAgICAgICAgICB0aXRsZUtleTogJ2hvbWVUaXRsZScsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IFxuICAgICAgICBwYXRoOiB0KCdwcm9maWxlTGlua1RhcmdldCcpLFxuICAgICAgICBuYW1lOiB0KCdwcm9maWxlTGlua05hbWUnKSxcbiAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL1Byb2ZpbGVQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgLy8gdGl0bGU6IHQoJ3Byb2ZpbGVUaXRsZScpLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSxcbiAgICAgICAgICB0aXRsZUtleTogJ3Byb2ZpbGVUaXRsZScsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IFxuICAgICAgICBwYXRoOiB0KCdhYm91dExpbmtUYXJnZXQnKSxcbiAgICAgICAgbmFtZTogdCgnYWJvdXRMaW5rTmFtZScpLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvQWJvdXRQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgLy8gdGl0bGU6IHQoJ2Fib3V0VGl0bGUnKSxcbiAgICAgICAgICByZXF1aXJlc0F1dGg6IHRydWUsXG4gICAgICAgICAgdGl0bGVLZXk6ICdhYm91dFRpdGxlJyxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgXG4gICAgICAgIHBhdGg6IHQoJ3N0YXJ0TGlua1RhcmdldCcpLFxuICAgICAgICBuYW1lOiB0KCdzdGFydExpbmtOYW1lJyksXG4gICAgICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdwYWdlcy9TdGFydFBhZ2UudnVlJyksXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAvLyB0aXRsZTogdCgnc3RhcnRUaXRsZScpLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aDogZmFsc2UsXG4gICAgICAgICAgdGl0bGVLZXk6ICdzdGFydFRpdGxlJyxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgXG4gICAgICAgIHBhdGg6IHQoJ3NlcnZpY2VMaW5rVGFyZ2V0JyksXG4gICAgICAgIG5hbWU6IHQoJ3NlcnZpY2VMaW5rTmFtZScpLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvU2VydmljZVBhZ2UudnVlJyksXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAvLyB0aXRsZTogdCgnc2VydmljZVRpdGxlJyksXG4gICAgICAgICAgcmVxdWlyZXNBdXRoOiB0cnVlLFxuICAgICAgICAgIHRpdGxlS2V5OiAnc2VydmljZVRpdGxlJyxcbiAgICAgICAgfSxcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICBhZG1pbjogdHJ1ZSxcbiAgICAgICAgICBkaXNwbGF5OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBcbiAgICAgICAgcGF0aDogdCgnYWN0b3JMaW5rVGFyZ2V0JyksXG4gICAgICAgIG5hbWU6IHQoJ2FjdG9yTGlua05hbWUnKSxcbiAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL0FjdG9yUGFnZS52dWUnKSxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIC8vIHRpdGxlOiB0KCdhY3RvclRpdGxlJyksXG4gICAgICAgICAgcmVxdWlyZXNBdXRoOiB0cnVlLFxuICAgICAgICAgIHRpdGxlS2V5OiAnYWN0b3JUaXRsZScsXG4gICAgICAgIH0sXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgYWRtaW46IHRydWUsXG4gICAgICAgICAgZGlzcGxheTogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgXG4gICAgICAgIHBhdGg6IHQoJ29yZGVyTGlua1RhcmdldCcpLFxuICAgICAgICBuYW1lOiB0KCdvcmRlckxpbmtOYW1lJyksXG4gICAgICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdwYWdlcy9PcmRlclBhZ2UudnVlJyksXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAvLyB0aXRsZTogdCgnb3JkZXJUaXRsZScpLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSxcbiAgICAgICAgICB0aXRsZUtleTogJ29yZGVyVGl0bGUnLFxuICAgICAgICB9LFxuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIGFkbWluOiB0cnVlLFxuICAgICAgICAgIGRpc3BsYXk6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IFxuICAgICAgICBwYXRoOiB0KCdwYXltZW50TGlua1RhcmdldCcpLFxuICAgICAgICBuYW1lOiB0KCdwYXltZW50TGlua05hbWUnKSxcbiAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL1BheW1lbnRQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgLy8gdGl0bGU6IHQoJ3BheW1lbnRUaXRsZScpLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSxcbiAgICAgICAgICB0aXRsZUtleTogJ3BheW1lbnRUaXRsZScsXG4gICAgICAgIH0sXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgYWRtaW46IHRydWUsXG4gICAgICAgICAgZGlzcGxheTogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgXG4gICAgICAgIHBhdGg6IHQoJ2ludm9pY2VMaW5rVGFyZ2V0JyksXG4gICAgICAgIG5hbWU6IHQoJ2ludm9pY2VMaW5rTmFtZScpLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvSW52b2ljZVBhZ2UudnVlJyksXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAvLyB0aXRsZTogdCgnaW52b2ljZVRpdGxlJyksXG4gICAgICAgICAgcmVxdWlyZXNBdXRoOiB0cnVlLFxuICAgICAgICAgIHRpdGxlS2V5OiAnaW52b2ljZVRpdGxlJyxcbiAgICAgICAgfSxcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICBhZG1pbjogdHJ1ZSxcbiAgICAgICAgICBkaXNwbGF5OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBcbiAgICAgICAgcGF0aDogdCgnZXhwb3J0TGlua1RhcmdldCcpLFxuICAgICAgICBuYW1lOiB0KCdleHBvcnRMaW5rTmFtZScpLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvRXhwb3J0UGFnZS52dWUnKSxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIC8vIHRpdGxlOiB0KCdleHBvcnRUaXRsZScpLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSxcbiAgICAgICAgICB0aXRsZUtleTogJ2V4cG9ydFRpdGxlJyxcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwYXRoOiB0KCdwZGZMaW5rVGFyZ2V0JyksXG4gICAgICAgICAgICBuYW1lOiB0KCdwZGZMaW5rTmFtZScpLFxuICAgICAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ2NvbXBvbmVudHMvUGRmQ29tcG9uZW50LnZ1ZScpLFxuICAgICAgICAgICAgbWV0YToge1xuICAgICAgICAgICAgICAvLyB0aXRsZTogdCgncGRmVGl0bGUnKSxcbiAgICAgICAgICAgICAgcmVxdWlyZXNBdXRoOiB0cnVlLFxuICAgICAgICAgICAgICB0aXRsZUtleTogJ3BkZlRpdGxlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7IFxuICAgICAgICBwYXRoOiB0KCdzdGFydExpbmtUYXJnZXQnKSxcbiAgICAgICAgbmFtZTogdCgnc3RhcnRMaW5rTmFtZScpLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvU3RhcnRQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgLy8gdGl0bGU6IHQoJ3N0YXJ0VGl0bGUnKSxcbiAgICAgICAgICByZXF1aXJlc0F1dGg6IGZhbHNlLFxuICAgICAgICAgIHRpdGxlS2V5OiAnc3RhcnRUaXRsZScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyBcbiAgICAgICAgcGF0aDogdCgncmVnaXN0ZXJMaW5rVGFyZ2V0JyksXG4gICAgICAgIG5hbWU6IHQoJ3JlZ2lzdGVyTGlua05hbWUnKSxcbiAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL1JlZ2lzdGVyUGFnZS52dWUnKSxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIC8vIHRpdGxlOiB0KCdyZWdpc3RlclRpdGxlJyksXG4gICAgICAgICAgcmVxdWlyZXNBdXRoOiBmYWxzZSxcbiAgICAgICAgICB0aXRsZUtleTogJ3JlZ2lzdGVyVGl0bGUnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuICAvLyB7IFxuICAvLyAgIHBhdGg6IHQoJ3VwbG9hZExpbmtUYXJnZXQnKSxcbiAgLy8gICBuYW1lOiAndXBsb2FkJyxcbiAgLy8gICBjb21wb25lbnQ6IHVwbG9hZCxcbiAgLy8gICBtZXRhOiB7XG4gIC8vICAgICAvLyB0aXRsZTogdCgncmVnaXN0ZXJUaXRsZScpLFxuICAvLyAgICAgLy8gbWlkZGxld2FyZTogJ3VwbG9hZCcsXG4gIC8vICAgICByZXF1aXJlc0F1dGg6IHRydWUsXG4gIC8vICAgfSxcbiAgLy8gfSxcbiAgLy8geyBcbiAgLy8gICBwYXRoOiB0KCdkb3dubG9hZExpbmtUYXJnZXQnKSsnLzpmaWxlbmFtZShbYS16QS1aMC05X1xcLl0rKSonLFxuICAvLyAgIG5hbWU6ICdkb3dubG9hZCcsXG4gIC8vICAgLy8gY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL0Rvd25sb2FkUGFnZS52dWUnKSxcbiAgLy8gICBtZXRhOiB7XG4gIC8vICAgICAvLyB0aXRsZTogdCgncmVnaXN0ZXJUaXRsZScpLFxuICAvLyAgICAgbWlkZGxld2FyZTogJ2Rvd25sb2FkJyxcbiAgLy8gICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSxcbiAgLy8gICB9LFxuICAvLyB9LFxuXG4gIC8vIEFsd2F5cyBsZWF2ZSB0aGlzIGFzIGxhc3Qgb25lLFxuICAvLyBidXQgeW91IGNhbiBhbHNvIHJlbW92ZSBpdFxuICB7XG4gICAgcGF0aDogJy86Y2F0Y2hBbGwoLiopKicsXG4gICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL0Vycm9yTm90Rm91bmQudnVlJyksXG4gICAgLy8gbmFtZTogJ090aGVycydcbiAgICBtZXRhOiB7XG4gICAgICAvLyB0aXRsZTogdCgnbm90Rm91bmRUaXRsZScpLFxuICAgICAgcmVxdWlyZXNBdXRoOiBmYWxzZSxcbiAgICAgIHRpdGxlS2V5OiAnbm90Rm91bmRUaXRsZScsXG4gICAgfSxcbiAgfSxcbl07XG5cbi8vIGNvbnNvbGUubG9nKHQoJ3VwbG9hZExpbmtUYXJnZXQnKSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcbiIsIi8qZXNsaW50IEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnk6ICdvZmYnKi9cbmltcG9ydCB7IHJvdXRlIH0gZnJvbSAncXVhc2FyL3dyYXBwZXJzJztcbmltcG9ydCB7XG4gIGNyZWF0ZU1lbW9yeUhpc3RvcnksXG4gIGNyZWF0ZVJvdXRlcixcbiAgY3JlYXRlV2ViSGFzaEhpc3RvcnksXG4gIGNyZWF0ZVdlYkhpc3RvcnksXG59IGZyb20gJ3Z1ZS1yb3V0ZXInO1xuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XG5cbmxldCByb3V0ZXI6IGFueSA9IG51bGw7XG5cbi8qXG4gKiBJZiBub3QgYnVpbGRpbmcgd2l0aCBTU1IgbW9kZSwgeW91IGNhblxuICogZGlyZWN0bHkgZXhwb3J0IHRoZSBSb3V0ZXIgaW5zdGFudGlhdGlvbjtcbiAqXG4gKiBUaGUgZnVuY3Rpb24gYmVsb3cgY2FuIGJlIGFzeW5jIHRvbzsgZWl0aGVyIHVzZVxuICogYXN5bmMvYXdhaXQgb3IgcmV0dXJuIGEgUHJvbWlzZSB3aGljaCByZXNvbHZlc1xuICogd2l0aCB0aGUgUm91dGVyIGluc3RhbmNlLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlKGFzeW5jIGZ1bmN0aW9uICgvKiB7IHN0b3JlLCBzc3JDb250ZXh0IH0gKi8pIHtcbiAgY29uc3QgY3JlYXRlSGlzdG9yeSA9IHByb2Nlc3MuZW52LlNFUlZFUlxuICAgID8gY3JlYXRlTWVtb3J5SGlzdG9yeVxuICAgIDogKHByb2Nlc3MuZW52LlZVRV9ST1VURVJfTU9ERSA9PT0gJ2hpc3RvcnknID8gY3JlYXRlV2ViSGlzdG9yeSA6IGNyZWF0ZVdlYkhhc2hIaXN0b3J5KTtcblxuICByb3V0ZXIgPSBhd2FpdCBjcmVhdGVSb3V0ZXIoe1xuICAgIHNjcm9sbEJlaGF2aW9yOiAoKSA9PiAoeyBsZWZ0OiAwLCB0b3A6IDAgfSksXG4gICAgcm91dGVzLFxuXG4gICAgLy8gTGVhdmUgdGhpcyBhcyBpcyBhbmQgbWFrZSBjaGFuZ2VzIGluIHF1YXNhci5jb25mLmpzIGluc3RlYWQhXG4gICAgLy8gcXVhc2FyLmNvbmYuanMgLT4gYnVpbGQgLT4gdnVlUm91dGVyTW9kZVxuICAgIC8vIHF1YXNhci5jb25mLmpzIC0+IGJ1aWxkIC0+IHB1YmxpY1BhdGhcbiAgICBoaXN0b3J5OiBjcmVhdGVIaXN0b3J5KHByb2Nlc3MuZW52LlZVRV9ST1VURVJfQkFTRSksXG4gIH0pO1xuXG4gIHJldHVybiByb3V0ZXI7XG59KTtcbiIsIi8qISBDYXBhY2l0b3I6IGh0dHBzOi8vY2FwYWNpdG9yanMuY29tLyAtIE1JVCBMaWNlbnNlICovXG5jb25zdCBjcmVhdGVDYXBhY2l0b3JQbGF0Zm9ybXMgPSAod2luKSA9PiB7XG4gICAgY29uc3QgZGVmYXVsdFBsYXRmb3JtTWFwID0gbmV3IE1hcCgpO1xuICAgIGRlZmF1bHRQbGF0Zm9ybU1hcC5zZXQoJ3dlYicsIHsgbmFtZTogJ3dlYicgfSk7XG4gICAgY29uc3QgY2FwUGxhdGZvcm1zID0gd2luLkNhcGFjaXRvclBsYXRmb3JtcyB8fCB7XG4gICAgICAgIGN1cnJlbnRQbGF0Zm9ybTogeyBuYW1lOiAnd2ViJyB9LFxuICAgICAgICBwbGF0Zm9ybXM6IGRlZmF1bHRQbGF0Zm9ybU1hcCxcbiAgICB9O1xuICAgIGNvbnN0IGFkZFBsYXRmb3JtID0gKG5hbWUsIHBsYXRmb3JtKSA9PiB7XG4gICAgICAgIGNhcFBsYXRmb3Jtcy5wbGF0Zm9ybXMuc2V0KG5hbWUsIHBsYXRmb3JtKTtcbiAgICB9O1xuICAgIGNvbnN0IHNldFBsYXRmb3JtID0gKG5hbWUpID0+IHtcbiAgICAgICAgaWYgKGNhcFBsYXRmb3Jtcy5wbGF0Zm9ybXMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICBjYXBQbGF0Zm9ybXMuY3VycmVudFBsYXRmb3JtID0gY2FwUGxhdGZvcm1zLnBsYXRmb3Jtcy5nZXQobmFtZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNhcFBsYXRmb3Jtcy5hZGRQbGF0Zm9ybSA9IGFkZFBsYXRmb3JtO1xuICAgIGNhcFBsYXRmb3Jtcy5zZXRQbGF0Zm9ybSA9IHNldFBsYXRmb3JtO1xuICAgIHJldHVybiBjYXBQbGF0Zm9ybXM7XG59O1xuY29uc3QgaW5pdFBsYXRmb3JtcyA9ICh3aW4pID0+ICh3aW4uQ2FwYWNpdG9yUGxhdGZvcm1zID0gY3JlYXRlQ2FwYWNpdG9yUGxhdGZvcm1zKHdpbikpO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBTZXQgYENhcGFjaXRvckN1c3RvbVBsYXRmb3JtYCBvbiB0aGUgd2luZG93IG9iamVjdCBwcmlvciB0byBydW50aW1lIGV4ZWN1dGluZyBpbiB0aGUgd2ViIGFwcCBpbnN0ZWFkXG4gKi9cbmNvbnN0IENhcGFjaXRvclBsYXRmb3JtcyA9IC8qI19fUFVSRV9fKi8gaW5pdFBsYXRmb3JtcygodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXG4gICAgPyBnbG9iYWxUaGlzXG4gICAgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBzZWxmXG4gICAgICAgIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gd2luZG93XG4gICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyBnbG9iYWxcbiAgICAgICAgICAgICAgICA6IHt9KSk7XG4vKipcbiAqIEBkZXByZWNhdGVkIFNldCBgQ2FwYWNpdG9yQ3VzdG9tUGxhdGZvcm1gIG9uIHRoZSB3aW5kb3cgb2JqZWN0IHByaW9yIHRvIHJ1bnRpbWUgZXhlY3V0aW5nIGluIHRoZSB3ZWIgYXBwIGluc3RlYWRcbiAqL1xuY29uc3QgYWRkUGxhdGZvcm0gPSBDYXBhY2l0b3JQbGF0Zm9ybXMuYWRkUGxhdGZvcm07XG4vKipcbiAqIEBkZXByZWNhdGVkIFNldCBgQ2FwYWNpdG9yQ3VzdG9tUGxhdGZvcm1gIG9uIHRoZSB3aW5kb3cgb2JqZWN0IHByaW9yIHRvIHJ1bnRpbWUgZXhlY3V0aW5nIGluIHRoZSB3ZWIgYXBwIGluc3RlYWRcbiAqL1xuY29uc3Qgc2V0UGxhdGZvcm0gPSBDYXBhY2l0b3JQbGF0Zm9ybXMuc2V0UGxhdGZvcm07XG5cbmNvbnN0IGxlZ2FjeVJlZ2lzdGVyV2ViUGx1Z2luID0gKGNhcCwgd2ViUGx1Z2luKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGNvbmZpZyA9IHdlYlBsdWdpbi5jb25maWc7XG4gICAgY29uc3QgUGx1Z2lucyA9IGNhcC5QbHVnaW5zO1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcubmFtZSkge1xuICAgICAgICAvLyBUT0RPOiBhZGQgbGluayB0byB1cGdyYWRlIGd1aWRlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FwYWNpdG9yIFdlYlBsdWdpbiBpcyB1c2luZyB0aGUgZGVwcmVjYXRlZCBcInJlZ2lzdGVyV2ViUGx1Z2luKClcIiBmdW5jdGlvbiwgYnV0IHdpdGhvdXQgdGhlIGNvbmZpZy4gUGxlYXNlIHVzZSBcInJlZ2lzdGVyUGx1Z2luKClcIiBpbnN0ZWFkIHRvIHJlZ2lzdGVyIHRoaXMgd2ViIHBsdWdpbi5cImApO1xuICAgIH1cbiAgICAvLyBUT0RPOiBhZGQgbGluayB0byB1cGdyYWRlIGd1aWRlXG4gICAgY29uc29sZS53YXJuKGBDYXBhY2l0b3IgcGx1Z2luIFwiJHtjb25maWcubmFtZX1cIiBpcyB1c2luZyB0aGUgZGVwcmVjYXRlZCBcInJlZ2lzdGVyV2ViUGx1Z2luKClcIiBmdW5jdGlvbmApO1xuICAgIGlmICghUGx1Z2luc1tjb25maWcubmFtZV0gfHwgKChfYSA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy5wbGF0Zm9ybXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcyhjYXAuZ2V0UGxhdGZvcm0oKSkpKSB7XG4gICAgICAgIC8vIEFkZCB0aGUgd2ViIHBsdWdpbiBpbnRvIHRoZSBwbHVnaW5zIHJlZ2lzdHJ5IGlmIHRoZXJlIGFscmVhZHkgaXNuJ3RcbiAgICAgICAgLy8gYW4gZXhpc3Rpbmcgb25lLiBJZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3QsIHRoYXQgbWVhbnNcbiAgICAgICAgLy8gdGhlcmUncyBubyBleGlzdGluZyBuYXRpdmUgaW1wbGVtZW50YXRpb24gZm9yIGl0LlxuICAgICAgICAvLyAtIE9SIC1cbiAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIGEgcGx1Z2luIHJlZ2lzdGVyZWQgKG1lYW5pbmcgaXQgd2FzIGRlZmluZWQgaW4gdGhlIG5hdGl2ZSBsYXllciksXG4gICAgICAgIC8vIHRoZW4gd2Ugc2hvdWxkIG9ubHkgb3ZlcndyaXRlIGl0IGlmIHRoZSBjb3JyZXNwb25kaW5nIHdlYiBwbHVnaW4gYWN0aXZhdGVzIG9uXG4gICAgICAgIC8vIGEgY2VydGFpbiBwbGF0Zm9ybS4gRm9yIGV4YW1wbGU6IEdlb2xvY2F0aW9uIHVzZXMgdGhlIFdlYlBsdWdpbiBvbiBBbmRyb2lkIGJ1dCBub3QgaU9TXG4gICAgICAgIFBsdWdpbnNbY29uZmlnLm5hbWVdID0gd2ViUGx1Z2luO1xuICAgIH1cbn07XG5cbnZhciBFeGNlcHRpb25Db2RlO1xuKGZ1bmN0aW9uIChFeGNlcHRpb25Db2RlKSB7XG4gICAgLyoqXG4gICAgICogQVBJIGlzIG5vdCBpbXBsZW1lbnRlZC5cbiAgICAgKlxuICAgICAqIFRoaXMgdXN1YWxseSBtZWFucyB0aGUgQVBJIGNhbid0IGJlIHVzZWQgYmVjYXVzZSBpdCBpcyBub3QgaW1wbGVtZW50ZWQgZm9yXG4gICAgICogdGhlIGN1cnJlbnQgcGxhdGZvcm0uXG4gICAgICovXG4gICAgRXhjZXB0aW9uQ29kZVtcIlVuaW1wbGVtZW50ZWRcIl0gPSBcIlVOSU1QTEVNRU5URURcIjtcbiAgICAvKipcbiAgICAgKiBBUEkgaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWVhbnMgdGhlIEFQSSBjYW4ndCBiZSB1c2VkIHJpZ2h0IG5vdyBiZWNhdXNlOlxuICAgICAqICAgLSBpdCBpcyBjdXJyZW50bHkgbWlzc2luZyBhIHByZXJlcXVpc2l0ZSwgc3VjaCBhcyBuZXR3b3JrIGNvbm5lY3Rpdml0eVxuICAgICAqICAgLSBpdCByZXF1aXJlcyBhIHBhcnRpY3VsYXIgcGxhdGZvcm0gb3IgYnJvd3NlciB2ZXJzaW9uXG4gICAgICovXG4gICAgRXhjZXB0aW9uQ29kZVtcIlVuYXZhaWxhYmxlXCJdID0gXCJVTkFWQUlMQUJMRVwiO1xufSkoRXhjZXB0aW9uQ29kZSB8fCAoRXhjZXB0aW9uQ29kZSA9IHt9KSk7XG5jbGFzcyBDYXBhY2l0b3JFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSwgZGF0YSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG5jb25zdCBnZXRQbGF0Zm9ybUlkID0gKHdpbikgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi5hbmRyb2lkQnJpZGdlKSB7XG4gICAgICAgIHJldHVybiAnYW5kcm9pZCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKChfYiA9IChfYSA9IHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi53ZWJraXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlSGFuZGxlcnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5icmlkZ2UpIHtcbiAgICAgICAgcmV0dXJuICdpb3MnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICd3ZWInO1xuICAgIH1cbn07XG5cbmNvbnN0IGNyZWF0ZUNhcGFjaXRvciA9ICh3aW4pID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgIGNvbnN0IGNhcEN1c3RvbVBsYXRmb3JtID0gd2luLkNhcGFjaXRvckN1c3RvbVBsYXRmb3JtIHx8IG51bGw7XG4gICAgY29uc3QgY2FwID0gd2luLkNhcGFjaXRvciB8fCB7fTtcbiAgICBjb25zdCBQbHVnaW5zID0gKGNhcC5QbHVnaW5zID0gY2FwLlBsdWdpbnMgfHwge30pO1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBgY2FwQ3VzdG9tUGxhdGZvcm1gIGluc3RlYWQsIGRlZmF1bHQgZnVuY3Rpb25zIGxpa2UgcmVnaXN0ZXJQbHVnaW4gd2lsbCBmdW5jdGlvbiB3aXRoIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqL1xuICAgIGNvbnN0IGNhcFBsYXRmb3JtcyA9IHdpbi5DYXBhY2l0b3JQbGF0Zm9ybXM7XG4gICAgY29uc3QgZGVmYXVsdEdldFBsYXRmb3JtID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY2FwQ3VzdG9tUGxhdGZvcm0gIT09IG51bGxcbiAgICAgICAgICAgID8gY2FwQ3VzdG9tUGxhdGZvcm0ubmFtZVxuICAgICAgICAgICAgOiBnZXRQbGF0Zm9ybUlkKHdpbik7XG4gICAgfTtcbiAgICBjb25zdCBnZXRQbGF0Zm9ybSA9ICgoX2EgPSBjYXBQbGF0Zm9ybXMgPT09IG51bGwgfHwgY2FwUGxhdGZvcm1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjYXBQbGF0Zm9ybXMuY3VycmVudFBsYXRmb3JtKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0UGxhdGZvcm0pIHx8IGRlZmF1bHRHZXRQbGF0Zm9ybTtcbiAgICBjb25zdCBkZWZhdWx0SXNOYXRpdmVQbGF0Zm9ybSA9ICgpID0+IGdldFBsYXRmb3JtKCkgIT09ICd3ZWInO1xuICAgIGNvbnN0IGlzTmF0aXZlUGxhdGZvcm0gPSAoKF9iID0gY2FwUGxhdGZvcm1zID09PSBudWxsIHx8IGNhcFBsYXRmb3JtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FwUGxhdGZvcm1zLmN1cnJlbnRQbGF0Zm9ybSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmlzTmF0aXZlUGxhdGZvcm0pIHx8IGRlZmF1bHRJc05hdGl2ZVBsYXRmb3JtO1xuICAgIGNvbnN0IGRlZmF1bHRJc1BsdWdpbkF2YWlsYWJsZSA9IChwbHVnaW5OYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IHJlZ2lzdGVyZWRQbHVnaW5zLmdldChwbHVnaW5OYW1lKTtcbiAgICAgICAgaWYgKHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbi5wbGF0Zm9ybXMuaGFzKGdldFBsYXRmb3JtKCkpKSB7XG4gICAgICAgICAgICAvLyBKUyBpbXBsZW1lbnRhdGlvbiBhdmFpbGFibGUgZm9yIHRoZSBjdXJyZW50IHBsYXRmb3JtLlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdldFBsdWdpbkhlYWRlcihwbHVnaW5OYW1lKSkge1xuICAgICAgICAgICAgLy8gTmF0aXZlIGltcGxlbWVudGF0aW9uIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIGNvbnN0IGlzUGx1Z2luQXZhaWxhYmxlID0gKChfYyA9IGNhcFBsYXRmb3JtcyA9PT0gbnVsbCB8fCBjYXBQbGF0Zm9ybXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhcFBsYXRmb3Jtcy5jdXJyZW50UGxhdGZvcm0pID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5pc1BsdWdpbkF2YWlsYWJsZSkgfHxcbiAgICAgICAgZGVmYXVsdElzUGx1Z2luQXZhaWxhYmxlO1xuICAgIGNvbnN0IGRlZmF1bHRHZXRQbHVnaW5IZWFkZXIgPSAocGx1Z2luTmFtZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBjYXAuUGx1Z2luSGVhZGVycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpbmQoaCA9PiBoLm5hbWUgPT09IHBsdWdpbk5hbWUpOyB9O1xuICAgIGNvbnN0IGdldFBsdWdpbkhlYWRlciA9ICgoX2QgPSBjYXBQbGF0Zm9ybXMgPT09IG51bGwgfHwgY2FwUGxhdGZvcm1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjYXBQbGF0Zm9ybXMuY3VycmVudFBsYXRmb3JtKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuZ2V0UGx1Z2luSGVhZGVyKSB8fCBkZWZhdWx0R2V0UGx1Z2luSGVhZGVyO1xuICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGVycikgPT4gd2luLmNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICBjb25zdCBwbHVnaW5NZXRob2ROb29wID0gKF90YXJnZXQsIHByb3AsIHBsdWdpbk5hbWUpID0+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGAke3BsdWdpbk5hbWV9IGRvZXMgbm90IGhhdmUgYW4gaW1wbGVtZW50YXRpb24gb2YgXCIke3Byb3B9XCIuYCk7XG4gICAgfTtcbiAgICBjb25zdCByZWdpc3RlcmVkUGx1Z2lucyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBkZWZhdWx0UmVnaXN0ZXJQbHVnaW4gPSAocGx1Z2luTmFtZSwganNJbXBsZW1lbnRhdGlvbnMgPSB7fSkgPT4ge1xuICAgICAgICBjb25zdCByZWdpc3RlcmVkUGx1Z2luID0gcmVnaXN0ZXJlZFBsdWdpbnMuZ2V0KHBsdWdpbk5hbWUpO1xuICAgICAgICBpZiAocmVnaXN0ZXJlZFBsdWdpbikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBDYXBhY2l0b3IgcGx1Z2luIFwiJHtwbHVnaW5OYW1lfVwiIGFscmVhZHkgcmVnaXN0ZXJlZC4gQ2Fubm90IHJlZ2lzdGVyIHBsdWdpbnMgdHdpY2UuYCk7XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0ZXJlZFBsdWdpbi5wcm94eTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwbGF0Zm9ybSA9IGdldFBsYXRmb3JtKCk7XG4gICAgICAgIGNvbnN0IHBsdWdpbkhlYWRlciA9IGdldFBsdWdpbkhlYWRlcihwbHVnaW5OYW1lKTtcbiAgICAgICAgbGV0IGpzSW1wbGVtZW50YXRpb247XG4gICAgICAgIGNvbnN0IGxvYWRQbHVnaW5JbXBsZW1lbnRhdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghanNJbXBsZW1lbnRhdGlvbiAmJiBwbGF0Zm9ybSBpbiBqc0ltcGxlbWVudGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGpzSW1wbGVtZW50YXRpb24gPVxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YganNJbXBsZW1lbnRhdGlvbnNbcGxhdGZvcm1dID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChqc0ltcGxlbWVudGF0aW9uID0gYXdhaXQganNJbXBsZW1lbnRhdGlvbnNbcGxhdGZvcm1dKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChqc0ltcGxlbWVudGF0aW9uID0ganNJbXBsZW1lbnRhdGlvbnNbcGxhdGZvcm1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNhcEN1c3RvbVBsYXRmb3JtICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgIWpzSW1wbGVtZW50YXRpb24gJiZcbiAgICAgICAgICAgICAgICAnd2ViJyBpbiBqc0ltcGxlbWVudGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGpzSW1wbGVtZW50YXRpb24gPVxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YganNJbXBsZW1lbnRhdGlvbnNbJ3dlYiddID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChqc0ltcGxlbWVudGF0aW9uID0gYXdhaXQganNJbXBsZW1lbnRhdGlvbnNbJ3dlYiddKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChqc0ltcGxlbWVudGF0aW9uID0ganNJbXBsZW1lbnRhdGlvbnNbJ3dlYiddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBqc0ltcGxlbWVudGF0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjcmVhdGVQbHVnaW5NZXRob2QgPSAoaW1wbCwgcHJvcCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGlmIChwbHVnaW5IZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2RIZWFkZXIgPSBwbHVnaW5IZWFkZXIgPT09IG51bGwgfHwgcGx1Z2luSGVhZGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW5IZWFkZXIubWV0aG9kcy5maW5kKG0gPT4gcHJvcCA9PT0gbS5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2RIZWFkZXIucnR5cGUgPT09ICdwcm9taXNlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvcHRpb25zKSA9PiBjYXAubmF0aXZlUHJvbWlzZShwbHVnaW5OYW1lLCBwcm9wLnRvU3RyaW5nKCksIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvcHRpb25zLCBjYWxsYmFjaykgPT4gY2FwLm5hdGl2ZUNhbGxiYWNrKHBsdWdpbk5hbWUsIHByb3AudG9TdHJpbmcoKSwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGltcGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfYSA9IGltcGxbcHJvcF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5iaW5kKGltcGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGltcGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9iID0gaW1wbFtwcm9wXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmJpbmQoaW1wbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2FwYWNpdG9yRXhjZXB0aW9uKGBcIiR7cGx1Z2luTmFtZX1cIiBwbHVnaW4gaXMgbm90IGltcGxlbWVudGVkIG9uICR7cGxhdGZvcm19YCwgRXhjZXB0aW9uQ29kZS5VbmltcGxlbWVudGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY3JlYXRlUGx1Z2luTWV0aG9kV3JhcHBlciA9IChwcm9wKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVtb3ZlO1xuICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IGxvYWRQbHVnaW5JbXBsZW1lbnRhdGlvbigpLnRoZW4oaW1wbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZuID0gY3JlYXRlUGx1Z2luTWV0aG9kKGltcGwsIHByb3ApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBmbiguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZSA9IHAgPT09IG51bGwgfHwgcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcC5yZW1vdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDYXBhY2l0b3JFeGNlcHRpb24oYFwiJHtwbHVnaW5OYW1lfS4ke3Byb3B9KClcIiBpcyBub3QgaW1wbGVtZW50ZWQgb24gJHtwbGF0Zm9ybX1gLCBFeGNlcHRpb25Db2RlLlVuaW1wbGVtZW50ZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdhZGRMaXN0ZW5lcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcC5yZW1vdmUgPSBhc3luYyAoKSA9PiByZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gU29tZSBmbGFpciDinKhcbiAgICAgICAgICAgIHdyYXBwZXIudG9TdHJpbmcgPSAoKSA9PiBgJHtwcm9wLnRvU3RyaW5nKCl9KCkgeyBbY2FwYWNpdG9yIGNvZGVdIH1gO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdyYXBwZXIsICduYW1lJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWRkTGlzdGVuZXIgPSBjcmVhdGVQbHVnaW5NZXRob2RXcmFwcGVyKCdhZGRMaXN0ZW5lcicpO1xuICAgICAgICBjb25zdCByZW1vdmVMaXN0ZW5lciA9IGNyZWF0ZVBsdWdpbk1ldGhvZFdyYXBwZXIoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIGNvbnN0IGFkZExpc3RlbmVyTmF0aXZlID0gKGV2ZW50TmFtZSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGwgPSBhZGRMaXN0ZW5lcih7IGV2ZW50TmFtZSB9LCBjYWxsYmFjayk7XG4gICAgICAgICAgICBjb25zdCByZW1vdmUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tJZCA9IGF3YWl0IGNhbGw7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIoe1xuICAgICAgICAgICAgICAgICAgICBldmVudE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrSWQsXG4gICAgICAgICAgICAgICAgfSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGNhbGwudGhlbigoKSA9PiByZXNvbHZlKHsgcmVtb3ZlIH0pKSk7XG4gICAgICAgICAgICBwLnJlbW92ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVzaW5nIGFkZExpc3RlbmVyKCkgd2l0aG91dCAnYXdhaXQnIGlzIGRlcHJlY2F0ZWQuYCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgICAgICBnZXQoXywgcHJvcCkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzIwMDMwXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJyQkdHlwZW9mJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvSlNPTic6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4gKHt9KTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkTGlzdGVuZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbkhlYWRlciA/IGFkZExpc3RlbmVyTmF0aXZlIDogYWRkTGlzdGVuZXI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbW92ZUxpc3RlbmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVMaXN0ZW5lcjtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQbHVnaW5NZXRob2RXcmFwcGVyKHByb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBQbHVnaW5zW3BsdWdpbk5hbWVdID0gcHJveHk7XG4gICAgICAgIHJlZ2lzdGVyZWRQbHVnaW5zLnNldChwbHVnaW5OYW1lLCB7XG4gICAgICAgICAgICBuYW1lOiBwbHVnaW5OYW1lLFxuICAgICAgICAgICAgcHJveHksXG4gICAgICAgICAgICBwbGF0Zm9ybXM6IG5ldyBTZXQoW1xuICAgICAgICAgICAgICAgIC4uLk9iamVjdC5rZXlzKGpzSW1wbGVtZW50YXRpb25zKSxcbiAgICAgICAgICAgICAgICAuLi4ocGx1Z2luSGVhZGVyID8gW3BsYXRmb3JtXSA6IFtdKSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb3h5O1xuICAgIH07XG4gICAgY29uc3QgcmVnaXN0ZXJQbHVnaW4gPSAoKF9lID0gY2FwUGxhdGZvcm1zID09PSBudWxsIHx8IGNhcFBsYXRmb3JtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FwUGxhdGZvcm1zLmN1cnJlbnRQbGF0Zm9ybSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnJlZ2lzdGVyUGx1Z2luKSB8fCBkZWZhdWx0UmVnaXN0ZXJQbHVnaW47XG4gICAgLy8gQWRkIGluIGNvbnZlcnRGaWxlU3JjIGZvciB3ZWIsIGl0IHdpbGwgYWxyZWFkeSBiZSBhdmFpbGFibGUgaW4gbmF0aXZlIGNvbnRleHRcbiAgICBpZiAoIWNhcC5jb252ZXJ0RmlsZVNyYykge1xuICAgICAgICBjYXAuY29udmVydEZpbGVTcmMgPSBmaWxlUGF0aCA9PiBmaWxlUGF0aDtcbiAgICB9XG4gICAgY2FwLmdldFBsYXRmb3JtID0gZ2V0UGxhdGZvcm07XG4gICAgY2FwLmhhbmRsZUVycm9yID0gaGFuZGxlRXJyb3I7XG4gICAgY2FwLmlzTmF0aXZlUGxhdGZvcm0gPSBpc05hdGl2ZVBsYXRmb3JtO1xuICAgIGNhcC5pc1BsdWdpbkF2YWlsYWJsZSA9IGlzUGx1Z2luQXZhaWxhYmxlO1xuICAgIGNhcC5wbHVnaW5NZXRob2ROb29wID0gcGx1Z2luTWV0aG9kTm9vcDtcbiAgICBjYXAucmVnaXN0ZXJQbHVnaW4gPSByZWdpc3RlclBsdWdpbjtcbiAgICBjYXAuRXhjZXB0aW9uID0gQ2FwYWNpdG9yRXhjZXB0aW9uO1xuICAgIGNhcC5ERUJVRyA9ICEhY2FwLkRFQlVHO1xuICAgIGNhcC5pc0xvZ2dpbmdFbmFibGVkID0gISFjYXAuaXNMb2dnaW5nRW5hYmxlZDtcbiAgICAvLyBEZXByZWNhdGVkIHByb3BzXG4gICAgY2FwLnBsYXRmb3JtID0gY2FwLmdldFBsYXRmb3JtKCk7XG4gICAgY2FwLmlzTmF0aXZlID0gY2FwLmlzTmF0aXZlUGxhdGZvcm0oKTtcbiAgICByZXR1cm4gY2FwO1xufTtcbmNvbnN0IGluaXRDYXBhY2l0b3JHbG9iYWwgPSAod2luKSA9PiAod2luLkNhcGFjaXRvciA9IGNyZWF0ZUNhcGFjaXRvcih3aW4pKTtcblxuY29uc3QgQ2FwYWNpdG9yID0gLyojX19QVVJFX18qLyBpbml0Q2FwYWNpdG9yR2xvYmFsKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJ1xuICAgID8gZ2xvYmFsVGhpc1xuICAgIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gc2VsZlxuICAgICAgICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IHdpbmRvd1xuICAgICAgICAgICAgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gZ2xvYmFsXG4gICAgICAgICAgICAgICAgOiB7fSk7XG5jb25zdCByZWdpc3RlclBsdWdpbiA9IENhcGFjaXRvci5yZWdpc3RlclBsdWdpbjtcbi8qKlxuICogQGRlcHJlY2F0ZWQgUHJvdmlkZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBDYXBhY2l0b3IgdjIgcGx1Z2lucy5cbiAqIENhcGFjaXRvciB2MyBwbHVnaW5zIHNob3VsZCBpbXBvcnQgdGhlIHBsdWdpbiBkaXJlY3RseS4gVGhpcyBcIlBsdWdpbnNcIlxuICogZXhwb3J0IGlzIGRlcHJlY2F0ZWQgaW4gdjMsIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdjQuXG4gKi9cbmNvbnN0IFBsdWdpbnMgPSBDYXBhY2l0b3IuUGx1Z2lucztcbi8qKlxuICogUHJvdmlkZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LiBVc2UgdGhlIHJlZ2lzdGVyUGx1Z2luKCkgQVBJXG4gKiBpbnN0ZWFkLCBhbmQgcHJvdmlkZSB0aGUgd2ViIHBsdWdpbiBhcyB0aGUgXCJ3ZWJcIiBpbXBsbWVuZXRhdGlvbi5cbiAqIEZvciBleGFtcGxlXG4gKlxuICogZXhwb3J0IGNvbnN0IEV4YW1wbGUgPSByZWdpc3RlclBsdWdpbignRXhhbXBsZScsIHtcbiAqICAgd2ViOiAoKSA9PiBpbXBvcnQoJy4vd2ViJykudGhlbihtID0+IG5ldyBtLkV4YW1wbGUoKSlcbiAqIH0pXG4gKlxuICogQGRlcHJlY2F0ZWQgRGVwcmVjYXRlZCBpbiB2Mywgd2lsbCBiZSByZW1vdmVkIGZyb20gdjQuXG4gKi9cbmNvbnN0IHJlZ2lzdGVyV2ViUGx1Z2luID0gKHBsdWdpbikgPT4gbGVnYWN5UmVnaXN0ZXJXZWJQbHVnaW4oQ2FwYWNpdG9yLCBwbHVnaW4pO1xuXG4vKipcbiAqIEJhc2UgY2xhc3Mgd2ViIHBsdWdpbnMgc2hvdWxkIGV4dGVuZC5cbiAqL1xuY2xhc3MgV2ViUGx1Z2luIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy53aW5kb3dMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgaWYgKGNvbmZpZykge1xuICAgICAgICAgICAgLy8gVE9ETzogYWRkIGxpbmsgdG8gdXBncmFkZSBndWlkZVxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBDYXBhY2l0b3IgV2ViUGx1Z2luIFwiJHtjb25maWcubmFtZX1cIiBjb25maWcgb2JqZWN0IHdhcyBkZXByZWNhdGVkIGluIHYzIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdjQuYCk7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyRnVuYykge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdO1xuICAgICAgICBpZiAoIWxpc3RlbmVycykge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaChsaXN0ZW5lckZ1bmMpO1xuICAgICAgICAvLyBJZiB3ZSBoYXZlbid0IGFkZGVkIGEgd2luZG93IGxpc3RlbmVyIGZvciB0aGlzIGV2ZW50IGFuZCBpdCByZXF1aXJlcyBvbmUsXG4gICAgICAgIC8vIGdvIGFoZWFkIGFuZCBhZGQgaXRcbiAgICAgICAgY29uc3Qgd2luZG93TGlzdGVuZXIgPSB0aGlzLndpbmRvd0xpc3RlbmVyc1tldmVudE5hbWVdO1xuICAgICAgICBpZiAod2luZG93TGlzdGVuZXIgJiYgIXdpbmRvd0xpc3RlbmVyLnJlZ2lzdGVyZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkV2luZG93TGlzdGVuZXIod2luZG93TGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IGFzeW5jICgpID0+IHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lckZ1bmMpO1xuICAgICAgICBjb25zdCBwID0gUHJvbWlzZS5yZXNvbHZlKHsgcmVtb3ZlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocCwgJ3JlbW92ZScsIHtcbiAgICAgICAgICAgIHZhbHVlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVc2luZyBhZGRMaXN0ZW5lcigpIHdpdGhvdXQgJ2F3YWl0JyBpcyBkZXByZWNhdGVkLmApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlbW92ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBhc3luYyByZW1vdmVBbGxMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgaW4gdGhpcy53aW5kb3dMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlV2luZG93TGlzdGVuZXIodGhpcy53aW5kb3dMaXN0ZW5lcnNbbGlzdGVuZXJdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndpbmRvd0xpc3RlbmVycyA9IHt9O1xuICAgIH1cbiAgICBub3RpZnlMaXN0ZW5lcnMoZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV07XG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKGRhdGEpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNMaXN0ZW5lcnMoZXZlbnROYW1lKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0ubGVuZ3RoO1xuICAgIH1cbiAgICByZWdpc3RlcldpbmRvd0xpc3RlbmVyKHdpbmRvd0V2ZW50TmFtZSwgcGx1Z2luRXZlbnROYW1lKSB7XG4gICAgICAgIHRoaXMud2luZG93TGlzdGVuZXJzW3BsdWdpbkV2ZW50TmFtZV0gPSB7XG4gICAgICAgICAgICByZWdpc3RlcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIHdpbmRvd0V2ZW50TmFtZSxcbiAgICAgICAgICAgIHBsdWdpbkV2ZW50TmFtZSxcbiAgICAgICAgICAgIGhhbmRsZXI6IGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhwbHVnaW5FdmVudE5hbWUsIGV2ZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHVuaW1wbGVtZW50ZWQobXNnID0gJ25vdCBpbXBsZW1lbnRlZCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXBhY2l0b3IuRXhjZXB0aW9uKG1zZywgRXhjZXB0aW9uQ29kZS5VbmltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgdW5hdmFpbGFibGUobXNnID0gJ25vdCBhdmFpbGFibGUnKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FwYWNpdG9yLkV4Y2VwdGlvbihtc2csIEV4Y2VwdGlvbkNvZGUuVW5hdmFpbGFibGUpO1xuICAgIH1cbiAgICBhc3luYyByZW1vdmVMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyRnVuYykge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdO1xuICAgICAgICBpZiAoIWxpc3RlbmVycykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXJGdW5jKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbW9yZSBsaXN0ZW5lcnMgZm9yIHRoaXMgdHlwZSBvZiBldmVudCxcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSB3aW5kb3cgbGlzdGVuZXJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVXaW5kb3dMaXN0ZW5lcih0aGlzLndpbmRvd0xpc3RlbmVyc1tldmVudE5hbWVdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRXaW5kb3dMaXN0ZW5lcihoYW5kbGUpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoaGFuZGxlLndpbmRvd0V2ZW50TmFtZSwgaGFuZGxlLmhhbmRsZXIpO1xuICAgICAgICBoYW5kbGUucmVnaXN0ZXJlZCA9IHRydWU7XG4gICAgfVxuICAgIHJlbW92ZVdpbmRvd0xpc3RlbmVyKGhhbmRsZSkge1xuICAgICAgICBpZiAoIWhhbmRsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGhhbmRsZS53aW5kb3dFdmVudE5hbWUsIGhhbmRsZS5oYW5kbGVyKTtcbiAgICAgICAgaGFuZGxlLnJlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgICB9XG59XG5cbmNvbnN0IFdlYlZpZXcgPSAvKiNfX1BVUkVfXyovIHJlZ2lzdGVyUGx1Z2luKCdXZWJWaWV3Jyk7XG4vKioqKioqKiogRU5EIFdFQiBWSUVXIFBMVUdJTiAqKioqKioqKi9cbi8qKioqKioqKiBDT09LSUVTIFBMVUdJTiAqKioqKioqKi9cbi8qKlxuICogU2FmZWx5IHdlYiBlbmNvZGUgYSBzdHJpbmcgdmFsdWUgKGluc3BpcmVkIGJ5IGpzLWNvb2tpZSlcbiAqIEBwYXJhbSBzdHIgVGhlIHN0cmluZyB2YWx1ZSB0byBlbmNvZGVcbiAqL1xuY29uc3QgZW5jb2RlID0gKHN0cikgPT4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cilcbiAgICAucmVwbGFjZSgvJSgyWzM0NkJdfDVFfDYwfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpXG4gICAgLnJlcGxhY2UoL1soKV0vZywgZXNjYXBlKTtcbi8qKlxuICogU2FmZWx5IHdlYiBkZWNvZGUgYSBzdHJpbmcgdmFsdWUgKGluc3BpcmVkIGJ5IGpzLWNvb2tpZSlcbiAqIEBwYXJhbSBzdHIgVGhlIHN0cmluZyB2YWx1ZSB0byBkZWNvZGVcbiAqL1xuY29uc3QgZGVjb2RlID0gKHN0cikgPT4gc3RyLnJlcGxhY2UoLyglW1xcZEEtRl17Mn0pKy9naSwgZGVjb2RlVVJJQ29tcG9uZW50KTtcbmNsYXNzIENhcGFjaXRvckNvb2tpZXNQbHVnaW5XZWIgZXh0ZW5kcyBXZWJQbHVnaW4ge1xuICAgIGFzeW5jIGdldENvb2tpZXMoKSB7XG4gICAgICAgIGNvbnN0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWU7XG4gICAgICAgIGNvbnN0IGNvb2tpZU1hcCA9IHt9O1xuICAgICAgICBjb29raWVzLnNwbGl0KCc7JykuZm9yRWFjaChjb29raWUgPT4ge1xuICAgICAgICAgICAgaWYgKGNvb2tpZS5sZW5ndGggPD0gMClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyBSZXBsYWNlIGZpcnN0IFwiPVwiIHdpdGggQ0FQX0NPT0tJRSB0byBwcmV2ZW50IHNwbGl0dGluZyBvbiBhZGRpdGlvbmFsIFwiPVwiXG4gICAgICAgICAgICBsZXQgW2tleSwgdmFsdWVdID0gY29va2llLnJlcGxhY2UoLz0vLCAnQ0FQX0NPT0tJRScpLnNwbGl0KCdDQVBfQ09PS0lFJyk7XG4gICAgICAgICAgICBrZXkgPSBkZWNvZGUoa2V5KS50cmltKCk7XG4gICAgICAgICAgICB2YWx1ZSA9IGRlY29kZSh2YWx1ZSkudHJpbSgpO1xuICAgICAgICAgICAgY29va2llTWFwW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb29raWVNYXA7XG4gICAgfVxuICAgIGFzeW5jIHNldENvb2tpZShvcHRpb25zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBTYWZlbHkgRW5jb2RlZCBLZXkvVmFsdWVcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRLZXkgPSBlbmNvZGUob3B0aW9ucy5rZXkpO1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZFZhbHVlID0gZW5jb2RlKG9wdGlvbnMudmFsdWUpO1xuICAgICAgICAgICAgLy8gQ2xlYW4gJiBzYW5pdGl6ZSBvcHRpb25zXG4gICAgICAgICAgICBjb25zdCBleHBpcmVzID0gYDsgZXhwaXJlcz0keyhvcHRpb25zLmV4cGlyZXMgfHwgJycpLnJlcGxhY2UoJ2V4cGlyZXM9JywgJycpfWA7IC8vIERlZmF1bHQgaXMgXCI7IGV4cGlyZXM9XCJcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSAob3B0aW9ucy5wYXRoIHx8ICcvJykucmVwbGFjZSgncGF0aD0nLCAnJyk7IC8vIERlZmF1bHQgaXMgXCJwYXRoPS9cIlxuICAgICAgICAgICAgY29uc3QgZG9tYWluID0gb3B0aW9ucy51cmwgIT0gbnVsbCAmJiBvcHRpb25zLnVybC5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBgZG9tYWluPSR7b3B0aW9ucy51cmx9YFxuICAgICAgICAgICAgICAgIDogJyc7XG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgJHtlbmNvZGVkS2V5fT0ke2VuY29kZWRWYWx1ZSB8fCAnJ30ke2V4cGlyZXN9OyBwYXRoPSR7cGF0aH07ICR7ZG9tYWlufTtgO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBkZWxldGVDb29raWUob3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYCR7b3B0aW9ucy5rZXl9PTsgTWF4LUFnZT0wYDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY2xlYXJDb29raWVzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpIHx8IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjb29raWUgb2YgY29va2llcykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXiArLywgJycpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC89LiovLCBgPTtleHBpcmVzPSR7bmV3IERhdGUoKS50b1VUQ1N0cmluZygpfTtwYXRoPS9gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY2xlYXJBbGxDb29raWVzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jbGVhckNvb2tpZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBDYXBhY2l0b3JDb29raWVzID0gcmVnaXN0ZXJQbHVnaW4oJ0NhcGFjaXRvckNvb2tpZXMnLCB7XG4gICAgd2ViOiAoKSA9PiBuZXcgQ2FwYWNpdG9yQ29va2llc1BsdWdpbldlYigpLFxufSk7XG4vLyBVVElMSVRZIEZVTkNUSU9OU1xuLyoqXG4gKiBSZWFkIGluIGEgQmxvYiB2YWx1ZSBhbmQgcmV0dXJuIGl0IGFzIGEgYmFzZTY0IHN0cmluZ1xuICogQHBhcmFtIGJsb2IgVGhlIGJsb2IgdmFsdWUgdG8gY29udmVydCB0byBhIGJhc2U2NCBzdHJpbmdcbiAqL1xuY29uc3QgcmVhZEJsb2JBc0Jhc2U2NCA9IGFzeW5jIChibG9iKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBiYXNlNjRTdHJpbmcgPSByZWFkZXIucmVzdWx0O1xuICAgICAgICAvLyByZW1vdmUgcHJlZml4IFwiZGF0YTphcHBsaWNhdGlvbi9wZGY7YmFzZTY0LFwiXG4gICAgICAgIHJlc29sdmUoYmFzZTY0U3RyaW5nLmluZGV4T2YoJywnKSA+PSAwXG4gICAgICAgICAgICA/IGJhc2U2NFN0cmluZy5zcGxpdCgnLCcpWzFdXG4gICAgICAgICAgICA6IGJhc2U2NFN0cmluZyk7XG4gICAgfTtcbiAgICByZWFkZXIub25lcnJvciA9IChlcnJvcikgPT4gcmVqZWN0KGVycm9yKTtcbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbn0pO1xuLyoqXG4gKiBOb3JtYWxpemUgYW4gSHR0cEhlYWRlcnMgbWFwIGJ5IGxvd2VyY2FzaW5nIGFsbCBvZiB0aGUgdmFsdWVzXG4gKiBAcGFyYW0gaGVhZGVycyBUaGUgSHR0cEhlYWRlcnMgb2JqZWN0IHRvIG5vcm1hbGl6ZVxuICovXG5jb25zdCBub3JtYWxpemVIdHRwSGVhZGVycyA9IChoZWFkZXJzID0ge30pID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbEtleXMgPSBPYmplY3Qua2V5cyhoZWFkZXJzKTtcbiAgICBjb25zdCBsb3dlcmVkS2V5cyA9IE9iamVjdC5rZXlzKGhlYWRlcnMpLm1hcChrID0+IGsudG9Mb2NhbGVMb3dlckNhc2UoKSk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGxvd2VyZWRLZXlzLnJlZHVjZSgoYWNjLCBrZXksIGluZGV4KSA9PiB7XG4gICAgICAgIGFjY1trZXldID0gaGVhZGVyc1tvcmlnaW5hbEtleXNbaW5kZXhdXTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59O1xuLyoqXG4gKiBCdWlsZHMgYSBzdHJpbmcgb2YgdXJsIHBhcmFtZXRlcnMgdGhhdFxuICogQHBhcmFtIHBhcmFtcyBBIG1hcCBvZiB1cmwgcGFyYW1ldGVyc1xuICogQHBhcmFtIHNob3VsZEVuY29kZSB0cnVlIGlmIHlvdSBzaG91bGQgZW5jb2RlVVJJQ29tcG9uZW50KCkgdGhlIHZhbHVlcyAodHJ1ZSBieSBkZWZhdWx0KVxuICovXG5jb25zdCBidWlsZFVybFBhcmFtcyA9IChwYXJhbXMsIHNob3VsZEVuY29kZSA9IHRydWUpID0+IHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3Qgb3V0cHV0ID0gT2JqZWN0LmVudHJpZXMocGFyYW1zKS5yZWR1Y2UoKGFjY3VtdWxhdG9yLCBlbnRyeSkgPT4ge1xuICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeTtcbiAgICAgICAgbGV0IGVuY29kZWRWYWx1ZTtcbiAgICAgICAgbGV0IGl0ZW07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgaXRlbSA9ICcnO1xuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChzdHIgPT4ge1xuICAgICAgICAgICAgICAgIGVuY29kZWRWYWx1ZSA9IHNob3VsZEVuY29kZSA/IGVuY29kZVVSSUNvbXBvbmVudChzdHIpIDogc3RyO1xuICAgICAgICAgICAgICAgIGl0ZW0gKz0gYCR7a2V5fT0ke2VuY29kZWRWYWx1ZX0mYDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gbGFzdCBjaGFyYWN0ZXIgd2lsbCBhbHdheXMgYmUgXCImXCIgc28gc2xpY2UgaXQgb2ZmXG4gICAgICAgICAgICBpdGVtLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVuY29kZWRWYWx1ZSA9IHNob3VsZEVuY29kZSA/IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgICAgIGl0ZW0gPSBgJHtrZXl9PSR7ZW5jb2RlZFZhbHVlfWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke2FjY3VtdWxhdG9yfSYke2l0ZW19YDtcbiAgICB9LCAnJyk7XG4gICAgLy8gUmVtb3ZlIGluaXRpYWwgXCImXCIgZnJvbSB0aGUgcmVkdWNlXG4gICAgcmV0dXJuIG91dHB1dC5zdWJzdHIoMSk7XG59O1xuLyoqXG4gKiBCdWlsZCB0aGUgUmVxdWVzdEluaXQgb2JqZWN0IGJhc2VkIG9uIHRoZSBvcHRpb25zIHBhc3NlZCBpbnRvIHRoZSBpbml0aWFsIHJlcXVlc3RcbiAqIEBwYXJhbSBvcHRpb25zIFRoZSBIdHRwIHBsdWdpbiBvcHRpb25zXG4gKiBAcGFyYW0gZXh0cmEgQW55IGV4dHJhIFJlcXVlc3RJbml0IHZhbHVlc1xuICovXG5jb25zdCBidWlsZFJlcXVlc3RJbml0ID0gKG9wdGlvbnMsIGV4dHJhID0ge30pID0+IHtcbiAgICBjb25zdCBvdXRwdXQgPSBPYmplY3QuYXNzaWduKHsgbWV0aG9kOiBvcHRpb25zLm1ldGhvZCB8fCAnR0VUJywgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzIH0sIGV4dHJhKTtcbiAgICAvLyBHZXQgdGhlIGNvbnRlbnQtdHlwZVxuICAgIGNvbnN0IGhlYWRlcnMgPSBub3JtYWxpemVIdHRwSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpO1xuICAgIGNvbnN0IHR5cGUgPSBoZWFkZXJzWydjb250ZW50LXR5cGUnXSB8fCAnJztcbiAgICAvLyBJZiBib2R5IGlzIGFscmVhZHkgYSBzdHJpbmcsIHRoZW4gcGFzcyBpdCB0aHJvdWdoIGFzLWlzLlxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICBvdXRwdXQuYm9keSA9IG9wdGlvbnMuZGF0YTtcbiAgICB9XG4gICAgLy8gQnVpbGQgcmVxdWVzdCBpbml0aWFsaXplcnMgYmFzZWQgb2ZmIG9mIGNvbnRlbnQtdHlwZVxuICAgIGVsc2UgaWYgKHR5cGUuaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMob3B0aW9ucy5kYXRhIHx8IHt9KSkge1xuICAgICAgICAgICAgcGFyYW1zLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQuYm9keSA9IHBhcmFtcy50b1N0cmluZygpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlLmluY2x1ZGVzKCdtdWx0aXBhcnQvZm9ybS1kYXRhJykpIHtcbiAgICAgICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBpZiAob3B0aW9ucy5kYXRhIGluc3RhbmNlb2YgRm9ybURhdGEpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9wdGlvbnMuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChrZXksIG9wdGlvbnMuZGF0YVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQuYm9keSA9IGZvcm07XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyhvdXRwdXQuaGVhZGVycyk7XG4gICAgICAgIGhlYWRlcnMuZGVsZXRlKCdjb250ZW50LXR5cGUnKTsgLy8gY29udGVudC10eXBlIHdpbGwgYmUgc2V0IGJ5IGB3aW5kb3cuZmV0Y2hgIHRvIGluY2x1ZHkgYm91bmRhcnlcbiAgICAgICAgb3V0cHV0LmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykgfHxcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgb3V0cHV0LmJvZHkgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufTtcbi8vIFdFQiBJTVBMRU1FTlRBVElPTlxuY2xhc3MgQ2FwYWNpdG9ySHR0cFBsdWdpbldlYiBleHRlbmRzIFdlYlBsdWdpbiB7XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhbiBIdHRwIHJlcXVlc3QgZ2l2ZW4gYSBzZXQgb2Ygb3B0aW9uc1xuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gYnVpbGQgdGhlIEhUVFAgcmVxdWVzdFxuICAgICAqL1xuICAgIGFzeW5jIHJlcXVlc3Qob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXF1ZXN0SW5pdCA9IGJ1aWxkUmVxdWVzdEluaXQob3B0aW9ucywgb3B0aW9ucy53ZWJGZXRjaEV4dHJhKTtcbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gYnVpbGRVcmxQYXJhbXMob3B0aW9ucy5wYXJhbXMsIG9wdGlvbnMuc2hvdWxkRW5jb2RlVXJsUGFyYW1zKTtcbiAgICAgICAgY29uc3QgdXJsID0gdXJsUGFyYW1zID8gYCR7b3B0aW9ucy51cmx9PyR7dXJsUGFyYW1zfWAgOiBvcHRpb25zLnVybDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHJlcXVlc3RJbml0KTtcbiAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7XG4gICAgICAgIC8vIERlZmF1bHQgdG8gJ3RleHQnIHJlc3BvbnNlVHlwZSBzbyBubyBwYXJzaW5nIGhhcHBlbnNcbiAgICAgICAgbGV0IHsgcmVzcG9uc2VUeXBlID0gJ3RleHQnIH0gPSByZXNwb25zZS5vayA/IG9wdGlvbnMgOiB7fTtcbiAgICAgICAgLy8gSWYgdGhlIHJlc3BvbnNlIGNvbnRlbnQtdHlwZSBpcyBqc29uLCBmb3JjZSB0aGUgcmVzcG9uc2UgdG8gYmUganNvblxuICAgICAgICBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRhO1xuICAgICAgICBsZXQgYmxvYjtcbiAgICAgICAgc3dpdGNoIChyZXNwb25zZVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2FycmF5YnVmZmVyJzpcbiAgICAgICAgICAgIGNhc2UgJ2Jsb2InOlxuICAgICAgICAgICAgICAgIGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHJlYWRCbG9iQXNCYXNlNjQoYmxvYik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdqc29uJzpcbiAgICAgICAgICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZG9jdW1lbnQnOlxuICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29udmVydCBmZXRjaCBoZWFkZXJzIHRvIENhcGFjaXRvciBIdHRwSGVhZGVyc1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgIHJlc3BvbnNlLmhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgaGVhZGVyc1trZXldID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgIHVybDogcmVzcG9uc2UudXJsLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFuIEh0dHAgR0VUIHJlcXVlc3QgZ2l2ZW4gYSBzZXQgb2Ygb3B0aW9uc1xuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gYnVpbGQgdGhlIEhUVFAgcmVxdWVzdFxuICAgICAqL1xuICAgIGFzeW5jIGdldChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgeyBtZXRob2Q6ICdHRVQnIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhbiBIdHRwIFBPU1QgcmVxdWVzdCBnaXZlbiBhIHNldCBvZiBvcHRpb25zXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0byBidWlsZCB0aGUgSFRUUCByZXF1ZXN0XG4gICAgICovXG4gICAgYXN5bmMgcG9zdChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgeyBtZXRob2Q6ICdQT1NUJyB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYW4gSHR0cCBQVVQgcmVxdWVzdCBnaXZlbiBhIHNldCBvZiBvcHRpb25zXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0byBidWlsZCB0aGUgSFRUUCByZXF1ZXN0XG4gICAgICovXG4gICAgYXN5bmMgcHV0KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IG1ldGhvZDogJ1BVVCcgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFuIEh0dHAgUEFUQ0ggcmVxdWVzdCBnaXZlbiBhIHNldCBvZiBvcHRpb25zXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0byBidWlsZCB0aGUgSFRUUCByZXF1ZXN0XG4gICAgICovXG4gICAgYXN5bmMgcGF0Y2gob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgbWV0aG9kOiAnUEFUQ0gnIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhbiBIdHRwIERFTEVURSByZXF1ZXN0IGdpdmVuIGEgc2V0IG9mIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRvIGJ1aWxkIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgKi9cbiAgICBhc3luYyBkZWxldGUob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgbWV0aG9kOiAnREVMRVRFJyB9KSk7XG4gICAgfVxufVxuY29uc3QgQ2FwYWNpdG9ySHR0cCA9IHJlZ2lzdGVyUGx1Z2luKCdDYXBhY2l0b3JIdHRwJywge1xuICAgIHdlYjogKCkgPT4gbmV3IENhcGFjaXRvckh0dHBQbHVnaW5XZWIoKSxcbn0pO1xuLyoqKioqKioqIEVORCBIVFRQIFBMVUdJTiAqKioqKioqKi9cblxuZXhwb3J0IHsgQ2FwYWNpdG9yLCBDYXBhY2l0b3JDb29raWVzLCBDYXBhY2l0b3JFeGNlcHRpb24sIENhcGFjaXRvckh0dHAsIENhcGFjaXRvclBsYXRmb3JtcywgRXhjZXB0aW9uQ29kZSwgUGx1Z2lucywgV2ViUGx1Z2luLCBXZWJWaWV3LCBhZGRQbGF0Zm9ybSwgcmVnaXN0ZXJQbHVnaW4sIHJlZ2lzdGVyV2ViUGx1Z2luLCBzZXRQbGF0Zm9ybSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJpbXBvcnQgeyByZWdpc3RlclBsdWdpbiB9IGZyb20gJ0BjYXBhY2l0b3IvY29yZSc7XG5jb25zdCBTcGxhc2hTY3JlZW4gPSByZWdpc3RlclBsdWdpbignU3BsYXNoU2NyZWVuJywge1xuICAgIHdlYjogKCkgPT4gaW1wb3J0KCcuL3dlYicpLnRoZW4obSA9PiBuZXcgbS5TcGxhc2hTY3JlZW5XZWIoKSksXG59KTtcbmV4cG9ydCAqIGZyb20gJy4vZGVmaW5pdGlvbnMnO1xuZXhwb3J0IHsgU3BsYXNoU2NyZWVuIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBUSElTIEZJTEUgSVMgR0VORVJBVEVEIEFVVE9NQVRJQ0FMTFkuXG4gKiBETyBOT1QgRURJVC5cbiAqXG4gKiBZb3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgb24gYWRkaW5nIHN0YXJ0dXAvaW5pdGlhbGl6YXRpb24gY29kZS5cbiAqIFVzZSBcInF1YXNhciBuZXcgYm9vdCA8bmFtZT5cIiBhbmQgYWRkIGl0IHRoZXJlLlxuICogT25lIGJvb3QgZmlsZSBwZXIgY29uY2Vybi4gVGhlbiByZWZlcmVuY2UgdGhlIGZpbGUocykgaW4gcXVhc2FyLmNvbmZpZy5qcyA+IGJvb3Q6XG4gKiBib290OiBbJ2ZpbGUnLCAuLi5dIC8vIGRvIG5vdCBhZGQgXCIuanNcIiBleHRlbnNpb24gdG8gaXQuXG4gKlxuICogQm9vdCBmaWxlcyBhcmUgeW91ciBcIm1haW4uanNcIlxuICoqL1xuXG5cblxuaW1wb3J0IHsgUXVhc2FyIH0gZnJvbSAncXVhc2FyJ1xuaW1wb3J0IHsgbWFya1JhdyB9IGZyb20gJ3Z1ZSdcbmltcG9ydCBBcHBDb21wb25lbnQgZnJvbSAnYXBwL3NyYy9BcHAudnVlJ1xuXG5pbXBvcnQgY3JlYXRlU3RvcmUgZnJvbSAnYXBwL3NyYy9zdG9yZXMvaW5kZXgnXG5pbXBvcnQgY3JlYXRlUm91dGVyIGZyb20gJ2FwcC9zcmMvcm91dGVyL2luZGV4J1xuXG5cbiAgXG4gIGltcG9ydCAnQGNhcGFjaXRvci9jb3JlJ1xuICAgIFxuICAgIFxuICAgIGltcG9ydCB7IFNwbGFzaFNjcmVlbiB9IGZyb20gJ0BjYXBhY2l0b3Ivc3BsYXNoLXNjcmVlbidcbiAgICBcbiAgXG5cblxuXG5pbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIGgsIG9uTW91bnRlZCB9IGZyb20gJ3Z1ZSdcbmNvbnN0IFJvb3RDb21wb25lbnQgPSBkZWZpbmVDb21wb25lbnQoe1xuICBuYW1lOiAnQXBwV3JhcHBlcicsXG4gIHNldHVwIChwcm9wcykge1xuICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICBcbiAgICAgIFNwbGFzaFNjcmVlbi5oaWRlKClcbiAgICAgIFxuXG4gICAgICBcblxuICAgICAgXG4gICAgfSlcblxuICAgIHJldHVybiAoKSA9PiBoKEFwcENvbXBvbmVudCwgcHJvcHMpXG4gIH1cbn0pXG5cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIChjcmVhdGVBcHBGbiwgcXVhc2FyVXNlck9wdGlvbnMpIHtcbiAgLy8gQ3JlYXRlIHRoZSBhcHAgaW5zdGFuY2UuXG4gIC8vIEhlcmUgd2UgaW5qZWN0IGludG8gaXQgdGhlIFF1YXNhciBVSSwgdGhlIHJvdXRlciAmIHBvc3NpYmx5IHRoZSBzdG9yZS5cbiAgY29uc3QgYXBwID0gY3JlYXRlQXBwRm4oUm9vdENvbXBvbmVudClcblxuICBcbiAgYXBwLmNvbmZpZy5wZXJmb3JtYW5jZSA9IHRydWVcbiAgXG5cbiAgYXBwLnVzZShRdWFzYXIsIHF1YXNhclVzZXJPcHRpb25zKVxuXG4gIFxuICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHEuY2FwYWNpdG9yID0gd2luZG93LkNhcGFjaXRvclxuICBcblxuICBcbiAgICBjb25zdCBzdG9yZSA9IHR5cGVvZiBjcmVhdGVTdG9yZSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgPyBhd2FpdCBjcmVhdGVTdG9yZSh7fSlcbiAgICAgIDogY3JlYXRlU3RvcmVcblxuICAgIFxuICAgICAgYXBwLnVzZShzdG9yZSlcblxuICAgICAgXG4gICAgXG4gIFxuXG4gIGNvbnN0IHJvdXRlciA9IG1hcmtSYXcoXG4gICAgdHlwZW9mIGNyZWF0ZVJvdXRlciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgPyBhd2FpdCBjcmVhdGVSb3V0ZXIoe3N0b3JlfSlcbiAgICAgIDogY3JlYXRlUm91dGVyXG4gIClcblxuICBcbiAgICAvLyBtYWtlIHJvdXRlciBpbnN0YW5jZSBhdmFpbGFibGUgaW4gc3RvcmVcbiAgICBcbiAgICAgIHN0b3JlLnVzZSgoeyBzdG9yZSB9KSA9PiB7IHN0b3JlLnJvdXRlciA9IHJvdXRlciB9KVxuICAgIFxuICBcblxuICAvLyBFeHBvc2UgdGhlIGFwcCwgdGhlIHJvdXRlciBhbmQgdGhlIHN0b3JlLlxuICAvLyBOb3RlIHRoYXQgd2UgYXJlIG5vdCBtb3VudGluZyB0aGUgYXBwIGhlcmUsIHNpbmNlIGJvb3RzdHJhcHBpbmcgd2lsbCBiZVxuICAvLyBkaWZmZXJlbnQgZGVwZW5kaW5nIG9uIHdoZXRoZXIgd2UgYXJlIGluIGEgYnJvd3NlciBvciBvbiB0aGUgc2VydmVyLlxuICByZXR1cm4ge1xuICAgIGFwcCxcbiAgICBzdG9yZSxcbiAgICByb3V0ZXJcbiAgfVxufVxuIiwiaW1wb3J0IHsgZ2xvYmFsQ29uZmlnIH0gZnJvbSAnLi9nbG9iYWwtY29uZmlnLmpzJ1xuXG5jb25zdCBnbG9iYWxOb2RlcyA9IFtdXG5sZXQgdGFyZ2V0ID0gX19RVUFTQVJfU1NSX1NFUlZFUl9fXG4gID8gdm9pZCAwXG4gIDogZG9jdW1lbnQuYm9keVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR2xvYmFsTm9kZSAoaWQpIHtcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gIGlmIChpZCAhPT0gdm9pZCAwKSB7XG4gICAgZWwuaWQgPSBpZFxuICB9XG5cbiAgaWYgKGdsb2JhbENvbmZpZy5nbG9iYWxOb2RlcyAhPT0gdm9pZCAwKSB7XG4gICAgY29uc3QgY2xzID0gZ2xvYmFsQ29uZmlnLmdsb2JhbE5vZGVzLmNsYXNzXG4gICAgaWYgKGNscyAhPT0gdm9pZCAwKSB7XG4gICAgICBlbC5jbGFzc05hbWUgPSBjbHNcbiAgICB9XG4gIH1cblxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpXG4gIGdsb2JhbE5vZGVzLnB1c2goZWwpXG5cbiAgcmV0dXJuIGVsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVHbG9iYWxOb2RlIChlbCkge1xuICBnbG9iYWxOb2Rlcy5zcGxpY2UoZ2xvYmFsTm9kZXMuaW5kZXhPZihlbCksIDEpXG4gIGVsLnJlbW92ZSgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VHbG9iYWxOb2Rlc1RhcmdldCAoZWwpIHtcbiAgaWYgKGVsICE9PSB0YXJnZXQpIHtcbiAgICB0YXJnZXQgPSBlbFxuXG4gICAgZ2xvYmFsTm9kZXMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBpZiAoZWwuY29udGFpbnModGFyZ2V0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgbWFya1JhdyB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbXBvbmVudCA9IHJhdyA9PiBtYXJrUmF3KGRlZmluZUNvbXBvbmVudChyYXcpKVxuZXhwb3J0IGNvbnN0IGNyZWF0ZURpcmVjdGl2ZSA9IHJhdyA9PiBtYXJrUmF3KHJhdylcbiIsImNvbnN0IHVuaXRzID0gWyAnQicsICdLQicsICdNQicsICdHQicsICdUQicsICdQQicgXVxuXG5leHBvcnQgZnVuY3Rpb24gaHVtYW5TdG9yYWdlU2l6ZSAoYnl0ZXMpIHtcbiAgbGV0IHUgPSAwXG5cbiAgd2hpbGUgKHBhcnNlSW50KGJ5dGVzLCAxMCkgPj0gMTAyNCAmJiB1IDwgdW5pdHMubGVuZ3RoIC0gMSkge1xuICAgIGJ5dGVzIC89IDEwMjRcbiAgICArK3VcbiAgfVxuXG4gIHJldHVybiBgJHsgYnl0ZXMudG9GaXhlZCgxKSB9JHsgdW5pdHNbIHUgXSB9YFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FwaXRhbGl6ZSAoc3RyKSB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJldHdlZW4gKHYsIG1pbiwgbWF4KSB7XG4gIHJldHVybiBtYXggPD0gbWluXG4gICAgPyBtaW5cbiAgICA6IE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2KSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVRvSW50ZXJ2YWwgKHYsIG1pbiwgbWF4KSB7XG4gIGlmIChtYXggPD0gbWluKSB7XG4gICAgcmV0dXJuIG1pblxuICB9XG5cbiAgY29uc3Qgc2l6ZSA9IChtYXggLSBtaW4gKyAxKVxuXG4gIGxldCBpbmRleCA9IG1pbiArICh2IC0gbWluKSAlIHNpemVcbiAgaWYgKGluZGV4IDwgbWluKSB7XG4gICAgaW5kZXggPSBzaXplICsgaW5kZXhcbiAgfVxuXG4gIHJldHVybiBpbmRleCA9PT0gMCA/IDAgOiBpbmRleCAvLyBmaXggZm9yICgtYSAlIGEpID0+IC0wXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWQgKHYsIGxlbmd0aCA9IDIsIGNoYXIgPSAnMCcpIHtcbiAgaWYgKHYgPT09IHZvaWQgMCB8fCB2ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHZcbiAgfVxuXG4gIGNvbnN0IHZhbCA9ICcnICsgdlxuICByZXR1cm4gdmFsLmxlbmd0aCA+PSBsZW5ndGhcbiAgICA/IHZhbFxuICAgIDogbmV3IEFycmF5KGxlbmd0aCAtIHZhbC5sZW5ndGggKyAxKS5qb2luKGNoYXIpICsgdmFsXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaHVtYW5TdG9yYWdlU2l6ZSxcbiAgY2FwaXRhbGl6ZSxcbiAgYmV0d2VlbixcbiAgbm9ybWFsaXplVG9JbnRlcnZhbCxcbiAgcGFkXG59XG4iLCJpbXBvcnQgeyBoLCByZWYsIGNvbXB1dGVkLCBvbk1vdW50ZWQsIG9uQmVmb3JlVW5tb3VudCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGJldHdlZW4gfSBmcm9tICcuLi8uLi91dGlscy9mb3JtYXQuanMnXG5cbmNvbnN0XG4gIHhociA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfXyA/IG51bGwgOiBYTUxIdHRwUmVxdWVzdCxcbiAgb3BlbiA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfXyA/IG51bGwgOiB4aHIucHJvdG90eXBlLm9wZW4sXG4gIHBvc2l0aW9uVmFsdWVzID0gWyAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0JyBdXG5cbmxldCBzdGFjayA9IFtdXG5sZXQgaGlnaGphY2tDb3VudCA9IDBcblxuZnVuY3Rpb24gdHJhbnNsYXRlICh7IHAsIHBvcywgYWN0aXZlLCBob3JpeiwgcmV2ZXJzZSwgZGlyIH0pIHtcbiAgbGV0IHggPSAxLCB5ID0gMVxuXG4gIGlmIChob3JpeiA9PT0gdHJ1ZSkge1xuICAgIGlmIChyZXZlcnNlID09PSB0cnVlKSB7IHggPSAtMSB9XG4gICAgaWYgKHBvcyA9PT0gJ2JvdHRvbScpIHsgeSA9IC0xIH1cbiAgICByZXR1cm4geyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUzZCgkeyB4ICogKHAgLSAxMDApIH0lLCR7IGFjdGl2ZSA/IDAgOiB5ICogLTIwMCB9JSwwKWAgfVxuICB9XG5cbiAgaWYgKHJldmVyc2UgPT09IHRydWUpIHsgeSA9IC0xIH1cbiAgaWYgKHBvcyA9PT0gJ3JpZ2h0JykgeyB4ID0gLTEgfVxuICByZXR1cm4geyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUzZCgkeyBhY3RpdmUgPyAwIDogZGlyICogeCAqIC0yMDAgfSUsJHsgeSAqIChwIC0gMTAwKSB9JSwwKWAgfVxufVxuXG5mdW5jdGlvbiBpbmMgKHAsIGFtb3VudCkge1xuICBpZiAodHlwZW9mIGFtb3VudCAhPT0gJ251bWJlcicpIHtcbiAgICBpZiAocCA8IDI1KSB7XG4gICAgICBhbW91bnQgPSBNYXRoLnJhbmRvbSgpICogMyArIDNcbiAgICB9XG4gICAgZWxzZSBpZiAocCA8IDY1KSB7XG4gICAgICBhbW91bnQgPSBNYXRoLnJhbmRvbSgpICogM1xuICAgIH1cbiAgICBlbHNlIGlmIChwIDwgODUpIHtcbiAgICAgIGFtb3VudCA9IE1hdGgucmFuZG9tKCkgKiAyXG4gICAgfVxuICAgIGVsc2UgaWYgKHAgPCA5OSkge1xuICAgICAgYW1vdW50ID0gMC42XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgYW1vdW50ID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gYmV0d2VlbihwICsgYW1vdW50LCAwLCAxMDApXG59XG5cbmZ1bmN0aW9uIGhpZ2hqYWNrQWpheCAoc3RhY2tFbnRyeSkge1xuICBoaWdoamFja0NvdW50KytcblxuICBzdGFjay5wdXNoKHN0YWNrRW50cnkpXG5cbiAgaWYgKGhpZ2hqYWNrQ291bnQgPiAxKSB7IHJldHVybiB9XG5cbiAgeGhyLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKF8sIHVybCkge1xuICAgIGNvbnN0IHN0b3BTdGFjayA9IFtdXG5cbiAgICBjb25zdCBsb2FkU3RhcnQgPSAoKSA9PiB7XG4gICAgICBzdGFjay5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGVudHJ5LmhpamFja0ZpbHRlci52YWx1ZSA9PT0gbnVsbFxuICAgICAgICAgIHx8IChlbnRyeS5oaWphY2tGaWx0ZXIudmFsdWUodXJsKSA9PT0gdHJ1ZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgZW50cnkuc3RhcnQoKVxuICAgICAgICAgIHN0b3BTdGFjay5wdXNoKGVudHJ5LnN0b3ApXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgbG9hZEVuZCA9ICgpID0+IHtcbiAgICAgIHN0b3BTdGFjay5mb3JFYWNoKHN0b3AgPT4geyBzdG9wKCkgfSlcbiAgICB9XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRzdGFydCcsIGxvYWRTdGFydCwgeyBvbmNlOiB0cnVlIH0pXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdsb2FkZW5kJywgbG9hZEVuZCwgeyBvbmNlOiB0cnVlIH0pXG5cbiAgICBvcGVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgfVxufVxuXG5mdW5jdGlvbiByZXN0b3JlQWpheCAoc3RhcnQpIHtcbiAgc3RhY2sgPSBzdGFjay5maWx0ZXIoZW50cnkgPT4gZW50cnkuc3RhcnQgIT09IHN0YXJ0KVxuXG4gIGhpZ2hqYWNrQ291bnQgPSBNYXRoLm1heCgwLCBoaWdoamFja0NvdW50IC0gMSlcbiAgaWYgKGhpZ2hqYWNrQ291bnQgPT09IDApIHtcbiAgICB4aHIucHJvdG90eXBlLm9wZW4gPSBvcGVuXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FBamF4QmFyJyxcblxuICBwcm9wczoge1xuICAgIHBvc2l0aW9uOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAndG9wJyxcbiAgICAgIHZhbGlkYXRvcjogdmFsID0+IHBvc2l0aW9uVmFsdWVzLmluY2x1ZGVzKHZhbClcbiAgICB9LFxuXG4gICAgc2l6ZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJzJweCdcbiAgICB9LFxuXG4gICAgY29sb3I6IFN0cmluZyxcbiAgICBza2lwSGlqYWNrOiBCb29sZWFuLFxuICAgIHJldmVyc2U6IEJvb2xlYW4sXG5cbiAgICBoaWphY2tGaWx0ZXI6IEZ1bmN0aW9uXG4gIH0sXG5cbiAgZW1pdHM6IFsgJ3N0YXJ0JywgJ3N0b3AnIF0sXG5cbiAgc2V0dXAgKHByb3BzLCB7IGVtaXQgfSkge1xuICAgIGNvbnN0IHsgcHJveHkgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG5cbiAgICBjb25zdCBwcm9ncmVzcyA9IHJlZigwKVxuICAgIGNvbnN0IG9uU2NyZWVuID0gcmVmKGZhbHNlKVxuICAgIGNvbnN0IGFuaW1hdGUgPSByZWYodHJ1ZSlcblxuICAgIGxldCBzZXNzaW9ucyA9IDAsIHRpbWVyLCBzcGVlZFxuXG4gICAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBgcS1sb2FkaW5nLWJhciBxLWxvYWRpbmctYmFyLS0keyBwcm9wcy5wb3NpdGlvbiB9YFxuICAgICAgKyAocHJvcHMuY29sb3IgIT09IHZvaWQgMCA/IGAgYmctJHsgcHJvcHMuY29sb3IgfWAgOiAnJylcbiAgICAgICsgKGFuaW1hdGUudmFsdWUgPT09IHRydWUgPyAnJyA6ICcgbm8tdHJhbnNpdGlvbicpXG4gICAgKVxuXG4gICAgY29uc3QgaG9yaXpvbnRhbCA9IGNvbXB1dGVkKCgpID0+IHByb3BzLnBvc2l0aW9uID09PSAndG9wJyB8fCBwcm9wcy5wb3NpdGlvbiA9PT0gJ2JvdHRvbScpXG4gICAgY29uc3Qgc2l6ZVByb3AgPSBjb21wdXRlZCgoKSA9PiAoaG9yaXpvbnRhbC52YWx1ZSA9PT0gdHJ1ZSA/ICdoZWlnaHQnIDogJ3dpZHRoJykpXG5cbiAgICBjb25zdCBzdHlsZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZSA9IG9uU2NyZWVuLnZhbHVlXG5cbiAgICAgIGNvbnN0IG9iaiA9IHRyYW5zbGF0ZSh7XG4gICAgICAgIHA6IHByb2dyZXNzLnZhbHVlLFxuICAgICAgICBwb3M6IHByb3BzLnBvc2l0aW9uLFxuICAgICAgICBhY3RpdmUsXG4gICAgICAgIGhvcml6OiBob3Jpem9udGFsLnZhbHVlLFxuICAgICAgICByZXZlcnNlOiBwcm94eS4kcS5sYW5nLnJ0bCA9PT0gdHJ1ZSAmJiBbICd0b3AnLCAnYm90dG9tJyBdLmluY2x1ZGVzKHByb3BzLnBvc2l0aW9uKVxuICAgICAgICAgID8gcHJvcHMucmV2ZXJzZSA9PT0gZmFsc2VcbiAgICAgICAgICA6IHByb3BzLnJldmVyc2UsXG4gICAgICAgIGRpcjogcHJveHkuJHEubGFuZy5ydGwgPT09IHRydWUgPyAtMSA6IDFcbiAgICAgIH0pXG5cbiAgICAgIG9ialsgc2l6ZVByb3AudmFsdWUgXSA9IHByb3BzLnNpemVcbiAgICAgIG9iai5vcGFjaXR5ID0gYWN0aXZlID8gMSA6IDBcblxuICAgICAgcmV0dXJuIG9ialxuICAgIH0pXG5cbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgb25TY3JlZW4udmFsdWUgPT09IHRydWVcbiAgICAgICAgPyB7XG4gICAgICAgICAgICByb2xlOiAncHJvZ3Jlc3NiYXInLFxuICAgICAgICAgICAgJ2FyaWEtdmFsdWVtaW4nOiAwLFxuICAgICAgICAgICAgJ2FyaWEtdmFsdWVtYXgnOiAxMDAsXG4gICAgICAgICAgICAnYXJpYS12YWx1ZW5vdyc6IHByb2dyZXNzLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICA6IHsgJ2FyaWEtaGlkZGVuJzogJ3RydWUnIH1cbiAgICApKVxuXG4gICAgZnVuY3Rpb24gc3RhcnQgKG5ld1NwZWVkID0gMzAwKSB7XG4gICAgICBjb25zdCBvbGRTcGVlZCA9IHNwZWVkXG4gICAgICBzcGVlZCA9IE1hdGgubWF4KDAsIG5ld1NwZWVkKSB8fCAwXG5cbiAgICAgIHNlc3Npb25zKytcblxuICAgICAgaWYgKHNlc3Npb25zID4gMSkge1xuICAgICAgICBpZiAob2xkU3BlZWQgPT09IDAgJiYgbmV3U3BlZWQgPiAwKSB7XG4gICAgICAgICAgcGxhbk5leHRTdGVwKClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvbGRTcGVlZCA+IDAgJiYgbmV3U3BlZWQgPD0gMCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZXNzaW9uc1xuICAgICAgfVxuXG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpXG4gICAgICBlbWl0KCdzdGFydCcpXG5cbiAgICAgIHByb2dyZXNzLnZhbHVlID0gMFxuXG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBhbmltYXRlLnZhbHVlID0gdHJ1ZVxuICAgICAgICBuZXdTcGVlZCA+IDAgJiYgcGxhbk5leHRTdGVwKClcbiAgICAgIH0sIG9uU2NyZWVuLnZhbHVlID09PSB0cnVlID8gNTAwIDogMSlcblxuICAgICAgaWYgKG9uU2NyZWVuLnZhbHVlICE9PSB0cnVlKSB7XG4gICAgICAgIG9uU2NyZWVuLnZhbHVlID0gdHJ1ZVxuICAgICAgICBhbmltYXRlLnZhbHVlID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlc3Npb25zXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5jcmVtZW50IChhbW91bnQpIHtcbiAgICAgIGlmIChzZXNzaW9ucyA+IDApIHtcbiAgICAgICAgcHJvZ3Jlc3MudmFsdWUgPSBpbmMocHJvZ3Jlc3MudmFsdWUsIGFtb3VudClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlc3Npb25zXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RvcCAoKSB7XG4gICAgICBzZXNzaW9ucyA9IE1hdGgubWF4KDAsIHNlc3Npb25zIC0gMSlcbiAgICAgIGlmIChzZXNzaW9ucyA+IDApIHtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25zXG4gICAgICB9XG5cbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgIGVtaXQoJ3N0b3AnKVxuXG4gICAgICBjb25zdCBlbmQgPSAoKSA9PiB7XG4gICAgICAgIGFuaW1hdGUudmFsdWUgPSB0cnVlXG4gICAgICAgIHByb2dyZXNzLnZhbHVlID0gMTAwXG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgb25TY3JlZW4udmFsdWUgPSBmYWxzZVxuICAgICAgICB9LCAxMDAwKVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvZ3Jlc3MudmFsdWUgPT09IDApIHtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGVuZCwgMSlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBlbmQoKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2Vzc2lvbnNcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwbGFuTmV4dFN0ZXAgKCkge1xuICAgICAgaWYgKHByb2dyZXNzLnZhbHVlIDwgMTAwKSB7XG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaW5jcmVtZW50KClcbiAgICAgICAgICBwbGFuTmV4dFN0ZXAoKVxuICAgICAgICB9LCBzcGVlZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgaGlqYWNrZWRcblxuICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICBpZiAocHJvcHMuc2tpcEhpamFjayAhPT0gdHJ1ZSkge1xuICAgICAgICBoaWphY2tlZCA9IHRydWVcbiAgICAgICAgaGlnaGphY2tBamF4KHtcbiAgICAgICAgICBzdGFydCxcbiAgICAgICAgICBzdG9wLFxuICAgICAgICAgIGhpamFja0ZpbHRlcjogY29tcHV0ZWQoKCkgPT4gcHJvcHMuaGlqYWNrRmlsdGVyIHx8IG51bGwpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcblxuICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpXG4gICAgICBoaWphY2tlZCA9PT0gdHJ1ZSAmJiByZXN0b3JlQWpheChzdGFydClcbiAgICB9KVxuXG4gICAgLy8gZXhwb3NlIHB1YmxpYyBtZXRob2RzXG4gICAgT2JqZWN0LmFzc2lnbihwcm94eSwgeyBzdGFydCwgc3RvcCwgaW5jcmVtZW50IH0pXG5cbiAgICByZXR1cm4gKCkgPT4gaCgnZGl2Jywge1xuICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICBzdHlsZTogc3R5bGUudmFsdWUsXG4gICAgICAuLi5hdHRyaWJ1dGVzLnZhbHVlXG4gICAgfSlcbiAgfVxufSlcbiIsImltcG9ydCB7IGgsIHJlZiB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IGRlZmluZVJlYWN0aXZlUGx1Z2luIGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvZGVmaW5lLXJlYWN0aXZlLXBsdWdpbi5qcydcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IGNyZWF0ZUdsb2JhbE5vZGUgfSBmcm9tICcuLi91dGlscy9wcml2YXRlL2dsb2JhbC1ub2Rlcy5qcydcbmltcG9ydCB7IGNyZWF0ZUNoaWxkQXBwIH0gZnJvbSAnLi4vaW5zdGFsbC1xdWFzYXIuanMnXG5cbmltcG9ydCBRQWpheEJhciBmcm9tICcuLi9jb21wb25lbnRzL2FqYXgtYmFyL1FBamF4QmFyLmpzJ1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuLi91dGlscy9pcy5qcydcblxuY29uc3QgYmFyUmVmID0gcmVmKG51bGwpXG5cbmNvbnN0IFBsdWdpbiA9IGRlZmluZVJlYWN0aXZlUGx1Z2luKHtcbiAgaXNBY3RpdmU6IGZhbHNlXG59LCB7XG4gIHN0YXJ0OiBub29wLFxuICBzdG9wOiBub29wLFxuICBpbmNyZW1lbnQ6IG5vb3AsXG4gIHNldERlZmF1bHRzOiBub29wLFxuXG4gIGluc3RhbGwgKHsgJHEsIHBhcmVudEFwcCB9KSB7XG4gICAgJHEubG9hZGluZ0JhciA9IHRoaXNcblxuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHsgcmV0dXJuIH1cblxuICAgIGlmICh0aGlzLl9faW5zdGFsbGVkID09PSB0cnVlKSB7XG4gICAgICBpZiAoJHEuY29uZmlnLmxvYWRpbmdCYXIgIT09IHZvaWQgMCkge1xuICAgICAgICB0aGlzLnNldERlZmF1bHRzKCRxLmNvbmZpZy5sb2FkaW5nQmFyKVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcHJvcHMgPSByZWYoXG4gICAgICAkcS5jb25maWcubG9hZGluZ0JhciAhPT0gdm9pZCAwXG4gICAgICAgID8geyAuLi4kcS5jb25maWcubG9hZGluZ0JhciB9XG4gICAgICAgIDoge31cbiAgICApXG5cbiAgICBmdW5jdGlvbiBvblN0YXJ0ICgpIHtcbiAgICAgIFBsdWdpbi5pc0FjdGl2ZSA9IHRydWVcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblN0b3AgKCkge1xuICAgICAgUGx1Z2luLmlzQWN0aXZlID0gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBlbCA9IGNyZWF0ZUdsb2JhbE5vZGUoJ3EtbG9hZGluZy1iYXInKVxuXG4gICAgY3JlYXRlQ2hpbGRBcHAoe1xuICAgICAgbmFtZTogJ0xvYWRpbmdCYXInLFxuXG4gICAgICAvLyBoaWRlIEFwcCBmcm9tIFZ1ZSBkZXZ0b29sc1xuICAgICAgZGV2dG9vbHM6IHsgaGlkZTogdHJ1ZSB9LFxuXG4gICAgICBzZXR1cDogKCkgPT4gKCkgPT4gaChRQWpheEJhciwgeyAuLi5wcm9wcy52YWx1ZSwgb25TdGFydCwgb25TdG9wLCByZWY6IGJhclJlZiB9KVxuICAgIH0sIHBhcmVudEFwcCkubW91bnQoZWwpXG5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIHtcbiAgICAgIHN0YXJ0IChzcGVlZCkge1xuICAgICAgICBiYXJSZWYudmFsdWUuc3RhcnQoc3BlZWQpXG4gICAgICB9LFxuICAgICAgc3RvcCAoKSB7XG4gICAgICAgIGJhclJlZi52YWx1ZS5zdG9wKClcbiAgICAgIH0sXG4gICAgICBpbmNyZW1lbnQgKCkge1xuICAgICAgICBiYXJSZWYudmFsdWUuaW5jcmVtZW50LmFwcGx5KG51bGwsIGFyZ3VtZW50cylcbiAgICAgIH0sXG4gICAgICBzZXREZWZhdWx0cyAob3B0cykge1xuICAgICAgICBpZiAoaXNPYmplY3Qob3B0cykgPT09IHRydWUpIHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHByb3BzLnZhbHVlLCBvcHRzKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxufSlcblxuZXhwb3J0IGRlZmF1bHQgUGx1Z2luXG4iLCJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IHVzZVNpemVEZWZhdWx0cyA9IHtcbiAgeHM6IDE4LFxuICBzbTogMjQsXG4gIG1kOiAzMixcbiAgbGc6IDM4LFxuICB4bDogNDZcbn1cblxuZXhwb3J0IGNvbnN0IHVzZVNpemVQcm9wcyA9IHtcbiAgc2l6ZTogU3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcywgc2l6ZXMgPSB1c2VTaXplRGVmYXVsdHMpIHtcbiAgLy8gcmV0dXJuIHNpemVTdHlsZVxuICByZXR1cm4gY29tcHV0ZWQoKCkgPT4gKFxuICAgIHByb3BzLnNpemUgIT09IHZvaWQgMFxuICAgICAgPyB7IGZvbnRTaXplOiBwcm9wcy5zaXplIGluIHNpemVzID8gYCR7IHNpemVzWyBwcm9wcy5zaXplIF0gfXB4YCA6IHByb3BzLnNpemUgfVxuICAgICAgOiBudWxsXG4gICkpXG59XG4iLCJpbXBvcnQgeyBoLCB3aXRoRGlyZWN0aXZlcyB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGZ1bmN0aW9uIGhTbG90IChzbG90LCBvdGhlcndpc2UpIHtcbiAgcmV0dXJuIHNsb3QgIT09IHZvaWQgMFxuICAgID8gc2xvdCgpIHx8IG90aGVyd2lzZVxuICAgIDogb3RoZXJ3aXNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoVW5pcXVlU2xvdCAoc2xvdCwgb3RoZXJ3aXNlKSB7XG4gIGlmIChzbG90ICE9PSB2b2lkIDApIHtcbiAgICBjb25zdCB2bm9kZSA9IHNsb3QoKVxuICAgIGlmICh2bm9kZSAhPT0gdm9pZCAwICYmIHZub2RlICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdm5vZGUuc2xpY2UoKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdGhlcndpc2Vcbn1cblxuLyoqXG4gKiBTb3VyY2UgZGVmaW5pdGVseSBleGlzdHMsXG4gKiBzbyBpdCdzIG1lcmdlZCB3aXRoIHRoZSBwb3NzaWJsZSBzbG90XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoTWVyZ2VTbG90IChzbG90LCBzb3VyY2UpIHtcbiAgcmV0dXJuIHNsb3QgIT09IHZvaWQgMFxuICAgID8gc291cmNlLmNvbmNhdChzbG90KCkpXG4gICAgOiBzb3VyY2Vcbn1cblxuLyoqXG4gKiBNZXJnZSB3aXRoIHBvc3NpYmxlIHNsb3QsXG4gKiBldmVuIGlmIHNvdXJjZSBtaWdodCBub3QgZXhpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhNZXJnZVNsb3RTYWZlbHkgKHNsb3QsIHNvdXJjZSkge1xuICBpZiAoc2xvdCA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHNvdXJjZVxuICB9XG5cbiAgcmV0dXJuIHNvdXJjZSAhPT0gdm9pZCAwXG4gICAgPyBzb3VyY2UuY29uY2F0KHNsb3QoKSlcbiAgICA6IHNsb3QoKVxufVxuXG4vKlxuICogKFN0cmluZykgIGtleSAgICAgICAtIHVuaXF1ZSB2bm9kZSBrZXlcbiAqIChCb29sZWFuKSBjb25kaXRpb24gLSBzaG91bGQgY2hhbmdlIE9OTFkgd2hlbiBhZGRpbmcvcmVtb3ZpbmcgZGlyZWN0aXZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoRGlyIChcbiAgdGFnLFxuICBkYXRhLFxuICBjaGlsZHJlbixcbiAga2V5LFxuICBjb25kaXRpb24sXG4gIGdldERpcnNGblxuKSB7XG4gIGRhdGEua2V5ID0ga2V5ICsgY29uZGl0aW9uXG5cbiAgY29uc3Qgdm5vZGUgPSBoKHRhZywgZGF0YSwgY2hpbGRyZW4pXG5cbiAgcmV0dXJuIGNvbmRpdGlvbiA9PT0gdHJ1ZVxuICAgID8gd2l0aERpcmVjdGl2ZXModm5vZGUsIGdldERpcnNGbigpKVxuICAgIDogdm5vZGVcbn1cbiIsImltcG9ydCB7IGgsIGNvbXB1dGVkLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VTaXplLCB7IHVzZVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXNpemUuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgaFNsb3QsIGhNZXJnZVNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3JlbmRlci5qcydcblxuY29uc3QgZGVmYXVsdFZpZXdCb3ggPSAnMCAwIDI0IDI0J1xuXG5jb25zdCBzYW1lRm4gPSBpID0+IGlcbmNvbnN0IGlvbkZuID0gaSA9PiBgaW9uaWNvbnMgJHsgaSB9YFxuXG5jb25zdCBsaWJNYXAgPSB7XG4gICdtZGktJzogaSA9PiBgbWRpICR7IGkgfWAsXG4gICdpY29uLSc6IHNhbWVGbiwgLy8gZm9udGF3ZXNvbWUgZXF1aXZcbiAgJ2J0LSc6IGkgPT4gYGJ0ICR7IGkgfWAsXG4gICdldmEtJzogaSA9PiBgZXZhICR7IGkgfWAsXG4gICdpb24tbWQnOiBpb25GbixcbiAgJ2lvbi1pb3MnOiBpb25GbixcbiAgJ2lvbi1sb2dvJzogaW9uRm4sXG4gICdpY29uZm9udCAnOiBzYW1lRm4sXG4gICd0aS0nOiBpID0+IGB0aGVtaWZ5LWljb24gJHsgaSB9YCxcbiAgJ2JpLSc6IGkgPT4gYGJvb3RzdHJhcC1pY29ucyAkeyBpIH1gXG59XG5cbmNvbnN0IG1hdE1hcCA9IHtcbiAgb186ICctb3V0bGluZWQnLFxuICByXzogJy1yb3VuZCcsXG4gIHNfOiAnLXNoYXJwJ1xufVxuXG5jb25zdCBzeW1NYXAgPSB7XG4gIHN5bV9vXzogJy1vdXRsaW5lZCcsXG4gIHN5bV9yXzogJy1yb3VuZGVkJyxcbiAgc3ltX3NfOiAnLXNoYXJwJ1xufVxuXG5jb25zdCBsaWJSRSA9IG5ldyBSZWdFeHAoJ14oJyArIE9iamVjdC5rZXlzKGxpYk1hcCkuam9pbignfCcpICsgJyknKVxuY29uc3QgbWF0UkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBPYmplY3Qua2V5cyhtYXRNYXApLmpvaW4oJ3wnKSArICcpJylcbmNvbnN0IHN5bVJFID0gbmV3IFJlZ0V4cCgnXignICsgT2JqZWN0LmtleXMoc3ltTWFwKS5qb2luKCd8JykgKyAnKScpXG5jb25zdCBtUkUgPSAvXltNbV1cXHM/Wy0rXT9cXC4/XFxkL1xuY29uc3QgaW1nUkUgPSAvXmltZzovXG5jb25zdCBzdmdVc2VSRSA9IC9ec3ZndXNlOi9cbmNvbnN0IGlvblJFID0gL15pb24tL1xuY29uc3QgZmFSRSA9IC9eKGZhLShzb2xpZHxyZWd1bGFyfGxpZ2h0fGJyYW5kc3xkdW90b25lfHRoaW4pfFtsZl1hW3NybGJka10/KSAvXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRSWNvbicsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VTaXplUHJvcHMsXG5cbiAgICB0YWc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdpJ1xuICAgIH0sXG5cbiAgICBuYW1lOiBTdHJpbmcsXG4gICAgY29sb3I6IFN0cmluZyxcbiAgICBsZWZ0OiBCb29sZWFuLFxuICAgIHJpZ2h0OiBCb29sZWFuXG4gIH0sXG5cbiAgc2V0dXAgKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCB7IHByb3h5OiB7ICRxIH0gfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gICAgY29uc3Qgc2l6ZVN0eWxlID0gdXNlU2l6ZShwcm9wcylcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtaWNvbidcbiAgICAgICsgKHByb3BzLmxlZnQgPT09IHRydWUgPyAnIG9uLWxlZnQnIDogJycpIC8vIFRPRE8gUXYzOiBkcm9wIHRoaXNcbiAgICAgICsgKHByb3BzLnJpZ2h0ID09PSB0cnVlID8gJyBvbi1yaWdodCcgOiAnJylcbiAgICAgICsgKHByb3BzLmNvbG9yICE9PSB2b2lkIDAgPyBgIHRleHQtJHsgcHJvcHMuY29sb3IgfWAgOiAnJylcbiAgICApXG5cbiAgICBjb25zdCB0eXBlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgbGV0IGNsc1xuICAgICAgbGV0IGljb24gPSBwcm9wcy5uYW1lXG5cbiAgICAgIGlmIChpY29uID09PSAnbm9uZScgfHwgIWljb24pIHtcbiAgICAgICAgcmV0dXJuIHsgbm9uZTogdHJ1ZSB9XG4gICAgICB9XG5cbiAgICAgIGlmICgkcS5pY29uTWFwRm4gIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgcmVzID0gJHEuaWNvbk1hcEZuKGljb24pXG4gICAgICAgIGlmIChyZXMgIT09IHZvaWQgMCkge1xuICAgICAgICAgIGlmIChyZXMuaWNvbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpY29uID0gcmVzLmljb25cbiAgICAgICAgICAgIGlmIChpY29uID09PSAnbm9uZScgfHwgIWljb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgbm9uZTogdHJ1ZSB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgY2xzOiByZXMuY2xzLFxuICAgICAgICAgICAgICBjb250ZW50OiByZXMuY29udGVudCAhPT0gdm9pZCAwXG4gICAgICAgICAgICAgICAgPyByZXMuY29udGVudFxuICAgICAgICAgICAgICAgIDogJyAnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtUkUudGVzdChpY29uKSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBbIGRlZiwgdmlld0JveCA9IGRlZmF1bHRWaWV3Qm94IF0gPSBpY29uLnNwbGl0KCd8JylcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN2ZzogdHJ1ZSxcbiAgICAgICAgICB2aWV3Qm94LFxuICAgICAgICAgIG5vZGVzOiBkZWYuc3BsaXQoJyYmJykubWFwKHBhdGggPT4ge1xuICAgICAgICAgICAgY29uc3QgWyBkLCBzdHlsZSwgdHJhbnNmb3JtIF0gPSBwYXRoLnNwbGl0KCdAQCcpXG4gICAgICAgICAgICByZXR1cm4gaCgncGF0aCcsIHsgc3R5bGUsIGQsIHRyYW5zZm9ybSB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGltZ1JFLnRlc3QoaWNvbikgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpbWc6IHRydWUsXG4gICAgICAgICAgc3JjOiBpY29uLnN1YnN0cmluZyg0KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzdmdVc2VSRS50ZXN0KGljb24pID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IFsgZGVmLCB2aWV3Qm94ID0gZGVmYXVsdFZpZXdCb3ggXSA9IGljb24uc3BsaXQoJ3wnKVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3ZndXNlOiB0cnVlLFxuICAgICAgICAgIHNyYzogZGVmLnN1YnN0cmluZyg3KSxcbiAgICAgICAgICB2aWV3Qm94XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGNvbnRlbnQgPSAnICdcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBpY29uLm1hdGNoKGxpYlJFKVxuXG4gICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgICAgICBjbHMgPSBsaWJNYXBbIG1hdGNoZXNbIDEgXSBdKGljb24pXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChmYVJFLnRlc3QoaWNvbikgPT09IHRydWUpIHtcbiAgICAgICAgY2xzID0gaWNvblxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaW9uUkUudGVzdChpY29uKSA9PT0gdHJ1ZSkge1xuICAgICAgICBjbHMgPSBgaW9uaWNvbnMgaW9uLSR7ICRxLnBsYXRmb3JtLmlzLmlvcyA9PT0gdHJ1ZSA/ICdpb3MnIDogJ21kJyB9JHsgaWNvbi5zdWJzdHJpbmcoMykgfWBcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN5bVJFLnRlc3QoaWNvbikgPT09IHRydWUpIHtcbiAgICAgICAgLy8gXCJub3RyYW5zbGF0ZVwiIGNsYXNzIGlzIGZvciBHb29nbGUgVHJhbnNsYXRlXG4gICAgICAgIC8vIHRvIGF2b2lkIHRhbXBlcmluZyB3aXRoIE1hdGVyaWFsIFN5bWJvbHMgbGlnYXR1cmUgZm9udFxuICAgICAgICAvL1xuICAgICAgICAvLyBDYXV0aW9uOiBUbyBiZSBhYmxlIHRvIGFkZCBzdWZmaXggdG8gdGhlIGNsYXNzIG5hbWUsXG4gICAgICAgIC8vIGtlZXAgdGhlICdtYXRlcmlhbC1zeW1ib2xzJyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGNscyA9ICdub3RyYW5zbGF0ZSBtYXRlcmlhbC1zeW1ib2xzJ1xuXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBpY29uLm1hdGNoKHN5bVJFKVxuICAgICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgICAgICAgIGljb24gPSBpY29uLnN1YnN0cmluZyg2KVxuICAgICAgICAgIGNscyArPSBzeW1NYXBbIG1hdGNoZXNbIDEgXSBdXG4gICAgICAgIH1cblxuICAgICAgICBjb250ZW50ID0gaWNvblxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIFwibm90cmFuc2xhdGVcIiBjbGFzcyBpcyBmb3IgR29vZ2xlIFRyYW5zbGF0ZVxuICAgICAgICAvLyB0byBhdm9pZCB0YW1wZXJpbmcgd2l0aCBNYXRlcmlhbCBJY29ucyBsaWdhdHVyZSBmb250XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENhdXRpb246IFRvIGJlIGFibGUgdG8gYWRkIHN1ZmZpeCB0byB0aGUgY2xhc3MgbmFtZSxcbiAgICAgICAgLy8ga2VlcCB0aGUgJ21hdGVyaWFsLWljb25zJyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGNscyA9ICdub3RyYW5zbGF0ZSBtYXRlcmlhbC1pY29ucydcblxuICAgICAgICBjb25zdCBtYXRjaGVzID0gaWNvbi5tYXRjaChtYXRSRSlcbiAgICAgICAgaWYgKG1hdGNoZXMgIT09IG51bGwpIHtcbiAgICAgICAgICBpY29uID0gaWNvbi5zdWJzdHJpbmcoMilcbiAgICAgICAgICBjbHMgKz0gbWF0TWFwWyBtYXRjaGVzWyAxIF0gXVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGVudCA9IGljb25cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2xzLFxuICAgICAgICBjb250ZW50XG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgICAgc3R5bGU6IHNpemVTdHlsZS52YWx1ZSxcbiAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLFxuICAgICAgICByb2xlOiAncHJlc2VudGF0aW9uJ1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZS52YWx1ZS5ub25lID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBoKHByb3BzLnRhZywgZGF0YSwgaFNsb3Qoc2xvdHMuZGVmYXVsdCkpXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLnZhbHVlLmltZyA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gaCgnc3BhbicsIGRhdGEsIGhNZXJnZVNsb3Qoc2xvdHMuZGVmYXVsdCwgW1xuICAgICAgICAgIGgoJ2ltZycsIHsgc3JjOiB0eXBlLnZhbHVlLnNyYyB9KVxuICAgICAgICBdKSlcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUudmFsdWUuc3ZnID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBoKCdzcGFuJywgZGF0YSwgaE1lcmdlU2xvdChzbG90cy5kZWZhdWx0LCBbXG4gICAgICAgICAgaCgnc3ZnJywge1xuICAgICAgICAgICAgdmlld0JveDogdHlwZS52YWx1ZS52aWV3Qm94IHx8ICcwIDAgMjQgMjQnXG4gICAgICAgICAgfSwgdHlwZS52YWx1ZS5ub2RlcylcbiAgICAgICAgXSkpXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLnZhbHVlLnN2Z3VzZSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gaCgnc3BhbicsIGRhdGEsIGhNZXJnZVNsb3Qoc2xvdHMuZGVmYXVsdCwgW1xuICAgICAgICAgIGgoJ3N2ZycsIHtcbiAgICAgICAgICAgIHZpZXdCb3g6IHR5cGUudmFsdWUudmlld0JveFxuICAgICAgICAgIH0sIFtcbiAgICAgICAgICAgIGgoJ3VzZScsIHsgJ3hsaW5rOmhyZWYnOiB0eXBlLnZhbHVlLnNyYyB9KVxuICAgICAgICAgIF0pXG4gICAgICAgIF0pKVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZS52YWx1ZS5jbHMgIT09IHZvaWQgMCkge1xuICAgICAgICBkYXRhLmNsYXNzICs9ICcgJyArIHR5cGUudmFsdWUuY2xzXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoKHByb3BzLnRhZywgZGF0YSwgaE1lcmdlU2xvdChzbG90cy5kZWZhdWx0LCBbXG4gICAgICAgIHR5cGUudmFsdWUuY29udGVudFxuICAgICAgXSkpXG4gICAgfVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBRSWNvbiBmcm9tICcuLi9pY29uL1FJY29uLmpzJ1xuXG5pbXBvcnQgdXNlU2l6ZSwgeyB1c2VTaXplUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1zaXplLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGhNZXJnZVNsb3RTYWZlbHkgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3JlbmRlci5qcydcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FBdmF0YXInLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlU2l6ZVByb3BzLFxuXG4gICAgZm9udFNpemU6IFN0cmluZyxcblxuICAgIGNvbG9yOiBTdHJpbmcsXG4gICAgdGV4dENvbG9yOiBTdHJpbmcsXG5cbiAgICBpY29uOiBTdHJpbmcsXG4gICAgc3F1YXJlOiBCb29sZWFuLFxuICAgIHJvdW5kZWQ6IEJvb2xlYW5cbiAgfSxcblxuICBzZXR1cCAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgIGNvbnN0IHNpemVTdHlsZSA9IHVzZVNpemUocHJvcHMpXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLWF2YXRhcidcbiAgICAgICsgKHByb3BzLmNvbG9yID8gYCBiZy0keyBwcm9wcy5jb2xvciB9YCA6ICcnKVxuICAgICAgKyAocHJvcHMudGV4dENvbG9yID8gYCB0ZXh0LSR7IHByb3BzLnRleHRDb2xvciB9IHEtY2hpcC0tY29sb3JlZGAgOiAnJylcbiAgICAgICsgKFxuICAgICAgICBwcm9wcy5zcXVhcmUgPT09IHRydWVcbiAgICAgICAgICA/ICcgcS1hdmF0YXItLXNxdWFyZSdcbiAgICAgICAgICA6IChwcm9wcy5yb3VuZGVkID09PSB0cnVlID8gJyByb3VuZGVkLWJvcmRlcnMnIDogJycpXG4gICAgICApXG4gICAgKVxuXG4gICAgY29uc3QgY29udGVudFN0eWxlID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgcHJvcHMuZm9udFNpemVcbiAgICAgICAgPyB7IGZvbnRTaXplOiBwcm9wcy5mb250U2l6ZSB9XG4gICAgICAgIDogbnVsbFxuICAgICkpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgaWNvbiA9IHByb3BzLmljb24gIT09IHZvaWQgMFxuICAgICAgICA/IFsgaChRSWNvbiwgeyBuYW1lOiBwcm9wcy5pY29uIH0pIF1cbiAgICAgICAgOiB2b2lkIDBcblxuICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICAgIHN0eWxlOiBzaXplU3R5bGUudmFsdWVcbiAgICAgIH0sIFtcbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAncS1hdmF0YXJfX2NvbnRlbnQgcm93IGZsZXgtY2VudGVyIG92ZXJmbG93LWhpZGRlbicsXG4gICAgICAgICAgc3R5bGU6IGNvbnRlbnRTdHlsZS52YWx1ZVxuICAgICAgICB9LCBoTWVyZ2VTbG90U2FmZWx5KHNsb3RzLmRlZmF1bHQsIGljb24pKVxuICAgICAgXSlcbiAgICB9XG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcbmltcG9ydCB7IHVzZVNpemVEZWZhdWx0cyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXNpemUuanMnXG5cbmV4cG9ydCBjb25zdCB1c2VTcGlubmVyUHJvcHMgPSB7XG4gIHNpemU6IHtcbiAgICB0eXBlOiBbIE51bWJlciwgU3RyaW5nIF0sXG4gICAgZGVmYXVsdDogJzFlbSdcbiAgfSxcbiAgY29sb3I6IFN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VTcGlubmVyIChwcm9wcykge1xuICByZXR1cm4ge1xuICAgIGNTaXplOiBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5zaXplIGluIHVzZVNpemVEZWZhdWx0c1xuICAgICAgICA/IGAkeyB1c2VTaXplRGVmYXVsdHNbIHByb3BzLnNpemUgXSB9cHhgXG4gICAgICAgIDogcHJvcHMuc2l6ZVxuICAgICkpLFxuXG4gICAgY2xhc3NlczogY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLXNwaW5uZXInICsgKHByb3BzLmNvbG9yID8gYCB0ZXh0LSR7IHByb3BzLmNvbG9yIH1gIDogJycpXG4gICAgKVxuICB9XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlU3Bpbm5lciwgeyB1c2VTcGlubmVyUHJvcHMgfSBmcm9tICcuL3VzZS1zcGlubmVyLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FTcGlubmVyJyxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZVNwaW5uZXJQcm9wcyxcblxuICAgIHRoaWNrbmVzczoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogNVxuICAgIH1cbiAgfSxcblxuICBzZXR1cCAocHJvcHMpIHtcbiAgICBjb25zdCB7IGNTaXplLCBjbGFzc2VzIH0gPSB1c2VTcGlubmVyKHByb3BzKVxuXG4gICAgcmV0dXJuICgpID0+IGgoJ3N2ZycsIHtcbiAgICAgIGNsYXNzOiBjbGFzc2VzLnZhbHVlICsgJyBxLXNwaW5uZXItbWF0JyxcbiAgICAgIHdpZHRoOiBjU2l6ZS52YWx1ZSxcbiAgICAgIGhlaWdodDogY1NpemUudmFsdWUsXG4gICAgICB2aWV3Qm94OiAnMjUgMjUgNTAgNTAnXG4gICAgfSwgW1xuICAgICAgaCgnY2lyY2xlJywge1xuICAgICAgICBjbGFzczogJ3BhdGgnLFxuICAgICAgICBjeDogJzUwJyxcbiAgICAgICAgY3k6ICc1MCcsXG4gICAgICAgIHI6ICcyMCcsXG4gICAgICAgIGZpbGw6ICdub25lJyxcbiAgICAgICAgc3Ryb2tlOiAnY3VycmVudENvbG9yJyxcbiAgICAgICAgJ3N0cm9rZS13aWR0aCc6IHByb3BzLnRoaWNrbmVzcyxcbiAgICAgICAgJ3N0cm9rZS1taXRlcmxpbWl0JzogJzEwJ1xuICAgICAgfSlcbiAgICBdKVxuICB9XG59KVxuIiwiaW1wb3J0IHsgdW5yZWYgfSBmcm9tICd2dWUnXG5cbmV4cG9ydCBmdW5jdGlvbiBvZmZzZXQgKGVsKSB7XG4gIGlmIChlbCA9PT0gd2luZG93KSB7XG4gICAgcmV0dXJuIHsgdG9wOiAwLCBsZWZ0OiAwIH1cbiAgfVxuICBjb25zdCB7IHRvcCwgbGVmdCB9ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIHsgdG9wLCBsZWZ0IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0eWxlIChlbCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGVpZ2h0IChlbCkge1xuICByZXR1cm4gZWwgPT09IHdpbmRvd1xuICAgID8gd2luZG93LmlubmVySGVpZ2h0XG4gICAgOiBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdpZHRoIChlbCkge1xuICByZXR1cm4gZWwgPT09IHdpbmRvd1xuICAgID8gd2luZG93LmlubmVyV2lkdGhcbiAgICA6IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjc3MgKGVsZW1lbnQsIGNzcykge1xuICBjb25zdCBzdHlsZSA9IGVsZW1lbnQuc3R5bGVcblxuICBmb3IgKGNvbnN0IHByb3AgaW4gY3NzKSB7XG4gICAgc3R5bGVbIHByb3AgXSA9IGNzc1sgcHJvcCBdXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNzc0JhdGNoIChlbGVtZW50cywgc3R5bGUpIHtcbiAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiBjc3MoZWwsIHN0eWxlKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWR5IChmbikge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2xvYWRpbmcnKSB7XG4gICAgcmV0dXJuIGZuKClcbiAgfVxuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmbiwgZmFsc2UpXG59XG5cbi8vIGludGVybmFsXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudCAoZWwpIHtcbiAgaWYgKGVsID09PSB2b2lkIDAgfHwgZWwgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdm9pZCAwXG4gIH1cblxuICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgfHwgdm9pZCAwXG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB2b2lkIDBcbiAgICB9XG4gIH1cblxuICBjb25zdCB0YXJnZXQgPSB1bnJlZihlbClcbiAgaWYgKHRhcmdldCkge1xuICAgIHJldHVybiB0YXJnZXQuJGVsIHx8IHRhcmdldFxuICB9XG59XG5cbi8vIGludGVybmFsXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRIYXNGb2N1cyAoZWwsIGZvY3VzZWRFbCkge1xuICBpZiAoZWwgPT09IHZvaWQgMCB8fCBlbCA9PT0gbnVsbCB8fCBlbC5jb250YWlucyhmb2N1c2VkRWwpID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGZvciAobGV0IG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7IG5leHQgIT09IG51bGw7IG5leHQgPSBuZXh0Lm5leHRFbGVtZW50U2libGluZykge1xuICAgIGlmIChuZXh0LmNvbnRhaW5zKGZvY3VzZWRFbCkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgb2Zmc2V0LFxuICBzdHlsZSxcbiAgaGVpZ2h0LFxuICB3aWR0aCxcbiAgY3NzLFxuICBjc3NCYXRjaCxcbiAgcmVhZHlcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChmbiwgbGltaXQgPSAyNTApIHtcbiAgbGV0IHdhaXQgPSBmYWxzZSwgcmVzdWx0XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgvKiAuLi5hcmdzICovKSB7XG4gICAgaWYgKHdhaXQgPT09IGZhbHNlKSB7XG4gICAgICB3YWl0ID0gdHJ1ZVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHdhaXQgPSBmYWxzZSB9LCBsaW1pdClcbiAgICAgIHJlc3VsdCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgY3NzIH0gZnJvbSAnLi4vdXRpbHMvZG9tLmpzJ1xuaW1wb3J0IHsgcG9zaXRpb24sIHN0b3AsIGFkZEV2dCwgY2xlYW5FdnQgfSBmcm9tICcuLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IGlzS2V5Q29kZSB9IGZyb20gJy4uL3V0aWxzL3ByaXZhdGUva2V5LWNvbXBvc2l0aW9uLmpzJ1xuaW1wb3J0IHRocm90dGxlIGZyb20gJy4uL3V0aWxzL3Rocm90dGxlLmpzJ1xuaW1wb3J0IGdldFNTUlByb3BzIGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvbm9vcC1zc3ItZGlyZWN0aXZlLXRyYW5zZm9ybS5qcydcblxuZnVuY3Rpb24gc2hvd1JpcHBsZSAoZXZ0LCBlbCwgY3R4LCBmb3JjZUNlbnRlcikge1xuICBjdHgubW9kaWZpZXJzLnN0b3AgPT09IHRydWUgJiYgc3RvcChldnQpXG5cbiAgY29uc3QgY29sb3IgPSBjdHgubW9kaWZpZXJzLmNvbG9yXG4gIGxldCBjZW50ZXIgPSBjdHgubW9kaWZpZXJzLmNlbnRlclxuICBjZW50ZXIgPSBjZW50ZXIgPT09IHRydWUgfHwgZm9yY2VDZW50ZXIgPT09IHRydWVcblxuICBjb25zdFxuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyksXG4gICAgaW5uZXJOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpLFxuICAgIHBvcyA9IHBvc2l0aW9uKGV2dCksXG4gICAgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgIGRpYW1ldGVyID0gTWF0aC5zcXJ0KHdpZHRoICogd2lkdGggKyBoZWlnaHQgKiBoZWlnaHQpLFxuICAgIHJhZGl1cyA9IGRpYW1ldGVyIC8gMixcbiAgICBjZW50ZXJYID0gYCR7ICh3aWR0aCAtIGRpYW1ldGVyKSAvIDIgfXB4YCxcbiAgICB4ID0gY2VudGVyID8gY2VudGVyWCA6IGAkeyBwb3MubGVmdCAtIGxlZnQgLSByYWRpdXMgfXB4YCxcbiAgICBjZW50ZXJZID0gYCR7IChoZWlnaHQgLSBkaWFtZXRlcikgLyAyIH1weGAsXG4gICAgeSA9IGNlbnRlciA/IGNlbnRlclkgOiBgJHsgcG9zLnRvcCAtIHRvcCAtIHJhZGl1cyB9cHhgXG5cbiAgaW5uZXJOb2RlLmNsYXNzTmFtZSA9ICdxLXJpcHBsZV9faW5uZXInXG4gIGNzcyhpbm5lck5vZGUsIHtcbiAgICBoZWlnaHQ6IGAkeyBkaWFtZXRlciB9cHhgLFxuICAgIHdpZHRoOiBgJHsgZGlhbWV0ZXIgfXB4YCxcbiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUzZCgkeyB4IH0sJHsgeSB9LDApIHNjYWxlM2QoLjIsLjIsMSlgLFxuICAgIG9wYWNpdHk6IDBcbiAgfSlcblxuICBub2RlLmNsYXNzTmFtZSA9IGBxLXJpcHBsZSR7IGNvbG9yID8gJyB0ZXh0LScgKyBjb2xvciA6ICcnIH1gXG4gIG5vZGUuc2V0QXR0cmlidXRlKCdkaXInLCAnbHRyJylcbiAgbm9kZS5hcHBlbmRDaGlsZChpbm5lck5vZGUpXG4gIGVsLmFwcGVuZENoaWxkKG5vZGUpXG5cbiAgY29uc3QgYWJvcnQgPSAoKSA9PiB7XG4gICAgbm9kZS5yZW1vdmUoKVxuICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgfVxuICBjdHguYWJvcnQucHVzaChhYm9ydClcblxuICBsZXQgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpbm5lck5vZGUuY2xhc3NMaXN0LmFkZCgncS1yaXBwbGVfX2lubmVyLS1lbnRlcicpXG4gICAgaW5uZXJOb2RlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgkeyBjZW50ZXJYIH0sJHsgY2VudGVyWSB9LDApIHNjYWxlM2QoMSwxLDEpYFxuICAgIGlubmVyTm9kZS5zdHlsZS5vcGFjaXR5ID0gMC4yXG5cbiAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaW5uZXJOb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3EtcmlwcGxlX19pbm5lci0tZW50ZXInKVxuICAgICAgaW5uZXJOb2RlLmNsYXNzTGlzdC5hZGQoJ3EtcmlwcGxlX19pbm5lci0tbGVhdmUnKVxuICAgICAgaW5uZXJOb2RlLnN0eWxlLm9wYWNpdHkgPSAwXG5cbiAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG5vZGUucmVtb3ZlKClcbiAgICAgICAgY3R4LmFib3J0LnNwbGljZShjdHguYWJvcnQuaW5kZXhPZihhYm9ydCksIDEpXG4gICAgICB9LCAyNzUpXG4gICAgfSwgMjUwKVxuICB9LCA1MClcbn1cblxuZnVuY3Rpb24gdXBkYXRlTW9kaWZpZXJzIChjdHgsIHsgbW9kaWZpZXJzLCB2YWx1ZSwgYXJnIH0pIHtcbiAgY29uc3QgY2ZnID0gT2JqZWN0LmFzc2lnbih7fSwgY3R4LmNmZy5yaXBwbGUsIG1vZGlmaWVycywgdmFsdWUpXG4gIGN0eC5tb2RpZmllcnMgPSB7XG4gICAgZWFybHk6IGNmZy5lYXJseSA9PT0gdHJ1ZSxcbiAgICBzdG9wOiBjZmcuc3RvcCA9PT0gdHJ1ZSxcbiAgICBjZW50ZXI6IGNmZy5jZW50ZXIgPT09IHRydWUsXG4gICAgY29sb3I6IGNmZy5jb2xvciB8fCBhcmcsXG4gICAga2V5Q29kZXM6IFtdLmNvbmNhdChjZmcua2V5Q29kZXMgfHwgMTMpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlRGlyZWN0aXZlKF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IHsgbmFtZTogJ3JpcHBsZScsIGdldFNTUlByb3BzIH1cbiAgOiB7XG4gICAgICBuYW1lOiAncmlwcGxlJyxcblxuICAgICAgYmVmb3JlTW91bnQgKGVsLCBiaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IGNmZyA9IGJpbmRpbmcuaW5zdGFuY2UuJC5hcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRxLmNvbmZpZyB8fCB7fVxuXG4gICAgICAgIGlmIChjZmcucmlwcGxlID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgIGNmZyxcbiAgICAgICAgICBlbmFibGVkOiBiaW5kaW5nLnZhbHVlICE9PSBmYWxzZSxcbiAgICAgICAgICBtb2RpZmllcnM6IHt9LFxuICAgICAgICAgIGFib3J0OiBbXSxcblxuICAgICAgICAgIHN0YXJ0IChldnQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY3R4LmVuYWJsZWQgPT09IHRydWVcbiAgICAgICAgICAgICAgJiYgZXZ0LnFTa2lwUmlwcGxlICE9PSB0cnVlXG4gICAgICAgICAgICAgICYmIGV2dC50eXBlID09PSAoY3R4Lm1vZGlmaWVycy5lYXJseSA9PT0gdHJ1ZSA/ICdwb2ludGVyZG93bicgOiAnY2xpY2snKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHNob3dSaXBwbGUoZXZ0LCBlbCwgY3R4LCBldnQucUtleUV2ZW50ID09PSB0cnVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBrZXlzdGFydDogdGhyb3R0bGUoZXZ0ID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY3R4LmVuYWJsZWQgPT09IHRydWVcbiAgICAgICAgICAgICAgJiYgZXZ0LnFTa2lwUmlwcGxlICE9PSB0cnVlXG4gICAgICAgICAgICAgICYmIGlzS2V5Q29kZShldnQsIGN0eC5tb2RpZmllcnMua2V5Q29kZXMpID09PSB0cnVlXG4gICAgICAgICAgICAgICYmIGV2dC50eXBlID09PSBga2V5JHsgY3R4Lm1vZGlmaWVycy5lYXJseSA9PT0gdHJ1ZSA/ICdkb3duJyA6ICd1cCcgfWBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBzaG93UmlwcGxlKGV2dCwgZWwsIGN0eCwgdHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAzMDApXG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVNb2RpZmllcnMoY3R4LCBiaW5kaW5nKVxuXG4gICAgICAgIGVsLl9fcXJpcHBsZSA9IGN0eFxuXG4gICAgICAgIGFkZEV2dChjdHgsICdtYWluJywgW1xuICAgICAgICAgIFsgZWwsICdwb2ludGVyZG93bicsICdzdGFydCcsICdwYXNzaXZlJyBdLFxuICAgICAgICAgIFsgZWwsICdjbGljaycsICdzdGFydCcsICdwYXNzaXZlJyBdLFxuICAgICAgICAgIFsgZWwsICdrZXlkb3duJywgJ2tleXN0YXJ0JywgJ3Bhc3NpdmUnIF0sXG4gICAgICAgICAgWyBlbCwgJ2tleXVwJywgJ2tleXN0YXJ0JywgJ3Bhc3NpdmUnIF1cbiAgICAgICAgXSlcbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZWQgKGVsLCBiaW5kaW5nKSB7XG4gICAgICAgIGlmIChiaW5kaW5nLm9sZFZhbHVlICE9PSBiaW5kaW5nLnZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgY3R4ID0gZWwuX19xcmlwcGxlXG4gICAgICAgICAgaWYgKGN0eCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjdHguZW5hYmxlZCA9IGJpbmRpbmcudmFsdWUgIT09IGZhbHNlXG5cbiAgICAgICAgICAgIGlmIChjdHguZW5hYmxlZCA9PT0gdHJ1ZSAmJiBPYmplY3QoYmluZGluZy52YWx1ZSkgPT09IGJpbmRpbmcudmFsdWUpIHtcbiAgICAgICAgICAgICAgdXBkYXRlTW9kaWZpZXJzKGN0eCwgYmluZGluZylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGJlZm9yZVVubW91bnQgKGVsKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IGVsLl9fcXJpcHBsZVxuICAgICAgICBpZiAoY3R4ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBjdHguYWJvcnQuZm9yRWFjaChmbiA9PiB7IGZuKCkgfSlcbiAgICAgICAgICBjbGVhbkV2dChjdHgsICdtYWluJylcbiAgICAgICAgICBkZWxldGUgZWwuX3FyaXBwbGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbilcbiIsImltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgY29uc3QgYWxpZ25NYXAgPSB7XG4gIGxlZnQ6ICdzdGFydCcsXG4gIGNlbnRlcjogJ2NlbnRlcicsXG4gIHJpZ2h0OiAnZW5kJyxcbiAgYmV0d2VlbjogJ2JldHdlZW4nLFxuICBhcm91bmQ6ICdhcm91bmQnLFxuICBldmVubHk6ICdldmVubHknLFxuICBzdHJldGNoOiAnc3RyZXRjaCdcbn1cblxuZXhwb3J0IGNvbnN0IGFsaWduVmFsdWVzID0gT2JqZWN0LmtleXMoYWxpZ25NYXApXG5cbmV4cG9ydCBjb25zdCB1c2VBbGlnblByb3BzID0ge1xuICBhbGlnbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB2YWxpZGF0b3I6IHYgPT4gYWxpZ25WYWx1ZXMuaW5jbHVkZXModilcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgLy8gcmV0dXJuIGFsaWduQ2xhc3NcbiAgcmV0dXJuIGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCBhbGlnbiA9IHByb3BzLmFsaWduID09PSB2b2lkIDBcbiAgICAgID8gcHJvcHMudmVydGljYWwgPT09IHRydWUgPyAnc3RyZXRjaCcgOiAnbGVmdCdcbiAgICAgIDogcHJvcHMuYWxpZ25cblxuICAgIHJldHVybiBgJHsgcHJvcHMudmVydGljYWwgPT09IHRydWUgPyAnaXRlbXMnIDogJ2p1c3RpZnknIH0tJHsgYWxpZ25NYXBbIGFsaWduIF0gfWBcbiAgfSlcbn1cbiIsIlxuLy8gY29waWVkIHRvIGRvY3MgdG9vXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50UHJveHkgKHByb3h5KSB7XG4gIGlmIChPYmplY3QocHJveHkuJHBhcmVudCkgPT09IHByb3h5LiRwYXJlbnQpIHtcbiAgICByZXR1cm4gcHJveHkuJHBhcmVudFxuICB9XG5cbiAgbGV0IHsgcGFyZW50IH0gPSBwcm94eS4kXG5cbiAgd2hpbGUgKE9iamVjdChwYXJlbnQpID09PSBwYXJlbnQpIHtcbiAgICBpZiAoT2JqZWN0KHBhcmVudC5wcm94eSkgPT09IHBhcmVudC5wcm94eSkge1xuICAgICAgcmV0dXJuIHBhcmVudC5wcm94eVxuICAgIH1cblxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRcbiAgfVxufVxuXG5mdW5jdGlvbiBmaWxsTm9ybWFsaXplZFZOb2RlcyAoY2hpbGRyZW4sIHZub2RlKSB7XG4gIGlmICh0eXBlb2Ygdm5vZGUudHlwZSA9PT0gJ3N5bWJvbCcpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2bm9kZS5jaGlsZHJlbikgPT09IHRydWUpIHtcbiAgICAgIHZub2RlLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICBmaWxsTm9ybWFsaXplZFZOb2RlcyhjaGlsZHJlbiwgY2hpbGQpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBjaGlsZHJlbi5hZGQodm5vZGUpXG4gIH1cbn1cblxuLy8gdm5vZGVzIGZyb20gcmVuZGVyZWQgaW4gYWR2YW5jZWQgc2xvdHNcbmV4cG9ydCBmdW5jdGlvbiBnZXROb3JtYWxpemVkVk5vZGVzICh2bm9kZXMpIHtcbiAgY29uc3QgY2hpbGRyZW4gPSBuZXcgU2V0KClcblxuICB2bm9kZXMuZm9yRWFjaCh2bm9kZSA9PiB7XG4gICAgZmlsbE5vcm1hbGl6ZWRWTm9kZXMoY2hpbGRyZW4sIHZub2RlKVxuICB9KVxuXG4gIHJldHVybiBBcnJheS5mcm9tKGNoaWxkcmVuKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdm1IYXNSb3V0ZXIgKHZtKSB7XG4gIHJldHVybiB2bS5hcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRyb3V0ZXIgIT09IHZvaWQgMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdm1Jc0Rlc3Ryb3llZCAodm0pIHtcbiAgcmV0dXJuIHZtLmlzVW5tb3VudGVkID09PSB0cnVlIHx8IHZtLmlzRGVhY3RpdmF0ZWQgPT09IHRydWVcbn1cbiIsIi8qXG4gKiBJbnNwaXJlZCBieSBSb3V0ZXJMaW5rIGZyb20gVnVlIFJvdXRlclxuICogIC0tPiBBUEkgc2hvdWxkIG1hdGNoIVxuICovXG5cbmltcG9ydCB7IGNvbXB1dGVkLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB7IHZtSGFzUm91dGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS92bS5qcydcblxuLy8gR2V0IHRoZSBvcmlnaW5hbCBwYXRoIHZhbHVlIG9mIGEgcmVjb3JkIGJ5IGZvbGxvd2luZyBpdHMgYWxpYXNPZlxuZnVuY3Rpb24gZ2V0T3JpZ2luYWxQYXRoIChyZWNvcmQpIHtcbiAgcmV0dXJuIHJlY29yZFxuICAgID8gKFxuICAgICAgICByZWNvcmQuYWxpYXNPZlxuICAgICAgICAgID8gcmVjb3JkLmFsaWFzT2YucGF0aFxuICAgICAgICAgIDogcmVjb3JkLnBhdGhcbiAgICAgICkgOiAnJ1xufVxuXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZVJlY29yZCAoYSwgYikge1xuICAvLyBzaW5jZSB0aGUgb3JpZ2luYWwgcmVjb3JkIGhhcyBhbiB1bmRlZmluZWQgdmFsdWUgZm9yIGFsaWFzT2ZcbiAgLy8gYnV0IGFsbCBhbGlhc2VzIHBvaW50IHRvIHRoZSBvcmlnaW5hbCByZWNvcmQsIHRoaXMgd2lsbCBhbHdheXMgY29tcGFyZVxuICAvLyB0aGUgb3JpZ2luYWwgcmVjb3JkXG4gIHJldHVybiAoYS5hbGlhc09mIHx8IGEpID09PSAoYi5hbGlhc09mIHx8IGIpXG59XG5cbmZ1bmN0aW9uIGluY2x1ZGVzUGFyYW1zIChvdXRlciwgaW5uZXIpIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gaW5uZXIpIHtcbiAgICBjb25zdFxuICAgICAgaW5uZXJWYWx1ZSA9IGlubmVyWyBrZXkgXSxcbiAgICAgIG91dGVyVmFsdWUgPSBvdXRlclsga2V5IF1cblxuICAgIGlmICh0eXBlb2YgaW5uZXJWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChpbm5lclZhbHVlICE9PSBvdXRlclZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAgIEFycmF5LmlzQXJyYXkob3V0ZXJWYWx1ZSkgPT09IGZhbHNlXG4gICAgICB8fCBvdXRlclZhbHVlLmxlbmd0aCAhPT0gaW5uZXJWYWx1ZS5sZW5ndGhcbiAgICAgIHx8IGlubmVyVmFsdWUuc29tZSgodmFsdWUsIGkpID0+IHZhbHVlICE9PSBvdXRlclZhbHVlWyBpIF0pXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBpc0VxdWl2YWxlbnRBcnJheSAoYSwgYikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShiKSA9PT0gdHJ1ZVxuICAgID8gYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoKHZhbHVlLCBpKSA9PiB2YWx1ZSA9PT0gYlsgaSBdKVxuICAgIDogYS5sZW5ndGggPT09IDEgJiYgYVsgMCBdID09PSBiXG59XG5cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZSAoYSwgYikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhKSA9PT0gdHJ1ZVxuICAgID8gaXNFcXVpdmFsZW50QXJyYXkoYSwgYilcbiAgICA6IChcbiAgICAgICAgQXJyYXkuaXNBcnJheShiKSA9PT0gdHJ1ZVxuICAgICAgICAgID8gaXNFcXVpdmFsZW50QXJyYXkoYiwgYSlcbiAgICAgICAgICA6IGEgPT09IGJcbiAgICAgIClcbn1cblxuZnVuY3Rpb24gaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyAoYSwgYikge1xuICBpZiAoT2JqZWN0LmtleXMoYSkubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZvciAoY29uc3Qga2V5IGluIGEpIHtcbiAgICBpZiAoaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtc1ZhbHVlKGFbIGtleSBdLCBiWyBrZXkgXSkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgY29uc3QgdXNlUm91dGVyTGlua1Byb3BzID0ge1xuICAvLyByb3V0ZXItbGlua1xuICB0bzogWyBTdHJpbmcsIE9iamVjdCBdLFxuICByZXBsYWNlOiBCb29sZWFuLFxuICBleGFjdDogQm9vbGVhbixcbiAgYWN0aXZlQ2xhc3M6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ3Etcm91dGVyLWxpbmstLWFjdGl2ZSdcbiAgfSxcbiAgZXhhY3RBY3RpdmVDbGFzczoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAncS1yb3V0ZXItbGluay0tZXhhY3QtYWN0aXZlJ1xuICB9LFxuXG4gIC8vIHJlZ3VsYXIgPGE+IGxpbmtcbiAgaHJlZjogU3RyaW5nLFxuICB0YXJnZXQ6IFN0cmluZyxcblxuICAvLyBzdGF0ZVxuICBkaXNhYmxlOiBCb29sZWFuXG59XG5cbi8vIGV4dGVybmFsIHByb3BzOiB0eXBlLCB0YWdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHsgZmFsbGJhY2tUYWcsIHVzZURpc2FibGVGb3JSb3V0ZXJMaW5rUHJvcHMgPSB0cnVlIH0gPSB7fSkge1xuICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gIGNvbnN0IHsgcHJvcHMsIHByb3h5LCBlbWl0IH0gPSB2bVxuXG4gIGNvbnN0IGhhc1JvdXRlciA9IHZtSGFzUm91dGVyKHZtKVxuICBjb25zdCBoYXNIcmVmTGluayA9IGNvbXB1dGVkKCgpID0+IHByb3BzLmRpc2FibGUgIT09IHRydWUgJiYgcHJvcHMuaHJlZiAhPT0gdm9pZCAwKVxuXG4gIC8vIGZvciBwZXJmIHJlYXNvbnMsIHdlIHVzZSBtaW5pbXVtIGFtb3VudCBvZiBydW50aW1lIHdvcmtcbiAgY29uc3QgaGFzUm91dGVyTGlua1Byb3BzID0gdXNlRGlzYWJsZUZvclJvdXRlckxpbmtQcm9wcyA9PT0gdHJ1ZVxuICAgID8gY29tcHV0ZWQoKCkgPT5cbiAgICAgIGhhc1JvdXRlciA9PT0gdHJ1ZVxuICAgICAgJiYgcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZVxuICAgICAgJiYgaGFzSHJlZkxpbmsudmFsdWUgIT09IHRydWVcbiAgICAgICYmIHByb3BzLnRvICE9PSB2b2lkIDAgJiYgcHJvcHMudG8gIT09IG51bGwgJiYgcHJvcHMudG8gIT09ICcnXG4gICAgKVxuICAgIDogY29tcHV0ZWQoKCkgPT5cbiAgICAgIGhhc1JvdXRlciA9PT0gdHJ1ZVxuICAgICAgJiYgaGFzSHJlZkxpbmsudmFsdWUgIT09IHRydWVcbiAgICAgICYmIHByb3BzLnRvICE9PSB2b2lkIDAgJiYgcHJvcHMudG8gIT09IG51bGwgJiYgcHJvcHMudG8gIT09ICcnXG4gICAgKVxuXG4gIGNvbnN0IHJlc29sdmVkTGluayA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBoYXNSb3V0ZXJMaW5rUHJvcHMudmFsdWUgPT09IHRydWVcbiAgICAgID8gZ2V0TGluayhwcm9wcy50bylcbiAgICAgIDogbnVsbFxuICApKVxuXG4gIGNvbnN0IGhhc1JvdXRlckxpbmsgPSBjb21wdXRlZCgoKSA9PiByZXNvbHZlZExpbmsudmFsdWUgIT09IG51bGwpXG4gIGNvbnN0IGhhc0xpbmsgPSBjb21wdXRlZCgoKSA9PiBoYXNIcmVmTGluay52YWx1ZSA9PT0gdHJ1ZSB8fCBoYXNSb3V0ZXJMaW5rLnZhbHVlID09PSB0cnVlKVxuXG4gIGNvbnN0IGxpbmtUYWcgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgcHJvcHMudHlwZSA9PT0gJ2EnIHx8IGhhc0xpbmsudmFsdWUgPT09IHRydWVcbiAgICAgID8gJ2EnXG4gICAgICA6IChwcm9wcy50YWcgfHwgZmFsbGJhY2tUYWcgfHwgJ2RpdicpXG4gICkpXG5cbiAgY29uc3QgbGlua0F0dHJzID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIGhhc0hyZWZMaW5rLnZhbHVlID09PSB0cnVlXG4gICAgICA/IHtcbiAgICAgICAgICBocmVmOiBwcm9wcy5ocmVmLFxuICAgICAgICAgIHRhcmdldDogcHJvcHMudGFyZ2V0XG4gICAgICAgIH1cbiAgICAgIDogKFxuICAgICAgICAgIGhhc1JvdXRlckxpbmsudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGhyZWY6IHJlc29sdmVkTGluay52YWx1ZS5ocmVmLFxuICAgICAgICAgICAgICAgIHRhcmdldDogcHJvcHMudGFyZ2V0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge31cbiAgICAgICAgKVxuICApKVxuXG4gIGNvbnN0IGxpbmtBY3RpdmVJbmRleCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBpZiAoaGFzUm91dGVyTGluay52YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGNvbnN0XG4gICAgICB7IG1hdGNoZWQgfSA9IHJlc29sdmVkTGluay52YWx1ZSxcbiAgICAgIHsgbGVuZ3RoIH0gPSBtYXRjaGVkLFxuICAgICAgcm91dGVNYXRjaGVkID0gbWF0Y2hlZFsgbGVuZ3RoIC0gMSBdXG5cbiAgICBpZiAocm91dGVNYXRjaGVkID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRNYXRjaGVkID0gcHJveHkuJHJvdXRlLm1hdGNoZWRcblxuICAgIGlmIChjdXJyZW50TWF0Y2hlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGNvbnN0IGluZGV4ID0gY3VycmVudE1hdGNoZWQuZmluZEluZGV4KFxuICAgICAgaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCByb3V0ZU1hdGNoZWQpXG4gICAgKVxuXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHJldHVybiBpbmRleFxuICAgIH1cblxuICAgIC8vIHBvc3NpYmxlIHBhcmVudCByZWNvcmRcbiAgICBjb25zdCBwYXJlbnRSZWNvcmRQYXRoID0gZ2V0T3JpZ2luYWxQYXRoKG1hdGNoZWRbIGxlbmd0aCAtIDIgXSlcblxuICAgIHJldHVybiAoXG4gICAgICAvLyB3ZSBhcmUgZGVhbGluZyB3aXRoIG5lc3RlZCByb3V0ZXNcbiAgICAgIGxlbmd0aCA+IDFcbiAgICAgIC8vIGlmIHRoZSBwYXJlbnQgYW5kIG1hdGNoZWQgcm91dGUgaGF2ZSB0aGUgc2FtZSBwYXRoLCB0aGlzIGxpbmsgaXNcbiAgICAgIC8vIHJlZmVycmluZyB0byB0aGUgZW1wdHkgY2hpbGQuIE9yIHdlIGN1cnJlbnRseSBhcmUgb24gYSBkaWZmZXJlbnRcbiAgICAgIC8vIGNoaWxkIG9mIHRoZSBzYW1lIHBhcmVudFxuICAgICAgJiYgZ2V0T3JpZ2luYWxQYXRoKHJvdXRlTWF0Y2hlZCkgPT09IHBhcmVudFJlY29yZFBhdGhcbiAgICAgIC8vIGF2b2lkIGNvbXBhcmluZyB0aGUgY2hpbGQgd2l0aCBpdHMgcGFyZW50XG4gICAgICAmJiBjdXJyZW50TWF0Y2hlZFsgY3VycmVudE1hdGNoZWQubGVuZ3RoIC0gMSBdLnBhdGggIT09IHBhcmVudFJlY29yZFBhdGhcbiAgICAgICAgPyBjdXJyZW50TWF0Y2hlZC5maW5kSW5kZXgoXG4gICAgICAgICAgaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCBtYXRjaGVkWyBsZW5ndGggLSAyIF0pXG4gICAgICAgIClcbiAgICAgICAgOiBpbmRleFxuICAgIClcbiAgfSlcblxuICBjb25zdCBsaW5rSXNBY3RpdmUgPSBjb21wdXRlZCgoKSA9PlxuICAgIGhhc1JvdXRlckxpbmsudmFsdWUgPT09IHRydWVcbiAgICAmJiBsaW5rQWN0aXZlSW5kZXgudmFsdWUgIT09IC0xXG4gICAgJiYgaW5jbHVkZXNQYXJhbXMocHJveHkuJHJvdXRlLnBhcmFtcywgcmVzb2x2ZWRMaW5rLnZhbHVlLnBhcmFtcylcbiAgKVxuXG4gIGNvbnN0IGxpbmtJc0V4YWN0QWN0aXZlID0gY29tcHV0ZWQoKCkgPT5cbiAgICBsaW5rSXNBY3RpdmUudmFsdWUgPT09IHRydWVcbiAgICAgICYmIGxpbmtBY3RpdmVJbmRleC52YWx1ZSA9PT0gcHJveHkuJHJvdXRlLm1hdGNoZWQubGVuZ3RoIC0gMVxuICAgICAgJiYgaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyhwcm94eS4kcm91dGUucGFyYW1zLCByZXNvbHZlZExpbmsudmFsdWUucGFyYW1zKVxuICApXG5cbiAgY29uc3QgbGlua0NsYXNzID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIGhhc1JvdXRlckxpbmsudmFsdWUgPT09IHRydWVcbiAgICAgID8gKFxuICAgICAgICAgIGxpbmtJc0V4YWN0QWN0aXZlLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICA/IGAgJHsgcHJvcHMuZXhhY3RBY3RpdmVDbGFzcyB9ICR7IHByb3BzLmFjdGl2ZUNsYXNzIH1gXG4gICAgICAgICAgICA6IChcbiAgICAgICAgICAgICAgICBwcm9wcy5leGFjdCA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgICAgICAgOiAobGlua0lzQWN0aXZlLnZhbHVlID09PSB0cnVlID8gYCAkeyBwcm9wcy5hY3RpdmVDbGFzcyB9YCA6ICcnKVxuICAgICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIDogJydcbiAgKSlcblxuICBmdW5jdGlvbiBnZXRMaW5rICh0bykge1xuICAgIHRyeSB7IHJldHVybiBwcm94eS4kcm91dGVyLnJlc29sdmUodG8pIH1cbiAgICBjYXRjaCAoXykge31cblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgUHJvbWlzZTxSb3V0ZXJFcnJvciB8IGZhbHNlIHwgdW5kZWZpbmVkPlxuICAgKi9cbiAgZnVuY3Rpb24gbmF2aWdhdGVUb1JvdXRlckxpbmsgKFxuICAgIGUsXG4gICAgeyByZXR1cm5Sb3V0ZXJFcnJvciwgdG8gPSBwcm9wcy50bywgcmVwbGFjZSA9IHByb3BzLnJlcGxhY2UgfSA9IHt9XG4gICkge1xuICAgIGlmIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICAvLyBlbnN1cmUgbmF0aXZlIG5hdmlnYXRpb24gaXMgcHJldmVudGVkIGluIGFsbCBjYXNlcyxcbiAgICAgIC8vIGxpa2Ugd2hlbiB1c2VEaXNhYmxlRm9yUm91dGVyTGlua1Byb3BzID09PSBmYWxzZSAoUVJvdXRlVGFiKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIC8vIGRvbid0IHJlZGlyZWN0IHdpdGggY29udHJvbCBrZXlzO1xuICAgICAgLy8gc2hvdWxkIG1hdGNoIFJvdXRlckxpbmsgZnJvbSBWdWUgUm91dGVyXG4gICAgICBlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXlcblxuICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcbiAgICAgIHx8IChlLmJ1dHRvbiAhPT0gdm9pZCAwICYmIGUuYnV0dG9uICE9PSAwKVxuXG4gICAgICAvLyBkb24ndCByZWRpcmVjdCBpZiBpdCBzaG91bGQgb3BlbiBpbiBhIG5ldyB3aW5kb3dcbiAgICAgIHx8IHByb3BzLnRhcmdldCA9PT0gJ19ibGFuaydcbiAgICApIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXG4gICAgfVxuXG4gICAgLy8gaGluZGVyIHRoZSBuYXRpdmUgbmF2aWdhdGlvblxuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgLy8gdGhlbigpIGNhbiBhbHNvIHJldHVybiBhIFwic29mdFwiIHJvdXRlciBlcnJvciAoVnVlIFJvdXRlciBiZWhhdmlvcilcbiAgICBjb25zdCBwcm9taXNlID0gcHJveHkuJHJvdXRlclsgcmVwbGFjZSA9PT0gdHJ1ZSA/ICdyZXBsYWNlJyA6ICdwdXNoJyBdKHRvKVxuXG4gICAgcmV0dXJuIHJldHVyblJvdXRlckVycm9yID09PSB0cnVlXG4gICAgICA/IHByb21pc2VcbiAgICAgIC8vIGVsc2UgY2F0Y2hpbmcgaGFyZCBlcnJvcnMgYW5kIGFsc28gXCJzb2Z0XCIgb25lcyAtIHRoZW4oZXJyID0+IC4uLilcbiAgICAgIDogcHJvbWlzZS50aGVuKCgpID0+IHt9KS5jYXRjaCgoKSA9PiB7fSlcbiAgfVxuXG4gIC8vIHdhcm5pbmchIGVuc3VyZSB0aGF0IHRoZSBjb21wb25lbnQgdXNpbmcgaXQgaGFzICdjbGljaycgaW5jbHVkZWQgaW4gaXRzICdlbWl0cycgZGVmaW5pdGlvbiBwcm9wXG4gIGZ1bmN0aW9uIG5hdmlnYXRlT25DbGljayAoZSkge1xuICAgIGlmIChoYXNSb3V0ZXJMaW5rLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBjb25zdCBnbyA9IG9wdHMgPT4gbmF2aWdhdGVUb1JvdXRlckxpbmsoZSwgb3B0cylcblxuICAgICAgZW1pdCgnY2xpY2snLCBlLCBnbylcbiAgICAgIGUuZGVmYXVsdFByZXZlbnRlZCAhPT0gdHJ1ZSAmJiBnbygpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZW1pdCgnY2xpY2snLCBlKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaGFzUm91dGVyTGluayxcbiAgICBoYXNIcmVmTGluayxcbiAgICBoYXNMaW5rLFxuXG4gICAgbGlua1RhZyxcbiAgICByZXNvbHZlZExpbmssXG4gICAgbGlua0lzQWN0aXZlLFxuICAgIGxpbmtJc0V4YWN0QWN0aXZlLFxuICAgIGxpbmtDbGFzcyxcbiAgICBsaW5rQXR0cnMsXG5cbiAgICBnZXRMaW5rLFxuICAgIG5hdmlnYXRlVG9Sb3V0ZXJMaW5rLFxuICAgIG5hdmlnYXRlT25DbGlja1xuICB9XG59XG4iLCJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHVzZUFsaWduLCB7IHVzZUFsaWduUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1hbGlnbi5qcydcbmltcG9ydCB1c2VTaXplLCB7IHVzZVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXNpemUuanMnXG5pbXBvcnQgdXNlUm91dGVyTGluaywgeyB1c2VSb3V0ZXJMaW5rUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1yb3V0ZXItbGluay5qcydcblxuZXhwb3J0IGNvbnN0IGJ0blBhZGRpbmcgPSB7XG4gIG5vbmU6IDAsXG4gIHhzOiA0LFxuICBzbTogOCxcbiAgbWQ6IDE2LFxuICBsZzogMjQsXG4gIHhsOiAzMlxufVxuXG5jb25zdCBkZWZhdWx0U2l6ZXMgPSB7XG4gIHhzOiA4LFxuICBzbTogMTAsXG4gIG1kOiAxNCxcbiAgbGc6IDIwLFxuICB4bDogMjRcbn1cblxuY29uc3QgZm9ybVR5cGVzID0gWyAnYnV0dG9uJywgJ3N1Ym1pdCcsICdyZXNldCcgXVxuY29uc3QgbWVkaWFUeXBlUkUgPSAvW15cXHNdXFwvW15cXHNdL1xuXG5leHBvcnQgY29uc3QgYnRuRGVzaWduT3B0aW9ucyA9IFsgJ2ZsYXQnLCAnb3V0bGluZScsICdwdXNoJywgJ3VuZWxldmF0ZWQnIF1cbmV4cG9ydCBjb25zdCBnZXRCdG5EZXNpZ24gPSAocHJvcHMsIGRlZmF1bHRWYWx1ZSkgPT4ge1xuICBpZiAocHJvcHMuZmxhdCA9PT0gdHJ1ZSkgcmV0dXJuICdmbGF0J1xuICBpZiAocHJvcHMub3V0bGluZSA9PT0gdHJ1ZSkgcmV0dXJuICdvdXRsaW5lJ1xuICBpZiAocHJvcHMucHVzaCA9PT0gdHJ1ZSkgcmV0dXJuICdwdXNoJ1xuICBpZiAocHJvcHMudW5lbGV2YXRlZCA9PT0gdHJ1ZSkgcmV0dXJuICd1bmVsZXZhdGVkJ1xuICByZXR1cm4gZGVmYXVsdFZhbHVlXG59XG5leHBvcnQgY29uc3QgZ2V0QnRuRGVzaWduQXR0ciA9IHByb3BzID0+IHtcbiAgY29uc3QgZGVzaWduID0gZ2V0QnRuRGVzaWduKHByb3BzKVxuICByZXR1cm4gZGVzaWduICE9PSB2b2lkIDBcbiAgICA/IHsgWyBkZXNpZ24gXTogdHJ1ZSB9XG4gICAgOiB7fVxufVxuXG5leHBvcnQgY29uc3QgdXNlQnRuUHJvcHMgPSB7XG4gIC4uLnVzZVNpemVQcm9wcyxcbiAgLi4udXNlUm91dGVyTGlua1Byb3BzLFxuXG4gIHR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ2J1dHRvbidcbiAgfSxcblxuICBsYWJlbDogWyBOdW1iZXIsIFN0cmluZyBdLFxuICBpY29uOiBTdHJpbmcsXG4gIGljb25SaWdodDogU3RyaW5nLFxuXG4gIC4uLmJ0bkRlc2lnbk9wdGlvbnMucmVkdWNlKFxuICAgIChhY2MsIHZhbCkgPT4gKGFjY1sgdmFsIF0gPSBCb29sZWFuKSAmJiBhY2MsXG4gICAge31cbiAgKSxcblxuICBzcXVhcmU6IEJvb2xlYW4sXG4gIHJvdW5kOiBCb29sZWFuLFxuICByb3VuZGVkOiBCb29sZWFuLFxuICBnbG9zc3k6IEJvb2xlYW4sXG5cbiAgc2l6ZTogU3RyaW5nLFxuICBmYWI6IEJvb2xlYW4sXG4gIGZhYk1pbmk6IEJvb2xlYW4sXG4gIHBhZGRpbmc6IFN0cmluZyxcblxuICBjb2xvcjogU3RyaW5nLFxuICB0ZXh0Q29sb3I6IFN0cmluZyxcbiAgbm9DYXBzOiBCb29sZWFuLFxuICBub1dyYXA6IEJvb2xlYW4sXG4gIGRlbnNlOiBCb29sZWFuLFxuXG4gIHRhYmluZGV4OiBbIE51bWJlciwgU3RyaW5nIF0sXG5cbiAgcmlwcGxlOiB7XG4gICAgdHlwZTogWyBCb29sZWFuLCBPYmplY3QgXSxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0sXG5cbiAgYWxpZ246IHtcbiAgICAuLi51c2VBbGlnblByb3BzLmFsaWduLFxuICAgIGRlZmF1bHQ6ICdjZW50ZXInXG4gIH0sXG4gIHN0YWNrOiBCb29sZWFuLFxuICBzdHJldGNoOiBCb29sZWFuLFxuICBsb2FkaW5nOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBudWxsXG4gIH0sXG4gIGRpc2FibGU6IEJvb2xlYW5cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHByb3BzKSB7XG4gIGNvbnN0IHNpemVTdHlsZSA9IHVzZVNpemUocHJvcHMsIGRlZmF1bHRTaXplcylcbiAgY29uc3QgYWxpZ25DbGFzcyA9IHVzZUFsaWduKHByb3BzKVxuICBjb25zdCB7IGhhc1JvdXRlckxpbmssIGhhc0xpbmssIGxpbmtUYWcsIGxpbmtBdHRycywgbmF2aWdhdGVPbkNsaWNrIH0gPSB1c2VSb3V0ZXJMaW5rKHtcbiAgICBmYWxsYmFja1RhZzogJ2J1dHRvbidcbiAgfSlcblxuICBjb25zdCBzdHlsZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCBvYmogPSBwcm9wcy5mYWIgPT09IGZhbHNlICYmIHByb3BzLmZhYk1pbmkgPT09IGZhbHNlXG4gICAgICA/IHNpemVTdHlsZS52YWx1ZVxuICAgICAgOiB7fVxuXG4gICAgcmV0dXJuIHByb3BzLnBhZGRpbmcgIT09IHZvaWQgMFxuICAgICAgPyBPYmplY3QuYXNzaWduKHt9LCBvYmosIHtcbiAgICAgICAgcGFkZGluZzogcHJvcHMucGFkZGluZ1xuICAgICAgICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgICAgICAgLm1hcCh2ID0+ICh2IGluIGJ0blBhZGRpbmcgPyBidG5QYWRkaW5nWyB2IF0gKyAncHgnIDogdikpXG4gICAgICAgICAgLmpvaW4oJyAnKSxcbiAgICAgICAgbWluV2lkdGg6ICcwJyxcbiAgICAgICAgbWluSGVpZ2h0OiAnMCdcbiAgICAgIH0pXG4gICAgICA6IG9ialxuICB9KVxuXG4gIGNvbnN0IGlzUm91bmRlZCA9IGNvbXB1dGVkKCgpID0+XG4gICAgcHJvcHMucm91bmRlZCA9PT0gdHJ1ZSB8fCBwcm9wcy5mYWIgPT09IHRydWUgfHwgcHJvcHMuZmFiTWluaSA9PT0gdHJ1ZVxuICApXG5cbiAgY29uc3QgaXNBY3Rpb25hYmxlID0gY29tcHV0ZWQoKCkgPT5cbiAgICBwcm9wcy5kaXNhYmxlICE9PSB0cnVlICYmIHByb3BzLmxvYWRpbmcgIT09IHRydWVcbiAgKVxuXG4gIGNvbnN0IHRhYkluZGV4ID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIGlzQWN0aW9uYWJsZS52YWx1ZSA9PT0gdHJ1ZSA/IHByb3BzLnRhYmluZGV4IHx8IDAgOiAtMVxuICApKVxuXG4gIGNvbnN0IGRlc2lnbiA9IGNvbXB1dGVkKCgpID0+IGdldEJ0bkRlc2lnbihwcm9wcywgJ3N0YW5kYXJkJykpXG5cbiAgY29uc3QgYXR0cmlidXRlcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCBhY2MgPSB7IHRhYmluZGV4OiB0YWJJbmRleC52YWx1ZSB9XG5cbiAgICBpZiAoaGFzTGluay52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgT2JqZWN0LmFzc2lnbihhY2MsIGxpbmtBdHRycy52YWx1ZSlcbiAgICB9XG4gICAgZWxzZSBpZiAoZm9ybVR5cGVzLmluY2x1ZGVzKHByb3BzLnR5cGUpID09PSB0cnVlKSB7XG4gICAgICBhY2MudHlwZSA9IHByb3BzLnR5cGVcbiAgICB9XG5cbiAgICBpZiAobGlua1RhZy52YWx1ZSA9PT0gJ2EnKSB7XG4gICAgICBpZiAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICBhY2NbICdhcmlhLWRpc2FibGVkJyBdID0gJ3RydWUnXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChhY2MuaHJlZiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGFjYy5yb2xlID0gJ2J1dHRvbidcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc1JvdXRlckxpbmsudmFsdWUgIT09IHRydWUgJiYgbWVkaWFUeXBlUkUudGVzdChwcm9wcy50eXBlKSA9PT0gdHJ1ZSkge1xuICAgICAgICBhY2MudHlwZSA9IHByb3BzLnR5cGVcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgYWNjLmRpc2FibGVkID0gJydcbiAgICAgIGFjY1sgJ2FyaWEtZGlzYWJsZWQnIF0gPSAndHJ1ZSdcbiAgICB9XG5cbiAgICBpZiAocHJvcHMubG9hZGluZyA9PT0gdHJ1ZSAmJiBwcm9wcy5wZXJjZW50YWdlICE9PSB2b2lkIDApIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oYWNjLCB7XG4gICAgICAgIHJvbGU6ICdwcm9ncmVzc2JhcicsXG4gICAgICAgICdhcmlhLXZhbHVlbWluJzogMCxcbiAgICAgICAgJ2FyaWEtdmFsdWVtYXgnOiAxMDAsXG4gICAgICAgICdhcmlhLXZhbHVlbm93JzogcHJvcHMucGVyY2VudGFnZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gYWNjXG4gIH0pXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBsZXQgY29sb3JzXG5cbiAgICBpZiAocHJvcHMuY29sb3IgIT09IHZvaWQgMCkge1xuICAgICAgaWYgKHByb3BzLmZsYXQgPT09IHRydWUgfHwgcHJvcHMub3V0bGluZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb2xvcnMgPSBgdGV4dC0keyBwcm9wcy50ZXh0Q29sb3IgfHwgcHJvcHMuY29sb3IgfWBcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb2xvcnMgPSBgYmctJHsgcHJvcHMuY29sb3IgfSB0ZXh0LSR7IHByb3BzLnRleHRDb2xvciB8fCAnd2hpdGUnIH1gXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHByb3BzLnRleHRDb2xvcikge1xuICAgICAgY29sb3JzID0gYHRleHQtJHsgcHJvcHMudGV4dENvbG9yIH1gXG4gICAgfVxuXG4gICAgY29uc3Qgc2hhcGUgPSBwcm9wcy5yb3VuZCA9PT0gdHJ1ZVxuICAgICAgPyAncm91bmQnXG4gICAgICA6IGByZWN0YW5nbGUkeyBpc1JvdW5kZWQudmFsdWUgPT09IHRydWUgPyAnIHEtYnRuLS1yb3VuZGVkJyA6IChwcm9wcy5zcXVhcmUgPT09IHRydWUgPyAnIHEtYnRuLS1zcXVhcmUnIDogJycpIH1gXG5cbiAgICByZXR1cm4gYHEtYnRuLS0keyBkZXNpZ24udmFsdWUgfSBxLWJ0bi0tJHsgc2hhcGUgfWBcbiAgICAgICsgKGNvbG9ycyAhPT0gdm9pZCAwID8gJyAnICsgY29sb3JzIDogJycpXG4gICAgICArIChpc0FjdGlvbmFibGUudmFsdWUgPT09IHRydWUgPyAnIHEtYnRuLS1hY3Rpb25hYmxlIHEtZm9jdXNhYmxlIHEtaG92ZXJhYmxlJyA6IChwcm9wcy5kaXNhYmxlID09PSB0cnVlID8gJyBkaXNhYmxlZCcgOiAnJykpXG4gICAgICArIChwcm9wcy5mYWIgPT09IHRydWUgPyAnIHEtYnRuLS1mYWInIDogKHByb3BzLmZhYk1pbmkgPT09IHRydWUgPyAnIHEtYnRuLS1mYWItbWluaScgOiAnJykpXG4gICAgICArIChwcm9wcy5ub0NhcHMgPT09IHRydWUgPyAnIHEtYnRuLS1uby11cHBlcmNhc2UnIDogJycpXG4gICAgICArIChwcm9wcy5kZW5zZSA9PT0gdHJ1ZSA/ICcgcS1idG4tLWRlbnNlJyA6ICcnKVxuICAgICAgKyAocHJvcHMuc3RyZXRjaCA9PT0gdHJ1ZSA/ICcgbm8tYm9yZGVyLXJhZGl1cyBzZWxmLXN0cmV0Y2gnIDogJycpXG4gICAgICArIChwcm9wcy5nbG9zc3kgPT09IHRydWUgPyAnIGdsb3NzeScgOiAnJylcbiAgICAgICsgKHByb3BzLnNxdWFyZSA/ICcgcS1idG4tLXNxdWFyZScgOiAnJylcbiAgfSlcblxuICBjb25zdCBpbm5lckNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgIGFsaWduQ2xhc3MudmFsdWUgKyAocHJvcHMuc3RhY2sgPT09IHRydWUgPyAnIGNvbHVtbicgOiAnIHJvdycpXG4gICAgKyAocHJvcHMubm9XcmFwID09PSB0cnVlID8gJyBuby13cmFwIHRleHQtbm8td3JhcCcgOiAnJylcbiAgICArIChwcm9wcy5sb2FkaW5nID09PSB0cnVlID8gJyBxLWJ0bl9fY29udGVudC0taGlkZGVuJyA6ICcnKVxuICApXG5cbiAgcmV0dXJuIHtcbiAgICBjbGFzc2VzLFxuICAgIHN0eWxlLFxuICAgIGlubmVyQ2xhc3NlcyxcbiAgICBhdHRyaWJ1dGVzLFxuICAgIGhhc0xpbmssXG4gICAgbGlua1RhZyxcbiAgICBuYXZpZ2F0ZU9uQ2xpY2ssXG4gICAgaXNBY3Rpb25hYmxlXG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIFRyYW5zaXRpb24sIG9uQmVmb3JlVW5tb3VudCwgd2l0aERpcmVjdGl2ZXMsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFJY29uIGZyb20gJy4uL2ljb24vUUljb24uanMnXG5pbXBvcnQgUVNwaW5uZXIgZnJvbSAnLi4vc3Bpbm5lci9RU3Bpbm5lci5qcydcblxuaW1wb3J0IFJpcHBsZSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL1JpcHBsZS5qcydcblxuaW1wb3J0IHVzZUJ0biwgeyB1c2VCdG5Qcm9wcyB9IGZyb20gJy4vdXNlLWJ0bi5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBoTWVyZ2VTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMnXG5pbXBvcnQgeyBzdG9wLCBwcmV2ZW50LCBzdG9wQW5kUHJldmVudCwgbGlzdGVuT3B0cyB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50LmpzJ1xuaW1wb3J0IHsgaXNLZXlDb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9rZXktY29tcG9zaXRpb24uanMnXG5cbmNvbnN0IHsgcGFzc2l2ZUNhcHR1cmUgfSA9IGxpc3Rlbk9wdHNcblxubGV0XG4gIHRvdWNoVGFyZ2V0ID0gbnVsbCxcbiAga2V5Ym9hcmRUYXJnZXQgPSBudWxsLFxuICBtb3VzZVRhcmdldCA9IG51bGxcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FCdG4nLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlQnRuUHJvcHMsXG5cbiAgICBwZXJjZW50YWdlOiBOdW1iZXIsXG4gICAgZGFya1BlcmNlbnRhZ2U6IEJvb2xlYW4sXG5cbiAgICBvblRvdWNoc3RhcnQ6IFsgRnVuY3Rpb24sIEFycmF5IF1cbiAgfSxcblxuICBlbWl0czogWyAnY2xpY2snLCAna2V5ZG93bicsICdtb3VzZWRvd24nLCAna2V5dXAnIF0sXG5cbiAgc2V0dXAgKHByb3BzLCB7IHNsb3RzLCBlbWl0IH0pIHtcbiAgICBjb25zdCB7IHByb3h5IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gICAgY29uc3Qge1xuICAgICAgY2xhc3Nlcywgc3R5bGUsIGlubmVyQ2xhc3NlcyxcbiAgICAgIGF0dHJpYnV0ZXMsXG4gICAgICBoYXNMaW5rLCBsaW5rVGFnLCBuYXZpZ2F0ZU9uQ2xpY2ssXG4gICAgICBpc0FjdGlvbmFibGVcbiAgICB9ID0gdXNlQnRuKHByb3BzKVxuXG4gICAgY29uc3Qgcm9vdFJlZiA9IHJlZihudWxsKVxuICAgIGNvbnN0IGJsdXJUYXJnZXRSZWYgPSByZWYobnVsbClcblxuICAgIGxldCBsb2NhbFRvdWNoVGFyZ2V0RWwgPSBudWxsLCBhdm9pZE1vdXNlUmlwcGxlLCBtb3VzZVRpbWVyXG5cbiAgICBjb25zdCBoYXNMYWJlbCA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBwcm9wcy5sYWJlbCAhPT0gdm9pZCAwICYmIHByb3BzLmxhYmVsICE9PSBudWxsICYmIHByb3BzLmxhYmVsICE9PSAnJ1xuICAgIClcblxuICAgIGNvbnN0IHJpcHBsZSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLmRpc2FibGUgPT09IHRydWUgfHwgcHJvcHMucmlwcGxlID09PSBmYWxzZVxuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDoge1xuICAgICAgICAgICAga2V5Q29kZXM6IGhhc0xpbmsudmFsdWUgPT09IHRydWUgPyBbIDEzLCAzMiBdIDogWyAxMyBdLFxuICAgICAgICAgICAgLi4uKHByb3BzLnJpcHBsZSA9PT0gdHJ1ZSA/IHt9IDogcHJvcHMucmlwcGxlKVxuICAgICAgICAgIH1cbiAgICApKVxuXG4gICAgY29uc3QgcmlwcGxlUHJvcHMgPSBjb21wdXRlZCgoKSA9PiAoeyBjZW50ZXI6IHByb3BzLnJvdW5kIH0pKVxuXG4gICAgY29uc3QgcGVyY2VudGFnZVN0eWxlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgY29uc3QgdmFsID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBwcm9wcy5wZXJjZW50YWdlKSlcbiAgICAgIHJldHVybiB2YWwgPiAwXG4gICAgICAgID8geyB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuNnMnLCB0cmFuc2Zvcm06IGB0cmFuc2xhdGVYKCR7IHZhbCAtIDEwMCB9JSlgIH1cbiAgICAgICAgOiB7fVxuICAgIH0pXG5cbiAgICBjb25zdCBvbkV2ZW50cyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGlmIChwcm9wcy5sb2FkaW5nID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgb25Nb3VzZWRvd246IG9uTG9hZGluZ0V2dCxcbiAgICAgICAgICBvblRvdWNoc3RhcnQ6IG9uTG9hZGluZ0V2dCxcbiAgICAgICAgICBvbkNsaWNrOiBvbkxvYWRpbmdFdnQsXG4gICAgICAgICAgb25LZXlkb3duOiBvbkxvYWRpbmdFdnQsXG4gICAgICAgICAgb25LZXl1cDogb25Mb2FkaW5nRXZ0XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlzQWN0aW9uYWJsZS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBhY2MgPSB7XG4gICAgICAgICAgb25DbGljayxcbiAgICAgICAgICBvbktleWRvd24sXG4gICAgICAgICAgb25Nb3VzZWRvd25cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm94eS4kcS5wbGF0Zm9ybS5oYXMudG91Y2ggPT09IHRydWUpIHtcbiAgICAgICAgICBjb25zdCBzdWZmaXggPSBwcm9wcy5vblRvdWNoc3RhcnQgIT09IHZvaWQgMFxuICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgOiAnUGFzc2l2ZSdcblxuICAgICAgICAgIGFjY1sgYG9uVG91Y2hzdGFydCR7IHN1ZmZpeCB9YCBdID0gb25Ub3VjaHN0YXJ0XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWNjXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC8vIG5lZWRlZDsgZXNwZWNpYWxseSBmb3IgZGlzYWJsZWQgPGE+IHRhZ3NcbiAgICAgICAgb25DbGljazogc3RvcEFuZFByZXZlbnRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3Qgbm9kZVByb3BzID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgIHJlZjogcm9vdFJlZixcbiAgICAgIGNsYXNzOiAncS1idG4gcS1idG4taXRlbSBub24tc2VsZWN0YWJsZSBuby1vdXRsaW5lICcgKyBjbGFzc2VzLnZhbHVlLFxuICAgICAgc3R5bGU6IHN0eWxlLnZhbHVlLFxuICAgICAgLi4uYXR0cmlidXRlcy52YWx1ZSxcbiAgICAgIC4uLm9uRXZlbnRzLnZhbHVlXG4gICAgfSkpXG5cbiAgICBmdW5jdGlvbiBvbkNsaWNrIChlKSB7XG4gICAgICAvLyBpcyBpdCBhbHJlYWR5IGRlc3Ryb3llZD9cbiAgICAgIGlmIChyb290UmVmLnZhbHVlID09PSBudWxsKSB7IHJldHVybiB9XG5cbiAgICAgIGlmIChlICE9PSB2b2lkIDApIHtcbiAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICAgIC8vIGZvY3VzIGJ1dHRvbiBpZiBpdCBjYW1lIGZyb20gRU5URVIgb24gZm9ybVxuICAgICAgICAvLyBwcmV2ZW50IHRoZSBuZXcgc3VibWl0IChhbHJlYWR5IGRvbmUpXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwcm9wcy50eXBlID09PSAnc3VibWl0J1xuICAgICAgICAgICYmIGVsICE9PSBkb2N1bWVudC5ib2R5XG4gICAgICAgICAgJiYgcm9vdFJlZi52YWx1ZS5jb250YWlucyhlbCkgPT09IGZhbHNlXG4gICAgICAgICAgLy8gcmVxdWlyZWQgZm9yIGlPUyBhbmQgZGVza3RvcCBTYWZhcmlcbiAgICAgICAgICAmJiBlbC5jb250YWlucyhyb290UmVmLnZhbHVlKSA9PT0gZmFsc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgcm9vdFJlZi52YWx1ZS5mb2N1cygpXG5cbiAgICAgICAgICBjb25zdCBvbkNsaWNrQ2xlYW51cCA9ICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBzdG9wQW5kUHJldmVudCwgdHJ1ZSlcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25DbGlja0NsZWFudXAsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgICAgICAgcm9vdFJlZi52YWx1ZSAhPT0gbnVsbCAmJiByb290UmVmLnZhbHVlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkNsaWNrQ2xlYW51cCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHN0b3BBbmRQcmV2ZW50LCB0cnVlKVxuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25DbGlja0NsZWFudXAsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgICAgIHJvb3RSZWYudmFsdWUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQ2xpY2tDbGVhbnVwLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBuYXZpZ2F0ZU9uQ2xpY2soZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbktleWRvd24gKGUpIHtcbiAgICAgIC8vIGlzIGl0IGFscmVhZHkgZGVzdHJveWVkP1xuICAgICAgaWYgKHJvb3RSZWYudmFsdWUgPT09IG51bGwpIHsgcmV0dXJuIH1cblxuICAgICAgZW1pdCgna2V5ZG93bicsIGUpXG5cbiAgICAgIGlmIChpc0tleUNvZGUoZSwgWyAxMywgMzIgXSkgPT09IHRydWUgJiYga2V5Ym9hcmRUYXJnZXQgIT09IHJvb3RSZWYudmFsdWUpIHtcbiAgICAgICAga2V5Ym9hcmRUYXJnZXQgIT09IG51bGwgJiYgY2xlYW51cCgpXG5cbiAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgIC8vIGZvY3VzIGV4dGVybmFsIGJ1dHRvbiBpZiB0aGUgZm9jdXMgaGVscGVyIHdhcyBmb2N1c2VkIGJlZm9yZVxuICAgICAgICAgIHJvb3RSZWYudmFsdWUuZm9jdXMoKVxuXG4gICAgICAgICAga2V5Ym9hcmRUYXJnZXQgPSByb290UmVmLnZhbHVlXG4gICAgICAgICAgcm9vdFJlZi52YWx1ZS5jbGFzc0xpc3QuYWRkKCdxLWJ0bi0tYWN0aXZlJylcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uUHJlc3NFbmQsIHRydWUpXG4gICAgICAgICAgcm9vdFJlZi52YWx1ZS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgIH1cblxuICAgICAgICBzdG9wQW5kUHJldmVudChlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uVG91Y2hzdGFydCAoZSkge1xuICAgICAgLy8gaXMgaXQgYWxyZWFkeSBkZXN0cm95ZWQ/XG4gICAgICBpZiAocm9vdFJlZi52YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gfVxuXG4gICAgICBlbWl0KCd0b3VjaHN0YXJ0JywgZSlcblxuICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCA9PT0gdHJ1ZSkgeyByZXR1cm4gfVxuXG4gICAgICBpZiAodG91Y2hUYXJnZXQgIT09IHJvb3RSZWYudmFsdWUpIHtcbiAgICAgICAgdG91Y2hUYXJnZXQgIT09IG51bGwgJiYgY2xlYW51cCgpXG4gICAgICAgIHRvdWNoVGFyZ2V0ID0gcm9vdFJlZi52YWx1ZVxuXG4gICAgICAgIGxvY2FsVG91Y2hUYXJnZXRFbCA9IGUudGFyZ2V0XG4gICAgICAgIGxvY2FsVG91Y2hUYXJnZXRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIG9uUHJlc3NFbmQsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgICBsb2NhbFRvdWNoVGFyZ2V0RWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgIH1cblxuICAgICAgLy8gYXZvaWQgZHVwbGljYXRlZCBtb3VzZWRvd24gZXZlbnRcbiAgICAgIC8vIHRyaWdnZXJpbmcgYW5vdGhlciBlYXJseSByaXBwbGVcbiAgICAgIGF2b2lkTW91c2VSaXBwbGUgPSB0cnVlXG4gICAgICBjbGVhclRpbWVvdXQobW91c2VUaW1lcilcbiAgICAgIG1vdXNlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYXZvaWRNb3VzZVJpcHBsZSA9IGZhbHNlXG4gICAgICB9LCAyMDApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Nb3VzZWRvd24gKGUpIHtcbiAgICAgIC8vIGlzIGl0IGFscmVhZHkgZGVzdHJveWVkP1xuICAgICAgaWYgKHJvb3RSZWYudmFsdWUgPT09IG51bGwpIHsgcmV0dXJuIH1cblxuICAgICAgZS5xU2tpcFJpcHBsZSA9IGF2b2lkTW91c2VSaXBwbGUgPT09IHRydWVcbiAgICAgIGVtaXQoJ21vdXNlZG93bicsIGUpXG5cbiAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQgIT09IHRydWUgJiYgbW91c2VUYXJnZXQgIT09IHJvb3RSZWYudmFsdWUpIHtcbiAgICAgICAgbW91c2VUYXJnZXQgIT09IG51bGwgJiYgY2xlYW51cCgpXG4gICAgICAgIG1vdXNlVGFyZ2V0ID0gcm9vdFJlZi52YWx1ZVxuICAgICAgICByb290UmVmLnZhbHVlLmNsYXNzTGlzdC5hZGQoJ3EtYnRuLS1hY3RpdmUnKVxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25QcmVzc0VuZCAoZSkge1xuICAgICAgLy8gaXMgaXQgYWxyZWFkeSBkZXN0cm95ZWQ/XG4gICAgICBpZiAocm9vdFJlZi52YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gfVxuXG4gICAgICAvLyBuZWVkZWQgZm9yIElFIChiZWNhdXNlIGl0IGVtaXRzIGJsdXIgd2hlbiBmb2N1c2luZyBidXR0b24gZnJvbSBmb2N1cyBoZWxwZXIpXG4gICAgICBpZiAoZSAhPT0gdm9pZCAwICYmIGUudHlwZSA9PT0gJ2JsdXInICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHJvb3RSZWYudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChlICE9PSB2b2lkIDAgJiYgZS50eXBlID09PSAna2V5dXAnKSB7XG4gICAgICAgIGlmIChrZXlib2FyZFRhcmdldCA9PT0gcm9vdFJlZi52YWx1ZSAmJiBpc0tleUNvZGUoZSwgWyAxMywgMzIgXSkgPT09IHRydWUpIHtcbiAgICAgICAgICAvLyBmb3IgY2xpY2sgdHJpZ2dlclxuICAgICAgICAgIGNvbnN0IGV2dCA9IG5ldyBNb3VzZUV2ZW50KCdjbGljaycsIGUpXG4gICAgICAgICAgZXZ0LnFLZXlFdmVudCA9IHRydWVcbiAgICAgICAgICBlLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHRydWUgJiYgcHJldmVudChldnQpXG4gICAgICAgICAgZS5jYW5jZWxCdWJibGUgPT09IHRydWUgJiYgc3RvcChldnQpXG4gICAgICAgICAgcm9vdFJlZi52YWx1ZS5kaXNwYXRjaEV2ZW50KGV2dClcblxuICAgICAgICAgIHN0b3BBbmRQcmV2ZW50KGUpXG5cbiAgICAgICAgICAvLyBmb3IgcmlwcGxlXG4gICAgICAgICAgZS5xS2V5RXZlbnQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBlbWl0KCdrZXl1cCcsIGUpXG4gICAgICB9XG5cbiAgICAgIGNsZWFudXAoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXAgKGRlc3Ryb3lpbmcpIHtcbiAgICAgIGNvbnN0IGJsdXJUYXJnZXQgPSBibHVyVGFyZ2V0UmVmLnZhbHVlXG5cbiAgICAgIGlmIChcbiAgICAgICAgZGVzdHJveWluZyAhPT0gdHJ1ZVxuICAgICAgICAmJiAodG91Y2hUYXJnZXQgPT09IHJvb3RSZWYudmFsdWUgfHwgbW91c2VUYXJnZXQgPT09IHJvb3RSZWYudmFsdWUpXG4gICAgICAgICYmIGJsdXJUYXJnZXQgIT09IG51bGxcbiAgICAgICAgJiYgYmx1clRhcmdldCAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgICAgKSB7XG4gICAgICAgIGJsdXJUYXJnZXQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKVxuICAgICAgICBibHVyVGFyZ2V0LmZvY3VzKClcbiAgICAgIH1cblxuICAgICAgaWYgKHRvdWNoVGFyZ2V0ID09PSByb290UmVmLnZhbHVlKSB7XG4gICAgICAgIGlmIChsb2NhbFRvdWNoVGFyZ2V0RWwgIT09IG51bGwpIHtcbiAgICAgICAgICBsb2NhbFRvdWNoVGFyZ2V0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgICBsb2NhbFRvdWNoVGFyZ2V0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgfVxuICAgICAgICB0b3VjaFRhcmdldCA9IGxvY2FsVG91Y2hUYXJnZXRFbCA9IG51bGxcbiAgICAgIH1cblxuICAgICAgaWYgKG1vdXNlVGFyZ2V0ID09PSByb290UmVmLnZhbHVlKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgbW91c2VUYXJnZXQgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIGlmIChrZXlib2FyZFRhcmdldCA9PT0gcm9vdFJlZi52YWx1ZSkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uUHJlc3NFbmQsIHRydWUpXG4gICAgICAgIHJvb3RSZWYudmFsdWUgIT09IG51bGwgJiYgcm9vdFJlZi52YWx1ZS5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgIGtleWJvYXJkVGFyZ2V0ID0gbnVsbFxuICAgICAgfVxuXG4gICAgICByb290UmVmLnZhbHVlICE9PSBudWxsICYmIHJvb3RSZWYudmFsdWUuY2xhc3NMaXN0LnJlbW92ZSgncS1idG4tLWFjdGl2ZScpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Mb2FkaW5nRXZ0IChldnQpIHtcbiAgICAgIHN0b3BBbmRQcmV2ZW50KGV2dClcbiAgICAgIGV2dC5xU2tpcFJpcHBsZSA9IHRydWVcbiAgICB9XG5cbiAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgICAgY2xlYW51cCh0cnVlKVxuICAgIH0pXG5cbiAgICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgICBPYmplY3QuYXNzaWduKHByb3h5LCB7IGNsaWNrOiBvbkNsaWNrIH0pXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbGV0IGlubmVyID0gW11cblxuICAgICAgcHJvcHMuaWNvbiAhPT0gdm9pZCAwICYmIGlubmVyLnB1c2goXG4gICAgICAgIGgoUUljb24sIHtcbiAgICAgICAgICBuYW1lOiBwcm9wcy5pY29uLFxuICAgICAgICAgIGxlZnQ6IHByb3BzLnN0YWNrID09PSBmYWxzZSAmJiBoYXNMYWJlbC52YWx1ZSA9PT0gdHJ1ZSxcbiAgICAgICAgICByb2xlOiAnaW1nJyxcbiAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbiAgICAgICAgfSlcbiAgICAgIClcblxuICAgICAgaGFzTGFiZWwudmFsdWUgPT09IHRydWUgJiYgaW5uZXIucHVzaChcbiAgICAgICAgaCgnc3BhbicsIHsgY2xhc3M6ICdibG9jaycgfSwgWyBwcm9wcy5sYWJlbCBdKVxuICAgICAgKVxuXG4gICAgICBpbm5lciA9IGhNZXJnZVNsb3Qoc2xvdHMuZGVmYXVsdCwgaW5uZXIpXG5cbiAgICAgIGlmIChwcm9wcy5pY29uUmlnaHQgIT09IHZvaWQgMCAmJiBwcm9wcy5yb3VuZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgaW5uZXIucHVzaChcbiAgICAgICAgICBoKFFJY29uLCB7XG4gICAgICAgICAgICBuYW1lOiBwcm9wcy5pY29uUmlnaHQsXG4gICAgICAgICAgICByaWdodDogcHJvcHMuc3RhY2sgPT09IGZhbHNlICYmIGhhc0xhYmVsLnZhbHVlID09PSB0cnVlLFxuICAgICAgICAgICAgcm9sZTogJ2ltZycsXG4gICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoaWxkID0gW1xuICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgIGNsYXNzOiAncS1mb2N1cy1oZWxwZXInLFxuICAgICAgICAgIHJlZjogYmx1clRhcmdldFJlZlxuICAgICAgICB9KVxuICAgICAgXVxuXG4gICAgICBpZiAocHJvcHMubG9hZGluZyA9PT0gdHJ1ZSAmJiBwcm9wcy5wZXJjZW50YWdlICE9PSB2b2lkIDApIHtcbiAgICAgICAgY2hpbGQucHVzaChcbiAgICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgY2xhc3M6ICdxLWJ0bl9fcHJvZ3Jlc3MgYWJzb2x1dGUtZnVsbCBvdmVyZmxvdy1oaWRkZW4nICsgKHByb3BzLmRhcmtQZXJjZW50YWdlID09PSB0cnVlID8gJyBxLWJ0bl9fcHJvZ3Jlc3MtLWRhcmsnIDogJycpXG4gICAgICAgICAgfSwgW1xuICAgICAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgY2xhc3M6ICdxLWJ0bl9fcHJvZ3Jlc3MtaW5kaWNhdG9yIGZpdCBibG9jaycsXG4gICAgICAgICAgICAgIHN0eWxlOiBwZXJjZW50YWdlU3R5bGUudmFsdWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgXSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjaGlsZC5wdXNoKFxuICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgIGNsYXNzOiAncS1idG5fX2NvbnRlbnQgdGV4dC1jZW50ZXIgY29sIGl0ZW1zLWNlbnRlciBxLWFuY2hvci0tc2tpcCAnICsgaW5uZXJDbGFzc2VzLnZhbHVlXG4gICAgICAgIH0sIGlubmVyKVxuICAgICAgKVxuXG4gICAgICBwcm9wcy5sb2FkaW5nICE9PSBudWxsICYmIGNoaWxkLnB1c2goXG4gICAgICAgIGgoVHJhbnNpdGlvbiwge1xuICAgICAgICAgIG5hbWU6ICdxLXRyYW5zaXRpb24tLWZhZGUnXG4gICAgICAgIH0sICgpID0+IChcbiAgICAgICAgICBwcm9wcy5sb2FkaW5nID09PSB0cnVlXG4gICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAga2V5OiAnbG9hZGluZycsXG4gICAgICAgICAgICAgICAgICBjbGFzczogJ2Fic29sdXRlLWZ1bGwgZmxleCBmbGV4LWNlbnRlcidcbiAgICAgICAgICAgICAgICB9LCBzbG90cy5sb2FkaW5nICE9PSB2b2lkIDAgPyBzbG90cy5sb2FkaW5nKCkgOiBbIGgoUVNwaW5uZXIpIF0pXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICApKVxuICAgICAgKVxuXG4gICAgICByZXR1cm4gd2l0aERpcmVjdGl2ZXMoXG4gICAgICAgIGgoXG4gICAgICAgICAgbGlua1RhZy52YWx1ZSxcbiAgICAgICAgICBub2RlUHJvcHMudmFsdWUsXG4gICAgICAgICAgY2hpbGRcbiAgICAgICAgKSxcbiAgICAgICAgWyBbXG4gICAgICAgICAgUmlwcGxlLFxuICAgICAgICAgIHJpcHBsZS52YWx1ZSxcbiAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgcmlwcGxlUHJvcHMudmFsdWVcbiAgICAgICAgXSBdXG4gICAgICApXG4gICAgfVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBtYXJrUmF3LCBUcmFuc2l0aW9uR3JvdXAgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBRQXZhdGFyIGZyb20gJy4uL2NvbXBvbmVudHMvYXZhdGFyL1FBdmF0YXIuanMnXG5pbXBvcnQgUUljb24gZnJvbSAnLi4vY29tcG9uZW50cy9pY29uL1FJY29uLmpzJ1xuaW1wb3J0IFFCdG4gZnJvbSAnLi4vY29tcG9uZW50cy9idG4vUUJ0bi5qcydcbmltcG9ydCBRU3Bpbm5lciBmcm9tICcuLi9jb21wb25lbnRzL3NwaW5uZXIvUVNwaW5uZXIuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4uL3V0aWxzL2V2ZW50LmpzJ1xuaW1wb3J0IHsgY3JlYXRlR2xvYmFsTm9kZSB9IGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvZ2xvYmFsLW5vZGVzLmpzJ1xuaW1wb3J0IHsgY3JlYXRlQ2hpbGRBcHAgfSBmcm9tICcuLi9pbnN0YWxsLXF1YXNhci5qcydcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi4vdXRpbHMvaXMuanMnXG5cbmxldCB1aWQgPSAwXG5cbmNvbnN0IGRlZmF1bHRzID0ge31cbmNvbnN0IGdyb3VwcyA9IHt9XG5jb25zdCBub3RpZmljYXRpb25zTGlzdCA9IHt9XG5jb25zdCBwb3NpdGlvbkNsYXNzID0ge31cbmNvbnN0IGVtcHR5UkUgPSAvXlxccyokL1xuY29uc3Qgbm90aWZSZWZzID0gW11cblxuY29uc3QgcG9zaXRpb25MaXN0ID0gW1xuICAndG9wLWxlZnQnLCAndG9wLXJpZ2h0JyxcbiAgJ2JvdHRvbS1sZWZ0JywgJ2JvdHRvbS1yaWdodCcsXG4gICd0b3AnLCAnYm90dG9tJywgJ2xlZnQnLCAncmlnaHQnLCAnY2VudGVyJ1xuXVxuXG5jb25zdCBiYWRnZVBvc2l0aW9ucyA9IFtcbiAgJ3RvcC1sZWZ0JywgJ3RvcC1yaWdodCcsXG4gICdib3R0b20tbGVmdCcsICdib3R0b20tcmlnaHQnXG5dXG5cbmNvbnN0IG5vdGlmVHlwZXMgPSB7XG4gIHBvc2l0aXZlOiB7XG4gICAgaWNvbjogJHEgPT4gJHEuaWNvblNldC50eXBlLnBvc2l0aXZlLFxuICAgIGNvbG9yOiAncG9zaXRpdmUnXG4gIH0sXG5cbiAgbmVnYXRpdmU6IHtcbiAgICBpY29uOiAkcSA9PiAkcS5pY29uU2V0LnR5cGUubmVnYXRpdmUsXG4gICAgY29sb3I6ICduZWdhdGl2ZSdcbiAgfSxcblxuICB3YXJuaW5nOiB7XG4gICAgaWNvbjogJHEgPT4gJHEuaWNvblNldC50eXBlLndhcm5pbmcsXG4gICAgY29sb3I6ICd3YXJuaW5nJyxcbiAgICB0ZXh0Q29sb3I6ICdkYXJrJ1xuICB9LFxuXG4gIGluZm86IHtcbiAgICBpY29uOiAkcSA9PiAkcS5pY29uU2V0LnR5cGUuaW5mbyxcbiAgICBjb2xvcjogJ2luZm8nXG4gIH0sXG5cbiAgb25nb2luZzoge1xuICAgIGdyb3VwOiBmYWxzZSxcbiAgICB0aW1lb3V0OiAwLFxuICAgIHNwaW5uZXI6IHRydWUsXG4gICAgY29sb3I6ICdncmV5LTgnXG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkTm90aWZpY2F0aW9uIChjb25maWcsICRxLCBvcmlnaW5hbEFwaSkge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHJldHVybiBsb2dFcnJvcigncGFyYW1ldGVyIHJlcXVpcmVkJylcbiAgfVxuXG4gIGxldCBBcGlcbiAgY29uc3Qgbm90aWYgPSB7IHRleHRDb2xvcjogJ3doaXRlJyB9XG5cbiAgaWYgKGNvbmZpZy5pZ25vcmVEZWZhdWx0cyAhPT0gdHJ1ZSkge1xuICAgIE9iamVjdC5hc3NpZ24obm90aWYsIGRlZmF1bHRzKVxuICB9XG5cbiAgaWYgKGlzT2JqZWN0KGNvbmZpZykgPT09IGZhbHNlKSB7XG4gICAgaWYgKG5vdGlmLnR5cGUpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24obm90aWYsIG5vdGlmVHlwZXNbIG5vdGlmLnR5cGUgXSlcbiAgICB9XG5cbiAgICBjb25maWcgPSB7IG1lc3NhZ2U6IGNvbmZpZyB9XG4gIH1cblxuICBPYmplY3QuYXNzaWduKG5vdGlmLCBub3RpZlR5cGVzWyBjb25maWcudHlwZSB8fCBub3RpZi50eXBlIF0sIGNvbmZpZylcblxuICBpZiAodHlwZW9mIG5vdGlmLmljb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBub3RpZi5pY29uID0gbm90aWYuaWNvbigkcSlcbiAgfVxuXG4gIGlmICghbm90aWYuc3Bpbm5lcikge1xuICAgIG5vdGlmLnNwaW5uZXIgPSBmYWxzZVxuICB9XG4gIGVsc2Uge1xuICAgIGlmIChub3RpZi5zcGlubmVyID09PSB0cnVlKSB7XG4gICAgICBub3RpZi5zcGlubmVyID0gUVNwaW5uZXJcbiAgICB9XG5cbiAgICBub3RpZi5zcGlubmVyID0gbWFya1Jhdyhub3RpZi5zcGlubmVyKVxuICB9XG5cbiAgbm90aWYubWV0YSA9IHtcbiAgICBoYXNNZWRpYTogQm9vbGVhbihub3RpZi5zcGlubmVyICE9PSBmYWxzZSB8fCBub3RpZi5pY29uIHx8IG5vdGlmLmF2YXRhciksXG4gICAgaGFzVGV4dDogaGFzQ29udGVudChub3RpZi5tZXNzYWdlKSB8fCBoYXNDb250ZW50KG5vdGlmLmNhcHRpb24pXG4gIH1cblxuICBpZiAobm90aWYucG9zaXRpb24pIHtcbiAgICBpZiAocG9zaXRpb25MaXN0LmluY2x1ZGVzKG5vdGlmLnBvc2l0aW9uKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBsb2dFcnJvcignd3JvbmcgcG9zaXRpb24nLCBjb25maWcpXG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIG5vdGlmLnBvc2l0aW9uID0gJ2JvdHRvbSdcbiAgfVxuXG4gIGlmIChub3RpZi50aW1lb3V0ID09PSB2b2lkIDApIHtcbiAgICBub3RpZi50aW1lb3V0ID0gNTAwMFxuICB9XG4gIGVsc2Uge1xuICAgIGNvbnN0IHQgPSBwYXJzZUludChub3RpZi50aW1lb3V0LCAxMClcbiAgICBpZiAoaXNOYU4odCkgfHwgdCA8IDApIHtcbiAgICAgIHJldHVybiBsb2dFcnJvcignd3JvbmcgdGltZW91dCcsIGNvbmZpZylcbiAgICB9XG4gICAgbm90aWYudGltZW91dCA9IHRcbiAgfVxuXG4gIGlmIChub3RpZi50aW1lb3V0ID09PSAwKSB7XG4gICAgbm90aWYucHJvZ3Jlc3MgPSBmYWxzZVxuICB9XG4gIGVsc2UgaWYgKG5vdGlmLnByb2dyZXNzID09PSB0cnVlKSB7XG4gICAgbm90aWYubWV0YS5wcm9ncmVzc0NsYXNzID0gJ3Etbm90aWZpY2F0aW9uX19wcm9ncmVzcycgKyAoXG4gICAgICBub3RpZi5wcm9ncmVzc0NsYXNzXG4gICAgICAgID8gYCAkeyBub3RpZi5wcm9ncmVzc0NsYXNzIH1gXG4gICAgICAgIDogJydcbiAgICApXG5cbiAgICBub3RpZi5tZXRhLnByb2dyZXNzU3R5bGUgPSB7XG4gICAgICBhbmltYXRpb25EdXJhdGlvbjogYCR7IG5vdGlmLnRpbWVvdXQgKyAxMDAwIH1tc2BcbiAgICB9XG4gIH1cblxuICBjb25zdCBhY3Rpb25zID0gKFxuICAgIEFycmF5LmlzQXJyYXkoY29uZmlnLmFjdGlvbnMpID09PSB0cnVlXG4gICAgICA/IGNvbmZpZy5hY3Rpb25zXG4gICAgICA6IFtdXG4gICkuY29uY2F0KFxuICAgIGNvbmZpZy5pZ25vcmVEZWZhdWx0cyAhPT0gdHJ1ZSAmJiBBcnJheS5pc0FycmF5KGRlZmF1bHRzLmFjdGlvbnMpID09PSB0cnVlXG4gICAgICA/IGRlZmF1bHRzLmFjdGlvbnNcbiAgICAgIDogW11cbiAgKS5jb25jYXQoXG4gICAgbm90aWZUeXBlc1sgY29uZmlnLnR5cGUgXSAhPT0gdm9pZCAwICYmIEFycmF5LmlzQXJyYXkobm90aWZUeXBlc1sgY29uZmlnLnR5cGUgXS5hY3Rpb25zKSA9PT0gdHJ1ZVxuICAgICAgPyBub3RpZlR5cGVzWyBjb25maWcudHlwZSBdLmFjdGlvbnNcbiAgICAgIDogW11cbiAgKVxuXG4gIGNvbnN0IHsgY2xvc2VCdG4gfSA9IG5vdGlmXG4gIGNsb3NlQnRuICYmIGFjdGlvbnMucHVzaCh7XG4gICAgbGFiZWw6IHR5cGVvZiBjbG9zZUJ0biA9PT0gJ3N0cmluZydcbiAgICAgID8gY2xvc2VCdG5cbiAgICAgIDogJHEubGFuZy5sYWJlbC5jbG9zZVxuICB9KVxuXG4gIG5vdGlmLmFjdGlvbnMgPSBhY3Rpb25zLm1hcCgoeyBoYW5kbGVyLCBub0Rpc21pc3MsIC4uLml0ZW0gfSkgPT4gKHtcbiAgICBmbGF0OiB0cnVlLFxuICAgIC4uLml0ZW0sXG4gICAgb25DbGljazogdHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbidcbiAgICAgID8gKCkgPT4ge1xuICAgICAgICAgIGhhbmRsZXIoKVxuICAgICAgICAgIG5vRGlzbWlzcyAhPT0gdHJ1ZSAmJiBkaXNtaXNzKClcbiAgICAgICAgfVxuICAgICAgOiAoKSA9PiB7IGRpc21pc3MoKSB9XG4gIH0pKVxuXG4gIGlmIChub3RpZi5tdWx0aUxpbmUgPT09IHZvaWQgMCkge1xuICAgIG5vdGlmLm11bHRpTGluZSA9IG5vdGlmLmFjdGlvbnMubGVuZ3RoID4gMVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbihub3RpZi5tZXRhLCB7XG4gICAgY2xhc3M6ICdxLW5vdGlmaWNhdGlvbiByb3cgaXRlbXMtc3RyZXRjaCdcbiAgICAgICsgYCBxLW5vdGlmaWNhdGlvbi0tJHsgbm90aWYubXVsdGlMaW5lID09PSB0cnVlID8gJ211bHRpLWxpbmUnIDogJ3N0YW5kYXJkJyB9YFxuICAgICAgKyAobm90aWYuY29sb3IgIT09IHZvaWQgMCA/IGAgYmctJHsgbm90aWYuY29sb3IgfWAgOiAnJylcbiAgICAgICsgKG5vdGlmLnRleHRDb2xvciAhPT0gdm9pZCAwID8gYCB0ZXh0LSR7IG5vdGlmLnRleHRDb2xvciB9YCA6ICcnKVxuICAgICAgKyAobm90aWYuY2xhc3NlcyAhPT0gdm9pZCAwID8gYCAkeyBub3RpZi5jbGFzc2VzIH1gIDogJycpLFxuXG4gICAgd3JhcHBlckNsYXNzOiAncS1ub3RpZmljYXRpb25fX3dyYXBwZXIgY29sIHJlbGF0aXZlLXBvc2l0aW9uIGJvcmRlci1yYWRpdXMtaW5oZXJpdCAnXG4gICAgICArIChub3RpZi5tdWx0aUxpbmUgPT09IHRydWUgPyAnY29sdW1uIG5vLXdyYXAganVzdGlmeS1jZW50ZXInIDogJ3JvdyBpdGVtcy1jZW50ZXInKSxcblxuICAgIGNvbnRlbnRDbGFzczogJ3Etbm90aWZpY2F0aW9uX19jb250ZW50IHJvdyBpdGVtcy1jZW50ZXInXG4gICAgICArIChub3RpZi5tdWx0aUxpbmUgPT09IHRydWUgPyAnJyA6ICcgY29sJyksXG5cbiAgICBsZWZ0Q2xhc3M6IG5vdGlmLm1ldGEuaGFzVGV4dCA9PT0gdHJ1ZSA/ICdhZGRpdGlvbmFsJyA6ICdzaW5nbGUnLFxuXG4gICAgYXR0cnM6IHtcbiAgICAgIHJvbGU6ICdhbGVydCcsXG4gICAgICAuLi5ub3RpZi5hdHRyc1xuICAgIH1cbiAgfSlcblxuICBpZiAobm90aWYuZ3JvdXAgPT09IGZhbHNlKSB7XG4gICAgbm90aWYuZ3JvdXAgPSB2b2lkIDBcbiAgICBub3RpZi5tZXRhLmdyb3VwID0gdm9pZCAwXG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKG5vdGlmLmdyb3VwID09PSB2b2lkIDAgfHwgbm90aWYuZ3JvdXAgPT09IHRydWUpIHtcbiAgICAgIC8vIGRvIG5vdCByZXBsYWNlIG5vdGlmaWNhdGlvbnMgd2l0aCBkaWZmZXJlbnQgYnV0dG9uc1xuICAgICAgbm90aWYuZ3JvdXAgPSBbXG4gICAgICAgIG5vdGlmLm1lc3NhZ2UsXG4gICAgICAgIG5vdGlmLmNhcHRpb24sXG4gICAgICAgIG5vdGlmLm11bHRpbGluZVxuICAgICAgXS5jb25jYXQoXG4gICAgICAgIG5vdGlmLmFjdGlvbnMubWFwKHByb3BzID0+IGAkeyBwcm9wcy5sYWJlbCB9KiR7IHByb3BzLmljb24gfWApXG4gICAgICApLmpvaW4oJ3wnKVxuICAgIH1cblxuICAgIG5vdGlmLm1ldGEuZ3JvdXAgPSBub3RpZi5ncm91cCArICd8JyArIG5vdGlmLnBvc2l0aW9uXG4gIH1cblxuICBpZiAobm90aWYuYWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICBub3RpZi5hY3Rpb25zID0gdm9pZCAwXG4gIH1cbiAgZWxzZSB7XG4gICAgbm90aWYubWV0YS5hY3Rpb25zQ2xhc3MgPSAncS1ub3RpZmljYXRpb25fX2FjdGlvbnMgcm93IGl0ZW1zLWNlbnRlciAnXG4gICAgICArIChub3RpZi5tdWx0aUxpbmUgPT09IHRydWUgPyAnanVzdGlmeS1lbmQnIDogJ2NvbC1hdXRvJylcbiAgICAgICsgKG5vdGlmLm1ldGEuaGFzTWVkaWEgPT09IHRydWUgPyAnIHEtbm90aWZpY2F0aW9uX19hY3Rpb25zLS13aXRoLW1lZGlhJyA6ICcnKVxuICB9XG5cbiAgaWYgKG9yaWdpbmFsQXBpICE9PSB2b2lkIDApIHtcbiAgICAvLyByZXNldCB0aW1lb3V0IGlmIGFueVxuICAgIGNsZWFyVGltZW91dChvcmlnaW5hbEFwaS5ub3RpZi5tZXRhLnRpbWVyKVxuXG4gICAgLy8gcmV0YWluIHVpZFxuICAgIG5vdGlmLm1ldGEudWlkID0gb3JpZ2luYWxBcGkubm90aWYubWV0YS51aWRcblxuICAgIC8vIHJlcGxhY2Ugbm90aWZcbiAgICBjb25zdCBpbmRleCA9IG5vdGlmaWNhdGlvbnNMaXN0WyBub3RpZi5wb3NpdGlvbiBdLnZhbHVlLmluZGV4T2Yob3JpZ2luYWxBcGkubm90aWYpXG4gICAgbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWVbIGluZGV4IF0gPSBub3RpZlxuICB9XG4gIGVsc2Uge1xuICAgIGNvbnN0IG9yaWdpbmFsID0gZ3JvdXBzWyBub3RpZi5tZXRhLmdyb3VwIF1cblxuICAgIC8vIHdvb2hvbywgaXQncyBhIG5ldyBub3RpZmljYXRpb25cbiAgICBpZiAob3JpZ2luYWwgPT09IHZvaWQgMCkge1xuICAgICAgbm90aWYubWV0YS51aWQgPSB1aWQrK1xuICAgICAgbm90aWYubWV0YS5iYWRnZSA9IDFcblxuICAgICAgaWYgKFsgJ2xlZnQnLCAncmlnaHQnLCAnY2VudGVyJyBdLmluZGV4T2Yobm90aWYucG9zaXRpb24pICE9PSAtMSkge1xuICAgICAgICBub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5zcGxpY2UoXG4gICAgICAgICAgTWF0aC5mbG9vcihub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5sZW5ndGggLyAyKSxcbiAgICAgICAgICAwLFxuICAgICAgICAgIG5vdGlmXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBub3RpZi5wb3NpdGlvbi5pbmRleE9mKCd0b3AnKSA+IC0xID8gJ3Vuc2hpZnQnIDogJ3B1c2gnXG4gICAgICAgIG5vdGlmaWNhdGlvbnNMaXN0WyBub3RpZi5wb3NpdGlvbiBdLnZhbHVlWyBhY3Rpb24gXShub3RpZilcbiAgICAgIH1cblxuICAgICAgaWYgKG5vdGlmLmdyb3VwICE9PSB2b2lkIDApIHtcbiAgICAgICAgZ3JvdXBzWyBub3RpZi5tZXRhLmdyb3VwIF0gPSBub3RpZlxuICAgICAgfVxuICAgIH1cbiAgICAvLyBvaywgc28gaXQncyBOT1QgYSBuZXcgb25lXG4gICAgZWxzZSB7XG4gICAgICAvLyByZXNldCB0aW1lb3V0IGlmIGFueVxuICAgICAgY2xlYXJUaW1lb3V0KG9yaWdpbmFsLm1ldGEudGltZXIpXG5cbiAgICAgIGlmIChub3RpZi5iYWRnZVBvc2l0aW9uICE9PSB2b2lkIDApIHtcbiAgICAgICAgaWYgKGJhZGdlUG9zaXRpb25zLmluY2x1ZGVzKG5vdGlmLmJhZGdlUG9zaXRpb24pID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBsb2dFcnJvcignd3JvbmcgYmFkZ2VQb3NpdGlvbicsIGNvbmZpZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG5vdGlmLmJhZGdlUG9zaXRpb24gPSBgdG9wLSR7IG5vdGlmLnBvc2l0aW9uLmluZGV4T2YoJ2xlZnQnKSA+IC0xID8gJ3JpZ2h0JyA6ICdsZWZ0JyB9YFxuICAgICAgfVxuXG4gICAgICBub3RpZi5tZXRhLnVpZCA9IG9yaWdpbmFsLm1ldGEudWlkXG4gICAgICBub3RpZi5tZXRhLmJhZGdlID0gb3JpZ2luYWwubWV0YS5iYWRnZSArIDFcbiAgICAgIG5vdGlmLm1ldGEuYmFkZ2VDbGFzcyA9IGBxLW5vdGlmaWNhdGlvbl9fYmFkZ2UgcS1ub3RpZmljYXRpb25fX2JhZGdlLS0keyBub3RpZi5iYWRnZVBvc2l0aW9uIH1gXG4gICAgICAgICsgKG5vdGlmLmJhZGdlQ29sb3IgIT09IHZvaWQgMCA/IGAgYmctJHsgbm90aWYuYmFkZ2VDb2xvciB9YCA6ICcnKVxuICAgICAgICArIChub3RpZi5iYWRnZVRleHRDb2xvciAhPT0gdm9pZCAwID8gYCB0ZXh0LSR7IG5vdGlmLmJhZGdlVGV4dENvbG9yIH1gIDogJycpXG4gICAgICAgICsgKG5vdGlmLmJhZGdlQ2xhc3MgPyBgICR7IG5vdGlmLmJhZGdlQ2xhc3MgfWAgOiAnJylcblxuICAgICAgY29uc3QgaW5kZXggPSBub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5pbmRleE9mKG9yaWdpbmFsKVxuICAgICAgbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWVbIGluZGV4IF0gPSBncm91cHNbIG5vdGlmLm1ldGEuZ3JvdXAgXSA9IG5vdGlmXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGlzbWlzcyA9ICgpID0+IHtcbiAgICByZW1vdmVOb3RpZmljYXRpb24obm90aWYpXG4gICAgQXBpID0gdm9pZCAwXG4gIH1cblxuICBpZiAobm90aWYudGltZW91dCA+IDApIHtcbiAgICBub3RpZi5tZXRhLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkaXNtaXNzKClcbiAgICB9LCBub3RpZi50aW1lb3V0ICsgLyogc2hvdyBkdXJhdGlvbiAqLyAxMDAwKVxuICB9XG5cbiAgLy8gb25seSBub24tZ3JvdXBhYmxlIGNhbiBiZSB1cGRhdGVkXG4gIGlmIChub3RpZi5ncm91cCAhPT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHByb3BzID0+IHtcbiAgICAgIGlmIChwcm9wcyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGxvZ0Vycm9yKCd0cnlpbmcgdG8gdXBkYXRlIGEgZ3JvdXBlZCBvbmUgd2hpY2ggaXMgZm9yYmlkZGVuJywgY29uZmlnKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGRpc21pc3MoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEFwaSA9IHtcbiAgICBkaXNtaXNzLFxuICAgIGNvbmZpZyxcbiAgICBub3RpZlxuICB9XG5cbiAgaWYgKG9yaWdpbmFsQXBpICE9PSB2b2lkIDApIHtcbiAgICBPYmplY3QuYXNzaWduKG9yaWdpbmFsQXBpLCBBcGkpXG4gICAgcmV0dXJuXG4gIH1cblxuICByZXR1cm4gcHJvcHMgPT4ge1xuICAgIC8vIGlmIG5vdGlmaWNhdGlvbiB3YXNuJ3QgcHJldmlvdXNseSBkaXNtaXNzZWRcbiAgICBpZiAoQXBpICE9PSB2b2lkIDApIHtcbiAgICAgIC8vIGlmIG5vIHBhcmFtcywgdGhlbiB3ZSBtdXN0IGRpc21pc3MgdGhlIG5vdGlmaWNhdGlvblxuICAgICAgaWYgKHByb3BzID09PSB2b2lkIDApIHtcbiAgICAgICAgQXBpLmRpc21pc3MoKVxuICAgICAgfVxuICAgICAgLy8gb3RoZXJ3aXNlIHdlJ3JlIHVwZGF0aW5nIGl0XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3Tm90aWYgPSBPYmplY3QuYXNzaWduKHt9LCBBcGkuY29uZmlnLCBwcm9wcywge1xuICAgICAgICAgIGdyb3VwOiBmYWxzZSxcbiAgICAgICAgICBwb3NpdGlvbjogbm90aWYucG9zaXRpb25cbiAgICAgICAgfSlcblxuICAgICAgICBhZGROb3RpZmljYXRpb24obmV3Tm90aWYsICRxLCBBcGkpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZU5vdGlmaWNhdGlvbiAobm90aWYpIHtcbiAgY2xlYXJUaW1lb3V0KG5vdGlmLm1ldGEudGltZXIpXG5cbiAgY29uc3QgaW5kZXggPSBub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5pbmRleE9mKG5vdGlmKVxuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgaWYgKG5vdGlmLmdyb3VwICE9PSB2b2lkIDApIHtcbiAgICAgIGRlbGV0ZSBncm91cHNbIG5vdGlmLm1ldGEuZ3JvdXAgXVxuICAgIH1cblxuICAgIGNvbnN0IGVsID0gbm90aWZSZWZzWyAnJyArIG5vdGlmLm1ldGEudWlkIF1cblxuICAgIGlmIChlbCkge1xuICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBnZXRDb21wdXRlZFN0eWxlKGVsKVxuXG4gICAgICBlbC5zdHlsZS5sZWZ0ID0gYCR7IGVsLm9mZnNldExlZnQgfXB4YFxuICAgICAgZWwuc3R5bGUud2lkdGggPSB3aWR0aFxuICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0XG4gICAgfVxuXG4gICAgbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWUuc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgaWYgKHR5cGVvZiBub3RpZi5vbkRpc21pc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG5vdGlmLm9uRGlzbWlzcygpXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGhhc0NvbnRlbnQgKHN0cikge1xuICByZXR1cm4gc3RyICE9PSB2b2lkIDBcbiAgICAmJiBzdHIgIT09IG51bGxcbiAgICAmJiBlbXB0eVJFLnRlc3Qoc3RyKSAhPT0gdHJ1ZVxufVxuXG5mdW5jdGlvbiBsb2dFcnJvciAoZXJyb3IsIGNvbmZpZykge1xuICBjb25zb2xlLmVycm9yKGBOb3RpZnk6ICR7IGVycm9yIH1gLCBjb25maWcpXG4gIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBnZXRDb21wb25lbnQgKCkge1xuICByZXR1cm4gY3JlYXRlQ29tcG9uZW50KHtcbiAgICBuYW1lOiAnUU5vdGlmaWNhdGlvbnMnLFxuXG4gICAgLy8gaGlkZSBBcHAgZnJvbSBWdWUgZGV2dG9vbHNcbiAgICBkZXZ0b29sczogeyBoaWRlOiB0cnVlIH0sXG5cbiAgICBzZXR1cCAoKSB7XG4gICAgICByZXR1cm4gKCkgPT4gaCgnZGl2JywgeyBjbGFzczogJ3Etbm90aWZpY2F0aW9ucycgfSwgcG9zaXRpb25MaXN0Lm1hcChwb3MgPT4ge1xuICAgICAgICByZXR1cm4gaChUcmFuc2l0aW9uR3JvdXAsIHtcbiAgICAgICAgICBrZXk6IHBvcyxcbiAgICAgICAgICBjbGFzczogcG9zaXRpb25DbGFzc1sgcG9zIF0sXG4gICAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgICBuYW1lOiBgcS1ub3RpZmljYXRpb24tLSR7IHBvcyB9YFxuICAgICAgICB9LCAoKSA9PiBub3RpZmljYXRpb25zTGlzdFsgcG9zIF0udmFsdWUubWFwKG5vdGlmID0+IHtcbiAgICAgICAgICBjb25zdCBtZXRhID0gbm90aWYubWV0YVxuICAgICAgICAgIGNvbnN0IG1haW5DaGlsZCA9IFtdXG5cbiAgICAgICAgICBpZiAobWV0YS5oYXNNZWRpYSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKG5vdGlmLnNwaW5uZXIgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIG1haW5DaGlsZC5wdXNoKFxuICAgICAgICAgICAgICAgIGgobm90aWYuc3Bpbm5lciwge1xuICAgICAgICAgICAgICAgICAgY2xhc3M6ICdxLW5vdGlmaWNhdGlvbl9fc3Bpbm5lciBxLW5vdGlmaWNhdGlvbl9fc3Bpbm5lci0tJyArIG1ldGEubGVmdENsYXNzLFxuICAgICAgICAgICAgICAgICAgY29sb3I6IG5vdGlmLnNwaW5uZXJDb2xvcixcbiAgICAgICAgICAgICAgICAgIHNpemU6IG5vdGlmLnNwaW5uZXJTaXplXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm90aWYuaWNvbikge1xuICAgICAgICAgICAgICBtYWluQ2hpbGQucHVzaChcbiAgICAgICAgICAgICAgICBoKFFJY29uLCB7XG4gICAgICAgICAgICAgICAgICBjbGFzczogJ3Etbm90aWZpY2F0aW9uX19pY29uIHEtbm90aWZpY2F0aW9uX19pY29uLS0nICsgbWV0YS5sZWZ0Q2xhc3MsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBub3RpZi5pY29uLFxuICAgICAgICAgICAgICAgICAgY29sb3I6IG5vdGlmLmljb25Db2xvcixcbiAgICAgICAgICAgICAgICAgIHNpemU6IG5vdGlmLmljb25TaXplLFxuICAgICAgICAgICAgICAgICAgcm9sZTogJ2ltZydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub3RpZi5hdmF0YXIpIHtcbiAgICAgICAgICAgICAgbWFpbkNoaWxkLnB1c2goXG4gICAgICAgICAgICAgICAgaChRQXZhdGFyLCB7XG4gICAgICAgICAgICAgICAgICBjbGFzczogJ3Etbm90aWZpY2F0aW9uX19hdmF0YXIgcS1ub3RpZmljYXRpb25fX2F2YXRhci0tJyArIG1ldGEubGVmdENsYXNzXG4gICAgICAgICAgICAgICAgfSwgKCkgPT4gaCgnaW1nJywgeyBzcmM6IG5vdGlmLmF2YXRhciwgJ2FyaWEtaGlkZGVuJzogJ3RydWUnIH0pKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG1ldGEuaGFzVGV4dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgbGV0IG1zZ0NoaWxkXG4gICAgICAgICAgICBjb25zdCBtc2dEYXRhID0geyBjbGFzczogJ3Etbm90aWZpY2F0aW9uX19tZXNzYWdlIGNvbCcgfVxuXG4gICAgICAgICAgICBpZiAobm90aWYuaHRtbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBtc2dEYXRhLmlubmVySFRNTCA9IG5vdGlmLmNhcHRpb25cbiAgICAgICAgICAgICAgICA/IGA8ZGl2PiR7IG5vdGlmLm1lc3NhZ2UgfTwvZGl2PjxkaXYgY2xhc3M9XCJxLW5vdGlmaWNhdGlvbl9fY2FwdGlvblwiPiR7IG5vdGlmLmNhcHRpb24gfTwvZGl2PmBcbiAgICAgICAgICAgICAgICA6IG5vdGlmLm1lc3NhZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBtc2dOb2RlID0gWyBub3RpZi5tZXNzYWdlIF1cbiAgICAgICAgICAgICAgbXNnQ2hpbGQgPSBub3RpZi5jYXB0aW9uXG4gICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgIGgoJ2RpdicsIG1zZ05vZGUpLFxuICAgICAgICAgICAgICAgICAgICBoKCdkaXYnLCB7IGNsYXNzOiAncS1ub3RpZmljYXRpb25fX2NhcHRpb24nIH0sIFsgbm90aWYuY2FwdGlvbiBdKVxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIDogbXNnTm9kZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYWluQ2hpbGQucHVzaChcbiAgICAgICAgICAgICAgaCgnZGl2JywgbXNnRGF0YSwgbXNnQ2hpbGQpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgY2hpbGQgPSBbXG4gICAgICAgICAgICBoKCdkaXYnLCB7IGNsYXNzOiBtZXRhLmNvbnRlbnRDbGFzcyB9LCBtYWluQ2hpbGQpXG4gICAgICAgICAgXVxuXG4gICAgICAgICAgbm90aWYucHJvZ3Jlc3MgPT09IHRydWUgJiYgY2hpbGQucHVzaChcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAga2V5OiBgJHsgbWV0YS51aWQgfXxwfCR7IG1ldGEuYmFkZ2UgfWAsXG4gICAgICAgICAgICAgIGNsYXNzOiBtZXRhLnByb2dyZXNzQ2xhc3MsXG4gICAgICAgICAgICAgIHN0eWxlOiBtZXRhLnByb2dyZXNzU3R5bGVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgbm90aWYuYWN0aW9ucyAhPT0gdm9pZCAwICYmIGNoaWxkLnB1c2goXG4gICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgIGNsYXNzOiBtZXRhLmFjdGlvbnNDbGFzc1xuICAgICAgICAgICAgfSwgbm90aWYuYWN0aW9ucy5tYXAocHJvcHMgPT4gaChRQnRuLCBwcm9wcykpKVxuICAgICAgICAgIClcblxuICAgICAgICAgIG1ldGEuYmFkZ2UgPiAxICYmIGNoaWxkLnB1c2goXG4gICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgIGtleTogYCR7IG1ldGEudWlkIH18JHsgbWV0YS5iYWRnZSB9YCxcbiAgICAgICAgICAgICAgY2xhc3M6IG5vdGlmLm1ldGEuYmFkZ2VDbGFzcyxcbiAgICAgICAgICAgICAgc3R5bGU6IG5vdGlmLmJhZGdlU3R5bGVcbiAgICAgICAgICAgIH0sIFsgbWV0YS5iYWRnZSBdKVxuICAgICAgICAgIClcblxuICAgICAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgICAgICByZWY6IGVsID0+IHsgbm90aWZSZWZzWyAnJyArIG1ldGEudWlkIF0gPSBlbCB9LFxuICAgICAgICAgICAga2V5OiBtZXRhLnVpZCxcbiAgICAgICAgICAgIGNsYXNzOiBtZXRhLmNsYXNzLFxuICAgICAgICAgICAgLi4ubWV0YS5hdHRyc1xuICAgICAgICAgIH0sIFtcbiAgICAgICAgICAgIGgoJ2RpdicsIHsgY2xhc3M6IG1ldGEud3JhcHBlckNsYXNzIH0sIGNoaWxkKVxuICAgICAgICAgIF0pXG4gICAgICAgIH0pKVxuICAgICAgfSkpXG4gICAgfVxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHNldERlZmF1bHRzIChvcHRzKSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSkge1xuICAgICAgaXNPYmplY3Qob3B0cykgPT09IHRydWUgJiYgT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgb3B0cylcbiAgICB9XG4gIH0sXG5cbiAgcmVnaXN0ZXJUeXBlICh0eXBlTmFtZSwgdHlwZU9wdHMpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlICYmIGlzT2JqZWN0KHR5cGVPcHRzKSA9PT0gdHJ1ZSkge1xuICAgICAgbm90aWZUeXBlc1sgdHlwZU5hbWUgXSA9IHR5cGVPcHRzXG4gICAgfVxuICB9LFxuXG4gIGluc3RhbGwgKHsgJHEsIHBhcmVudEFwcCB9KSB7XG4gICAgJHEubm90aWZ5ID0gdGhpcy5jcmVhdGUgPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgICAgID8gbm9vcFxuICAgICAgOiBvcHRzID0+IGFkZE5vdGlmaWNhdGlvbihvcHRzLCAkcSlcblxuICAgICRxLm5vdGlmeS5zZXREZWZhdWx0cyA9IHRoaXMuc2V0RGVmYXVsdHNcbiAgICAkcS5ub3RpZnkucmVnaXN0ZXJUeXBlID0gdGhpcy5yZWdpc3RlclR5cGVcblxuICAgIGlmICgkcS5jb25maWcubm90aWZ5ICE9PSB2b2lkIDApIHtcbiAgICAgIHRoaXMuc2V0RGVmYXVsdHMoJHEuY29uZmlnLm5vdGlmeSlcbiAgICB9XG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlICYmIHRoaXMuX19pbnN0YWxsZWQgIT09IHRydWUpIHtcbiAgICAgIHBvc2l0aW9uTGlzdC5mb3JFYWNoKHBvcyA9PiB7XG4gICAgICAgIG5vdGlmaWNhdGlvbnNMaXN0WyBwb3MgXSA9IHJlZihbXSlcblxuICAgICAgICBjb25zdFxuICAgICAgICAgIHZlcnQgPSBbICdsZWZ0JywgJ2NlbnRlcicsICdyaWdodCcgXS5pbmNsdWRlcyhwb3MpID09PSB0cnVlID8gJ2NlbnRlcicgOiAocG9zLmluZGV4T2YoJ3RvcCcpID4gLTEgPyAndG9wJyA6ICdib3R0b20nKSxcbiAgICAgICAgICBhbGlnbiA9IHBvcy5pbmRleE9mKCdsZWZ0JykgPiAtMSA/ICdzdGFydCcgOiAocG9zLmluZGV4T2YoJ3JpZ2h0JykgPiAtMSA/ICdlbmQnIDogJ2NlbnRlcicpLFxuICAgICAgICAgIGNsYXNzZXMgPSBbICdsZWZ0JywgJ3JpZ2h0JyBdLmluY2x1ZGVzKHBvcykgPyBgaXRlbXMtJHsgcG9zID09PSAnbGVmdCcgPyAnc3RhcnQnIDogJ2VuZCcgfSBqdXN0aWZ5LWNlbnRlcmAgOiAocG9zID09PSAnY2VudGVyJyA/ICdmbGV4LWNlbnRlcicgOiBgaXRlbXMtJHsgYWxpZ24gfWApXG5cbiAgICAgICAgcG9zaXRpb25DbGFzc1sgcG9zIF0gPSBgcS1ub3RpZmljYXRpb25zX19saXN0IHEtbm90aWZpY2F0aW9uc19fbGlzdC0tJHsgdmVydCB9IGZpeGVkIGNvbHVtbiBuby13cmFwICR7IGNsYXNzZXMgfWBcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGVsID0gY3JlYXRlR2xvYmFsTm9kZSgncS1ub3RpZnknKVxuICAgICAgY3JlYXRlQ2hpbGRBcHAoZ2V0Q29tcG9uZW50KCksIHBhcmVudEFwcCkubW91bnQoZWwpXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vZXZlbnQuanMnXG5pbXBvcnQgeyBpc0RhdGUsIGlzUmVnZXhwIH0gZnJvbSAnLi4vaXMuanMnXG5cbmZ1bmN0aW9uIGVuY29kZSAodmFsdWUpIHtcbiAgaWYgKGlzRGF0ZSh2YWx1ZSkgPT09IHRydWUpIHtcbiAgICByZXR1cm4gJ19fcV9kYXRlfCcgKyB2YWx1ZS50b1VUQ1N0cmluZygpXG4gIH1cbiAgaWYgKGlzUmVnZXhwKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiAnX19xX2V4cHJ8JyArIHZhbHVlLnNvdXJjZVxuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuICdfX3FfbnVtYnwnICsgdmFsdWVcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gJ19fcV9ib29sfCcgKyAodmFsdWUgPyAnMScgOiAnMCcpXG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gJ19fcV9zdHJufCcgKyB2YWx1ZVxuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gJ19fcV9zdHJufCcgKyB2YWx1ZS50b1N0cmluZygpXG4gIH1cbiAgaWYgKHZhbHVlID09PSBPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuICdfX3Ffb2JqdHwnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpXG4gIH1cblxuICAvLyBobW0sIHdlIGRvbid0IGtub3cgd2hhdCB0byBkbyB3aXRoIGl0LFxuICAvLyBzbyBqdXN0IHJldHVybiBpdCBhcyBpc1xuICByZXR1cm4gdmFsdWVcbn1cblxuZnVuY3Rpb24gZGVjb2RlICh2YWx1ZSkge1xuICBjb25zdCBsZW5ndGggPSB2YWx1ZS5sZW5ndGhcbiAgaWYgKGxlbmd0aCA8IDkpIHtcbiAgICAvLyB0aGVuIGl0IHdhc24ndCBlbmNvZGVkIGJ5IHVzXG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBjb25zdCB0eXBlID0gdmFsdWUuc3Vic3RyaW5nKDAsIDgpXG4gIGNvbnN0IHNvdXJjZSA9IHZhbHVlLnN1YnN0cmluZyg5KVxuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ19fcV9kYXRlJzpcbiAgICAgIHJldHVybiBuZXcgRGF0ZShzb3VyY2UpXG5cbiAgICBjYXNlICdfX3FfZXhwcic6XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChzb3VyY2UpXG5cbiAgICBjYXNlICdfX3FfbnVtYic6XG4gICAgICByZXR1cm4gTnVtYmVyKHNvdXJjZSlcblxuICAgIGNhc2UgJ19fcV9ib29sJzpcbiAgICAgIHJldHVybiBCb29sZWFuKHNvdXJjZSA9PT0gJzEnKVxuXG4gICAgY2FzZSAnX19xX3N0cm4nOlxuICAgICAgcmV0dXJuICcnICsgc291cmNlXG5cbiAgICBjYXNlICdfX3Ffb2JqdCc6XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShzb3VyY2UpXG5cbiAgICBkZWZhdWx0OlxuICAgICAgLy8gaG1tLCB3ZSByZWFjaGVkIGhlcmUsIHdlIGRvbid0IGtub3cgdGhlIHR5cGUsXG4gICAgICAvLyB0aGVuIGl0IG1lYW5zIGl0IHdhc24ndCBlbmNvZGVkIGJ5IHVzLCBzbyBqdXN0XG4gICAgICAvLyByZXR1cm4gd2hhdGV2ZXIgdmFsdWUgaXQgaXNcbiAgICAgIHJldHVybiB2YWx1ZVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbXB0eVN0b3JhZ2UgKCkge1xuICBjb25zdCBnZXRWYWwgPSAoKSA9PiBudWxsXG5cbiAgcmV0dXJuIHtcbiAgICBoYXM6ICgpID0+IGZhbHNlLFxuICAgIGdldExlbmd0aDogKCkgPT4gMCxcbiAgICBnZXRJdGVtOiBnZXRWYWwsXG4gICAgZ2V0SW5kZXg6IGdldFZhbCxcbiAgICBnZXRLZXk6IGdldFZhbCxcbiAgICBnZXRBbGw6ICgpID0+IHt9LFxuICAgIGdldEFsbEtleXM6ICgpID0+IFtdLFxuICAgIHNldDogbm9vcCxcbiAgICByZW1vdmU6IG5vb3AsXG4gICAgY2xlYXI6IG5vb3AsXG4gICAgaXNFbXB0eTogKCkgPT4gdHJ1ZVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdG9yYWdlICh0eXBlKSB7XG4gIGNvbnN0XG4gICAgd2ViU3RvcmFnZSA9IHdpbmRvd1sgdHlwZSArICdTdG9yYWdlJyBdLFxuICAgIGdldCA9IGtleSA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gd2ViU3RvcmFnZS5nZXRJdGVtKGtleSlcbiAgICAgIHJldHVybiBpdGVtXG4gICAgICAgID8gZGVjb2RlKGl0ZW0pXG4gICAgICAgIDogbnVsbFxuICAgIH1cblxuICByZXR1cm4ge1xuICAgIGhhczoga2V5ID0+IHdlYlN0b3JhZ2UuZ2V0SXRlbShrZXkpICE9PSBudWxsLFxuICAgIGdldExlbmd0aDogKCkgPT4gd2ViU3RvcmFnZS5sZW5ndGgsXG4gICAgZ2V0SXRlbTogZ2V0LFxuICAgIGdldEluZGV4OiBpbmRleCA9PiB7XG4gICAgICByZXR1cm4gaW5kZXggPCB3ZWJTdG9yYWdlLmxlbmd0aFxuICAgICAgICA/IGdldCh3ZWJTdG9yYWdlLmtleShpbmRleCkpXG4gICAgICAgIDogbnVsbFxuICAgIH0sXG4gICAgZ2V0S2V5OiBpbmRleCA9PiB7XG4gICAgICByZXR1cm4gaW5kZXggPCB3ZWJTdG9yYWdlLmxlbmd0aFxuICAgICAgICA/IHdlYlN0b3JhZ2Uua2V5KGluZGV4KVxuICAgICAgICA6IG51bGxcbiAgICB9LFxuICAgIGdldEFsbDogKCkgPT4ge1xuICAgICAgbGV0IGtleVxuICAgICAgY29uc3QgcmVzdWx0ID0ge30sIGxlbiA9IHdlYlN0b3JhZ2UubGVuZ3RoXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAga2V5ID0gd2ViU3RvcmFnZS5rZXkoaSlcbiAgICAgICAgcmVzdWx0WyBrZXkgXSA9IGdldChrZXkpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9LFxuICAgIGdldEFsbEtleXM6ICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFtdLCBsZW4gPSB3ZWJTdG9yYWdlLmxlbmd0aFxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHdlYlN0b3JhZ2Uua2V5KGkpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSxcbiAgICBzZXQ6IChrZXksIHZhbHVlKSA9PiB7IHdlYlN0b3JhZ2Uuc2V0SXRlbShrZXksIGVuY29kZSh2YWx1ZSkpIH0sXG4gICAgcmVtb3ZlOiBrZXkgPT4geyB3ZWJTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KSB9LFxuICAgIGNsZWFyOiAoKSA9PiB7IHdlYlN0b3JhZ2UuY2xlYXIoKSB9LFxuICAgIGlzRW1wdHk6ICgpID0+IHdlYlN0b3JhZ2UubGVuZ3RoID09PSAwXG4gIH1cbn1cbiIsImltcG9ydCB7IGNsaWVudCB9IGZyb20gJy4vUGxhdGZvcm0uanMnXG5pbXBvcnQgeyBnZXRFbXB0eVN0b3JhZ2UsIGdldFN0b3JhZ2UgfSBmcm9tICcuLi91dGlscy9wcml2YXRlL3dlYi1zdG9yYWdlLmpzJ1xuXG5jb25zdCBzdG9yYWdlID0gX19RVUFTQVJfU1NSX1NFUlZFUl9fIHx8IGNsaWVudC5oYXMud2ViU3RvcmFnZSA9PT0gZmFsc2VcbiAgPyBnZXRFbXB0eVN0b3JhZ2UoKVxuICA6IGdldFN0b3JhZ2UoJ2xvY2FsJylcblxuY29uc3QgUGx1Z2luID0ge1xuICBpbnN0YWxsICh7ICRxIH0pIHtcbiAgICAkcS5sb2NhbFN0b3JhZ2UgPSBzdG9yYWdlXG4gIH1cbn1cblxuT2JqZWN0LmFzc2lnbihQbHVnaW4sIHN0b3JhZ2UpXG5cbmV4cG9ydCBkZWZhdWx0IFBsdWdpblxuIiwiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSAnLi9QbGF0Zm9ybS5qcydcbmltcG9ydCB7IGdldEVtcHR5U3RvcmFnZSwgZ2V0U3RvcmFnZSB9IGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvd2ViLXN0b3JhZ2UuanMnXG5cbmNvbnN0IHN0b3JhZ2UgPSBfX1FVQVNBUl9TU1JfU0VSVkVSX18gfHwgY2xpZW50Lmhhcy53ZWJTdG9yYWdlID09PSBmYWxzZVxuICA/IGdldEVtcHR5U3RvcmFnZSgpXG4gIDogZ2V0U3RvcmFnZSgnc2Vzc2lvbicpXG5cbmNvbnN0IFBsdWdpbiA9IHtcbiAgaW5zdGFsbCAoeyAkcSB9KSB7XG4gICAgJHEuc2Vzc2lvblN0b3JhZ2UgPSBzdG9yYWdlXG4gIH1cbn1cblxuT2JqZWN0LmFzc2lnbihQbHVnaW4sIHN0b3JhZ2UpXG5cbmV4cG9ydCBkZWZhdWx0IFBsdWdpblxuIiwiY29uc3RcbiAgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLFxuICBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICBub3RQbGFpbk9iamVjdCA9IG5ldyBTZXQoXG4gICAgWyAnQm9vbGVhbicsICdOdW1iZXInLCAnU3RyaW5nJywgJ0Z1bmN0aW9uJywgJ0FycmF5JywgJ0RhdGUnLCAnUmVnRXhwJyBdXG4gICAgICAubWFwKG5hbWUgPT4gJ1tvYmplY3QgJyArIG5hbWUgKyAnXScpXG4gIClcblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCAob2JqKSB7XG4gIGlmIChvYmogIT09IE9iamVjdChvYmopIHx8IG5vdFBsYWluT2JqZWN0Lmhhcyh0b1N0cmluZy5jYWxsKG9iaikpID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoXG4gICAgb2JqLmNvbnN0cnVjdG9yXG4gICAgJiYgaGFzT3duLmNhbGwob2JqLCAnY29uc3RydWN0b3InKSA9PT0gZmFsc2VcbiAgICAmJiBoYXNPd24uY2FsbChvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCAnaXNQcm90b3R5cGVPZicpID09PSBmYWxzZVxuICApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGxldCBrZXlcbiAgZm9yIChrZXkgaW4gb2JqKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgcmV0dXJuIGtleSA9PT0gdm9pZCAwIHx8IGhhc093bi5jYWxsKG9iaiwga2V5KVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBleHRlbmQgKCkge1xuICBsZXRcbiAgICBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcbiAgICB0YXJnZXQgPSBhcmd1bWVudHNbIDAgXSB8fCB7fSxcbiAgICBpID0gMSxcbiAgICBkZWVwID0gZmFsc2VcbiAgY29uc3QgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aFxuXG4gIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnYm9vbGVhbicpIHtcbiAgICBkZWVwID0gdGFyZ2V0XG4gICAgdGFyZ2V0ID0gYXJndW1lbnRzWyAxIF0gfHwge31cbiAgICBpID0gMlxuICB9XG5cbiAgaWYgKE9iamVjdCh0YXJnZXQpICE9PSB0YXJnZXQgJiYgdHlwZW9mIHRhcmdldCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRhcmdldCA9IHt9XG4gIH1cblxuICBpZiAobGVuZ3RoID09PSBpKSB7XG4gICAgdGFyZ2V0ID0gdGhpc1xuICAgIGktLVxuICB9XG5cbiAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICgob3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdKSAhPT0gbnVsbCkge1xuICAgICAgZm9yIChuYW1lIGluIG9wdGlvbnMpIHtcbiAgICAgICAgc3JjID0gdGFyZ2V0WyBuYW1lIF1cbiAgICAgICAgY29weSA9IG9wdGlvbnNbIG5hbWUgXVxuXG4gICAgICAgIGlmICh0YXJnZXQgPT09IGNvcHkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGRlZXAgPT09IHRydWVcbiAgICAgICAgICAmJiBjb3B5XG4gICAgICAgICAgJiYgKChjb3B5SXNBcnJheSA9IEFycmF5LmlzQXJyYXkoY29weSkpIHx8IGlzUGxhaW5PYmplY3QoY29weSkgPT09IHRydWUpXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChjb3B5SXNBcnJheSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2xvbmUgPSBBcnJheS5pc0FycmF5KHNyYykgPT09IHRydWUgPyBzcmMgOiBbXVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNsb25lID0gaXNQbGFpbk9iamVjdChzcmMpID09PSB0cnVlID8gc3JjIDoge31cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0YXJnZXRbIG5hbWUgXSA9IGV4dGVuZChkZWVwLCBjbG9uZSwgY29weSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb3B5ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0YXJnZXRbIG5hbWUgXSA9IGNvcHlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXRcbn1cbiIsImltcG9ydCB7IGlzUnVudGltZVNzclByZUh5ZHJhdGlvbiB9IGZyb20gJy4vUGxhdGZvcm0uanMnXG5pbXBvcnQgZXh0ZW5kIGZyb20gJy4uL3V0aWxzL2V4dGVuZC5qcydcblxubGV0IHVwZGF0ZUlkLCBjdXJyZW50Q2xpZW50TWV0YVxuZXhwb3J0IGNvbnN0IGNsaWVudExpc3QgPSBbXVxuXG5mdW5jdGlvbiBub3JtYWxpemUgKG1ldGEpIHtcbiAgaWYgKG1ldGEudGl0bGUpIHtcbiAgICBtZXRhLnRpdGxlID0gbWV0YS50aXRsZVRlbXBsYXRlXG4gICAgICA/IG1ldGEudGl0bGVUZW1wbGF0ZShtZXRhLnRpdGxlKVxuICAgICAgOiBtZXRhLnRpdGxlXG4gICAgZGVsZXRlIG1ldGEudGl0bGVUZW1wbGF0ZVxuICB9XG5cbiAgO1sgWyAnbWV0YScsICdjb250ZW50JyBdLCBbICdsaW5rJywgJ2hyZWYnIF0gXS5mb3JFYWNoKHR5cGUgPT4ge1xuICAgIGNvbnN0XG4gICAgICBtZXRhVHlwZSA9IG1ldGFbIHR5cGVbIDAgXSBdLFxuICAgICAgbWV0YVByb3AgPSB0eXBlWyAxIF1cblxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBtZXRhVHlwZSkge1xuICAgICAgY29uc3QgbWV0YUxpbmsgPSBtZXRhVHlwZVsgbmFtZSBdXG5cbiAgICAgIGlmIChtZXRhTGluay50ZW1wbGF0ZSkge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMobWV0YUxpbmspLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGRlbGV0ZSBtZXRhVHlwZVsgbmFtZSBdXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbWV0YUxpbmtbIG1ldGFQcm9wIF0gPSBtZXRhTGluay50ZW1wbGF0ZShtZXRhTGlua1sgbWV0YVByb3AgXSB8fCAnJylcbiAgICAgICAgICBkZWxldGUgbWV0YUxpbmsudGVtcGxhdGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cblxuZnVuY3Rpb24gY2hhbmdlZCAob2xkLCBkZWYpIHtcbiAgaWYgKE9iamVjdC5rZXlzKG9sZCkubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhkZWYpLmxlbmd0aCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgZm9yIChjb25zdCBrZXkgaW4gb2xkKSB7XG4gICAgaWYgKG9sZFsga2V5IF0gIT09IGRlZlsga2V5IF0pIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGJvZHlGaWx0ZXIgKG5hbWUpIHtcbiAgcmV0dXJuIFsgJ2NsYXNzJywgJ3N0eWxlJyBdLmluY2x1ZGVzKG5hbWUpID09PSBmYWxzZVxufVxuXG5mdW5jdGlvbiBodG1sRmlsdGVyIChuYW1lKSB7XG4gIHJldHVybiBbICdsYW5nJywgJ2RpcicgXS5pbmNsdWRlcyhuYW1lKSA9PT0gZmFsc2Vcbn1cblxuZnVuY3Rpb24gZGlmZiAobWV0YSwgb3RoZXIpIHtcbiAgY29uc3QgYWRkID0ge30sIHJlbW92ZSA9IHt9XG5cbiAgaWYgKG1ldGEgPT09IHZvaWQgMCkge1xuICAgIHJldHVybiB7IGFkZDogb3RoZXIsIHJlbW92ZSB9XG4gIH1cblxuICBpZiAobWV0YS50aXRsZSAhPT0gb3RoZXIudGl0bGUpIHtcbiAgICBhZGQudGl0bGUgPSBvdGhlci50aXRsZVxuICB9XG5cbiAgO1sgJ21ldGEnLCAnbGluaycsICdzY3JpcHQnLCAnaHRtbEF0dHInLCAnYm9keUF0dHInIF0uZm9yRWFjaCh0eXBlID0+IHtcbiAgICBjb25zdCBvbGQgPSBtZXRhWyB0eXBlIF0sIGN1ciA9IG90aGVyWyB0eXBlIF1cbiAgICByZW1vdmVbIHR5cGUgXSA9IFtdXG5cbiAgICBpZiAob2xkID09PSB2b2lkIDAgfHwgb2xkID09PSBudWxsKSB7XG4gICAgICBhZGRbIHR5cGUgXSA9IGN1clxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYWRkWyB0eXBlIF0gPSB7fVxuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2xkKSB7XG4gICAgICBpZiAoY3VyLmhhc093blByb3BlcnR5KGtleSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJlbW92ZVsgdHlwZSBdLnB1c2goa2V5KVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjdXIpIHtcbiAgICAgIGlmIChvbGQuaGFzT3duUHJvcGVydHkoa2V5KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYWRkWyB0eXBlIF1bIGtleSBdID0gY3VyWyBrZXkgXVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoY2hhbmdlZChvbGRbIGtleSBdLCBjdXJbIGtleSBdKSA9PT0gdHJ1ZSkge1xuICAgICAgICByZW1vdmVbIHR5cGUgXS5wdXNoKGtleSlcbiAgICAgICAgYWRkWyB0eXBlIF1bIGtleSBdID0gY3VyWyBrZXkgXVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4geyBhZGQsIHJlbW92ZSB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5ICh7IGFkZCwgcmVtb3ZlIH0pIHtcbiAgaWYgKGFkZC50aXRsZSkge1xuICAgIGRvY3VtZW50LnRpdGxlID0gYWRkLnRpdGxlXG4gIH1cblxuICBpZiAoT2JqZWN0LmtleXMocmVtb3ZlKS5sZW5ndGggPiAwKSB7XG4gICAgWyAnbWV0YScsICdsaW5rJywgJ3NjcmlwdCcgXS5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgcmVtb3ZlWyB0eXBlIF0uZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKGAkeyB0eXBlIH1bZGF0YS1xbWV0YT1cIiR7IG5hbWUgfVwiXWApLnJlbW92ZSgpXG4gICAgICB9KVxuICAgIH0pXG4gICAgcmVtb3ZlLmh0bWxBdHRyLmZpbHRlcihodG1sRmlsdGVyKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKVxuICAgIH0pXG4gICAgcmVtb3ZlLmJvZHlBdHRyLmZpbHRlcihib2R5RmlsdGVyKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUobmFtZSlcbiAgICB9KVxuICB9XG5cbiAgO1sgJ21ldGEnLCAnbGluaycsICdzY3JpcHQnIF0uZm9yRWFjaCh0eXBlID0+IHtcbiAgICBjb25zdCBtZXRhVHlwZSA9IGFkZFsgdHlwZSBdXG5cbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gbWV0YVR5cGUpIHtcbiAgICAgIGNvbnN0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSlcbiAgICAgIGZvciAoY29uc3QgYXR0IGluIG1ldGFUeXBlWyBuYW1lIF0pIHtcbiAgICAgICAgaWYgKGF0dCAhPT0gJ2lubmVySFRNTCcpIHtcbiAgICAgICAgICB0YWcuc2V0QXR0cmlidXRlKGF0dCwgbWV0YVR5cGVbIG5hbWUgXVsgYXR0IF0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRhZy5zZXRBdHRyaWJ1dGUoJ2RhdGEtcW1ldGEnLCBuYW1lKVxuICAgICAgaWYgKHR5cGUgPT09ICdzY3JpcHQnKSB7XG4gICAgICAgIHRhZy5pbm5lckhUTUwgPSBtZXRhVHlwZVsgbmFtZSBdLmlubmVySFRNTCB8fCAnJ1xuICAgICAgfVxuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0YWcpXG4gICAgfVxuICB9KVxuICBPYmplY3Qua2V5cyhhZGQuaHRtbEF0dHIpLmZpbHRlcihodG1sRmlsdGVyKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgYWRkLmh0bWxBdHRyWyBuYW1lIF0gfHwgJycpXG4gIH0pXG4gIE9iamVjdC5rZXlzKGFkZC5ib2R5QXR0cikuZmlsdGVyKGJvZHlGaWx0ZXIpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUobmFtZSwgYWRkLmJvZHlBdHRyWyBuYW1lIF0gfHwgJycpXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGdldEF0dHIgKHNlZWQpIHtcbiAgcmV0dXJuIGF0dCA9PiB7XG4gICAgY29uc3QgdmFsID0gc2VlZFsgYXR0IF1cbiAgICByZXR1cm4gYXR0ICsgKHZhbCAhPT0gdHJ1ZSAmJiB2YWwgIT09IHZvaWQgMCA/IGA9XCIkeyB2YWwgfVwiYCA6ICcnKVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEhlYWQgKG1ldGEpIHtcbiAgbGV0IG91dHB1dCA9ICcnXG4gIGlmIChtZXRhLnRpdGxlKSB7XG4gICAgb3V0cHV0ICs9IGA8dGl0bGU+JHsgbWV0YS50aXRsZSB9PC90aXRsZT5gXG4gIH1cbiAgO1sgJ21ldGEnLCAnbGluaycsICdzY3JpcHQnIF0uZm9yRWFjaCh0eXBlID0+IHtcbiAgICBjb25zdCBtZXRhVHlwZSA9IG1ldGFbIHR5cGUgXVxuXG4gICAgZm9yIChjb25zdCBhdHQgaW4gbWV0YVR5cGUpIHtcbiAgICAgIGNvbnN0IGF0dHJzID0gT2JqZWN0LmtleXMobWV0YVR5cGVbIGF0dCBdKVxuICAgICAgICAuZmlsdGVyKGF0dCA9PiBhdHQgIT09ICdpbm5lckhUTUwnKVxuICAgICAgICAubWFwKGdldEF0dHIobWV0YVR5cGVbIGF0dCBdKSlcblxuICAgICAgb3V0cHV0ICs9IGA8JHsgdHlwZSB9ICR7IGF0dHJzLmpvaW4oJyAnKSB9IGRhdGEtcW1ldGE9XCIkeyBhdHQgfVwiPmBcbiAgICAgIGlmICh0eXBlID09PSAnc2NyaXB0Jykge1xuICAgICAgICBvdXRwdXQgKz0gKG1ldGFUeXBlWyBhdHQgXS5pbm5lckhUTUwgfHwgJycpICsgJzwvc2NyaXB0PidcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIHJldHVybiBvdXRwdXRcbn1cblxuZnVuY3Rpb24gaW5qZWN0U2VydmVyTWV0YSAoc3NyQ29udGV4dCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIHRpdGxlOiAnJyxcbiAgICB0aXRsZVRlbXBsYXRlOiBudWxsLFxuICAgIG1ldGE6IHt9LFxuICAgIGxpbms6IHt9LFxuICAgIGh0bWxBdHRyOiB7fSxcbiAgICBib2R5QXR0cjoge30sXG4gICAgbm9zY3JpcHQ6IHt9XG4gIH1cblxuICBjb25zdCBsaXN0ID0gc3NyQ29udGV4dC5fX3FNZXRhTGlzdFxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGV4dGVuZCh0cnVlLCBkYXRhLCBsaXN0WyBpIF0pXG4gIH1cblxuICBub3JtYWxpemUoZGF0YSlcblxuICBjb25zdCBub25jZSA9IHNzckNvbnRleHQubm9uY2UgIT09IHZvaWQgMFxuICAgID8gYCBub25jZT1cIiR7IHNzckNvbnRleHQubm9uY2UgfVwiYFxuICAgIDogJydcblxuICBjb25zdCBjdHggPSBzc3JDb250ZXh0Ll9tZXRhXG5cbiAgY29uc3QgaHRtbEF0dHIgPSBPYmplY3Qua2V5cyhkYXRhLmh0bWxBdHRyKS5maWx0ZXIoaHRtbEZpbHRlcilcblxuICBpZiAoaHRtbEF0dHIubGVuZ3RoID4gMCkge1xuICAgIGN0eC5odG1sQXR0cnMgKz0gKFxuICAgICAgKGN0eC5odG1sQXR0cnMubGVuZ3RoID4gMCA/ICcgJyA6ICcnKVxuICAgICAgKyBodG1sQXR0ci5tYXAoZ2V0QXR0cihkYXRhLmh0bWxBdHRyKSkuam9pbignICcpXG4gICAgKVxuICB9XG5cbiAgY3R4LmhlYWRUYWdzICs9IGdldEhlYWQoZGF0YSlcblxuICBjb25zdCBib2R5QXR0ciA9IE9iamVjdC5rZXlzKGRhdGEuYm9keUF0dHIpLmZpbHRlcihib2R5RmlsdGVyKVxuXG4gIGlmIChib2R5QXR0ci5sZW5ndGggPiAwKSB7XG4gICAgY3R4LmJvZHlBdHRycyArPSAoXG4gICAgICAoY3R4LmJvZHlBdHRycy5sZW5ndGggPiAwID8gJyAnIDogJycpXG4gICAgICArIGJvZHlBdHRyLm1hcChnZXRBdHRyKGRhdGEuYm9keUF0dHIpKS5qb2luKCcgJylcbiAgICApXG4gIH1cblxuICBjdHguYm9keVRhZ3MgKz0gT2JqZWN0LmtleXMoZGF0YS5ub3NjcmlwdClcbiAgICAubWFwKG5hbWUgPT4gYDxub3NjcmlwdCBkYXRhLXFtZXRhPVwiJHsgbmFtZSB9XCI+JHsgZGF0YS5ub3NjcmlwdFsgbmFtZSBdIH08L25vc2NyaXB0PmApXG4gICAgLmpvaW4oJycpXG4gICAgKyBgPHNjcmlwdCR7IG5vbmNlIH0gaWQ9XCJxbWV0YS1pbml0XCI+d2luZG93Ll9fUV9NRVRBX189JHsgZGVsZXRlIGRhdGEubm9zY3JpcHQgJiYgSlNPTi5zdHJpbmdpZnkoZGF0YSkgfTwvc2NyaXB0PmBcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2xpZW50TWV0YSAoKSB7XG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgdGl0bGU6ICcnLFxuICAgIHRpdGxlVGVtcGxhdGU6IG51bGwsXG4gICAgbWV0YToge30sXG4gICAgbGluazoge30sXG4gICAgc2NyaXB0OiB7fSxcbiAgICBodG1sQXR0cjoge30sXG4gICAgYm9keUF0dHI6IHt9XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNsaWVudExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB7IGFjdGl2ZSwgdmFsIH0gPSBjbGllbnRMaXN0WyBpIF1cblxuICAgIGlmIChhY3RpdmUgPT09IHRydWUpIHtcbiAgICAgIGV4dGVuZCh0cnVlLCBkYXRhLCB2YWwpXG4gICAgfVxuICB9XG5cbiAgbm9ybWFsaXplKGRhdGEpXG5cbiAgYXBwbHkoZGlmZihjdXJyZW50Q2xpZW50TWV0YSwgZGF0YSkpXG4gIGN1cnJlbnRDbGllbnRNZXRhID0gZGF0YVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGxhbkNsaWVudFVwZGF0ZSAoKSB7XG4gIGNsZWFyVGltZW91dCh1cGRhdGVJZClcbiAgdXBkYXRlSWQgPSBzZXRUaW1lb3V0KHVwZGF0ZUNsaWVudE1ldGEsIDUwKVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGluc3RhbGwgKG9wdHMpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgICBjb25zdCB7IHNzckNvbnRleHQgfSA9IG9wdHNcblxuICAgICAgc3NyQ29udGV4dC5fX3FNZXRhTGlzdCA9IFtdXG4gICAgICBzc3JDb250ZXh0Lm9uUmVuZGVyZWQoKCkgPT4ge1xuICAgICAgICBpbmplY3RTZXJ2ZXJNZXRhKHNzckNvbnRleHQpXG4gICAgICB9KVxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLl9faW5zdGFsbGVkICE9PSB0cnVlICYmIGlzUnVudGltZVNzclByZUh5ZHJhdGlvbi52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgY3VycmVudENsaWVudE1ldGEgPSB3aW5kb3cuX19RX01FVEFfX1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3FtZXRhLWluaXQnKS5yZW1vdmUoKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogVEhJUyBGSUxFIElTIEdFTkVSQVRFRCBBVVRPTUFUSUNBTExZLlxuICogRE8gTk9UIEVESVQuXG4gKlxuICogWW91IGFyZSBwcm9iYWJseSBsb29raW5nIG9uIGFkZGluZyBzdGFydHVwL2luaXRpYWxpemF0aW9uIGNvZGUuXG4gKiBVc2UgXCJxdWFzYXIgbmV3IGJvb3QgPG5hbWU+XCIgYW5kIGFkZCBpdCB0aGVyZS5cbiAqIE9uZSBib290IGZpbGUgcGVyIGNvbmNlcm4uIFRoZW4gcmVmZXJlbmNlIHRoZSBmaWxlKHMpIGluIHF1YXNhci5jb25maWcuanMgPiBib290OlxuICogYm9vdDogWydmaWxlJywgLi4uXSAvLyBkbyBub3QgYWRkIFwiLmpzXCIgZXh0ZW5zaW9uIHRvIGl0LlxuICpcbiAqIEJvb3QgZmlsZXMgYXJlIHlvdXIgXCJtYWluLmpzXCJcbiAqKi9cblxuXG5cbmltcG9ydCB7TG9hZGluZ0JhcixOb3RpZnksTG9jYWxTdG9yYWdlLFNlc3Npb25TdG9yYWdlLENvb2tpZXMsTWV0YX0gZnJvbSAncXVhc2FyJ1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgeyBjb25maWc6IHtcImxvYWRpbmdCYXJcIjp7XCJpc0FjdGl2ZVwiOnRydWV9LFwibm90aWZ5XCI6e1widGltZW91dFwiOjUwMDB9fSxwbHVnaW5zOiB7TG9hZGluZ0JhcixOb3RpZnksTG9jYWxTdG9yYWdlLFNlc3Npb25TdG9yYWdlLENvb2tpZXMsTWV0YX0gfVxuXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBUSElTIEZJTEUgSVMgR0VORVJBVEVEIEFVVE9NQVRJQ0FMTFkuXG4gKiBETyBOT1QgRURJVC5cbiAqXG4gKiBZb3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgb24gYWRkaW5nIHN0YXJ0dXAvaW5pdGlhbGl6YXRpb24gY29kZS5cbiAqIFVzZSBcInF1YXNhciBuZXcgYm9vdCA8bmFtZT5cIiBhbmQgYWRkIGl0IHRoZXJlLlxuICogT25lIGJvb3QgZmlsZSBwZXIgY29uY2Vybi4gVGhlbiByZWZlcmVuY2UgdGhlIGZpbGUocykgaW4gcXVhc2FyLmNvbmZpZy5qcyA+IGJvb3Q6XG4gKiBib290OiBbJ2ZpbGUnLCAuLi5dIC8vIGRvIG5vdCBhZGQgXCIuanNcIiBleHRlbnNpb24gdG8gaXQuXG4gKlxuICogQm9vdCBmaWxlcyBhcmUgeW91ciBcIm1haW4uanNcIlxuICoqL1xuXG5pbXBvcnQgeyBMb2FkaW5nQmFyIH0gZnJvbSAncXVhc2FyJ1xuXG5cblxuaW1wb3J0IEFwcCBmcm9tICdhcHAvc3JjL0FwcC52dWUnXG5sZXQgYXBwUHJlZmV0Y2ggPSB0eXBlb2YgQXBwLnByZUZldGNoID09PSAnZnVuY3Rpb24nXG4gID8gQXBwLnByZUZldGNoXG4gIDogKFxuICAgIC8vIENsYXNzIGNvbXBvbmVudHMgcmV0dXJuIHRoZSBjb21wb25lbnQgb3B0aW9ucyAoYW5kIHRoZSBwcmVGZXRjaCBob29rKSBpbnNpZGUgX19jIHByb3BlcnR5XG4gICAgQXBwLl9fYyAhPT0gdm9pZCAwICYmIHR5cGVvZiBBcHAuX19jLnByZUZldGNoID09PSAnZnVuY3Rpb24nXG4gICAgICA/IEFwcC5fX2MucHJlRmV0Y2hcbiAgICAgIDogZmFsc2VcbiAgICApXG5cblxuZnVuY3Rpb24gZ2V0TWF0Y2hlZENvbXBvbmVudHMgKHRvLCByb3V0ZXIpIHtcbiAgY29uc3Qgcm91dGUgPSB0b1xuICAgID8gKHRvLm1hdGNoZWQgPyB0byA6IHJvdXRlci5yZXNvbHZlKHRvKS5yb3V0ZSlcbiAgICA6IHJvdXRlci5jdXJyZW50Um91dGUudmFsdWVcblxuICBpZiAoIXJvdXRlKSB7IHJldHVybiBbXSB9XG5cbiAgY29uc3QgbWF0Y2hlZCA9IHJvdXRlLm1hdGNoZWQuZmlsdGVyKG0gPT4gbS5jb21wb25lbnRzICE9PSB2b2lkIDApXG5cbiAgaWYgKG1hdGNoZWQubGVuZ3RoID09PSAwKSB7IHJldHVybiBbXSB9XG5cbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIG1hdGNoZWQubWFwKG0gPT4ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhtLmNvbXBvbmVudHMpLm1hcChrZXkgPT4ge1xuICAgICAgY29uc3QgY29tcCA9IG0uY29tcG9uZW50c1trZXldXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRoOiBtLnBhdGgsXG4gICAgICAgIGM6IGNvbXBcbiAgICAgIH1cbiAgICB9KVxuICB9KSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFByZUZldGNoSG9va3MgKHsgcm91dGVyLCBzdG9yZSwgcHVibGljUGF0aCB9KSB7XG4gIC8vIEFkZCByb3V0ZXIgaG9vayBmb3IgaGFuZGxpbmcgcHJlRmV0Y2guXG4gIC8vIERvaW5nIGl0IGFmdGVyIGluaXRpYWwgcm91dGUgaXMgcmVzb2x2ZWQgc28gdGhhdCB3ZSBkb24ndCBkb3VibGUtZmV0Y2hcbiAgLy8gdGhlIGRhdGEgdGhhdCB3ZSBhbHJlYWR5IGhhdmUuIFVzaW5nIHJvdXRlci5iZWZvcmVSZXNvbHZlKCkgc28gdGhhdCBhbGxcbiAgLy8gYXN5bmMgY29tcG9uZW50cyBhcmUgcmVzb2x2ZWQuXG4gIHJvdXRlci5iZWZvcmVSZXNvbHZlKCh0bywgZnJvbSwgbmV4dCkgPT4ge1xuICAgIGNvbnN0XG4gICAgICB1cmxQYXRoID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSh3aW5kb3cubG9jYXRpb24ub3JpZ2luLCAnJyksXG4gICAgICBtYXRjaGVkID0gZ2V0TWF0Y2hlZENvbXBvbmVudHModG8sIHJvdXRlciksXG4gICAgICBwcmV2TWF0Y2hlZCA9IGdldE1hdGNoZWRDb21wb25lbnRzKGZyb20sIHJvdXRlcilcblxuICAgIGxldCBkaWZmZWQgPSBmYWxzZVxuICAgIGNvbnN0IHByZUZldGNoTGlzdCA9IG1hdGNoZWRcbiAgICAgIC5maWx0ZXIoKG0sIGkpID0+IHtcbiAgICAgICAgcmV0dXJuIGRpZmZlZCB8fCAoZGlmZmVkID0gKFxuICAgICAgICAgICFwcmV2TWF0Y2hlZFtpXSB8fFxuICAgICAgICAgIHByZXZNYXRjaGVkW2ldLmMgIT09IG0uYyB8fFxuICAgICAgICAgIG0ucGF0aC5pbmRleE9mKCcvOicpID4gLTEgLy8gZG9lcyBpdCBoYXMgcGFyYW1zP1xuICAgICAgICApKVxuICAgICAgfSlcbiAgICAgIC5maWx0ZXIobSA9PiBtLmMgIT09IHZvaWQgMCAmJiAoXG4gICAgICAgIHR5cGVvZiBtLmMucHJlRmV0Y2ggPT09ICdmdW5jdGlvbidcbiAgICAgICAgLy8gQ2xhc3MgY29tcG9uZW50cyByZXR1cm4gdGhlIGNvbXBvbmVudCBvcHRpb25zIChhbmQgdGhlIHByZUZldGNoIGhvb2spIGluc2lkZSBfX2MgcHJvcGVydHlcbiAgICAgICAgfHwgKG0uYy5fX2MgIT09IHZvaWQgMCAmJiB0eXBlb2YgbS5jLl9fYy5wcmVGZXRjaCA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICkpXG4gICAgICAubWFwKG0gPT4gbS5jLl9fYyAhPT0gdm9pZCAwID8gbS5jLl9fYy5wcmVGZXRjaCA6IG0uYy5wcmVGZXRjaClcblxuICAgIFxuICAgIGlmIChhcHBQcmVmZXRjaCAhPT0gZmFsc2UpIHtcbiAgICAgIHByZUZldGNoTGlzdC51bnNoaWZ0KGFwcFByZWZldGNoKVxuICAgICAgYXBwUHJlZmV0Y2ggPSBmYWxzZVxuICAgIH1cbiAgICBcblxuICAgIGlmIChwcmVGZXRjaExpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbmV4dCgpXG4gICAgfVxuXG4gICAgbGV0IGhhc1JlZGlyZWN0ZWQgPSBmYWxzZVxuICAgIGNvbnN0IHJlZGlyZWN0ID0gdXJsID0+IHtcbiAgICAgIGhhc1JlZGlyZWN0ZWQgPSB0cnVlXG4gICAgICBuZXh0KHVybClcbiAgICB9XG4gICAgY29uc3QgcHJvY2VlZCA9ICgpID0+IHtcbiAgICAgIFxuICAgICAgTG9hZGluZ0Jhci5zdG9wKClcbiAgICAgIFxuICAgICAgaWYgKGhhc1JlZGlyZWN0ZWQgPT09IGZhbHNlKSB7IG5leHQoKSB9XG4gICAgfVxuXG4gICAgXG4gICAgTG9hZGluZ0Jhci5zdGFydCgpXG4gICAgXG5cbiAgICBwcmVGZXRjaExpc3QucmVkdWNlKFxuICAgICAgKHByb21pc2UsIHByZUZldGNoKSA9PiBwcm9taXNlLnRoZW4oKCkgPT4gaGFzUmVkaXJlY3RlZCA9PT0gZmFsc2UgJiYgcHJlRmV0Y2goe1xuICAgICAgICBzdG9yZSxcbiAgICAgICAgY3VycmVudFJvdXRlOiB0byxcbiAgICAgICAgcHJldmlvdXNSb3V0ZTogZnJvbSxcbiAgICAgICAgcmVkaXJlY3QsXG4gICAgICAgIHVybFBhdGgsXG4gICAgICAgIHB1YmxpY1BhdGhcbiAgICAgIH0pKSxcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpXG4gICAgKVxuICAgIC50aGVuKHByb2NlZWQpXG4gICAgLmNhdGNoKGUgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlKVxuICAgICAgcHJvY2VlZCgpXG4gICAgfSlcbiAgfSlcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIFRISVMgRklMRSBJUyBHRU5FUkFURUQgQVVUT01BVElDQUxMWS5cbiAqIERPIE5PVCBFRElULlxuICpcbiAqIFlvdSBhcmUgcHJvYmFibHkgbG9va2luZyBvbiBhZGRpbmcgc3RhcnR1cC9pbml0aWFsaXphdGlvbiBjb2RlLlxuICogVXNlIFwicXVhc2FyIG5ldyBib290IDxuYW1lPlwiIGFuZCBhZGQgaXQgdGhlcmUuXG4gKiBPbmUgYm9vdCBmaWxlIHBlciBjb25jZXJuLiBUaGVuIHJlZmVyZW5jZSB0aGUgZmlsZShzKSBpbiBxdWFzYXIuY29uZmlnLmpzID4gYm9vdDpcbiAqIGJvb3Q6IFsnZmlsZScsIC4uLl0gLy8gZG8gbm90IGFkZCBcIi5qc1wiIGV4dGVuc2lvbiB0byBpdC5cbiAqXG4gKiBCb290IGZpbGVzIGFyZSB5b3VyIFwibWFpbi5qc1wiXG4gKiovXG5cblxuaW1wb3J0IHsgY3JlYXRlQXBwIH0gZnJvbSAndnVlJ1xuXG5cblxuXG5cblxuXG5pbXBvcnQgJ0BxdWFzYXIvZXh0cmFzL21kaS12Ny9tZGktdjcuY3NzJ1xuXG5pbXBvcnQgJ0BxdWFzYXIvZXh0cmFzL2ZvbnRhd2Vzb21lLXY2L2ZvbnRhd2Vzb21lLXY2LmNzcydcblxuaW1wb3J0ICdAcXVhc2FyL2V4dHJhcy9yb2JvdG8tZm9udC9yb2JvdG8tZm9udC5jc3MnXG5cbmltcG9ydCAnQHF1YXNhci9leHRyYXMvbWF0ZXJpYWwtaWNvbnMvbWF0ZXJpYWwtaWNvbnMuY3NzJ1xuXG5cblxuXG4vLyBXZSBsb2FkIFF1YXNhciBzdHlsZXNoZWV0IGZpbGVcbmltcG9ydCAncXVhc2FyL2Rpc3QvcXVhc2FyLnNhc3MnXG5cblxuXG5cbmltcG9ydCAnc3JjL2Nzcy9hcHAuc2NzcydcblxuXG5pbXBvcnQgY3JlYXRlUXVhc2FyQXBwIGZyb20gJy4vYXBwLmpzJ1xuaW1wb3J0IHF1YXNhclVzZXJPcHRpb25zIGZyb20gJy4vcXVhc2FyLXVzZXItb3B0aW9ucy5qcydcblxuXG5cblxuaW1wb3J0IHsgYWRkUHJlRmV0Y2hIb29rcyB9IGZyb20gJy4vY2xpZW50LXByZWZldGNoLmpzJ1xuXG5cblxuXG5cblxuY29uc3QgcHVibGljUGF0aCA9IGBgXG5cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0ICh7XG4gIGFwcCxcbiAgcm91dGVyXG4gICwgc3RvcmVcbn0sIGJvb3RGaWxlcykge1xuICBcblxuICBcbiAgbGV0IGhhc1JlZGlyZWN0ZWQgPSBmYWxzZVxuICBjb25zdCBnZXRSZWRpcmVjdFVybCA9IHVybCA9PiB7XG4gICAgdHJ5IHsgcmV0dXJuIHJvdXRlci5yZXNvbHZlKHVybCkuaHJlZiB9XG4gICAgY2F0Y2ggKGVycikge31cblxuICAgIHJldHVybiBPYmplY3QodXJsKSA9PT0gdXJsXG4gICAgICA/IG51bGxcbiAgICAgIDogdXJsXG4gIH1cbiAgY29uc3QgcmVkaXJlY3QgPSB1cmwgPT4ge1xuICAgIGhhc1JlZGlyZWN0ZWQgPSB0cnVlXG5cbiAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycgJiYgL15odHRwcz86XFwvXFwvLy50ZXN0KHVybCkpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBocmVmID0gZ2V0UmVkaXJlY3RVcmwodXJsKVxuXG4gICAgLy8gY29udGludWUgaWYgd2UgZGlkbid0IGZhaWwgdG8gcmVzb2x2ZSB0aGUgdXJsXG4gICAgaWYgKGhyZWYgIT09IG51bGwpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZlxuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgdXJsUGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgJycpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGhhc1JlZGlyZWN0ZWQgPT09IGZhbHNlICYmIGkgPCBib290RmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYm9vdEZpbGVzW2ldKHtcbiAgICAgICAgYXBwLFxuICAgICAgICByb3V0ZXIsXG4gICAgICAgIHN0b3JlLFxuICAgICAgICBzc3JDb250ZXh0OiBudWxsLFxuICAgICAgICByZWRpcmVjdCxcbiAgICAgICAgdXJsUGF0aCxcbiAgICAgICAgcHVibGljUGF0aFxuICAgICAgfSlcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciAmJiBlcnIudXJsKSB7XG4gICAgICAgIHJlZGlyZWN0KGVyci51cmwpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmVycm9yKCdbUXVhc2FyXSBib290IGVycm9yOicsIGVycilcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuXG4gIGlmIChoYXNSZWRpcmVjdGVkID09PSB0cnVlKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgXG5cbiAgYXBwLnVzZShyb3V0ZXIpXG4gIFxuXG4gIFxuXG4gICAgXG4gICAgYWRkUHJlRmV0Y2hIb29rcyh7IHJvdXRlciwgc3RvcmUgfSlcbiAgICBcblxuICAgIFxuICAgICAgYXBwLm1vdW50KCcjcS1hcHAnKVxuICAgIFxuXG4gICAgXG5cbiAgXG5cbn1cblxuY3JlYXRlUXVhc2FyQXBwKGNyZWF0ZUFwcCwgcXVhc2FyVXNlck9wdGlvbnMpXG5cbiAgLnRoZW4oYXBwID0+IHtcbiAgICAvLyBldmVudHVhbGx5IHJlbW92ZSB0aGlzIHdoZW4gQ29yZG92YS9DYXBhY2l0b3IvRWxlY3Ryb24gc3VwcG9ydCBiZWNvbWVzIG9sZFxuICAgIGNvbnN0IFsgbWV0aG9kLCBtYXBGbiBdID0gUHJvbWlzZS5hbGxTZXR0bGVkICE9PSB2b2lkIDBcbiAgICAgID8gW1xuICAgICAgICAnYWxsU2V0dGxlZCcsXG4gICAgICAgIGJvb3RGaWxlcyA9PiBib290RmlsZXMubWFwKHJlc3VsdCA9PiB7XG4gICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdyZWplY3RlZCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tRdWFzYXJdIGJvb3QgZXJyb3I6JywgcmVzdWx0LnJlYXNvbilcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0LnZhbHVlLmRlZmF1bHRcbiAgICAgICAgfSlcbiAgICAgIF1cbiAgICAgIDogW1xuICAgICAgICAnYWxsJyxcbiAgICAgICAgYm9vdEZpbGVzID0+IGJvb3RGaWxlcy5tYXAoZW50cnkgPT4gZW50cnkuZGVmYXVsdClcbiAgICAgIF1cblxuICAgIHJldHVybiBQcm9taXNlWyBtZXRob2QgXShbXG4gICAgICBcbiAgICAgIGltcG9ydCgnYm9vdC9pMThuJyksXG4gICAgICBcbiAgICAgIGltcG9ydCgnYm9vdC9heGlvcycpLFxuICAgICAgXG4gICAgICBpbXBvcnQoJ2Jvb3Qvc2VjcmV0JyksXG4gICAgICBcbiAgICAgIGltcG9ydCgnYm9vdC9oeWRyYXRlX3N0b3JlJyksXG4gICAgICBcbiAgICAgIGltcG9ydCgnYm9vdC9jYXBhY2l0b3JfaHR0cCcpLFxuICAgICAgXG4gICAgICBpbXBvcnQoJ2Jvb3QvYXV0aCcpXG4gICAgICBcbiAgICBdKS50aGVuKGJvb3RGaWxlcyA9PiB7XG4gICAgICBjb25zdCBib290ID0gbWFwRm4oYm9vdEZpbGVzKS5maWx0ZXIoZW50cnkgPT4gdHlwZW9mIGVudHJ5ID09PSAnZnVuY3Rpb24nKVxuICAgICAgc3RhcnQoYXBwLCBib290KVxuICAgIH0pXG4gIH0pXG5cbiJdLCJmaWxlIjoiYXNzZXRzL2luZGV4LmpzIn0=
